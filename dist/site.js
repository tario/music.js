/*
 AngularJS v1.5.0-rc.0
 (c) 2010-2015 Google, Inc. http://angularjs.org
 License: MIT
*/
(function(S,Z,u){'use strict';function P(a){return function(){var b=arguments[0],d;d="["+(a?a+":":"")+b+"] http://errors.angularjs.org/1.5.0-rc.0/"+(a?a+"/":"")+b;for(b=1;b<arguments.length;b++){d=d+(1==b?"?":"&")+"p"+(b-1)+"=";var c=encodeURIComponent,e;e=arguments[b];e="function"==typeof e?e.toString().replace(/ \{[\s\S]*$/,""):"undefined"==typeof e?"undefined":"string"!=typeof e?JSON.stringify(e):e;d+=c(e)}return Error(d)}}function Ca(a){if(null==a||Za(a))return!1;if(K(a)||G(a)||A&&a instanceof
A)return!0;var b="length"in Object(a)&&a.length;return U(b)&&(0<=b&&b-1 in a||"function"==typeof a.item)}function n(a,b,d){var c,e;if(a)if(D(a))for(c in a)"prototype"==c||"length"==c||"name"==c||a.hasOwnProperty&&!a.hasOwnProperty(c)||b.call(d,a[c],c,a);else if(K(a)||Ca(a)){var f="object"!==typeof a;c=0;for(e=a.length;c<e;c++)(f||c in a)&&b.call(d,a[c],c,a)}else if(a.forEach&&a.forEach!==n)a.forEach(b,d,a);else if(oc(a))for(c in a)b.call(d,a[c],c,a);else if("function"===typeof a.hasOwnProperty)for(c in a)a.hasOwnProperty(c)&&
b.call(d,a[c],c,a);else for(c in a)qa.call(a,c)&&b.call(d,a[c],c,a);return a}function pc(a,b,d){for(var c=Object.keys(a).sort(),e=0;e<c.length;e++)b.call(d,a[c[e]],c[e]);return c}function qc(a){return function(b,d){a(d,b)}}function Wd(){return++pb}function Ob(a,b,d){for(var c=a.$$hashKey,e=0,f=b.length;e<f;++e){var g=b[e];if(J(g)||D(g))for(var h=Object.keys(g),k=0,l=h.length;k<l;k++){var m=h[k],s=g[m];d&&J(s)?ba(s)?a[m]=new Date(s.valueOf()):Oa(s)?a[m]=new RegExp(s):s.nodeName?a[m]=s.cloneNode(!0):
Pb(s)?a[m]=s.clone():(J(a[m])||(a[m]=K(s)?[]:{}),Ob(a[m],[s],!0)):a[m]=s}}c?a.$$hashKey=c:delete a.$$hashKey;return a}function L(a){return Ob(a,wa.call(arguments,1),!1)}function Xd(a){return Ob(a,wa.call(arguments,1),!0)}function ea(a){return parseInt(a,10)}function Qb(a,b){return L(Object.create(a),b)}function w(){}function $a(a){return a}function ka(a){return function(){return a}}function rc(a){return D(a.toString)&&a.toString!==ra}function x(a){return"undefined"===typeof a}function z(a){return"undefined"!==
typeof a}function J(a){return null!==a&&"object"===typeof a}function oc(a){return null!==a&&"object"===typeof a&&!sc(a)}function G(a){return"string"===typeof a}function U(a){return"number"===typeof a}function ba(a){return"[object Date]"===ra.call(a)}function D(a){return"function"===typeof a}function Oa(a){return"[object RegExp]"===ra.call(a)}function Za(a){return a&&a.window===a}function ab(a){return a&&a.$evalAsync&&a.$watch}function bb(a){return"boolean"===typeof a}function tc(a){return a&&U(a.length)&&
Yd.test(ra.call(a))}function Pb(a){return!(!a||!(a.nodeName||a.prop&&a.attr&&a.find))}function Zd(a){var b={};a=a.split(",");var d;for(d=0;d<a.length;d++)b[a[d]]=!0;return b}function ta(a){return H(a.nodeName||a[0]&&a[0].nodeName)}function cb(a,b){var d=a.indexOf(b);0<=d&&a.splice(d,1);return d}function Pa(a,b){function d(a,b){var d=b.$$hashKey,e;if(K(a)){e=0;for(var f=a.length;e<f;e++)b.push(c(a[e]))}else if(oc(a))for(e in a)b[e]=c(a[e]);else if(a&&"function"===typeof a.hasOwnProperty)for(e in a)a.hasOwnProperty(e)&&
(b[e]=c(a[e]));else for(e in a)qa.call(a,e)&&(b[e]=c(a[e]));d?b.$$hashKey=d:delete b.$$hashKey;return b}function c(a){if(!J(a))return a;var b=e.indexOf(a);if(-1!==b)return f[b];if(Za(a)||ab(a))throw Da("cpws");var b=!1,c;K(a)?(c=[],b=!0):tc(a)?c=new a.constructor(a):ba(a)?c=new Date(a.getTime()):Oa(a)?(c=new RegExp(a.source,a.toString().match(/[^\/]*$/)[0]),c.lastIndex=a.lastIndex):D(a.cloneNode)?c=a.cloneNode(!0):(c=Object.create(sc(a)),b=!0);e.push(a);f.push(c);return b?d(a,c):c}var e=[],f=[];if(b){if(tc(b))throw Da("cpta");
if(a===b)throw Da("cpi");K(b)?b.length=0:n(b,function(a,c){"$$hashKey"!==c&&delete b[c]});e.push(a);f.push(b);return d(a,b)}return c(a)}function V(a,b){if(K(a)){b=b||[];for(var d=0,c=a.length;d<c;d++)b[d]=a[d]}else if(J(a))for(d in b=b||{},a)if("$"!==d.charAt(0)||"$"!==d.charAt(1))b[d]=a[d];return b||a}function la(a,b){if(a===b)return!0;if(null===a||null===b)return!1;if(a!==a&&b!==b)return!0;var d=typeof a,c;if(d==typeof b&&"object"==d)if(K(a)){if(!K(b))return!1;if((d=a.length)==b.length){for(c=0;c<
d;c++)if(!la(a[c],b[c]))return!1;return!0}}else{if(ba(a))return ba(b)?la(a.getTime(),b.getTime()):!1;if(Oa(a))return Oa(b)?a.toString()==b.toString():!1;if(ab(a)||ab(b)||Za(a)||Za(b)||K(b)||ba(b)||Oa(b))return!1;d=X();for(c in a)if("$"!==c.charAt(0)&&!D(a[c])){if(!la(a[c],b[c]))return!1;d[c]=!0}for(c in b)if(!(c in d)&&"$"!==c.charAt(0)&&z(b[c])&&!D(b[c]))return!1;return!0}return!1}function db(a,b,d){return a.concat(wa.call(b,d))}function uc(a,b){var d=2<arguments.length?wa.call(arguments,2):[];return!D(b)||
b instanceof RegExp?b:d.length?function(){return arguments.length?b.apply(a,db(d,arguments,0)):b.apply(a,d)}:function(){return arguments.length?b.apply(a,arguments):b.call(a)}}function $d(a,b){var d=b;"string"===typeof a&&"$"===a.charAt(0)&&"$"===a.charAt(1)?d=u:Za(b)?d="$WINDOW":b&&Z===b?d="$DOCUMENT":ab(b)&&(d="$SCOPE");return d}function eb(a,b){if("undefined"===typeof a)return u;U(b)||(b=b?2:null);return JSON.stringify(a,$d,b)}function vc(a){return G(a)?JSON.parse(a):a}function wc(a,b){var d=Date.parse("Jan 01, 1970 00:00:00 "+
a)/6E4;return isNaN(d)?b:d}function Rb(a,b,d){d=d?-1:1;var c=wc(b,a.getTimezoneOffset());b=a;a=d*(c-a.getTimezoneOffset());b=new Date(b.getTime());b.setMinutes(b.getMinutes()+a);return b}function ua(a){a=A(a).clone();try{a.empty()}catch(b){}var d=A("<div>").append(a).html();try{return a[0].nodeType===Qa?H(d):d.match(/^(<[^>]+>)/)[1].replace(/^<([\w\-]+)/,function(a,b){return"<"+H(b)})}catch(c){return H(d)}}function xc(a){try{return decodeURIComponent(a)}catch(b){}}function yc(a){var b={};n((a||"").split("&"),
function(a){var c,e,f;a&&(e=a=a.replace(/\+/g,"%20"),c=a.indexOf("="),-1!==c&&(e=a.substring(0,c),f=a.substring(c+1)),e=xc(e),z(e)&&(f=z(f)?xc(f):!0,qa.call(b,e)?K(b[e])?b[e].push(f):b[e]=[b[e],f]:b[e]=f))});return b}function Sb(a){var b=[];n(a,function(a,c){K(a)?n(a,function(a){b.push(ga(c,!0)+(!0===a?"":"="+ga(a,!0)))}):b.push(ga(c,!0)+(!0===a?"":"="+ga(a,!0)))});return b.length?b.join("&"):""}function qb(a){return ga(a,!0).replace(/%26/gi,"&").replace(/%3D/gi,"=").replace(/%2B/gi,"+")}function ga(a,
b){return encodeURIComponent(a).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%3B/gi,";").replace(/%20/g,b?"%20":"+")}function ae(a,b){var d,c,e=Ra.length;for(c=0;c<e;++c)if(d=Ra[c]+b,G(d=a.getAttribute(d)))return d;return null}function be(a,b){var d,c,e={};n(Ra,function(b){b+="app";!d&&a.hasAttribute&&a.hasAttribute(b)&&(d=a,c=a.getAttribute(b))});n(Ra,function(b){b+="app";var e;!d&&(e=a.querySelector("["+b.replace(":","\\:")+"]"))&&(d=e,c=e.getAttribute(b))});
d&&(e.strictDi=null!==ae(d,"strict-di"),b(d,c?[c]:[],e))}function zc(a,b,d){J(d)||(d={});d=L({strictDi:!1},d);var c=function(){a=A(a);if(a.injector()){var c=a[0]===Z?"document":ua(a);throw Da("btstrpd",c.replace(/</,"&lt;").replace(/>/,"&gt;"));}b=b||[];b.unshift(["$provide",function(b){b.value("$rootElement",a)}]);d.debugInfoEnabled&&b.push(["$compileProvider",function(a){a.debugInfoEnabled(!0)}]);b.unshift("ng");c=fb(b,d.strictDi);c.invoke(["$rootScope","$rootElement","$compile","$injector",function(a,
b,c,d){a.$apply(function(){b.data("$injector",d);c(b)(a)})}]);return c},e=/^NG_ENABLE_DEBUG_INFO!/,f=/^NG_DEFER_BOOTSTRAP!/;S&&e.test(S.name)&&(d.debugInfoEnabled=!0,S.name=S.name.replace(e,""));if(S&&!f.test(S.name))return c();S.name=S.name.replace(f,"");$.resumeBootstrap=function(a){n(a,function(a){b.push(a)});return c()};D($.resumeDeferredBootstrap)&&$.resumeDeferredBootstrap()}function ce(){S.name="NG_ENABLE_DEBUG_INFO!"+S.name;S.location.reload()}function de(a){a=$.element(a).injector();if(!a)throw Da("test");
return a.get("$$testability")}function Ac(a,b){b=b||"_";return a.replace(ee,function(a,c){return(c?b:"")+a.toLowerCase()})}function fe(){var a;if(!Bc){var b=rb();(xa=x(b)?S.jQuery:b?S[b]:u)&&xa.fn.on?(A=xa,L(xa.fn,{scope:Sa.scope,isolateScope:Sa.isolateScope,controller:Sa.controller,injector:Sa.injector,inheritedData:Sa.inheritedData}),a=xa.cleanData,xa.cleanData=function(b){for(var c,e=0,f;null!=(f=b[e]);e++)(c=xa._data(f,"events"))&&c.$destroy&&xa(f).triggerHandler("$destroy");a(b)}):A=E;$.element=
A;Bc=!0}}function sb(a,b,d){if(!a)throw Da("areq",b||"?",d||"required");return a}function Ta(a,b,d){d&&K(a)&&(a=a[a.length-1]);sb(D(a),b,"not a function, got "+(a&&"object"===typeof a?a.constructor.name||"Object":typeof a));return a}function Ua(a,b){if("hasOwnProperty"===a)throw Da("badname",b);}function Cc(a,b,d){if(!b)return a;b=b.split(".");for(var c,e=a,f=b.length,g=0;g<f;g++)c=b[g],a&&(a=(e=a)[c]);return!d&&D(a)?uc(e,a):a}function tb(a){for(var b=a[0],d=a[a.length-1],c,e=1;b!==d&&(b=b.nextSibling);e++)if(c||
a[e]!==b)c||(c=A(wa.call(a,0,e))),c.push(b);return c||a}function X(){return Object.create(null)}function ge(a){function b(a,b,c){return a[b]||(a[b]=c())}var d=P("$injector"),c=P("ng"),e=b(a,"angular",Object);e.$$minErr=e.$$minErr||P;return b(e,"module",function(){var a={};return function(g,h,k){if("hasOwnProperty"===g)throw c("badname","module");h&&a.hasOwnProperty(g)&&(a[g]=null);return b(a,g,function(){function a(b,d,e,f){f||(f=c);return function(){f[e||"push"]([b,d,arguments]);return t}}function b(a,
d){return function(b,e){e&&D(e)&&(e.$$moduleName=g);c.push([a,d,arguments]);return t}}if(!h)throw d("nomod",g);var c=[],f=[],B=[],Q=a("$injector","invoke","push",f),t={_invokeQueue:c,_configBlocks:f,_runBlocks:B,requires:h,name:g,provider:b("$provide","provider"),factory:b("$provide","factory"),service:b("$provide","service"),value:a("$provide","value"),constant:a("$provide","constant","unshift"),decorator:b("$provide","decorator"),animation:b("$animateProvider","register"),filter:b("$filterProvider",
"register"),controller:b("$controllerProvider","register"),directive:b("$compileProvider","directive"),component:function(a,b){function c(d){function f(a){return e.isFunction(a)?function(b,c){return d.invoke(a,this,{$element:b,$attrs:c})}:a}var g=b.template||b.templateUrl?b.template:"";return{controller:b.controller||function(){},controllerAs:Dc(b.controller)||b.controllerAs||a,template:f(g),templateUrl:f(b.templateUrl),transclude:b.transclude===u?!0:b.transclude,scope:!1===b.isolate?!0:{},bindToController:b.bindings||
{},restrict:b.restrict||"E"}}b.$canActivate&&(c.$canActivate=b.$canActivate);b.$routeConfig&&(c.$routeConfig=b.$routeConfig);c.$inject=["$injector"];return t.directive(a,c)},config:Q,run:function(a){B.push(a);return this}};k&&Q(k);return t})}})}function he(a){L(a,{bootstrap:zc,copy:Pa,extend:L,merge:Xd,equals:la,element:A,forEach:n,injector:fb,noop:w,bind:uc,toJson:eb,fromJson:vc,identity:$a,isUndefined:x,isDefined:z,isString:G,isFunction:D,isObject:J,isNumber:U,isElement:Pb,isArray:K,version:ie,
isDate:ba,lowercase:H,uppercase:ub,callbacks:{counter:0},getTestability:de,$$minErr:P,$$csp:Ea,reloadWithDebugInfo:ce});Tb=ge(S);Tb("ng",["ngLocale"],["$provide",function(a){a.provider({$$sanitizeUri:je});a.provider("$compile",Ec).directive({a:ke,input:Fc,textarea:Fc,form:le,script:me,select:ne,style:oe,option:pe,ngBind:qe,ngBindHtml:re,ngBindTemplate:se,ngClass:te,ngClassEven:ue,ngClassOdd:ve,ngCloak:we,ngController:xe,ngForm:ye,ngHide:ze,ngIf:Ae,ngInclude:Be,ngInit:Ce,ngNonBindable:De,ngPluralize:Ee,
ngRepeat:Fe,ngShow:Ge,ngStyle:He,ngSwitch:Ie,ngSwitchWhen:Je,ngSwitchDefault:Ke,ngOptions:Le,ngTransclude:Me,ngModel:Ne,ngList:Oe,ngChange:Pe,pattern:Gc,ngPattern:Gc,required:Hc,ngRequired:Hc,minlength:Ic,ngMinlength:Ic,maxlength:Jc,ngMaxlength:Jc,ngValue:Qe,ngModelOptions:Re}).directive({ngInclude:Se}).directive(vb).directive(Kc);a.provider({$anchorScroll:Te,$animate:Ue,$animateCss:Ve,$$animateQueue:We,$$AnimateRunner:Xe,$$animateAsyncRun:Ye,$browser:Ze,$cacheFactory:$e,$controller:af,$document:bf,
$exceptionHandler:cf,$filter:Lc,$$forceReflow:df,$interpolate:ef,$interval:ff,$http:gf,$httpParamSerializer:hf,$httpParamSerializerJQLike:jf,$httpBackend:kf,$xhrFactory:lf,$location:mf,$log:nf,$parse:of,$rootScope:pf,$q:qf,$$q:rf,$sce:sf,$sceDelegate:tf,$sniffer:uf,$templateCache:vf,$templateRequest:wf,$$testability:xf,$timeout:yf,$window:zf,$$rAF:Af,$$jqLite:Bf,$$HashMap:Cf,$$cookieReader:Df})}])}function gb(a){return a.replace(Ef,function(a,d,c,e){return e?c.toUpperCase():c}).replace(Ff,"Moz$1")}
function Mc(a){a=a.nodeType;return 1===a||!a||9===a}function Nc(a,b){var d,c,e=b.createDocumentFragment(),f=[];if(Ub.test(a)){d=d||e.appendChild(b.createElement("div"));c=(Gf.exec(a)||["",""])[1].toLowerCase();c=na[c]||na._default;d.innerHTML=c[1]+a.replace(Hf,"<$1></$2>")+c[2];for(c=c[0];c--;)d=d.lastChild;f=db(f,d.childNodes);d=e.firstChild;d.textContent=""}else f.push(b.createTextNode(a));e.textContent="";e.innerHTML="";n(f,function(a){e.appendChild(a)});return e}function E(a){if(a instanceof E)return a;
var b;G(a)&&(a=Y(a),b=!0);if(!(this instanceof E)){if(b&&"<"!=a.charAt(0))throw Vb("nosel");return new E(a)}if(b){b=Z;var d;a=(d=If.exec(a))?[b.createElement(d[1])]:(d=Nc(a,b))?d.childNodes:[]}Oc(this,a)}function Wb(a){return a.cloneNode(!0)}function wb(a,b){b||hb(a);if(a.querySelectorAll)for(var d=a.querySelectorAll("*"),c=0,e=d.length;c<e;c++)hb(d[c])}function Pc(a,b,d,c){if(z(c))throw Vb("offargs");var e=(c=xb(a))&&c.events,f=c&&c.handle;if(f)if(b){var g=function(b){var c=e[b];z(d)&&cb(c||[],d);
z(d)&&c&&0<c.length||(a.removeEventListener(b,f,!1),delete e[b])};n(b.split(" "),function(a){g(a);yb[a]&&g(yb[a])})}else for(b in e)"$destroy"!==b&&a.removeEventListener(b,f,!1),delete e[b]}function hb(a,b){var d=a.ng339,c=d&&ib[d];c&&(b?delete c.data[b]:(c.handle&&(c.events.$destroy&&c.handle({},"$destroy"),Pc(a)),delete ib[d],a.ng339=u))}function xb(a,b){var d=a.ng339,d=d&&ib[d];b&&!d&&(a.ng339=d=++Jf,d=ib[d]={events:{},data:{},handle:u});return d}function Xb(a,b,d){if(Mc(a)){var c=z(d),e=!c&&b&&
!J(b),f=!b;a=(a=xb(a,!e))&&a.data;if(c)a[b]=d;else{if(f)return a;if(e)return a&&a[b];L(a,b)}}}function zb(a,b){return a.getAttribute?-1<(" "+(a.getAttribute("class")||"")+" ").replace(/[\n\t]/g," ").indexOf(" "+b+" "):!1}function Ab(a,b){b&&a.setAttribute&&n(b.split(" "),function(b){a.setAttribute("class",Y((" "+(a.getAttribute("class")||"")+" ").replace(/[\n\t]/g," ").replace(" "+Y(b)+" "," ")))})}function Bb(a,b){if(b&&a.setAttribute){var d=(" "+(a.getAttribute("class")||"")+" ").replace(/[\n\t]/g,
" ");n(b.split(" "),function(a){a=Y(a);-1===d.indexOf(" "+a+" ")&&(d+=a+" ")});a.setAttribute("class",Y(d))}}function Oc(a,b){if(b)if(b.nodeType)a[a.length++]=b;else{var d=b.length;if("number"===typeof d&&b.window!==b){if(d)for(var c=0;c<d;c++)a[a.length++]=b[c]}else a[a.length++]=b}}function Qc(a,b){return Cb(a,"$"+(b||"ngController")+"Controller")}function Cb(a,b,d){9==a.nodeType&&(a=a.documentElement);for(b=K(b)?b:[b];a;){for(var c=0,e=b.length;c<e;c++)if(z(d=A.data(a,b[c])))return d;a=a.parentNode||
11===a.nodeType&&a.host}}function Rc(a){for(wb(a,!0);a.firstChild;)a.removeChild(a.firstChild)}function Yb(a,b){b||wb(a);var d=a.parentNode;d&&d.removeChild(a)}function Kf(a,b){b=b||S;if("complete"===b.document.readyState)b.setTimeout(a);else A(b).on("load",a)}function Sc(a,b){var d=Db[b.toLowerCase()];return d&&Tc[ta(a)]&&d}function Lf(a,b){var d=function(c,d){c.isDefaultPrevented=function(){return c.defaultPrevented};var f=b[d||c.type],g=f?f.length:0;if(g){if(x(c.immediatePropagationStopped)){var h=
c.stopImmediatePropagation;c.stopImmediatePropagation=function(){c.immediatePropagationStopped=!0;c.stopPropagation&&c.stopPropagation();h&&h.call(c)}}c.isImmediatePropagationStopped=function(){return!0===c.immediatePropagationStopped};var k=f.specialHandlerWrapper||Mf;1<g&&(f=V(f));for(var l=0;l<g;l++)c.isImmediatePropagationStopped()||k(a,c,f[l])}};d.elem=a;return d}function Mf(a,b,d){d.call(a,b)}function Nf(a,b,d){var c=b.relatedTarget;c&&(c===a||Of.call(a,c))||d.call(a,b)}function Bf(){this.$get=
function(){return L(E,{hasClass:function(a,b){a.attr&&(a=a[0]);return zb(a,b)},addClass:function(a,b){a.attr&&(a=a[0]);return Bb(a,b)},removeClass:function(a,b){a.attr&&(a=a[0]);return Ab(a,b)}})}}function Fa(a,b){var d=a&&a.$$hashKey;if(d)return"function"===typeof d&&(d=a.$$hashKey()),d;d=typeof a;return d="function"==d||"object"==d&&null!==a?a.$$hashKey=d+":"+(b||Wd)():d+":"+a}function Va(a,b){if(b){var d=0;this.nextUid=function(){return++d}}n(a,this.put,this)}function Uc(a){a=a.toString().replace(Pf,
"");return a.match(Qf)||a.match(Rf)}function Sf(a){return(a=Uc(a))?"function("+(a[1]||"").replace(/[\s\r\n]+/," ")+")":"fn"}function fb(a,b){function d(a){return function(b,c){if(J(b))n(b,qc(a));else return a(b,c)}}function c(a,b){Ua(a,"service");if(D(b)||K(b))b=r.instantiate(b);if(!b.$get)throw Ga("pget",a);return s[a+"Provider"]=b}function e(a,b){return function(){var c=t.invoke(b,this);if(x(c))throw Ga("undef",a);return c}}function f(a,b,d){return c(a,{$get:!1!==d?e(a,b):b})}function g(a){sb(x(a)||
K(a),"modulesToLoad","not an array");var b=[],c;n(a,function(a){function d(a){var b,c;b=0;for(c=a.length;b<c;b++){var e=a[b],f=r.get(e[0]);f[e[1]].apply(f,e[2])}}if(!m.get(a)){m.put(a,!0);try{G(a)?(c=Tb(a),b=b.concat(g(c.requires)).concat(c._runBlocks),d(c._invokeQueue),d(c._configBlocks)):D(a)?b.push(r.invoke(a)):K(a)?b.push(r.invoke(a)):Ta(a,"module")}catch(e){throw K(a)&&(a=a[a.length-1]),e.message&&e.stack&&-1==e.stack.indexOf(e.message)&&(e=e.message+"\n"+e.stack),Ga("modulerr",a,e.stack||e.message||
e);}}});return b}function h(a,c){function d(b,e){if(a.hasOwnProperty(b)){if(a[b]===k)throw Ga("cdep",b+" <- "+l.join(" <- "));return a[b]}try{return l.unshift(b),a[b]=k,a[b]=c(b,e)}catch(f){throw a[b]===k&&delete a[b],f;}finally{l.shift()}}function e(a,c,f,g){"string"===typeof f&&(g=f,f=null);var h=[],k=fb.$$annotate(a,b,g),l,m,s;m=0;for(l=k.length;m<l;m++){s=k[m];if("string"!==typeof s)throw Ga("itkn",s);h.push(f&&f.hasOwnProperty(s)?f[s]:d(s,g))}K(a)&&(a=a[l]);return a.apply(c,h)}return{invoke:e,
instantiate:function(a,b,c){var d=Object.create((K(a)?a[a.length-1]:a).prototype||null);a=e(a,d,b,c);return J(a)||D(a)?a:d},get:d,annotate:fb.$$annotate,has:function(b){return s.hasOwnProperty(b+"Provider")||a.hasOwnProperty(b)}}}b=!0===b;var k={},l=[],m=new Va([],!0),s={$provide:{provider:d(c),factory:d(f),service:d(function(a,b){return f(a,["$injector",function(a){return a.instantiate(b)}])}),value:d(function(a,b){return f(a,ka(b),!1)}),constant:d(function(a,b){Ua(a,"constant");s[a]=b;B[a]=b}),
decorator:function(a,b){var c=r.get(a+"Provider"),d=c.$get;c.$get=function(){var a=t.invoke(d,c);return t.invoke(b,null,{$delegate:a})}}}},r=s.$injector=h(s,function(a,b){$.isString(b)&&l.push(b);throw Ga("unpr",l.join(" <- "));}),B={},Q=h(B,function(a,b){var c=r.get(a+"Provider",b);return t.invoke(c.$get,c,u,a)}),t=Q;s.$injectorProvider={$get:ka(Q)};var p=g(a),t=Q.get("$injector");t.strictDi=b;n(p,function(a){a&&t.invoke(a)});return t}function Te(){var a=!0;this.disableAutoScrolling=function(){a=
!1};this.$get=["$window","$location","$rootScope",function(b,d,c){function e(a){var b=null;Array.prototype.some.call(a,function(a){if("a"===ta(a))return b=a,!0});return b}function f(a){if(a){a.scrollIntoView();var c;c=g.yOffset;D(c)?c=c():Pb(c)?(c=c[0],c="fixed"!==b.getComputedStyle(c).position?0:c.getBoundingClientRect().bottom):U(c)||(c=0);c&&(a=a.getBoundingClientRect().top,b.scrollBy(0,a-c))}else b.scrollTo(0,0)}function g(a){a=G(a)?a:d.hash();var b;a?(b=h.getElementById(a))?f(b):(b=e(h.getElementsByName(a)))?
f(b):"top"===a&&f(null):f(null)}var h=b.document;a&&c.$watch(function(){return d.hash()},function(a,b){a===b&&""===a||Kf(function(){c.$evalAsync(g)})});return g}]}function jb(a,b){if(!a&&!b)return"";if(!a)return b;if(!b)return a;K(a)&&(a=a.join(" "));K(b)&&(b=b.join(" "));return a+" "+b}function Tf(a){G(a)&&(a=a.split(" "));var b=X();n(a,function(a){a.length&&(b[a]=!0)});return b}function Ia(a){return J(a)?a:{}}function Uf(a,b,d,c){function e(a){try{a.apply(null,wa.call(arguments,1))}finally{if(Q--,
0===Q)for(;t.length;)try{t.pop()()}catch(b){d.error(b)}}}function f(){M=null;g();h()}function g(){a:{try{p=m.state;break a}catch(a){}p=void 0}p=x(p)?null:p;la(p,W)&&(p=W);W=p}function h(){if(v!==k.url()||y!==p)v=k.url(),y=p,n(F,function(a){a(k.url(),p)})}var k=this,l=a.location,m=a.history,s=a.setTimeout,r=a.clearTimeout,B={};k.isMock=!1;var Q=0,t=[];k.$$completeOutstandingRequest=e;k.$$incOutstandingRequestCount=function(){Q++};k.notifyWhenNoOutstandingRequests=function(a){0===Q?a():t.push(a)};var p,
y,v=l.href,ya=b.find("base"),M=null;g();y=p;k.url=function(b,d,e){x(e)&&(e=null);l!==a.location&&(l=a.location);m!==a.history&&(m=a.history);if(b){var f=y===e;if(v===b&&(!c.history||f))return k;var h=v&&Ja(v)===Ja(b);v=b;y=e;if(!c.history||h&&f){if(!h||M)M=b;d?l.replace(b):h?(d=l,e=b.indexOf("#"),e=-1===e?"":b.substr(e),d.hash=e):l.href=b;l.href!==b&&(M=b)}else m[d?"replaceState":"pushState"](e,"",b),g(),y=p;return k}return M||l.href.replace(/%27/g,"'")};k.state=function(){return p};var F=[],C=!1,
W=null;k.onUrlChange=function(b){if(!C){if(c.history)A(a).on("popstate",f);A(a).on("hashchange",f);C=!0}F.push(b);return b};k.$$applicationDestroyed=function(){A(a).off("hashchange popstate",f)};k.$$checkUrlChange=h;k.baseHref=function(){var a=ya.attr("href");return a?a.replace(/^(https?\:)?\/\/[^\/]*/,""):""};k.defer=function(a,b){var c;Q++;c=s(function(){delete B[c];e(a)},b||0);B[c]=!0;return c};k.defer.cancel=function(a){return B[a]?(delete B[a],r(a),e(w),!0):!1}}function Ze(){this.$get=["$window",
"$log","$sniffer","$document",function(a,b,d,c){return new Uf(a,c,b,d)}]}function $e(){this.$get=function(){function a(a,c){function e(a){a!=s&&(r?r==a&&(r=a.n):r=a,f(a.n,a.p),f(a,s),s=a,s.n=null)}function f(a,b){a!=b&&(a&&(a.p=b),b&&(b.n=a))}if(a in b)throw P("$cacheFactory")("iid",a);var g=0,h=L({},c,{id:a}),k=X(),l=c&&c.capacity||Number.MAX_VALUE,m=X(),s=null,r=null;return b[a]={put:function(a,b){if(!x(b)){if(l<Number.MAX_VALUE){var c=m[a]||(m[a]={key:a});e(c)}a in k||g++;k[a]=b;g>l&&this.remove(r.key);
return b}},get:function(a){if(l<Number.MAX_VALUE){var b=m[a];if(!b)return;e(b)}return k[a]},remove:function(a){if(l<Number.MAX_VALUE){var b=m[a];if(!b)return;b==s&&(s=b.p);b==r&&(r=b.n);f(b.n,b.p);delete m[a]}a in k&&(delete k[a],g--)},removeAll:function(){k=X();g=0;m=X();s=r=null},destroy:function(){m=h=k=null;delete b[a]},info:function(){return L({},h,{size:g})}}}var b={};a.info=function(){var a={};n(b,function(b,e){a[e]=b.info()});return a};a.get=function(a){return b[a]};return a}}function vf(){this.$get=
["$cacheFactory",function(a){return a("templates")}]}function Ec(a,b){function d(a,b,c){var d=/^\s*([@&]|=(\*?))(\??)\s*(\w*)\s*$/,e={};n(a,function(a,f){var g=a.match(d);if(!g)throw ia("iscp",b,f,a,c?"controller bindings definition":"isolate scope definition");e[f]={mode:g[1][0],collection:"*"===g[2],optional:"?"===g[3],attrName:g[4]||f}});return e}function c(a){var b=a.charAt(0);if(!b||b!==H(b))throw ia("baddir",a);if(a!==a.trim())throw ia("baddir",a);}var e={},f=/^\s*directive\:\s*([\w\-]+)\s+(.*)$/,
g=/(([\w\-]+)(?:\:([^;]+))?;?)/,h=Zd("ngSrc,ngSrcset,src,srcset"),k=/^(?:(\^\^?)?(\?)?(\^\^?)?)?/,l=/^(on[a-z]+|formaction)$/;this.directive=function r(b,f){Ua(b,"directive");G(b)?(c(b),sb(f,"directiveFactory"),e.hasOwnProperty(b)||(e[b]=[],a.factory(b+"Directive",["$injector","$exceptionHandler",function(a,c){var f=[];n(e[b],function(e,g){try{var h=a.invoke(e);D(h)?h={compile:ka(h)}:!h.compile&&h.link&&(h.compile=ka(h.link));h.priority=h.priority||0;h.index=g;h.name=h.name||b;h.require=h.require||
h.controller&&h.name;h.restrict=h.restrict||"EA";var k=h,l=h,m=h.name,r={isolateScope:null,bindToController:null};J(l.scope)&&(!0===l.bindToController?(r.bindToController=d(l.scope,m,!0),r.isolateScope={}):r.isolateScope=d(l.scope,m,!1));J(l.bindToController)&&(r.bindToController=d(l.bindToController,m,!0));if(J(r.bindToController)){var O=l.controller,Q=l.controllerAs;if(!O)throw ia("noctrl",m);if(!Dc(O,Q))throw ia("noident",m);}var ha=k.$$bindings=r;J(ha.isolateScope)&&(h.$$isolateBindings=ha.isolateScope);
h.$$moduleName=e.$$moduleName;f.push(h)}catch(n){c(n)}});return f}])),e[b].push(f)):n(b,qc(r));return this};this.aHrefSanitizationWhitelist=function(a){return z(a)?(b.aHrefSanitizationWhitelist(a),this):b.aHrefSanitizationWhitelist()};this.imgSrcSanitizationWhitelist=function(a){return z(a)?(b.imgSrcSanitizationWhitelist(a),this):b.imgSrcSanitizationWhitelist()};var m=!0;this.debugInfoEnabled=function(a){return z(a)?(m=a,this):m};this.$get=["$injector","$interpolate","$exceptionHandler","$templateRequest",
"$parse","$controller","$rootScope","$document","$sce","$animate","$$sanitizeUri",function(a,b,c,d,p,y,v,ya,M,F,C){function W(a,b,c){$.innerHTML="<span "+b+">";b=$.firstChild.attributes;var d=b[0];b.removeNamedItem(d.name);d.value=c;a.attributes.setNamedItem(d)}function N(a,b){try{a.addClass(b)}catch(c){}}function O(a,b,c,d,e){a instanceof A||(a=A(a));n(a,function(b,c){b.nodeType==Qa&&b.nodeValue.match(/\S+/)&&(a[c]=A(b).wrap("<span></span>").parent()[0])});var f=R(a,b,a,c,d,e);O.$$addScopeClass(a);
var g=null;return function(b,c,d){sb(b,"scope");e&&e.needsNewScope&&(b=b.$parent.$new());d=d||{};var h=d.parentBoundTranscludeFn,k=d.transcludeControllers;d=d.futureParentElement;h&&h.$$boundTransclude&&(h=h.$$boundTransclude);g||(g=(d=d&&d[0])?"foreignobject"!==ta(d)&&d.toString().match(/SVG/)?"svg":"html":"html");d="html"!==g?A(U(g,A("<div>").append(a).html())):c?Sa.clone.call(a):a;if(k)for(var l in k)d.data("$"+l+"Controller",k[l].instance);O.$$addScopeInfo(d,b);c&&c(d,b);f&&f(b,d,d,h);return d}}
function R(a,b,c,d,e,f){function g(a,c,d,e){var f,k,l,m,r,B,v;if(p)for(v=Array(c.length),m=0;m<h.length;m+=3)f=h[m],v[f]=c[f];else v=c;m=0;for(r=h.length;m<r;)k=v[h[m++]],c=h[m++],f=h[m++],c?(c.scope?(l=a.$new(),O.$$addScopeInfo(A(k),l)):l=a,B=c.transcludeOnThisElement?ha(a,c.transclude,e):!c.templateOnThisElement&&e?e:!e&&b?ha(a,b):null,c(f,l,k,d,B)):f&&f(a,k.childNodes,u,e)}for(var h=[],k,l,m,r,p,B=0;B<a.length;B++){k=new ka;l=Ha(a[B],[],k,0===B?d:u,e);(f=l.length?oa(l,a[B],k,b,c,null,[],[],f):
null)&&f.scope&&O.$$addScopeClass(k.$$element);k=f&&f.terminal||!(m=a[B].childNodes)||!m.length?null:R(m,f?(f.transcludeOnThisElement||!f.templateOnThisElement)&&f.transclude:b);if(f||k)h.push(B,f,k),r=!0,p=p||f;f=null}return r?g:null}function ha(a,b,c){var d=function(d,e,f,g,h){d||(d=a.$new(!1,h),d.$$transcluded=!0);return b(d,e,{parentBoundTranscludeFn:c,transcludeControllers:f,futureParentElement:g})},e=d.$$slots=X(),f;for(f in b.$$slots)e[f]=b.$$slots[f]?ha(a,b.$$slots[f],c):null;return d}function Ha(a,
b,c,d,e){var h=c.$attr,k;switch(a.nodeType){case 1:pa(b,va(ta(a)),"E",d,e);for(var l,m,r,p=a.attributes,B=0,v=p&&p.length;B<v;B++){var F=!1,t=!1;l=p[B];k=l.name;m=Y(l.value);l=va(k);if(r=ja.test(l))k=k.replace(Wc,"").substr(8).replace(/_(.)/g,function(a,b){return b.toUpperCase()});(l=l.match(ma))&&sa(l[1])&&(F=k,t=k.substr(0,k.length-5)+"end",k=k.substr(0,k.length-6));l=va(k.toLowerCase());h[l]=k;if(r||!c.hasOwnProperty(l))c[l]=m,Sc(a,l)&&(c[l]=!0);T(a,b,m,l,r);pa(b,l,"A",d,e,F,t)}a=a.className;J(a)&&
(a=a.animVal);if(G(a)&&""!==a)for(;k=g.exec(a);)l=va(k[2]),pa(b,l,"C",d,e)&&(c[l]=Y(k[3])),a=a.substr(k.index+k[0].length);break;case Qa:if(11===Ka)for(;a.parentNode&&a.nextSibling&&a.nextSibling.nodeType===Qa;)a.nodeValue+=a.nextSibling.nodeValue,a.parentNode.removeChild(a.nextSibling);S(b,a.nodeValue);break;case 8:try{if(k=f.exec(a.nodeValue))l=va(k[1]),pa(b,l,"M",d,e)&&(c[l]=Y(k[2]))}catch(O){}}b.sort(fa);return b}function q(a,b,c){var d=[],e=0;if(b&&a.hasAttribute&&a.hasAttribute(b)){do{if(!a)throw ia("uterdir",
b,c);1==a.nodeType&&(a.hasAttribute(b)&&e++,a.hasAttribute(c)&&e--);d.push(a);a=a.nextSibling}while(0<e)}else d.push(a);return A(d)}function z(a,b,c){return function(d,e,f,g,h){e=q(e[0],b,c);return a(d,e,f,g,h)}}function Zb(a,b,c,d,e,f){if(a)return O(b,c,d,e,f);var g;return function(){g||(g=O(b,c,d,e,f),b=c=f=null);return g.apply(this,arguments)}}function oa(a,b,d,e,f,g,h,l,m){function r(a,b,c,d){if(a){c&&(a=z(a,c,d));a.require=I.require;a.directiveName=sa;if(C===I||I.$$isolateScope)a=da(a,{isolateScope:!0});
h.push(a)}if(b){c&&(b=z(b,c,d));b.require=I.require;b.directiveName=sa;if(C===I||I.$$isolateScope)b=da(b,{isolateScope:!0});l.push(b)}}function p(a,b,c,d){var e;if(G(b)){var f=b.match(k);b=b.substring(f[0].length);var g=f[1]||f[3],f="?"===f[2];"^^"===g?c=c.parent():e=(e=d&&d[b])&&e.instance;e||(d="$"+b+"Controller",e=g?c.inheritedData(d):c.data(d));if(!e&&!f)throw ia("ctreq",b,a);}else if(K(b))for(e=[],g=0,f=b.length;g<f;g++)e[g]=p(a,b[g],c,d);return e||null}function B(a,b,c,d,e,f){var g=X(),h;for(h in d){var k=
d[h],l={$scope:k===C||k.$$isolateScope?e:f,$element:a,$attrs:b,$transclude:c},m=k.controller;"@"==m&&(m=b[k.name]);l=y(m,l,!0,k.controllerAs);g[k.name]=l;ya||a.data("$"+k.name+"Controller",l.instance)}return g}function v(a,c,e,f,g){function k(a,b,c,d){var e;ab(a)||(d=c,c=b,b=a,a=u);ya&&(e=y);c||(c=ya?R.parent():R);if(d){var f=g.$$slots[d];if(f)return f(a,b,e,c,q);if(x(f))throw ia("noslot",d,ua(R));}else return g(a,b,e,c,q)}var m,r,F,y,Q,R,W;b===e?(f=d,R=d.$$element):(R=A(e),f=new ka(R,d));F=c;C?r=
c.$new(!0):t&&(F=c.$parent);g&&(Q=k,Q.$$boundTransclude=g,Q.isSlotFilled=function(a){return!!g.$$slots[a]});N&&(y=B(R,f,Q,N,r,c));C&&(O.$$addScopeInfo(R,r,!0,!(ha&&(ha===C||ha===C.$$originalDirective))),O.$$addScopeClass(R,!0),r.$$isolateBindings=C.$$isolateBindings,(W=ca(c,f,r,r.$$isolateBindings,C))&&r.$on("$destroy",W));for(var Vc in y){W=N[Vc];var n=y[Vc],M=W.$$bindings.bindToController;n.identifier&&M&&(m=ca(F,f,n.instance,M,W));var Ha=n();Ha!==n.instance&&(n.instance=Ha,R.data("$"+W.name+"Controller",
Ha),m&&m(),m=ca(F,f,n.instance,M,W))}fa=0;for(T=h.length;fa<T;fa++)m=h[fa],ea(m,m.isolateScope?r:c,R,f,m.require&&p(m.directiveName,m.require,R,y),Q);var q=c;C&&(C.template||null===C.templateUrl)&&(q=r);a&&a(q,e.childNodes,u,g);for(fa=l.length-1;0<=fa;fa--)m=l[fa],ea(m,m.isolateScope?r:c,R,f,m.require&&p(m.directiveName,m.require,R,y),Q)}m=m||{};for(var F=-Number.MAX_VALUE,t=m.newScopeDirective,N=m.controllerDirectives,C=m.newIsolateScopeDirective,ha=m.templateDirective,R=m.nonTlbTranscludeDirective,
W=!1,M=!1,ya=m.hasElementTranscludeDirective,w=d.$$element=A(b),I,sa,oa,H=e,L,pa=!1,S=!1,E,fa=0,T=a.length;fa<T;fa++){I=a[fa];var $=I.$$start,ba=I.$$end;$&&(w=q(b,$,ba));oa=u;if(F>I.priority)break;if(E=I.scope)I.templateUrl||(J(E)?(Wa("new/isolated scope",C||t,I,w),C=I):Wa("new/isolated scope",C,I,w)),t=t||I;sa=I.name;if(!pa&&(I.replace&&(I.templateUrl||I.template)||I.transclude&&!I.$$tlb)){for(E=fa+1;pa=a[E++];)if(pa.transclude&&!pa.$$tlb||pa.replace&&(pa.templateUrl||pa.template)){S=!0;break}pa=
!0}!I.templateUrl&&I.controller&&(E=I.controller,N=N||X(),Wa("'"+sa+"' controller",N[sa],I,w),N[sa]=I);if(E=I.transclude)if(W=!0,I.$$tlb||(Wa("transclusion",R,I,w),R=I),"element"==E)ya=!0,F=I.priority,oa=w,w=d.$$element=A(Z.createComment(" "+sa+": "+d[sa]+" ")),b=w[0],aa(f,wa.call(oa,0),b),H=Zb(S,oa,e,F,g&&g.name,{nonTlbTranscludeDirective:R});else{var V=X();oa=A(Wb(b)).contents();if(J(E)){oa=[];var ga=X(),ja=X();n(E,function(a,b){var c="?"===a.charAt(0);a=c?a.substring(1):a;ga[a]=b;V[b]=null;ja[b]=
c});n(w.contents(),function(a){var b=ga[va(ta(a))];b?(ja[b]=!0,V[b]=V[b]||[],V[b].push(a)):oa.push(a)});n(ja,function(a,b){if(!a)throw ia("reqslot",b);});for(var la in V)V[la]&&(V[la]=Zb(S,V[la],e))}w.empty();H=Zb(S,oa,e,u,u,{needsNewScope:I.$$isolateScope||I.$$newScope});H.$$slots=V}if(I.template)if(M=!0,Wa("template",ha,I,w),ha=I,E=D(I.template)?I.template(w,d):I.template,E=na(E),I.replace){g=I;oa=Ub.test(E)?Xc(U(I.templateNamespace,Y(E))):[];b=oa[0];if(1!=oa.length||1!==b.nodeType)throw ia("tplrt",
sa,"");aa(f,w,b);E={$attr:{}};var ma=Ha(b,[],E),qa=a.splice(fa+1,a.length-(fa+1));(C||t)&&P(ma,C,t);a=a.concat(ma).concat(qa);Yc(d,E);T=a.length}else w.html(E);if(I.templateUrl)M=!0,Wa("template",ha,I,w),ha=I,I.replace&&(g=I),v=Vf(a.splice(fa,a.length-fa),w,d,f,W&&H,h,l,{controllerDirectives:N,newScopeDirective:t!==I&&t,newIsolateScopeDirective:C,templateDirective:ha,nonTlbTranscludeDirective:R}),T=a.length;else if(I.compile)try{L=I.compile(w,d,H),D(L)?r(null,L,$,ba):L&&r(L.pre,L.post,$,ba)}catch(ra){c(ra,
ua(w))}I.terminal&&(v.terminal=!0,F=Math.max(F,I.priority))}v.scope=t&&!0===t.scope;v.transcludeOnThisElement=W;v.templateOnThisElement=M;v.transclude=H;m.hasElementTranscludeDirective=ya;return v}function P(a,b,c){for(var d=0,e=a.length;d<e;d++)a[d]=Qb(a[d],{$$isolateScope:b,$$newScope:c})}function pa(b,d,f,g,h,k,l){if(d===h)return null;h=null;if(e.hasOwnProperty(d)){var m;d=a.get(d+"Directive");for(var p=0,B=d.length;p<B;p++)try{m=d[p],(x(g)||g>m.priority)&&-1!=m.restrict.indexOf(f)&&(k&&(m=Qb(m,
{$$start:k,$$end:l})),b.push(m),h=m)}catch(v){c(v)}}return h}function sa(b){if(e.hasOwnProperty(b))for(var c=a.get(b+"Directive"),d=0,f=c.length;d<f;d++)if(b=c[d],b.multiElement)return!0;return!1}function Yc(a,b){var c=b.$attr,d=a.$attr,e=a.$$element;n(a,function(d,e){"$"!=e.charAt(0)&&(b[e]&&b[e]!==d&&(d+=("style"===e?";":" ")+b[e]),a.$set(e,d,!0,c[e]))});n(b,function(b,f){"class"==f?(N(e,b),a["class"]=(a["class"]?a["class"]+" ":"")+b):"style"==f?(e.attr("style",e.attr("style")+";"+b),a.style=(a.style?
a.style+";":"")+b):"$"==f.charAt(0)||a.hasOwnProperty(f)||(a[f]=b,d[f]=c[f])})}function Vf(a,b,c,e,f,g,h,k){var l=[],m,r,p=b[0],B=a.shift(),v=Qb(B,{templateUrl:null,transclude:null,replace:null,$$originalDirective:B}),F=D(B.templateUrl)?B.templateUrl(b,c):B.templateUrl,y=B.templateNamespace;b.empty();d(F).then(function(d){var t,O;d=na(d);if(B.replace){d=Ub.test(d)?Xc(U(y,Y(d))):[];t=d[0];if(1!=d.length||1!==t.nodeType)throw ia("tplrt",B.name,F);d={$attr:{}};aa(e,b,t);var C=Ha(t,[],d);J(B.scope)&&
P(C,!0);a=C.concat(a);Yc(c,d)}else t=p,b.html(d);a.unshift(v);m=oa(a,t,c,f,b,B,g,h,k);n(e,function(a,c){a==t&&(e[c]=b[0])});for(r=R(b[0].childNodes,f);l.length;){d=l.shift();O=l.shift();var Q=l.shift(),W=l.shift(),C=b[0];if(!d.$$destroyed){if(O!==p){var M=O.className;k.hasElementTranscludeDirective&&B.replace||(C=Wb(t));aa(Q,A(O),C);N(A(C),M)}O=m.transcludeOnThisElement?ha(d,m.transclude,W):W;m(r,d,C,e,O)}}l=null});return function(a,b,c,d,e){a=e;b.$$destroyed||(l?l.push(b,c,d,a):(m.transcludeOnThisElement&&
(a=ha(b,m.transclude,e)),m(r,b,c,d,a)))}}function fa(a,b){var c=b.priority-a.priority;return 0!==c?c:a.name!==b.name?a.name<b.name?-1:1:a.index-b.index}function Wa(a,b,c,d){function e(a){return a?" (module: "+a+")":""}if(b)throw ia("multidir",b.name,e(b.$$moduleName),c.name,e(c.$$moduleName),a,ua(d));}function S(a,c){var d=b(c,!0);d&&a.push({priority:0,compile:function(a){a=a.parent();var b=!!a.length;b&&O.$$addBindingClass(a);return function(a,c){var e=c.parent();b||O.$$addBindingClass(e);O.$$addBindingInfo(e,
d.expressions);a.$watch(d,function(a){c[0].nodeValue=a})}}})}function U(a,b){a=H(a||"html");switch(a){case "svg":case "math":var c=Z.createElement("div");c.innerHTML="<"+a+">"+b+"</"+a+">";return c.childNodes[0].childNodes;default:return b}}function E(a,b){if("srcdoc"==b)return M.HTML;var c=ta(a);if("xlinkHref"==b||"form"==c&&"action"==b||"img"!=c&&("src"==b||"ngSrc"==b))return M.RESOURCE_URL}function T(a,c,d,e,f){var g=E(a,e);f=h[e]||f;var k=b(d,!0,g,f);if(k){if("multiple"===e&&"select"===ta(a))throw ia("selmulti",
ua(a));c.push({priority:100,compile:function(){return{pre:function(a,c,h){c=h.$$observers||(h.$$observers=X());if(l.test(e))throw ia("nodomevents");var m=h[e];m!==d&&(k=m&&b(m,!0,g,f),d=m);k&&(h[e]=k(a),(c[e]||(c[e]=[])).$$inter=!0,(h.$$observers&&h.$$observers[e].$$scope||a).$watch(k,function(a,b){"class"===e&&a!=b?h.$updateClass(a,b):h.$set(e,a)}))}}}})}}function aa(a,b,c){var d=b[0],e=b.length,f=d.parentNode,g,h;if(a)for(g=0,h=a.length;g<h;g++)if(a[g]==d){a[g++]=c;h=g+e-1;for(var k=a.length;g<
k;g++,h++)h<k?a[g]=a[h]:delete a[g];a.length-=e-1;a.context===d&&(a.context=c);break}f&&f.replaceChild(c,d);a=Z.createDocumentFragment();for(g=0;g<e;g++)a.appendChild(b[g]);A.hasData(d)&&(A.data(c,A.data(d)),A(d).off("$destroy"));A.cleanData(a.querySelectorAll("*"));for(g=1;g<e;g++)delete b[g];b[0]=c;b.length=1}function da(a,b){return L(function(){return a.apply(null,arguments)},a,b)}function ea(a,b,d,e,f,g){try{a(b,d,e,f,g)}catch(h){c(h,ua(d))}}function ca(a,c,d,e,f){var g=[];n(e,function(e,h){var k=
e.attrName,l=e.optional,m,r,v,F;switch(e.mode){case "@":l||qa.call(c,k)||(d[h]=c[k]=void 0);c.$observe(k,function(a){G(a)&&(d[h]=a)});c.$$observers[k].$$scope=a;G(c[k])&&(d[h]=b(c[k])(a));break;case "=":if(!qa.call(c,k)){if(l)break;c[k]=void 0}if(l&&!c[k])break;r=p(c[k]);F=r.literal?la:function(a,b){return a===b||a!==a&&b!==b};v=r.assign||function(){m=d[h]=r(a);throw ia("nonassign",c[k],f.name);};m=d[h]=r(a);l=function(b){F(b,d[h])||(F(b,m)?v(a,b=d[h]):d[h]=b);return m=b};l.$stateful=!0;l=e.collection?
a.$watchCollection(c[k],l):a.$watch(p(c[k],l),null,r.literal);g.push(l);break;case "&":r=c.hasOwnProperty(k)?p(c[k]):w;if(r===w&&l)break;d[h]=function(b){return r(a,b)}}});return g.length&&function(){for(var a=0,b=g.length;a<b;++a)g[a]()}}var ba=/^\w/,$=Z.createElement("div"),ka=function(a,b){if(b){var c=Object.keys(b),d,e,f;d=0;for(e=c.length;d<e;d++)f=c[d],this[f]=b[f]}else this.$attr={};this.$$element=a};ka.prototype={$normalize:va,$addClass:function(a){a&&0<a.length&&F.addClass(this.$$element,
a)},$removeClass:function(a){a&&0<a.length&&F.removeClass(this.$$element,a)},$updateClass:function(a,b){var c=Zc(a,b);c&&c.length&&F.addClass(this.$$element,c);(c=Zc(b,a))&&c.length&&F.removeClass(this.$$element,c)},$set:function(a,b,d,e){var f=Sc(this.$$element[0],a),g=$c[a],h=a;f?(this.$$element.prop(a,b),e=f):g&&(this[g]=b,h=g);this[a]=b;e?this.$attr[a]=e:(e=this.$attr[a])||(this.$attr[a]=e=Ac(a,"-"));f=ta(this.$$element);if("a"===f&&("href"===a||"xlinkHref"===a)||"img"===f&&"src"===a)this[a]=
b=C(b,"src"===a);else if("img"===f&&"srcset"===a){for(var f="",g=Y(b),k=/(\s+\d+x\s*,|\s+\d+w\s*,|\s+,|,\s+)/,k=/\s/.test(g)?k:/(,)/,g=g.split(k),k=Math.floor(g.length/2),l=0;l<k;l++)var m=2*l,f=f+C(Y(g[m]),!0),f=f+(" "+Y(g[m+1]));g=Y(g[2*l]).split(/\s/);f+=C(Y(g[0]),!0);2===g.length&&(f+=" "+Y(g[1]));this[a]=b=f}!1!==d&&(null===b||x(b)?this.$$element.removeAttr(e):ba.test(e)?this.$$element.attr(e,b):W(this.$$element[0],e,b));(a=this.$$observers)&&n(a[h],function(a){try{a(b)}catch(d){c(d)}})},$observe:function(a,
b){var c=this,d=c.$$observers||(c.$$observers=X()),e=d[a]||(d[a]=[]);e.push(b);v.$evalAsync(function(){e.$$inter||!c.hasOwnProperty(a)||x(c[a])||b(c[a])});return function(){cb(e,b)}}};var V=b.startSymbol(),ga=b.endSymbol(),na="{{"==V||"}}"==ga?$a:function(a){return a.replace(/\{\{/g,V).replace(/}}/g,ga)},ja=/^ngAttr[A-Z]/,ma=/^(.+)Start$/;O.$$addBindingInfo=m?function(a,b){var c=a.data("$binding")||[];K(b)?c=c.concat(b):c.push(b);a.data("$binding",c)}:w;O.$$addBindingClass=m?function(a){N(a,"ng-binding")}:
w;O.$$addScopeInfo=m?function(a,b,c,d){a.data(c?d?"$isolateScopeNoTemplate":"$isolateScope":"$scope",b)}:w;O.$$addScopeClass=m?function(a,b){N(a,b?"ng-isolate-scope":"ng-scope")}:w;return O}]}function va(a){return gb(a.replace(Wc,""))}function Zc(a,b){var d="",c=a.split(/\s+/),e=b.split(/\s+/),f=0;a:for(;f<c.length;f++){for(var g=c[f],h=0;h<e.length;h++)if(g==e[h])continue a;d+=(0<d.length?" ":"")+g}return d}function Xc(a){a=A(a);var b=a.length;if(1>=b)return a;for(;b--;)8===a[b].nodeType&&Wf.call(a,
b,1);return a}function Dc(a,b){if(b&&G(b))return b;if(G(a)){var d=ad.exec(a);if(d)return d[3]}}function af(){var a={},b=!1;this.register=function(b,c){Ua(b,"controller");J(b)?L(a,b):a[b]=c};this.allowGlobals=function(){b=!0};this.$get=["$injector","$window",function(d,c){function e(a,b,c,d){if(!a||!J(a.$scope))throw P("$controller")("noscp",d,b);a.$scope[b]=c}return function(f,g,h,k){var l,m,s;h=!0===h;k&&G(k)&&(s=k);if(G(f)){k=f.match(ad);if(!k)throw Xf("ctrlfmt",f);m=k[1];s=s||k[3];f=a.hasOwnProperty(m)?
a[m]:Cc(g.$scope,m,!0)||(b?Cc(c,m,!0):u);Ta(f,m,!0)}if(h)return h=(K(f)?f[f.length-1]:f).prototype,l=Object.create(h||null),s&&e(g,s,l,m||f.name),L(function(){var a=d.invoke(f,l,g,m);a!==l&&(J(a)||D(a))&&(l=a,s&&e(g,s,l,m||f.name));return l},{instance:l,identifier:s});l=d.instantiate(f,g,m);s&&e(g,s,l,m||f.name);return l}}]}function bf(){this.$get=["$window",function(a){return A(a.document)}]}function cf(){this.$get=["$log",function(a){return function(b,d){a.error.apply(a,arguments)}}]}function $b(a){return J(a)?
ba(a)?a.toISOString():eb(a):a}function hf(){this.$get=function(){return function(a){if(!a)return"";var b=[];pc(a,function(a,c){null===a||x(a)||(K(a)?n(a,function(a,d){b.push(ga(c)+"="+ga($b(a)))}):b.push(ga(c)+"="+ga($b(a))))});return b.join("&")}}}function jf(){this.$get=function(){return function(a){function b(a,e,f){null===a||x(a)||(K(a)?n(a,function(a,c){b(a,e+"["+(J(a)?c:"")+"]")}):J(a)&&!ba(a)?pc(a,function(a,c){b(a,e+(f?"":"[")+c+(f?"":"]"))}):d.push(ga(e)+"="+ga($b(a))))}if(!a)return"";var d=
[];b(a,"",!0);return d.join("&")}}}function ac(a,b){if(G(a)){var d=a.replace(Yf,"").trim();if(d){var c=b("Content-Type");(c=c&&0===c.indexOf(bd))||(c=(c=d.match(Zf))&&$f[c[0]].test(d));c&&(a=vc(d))}}return a}function cd(a){var b=X(),d;G(a)?n(a.split("\n"),function(a){d=a.indexOf(":");var e=H(Y(a.substr(0,d)));a=Y(a.substr(d+1));e&&(b[e]=b[e]?b[e]+", "+a:a)}):J(a)&&n(a,function(a,d){var f=H(d),g=Y(a);f&&(b[f]=b[f]?b[f]+", "+g:g)});return b}function dd(a){var b;return function(d){b||(b=cd(a));return d?
(d=b[H(d)],void 0===d&&(d=null),d):b}}function ed(a,b,d,c){if(D(c))return c(a,b,d);n(c,function(c){a=c(a,b,d)});return a}function gf(){var a=this.defaults={transformResponse:[ac],transformRequest:[function(a){return J(a)&&"[object File]"!==ra.call(a)&&"[object Blob]"!==ra.call(a)&&"[object FormData]"!==ra.call(a)?eb(a):a}],headers:{common:{Accept:"application/json, text/plain, */*"},post:V(bc),put:V(bc),patch:V(bc)},xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",paramSerializer:"$httpParamSerializer"},
b=!1;this.useApplyAsync=function(a){return z(a)?(b=!!a,this):b};var d=!0;this.useLegacyPromiseExtensions=function(a){return z(a)?(d=!!a,this):d};var c=this.interceptors=[];this.$get=["$httpBackend","$$cookieReader","$cacheFactory","$rootScope","$q","$injector",function(e,f,g,h,k,l){function m(b){function c(a){var b=L({},a);b.data=ed(a.data,a.headers,a.status,f.transformResponse);a=a.status;return 200<=a&&300>a?b:k.reject(b)}function e(a,b){var c,d={};n(a,function(a,e){D(a)?(c=a(b),null!=c&&(d[e]=
c)):d[e]=a});return d}if(!J(b))throw P("$http")("badreq",b);if(!G(b.url))throw P("$http")("badreq",b.url);var f=L({method:"get",transformRequest:a.transformRequest,transformResponse:a.transformResponse,paramSerializer:a.paramSerializer},b);f.headers=function(b){var c=a.headers,d=L({},b.headers),f,g,h,c=L({},c.common,c[H(b.method)]);a:for(f in c){g=H(f);for(h in d)if(H(h)===g)continue a;d[f]=c[f]}return e(d,V(b))}(b);f.method=ub(f.method);f.paramSerializer=G(f.paramSerializer)?l.get(f.paramSerializer):
f.paramSerializer;var g=[function(b){var d=b.headers,e=ed(b.data,dd(d),u,b.transformRequest);x(e)&&n(d,function(a,b){"content-type"===H(b)&&delete d[b]});x(b.withCredentials)&&!x(a.withCredentials)&&(b.withCredentials=a.withCredentials);return s(b,e).then(c,c)},u],h=k.when(f);for(n(Q,function(a){(a.request||a.requestError)&&g.unshift(a.request,a.requestError);(a.response||a.responseError)&&g.push(a.response,a.responseError)});g.length;){b=g.shift();var m=g.shift(),h=h.then(b,m)}d?(h.success=function(a){Ta(a,
"fn");h.then(function(b){a(b.data,b.status,b.headers,f)});return h},h.error=function(a){Ta(a,"fn");h.then(null,function(b){a(b.data,b.status,b.headers,f)});return h}):(h.success=fd("success"),h.error=fd("error"));return h}function s(c,d){function g(a,c,d,e){function f(){l(c,a,d,e)}n&&(200<=a&&300>a?n.put(R,[a,c,cd(d),e]):n.remove(R));b?h.$applyAsync(f):(f(),h.$$phase||h.$apply())}function l(a,b,d,e){b=-1<=b?b:0;(200<=b&&300>b?F.resolve:F.reject)({data:a,status:b,headers:dd(d),config:c,statusText:e})}
function s(a){l(a.data,a.status,V(a.headers()),a.statusText)}function Q(){var a=m.pendingRequests.indexOf(c);-1!==a&&m.pendingRequests.splice(a,1)}var F=k.defer(),C=F.promise,n,N,O=c.headers,R=r(c.url,c.paramSerializer(c.params));m.pendingRequests.push(c);C.then(Q,Q);!c.cache&&!a.cache||!1===c.cache||"GET"!==c.method&&"JSONP"!==c.method||(n=J(c.cache)?c.cache:J(a.cache)?a.cache:B);n&&(N=n.get(R),z(N)?N&&D(N.then)?N.then(s,s):K(N)?l(N[1],N[0],V(N[2]),N[3]):l(N,200,{},"OK"):n.put(R,C));x(N)&&((N=gd(c.url)?
f()[c.xsrfCookieName||a.xsrfCookieName]:u)&&(O[c.xsrfHeaderName||a.xsrfHeaderName]=N),e(c.method,R,d,g,O,c.timeout,c.withCredentials,c.responseType));return C}function r(a,b){0<b.length&&(a+=(-1==a.indexOf("?")?"?":"&")+b);return a}var B=g("$http");a.paramSerializer=G(a.paramSerializer)?l.get(a.paramSerializer):a.paramSerializer;var Q=[];n(c,function(a){Q.unshift(G(a)?l.get(a):l.invoke(a))});m.pendingRequests=[];(function(a){n(arguments,function(a){m[a]=function(b,c){return m(L({},c||{},{method:a,
url:b}))}})})("get","delete","head","jsonp");(function(a){n(arguments,function(a){m[a]=function(b,c,d){return m(L({},d||{},{method:a,url:b,data:c}))}})})("post","put","patch");m.defaults=a;return m}]}function lf(){this.$get=function(){return function(){return new S.XMLHttpRequest}}}function kf(){this.$get=["$browser","$window","$document","$xhrFactory",function(a,b,d,c){return ag(a,c,a.defer,b.angular.callbacks,d[0])}]}function ag(a,b,d,c,e){function f(a,b,d){var f=e.createElement("script"),m=null;
f.type="text/javascript";f.src=a;f.async=!0;m=function(a){f.removeEventListener("load",m,!1);f.removeEventListener("error",m,!1);e.body.removeChild(f);f=null;var g=-1,B="unknown";a&&("load"!==a.type||c[b].called||(a={type:"error"}),B=a.type,g="error"===a.type?404:200);d&&d(g,B)};f.addEventListener("load",m,!1);f.addEventListener("error",m,!1);e.body.appendChild(f);return m}return function(e,h,k,l,m,s,r,B){function Q(){y&&y();v&&v.abort()}function t(b,c,e,f,g){z(M)&&d.cancel(M);y=v=null;b(c,e,f,g);
a.$$completeOutstandingRequest(w)}a.$$incOutstandingRequestCount();h=h||a.url();if("jsonp"==H(e)){var p="_"+(c.counter++).toString(36);c[p]=function(a){c[p].data=a;c[p].called=!0};var y=f(h.replace("JSON_CALLBACK","angular.callbacks."+p),p,function(a,b){t(l,a,c[p].data,"",b);c[p]=w})}else{var v=b(e,h);v.open(e,h,!0);n(m,function(a,b){z(a)&&v.setRequestHeader(b,a)});v.onload=function(){var a=v.statusText||"",b="response"in v?v.response:v.responseText,c=1223===v.status?204:v.status;0===c&&(c=b?200:
"file"==za(h).protocol?404:0);t(l,c,b,v.getAllResponseHeaders(),a)};e=function(){t(l,-1,null,null,"")};v.onerror=e;v.onabort=e;r&&(v.withCredentials=!0);if(B)try{v.responseType=B}catch(q){if("json"!==B)throw q;}v.send(x(k)?null:k)}if(0<s)var M=d(Q,s);else s&&D(s.then)&&s.then(Q)}}function ef(){var a="{{",b="}}";this.startSymbol=function(b){return b?(a=b,this):a};this.endSymbol=function(a){return a?(b=a,this):b};this.$get=["$parse","$exceptionHandler","$sce",function(d,c,e){function f(a){return"\\\\\\"+
a}function g(c){return c.replace(s,a).replace(r,b)}function h(a,b,c,d){var e;return e=a.$watch(function(a){e();return d(a)},b,c)}function k(f,k,s,r){function y(a){try{var b=a;a=s?e.getTrusted(s,b):e.valueOf(b);var d;if(r&&!z(a))d=a;else if(null==a)d="";else{switch(typeof a){case "string":break;case "number":a=""+a;break;default:a=eb(a)}d=a}return d}catch(g){c(La.interr(f,g))}}if(!f.length||-1===f.indexOf(a)){var v;k||(k=g(f),v=ka(k),v.exp=f,v.expressions=[],v.$$watchDelegate=h);return v}r=!!r;var n,
q,F=0,C=[],W=[];v=f.length;for(var N=[],O=[];F<v;)if(-1!=(n=f.indexOf(a,F))&&-1!=(q=f.indexOf(b,n+l)))F!==n&&N.push(g(f.substring(F,n))),F=f.substring(n+l,q),C.push(F),W.push(d(F,y)),F=q+m,O.push(N.length),N.push("");else{F!==v&&N.push(g(f.substring(F)));break}s&&1<N.length&&La.throwNoconcat(f);if(!k||C.length){var R=function(a){for(var b=0,c=C.length;b<c;b++){if(r&&x(a[b]))return;N[O[b]]=a[b]}return N.join("")};return L(function(a){var b=0,d=C.length,e=Array(d);try{for(;b<d;b++)e[b]=W[b](a);return R(e)}catch(g){c(La.interr(f,
g))}},{exp:f,expressions:C,$$watchDelegate:function(a,b){var c;return a.$watchGroup(W,function(d,e){var f=R(d);D(b)&&b.call(this,f,d!==e?c:f,a);c=f})}})}}var l=a.length,m=b.length,s=new RegExp(a.replace(/./g,f),"g"),r=new RegExp(b.replace(/./g,f),"g");k.startSymbol=function(){return a};k.endSymbol=function(){return b};return k}]}function ff(){this.$get=["$rootScope","$window","$q","$$q","$browser",function(a,b,d,c,e){function f(f,k,l,m){function s(){r?f.apply(null,B):f(p)}var r=4<arguments.length,
B=r?wa.call(arguments,4):[],n=b.setInterval,t=b.clearInterval,p=0,y=z(m)&&!m,v=(y?c:d).defer(),q=v.promise;l=z(l)?l:0;q.$$intervalId=n(function(){y?e.defer(s):a.$evalAsync(s);v.notify(p++);0<l&&p>=l&&(v.resolve(p),t(q.$$intervalId),delete g[q.$$intervalId]);y||a.$apply()},k);g[q.$$intervalId]=v;return q}var g={};f.cancel=function(a){return a&&a.$$intervalId in g?(g[a.$$intervalId].reject("canceled"),b.clearInterval(a.$$intervalId),delete g[a.$$intervalId],!0):!1};return f}]}function cc(a){a=a.split("/");
for(var b=a.length;b--;)a[b]=qb(a[b]);return a.join("/")}function hd(a,b){var d=za(a);b.$$protocol=d.protocol;b.$$host=d.hostname;b.$$port=ea(d.port)||bg[d.protocol]||null}function id(a,b){var d="/"!==a.charAt(0);d&&(a="/"+a);var c=za(a);b.$$path=decodeURIComponent(d&&"/"===c.pathname.charAt(0)?c.pathname.substring(1):c.pathname);b.$$search=yc(c.search);b.$$hash=decodeURIComponent(c.hash);b.$$path&&"/"!=b.$$path.charAt(0)&&(b.$$path="/"+b.$$path)}function ma(a,b){if(0===b.indexOf(a))return b.substr(a.length)}
function Ja(a){var b=a.indexOf("#");return-1==b?a:a.substr(0,b)}function kb(a){return a.replace(/(#.+)|#$/,"$1")}function dc(a,b,d){this.$$html5=!0;d=d||"";hd(a,this);this.$$parse=function(a){var d=ma(b,a);if(!G(d))throw Eb("ipthprfx",a,b);id(d,this);this.$$path||(this.$$path="/");this.$$compose()};this.$$compose=function(){var a=Sb(this.$$search),d=this.$$hash?"#"+qb(this.$$hash):"";this.$$url=cc(this.$$path)+(a?"?"+a:"")+d;this.$$absUrl=b+this.$$url.substr(1)};this.$$parseLinkUrl=function(c,e){if(e&&
"#"===e[0])return this.hash(e.slice(1)),!0;var f,g;z(f=ma(a,c))?(g=f,g=z(f=ma(d,f))?b+(ma("/",f)||f):a+g):z(f=ma(b,c))?g=b+f:b==c+"/"&&(g=b);g&&this.$$parse(g);return!!g}}function ec(a,b,d){hd(a,this);this.$$parse=function(c){var e=ma(a,c)||ma(b,c),f;x(e)||"#"!==e.charAt(0)?this.$$html5?f=e:(f="",x(e)&&(a=c,this.replace())):(f=ma(d,e),x(f)&&(f=e));id(f,this);c=this.$$path;var e=a,g=/^\/[A-Z]:(\/.*)/;0===f.indexOf(e)&&(f=f.replace(e,""));g.exec(f)||(c=(f=g.exec(c))?f[1]:c);this.$$path=c;this.$$compose()};
this.$$compose=function(){var b=Sb(this.$$search),e=this.$$hash?"#"+qb(this.$$hash):"";this.$$url=cc(this.$$path)+(b?"?"+b:"")+e;this.$$absUrl=a+(this.$$url?d+this.$$url:"")};this.$$parseLinkUrl=function(b,d){return Ja(a)==Ja(b)?(this.$$parse(b),!0):!1}}function jd(a,b,d){this.$$html5=!0;ec.apply(this,arguments);this.$$parseLinkUrl=function(c,e){if(e&&"#"===e[0])return this.hash(e.slice(1)),!0;var f,g;a==Ja(c)?f=c:(g=ma(b,c))?f=a+d+g:b===c+"/"&&(f=b);f&&this.$$parse(f);return!!f};this.$$compose=function(){var b=
Sb(this.$$search),e=this.$$hash?"#"+qb(this.$$hash):"";this.$$url=cc(this.$$path)+(b?"?"+b:"")+e;this.$$absUrl=a+d+this.$$url}}function Fb(a){return function(){return this[a]}}function kd(a,b){return function(d){if(x(d))return this[a];this[a]=b(d);this.$$compose();return this}}function mf(){var a="",b={enabled:!1,requireBase:!0,rewriteLinks:!0};this.hashPrefix=function(b){return z(b)?(a=b,this):a};this.html5Mode=function(a){return bb(a)?(b.enabled=a,this):J(a)?(bb(a.enabled)&&(b.enabled=a.enabled),
bb(a.requireBase)&&(b.requireBase=a.requireBase),bb(a.rewriteLinks)&&(b.rewriteLinks=a.rewriteLinks),this):b};this.$get=["$rootScope","$browser","$sniffer","$rootElement","$window",function(d,c,e,f,g){function h(a,b,d){var e=l.url(),f=l.$$state;try{c.url(a,b,d),l.$$state=c.state()}catch(g){throw l.url(e),l.$$state=f,g;}}function k(a,b){d.$broadcast("$locationChangeSuccess",l.absUrl(),a,l.$$state,b)}var l,m;m=c.baseHref();var s=c.url(),r;if(b.enabled){if(!m&&b.requireBase)throw Eb("nobase");r=s.substring(0,
s.indexOf("/",s.indexOf("//")+2))+(m||"/");m=e.history?dc:jd}else r=Ja(s),m=ec;var B=r.substr(0,Ja(r).lastIndexOf("/")+1);l=new m(r,B,"#"+a);l.$$parseLinkUrl(s,s);l.$$state=c.state();var n=/^\s*(javascript|mailto):/i;f.on("click",function(a){if(b.rewriteLinks&&!a.ctrlKey&&!a.metaKey&&!a.shiftKey&&2!=a.which&&2!=a.button){for(var e=A(a.target);"a"!==ta(e[0]);)if(e[0]===f[0]||!(e=e.parent())[0])return;var h=e.prop("href"),k=e.attr("href")||e.attr("xlink:href");J(h)&&"[object SVGAnimatedString]"===h.toString()&&
(h=za(h.animVal).href);n.test(h)||!h||e.attr("target")||a.isDefaultPrevented()||!l.$$parseLinkUrl(h,k)||(a.preventDefault(),l.absUrl()!=c.url()&&(d.$apply(),g.angular["ff-684208-preventDefault"]=!0))}});kb(l.absUrl())!=kb(s)&&c.url(l.absUrl(),!0);var t=!0;c.onUrlChange(function(a,b){x(ma(B,a))?g.location.href=a:(d.$evalAsync(function(){var c=l.absUrl(),e=l.$$state,f;a=kb(a);l.$$parse(a);l.$$state=b;f=d.$broadcast("$locationChangeStart",a,c,b,e).defaultPrevented;l.absUrl()===a&&(f?(l.$$parse(c),l.$$state=
e,h(c,!1,e)):(t=!1,k(c,e)))}),d.$$phase||d.$digest())});d.$watch(function(){var a=kb(c.url()),b=kb(l.absUrl()),f=c.state(),g=l.$$replace,m=a!==b||l.$$html5&&e.history&&f!==l.$$state;if(t||m)t=!1,d.$evalAsync(function(){var b=l.absUrl(),c=d.$broadcast("$locationChangeStart",b,a,l.$$state,f).defaultPrevented;l.absUrl()===b&&(c?(l.$$parse(a),l.$$state=f):(m&&h(b,g,f===l.$$state?null:l.$$state),k(a,f)))});l.$$replace=!1});return l}]}function nf(){var a=!0,b=this;this.debugEnabled=function(b){return z(b)?
(a=b,this):a};this.$get=["$window",function(d){function c(a){a instanceof Error&&(a.stack?a=a.message&&-1===a.stack.indexOf(a.message)?"Error: "+a.message+"\n"+a.stack:a.stack:a.sourceURL&&(a=a.message+"\n"+a.sourceURL+":"+a.line));return a}function e(a){var b=d.console||{},e=b[a]||b.log||w;a=!1;try{a=!!e.apply}catch(k){}return a?function(){var a=[];n(arguments,function(b){a.push(c(b))});return e.apply(b,a)}:function(a,b){e(a,null==b?"":b)}}return{log:e("log"),info:e("info"),warn:e("warn"),error:e("error"),
debug:function(){var c=e("debug");return function(){a&&c.apply(b,arguments)}}()}}]}function Xa(a,b){if("__defineGetter__"===a||"__defineSetter__"===a||"__lookupGetter__"===a||"__lookupSetter__"===a||"__proto__"===a)throw ca("isecfld",b);return a}function ld(a,b){a+="";if(!G(a))throw ca("iseccst",b);return a}function Aa(a,b){if(a){if(a.constructor===a)throw ca("isecfn",b);if(a.window===a)throw ca("isecwindow",b);if(a.children&&(a.nodeName||a.prop&&a.attr&&a.find))throw ca("isecdom",b);if(a===Object)throw ca("isecobj",
b);}return a}function md(a,b){if(a){if(a.constructor===a)throw ca("isecfn",b);if(a===cg||a===dg||a===eg)throw ca("isecff",b);}}function Gb(a,b){if(a&&(a===(0).constructor||a===(!1).constructor||a==="".constructor||a==={}.constructor||a===[].constructor||a===Function.constructor))throw ca("isecaf",b);}function fg(a,b){return"undefined"!==typeof a?a:b}function nd(a,b){return"undefined"===typeof a?b:"undefined"===typeof b?a:a+b}function T(a,b){var d,c;switch(a.type){case q.Program:d=!0;n(a.body,function(a){T(a.expression,
b);d=d&&a.expression.constant});a.constant=d;break;case q.Literal:a.constant=!0;a.toWatch=[];break;case q.UnaryExpression:T(a.argument,b);a.constant=a.argument.constant;a.toWatch=a.argument.toWatch;break;case q.BinaryExpression:T(a.left,b);T(a.right,b);a.constant=a.left.constant&&a.right.constant;a.toWatch=a.left.toWatch.concat(a.right.toWatch);break;case q.LogicalExpression:T(a.left,b);T(a.right,b);a.constant=a.left.constant&&a.right.constant;a.toWatch=a.constant?[]:[a];break;case q.ConditionalExpression:T(a.test,
b);T(a.alternate,b);T(a.consequent,b);a.constant=a.test.constant&&a.alternate.constant&&a.consequent.constant;a.toWatch=a.constant?[]:[a];break;case q.Identifier:a.constant=!1;a.toWatch=[a];break;case q.MemberExpression:T(a.object,b);a.computed&&T(a.property,b);a.constant=a.object.constant&&(!a.computed||a.property.constant);a.toWatch=[a];break;case q.CallExpression:d=a.filter?!b(a.callee.name).$stateful:!1;c=[];n(a.arguments,function(a){T(a,b);d=d&&a.constant;a.constant||c.push.apply(c,a.toWatch)});
a.constant=d;a.toWatch=a.filter&&!b(a.callee.name).$stateful?c:[a];break;case q.AssignmentExpression:T(a.left,b);T(a.right,b);a.constant=a.left.constant&&a.right.constant;a.toWatch=[a];break;case q.ArrayExpression:d=!0;c=[];n(a.elements,function(a){T(a,b);d=d&&a.constant;a.constant||c.push.apply(c,a.toWatch)});a.constant=d;a.toWatch=c;break;case q.ObjectExpression:d=!0;c=[];n(a.properties,function(a){T(a.value,b);d=d&&a.value.constant;a.value.constant||c.push.apply(c,a.value.toWatch)});a.constant=
d;a.toWatch=c;break;case q.ThisExpression:a.constant=!1;a.toWatch=[];break;case q.LocalsExpression:a.constant=!1,a.toWatch=[]}}function od(a){if(1==a.length){a=a[0].expression;var b=a.toWatch;return 1!==b.length?b:b[0]!==a?b:u}}function pd(a){return a.type===q.Identifier||a.type===q.MemberExpression}function qd(a){if(1===a.body.length&&pd(a.body[0].expression))return{type:q.AssignmentExpression,left:a.body[0].expression,right:{type:q.NGValueParameter},operator:"="}}function rd(a){return 0===a.body.length||
1===a.body.length&&(a.body[0].expression.type===q.Literal||a.body[0].expression.type===q.ArrayExpression||a.body[0].expression.type===q.ObjectExpression)}function sd(a,b){this.astBuilder=a;this.$filter=b}function td(a,b){this.astBuilder=a;this.$filter=b}function Hb(a){return"constructor"==a}function fc(a){return D(a.valueOf)?a.valueOf():gg.call(a)}function of(){var a=X(),b=X();this.$get=["$filter",function(d){function c(a,b){return null==a||null==b?a===b:"object"===typeof a&&(a=fc(a),"object"===typeof a)?
!1:a===b||a!==a&&b!==b}function e(a,b,d,e,f){var g=e.inputs,h;if(1===g.length){var k=c,g=g[0];return a.$watch(function(a){var b=g(a);c(b,k)||(h=e(a,u,u,[b]),k=b&&fc(b));return h},b,d,f)}for(var l=[],m=[],s=0,n=g.length;s<n;s++)l[s]=c,m[s]=null;return a.$watch(function(a){for(var b=!1,d=0,f=g.length;d<f;d++){var k=g[d](a);if(b||(b=!c(k,l[d])))m[d]=k,l[d]=k&&fc(k)}b&&(h=e(a,u,u,m));return h},b,d,f)}function f(a,b,c,d){var e,f;return e=a.$watch(function(a){return d(a)},function(a,c,d){f=a;D(b)&&b.apply(this,
arguments);z(a)&&d.$$postDigest(function(){z(f)&&e()})},c)}function g(a,b,c,d){function e(a){var b=!0;n(a,function(a){z(a)||(b=!1)});return b}var f,g;return f=a.$watch(function(a){return d(a)},function(a,c,d){g=a;D(b)&&b.call(this,a,c,d);e(a)&&d.$$postDigest(function(){e(g)&&f()})},c)}function h(a,b,c,d){var e;return e=a.$watch(function(a){e();return d(a)},b,c)}function k(a,b){if(!b)return a;var c=a.$$watchDelegate,d=!1,c=c!==g&&c!==f?function(c,e,f,g){f=d&&g?g[0]:a(c,e,f,g);return b(f,c,e)}:function(c,
d,e,f){e=a(c,d,e,f);c=b(e,c,d);return z(e)?c:e};a.$$watchDelegate&&a.$$watchDelegate!==e?c.$$watchDelegate=a.$$watchDelegate:b.$stateful||(c.$$watchDelegate=e,d=!a.inputs,c.inputs=a.inputs?a.inputs:[a]);return c}var l=Ea().noUnsafeEval,m={csp:l,expensiveChecks:!1},s={csp:l,expensiveChecks:!0};return function(c,l,n){var t,p,y;switch(typeof c){case "string":y=c=c.trim();var v=n?b:a;t=v[y];t||(":"===c.charAt(0)&&":"===c.charAt(1)&&(p=!0,c=c.substring(2)),n=n?s:m,t=new gc(n),t=(new hc(t,d,n)).parse(c),
t.constant?t.$$watchDelegate=h:p?t.$$watchDelegate=t.literal?g:f:t.inputs&&(t.$$watchDelegate=e),v[y]=t);return k(t,l);case "function":return k(c,l);default:return k(w,l)}}}]}function qf(){this.$get=["$rootScope","$exceptionHandler",function(a,b){return ud(function(b){a.$evalAsync(b)},b)}]}function rf(){this.$get=["$browser","$exceptionHandler",function(a,b){return ud(function(b){a.defer(b)},b)}]}function ud(a,b){function d(){this.$$state={status:0}}function c(a,b){return function(c){b.call(a,c)}}
function e(c){!c.processScheduled&&c.pending&&(c.processScheduled=!0,a(function(){var a,d,e;e=c.pending;c.processScheduled=!1;c.pending=u;for(var f=0,g=e.length;f<g;++f){d=e[f][0];a=e[f][c.status];try{D(a)?d.resolve(a(c.value)):1===c.status?d.resolve(c.value):d.reject(c.value)}catch(h){d.reject(h),b(h)}}}))}function f(){this.promise=new d}var g=P("$q",TypeError);L(d.prototype,{then:function(a,b,c){if(x(a)&&x(b)&&x(c))return this;var d=new f;this.$$state.pending=this.$$state.pending||[];this.$$state.pending.push([d,
a,b,c]);0<this.$$state.status&&e(this.$$state);return d.promise},"catch":function(a){return this.then(null,a)},"finally":function(a,b){return this.then(function(b){return k(b,!0,a)},function(b){return k(b,!1,a)},b)}});L(f.prototype,{resolve:function(a){this.promise.$$state.status||(a===this.promise?this.$$reject(g("qcycle",a)):this.$$resolve(a))},$$resolve:function(a){function d(a){k||(k=!0,h.$$resolve(a))}function f(a){k||(k=!0,h.$$reject(a))}var g,h=this,k=!1;try{if(J(a)||D(a))g=a&&a.then;D(g)?
(this.promise.$$state.status=-1,g.call(a,d,f,c(this,this.notify))):(this.promise.$$state.value=a,this.promise.$$state.status=1,e(this.promise.$$state))}catch(l){f(l),b(l)}},reject:function(a){this.promise.$$state.status||this.$$reject(a)},$$reject:function(a){this.promise.$$state.value=a;this.promise.$$state.status=2;e(this.promise.$$state)},notify:function(c){var d=this.promise.$$state.pending;0>=this.promise.$$state.status&&d&&d.length&&a(function(){for(var a,e,f=0,g=d.length;f<g;f++){e=d[f][0];
a=d[f][3];try{e.notify(D(a)?a(c):c)}catch(h){b(h)}}})}});var h=function(a,b){var c=new f;b?c.resolve(a):c.reject(a);return c.promise},k=function(a,b,c){var d=null;try{D(c)&&(d=c())}catch(e){return h(e,!1)}return d&&D(d.then)?d.then(function(){return h(a,b)},function(a){return h(a,!1)}):h(a,b)},l=function(a,b,c,d){var e=new f;e.resolve(a);return e.promise.then(b,c,d)},m=function r(a){if(!D(a))throw g("norslvr",a);if(!(this instanceof r))return new r(a);var b=new f;a(function(a){b.resolve(a)},function(a){b.reject(a)});
return b.promise};m.defer=function(){var a=new f;a.resolve=c(a,a.resolve);a.reject=c(a,a.reject);a.notify=c(a,a.notify);return a};m.reject=function(a){var b=new f;b.reject(a);return b.promise};m.when=l;m.resolve=l;m.all=function(a){var b=new f,c=0,d=K(a)?[]:{};n(a,function(a,e){c++;l(a).then(function(a){d.hasOwnProperty(e)||(d[e]=a,--c||b.resolve(d))},function(a){d.hasOwnProperty(e)||b.reject(a)})});0===c&&b.resolve(d);return b.promise};return m}function Af(){this.$get=["$window","$timeout",function(a,
b){var d=a.requestAnimationFrame||a.webkitRequestAnimationFrame,c=a.cancelAnimationFrame||a.webkitCancelAnimationFrame||a.webkitCancelRequestAnimationFrame,e=!!d,f=e?function(a){var b=d(a);return function(){c(b)}}:function(a){var c=b(a,16.66,!1);return function(){b.cancel(c)}};f.supported=e;return f}]}function pf(){function a(a){function b(){this.$$watchers=this.$$nextSibling=this.$$childHead=this.$$childTail=null;this.$$listeners={};this.$$listenerCount={};this.$$watchersCount=0;this.$id=++pb;this.$$ChildScope=
null}b.prototype=a;return b}var b=10,d=P("$rootScope"),c=null,e=null;this.digestTtl=function(a){arguments.length&&(b=a);return b};this.$get=["$exceptionHandler","$parse","$browser",function(f,g,h){function k(a){a.currentScope.$$destroyed=!0}function l(a){9===Ka&&(a.$$childHead&&l(a.$$childHead),a.$$nextSibling&&l(a.$$nextSibling));a.$parent=a.$$nextSibling=a.$$prevSibling=a.$$childHead=a.$$childTail=a.$root=a.$$watchers=null}function m(){this.$id=++pb;this.$$phase=this.$parent=this.$$watchers=this.$$nextSibling=
this.$$prevSibling=this.$$childHead=this.$$childTail=null;this.$root=this;this.$$destroyed=!1;this.$$listeners={};this.$$listenerCount={};this.$$watchersCount=0;this.$$isolateBindings=null}function s(a){if(y.$$phase)throw d("inprog",y.$$phase);y.$$phase=a}function r(a,b){do a.$$watchersCount+=b;while(a=a.$parent)}function B(a,b,c){do a.$$listenerCount[c]-=b,0===a.$$listenerCount[c]&&delete a.$$listenerCount[c];while(a=a.$parent)}function q(){}function t(){for(;M.length;)try{M.shift()()}catch(a){f(a)}e=
null}function p(){null===e&&(e=h.defer(function(){y.$apply(t)}))}m.prototype={constructor:m,$new:function(b,c){var d;c=c||this;b?(d=new m,d.$root=this.$root):(this.$$ChildScope||(this.$$ChildScope=a(this)),d=new this.$$ChildScope);d.$parent=c;d.$$prevSibling=c.$$childTail;c.$$childHead?(c.$$childTail.$$nextSibling=d,c.$$childTail=d):c.$$childHead=c.$$childTail=d;(b||c!=this)&&d.$on("$destroy",k);return d},$watch:function(a,b,d,e){var f=g(a);if(f.$$watchDelegate)return f.$$watchDelegate(this,b,d,f,
a);var h=this,k=h.$$watchers,l={fn:b,last:q,get:f,exp:e||a,eq:!!d};c=null;D(b)||(l.fn=w);k||(k=h.$$watchers=[]);k.unshift(l);r(this,1);return function(){0<=cb(k,l)&&r(h,-1);c=null}},$watchGroup:function(a,b){function c(){h=!1;k?(k=!1,b(e,e,g)):b(e,d,g)}var d=Array(a.length),e=Array(a.length),f=[],g=this,h=!1,k=!0;if(!a.length){var l=!0;g.$evalAsync(function(){l&&b(e,e,g)});return function(){l=!1}}if(1===a.length)return this.$watch(a[0],function(a,c,f){e[0]=a;d[0]=c;b(e,a===c?e:d,f)});n(a,function(a,
b){var k=g.$watch(a,function(a,f){e[b]=a;d[b]=f;h||(h=!0,g.$evalAsync(c))});f.push(k)});return function(){for(;f.length;)f.shift()()}},$watchCollection:function(a,b){function c(a){e=a;var b,d,g,h;if(!x(e)){if(J(e))if(Ca(e))for(f!==s&&(f=s,n=f.length=0,l++),a=e.length,n!==a&&(l++,f.length=n=a),b=0;b<a;b++)h=f[b],g=e[b],d=h!==h&&g!==g,d||h===g||(l++,f[b]=g);else{f!==r&&(f=r={},n=0,l++);a=0;for(b in e)qa.call(e,b)&&(a++,g=e[b],h=f[b],b in f?(d=h!==h&&g!==g,d||h===g||(l++,f[b]=g)):(n++,f[b]=g,l++));if(n>
a)for(b in l++,f)qa.call(e,b)||(n--,delete f[b])}else f!==e&&(f=e,l++);return l}}c.$stateful=!0;var d=this,e,f,h,k=1<b.length,l=0,m=g(a,c),s=[],r={},p=!0,n=0;return this.$watch(m,function(){p?(p=!1,b(e,e,d)):b(e,h,d);if(k)if(J(e))if(Ca(e)){h=Array(e.length);for(var a=0;a<e.length;a++)h[a]=e[a]}else for(a in h={},e)qa.call(e,a)&&(h[a]=e[a]);else h=e})},$digest:function(){var a,g,k,l,m,r,n=b,p,B=[],M,z;s("$digest");h.$$checkUrlChange();this===y&&null!==e&&(h.defer.cancel(e),t());c=null;do{r=!1;for(p=
this;v.length;){try{z=v.shift(),z.scope.$eval(z.expression,z.locals)}catch(w){f(w)}c=null}a:do{if(l=p.$$watchers)for(m=l.length;m--;)try{if(a=l[m])if((g=a.get(p))!==(k=a.last)&&!(a.eq?la(g,k):"number"===typeof g&&"number"===typeof k&&isNaN(g)&&isNaN(k)))r=!0,c=a,a.last=a.eq?Pa(g,null):g,a.fn(g,k===q?g:k,p),5>n&&(M=4-n,B[M]||(B[M]=[]),B[M].push({msg:D(a.exp)?"fn: "+(a.exp.name||a.exp.toString()):a.exp,newVal:g,oldVal:k}));else if(a===c){r=!1;break a}}catch(x){f(x)}if(!(l=p.$$watchersCount&&p.$$childHead||
p!==this&&p.$$nextSibling))for(;p!==this&&!(l=p.$$nextSibling);)p=p.$parent}while(p=l);if((r||v.length)&&!n--)throw y.$$phase=null,d("infdig",b,B);}while(r||v.length);for(y.$$phase=null;u.length;)try{u.shift()()}catch(A){f(A)}},$destroy:function(){if(!this.$$destroyed){var a=this.$parent;this.$broadcast("$destroy");this.$$destroyed=!0;this===y&&h.$$applicationDestroyed();r(this,-this.$$watchersCount);for(var b in this.$$listenerCount)B(this,this.$$listenerCount[b],b);a&&a.$$childHead==this&&(a.$$childHead=
this.$$nextSibling);a&&a.$$childTail==this&&(a.$$childTail=this.$$prevSibling);this.$$prevSibling&&(this.$$prevSibling.$$nextSibling=this.$$nextSibling);this.$$nextSibling&&(this.$$nextSibling.$$prevSibling=this.$$prevSibling);this.$destroy=this.$digest=this.$apply=this.$evalAsync=this.$applyAsync=w;this.$on=this.$watch=this.$watchGroup=function(){return w};this.$$listeners={};this.$$nextSibling=null;l(this)}},$eval:function(a,b){return g(a)(this,b)},$evalAsync:function(a,b){y.$$phase||v.length||
h.defer(function(){v.length&&y.$digest()});v.push({scope:this,expression:a,locals:b})},$$postDigest:function(a){u.push(a)},$apply:function(a){try{s("$apply");try{return this.$eval(a)}finally{y.$$phase=null}}catch(b){f(b)}finally{try{y.$digest()}catch(c){throw f(c),c;}}},$applyAsync:function(a){function b(){c.$eval(a)}var c=this;a&&M.push(b);p()},$on:function(a,b){var c=this.$$listeners[a];c||(this.$$listeners[a]=c=[]);c.push(b);var d=this;do d.$$listenerCount[a]||(d.$$listenerCount[a]=0),d.$$listenerCount[a]++;
while(d=d.$parent);var e=this;return function(){var d=c.indexOf(b);-1!==d&&(c[d]=null,B(e,1,a))}},$emit:function(a,b){var c=[],d,e=this,g=!1,h={name:a,targetScope:e,stopPropagation:function(){g=!0},preventDefault:function(){h.defaultPrevented=!0},defaultPrevented:!1},k=db([h],arguments,1),l,m;do{d=e.$$listeners[a]||c;h.currentScope=e;l=0;for(m=d.length;l<m;l++)if(d[l])try{d[l].apply(null,k)}catch(s){f(s)}else d.splice(l,1),l--,m--;if(g)return h.currentScope=null,h;e=e.$parent}while(e);h.currentScope=
null;return h},$broadcast:function(a,b){var c=this,d=this,e={name:a,targetScope:this,preventDefault:function(){e.defaultPrevented=!0},defaultPrevented:!1};if(!this.$$listenerCount[a])return e;for(var g=db([e],arguments,1),h,k;c=d;){e.currentScope=c;d=c.$$listeners[a]||[];h=0;for(k=d.length;h<k;h++)if(d[h])try{d[h].apply(null,g)}catch(l){f(l)}else d.splice(h,1),h--,k--;if(!(d=c.$$listenerCount[a]&&c.$$childHead||c!==this&&c.$$nextSibling))for(;c!==this&&!(d=c.$$nextSibling);)c=c.$parent}e.currentScope=
null;return e}};var y=new m,v=y.$$asyncQueue=[],u=y.$$postDigestQueue=[],M=y.$$applyAsyncQueue=[];return y}]}function je(){var a=/^\s*(https?|ftp|mailto|tel|file):/,b=/^\s*((https?|ftp|file|blob):|data:image\/)/;this.aHrefSanitizationWhitelist=function(b){return z(b)?(a=b,this):a};this.imgSrcSanitizationWhitelist=function(a){return z(a)?(b=a,this):b};this.$get=function(){return function(d,c){var e=c?b:a,f;f=za(d).href;return""===f||f.match(e)?d:"unsafe:"+f}}}function hg(a){if("self"===a)return a;
if(G(a)){if(-1<a.indexOf("***"))throw Ba("iwcard",a);a=vd(a).replace("\\*\\*",".*").replace("\\*","[^:/.?&;]*");return new RegExp("^"+a+"$")}if(Oa(a))return new RegExp("^"+a.source+"$");throw Ba("imatcher");}function wd(a){var b=[];z(a)&&n(a,function(a){b.push(hg(a))});return b}function tf(){this.SCE_CONTEXTS=ja;var a=["self"],b=[];this.resourceUrlWhitelist=function(b){arguments.length&&(a=wd(b));return a};this.resourceUrlBlacklist=function(a){arguments.length&&(b=wd(a));return b};this.$get=["$injector",
function(d){function c(a,b){return"self"===a?gd(b):!!a.exec(b.href)}function e(a){var b=function(a){this.$$unwrapTrustedValue=function(){return a}};a&&(b.prototype=new a);b.prototype.valueOf=function(){return this.$$unwrapTrustedValue()};b.prototype.toString=function(){return this.$$unwrapTrustedValue().toString()};return b}var f=function(a){throw Ba("unsafe");};d.has("$sanitize")&&(f=d.get("$sanitize"));var g=e(),h={};h[ja.HTML]=e(g);h[ja.CSS]=e(g);h[ja.URL]=e(g);h[ja.JS]=e(g);h[ja.RESOURCE_URL]=
e(h[ja.URL]);return{trustAs:function(a,b){var c=h.hasOwnProperty(a)?h[a]:null;if(!c)throw Ba("icontext",a,b);if(null===b||x(b)||""===b)return b;if("string"!==typeof b)throw Ba("itype",a);return new c(b)},getTrusted:function(d,e){if(null===e||x(e)||""===e)return e;var g=h.hasOwnProperty(d)?h[d]:null;if(g&&e instanceof g)return e.$$unwrapTrustedValue();if(d===ja.RESOURCE_URL){var g=za(e.toString()),s,r,n=!1;s=0;for(r=a.length;s<r;s++)if(c(a[s],g)){n=!0;break}if(n)for(s=0,r=b.length;s<r;s++)if(c(b[s],
g)){n=!1;break}if(n)return e;throw Ba("insecurl",e.toString());}if(d===ja.HTML)return f(e);throw Ba("unsafe");},valueOf:function(a){return a instanceof g?a.$$unwrapTrustedValue():a}}}]}function sf(){var a=!0;this.enabled=function(b){arguments.length&&(a=!!b);return a};this.$get=["$parse","$sceDelegate",function(b,d){if(a&&8>Ka)throw Ba("iequirks");var c=V(ja);c.isEnabled=function(){return a};c.trustAs=d.trustAs;c.getTrusted=d.getTrusted;c.valueOf=d.valueOf;a||(c.trustAs=c.getTrusted=function(a,b){return b},
c.valueOf=$a);c.parseAs=function(a,d){var e=b(d);return e.literal&&e.constant?e:b(d,function(b){return c.getTrusted(a,b)})};var e=c.parseAs,f=c.getTrusted,g=c.trustAs;n(ja,function(a,b){var d=H(b);c[gb("parse_as_"+d)]=function(b){return e(a,b)};c[gb("get_trusted_"+d)]=function(b){return f(a,b)};c[gb("trust_as_"+d)]=function(b){return g(a,b)}});return c}]}function uf(){this.$get=["$window","$document",function(a,b){var d={},c=ea((/android (\d+)/.exec(H((a.navigator||{}).userAgent))||[])[1]),e=/Boxee/i.test((a.navigator||
{}).userAgent),f=b[0]||{},g,h=/^(Moz|webkit|ms)(?=[A-Z])/,k=f.body&&f.body.style,l=!1,m=!1;if(k){for(var s in k)if(l=h.exec(s)){g=l[0];g=g.substr(0,1).toUpperCase()+g.substr(1);break}g||(g="WebkitOpacity"in k&&"webkit");l=!!("transition"in k||g+"Transition"in k);m=!!("animation"in k||g+"Animation"in k);!c||l&&m||(l=G(k.webkitTransition),m=G(k.webkitAnimation))}return{history:!(!a.history||!a.history.pushState||4>c||e),hasEvent:function(a){if("input"===a&&11>=Ka)return!1;if(x(d[a])){var b=f.createElement("div");
d[a]="on"+a in b}return d[a]},csp:Ea(),vendorPrefix:g,transitions:l,animations:m,android:c}}]}function wf(){var a;this.httpOptions=function(b){return b?(a=b,this):a};this.$get=["$templateCache","$http","$q","$sce",function(b,d,c,e){function f(g,h){f.totalPendingRequests++;G(g)&&b.get(g)||(g=e.getTrustedResourceUrl(g));var k=d.defaults&&d.defaults.transformResponse;K(k)?k=k.filter(function(a){return a!==ac}):k===ac&&(k=null);return d.get(g,L({cache:b,transformResponse:k},a))["finally"](function(){f.totalPendingRequests--}).then(function(a){b.put(g,
a.data);return a.data},function(a){if(!h)throw ia("tpload",g,a.status,a.statusText);return c.reject(a)})}f.totalPendingRequests=0;return f}]}function xf(){this.$get=["$rootScope","$browser","$location",function(a,b,d){return{findBindings:function(a,b,d){a=a.getElementsByClassName("ng-binding");var g=[];n(a,function(a){var c=$.element(a).data("$binding");c&&n(c,function(c){d?(new RegExp("(^|\\s)"+vd(b)+"(\\s|\\||$)")).test(c)&&g.push(a):-1!=c.indexOf(b)&&g.push(a)})});return g},findModels:function(a,
b,d){for(var g=["ng-","data-ng-","ng\\:"],h=0;h<g.length;++h){var k=a.querySelectorAll("["+g[h]+"model"+(d?"=":"*=")+'"'+b+'"]');if(k.length)return k}},getLocation:function(){return d.url()},setLocation:function(b){b!==d.url()&&(d.url(b),a.$digest())},whenStable:function(a){b.notifyWhenNoOutstandingRequests(a)}}}]}function yf(){this.$get=["$rootScope","$browser","$q","$$q","$exceptionHandler",function(a,b,d,c,e){function f(f,k,l){D(f)||(l=k,k=f,f=w);var m=wa.call(arguments,3),s=z(l)&&!l,r=(s?c:d).defer(),
n=r.promise,q;q=b.defer(function(){try{r.resolve(f.apply(null,m))}catch(b){r.reject(b),e(b)}finally{delete g[n.$$timeoutId]}s||a.$apply()},k);n.$$timeoutId=q;g[q]=r;return n}var g={};f.cancel=function(a){return a&&a.$$timeoutId in g?(g[a.$$timeoutId].reject("canceled"),delete g[a.$$timeoutId],b.defer.cancel(a.$$timeoutId)):!1};return f}]}function za(a){Ka&&(aa.setAttribute("href",a),a=aa.href);aa.setAttribute("href",a);return{href:aa.href,protocol:aa.protocol?aa.protocol.replace(/:$/,""):"",host:aa.host,
search:aa.search?aa.search.replace(/^\?/,""):"",hash:aa.hash?aa.hash.replace(/^#/,""):"",hostname:aa.hostname,port:aa.port,pathname:"/"===aa.pathname.charAt(0)?aa.pathname:"/"+aa.pathname}}function gd(a){a=G(a)?za(a):a;return a.protocol===xd.protocol&&a.host===xd.host}function zf(){this.$get=ka(S)}function yd(a){function b(a){try{return decodeURIComponent(a)}catch(b){return a}}var d=a[0]||{},c={},e="";return function(){var a,g,h,k,l;a=d.cookie||"";if(a!==e)for(e=a,a=e.split("; "),c={},h=0;h<a.length;h++)g=
a[h],k=g.indexOf("="),0<k&&(l=b(g.substring(0,k)),x(c[l])&&(c[l]=b(g.substring(k+1))));return c}}function Df(){this.$get=yd}function Lc(a){function b(d,c){if(J(d)){var e={};n(d,function(a,c){e[c]=b(c,a)});return e}return a.factory(d+"Filter",c)}this.register=b;this.$get=["$injector",function(a){return function(b){return a.get(b+"Filter")}}];b("currency",zd);b("date",Ad);b("filter",ig);b("json",jg);b("limitTo",kg);b("lowercase",lg);b("number",Bd);b("orderBy",Cd);b("uppercase",mg)}function ig(){return function(a,
b,d){if(!Ca(a)){if(null==a)return a;throw P("filter")("notarray",a);}var c;switch(ic(b)){case "function":break;case "boolean":case "null":case "number":case "string":c=!0;case "object":b=ng(b,d,c);break;default:return a}return Array.prototype.filter.call(a,b)}}function ng(a,b,d){var c=J(a)&&"$"in a;!0===b?b=la:D(b)||(b=function(a,b){if(x(a))return!1;if(null===a||null===b)return a===b;if(J(b)||J(a)&&!rc(a))return!1;a=H(""+a);b=H(""+b);return-1!==a.indexOf(b)});return function(e){return c&&!J(e)?Ma(e,
a.$,b,!1):Ma(e,a,b,d)}}function Ma(a,b,d,c,e){var f=ic(a),g=ic(b);if("string"===g&&"!"===b.charAt(0))return!Ma(a,b.substring(1),d,c);if(K(a))return a.some(function(a){return Ma(a,b,d,c)});switch(f){case "object":var h;if(c){for(h in a)if("$"!==h.charAt(0)&&Ma(a[h],b,d,!0))return!0;return e?!1:Ma(a,b,d,!1)}if("object"===g){for(h in b)if(e=b[h],!D(e)&&!x(e)&&(f="$"===h,!Ma(f?a:a[h],e,d,f,f)))return!1;return!0}return d(a,b);case "function":return!1;default:return d(a,b)}}function ic(a){return null===
a?"null":typeof a}function zd(a){var b=a.NUMBER_FORMATS;return function(a,c,e){x(c)&&(c=b.CURRENCY_SYM);x(e)&&(e=b.PATTERNS[1].maxFrac);return null==a?a:Dd(a,b.PATTERNS[1],b.GROUP_SEP,b.DECIMAL_SEP,e).replace(/\u00A4/g,c)}}function Bd(a){var b=a.NUMBER_FORMATS;return function(a,c){return null==a?a:Dd(a,b.PATTERNS[0],b.GROUP_SEP,b.DECIMAL_SEP,c)}}function og(a){var b=0,d,c,e,f,g;-1<(c=a.indexOf(Ed))&&(a=a.replace(Ed,""));0<(e=a.search(/e/i))?(0>c&&(c=e),c+=+a.slice(e+1),a=a.substring(0,e)):0>c&&(c=
a.length);for(e=0;a.charAt(e)==jc;e++);if(e==(g=a.length))d=[0],c=1;else{for(g--;a.charAt(g)==jc;)g--;c-=e;d=[];for(f=0;e<=g;e++,f++)d[f]=+a.charAt(e)}c>Fd&&(d=d.splice(0,Fd-1),b=c-1,c=1);return{d:d,e:b,i:c}}function pg(a,b,d,c){var e=a.d,f=e.length-a.i;b=x(b)?Math.min(Math.max(d,f),c):+b;d=b+a.i;c=e[d];if(0<d)e.splice(d);else{a.i=1;e.length=d=b+1;for(var g=0;g<d;g++)e[g]=0}for(5<=c&&e[d-1]++;f<b;f++)e.push(0);if(b=e.reduceRight(function(a,b,c,d){b+=a;d[c]=b%10;return Math.floor(b/10)},0))e.unshift(b),
a.i++}function Dd(a,b,d,c,e){if(!G(a)&&!U(a)||isNaN(a))return"";var f=!isFinite(a),g=!1,h=Math.abs(a)+"",k="";if(f)k="\u221e";else{g=og(h);pg(g,e,b.minFrac,b.maxFrac);k=g.d;h=g.i;e=g.e;f=[];for(g=k.reduce(function(a,b){return a&&!b},!0);0>h;)k.unshift(0),h++;0<h?f=k.splice(h):(f=k,k=[0]);h=[];for(k.length>b.lgSize&&h.unshift(k.splice(-b.lgSize).join(""));k.length>b.gSize;)h.unshift(k.splice(-b.gSize).join(""));k.length&&h.unshift(k.join(""));k=h.join(d);f.length&&(k+=c+f.join(""));e&&(k+="e+"+e)}return 0>
a&&!g?b.negPre+k+b.negSuf:b.posPre+k+b.posSuf}function Ib(a,b,d){var c="";0>a&&(c="-",a=-a);for(a=""+a;a.length<b;)a=jc+a;d&&(a=a.substr(a.length-b));return c+a}function da(a,b,d,c){d=d||0;return function(e){e=e["get"+a]();if(0<d||e>-d)e+=d;0===e&&-12==d&&(e=12);return Ib(e,b,c)}}function Jb(a,b){return function(d,c){var e=d["get"+a](),f=ub(b?"SHORT"+a:a);return c[f][e]}}function Gd(a){var b=(new Date(a,0,1)).getDay();return new Date(a,0,(4>=b?5:12)-b)}function Hd(a){return function(b){var d=Gd(b.getFullYear());
b=+new Date(b.getFullYear(),b.getMonth(),b.getDate()+(4-b.getDay()))-+d;b=1+Math.round(b/6048E5);return Ib(b,a)}}function kc(a,b){return 0>=a.getFullYear()?b.ERAS[0]:b.ERAS[1]}function Ad(a){function b(a){var b;if(b=a.match(d)){a=new Date(0);var f=0,g=0,h=b[8]?a.setUTCFullYear:a.setFullYear,k=b[8]?a.setUTCHours:a.setHours;b[9]&&(f=ea(b[9]+b[10]),g=ea(b[9]+b[11]));h.call(a,ea(b[1]),ea(b[2])-1,ea(b[3]));f=ea(b[4]||0)-f;g=ea(b[5]||0)-g;h=ea(b[6]||0);b=Math.round(1E3*parseFloat("0."+(b[7]||0)));k.call(a,
f,g,h,b)}return a}var d=/^(\d{4})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/;return function(c,d,f){var g="",h=[],k,l;d=d||"mediumDate";d=a.DATETIME_FORMATS[d]||d;G(c)&&(c=qg.test(c)?ea(c):b(c));U(c)&&(c=new Date(c));if(!ba(c)||!isFinite(c.getTime()))return c;for(;d;)(l=rg.exec(d))?(h=db(h,l,1),d=h.pop()):(h.push(d),d=null);var m=c.getTimezoneOffset();f&&(m=wc(f,c.getTimezoneOffset()),c=Rb(c,f,!0));n(h,function(b){k=sg[b];g+=k?k(c,a.DATETIME_FORMATS,
m):b.replace(/(^'|'$)/g,"").replace(/''/g,"'")});return g}}function jg(){return function(a,b){x(b)&&(b=2);return eb(a,b)}}function kg(){return function(a,b,d){b=Infinity===Math.abs(Number(b))?Number(b):ea(b);if(isNaN(b))return a;U(a)&&(a=a.toString());if(!K(a)&&!G(a))return a;d=!d||isNaN(d)?0:ea(d);d=0>d?Math.max(0,a.length+d):d;return 0<=b?a.slice(d,d+b):0===d?a.slice(b,a.length):a.slice(Math.max(0,d+b),d)}}function Cd(a){function b(b,d){d=d?-1:1;return b.map(function(b){var c=1,h=$a;if(D(b))h=b;
else if(G(b)){if("+"==b.charAt(0)||"-"==b.charAt(0))c="-"==b.charAt(0)?-1:1,b=b.substring(1);if(""!==b&&(h=a(b),h.constant))var k=h(),h=function(a){return a[k]}}return{get:h,descending:c*d}})}function d(a){switch(typeof a){case "number":case "boolean":case "string":return!0;default:return!1}}return function(a,e,f){if(null==a)return a;if(!Ca(a))throw P("orderBy")("notarray",a);K(e)||(e=[e]);0===e.length&&(e=["+"]);var g=b(e,f);g.push({get:function(){return{}},descending:f?-1:1});a=Array.prototype.map.call(a,
function(a,b){return{value:a,predicateValues:g.map(function(c){var e=c.get(a);c=typeof e;if(null===e)c="string",e="null";else if("string"===c)e=e.toLowerCase();else if("object"===c)a:{if("function"===typeof e.valueOf&&(e=e.valueOf(),d(e)))break a;if(rc(e)&&(e=e.toString(),d(e)))break a;e=b}return{value:e,type:c}})}});a.sort(function(a,b){for(var c=0,d=0,e=g.length;d<e;++d){var c=a.predicateValues[d],f=b.predicateValues[d],n=0;c.type===f.type?c.value!==f.value&&(n=c.value<f.value?-1:1):n=c.type<f.type?
-1:1;if(c=n*g[d].descending)break}return c});return a=a.map(function(a){return a.value})}}function Na(a){D(a)&&(a={link:a});a.restrict=a.restrict||"AC";return ka(a)}function Id(a,b,d,c,e){var f=this,g=[];f.$error={};f.$$success={};f.$pending=u;f.$name=e(b.name||b.ngForm||"")(d);f.$dirty=!1;f.$pristine=!0;f.$valid=!0;f.$invalid=!1;f.$submitted=!1;f.$$parentForm=Kb;f.$rollbackViewValue=function(){n(g,function(a){a.$rollbackViewValue()})};f.$commitViewValue=function(){n(g,function(a){a.$commitViewValue()})};
f.$addControl=function(a){Ua(a.$name,"input");g.push(a);a.$name&&(f[a.$name]=a);a.$$parentForm=f};f.$$renameControl=function(a,b){var c=a.$name;f[c]===a&&delete f[c];f[b]=a;a.$name=b};f.$removeControl=function(a){a.$name&&f[a.$name]===a&&delete f[a.$name];n(f.$pending,function(b,c){f.$setValidity(c,null,a)});n(f.$error,function(b,c){f.$setValidity(c,null,a)});n(f.$$success,function(b,c){f.$setValidity(c,null,a)});cb(g,a);a.$$parentForm=Kb};Jd({ctrl:this,$element:a,set:function(a,b,c){var d=a[b];d?
-1===d.indexOf(c)&&d.push(c):a[b]=[c]},unset:function(a,b,c){var d=a[b];d&&(cb(d,c),0===d.length&&delete a[b])},$animate:c});f.$setDirty=function(){c.removeClass(a,Ya);c.addClass(a,Lb);f.$dirty=!0;f.$pristine=!1;f.$$parentForm.$setDirty()};f.$setPristine=function(){c.setClass(a,Ya,Lb+" ng-submitted");f.$dirty=!1;f.$pristine=!0;f.$submitted=!1;n(g,function(a){a.$setPristine()})};f.$setUntouched=function(){n(g,function(a){a.$setUntouched()})};f.$setSubmitted=function(){c.addClass(a,"ng-submitted");
f.$submitted=!0;f.$$parentForm.$setSubmitted()}}function lc(a){a.$formatters.push(function(b){return a.$isEmpty(b)?b:b.toString()})}function lb(a,b,d,c,e,f){var g=H(b[0].type);if(!e.android){var h=!1;b.on("compositionstart",function(a){h=!0});b.on("compositionend",function(){h=!1;k()})}var k=function(a){l&&(f.defer.cancel(l),l=null);if(!h){var e=b.val();a=a&&a.type;"password"===g||d.ngTrim&&"false"===d.ngTrim||(e=Y(e));(c.$viewValue!==e||""===e&&c.$$hasNativeValidators)&&c.$setViewValue(e,a)}};if(e.hasEvent("input"))b.on("input",
k);else{var l,m=function(a,b,c){l||(l=f.defer(function(){l=null;b&&b.value===c||k(a)}))};b.on("keydown",function(a){var b=a.keyCode;91===b||15<b&&19>b||37<=b&&40>=b||m(a,this,this.value)});if(e.hasEvent("paste"))b.on("paste cut",m)}b.on("change",k);c.$render=function(){var a=c.$isEmpty(c.$viewValue)?"":c.$viewValue;b.val()!==a&&b.val(a)}}function Mb(a,b){return function(d,c){var e,f;if(ba(d))return d;if(G(d)){'"'==d.charAt(0)&&'"'==d.charAt(d.length-1)&&(d=d.substring(1,d.length-1));if(tg.test(d))return new Date(d);
a.lastIndex=0;if(e=a.exec(d))return e.shift(),f=c?{yyyy:c.getFullYear(),MM:c.getMonth()+1,dd:c.getDate(),HH:c.getHours(),mm:c.getMinutes(),ss:c.getSeconds(),sss:c.getMilliseconds()/1E3}:{yyyy:1970,MM:1,dd:1,HH:0,mm:0,ss:0,sss:0},n(e,function(a,c){c<b.length&&(f[b[c]]=+a)}),new Date(f.yyyy,f.MM-1,f.dd,f.HH,f.mm,f.ss||0,1E3*f.sss||0)}return NaN}}function mb(a,b,d,c){return function(e,f,g,h,k,l,m){function s(a){return a&&!(a.getTime&&a.getTime()!==a.getTime())}function r(a){return z(a)&&!ba(a)?d(a)||
u:a}Kd(e,f,g,h);lb(e,f,g,h,k,l);var n=h&&h.$options&&h.$options.timezone,q;h.$$parserName=a;h.$parsers.push(function(a){return h.$isEmpty(a)?null:b.test(a)?(a=d(a,q),n&&(a=Rb(a,n)),a):u});h.$formatters.push(function(a){if(a&&!ba(a))throw nb("datefmt",a);if(s(a))return(q=a)&&n&&(q=Rb(q,n,!0)),m("date")(a,c,n);q=null;return""});if(z(g.min)||g.ngMin){var t;h.$validators.min=function(a){return!s(a)||x(t)||d(a)>=t};g.$observe("min",function(a){t=r(a);h.$validate()})}if(z(g.max)||g.ngMax){var p;h.$validators.max=
function(a){return!s(a)||x(p)||d(a)<=p};g.$observe("max",function(a){p=r(a);h.$validate()})}}}function Kd(a,b,d,c){(c.$$hasNativeValidators=J(b[0].validity))&&c.$parsers.push(function(a){var c=b.prop("validity")||{};return c.badInput||c.typeMismatch?u:a})}function Ld(a,b,d,c,e){if(z(c)){a=a(c);if(!a.constant)throw nb("constexpr",d,c);return a(b)}return e}function mc(a,b){a="ngClass"+a;return["$animate",function(d){function c(a,b){var c=[],d=0;a:for(;d<a.length;d++){for(var e=a[d],m=0;m<b.length;m++)if(e==
b[m])continue a;c.push(e)}return c}function e(a){var b=[];return K(a)?(n(a,function(a){b=b.concat(e(a))}),b):G(a)?a.split(" "):J(a)?(n(a,function(a,c){a&&(b=b.concat(c.split(" ")))}),b):a}return{restrict:"AC",link:function(f,g,h){function k(a,b){var c=g.data("$classCounts")||X(),d=[];n(a,function(a){if(0<b||c[a])c[a]=(c[a]||0)+b,c[a]===+(0<b)&&d.push(a)});g.data("$classCounts",c);return d.join(" ")}function l(a){if(!0===b||f.$index%2===b){var l=e(a||[]);if(!m){var n=k(l,1);h.$addClass(n)}else if(!la(a,
m)){var q=e(m),n=c(l,q),l=c(q,l),n=k(n,1),l=k(l,-1);n&&n.length&&d.addClass(g,n);l&&l.length&&d.removeClass(g,l)}}m=V(a)}var m;f.$watch(h[a],l,!0);h.$observe("class",function(b){l(f.$eval(h[a]))});"ngClass"!==a&&f.$watch("$index",function(c,d){var g=c&1;if(g!==(d&1)){var l=e(f.$eval(h[a]));g===b?(g=k(l,1),h.$addClass(g)):(g=k(l,-1),h.$removeClass(g))}})}}}]}function Jd(a){function b(a,b){b&&!f[a]?(k.addClass(e,a),f[a]=!0):!b&&f[a]&&(k.removeClass(e,a),f[a]=!1)}function d(a,c){a=a?"-"+Ac(a,"-"):"";
b(ob+a,!0===c);b(Md+a,!1===c)}var c=a.ctrl,e=a.$element,f={},g=a.set,h=a.unset,k=a.$animate;f[Md]=!(f[ob]=e.hasClass(ob));c.$setValidity=function(a,e,f){x(e)?(c.$pending||(c.$pending={}),g(c.$pending,a,f)):(c.$pending&&h(c.$pending,a,f),Nd(c.$pending)&&(c.$pending=u));bb(e)?e?(h(c.$error,a,f),g(c.$$success,a,f)):(g(c.$error,a,f),h(c.$$success,a,f)):(h(c.$error,a,f),h(c.$$success,a,f));c.$pending?(b(Od,!0),c.$valid=c.$invalid=u,d("",null)):(b(Od,!1),c.$valid=Nd(c.$error),c.$invalid=!c.$valid,d("",
c.$valid));e=c.$pending&&c.$pending[a]?u:c.$error[a]?!1:c.$$success[a]?!0:null;d(a,e);c.$$parentForm.$setValidity(a,e,c)}}function Nd(a){if(a)for(var b in a)if(a.hasOwnProperty(b))return!1;return!0}var ug=/^\/(.+)\/([a-z]*)$/,H=function(a){return G(a)?a.toLowerCase():a},qa=Object.prototype.hasOwnProperty,ub=function(a){return G(a)?a.toUpperCase():a},Ka,A,xa,wa=[].slice,Wf=[].splice,vg=[].push,ra=Object.prototype.toString,sc=Object.getPrototypeOf,Da=P("ng"),$=S.angular||(S.angular={}),Tb,pb=0;Ka=Z.documentMode;
w.$inject=[];$a.$inject=[];var K=Array.isArray,Yd=/^\[object (?:Uint8|Uint8Clamped|Uint16|Uint32|Int8|Int16|Int32|Float32|Float64)Array\]$/,Y=function(a){return G(a)?a.trim():a},vd=function(a){return a.replace(/([-()\[\]{}+?*.$\^|,:#<!\\])/g,"\\$1").replace(/\x08/g,"\\x08")},Ea=function(){if(!z(Ea.rules)){var a=Z.querySelector("[ng-csp]")||Z.querySelector("[data-ng-csp]");if(a){var b=a.getAttribute("ng-csp")||a.getAttribute("data-ng-csp");Ea.rules={noUnsafeEval:!b||-1!==b.indexOf("no-unsafe-eval"),
noInlineStyle:!b||-1!==b.indexOf("no-inline-style")}}else{a=Ea;try{new Function(""),b=!1}catch(d){b=!0}a.rules={noUnsafeEval:b,noInlineStyle:!1}}}return Ea.rules},rb=function(){if(z(rb.name_))return rb.name_;var a,b,d=Ra.length,c,e;for(b=0;b<d;++b)if(c=Ra[b],a=Z.querySelector("["+c.replace(":","\\:")+"jq]")){e=a.getAttribute(c+"jq");break}return rb.name_=e},Ra=["ng-","data-ng-","ng:","x-ng-"],ee=/[A-Z]/g,Bc=!1,Qa=3,ie={full:"1.5.0-rc.0",major:1,minor:5,dot:0,codeName:"oblong-panoptikum"};E.expando=
"ng339";var ib=E.cache={},Jf=1;E._data=function(a){return this.cache[a[this.expando]]||{}};var Ef=/([\:\-\_]+(.))/g,Ff=/^moz([A-Z])/,yb={mouseleave:"mouseout",mouseenter:"mouseover"},Vb=P("jqLite"),If=/^<([\w-]+)\s*\/?>(?:<\/\1>|)$/,Ub=/<|&#?\w+;/,Gf=/<([\w:-]+)/,Hf=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:-]+)[^>]*)\/>/gi,na={option:[1,'<select multiple="multiple">',"</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>",
"</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};na.optgroup=na.option;na.tbody=na.tfoot=na.colgroup=na.caption=na.thead;na.th=na.td;var Of=Node.prototype.contains||function(a){return!!(this.compareDocumentPosition(a)&16)},Sa=E.prototype={ready:function(a){function b(){d||(d=!0,a())}var d=!1;"complete"===Z.readyState?setTimeout(b):(this.on("DOMContentLoaded",b),E(S).on("load",b))},toString:function(){var a=[];n(this,function(b){a.push(""+b)});return"["+a.join(", ")+
"]"},eq:function(a){return 0<=a?A(this[a]):A(this[this.length+a])},length:0,push:vg,sort:[].sort,splice:[].splice},Db={};n("multiple selected checked disabled readOnly required open".split(" "),function(a){Db[H(a)]=a});var Tc={};n("input select option textarea button form details".split(" "),function(a){Tc[a]=!0});var $c={ngMinlength:"minlength",ngMaxlength:"maxlength",ngMin:"min",ngMax:"max",ngPattern:"pattern"};n({data:Xb,removeData:hb,hasData:function(a){for(var b in ib[a.ng339])return!0;return!1},
cleanData:function(a){for(var b=0,d=a.length;b<d;b++)hb(a[b])}},function(a,b){E[b]=a});n({data:Xb,inheritedData:Cb,scope:function(a){return A.data(a,"$scope")||Cb(a.parentNode||a,["$isolateScope","$scope"])},isolateScope:function(a){return A.data(a,"$isolateScope")||A.data(a,"$isolateScopeNoTemplate")},controller:Qc,injector:function(a){return Cb(a,"$injector")},removeAttr:function(a,b){a.removeAttribute(b)},hasClass:zb,css:function(a,b,d){b=gb(b);if(z(d))a.style[b]=d;else return a.style[b]},attr:function(a,
b,d){var c=a.nodeType;if(c!==Qa&&2!==c&&8!==c)if(c=H(b),Db[c])if(z(d))d?(a[b]=!0,a.setAttribute(b,c)):(a[b]=!1,a.removeAttribute(c));else return a[b]||(a.attributes.getNamedItem(b)||w).specified?c:u;else if(z(d))a.setAttribute(b,d);else if(a.getAttribute)return a=a.getAttribute(b,2),null===a?u:a},prop:function(a,b,d){if(z(d))a[b]=d;else return a[b]},text:function(){function a(a,d){if(x(d)){var c=a.nodeType;return 1===c||c===Qa?a.textContent:""}a.textContent=d}a.$dv="";return a}(),val:function(a,b){if(x(b)){if(a.multiple&&
"select"===ta(a)){var d=[];n(a.options,function(a){a.selected&&d.push(a.value||a.text)});return 0===d.length?null:d}return a.value}a.value=b},html:function(a,b){if(x(b))return a.innerHTML;wb(a,!0);a.innerHTML=b},empty:Rc},function(a,b){E.prototype[b]=function(b,c){var e,f,g=this.length;if(a!==Rc&&x(2==a.length&&a!==zb&&a!==Qc?b:c)){if(J(b)){for(e=0;e<g;e++)if(a===Xb)a(this[e],b);else for(f in b)a(this[e],f,b[f]);return this}e=a.$dv;g=x(e)?Math.min(g,1):g;for(f=0;f<g;f++){var h=a(this[f],b,c);e=e?
e+h:h}return e}for(e=0;e<g;e++)a(this[e],b,c);return this}});n({removeData:hb,on:function(a,b,d,c){if(z(c))throw Vb("onargs");if(Mc(a)){c=xb(a,!0);var e=c.events,f=c.handle;f||(f=c.handle=Lf(a,e));c=0<=b.indexOf(" ")?b.split(" "):[b];for(var g=c.length,h=function(b,c,g){var h=e[b];h||(h=e[b]=[],h.specialHandlerWrapper=c,"$destroy"===b||g||a.addEventListener(b,f,!1));h.push(d)};g--;)b=c[g],yb[b]?(h(yb[b],Nf),h(b,u,!0)):h(b)}},off:Pc,one:function(a,b,d){a=A(a);a.on(b,function e(){a.off(b,d);a.off(b,
e)});a.on(b,d)},replaceWith:function(a,b){var d,c=a.parentNode;wb(a);n(new E(b),function(b){d?c.insertBefore(b,d.nextSibling):c.replaceChild(b,a);d=b})},children:function(a){var b=[];n(a.childNodes,function(a){1===a.nodeType&&b.push(a)});return b},contents:function(a){return a.contentDocument||a.childNodes||[]},append:function(a,b){var d=a.nodeType;if(1===d||11===d){b=new E(b);for(var d=0,c=b.length;d<c;d++)a.appendChild(b[d])}},prepend:function(a,b){if(1===a.nodeType){var d=a.firstChild;n(new E(b),
function(b){a.insertBefore(b,d)})}},wrap:function(a,b){b=A(b).eq(0).clone()[0];var d=a.parentNode;d&&d.replaceChild(b,a);b.appendChild(a)},remove:Yb,detach:function(a){Yb(a,!0)},after:function(a,b){var d=a,c=a.parentNode;b=new E(b);for(var e=0,f=b.length;e<f;e++){var g=b[e];c.insertBefore(g,d.nextSibling);d=g}},addClass:Bb,removeClass:Ab,toggleClass:function(a,b,d){b&&n(b.split(" "),function(b){var e=d;x(e)&&(e=!zb(a,b));(e?Bb:Ab)(a,b)})},parent:function(a){return(a=a.parentNode)&&11!==a.nodeType?
a:null},next:function(a){return a.nextElementSibling},find:function(a,b){return a.getElementsByTagName?a.getElementsByTagName(b):[]},clone:Wb,triggerHandler:function(a,b,d){var c,e,f=b.type||b,g=xb(a);if(g=(g=g&&g.events)&&g[f])c={preventDefault:function(){this.defaultPrevented=!0},isDefaultPrevented:function(){return!0===this.defaultPrevented},stopImmediatePropagation:function(){this.immediatePropagationStopped=!0},isImmediatePropagationStopped:function(){return!0===this.immediatePropagationStopped},
stopPropagation:w,type:f,target:a},b.type&&(c=L(c,b)),b=V(g),e=d?[c].concat(d):[c],n(b,function(b){c.isImmediatePropagationStopped()||b.apply(a,e)})}},function(a,b){E.prototype[b]=function(b,c,e){for(var f,g=0,h=this.length;g<h;g++)x(f)?(f=a(this[g],b,c,e),z(f)&&(f=A(f))):Oc(f,a(this[g],b,c,e));return z(f)?f:this};E.prototype.bind=E.prototype.on;E.prototype.unbind=E.prototype.off});Va.prototype={put:function(a,b){this[Fa(a,this.nextUid)]=b},get:function(a){return this[Fa(a,this.nextUid)]},remove:function(a){var b=
this[a=Fa(a,this.nextUid)];delete this[a];return b}};var Cf=[function(){this.$get=[function(){return Va}]}],Qf=/^([^\(]+?)=>/,Rf=/^[^\(]*\(\s*([^\)]*)\)/m,wg=/,/,xg=/^\s*(_?)(\S+?)\1\s*$/,Pf=/((\/\/.*$)|(\/\*[\s\S]*?\*\/))/mg,Ga=P("$injector");fb.$$annotate=function(a,b,d){var c;if("function"===typeof a){if(!(c=a.$inject)){c=[];if(a.length){if(b)throw G(d)&&d||(d=a.name||Sf(a)),Ga("strictdi",d);b=Uc(a);n(b[1].split(wg),function(a){a.replace(xg,function(a,b,d){c.push(d)})})}a.$inject=c}}else K(a)?
(b=a.length-1,Ta(a[b],"fn"),c=a.slice(0,b)):Ta(a,"fn",!0);return c};var Pd=P("$animate"),We=function(){var a=new Va,b=[];this.$get=["$$AnimateRunner","$rootScope",function(d,c){function e(a,b,c){var d=!1;b&&(b=G(b)?b.split(" "):K(b)?b:[],n(b,function(b){b&&(d=!0,a[b]=c)}));return d}function f(){n(b,function(b){var c=a.get(b);if(c){var d=Tf(b.attr("class")),e="",f="";n(c,function(a,b){a!==!!d[b]&&(a?e+=(e.length?" ":"")+b:f+=(f.length?" ":"")+b)});n(b,function(a){e&&Bb(a,e);f&&Ab(a,f)});a.remove(b)}});
b.length=0}return{enabled:w,on:w,off:w,pin:w,push:function(g,h,k,l){l&&l();k=k||{};k.from&&g.css(k.from);k.to&&g.css(k.to);if(k.addClass||k.removeClass)if(h=k.addClass,l=k.removeClass,k=a.get(g)||{},h=e(k,h,!0),l=e(k,l,!1),h||l)a.put(g,k),b.push(g),1===b.length&&c.$$postDigest(f);g=new d;g.complete();return g}}}]},Ue=["$provide",function(a){var b=this;this.$$registeredAnimations=Object.create(null);this.register=function(d,c){if(d&&"."!==d.charAt(0))throw Pd("notcsel",d);var e=d+"-animation";b.$$registeredAnimations[d.substr(1)]=
e;a.factory(e,c)};this.classNameFilter=function(a){if(1===arguments.length&&(this.$$classNameFilter=a instanceof RegExp?a:null)&&/(\s+|\/)ng-animate(\s+|\/)/.test(this.$$classNameFilter.toString()))throw Pd("nongcls","ng-animate");return this.$$classNameFilter};this.$get=["$$animateQueue",function(a){function b(a,c,d){if(d){var h;a:{for(h=0;h<d.length;h++){var k=d[h];if(1===k.nodeType){h=k;break a}}h=void 0}!h||h.parentNode||h.previousElementSibling||(d=null)}d?d.after(a):c.prepend(a)}return{on:a.on,
off:a.off,pin:a.pin,enabled:a.enabled,cancel:function(a){a.end&&a.end()},enter:function(e,f,g,h){f=f&&A(f);g=g&&A(g);f=f||g.parent();b(e,f,g);return a.push(e,"enter",Ia(h))},move:function(e,f,g,h){f=f&&A(f);g=g&&A(g);f=f||g.parent();b(e,f,g);return a.push(e,"move",Ia(h))},leave:function(b,c){return a.push(b,"leave",Ia(c),function(){b.remove()})},addClass:function(b,c,g){g=Ia(g);g.addClass=jb(g.addclass,c);return a.push(b,"addClass",g)},removeClass:function(b,c,g){g=Ia(g);g.removeClass=jb(g.removeClass,
c);return a.push(b,"removeClass",g)},setClass:function(b,c,g,h){h=Ia(h);h.addClass=jb(h.addClass,c);h.removeClass=jb(h.removeClass,g);return a.push(b,"setClass",h)},animate:function(b,c,g,h,k){k=Ia(k);k.from=k.from?L(k.from,c):c;k.to=k.to?L(k.to,g):g;k.tempClasses=jb(k.tempClasses,h||"ng-inline-animate");return a.push(b,"animate",k)}}}]}],Ye=function(){this.$get=["$$rAF",function(a){function b(b){d.push(b);1<d.length||a(function(){for(var a=0;a<d.length;a++)d[a]();d=[]})}var d=[];return function(){var a=
!1;b(function(){a=!0});return function(d){a?d():b(d)}}}]},Xe=function(){this.$get=["$q","$sniffer","$$animateAsyncRun",function(a,b,d){function c(a){this.setHost(a);this._doneCallbacks=[];this._runInAnimationFrame=d();this._state=0}c.chain=function(a,b){function c(){if(d===a.length)b(!0);else a[d](function(a){!1===a?b(!1):(d++,c())})}var d=0;c()};c.all=function(a,b){function c(g){k=k&&g;++d===a.length&&b(k)}var d=0,k=!0;n(a,function(a){a.done(c)})};c.prototype={setHost:function(a){this.host=a||{}},
done:function(a){2===this._state?a():this._doneCallbacks.push(a)},progress:w,getPromise:function(){if(!this.promise){var b=this;this.promise=a(function(a,c){b.done(function(b){!1===b?c():a()})})}return this.promise},then:function(a,b){return this.getPromise().then(a,b)},"catch":function(a){return this.getPromise()["catch"](a)},"finally":function(a){return this.getPromise()["finally"](a)},pause:function(){this.host.pause&&this.host.pause()},resume:function(){this.host.resume&&this.host.resume()},end:function(){this.host.end&&
this.host.end();this._resolve(!0)},cancel:function(){this.host.cancel&&this.host.cancel();this._resolve(!1)},complete:function(a){var b=this;0===b._state&&(b._state=1,b._runInAnimationFrame(function(){b._resolve(a)}))},_resolve:function(a){2!==this._state&&(n(this._doneCallbacks,function(b){b(a)}),this._doneCallbacks.length=0,this._state=2)}};return c}]},Ve=function(){this.$get=["$$rAF","$q","$$AnimateRunner",function(a,b,d){return function(b,e){function f(){a(function(){g.addClass&&(b.addClass(g.addClass),
g.addClass=null);g.removeClass&&(b.removeClass(g.removeClass),g.removeClass=null);g.to&&(b.css(g.to),g.to=null);h||k.complete();h=!0});return k}var g=Pa(e);g.cleanupStyles&&(g.from=g.to=null);g.from&&(b.css(g.from),g.from=null);var h,k=new d;return{start:f,end:f}}}]},ia=P("$compile");Ec.$inject=["$provide","$$sanitizeUriProvider"];var Wc=/^((?:x|data)[\:\-_])/i,Xf=P("$controller"),ad=/^(\S+)(\s+as\s+(\w+))?$/,df=function(){this.$get=["$document",function(a){return function(b){b?!b.nodeType&&b instanceof
A&&(b=b[0]):b=a[0].body;return b.offsetWidth+1}}]},bd="application/json",bc={"Content-Type":bd+";charset=utf-8"},Zf=/^\[|^\{(?!\{)/,$f={"[":/]$/,"{":/}$/},Yf=/^\)\]\}',?\n/,yg=P("$http"),fd=function(a){return function(){throw yg("legacy",a);}},La=$.$interpolateMinErr=P("$interpolate");La.throwNoconcat=function(a){throw La("noconcat",a);};La.interr=function(a,b){return La("interr",a,b.toString())};var zg=/^([^\?#]*)(\?([^#]*))?(#(.*))?$/,bg={http:80,https:443,ftp:21},Eb=P("$location"),Ag={$$html5:!1,
$$replace:!1,absUrl:Fb("$$absUrl"),url:function(a){if(x(a))return this.$$url;var b=zg.exec(a);(b[1]||""===a)&&this.path(decodeURIComponent(b[1]));(b[2]||b[1]||""===a)&&this.search(b[3]||"");this.hash(b[5]||"");return this},protocol:Fb("$$protocol"),host:Fb("$$host"),port:Fb("$$port"),path:kd("$$path",function(a){a=null!==a?a.toString():"";return"/"==a.charAt(0)?a:"/"+a}),search:function(a,b){switch(arguments.length){case 0:return this.$$search;case 1:if(G(a)||U(a))a=a.toString(),this.$$search=yc(a);
else if(J(a))a=Pa(a,{}),n(a,function(b,c){null==b&&delete a[c]}),this.$$search=a;else throw Eb("isrcharg");break;default:x(b)||null===b?delete this.$$search[a]:this.$$search[a]=b}this.$$compose();return this},hash:kd("$$hash",function(a){return null!==a?a.toString():""}),replace:function(){this.$$replace=!0;return this}};n([jd,ec,dc],function(a){a.prototype=Object.create(Ag);a.prototype.state=function(b){if(!arguments.length)return this.$$state;if(a!==dc||!this.$$html5)throw Eb("nostate");this.$$state=
x(b)?null:b;return this}});var ca=P("$parse"),cg=Function.prototype.call,dg=Function.prototype.apply,eg=Function.prototype.bind,Nb=X();n("+ - * / % === !== == != < > <= >= && || ! = |".split(" "),function(a){Nb[a]=!0});var Bg={n:"\n",f:"\f",r:"\r",t:"\t",v:"\v","'":"'",'"':'"'},gc=function(a){this.options=a};gc.prototype={constructor:gc,lex:function(a){this.text=a;this.index=0;for(this.tokens=[];this.index<this.text.length;)if(a=this.text.charAt(this.index),'"'===a||"'"===a)this.readString(a);else if(this.isNumber(a)||
"."===a&&this.isNumber(this.peek()))this.readNumber();else if(this.isIdent(a))this.readIdent();else if(this.is(a,"(){}[].,;:?"))this.tokens.push({index:this.index,text:a}),this.index++;else if(this.isWhitespace(a))this.index++;else{var b=a+this.peek(),d=b+this.peek(2),c=Nb[b],e=Nb[d];Nb[a]||c||e?(a=e?d:c?b:a,this.tokens.push({index:this.index,text:a,operator:!0}),this.index+=a.length):this.throwError("Unexpected next character ",this.index,this.index+1)}return this.tokens},is:function(a,b){return-1!==
b.indexOf(a)},peek:function(a){a=a||1;return this.index+a<this.text.length?this.text.charAt(this.index+a):!1},isNumber:function(a){return"0"<=a&&"9">=a&&"string"===typeof a},isWhitespace:function(a){return" "===a||"\r"===a||"\t"===a||"\n"===a||"\v"===a||"\u00a0"===a},isIdent:function(a){return"a"<=a&&"z">=a||"A"<=a&&"Z">=a||"_"===a||"$"===a},isExpOperator:function(a){return"-"===a||"+"===a||this.isNumber(a)},throwError:function(a,b,d){d=d||this.index;b=z(b)?"s "+b+"-"+this.index+" ["+this.text.substring(b,
d)+"]":" "+d;throw ca("lexerr",a,b,this.text);},readNumber:function(){for(var a="",b=this.index;this.index<this.text.length;){var d=H(this.text.charAt(this.index));if("."==d||this.isNumber(d))a+=d;else{var c=this.peek();if("e"==d&&this.isExpOperator(c))a+=d;else if(this.isExpOperator(d)&&c&&this.isNumber(c)&&"e"==a.charAt(a.length-1))a+=d;else if(!this.isExpOperator(d)||c&&this.isNumber(c)||"e"!=a.charAt(a.length-1))break;else this.throwError("Invalid exponent")}this.index++}this.tokens.push({index:b,
text:a,constant:!0,value:Number(a)})},readIdent:function(){for(var a=this.index;this.index<this.text.length;){var b=this.text.charAt(this.index);if(!this.isIdent(b)&&!this.isNumber(b))break;this.index++}this.tokens.push({index:a,text:this.text.slice(a,this.index),identifier:!0})},readString:function(a){var b=this.index;this.index++;for(var d="",c=a,e=!1;this.index<this.text.length;){var f=this.text.charAt(this.index),c=c+f;if(e)"u"===f?(e=this.text.substring(this.index+1,this.index+5),e.match(/[\da-f]{4}/i)||
this.throwError("Invalid unicode escape [\\u"+e+"]"),this.index+=4,d+=String.fromCharCode(parseInt(e,16))):d+=Bg[f]||f,e=!1;else if("\\"===f)e=!0;else{if(f===a){this.index++;this.tokens.push({index:b,text:c,constant:!0,value:d});return}d+=f}this.index++}this.throwError("Unterminated quote",b)}};var q=function(a,b){this.lexer=a;this.options=b};q.Program="Program";q.ExpressionStatement="ExpressionStatement";q.AssignmentExpression="AssignmentExpression";q.ConditionalExpression="ConditionalExpression";
q.LogicalExpression="LogicalExpression";q.BinaryExpression="BinaryExpression";q.UnaryExpression="UnaryExpression";q.CallExpression="CallExpression";q.MemberExpression="MemberExpression";q.Identifier="Identifier";q.Literal="Literal";q.ArrayExpression="ArrayExpression";q.Property="Property";q.ObjectExpression="ObjectExpression";q.ThisExpression="ThisExpression";q.LocalsExpression="LocalsExpression";q.NGValueParameter="NGValueParameter";q.prototype={ast:function(a){this.text=a;this.tokens=this.lexer.lex(a);
a=this.program();0!==this.tokens.length&&this.throwError("is an unexpected token",this.tokens[0]);return a},program:function(){for(var a=[];;)if(0<this.tokens.length&&!this.peek("}",")",";","]")&&a.push(this.expressionStatement()),!this.expect(";"))return{type:q.Program,body:a}},expressionStatement:function(){return{type:q.ExpressionStatement,expression:this.filterChain()}},filterChain:function(){for(var a=this.expression();this.expect("|");)a=this.filter(a);return a},expression:function(){return this.assignment()},
assignment:function(){var a=this.ternary();this.expect("=")&&(a={type:q.AssignmentExpression,left:a,right:this.assignment(),operator:"="});return a},ternary:function(){var a=this.logicalOR(),b,d;return this.expect("?")&&(b=this.expression(),this.consume(":"))?(d=this.expression(),{type:q.ConditionalExpression,test:a,alternate:b,consequent:d}):a},logicalOR:function(){for(var a=this.logicalAND();this.expect("||");)a={type:q.LogicalExpression,operator:"||",left:a,right:this.logicalAND()};return a},logicalAND:function(){for(var a=
this.equality();this.expect("&&");)a={type:q.LogicalExpression,operator:"&&",left:a,right:this.equality()};return a},equality:function(){for(var a=this.relational(),b;b=this.expect("==","!=","===","!==");)a={type:q.BinaryExpression,operator:b.text,left:a,right:this.relational()};return a},relational:function(){for(var a=this.additive(),b;b=this.expect("<",">","<=",">=");)a={type:q.BinaryExpression,operator:b.text,left:a,right:this.additive()};return a},additive:function(){for(var a=this.multiplicative(),
b;b=this.expect("+","-");)a={type:q.BinaryExpression,operator:b.text,left:a,right:this.multiplicative()};return a},multiplicative:function(){for(var a=this.unary(),b;b=this.expect("*","/","%");)a={type:q.BinaryExpression,operator:b.text,left:a,right:this.unary()};return a},unary:function(){var a;return(a=this.expect("+","-","!"))?{type:q.UnaryExpression,operator:a.text,prefix:!0,argument:this.unary()}:this.primary()},primary:function(){var a;this.expect("(")?(a=this.filterChain(),this.consume(")")):
this.expect("[")?a=this.arrayDeclaration():this.expect("{")?a=this.object():this.constants.hasOwnProperty(this.peek().text)?a=Pa(this.constants[this.consume().text]):this.peek().identifier?a=this.identifier():this.peek().constant?a=this.constant():this.throwError("not a primary expression",this.peek());for(var b;b=this.expect("(","[",".");)"("===b.text?(a={type:q.CallExpression,callee:a,arguments:this.parseArguments()},this.consume(")")):"["===b.text?(a={type:q.MemberExpression,object:a,property:this.expression(),
computed:!0},this.consume("]")):"."===b.text?a={type:q.MemberExpression,object:a,property:this.identifier(),computed:!1}:this.throwError("IMPOSSIBLE");return a},filter:function(a){a=[a];for(var b={type:q.CallExpression,callee:this.identifier(),arguments:a,filter:!0};this.expect(":");)a.push(this.expression());return b},parseArguments:function(){var a=[];if(")"!==this.peekToken().text){do a.push(this.expression());while(this.expect(","))}return a},identifier:function(){var a=this.consume();a.identifier||
this.throwError("is not a valid identifier",a);return{type:q.Identifier,name:a.text}},constant:function(){return{type:q.Literal,value:this.consume().value}},arrayDeclaration:function(){var a=[];if("]"!==this.peekToken().text){do{if(this.peek("]"))break;a.push(this.expression())}while(this.expect(","))}this.consume("]");return{type:q.ArrayExpression,elements:a}},object:function(){var a=[],b;if("}"!==this.peekToken().text){do{if(this.peek("}"))break;b={type:q.Property,kind:"init"};this.peek().constant?
b.key=this.constant():this.peek().identifier?b.key=this.identifier():this.throwError("invalid key",this.peek());this.consume(":");b.value=this.expression();a.push(b)}while(this.expect(","))}this.consume("}");return{type:q.ObjectExpression,properties:a}},throwError:function(a,b){throw ca("syntax",b.text,a,b.index+1,this.text,this.text.substring(b.index));},consume:function(a){if(0===this.tokens.length)throw ca("ueoe",this.text);var b=this.expect(a);b||this.throwError("is unexpected, expecting ["+a+
"]",this.peek());return b},peekToken:function(){if(0===this.tokens.length)throw ca("ueoe",this.text);return this.tokens[0]},peek:function(a,b,d,c){return this.peekAhead(0,a,b,d,c)},peekAhead:function(a,b,d,c,e){if(this.tokens.length>a){a=this.tokens[a];var f=a.text;if(f===b||f===d||f===c||f===e||!(b||d||c||e))return a}return!1},expect:function(a,b,d,c){return(a=this.peek(a,b,d,c))?(this.tokens.shift(),a):!1},constants:{"true":{type:q.Literal,value:!0},"false":{type:q.Literal,value:!1},"null":{type:q.Literal,
value:null},undefined:{type:q.Literal,value:u},"this":{type:q.ThisExpression},$locals:{type:q.LocalsExpression}}};sd.prototype={compile:function(a,b){var d=this,c=this.astBuilder.ast(a);this.state={nextId:0,filters:{},expensiveChecks:b,fn:{vars:[],body:[],own:{}},assign:{vars:[],body:[],own:{}},inputs:[]};T(c,d.$filter);var e="",f;this.stage="assign";if(f=qd(c))this.state.computing="assign",e=this.nextId(),this.recurse(f,e),this.return_(e),e="fn.assign="+this.generateFunction("assign","s,v,l");f=
od(c.body);d.stage="inputs";n(f,function(a,b){var c="fn"+b;d.state[c]={vars:[],body:[],own:{}};d.state.computing=c;var e=d.nextId();d.recurse(a,e);d.return_(e);d.state.inputs.push(c);a.watchId=b});this.state.computing="fn";this.stage="main";this.recurse(c);e='"'+this.USE+" "+this.STRICT+'";\n'+this.filterPrefix()+"var fn="+this.generateFunction("fn","s,l,a,i")+e+this.watchFns()+"return fn;";e=(new Function("$filter","ensureSafeMemberName","ensureSafeObject","ensureSafeFunction","getStringValue","ensureSafeAssignContext",
"ifDefined","plus","text",e))(this.$filter,Xa,Aa,md,ld,Gb,fg,nd,a);this.state=this.stage=u;e.literal=rd(c);e.constant=c.constant;return e},USE:"use",STRICT:"strict",watchFns:function(){var a=[],b=this.state.inputs,d=this;n(b,function(b){a.push("var "+b+"="+d.generateFunction(b,"s"))});b.length&&a.push("fn.inputs=["+b.join(",")+"];");return a.join("")},generateFunction:function(a,b){return"function("+b+"){"+this.varsPrefix(a)+this.body(a)+"};"},filterPrefix:function(){var a=[],b=this;n(this.state.filters,
function(d,c){a.push(d+"=$filter("+b.escape(c)+")")});return a.length?"var "+a.join(",")+";":""},varsPrefix:function(a){return this.state[a].vars.length?"var "+this.state[a].vars.join(",")+";":""},body:function(a){return this.state[a].body.join("")},recurse:function(a,b,d,c,e,f){var g,h,k=this,l,m;c=c||w;if(!f&&z(a.watchId))b=b||this.nextId(),this.if_("i",this.lazyAssign(b,this.computedMember("i",a.watchId)),this.lazyRecurse(a,b,d,c,e,!0));else switch(a.type){case q.Program:n(a.body,function(b,c){k.recurse(b.expression,
u,u,function(a){h=a});c!==a.body.length-1?k.current().body.push(h,";"):k.return_(h)});break;case q.Literal:m=this.escape(a.value);this.assign(b,m);c(m);break;case q.UnaryExpression:this.recurse(a.argument,u,u,function(a){h=a});m=a.operator+"("+this.ifDefined(h,0)+")";this.assign(b,m);c(m);break;case q.BinaryExpression:this.recurse(a.left,u,u,function(a){g=a});this.recurse(a.right,u,u,function(a){h=a});m="+"===a.operator?this.plus(g,h):"-"===a.operator?this.ifDefined(g,0)+a.operator+this.ifDefined(h,
0):"("+g+")"+a.operator+"("+h+")";this.assign(b,m);c(m);break;case q.LogicalExpression:b=b||this.nextId();k.recurse(a.left,b);k.if_("&&"===a.operator?b:k.not(b),k.lazyRecurse(a.right,b));c(b);break;case q.ConditionalExpression:b=b||this.nextId();k.recurse(a.test,b);k.if_(b,k.lazyRecurse(a.alternate,b),k.lazyRecurse(a.consequent,b));c(b);break;case q.Identifier:b=b||this.nextId();d&&(d.context="inputs"===k.stage?"s":this.assign(this.nextId(),this.getHasOwnProperty("l",a.name)+"?l:s"),d.computed=!1,
d.name=a.name);Xa(a.name);k.if_("inputs"===k.stage||k.not(k.getHasOwnProperty("l",a.name)),function(){k.if_("inputs"===k.stage||"s",function(){e&&1!==e&&k.if_(k.not(k.nonComputedMember("s",a.name)),k.lazyAssign(k.nonComputedMember("s",a.name),"{}"));k.assign(b,k.nonComputedMember("s",a.name))})},b&&k.lazyAssign(b,k.nonComputedMember("l",a.name)));(k.state.expensiveChecks||Hb(a.name))&&k.addEnsureSafeObject(b);c(b);break;case q.MemberExpression:g=d&&(d.context=this.nextId())||this.nextId();b=b||this.nextId();
k.recurse(a.object,g,u,function(){k.if_(k.notNull(g),function(){e&&1!==e&&k.addEnsureSafeAssignContext(g);if(a.computed)h=k.nextId(),k.recurse(a.property,h),k.getStringValue(h),k.addEnsureSafeMemberName(h),e&&1!==e&&k.if_(k.not(k.computedMember(g,h)),k.lazyAssign(k.computedMember(g,h),"{}")),m=k.ensureSafeObject(k.computedMember(g,h)),k.assign(b,m),d&&(d.computed=!0,d.name=h);else{Xa(a.property.name);e&&1!==e&&k.if_(k.not(k.nonComputedMember(g,a.property.name)),k.lazyAssign(k.nonComputedMember(g,
a.property.name),"{}"));m=k.nonComputedMember(g,a.property.name);if(k.state.expensiveChecks||Hb(a.property.name))m=k.ensureSafeObject(m);k.assign(b,m);d&&(d.computed=!1,d.name=a.property.name)}},function(){k.assign(b,"undefined")});c(b)},!!e);break;case q.CallExpression:b=b||this.nextId();a.filter?(h=k.filter(a.callee.name),l=[],n(a.arguments,function(a){var b=k.nextId();k.recurse(a,b);l.push(b)}),m=h+"("+l.join(",")+")",k.assign(b,m),c(b)):(h=k.nextId(),g={},l=[],k.recurse(a.callee,h,g,function(){k.if_(k.notNull(h),
function(){k.addEnsureSafeFunction(h);n(a.arguments,function(a){k.recurse(a,k.nextId(),u,function(a){l.push(k.ensureSafeObject(a))})});g.name?(k.state.expensiveChecks||k.addEnsureSafeObject(g.context),m=k.member(g.context,g.name,g.computed)+"("+l.join(",")+")"):m=h+"("+l.join(",")+")";m=k.ensureSafeObject(m);k.assign(b,m)},function(){k.assign(b,"undefined")});c(b)}));break;case q.AssignmentExpression:h=this.nextId();g={};if(!pd(a.left))throw ca("lval");this.recurse(a.left,u,g,function(){k.if_(k.notNull(g.context),
function(){k.recurse(a.right,h);k.addEnsureSafeObject(k.member(g.context,g.name,g.computed));k.addEnsureSafeAssignContext(g.context);m=k.member(g.context,g.name,g.computed)+a.operator+h;k.assign(b,m);c(b||m)})},1);break;case q.ArrayExpression:l=[];n(a.elements,function(a){k.recurse(a,k.nextId(),u,function(a){l.push(a)})});m="["+l.join(",")+"]";this.assign(b,m);c(m);break;case q.ObjectExpression:l=[];n(a.properties,function(a){k.recurse(a.value,k.nextId(),u,function(b){l.push(k.escape(a.key.type===
q.Identifier?a.key.name:""+a.key.value)+":"+b)})});m="{"+l.join(",")+"}";this.assign(b,m);c(m);break;case q.ThisExpression:this.assign(b,"s");c("s");break;case q.LocalsExpression:this.assign(b,"l");c("l");break;case q.NGValueParameter:this.assign(b,"v"),c("v")}},getHasOwnProperty:function(a,b){var d=a+"."+b,c=this.current().own;c.hasOwnProperty(d)||(c[d]=this.nextId(!1,a+"&&("+this.escape(b)+" in "+a+")"));return c[d]},assign:function(a,b){if(a)return this.current().body.push(a,"=",b,";"),a},filter:function(a){this.state.filters.hasOwnProperty(a)||
(this.state.filters[a]=this.nextId(!0));return this.state.filters[a]},ifDefined:function(a,b){return"ifDefined("+a+","+this.escape(b)+")"},plus:function(a,b){return"plus("+a+","+b+")"},return_:function(a){this.current().body.push("return ",a,";")},if_:function(a,b,d){if(!0===a)b();else{var c=this.current().body;c.push("if(",a,"){");b();c.push("}");d&&(c.push("else{"),d(),c.push("}"))}},not:function(a){return"!("+a+")"},notNull:function(a){return a+"!=null"},nonComputedMember:function(a,b){return a+
"."+b},computedMember:function(a,b){return a+"["+b+"]"},member:function(a,b,d){return d?this.computedMember(a,b):this.nonComputedMember(a,b)},addEnsureSafeObject:function(a){this.current().body.push(this.ensureSafeObject(a),";")},addEnsureSafeMemberName:function(a){this.current().body.push(this.ensureSafeMemberName(a),";")},addEnsureSafeFunction:function(a){this.current().body.push(this.ensureSafeFunction(a),";")},addEnsureSafeAssignContext:function(a){this.current().body.push(this.ensureSafeAssignContext(a),
";")},ensureSafeObject:function(a){return"ensureSafeObject("+a+",text)"},ensureSafeMemberName:function(a){return"ensureSafeMemberName("+a+",text)"},ensureSafeFunction:function(a){return"ensureSafeFunction("+a+",text)"},getStringValue:function(a){this.assign(a,"getStringValue("+a+",text)")},ensureSafeAssignContext:function(a){return"ensureSafeAssignContext("+a+",text)"},lazyRecurse:function(a,b,d,c,e,f){var g=this;return function(){g.recurse(a,b,d,c,e,f)}},lazyAssign:function(a,b){var d=this;return function(){d.assign(a,
b)}},stringEscapeRegex:/[^ a-zA-Z0-9]/g,stringEscapeFn:function(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)},escape:function(a){if(G(a))return"'"+a.replace(this.stringEscapeRegex,this.stringEscapeFn)+"'";if(U(a))return a.toString();if(!0===a)return"true";if(!1===a)return"false";if(null===a)return"null";if("undefined"===typeof a)return"undefined";throw ca("esc");},nextId:function(a,b){var d="v"+this.state.nextId++;a||this.current().vars.push(d+(b?"="+b:""));return d},current:function(){return this.state[this.state.computing]}};
td.prototype={compile:function(a,b){var d=this,c=this.astBuilder.ast(a);this.expression=a;this.expensiveChecks=b;T(c,d.$filter);var e,f;if(e=qd(c))f=this.recurse(e);e=od(c.body);var g;e&&(g=[],n(e,function(a,b){var c=d.recurse(a);a.input=c;g.push(c);a.watchId=b}));var h=[];n(c.body,function(a){h.push(d.recurse(a.expression))});e=0===c.body.length?function(){}:1===c.body.length?h[0]:function(a,b){var c;n(h,function(d){c=d(a,b)});return c};f&&(e.assign=function(a,b,c){return f(a,c,b)});g&&(e.inputs=
g);e.literal=rd(c);e.constant=c.constant;return e},recurse:function(a,b,d){var c,e,f=this,g;if(a.input)return this.inputs(a.input,a.watchId);switch(a.type){case q.Literal:return this.value(a.value,b);case q.UnaryExpression:return e=this.recurse(a.argument),this["unary"+a.operator](e,b);case q.BinaryExpression:return c=this.recurse(a.left),e=this.recurse(a.right),this["binary"+a.operator](c,e,b);case q.LogicalExpression:return c=this.recurse(a.left),e=this.recurse(a.right),this["binary"+a.operator](c,
e,b);case q.ConditionalExpression:return this["ternary?:"](this.recurse(a.test),this.recurse(a.alternate),this.recurse(a.consequent),b);case q.Identifier:return Xa(a.name,f.expression),f.identifier(a.name,f.expensiveChecks||Hb(a.name),b,d,f.expression);case q.MemberExpression:return c=this.recurse(a.object,!1,!!d),a.computed||(Xa(a.property.name,f.expression),e=a.property.name),a.computed&&(e=this.recurse(a.property)),a.computed?this.computedMember(c,e,b,d,f.expression):this.nonComputedMember(c,e,
f.expensiveChecks,b,d,f.expression);case q.CallExpression:return g=[],n(a.arguments,function(a){g.push(f.recurse(a))}),a.filter&&(e=this.$filter(a.callee.name)),a.filter||(e=this.recurse(a.callee,!0)),a.filter?function(a,c,d,f){for(var n=[],r=0;r<g.length;++r)n.push(g[r](a,c,d,f));a=e.apply(u,n,f);return b?{context:u,name:u,value:a}:a}:function(a,c,d,m){var n=e(a,c,d,m),r;if(null!=n.value){Aa(n.context,f.expression);md(n.value,f.expression);r=[];for(var q=0;q<g.length;++q)r.push(Aa(g[q](a,c,d,m),
f.expression));r=Aa(n.value.apply(n.context,r),f.expression)}return b?{value:r}:r};case q.AssignmentExpression:return c=this.recurse(a.left,!0,1),e=this.recurse(a.right),function(a,d,g,m){var n=c(a,d,g,m);a=e(a,d,g,m);Aa(n.value,f.expression);Gb(n.context);n.context[n.name]=a;return b?{value:a}:a};case q.ArrayExpression:return g=[],n(a.elements,function(a){g.push(f.recurse(a))}),function(a,c,d,e){for(var f=[],n=0;n<g.length;++n)f.push(g[n](a,c,d,e));return b?{value:f}:f};case q.ObjectExpression:return g=
[],n(a.properties,function(a){g.push({key:a.key.type===q.Identifier?a.key.name:""+a.key.value,value:f.recurse(a.value)})}),function(a,c,d,e){for(var f={},n=0;n<g.length;++n)f[g[n].key]=g[n].value(a,c,d,e);return b?{value:f}:f};case q.ThisExpression:return function(a){return b?{value:a}:a};case q.LocalsExpression:return function(a,c){return b?{value:c}:c};case q.NGValueParameter:return function(a,c,d,e){return b?{value:d}:d}}},"unary+":function(a,b){return function(d,c,e,f){d=a(d,c,e,f);d=z(d)?+d:
0;return b?{value:d}:d}},"unary-":function(a,b){return function(d,c,e,f){d=a(d,c,e,f);d=z(d)?-d:0;return b?{value:d}:d}},"unary!":function(a,b){return function(d,c,e,f){d=!a(d,c,e,f);return b?{value:d}:d}},"binary+":function(a,b,d){return function(c,e,f,g){var h=a(c,e,f,g);c=b(c,e,f,g);h=nd(h,c);return d?{value:h}:h}},"binary-":function(a,b,d){return function(c,e,f,g){var h=a(c,e,f,g);c=b(c,e,f,g);h=(z(h)?h:0)-(z(c)?c:0);return d?{value:h}:h}},"binary*":function(a,b,d){return function(c,e,f,g){c=
a(c,e,f,g)*b(c,e,f,g);return d?{value:c}:c}},"binary/":function(a,b,d){return function(c,e,f,g){c=a(c,e,f,g)/b(c,e,f,g);return d?{value:c}:c}},"binary%":function(a,b,d){return function(c,e,f,g){c=a(c,e,f,g)%b(c,e,f,g);return d?{value:c}:c}},"binary===":function(a,b,d){return function(c,e,f,g){c=a(c,e,f,g)===b(c,e,f,g);return d?{value:c}:c}},"binary!==":function(a,b,d){return function(c,e,f,g){c=a(c,e,f,g)!==b(c,e,f,g);return d?{value:c}:c}},"binary==":function(a,b,d){return function(c,e,f,g){c=a(c,
e,f,g)==b(c,e,f,g);return d?{value:c}:c}},"binary!=":function(a,b,d){return function(c,e,f,g){c=a(c,e,f,g)!=b(c,e,f,g);return d?{value:c}:c}},"binary<":function(a,b,d){return function(c,e,f,g){c=a(c,e,f,g)<b(c,e,f,g);return d?{value:c}:c}},"binary>":function(a,b,d){return function(c,e,f,g){c=a(c,e,f,g)>b(c,e,f,g);return d?{value:c}:c}},"binary<=":function(a,b,d){return function(c,e,f,g){c=a(c,e,f,g)<=b(c,e,f,g);return d?{value:c}:c}},"binary>=":function(a,b,d){return function(c,e,f,g){c=a(c,e,f,g)>=
b(c,e,f,g);return d?{value:c}:c}},"binary&&":function(a,b,d){return function(c,e,f,g){c=a(c,e,f,g)&&b(c,e,f,g);return d?{value:c}:c}},"binary||":function(a,b,d){return function(c,e,f,g){c=a(c,e,f,g)||b(c,e,f,g);return d?{value:c}:c}},"ternary?:":function(a,b,d,c){return function(e,f,g,h){e=a(e,f,g,h)?b(e,f,g,h):d(e,f,g,h);return c?{value:e}:e}},value:function(a,b){return function(){return b?{context:u,name:u,value:a}:a}},identifier:function(a,b,d,c,e){return function(f,g,h,k){f=g&&a in g?g:f;c&&1!==
c&&f&&!f[a]&&(f[a]={});g=f?f[a]:u;b&&Aa(g,e);return d?{context:f,name:a,value:g}:g}},computedMember:function(a,b,d,c,e){return function(f,g,h,k){var l=a(f,g,h,k),m,n;null!=l&&(m=b(f,g,h,k),m=ld(m),Xa(m,e),c&&1!==c&&(Gb(l),l&&!l[m]&&(l[m]={})),n=l[m],Aa(n,e));return d?{context:l,name:m,value:n}:n}},nonComputedMember:function(a,b,d,c,e,f){return function(g,h,k,l){g=a(g,h,k,l);e&&1!==e&&(Gb(g),g&&!g[b]&&(g[b]={}));h=null!=g?g[b]:u;(d||Hb(b))&&Aa(h,f);return c?{context:g,name:b,value:h}:h}},inputs:function(a,
b){return function(d,c,e,f){return f?f[b]:a(d,c,e)}}};var hc=function(a,b,d){this.lexer=a;this.$filter=b;this.options=d;this.ast=new q(this.lexer);this.astCompiler=d.csp?new td(this.ast,b):new sd(this.ast,b)};hc.prototype={constructor:hc,parse:function(a){return this.astCompiler.compile(a,this.options.expensiveChecks)}};X();X();var gg=Object.prototype.valueOf,Ba=P("$sce"),ja={HTML:"html",CSS:"css",URL:"url",RESOURCE_URL:"resourceUrl",JS:"js"},ia=P("$compile"),aa=Z.createElement("a"),xd=za(S.location.href);
yd.$inject=["$document"];Lc.$inject=["$provide"];var Fd=22,Ed=".",jc="0";zd.$inject=["$locale"];Bd.$inject=["$locale"];var sg={yyyy:da("FullYear",4),yy:da("FullYear",2,0,!0),y:da("FullYear",1),MMMM:Jb("Month"),MMM:Jb("Month",!0),MM:da("Month",2,1),M:da("Month",1,1),dd:da("Date",2),d:da("Date",1),HH:da("Hours",2),H:da("Hours",1),hh:da("Hours",2,-12),h:da("Hours",1,-12),mm:da("Minutes",2),m:da("Minutes",1),ss:da("Seconds",2),s:da("Seconds",1),sss:da("Milliseconds",3),EEEE:Jb("Day"),EEE:Jb("Day",!0),
a:function(a,b){return 12>a.getHours()?b.AMPMS[0]:b.AMPMS[1]},Z:function(a,b,d){a=-1*d;return a=(0<=a?"+":"")+(Ib(Math[0<a?"floor":"ceil"](a/60),2)+Ib(Math.abs(a%60),2))},ww:Hd(2),w:Hd(1),G:kc,GG:kc,GGG:kc,GGGG:function(a,b){return 0>=a.getFullYear()?b.ERANAMES[0]:b.ERANAMES[1]}},rg=/((?:[^yMdHhmsaZEwG']+)|(?:'(?:[^']|'')*')|(?:E+|y+|M+|d+|H+|h+|m+|s+|a|Z|G+|w+))(.*)/,qg=/^\-?\d+$/;Ad.$inject=["$locale"];var lg=ka(H),mg=ka(ub);Cd.$inject=["$parse"];var ke=ka({restrict:"E",compile:function(a,b){if(!b.href&&
!b.xlinkHref)return function(a,b){if("a"===b[0].nodeName.toLowerCase()){var e="[object SVGAnimatedString]"===ra.call(b.prop("href"))?"xlink:href":"href";b.on("click",function(a){b.attr(e)||a.preventDefault()})}}}}),vb={};n(Db,function(a,b){function d(a,d,e){a.$watch(e[c],function(a){e.$set(b,!!a)})}if("multiple"!=a){var c=va("ng-"+b),e=d;"checked"===a&&(e=function(a,b,e){e.ngModel!==e[c]&&d(a,b,e)});vb[c]=function(){return{restrict:"A",priority:100,link:e}}}});n($c,function(a,b){vb[b]=function(){return{priority:100,
link:function(a,c,e){if("ngPattern"===b&&"/"==e.ngPattern.charAt(0)&&(c=e.ngPattern.match(ug))){e.$set("ngPattern",new RegExp(c[1],c[2]));return}a.$watch(e[b],function(a){e.$set(b,a)})}}}});n(["src","srcset","href"],function(a){var b=va("ng-"+a);vb[b]=function(){return{priority:99,link:function(d,c,e){var f=a,g=a;"href"===a&&"[object SVGAnimatedString]"===ra.call(c.prop("href"))&&(g="xlinkHref",e.$attr[g]="xlink:href",f=null);e.$observe(b,function(b){b?(e.$set(g,b),Ka&&f&&c.prop(f,e[g])):"href"===
a&&e.$set(g,null)})}}}});var Kb={$addControl:w,$$renameControl:function(a,b){a.$name=b},$removeControl:w,$setValidity:w,$setDirty:w,$setPristine:w,$setSubmitted:w};Id.$inject=["$element","$attrs","$scope","$animate","$interpolate"];var Qd=function(a){return["$timeout","$parse",function(b,d){function c(a){return""===a?d('this[""]').assign:d(a).assign||w}return{name:"form",restrict:a?"EAC":"E",require:["form","^^?form"],controller:Id,compile:function(d,f){d.addClass(Ya).addClass(ob);var g=f.name?"name":
a&&f.ngForm?"ngForm":!1;return{pre:function(a,d,e,f){var n=f[0];if(!("action"in e)){var r=function(b){a.$apply(function(){n.$commitViewValue();n.$setSubmitted()});b.preventDefault()};d[0].addEventListener("submit",r,!1);d.on("$destroy",function(){b(function(){d[0].removeEventListener("submit",r,!1)},0,!1)})}(f[1]||n.$$parentForm).$addControl(n);var q=g?c(n.$name):w;g&&(q(a,n),e.$observe(g,function(b){n.$name!==b&&(q(a,u),n.$$parentForm.$$renameControl(n,b),q=c(n.$name),q(a,n))}));d.on("$destroy",
function(){n.$$parentForm.$removeControl(n);q(a,u);L(n,Kb)})}}}}}]},le=Qd(),ye=Qd(!0),tg=/\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z)/,Cg=/^[A-Za-z][A-Za-z\d.+-]*:\/*(?:\w+(?::\w+)?@)?[^\s/]+(?::\d+)?(?:\/[\w#!:.?+=&%@\-/[\]$'()*,;~]*)?$/,Dg=/^[a-z0-9!#$%&'*+\/=?^_`{|}~.-]+@[a-z0-9]([a-z0-9-]*[a-z0-9])?(\.[a-z0-9]([a-z0-9-]*[a-z0-9])?)*$/i,Eg=/^\s*(\-|\+)?(\d+|(\d*(\.\d*)))([eE][+-]?\d+)?\s*$/,Rd=/^(\d{4})-(\d{2})-(\d{2})$/,Sd=/^(\d{4})-(\d\d)-(\d\d)T(\d\d):(\d\d)(?::(\d\d)(\.\d{1,3})?)?$/,
nc=/^(\d{4})-W(\d\d)$/,Td=/^(\d{4})-(\d\d)$/,Ud=/^(\d\d):(\d\d)(?::(\d\d)(\.\d{1,3})?)?$/,Vd={text:function(a,b,d,c,e,f){lb(a,b,d,c,e,f);lc(c)},date:mb("date",Rd,Mb(Rd,["yyyy","MM","dd"]),"yyyy-MM-dd"),"datetime-local":mb("datetimelocal",Sd,Mb(Sd,"yyyy MM dd HH mm ss sss".split(" ")),"yyyy-MM-ddTHH:mm:ss.sss"),time:mb("time",Ud,Mb(Ud,["HH","mm","ss","sss"]),"HH:mm:ss.sss"),week:mb("week",nc,function(a,b){if(ba(a))return a;if(G(a)){nc.lastIndex=0;var d=nc.exec(a);if(d){var c=+d[1],e=+d[2],f=d=0,g=
0,h=0,k=Gd(c),e=7*(e-1);b&&(d=b.getHours(),f=b.getMinutes(),g=b.getSeconds(),h=b.getMilliseconds());return new Date(c,0,k.getDate()+e,d,f,g,h)}}return NaN},"yyyy-Www"),month:mb("month",Td,Mb(Td,["yyyy","MM"]),"yyyy-MM"),number:function(a,b,d,c,e,f){Kd(a,b,d,c);lb(a,b,d,c,e,f);c.$$parserName="number";c.$parsers.push(function(a){return c.$isEmpty(a)?null:Eg.test(a)?parseFloat(a):u});c.$formatters.push(function(a){if(!c.$isEmpty(a)){if(!U(a))throw nb("numfmt",a);a=a.toString()}return a});if(z(d.min)||
d.ngMin){var g;c.$validators.min=function(a){return c.$isEmpty(a)||x(g)||a>=g};d.$observe("min",function(a){z(a)&&!U(a)&&(a=parseFloat(a,10));g=U(a)&&!isNaN(a)?a:u;c.$validate()})}if(z(d.max)||d.ngMax){var h;c.$validators.max=function(a){return c.$isEmpty(a)||x(h)||a<=h};d.$observe("max",function(a){z(a)&&!U(a)&&(a=parseFloat(a,10));h=U(a)&&!isNaN(a)?a:u;c.$validate()})}},url:function(a,b,d,c,e,f){lb(a,b,d,c,e,f);lc(c);c.$$parserName="url";c.$validators.url=function(a,b){var d=a||b;return c.$isEmpty(d)||
Cg.test(d)}},email:function(a,b,d,c,e,f){lb(a,b,d,c,e,f);lc(c);c.$$parserName="email";c.$validators.email=function(a,b){var d=a||b;return c.$isEmpty(d)||Dg.test(d)}},radio:function(a,b,d,c){x(d.name)&&b.attr("name",++pb);b.on("click",function(a){b[0].checked&&c.$setViewValue(d.value,a&&a.type)});c.$render=function(){b[0].checked=d.value==c.$viewValue};d.$observe("value",c.$render)},checkbox:function(a,b,d,c,e,f,g,h){var k=Ld(h,a,"ngTrueValue",d.ngTrueValue,!0),l=Ld(h,a,"ngFalseValue",d.ngFalseValue,
!1);b.on("click",function(a){c.$setViewValue(b[0].checked,a&&a.type)});c.$render=function(){b[0].checked=c.$viewValue};c.$isEmpty=function(a){return!1===a};c.$formatters.push(function(a){return la(a,k)});c.$parsers.push(function(a){return a?k:l})},hidden:w,button:w,submit:w,reset:w,file:w},Fc=["$browser","$sniffer","$filter","$parse",function(a,b,d,c){return{restrict:"E",require:["?ngModel"],link:{pre:function(e,f,g,h){h[0]&&(Vd[H(g.type)]||Vd.text)(e,f,g,h[0],b,a,d,c)}}}}],Fg=/^(true|false|\d+)$/,
Qe=function(){return{restrict:"A",priority:100,compile:function(a,b){return Fg.test(b.ngValue)?function(a,b,e){e.$set("value",a.$eval(e.ngValue))}:function(a,b,e){a.$watch(e.ngValue,function(a){e.$set("value",a)})}}}},qe=["$compile",function(a){return{restrict:"AC",compile:function(b){a.$$addBindingClass(b);return function(b,c,e){a.$$addBindingInfo(c,e.ngBind);c=c[0];b.$watch(e.ngBind,function(a){c.textContent=x(a)?"":a})}}}}],se=["$interpolate","$compile",function(a,b){return{compile:function(d){b.$$addBindingClass(d);
return function(c,d,f){c=a(d.attr(f.$attr.ngBindTemplate));b.$$addBindingInfo(d,c.expressions);d=d[0];f.$observe("ngBindTemplate",function(a){d.textContent=x(a)?"":a})}}}}],re=["$sce","$parse","$compile",function(a,b,d){return{restrict:"A",compile:function(c,e){var f=b(e.ngBindHtml),g=b(e.ngBindHtml,function(a){return(a||"").toString()});d.$$addBindingClass(c);return function(b,c,e){d.$$addBindingInfo(c,e.ngBindHtml);b.$watch(g,function(){c.html(a.getTrustedHtml(f(b))||"")})}}}}],Pe=ka({restrict:"A",
require:"ngModel",link:function(a,b,d,c){c.$viewChangeListeners.push(function(){a.$eval(d.ngChange)})}}),te=mc("",!0),ve=mc("Odd",0),ue=mc("Even",1),we=Na({compile:function(a,b){b.$set("ngCloak",u);a.removeClass("ng-cloak")}}),xe=[function(){return{restrict:"A",scope:!0,controller:"@",priority:500}}],Kc={},Gg={blur:!0,focus:!0};n("click dblclick mousedown mouseup mouseover mouseout mousemove mouseenter mouseleave keydown keyup keypress submit focus blur copy cut paste".split(" "),function(a){var b=
va("ng-"+a);Kc[b]=["$parse","$rootScope",function(d,c){return{restrict:"A",compile:function(e,f){var g=d(f[b],null,!0);return function(b,d){d.on(a,function(d){var e=function(){g(b,{$event:d})};Gg[a]&&c.$$phase?b.$evalAsync(e):b.$apply(e)})}}}}]});var Ae=["$animate",function(a){return{multiElement:!0,transclude:"element",priority:600,terminal:!0,restrict:"A",$$tlb:!0,link:function(b,d,c,e,f){var g,h,k;b.$watch(c.ngIf,function(b){b?h||f(function(b,e){h=e;b[b.length++]=Z.createComment(" end ngIf: "+
c.ngIf+" ");g={clone:b};a.enter(b,d.parent(),d)}):(k&&(k.remove(),k=null),h&&(h.$destroy(),h=null),g&&(k=tb(g.clone),a.leave(k).then(function(){k=null}),g=null))})}}}],Be=["$templateRequest","$anchorScroll","$animate",function(a,b,d){return{restrict:"ECA",priority:400,terminal:!0,transclude:"element",controller:$.noop,compile:function(c,e){var f=e.ngInclude||e.src,g=e.onload||"",h=e.autoscroll;return function(c,e,m,n,r){var q=0,u,t,p,y=function(){t&&(t.remove(),t=null);u&&(u.$destroy(),u=null);p&&
(d.leave(p).then(function(){t=null}),t=p,p=null)};c.$watch(f,function(f){var m=function(){!z(h)||h&&!c.$eval(h)||b()},t=++q;f?(a(f,!0).then(function(a){if(t===q){var b=c.$new();n.template=a;a=r(b,function(a){y();d.enter(a,null,e).then(m)});u=b;p=a;u.$emit("$includeContentLoaded",f);c.$eval(g)}},function(){t===q&&(y(),c.$emit("$includeContentError",f))}),c.$emit("$includeContentRequested",f)):(y(),n.template=null)})}}}}],Se=["$compile",function(a){return{restrict:"ECA",priority:-400,require:"ngInclude",
link:function(b,d,c,e){/SVG/.test(d[0].toString())?(d.empty(),a(Nc(e.template,Z).childNodes)(b,function(a){d.append(a)},{futureParentElement:d})):(d.html(e.template),a(d.contents())(b))}}}],Ce=Na({priority:450,compile:function(){return{pre:function(a,b,d){a.$eval(d.ngInit)}}}}),Oe=function(){return{restrict:"A",priority:100,require:"ngModel",link:function(a,b,d,c){var e=b.attr(d.$attr.ngList)||", ",f="false"!==d.ngTrim,g=f?Y(e):e;c.$parsers.push(function(a){if(!x(a)){var b=[];a&&n(a.split(g),function(a){a&&
b.push(f?Y(a):a)});return b}});c.$formatters.push(function(a){return K(a)?a.join(e):u});c.$isEmpty=function(a){return!a||!a.length}}}},ob="ng-valid",Md="ng-invalid",Ya="ng-pristine",Lb="ng-dirty",Od="ng-pending",nb=P("ngModel"),Hg=["$scope","$exceptionHandler","$attrs","$element","$parse","$animate","$timeout","$rootScope","$q","$interpolate",function(a,b,d,c,e,f,g,h,k,l){this.$modelValue=this.$viewValue=Number.NaN;this.$$rawModelValue=u;this.$validators={};this.$asyncValidators={};this.$parsers=
[];this.$formatters=[];this.$viewChangeListeners=[];this.$untouched=!0;this.$touched=!1;this.$pristine=!0;this.$dirty=!1;this.$valid=!0;this.$invalid=!1;this.$error={};this.$$success={};this.$pending=u;this.$name=l(d.name||"",!1)(a);this.$$parentForm=Kb;var m=e(d.ngModel),s=m.assign,r=m,q=s,A=null,t,p=this;this.$$setOptions=function(a){if((p.$options=a)&&a.getterSetter){var b=e(d.ngModel+"()"),f=e(d.ngModel+"($$$p)");r=function(a){var c=m(a);D(c)&&(c=b(a));return c};q=function(a,b){D(m(a))?f(a,{$$$p:p.$modelValue}):
s(a,p.$modelValue)}}else if(!m.assign)throw nb("nonassign",d.ngModel,ua(c));};this.$render=w;this.$isEmpty=function(a){return x(a)||""===a||null===a||a!==a};this.$$updateEmptyClasses=function(a){p.$isEmpty(a)?(f.removeClass(c,"ng-not-empty"),f.addClass(c,"ng-empty")):(f.removeClass(c,"ng-empty"),f.addClass(c,"ng-not-empty"))};var y=0;Jd({ctrl:this,$element:c,set:function(a,b){a[b]=!0},unset:function(a,b){delete a[b]},$animate:f});this.$setPristine=function(){p.$dirty=!1;p.$pristine=!0;f.removeClass(c,
Lb);f.addClass(c,Ya)};this.$setDirty=function(){p.$dirty=!0;p.$pristine=!1;f.removeClass(c,Ya);f.addClass(c,Lb);p.$$parentForm.$setDirty()};this.$setUntouched=function(){p.$touched=!1;p.$untouched=!0;f.setClass(c,"ng-untouched","ng-touched")};this.$setTouched=function(){p.$touched=!0;p.$untouched=!1;f.setClass(c,"ng-touched","ng-untouched")};this.$rollbackViewValue=function(){g.cancel(A);p.$viewValue=p.$$lastCommittedViewValue;p.$render()};this.$validate=function(){if(!U(p.$modelValue)||!isNaN(p.$modelValue)){var a=
p.$$rawModelValue,b=p.$valid,c=p.$modelValue,d=p.$options&&p.$options.allowInvalid;p.$$runValidators(a,p.$$lastCommittedViewValue,function(e){d||b===e||(p.$modelValue=e?a:u,p.$modelValue!==c&&p.$$writeModelToScope())})}};this.$$runValidators=function(a,b,c){function d(){var c=!0;n(p.$validators,function(d,e){var g=d(a,b);c=c&&g;f(e,g)});return c?!0:(n(p.$asyncValidators,function(a,b){f(b,null)}),!1)}function e(){var c=[],d=!0;n(p.$asyncValidators,function(e,g){var h=e(a,b);if(!h||!D(h.then))throw nb("$asyncValidators",
h);f(g,u);c.push(h.then(function(){f(g,!0)},function(a){d=!1;f(g,!1)}))});c.length?k.all(c).then(function(){g(d)},w):g(!0)}function f(a,b){h===y&&p.$setValidity(a,b)}function g(a){h===y&&c(a)}y++;var h=y;(function(){var a=p.$$parserName||"parse";if(x(t))f(a,null);else return t||(n(p.$validators,function(a,b){f(b,null)}),n(p.$asyncValidators,function(a,b){f(b,null)})),f(a,t),t;return!0})()?d()?e():g(!1):g(!1)};this.$commitViewValue=function(){var a=p.$viewValue;g.cancel(A);if(p.$$lastCommittedViewValue!==
a||""===a&&p.$$hasNativeValidators)p.$$updateEmptyClasses(a),p.$$lastCommittedViewValue=a,p.$pristine&&this.$setDirty(),this.$$parseAndValidate()};this.$$parseAndValidate=function(){var b=p.$$lastCommittedViewValue;if(t=x(b)?u:!0)for(var c=0;c<p.$parsers.length;c++)if(b=p.$parsers[c](b),x(b)){t=!1;break}U(p.$modelValue)&&isNaN(p.$modelValue)&&(p.$modelValue=r(a));var d=p.$modelValue,e=p.$options&&p.$options.allowInvalid;p.$$rawModelValue=b;e&&(p.$modelValue=b,p.$modelValue!==d&&p.$$writeModelToScope());
p.$$runValidators(b,p.$$lastCommittedViewValue,function(a){e||(p.$modelValue=a?b:u,p.$modelValue!==d&&p.$$writeModelToScope())})};this.$$writeModelToScope=function(){q(a,p.$modelValue);n(p.$viewChangeListeners,function(a){try{a()}catch(c){b(c)}})};this.$setViewValue=function(a,b){p.$viewValue=a;p.$options&&!p.$options.updateOnDefault||p.$$debounceViewValueCommit(b)};this.$$debounceViewValueCommit=function(b){var c=0,d=p.$options;d&&z(d.debounce)&&(d=d.debounce,U(d)?c=d:U(d[b])?c=d[b]:U(d["default"])&&
(c=d["default"]));g.cancel(A);c?A=g(function(){p.$commitViewValue()},c):h.$$phase?p.$commitViewValue():a.$apply(function(){p.$commitViewValue()})};a.$watch(function(){var b=r(a);if(b!==p.$modelValue&&(p.$modelValue===p.$modelValue||b===b)){p.$modelValue=p.$$rawModelValue=b;t=u;for(var c=p.$formatters,d=c.length,e=b;d--;)e=c[d](e);p.$viewValue!==e&&(p.$$updateEmptyClasses(e),p.$viewValue=p.$$lastCommittedViewValue=e,p.$render(),p.$$runValidators(b,e,w))}return b})}],Ne=["$rootScope",function(a){return{restrict:"A",
require:["ngModel","^?form","^?ngModelOptions"],controller:Hg,priority:1,compile:function(b){b.addClass(Ya).addClass("ng-untouched").addClass(ob);return{pre:function(a,b,e,f){var g=f[0];b=f[1]||g.$$parentForm;g.$$setOptions(f[2]&&f[2].$options);b.$addControl(g);e.$observe("name",function(a){g.$name!==a&&g.$$parentForm.$$renameControl(g,a)});a.$on("$destroy",function(){g.$$parentForm.$removeControl(g)})},post:function(b,c,e,f){var g=f[0];if(g.$options&&g.$options.updateOn)c.on(g.$options.updateOn,
function(a){g.$$debounceViewValueCommit(a&&a.type)});c.on("blur",function(c){g.$touched||(a.$$phase?b.$evalAsync(g.$setTouched):b.$apply(g.$setTouched))})}}}}}],Ig=/(\s+|^)default(\s+|$)/,Re=function(){return{restrict:"A",controller:["$scope","$attrs",function(a,b){var d=this;this.$options=Pa(a.$eval(b.ngModelOptions));z(this.$options.updateOn)?(this.$options.updateOnDefault=!1,this.$options.updateOn=Y(this.$options.updateOn.replace(Ig,function(){d.$options.updateOnDefault=!0;return" "}))):this.$options.updateOnDefault=
!0}]}},De=Na({terminal:!0,priority:1E3}),Jg=P("ngOptions"),Kg=/^\s*([\s\S]+?)(?:\s+as\s+([\s\S]+?))?(?:\s+group\s+by\s+([\s\S]+?))?(?:\s+disable\s+when\s+([\s\S]+?))?\s+for\s+(?:([\$\w][\$\w]*)|(?:\(\s*([\$\w][\$\w]*)\s*,\s*([\$\w][\$\w]*)\s*\)))\s+in\s+([\s\S]+?)(?:\s+track\s+by\s+([\s\S]+?))?$/,Le=["$compile","$parse",function(a,b){function d(a,c,d){function e(a,b,c,d,f){this.selectValue=a;this.viewValue=b;this.label=c;this.group=d;this.disabled=f}function l(a){var b;if(!r&&Ca(a))b=a;else{b=[];
for(var c in a)a.hasOwnProperty(c)&&"$"!==c.charAt(0)&&b.push(c)}return b}var m=a.match(Kg);if(!m)throw Jg("iexp",a,ua(c));var n=m[5]||m[7],r=m[6];a=/ as /.test(m[0])&&m[1];var q=m[9];c=b(m[2]?m[1]:n);var u=a&&b(a)||c,t=q&&b(q),p=q?function(a,b){return t(d,b)}:function(a){return Fa(a)},y=function(a,b){return p(a,A(a,b))},v=b(m[2]||m[1]),z=b(m[3]||""),w=b(m[4]||""),F=b(m[8]),x={},A=r?function(a,b){x[r]=b;x[n]=a;return x}:function(a){x[n]=a;return x};return{trackBy:q,getTrackByValue:y,getWatchables:b(F,
function(a){var b=[];a=a||[];for(var c=l(a),e=c.length,f=0;f<e;f++){var g=a===c?f:c[f],k=A(a[g],g),g=p(a[g],k);b.push(g);if(m[2]||m[1])g=v(d,k),b.push(g);m[4]&&(k=w(d,k),b.push(k))}return b}),getOptions:function(){for(var a=[],b={},c=F(d)||[],f=l(c),g=f.length,m=0;m<g;m++){var n=c===f?m:f[m],r=A(c[n],n),s=u(d,r),n=p(s,r),t=v(d,r),x=z(d,r),r=w(d,r),s=new e(n,s,t,x,r);a.push(s);b[n]=s}return{items:a,selectValueMap:b,getOptionFromViewValue:function(a){return b[y(a)]},getViewValueFromOption:function(a){return q?
$.copy(a.viewValue):a.viewValue}}}}}var c=Z.createElement("option"),e=Z.createElement("optgroup");return{restrict:"A",terminal:!0,require:["select","ngModel"],link:{pre:function(a,b,c,d){d[0].registerOption=w},post:function(b,g,h,k){function l(a,b){a.element=b;b.disabled=a.disabled;a.label!==b.label&&(b.label=a.label,b.textContent=a.label);a.value!==b.value&&(b.value=a.selectValue)}function m(a,b,c,d){b&&H(b.nodeName)===c?c=b:(c=d.cloneNode(!1),b?a.insertBefore(c,b):a.appendChild(c));return c}function q(a){for(var b;a;)b=
a.nextSibling,Yb(a),a=b}function r(a){var b=y&&y[0],c=F&&F[0];if(b||c)for(;a&&(a===b||a===c||8===a.nodeType||""===a.value);)a=a.nextSibling;return a}function u(){var a=C&&x.readValue();C=D.getOptions();var b={},d=g[0].firstChild;M&&g.prepend(y);d=r(d);C.items.forEach(function(a){var f,h;z(a.group)?(f=b[a.group],f||(f=m(g[0],d,"optgroup",e),d=f.nextSibling,f.label=a.group,f=b[a.group]={groupElement:f,currentOptionElement:f.firstChild}),h=m(f.groupElement,f.currentOptionElement,"option",c),l(a,h),f.currentOptionElement=
h.nextSibling):(h=m(g[0],d,"option",c),l(a,h),d=h.nextSibling)});Object.keys(b).forEach(function(a){q(b[a].currentOptionElement)});q(d);t.$render();if(!t.$isEmpty(a)){var f=x.readValue();(D.trackBy||p?la(a,f):a===f)||(t.$setViewValue(f),t.$render())}}var x=k[0],t=k[1],p=h.multiple,y;k=0;for(var v=g.children(),w=v.length;k<w;k++)if(""===v[k].value){y=v.eq(k);break}var M=!!y,F=A(c.cloneNode(!1));F.val("?");var C,D=d(h.ngOptions,g,b);p?(t.$isEmpty=function(a){return!a||0===a.length},x.writeValue=function(a){C.items.forEach(function(a){a.element.selected=
!1});a&&a.forEach(function(a){(a=C.getOptionFromViewValue(a))&&!a.disabled&&(a.element.selected=!0)})},x.readValue=function(){var a=g.val()||[],b=[];n(a,function(a){(a=C.selectValueMap[a])&&!a.disabled&&b.push(C.getViewValueFromOption(a))});return b},D.trackBy&&b.$watchCollection(function(){if(K(t.$viewValue))return t.$viewValue.map(function(a){return D.getTrackByValue(a)})},function(){t.$render()})):(x.writeValue=function(a){var b=C.getOptionFromViewValue(a);b&&!b.disabled?g[0].value!==b.selectValue&&
(F.remove(),M||y.remove(),g[0].value=b.selectValue,b.element.selected=!0,b.element.setAttribute("selected","selected")):null===a||M?(F.remove(),M||g.prepend(y),g.val(""),y.prop("selected",!0),y.attr("selected",!0)):(M||y.remove(),g.prepend(F),g.val("?"),F.prop("selected",!0),F.attr("selected",!0))},x.readValue=function(){var a=C.selectValueMap[g.val()];return a&&!a.disabled?(M||y.remove(),F.remove(),C.getViewValueFromOption(a)):null},D.trackBy&&b.$watch(function(){return D.getTrackByValue(t.$viewValue)},
function(){t.$render()}));M?(y.remove(),a(y)(b),y.removeClass("ng-scope")):y=A(c.cloneNode(!1));u();b.$watchCollection(D.getWatchables,u)}}}}],Ee=["$locale","$interpolate","$log",function(a,b,d){var c=/{}/g,e=/^when(Minus)?(.+)$/;return{link:function(f,g,h){function k(a){g.text(a||"")}var l=h.count,m=h.$attr.when&&g.attr(h.$attr.when),q=h.offset||0,r=f.$eval(m)||{},u={},z=b.startSymbol(),t=b.endSymbol(),p=z+l+"-"+q+t,y=$.noop,v;n(h,function(a,b){var c=e.exec(b);c&&(c=(c[1]?"-":"")+H(c[2]),r[c]=g.attr(h.$attr[b]))});
n(r,function(a,d){u[d]=b(a.replace(c,p))});f.$watch(l,function(b){var c=parseFloat(b),e=isNaN(c);e||c in r||(c=a.pluralCat(c-q));c===v||e&&U(v)&&isNaN(v)||(y(),e=u[c],x(e)?(null!=b&&d.debug("ngPluralize: no rule defined for '"+c+"' in "+m),y=w,k()):y=f.$watch(e,k),v=c)})}}}],Fe=["$parse","$animate",function(a,b){var d=P("ngRepeat"),c=function(a,b,c,d,k,l,m){a[c]=d;k&&(a[k]=l);a.$index=b;a.$first=0===b;a.$last=b===m-1;a.$middle=!(a.$first||a.$last);a.$odd=!(a.$even=0===(b&1))};return{restrict:"A",
multiElement:!0,transclude:"element",priority:1E3,terminal:!0,$$tlb:!0,compile:function(e,f){var g=f.ngRepeat,h=Z.createComment(" end ngRepeat: "+g+" "),k=g.match(/^\s*([\s\S]+?)\s+in\s+([\s\S]+?)(?:\s+as\s+([\s\S]+?))?(?:\s+track\s+by\s+([\s\S]+?))?\s*$/);if(!k)throw d("iexp",g);var l=k[1],m=k[2],q=k[3],r=k[4],k=l.match(/^(?:(\s*[\$\w]+)|\(\s*([\$\w]+)\s*,\s*([\$\w]+)\s*\))$/);if(!k)throw d("iidexp",l);var x=k[3]||k[1],z=k[2];if(q&&(!/^[$a-zA-Z_][$a-zA-Z0-9_]*$/.test(q)||/^(null|undefined|this|\$index|\$first|\$middle|\$last|\$even|\$odd|\$parent|\$root|\$id)$/.test(q)))throw d("badident",
q);var t,p,y,v,w={$id:Fa};r?t=a(r):(y=function(a,b){return Fa(b)},v=function(a){return a});return function(a,e,f,k,l){t&&(p=function(b,c,d){z&&(w[z]=b);w[x]=c;w.$index=d;return t(a,w)});var r=X();a.$watchCollection(m,function(f){var k,m,t=e[0],w,D=X(),C,G,J,E,K,H,L;q&&(a[q]=f);if(Ca(f))K=f,m=p||y;else for(L in m=p||v,K=[],f)qa.call(f,L)&&"$"!==L.charAt(0)&&K.push(L);C=K.length;L=Array(C);for(k=0;k<C;k++)if(G=f===K?k:K[k],J=f[G],E=m(G,J,k),r[E])H=r[E],delete r[E],D[E]=H,L[k]=H;else{if(D[E])throw n(L,
function(a){a&&a.scope&&(r[a.id]=a)}),d("dupes",g,E,J);L[k]={id:E,scope:u,clone:u};D[E]=!0}for(w in r){H=r[w];E=tb(H.clone);b.leave(E);if(E[0].parentNode)for(k=0,m=E.length;k<m;k++)E[k].$$NG_REMOVED=!0;H.scope.$destroy()}for(k=0;k<C;k++)if(G=f===K?k:K[k],J=f[G],H=L[k],H.scope){w=t;do w=w.nextSibling;while(w&&w.$$NG_REMOVED);H.clone[0]!=w&&b.move(tb(H.clone),null,A(t));t=H.clone[H.clone.length-1];c(H.scope,k,x,J,z,G,C)}else l(function(a,d){H.scope=d;var e=h.cloneNode(!1);a[a.length++]=e;b.enter(a,
null,A(t));t=e;H.clone=a;D[H.id]=H;c(H.scope,k,x,J,z,G,C)});r=D})}}}}],Ge=["$animate",function(a){return{restrict:"A",multiElement:!0,link:function(b,d,c){b.$watch(c.ngShow,function(b){a[b?"removeClass":"addClass"](d,"ng-hide",{tempClasses:"ng-hide-animate"})})}}}],ze=["$animate",function(a){return{restrict:"A",multiElement:!0,link:function(b,d,c){b.$watch(c.ngHide,function(b){a[b?"addClass":"removeClass"](d,"ng-hide",{tempClasses:"ng-hide-animate"})})}}}],He=Na(function(a,b,d){a.$watch(d.ngStyle,
function(a,d){d&&a!==d&&n(d,function(a,c){b.css(c,"")});a&&b.css(a)},!0)}),Ie=["$animate",function(a){return{require:"ngSwitch",controller:["$scope",function(){this.cases={}}],link:function(b,d,c,e){var f=[],g=[],h=[],k=[],l=function(a,b){return function(){a.splice(b,1)}};b.$watch(c.ngSwitch||c.on,function(b){var c,d;c=0;for(d=h.length;c<d;++c)a.cancel(h[c]);c=h.length=0;for(d=k.length;c<d;++c){var q=tb(g[c].clone);k[c].$destroy();(h[c]=a.leave(q)).then(l(h,c))}g.length=0;k.length=0;(f=e.cases["!"+
b]||e.cases["?"])&&n(f,function(b){b.transclude(function(c,d){k.push(d);var e=b.element;c[c.length++]=Z.createComment(" end ngSwitchWhen: ");g.push({clone:c});a.enter(c,e.parent(),e)})})})}}}],Je=Na({transclude:"element",priority:1200,require:"^ngSwitch",multiElement:!0,link:function(a,b,d,c,e){c.cases["!"+d.ngSwitchWhen]=c.cases["!"+d.ngSwitchWhen]||[];c.cases["!"+d.ngSwitchWhen].push({transclude:e,element:b})}}),Ke=Na({transclude:"element",priority:1200,require:"^ngSwitch",multiElement:!0,link:function(a,
b,d,c,e){c.cases["?"]=c.cases["?"]||[];c.cases["?"].push({transclude:e,element:b})}}),Lg=P("ngTransclude"),Me=Na({restrict:"EAC",link:function(a,b,d,c,e){d.ngTransclude===d.$attr.ngTransclude&&(d.ngTransclude="");if(!e)throw Lg("orphan",ua(b));e(function(a){a.length&&(b.empty(),b.append(a))},null,d.ngTransclude||d.ngTranscludeSlot)}}),me=["$templateCache",function(a){return{restrict:"E",terminal:!0,compile:function(b,d){"text/ng-template"==d.type&&a.put(d.id,b[0].text)}}}],Mg={$setViewValue:w,$render:w},
Ng=["$element","$scope","$attrs",function(a,b,d){var c=this,e=new Va;c.ngModelCtrl=Mg;c.unknownOption=A(Z.createElement("option"));c.renderUnknownOption=function(b){b="? "+Fa(b)+" ?";c.unknownOption.val(b);a.prepend(c.unknownOption);a.val(b)};b.$on("$destroy",function(){c.renderUnknownOption=w});c.removeUnknownOption=function(){c.unknownOption.parent()&&c.unknownOption.remove()};c.readValue=function(){c.removeUnknownOption();return a.val()};c.writeValue=function(b){c.hasOption(b)?(c.removeUnknownOption(),
a.val(b),""===b&&c.emptyOption.prop("selected",!0)):null==b&&c.emptyOption?(c.removeUnknownOption(),a.val("")):c.renderUnknownOption(b)};c.addOption=function(a,b){Ua(a,'"option value"');""===a&&(c.emptyOption=b);var d=e.get(a)||0;e.put(a,d+1);c.ngModelCtrl.$render();b[0].hasAttribute("selected")&&(b[0].selected=!0)};c.removeOption=function(a){var b=e.get(a);b&&(1===b?(e.remove(a),""===a&&(c.emptyOption=u)):e.put(a,b-1))};c.hasOption=function(a){return!!e.get(a)};c.registerOption=function(a,b,d,e,
l){if(e){var m;d.$observe("value",function(a){z(m)&&c.removeOption(m);m=a;c.addOption(a,b)})}else l?a.$watch(l,function(a,e){d.$set("value",a);e!==a&&c.removeOption(e);c.addOption(a,b)}):c.addOption(d.value,b);b.on("$destroy",function(){c.removeOption(d.value);c.ngModelCtrl.$render()})}}],ne=function(){return{restrict:"E",require:["select","?ngModel"],controller:Ng,priority:1,link:{pre:function(a,b,d,c){var e=c[1];if(e){var f=c[0];f.ngModelCtrl=e;e.$render=function(){f.writeValue(e.$viewValue)};b.on("change",
function(){a.$apply(function(){e.$setViewValue(f.readValue())})});if(d.multiple){f.readValue=function(){var a=[];n(b.find("option"),function(b){b.selected&&a.push(b.value)});return a};f.writeValue=function(a){var c=new Va(a);n(b.find("option"),function(a){a.selected=z(c.get(a.value))})};var g,h=NaN;a.$watch(function(){h!==e.$viewValue||la(g,e.$viewValue)||(g=V(e.$viewValue),e.$render());h=e.$viewValue});e.$isEmpty=function(a){return!a||0===a.length}}}}}}},pe=["$interpolate",function(a){return{restrict:"E",
priority:100,compile:function(b,d){if(z(d.value))var c=a(d.value,!0);else{var e=a(b.text(),!0);e||d.$set("value",b.text())}return function(a,b,d){var k=b.parent();(k=k.data("$selectController")||k.parent().data("$selectController"))&&k.registerOption(a,b,d,c,e)}}}}],oe=ka({restrict:"E",terminal:!1}),Hc=function(){return{restrict:"A",require:"?ngModel",link:function(a,b,d,c){c&&(d.required=!0,c.$validators.required=function(a,b){return!d.required||!c.$isEmpty(b)},d.$observe("required",function(){c.$validate()}))}}},
Gc=function(){return{restrict:"A",require:"?ngModel",link:function(a,b,d,c){if(c){var e,f=d.ngPattern||d.pattern;d.$observe("pattern",function(a){G(a)&&0<a.length&&(a=new RegExp("^"+a+"$"));if(a&&!a.test)throw P("ngPattern")("noregexp",f,a,ua(b));e=a||u;c.$validate()});c.$validators.pattern=function(a,b){return c.$isEmpty(b)||x(e)||e.test(b)}}}}},Jc=function(){return{restrict:"A",require:"?ngModel",link:function(a,b,d,c){if(c){var e=-1;d.$observe("maxlength",function(a){a=ea(a);e=isNaN(a)?-1:a;c.$validate()});
c.$validators.maxlength=function(a,b){return 0>e||c.$isEmpty(b)||b.length<=e}}}}},Ic=function(){return{restrict:"A",require:"?ngModel",link:function(a,b,d,c){if(c){var e=0;d.$observe("minlength",function(a){e=ea(a)||0;c.$validate()});c.$validators.minlength=function(a,b){return c.$isEmpty(b)||b.length>=e}}}}};S.angular.bootstrap?console.log("WARNING: Tried to load angular more than once."):(fe(),he($),$.module("ngLocale",[],["$provide",function(a){function b(a){a+="";var b=a.indexOf(".");return-1==
b?0:a.length-b-1}a.value("$locale",{DATETIME_FORMATS:{AMPMS:["AM","PM"],DAY:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),ERANAMES:["Before Christ","Anno Domini"],ERAS:["BC","AD"],FIRSTDAYOFWEEK:6,MONTH:"January February March April May June July August September October November December".split(" "),SHORTDAY:"Sun Mon Tue Wed Thu Fri Sat".split(" "),SHORTMONTH:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),STANDALONEMONTH:"January February March April May June July August September October November December".split(" "),
WEEKENDRANGE:[5,6],fullDate:"EEEE, MMMM d, y",longDate:"MMMM d, y",medium:"MMM d, y h:mm:ss a",mediumDate:"MMM d, y",mediumTime:"h:mm:ss a","short":"M/d/yy h:mm a",shortDate:"M/d/yy",shortTime:"h:mm a"},NUMBER_FORMATS:{CURRENCY_SYM:"$",DECIMAL_SEP:".",GROUP_SEP:",",PATTERNS:[{gSize:3,lgSize:3,maxFrac:3,minFrac:0,minInt:1,negPre:"-",negSuf:"",posPre:"",posSuf:""},{gSize:3,lgSize:3,maxFrac:2,minFrac:2,minInt:1,negPre:"-\u00a4",negSuf:"",posPre:"\u00a4",posSuf:""}]},id:"en-us",pluralCat:function(a,c){var e=
a|0,f=c;u===f&&(f=Math.min(b(a),3));Math.pow(10,f);return 1==e&&0==f?"one":"other"}})}]),A(Z).ready(function(){be(Z,zc)}))})(window,document);!window.angular.$$csp().noInlineStyle&&window.angular.element(document.head).prepend('<style type="text/css">@charset "UTF-8";[ng\\:cloak],[ng-cloak],[data-ng-cloak],[x-ng-cloak],.ng-cloak,.x-ng-cloak,.ng-hide:not(.ng-hide-animate){display:none !important;}ng\\:form{display:block;}.ng-animate-shim{visibility:hidden;}.ng-anchor{position:absolute;}</style>');
//# sourceMappingURL=angular.min.js.map

// CodeMirror, copyright (c) by Marijn Haverbeke and others
// Distributed under an MIT license: http://codemirror.net/LICENSE

// This is CodeMirror (http://codemirror.net), a code editor
// implemented in JavaScript on top of the browser's DOM.
//
// You can find some technical background for some of the code below
// at http://marijnhaverbeke.nl/blog/#cm-internals .

(function(mod) {
  if (typeof exports == "object" && typeof module == "object") // CommonJS
    module.exports = mod();
  else if (typeof define == "function" && define.amd) // AMD
    return define([], mod);
  else // Plain browser env
    this.CodeMirror = mod();
})(function() {
  "use strict";

  // BROWSER SNIFFING

  // Kludges for bugs and behavior differences that can't be feature
  // detected are enabled based on userAgent etc sniffing.

  var gecko = /gecko\/\d/i.test(navigator.userAgent);
  // ie_uptoN means Internet Explorer version N or lower
  var ie_upto10 = /MSIE \d/.test(navigator.userAgent);
  var ie_11up = /Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);
  var ie = ie_upto10 || ie_11up;
  var ie_version = ie && (ie_upto10 ? document.documentMode || 6 : ie_11up[1]);
  var webkit = /WebKit\//.test(navigator.userAgent);
  var qtwebkit = webkit && /Qt\/\d+\.\d+/.test(navigator.userAgent);
  var chrome = /Chrome\//.test(navigator.userAgent);
  var presto = /Opera\//.test(navigator.userAgent);
  var safari = /Apple Computer/.test(navigator.vendor);
  var khtml = /KHTML\//.test(navigator.userAgent);
  var mac_geMountainLion = /Mac OS X 1\d\D([8-9]|\d\d)\D/.test(navigator.userAgent);
  var phantom = /PhantomJS/.test(navigator.userAgent);

  var ios = /AppleWebKit/.test(navigator.userAgent) && /Mobile\/\w+/.test(navigator.userAgent);
  // This is woefully incomplete. Suggestions for alternative methods welcome.
  var mobile = ios || /Android|webOS|BlackBerry|Opera Mini|Opera Mobi|IEMobile/i.test(navigator.userAgent);
  var mac = ios || /Mac/.test(navigator.platform);
  var windows = /win/i.test(navigator.platform);

  var presto_version = presto && navigator.userAgent.match(/Version\/(\d*\.\d*)/);
  if (presto_version) presto_version = Number(presto_version[1]);
  if (presto_version && presto_version >= 15) { presto = false; webkit = true; }
  // Some browsers use the wrong event properties to signal cmd/ctrl on OS X
  var flipCtrlCmd = mac && (qtwebkit || presto && (presto_version == null || presto_version < 12.11));
  var captureRightClick = gecko || (ie && ie_version >= 9);

  // Optimize some code when these features are not used.
  var sawReadOnlySpans = false, sawCollapsedSpans = false;

  // EDITOR CONSTRUCTOR

  // A CodeMirror instance represents an editor. This is the object
  // that user code is usually dealing with.

  function CodeMirror(place, options) {
    if (!(this instanceof CodeMirror)) return new CodeMirror(place, options);

    this.options = options = options || {};
    // Determine effective options based on given values and defaults.
    copyObj(defaults, options, false);
    setGuttersForLineNumbers(options);

    var doc = options.value;
    if (typeof doc == "string") doc = new Doc(doc, options.mode);
    this.doc = doc;

    var display = this.display = new Display(place, doc);
    display.wrapper.CodeMirror = this;
    updateGutters(this);
    themeChanged(this);
    if (options.lineWrapping)
      this.display.wrapper.className += " CodeMirror-wrap";
    if (options.autofocus && !mobile) focusInput(this);

    this.state = {
      keyMaps: [],  // stores maps added by addKeyMap
      overlays: [], // highlighting overlays, as added by addOverlay
      modeGen: 0,   // bumped when mode/overlay changes, used to invalidate highlighting info
      overwrite: false, focused: false,
      suppressEdits: false, // used to disable editing during key handlers when in readOnly mode
      pasteIncoming: false, cutIncoming: false, // help recognize paste/cut edits in readInput
      draggingText: false,
      highlight: new Delayed() // stores highlight worker timeout
    };

    // Override magic textarea content restore that IE sometimes does
    // on our hidden textarea on reload
    if (ie && ie_version < 11) setTimeout(bind(resetInput, this, true), 20);

    registerEventHandlers(this);
    ensureGlobalHandlers();

    var cm = this;
    runInOp(this, function() {
      cm.curOp.forceUpdate = true;
      attachDoc(cm, doc);

      if ((options.autofocus && !mobile) || activeElt() == display.input)
        setTimeout(bind(onFocus, cm), 20);
      else
        onBlur(cm);

      for (var opt in optionHandlers) if (optionHandlers.hasOwnProperty(opt))
        optionHandlers[opt](cm, options[opt], Init);
      maybeUpdateLineNumberWidth(cm);
      for (var i = 0; i < initHooks.length; ++i) initHooks[i](cm);
    });
  }

  // DISPLAY CONSTRUCTOR

  // The display handles the DOM integration, both for input reading
  // and content drawing. It holds references to DOM nodes and
  // display-related state.

  function Display(place, doc) {
    var d = this;

    // The semihidden textarea that is focused when the editor is
    // focused, and receives input.
    var input = d.input = elt("textarea", null, null, "position: absolute; padding: 0; width: 1px; height: 1em; outline: none");
    // The textarea is kept positioned near the cursor to prevent the
    // fact that it'll be scrolled into view on input from scrolling
    // our fake cursor out of view. On webkit, when wrap=off, paste is
    // very slow. So make the area wide instead.
    if (webkit) input.style.width = "1000px";
    else input.setAttribute("wrap", "off");
    // If border: 0; -- iOS fails to open keyboard (issue #1287)
    if (ios) input.style.border = "1px solid black";
    input.setAttribute("autocorrect", "off"); input.setAttribute("autocapitalize", "off"); input.setAttribute("spellcheck", "false");

    // Wraps and hides input textarea
    d.inputDiv = elt("div", [input], null, "overflow: hidden; position: relative; width: 3px; height: 0px;");
    // The fake scrollbar elements.
    d.scrollbarH = elt("div", [elt("div", null, null, "height: 100%; min-height: 1px")], "CodeMirror-hscrollbar");
    d.scrollbarV = elt("div", [elt("div", null, null, "min-width: 1px")], "CodeMirror-vscrollbar");
    // Covers bottom-right square when both scrollbars are present.
    d.scrollbarFiller = elt("div", null, "CodeMirror-scrollbar-filler");
    // Covers bottom of gutter when coverGutterNextToScrollbar is on
    // and h scrollbar is present.
    d.gutterFiller = elt("div", null, "CodeMirror-gutter-filler");
    // Will contain the actual code, positioned to cover the viewport.
    d.lineDiv = elt("div", null, "CodeMirror-code");
    // Elements are added to these to represent selection and cursors.
    d.selectionDiv = elt("div", null, null, "position: relative; z-index: 1");
    d.cursorDiv = elt("div", null, "CodeMirror-cursors");
    // A visibility: hidden element used to find the size of things.
    d.measure = elt("div", null, "CodeMirror-measure");
    // When lines outside of the viewport are measured, they are drawn in this.
    d.lineMeasure = elt("div", null, "CodeMirror-measure");
    // Wraps everything that needs to exist inside the vertically-padded coordinate system
    d.lineSpace = elt("div", [d.measure, d.lineMeasure, d.selectionDiv, d.cursorDiv, d.lineDiv],
                      null, "position: relative; outline: none");
    // Moved around its parent to cover visible view.
    d.mover = elt("div", [elt("div", [d.lineSpace], "CodeMirror-lines")], null, "position: relative");
    // Set to the height of the document, allowing scrolling.
    d.sizer = elt("div", [d.mover], "CodeMirror-sizer");
    // Behavior of elts with overflow: auto and padding is
    // inconsistent across browsers. This is used to ensure the
    // scrollable area is big enough.
    d.heightForcer = elt("div", null, null, "position: absolute; height: " + scrollerCutOff + "px; width: 1px;");
    // Will contain the gutters, if any.
    d.gutters = elt("div", null, "CodeMirror-gutters");
    d.lineGutter = null;
    // Actual scrollable element.
    d.scroller = elt("div", [d.sizer, d.heightForcer, d.gutters], "CodeMirror-scroll");
    d.scroller.setAttribute("tabIndex", "-1");
    // The element in which the editor lives.
    d.wrapper = elt("div", [d.inputDiv, d.scrollbarH, d.scrollbarV,
                            d.scrollbarFiller, d.gutterFiller, d.scroller], "CodeMirror");

    // Work around IE7 z-index bug (not perfect, hence IE7 not really being supported)
    if (ie && ie_version < 8) { d.gutters.style.zIndex = -1; d.scroller.style.paddingRight = 0; }
    // Needed to hide big blue blinking cursor on Mobile Safari
    if (ios) input.style.width = "0px";
    if (!webkit) d.scroller.draggable = true;
    // Needed to handle Tab key in KHTML
    if (khtml) { d.inputDiv.style.height = "1px"; d.inputDiv.style.position = "absolute"; }
    // Need to set a minimum width to see the scrollbar on IE7 (but must not set it on IE8).
    if (ie && ie_version < 8) d.scrollbarH.style.minHeight = d.scrollbarV.style.minWidth = "18px";

    if (place.appendChild) place.appendChild(d.wrapper);
    else place(d.wrapper);

    // Current rendered range (may be bigger than the view window).
    d.viewFrom = d.viewTo = doc.first;
    // Information about the rendered lines.
    d.view = [];
    // Holds info about a single rendered line when it was rendered
    // for measurement, while not in view.
    d.externalMeasured = null;
    // Empty space (in pixels) above the view
    d.viewOffset = 0;
    d.lastSizeC = 0;
    d.updateLineNumbers = null;

    // Used to only resize the line number gutter when necessary (when
    // the amount of lines crosses a boundary that makes its width change)
    d.lineNumWidth = d.lineNumInnerWidth = d.lineNumChars = null;
    // See readInput and resetInput
    d.prevInput = "";
    // Set to true when a non-horizontal-scrolling line widget is
    // added. As an optimization, line widget aligning is skipped when
    // this is false.
    d.alignWidgets = false;
    // Flag that indicates whether we expect input to appear real soon
    // now (after some event like 'keypress' or 'input') and are
    // polling intensively.
    d.pollingFast = false;
    // Self-resetting timeout for the poller
    d.poll = new Delayed();

    d.cachedCharWidth = d.cachedTextHeight = d.cachedPaddingH = null;

    // Tracks when resetInput has punted to just putting a short
    // string into the textarea instead of the full selection.
    d.inaccurateSelection = false;

    // Tracks the maximum line length so that the horizontal scrollbar
    // can be kept static when scrolling.
    d.maxLine = null;
    d.maxLineLength = 0;
    d.maxLineChanged = false;

    // Used for measuring wheel scrolling granularity
    d.wheelDX = d.wheelDY = d.wheelStartX = d.wheelStartY = null;

    // True when shift is held down.
    d.shift = false;

    // Used to track whether anything happened since the context menu
    // was opened.
    d.selForContextMenu = null;
  }

  // STATE UPDATES

  // Used to get the editor into a consistent state again when options change.

  function loadMode(cm) {
    cm.doc.mode = CodeMirror.getMode(cm.options, cm.doc.modeOption);
    resetModeState(cm);
  }

  function resetModeState(cm) {
    cm.doc.iter(function(line) {
      if (line.stateAfter) line.stateAfter = null;
      if (line.styles) line.styles = null;
    });
    cm.doc.frontier = cm.doc.first;
    startWorker(cm, 100);
    cm.state.modeGen++;
    if (cm.curOp) regChange(cm);
  }

  function wrappingChanged(cm) {
    if (cm.options.lineWrapping) {
      addClass(cm.display.wrapper, "CodeMirror-wrap");
      cm.display.sizer.style.minWidth = "";
    } else {
      rmClass(cm.display.wrapper, "CodeMirror-wrap");
      findMaxLine(cm);
    }
    estimateLineHeights(cm);
    regChange(cm);
    clearCaches(cm);
    setTimeout(function(){updateScrollbars(cm);}, 100);
  }

  // Returns a function that estimates the height of a line, to use as
  // first approximation until the line becomes visible (and is thus
  // properly measurable).
  function estimateHeight(cm) {
    var th = textHeight(cm.display), wrapping = cm.options.lineWrapping;
    var perLine = wrapping && Math.max(5, cm.display.scroller.clientWidth / charWidth(cm.display) - 3);
    return function(line) {
      if (lineIsHidden(cm.doc, line)) return 0;

      var widgetsHeight = 0;
      if (line.widgets) for (var i = 0; i < line.widgets.length; i++) {
        if (line.widgets[i].height) widgetsHeight += line.widgets[i].height;
      }

      if (wrapping)
        return widgetsHeight + (Math.ceil(line.text.length / perLine) || 1) * th;
      else
        return widgetsHeight + th;
    };
  }

  function estimateLineHeights(cm) {
    var doc = cm.doc, est = estimateHeight(cm);
    doc.iter(function(line) {
      var estHeight = est(line);
      if (estHeight != line.height) updateLineHeight(line, estHeight);
    });
  }

  function keyMapChanged(cm) {
    var map = keyMap[cm.options.keyMap], style = map.style;
    cm.display.wrapper.className = cm.display.wrapper.className.replace(/\s*cm-keymap-\S+/g, "") +
      (style ? " cm-keymap-" + style : "");
  }

  function themeChanged(cm) {
    cm.display.wrapper.className = cm.display.wrapper.className.replace(/\s*cm-s-\S+/g, "") +
      cm.options.theme.replace(/(^|\s)\s*/g, " cm-s-");
    clearCaches(cm);
  }

  function guttersChanged(cm) {
    updateGutters(cm);
    regChange(cm);
    setTimeout(function(){alignHorizontally(cm);}, 20);
  }

  // Rebuild the gutter elements, ensure the margin to the left of the
  // code matches their width.
  function updateGutters(cm) {
    var gutters = cm.display.gutters, specs = cm.options.gutters;
    removeChildren(gutters);
    for (var i = 0; i < specs.length; ++i) {
      var gutterClass = specs[i];
      var gElt = gutters.appendChild(elt("div", null, "CodeMirror-gutter " + gutterClass));
      if (gutterClass == "CodeMirror-linenumbers") {
        cm.display.lineGutter = gElt;
        gElt.style.width = (cm.display.lineNumWidth || 1) + "px";
      }
    }
    gutters.style.display = i ? "" : "none";
    updateGutterSpace(cm);
  }

  function updateGutterSpace(cm) {
    var width = cm.display.gutters.offsetWidth;
    cm.display.sizer.style.marginLeft = width + "px";
    cm.display.scrollbarH.style.left = cm.options.fixedGutter ? width + "px" : 0;
  }

  // Compute the character length of a line, taking into account
  // collapsed ranges (see markText) that might hide parts, and join
  // other lines onto it.
  function lineLength(line) {
    if (line.height == 0) return 0;
    var len = line.text.length, merged, cur = line;
    while (merged = collapsedSpanAtStart(cur)) {
      var found = merged.find(0, true);
      cur = found.from.line;
      len += found.from.ch - found.to.ch;
    }
    cur = line;
    while (merged = collapsedSpanAtEnd(cur)) {
      var found = merged.find(0, true);
      len -= cur.text.length - found.from.ch;
      cur = found.to.line;
      len += cur.text.length - found.to.ch;
    }
    return len;
  }

  // Find the longest line in the document.
  function findMaxLine(cm) {
    var d = cm.display, doc = cm.doc;
    d.maxLine = getLine(doc, doc.first);
    d.maxLineLength = lineLength(d.maxLine);
    d.maxLineChanged = true;
    doc.iter(function(line) {
      var len = lineLength(line);
      if (len > d.maxLineLength) {
        d.maxLineLength = len;
        d.maxLine = line;
      }
    });
  }

  // Make sure the gutters options contains the element
  // "CodeMirror-linenumbers" when the lineNumbers option is true.
  function setGuttersForLineNumbers(options) {
    var found = indexOf(options.gutters, "CodeMirror-linenumbers");
    if (found == -1 && options.lineNumbers) {
      options.gutters = options.gutters.concat(["CodeMirror-linenumbers"]);
    } else if (found > -1 && !options.lineNumbers) {
      options.gutters = options.gutters.slice(0);
      options.gutters.splice(found, 1);
    }
  }

  // SCROLLBARS

  function hScrollbarTakesSpace(cm) {
    return cm.display.scroller.clientHeight - cm.display.wrapper.clientHeight < scrollerCutOff - 3;
  }

  // Prepare DOM reads needed to update the scrollbars. Done in one
  // shot to minimize update/measure roundtrips.
  function measureForScrollbars(cm) {
    var scroll = cm.display.scroller;
    return {
      clientHeight: scroll.clientHeight,
      barHeight: cm.display.scrollbarV.clientHeight,
      scrollWidth: scroll.scrollWidth, clientWidth: scroll.clientWidth,
      hScrollbarTakesSpace: hScrollbarTakesSpace(cm),
      barWidth: cm.display.scrollbarH.clientWidth,
      docHeight: Math.round(cm.doc.height + paddingVert(cm.display))
    };
  }

  // Re-synchronize the fake scrollbars with the actual size of the
  // content.
  function updateScrollbars(cm, measure) {
    if (!measure) measure = measureForScrollbars(cm);
    var d = cm.display, sWidth = scrollbarWidth(d.measure);
    var scrollHeight = measure.docHeight + scrollerCutOff;
    var needsH = measure.scrollWidth > measure.clientWidth;
    if (needsH && measure.scrollWidth <= measure.clientWidth + 1 &&
        sWidth > 0 && !measure.hScrollbarTakesSpace)
      needsH = false; // (Issue #2562)
    var needsV = scrollHeight > measure.clientHeight;

    if (needsV) {
      d.scrollbarV.style.display = "block";
      d.scrollbarV.style.bottom = needsH ? sWidth + "px" : "0";
      // A bug in IE8 can cause this value to be negative, so guard it.
      d.scrollbarV.firstChild.style.height =
        Math.max(0, scrollHeight - measure.clientHeight + (measure.barHeight || d.scrollbarV.clientHeight)) + "px";
    } else {
      d.scrollbarV.style.display = "";
      d.scrollbarV.firstChild.style.height = "0";
    }
    if (needsH) {
      d.scrollbarH.style.display = "block";
      d.scrollbarH.style.right = needsV ? sWidth + "px" : "0";
      d.scrollbarH.firstChild.style.width =
        (measure.scrollWidth - measure.clientWidth + (measure.barWidth || d.scrollbarH.clientWidth)) + "px";
    } else {
      d.scrollbarH.style.display = "";
      d.scrollbarH.firstChild.style.width = "0";
    }
    if (needsH && needsV) {
      d.scrollbarFiller.style.display = "block";
      d.scrollbarFiller.style.height = d.scrollbarFiller.style.width = sWidth + "px";
    } else d.scrollbarFiller.style.display = "";
    if (needsH && cm.options.coverGutterNextToScrollbar && cm.options.fixedGutter) {
      d.gutterFiller.style.display = "block";
      d.gutterFiller.style.height = sWidth + "px";
      d.gutterFiller.style.width = d.gutters.offsetWidth + "px";
    } else d.gutterFiller.style.display = "";

    if (!cm.state.checkedOverlayScrollbar && measure.clientHeight > 0) {
      if (sWidth === 0) {
        var w = mac && !mac_geMountainLion ? "12px" : "18px";
        d.scrollbarV.style.minWidth = d.scrollbarH.style.minHeight = w;
        var barMouseDown = function(e) {
          if (e_target(e) != d.scrollbarV && e_target(e) != d.scrollbarH)
            operation(cm, onMouseDown)(e);
        };
        on(d.scrollbarV, "mousedown", barMouseDown);
        on(d.scrollbarH, "mousedown", barMouseDown);
      }
      cm.state.checkedOverlayScrollbar = true;
    }
  }

  // Compute the lines that are visible in a given viewport (defaults
  // the the current scroll position). viewport may contain top,
  // height, and ensure (see op.scrollToPos) properties.
  function visibleLines(display, doc, viewport) {
    var top = viewport && viewport.top != null ? Math.max(0, viewport.top) : display.scroller.scrollTop;
    top = Math.floor(top - paddingTop(display));
    var bottom = viewport && viewport.bottom != null ? viewport.bottom : top + display.wrapper.clientHeight;

    var from = lineAtHeight(doc, top), to = lineAtHeight(doc, bottom);
    // Ensure is a {from: {line, ch}, to: {line, ch}} object, and
    // forces those lines into the viewport (if possible).
    if (viewport && viewport.ensure) {
      var ensureFrom = viewport.ensure.from.line, ensureTo = viewport.ensure.to.line;
      if (ensureFrom < from)
        return {from: ensureFrom,
                to: lineAtHeight(doc, heightAtLine(getLine(doc, ensureFrom)) + display.wrapper.clientHeight)};
      if (Math.min(ensureTo, doc.lastLine()) >= to)
        return {from: lineAtHeight(doc, heightAtLine(getLine(doc, ensureTo)) - display.wrapper.clientHeight),
                to: ensureTo};
    }
    return {from: from, to: Math.max(to, from + 1)};
  }

  // LINE NUMBERS

  // Re-align line numbers and gutter marks to compensate for
  // horizontal scrolling.
  function alignHorizontally(cm) {
    var display = cm.display, view = display.view;
    if (!display.alignWidgets && (!display.gutters.firstChild || !cm.options.fixedGutter)) return;
    var comp = compensateForHScroll(display) - display.scroller.scrollLeft + cm.doc.scrollLeft;
    var gutterW = display.gutters.offsetWidth, left = comp + "px";
    for (var i = 0; i < view.length; i++) if (!view[i].hidden) {
      if (cm.options.fixedGutter && view[i].gutter)
        view[i].gutter.style.left = left;
      var align = view[i].alignable;
      if (align) for (var j = 0; j < align.length; j++)
        align[j].style.left = left;
    }
    if (cm.options.fixedGutter)
      display.gutters.style.left = (comp + gutterW) + "px";
  }

  // Used to ensure that the line number gutter is still the right
  // size for the current document size. Returns true when an update
  // is needed.
  function maybeUpdateLineNumberWidth(cm) {
    if (!cm.options.lineNumbers) return false;
    var doc = cm.doc, last = lineNumberFor(cm.options, doc.first + doc.size - 1), display = cm.display;
    if (last.length != display.lineNumChars) {
      var test = display.measure.appendChild(elt("div", [elt("div", last)],
                                                 "CodeMirror-linenumber CodeMirror-gutter-elt"));
      var innerW = test.firstChild.offsetWidth, padding = test.offsetWidth - innerW;
      display.lineGutter.style.width = "";
      display.lineNumInnerWidth = Math.max(innerW, display.lineGutter.offsetWidth - padding);
      display.lineNumWidth = display.lineNumInnerWidth + padding;
      display.lineNumChars = display.lineNumInnerWidth ? last.length : -1;
      display.lineGutter.style.width = display.lineNumWidth + "px";
      updateGutterSpace(cm);
      return true;
    }
    return false;
  }

  function lineNumberFor(options, i) {
    return String(options.lineNumberFormatter(i + options.firstLineNumber));
  }

  // Computes display.scroller.scrollLeft + display.gutters.offsetWidth,
  // but using getBoundingClientRect to get a sub-pixel-accurate
  // result.
  function compensateForHScroll(display) {
    return display.scroller.getBoundingClientRect().left - display.sizer.getBoundingClientRect().left;
  }

  // DISPLAY DRAWING

  function DisplayUpdate(cm, viewport, force) {
    var display = cm.display;

    this.viewport = viewport;
    // Store some values that we'll need later (but don't want to force a relayout for)
    this.visible = visibleLines(display, cm.doc, viewport);
    this.editorIsHidden = !display.wrapper.offsetWidth;
    this.wrapperHeight = display.wrapper.clientHeight;
    this.oldViewFrom = display.viewFrom; this.oldViewTo = display.viewTo;
    this.oldScrollerWidth = display.scroller.clientWidth;
    this.force = force;
    this.dims = getDimensions(cm);
  }

  // Does the actual updating of the line display. Bails out
  // (returning false) when there is nothing to be done and forced is
  // false.
  function updateDisplayIfNeeded(cm, update) {
    var display = cm.display, doc = cm.doc;
    if (update.editorIsHidden) {
      resetView(cm);
      return false;
    }

    // Bail out if the visible area is already rendered and nothing changed.
    if (!update.force &&
        update.visible.from >= display.viewFrom && update.visible.to <= display.viewTo &&
        (display.updateLineNumbers == null || display.updateLineNumbers >= display.viewTo) &&
        countDirtyView(cm) == 0)
      return false;

    if (maybeUpdateLineNumberWidth(cm)) {
      resetView(cm);
      update.dims = getDimensions(cm);
    }

    // Compute a suitable new viewport (from & to)
    var end = doc.first + doc.size;
    var from = Math.max(update.visible.from - cm.options.viewportMargin, doc.first);
    var to = Math.min(end, update.visible.to + cm.options.viewportMargin);
    if (display.viewFrom < from && from - display.viewFrom < 20) from = Math.max(doc.first, display.viewFrom);
    if (display.viewTo > to && display.viewTo - to < 20) to = Math.min(end, display.viewTo);
    if (sawCollapsedSpans) {
      from = visualLineNo(cm.doc, from);
      to = visualLineEndNo(cm.doc, to);
    }

    var different = from != display.viewFrom || to != display.viewTo ||
      display.lastSizeC != update.wrapperHeight;
    adjustView(cm, from, to);

    display.viewOffset = heightAtLine(getLine(cm.doc, display.viewFrom));
    // Position the mover div to align with the current scroll position
    cm.display.mover.style.top = display.viewOffset + "px";

    var toUpdate = countDirtyView(cm);
    if (!different && toUpdate == 0 && !update.force &&
        (display.updateLineNumbers == null || display.updateLineNumbers >= display.viewTo))
      return false;

    // For big changes, we hide the enclosing element during the
    // update, since that speeds up the operations on most browsers.
    var focused = activeElt();
    if (toUpdate > 4) display.lineDiv.style.display = "none";
    patchDisplay(cm, display.updateLineNumbers, update.dims);
    if (toUpdate > 4) display.lineDiv.style.display = "";
    // There might have been a widget with a focused element that got
    // hidden or updated, if so re-focus it.
    if (focused && activeElt() != focused && focused.offsetHeight) focused.focus();

    // Prevent selection and cursors from interfering with the scroll
    // width.
    removeChildren(display.cursorDiv);
    removeChildren(display.selectionDiv);

    if (different) {
      display.lastSizeC = update.wrapperHeight;
      startWorker(cm, 400);
    }

    display.updateLineNumbers = null;

    return true;
  }

  function postUpdateDisplay(cm, update) {
    var force = update.force, viewport = update.viewport;
    for (var first = true;; first = false) {
      if (first && cm.options.lineWrapping && update.oldScrollerWidth != cm.display.scroller.clientWidth) {
        force = true;
      } else {
        force = false;
        // Clip forced viewport to actual scrollable area.
        if (viewport && viewport.top != null)
          viewport = {top: Math.min(cm.doc.height + paddingVert(cm.display) - scrollerCutOff -
                                    cm.display.scroller.clientHeight, viewport.top)};
        // Updated line heights might result in the drawn area not
        // actually covering the viewport. Keep looping until it does.
        update.visible = visibleLines(cm.display, cm.doc, viewport);
        if (update.visible.from >= cm.display.viewFrom && update.visible.to <= cm.display.viewTo)
          break;
      }
      if (!updateDisplayIfNeeded(cm, update)) break;
      updateHeightsInViewport(cm);
      var barMeasure = measureForScrollbars(cm);
      updateSelection(cm);
      setDocumentHeight(cm, barMeasure);
      updateScrollbars(cm, barMeasure);
    }

    signalLater(cm, "update", cm);
    if (cm.display.viewFrom != update.oldViewFrom || cm.display.viewTo != update.oldViewTo)
      signalLater(cm, "viewportChange", cm, cm.display.viewFrom, cm.display.viewTo);
  }

  function updateDisplaySimple(cm, viewport) {
    var update = new DisplayUpdate(cm, viewport);
    if (updateDisplayIfNeeded(cm, update)) {
      updateHeightsInViewport(cm);
      postUpdateDisplay(cm, update);
      var barMeasure = measureForScrollbars(cm);
      updateSelection(cm);
      setDocumentHeight(cm, barMeasure);
      updateScrollbars(cm, barMeasure);
    }
  }

  function setDocumentHeight(cm, measure) {
    cm.display.sizer.style.minHeight = cm.display.heightForcer.style.top = measure.docHeight + "px";
    cm.display.gutters.style.height = Math.max(measure.docHeight, measure.clientHeight - scrollerCutOff) + "px";
  }

  function checkForWebkitWidthBug(cm, measure) {
    // Work around Webkit bug where it sometimes reserves space for a
    // non-existing phantom scrollbar in the scroller (Issue #2420)
    if (cm.display.sizer.offsetWidth + cm.display.gutters.offsetWidth < cm.display.scroller.clientWidth - 1) {
      cm.display.sizer.style.minHeight = cm.display.heightForcer.style.top = "0px";
      cm.display.gutters.style.height = measure.docHeight + "px";
    }
  }

  // Read the actual heights of the rendered lines, and update their
  // stored heights to match.
  function updateHeightsInViewport(cm) {
    var display = cm.display;
    var prevBottom = display.lineDiv.offsetTop;
    for (var i = 0; i < display.view.length; i++) {
      var cur = display.view[i], height;
      if (cur.hidden) continue;
      if (ie && ie_version < 8) {
        var bot = cur.node.offsetTop + cur.node.offsetHeight;
        height = bot - prevBottom;
        prevBottom = bot;
      } else {
        var box = cur.node.getBoundingClientRect();
        height = box.bottom - box.top;
      }
      var diff = cur.line.height - height;
      if (height < 2) height = textHeight(display);
      if (diff > .001 || diff < -.001) {
        updateLineHeight(cur.line, height);
        updateWidgetHeight(cur.line);
        if (cur.rest) for (var j = 0; j < cur.rest.length; j++)
          updateWidgetHeight(cur.rest[j]);
      }
    }
  }

  // Read and store the height of line widgets associated with the
  // given line.
  function updateWidgetHeight(line) {
    if (line.widgets) for (var i = 0; i < line.widgets.length; ++i)
      line.widgets[i].height = line.widgets[i].node.offsetHeight;
  }

  // Do a bulk-read of the DOM positions and sizes needed to draw the
  // view, so that we don't interleave reading and writing to the DOM.
  function getDimensions(cm) {
    var d = cm.display, left = {}, width = {};
    for (var n = d.gutters.firstChild, i = 0; n; n = n.nextSibling, ++i) {
      left[cm.options.gutters[i]] = n.offsetLeft;
      width[cm.options.gutters[i]] = n.offsetWidth;
    }
    return {fixedPos: compensateForHScroll(d),
            gutterTotalWidth: d.gutters.offsetWidth,
            gutterLeft: left,
            gutterWidth: width,
            wrapperWidth: d.wrapper.clientWidth};
  }

  // Sync the actual display DOM structure with display.view, removing
  // nodes for lines that are no longer in view, and creating the ones
  // that are not there yet, and updating the ones that are out of
  // date.
  function patchDisplay(cm, updateNumbersFrom, dims) {
    var display = cm.display, lineNumbers = cm.options.lineNumbers;
    var container = display.lineDiv, cur = container.firstChild;

    function rm(node) {
      var next = node.nextSibling;
      // Works around a throw-scroll bug in OS X Webkit
      if (webkit && mac && cm.display.currentWheelTarget == node)
        node.style.display = "none";
      else
        node.parentNode.removeChild(node);
      return next;
    }

    var view = display.view, lineN = display.viewFrom;
    // Loop over the elements in the view, syncing cur (the DOM nodes
    // in display.lineDiv) with the view as we go.
    for (var i = 0; i < view.length; i++) {
      var lineView = view[i];
      if (lineView.hidden) {
      } else if (!lineView.node) { // Not drawn yet
        var node = buildLineElement(cm, lineView, lineN, dims);
        container.insertBefore(node, cur);
      } else { // Already drawn
        while (cur != lineView.node) cur = rm(cur);
        var updateNumber = lineNumbers && updateNumbersFrom != null &&
          updateNumbersFrom <= lineN && lineView.lineNumber;
        if (lineView.changes) {
          if (indexOf(lineView.changes, "gutter") > -1) updateNumber = false;
          updateLineForChanges(cm, lineView, lineN, dims);
        }
        if (updateNumber) {
          removeChildren(lineView.lineNumber);
          lineView.lineNumber.appendChild(document.createTextNode(lineNumberFor(cm.options, lineN)));
        }
        cur = lineView.node.nextSibling;
      }
      lineN += lineView.size;
    }
    while (cur) cur = rm(cur);
  }

  // When an aspect of a line changes, a string is added to
  // lineView.changes. This updates the relevant part of the line's
  // DOM structure.
  function updateLineForChanges(cm, lineView, lineN, dims) {
    for (var j = 0; j < lineView.changes.length; j++) {
      var type = lineView.changes[j];
      if (type == "text") updateLineText(cm, lineView);
      else if (type == "gutter") updateLineGutter(cm, lineView, lineN, dims);
      else if (type == "class") updateLineClasses(lineView);
      else if (type == "widget") updateLineWidgets(lineView, dims);
    }
    lineView.changes = null;
  }

  // Lines with gutter elements, widgets or a background class need to
  // be wrapped, and have the extra elements added to the wrapper div
  function ensureLineWrapped(lineView) {
    if (lineView.node == lineView.text) {
      lineView.node = elt("div", null, null, "position: relative");
      if (lineView.text.parentNode)
        lineView.text.parentNode.replaceChild(lineView.node, lineView.text);
      lineView.node.appendChild(lineView.text);
      if (ie && ie_version < 8) lineView.node.style.zIndex = 2;
    }
    return lineView.node;
  }

  function updateLineBackground(lineView) {
    var cls = lineView.bgClass ? lineView.bgClass + " " + (lineView.line.bgClass || "") : lineView.line.bgClass;
    if (cls) cls += " CodeMirror-linebackground";
    if (lineView.background) {
      if (cls) lineView.background.className = cls;
      else { lineView.background.parentNode.removeChild(lineView.background); lineView.background = null; }
    } else if (cls) {
      var wrap = ensureLineWrapped(lineView);
      lineView.background = wrap.insertBefore(elt("div", null, cls), wrap.firstChild);
    }
  }

  // Wrapper around buildLineContent which will reuse the structure
  // in display.externalMeasured when possible.
  function getLineContent(cm, lineView) {
    var ext = cm.display.externalMeasured;
    if (ext && ext.line == lineView.line) {
      cm.display.externalMeasured = null;
      lineView.measure = ext.measure;
      return ext.built;
    }
    return buildLineContent(cm, lineView);
  }

  // Redraw the line's text. Interacts with the background and text
  // classes because the mode may output tokens that influence these
  // classes.
  function updateLineText(cm, lineView) {
    var cls = lineView.text.className;
    var built = getLineContent(cm, lineView);
    if (lineView.text == lineView.node) lineView.node = built.pre;
    lineView.text.parentNode.replaceChild(built.pre, lineView.text);
    lineView.text = built.pre;
    if (built.bgClass != lineView.bgClass || built.textClass != lineView.textClass) {
      lineView.bgClass = built.bgClass;
      lineView.textClass = built.textClass;
      updateLineClasses(lineView);
    } else if (cls) {
      lineView.text.className = cls;
    }
  }

  function updateLineClasses(lineView) {
    updateLineBackground(lineView);
    if (lineView.line.wrapClass)
      ensureLineWrapped(lineView).className = lineView.line.wrapClass;
    else if (lineView.node != lineView.text)
      lineView.node.className = "";
    var textClass = lineView.textClass ? lineView.textClass + " " + (lineView.line.textClass || "") : lineView.line.textClass;
    lineView.text.className = textClass || "";
  }

  function updateLineGutter(cm, lineView, lineN, dims) {
    if (lineView.gutter) {
      lineView.node.removeChild(lineView.gutter);
      lineView.gutter = null;
    }
    var markers = lineView.line.gutterMarkers;
    if (cm.options.lineNumbers || markers) {
      var wrap = ensureLineWrapped(lineView);
      var gutterWrap = lineView.gutter =
        wrap.insertBefore(elt("div", null, "CodeMirror-gutter-wrapper", "position: absolute; left: " +
                              (cm.options.fixedGutter ? dims.fixedPos : -dims.gutterTotalWidth) + "px"),
                          lineView.text);
      if (cm.options.lineNumbers && (!markers || !markers["CodeMirror-linenumbers"]))
        lineView.lineNumber = gutterWrap.appendChild(
          elt("div", lineNumberFor(cm.options, lineN),
              "CodeMirror-linenumber CodeMirror-gutter-elt",
              "left: " + dims.gutterLeft["CodeMirror-linenumbers"] + "px; width: "
              + cm.display.lineNumInnerWidth + "px"));
      if (markers) for (var k = 0; k < cm.options.gutters.length; ++k) {
        var id = cm.options.gutters[k], found = markers.hasOwnProperty(id) && markers[id];
        if (found)
          gutterWrap.appendChild(elt("div", [found], "CodeMirror-gutter-elt", "left: " +
                                     dims.gutterLeft[id] + "px; width: " + dims.gutterWidth[id] + "px"));
      }
    }
  }

  function updateLineWidgets(lineView, dims) {
    if (lineView.alignable) lineView.alignable = null;
    for (var node = lineView.node.firstChild, next; node; node = next) {
      var next = node.nextSibling;
      if (node.className == "CodeMirror-linewidget")
        lineView.node.removeChild(node);
    }
    insertLineWidgets(lineView, dims);
  }

  // Build a line's DOM representation from scratch
  function buildLineElement(cm, lineView, lineN, dims) {
    var built = getLineContent(cm, lineView);
    lineView.text = lineView.node = built.pre;
    if (built.bgClass) lineView.bgClass = built.bgClass;
    if (built.textClass) lineView.textClass = built.textClass;

    updateLineClasses(lineView);
    updateLineGutter(cm, lineView, lineN, dims);
    insertLineWidgets(lineView, dims);
    return lineView.node;
  }

  // A lineView may contain multiple logical lines (when merged by
  // collapsed spans). The widgets for all of them need to be drawn.
  function insertLineWidgets(lineView, dims) {
    insertLineWidgetsFor(lineView.line, lineView, dims, true);
    if (lineView.rest) for (var i = 0; i < lineView.rest.length; i++)
      insertLineWidgetsFor(lineView.rest[i], lineView, dims, false);
  }

  function insertLineWidgetsFor(line, lineView, dims, allowAbove) {
    if (!line.widgets) return;
    var wrap = ensureLineWrapped(lineView);
    for (var i = 0, ws = line.widgets; i < ws.length; ++i) {
      var widget = ws[i], node = elt("div", [widget.node], "CodeMirror-linewidget");
      if (!widget.handleMouseEvents) node.ignoreEvents = true;
      positionLineWidget(widget, node, lineView, dims);
      if (allowAbove && widget.above)
        wrap.insertBefore(node, lineView.gutter || lineView.text);
      else
        wrap.appendChild(node);
      signalLater(widget, "redraw");
    }
  }

  function positionLineWidget(widget, node, lineView, dims) {
    if (widget.noHScroll) {
      (lineView.alignable || (lineView.alignable = [])).push(node);
      var width = dims.wrapperWidth;
      node.style.left = dims.fixedPos + "px";
      if (!widget.coverGutter) {
        width -= dims.gutterTotalWidth;
        node.style.paddingLeft = dims.gutterTotalWidth + "px";
      }
      node.style.width = width + "px";
    }
    if (widget.coverGutter) {
      node.style.zIndex = 5;
      node.style.position = "relative";
      if (!widget.noHScroll) node.style.marginLeft = -dims.gutterTotalWidth + "px";
    }
  }

  // POSITION OBJECT

  // A Pos instance represents a position within the text.
  var Pos = CodeMirror.Pos = function(line, ch) {
    if (!(this instanceof Pos)) return new Pos(line, ch);
    this.line = line; this.ch = ch;
  };

  // Compare two positions, return 0 if they are the same, a negative
  // number when a is less, and a positive number otherwise.
  var cmp = CodeMirror.cmpPos = function(a, b) { return a.line - b.line || a.ch - b.ch; };

  function copyPos(x) {return Pos(x.line, x.ch);}
  function maxPos(a, b) { return cmp(a, b) < 0 ? b : a; }
  function minPos(a, b) { return cmp(a, b) < 0 ? a : b; }

  // SELECTION / CURSOR

  // Selection objects are immutable. A new one is created every time
  // the selection changes. A selection is one or more non-overlapping
  // (and non-touching) ranges, sorted, and an integer that indicates
  // which one is the primary selection (the one that's scrolled into
  // view, that getCursor returns, etc).
  function Selection(ranges, primIndex) {
    this.ranges = ranges;
    this.primIndex = primIndex;
  }

  Selection.prototype = {
    primary: function() { return this.ranges[this.primIndex]; },
    equals: function(other) {
      if (other == this) return true;
      if (other.primIndex != this.primIndex || other.ranges.length != this.ranges.length) return false;
      for (var i = 0; i < this.ranges.length; i++) {
        var here = this.ranges[i], there = other.ranges[i];
        if (cmp(here.anchor, there.anchor) != 0 || cmp(here.head, there.head) != 0) return false;
      }
      return true;
    },
    deepCopy: function() {
      for (var out = [], i = 0; i < this.ranges.length; i++)
        out[i] = new Range(copyPos(this.ranges[i].anchor), copyPos(this.ranges[i].head));
      return new Selection(out, this.primIndex);
    },
    somethingSelected: function() {
      for (var i = 0; i < this.ranges.length; i++)
        if (!this.ranges[i].empty()) return true;
      return false;
    },
    contains: function(pos, end) {
      if (!end) end = pos;
      for (var i = 0; i < this.ranges.length; i++) {
        var range = this.ranges[i];
        if (cmp(end, range.from()) >= 0 && cmp(pos, range.to()) <= 0)
          return i;
      }
      return -1;
    }
  };

  function Range(anchor, head) {
    this.anchor = anchor; this.head = head;
  }

  Range.prototype = {
    from: function() { return minPos(this.anchor, this.head); },
    to: function() { return maxPos(this.anchor, this.head); },
    empty: function() {
      return this.head.line == this.anchor.line && this.head.ch == this.anchor.ch;
    }
  };

  // Take an unsorted, potentially overlapping set of ranges, and
  // build a selection out of it. 'Consumes' ranges array (modifying
  // it).
  function normalizeSelection(ranges, primIndex) {
    var prim = ranges[primIndex];
    ranges.sort(function(a, b) { return cmp(a.from(), b.from()); });
    primIndex = indexOf(ranges, prim);
    for (var i = 1; i < ranges.length; i++) {
      var cur = ranges[i], prev = ranges[i - 1];
      if (cmp(prev.to(), cur.from()) >= 0) {
        var from = minPos(prev.from(), cur.from()), to = maxPos(prev.to(), cur.to());
        var inv = prev.empty() ? cur.from() == cur.head : prev.from() == prev.head;
        if (i <= primIndex) --primIndex;
        ranges.splice(--i, 2, new Range(inv ? to : from, inv ? from : to));
      }
    }
    return new Selection(ranges, primIndex);
  }

  function simpleSelection(anchor, head) {
    return new Selection([new Range(anchor, head || anchor)], 0);
  }

  // Most of the external API clips given positions to make sure they
  // actually exist within the document.
  function clipLine(doc, n) {return Math.max(doc.first, Math.min(n, doc.first + doc.size - 1));}
  function clipPos(doc, pos) {
    if (pos.line < doc.first) return Pos(doc.first, 0);
    var last = doc.first + doc.size - 1;
    if (pos.line > last) return Pos(last, getLine(doc, last).text.length);
    return clipToLen(pos, getLine(doc, pos.line).text.length);
  }
  function clipToLen(pos, linelen) {
    var ch = pos.ch;
    if (ch == null || ch > linelen) return Pos(pos.line, linelen);
    else if (ch < 0) return Pos(pos.line, 0);
    else return pos;
  }
  function isLine(doc, l) {return l >= doc.first && l < doc.first + doc.size;}
  function clipPosArray(doc, array) {
    for (var out = [], i = 0; i < array.length; i++) out[i] = clipPos(doc, array[i]);
    return out;
  }

  // SELECTION UPDATES

  // The 'scroll' parameter given to many of these indicated whether
  // the new cursor position should be scrolled into view after
  // modifying the selection.

  // If shift is held or the extend flag is set, extends a range to
  // include a given position (and optionally a second position).
  // Otherwise, simply returns the range between the given positions.
  // Used for cursor motion and such.
  function extendRange(doc, range, head, other) {
    if (doc.cm && doc.cm.display.shift || doc.extend) {
      var anchor = range.anchor;
      if (other) {
        var posBefore = cmp(head, anchor) < 0;
        if (posBefore != (cmp(other, anchor) < 0)) {
          anchor = head;
          head = other;
        } else if (posBefore != (cmp(head, other) < 0)) {
          head = other;
        }
      }
      return new Range(anchor, head);
    } else {
      return new Range(other || head, head);
    }
  }

  // Extend the primary selection range, discard the rest.
  function extendSelection(doc, head, other, options) {
    setSelection(doc, new Selection([extendRange(doc, doc.sel.primary(), head, other)], 0), options);
  }

  // Extend all selections (pos is an array of selections with length
  // equal the number of selections)
  function extendSelections(doc, heads, options) {
    for (var out = [], i = 0; i < doc.sel.ranges.length; i++)
      out[i] = extendRange(doc, doc.sel.ranges[i], heads[i], null);
    var newSel = normalizeSelection(out, doc.sel.primIndex);
    setSelection(doc, newSel, options);
  }

  // Updates a single range in the selection.
  function replaceOneSelection(doc, i, range, options) {
    var ranges = doc.sel.ranges.slice(0);
    ranges[i] = range;
    setSelection(doc, normalizeSelection(ranges, doc.sel.primIndex), options);
  }

  // Reset the selection to a single range.
  function setSimpleSelection(doc, anchor, head, options) {
    setSelection(doc, simpleSelection(anchor, head), options);
  }

  // Give beforeSelectionChange handlers a change to influence a
  // selection update.
  function filterSelectionChange(doc, sel) {
    var obj = {
      ranges: sel.ranges,
      update: function(ranges) {
        this.ranges = [];
        for (var i = 0; i < ranges.length; i++)
          this.ranges[i] = new Range(clipPos(doc, ranges[i].anchor),
                                     clipPos(doc, ranges[i].head));
      }
    };
    signal(doc, "beforeSelectionChange", doc, obj);
    if (doc.cm) signal(doc.cm, "beforeSelectionChange", doc.cm, obj);
    if (obj.ranges != sel.ranges) return normalizeSelection(obj.ranges, obj.ranges.length - 1);
    else return sel;
  }

  function setSelectionReplaceHistory(doc, sel, options) {
    var done = doc.history.done, last = lst(done);
    if (last && last.ranges) {
      done[done.length - 1] = sel;
      setSelectionNoUndo(doc, sel, options);
    } else {
      setSelection(doc, sel, options);
    }
  }

  // Set a new selection.
  function setSelection(doc, sel, options) {
    setSelectionNoUndo(doc, sel, options);
    addSelectionToHistory(doc, doc.sel, doc.cm ? doc.cm.curOp.id : NaN, options);
  }

  function setSelectionNoUndo(doc, sel, options) {
    if (hasHandler(doc, "beforeSelectionChange") || doc.cm && hasHandler(doc.cm, "beforeSelectionChange"))
      sel = filterSelectionChange(doc, sel);

    var bias = options && options.bias ||
      (cmp(sel.primary().head, doc.sel.primary().head) < 0 ? -1 : 1);
    setSelectionInner(doc, skipAtomicInSelection(doc, sel, bias, true));

    if (!(options && options.scroll === false) && doc.cm)
      ensureCursorVisible(doc.cm);
  }

  function setSelectionInner(doc, sel) {
    if (sel.equals(doc.sel)) return;

    doc.sel = sel;

    if (doc.cm) {
      doc.cm.curOp.updateInput = doc.cm.curOp.selectionChanged = true;
      signalCursorActivity(doc.cm);
    }
    signalLater(doc, "cursorActivity", doc);
  }

  // Verify that the selection does not partially select any atomic
  // marked ranges.
  function reCheckSelection(doc) {
    setSelectionInner(doc, skipAtomicInSelection(doc, doc.sel, null, false), sel_dontScroll);
  }

  // Return a selection that does not partially select any atomic
  // ranges.
  function skipAtomicInSelection(doc, sel, bias, mayClear) {
    var out;
    for (var i = 0; i < sel.ranges.length; i++) {
      var range = sel.ranges[i];
      var newAnchor = skipAtomic(doc, range.anchor, bias, mayClear);
      var newHead = skipAtomic(doc, range.head, bias, mayClear);
      if (out || newAnchor != range.anchor || newHead != range.head) {
        if (!out) out = sel.ranges.slice(0, i);
        out[i] = new Range(newAnchor, newHead);
      }
    }
    return out ? normalizeSelection(out, sel.primIndex) : sel;
  }

  // Ensure a given position is not inside an atomic range.
  function skipAtomic(doc, pos, bias, mayClear) {
    var flipped = false, curPos = pos;
    var dir = bias || 1;
    doc.cantEdit = false;
    search: for (;;) {
      var line = getLine(doc, curPos.line);
      if (line.markedSpans) {
        for (var i = 0; i < line.markedSpans.length; ++i) {
          var sp = line.markedSpans[i], m = sp.marker;
          if ((sp.from == null || (m.inclusiveLeft ? sp.from <= curPos.ch : sp.from < curPos.ch)) &&
              (sp.to == null || (m.inclusiveRight ? sp.to >= curPos.ch : sp.to > curPos.ch))) {
            if (mayClear) {
              signal(m, "beforeCursorEnter");
              if (m.explicitlyCleared) {
                if (!line.markedSpans) break;
                else {--i; continue;}
              }
            }
            if (!m.atomic) continue;
            var newPos = m.find(dir < 0 ? -1 : 1);
            if (cmp(newPos, curPos) == 0) {
              newPos.ch += dir;
              if (newPos.ch < 0) {
                if (newPos.line > doc.first) newPos = clipPos(doc, Pos(newPos.line - 1));
                else newPos = null;
              } else if (newPos.ch > line.text.length) {
                if (newPos.line < doc.first + doc.size - 1) newPos = Pos(newPos.line + 1, 0);
                else newPos = null;
              }
              if (!newPos) {
                if (flipped) {
                  // Driven in a corner -- no valid cursor position found at all
                  // -- try again *with* clearing, if we didn't already
                  if (!mayClear) return skipAtomic(doc, pos, bias, true);
                  // Otherwise, turn off editing until further notice, and return the start of the doc
                  doc.cantEdit = true;
                  return Pos(doc.first, 0);
                }
                flipped = true; newPos = pos; dir = -dir;
              }
            }
            curPos = newPos;
            continue search;
          }
        }
      }
      return curPos;
    }
  }

  // SELECTION DRAWING

  // Redraw the selection and/or cursor
  function drawSelection(cm) {
    var display = cm.display, doc = cm.doc, result = {};
    var curFragment = result.cursors = document.createDocumentFragment();
    var selFragment = result.selection = document.createDocumentFragment();

    for (var i = 0; i < doc.sel.ranges.length; i++) {
      var range = doc.sel.ranges[i];
      var collapsed = range.empty();
      if (collapsed || cm.options.showCursorWhenSelecting)
        drawSelectionCursor(cm, range, curFragment);
      if (!collapsed)
        drawSelectionRange(cm, range, selFragment);
    }

    // Move the hidden textarea near the cursor to prevent scrolling artifacts
    if (cm.options.moveInputWithCursor) {
      var headPos = cursorCoords(cm, doc.sel.primary().head, "div");
      var wrapOff = display.wrapper.getBoundingClientRect(), lineOff = display.lineDiv.getBoundingClientRect();
      result.teTop = Math.max(0, Math.min(display.wrapper.clientHeight - 10,
                                          headPos.top + lineOff.top - wrapOff.top));
      result.teLeft = Math.max(0, Math.min(display.wrapper.clientWidth - 10,
                                           headPos.left + lineOff.left - wrapOff.left));
    }

    return result;
  }

  function showSelection(cm, drawn) {
    removeChildrenAndAdd(cm.display.cursorDiv, drawn.cursors);
    removeChildrenAndAdd(cm.display.selectionDiv, drawn.selection);
    if (drawn.teTop != null) {
      cm.display.inputDiv.style.top = drawn.teTop + "px";
      cm.display.inputDiv.style.left = drawn.teLeft + "px";
    }
  }

  function updateSelection(cm) {
    showSelection(cm, drawSelection(cm));
  }

  // Draws a cursor for the given range
  function drawSelectionCursor(cm, range, output) {
    var pos = cursorCoords(cm, range.head, "div", null, null, !cm.options.singleCursorHeightPerLine);

    var cursor = output.appendChild(elt("div", "\u00a0", "CodeMirror-cursor"));
    cursor.style.left = pos.left + "px";
    cursor.style.top = pos.top + "px";
    cursor.style.height = Math.max(0, pos.bottom - pos.top) * cm.options.cursorHeight + "px";

    if (pos.other) {
      // Secondary cursor, shown when on a 'jump' in bi-directional text
      var otherCursor = output.appendChild(elt("div", "\u00a0", "CodeMirror-cursor CodeMirror-secondarycursor"));
      otherCursor.style.display = "";
      otherCursor.style.left = pos.other.left + "px";
      otherCursor.style.top = pos.other.top + "px";
      otherCursor.style.height = (pos.other.bottom - pos.other.top) * .85 + "px";
    }
  }

  // Draws the given range as a highlighted selection
  function drawSelectionRange(cm, range, output) {
    var display = cm.display, doc = cm.doc;
    var fragment = document.createDocumentFragment();
    var padding = paddingH(cm.display), leftSide = padding.left, rightSide = display.lineSpace.offsetWidth - padding.right;

    function add(left, top, width, bottom) {
      if (top < 0) top = 0;
      top = Math.round(top);
      bottom = Math.round(bottom);
      fragment.appendChild(elt("div", null, "CodeMirror-selected", "position: absolute; left: " + left +
                               "px; top: " + top + "px; width: " + (width == null ? rightSide - left : width) +
                               "px; height: " + (bottom - top) + "px"));
    }

    function drawForLine(line, fromArg, toArg) {
      var lineObj = getLine(doc, line);
      var lineLen = lineObj.text.length;
      var start, end;
      function coords(ch, bias) {
        return charCoords(cm, Pos(line, ch), "div", lineObj, bias);
      }

      iterateBidiSections(getOrder(lineObj), fromArg || 0, toArg == null ? lineLen : toArg, function(from, to, dir) {
        var leftPos = coords(from, "left"), rightPos, left, right;
        if (from == to) {
          rightPos = leftPos;
          left = right = leftPos.left;
        } else {
          rightPos = coords(to - 1, "right");
          if (dir == "rtl") { var tmp = leftPos; leftPos = rightPos; rightPos = tmp; }
          left = leftPos.left;
          right = rightPos.right;
        }
        if (fromArg == null && from == 0) left = leftSide;
        if (rightPos.top - leftPos.top > 3) { // Different lines, draw top part
          add(left, leftPos.top, null, leftPos.bottom);
          left = leftSide;
          if (leftPos.bottom < rightPos.top) add(left, leftPos.bottom, null, rightPos.top);
        }
        if (toArg == null && to == lineLen) right = rightSide;
        if (!start || leftPos.top < start.top || leftPos.top == start.top && leftPos.left < start.left)
          start = leftPos;
        if (!end || rightPos.bottom > end.bottom || rightPos.bottom == end.bottom && rightPos.right > end.right)
          end = rightPos;
        if (left < leftSide + 1) left = leftSide;
        add(left, rightPos.top, right - left, rightPos.bottom);
      });
      return {start: start, end: end};
    }

    var sFrom = range.from(), sTo = range.to();
    if (sFrom.line == sTo.line) {
      drawForLine(sFrom.line, sFrom.ch, sTo.ch);
    } else {
      var fromLine = getLine(doc, sFrom.line), toLine = getLine(doc, sTo.line);
      var singleVLine = visualLine(fromLine) == visualLine(toLine);
      var leftEnd = drawForLine(sFrom.line, sFrom.ch, singleVLine ? fromLine.text.length + 1 : null).end;
      var rightStart = drawForLine(sTo.line, singleVLine ? 0 : null, sTo.ch).start;
      if (singleVLine) {
        if (leftEnd.top < rightStart.top - 2) {
          add(leftEnd.right, leftEnd.top, null, leftEnd.bottom);
          add(leftSide, rightStart.top, rightStart.left, rightStart.bottom);
        } else {
          add(leftEnd.right, leftEnd.top, rightStart.left - leftEnd.right, leftEnd.bottom);
        }
      }
      if (leftEnd.bottom < rightStart.top)
        add(leftSide, leftEnd.bottom, null, rightStart.top);
    }

    output.appendChild(fragment);
  }

  // Cursor-blinking
  function restartBlink(cm) {
    if (!cm.state.focused) return;
    var display = cm.display;
    clearInterval(display.blinker);
    var on = true;
    display.cursorDiv.style.visibility = "";
    if (cm.options.cursorBlinkRate > 0)
      display.blinker = setInterval(function() {
        display.cursorDiv.style.visibility = (on = !on) ? "" : "hidden";
      }, cm.options.cursorBlinkRate);
    else if (cm.options.cursorBlinkRate < 0)
      display.cursorDiv.style.visibility = "hidden";
  }

  // HIGHLIGHT WORKER

  function startWorker(cm, time) {
    if (cm.doc.mode.startState && cm.doc.frontier < cm.display.viewTo)
      cm.state.highlight.set(time, bind(highlightWorker, cm));
  }

  function highlightWorker(cm) {
    var doc = cm.doc;
    if (doc.frontier < doc.first) doc.frontier = doc.first;
    if (doc.frontier >= cm.display.viewTo) return;
    var end = +new Date + cm.options.workTime;
    var state = copyState(doc.mode, getStateBefore(cm, doc.frontier));
    var changedLines = [];

    doc.iter(doc.frontier, Math.min(doc.first + doc.size, cm.display.viewTo + 500), function(line) {
      if (doc.frontier >= cm.display.viewFrom) { // Visible
        var oldStyles = line.styles;
        var highlighted = highlightLine(cm, line, state, true);
        line.styles = highlighted.styles;
        var oldCls = line.styleClasses, newCls = highlighted.classes;
        if (newCls) line.styleClasses = newCls;
        else if (oldCls) line.styleClasses = null;
        var ischange = !oldStyles || oldStyles.length != line.styles.length ||
          oldCls != newCls && (!oldCls || !newCls || oldCls.bgClass != newCls.bgClass || oldCls.textClass != newCls.textClass);
        for (var i = 0; !ischange && i < oldStyles.length; ++i) ischange = oldStyles[i] != line.styles[i];
        if (ischange) changedLines.push(doc.frontier);
        line.stateAfter = copyState(doc.mode, state);
      } else {
        processLine(cm, line.text, state);
        line.stateAfter = doc.frontier % 5 == 0 ? copyState(doc.mode, state) : null;
      }
      ++doc.frontier;
      if (+new Date > end) {
        startWorker(cm, cm.options.workDelay);
        return true;
      }
    });
    if (changedLines.length) runInOp(cm, function() {
      for (var i = 0; i < changedLines.length; i++)
        regLineChange(cm, changedLines[i], "text");
    });
  }

  // Finds the line to start with when starting a parse. Tries to
  // find a line with a stateAfter, so that it can start with a
  // valid state. If that fails, it returns the line with the
  // smallest indentation, which tends to need the least context to
  // parse correctly.
  function findStartLine(cm, n, precise) {
    var minindent, minline, doc = cm.doc;
    var lim = precise ? -1 : n - (cm.doc.mode.innerMode ? 1000 : 100);
    for (var search = n; search > lim; --search) {
      if (search <= doc.first) return doc.first;
      var line = getLine(doc, search - 1);
      if (line.stateAfter && (!precise || search <= doc.frontier)) return search;
      var indented = countColumn(line.text, null, cm.options.tabSize);
      if (minline == null || minindent > indented) {
        minline = search - 1;
        minindent = indented;
      }
    }
    return minline;
  }

  function getStateBefore(cm, n, precise) {
    var doc = cm.doc, display = cm.display;
    if (!doc.mode.startState) return true;
    var pos = findStartLine(cm, n, precise), state = pos > doc.first && getLine(doc, pos-1).stateAfter;
    if (!state) state = startState(doc.mode);
    else state = copyState(doc.mode, state);
    doc.iter(pos, n, function(line) {
      processLine(cm, line.text, state);
      var save = pos == n - 1 || pos % 5 == 0 || pos >= display.viewFrom && pos < display.viewTo;
      line.stateAfter = save ? copyState(doc.mode, state) : null;
      ++pos;
    });
    if (precise) doc.frontier = pos;
    return state;
  }

  // POSITION MEASUREMENT

  function paddingTop(display) {return display.lineSpace.offsetTop;}
  function paddingVert(display) {return display.mover.offsetHeight - display.lineSpace.offsetHeight;}
  function paddingH(display) {
    if (display.cachedPaddingH) return display.cachedPaddingH;
    var e = removeChildrenAndAdd(display.measure, elt("pre", "x"));
    var style = window.getComputedStyle ? window.getComputedStyle(e) : e.currentStyle;
    var data = {left: parseInt(style.paddingLeft), right: parseInt(style.paddingRight)};
    if (!isNaN(data.left) && !isNaN(data.right)) display.cachedPaddingH = data;
    return data;
  }

  // Ensure the lineView.wrapping.heights array is populated. This is
  // an array of bottom offsets for the lines that make up a drawn
  // line. When lineWrapping is on, there might be more than one
  // height.
  function ensureLineHeights(cm, lineView, rect) {
    var wrapping = cm.options.lineWrapping;
    var curWidth = wrapping && cm.display.scroller.clientWidth;
    if (!lineView.measure.heights || wrapping && lineView.measure.width != curWidth) {
      var heights = lineView.measure.heights = [];
      if (wrapping) {
        lineView.measure.width = curWidth;
        var rects = lineView.text.firstChild.getClientRects();
        for (var i = 0; i < rects.length - 1; i++) {
          var cur = rects[i], next = rects[i + 1];
          if (Math.abs(cur.bottom - next.bottom) > 2)
            heights.push((cur.bottom + next.top) / 2 - rect.top);
        }
      }
      heights.push(rect.bottom - rect.top);
    }
  }

  // Find a line map (mapping character offsets to text nodes) and a
  // measurement cache for the given line number. (A line view might
  // contain multiple lines when collapsed ranges are present.)
  function mapFromLineView(lineView, line, lineN) {
    if (lineView.line == line)
      return {map: lineView.measure.map, cache: lineView.measure.cache};
    for (var i = 0; i < lineView.rest.length; i++)
      if (lineView.rest[i] == line)
        return {map: lineView.measure.maps[i], cache: lineView.measure.caches[i]};
    for (var i = 0; i < lineView.rest.length; i++)
      if (lineNo(lineView.rest[i]) > lineN)
        return {map: lineView.measure.maps[i], cache: lineView.measure.caches[i], before: true};
  }

  // Render a line into the hidden node display.externalMeasured. Used
  // when measurement is needed for a line that's not in the viewport.
  function updateExternalMeasurement(cm, line) {
    line = visualLine(line);
    var lineN = lineNo(line);
    var view = cm.display.externalMeasured = new LineView(cm.doc, line, lineN);
    view.lineN = lineN;
    var built = view.built = buildLineContent(cm, view);
    view.text = built.pre;
    removeChildrenAndAdd(cm.display.lineMeasure, built.pre);
    return view;
  }

  // Get a {top, bottom, left, right} box (in line-local coordinates)
  // for a given character.
  function measureChar(cm, line, ch, bias) {
    return measureCharPrepared(cm, prepareMeasureForLine(cm, line), ch, bias);
  }

  // Find a line view that corresponds to the given line number.
  function findViewForLine(cm, lineN) {
    if (lineN >= cm.display.viewFrom && lineN < cm.display.viewTo)
      return cm.display.view[findViewIndex(cm, lineN)];
    var ext = cm.display.externalMeasured;
    if (ext && lineN >= ext.lineN && lineN < ext.lineN + ext.size)
      return ext;
  }

  // Measurement can be split in two steps, the set-up work that
  // applies to the whole line, and the measurement of the actual
  // character. Functions like coordsChar, that need to do a lot of
  // measurements in a row, can thus ensure that the set-up work is
  // only done once.
  function prepareMeasureForLine(cm, line) {
    var lineN = lineNo(line);
    var view = findViewForLine(cm, lineN);
    if (view && !view.text)
      view = null;
    else if (view && view.changes)
      updateLineForChanges(cm, view, lineN, getDimensions(cm));
    if (!view)
      view = updateExternalMeasurement(cm, line);

    var info = mapFromLineView(view, line, lineN);
    return {
      line: line, view: view, rect: null,
      map: info.map, cache: info.cache, before: info.before,
      hasHeights: false
    };
  }

  // Given a prepared measurement object, measures the position of an
  // actual character (or fetches it from the cache).
  function measureCharPrepared(cm, prepared, ch, bias, varHeight) {
    if (prepared.before) ch = -1;
    var key = ch + (bias || ""), found;
    if (prepared.cache.hasOwnProperty(key)) {
      found = prepared.cache[key];
    } else {
      if (!prepared.rect)
        prepared.rect = prepared.view.text.getBoundingClientRect();
      if (!prepared.hasHeights) {
        ensureLineHeights(cm, prepared.view, prepared.rect);
        prepared.hasHeights = true;
      }
      found = measureCharInner(cm, prepared, ch, bias);
      if (!found.bogus) prepared.cache[key] = found;
    }
    return {left: found.left, right: found.right,
            top: varHeight ? found.rtop : found.top,
            bottom: varHeight ? found.rbottom : found.bottom};
  }

  var nullRect = {left: 0, right: 0, top: 0, bottom: 0};

  function measureCharInner(cm, prepared, ch, bias) {
    var map = prepared.map;

    var node, start, end, collapse;
    // First, search the line map for the text node corresponding to,
    // or closest to, the target character.
    for (var i = 0; i < map.length; i += 3) {
      var mStart = map[i], mEnd = map[i + 1];
      if (ch < mStart) {
        start = 0; end = 1;
        collapse = "left";
      } else if (ch < mEnd) {
        start = ch - mStart;
        end = start + 1;
      } else if (i == map.length - 3 || ch == mEnd && map[i + 3] > ch) {
        end = mEnd - mStart;
        start = end - 1;
        if (ch >= mEnd) collapse = "right";
      }
      if (start != null) {
        node = map[i + 2];
        if (mStart == mEnd && bias == (node.insertLeft ? "left" : "right"))
          collapse = bias;
        if (bias == "left" && start == 0)
          while (i && map[i - 2] == map[i - 3] && map[i - 1].insertLeft) {
            node = map[(i -= 3) + 2];
            collapse = "left";
          }
        if (bias == "right" && start == mEnd - mStart)
          while (i < map.length - 3 && map[i + 3] == map[i + 4] && !map[i + 5].insertLeft) {
            node = map[(i += 3) + 2];
            collapse = "right";
          }
        break;
      }
    }

    var rect;
    if (node.nodeType == 3) { // If it is a text node, use a range to retrieve the coordinates.
      for (var i = 0; i < 4; i++) { // Retry a maximum of 4 times when nonsense rectangles are returned
        while (start && isExtendingChar(prepared.line.text.charAt(mStart + start))) --start;
        while (mStart + end < mEnd && isExtendingChar(prepared.line.text.charAt(mStart + end))) ++end;
        if (ie && ie_version < 9 && start == 0 && end == mEnd - mStart) {
          rect = node.parentNode.getBoundingClientRect();
        } else if (ie && cm.options.lineWrapping) {
          var rects = range(node, start, end).getClientRects();
          if (rects.length)
            rect = rects[bias == "right" ? rects.length - 1 : 0];
          else
            rect = nullRect;
        } else {
          rect = range(node, start, end).getBoundingClientRect() || nullRect;
        }
        if (rect.left || rect.right || start == 0) break;
        end = start;
        start = start - 1;
        collapse = "right";
      }
      if (ie && ie_version < 11) rect = maybeUpdateRectForZooming(cm.display.measure, rect);
    } else { // If it is a widget, simply get the box for the whole widget.
      if (start > 0) collapse = bias = "right";
      var rects;
      if (cm.options.lineWrapping && (rects = node.getClientRects()).length > 1)
        rect = rects[bias == "right" ? rects.length - 1 : 0];
      else
        rect = node.getBoundingClientRect();
    }
    if (ie && ie_version < 9 && !start && (!rect || !rect.left && !rect.right)) {
      var rSpan = node.parentNode.getClientRects()[0];
      if (rSpan)
        rect = {left: rSpan.left, right: rSpan.left + charWidth(cm.display), top: rSpan.top, bottom: rSpan.bottom};
      else
        rect = nullRect;
    }

    var rtop = rect.top - prepared.rect.top, rbot = rect.bottom - prepared.rect.top;
    var mid = (rtop + rbot) / 2;
    var heights = prepared.view.measure.heights;
    for (var i = 0; i < heights.length - 1; i++)
      if (mid < heights[i]) break;
    var top = i ? heights[i - 1] : 0, bot = heights[i];
    var result = {left: (collapse == "right" ? rect.right : rect.left) - prepared.rect.left,
                  right: (collapse == "left" ? rect.left : rect.right) - prepared.rect.left,
                  top: top, bottom: bot};
    if (!rect.left && !rect.right) result.bogus = true;
    if (!cm.options.singleCursorHeightPerLine) { result.rtop = rtop; result.rbottom = rbot; }

    return result;
  }

  // Work around problem with bounding client rects on ranges being
  // returned incorrectly when zoomed on IE10 and below.
  function maybeUpdateRectForZooming(measure, rect) {
    if (!window.screen || screen.logicalXDPI == null ||
        screen.logicalXDPI == screen.deviceXDPI || !hasBadZoomedRects(measure))
      return rect;
    var scaleX = screen.logicalXDPI / screen.deviceXDPI;
    var scaleY = screen.logicalYDPI / screen.deviceYDPI;
    return {left: rect.left * scaleX, right: rect.right * scaleX,
            top: rect.top * scaleY, bottom: rect.bottom * scaleY};
  }

  function clearLineMeasurementCacheFor(lineView) {
    if (lineView.measure) {
      lineView.measure.cache = {};
      lineView.measure.heights = null;
      if (lineView.rest) for (var i = 0; i < lineView.rest.length; i++)
        lineView.measure.caches[i] = {};
    }
  }

  function clearLineMeasurementCache(cm) {
    cm.display.externalMeasure = null;
    removeChildren(cm.display.lineMeasure);
    for (var i = 0; i < cm.display.view.length; i++)
      clearLineMeasurementCacheFor(cm.display.view[i]);
  }

  function clearCaches(cm) {
    clearLineMeasurementCache(cm);
    cm.display.cachedCharWidth = cm.display.cachedTextHeight = cm.display.cachedPaddingH = null;
    if (!cm.options.lineWrapping) cm.display.maxLineChanged = true;
    cm.display.lineNumChars = null;
  }

  function pageScrollX() { return window.pageXOffset || (document.documentElement || document.body).scrollLeft; }
  function pageScrollY() { return window.pageYOffset || (document.documentElement || document.body).scrollTop; }

  // Converts a {top, bottom, left, right} box from line-local
  // coordinates into another coordinate system. Context may be one of
  // "line", "div" (display.lineDiv), "local"/null (editor), or "page".
  function intoCoordSystem(cm, lineObj, rect, context) {
    if (lineObj.widgets) for (var i = 0; i < lineObj.widgets.length; ++i) if (lineObj.widgets[i].above) {
      var size = widgetHeight(lineObj.widgets[i]);
      rect.top += size; rect.bottom += size;
    }
    if (context == "line") return rect;
    if (!context) context = "local";
    var yOff = heightAtLine(lineObj);
    if (context == "local") yOff += paddingTop(cm.display);
    else yOff -= cm.display.viewOffset;
    if (context == "page" || context == "window") {
      var lOff = cm.display.lineSpace.getBoundingClientRect();
      yOff += lOff.top + (context == "window" ? 0 : pageScrollY());
      var xOff = lOff.left + (context == "window" ? 0 : pageScrollX());
      rect.left += xOff; rect.right += xOff;
    }
    rect.top += yOff; rect.bottom += yOff;
    return rect;
  }

  // Coverts a box from "div" coords to another coordinate system.
  // Context may be "window", "page", "div", or "local"/null.
  function fromCoordSystem(cm, coords, context) {
    if (context == "div") return coords;
    var left = coords.left, top = coords.top;
    // First move into "page" coordinate system
    if (context == "page") {
      left -= pageScrollX();
      top -= pageScrollY();
    } else if (context == "local" || !context) {
      var localBox = cm.display.sizer.getBoundingClientRect();
      left += localBox.left;
      top += localBox.top;
    }

    var lineSpaceBox = cm.display.lineSpace.getBoundingClientRect();
    return {left: left - lineSpaceBox.left, top: top - lineSpaceBox.top};
  }

  function charCoords(cm, pos, context, lineObj, bias) {
    if (!lineObj) lineObj = getLine(cm.doc, pos.line);
    return intoCoordSystem(cm, lineObj, measureChar(cm, lineObj, pos.ch, bias), context);
  }

  // Returns a box for a given cursor position, which may have an
  // 'other' property containing the position of the secondary cursor
  // on a bidi boundary.
  function cursorCoords(cm, pos, context, lineObj, preparedMeasure, varHeight) {
    lineObj = lineObj || getLine(cm.doc, pos.line);
    if (!preparedMeasure) preparedMeasure = prepareMeasureForLine(cm, lineObj);
    function get(ch, right) {
      var m = measureCharPrepared(cm, preparedMeasure, ch, right ? "right" : "left", varHeight);
      if (right) m.left = m.right; else m.right = m.left;
      return intoCoordSystem(cm, lineObj, m, context);
    }
    function getBidi(ch, partPos) {
      var part = order[partPos], right = part.level % 2;
      if (ch == bidiLeft(part) && partPos && part.level < order[partPos - 1].level) {
        part = order[--partPos];
        ch = bidiRight(part) - (part.level % 2 ? 0 : 1);
        right = true;
      } else if (ch == bidiRight(part) && partPos < order.length - 1 && part.level < order[partPos + 1].level) {
        part = order[++partPos];
        ch = bidiLeft(part) - part.level % 2;
        right = false;
      }
      if (right && ch == part.to && ch > part.from) return get(ch - 1);
      return get(ch, right);
    }
    var order = getOrder(lineObj), ch = pos.ch;
    if (!order) return get(ch);
    var partPos = getBidiPartAt(order, ch);
    var val = getBidi(ch, partPos);
    if (bidiOther != null) val.other = getBidi(ch, bidiOther);
    return val;
  }

  // Used to cheaply estimate the coordinates for a position. Used for
  // intermediate scroll updates.
  function estimateCoords(cm, pos) {
    var left = 0, pos = clipPos(cm.doc, pos);
    if (!cm.options.lineWrapping) left = charWidth(cm.display) * pos.ch;
    var lineObj = getLine(cm.doc, pos.line);
    var top = heightAtLine(lineObj) + paddingTop(cm.display);
    return {left: left, right: left, top: top, bottom: top + lineObj.height};
  }

  // Positions returned by coordsChar contain some extra information.
  // xRel is the relative x position of the input coordinates compared
  // to the found position (so xRel > 0 means the coordinates are to
  // the right of the character position, for example). When outside
  // is true, that means the coordinates lie outside the line's
  // vertical range.
  function PosWithInfo(line, ch, outside, xRel) {
    var pos = Pos(line, ch);
    pos.xRel = xRel;
    if (outside) pos.outside = true;
    return pos;
  }

  // Compute the character position closest to the given coordinates.
  // Input must be lineSpace-local ("div" coordinate system).
  function coordsChar(cm, x, y) {
    var doc = cm.doc;
    y += cm.display.viewOffset;
    if (y < 0) return PosWithInfo(doc.first, 0, true, -1);
    var lineN = lineAtHeight(doc, y), last = doc.first + doc.size - 1;
    if (lineN > last)
      return PosWithInfo(doc.first + doc.size - 1, getLine(doc, last).text.length, true, 1);
    if (x < 0) x = 0;

    var lineObj = getLine(doc, lineN);
    for (;;) {
      var found = coordsCharInner(cm, lineObj, lineN, x, y);
      var merged = collapsedSpanAtEnd(lineObj);
      var mergedPos = merged && merged.find(0, true);
      if (merged && (found.ch > mergedPos.from.ch || found.ch == mergedPos.from.ch && found.xRel > 0))
        lineN = lineNo(lineObj = mergedPos.to.line);
      else
        return found;
    }
  }

  function coordsCharInner(cm, lineObj, lineNo, x, y) {
    var innerOff = y - heightAtLine(lineObj);
    var wrongLine = false, adjust = 2 * cm.display.wrapper.clientWidth;
    var preparedMeasure = prepareMeasureForLine(cm, lineObj);

    function getX(ch) {
      var sp = cursorCoords(cm, Pos(lineNo, ch), "line", lineObj, preparedMeasure);
      wrongLine = true;
      if (innerOff > sp.bottom) return sp.left - adjust;
      else if (innerOff < sp.top) return sp.left + adjust;
      else wrongLine = false;
      return sp.left;
    }

    var bidi = getOrder(lineObj), dist = lineObj.text.length;
    var from = lineLeft(lineObj), to = lineRight(lineObj);
    var fromX = getX(from), fromOutside = wrongLine, toX = getX(to), toOutside = wrongLine;

    if (x > toX) return PosWithInfo(lineNo, to, toOutside, 1);
    // Do a binary search between these bounds.
    for (;;) {
      if (bidi ? to == from || to == moveVisually(lineObj, from, 1) : to - from <= 1) {
        var ch = x < fromX || x - fromX <= toX - x ? from : to;
        var xDiff = x - (ch == from ? fromX : toX);
        while (isExtendingChar(lineObj.text.charAt(ch))) ++ch;
        var pos = PosWithInfo(lineNo, ch, ch == from ? fromOutside : toOutside,
                              xDiff < -1 ? -1 : xDiff > 1 ? 1 : 0);
        return pos;
      }
      var step = Math.ceil(dist / 2), middle = from + step;
      if (bidi) {
        middle = from;
        for (var i = 0; i < step; ++i) middle = moveVisually(lineObj, middle, 1);
      }
      var middleX = getX(middle);
      if (middleX > x) {to = middle; toX = middleX; if (toOutside = wrongLine) toX += 1000; dist = step;}
      else {from = middle; fromX = middleX; fromOutside = wrongLine; dist -= step;}
    }
  }

  var measureText;
  // Compute the default text height.
  function textHeight(display) {
    if (display.cachedTextHeight != null) return display.cachedTextHeight;
    if (measureText == null) {
      measureText = elt("pre");
      // Measure a bunch of lines, for browsers that compute
      // fractional heights.
      for (var i = 0; i < 49; ++i) {
        measureText.appendChild(document.createTextNode("x"));
        measureText.appendChild(elt("br"));
      }
      measureText.appendChild(document.createTextNode("x"));
    }
    removeChildrenAndAdd(display.measure, measureText);
    var height = measureText.offsetHeight / 50;
    if (height > 3) display.cachedTextHeight = height;
    removeChildren(display.measure);
    return height || 1;
  }

  // Compute the default character width.
  function charWidth(display) {
    if (display.cachedCharWidth != null) return display.cachedCharWidth;
    var anchor = elt("span", "xxxxxxxxxx");
    var pre = elt("pre", [anchor]);
    removeChildrenAndAdd(display.measure, pre);
    var rect = anchor.getBoundingClientRect(), width = (rect.right - rect.left) / 10;
    if (width > 2) display.cachedCharWidth = width;
    return width || 10;
  }

  // OPERATIONS

  // Operations are used to wrap a series of changes to the editor
  // state in such a way that each change won't have to update the
  // cursor and display (which would be awkward, slow, and
  // error-prone). Instead, display updates are batched and then all
  // combined and executed at once.

  var operationGroup = null;

  var nextOpId = 0;
  // Start a new operation.
  function startOperation(cm) {
    cm.curOp = {
      cm: cm,
      viewChanged: false,      // Flag that indicates that lines might need to be redrawn
      startHeight: cm.doc.height, // Used to detect need to update scrollbar
      forceUpdate: false,      // Used to force a redraw
      updateInput: null,       // Whether to reset the input textarea
      typing: false,           // Whether this reset should be careful to leave existing text (for compositing)
      changeObjs: null,        // Accumulated changes, for firing change events
      cursorActivityHandlers: null, // Set of handlers to fire cursorActivity on
      cursorActivityCalled: 0, // Tracks which cursorActivity handlers have been called already
      selectionChanged: false, // Whether the selection needs to be redrawn
      updateMaxLine: false,    // Set when the widest line needs to be determined anew
      scrollLeft: null, scrollTop: null, // Intermediate scroll position, not pushed to DOM yet
      scrollToPos: null,       // Used to scroll to a specific position
      id: ++nextOpId           // Unique ID
    };
    if (operationGroup) {
      operationGroup.ops.push(cm.curOp);
    } else {
      cm.curOp.ownsGroup = operationGroup = {
        ops: [cm.curOp],
        delayedCallbacks: []
      };
    }
  }

  function fireCallbacksForOps(group) {
    // Calls delayed callbacks and cursorActivity handlers until no
    // new ones appear
    var callbacks = group.delayedCallbacks, i = 0;
    do {
      for (; i < callbacks.length; i++)
        callbacks[i]();
      for (var j = 0; j < group.ops.length; j++) {
        var op = group.ops[j];
        if (op.cursorActivityHandlers)
          while (op.cursorActivityCalled < op.cursorActivityHandlers.length)
            op.cursorActivityHandlers[op.cursorActivityCalled++](op.cm);
      }
    } while (i < callbacks.length);
  }

  // Finish an operation, updating the display and signalling delayed events
  function endOperation(cm) {
    var op = cm.curOp, group = op.ownsGroup;
    if (!group) return;

    try { fireCallbacksForOps(group); }
    finally {
      operationGroup = null;
      for (var i = 0; i < group.ops.length; i++)
        group.ops[i].cm.curOp = null;
      endOperations(group);
    }
  }

  // The DOM updates done when an operation finishes are batched so
  // that the minimum number of relayouts are required.
  function endOperations(group) {
    var ops = group.ops;
    for (var i = 0; i < ops.length; i++) // Read DOM
      endOperation_R1(ops[i]);
    for (var i = 0; i < ops.length; i++) // Write DOM (maybe)
      endOperation_W1(ops[i]);
    for (var i = 0; i < ops.length; i++) // Read DOM
      endOperation_R2(ops[i]);
    for (var i = 0; i < ops.length; i++) // Write DOM (maybe)
      endOperation_W2(ops[i]);
    for (var i = 0; i < ops.length; i++) // Read DOM
      endOperation_finish(ops[i]);
  }

  function endOperation_R1(op) {
    var cm = op.cm, display = cm.display;
    if (op.updateMaxLine) findMaxLine(cm);

    op.mustUpdate = op.viewChanged || op.forceUpdate || op.scrollTop != null ||
      op.scrollToPos && (op.scrollToPos.from.line < display.viewFrom ||
                         op.scrollToPos.to.line >= display.viewTo) ||
      display.maxLineChanged && cm.options.lineWrapping;
    op.update = op.mustUpdate &&
      new DisplayUpdate(cm, op.mustUpdate && {top: op.scrollTop, ensure: op.scrollToPos}, op.forceUpdate);
  }

  function endOperation_W1(op) {
    op.updatedDisplay = op.mustUpdate && updateDisplayIfNeeded(op.cm, op.update);
  }

  function endOperation_R2(op) {
    var cm = op.cm, display = cm.display;
    if (op.updatedDisplay) updateHeightsInViewport(cm);

    op.barMeasure = measureForScrollbars(cm);

    // If the max line changed since it was last measured, measure it,
    // and ensure the document's width matches it.
    // updateDisplay_W2 will use these properties to do the actual resizing
    if (display.maxLineChanged && !cm.options.lineWrapping) {
      op.adjustWidthTo = measureChar(cm, display.maxLine, display.maxLine.text.length).left + 3;
      op.maxScrollLeft = Math.max(0, display.sizer.offsetLeft + op.adjustWidthTo +
                                  scrollerCutOff - display.scroller.clientWidth);
    }

    if (op.updatedDisplay || op.selectionChanged)
      op.newSelectionNodes = drawSelection(cm);
  }

  function endOperation_W2(op) {
    var cm = op.cm;

    if (op.adjustWidthTo != null) {
      cm.display.sizer.style.minWidth = op.adjustWidthTo + "px";
      if (op.maxScrollLeft < cm.doc.scrollLeft)
        setScrollLeft(cm, Math.min(cm.display.scroller.scrollLeft, op.maxScrollLeft), true);
      cm.display.maxLineChanged = false;
    }

    if (op.newSelectionNodes)
      showSelection(cm, op.newSelectionNodes);
    if (op.updatedDisplay)
      setDocumentHeight(cm, op.barMeasure);
    if (op.updatedDisplay || op.startHeight != cm.doc.height)
      updateScrollbars(cm, op.barMeasure);

    if (op.selectionChanged) restartBlink(cm);

    if (cm.state.focused && op.updateInput)
      resetInput(cm, op.typing);
  }

  function endOperation_finish(op) {
    var cm = op.cm, display = cm.display, doc = cm.doc;

    if (op.adjustWidthTo != null && Math.abs(op.barMeasure.scrollWidth - cm.display.scroller.scrollWidth) > 1)
      updateScrollbars(cm);

    if (op.updatedDisplay) postUpdateDisplay(cm, op.update);

    // Abort mouse wheel delta measurement, when scrolling explicitly
    if (display.wheelStartX != null && (op.scrollTop != null || op.scrollLeft != null || op.scrollToPos))
      display.wheelStartX = display.wheelStartY = null;

    // Propagate the scroll position to the actual DOM scroller
    if (op.scrollTop != null && (display.scroller.scrollTop != op.scrollTop || op.forceScroll)) {
      var top = Math.max(0, Math.min(display.scroller.scrollHeight - display.scroller.clientHeight, op.scrollTop));
      display.scroller.scrollTop = display.scrollbarV.scrollTop = doc.scrollTop = top;
    }
    if (op.scrollLeft != null && (display.scroller.scrollLeft != op.scrollLeft || op.forceScroll)) {
      var left = Math.max(0, Math.min(display.scroller.scrollWidth - display.scroller.clientWidth, op.scrollLeft));
      display.scroller.scrollLeft = display.scrollbarH.scrollLeft = doc.scrollLeft = left;
      alignHorizontally(cm);
    }
    // If we need to scroll a specific position into view, do so.
    if (op.scrollToPos) {
      var coords = scrollPosIntoView(cm, clipPos(doc, op.scrollToPos.from),
                                     clipPos(doc, op.scrollToPos.to), op.scrollToPos.margin);
      if (op.scrollToPos.isCursor && cm.state.focused) maybeScrollWindow(cm, coords);
    }

    // Fire events for markers that are hidden/unidden by editing or
    // undoing
    var hidden = op.maybeHiddenMarkers, unhidden = op.maybeUnhiddenMarkers;
    if (hidden) for (var i = 0; i < hidden.length; ++i)
      if (!hidden[i].lines.length) signal(hidden[i], "hide");
    if (unhidden) for (var i = 0; i < unhidden.length; ++i)
      if (unhidden[i].lines.length) signal(unhidden[i], "unhide");

    if (display.wrapper.offsetHeight)
      doc.scrollTop = cm.display.scroller.scrollTop;

    // Apply workaround for two webkit bugs
    if (op.updatedDisplay && webkit) {
      if (cm.options.lineWrapping)
        checkForWebkitWidthBug(cm, op.barMeasure); // (Issue #2420)
      if (op.barMeasure.scrollWidth > op.barMeasure.clientWidth &&
          op.barMeasure.scrollWidth < op.barMeasure.clientWidth + 1 &&
          !hScrollbarTakesSpace(cm))
        updateScrollbars(cm); // (Issue #2562)
    }

    // Fire change events, and delayed event handlers
    if (op.changeObjs)
      signal(cm, "changes", cm, op.changeObjs);
  }

  // Run the given function in an operation
  function runInOp(cm, f) {
    if (cm.curOp) return f();
    startOperation(cm);
    try { return f(); }
    finally { endOperation(cm); }
  }
  // Wraps a function in an operation. Returns the wrapped function.
  function operation(cm, f) {
    return function() {
      if (cm.curOp) return f.apply(cm, arguments);
      startOperation(cm);
      try { return f.apply(cm, arguments); }
      finally { endOperation(cm); }
    };
  }
  // Used to add methods to editor and doc instances, wrapping them in
  // operations.
  function methodOp(f) {
    return function() {
      if (this.curOp) return f.apply(this, arguments);
      startOperation(this);
      try { return f.apply(this, arguments); }
      finally { endOperation(this); }
    };
  }
  function docMethodOp(f) {
    return function() {
      var cm = this.cm;
      if (!cm || cm.curOp) return f.apply(this, arguments);
      startOperation(cm);
      try { return f.apply(this, arguments); }
      finally { endOperation(cm); }
    };
  }

  // VIEW TRACKING

  // These objects are used to represent the visible (currently drawn)
  // part of the document. A LineView may correspond to multiple
  // logical lines, if those are connected by collapsed ranges.
  function LineView(doc, line, lineN) {
    // The starting line
    this.line = line;
    // Continuing lines, if any
    this.rest = visualLineContinued(line);
    // Number of logical lines in this visual line
    this.size = this.rest ? lineNo(lst(this.rest)) - lineN + 1 : 1;
    this.node = this.text = null;
    this.hidden = lineIsHidden(doc, line);
  }

  // Create a range of LineView objects for the given lines.
  function buildViewArray(cm, from, to) {
    var array = [], nextPos;
    for (var pos = from; pos < to; pos = nextPos) {
      var view = new LineView(cm.doc, getLine(cm.doc, pos), pos);
      nextPos = pos + view.size;
      array.push(view);
    }
    return array;
  }

  // Updates the display.view data structure for a given change to the
  // document. From and to are in pre-change coordinates. Lendiff is
  // the amount of lines added or subtracted by the change. This is
  // used for changes that span multiple lines, or change the way
  // lines are divided into visual lines. regLineChange (below)
  // registers single-line changes.
  function regChange(cm, from, to, lendiff) {
    if (from == null) from = cm.doc.first;
    if (to == null) to = cm.doc.first + cm.doc.size;
    if (!lendiff) lendiff = 0;

    var display = cm.display;
    if (lendiff && to < display.viewTo &&
        (display.updateLineNumbers == null || display.updateLineNumbers > from))
      display.updateLineNumbers = from;

    cm.curOp.viewChanged = true;

    if (from >= display.viewTo) { // Change after
      if (sawCollapsedSpans && visualLineNo(cm.doc, from) < display.viewTo)
        resetView(cm);
    } else if (to <= display.viewFrom) { // Change before
      if (sawCollapsedSpans && visualLineEndNo(cm.doc, to + lendiff) > display.viewFrom) {
        resetView(cm);
      } else {
        display.viewFrom += lendiff;
        display.viewTo += lendiff;
      }
    } else if (from <= display.viewFrom && to >= display.viewTo) { // Full overlap
      resetView(cm);
    } else if (from <= display.viewFrom) { // Top overlap
      var cut = viewCuttingPoint(cm, to, to + lendiff, 1);
      if (cut) {
        display.view = display.view.slice(cut.index);
        display.viewFrom = cut.lineN;
        display.viewTo += lendiff;
      } else {
        resetView(cm);
      }
    } else if (to >= display.viewTo) { // Bottom overlap
      var cut = viewCuttingPoint(cm, from, from, -1);
      if (cut) {
        display.view = display.view.slice(0, cut.index);
        display.viewTo = cut.lineN;
      } else {
        resetView(cm);
      }
    } else { // Gap in the middle
      var cutTop = viewCuttingPoint(cm, from, from, -1);
      var cutBot = viewCuttingPoint(cm, to, to + lendiff, 1);
      if (cutTop && cutBot) {
        display.view = display.view.slice(0, cutTop.index)
          .concat(buildViewArray(cm, cutTop.lineN, cutBot.lineN))
          .concat(display.view.slice(cutBot.index));
        display.viewTo += lendiff;
      } else {
        resetView(cm);
      }
    }

    var ext = display.externalMeasured;
    if (ext) {
      if (to < ext.lineN)
        ext.lineN += lendiff;
      else if (from < ext.lineN + ext.size)
        display.externalMeasured = null;
    }
  }

  // Register a change to a single line. Type must be one of "text",
  // "gutter", "class", "widget"
  function regLineChange(cm, line, type) {
    cm.curOp.viewChanged = true;
    var display = cm.display, ext = cm.display.externalMeasured;
    if (ext && line >= ext.lineN && line < ext.lineN + ext.size)
      display.externalMeasured = null;

    if (line < display.viewFrom || line >= display.viewTo) return;
    var lineView = display.view[findViewIndex(cm, line)];
    if (lineView.node == null) return;
    var arr = lineView.changes || (lineView.changes = []);
    if (indexOf(arr, type) == -1) arr.push(type);
  }

  // Clear the view.
  function resetView(cm) {
    cm.display.viewFrom = cm.display.viewTo = cm.doc.first;
    cm.display.view = [];
    cm.display.viewOffset = 0;
  }

  // Find the view element corresponding to a given line. Return null
  // when the line isn't visible.
  function findViewIndex(cm, n) {
    if (n >= cm.display.viewTo) return null;
    n -= cm.display.viewFrom;
    if (n < 0) return null;
    var view = cm.display.view;
    for (var i = 0; i < view.length; i++) {
      n -= view[i].size;
      if (n < 0) return i;
    }
  }

  function viewCuttingPoint(cm, oldN, newN, dir) {
    var index = findViewIndex(cm, oldN), diff, view = cm.display.view;
    if (!sawCollapsedSpans || newN == cm.doc.first + cm.doc.size)
      return {index: index, lineN: newN};
    for (var i = 0, n = cm.display.viewFrom; i < index; i++)
      n += view[i].size;
    if (n != oldN) {
      if (dir > 0) {
        if (index == view.length - 1) return null;
        diff = (n + view[index].size) - oldN;
        index++;
      } else {
        diff = n - oldN;
      }
      oldN += diff; newN += diff;
    }
    while (visualLineNo(cm.doc, newN) != newN) {
      if (index == (dir < 0 ? 0 : view.length - 1)) return null;
      newN += dir * view[index - (dir < 0 ? 1 : 0)].size;
      index += dir;
    }
    return {index: index, lineN: newN};
  }

  // Force the view to cover a given range, adding empty view element
  // or clipping off existing ones as needed.
  function adjustView(cm, from, to) {
    var display = cm.display, view = display.view;
    if (view.length == 0 || from >= display.viewTo || to <= display.viewFrom) {
      display.view = buildViewArray(cm, from, to);
      display.viewFrom = from;
    } else {
      if (display.viewFrom > from)
        display.view = buildViewArray(cm, from, display.viewFrom).concat(display.view);
      else if (display.viewFrom < from)
        display.view = display.view.slice(findViewIndex(cm, from));
      display.viewFrom = from;
      if (display.viewTo < to)
        display.view = display.view.concat(buildViewArray(cm, display.viewTo, to));
      else if (display.viewTo > to)
        display.view = display.view.slice(0, findViewIndex(cm, to));
    }
    display.viewTo = to;
  }

  // Count the number of lines in the view whose DOM representation is
  // out of date (or nonexistent).
  function countDirtyView(cm) {
    var view = cm.display.view, dirty = 0;
    for (var i = 0; i < view.length; i++) {
      var lineView = view[i];
      if (!lineView.hidden && (!lineView.node || lineView.changes)) ++dirty;
    }
    return dirty;
  }

  // INPUT HANDLING

  // Poll for input changes, using the normal rate of polling. This
  // runs as long as the editor is focused.
  function slowPoll(cm) {
    if (cm.display.pollingFast) return;
    cm.display.poll.set(cm.options.pollInterval, function() {
      readInput(cm);
      if (cm.state.focused) slowPoll(cm);
    });
  }

  // When an event has just come in that is likely to add or change
  // something in the input textarea, we poll faster, to ensure that
  // the change appears on the screen quickly.
  function fastPoll(cm) {
    var missed = false;
    cm.display.pollingFast = true;
    function p() {
      var changed = readInput(cm);
      if (!changed && !missed) {missed = true; cm.display.poll.set(60, p);}
      else {cm.display.pollingFast = false; slowPoll(cm);}
    }
    cm.display.poll.set(20, p);
  }

  // This will be set to an array of strings when copying, so that,
  // when pasting, we know what kind of selections the copied text
  // was made out of.
  var lastCopied = null;

  // Read input from the textarea, and update the document to match.
  // When something is selected, it is present in the textarea, and
  // selected (unless it is huge, in which case a placeholder is
  // used). When nothing is selected, the cursor sits after previously
  // seen text (can be empty), which is stored in prevInput (we must
  // not reset the textarea when typing, because that breaks IME).
  function readInput(cm) {
    var input = cm.display.input, prevInput = cm.display.prevInput, doc = cm.doc;
    // Since this is called a *lot*, try to bail out as cheaply as
    // possible when it is clear that nothing happened. hasSelection
    // will be the case when there is a lot of text in the textarea,
    // in which case reading its value would be expensive.
    if (!cm.state.focused || (hasSelection(input) && !prevInput) || isReadOnly(cm) || cm.options.disableInput)
      return false;
    // See paste handler for more on the fakedLastChar kludge
    if (cm.state.pasteIncoming && cm.state.fakedLastChar) {
      input.value = input.value.substring(0, input.value.length - 1);
      cm.state.fakedLastChar = false;
    }
    var text = input.value;
    // If nothing changed, bail.
    if (text == prevInput && !cm.somethingSelected()) return false;
    // Work around nonsensical selection resetting in IE9/10, and
    // inexplicable appearance of private area unicode characters on
    // some key combos in Mac (#2689).
    if (ie && ie_version >= 9 && cm.display.inputHasSelection === text ||
        mac && /[\uf700-\uf7ff]/.test(text)) {
      resetInput(cm);
      return false;
    }

    var withOp = !cm.curOp;
    if (withOp) startOperation(cm);
    cm.display.shift = false;

    if (text.charCodeAt(0) == 0x200b && doc.sel == cm.display.selForContextMenu && !prevInput)
      prevInput = "\u200b";
    // Find the part of the input that is actually new
    var same = 0, l = Math.min(prevInput.length, text.length);
    while (same < l && prevInput.charCodeAt(same) == text.charCodeAt(same)) ++same;
    var inserted = text.slice(same), textLines = splitLines(inserted);

    // When pasing N lines into N selections, insert one line per selection
    var multiPaste = null;
    if (cm.state.pasteIncoming && doc.sel.ranges.length > 1) {
      if (lastCopied && lastCopied.join("\n") == inserted)
        multiPaste = doc.sel.ranges.length % lastCopied.length == 0 && map(lastCopied, splitLines);
      else if (textLines.length == doc.sel.ranges.length)
        multiPaste = map(textLines, function(l) { return [l]; });
    }

    // Normal behavior is to insert the new text into every selection
    for (var i = doc.sel.ranges.length - 1; i >= 0; i--) {
      var range = doc.sel.ranges[i];
      var from = range.from(), to = range.to();
      // Handle deletion
      if (same < prevInput.length)
        from = Pos(from.line, from.ch - (prevInput.length - same));
      // Handle overwrite
      else if (cm.state.overwrite && range.empty() && !cm.state.pasteIncoming)
        to = Pos(to.line, Math.min(getLine(doc, to.line).text.length, to.ch + lst(textLines).length));
      var updateInput = cm.curOp.updateInput;
      var changeEvent = {from: from, to: to, text: multiPaste ? multiPaste[i % multiPaste.length] : textLines,
                         origin: cm.state.pasteIncoming ? "paste" : cm.state.cutIncoming ? "cut" : "+input"};
      makeChange(cm.doc, changeEvent);
      signalLater(cm, "inputRead", cm, changeEvent);
      // When an 'electric' character is inserted, immediately trigger a reindent
      if (inserted && !cm.state.pasteIncoming && cm.options.electricChars &&
          cm.options.smartIndent && range.head.ch < 100 &&
          (!i || doc.sel.ranges[i - 1].head.line != range.head.line)) {
        var mode = cm.getModeAt(range.head);
        var end = changeEnd(changeEvent);
        if (mode.electricChars) {
          for (var j = 0; j < mode.electricChars.length; j++)
            if (inserted.indexOf(mode.electricChars.charAt(j)) > -1) {
              indentLine(cm, end.line, "smart");
              break;
            }
        } else if (mode.electricInput) {
          if (mode.electricInput.test(getLine(doc, end.line).text.slice(0, end.ch)))
            indentLine(cm, end.line, "smart");
        }
      }
    }
    ensureCursorVisible(cm);
    cm.curOp.updateInput = updateInput;
    cm.curOp.typing = true;

    // Don't leave long text in the textarea, since it makes further polling slow
    if (text.length > 1000 || text.indexOf("\n") > -1) input.value = cm.display.prevInput = "";
    else cm.display.prevInput = text;
    if (withOp) endOperation(cm);
    cm.state.pasteIncoming = cm.state.cutIncoming = false;
    return true;
  }

  // Reset the input to correspond to the selection (or to be empty,
  // when not typing and nothing is selected)
  function resetInput(cm, typing) {
    var minimal, selected, doc = cm.doc;
    if (cm.somethingSelected()) {
      cm.display.prevInput = "";
      var range = doc.sel.primary();
      minimal = hasCopyEvent &&
        (range.to().line - range.from().line > 100 || (selected = cm.getSelection()).length > 1000);
      var content = minimal ? "-" : selected || cm.getSelection();
      cm.display.input.value = content;
      if (cm.state.focused) selectInput(cm.display.input);
      if (ie && ie_version >= 9) cm.display.inputHasSelection = content;
    } else if (!typing) {
      cm.display.prevInput = cm.display.input.value = "";
      if (ie && ie_version >= 9) cm.display.inputHasSelection = null;
    }
    cm.display.inaccurateSelection = minimal;
  }

  function focusInput(cm) {
    if (cm.options.readOnly != "nocursor" && (!mobile || activeElt() != cm.display.input))
      cm.display.input.focus();
  }

  function ensureFocus(cm) {
    if (!cm.state.focused) { focusInput(cm); onFocus(cm); }
  }

  function isReadOnly(cm) {
    return cm.options.readOnly || cm.doc.cantEdit;
  }

  // EVENT HANDLERS

  // Attach the necessary event handlers when initializing the editor
  function registerEventHandlers(cm) {
    var d = cm.display;
    on(d.scroller, "mousedown", operation(cm, onMouseDown));
    // Older IE's will not fire a second mousedown for a double click
    if (ie && ie_version < 11)
      on(d.scroller, "dblclick", operation(cm, function(e) {
        if (signalDOMEvent(cm, e)) return;
        var pos = posFromMouse(cm, e);
        if (!pos || clickInGutter(cm, e) || eventInWidget(cm.display, e)) return;
        e_preventDefault(e);
        var word = cm.findWordAt(pos);
        extendSelection(cm.doc, word.anchor, word.head);
      }));
    else
      on(d.scroller, "dblclick", function(e) { signalDOMEvent(cm, e) || e_preventDefault(e); });
    // Prevent normal selection in the editor (we handle our own)
    on(d.lineSpace, "selectstart", function(e) {
      if (!eventInWidget(d, e)) e_preventDefault(e);
    });
    // Some browsers fire contextmenu *after* opening the menu, at
    // which point we can't mess with it anymore. Context menu is
    // handled in onMouseDown for these browsers.
    if (!captureRightClick) on(d.scroller, "contextmenu", function(e) {onContextMenu(cm, e);});

    // Sync scrolling between fake scrollbars and real scrollable
    // area, ensure viewport is updated when scrolling.
    on(d.scroller, "scroll", function() {
      if (d.scroller.clientHeight) {
        setScrollTop(cm, d.scroller.scrollTop);
        setScrollLeft(cm, d.scroller.scrollLeft, true);
        signal(cm, "scroll", cm);
      }
    });
    on(d.scrollbarV, "scroll", function() {
      if (d.scroller.clientHeight) setScrollTop(cm, d.scrollbarV.scrollTop);
    });
    on(d.scrollbarH, "scroll", function() {
      if (d.scroller.clientHeight) setScrollLeft(cm, d.scrollbarH.scrollLeft);
    });

    // Listen to wheel events in order to try and update the viewport on time.
    on(d.scroller, "mousewheel", function(e){onScrollWheel(cm, e);});
    on(d.scroller, "DOMMouseScroll", function(e){onScrollWheel(cm, e);});

    // Prevent clicks in the scrollbars from killing focus
    function reFocus() { if (cm.state.focused) setTimeout(bind(focusInput, cm), 0); }
    on(d.scrollbarH, "mousedown", reFocus);
    on(d.scrollbarV, "mousedown", reFocus);
    // Prevent wrapper from ever scrolling
    on(d.wrapper, "scroll", function() { d.wrapper.scrollTop = d.wrapper.scrollLeft = 0; });

    on(d.input, "keyup", function(e) { onKeyUp.call(cm, e); });
    on(d.input, "input", function() {
      if (ie && ie_version >= 9 && cm.display.inputHasSelection) cm.display.inputHasSelection = null;
      fastPoll(cm);
    });
    on(d.input, "keydown", operation(cm, onKeyDown));
    on(d.input, "keypress", operation(cm, onKeyPress));
    on(d.input, "focus", bind(onFocus, cm));
    on(d.input, "blur", bind(onBlur, cm));

    function drag_(e) {
      if (!signalDOMEvent(cm, e)) e_stop(e);
    }
    if (cm.options.dragDrop) {
      on(d.scroller, "dragstart", function(e){onDragStart(cm, e);});
      on(d.scroller, "dragenter", drag_);
      on(d.scroller, "dragover", drag_);
      on(d.scroller, "drop", operation(cm, onDrop));
    }
    on(d.scroller, "paste", function(e) {
      if (eventInWidget(d, e)) return;
      cm.state.pasteIncoming = true;
      focusInput(cm);
      fastPoll(cm);
    });
    on(d.input, "paste", function() {
      // Workaround for webkit bug https://bugs.webkit.org/show_bug.cgi?id=90206
      // Add a char to the end of textarea before paste occur so that
      // selection doesn't span to the end of textarea.
      if (webkit && !cm.state.fakedLastChar && !(new Date - cm.state.lastMiddleDown < 200)) {
        var start = d.input.selectionStart, end = d.input.selectionEnd;
        d.input.value += "$";
        // The selection end needs to be set before the start, otherwise there
        // can be an intermediate non-empty selection between the two, which
        // can override the middle-click paste buffer on linux and cause the
        // wrong thing to get pasted.
        d.input.selectionEnd = end;
        d.input.selectionStart = start;
        cm.state.fakedLastChar = true;
      }
      cm.state.pasteIncoming = true;
      fastPoll(cm);
    });

    function prepareCopyCut(e) {
      if (cm.somethingSelected()) {
        lastCopied = cm.getSelections();
        if (d.inaccurateSelection) {
          d.prevInput = "";
          d.inaccurateSelection = false;
          d.input.value = lastCopied.join("\n");
          selectInput(d.input);
        }
      } else {
        var text = [], ranges = [];
        for (var i = 0; i < cm.doc.sel.ranges.length; i++) {
          var line = cm.doc.sel.ranges[i].head.line;
          var lineRange = {anchor: Pos(line, 0), head: Pos(line + 1, 0)};
          ranges.push(lineRange);
          text.push(cm.getRange(lineRange.anchor, lineRange.head));
        }
        if (e.type == "cut") {
          cm.setSelections(ranges, null, sel_dontScroll);
        } else {
          d.prevInput = "";
          d.input.value = text.join("\n");
          selectInput(d.input);
        }
        lastCopied = text;
      }
      if (e.type == "cut") cm.state.cutIncoming = true;
    }
    on(d.input, "cut", prepareCopyCut);
    on(d.input, "copy", prepareCopyCut);

    // Needed to handle Tab key in KHTML
    if (khtml) on(d.sizer, "mouseup", function() {
      if (activeElt() == d.input) d.input.blur();
      focusInput(cm);
    });
  }

  // Called when the window resizes
  function onResize(cm) {
    // Might be a text scaling operation, clear size caches.
    var d = cm.display;
    d.cachedCharWidth = d.cachedTextHeight = d.cachedPaddingH = null;
    cm.setSize();
  }

  // MOUSE EVENTS

  // Return true when the given mouse event happened in a widget
  function eventInWidget(display, e) {
    for (var n = e_target(e); n != display.wrapper; n = n.parentNode) {
      if (!n || n.ignoreEvents || n.parentNode == display.sizer && n != display.mover) return true;
    }
  }

  // Given a mouse event, find the corresponding position. If liberal
  // is false, it checks whether a gutter or scrollbar was clicked,
  // and returns null if it was. forRect is used by rectangular
  // selections, and tries to estimate a character position even for
  // coordinates beyond the right of the text.
  function posFromMouse(cm, e, liberal, forRect) {
    var display = cm.display;
    if (!liberal) {
      var target = e_target(e);
      if (target == display.scrollbarH || target == display.scrollbarV ||
          target == display.scrollbarFiller || target == display.gutterFiller) return null;
    }
    var x, y, space = display.lineSpace.getBoundingClientRect();
    // Fails unpredictably on IE[67] when mouse is dragged around quickly.
    try { x = e.clientX - space.left; y = e.clientY - space.top; }
    catch (e) { return null; }
    var coords = coordsChar(cm, x, y), line;
    if (forRect && coords.xRel == 1 && (line = getLine(cm.doc, coords.line).text).length == coords.ch) {
      var colDiff = countColumn(line, line.length, cm.options.tabSize) - line.length;
      coords = Pos(coords.line, Math.max(0, Math.round((x - paddingH(cm.display).left) / charWidth(cm.display)) - colDiff));
    }
    return coords;
  }

  // A mouse down can be a single click, double click, triple click,
  // start of selection drag, start of text drag, new cursor
  // (ctrl-click), rectangle drag (alt-drag), or xwin
  // middle-click-paste. Or it might be a click on something we should
  // not interfere with, such as a scrollbar or widget.
  function onMouseDown(e) {
    if (signalDOMEvent(this, e)) return;
    var cm = this, display = cm.display;
    display.shift = e.shiftKey;

    if (eventInWidget(display, e)) {
      if (!webkit) {
        // Briefly turn off draggability, to allow widgets to do
        // normal dragging things.
        display.scroller.draggable = false;
        setTimeout(function(){display.scroller.draggable = true;}, 100);
      }
      return;
    }
    if (clickInGutter(cm, e)) return;
    var start = posFromMouse(cm, e);
    window.focus();

    switch (e_button(e)) {
    case 1:
      if (start)
        leftButtonDown(cm, e, start);
      else if (e_target(e) == display.scroller)
        e_preventDefault(e);
      break;
    case 2:
      if (webkit) cm.state.lastMiddleDown = +new Date;
      if (start) extendSelection(cm.doc, start);
      setTimeout(bind(focusInput, cm), 20);
      e_preventDefault(e);
      break;
    case 3:
      if (captureRightClick) onContextMenu(cm, e);
      break;
    }
  }

  var lastClick, lastDoubleClick;
  function leftButtonDown(cm, e, start) {
    setTimeout(bind(ensureFocus, cm), 0);

    var now = +new Date, type;
    if (lastDoubleClick && lastDoubleClick.time > now - 400 && cmp(lastDoubleClick.pos, start) == 0) {
      type = "triple";
    } else if (lastClick && lastClick.time > now - 400 && cmp(lastClick.pos, start) == 0) {
      type = "double";
      lastDoubleClick = {time: now, pos: start};
    } else {
      type = "single";
      lastClick = {time: now, pos: start};
    }

    var sel = cm.doc.sel, modifier = mac ? e.metaKey : e.ctrlKey;
    if (cm.options.dragDrop && dragAndDrop && !isReadOnly(cm) &&
        type == "single" && sel.contains(start) > -1 && sel.somethingSelected())
      leftButtonStartDrag(cm, e, start, modifier);
    else
      leftButtonSelect(cm, e, start, type, modifier);
  }

  // Start a text drag. When it ends, see if any dragging actually
  // happen, and treat as a click if it didn't.
  function leftButtonStartDrag(cm, e, start, modifier) {
    var display = cm.display;
    var dragEnd = operation(cm, function(e2) {
      if (webkit) display.scroller.draggable = false;
      cm.state.draggingText = false;
      off(document, "mouseup", dragEnd);
      off(display.scroller, "drop", dragEnd);
      if (Math.abs(e.clientX - e2.clientX) + Math.abs(e.clientY - e2.clientY) < 10) {
        e_preventDefault(e2);
        if (!modifier)
          extendSelection(cm.doc, start);
        focusInput(cm);
        // Work around unexplainable focus problem in IE9 (#2127)
        if (ie && ie_version == 9)
          setTimeout(function() {document.body.focus(); focusInput(cm);}, 20);
      }
    });
    // Let the drag handler handle this.
    if (webkit) display.scroller.draggable = true;
    cm.state.draggingText = dragEnd;
    // IE's approach to draggable
    if (display.scroller.dragDrop) display.scroller.dragDrop();
    on(document, "mouseup", dragEnd);
    on(display.scroller, "drop", dragEnd);
  }

  // Normal selection, as opposed to text dragging.
  function leftButtonSelect(cm, e, start, type, addNew) {
    var display = cm.display, doc = cm.doc;
    e_preventDefault(e);

    var ourRange, ourIndex, startSel = doc.sel;
    if (addNew && !e.shiftKey) {
      ourIndex = doc.sel.contains(start);
      if (ourIndex > -1)
        ourRange = doc.sel.ranges[ourIndex];
      else
        ourRange = new Range(start, start);
    } else {
      ourRange = doc.sel.primary();
    }

    if (e.altKey) {
      type = "rect";
      if (!addNew) ourRange = new Range(start, start);
      start = posFromMouse(cm, e, true, true);
      ourIndex = -1;
    } else if (type == "double") {
      var word = cm.findWordAt(start);
      if (cm.display.shift || doc.extend)
        ourRange = extendRange(doc, ourRange, word.anchor, word.head);
      else
        ourRange = word;
    } else if (type == "triple") {
      var line = new Range(Pos(start.line, 0), clipPos(doc, Pos(start.line + 1, 0)));
      if (cm.display.shift || doc.extend)
        ourRange = extendRange(doc, ourRange, line.anchor, line.head);
      else
        ourRange = line;
    } else {
      ourRange = extendRange(doc, ourRange, start);
    }

    if (!addNew) {
      ourIndex = 0;
      setSelection(doc, new Selection([ourRange], 0), sel_mouse);
      startSel = doc.sel;
    } else if (ourIndex > -1) {
      replaceOneSelection(doc, ourIndex, ourRange, sel_mouse);
    } else {
      ourIndex = doc.sel.ranges.length;
      setSelection(doc, normalizeSelection(doc.sel.ranges.concat([ourRange]), ourIndex),
                   {scroll: false, origin: "*mouse"});
    }

    var lastPos = start;
    function extendTo(pos) {
      if (cmp(lastPos, pos) == 0) return;
      lastPos = pos;

      if (type == "rect") {
        var ranges = [], tabSize = cm.options.tabSize;
        var startCol = countColumn(getLine(doc, start.line).text, start.ch, tabSize);
        var posCol = countColumn(getLine(doc, pos.line).text, pos.ch, tabSize);
        var left = Math.min(startCol, posCol), right = Math.max(startCol, posCol);
        for (var line = Math.min(start.line, pos.line), end = Math.min(cm.lastLine(), Math.max(start.line, pos.line));
             line <= end; line++) {
          var text = getLine(doc, line).text, leftPos = findColumn(text, left, tabSize);
          if (left == right)
            ranges.push(new Range(Pos(line, leftPos), Pos(line, leftPos)));
          else if (text.length > leftPos)
            ranges.push(new Range(Pos(line, leftPos), Pos(line, findColumn(text, right, tabSize))));
        }
        if (!ranges.length) ranges.push(new Range(start, start));
        setSelection(doc, normalizeSelection(startSel.ranges.slice(0, ourIndex).concat(ranges), ourIndex),
                     {origin: "*mouse", scroll: false});
        cm.scrollIntoView(pos);
      } else {
        var oldRange = ourRange;
        var anchor = oldRange.anchor, head = pos;
        if (type != "single") {
          if (type == "double")
            var range = cm.findWordAt(pos);
          else
            var range = new Range(Pos(pos.line, 0), clipPos(doc, Pos(pos.line + 1, 0)));
          if (cmp(range.anchor, anchor) > 0) {
            head = range.head;
            anchor = minPos(oldRange.from(), range.anchor);
          } else {
            head = range.anchor;
            anchor = maxPos(oldRange.to(), range.head);
          }
        }
        var ranges = startSel.ranges.slice(0);
        ranges[ourIndex] = new Range(clipPos(doc, anchor), head);
        setSelection(doc, normalizeSelection(ranges, ourIndex), sel_mouse);
      }
    }

    var editorSize = display.wrapper.getBoundingClientRect();
    // Used to ensure timeout re-tries don't fire when another extend
    // happened in the meantime (clearTimeout isn't reliable -- at
    // least on Chrome, the timeouts still happen even when cleared,
    // if the clear happens after their scheduled firing time).
    var counter = 0;

    function extend(e) {
      var curCount = ++counter;
      var cur = posFromMouse(cm, e, true, type == "rect");
      if (!cur) return;
      if (cmp(cur, lastPos) != 0) {
        ensureFocus(cm);
        extendTo(cur);
        var visible = visibleLines(display, doc);
        if (cur.line >= visible.to || cur.line < visible.from)
          setTimeout(operation(cm, function(){if (counter == curCount) extend(e);}), 150);
      } else {
        var outside = e.clientY < editorSize.top ? -20 : e.clientY > editorSize.bottom ? 20 : 0;
        if (outside) setTimeout(operation(cm, function() {
          if (counter != curCount) return;
          display.scroller.scrollTop += outside;
          extend(e);
        }), 50);
      }
    }

    function done(e) {
      counter = Infinity;
      e_preventDefault(e);
      focusInput(cm);
      off(document, "mousemove", move);
      off(document, "mouseup", up);
      doc.history.lastSelOrigin = null;
    }

    var move = operation(cm, function(e) {
      if (!e_button(e)) done(e);
      else extend(e);
    });
    var up = operation(cm, done);
    on(document, "mousemove", move);
    on(document, "mouseup", up);
  }

  // Determines whether an event happened in the gutter, and fires the
  // handlers for the corresponding event.
  function gutterEvent(cm, e, type, prevent, signalfn) {
    try { var mX = e.clientX, mY = e.clientY; }
    catch(e) { return false; }
    if (mX >= Math.floor(cm.display.gutters.getBoundingClientRect().right)) return false;
    if (prevent) e_preventDefault(e);

    var display = cm.display;
    var lineBox = display.lineDiv.getBoundingClientRect();

    if (mY > lineBox.bottom || !hasHandler(cm, type)) return e_defaultPrevented(e);
    mY -= lineBox.top - display.viewOffset;

    for (var i = 0; i < cm.options.gutters.length; ++i) {
      var g = display.gutters.childNodes[i];
      if (g && g.getBoundingClientRect().right >= mX) {
        var line = lineAtHeight(cm.doc, mY);
        var gutter = cm.options.gutters[i];
        signalfn(cm, type, cm, line, gutter, e);
        return e_defaultPrevented(e);
      }
    }
  }

  function clickInGutter(cm, e) {
    return gutterEvent(cm, e, "gutterClick", true, signalLater);
  }

  // Kludge to work around strange IE behavior where it'll sometimes
  // re-fire a series of drag-related events right after the drop (#1551)
  var lastDrop = 0;

  function onDrop(e) {
    var cm = this;
    if (signalDOMEvent(cm, e) || eventInWidget(cm.display, e))
      return;
    e_preventDefault(e);
    if (ie) lastDrop = +new Date;
    var pos = posFromMouse(cm, e, true), files = e.dataTransfer.files;
    if (!pos || isReadOnly(cm)) return;
    // Might be a file drop, in which case we simply extract the text
    // and insert it.
    if (files && files.length && window.FileReader && window.File) {
      var n = files.length, text = Array(n), read = 0;
      var loadFile = function(file, i) {
        var reader = new FileReader;
        reader.onload = operation(cm, function() {
          text[i] = reader.result;
          if (++read == n) {
            pos = clipPos(cm.doc, pos);
            var change = {from: pos, to: pos, text: splitLines(text.join("\n")), origin: "paste"};
            makeChange(cm.doc, change);
            setSelectionReplaceHistory(cm.doc, simpleSelection(pos, changeEnd(change)));
          }
        });
        reader.readAsText(file);
      };
      for (var i = 0; i < n; ++i) loadFile(files[i], i);
    } else { // Normal drop
      // Don't do a replace if the drop happened inside of the selected text.
      if (cm.state.draggingText && cm.doc.sel.contains(pos) > -1) {
        cm.state.draggingText(e);
        // Ensure the editor is re-focused
        setTimeout(bind(focusInput, cm), 20);
        return;
      }
      try {
        var text = e.dataTransfer.getData("Text");
        if (text) {
          if (cm.state.draggingText && !(mac ? e.metaKey : e.ctrlKey))
            var selected = cm.listSelections();
          setSelectionNoUndo(cm.doc, simpleSelection(pos, pos));
          if (selected) for (var i = 0; i < selected.length; ++i)
            replaceRange(cm.doc, "", selected[i].anchor, selected[i].head, "drag");
          cm.replaceSelection(text, "around", "paste");
          focusInput(cm);
        }
      }
      catch(e){}
    }
  }

  function onDragStart(cm, e) {
    if (ie && (!cm.state.draggingText || +new Date - lastDrop < 100)) { e_stop(e); return; }
    if (signalDOMEvent(cm, e) || eventInWidget(cm.display, e)) return;

    e.dataTransfer.setData("Text", cm.getSelection());

    // Use dummy image instead of default browsers image.
    // Recent Safari (~6.0.2) have a tendency to segfault when this happens, so we don't do it there.
    if (e.dataTransfer.setDragImage && !safari) {
      var img = elt("img", null, null, "position: fixed; left: 0; top: 0;");
      img.src = "data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==";
      if (presto) {
        img.width = img.height = 1;
        cm.display.wrapper.appendChild(img);
        // Force a relayout, or Opera won't use our image for some obscure reason
        img._top = img.offsetTop;
      }
      e.dataTransfer.setDragImage(img, 0, 0);
      if (presto) img.parentNode.removeChild(img);
    }
  }

  // SCROLL EVENTS

  // Sync the scrollable area and scrollbars, ensure the viewport
  // covers the visible area.
  function setScrollTop(cm, val) {
    if (Math.abs(cm.doc.scrollTop - val) < 2) return;
    cm.doc.scrollTop = val;
    if (!gecko) updateDisplaySimple(cm, {top: val});
    if (cm.display.scroller.scrollTop != val) cm.display.scroller.scrollTop = val;
    if (cm.display.scrollbarV.scrollTop != val) cm.display.scrollbarV.scrollTop = val;
    if (gecko) updateDisplaySimple(cm);
    startWorker(cm, 100);
  }
  // Sync scroller and scrollbar, ensure the gutter elements are
  // aligned.
  function setScrollLeft(cm, val, isScroller) {
    if (isScroller ? val == cm.doc.scrollLeft : Math.abs(cm.doc.scrollLeft - val) < 2) return;
    val = Math.min(val, cm.display.scroller.scrollWidth - cm.display.scroller.clientWidth);
    cm.doc.scrollLeft = val;
    alignHorizontally(cm);
    if (cm.display.scroller.scrollLeft != val) cm.display.scroller.scrollLeft = val;
    if (cm.display.scrollbarH.scrollLeft != val) cm.display.scrollbarH.scrollLeft = val;
  }

  // Since the delta values reported on mouse wheel events are
  // unstandardized between browsers and even browser versions, and
  // generally horribly unpredictable, this code starts by measuring
  // the scroll effect that the first few mouse wheel events have,
  // and, from that, detects the way it can convert deltas to pixel
  // offsets afterwards.
  //
  // The reason we want to know the amount a wheel event will scroll
  // is that it gives us a chance to update the display before the
  // actual scrolling happens, reducing flickering.

  var wheelSamples = 0, wheelPixelsPerUnit = null;
  // Fill in a browser-detected starting value on browsers where we
  // know one. These don't have to be accurate -- the result of them
  // being wrong would just be a slight flicker on the first wheel
  // scroll (if it is large enough).
  if (ie) wheelPixelsPerUnit = -.53;
  else if (gecko) wheelPixelsPerUnit = 15;
  else if (chrome) wheelPixelsPerUnit = -.7;
  else if (safari) wheelPixelsPerUnit = -1/3;

  function onScrollWheel(cm, e) {
    var dx = e.wheelDeltaX, dy = e.wheelDeltaY;
    if (dx == null && e.detail && e.axis == e.HORIZONTAL_AXIS) dx = e.detail;
    if (dy == null && e.detail && e.axis == e.VERTICAL_AXIS) dy = e.detail;
    else if (dy == null) dy = e.wheelDelta;

    var display = cm.display, scroll = display.scroller;
    // Quit if there's nothing to scroll here
    if (!(dx && scroll.scrollWidth > scroll.clientWidth ||
          dy && scroll.scrollHeight > scroll.clientHeight)) return;

    // Webkit browsers on OS X abort momentum scrolls when the target
    // of the scroll event is removed from the scrollable element.
    // This hack (see related code in patchDisplay) makes sure the
    // element is kept around.
    if (dy && mac && webkit) {
      outer: for (var cur = e.target, view = display.view; cur != scroll; cur = cur.parentNode) {
        for (var i = 0; i < view.length; i++) {
          if (view[i].node == cur) {
            cm.display.currentWheelTarget = cur;
            break outer;
          }
        }
      }
    }

    // On some browsers, horizontal scrolling will cause redraws to
    // happen before the gutter has been realigned, causing it to
    // wriggle around in a most unseemly way. When we have an
    // estimated pixels/delta value, we just handle horizontal
    // scrolling entirely here. It'll be slightly off from native, but
    // better than glitching out.
    if (dx && !gecko && !presto && wheelPixelsPerUnit != null) {
      if (dy)
        setScrollTop(cm, Math.max(0, Math.min(scroll.scrollTop + dy * wheelPixelsPerUnit, scroll.scrollHeight - scroll.clientHeight)));
      setScrollLeft(cm, Math.max(0, Math.min(scroll.scrollLeft + dx * wheelPixelsPerUnit, scroll.scrollWidth - scroll.clientWidth)));
      e_preventDefault(e);
      display.wheelStartX = null; // Abort measurement, if in progress
      return;
    }

    // 'Project' the visible viewport to cover the area that is being
    // scrolled into view (if we know enough to estimate it).
    if (dy && wheelPixelsPerUnit != null) {
      var pixels = dy * wheelPixelsPerUnit;
      var top = cm.doc.scrollTop, bot = top + display.wrapper.clientHeight;
      if (pixels < 0) top = Math.max(0, top + pixels - 50);
      else bot = Math.min(cm.doc.height, bot + pixels + 50);
      updateDisplaySimple(cm, {top: top, bottom: bot});
    }

    if (wheelSamples < 20) {
      if (display.wheelStartX == null) {
        display.wheelStartX = scroll.scrollLeft; display.wheelStartY = scroll.scrollTop;
        display.wheelDX = dx; display.wheelDY = dy;
        setTimeout(function() {
          if (display.wheelStartX == null) return;
          var movedX = scroll.scrollLeft - display.wheelStartX;
          var movedY = scroll.scrollTop - display.wheelStartY;
          var sample = (movedY && display.wheelDY && movedY / display.wheelDY) ||
            (movedX && display.wheelDX && movedX / display.wheelDX);
          display.wheelStartX = display.wheelStartY = null;
          if (!sample) return;
          wheelPixelsPerUnit = (wheelPixelsPerUnit * wheelSamples + sample) / (wheelSamples + 1);
          ++wheelSamples;
        }, 200);
      } else {
        display.wheelDX += dx; display.wheelDY += dy;
      }
    }
  }

  // KEY EVENTS

  // Run a handler that was bound to a key.
  function doHandleBinding(cm, bound, dropShift) {
    if (typeof bound == "string") {
      bound = commands[bound];
      if (!bound) return false;
    }
    // Ensure previous input has been read, so that the handler sees a
    // consistent view of the document
    if (cm.display.pollingFast && readInput(cm)) cm.display.pollingFast = false;
    var prevShift = cm.display.shift, done = false;
    try {
      if (isReadOnly(cm)) cm.state.suppressEdits = true;
      if (dropShift) cm.display.shift = false;
      done = bound(cm) != Pass;
    } finally {
      cm.display.shift = prevShift;
      cm.state.suppressEdits = false;
    }
    return done;
  }

  // Collect the currently active keymaps.
  function allKeyMaps(cm) {
    var maps = cm.state.keyMaps.slice(0);
    if (cm.options.extraKeys) maps.push(cm.options.extraKeys);
    maps.push(cm.options.keyMap);
    return maps;
  }

  var maybeTransition;
  // Handle a key from the keydown event.
  function handleKeyBinding(cm, e) {
    // Handle automatic keymap transitions
    var startMap = getKeyMap(cm.options.keyMap), next = startMap.auto;
    clearTimeout(maybeTransition);
    if (next && !isModifierKey(e)) maybeTransition = setTimeout(function() {
      if (getKeyMap(cm.options.keyMap) == startMap) {
        cm.options.keyMap = (next.call ? next.call(null, cm) : next);
        keyMapChanged(cm);
      }
    }, 50);

    var name = keyName(e, true), handled = false;
    if (!name) return false;
    var keymaps = allKeyMaps(cm);

    if (e.shiftKey) {
      // First try to resolve full name (including 'Shift-'). Failing
      // that, see if there is a cursor-motion command (starting with
      // 'go') bound to the keyname without 'Shift-'.
      handled = lookupKey("Shift-" + name, keymaps, function(b) {return doHandleBinding(cm, b, true);})
             || lookupKey(name, keymaps, function(b) {
                  if (typeof b == "string" ? /^go[A-Z]/.test(b) : b.motion)
                    return doHandleBinding(cm, b);
                });
    } else {
      handled = lookupKey(name, keymaps, function(b) { return doHandleBinding(cm, b); });
    }

    if (handled) {
      e_preventDefault(e);
      restartBlink(cm);
      signalLater(cm, "keyHandled", cm, name, e);
    }
    return handled;
  }

  // Handle a key from the keypress event
  function handleCharBinding(cm, e, ch) {
    var handled = lookupKey("'" + ch + "'", allKeyMaps(cm),
                            function(b) { return doHandleBinding(cm, b, true); });
    if (handled) {
      e_preventDefault(e);
      restartBlink(cm);
      signalLater(cm, "keyHandled", cm, "'" + ch + "'", e);
    }
    return handled;
  }

  var lastStoppedKey = null;
  function onKeyDown(e) {
    var cm = this;
    ensureFocus(cm);
    if (signalDOMEvent(cm, e)) return;
    // IE does strange things with escape.
    if (ie && ie_version < 11 && e.keyCode == 27) e.returnValue = false;
    var code = e.keyCode;
    cm.display.shift = code == 16 || e.shiftKey;
    var handled = handleKeyBinding(cm, e);
    if (presto) {
      lastStoppedKey = handled ? code : null;
      // Opera has no cut event... we try to at least catch the key combo
      if (!handled && code == 88 && !hasCopyEvent && (mac ? e.metaKey : e.ctrlKey))
        cm.replaceSelection("", null, "cut");
    }

    // Turn mouse into crosshair when Alt is held on Mac.
    if (code == 18 && !/\bCodeMirror-crosshair\b/.test(cm.display.lineDiv.className))
      showCrossHair(cm);
  }

  function showCrossHair(cm) {
    var lineDiv = cm.display.lineDiv;
    addClass(lineDiv, "CodeMirror-crosshair");

    function up(e) {
      if (e.keyCode == 18 || !e.altKey) {
        rmClass(lineDiv, "CodeMirror-crosshair");
        off(document, "keyup", up);
        off(document, "mouseover", up);
      }
    }
    on(document, "keyup", up);
    on(document, "mouseover", up);
  }

  function onKeyUp(e) {
    if (e.keyCode == 16) this.doc.sel.shift = false;
    signalDOMEvent(this, e);
  }

  function onKeyPress(e) {
    var cm = this;
    if (signalDOMEvent(cm, e) || e.ctrlKey && !e.altKey || mac && e.metaKey) return;
    var keyCode = e.keyCode, charCode = e.charCode;
    if (presto && keyCode == lastStoppedKey) {lastStoppedKey = null; e_preventDefault(e); return;}
    if (((presto && (!e.which || e.which < 10)) || khtml) && handleKeyBinding(cm, e)) return;
    var ch = String.fromCharCode(charCode == null ? keyCode : charCode);
    if (handleCharBinding(cm, e, ch)) return;
    if (ie && ie_version >= 9) cm.display.inputHasSelection = null;
    fastPoll(cm);
  }

  // FOCUS/BLUR EVENTS

  function onFocus(cm) {
    if (cm.options.readOnly == "nocursor") return;
    if (!cm.state.focused) {
      signal(cm, "focus", cm);
      cm.state.focused = true;
      addClass(cm.display.wrapper, "CodeMirror-focused");
      // The prevInput test prevents this from firing when a context
      // menu is closed (since the resetInput would kill the
      // select-all detection hack)
      if (!cm.curOp && cm.display.selForContextMenu != cm.doc.sel) {
        resetInput(cm);
        if (webkit) setTimeout(bind(resetInput, cm, true), 0); // Issue #1730
      }
    }
    slowPoll(cm);
    restartBlink(cm);
  }
  function onBlur(cm) {
    if (cm.state.focused) {
      signal(cm, "blur", cm);
      cm.state.focused = false;
      rmClass(cm.display.wrapper, "CodeMirror-focused");
    }
    clearInterval(cm.display.blinker);
    setTimeout(function() {if (!cm.state.focused) cm.display.shift = false;}, 150);
  }

  // CONTEXT MENU HANDLING

  // To make the context menu work, we need to briefly unhide the
  // textarea (making it as unobtrusive as possible) to let the
  // right-click take effect on it.
  function onContextMenu(cm, e) {
    if (signalDOMEvent(cm, e, "contextmenu")) return;
    var display = cm.display;
    if (eventInWidget(display, e) || contextMenuInGutter(cm, e)) return;

    var pos = posFromMouse(cm, e), scrollPos = display.scroller.scrollTop;
    if (!pos || presto) return; // Opera is difficult.

    // Reset the current text selection only if the click is done outside of the selection
    // and 'resetSelectionOnContextMenu' option is true.
    var reset = cm.options.resetSelectionOnContextMenu;
    if (reset && cm.doc.sel.contains(pos) == -1)
      operation(cm, setSelection)(cm.doc, simpleSelection(pos), sel_dontScroll);

    var oldCSS = display.input.style.cssText;
    display.inputDiv.style.position = "absolute";
    display.input.style.cssText = "position: fixed; width: 30px; height: 30px; top: " + (e.clientY - 5) +
      "px; left: " + (e.clientX - 5) + "px; z-index: 1000; background: " +
      (ie ? "rgba(255, 255, 255, .05)" : "transparent") +
      "; outline: none; border-width: 0; outline: none; overflow: hidden; opacity: .05; filter: alpha(opacity=5);";
    if (webkit) var oldScrollY = window.scrollY; // Work around Chrome issue (#2712)
    focusInput(cm);
    if (webkit) window.scrollTo(null, oldScrollY);
    resetInput(cm);
    // Adds "Select all" to context menu in FF
    if (!cm.somethingSelected()) display.input.value = display.prevInput = " ";
    display.selForContextMenu = cm.doc.sel;
    clearTimeout(display.detectingSelectAll);

    // Select-all will be greyed out if there's nothing to select, so
    // this adds a zero-width space so that we can later check whether
    // it got selected.
    function prepareSelectAllHack() {
      if (display.input.selectionStart != null) {
        var selected = cm.somethingSelected();
        var extval = display.input.value = "\u200b" + (selected ? display.input.value : "");
        display.prevInput = selected ? "" : "\u200b";
        display.input.selectionStart = 1; display.input.selectionEnd = extval.length;
        // Re-set this, in case some other handler touched the
        // selection in the meantime.
        display.selForContextMenu = cm.doc.sel;
      }
    }
    function rehide() {
      display.inputDiv.style.position = "relative";
      display.input.style.cssText = oldCSS;
      if (ie && ie_version < 9) display.scrollbarV.scrollTop = display.scroller.scrollTop = scrollPos;
      slowPoll(cm);

      // Try to detect the user choosing select-all
      if (display.input.selectionStart != null) {
        if (!ie || (ie && ie_version < 9)) prepareSelectAllHack();
        var i = 0, poll = function() {
          if (display.selForContextMenu == cm.doc.sel && display.input.selectionStart == 0)
            operation(cm, commands.selectAll)(cm);
          else if (i++ < 10) display.detectingSelectAll = setTimeout(poll, 500);
          else resetInput(cm);
        };
        display.detectingSelectAll = setTimeout(poll, 200);
      }
    }

    if (ie && ie_version >= 9) prepareSelectAllHack();
    if (captureRightClick) {
      e_stop(e);
      var mouseup = function() {
        off(window, "mouseup", mouseup);
        setTimeout(rehide, 20);
      };
      on(window, "mouseup", mouseup);
    } else {
      setTimeout(rehide, 50);
    }
  }

  function contextMenuInGutter(cm, e) {
    if (!hasHandler(cm, "gutterContextMenu")) return false;
    return gutterEvent(cm, e, "gutterContextMenu", false, signal);
  }

  // UPDATING

  // Compute the position of the end of a change (its 'to' property
  // refers to the pre-change end).
  var changeEnd = CodeMirror.changeEnd = function(change) {
    if (!change.text) return change.to;
    return Pos(change.from.line + change.text.length - 1,
               lst(change.text).length + (change.text.length == 1 ? change.from.ch : 0));
  };

  // Adjust a position to refer to the post-change position of the
  // same text, or the end of the change if the change covers it.
  function adjustForChange(pos, change) {
    if (cmp(pos, change.from) < 0) return pos;
    if (cmp(pos, change.to) <= 0) return changeEnd(change);

    var line = pos.line + change.text.length - (change.to.line - change.from.line) - 1, ch = pos.ch;
    if (pos.line == change.to.line) ch += changeEnd(change).ch - change.to.ch;
    return Pos(line, ch);
  }

  function computeSelAfterChange(doc, change) {
    var out = [];
    for (var i = 0; i < doc.sel.ranges.length; i++) {
      var range = doc.sel.ranges[i];
      out.push(new Range(adjustForChange(range.anchor, change),
                         adjustForChange(range.head, change)));
    }
    return normalizeSelection(out, doc.sel.primIndex);
  }

  function offsetPos(pos, old, nw) {
    if (pos.line == old.line)
      return Pos(nw.line, pos.ch - old.ch + nw.ch);
    else
      return Pos(nw.line + (pos.line - old.line), pos.ch);
  }

  // Used by replaceSelections to allow moving the selection to the
  // start or around the replaced test. Hint may be "start" or "around".
  function computeReplacedSel(doc, changes, hint) {
    var out = [];
    var oldPrev = Pos(doc.first, 0), newPrev = oldPrev;
    for (var i = 0; i < changes.length; i++) {
      var change = changes[i];
      var from = offsetPos(change.from, oldPrev, newPrev);
      var to = offsetPos(changeEnd(change), oldPrev, newPrev);
      oldPrev = change.to;
      newPrev = to;
      if (hint == "around") {
        var range = doc.sel.ranges[i], inv = cmp(range.head, range.anchor) < 0;
        out[i] = new Range(inv ? to : from, inv ? from : to);
      } else {
        out[i] = new Range(from, from);
      }
    }
    return new Selection(out, doc.sel.primIndex);
  }

  // Allow "beforeChange" event handlers to influence a change
  function filterChange(doc, change, update) {
    var obj = {
      canceled: false,
      from: change.from,
      to: change.to,
      text: change.text,
      origin: change.origin,
      cancel: function() { this.canceled = true; }
    };
    if (update) obj.update = function(from, to, text, origin) {
      if (from) this.from = clipPos(doc, from);
      if (to) this.to = clipPos(doc, to);
      if (text) this.text = text;
      if (origin !== undefined) this.origin = origin;
    };
    signal(doc, "beforeChange", doc, obj);
    if (doc.cm) signal(doc.cm, "beforeChange", doc.cm, obj);

    if (obj.canceled) return null;
    return {from: obj.from, to: obj.to, text: obj.text, origin: obj.origin};
  }

  // Apply a change to a document, and add it to the document's
  // history, and propagating it to all linked documents.
  function makeChange(doc, change, ignoreReadOnly) {
    if (doc.cm) {
      if (!doc.cm.curOp) return operation(doc.cm, makeChange)(doc, change, ignoreReadOnly);
      if (doc.cm.state.suppressEdits) return;
    }

    if (hasHandler(doc, "beforeChange") || doc.cm && hasHandler(doc.cm, "beforeChange")) {
      change = filterChange(doc, change, true);
      if (!change) return;
    }

    // Possibly split or suppress the update based on the presence
    // of read-only spans in its range.
    var split = sawReadOnlySpans && !ignoreReadOnly && removeReadOnlyRanges(doc, change.from, change.to);
    if (split) {
      for (var i = split.length - 1; i >= 0; --i)
        makeChangeInner(doc, {from: split[i].from, to: split[i].to, text: i ? [""] : change.text});
    } else {
      makeChangeInner(doc, change);
    }
  }

  function makeChangeInner(doc, change) {
    if (change.text.length == 1 && change.text[0] == "" && cmp(change.from, change.to) == 0) return;
    var selAfter = computeSelAfterChange(doc, change);
    addChangeToHistory(doc, change, selAfter, doc.cm ? doc.cm.curOp.id : NaN);

    makeChangeSingleDoc(doc, change, selAfter, stretchSpansOverChange(doc, change));
    var rebased = [];

    linkedDocs(doc, function(doc, sharedHist) {
      if (!sharedHist && indexOf(rebased, doc.history) == -1) {
        rebaseHist(doc.history, change);
        rebased.push(doc.history);
      }
      makeChangeSingleDoc(doc, change, null, stretchSpansOverChange(doc, change));
    });
  }

  // Revert a change stored in a document's history.
  function makeChangeFromHistory(doc, type, allowSelectionOnly) {
    if (doc.cm && doc.cm.state.suppressEdits) return;

    var hist = doc.history, event, selAfter = doc.sel;
    var source = type == "undo" ? hist.done : hist.undone, dest = type == "undo" ? hist.undone : hist.done;

    // Verify that there is a useable event (so that ctrl-z won't
    // needlessly clear selection events)
    for (var i = 0; i < source.length; i++) {
      event = source[i];
      if (allowSelectionOnly ? event.ranges && !event.equals(doc.sel) : !event.ranges)
        break;
    }
    if (i == source.length) return;
    hist.lastOrigin = hist.lastSelOrigin = null;

    for (;;) {
      event = source.pop();
      if (event.ranges) {
        pushSelectionToHistory(event, dest);
        if (allowSelectionOnly && !event.equals(doc.sel)) {
          setSelection(doc, event, {clearRedo: false});
          return;
        }
        selAfter = event;
      }
      else break;
    }

    // Build up a reverse change object to add to the opposite history
    // stack (redo when undoing, and vice versa).
    var antiChanges = [];
    pushSelectionToHistory(selAfter, dest);
    dest.push({changes: antiChanges, generation: hist.generation});
    hist.generation = event.generation || ++hist.maxGeneration;

    var filter = hasHandler(doc, "beforeChange") || doc.cm && hasHandler(doc.cm, "beforeChange");

    for (var i = event.changes.length - 1; i >= 0; --i) {
      var change = event.changes[i];
      change.origin = type;
      if (filter && !filterChange(doc, change, false)) {
        source.length = 0;
        return;
      }

      antiChanges.push(historyChangeFromChange(doc, change));

      var after = i ? computeSelAfterChange(doc, change) : lst(source);
      makeChangeSingleDoc(doc, change, after, mergeOldSpans(doc, change));
      if (!i && doc.cm) doc.cm.scrollIntoView({from: change.from, to: changeEnd(change)});
      var rebased = [];

      // Propagate to the linked documents
      linkedDocs(doc, function(doc, sharedHist) {
        if (!sharedHist && indexOf(rebased, doc.history) == -1) {
          rebaseHist(doc.history, change);
          rebased.push(doc.history);
        }
        makeChangeSingleDoc(doc, change, null, mergeOldSpans(doc, change));
      });
    }
  }

  // Sub-views need their line numbers shifted when text is added
  // above or below them in the parent document.
  function shiftDoc(doc, distance) {
    if (distance == 0) return;
    doc.first += distance;
    doc.sel = new Selection(map(doc.sel.ranges, function(range) {
      return new Range(Pos(range.anchor.line + distance, range.anchor.ch),
                       Pos(range.head.line + distance, range.head.ch));
    }), doc.sel.primIndex);
    if (doc.cm) {
      regChange(doc.cm, doc.first, doc.first - distance, distance);
      for (var d = doc.cm.display, l = d.viewFrom; l < d.viewTo; l++)
        regLineChange(doc.cm, l, "gutter");
    }
  }

  // More lower-level change function, handling only a single document
  // (not linked ones).
  function makeChangeSingleDoc(doc, change, selAfter, spans) {
    if (doc.cm && !doc.cm.curOp)
      return operation(doc.cm, makeChangeSingleDoc)(doc, change, selAfter, spans);

    if (change.to.line < doc.first) {
      shiftDoc(doc, change.text.length - 1 - (change.to.line - change.from.line));
      return;
    }
    if (change.from.line > doc.lastLine()) return;

    // Clip the change to the size of this doc
    if (change.from.line < doc.first) {
      var shift = change.text.length - 1 - (doc.first - change.from.line);
      shiftDoc(doc, shift);
      change = {from: Pos(doc.first, 0), to: Pos(change.to.line + shift, change.to.ch),
                text: [lst(change.text)], origin: change.origin};
    }
    var last = doc.lastLine();
    if (change.to.line > last) {
      change = {from: change.from, to: Pos(last, getLine(doc, last).text.length),
                text: [change.text[0]], origin: change.origin};
    }

    change.removed = getBetween(doc, change.from, change.to);

    if (!selAfter) selAfter = computeSelAfterChange(doc, change);
    if (doc.cm) makeChangeSingleDocInEditor(doc.cm, change, spans);
    else updateDoc(doc, change, spans);
    setSelectionNoUndo(doc, selAfter, sel_dontScroll);
  }

  // Handle the interaction of a change to a document with the editor
  // that this document is part of.
  function makeChangeSingleDocInEditor(cm, change, spans) {
    var doc = cm.doc, display = cm.display, from = change.from, to = change.to;

    var recomputeMaxLength = false, checkWidthStart = from.line;
    if (!cm.options.lineWrapping) {
      checkWidthStart = lineNo(visualLine(getLine(doc, from.line)));
      doc.iter(checkWidthStart, to.line + 1, function(line) {
        if (line == display.maxLine) {
          recomputeMaxLength = true;
          return true;
        }
      });
    }

    if (doc.sel.contains(change.from, change.to) > -1)
      signalCursorActivity(cm);

    updateDoc(doc, change, spans, estimateHeight(cm));

    if (!cm.options.lineWrapping) {
      doc.iter(checkWidthStart, from.line + change.text.length, function(line) {
        var len = lineLength(line);
        if (len > display.maxLineLength) {
          display.maxLine = line;
          display.maxLineLength = len;
          display.maxLineChanged = true;
          recomputeMaxLength = false;
        }
      });
      if (recomputeMaxLength) cm.curOp.updateMaxLine = true;
    }

    // Adjust frontier, schedule worker
    doc.frontier = Math.min(doc.frontier, from.line);
    startWorker(cm, 400);

    var lendiff = change.text.length - (to.line - from.line) - 1;
    // Remember that these lines changed, for updating the display
    if (from.line == to.line && change.text.length == 1 && !isWholeLineUpdate(cm.doc, change))
      regLineChange(cm, from.line, "text");
    else
      regChange(cm, from.line, to.line + 1, lendiff);

    var changesHandler = hasHandler(cm, "changes"), changeHandler = hasHandler(cm, "change");
    if (changeHandler || changesHandler) {
      var obj = {
        from: from, to: to,
        text: change.text,
        removed: change.removed,
        origin: change.origin
      };
      if (changeHandler) signalLater(cm, "change", cm, obj);
      if (changesHandler) (cm.curOp.changeObjs || (cm.curOp.changeObjs = [])).push(obj);
    }
    cm.display.selForContextMenu = null;
  }

  function replaceRange(doc, code, from, to, origin) {
    if (!to) to = from;
    if (cmp(to, from) < 0) { var tmp = to; to = from; from = tmp; }
    if (typeof code == "string") code = splitLines(code);
    makeChange(doc, {from: from, to: to, text: code, origin: origin});
  }

  // SCROLLING THINGS INTO VIEW

  // If an editor sits on the top or bottom of the window, partially
  // scrolled out of view, this ensures that the cursor is visible.
  function maybeScrollWindow(cm, coords) {
    var display = cm.display, box = display.sizer.getBoundingClientRect(), doScroll = null;
    if (coords.top + box.top < 0) doScroll = true;
    else if (coords.bottom + box.top > (window.innerHeight || document.documentElement.clientHeight)) doScroll = false;
    if (doScroll != null && !phantom) {
      var scrollNode = elt("div", "\u200b", null, "position: absolute; top: " +
                           (coords.top - display.viewOffset - paddingTop(cm.display)) + "px; height: " +
                           (coords.bottom - coords.top + scrollerCutOff) + "px; left: " +
                           coords.left + "px; width: 2px;");
      cm.display.lineSpace.appendChild(scrollNode);
      scrollNode.scrollIntoView(doScroll);
      cm.display.lineSpace.removeChild(scrollNode);
    }
  }

  // Scroll a given position into view (immediately), verifying that
  // it actually became visible (as line heights are accurately
  // measured, the position of something may 'drift' during drawing).
  function scrollPosIntoView(cm, pos, end, margin) {
    if (margin == null) margin = 0;
    for (;;) {
      var changed = false, coords = cursorCoords(cm, pos);
      var endCoords = !end || end == pos ? coords : cursorCoords(cm, end);
      var scrollPos = calculateScrollPos(cm, Math.min(coords.left, endCoords.left),
                                         Math.min(coords.top, endCoords.top) - margin,
                                         Math.max(coords.left, endCoords.left),
                                         Math.max(coords.bottom, endCoords.bottom) + margin);
      var startTop = cm.doc.scrollTop, startLeft = cm.doc.scrollLeft;
      if (scrollPos.scrollTop != null) {
        setScrollTop(cm, scrollPos.scrollTop);
        if (Math.abs(cm.doc.scrollTop - startTop) > 1) changed = true;
      }
      if (scrollPos.scrollLeft != null) {
        setScrollLeft(cm, scrollPos.scrollLeft);
        if (Math.abs(cm.doc.scrollLeft - startLeft) > 1) changed = true;
      }
      if (!changed) return coords;
    }
  }

  // Scroll a given set of coordinates into view (immediately).
  function scrollIntoView(cm, x1, y1, x2, y2) {
    var scrollPos = calculateScrollPos(cm, x1, y1, x2, y2);
    if (scrollPos.scrollTop != null) setScrollTop(cm, scrollPos.scrollTop);
    if (scrollPos.scrollLeft != null) setScrollLeft(cm, scrollPos.scrollLeft);
  }

  // Calculate a new scroll position needed to scroll the given
  // rectangle into view. Returns an object with scrollTop and
  // scrollLeft properties. When these are undefined, the
  // vertical/horizontal position does not need to be adjusted.
  function calculateScrollPos(cm, x1, y1, x2, y2) {
    var display = cm.display, snapMargin = textHeight(cm.display);
    if (y1 < 0) y1 = 0;
    var screentop = cm.curOp && cm.curOp.scrollTop != null ? cm.curOp.scrollTop : display.scroller.scrollTop;
    var screen = display.scroller.clientHeight - scrollerCutOff, result = {};
    if (y2 - y1 > screen) y2 = y1 + screen;
    var docBottom = cm.doc.height + paddingVert(display);
    var atTop = y1 < snapMargin, atBottom = y2 > docBottom - snapMargin;
    if (y1 < screentop) {
      result.scrollTop = atTop ? 0 : y1;
    } else if (y2 > screentop + screen) {
      var newTop = Math.min(y1, (atBottom ? docBottom : y2) - screen);
      if (newTop != screentop) result.scrollTop = newTop;
    }

    var screenleft = cm.curOp && cm.curOp.scrollLeft != null ? cm.curOp.scrollLeft : display.scroller.scrollLeft;
    var screenw = display.scroller.clientWidth - scrollerCutOff - display.gutters.offsetWidth;
    var tooWide = x2 - x1 > screenw;
    if (tooWide) x2 = y1 + screen;
    if (x1 < 10)
      result.scrollLeft = 0;
    else if (x1 < screenleft)
      result.scrollLeft = Math.max(0, x1 - (tooWide ? 0 : 10));
    else if (x2 > screenw + screenleft - 3)
      result.scrollLeft = x2 + (tooWide ? 0 : 10) - screenw;

    return result;
  }

  // Store a relative adjustment to the scroll position in the current
  // operation (to be applied when the operation finishes).
  function addToScrollPos(cm, left, top) {
    if (left != null || top != null) resolveScrollToPos(cm);
    if (left != null)
      cm.curOp.scrollLeft = (cm.curOp.scrollLeft == null ? cm.doc.scrollLeft : cm.curOp.scrollLeft) + left;
    if (top != null)
      cm.curOp.scrollTop = (cm.curOp.scrollTop == null ? cm.doc.scrollTop : cm.curOp.scrollTop) + top;
  }

  // Make sure that at the end of the operation the current cursor is
  // shown.
  function ensureCursorVisible(cm) {
    resolveScrollToPos(cm);
    var cur = cm.getCursor(), from = cur, to = cur;
    if (!cm.options.lineWrapping) {
      from = cur.ch ? Pos(cur.line, cur.ch - 1) : cur;
      to = Pos(cur.line, cur.ch + 1);
    }
    cm.curOp.scrollToPos = {from: from, to: to, margin: cm.options.cursorScrollMargin, isCursor: true};
  }

  // When an operation has its scrollToPos property set, and another
  // scroll action is applied before the end of the operation, this
  // 'simulates' scrolling that position into view in a cheap way, so
  // that the effect of intermediate scroll commands is not ignored.
  function resolveScrollToPos(cm) {
    var range = cm.curOp.scrollToPos;
    if (range) {
      cm.curOp.scrollToPos = null;
      var from = estimateCoords(cm, range.from), to = estimateCoords(cm, range.to);
      var sPos = calculateScrollPos(cm, Math.min(from.left, to.left),
                                    Math.min(from.top, to.top) - range.margin,
                                    Math.max(from.right, to.right),
                                    Math.max(from.bottom, to.bottom) + range.margin);
      cm.scrollTo(sPos.scrollLeft, sPos.scrollTop);
    }
  }

  // API UTILITIES

  // Indent the given line. The how parameter can be "smart",
  // "add"/null, "subtract", or "prev". When aggressive is false
  // (typically set to true for forced single-line indents), empty
  // lines are not indented, and places where the mode returns Pass
  // are left alone.
  function indentLine(cm, n, how, aggressive) {
    var doc = cm.doc, state;
    if (how == null) how = "add";
    if (how == "smart") {
      // Fall back to "prev" when the mode doesn't have an indentation
      // method.
      if (!doc.mode.indent) how = "prev";
      else state = getStateBefore(cm, n);
    }

    var tabSize = cm.options.tabSize;
    var line = getLine(doc, n), curSpace = countColumn(line.text, null, tabSize);
    if (line.stateAfter) line.stateAfter = null;
    var curSpaceString = line.text.match(/^\s*/)[0], indentation;
    if (!aggressive && !/\S/.test(line.text)) {
      indentation = 0;
      how = "not";
    } else if (how == "smart") {
      indentation = doc.mode.indent(state, line.text.slice(curSpaceString.length), line.text);
      if (indentation == Pass || indentation > 150) {
        if (!aggressive) return;
        how = "prev";
      }
    }
    if (how == "prev") {
      if (n > doc.first) indentation = countColumn(getLine(doc, n-1).text, null, tabSize);
      else indentation = 0;
    } else if (how == "add") {
      indentation = curSpace + cm.options.indentUnit;
    } else if (how == "subtract") {
      indentation = curSpace - cm.options.indentUnit;
    } else if (typeof how == "number") {
      indentation = curSpace + how;
    }
    indentation = Math.max(0, indentation);

    var indentString = "", pos = 0;
    if (cm.options.indentWithTabs)
      for (var i = Math.floor(indentation / tabSize); i; --i) {pos += tabSize; indentString += "\t";}
    if (pos < indentation) indentString += spaceStr(indentation - pos);

    if (indentString != curSpaceString) {
      replaceRange(doc, indentString, Pos(n, 0), Pos(n, curSpaceString.length), "+input");
    } else {
      // Ensure that, if the cursor was in the whitespace at the start
      // of the line, it is moved to the end of that space.
      for (var i = 0; i < doc.sel.ranges.length; i++) {
        var range = doc.sel.ranges[i];
        if (range.head.line == n && range.head.ch < curSpaceString.length) {
          var pos = Pos(n, curSpaceString.length);
          replaceOneSelection(doc, i, new Range(pos, pos));
          break;
        }
      }
    }
    line.stateAfter = null;
  }

  // Utility for applying a change to a line by handle or number,
  // returning the number and optionally registering the line as
  // changed.
  function changeLine(doc, handle, changeType, op) {
    var no = handle, line = handle;
    if (typeof handle == "number") line = getLine(doc, clipLine(doc, handle));
    else no = lineNo(handle);
    if (no == null) return null;
    if (op(line, no) && doc.cm) regLineChange(doc.cm, no, changeType);
    return line;
  }

  // Helper for deleting text near the selection(s), used to implement
  // backspace, delete, and similar functionality.
  function deleteNearSelection(cm, compute) {
    var ranges = cm.doc.sel.ranges, kill = [];
    // Build up a set of ranges to kill first, merging overlapping
    // ranges.
    for (var i = 0; i < ranges.length; i++) {
      var toKill = compute(ranges[i]);
      while (kill.length && cmp(toKill.from, lst(kill).to) <= 0) {
        var replaced = kill.pop();
        if (cmp(replaced.from, toKill.from) < 0) {
          toKill.from = replaced.from;
          break;
        }
      }
      kill.push(toKill);
    }
    // Next, remove those actual ranges.
    runInOp(cm, function() {
      for (var i = kill.length - 1; i >= 0; i--)
        replaceRange(cm.doc, "", kill[i].from, kill[i].to, "+delete");
      ensureCursorVisible(cm);
    });
  }

  // Used for horizontal relative motion. Dir is -1 or 1 (left or
  // right), unit can be "char", "column" (like char, but doesn't
  // cross line boundaries), "word" (across next word), or "group" (to
  // the start of next group of word or non-word-non-whitespace
  // chars). The visually param controls whether, in right-to-left
  // text, direction 1 means to move towards the next index in the
  // string, or towards the character to the right of the current
  // position. The resulting position will have a hitSide=true
  // property if it reached the end of the document.
  function findPosH(doc, pos, dir, unit, visually) {
    var line = pos.line, ch = pos.ch, origDir = dir;
    var lineObj = getLine(doc, line);
    var possible = true;
    function findNextLine() {
      var l = line + dir;
      if (l < doc.first || l >= doc.first + doc.size) return (possible = false);
      line = l;
      return lineObj = getLine(doc, l);
    }
    function moveOnce(boundToLine) {
      var next = (visually ? moveVisually : moveLogically)(lineObj, ch, dir, true);
      if (next == null) {
        if (!boundToLine && findNextLine()) {
          if (visually) ch = (dir < 0 ? lineRight : lineLeft)(lineObj);
          else ch = dir < 0 ? lineObj.text.length : 0;
        } else return (possible = false);
      } else ch = next;
      return true;
    }

    if (unit == "char") moveOnce();
    else if (unit == "column") moveOnce(true);
    else if (unit == "word" || unit == "group") {
      var sawType = null, group = unit == "group";
      var helper = doc.cm && doc.cm.getHelper(pos, "wordChars");
      for (var first = true;; first = false) {
        if (dir < 0 && !moveOnce(!first)) break;
        var cur = lineObj.text.charAt(ch) || "\n";
        var type = isWordChar(cur, helper) ? "w"
          : group && cur == "\n" ? "n"
          : !group || /\s/.test(cur) ? null
          : "p";
        if (group && !first && !type) type = "s";
        if (sawType && sawType != type) {
          if (dir < 0) {dir = 1; moveOnce();}
          break;
        }

        if (type) sawType = type;
        if (dir > 0 && !moveOnce(!first)) break;
      }
    }
    var result = skipAtomic(doc, Pos(line, ch), origDir, true);
    if (!possible) result.hitSide = true;
    return result;
  }

  // For relative vertical movement. Dir may be -1 or 1. Unit can be
  // "page" or "line". The resulting position will have a hitSide=true
  // property if it reached the end of the document.
  function findPosV(cm, pos, dir, unit) {
    var doc = cm.doc, x = pos.left, y;
    if (unit == "page") {
      var pageSize = Math.min(cm.display.wrapper.clientHeight, window.innerHeight || document.documentElement.clientHeight);
      y = pos.top + dir * (pageSize - (dir < 0 ? 1.5 : .5) * textHeight(cm.display));
    } else if (unit == "line") {
      y = dir > 0 ? pos.bottom + 3 : pos.top - 3;
    }
    for (;;) {
      var target = coordsChar(cm, x, y);
      if (!target.outside) break;
      if (dir < 0 ? y <= 0 : y >= doc.height) { target.hitSide = true; break; }
      y += dir * 5;
    }
    return target;
  }

  // EDITOR METHODS

  // The publicly visible API. Note that methodOp(f) means
  // 'wrap f in an operation, performed on its `this` parameter'.

  // This is not the complete set of editor methods. Most of the
  // methods defined on the Doc type are also injected into
  // CodeMirror.prototype, for backwards compatibility and
  // convenience.

  CodeMirror.prototype = {
    constructor: CodeMirror,
    focus: function(){window.focus(); focusInput(this); fastPoll(this);},

    setOption: function(option, value) {
      var options = this.options, old = options[option];
      if (options[option] == value && option != "mode") return;
      options[option] = value;
      if (optionHandlers.hasOwnProperty(option))
        operation(this, optionHandlers[option])(this, value, old);
    },

    getOption: function(option) {return this.options[option];},
    getDoc: function() {return this.doc;},

    addKeyMap: function(map, bottom) {
      this.state.keyMaps[bottom ? "push" : "unshift"](map);
    },
    removeKeyMap: function(map) {
      var maps = this.state.keyMaps;
      for (var i = 0; i < maps.length; ++i)
        if (maps[i] == map || (typeof maps[i] != "string" && maps[i].name == map)) {
          maps.splice(i, 1);
          return true;
        }
    },

    addOverlay: methodOp(function(spec, options) {
      var mode = spec.token ? spec : CodeMirror.getMode(this.options, spec);
      if (mode.startState) throw new Error("Overlays may not be stateful.");
      this.state.overlays.push({mode: mode, modeSpec: spec, opaque: options && options.opaque});
      this.state.modeGen++;
      regChange(this);
    }),
    removeOverlay: methodOp(function(spec) {
      var overlays = this.state.overlays;
      for (var i = 0; i < overlays.length; ++i) {
        var cur = overlays[i].modeSpec;
        if (cur == spec || typeof spec == "string" && cur.name == spec) {
          overlays.splice(i, 1);
          this.state.modeGen++;
          regChange(this);
          return;
        }
      }
    }),

    indentLine: methodOp(function(n, dir, aggressive) {
      if (typeof dir != "string" && typeof dir != "number") {
        if (dir == null) dir = this.options.smartIndent ? "smart" : "prev";
        else dir = dir ? "add" : "subtract";
      }
      if (isLine(this.doc, n)) indentLine(this, n, dir, aggressive);
    }),
    indentSelection: methodOp(function(how) {
      var ranges = this.doc.sel.ranges, end = -1;
      for (var i = 0; i < ranges.length; i++) {
        var range = ranges[i];
        if (!range.empty()) {
          var from = range.from(), to = range.to();
          var start = Math.max(end, from.line);
          end = Math.min(this.lastLine(), to.line - (to.ch ? 0 : 1)) + 1;
          for (var j = start; j < end; ++j)
            indentLine(this, j, how);
          var newRanges = this.doc.sel.ranges;
          if (from.ch == 0 && ranges.length == newRanges.length && newRanges[i].from().ch > 0)
            replaceOneSelection(this.doc, i, new Range(from, newRanges[i].to()), sel_dontScroll);
        } else if (range.head.line > end) {
          indentLine(this, range.head.line, how, true);
          end = range.head.line;
          if (i == this.doc.sel.primIndex) ensureCursorVisible(this);
        }
      }
    }),

    // Fetch the parser token for a given character. Useful for hacks
    // that want to inspect the mode state (say, for completion).
    getTokenAt: function(pos, precise) {
      var doc = this.doc;
      pos = clipPos(doc, pos);
      var state = getStateBefore(this, pos.line, precise), mode = this.doc.mode;
      var line = getLine(doc, pos.line);
      var stream = new StringStream(line.text, this.options.tabSize);
      while (stream.pos < pos.ch && !stream.eol()) {
        stream.start = stream.pos;
        var style = readToken(mode, stream, state);
      }
      return {start: stream.start,
              end: stream.pos,
              string: stream.current(),
              type: style || null,
              state: state};
    },

    getTokenTypeAt: function(pos) {
      pos = clipPos(this.doc, pos);
      var styles = getLineStyles(this, getLine(this.doc, pos.line));
      var before = 0, after = (styles.length - 1) / 2, ch = pos.ch;
      var type;
      if (ch == 0) type = styles[2];
      else for (;;) {
        var mid = (before + after) >> 1;
        if ((mid ? styles[mid * 2 - 1] : 0) >= ch) after = mid;
        else if (styles[mid * 2 + 1] < ch) before = mid + 1;
        else { type = styles[mid * 2 + 2]; break; }
      }
      var cut = type ? type.indexOf("cm-overlay ") : -1;
      return cut < 0 ? type : cut == 0 ? null : type.slice(0, cut - 1);
    },

    getModeAt: function(pos) {
      var mode = this.doc.mode;
      if (!mode.innerMode) return mode;
      return CodeMirror.innerMode(mode, this.getTokenAt(pos).state).mode;
    },

    getHelper: function(pos, type) {
      return this.getHelpers(pos, type)[0];
    },

    getHelpers: function(pos, type) {
      var found = [];
      if (!helpers.hasOwnProperty(type)) return helpers;
      var help = helpers[type], mode = this.getModeAt(pos);
      if (typeof mode[type] == "string") {
        if (help[mode[type]]) found.push(help[mode[type]]);
      } else if (mode[type]) {
        for (var i = 0; i < mode[type].length; i++) {
          var val = help[mode[type][i]];
          if (val) found.push(val);
        }
      } else if (mode.helperType && help[mode.helperType]) {
        found.push(help[mode.helperType]);
      } else if (help[mode.name]) {
        found.push(help[mode.name]);
      }
      for (var i = 0; i < help._global.length; i++) {
        var cur = help._global[i];
        if (cur.pred(mode, this) && indexOf(found, cur.val) == -1)
          found.push(cur.val);
      }
      return found;
    },

    getStateAfter: function(line, precise) {
      var doc = this.doc;
      line = clipLine(doc, line == null ? doc.first + doc.size - 1: line);
      return getStateBefore(this, line + 1, precise);
    },

    cursorCoords: function(start, mode) {
      var pos, range = this.doc.sel.primary();
      if (start == null) pos = range.head;
      else if (typeof start == "object") pos = clipPos(this.doc, start);
      else pos = start ? range.from() : range.to();
      return cursorCoords(this, pos, mode || "page");
    },

    charCoords: function(pos, mode) {
      return charCoords(this, clipPos(this.doc, pos), mode || "page");
    },

    coordsChar: function(coords, mode) {
      coords = fromCoordSystem(this, coords, mode || "page");
      return coordsChar(this, coords.left, coords.top);
    },

    lineAtHeight: function(height, mode) {
      height = fromCoordSystem(this, {top: height, left: 0}, mode || "page").top;
      return lineAtHeight(this.doc, height + this.display.viewOffset);
    },
    heightAtLine: function(line, mode) {
      var end = false, last = this.doc.first + this.doc.size - 1;
      if (line < this.doc.first) line = this.doc.first;
      else if (line > last) { line = last; end = true; }
      var lineObj = getLine(this.doc, line);
      return intoCoordSystem(this, lineObj, {top: 0, left: 0}, mode || "page").top +
        (end ? this.doc.height - heightAtLine(lineObj) : 0);
    },

    defaultTextHeight: function() { return textHeight(this.display); },
    defaultCharWidth: function() { return charWidth(this.display); },

    setGutterMarker: methodOp(function(line, gutterID, value) {
      return changeLine(this.doc, line, "gutter", function(line) {
        var markers = line.gutterMarkers || (line.gutterMarkers = {});
        markers[gutterID] = value;
        if (!value && isEmpty(markers)) line.gutterMarkers = null;
        return true;
      });
    }),

    clearGutter: methodOp(function(gutterID) {
      var cm = this, doc = cm.doc, i = doc.first;
      doc.iter(function(line) {
        if (line.gutterMarkers && line.gutterMarkers[gutterID]) {
          line.gutterMarkers[gutterID] = null;
          regLineChange(cm, i, "gutter");
          if (isEmpty(line.gutterMarkers)) line.gutterMarkers = null;
        }
        ++i;
      });
    }),

    addLineWidget: methodOp(function(handle, node, options) {
      return addLineWidget(this, handle, node, options);
    }),

    removeLineWidget: function(widget) { widget.clear(); },

    lineInfo: function(line) {
      if (typeof line == "number") {
        if (!isLine(this.doc, line)) return null;
        var n = line;
        line = getLine(this.doc, line);
        if (!line) return null;
      } else {
        var n = lineNo(line);
        if (n == null) return null;
      }
      return {line: n, handle: line, text: line.text, gutterMarkers: line.gutterMarkers,
              textClass: line.textClass, bgClass: line.bgClass, wrapClass: line.wrapClass,
              widgets: line.widgets};
    },

    getViewport: function() { return {from: this.display.viewFrom, to: this.display.viewTo};},

    addWidget: function(pos, node, scroll, vert, horiz) {
      var display = this.display;
      pos = cursorCoords(this, clipPos(this.doc, pos));
      var top = pos.bottom, left = pos.left;
      node.style.position = "absolute";
      display.sizer.appendChild(node);
      if (vert == "over") {
        top = pos.top;
      } else if (vert == "above" || vert == "near") {
        var vspace = Math.max(display.wrapper.clientHeight, this.doc.height),
        hspace = Math.max(display.sizer.clientWidth, display.lineSpace.clientWidth);
        // Default to positioning above (if specified and possible); otherwise default to positioning below
        if ((vert == 'above' || pos.bottom + node.offsetHeight > vspace) && pos.top > node.offsetHeight)
          top = pos.top - node.offsetHeight;
        else if (pos.bottom + node.offsetHeight <= vspace)
          top = pos.bottom;
        if (left + node.offsetWidth > hspace)
          left = hspace - node.offsetWidth;
      }
      node.style.top = top + "px";
      node.style.left = node.style.right = "";
      if (horiz == "right") {
        left = display.sizer.clientWidth - node.offsetWidth;
        node.style.right = "0px";
      } else {
        if (horiz == "left") left = 0;
        else if (horiz == "middle") left = (display.sizer.clientWidth - node.offsetWidth) / 2;
        node.style.left = left + "px";
      }
      if (scroll)
        scrollIntoView(this, left, top, left + node.offsetWidth, top + node.offsetHeight);
    },

    triggerOnKeyDown: methodOp(onKeyDown),
    triggerOnKeyPress: methodOp(onKeyPress),
    triggerOnKeyUp: onKeyUp,

    execCommand: function(cmd) {
      if (commands.hasOwnProperty(cmd))
        return commands[cmd](this);
    },

    findPosH: function(from, amount, unit, visually) {
      var dir = 1;
      if (amount < 0) { dir = -1; amount = -amount; }
      for (var i = 0, cur = clipPos(this.doc, from); i < amount; ++i) {
        cur = findPosH(this.doc, cur, dir, unit, visually);
        if (cur.hitSide) break;
      }
      return cur;
    },

    moveH: methodOp(function(dir, unit) {
      var cm = this;
      cm.extendSelectionsBy(function(range) {
        if (cm.display.shift || cm.doc.extend || range.empty())
          return findPosH(cm.doc, range.head, dir, unit, cm.options.rtlMoveVisually);
        else
          return dir < 0 ? range.from() : range.to();
      }, sel_move);
    }),

    deleteH: methodOp(function(dir, unit) {
      var sel = this.doc.sel, doc = this.doc;
      if (sel.somethingSelected())
        doc.replaceSelection("", null, "+delete");
      else
        deleteNearSelection(this, function(range) {
          var other = findPosH(doc, range.head, dir, unit, false);
          return dir < 0 ? {from: other, to: range.head} : {from: range.head, to: other};
        });
    }),

    findPosV: function(from, amount, unit, goalColumn) {
      var dir = 1, x = goalColumn;
      if (amount < 0) { dir = -1; amount = -amount; }
      for (var i = 0, cur = clipPos(this.doc, from); i < amount; ++i) {
        var coords = cursorCoords(this, cur, "div");
        if (x == null) x = coords.left;
        else coords.left = x;
        cur = findPosV(this, coords, dir, unit);
        if (cur.hitSide) break;
      }
      return cur;
    },

    moveV: methodOp(function(dir, unit) {
      var cm = this, doc = this.doc, goals = [];
      var collapse = !cm.display.shift && !doc.extend && doc.sel.somethingSelected();
      doc.extendSelectionsBy(function(range) {
        if (collapse)
          return dir < 0 ? range.from() : range.to();
        var headPos = cursorCoords(cm, range.head, "div");
        if (range.goalColumn != null) headPos.left = range.goalColumn;
        goals.push(headPos.left);
        var pos = findPosV(cm, headPos, dir, unit);
        if (unit == "page" && range == doc.sel.primary())
          addToScrollPos(cm, null, charCoords(cm, pos, "div").top - headPos.top);
        return pos;
      }, sel_move);
      if (goals.length) for (var i = 0; i < doc.sel.ranges.length; i++)
        doc.sel.ranges[i].goalColumn = goals[i];
    }),

    // Find the word at the given position (as returned by coordsChar).
    findWordAt: function(pos) {
      var doc = this.doc, line = getLine(doc, pos.line).text;
      var start = pos.ch, end = pos.ch;
      if (line) {
        var helper = this.getHelper(pos, "wordChars");
        if ((pos.xRel < 0 || end == line.length) && start) --start; else ++end;
        var startChar = line.charAt(start);
        var check = isWordChar(startChar, helper)
          ? function(ch) { return isWordChar(ch, helper); }
          : /\s/.test(startChar) ? function(ch) {return /\s/.test(ch);}
          : function(ch) {return !/\s/.test(ch) && !isWordChar(ch);};
        while (start > 0 && check(line.charAt(start - 1))) --start;
        while (end < line.length && check(line.charAt(end))) ++end;
      }
      return new Range(Pos(pos.line, start), Pos(pos.line, end));
    },

    toggleOverwrite: function(value) {
      if (value != null && value == this.state.overwrite) return;
      if (this.state.overwrite = !this.state.overwrite)
        addClass(this.display.cursorDiv, "CodeMirror-overwrite");
      else
        rmClass(this.display.cursorDiv, "CodeMirror-overwrite");

      signal(this, "overwriteToggle", this, this.state.overwrite);
    },
    hasFocus: function() { return activeElt() == this.display.input; },

    scrollTo: methodOp(function(x, y) {
      if (x != null || y != null) resolveScrollToPos(this);
      if (x != null) this.curOp.scrollLeft = x;
      if (y != null) this.curOp.scrollTop = y;
    }),
    getScrollInfo: function() {
      var scroller = this.display.scroller, co = scrollerCutOff;
      return {left: scroller.scrollLeft, top: scroller.scrollTop,
              height: scroller.scrollHeight - co, width: scroller.scrollWidth - co,
              clientHeight: scroller.clientHeight - co, clientWidth: scroller.clientWidth - co};
    },

    scrollIntoView: methodOp(function(range, margin) {
      if (range == null) {
        range = {from: this.doc.sel.primary().head, to: null};
        if (margin == null) margin = this.options.cursorScrollMargin;
      } else if (typeof range == "number") {
        range = {from: Pos(range, 0), to: null};
      } else if (range.from == null) {
        range = {from: range, to: null};
      }
      if (!range.to) range.to = range.from;
      range.margin = margin || 0;

      if (range.from.line != null) {
        resolveScrollToPos(this);
        this.curOp.scrollToPos = range;
      } else {
        var sPos = calculateScrollPos(this, Math.min(range.from.left, range.to.left),
                                      Math.min(range.from.top, range.to.top) - range.margin,
                                      Math.max(range.from.right, range.to.right),
                                      Math.max(range.from.bottom, range.to.bottom) + range.margin);
        this.scrollTo(sPos.scrollLeft, sPos.scrollTop);
      }
    }),

    setSize: methodOp(function(width, height) {
      var cm = this;
      function interpret(val) {
        return typeof val == "number" || /^\d+$/.test(String(val)) ? val + "px" : val;
      }
      if (width != null) cm.display.wrapper.style.width = interpret(width);
      if (height != null) cm.display.wrapper.style.height = interpret(height);
      if (cm.options.lineWrapping) clearLineMeasurementCache(this);
      var lineNo = cm.display.viewFrom;
      cm.doc.iter(lineNo, cm.display.viewTo, function(line) {
        if (line.widgets) for (var i = 0; i < line.widgets.length; i++)
          if (line.widgets[i].noHScroll) { regLineChange(cm, lineNo, "widget"); break; }
        ++lineNo;
      });
      cm.curOp.forceUpdate = true;
      signal(cm, "refresh", this);
    }),

    operation: function(f){return runInOp(this, f);},

    refresh: methodOp(function() {
      var oldHeight = this.display.cachedTextHeight;
      regChange(this);
      this.curOp.forceUpdate = true;
      clearCaches(this);
      this.scrollTo(this.doc.scrollLeft, this.doc.scrollTop);
      updateGutterSpace(this);
      if (oldHeight == null || Math.abs(oldHeight - textHeight(this.display)) > .5)
        estimateLineHeights(this);
      signal(this, "refresh", this);
    }),

    swapDoc: methodOp(function(doc) {
      var old = this.doc;
      old.cm = null;
      attachDoc(this, doc);
      clearCaches(this);
      resetInput(this);
      this.scrollTo(doc.scrollLeft, doc.scrollTop);
      this.curOp.forceScroll = true;
      signalLater(this, "swapDoc", this, old);
      return old;
    }),

    getInputField: function(){return this.display.input;},
    getWrapperElement: function(){return this.display.wrapper;},
    getScrollerElement: function(){return this.display.scroller;},
    getGutterElement: function(){return this.display.gutters;}
  };
  eventMixin(CodeMirror);

  // OPTION DEFAULTS

  // The default configuration options.
  var defaults = CodeMirror.defaults = {};
  // Functions to run when options are changed.
  var optionHandlers = CodeMirror.optionHandlers = {};

  function option(name, deflt, handle, notOnInit) {
    CodeMirror.defaults[name] = deflt;
    if (handle) optionHandlers[name] =
      notOnInit ? function(cm, val, old) {if (old != Init) handle(cm, val, old);} : handle;
  }

  // Passed to option handlers when there is no old value.
  var Init = CodeMirror.Init = {toString: function(){return "CodeMirror.Init";}};

  // These two are, on init, called from the constructor because they
  // have to be initialized before the editor can start at all.
  option("value", "", function(cm, val) {
    cm.setValue(val);
  }, true);
  option("mode", null, function(cm, val) {
    cm.doc.modeOption = val;
    loadMode(cm);
  }, true);

  option("indentUnit", 2, loadMode, true);
  option("indentWithTabs", false);
  option("smartIndent", true);
  option("tabSize", 4, function(cm) {
    resetModeState(cm);
    clearCaches(cm);
    regChange(cm);
  }, true);
  option("specialChars", /[\t\u0000-\u0019\u00ad\u200b-\u200f\u2028\u2029\ufeff]/g, function(cm, val) {
    cm.options.specialChars = new RegExp(val.source + (val.test("\t") ? "" : "|\t"), "g");
    cm.refresh();
  }, true);
  option("specialCharPlaceholder", defaultSpecialCharPlaceholder, function(cm) {cm.refresh();}, true);
  option("electricChars", true);
  option("rtlMoveVisually", !windows);
  option("wholeLineUpdateBefore", true);

  option("theme", "default", function(cm) {
    themeChanged(cm);
    guttersChanged(cm);
  }, true);
  option("keyMap", "default", keyMapChanged);
  option("extraKeys", null);

  option("lineWrapping", false, wrappingChanged, true);
  option("gutters", [], function(cm) {
    setGuttersForLineNumbers(cm.options);
    guttersChanged(cm);
  }, true);
  option("fixedGutter", true, function(cm, val) {
    cm.display.gutters.style.left = val ? compensateForHScroll(cm.display) + "px" : "0";
    cm.refresh();
  }, true);
  option("coverGutterNextToScrollbar", false, updateScrollbars, true);
  option("lineNumbers", false, function(cm) {
    setGuttersForLineNumbers(cm.options);
    guttersChanged(cm);
  }, true);
  option("firstLineNumber", 1, guttersChanged, true);
  option("lineNumberFormatter", function(integer) {return integer;}, guttersChanged, true);
  option("showCursorWhenSelecting", false, updateSelection, true);

  option("resetSelectionOnContextMenu", true);

  option("readOnly", false, function(cm, val) {
    if (val == "nocursor") {
      onBlur(cm);
      cm.display.input.blur();
      cm.display.disabled = true;
    } else {
      cm.display.disabled = false;
      if (!val) resetInput(cm);
    }
  });
  option("disableInput", false, function(cm, val) {if (!val) resetInput(cm);}, true);
  option("dragDrop", true);

  option("cursorBlinkRate", 530);
  option("cursorScrollMargin", 0);
  option("cursorHeight", 1, updateSelection, true);
  option("singleCursorHeightPerLine", true, updateSelection, true);
  option("workTime", 100);
  option("workDelay", 100);
  option("flattenSpans", true, resetModeState, true);
  option("addModeClass", false, resetModeState, true);
  option("pollInterval", 100);
  option("undoDepth", 200, function(cm, val){cm.doc.history.undoDepth = val;});
  option("historyEventDelay", 1250);
  option("viewportMargin", 10, function(cm){cm.refresh();}, true);
  option("maxHighlightLength", 10000, resetModeState, true);
  option("moveInputWithCursor", true, function(cm, val) {
    if (!val) cm.display.inputDiv.style.top = cm.display.inputDiv.style.left = 0;
  });

  option("tabindex", null, function(cm, val) {
    cm.display.input.tabIndex = val || "";
  });
  option("autofocus", null);

  // MODE DEFINITION AND QUERYING

  // Known modes, by name and by MIME
  var modes = CodeMirror.modes = {}, mimeModes = CodeMirror.mimeModes = {};

  // Extra arguments are stored as the mode's dependencies, which is
  // used by (legacy) mechanisms like loadmode.js to automatically
  // load a mode. (Preferred mechanism is the require/define calls.)
  CodeMirror.defineMode = function(name, mode) {
    if (!CodeMirror.defaults.mode && name != "null") CodeMirror.defaults.mode = name;
    if (arguments.length > 2) {
      mode.dependencies = [];
      for (var i = 2; i < arguments.length; ++i) mode.dependencies.push(arguments[i]);
    }
    modes[name] = mode;
  };

  CodeMirror.defineMIME = function(mime, spec) {
    mimeModes[mime] = spec;
  };

  // Given a MIME type, a {name, ...options} config object, or a name
  // string, return a mode config object.
  CodeMirror.resolveMode = function(spec) {
    if (typeof spec == "string" && mimeModes.hasOwnProperty(spec)) {
      spec = mimeModes[spec];
    } else if (spec && typeof spec.name == "string" && mimeModes.hasOwnProperty(spec.name)) {
      var found = mimeModes[spec.name];
      if (typeof found == "string") found = {name: found};
      spec = createObj(found, spec);
      spec.name = found.name;
    } else if (typeof spec == "string" && /^[\w\-]+\/[\w\-]+\+xml$/.test(spec)) {
      return CodeMirror.resolveMode("application/xml");
    }
    if (typeof spec == "string") return {name: spec};
    else return spec || {name: "null"};
  };

  // Given a mode spec (anything that resolveMode accepts), find and
  // initialize an actual mode object.
  CodeMirror.getMode = function(options, spec) {
    var spec = CodeMirror.resolveMode(spec);
    var mfactory = modes[spec.name];
    if (!mfactory) return CodeMirror.getMode(options, "text/plain");
    var modeObj = mfactory(options, spec);
    if (modeExtensions.hasOwnProperty(spec.name)) {
      var exts = modeExtensions[spec.name];
      for (var prop in exts) {
        if (!exts.hasOwnProperty(prop)) continue;
        if (modeObj.hasOwnProperty(prop)) modeObj["_" + prop] = modeObj[prop];
        modeObj[prop] = exts[prop];
      }
    }
    modeObj.name = spec.name;
    if (spec.helperType) modeObj.helperType = spec.helperType;
    if (spec.modeProps) for (var prop in spec.modeProps)
      modeObj[prop] = spec.modeProps[prop];

    return modeObj;
  };

  // Minimal default mode.
  CodeMirror.defineMode("null", function() {
    return {token: function(stream) {stream.skipToEnd();}};
  });
  CodeMirror.defineMIME("text/plain", "null");

  // This can be used to attach properties to mode objects from
  // outside the actual mode definition.
  var modeExtensions = CodeMirror.modeExtensions = {};
  CodeMirror.extendMode = function(mode, properties) {
    var exts = modeExtensions.hasOwnProperty(mode) ? modeExtensions[mode] : (modeExtensions[mode] = {});
    copyObj(properties, exts);
  };

  // EXTENSIONS

  CodeMirror.defineExtension = function(name, func) {
    CodeMirror.prototype[name] = func;
  };
  CodeMirror.defineDocExtension = function(name, func) {
    Doc.prototype[name] = func;
  };
  CodeMirror.defineOption = option;

  var initHooks = [];
  CodeMirror.defineInitHook = function(f) {initHooks.push(f);};

  var helpers = CodeMirror.helpers = {};
  CodeMirror.registerHelper = function(type, name, value) {
    if (!helpers.hasOwnProperty(type)) helpers[type] = CodeMirror[type] = {_global: []};
    helpers[type][name] = value;
  };
  CodeMirror.registerGlobalHelper = function(type, name, predicate, value) {
    CodeMirror.registerHelper(type, name, value);
    helpers[type]._global.push({pred: predicate, val: value});
  };

  // MODE STATE HANDLING

  // Utility functions for working with state. Exported because nested
  // modes need to do this for their inner modes.

  var copyState = CodeMirror.copyState = function(mode, state) {
    if (state === true) return state;
    if (mode.copyState) return mode.copyState(state);
    var nstate = {};
    for (var n in state) {
      var val = state[n];
      if (val instanceof Array) val = val.concat([]);
      nstate[n] = val;
    }
    return nstate;
  };

  var startState = CodeMirror.startState = function(mode, a1, a2) {
    return mode.startState ? mode.startState(a1, a2) : true;
  };

  // Given a mode and a state (for that mode), find the inner mode and
  // state at the position that the state refers to.
  CodeMirror.innerMode = function(mode, state) {
    while (mode.innerMode) {
      var info = mode.innerMode(state);
      if (!info || info.mode == mode) break;
      state = info.state;
      mode = info.mode;
    }
    return info || {mode: mode, state: state};
  };

  // STANDARD COMMANDS

  // Commands are parameter-less actions that can be performed on an
  // editor, mostly used for keybindings.
  var commands = CodeMirror.commands = {
    selectAll: function(cm) {cm.setSelection(Pos(cm.firstLine(), 0), Pos(cm.lastLine()), sel_dontScroll);},
    singleSelection: function(cm) {
      cm.setSelection(cm.getCursor("anchor"), cm.getCursor("head"), sel_dontScroll);
    },
    killLine: function(cm) {
      deleteNearSelection(cm, function(range) {
        if (range.empty()) {
          var len = getLine(cm.doc, range.head.line).text.length;
          if (range.head.ch == len && range.head.line < cm.lastLine())
            return {from: range.head, to: Pos(range.head.line + 1, 0)};
          else
            return {from: range.head, to: Pos(range.head.line, len)};
        } else {
          return {from: range.from(), to: range.to()};
        }
      });
    },
    deleteLine: function(cm) {
      deleteNearSelection(cm, function(range) {
        return {from: Pos(range.from().line, 0),
                to: clipPos(cm.doc, Pos(range.to().line + 1, 0))};
      });
    },
    delLineLeft: function(cm) {
      deleteNearSelection(cm, function(range) {
        return {from: Pos(range.from().line, 0), to: range.from()};
      });
    },
    delWrappedLineLeft: function(cm) {
      deleteNearSelection(cm, function(range) {
        var top = cm.charCoords(range.head, "div").top + 5;
        var leftPos = cm.coordsChar({left: 0, top: top}, "div");
        return {from: leftPos, to: range.from()};
      });
    },
    delWrappedLineRight: function(cm) {
      deleteNearSelection(cm, function(range) {
        var top = cm.charCoords(range.head, "div").top + 5;
        var rightPos = cm.coordsChar({left: cm.display.lineDiv.offsetWidth + 100, top: top}, "div");
        return {from: range.from(), to: rightPos };
      });
    },
    undo: function(cm) {cm.undo();},
    redo: function(cm) {cm.redo();},
    undoSelection: function(cm) {cm.undoSelection();},
    redoSelection: function(cm) {cm.redoSelection();},
    goDocStart: function(cm) {cm.extendSelection(Pos(cm.firstLine(), 0));},
    goDocEnd: function(cm) {cm.extendSelection(Pos(cm.lastLine()));},
    goLineStart: function(cm) {
      cm.extendSelectionsBy(function(range) { return lineStart(cm, range.head.line); },
                            {origin: "+move", bias: 1});
    },
    goLineStartSmart: function(cm) {
      cm.extendSelectionsBy(function(range) {
        return lineStartSmart(cm, range.head);
      }, {origin: "+move", bias: 1});
    },
    goLineEnd: function(cm) {
      cm.extendSelectionsBy(function(range) { return lineEnd(cm, range.head.line); },
                            {origin: "+move", bias: -1});
    },
    goLineRight: function(cm) {
      cm.extendSelectionsBy(function(range) {
        var top = cm.charCoords(range.head, "div").top + 5;
        return cm.coordsChar({left: cm.display.lineDiv.offsetWidth + 100, top: top}, "div");
      }, sel_move);
    },
    goLineLeft: function(cm) {
      cm.extendSelectionsBy(function(range) {
        var top = cm.charCoords(range.head, "div").top + 5;
        return cm.coordsChar({left: 0, top: top}, "div");
      }, sel_move);
    },
    goLineLeftSmart: function(cm) {
      cm.extendSelectionsBy(function(range) {
        var top = cm.charCoords(range.head, "div").top + 5;
        var pos = cm.coordsChar({left: 0, top: top}, "div");
        if (pos.ch < cm.getLine(pos.line).search(/\S/)) return lineStartSmart(cm, range.head);
        return pos;
      }, sel_move);
    },
    goLineUp: function(cm) {cm.moveV(-1, "line");},
    goLineDown: function(cm) {cm.moveV(1, "line");},
    goPageUp: function(cm) {cm.moveV(-1, "page");},
    goPageDown: function(cm) {cm.moveV(1, "page");},
    goCharLeft: function(cm) {cm.moveH(-1, "char");},
    goCharRight: function(cm) {cm.moveH(1, "char");},
    goColumnLeft: function(cm) {cm.moveH(-1, "column");},
    goColumnRight: function(cm) {cm.moveH(1, "column");},
    goWordLeft: function(cm) {cm.moveH(-1, "word");},
    goGroupRight: function(cm) {cm.moveH(1, "group");},
    goGroupLeft: function(cm) {cm.moveH(-1, "group");},
    goWordRight: function(cm) {cm.moveH(1, "word");},
    delCharBefore: function(cm) {cm.deleteH(-1, "char");},
    delCharAfter: function(cm) {cm.deleteH(1, "char");},
    delWordBefore: function(cm) {cm.deleteH(-1, "word");},
    delWordAfter: function(cm) {cm.deleteH(1, "word");},
    delGroupBefore: function(cm) {cm.deleteH(-1, "group");},
    delGroupAfter: function(cm) {cm.deleteH(1, "group");},
    indentAuto: function(cm) {cm.indentSelection("smart");},
    indentMore: function(cm) {cm.indentSelection("add");},
    indentLess: function(cm) {cm.indentSelection("subtract");},
    insertTab: function(cm) {cm.replaceSelection("\t");},
    insertSoftTab: function(cm) {
      var spaces = [], ranges = cm.listSelections(), tabSize = cm.options.tabSize;
      for (var i = 0; i < ranges.length; i++) {
        var pos = ranges[i].from();
        var col = countColumn(cm.getLine(pos.line), pos.ch, tabSize);
        spaces.push(new Array(tabSize - col % tabSize + 1).join(" "));
      }
      cm.replaceSelections(spaces);
    },
    defaultTab: function(cm) {
      if (cm.somethingSelected()) cm.indentSelection("add");
      else cm.execCommand("insertTab");
    },
    transposeChars: function(cm) {
      runInOp(cm, function() {
        var ranges = cm.listSelections(), newSel = [];
        for (var i = 0; i < ranges.length; i++) {
          var cur = ranges[i].head, line = getLine(cm.doc, cur.line).text;
          if (line) {
            if (cur.ch == line.length) cur = new Pos(cur.line, cur.ch - 1);
            if (cur.ch > 0) {
              cur = new Pos(cur.line, cur.ch + 1);
              cm.replaceRange(line.charAt(cur.ch - 1) + line.charAt(cur.ch - 2),
                              Pos(cur.line, cur.ch - 2), cur, "+transpose");
            } else if (cur.line > cm.doc.first) {
              var prev = getLine(cm.doc, cur.line - 1).text;
              if (prev)
                cm.replaceRange(line.charAt(0) + "\n" + prev.charAt(prev.length - 1),
                                Pos(cur.line - 1, prev.length - 1), Pos(cur.line, 1), "+transpose");
            }
          }
          newSel.push(new Range(cur, cur));
        }
        cm.setSelections(newSel);
      });
    },
    newlineAndIndent: function(cm) {
      runInOp(cm, function() {
        var len = cm.listSelections().length;
        for (var i = 0; i < len; i++) {
          var range = cm.listSelections()[i];
          cm.replaceRange("\n", range.anchor, range.head, "+input");
          cm.indentLine(range.from().line + 1, null, true);
          ensureCursorVisible(cm);
        }
      });
    },
    toggleOverwrite: function(cm) {cm.toggleOverwrite();}
  };

  // STANDARD KEYMAPS

  var keyMap = CodeMirror.keyMap = {};
  keyMap.basic = {
    "Left": "goCharLeft", "Right": "goCharRight", "Up": "goLineUp", "Down": "goLineDown",
    "End": "goLineEnd", "Home": "goLineStartSmart", "PageUp": "goPageUp", "PageDown": "goPageDown",
    "Delete": "delCharAfter", "Backspace": "delCharBefore", "Shift-Backspace": "delCharBefore",
    "Tab": "defaultTab", "Shift-Tab": "indentAuto",
    "Enter": "newlineAndIndent", "Insert": "toggleOverwrite",
    "Esc": "singleSelection"
  };
  // Note that the save and find-related commands aren't defined by
  // default. User code or addons can define them. Unknown commands
  // are simply ignored.
  keyMap.pcDefault = {
    "Ctrl-A": "selectAll", "Ctrl-D": "deleteLine", "Ctrl-Z": "undo", "Shift-Ctrl-Z": "redo", "Ctrl-Y": "redo",
    "Ctrl-Home": "goDocStart", "Ctrl-Up": "goDocStart", "Ctrl-End": "goDocEnd", "Ctrl-Down": "goDocEnd",
    "Ctrl-Left": "goGroupLeft", "Ctrl-Right": "goGroupRight", "Alt-Left": "goLineStart", "Alt-Right": "goLineEnd",
    "Ctrl-Backspace": "delGroupBefore", "Ctrl-Delete": "delGroupAfter", "Ctrl-S": "save", "Ctrl-F": "find",
    "Ctrl-G": "findNext", "Shift-Ctrl-G": "findPrev", "Shift-Ctrl-F": "replace", "Shift-Ctrl-R": "replaceAll",
    "Ctrl-[": "indentLess", "Ctrl-]": "indentMore",
    "Ctrl-U": "undoSelection", "Shift-Ctrl-U": "redoSelection", "Alt-U": "redoSelection",
    fallthrough: "basic"
  };
  keyMap.macDefault = {
    "Cmd-A": "selectAll", "Cmd-D": "deleteLine", "Cmd-Z": "undo", "Shift-Cmd-Z": "redo", "Cmd-Y": "redo",
    "Cmd-Home": "goDocStart", "Cmd-Up": "goDocStart", "Cmd-End": "goDocEnd", "Cmd-Down": "goDocEnd", "Alt-Left": "goGroupLeft",
    "Alt-Right": "goGroupRight", "Cmd-Left": "goLineLeft", "Cmd-Right": "goLineRight", "Alt-Backspace": "delGroupBefore",
    "Ctrl-Alt-Backspace": "delGroupAfter", "Alt-Delete": "delGroupAfter", "Cmd-S": "save", "Cmd-F": "find",
    "Cmd-G": "findNext", "Shift-Cmd-G": "findPrev", "Cmd-Alt-F": "replace", "Shift-Cmd-Alt-F": "replaceAll",
    "Cmd-[": "indentLess", "Cmd-]": "indentMore", "Cmd-Backspace": "delWrappedLineLeft", "Cmd-Delete": "delWrappedLineRight",
    "Cmd-U": "undoSelection", "Shift-Cmd-U": "redoSelection",
    fallthrough: ["basic", "emacsy"]
  };
  // Very basic readline/emacs-style bindings, which are standard on Mac.
  keyMap.emacsy = {
    "Ctrl-F": "goCharRight", "Ctrl-B": "goCharLeft", "Ctrl-P": "goLineUp", "Ctrl-N": "goLineDown",
    "Alt-F": "goWordRight", "Alt-B": "goWordLeft", "Ctrl-A": "goLineStart", "Ctrl-E": "goLineEnd",
    "Ctrl-V": "goPageDown", "Shift-Ctrl-V": "goPageUp", "Ctrl-D": "delCharAfter", "Ctrl-H": "delCharBefore",
    "Alt-D": "delWordAfter", "Alt-Backspace": "delWordBefore", "Ctrl-K": "killLine", "Ctrl-T": "transposeChars"
  };
  keyMap["default"] = mac ? keyMap.macDefault : keyMap.pcDefault;

  // KEYMAP DISPATCH

  function getKeyMap(val) {
    if (typeof val == "string") return keyMap[val];
    else return val;
  }

  // Given an array of keymaps and a key name, call handle on any
  // bindings found, until that returns a truthy value, at which point
  // we consider the key handled. Implements things like binding a key
  // to false stopping further handling and keymap fallthrough.
  var lookupKey = CodeMirror.lookupKey = function(name, maps, handle) {
    function lookup(map) {
      map = getKeyMap(map);
      var found = map[name];
      if (found === false) return "stop";
      if (found != null && handle(found)) return true;
      if (map.nofallthrough) return "stop";

      var fallthrough = map.fallthrough;
      if (fallthrough == null) return false;
      if (Object.prototype.toString.call(fallthrough) != "[object Array]")
        return lookup(fallthrough);
      for (var i = 0; i < fallthrough.length; ++i) {
        var done = lookup(fallthrough[i]);
        if (done) return done;
      }
      return false;
    }

    for (var i = 0; i < maps.length; ++i) {
      var done = lookup(maps[i]);
      if (done) return done != "stop";
    }
  };

  // Modifier key presses don't count as 'real' key presses for the
  // purpose of keymap fallthrough.
  var isModifierKey = CodeMirror.isModifierKey = function(event) {
    var name = keyNames[event.keyCode];
    return name == "Ctrl" || name == "Alt" || name == "Shift" || name == "Mod";
  };

  // Look up the name of a key as indicated by an event object.
  var keyName = CodeMirror.keyName = function(event, noShift) {
    if (presto && event.keyCode == 34 && event["char"]) return false;
    var name = keyNames[event.keyCode];
    if (name == null || event.altGraphKey) return false;
    if (event.altKey) name = "Alt-" + name;
    if (flipCtrlCmd ? event.metaKey : event.ctrlKey) name = "Ctrl-" + name;
    if (flipCtrlCmd ? event.ctrlKey : event.metaKey) name = "Cmd-" + name;
    if (!noShift && event.shiftKey) name = "Shift-" + name;
    return name;
  };

  // FROMTEXTAREA

  CodeMirror.fromTextArea = function(textarea, options) {
    if (!options) options = {};
    options.value = textarea.value;
    if (!options.tabindex && textarea.tabindex)
      options.tabindex = textarea.tabindex;
    if (!options.placeholder && textarea.placeholder)
      options.placeholder = textarea.placeholder;
    // Set autofocus to true if this textarea is focused, or if it has
    // autofocus and no other element is focused.
    if (options.autofocus == null) {
      var hasFocus = activeElt();
      options.autofocus = hasFocus == textarea ||
        textarea.getAttribute("autofocus") != null && hasFocus == document.body;
    }

    function save() {textarea.value = cm.getValue();}
    if (textarea.form) {
      on(textarea.form, "submit", save);
      // Deplorable hack to make the submit method do the right thing.
      if (!options.leaveSubmitMethodAlone) {
        var form = textarea.form, realSubmit = form.submit;
        try {
          var wrappedSubmit = form.submit = function() {
            save();
            form.submit = realSubmit;
            form.submit();
            form.submit = wrappedSubmit;
          };
        } catch(e) {}
      }
    }

    textarea.style.display = "none";
    var cm = CodeMirror(function(node) {
      textarea.parentNode.insertBefore(node, textarea.nextSibling);
    }, options);
    cm.save = save;
    cm.getTextArea = function() { return textarea; };
    cm.toTextArea = function() {
      save();
      textarea.parentNode.removeChild(cm.getWrapperElement());
      textarea.style.display = "";
      if (textarea.form) {
        off(textarea.form, "submit", save);
        if (typeof textarea.form.submit == "function")
          textarea.form.submit = realSubmit;
      }
    };
    return cm;
  };

  // STRING STREAM

  // Fed to the mode parsers, provides helper functions to make
  // parsers more succinct.

  var StringStream = CodeMirror.StringStream = function(string, tabSize) {
    this.pos = this.start = 0;
    this.string = string;
    this.tabSize = tabSize || 8;
    this.lastColumnPos = this.lastColumnValue = 0;
    this.lineStart = 0;
  };

  StringStream.prototype = {
    eol: function() {return this.pos >= this.string.length;},
    sol: function() {return this.pos == this.lineStart;},
    peek: function() {return this.string.charAt(this.pos) || undefined;},
    next: function() {
      if (this.pos < this.string.length)
        return this.string.charAt(this.pos++);
    },
    eat: function(match) {
      var ch = this.string.charAt(this.pos);
      if (typeof match == "string") var ok = ch == match;
      else var ok = ch && (match.test ? match.test(ch) : match(ch));
      if (ok) {++this.pos; return ch;}
    },
    eatWhile: function(match) {
      var start = this.pos;
      while (this.eat(match)){}
      return this.pos > start;
    },
    eatSpace: function() {
      var start = this.pos;
      while (/[\s\u00a0]/.test(this.string.charAt(this.pos))) ++this.pos;
      return this.pos > start;
    },
    skipToEnd: function() {this.pos = this.string.length;},
    skipTo: function(ch) {
      var found = this.string.indexOf(ch, this.pos);
      if (found > -1) {this.pos = found; return true;}
    },
    backUp: function(n) {this.pos -= n;},
    column: function() {
      if (this.lastColumnPos < this.start) {
        this.lastColumnValue = countColumn(this.string, this.start, this.tabSize, this.lastColumnPos, this.lastColumnValue);
        this.lastColumnPos = this.start;
      }
      return this.lastColumnValue - (this.lineStart ? countColumn(this.string, this.lineStart, this.tabSize) : 0);
    },
    indentation: function() {
      return countColumn(this.string, null, this.tabSize) -
        (this.lineStart ? countColumn(this.string, this.lineStart, this.tabSize) : 0);
    },
    match: function(pattern, consume, caseInsensitive) {
      if (typeof pattern == "string") {
        var cased = function(str) {return caseInsensitive ? str.toLowerCase() : str;};
        var substr = this.string.substr(this.pos, pattern.length);
        if (cased(substr) == cased(pattern)) {
          if (consume !== false) this.pos += pattern.length;
          return true;
        }
      } else {
        var match = this.string.slice(this.pos).match(pattern);
        if (match && match.index > 0) return null;
        if (match && consume !== false) this.pos += match[0].length;
        return match;
      }
    },
    current: function(){return this.string.slice(this.start, this.pos);},
    hideFirstChars: function(n, inner) {
      this.lineStart += n;
      try { return inner(); }
      finally { this.lineStart -= n; }
    }
  };

  // TEXTMARKERS

  // Created with markText and setBookmark methods. A TextMarker is a
  // handle that can be used to clear or find a marked position in the
  // document. Line objects hold arrays (markedSpans) containing
  // {from, to, marker} object pointing to such marker objects, and
  // indicating that such a marker is present on that line. Multiple
  // lines may point to the same marker when it spans across lines.
  // The spans will have null for their from/to properties when the
  // marker continues beyond the start/end of the line. Markers have
  // links back to the lines they currently touch.

  var TextMarker = CodeMirror.TextMarker = function(doc, type) {
    this.lines = [];
    this.type = type;
    this.doc = doc;
  };
  eventMixin(TextMarker);

  // Clear the marker.
  TextMarker.prototype.clear = function() {
    if (this.explicitlyCleared) return;
    var cm = this.doc.cm, withOp = cm && !cm.curOp;
    if (withOp) startOperation(cm);
    if (hasHandler(this, "clear")) {
      var found = this.find();
      if (found) signalLater(this, "clear", found.from, found.to);
    }
    var min = null, max = null;
    for (var i = 0; i < this.lines.length; ++i) {
      var line = this.lines[i];
      var span = getMarkedSpanFor(line.markedSpans, this);
      if (cm && !this.collapsed) regLineChange(cm, lineNo(line), "text");
      else if (cm) {
        if (span.to != null) max = lineNo(line);
        if (span.from != null) min = lineNo(line);
      }
      line.markedSpans = removeMarkedSpan(line.markedSpans, span);
      if (span.from == null && this.collapsed && !lineIsHidden(this.doc, line) && cm)
        updateLineHeight(line, textHeight(cm.display));
    }
    if (cm && this.collapsed && !cm.options.lineWrapping) for (var i = 0; i < this.lines.length; ++i) {
      var visual = visualLine(this.lines[i]), len = lineLength(visual);
      if (len > cm.display.maxLineLength) {
        cm.display.maxLine = visual;
        cm.display.maxLineLength = len;
        cm.display.maxLineChanged = true;
      }
    }

    if (min != null && cm && this.collapsed) regChange(cm, min, max + 1);
    this.lines.length = 0;
    this.explicitlyCleared = true;
    if (this.atomic && this.doc.cantEdit) {
      this.doc.cantEdit = false;
      if (cm) reCheckSelection(cm.doc);
    }
    if (cm) signalLater(cm, "markerCleared", cm, this);
    if (withOp) endOperation(cm);
    if (this.parent) this.parent.clear();
  };

  // Find the position of the marker in the document. Returns a {from,
  // to} object by default. Side can be passed to get a specific side
  // -- 0 (both), -1 (left), or 1 (right). When lineObj is true, the
  // Pos objects returned contain a line object, rather than a line
  // number (used to prevent looking up the same line twice).
  TextMarker.prototype.find = function(side, lineObj) {
    if (side == null && this.type == "bookmark") side = 1;
    var from, to;
    for (var i = 0; i < this.lines.length; ++i) {
      var line = this.lines[i];
      var span = getMarkedSpanFor(line.markedSpans, this);
      if (span.from != null) {
        from = Pos(lineObj ? line : lineNo(line), span.from);
        if (side == -1) return from;
      }
      if (span.to != null) {
        to = Pos(lineObj ? line : lineNo(line), span.to);
        if (side == 1) return to;
      }
    }
    return from && {from: from, to: to};
  };

  // Signals that the marker's widget changed, and surrounding layout
  // should be recomputed.
  TextMarker.prototype.changed = function() {
    var pos = this.find(-1, true), widget = this, cm = this.doc.cm;
    if (!pos || !cm) return;
    runInOp(cm, function() {
      var line = pos.line, lineN = lineNo(pos.line);
      var view = findViewForLine(cm, lineN);
      if (view) {
        clearLineMeasurementCacheFor(view);
        cm.curOp.selectionChanged = cm.curOp.forceUpdate = true;
      }
      cm.curOp.updateMaxLine = true;
      if (!lineIsHidden(widget.doc, line) && widget.height != null) {
        var oldHeight = widget.height;
        widget.height = null;
        var dHeight = widgetHeight(widget) - oldHeight;
        if (dHeight)
          updateLineHeight(line, line.height + dHeight);
      }
    });
  };

  TextMarker.prototype.attachLine = function(line) {
    if (!this.lines.length && this.doc.cm) {
      var op = this.doc.cm.curOp;
      if (!op.maybeHiddenMarkers || indexOf(op.maybeHiddenMarkers, this) == -1)
        (op.maybeUnhiddenMarkers || (op.maybeUnhiddenMarkers = [])).push(this);
    }
    this.lines.push(line);
  };
  TextMarker.prototype.detachLine = function(line) {
    this.lines.splice(indexOf(this.lines, line), 1);
    if (!this.lines.length && this.doc.cm) {
      var op = this.doc.cm.curOp;
      (op.maybeHiddenMarkers || (op.maybeHiddenMarkers = [])).push(this);
    }
  };

  // Collapsed markers have unique ids, in order to be able to order
  // them, which is needed for uniquely determining an outer marker
  // when they overlap (they may nest, but not partially overlap).
  var nextMarkerId = 0;

  // Create a marker, wire it up to the right lines, and
  function markText(doc, from, to, options, type) {
    // Shared markers (across linked documents) are handled separately
    // (markTextShared will call out to this again, once per
    // document).
    if (options && options.shared) return markTextShared(doc, from, to, options, type);
    // Ensure we are in an operation.
    if (doc.cm && !doc.cm.curOp) return operation(doc.cm, markText)(doc, from, to, options, type);

    var marker = new TextMarker(doc, type), diff = cmp(from, to);
    if (options) copyObj(options, marker, false);
    // Don't connect empty markers unless clearWhenEmpty is false
    if (diff > 0 || diff == 0 && marker.clearWhenEmpty !== false)
      return marker;
    if (marker.replacedWith) {
      // Showing up as a widget implies collapsed (widget replaces text)
      marker.collapsed = true;
      marker.widgetNode = elt("span", [marker.replacedWith], "CodeMirror-widget");
      if (!options.handleMouseEvents) marker.widgetNode.ignoreEvents = true;
      if (options.insertLeft) marker.widgetNode.insertLeft = true;
    }
    if (marker.collapsed) {
      if (conflictingCollapsedRange(doc, from.line, from, to, marker) ||
          from.line != to.line && conflictingCollapsedRange(doc, to.line, from, to, marker))
        throw new Error("Inserting collapsed marker partially overlapping an existing one");
      sawCollapsedSpans = true;
    }

    if (marker.addToHistory)
      addChangeToHistory(doc, {from: from, to: to, origin: "markText"}, doc.sel, NaN);

    var curLine = from.line, cm = doc.cm, updateMaxLine;
    doc.iter(curLine, to.line + 1, function(line) {
      if (cm && marker.collapsed && !cm.options.lineWrapping && visualLine(line) == cm.display.maxLine)
        updateMaxLine = true;
      if (marker.collapsed && curLine != from.line) updateLineHeight(line, 0);
      addMarkedSpan(line, new MarkedSpan(marker,
                                         curLine == from.line ? from.ch : null,
                                         curLine == to.line ? to.ch : null));
      ++curLine;
    });
    // lineIsHidden depends on the presence of the spans, so needs a second pass
    if (marker.collapsed) doc.iter(from.line, to.line + 1, function(line) {
      if (lineIsHidden(doc, line)) updateLineHeight(line, 0);
    });

    if (marker.clearOnEnter) on(marker, "beforeCursorEnter", function() { marker.clear(); });

    if (marker.readOnly) {
      sawReadOnlySpans = true;
      if (doc.history.done.length || doc.history.undone.length)
        doc.clearHistory();
    }
    if (marker.collapsed) {
      marker.id = ++nextMarkerId;
      marker.atomic = true;
    }
    if (cm) {
      // Sync editor state
      if (updateMaxLine) cm.curOp.updateMaxLine = true;
      if (marker.collapsed)
        regChange(cm, from.line, to.line + 1);
      else if (marker.className || marker.title || marker.startStyle || marker.endStyle)
        for (var i = from.line; i <= to.line; i++) regLineChange(cm, i, "text");
      if (marker.atomic) reCheckSelection(cm.doc);
      signalLater(cm, "markerAdded", cm, marker);
    }
    return marker;
  }

  // SHARED TEXTMARKERS

  // A shared marker spans multiple linked documents. It is
  // implemented as a meta-marker-object controlling multiple normal
  // markers.
  var SharedTextMarker = CodeMirror.SharedTextMarker = function(markers, primary) {
    this.markers = markers;
    this.primary = primary;
    for (var i = 0; i < markers.length; ++i)
      markers[i].parent = this;
  };
  eventMixin(SharedTextMarker);

  SharedTextMarker.prototype.clear = function() {
    if (this.explicitlyCleared) return;
    this.explicitlyCleared = true;
    for (var i = 0; i < this.markers.length; ++i)
      this.markers[i].clear();
    signalLater(this, "clear");
  };
  SharedTextMarker.prototype.find = function(side, lineObj) {
    return this.primary.find(side, lineObj);
  };

  function markTextShared(doc, from, to, options, type) {
    options = copyObj(options);
    options.shared = false;
    var markers = [markText(doc, from, to, options, type)], primary = markers[0];
    var widget = options.widgetNode;
    linkedDocs(doc, function(doc) {
      if (widget) options.widgetNode = widget.cloneNode(true);
      markers.push(markText(doc, clipPos(doc, from), clipPos(doc, to), options, type));
      for (var i = 0; i < doc.linked.length; ++i)
        if (doc.linked[i].isParent) return;
      primary = lst(markers);
    });
    return new SharedTextMarker(markers, primary);
  }

  function findSharedMarkers(doc) {
    return doc.findMarks(Pos(doc.first, 0), doc.clipPos(Pos(doc.lastLine())),
                         function(m) { return m.parent; });
  }

  function copySharedMarkers(doc, markers) {
    for (var i = 0; i < markers.length; i++) {
      var marker = markers[i], pos = marker.find();
      var mFrom = doc.clipPos(pos.from), mTo = doc.clipPos(pos.to);
      if (cmp(mFrom, mTo)) {
        var subMark = markText(doc, mFrom, mTo, marker.primary, marker.primary.type);
        marker.markers.push(subMark);
        subMark.parent = marker;
      }
    }
  }

  function detachSharedMarkers(markers) {
    for (var i = 0; i < markers.length; i++) {
      var marker = markers[i], linked = [marker.primary.doc];;
      linkedDocs(marker.primary.doc, function(d) { linked.push(d); });
      for (var j = 0; j < marker.markers.length; j++) {
        var subMarker = marker.markers[j];
        if (indexOf(linked, subMarker.doc) == -1) {
          subMarker.parent = null;
          marker.markers.splice(j--, 1);
        }
      }
    }
  }

  // TEXTMARKER SPANS

  function MarkedSpan(marker, from, to) {
    this.marker = marker;
    this.from = from; this.to = to;
  }

  // Search an array of spans for a span matching the given marker.
  function getMarkedSpanFor(spans, marker) {
    if (spans) for (var i = 0; i < spans.length; ++i) {
      var span = spans[i];
      if (span.marker == marker) return span;
    }
  }
  // Remove a span from an array, returning undefined if no spans are
  // left (we don't store arrays for lines without spans).
  function removeMarkedSpan(spans, span) {
    for (var r, i = 0; i < spans.length; ++i)
      if (spans[i] != span) (r || (r = [])).push(spans[i]);
    return r;
  }
  // Add a span to a line.
  function addMarkedSpan(line, span) {
    line.markedSpans = line.markedSpans ? line.markedSpans.concat([span]) : [span];
    span.marker.attachLine(line);
  }

  // Used for the algorithm that adjusts markers for a change in the
  // document. These functions cut an array of spans at a given
  // character position, returning an array of remaining chunks (or
  // undefined if nothing remains).
  function markedSpansBefore(old, startCh, isInsert) {
    if (old) for (var i = 0, nw; i < old.length; ++i) {
      var span = old[i], marker = span.marker;
      var startsBefore = span.from == null || (marker.inclusiveLeft ? span.from <= startCh : span.from < startCh);
      if (startsBefore || span.from == startCh && marker.type == "bookmark" && (!isInsert || !span.marker.insertLeft)) {
        var endsAfter = span.to == null || (marker.inclusiveRight ? span.to >= startCh : span.to > startCh);
        (nw || (nw = [])).push(new MarkedSpan(marker, span.from, endsAfter ? null : span.to));
      }
    }
    return nw;
  }
  function markedSpansAfter(old, endCh, isInsert) {
    if (old) for (var i = 0, nw; i < old.length; ++i) {
      var span = old[i], marker = span.marker;
      var endsAfter = span.to == null || (marker.inclusiveRight ? span.to >= endCh : span.to > endCh);
      if (endsAfter || span.from == endCh && marker.type == "bookmark" && (!isInsert || span.marker.insertLeft)) {
        var startsBefore = span.from == null || (marker.inclusiveLeft ? span.from <= endCh : span.from < endCh);
        (nw || (nw = [])).push(new MarkedSpan(marker, startsBefore ? null : span.from - endCh,
                                              span.to == null ? null : span.to - endCh));
      }
    }
    return nw;
  }

  // Given a change object, compute the new set of marker spans that
  // cover the line in which the change took place. Removes spans
  // entirely within the change, reconnects spans belonging to the
  // same marker that appear on both sides of the change, and cuts off
  // spans partially within the change. Returns an array of span
  // arrays with one element for each line in (after) the change.
  function stretchSpansOverChange(doc, change) {
    var oldFirst = isLine(doc, change.from.line) && getLine(doc, change.from.line).markedSpans;
    var oldLast = isLine(doc, change.to.line) && getLine(doc, change.to.line).markedSpans;
    if (!oldFirst && !oldLast) return null;

    var startCh = change.from.ch, endCh = change.to.ch, isInsert = cmp(change.from, change.to) == 0;
    // Get the spans that 'stick out' on both sides
    var first = markedSpansBefore(oldFirst, startCh, isInsert);
    var last = markedSpansAfter(oldLast, endCh, isInsert);

    // Next, merge those two ends
    var sameLine = change.text.length == 1, offset = lst(change.text).length + (sameLine ? startCh : 0);
    if (first) {
      // Fix up .to properties of first
      for (var i = 0; i < first.length; ++i) {
        var span = first[i];
        if (span.to == null) {
          var found = getMarkedSpanFor(last, span.marker);
          if (!found) span.to = startCh;
          else if (sameLine) span.to = found.to == null ? null : found.to + offset;
        }
      }
    }
    if (last) {
      // Fix up .from in last (or move them into first in case of sameLine)
      for (var i = 0; i < last.length; ++i) {
        var span = last[i];
        if (span.to != null) span.to += offset;
        if (span.from == null) {
          var found = getMarkedSpanFor(first, span.marker);
          if (!found) {
            span.from = offset;
            if (sameLine) (first || (first = [])).push(span);
          }
        } else {
          span.from += offset;
          if (sameLine) (first || (first = [])).push(span);
        }
      }
    }
    // Make sure we didn't create any zero-length spans
    if (first) first = clearEmptySpans(first);
    if (last && last != first) last = clearEmptySpans(last);

    var newMarkers = [first];
    if (!sameLine) {
      // Fill gap with whole-line-spans
      var gap = change.text.length - 2, gapMarkers;
      if (gap > 0 && first)
        for (var i = 0; i < first.length; ++i)
          if (first[i].to == null)
            (gapMarkers || (gapMarkers = [])).push(new MarkedSpan(first[i].marker, null, null));
      for (var i = 0; i < gap; ++i)
        newMarkers.push(gapMarkers);
      newMarkers.push(last);
    }
    return newMarkers;
  }

  // Remove spans that are empty and don't have a clearWhenEmpty
  // option of false.
  function clearEmptySpans(spans) {
    for (var i = 0; i < spans.length; ++i) {
      var span = spans[i];
      if (span.from != null && span.from == span.to && span.marker.clearWhenEmpty !== false)
        spans.splice(i--, 1);
    }
    if (!spans.length) return null;
    return spans;
  }

  // Used for un/re-doing changes from the history. Combines the
  // result of computing the existing spans with the set of spans that
  // existed in the history (so that deleting around a span and then
  // undoing brings back the span).
  function mergeOldSpans(doc, change) {
    var old = getOldSpans(doc, change);
    var stretched = stretchSpansOverChange(doc, change);
    if (!old) return stretched;
    if (!stretched) return old;

    for (var i = 0; i < old.length; ++i) {
      var oldCur = old[i], stretchCur = stretched[i];
      if (oldCur && stretchCur) {
        spans: for (var j = 0; j < stretchCur.length; ++j) {
          var span = stretchCur[j];
          for (var k = 0; k < oldCur.length; ++k)
            if (oldCur[k].marker == span.marker) continue spans;
          oldCur.push(span);
        }
      } else if (stretchCur) {
        old[i] = stretchCur;
      }
    }
    return old;
  }

  // Used to 'clip' out readOnly ranges when making a change.
  function removeReadOnlyRanges(doc, from, to) {
    var markers = null;
    doc.iter(from.line, to.line + 1, function(line) {
      if (line.markedSpans) for (var i = 0; i < line.markedSpans.length; ++i) {
        var mark = line.markedSpans[i].marker;
        if (mark.readOnly && (!markers || indexOf(markers, mark) == -1))
          (markers || (markers = [])).push(mark);
      }
    });
    if (!markers) return null;
    var parts = [{from: from, to: to}];
    for (var i = 0; i < markers.length; ++i) {
      var mk = markers[i], m = mk.find(0);
      for (var j = 0; j < parts.length; ++j) {
        var p = parts[j];
        if (cmp(p.to, m.from) < 0 || cmp(p.from, m.to) > 0) continue;
        var newParts = [j, 1], dfrom = cmp(p.from, m.from), dto = cmp(p.to, m.to);
        if (dfrom < 0 || !mk.inclusiveLeft && !dfrom)
          newParts.push({from: p.from, to: m.from});
        if (dto > 0 || !mk.inclusiveRight && !dto)
          newParts.push({from: m.to, to: p.to});
        parts.splice.apply(parts, newParts);
        j += newParts.length - 1;
      }
    }
    return parts;
  }

  // Connect or disconnect spans from a line.
  function detachMarkedSpans(line) {
    var spans = line.markedSpans;
    if (!spans) return;
    for (var i = 0; i < spans.length; ++i)
      spans[i].marker.detachLine(line);
    line.markedSpans = null;
  }
  function attachMarkedSpans(line, spans) {
    if (!spans) return;
    for (var i = 0; i < spans.length; ++i)
      spans[i].marker.attachLine(line);
    line.markedSpans = spans;
  }

  // Helpers used when computing which overlapping collapsed span
  // counts as the larger one.
  function extraLeft(marker) { return marker.inclusiveLeft ? -1 : 0; }
  function extraRight(marker) { return marker.inclusiveRight ? 1 : 0; }

  // Returns a number indicating which of two overlapping collapsed
  // spans is larger (and thus includes the other). Falls back to
  // comparing ids when the spans cover exactly the same range.
  function compareCollapsedMarkers(a, b) {
    var lenDiff = a.lines.length - b.lines.length;
    if (lenDiff != 0) return lenDiff;
    var aPos = a.find(), bPos = b.find();
    var fromCmp = cmp(aPos.from, bPos.from) || extraLeft(a) - extraLeft(b);
    if (fromCmp) return -fromCmp;
    var toCmp = cmp(aPos.to, bPos.to) || extraRight(a) - extraRight(b);
    if (toCmp) return toCmp;
    return b.id - a.id;
  }

  // Find out whether a line ends or starts in a collapsed span. If
  // so, return the marker for that span.
  function collapsedSpanAtSide(line, start) {
    var sps = sawCollapsedSpans && line.markedSpans, found;
    if (sps) for (var sp, i = 0; i < sps.length; ++i) {
      sp = sps[i];
      if (sp.marker.collapsed && (start ? sp.from : sp.to) == null &&
          (!found || compareCollapsedMarkers(found, sp.marker) < 0))
        found = sp.marker;
    }
    return found;
  }
  function collapsedSpanAtStart(line) { return collapsedSpanAtSide(line, true); }
  function collapsedSpanAtEnd(line) { return collapsedSpanAtSide(line, false); }

  // Test whether there exists a collapsed span that partially
  // overlaps (covers the start or end, but not both) of a new span.
  // Such overlap is not allowed.
  function conflictingCollapsedRange(doc, lineNo, from, to, marker) {
    var line = getLine(doc, lineNo);
    var sps = sawCollapsedSpans && line.markedSpans;
    if (sps) for (var i = 0; i < sps.length; ++i) {
      var sp = sps[i];
      if (!sp.marker.collapsed) continue;
      var found = sp.marker.find(0);
      var fromCmp = cmp(found.from, from) || extraLeft(sp.marker) - extraLeft(marker);
      var toCmp = cmp(found.to, to) || extraRight(sp.marker) - extraRight(marker);
      if (fromCmp >= 0 && toCmp <= 0 || fromCmp <= 0 && toCmp >= 0) continue;
      if (fromCmp <= 0 && (cmp(found.to, from) > 0 || (sp.marker.inclusiveRight && marker.inclusiveLeft)) ||
          fromCmp >= 0 && (cmp(found.from, to) < 0 || (sp.marker.inclusiveLeft && marker.inclusiveRight)))
        return true;
    }
  }

  // A visual line is a line as drawn on the screen. Folding, for
  // example, can cause multiple logical lines to appear on the same
  // visual line. This finds the start of the visual line that the
  // given line is part of (usually that is the line itself).
  function visualLine(line) {
    var merged;
    while (merged = collapsedSpanAtStart(line))
      line = merged.find(-1, true).line;
    return line;
  }

  // Returns an array of logical lines that continue the visual line
  // started by the argument, or undefined if there are no such lines.
  function visualLineContinued(line) {
    var merged, lines;
    while (merged = collapsedSpanAtEnd(line)) {
      line = merged.find(1, true).line;
      (lines || (lines = [])).push(line);
    }
    return lines;
  }

  // Get the line number of the start of the visual line that the
  // given line number is part of.
  function visualLineNo(doc, lineN) {
    var line = getLine(doc, lineN), vis = visualLine(line);
    if (line == vis) return lineN;
    return lineNo(vis);
  }
  // Get the line number of the start of the next visual line after
  // the given line.
  function visualLineEndNo(doc, lineN) {
    if (lineN > doc.lastLine()) return lineN;
    var line = getLine(doc, lineN), merged;
    if (!lineIsHidden(doc, line)) return lineN;
    while (merged = collapsedSpanAtEnd(line))
      line = merged.find(1, true).line;
    return lineNo(line) + 1;
  }

  // Compute whether a line is hidden. Lines count as hidden when they
  // are part of a visual line that starts with another line, or when
  // they are entirely covered by collapsed, non-widget span.
  function lineIsHidden(doc, line) {
    var sps = sawCollapsedSpans && line.markedSpans;
    if (sps) for (var sp, i = 0; i < sps.length; ++i) {
      sp = sps[i];
      if (!sp.marker.collapsed) continue;
      if (sp.from == null) return true;
      if (sp.marker.widgetNode) continue;
      if (sp.from == 0 && sp.marker.inclusiveLeft && lineIsHiddenInner(doc, line, sp))
        return true;
    }
  }
  function lineIsHiddenInner(doc, line, span) {
    if (span.to == null) {
      var end = span.marker.find(1, true);
      return lineIsHiddenInner(doc, end.line, getMarkedSpanFor(end.line.markedSpans, span.marker));
    }
    if (span.marker.inclusiveRight && span.to == line.text.length)
      return true;
    for (var sp, i = 0; i < line.markedSpans.length; ++i) {
      sp = line.markedSpans[i];
      if (sp.marker.collapsed && !sp.marker.widgetNode && sp.from == span.to &&
          (sp.to == null || sp.to != span.from) &&
          (sp.marker.inclusiveLeft || span.marker.inclusiveRight) &&
          lineIsHiddenInner(doc, line, sp)) return true;
    }
  }

  // LINE WIDGETS

  // Line widgets are block elements displayed above or below a line.

  var LineWidget = CodeMirror.LineWidget = function(cm, node, options) {
    if (options) for (var opt in options) if (options.hasOwnProperty(opt))
      this[opt] = options[opt];
    this.cm = cm;
    this.node = node;
  };
  eventMixin(LineWidget);

  function adjustScrollWhenAboveVisible(cm, line, diff) {
    if (heightAtLine(line) < ((cm.curOp && cm.curOp.scrollTop) || cm.doc.scrollTop))
      addToScrollPos(cm, null, diff);
  }

  LineWidget.prototype.clear = function() {
    var cm = this.cm, ws = this.line.widgets, line = this.line, no = lineNo(line);
    if (no == null || !ws) return;
    for (var i = 0; i < ws.length; ++i) if (ws[i] == this) ws.splice(i--, 1);
    if (!ws.length) line.widgets = null;
    var height = widgetHeight(this);
    runInOp(cm, function() {
      adjustScrollWhenAboveVisible(cm, line, -height);
      regLineChange(cm, no, "widget");
      updateLineHeight(line, Math.max(0, line.height - height));
    });
  };
  LineWidget.prototype.changed = function() {
    var oldH = this.height, cm = this.cm, line = this.line;
    this.height = null;
    var diff = widgetHeight(this) - oldH;
    if (!diff) return;
    runInOp(cm, function() {
      cm.curOp.forceUpdate = true;
      adjustScrollWhenAboveVisible(cm, line, diff);
      updateLineHeight(line, line.height + diff);
    });
  };

  function widgetHeight(widget) {
    if (widget.height != null) return widget.height;
    if (!contains(document.body, widget.node)) {
      var parentStyle = "position: relative;";
      if (widget.coverGutter)
        parentStyle += "margin-left: -" + widget.cm.getGutterElement().offsetWidth + "px;";
      removeChildrenAndAdd(widget.cm.display.measure, elt("div", [widget.node], null, parentStyle));
    }
    return widget.height = widget.node.offsetHeight;
  }

  function addLineWidget(cm, handle, node, options) {
    var widget = new LineWidget(cm, node, options);
    if (widget.noHScroll) cm.display.alignWidgets = true;
    changeLine(cm.doc, handle, "widget", function(line) {
      var widgets = line.widgets || (line.widgets = []);
      if (widget.insertAt == null) widgets.push(widget);
      else widgets.splice(Math.min(widgets.length - 1, Math.max(0, widget.insertAt)), 0, widget);
      widget.line = line;
      if (!lineIsHidden(cm.doc, line)) {
        var aboveVisible = heightAtLine(line) < cm.doc.scrollTop;
        updateLineHeight(line, line.height + widgetHeight(widget));
        if (aboveVisible) addToScrollPos(cm, null, widget.height);
        cm.curOp.forceUpdate = true;
      }
      return true;
    });
    return widget;
  }

  // LINE DATA STRUCTURE

  // Line objects. These hold state related to a line, including
  // highlighting info (the styles array).
  var Line = CodeMirror.Line = function(text, markedSpans, estimateHeight) {
    this.text = text;
    attachMarkedSpans(this, markedSpans);
    this.height = estimateHeight ? estimateHeight(this) : 1;
  };
  eventMixin(Line);
  Line.prototype.lineNo = function() { return lineNo(this); };

  // Change the content (text, markers) of a line. Automatically
  // invalidates cached information and tries to re-estimate the
  // line's height.
  function updateLine(line, text, markedSpans, estimateHeight) {
    line.text = text;
    if (line.stateAfter) line.stateAfter = null;
    if (line.styles) line.styles = null;
    if (line.order != null) line.order = null;
    detachMarkedSpans(line);
    attachMarkedSpans(line, markedSpans);
    var estHeight = estimateHeight ? estimateHeight(line) : 1;
    if (estHeight != line.height) updateLineHeight(line, estHeight);
  }

  // Detach a line from the document tree and its markers.
  function cleanUpLine(line) {
    line.parent = null;
    detachMarkedSpans(line);
  }

  function extractLineClasses(type, output) {
    if (type) for (;;) {
      var lineClass = type.match(/(?:^|\s+)line-(background-)?(\S+)/);
      if (!lineClass) break;
      type = type.slice(0, lineClass.index) + type.slice(lineClass.index + lineClass[0].length);
      var prop = lineClass[1] ? "bgClass" : "textClass";
      if (output[prop] == null)
        output[prop] = lineClass[2];
      else if (!(new RegExp("(?:^|\s)" + lineClass[2] + "(?:$|\s)")).test(output[prop]))
        output[prop] += " " + lineClass[2];
    }
    return type;
  }

  function callBlankLine(mode, state) {
    if (mode.blankLine) return mode.blankLine(state);
    if (!mode.innerMode) return;
    var inner = CodeMirror.innerMode(mode, state);
    if (inner.mode.blankLine) return inner.mode.blankLine(inner.state);
  }

  function readToken(mode, stream, state) {
    for (var i = 0; i < 10; i++) {
      var style = mode.token(stream, state);
      if (stream.pos > stream.start) return style;
    }
    throw new Error("Mode " + mode.name + " failed to advance stream.");
  }

  // Run the given mode's parser over a line, calling f for each token.
  function runMode(cm, text, mode, state, f, lineClasses, forceToEnd) {
    var flattenSpans = mode.flattenSpans;
    if (flattenSpans == null) flattenSpans = cm.options.flattenSpans;
    var curStart = 0, curStyle = null;
    var stream = new StringStream(text, cm.options.tabSize), style;
    if (text == "") extractLineClasses(callBlankLine(mode, state), lineClasses);
    while (!stream.eol()) {
      if (stream.pos > cm.options.maxHighlightLength) {
        flattenSpans = false;
        if (forceToEnd) processLine(cm, text, state, stream.pos);
        stream.pos = text.length;
        style = null;
      } else {
        style = extractLineClasses(readToken(mode, stream, state), lineClasses);
      }
      if (cm.options.addModeClass) {
        var mName = CodeMirror.innerMode(mode, state).mode.name;
        if (mName) style = "m-" + (style ? mName + " " + style : mName);
      }
      if (!flattenSpans || curStyle != style) {
        if (curStart < stream.start) f(stream.start, curStyle);
        curStart = stream.start; curStyle = style;
      }
      stream.start = stream.pos;
    }
    while (curStart < stream.pos) {
      // Webkit seems to refuse to render text nodes longer than 57444 characters
      var pos = Math.min(stream.pos, curStart + 50000);
      f(pos, curStyle);
      curStart = pos;
    }
  }

  // Compute a style array (an array starting with a mode generation
  // -- for invalidation -- followed by pairs of end positions and
  // style strings), which is used to highlight the tokens on the
  // line.
  function highlightLine(cm, line, state, forceToEnd) {
    // A styles array always starts with a number identifying the
    // mode/overlays that it is based on (for easy invalidation).
    var st = [cm.state.modeGen], lineClasses = {};
    // Compute the base array of styles
    runMode(cm, line.text, cm.doc.mode, state, function(end, style) {
      st.push(end, style);
    }, lineClasses, forceToEnd);

    // Run overlays, adjust style array.
    for (var o = 0; o < cm.state.overlays.length; ++o) {
      var overlay = cm.state.overlays[o], i = 1, at = 0;
      runMode(cm, line.text, overlay.mode, true, function(end, style) {
        var start = i;
        // Ensure there's a token end at the current position, and that i points at it
        while (at < end) {
          var i_end = st[i];
          if (i_end > end)
            st.splice(i, 1, end, st[i+1], i_end);
          i += 2;
          at = Math.min(end, i_end);
        }
        if (!style) return;
        if (overlay.opaque) {
          st.splice(start, i - start, end, "cm-overlay " + style);
          i = start + 2;
        } else {
          for (; start < i; start += 2) {
            var cur = st[start+1];
            st[start+1] = (cur ? cur + " " : "") + "cm-overlay " + style;
          }
        }
      }, lineClasses);
    }

    return {styles: st, classes: lineClasses.bgClass || lineClasses.textClass ? lineClasses : null};
  }

  function getLineStyles(cm, line) {
    if (!line.styles || line.styles[0] != cm.state.modeGen) {
      var result = highlightLine(cm, line, line.stateAfter = getStateBefore(cm, lineNo(line)));
      line.styles = result.styles;
      if (result.classes) line.styleClasses = result.classes;
      else if (line.styleClasses) line.styleClasses = null;
    }
    return line.styles;
  }

  // Lightweight form of highlight -- proceed over this line and
  // update state, but don't save a style array. Used for lines that
  // aren't currently visible.
  function processLine(cm, text, state, startAt) {
    var mode = cm.doc.mode;
    var stream = new StringStream(text, cm.options.tabSize);
    stream.start = stream.pos = startAt || 0;
    if (text == "") callBlankLine(mode, state);
    while (!stream.eol() && stream.pos <= cm.options.maxHighlightLength) {
      readToken(mode, stream, state);
      stream.start = stream.pos;
    }
  }

  // Convert a style as returned by a mode (either null, or a string
  // containing one or more styles) to a CSS style. This is cached,
  // and also looks for line-wide styles.
  var styleToClassCache = {}, styleToClassCacheWithMode = {};
  function interpretTokenStyle(style, options) {
    if (!style || /^\s*$/.test(style)) return null;
    var cache = options.addModeClass ? styleToClassCacheWithMode : styleToClassCache;
    return cache[style] ||
      (cache[style] = style.replace(/\S+/g, "cm-$&"));
  }

  // Render the DOM representation of the text of a line. Also builds
  // up a 'line map', which points at the DOM nodes that represent
  // specific stretches of text, and is used by the measuring code.
  // The returned object contains the DOM node, this map, and
  // information about line-wide styles that were set by the mode.
  function buildLineContent(cm, lineView) {
    // The padding-right forces the element to have a 'border', which
    // is needed on Webkit to be able to get line-level bounding
    // rectangles for it (in measureChar).
    var content = elt("span", null, null, webkit ? "padding-right: .1px" : null);
    var builder = {pre: elt("pre", [content]), content: content, col: 0, pos: 0, cm: cm};
    lineView.measure = {};

    // Iterate over the logical lines that make up this visual line.
    for (var i = 0; i <= (lineView.rest ? lineView.rest.length : 0); i++) {
      var line = i ? lineView.rest[i - 1] : lineView.line, order;
      builder.pos = 0;
      builder.addToken = buildToken;
      // Optionally wire in some hacks into the token-rendering
      // algorithm, to deal with browser quirks.
      if ((ie || webkit) && cm.getOption("lineWrapping"))
        builder.addToken = buildTokenSplitSpaces(builder.addToken);
      if (hasBadBidiRects(cm.display.measure) && (order = getOrder(line)))
        builder.addToken = buildTokenBadBidi(builder.addToken, order);
      builder.map = [];
      insertLineContent(line, builder, getLineStyles(cm, line));
      if (line.styleClasses) {
        if (line.styleClasses.bgClass)
          builder.bgClass = joinClasses(line.styleClasses.bgClass, builder.bgClass || "");
        if (line.styleClasses.textClass)
          builder.textClass = joinClasses(line.styleClasses.textClass, builder.textClass || "");
      }

      // Ensure at least a single node is present, for measuring.
      if (builder.map.length == 0)
        builder.map.push(0, 0, builder.content.appendChild(zeroWidthElement(cm.display.measure)));

      // Store the map and a cache object for the current logical line
      if (i == 0) {
        lineView.measure.map = builder.map;
        lineView.measure.cache = {};
      } else {
        (lineView.measure.maps || (lineView.measure.maps = [])).push(builder.map);
        (lineView.measure.caches || (lineView.measure.caches = [])).push({});
      }
    }

    signal(cm, "renderLine", cm, lineView.line, builder.pre);
    if (builder.pre.className)
      builder.textClass = joinClasses(builder.pre.className, builder.textClass || "");
    return builder;
  }

  function defaultSpecialCharPlaceholder(ch) {
    var token = elt("span", "\u2022", "cm-invalidchar");
    token.title = "\\u" + ch.charCodeAt(0).toString(16);
    return token;
  }

  // Build up the DOM representation for a single token, and add it to
  // the line map. Takes care to render special characters separately.
  function buildToken(builder, text, style, startStyle, endStyle, title) {
    if (!text) return;
    var special = builder.cm.options.specialChars, mustWrap = false;
    if (!special.test(text)) {
      builder.col += text.length;
      var content = document.createTextNode(text);
      builder.map.push(builder.pos, builder.pos + text.length, content);
      if (ie && ie_version < 9) mustWrap = true;
      builder.pos += text.length;
    } else {
      var content = document.createDocumentFragment(), pos = 0;
      while (true) {
        special.lastIndex = pos;
        var m = special.exec(text);
        var skipped = m ? m.index - pos : text.length - pos;
        if (skipped) {
          var txt = document.createTextNode(text.slice(pos, pos + skipped));
          if (ie && ie_version < 9) content.appendChild(elt("span", [txt]));
          else content.appendChild(txt);
          builder.map.push(builder.pos, builder.pos + skipped, txt);
          builder.col += skipped;
          builder.pos += skipped;
        }
        if (!m) break;
        pos += skipped + 1;
        if (m[0] == "\t") {
          var tabSize = builder.cm.options.tabSize, tabWidth = tabSize - builder.col % tabSize;
          var txt = content.appendChild(elt("span", spaceStr(tabWidth), "cm-tab"));
          builder.col += tabWidth;
        } else {
          var txt = builder.cm.options.specialCharPlaceholder(m[0]);
          if (ie && ie_version < 9) content.appendChild(elt("span", [txt]));
          else content.appendChild(txt);
          builder.col += 1;
        }
        builder.map.push(builder.pos, builder.pos + 1, txt);
        builder.pos++;
      }
    }
    if (style || startStyle || endStyle || mustWrap) {
      var fullStyle = style || "";
      if (startStyle) fullStyle += startStyle;
      if (endStyle) fullStyle += endStyle;
      var token = elt("span", [content], fullStyle);
      if (title) token.title = title;
      return builder.content.appendChild(token);
    }
    builder.content.appendChild(content);
  }

  function buildTokenSplitSpaces(inner) {
    function split(old) {
      var out = " ";
      for (var i = 0; i < old.length - 2; ++i) out += i % 2 ? " " : "\u00a0";
      out += " ";
      return out;
    }
    return function(builder, text, style, startStyle, endStyle, title) {
      inner(builder, text.replace(/ {3,}/g, split), style, startStyle, endStyle, title);
    };
  }

  // Work around nonsense dimensions being reported for stretches of
  // right-to-left text.
  function buildTokenBadBidi(inner, order) {
    return function(builder, text, style, startStyle, endStyle, title) {
      style = style ? style + " cm-force-border" : "cm-force-border";
      var start = builder.pos, end = start + text.length;
      for (;;) {
        // Find the part that overlaps with the start of this text
        for (var i = 0; i < order.length; i++) {
          var part = order[i];
          if (part.to > start && part.from <= start) break;
        }
        if (part.to >= end) return inner(builder, text, style, startStyle, endStyle, title);
        inner(builder, text.slice(0, part.to - start), style, startStyle, null, title);
        startStyle = null;
        text = text.slice(part.to - start);
        start = part.to;
      }
    };
  }

  function buildCollapsedSpan(builder, size, marker, ignoreWidget) {
    var widget = !ignoreWidget && marker.widgetNode;
    if (widget) {
      builder.map.push(builder.pos, builder.pos + size, widget);
      builder.content.appendChild(widget);
    }
    builder.pos += size;
  }

  // Outputs a number of spans to make up a line, taking highlighting
  // and marked text into account.
  function insertLineContent(line, builder, styles) {
    var spans = line.markedSpans, allText = line.text, at = 0;
    if (!spans) {
      for (var i = 1; i < styles.length; i+=2)
        builder.addToken(builder, allText.slice(at, at = styles[i]), interpretTokenStyle(styles[i+1], builder.cm.options));
      return;
    }

    var len = allText.length, pos = 0, i = 1, text = "", style;
    var nextChange = 0, spanStyle, spanEndStyle, spanStartStyle, title, collapsed;
    for (;;) {
      if (nextChange == pos) { // Update current marker set
        spanStyle = spanEndStyle = spanStartStyle = title = "";
        collapsed = null; nextChange = Infinity;
        var foundBookmarks = [];
        for (var j = 0; j < spans.length; ++j) {
          var sp = spans[j], m = sp.marker;
          if (sp.from <= pos && (sp.to == null || sp.to > pos)) {
            if (sp.to != null && nextChange > sp.to) { nextChange = sp.to; spanEndStyle = ""; }
            if (m.className) spanStyle += " " + m.className;
            if (m.startStyle && sp.from == pos) spanStartStyle += " " + m.startStyle;
            if (m.endStyle && sp.to == nextChange) spanEndStyle += " " + m.endStyle;
            if (m.title && !title) title = m.title;
            if (m.collapsed && (!collapsed || compareCollapsedMarkers(collapsed.marker, m) < 0))
              collapsed = sp;
          } else if (sp.from > pos && nextChange > sp.from) {
            nextChange = sp.from;
          }
          if (m.type == "bookmark" && sp.from == pos && m.widgetNode) foundBookmarks.push(m);
        }
        if (collapsed && (collapsed.from || 0) == pos) {
          buildCollapsedSpan(builder, (collapsed.to == null ? len + 1 : collapsed.to) - pos,
                             collapsed.marker, collapsed.from == null);
          if (collapsed.to == null) return;
        }
        if (!collapsed && foundBookmarks.length) for (var j = 0; j < foundBookmarks.length; ++j)
          buildCollapsedSpan(builder, 0, foundBookmarks[j]);
      }
      if (pos >= len) break;

      var upto = Math.min(len, nextChange);
      while (true) {
        if (text) {
          var end = pos + text.length;
          if (!collapsed) {
            var tokenText = end > upto ? text.slice(0, upto - pos) : text;
            builder.addToken(builder, tokenText, style ? style + spanStyle : spanStyle,
                             spanStartStyle, pos + tokenText.length == nextChange ? spanEndStyle : "", title);
          }
          if (end >= upto) {text = text.slice(upto - pos); pos = upto; break;}
          pos = end;
          spanStartStyle = "";
        }
        text = allText.slice(at, at = styles[i++]);
        style = interpretTokenStyle(styles[i++], builder.cm.options);
      }
    }
  }

  // DOCUMENT DATA STRUCTURE

  // By default, updates that start and end at the beginning of a line
  // are treated specially, in order to make the association of line
  // widgets and marker elements with the text behave more intuitive.
  function isWholeLineUpdate(doc, change) {
    return change.from.ch == 0 && change.to.ch == 0 && lst(change.text) == "" &&
      (!doc.cm || doc.cm.options.wholeLineUpdateBefore);
  }

  // Perform a change on the document data structure.
  function updateDoc(doc, change, markedSpans, estimateHeight) {
    function spansFor(n) {return markedSpans ? markedSpans[n] : null;}
    function update(line, text, spans) {
      updateLine(line, text, spans, estimateHeight);
      signalLater(line, "change", line, change);
    }

    var from = change.from, to = change.to, text = change.text;
    var firstLine = getLine(doc, from.line), lastLine = getLine(doc, to.line);
    var lastText = lst(text), lastSpans = spansFor(text.length - 1), nlines = to.line - from.line;

    // Adjust the line structure
    if (isWholeLineUpdate(doc, change)) {
      // This is a whole-line replace. Treated specially to make
      // sure line objects move the way they are supposed to.
      for (var i = 0, added = []; i < text.length - 1; ++i)
        added.push(new Line(text[i], spansFor(i), estimateHeight));
      update(lastLine, lastLine.text, lastSpans);
      if (nlines) doc.remove(from.line, nlines);
      if (added.length) doc.insert(from.line, added);
    } else if (firstLine == lastLine) {
      if (text.length == 1) {
        update(firstLine, firstLine.text.slice(0, from.ch) + lastText + firstLine.text.slice(to.ch), lastSpans);
      } else {
        for (var added = [], i = 1; i < text.length - 1; ++i)
          added.push(new Line(text[i], spansFor(i), estimateHeight));
        added.push(new Line(lastText + firstLine.text.slice(to.ch), lastSpans, estimateHeight));
        update(firstLine, firstLine.text.slice(0, from.ch) + text[0], spansFor(0));
        doc.insert(from.line + 1, added);
      }
    } else if (text.length == 1) {
      update(firstLine, firstLine.text.slice(0, from.ch) + text[0] + lastLine.text.slice(to.ch), spansFor(0));
      doc.remove(from.line + 1, nlines);
    } else {
      update(firstLine, firstLine.text.slice(0, from.ch) + text[0], spansFor(0));
      update(lastLine, lastText + lastLine.text.slice(to.ch), lastSpans);
      for (var i = 1, added = []; i < text.length - 1; ++i)
        added.push(new Line(text[i], spansFor(i), estimateHeight));
      if (nlines > 1) doc.remove(from.line + 1, nlines - 1);
      doc.insert(from.line + 1, added);
    }

    signalLater(doc, "change", doc, change);
  }

  // The document is represented as a BTree consisting of leaves, with
  // chunk of lines in them, and branches, with up to ten leaves or
  // other branch nodes below them. The top node is always a branch
  // node, and is the document object itself (meaning it has
  // additional methods and properties).
  //
  // All nodes have parent links. The tree is used both to go from
  // line numbers to line objects, and to go from objects to numbers.
  // It also indexes by height, and is used to convert between height
  // and line object, and to find the total height of the document.
  //
  // See also http://marijnhaverbeke.nl/blog/codemirror-line-tree.html

  function LeafChunk(lines) {
    this.lines = lines;
    this.parent = null;
    for (var i = 0, height = 0; i < lines.length; ++i) {
      lines[i].parent = this;
      height += lines[i].height;
    }
    this.height = height;
  }

  LeafChunk.prototype = {
    chunkSize: function() { return this.lines.length; },
    // Remove the n lines at offset 'at'.
    removeInner: function(at, n) {
      for (var i = at, e = at + n; i < e; ++i) {
        var line = this.lines[i];
        this.height -= line.height;
        cleanUpLine(line);
        signalLater(line, "delete");
      }
      this.lines.splice(at, n);
    },
    // Helper used to collapse a small branch into a single leaf.
    collapse: function(lines) {
      lines.push.apply(lines, this.lines);
    },
    // Insert the given array of lines at offset 'at', count them as
    // having the given height.
    insertInner: function(at, lines, height) {
      this.height += height;
      this.lines = this.lines.slice(0, at).concat(lines).concat(this.lines.slice(at));
      for (var i = 0; i < lines.length; ++i) lines[i].parent = this;
    },
    // Used to iterate over a part of the tree.
    iterN: function(at, n, op) {
      for (var e = at + n; at < e; ++at)
        if (op(this.lines[at])) return true;
    }
  };

  function BranchChunk(children) {
    this.children = children;
    var size = 0, height = 0;
    for (var i = 0; i < children.length; ++i) {
      var ch = children[i];
      size += ch.chunkSize(); height += ch.height;
      ch.parent = this;
    }
    this.size = size;
    this.height = height;
    this.parent = null;
  }

  BranchChunk.prototype = {
    chunkSize: function() { return this.size; },
    removeInner: function(at, n) {
      this.size -= n;
      for (var i = 0; i < this.children.length; ++i) {
        var child = this.children[i], sz = child.chunkSize();
        if (at < sz) {
          var rm = Math.min(n, sz - at), oldHeight = child.height;
          child.removeInner(at, rm);
          this.height -= oldHeight - child.height;
          if (sz == rm) { this.children.splice(i--, 1); child.parent = null; }
          if ((n -= rm) == 0) break;
          at = 0;
        } else at -= sz;
      }
      // If the result is smaller than 25 lines, ensure that it is a
      // single leaf node.
      if (this.size - n < 25 &&
          (this.children.length > 1 || !(this.children[0] instanceof LeafChunk))) {
        var lines = [];
        this.collapse(lines);
        this.children = [new LeafChunk(lines)];
        this.children[0].parent = this;
      }
    },
    collapse: function(lines) {
      for (var i = 0; i < this.children.length; ++i) this.children[i].collapse(lines);
    },
    insertInner: function(at, lines, height) {
      this.size += lines.length;
      this.height += height;
      for (var i = 0; i < this.children.length; ++i) {
        var child = this.children[i], sz = child.chunkSize();
        if (at <= sz) {
          child.insertInner(at, lines, height);
          if (child.lines && child.lines.length > 50) {
            while (child.lines.length > 50) {
              var spilled = child.lines.splice(child.lines.length - 25, 25);
              var newleaf = new LeafChunk(spilled);
              child.height -= newleaf.height;
              this.children.splice(i + 1, 0, newleaf);
              newleaf.parent = this;
            }
            this.maybeSpill();
          }
          break;
        }
        at -= sz;
      }
    },
    // When a node has grown, check whether it should be split.
    maybeSpill: function() {
      if (this.children.length <= 10) return;
      var me = this;
      do {
        var spilled = me.children.splice(me.children.length - 5, 5);
        var sibling = new BranchChunk(spilled);
        if (!me.parent) { // Become the parent node
          var copy = new BranchChunk(me.children);
          copy.parent = me;
          me.children = [copy, sibling];
          me = copy;
        } else {
          me.size -= sibling.size;
          me.height -= sibling.height;
          var myIndex = indexOf(me.parent.children, me);
          me.parent.children.splice(myIndex + 1, 0, sibling);
        }
        sibling.parent = me.parent;
      } while (me.children.length > 10);
      me.parent.maybeSpill();
    },
    iterN: function(at, n, op) {
      for (var i = 0; i < this.children.length; ++i) {
        var child = this.children[i], sz = child.chunkSize();
        if (at < sz) {
          var used = Math.min(n, sz - at);
          if (child.iterN(at, used, op)) return true;
          if ((n -= used) == 0) break;
          at = 0;
        } else at -= sz;
      }
    }
  };

  var nextDocId = 0;
  var Doc = CodeMirror.Doc = function(text, mode, firstLine) {
    if (!(this instanceof Doc)) return new Doc(text, mode, firstLine);
    if (firstLine == null) firstLine = 0;

    BranchChunk.call(this, [new LeafChunk([new Line("", null)])]);
    this.first = firstLine;
    this.scrollTop = this.scrollLeft = 0;
    this.cantEdit = false;
    this.cleanGeneration = 1;
    this.frontier = firstLine;
    var start = Pos(firstLine, 0);
    this.sel = simpleSelection(start);
    this.history = new History(null);
    this.id = ++nextDocId;
    this.modeOption = mode;

    if (typeof text == "string") text = splitLines(text);
    updateDoc(this, {from: start, to: start, text: text});
    setSelection(this, simpleSelection(start), sel_dontScroll);
  };

  Doc.prototype = createObj(BranchChunk.prototype, {
    constructor: Doc,
    // Iterate over the document. Supports two forms -- with only one
    // argument, it calls that for each line in the document. With
    // three, it iterates over the range given by the first two (with
    // the second being non-inclusive).
    iter: function(from, to, op) {
      if (op) this.iterN(from - this.first, to - from, op);
      else this.iterN(this.first, this.first + this.size, from);
    },

    // Non-public interface for adding and removing lines.
    insert: function(at, lines) {
      var height = 0;
      for (var i = 0; i < lines.length; ++i) height += lines[i].height;
      this.insertInner(at - this.first, lines, height);
    },
    remove: function(at, n) { this.removeInner(at - this.first, n); },

    // From here, the methods are part of the public interface. Most
    // are also available from CodeMirror (editor) instances.

    getValue: function(lineSep) {
      var lines = getLines(this, this.first, this.first + this.size);
      if (lineSep === false) return lines;
      return lines.join(lineSep || "\n");
    },
    setValue: docMethodOp(function(code) {
      var top = Pos(this.first, 0), last = this.first + this.size - 1;
      makeChange(this, {from: top, to: Pos(last, getLine(this, last).text.length),
                        text: splitLines(code), origin: "setValue"}, true);
      setSelection(this, simpleSelection(top));
    }),
    replaceRange: function(code, from, to, origin) {
      from = clipPos(this, from);
      to = to ? clipPos(this, to) : from;
      replaceRange(this, code, from, to, origin);
    },
    getRange: function(from, to, lineSep) {
      var lines = getBetween(this, clipPos(this, from), clipPos(this, to));
      if (lineSep === false) return lines;
      return lines.join(lineSep || "\n");
    },

    getLine: function(line) {var l = this.getLineHandle(line); return l && l.text;},

    getLineHandle: function(line) {if (isLine(this, line)) return getLine(this, line);},
    getLineNumber: function(line) {return lineNo(line);},

    getLineHandleVisualStart: function(line) {
      if (typeof line == "number") line = getLine(this, line);
      return visualLine(line);
    },

    lineCount: function() {return this.size;},
    firstLine: function() {return this.first;},
    lastLine: function() {return this.first + this.size - 1;},

    clipPos: function(pos) {return clipPos(this, pos);},

    getCursor: function(start) {
      var range = this.sel.primary(), pos;
      if (start == null || start == "head") pos = range.head;
      else if (start == "anchor") pos = range.anchor;
      else if (start == "end" || start == "to" || start === false) pos = range.to();
      else pos = range.from();
      return pos;
    },
    listSelections: function() { return this.sel.ranges; },
    somethingSelected: function() {return this.sel.somethingSelected();},

    setCursor: docMethodOp(function(line, ch, options) {
      setSimpleSelection(this, clipPos(this, typeof line == "number" ? Pos(line, ch || 0) : line), null, options);
    }),
    setSelection: docMethodOp(function(anchor, head, options) {
      setSimpleSelection(this, clipPos(this, anchor), clipPos(this, head || anchor), options);
    }),
    extendSelection: docMethodOp(function(head, other, options) {
      extendSelection(this, clipPos(this, head), other && clipPos(this, other), options);
    }),
    extendSelections: docMethodOp(function(heads, options) {
      extendSelections(this, clipPosArray(this, heads, options));
    }),
    extendSelectionsBy: docMethodOp(function(f, options) {
      extendSelections(this, map(this.sel.ranges, f), options);
    }),
    setSelections: docMethodOp(function(ranges, primary, options) {
      if (!ranges.length) return;
      for (var i = 0, out = []; i < ranges.length; i++)
        out[i] = new Range(clipPos(this, ranges[i].anchor),
                           clipPos(this, ranges[i].head));
      if (primary == null) primary = Math.min(ranges.length - 1, this.sel.primIndex);
      setSelection(this, normalizeSelection(out, primary), options);
    }),
    addSelection: docMethodOp(function(anchor, head, options) {
      var ranges = this.sel.ranges.slice(0);
      ranges.push(new Range(clipPos(this, anchor), clipPos(this, head || anchor)));
      setSelection(this, normalizeSelection(ranges, ranges.length - 1), options);
    }),

    getSelection: function(lineSep) {
      var ranges = this.sel.ranges, lines;
      for (var i = 0; i < ranges.length; i++) {
        var sel = getBetween(this, ranges[i].from(), ranges[i].to());
        lines = lines ? lines.concat(sel) : sel;
      }
      if (lineSep === false) return lines;
      else return lines.join(lineSep || "\n");
    },
    getSelections: function(lineSep) {
      var parts = [], ranges = this.sel.ranges;
      for (var i = 0; i < ranges.length; i++) {
        var sel = getBetween(this, ranges[i].from(), ranges[i].to());
        if (lineSep !== false) sel = sel.join(lineSep || "\n");
        parts[i] = sel;
      }
      return parts;
    },
    replaceSelection: function(code, collapse, origin) {
      var dup = [];
      for (var i = 0; i < this.sel.ranges.length; i++)
        dup[i] = code;
      this.replaceSelections(dup, collapse, origin || "+input");
    },
    replaceSelections: docMethodOp(function(code, collapse, origin) {
      var changes = [], sel = this.sel;
      for (var i = 0; i < sel.ranges.length; i++) {
        var range = sel.ranges[i];
        changes[i] = {from: range.from(), to: range.to(), text: splitLines(code[i]), origin: origin};
      }
      var newSel = collapse && collapse != "end" && computeReplacedSel(this, changes, collapse);
      for (var i = changes.length - 1; i >= 0; i--)
        makeChange(this, changes[i]);
      if (newSel) setSelectionReplaceHistory(this, newSel);
      else if (this.cm) ensureCursorVisible(this.cm);
    }),
    undo: docMethodOp(function() {makeChangeFromHistory(this, "undo");}),
    redo: docMethodOp(function() {makeChangeFromHistory(this, "redo");}),
    undoSelection: docMethodOp(function() {makeChangeFromHistory(this, "undo", true);}),
    redoSelection: docMethodOp(function() {makeChangeFromHistory(this, "redo", true);}),

    setExtending: function(val) {this.extend = val;},
    getExtending: function() {return this.extend;},

    historySize: function() {
      var hist = this.history, done = 0, undone = 0;
      for (var i = 0; i < hist.done.length; i++) if (!hist.done[i].ranges) ++done;
      for (var i = 0; i < hist.undone.length; i++) if (!hist.undone[i].ranges) ++undone;
      return {undo: done, redo: undone};
    },
    clearHistory: function() {this.history = new History(this.history.maxGeneration);},

    markClean: function() {
      this.cleanGeneration = this.changeGeneration(true);
    },
    changeGeneration: function(forceSplit) {
      if (forceSplit)
        this.history.lastOp = this.history.lastSelOp = this.history.lastOrigin = null;
      return this.history.generation;
    },
    isClean: function (gen) {
      return this.history.generation == (gen || this.cleanGeneration);
    },

    getHistory: function() {
      return {done: copyHistoryArray(this.history.done),
              undone: copyHistoryArray(this.history.undone)};
    },
    setHistory: function(histData) {
      var hist = this.history = new History(this.history.maxGeneration);
      hist.done = copyHistoryArray(histData.done.slice(0), null, true);
      hist.undone = copyHistoryArray(histData.undone.slice(0), null, true);
    },

    addLineClass: docMethodOp(function(handle, where, cls) {
      return changeLine(this, handle, "class", function(line) {
        var prop = where == "text" ? "textClass" : where == "background" ? "bgClass" : "wrapClass";
        if (!line[prop]) line[prop] = cls;
        else if (new RegExp("(?:^|\\s)" + cls + "(?:$|\\s)").test(line[prop])) return false;
        else line[prop] += " " + cls;
        return true;
      });
    }),
    removeLineClass: docMethodOp(function(handle, where, cls) {
      return changeLine(this, handle, "class", function(line) {
        var prop = where == "text" ? "textClass" : where == "background" ? "bgClass" : "wrapClass";
        var cur = line[prop];
        if (!cur) return false;
        else if (cls == null) line[prop] = null;
        else {
          var found = cur.match(new RegExp("(?:^|\\s+)" + cls + "(?:$|\\s+)"));
          if (!found) return false;
          var end = found.index + found[0].length;
          line[prop] = cur.slice(0, found.index) + (!found.index || end == cur.length ? "" : " ") + cur.slice(end) || null;
        }
        return true;
      });
    }),

    markText: function(from, to, options) {
      return markText(this, clipPos(this, from), clipPos(this, to), options, "range");
    },
    setBookmark: function(pos, options) {
      var realOpts = {replacedWith: options && (options.nodeType == null ? options.widget : options),
                      insertLeft: options && options.insertLeft,
                      clearWhenEmpty: false, shared: options && options.shared};
      pos = clipPos(this, pos);
      return markText(this, pos, pos, realOpts, "bookmark");
    },
    findMarksAt: function(pos) {
      pos = clipPos(this, pos);
      var markers = [], spans = getLine(this, pos.line).markedSpans;
      if (spans) for (var i = 0; i < spans.length; ++i) {
        var span = spans[i];
        if ((span.from == null || span.from <= pos.ch) &&
            (span.to == null || span.to >= pos.ch))
          markers.push(span.marker.parent || span.marker);
      }
      return markers;
    },
    findMarks: function(from, to, filter) {
      from = clipPos(this, from); to = clipPos(this, to);
      var found = [], lineNo = from.line;
      this.iter(from.line, to.line + 1, function(line) {
        var spans = line.markedSpans;
        if (spans) for (var i = 0; i < spans.length; i++) {
          var span = spans[i];
          if (!(lineNo == from.line && from.ch > span.to ||
                span.from == null && lineNo != from.line||
                lineNo == to.line && span.from > to.ch) &&
              (!filter || filter(span.marker)))
            found.push(span.marker.parent || span.marker);
        }
        ++lineNo;
      });
      return found;
    },
    getAllMarks: function() {
      var markers = [];
      this.iter(function(line) {
        var sps = line.markedSpans;
        if (sps) for (var i = 0; i < sps.length; ++i)
          if (sps[i].from != null) markers.push(sps[i].marker);
      });
      return markers;
    },

    posFromIndex: function(off) {
      var ch, lineNo = this.first;
      this.iter(function(line) {
        var sz = line.text.length + 1;
        if (sz > off) { ch = off; return true; }
        off -= sz;
        ++lineNo;
      });
      return clipPos(this, Pos(lineNo, ch));
    },
    indexFromPos: function (coords) {
      coords = clipPos(this, coords);
      var index = coords.ch;
      if (coords.line < this.first || coords.ch < 0) return 0;
      this.iter(this.first, coords.line, function (line) {
        index += line.text.length + 1;
      });
      return index;
    },

    copy: function(copyHistory) {
      var doc = new Doc(getLines(this, this.first, this.first + this.size), this.modeOption, this.first);
      doc.scrollTop = this.scrollTop; doc.scrollLeft = this.scrollLeft;
      doc.sel = this.sel;
      doc.extend = false;
      if (copyHistory) {
        doc.history.undoDepth = this.history.undoDepth;
        doc.setHistory(this.getHistory());
      }
      return doc;
    },

    linkedDoc: function(options) {
      if (!options) options = {};
      var from = this.first, to = this.first + this.size;
      if (options.from != null && options.from > from) from = options.from;
      if (options.to != null && options.to < to) to = options.to;
      var copy = new Doc(getLines(this, from, to), options.mode || this.modeOption, from);
      if (options.sharedHist) copy.history = this.history;
      (this.linked || (this.linked = [])).push({doc: copy, sharedHist: options.sharedHist});
      copy.linked = [{doc: this, isParent: true, sharedHist: options.sharedHist}];
      copySharedMarkers(copy, findSharedMarkers(this));
      return copy;
    },
    unlinkDoc: function(other) {
      if (other instanceof CodeMirror) other = other.doc;
      if (this.linked) for (var i = 0; i < this.linked.length; ++i) {
        var link = this.linked[i];
        if (link.doc != other) continue;
        this.linked.splice(i, 1);
        other.unlinkDoc(this);
        detachSharedMarkers(findSharedMarkers(this));
        break;
      }
      // If the histories were shared, split them again
      if (other.history == this.history) {
        var splitIds = [other.id];
        linkedDocs(other, function(doc) {splitIds.push(doc.id);}, true);
        other.history = new History(null);
        other.history.done = copyHistoryArray(this.history.done, splitIds);
        other.history.undone = copyHistoryArray(this.history.undone, splitIds);
      }
    },
    iterLinkedDocs: function(f) {linkedDocs(this, f);},

    getMode: function() {return this.mode;},
    getEditor: function() {return this.cm;}
  });

  // Public alias.
  Doc.prototype.eachLine = Doc.prototype.iter;

  // Set up methods on CodeMirror's prototype to redirect to the editor's document.
  var dontDelegate = "iter insert remove copy getEditor".split(" ");
  for (var prop in Doc.prototype) if (Doc.prototype.hasOwnProperty(prop) && indexOf(dontDelegate, prop) < 0)
    CodeMirror.prototype[prop] = (function(method) {
      return function() {return method.apply(this.doc, arguments);};
    })(Doc.prototype[prop]);

  eventMixin(Doc);

  // Call f for all linked documents.
  function linkedDocs(doc, f, sharedHistOnly) {
    function propagate(doc, skip, sharedHist) {
      if (doc.linked) for (var i = 0; i < doc.linked.length; ++i) {
        var rel = doc.linked[i];
        if (rel.doc == skip) continue;
        var shared = sharedHist && rel.sharedHist;
        if (sharedHistOnly && !shared) continue;
        f(rel.doc, shared);
        propagate(rel.doc, doc, shared);
      }
    }
    propagate(doc, null, true);
  }

  // Attach a document to an editor.
  function attachDoc(cm, doc) {
    if (doc.cm) throw new Error("This document is already in use.");
    cm.doc = doc;
    doc.cm = cm;
    estimateLineHeights(cm);
    loadMode(cm);
    if (!cm.options.lineWrapping) findMaxLine(cm);
    cm.options.mode = doc.modeOption;
    regChange(cm);
  }

  // LINE UTILITIES

  // Find the line object corresponding to the given line number.
  function getLine(doc, n) {
    n -= doc.first;
    if (n < 0 || n >= doc.size) throw new Error("There is no line " + (n + doc.first) + " in the document.");
    for (var chunk = doc; !chunk.lines;) {
      for (var i = 0;; ++i) {
        var child = chunk.children[i], sz = child.chunkSize();
        if (n < sz) { chunk = child; break; }
        n -= sz;
      }
    }
    return chunk.lines[n];
  }

  // Get the part of a document between two positions, as an array of
  // strings.
  function getBetween(doc, start, end) {
    var out = [], n = start.line;
    doc.iter(start.line, end.line + 1, function(line) {
      var text = line.text;
      if (n == end.line) text = text.slice(0, end.ch);
      if (n == start.line) text = text.slice(start.ch);
      out.push(text);
      ++n;
    });
    return out;
  }
  // Get the lines between from and to, as array of strings.
  function getLines(doc, from, to) {
    var out = [];
    doc.iter(from, to, function(line) { out.push(line.text); });
    return out;
  }

  // Update the height of a line, propagating the height change
  // upwards to parent nodes.
  function updateLineHeight(line, height) {
    var diff = height - line.height;
    if (diff) for (var n = line; n; n = n.parent) n.height += diff;
  }

  // Given a line object, find its line number by walking up through
  // its parent links.
  function lineNo(line) {
    if (line.parent == null) return null;
    var cur = line.parent, no = indexOf(cur.lines, line);
    for (var chunk = cur.parent; chunk; cur = chunk, chunk = chunk.parent) {
      for (var i = 0;; ++i) {
        if (chunk.children[i] == cur) break;
        no += chunk.children[i].chunkSize();
      }
    }
    return no + cur.first;
  }

  // Find the line at the given vertical position, using the height
  // information in the document tree.
  function lineAtHeight(chunk, h) {
    var n = chunk.first;
    outer: do {
      for (var i = 0; i < chunk.children.length; ++i) {
        var child = chunk.children[i], ch = child.height;
        if (h < ch) { chunk = child; continue outer; }
        h -= ch;
        n += child.chunkSize();
      }
      return n;
    } while (!chunk.lines);
    for (var i = 0; i < chunk.lines.length; ++i) {
      var line = chunk.lines[i], lh = line.height;
      if (h < lh) break;
      h -= lh;
    }
    return n + i;
  }


  // Find the height above the given line.
  function heightAtLine(lineObj) {
    lineObj = visualLine(lineObj);

    var h = 0, chunk = lineObj.parent;
    for (var i = 0; i < chunk.lines.length; ++i) {
      var line = chunk.lines[i];
      if (line == lineObj) break;
      else h += line.height;
    }
    for (var p = chunk.parent; p; chunk = p, p = chunk.parent) {
      for (var i = 0; i < p.children.length; ++i) {
        var cur = p.children[i];
        if (cur == chunk) break;
        else h += cur.height;
      }
    }
    return h;
  }

  // Get the bidi ordering for the given line (and cache it). Returns
  // false for lines that are fully left-to-right, and an array of
  // BidiSpan objects otherwise.
  function getOrder(line) {
    var order = line.order;
    if (order == null) order = line.order = bidiOrdering(line.text);
    return order;
  }

  // HISTORY

  function History(startGen) {
    // Arrays of change events and selections. Doing something adds an
    // event to done and clears undo. Undoing moves events from done
    // to undone, redoing moves them in the other direction.
    this.done = []; this.undone = [];
    this.undoDepth = Infinity;
    // Used to track when changes can be merged into a single undo
    // event
    this.lastModTime = this.lastSelTime = 0;
    this.lastOp = this.lastSelOp = null;
    this.lastOrigin = this.lastSelOrigin = null;
    // Used by the isClean() method
    this.generation = this.maxGeneration = startGen || 1;
  }

  // Create a history change event from an updateDoc-style change
  // object.
  function historyChangeFromChange(doc, change) {
    var histChange = {from: copyPos(change.from), to: changeEnd(change), text: getBetween(doc, change.from, change.to)};
    attachLocalSpans(doc, histChange, change.from.line, change.to.line + 1);
    linkedDocs(doc, function(doc) {attachLocalSpans(doc, histChange, change.from.line, change.to.line + 1);}, true);
    return histChange;
  }

  // Pop all selection events off the end of a history array. Stop at
  // a change event.
  function clearSelectionEvents(array) {
    while (array.length) {
      var last = lst(array);
      if (last.ranges) array.pop();
      else break;
    }
  }

  // Find the top change event in the history. Pop off selection
  // events that are in the way.
  function lastChangeEvent(hist, force) {
    if (force) {
      clearSelectionEvents(hist.done);
      return lst(hist.done);
    } else if (hist.done.length && !lst(hist.done).ranges) {
      return lst(hist.done);
    } else if (hist.done.length > 1 && !hist.done[hist.done.length - 2].ranges) {
      hist.done.pop();
      return lst(hist.done);
    }
  }

  // Register a change in the history. Merges changes that are within
  // a single operation, ore are close together with an origin that
  // allows merging (starting with "+") into a single event.
  function addChangeToHistory(doc, change, selAfter, opId) {
    var hist = doc.history;
    hist.undone.length = 0;
    var time = +new Date, cur;

    if ((hist.lastOp == opId ||
         hist.lastOrigin == change.origin && change.origin &&
         ((change.origin.charAt(0) == "+" && doc.cm && hist.lastModTime > time - doc.cm.options.historyEventDelay) ||
          change.origin.charAt(0) == "*")) &&
        (cur = lastChangeEvent(hist, hist.lastOp == opId))) {
      // Merge this change into the last event
      var last = lst(cur.changes);
      if (cmp(change.from, change.to) == 0 && cmp(change.from, last.to) == 0) {
        // Optimized case for simple insertion -- don't want to add
        // new changesets for every character typed
        last.to = changeEnd(change);
      } else {
        // Add new sub-event
        cur.changes.push(historyChangeFromChange(doc, change));
      }
    } else {
      // Can not be merged, start a new event.
      var before = lst(hist.done);
      if (!before || !before.ranges)
        pushSelectionToHistory(doc.sel, hist.done);
      cur = {changes: [historyChangeFromChange(doc, change)],
             generation: hist.generation};
      hist.done.push(cur);
      while (hist.done.length > hist.undoDepth) {
        hist.done.shift();
        if (!hist.done[0].ranges) hist.done.shift();
      }
    }
    hist.done.push(selAfter);
    hist.generation = ++hist.maxGeneration;
    hist.lastModTime = hist.lastSelTime = time;
    hist.lastOp = hist.lastSelOp = opId;
    hist.lastOrigin = hist.lastSelOrigin = change.origin;

    if (!last) signal(doc, "historyAdded");
  }

  function selectionEventCanBeMerged(doc, origin, prev, sel) {
    var ch = origin.charAt(0);
    return ch == "*" ||
      ch == "+" &&
      prev.ranges.length == sel.ranges.length &&
      prev.somethingSelected() == sel.somethingSelected() &&
      new Date - doc.history.lastSelTime <= (doc.cm ? doc.cm.options.historyEventDelay : 500);
  }

  // Called whenever the selection changes, sets the new selection as
  // the pending selection in the history, and pushes the old pending
  // selection into the 'done' array when it was significantly
  // different (in number of selected ranges, emptiness, or time).
  function addSelectionToHistory(doc, sel, opId, options) {
    var hist = doc.history, origin = options && options.origin;

    // A new event is started when the previous origin does not match
    // the current, or the origins don't allow matching. Origins
    // starting with * are always merged, those starting with + are
    // merged when similar and close together in time.
    if (opId == hist.lastSelOp ||
        (origin && hist.lastSelOrigin == origin &&
         (hist.lastModTime == hist.lastSelTime && hist.lastOrigin == origin ||
          selectionEventCanBeMerged(doc, origin, lst(hist.done), sel))))
      hist.done[hist.done.length - 1] = sel;
    else
      pushSelectionToHistory(sel, hist.done);

    hist.lastSelTime = +new Date;
    hist.lastSelOrigin = origin;
    hist.lastSelOp = opId;
    if (options && options.clearRedo !== false)
      clearSelectionEvents(hist.undone);
  }

  function pushSelectionToHistory(sel, dest) {
    var top = lst(dest);
    if (!(top && top.ranges && top.equals(sel)))
      dest.push(sel);
  }

  // Used to store marked span information in the history.
  function attachLocalSpans(doc, change, from, to) {
    var existing = change["spans_" + doc.id], n = 0;
    doc.iter(Math.max(doc.first, from), Math.min(doc.first + doc.size, to), function(line) {
      if (line.markedSpans)
        (existing || (existing = change["spans_" + doc.id] = {}))[n] = line.markedSpans;
      ++n;
    });
  }

  // When un/re-doing restores text containing marked spans, those
  // that have been explicitly cleared should not be restored.
  function removeClearedSpans(spans) {
    if (!spans) return null;
    for (var i = 0, out; i < spans.length; ++i) {
      if (spans[i].marker.explicitlyCleared) { if (!out) out = spans.slice(0, i); }
      else if (out) out.push(spans[i]);
    }
    return !out ? spans : out.length ? out : null;
  }

  // Retrieve and filter the old marked spans stored in a change event.
  function getOldSpans(doc, change) {
    var found = change["spans_" + doc.id];
    if (!found) return null;
    for (var i = 0, nw = []; i < change.text.length; ++i)
      nw.push(removeClearedSpans(found[i]));
    return nw;
  }

  // Used both to provide a JSON-safe object in .getHistory, and, when
  // detaching a document, to split the history in two
  function copyHistoryArray(events, newGroup, instantiateSel) {
    for (var i = 0, copy = []; i < events.length; ++i) {
      var event = events[i];
      if (event.ranges) {
        copy.push(instantiateSel ? Selection.prototype.deepCopy.call(event) : event);
        continue;
      }
      var changes = event.changes, newChanges = [];
      copy.push({changes: newChanges});
      for (var j = 0; j < changes.length; ++j) {
        var change = changes[j], m;
        newChanges.push({from: change.from, to: change.to, text: change.text});
        if (newGroup) for (var prop in change) if (m = prop.match(/^spans_(\d+)$/)) {
          if (indexOf(newGroup, Number(m[1])) > -1) {
            lst(newChanges)[prop] = change[prop];
            delete change[prop];
          }
        }
      }
    }
    return copy;
  }

  // Rebasing/resetting history to deal with externally-sourced changes

  function rebaseHistSelSingle(pos, from, to, diff) {
    if (to < pos.line) {
      pos.line += diff;
    } else if (from < pos.line) {
      pos.line = from;
      pos.ch = 0;
    }
  }

  // Tries to rebase an array of history events given a change in the
  // document. If the change touches the same lines as the event, the
  // event, and everything 'behind' it, is discarded. If the change is
  // before the event, the event's positions are updated. Uses a
  // copy-on-write scheme for the positions, to avoid having to
  // reallocate them all on every rebase, but also avoid problems with
  // shared position objects being unsafely updated.
  function rebaseHistArray(array, from, to, diff) {
    for (var i = 0; i < array.length; ++i) {
      var sub = array[i], ok = true;
      if (sub.ranges) {
        if (!sub.copied) { sub = array[i] = sub.deepCopy(); sub.copied = true; }
        for (var j = 0; j < sub.ranges.length; j++) {
          rebaseHistSelSingle(sub.ranges[j].anchor, from, to, diff);
          rebaseHistSelSingle(sub.ranges[j].head, from, to, diff);
        }
        continue;
      }
      for (var j = 0; j < sub.changes.length; ++j) {
        var cur = sub.changes[j];
        if (to < cur.from.line) {
          cur.from = Pos(cur.from.line + diff, cur.from.ch);
          cur.to = Pos(cur.to.line + diff, cur.to.ch);
        } else if (from <= cur.to.line) {
          ok = false;
          break;
        }
      }
      if (!ok) {
        array.splice(0, i + 1);
        i = 0;
      }
    }
  }

  function rebaseHist(hist, change) {
    var from = change.from.line, to = change.to.line, diff = change.text.length - (to - from) - 1;
    rebaseHistArray(hist.done, from, to, diff);
    rebaseHistArray(hist.undone, from, to, diff);
  }

  // EVENT UTILITIES

  // Due to the fact that we still support jurassic IE versions, some
  // compatibility wrappers are needed.

  var e_preventDefault = CodeMirror.e_preventDefault = function(e) {
    if (e.preventDefault) e.preventDefault();
    else e.returnValue = false;
  };
  var e_stopPropagation = CodeMirror.e_stopPropagation = function(e) {
    if (e.stopPropagation) e.stopPropagation();
    else e.cancelBubble = true;
  };
  function e_defaultPrevented(e) {
    return e.defaultPrevented != null ? e.defaultPrevented : e.returnValue == false;
  }
  var e_stop = CodeMirror.e_stop = function(e) {e_preventDefault(e); e_stopPropagation(e);};

  function e_target(e) {return e.target || e.srcElement;}
  function e_button(e) {
    var b = e.which;
    if (b == null) {
      if (e.button & 1) b = 1;
      else if (e.button & 2) b = 3;
      else if (e.button & 4) b = 2;
    }
    if (mac && e.ctrlKey && b == 1) b = 3;
    return b;
  }

  // EVENT HANDLING

  // Lightweight event framework. on/off also work on DOM nodes,
  // registering native DOM handlers.

  var on = CodeMirror.on = function(emitter, type, f) {
    if (emitter.addEventListener)
      emitter.addEventListener(type, f, false);
    else if (emitter.attachEvent)
      emitter.attachEvent("on" + type, f);
    else {
      var map = emitter._handlers || (emitter._handlers = {});
      var arr = map[type] || (map[type] = []);
      arr.push(f);
    }
  };

  var off = CodeMirror.off = function(emitter, type, f) {
    if (emitter.removeEventListener)
      emitter.removeEventListener(type, f, false);
    else if (emitter.detachEvent)
      emitter.detachEvent("on" + type, f);
    else {
      var arr = emitter._handlers && emitter._handlers[type];
      if (!arr) return;
      for (var i = 0; i < arr.length; ++i)
        if (arr[i] == f) { arr.splice(i, 1); break; }
    }
  };

  var signal = CodeMirror.signal = function(emitter, type /*, values...*/) {
    var arr = emitter._handlers && emitter._handlers[type];
    if (!arr) return;
    var args = Array.prototype.slice.call(arguments, 2);
    for (var i = 0; i < arr.length; ++i) arr[i].apply(null, args);
  };

  var orphanDelayedCallbacks = null;

  // Often, we want to signal events at a point where we are in the
  // middle of some work, but don't want the handler to start calling
  // other methods on the editor, which might be in an inconsistent
  // state or simply not expect any other events to happen.
  // signalLater looks whether there are any handlers, and schedules
  // them to be executed when the last operation ends, or, if no
  // operation is active, when a timeout fires.
  function signalLater(emitter, type /*, values...*/) {
    var arr = emitter._handlers && emitter._handlers[type];
    if (!arr) return;
    var args = Array.prototype.slice.call(arguments, 2), list;
    if (operationGroup) {
      list = operationGroup.delayedCallbacks;
    } else if (orphanDelayedCallbacks) {
      list = orphanDelayedCallbacks;
    } else {
      list = orphanDelayedCallbacks = [];
      setTimeout(fireOrphanDelayed, 0);
    }
    function bnd(f) {return function(){f.apply(null, args);};};
    for (var i = 0; i < arr.length; ++i)
      list.push(bnd(arr[i]));
  }

  function fireOrphanDelayed() {
    var delayed = orphanDelayedCallbacks;
    orphanDelayedCallbacks = null;
    for (var i = 0; i < delayed.length; ++i) delayed[i]();
  }

  // The DOM events that CodeMirror handles can be overridden by
  // registering a (non-DOM) handler on the editor for the event name,
  // and preventDefault-ing the event in that handler.
  function signalDOMEvent(cm, e, override) {
    signal(cm, override || e.type, cm, e);
    return e_defaultPrevented(e) || e.codemirrorIgnore;
  }

  function signalCursorActivity(cm) {
    var arr = cm._handlers && cm._handlers.cursorActivity;
    if (!arr) return;
    var set = cm.curOp.cursorActivityHandlers || (cm.curOp.cursorActivityHandlers = []);
    for (var i = 0; i < arr.length; ++i) if (indexOf(set, arr[i]) == -1)
      set.push(arr[i]);
  }

  function hasHandler(emitter, type) {
    var arr = emitter._handlers && emitter._handlers[type];
    return arr && arr.length > 0;
  }

  // Add on and off methods to a constructor's prototype, to make
  // registering events on such objects more convenient.
  function eventMixin(ctor) {
    ctor.prototype.on = function(type, f) {on(this, type, f);};
    ctor.prototype.off = function(type, f) {off(this, type, f);};
  }

  // MISC UTILITIES

  // Number of pixels added to scroller and sizer to hide scrollbar
  var scrollerCutOff = 30;

  // Returned or thrown by various protocols to signal 'I'm not
  // handling this'.
  var Pass = CodeMirror.Pass = {toString: function(){return "CodeMirror.Pass";}};

  // Reused option objects for setSelection & friends
  var sel_dontScroll = {scroll: false}, sel_mouse = {origin: "*mouse"}, sel_move = {origin: "+move"};

  function Delayed() {this.id = null;}
  Delayed.prototype.set = function(ms, f) {
    clearTimeout(this.id);
    this.id = setTimeout(f, ms);
  };

  // Counts the column offset in a string, taking tabs into account.
  // Used mostly to find indentation.
  var countColumn = CodeMirror.countColumn = function(string, end, tabSize, startIndex, startValue) {
    if (end == null) {
      end = string.search(/[^\s\u00a0]/);
      if (end == -1) end = string.length;
    }
    for (var i = startIndex || 0, n = startValue || 0;;) {
      var nextTab = string.indexOf("\t", i);
      if (nextTab < 0 || nextTab >= end)
        return n + (end - i);
      n += nextTab - i;
      n += tabSize - (n % tabSize);
      i = nextTab + 1;
    }
  };

  // The inverse of countColumn -- find the offset that corresponds to
  // a particular column.
  function findColumn(string, goal, tabSize) {
    for (var pos = 0, col = 0;;) {
      var nextTab = string.indexOf("\t", pos);
      if (nextTab == -1) nextTab = string.length;
      var skipped = nextTab - pos;
      if (nextTab == string.length || col + skipped >= goal)
        return pos + Math.min(skipped, goal - col);
      col += nextTab - pos;
      col += tabSize - (col % tabSize);
      pos = nextTab + 1;
      if (col >= goal) return pos;
    }
  }

  var spaceStrs = [""];
  function spaceStr(n) {
    while (spaceStrs.length <= n)
      spaceStrs.push(lst(spaceStrs) + " ");
    return spaceStrs[n];
  }

  function lst(arr) { return arr[arr.length-1]; }

  var selectInput = function(node) { node.select(); };
  if (ios) // Mobile Safari apparently has a bug where select() is broken.
    selectInput = function(node) { node.selectionStart = 0; node.selectionEnd = node.value.length; };
  else if (ie) // Suppress mysterious IE10 errors
    selectInput = function(node) { try { node.select(); } catch(_e) {} };

  function indexOf(array, elt) {
    for (var i = 0; i < array.length; ++i)
      if (array[i] == elt) return i;
    return -1;
  }
  if ([].indexOf) indexOf = function(array, elt) { return array.indexOf(elt); };
  function map(array, f) {
    var out = [];
    for (var i = 0; i < array.length; i++) out[i] = f(array[i], i);
    return out;
  }
  if ([].map) map = function(array, f) { return array.map(f); };

  function createObj(base, props) {
    var inst;
    if (Object.create) {
      inst = Object.create(base);
    } else {
      var ctor = function() {};
      ctor.prototype = base;
      inst = new ctor();
    }
    if (props) copyObj(props, inst);
    return inst;
  };

  function copyObj(obj, target, overwrite) {
    if (!target) target = {};
    for (var prop in obj)
      if (obj.hasOwnProperty(prop) && (overwrite !== false || !target.hasOwnProperty(prop)))
        target[prop] = obj[prop];
    return target;
  }

  function bind(f) {
    var args = Array.prototype.slice.call(arguments, 1);
    return function(){return f.apply(null, args);};
  }

  var nonASCIISingleCaseWordChar = /[\u00df\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;
  var isWordCharBasic = CodeMirror.isWordChar = function(ch) {
    return /\w/.test(ch) || ch > "\x80" &&
      (ch.toUpperCase() != ch.toLowerCase() || nonASCIISingleCaseWordChar.test(ch));
  };
  function isWordChar(ch, helper) {
    if (!helper) return isWordCharBasic(ch);
    if (helper.source.indexOf("\\w") > -1 && isWordCharBasic(ch)) return true;
    return helper.test(ch);
  }

  function isEmpty(obj) {
    for (var n in obj) if (obj.hasOwnProperty(n) && obj[n]) return false;
    return true;
  }

  // Extending unicode characters. A series of a non-extending char +
  // any number of extending chars is treated as a single unit as far
  // as editing and measuring is concerned. This is not fully correct,
  // since some scripts/fonts/browsers also treat other configurations
  // of code points as a group.
  var extendingChars = /[\u0300-\u036f\u0483-\u0489\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u064b-\u065e\u0670\u06d6-\u06dc\u06de-\u06e4\u06e7\u06e8\u06ea-\u06ed\u0711\u0730-\u074a\u07a6-\u07b0\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0900-\u0902\u093c\u0941-\u0948\u094d\u0951-\u0955\u0962\u0963\u0981\u09bc\u09be\u09c1-\u09c4\u09cd\u09d7\u09e2\u09e3\u0a01\u0a02\u0a3c\u0a41\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a70\u0a71\u0a75\u0a81\u0a82\u0abc\u0ac1-\u0ac5\u0ac7\u0ac8\u0acd\u0ae2\u0ae3\u0b01\u0b3c\u0b3e\u0b3f\u0b41-\u0b44\u0b4d\u0b56\u0b57\u0b62\u0b63\u0b82\u0bbe\u0bc0\u0bcd\u0bd7\u0c3e-\u0c40\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62\u0c63\u0cbc\u0cbf\u0cc2\u0cc6\u0ccc\u0ccd\u0cd5\u0cd6\u0ce2\u0ce3\u0d3e\u0d41-\u0d44\u0d4d\u0d57\u0d62\u0d63\u0dca\u0dcf\u0dd2-\u0dd4\u0dd6\u0ddf\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0eb1\u0eb4-\u0eb9\u0ebb\u0ebc\u0ec8-\u0ecd\u0f18\u0f19\u0f35\u0f37\u0f39\u0f71-\u0f7e\u0f80-\u0f84\u0f86\u0f87\u0f90-\u0f97\u0f99-\u0fbc\u0fc6\u102d-\u1030\u1032-\u1037\u1039\u103a\u103d\u103e\u1058\u1059\u105e-\u1060\u1071-\u1074\u1082\u1085\u1086\u108d\u109d\u135f\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17b7-\u17bd\u17c6\u17c9-\u17d3\u17dd\u180b-\u180d\u18a9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193b\u1a17\u1a18\u1a56\u1a58-\u1a5e\u1a60\u1a62\u1a65-\u1a6c\u1a73-\u1a7c\u1a7f\u1b00-\u1b03\u1b34\u1b36-\u1b3a\u1b3c\u1b42\u1b6b-\u1b73\u1b80\u1b81\u1ba2-\u1ba5\u1ba8\u1ba9\u1c2c-\u1c33\u1c36\u1c37\u1cd0-\u1cd2\u1cd4-\u1ce0\u1ce2-\u1ce8\u1ced\u1dc0-\u1de6\u1dfd-\u1dff\u200c\u200d\u20d0-\u20f0\u2cef-\u2cf1\u2de0-\u2dff\u302a-\u302f\u3099\u309a\ua66f-\ua672\ua67c\ua67d\ua6f0\ua6f1\ua802\ua806\ua80b\ua825\ua826\ua8c4\ua8e0-\ua8f1\ua926-\ua92d\ua947-\ua951\ua980-\ua982\ua9b3\ua9b6-\ua9b9\ua9bc\uaa29-\uaa2e\uaa31\uaa32\uaa35\uaa36\uaa43\uaa4c\uaab0\uaab2-\uaab4\uaab7\uaab8\uaabe\uaabf\uaac1\uabe5\uabe8\uabed\udc00-\udfff\ufb1e\ufe00-\ufe0f\ufe20-\ufe26\uff9e\uff9f]/;
  function isExtendingChar(ch) { return ch.charCodeAt(0) >= 768 && extendingChars.test(ch); }

  // DOM UTILITIES

  function elt(tag, content, className, style) {
    var e = document.createElement(tag);
    if (className) e.className = className;
    if (style) e.style.cssText = style;
    if (typeof content == "string") e.appendChild(document.createTextNode(content));
    else if (content) for (var i = 0; i < content.length; ++i) e.appendChild(content[i]);
    return e;
  }

  var range;
  if (document.createRange) range = function(node, start, end) {
    var r = document.createRange();
    r.setEnd(node, end);
    r.setStart(node, start);
    return r;
  };
  else range = function(node, start, end) {
    var r = document.body.createTextRange();
    r.moveToElementText(node.parentNode);
    r.collapse(true);
    r.moveEnd("character", end);
    r.moveStart("character", start);
    return r;
  };

  function removeChildren(e) {
    for (var count = e.childNodes.length; count > 0; --count)
      e.removeChild(e.firstChild);
    return e;
  }

  function removeChildrenAndAdd(parent, e) {
    return removeChildren(parent).appendChild(e);
  }

  function contains(parent, child) {
    if (parent.contains)
      return parent.contains(child);
    while (child = child.parentNode)
      if (child == parent) return true;
  }

  function activeElt() { return document.activeElement; }
  // Older versions of IE throws unspecified error when touching
  // document.activeElement in some cases (during loading, in iframe)
  if (ie && ie_version < 11) activeElt = function() {
    try { return document.activeElement; }
    catch(e) { return document.body; }
  };

  function classTest(cls) { return new RegExp("\\b" + cls + "\\b\\s*"); }
  function rmClass(node, cls) {
    var test = classTest(cls);
    if (test.test(node.className)) node.className = node.className.replace(test, "");
  }
  function addClass(node, cls) {
    if (!classTest(cls).test(node.className)) node.className += " " + cls;
  }
  function joinClasses(a, b) {
    var as = a.split(" ");
    for (var i = 0; i < as.length; i++)
      if (as[i] && !classTest(as[i]).test(b)) b += " " + as[i];
    return b;
  }

  // WINDOW-WIDE EVENTS

  // These must be handled carefully, because naively registering a
  // handler for each editor will cause the editors to never be
  // garbage collected.

  function forEachCodeMirror(f) {
    if (!document.body.getElementsByClassName) return;
    var byClass = document.body.getElementsByClassName("CodeMirror");
    for (var i = 0; i < byClass.length; i++) {
      var cm = byClass[i].CodeMirror;
      if (cm) f(cm);
    }
  }

  var globalsRegistered = false;
  function ensureGlobalHandlers() {
    if (globalsRegistered) return;
    registerGlobalHandlers();
    globalsRegistered = true;
  }
  function registerGlobalHandlers() {
    // When the window resizes, we need to refresh active editors.
    var resizeTimer;
    on(window, "resize", function() {
      if (resizeTimer == null) resizeTimer = setTimeout(function() {
        resizeTimer = null;
        knownScrollbarWidth = null;
        forEachCodeMirror(onResize);
      }, 100);
    });
    // When the window loses focus, we want to show the editor as blurred
    on(window, "blur", function() {
      forEachCodeMirror(onBlur);
    });
  }

  // FEATURE DETECTION

  // Detect drag-and-drop
  var dragAndDrop = function() {
    // There is *some* kind of drag-and-drop support in IE6-8, but I
    // couldn't get it to work yet.
    if (ie && ie_version < 9) return false;
    var div = elt('div');
    return "draggable" in div || "dragDrop" in div;
  }();

  var knownScrollbarWidth;
  function scrollbarWidth(measure) {
    if (knownScrollbarWidth != null) return knownScrollbarWidth;
    var test = elt("div", null, null, "width: 50px; height: 50px; overflow-x: scroll");
    removeChildrenAndAdd(measure, test);
    if (test.offsetWidth)
      knownScrollbarWidth = test.offsetHeight - test.clientHeight;
    return knownScrollbarWidth || 0;
  }

  var zwspSupported;
  function zeroWidthElement(measure) {
    if (zwspSupported == null) {
      var test = elt("span", "\u200b");
      removeChildrenAndAdd(measure, elt("span", [test, document.createTextNode("x")]));
      if (measure.firstChild.offsetHeight != 0)
        zwspSupported = test.offsetWidth <= 1 && test.offsetHeight > 2 && !(ie && ie_version < 8);
    }
    if (zwspSupported) return elt("span", "\u200b");
    else return elt("span", "\u00a0", null, "display: inline-block; width: 1px; margin-right: -1px");
  }

  // Feature-detect IE's crummy client rect reporting for bidi text
  var badBidiRects;
  function hasBadBidiRects(measure) {
    if (badBidiRects != null) return badBidiRects;
    var txt = removeChildrenAndAdd(measure, document.createTextNode("A\u062eA"));
    var r0 = range(txt, 0, 1).getBoundingClientRect();
    if (!r0 || r0.left == r0.right) return false; // Safari returns null in some cases (#2780)
    var r1 = range(txt, 1, 2).getBoundingClientRect();
    return badBidiRects = (r1.right - r0.right < 3);
  }

  // See if "".split is the broken IE version, if so, provide an
  // alternative way to split lines.
  var splitLines = CodeMirror.splitLines = "\n\nb".split(/\n/).length != 3 ? function(string) {
    var pos = 0, result = [], l = string.length;
    while (pos <= l) {
      var nl = string.indexOf("\n", pos);
      if (nl == -1) nl = string.length;
      var line = string.slice(pos, string.charAt(nl - 1) == "\r" ? nl - 1 : nl);
      var rt = line.indexOf("\r");
      if (rt != -1) {
        result.push(line.slice(0, rt));
        pos += rt + 1;
      } else {
        result.push(line);
        pos = nl + 1;
      }
    }
    return result;
  } : function(string){return string.split(/\r\n?|\n/);};

  var hasSelection = window.getSelection ? function(te) {
    try { return te.selectionStart != te.selectionEnd; }
    catch(e) { return false; }
  } : function(te) {
    try {var range = te.ownerDocument.selection.createRange();}
    catch(e) {}
    if (!range || range.parentElement() != te) return false;
    return range.compareEndPoints("StartToEnd", range) != 0;
  };

  var hasCopyEvent = (function() {
    var e = elt("div");
    if ("oncopy" in e) return true;
    e.setAttribute("oncopy", "return;");
    return typeof e.oncopy == "function";
  })();

  var badZoomedRects = null;
  function hasBadZoomedRects(measure) {
    if (badZoomedRects != null) return badZoomedRects;
    var node = removeChildrenAndAdd(measure, elt("span", "x"));
    var normal = node.getBoundingClientRect();
    var fromRange = range(node, 0, 1).getBoundingClientRect();
    return badZoomedRects = Math.abs(normal.left - fromRange.left) > 1;
  }

  // KEY NAMES

  var keyNames = {3: "Enter", 8: "Backspace", 9: "Tab", 13: "Enter", 16: "Shift", 17: "Ctrl", 18: "Alt",
                  19: "Pause", 20: "CapsLock", 27: "Esc", 32: "Space", 33: "PageUp", 34: "PageDown", 35: "End",
                  36: "Home", 37: "Left", 38: "Up", 39: "Right", 40: "Down", 44: "PrintScrn", 45: "Insert",
                  46: "Delete", 59: ";", 61: "=", 91: "Mod", 92: "Mod", 93: "Mod", 107: "=", 109: "-", 127: "Delete",
                  173: "-", 186: ";", 187: "=", 188: ",", 189: "-", 190: ".", 191: "/", 192: "`", 219: "[", 220: "\\",
                  221: "]", 222: "'", 63232: "Up", 63233: "Down", 63234: "Left", 63235: "Right", 63272: "Delete",
                  63273: "Home", 63275: "End", 63276: "PageUp", 63277: "PageDown", 63302: "Insert"};
  CodeMirror.keyNames = keyNames;
  (function() {
    // Number keys
    for (var i = 0; i < 10; i++) keyNames[i + 48] = keyNames[i + 96] = String(i);
    // Alphabetic keys
    for (var i = 65; i <= 90; i++) keyNames[i] = String.fromCharCode(i);
    // Function keys
    for (var i = 1; i <= 12; i++) keyNames[i + 111] = keyNames[i + 63235] = "F" + i;
  })();

  // BIDI HELPERS

  function iterateBidiSections(order, from, to, f) {
    if (!order) return f(from, to, "ltr");
    var found = false;
    for (var i = 0; i < order.length; ++i) {
      var part = order[i];
      if (part.from < to && part.to > from || from == to && part.to == from) {
        f(Math.max(part.from, from), Math.min(part.to, to), part.level == 1 ? "rtl" : "ltr");
        found = true;
      }
    }
    if (!found) f(from, to, "ltr");
  }

  function bidiLeft(part) { return part.level % 2 ? part.to : part.from; }
  function bidiRight(part) { return part.level % 2 ? part.from : part.to; }

  function lineLeft(line) { var order = getOrder(line); return order ? bidiLeft(order[0]) : 0; }
  function lineRight(line) {
    var order = getOrder(line);
    if (!order) return line.text.length;
    return bidiRight(lst(order));
  }

  function lineStart(cm, lineN) {
    var line = getLine(cm.doc, lineN);
    var visual = visualLine(line);
    if (visual != line) lineN = lineNo(visual);
    var order = getOrder(visual);
    var ch = !order ? 0 : order[0].level % 2 ? lineRight(visual) : lineLeft(visual);
    return Pos(lineN, ch);
  }
  function lineEnd(cm, lineN) {
    var merged, line = getLine(cm.doc, lineN);
    while (merged = collapsedSpanAtEnd(line)) {
      line = merged.find(1, true).line;
      lineN = null;
    }
    var order = getOrder(line);
    var ch = !order ? line.text.length : order[0].level % 2 ? lineLeft(line) : lineRight(line);
    return Pos(lineN == null ? lineNo(line) : lineN, ch);
  }
  function lineStartSmart(cm, pos) {
    var start = lineStart(cm, pos.line);
    var line = getLine(cm.doc, start.line);
    var order = getOrder(line);
    if (!order || order[0].level == 0) {
      var firstNonWS = Math.max(0, line.text.search(/\S/));
      var inWS = pos.line == start.line && pos.ch <= firstNonWS && pos.ch;
      return Pos(start.line, inWS ? 0 : firstNonWS);
    }
    return start;
  }

  function compareBidiLevel(order, a, b) {
    var linedir = order[0].level;
    if (a == linedir) return true;
    if (b == linedir) return false;
    return a < b;
  }
  var bidiOther;
  function getBidiPartAt(order, pos) {
    bidiOther = null;
    for (var i = 0, found; i < order.length; ++i) {
      var cur = order[i];
      if (cur.from < pos && cur.to > pos) return i;
      if ((cur.from == pos || cur.to == pos)) {
        if (found == null) {
          found = i;
        } else if (compareBidiLevel(order, cur.level, order[found].level)) {
          if (cur.from != cur.to) bidiOther = found;
          return i;
        } else {
          if (cur.from != cur.to) bidiOther = i;
          return found;
        }
      }
    }
    return found;
  }

  function moveInLine(line, pos, dir, byUnit) {
    if (!byUnit) return pos + dir;
    do pos += dir;
    while (pos > 0 && isExtendingChar(line.text.charAt(pos)));
    return pos;
  }

  // This is needed in order to move 'visually' through bi-directional
  // text -- i.e., pressing left should make the cursor go left, even
  // when in RTL text. The tricky part is the 'jumps', where RTL and
  // LTR text touch each other. This often requires the cursor offset
  // to move more than one unit, in order to visually move one unit.
  function moveVisually(line, start, dir, byUnit) {
    var bidi = getOrder(line);
    if (!bidi) return moveLogically(line, start, dir, byUnit);
    var pos = getBidiPartAt(bidi, start), part = bidi[pos];
    var target = moveInLine(line, start, part.level % 2 ? -dir : dir, byUnit);

    for (;;) {
      if (target > part.from && target < part.to) return target;
      if (target == part.from || target == part.to) {
        if (getBidiPartAt(bidi, target) == pos) return target;
        part = bidi[pos += dir];
        return (dir > 0) == part.level % 2 ? part.to : part.from;
      } else {
        part = bidi[pos += dir];
        if (!part) return null;
        if ((dir > 0) == part.level % 2)
          target = moveInLine(line, part.to, -1, byUnit);
        else
          target = moveInLine(line, part.from, 1, byUnit);
      }
    }
  }

  function moveLogically(line, start, dir, byUnit) {
    var target = start + dir;
    if (byUnit) while (target > 0 && isExtendingChar(line.text.charAt(target))) target += dir;
    return target < 0 || target > line.text.length ? null : target;
  }

  // Bidirectional ordering algorithm
  // See http://unicode.org/reports/tr9/tr9-13.html for the algorithm
  // that this (partially) implements.

  // One-char codes used for character types:
  // L (L):   Left-to-Right
  // R (R):   Right-to-Left
  // r (AL):  Right-to-Left Arabic
  // 1 (EN):  European Number
  // + (ES):  European Number Separator
  // % (ET):  European Number Terminator
  // n (AN):  Arabic Number
  // , (CS):  Common Number Separator
  // m (NSM): Non-Spacing Mark
  // b (BN):  Boundary Neutral
  // s (B):   Paragraph Separator
  // t (S):   Segment Separator
  // w (WS):  Whitespace
  // N (ON):  Other Neutrals

  // Returns null if characters are ordered as they appear
  // (left-to-right), or an array of sections ({from, to, level}
  // objects) in the order in which they occur visually.
  var bidiOrdering = (function() {
    // Character types for codepoints 0 to 0xff
    var lowTypes = "bbbbbbbbbtstwsbbbbbbbbbbbbbbssstwNN%%%NNNNNN,N,N1111111111NNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNbbbbbbsbbbbbbbbbbbbbbbbbbbbbbbbbb,N%%%%NNNNLNNNNN%%11NLNNN1LNNNNNLLLLLLLLLLLLLLLLLLLLLLLNLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLN";
    // Character types for codepoints 0x600 to 0x6ff
    var arabicTypes = "rrrrrrrrrrrr,rNNmmmmmmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmrrrrrrrnnnnnnnnnn%nnrrrmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmmmmmmNmmmm";
    function charType(code) {
      if (code <= 0xf7) return lowTypes.charAt(code);
      else if (0x590 <= code && code <= 0x5f4) return "R";
      else if (0x600 <= code && code <= 0x6ed) return arabicTypes.charAt(code - 0x600);
      else if (0x6ee <= code && code <= 0x8ac) return "r";
      else if (0x2000 <= code && code <= 0x200b) return "w";
      else if (code == 0x200c) return "b";
      else return "L";
    }

    var bidiRE = /[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;
    var isNeutral = /[stwN]/, isStrong = /[LRr]/, countsAsLeft = /[Lb1n]/, countsAsNum = /[1n]/;
    // Browsers seem to always treat the boundaries of block elements as being L.
    var outerType = "L";

    function BidiSpan(level, from, to) {
      this.level = level;
      this.from = from; this.to = to;
    }

    return function(str) {
      if (!bidiRE.test(str)) return false;
      var len = str.length, types = [];
      for (var i = 0, type; i < len; ++i)
        types.push(type = charType(str.charCodeAt(i)));

      // W1. Examine each non-spacing mark (NSM) in the level run, and
      // change the type of the NSM to the type of the previous
      // character. If the NSM is at the start of the level run, it will
      // get the type of sor.
      for (var i = 0, prev = outerType; i < len; ++i) {
        var type = types[i];
        if (type == "m") types[i] = prev;
        else prev = type;
      }

      // W2. Search backwards from each instance of a European number
      // until the first strong type (R, L, AL, or sor) is found. If an
      // AL is found, change the type of the European number to Arabic
      // number.
      // W3. Change all ALs to R.
      for (var i = 0, cur = outerType; i < len; ++i) {
        var type = types[i];
        if (type == "1" && cur == "r") types[i] = "n";
        else if (isStrong.test(type)) { cur = type; if (type == "r") types[i] = "R"; }
      }

      // W4. A single European separator between two European numbers
      // changes to a European number. A single common separator between
      // two numbers of the same type changes to that type.
      for (var i = 1, prev = types[0]; i < len - 1; ++i) {
        var type = types[i];
        if (type == "+" && prev == "1" && types[i+1] == "1") types[i] = "1";
        else if (type == "," && prev == types[i+1] &&
                 (prev == "1" || prev == "n")) types[i] = prev;
        prev = type;
      }

      // W5. A sequence of European terminators adjacent to European
      // numbers changes to all European numbers.
      // W6. Otherwise, separators and terminators change to Other
      // Neutral.
      for (var i = 0; i < len; ++i) {
        var type = types[i];
        if (type == ",") types[i] = "N";
        else if (type == "%") {
          for (var end = i + 1; end < len && types[end] == "%"; ++end) {}
          var replace = (i && types[i-1] == "!") || (end < len && types[end] == "1") ? "1" : "N";
          for (var j = i; j < end; ++j) types[j] = replace;
          i = end - 1;
        }
      }

      // W7. Search backwards from each instance of a European number
      // until the first strong type (R, L, or sor) is found. If an L is
      // found, then change the type of the European number to L.
      for (var i = 0, cur = outerType; i < len; ++i) {
        var type = types[i];
        if (cur == "L" && type == "1") types[i] = "L";
        else if (isStrong.test(type)) cur = type;
      }

      // N1. A sequence of neutrals takes the direction of the
      // surrounding strong text if the text on both sides has the same
      // direction. European and Arabic numbers act as if they were R in
      // terms of their influence on neutrals. Start-of-level-run (sor)
      // and end-of-level-run (eor) are used at level run boundaries.
      // N2. Any remaining neutrals take the embedding direction.
      for (var i = 0; i < len; ++i) {
        if (isNeutral.test(types[i])) {
          for (var end = i + 1; end < len && isNeutral.test(types[end]); ++end) {}
          var before = (i ? types[i-1] : outerType) == "L";
          var after = (end < len ? types[end] : outerType) == "L";
          var replace = before || after ? "L" : "R";
          for (var j = i; j < end; ++j) types[j] = replace;
          i = end - 1;
        }
      }

      // Here we depart from the documented algorithm, in order to avoid
      // building up an actual levels array. Since there are only three
      // levels (0, 1, 2) in an implementation that doesn't take
      // explicit embedding into account, we can build up the order on
      // the fly, without following the level-based algorithm.
      var order = [], m;
      for (var i = 0; i < len;) {
        if (countsAsLeft.test(types[i])) {
          var start = i;
          for (++i; i < len && countsAsLeft.test(types[i]); ++i) {}
          order.push(new BidiSpan(0, start, i));
        } else {
          var pos = i, at = order.length;
          for (++i; i < len && types[i] != "L"; ++i) {}
          for (var j = pos; j < i;) {
            if (countsAsNum.test(types[j])) {
              if (pos < j) order.splice(at, 0, new BidiSpan(1, pos, j));
              var nstart = j;
              for (++j; j < i && countsAsNum.test(types[j]); ++j) {}
              order.splice(at, 0, new BidiSpan(2, nstart, j));
              pos = j;
            } else ++j;
          }
          if (pos < i) order.splice(at, 0, new BidiSpan(1, pos, i));
        }
      }
      if (order[0].level == 1 && (m = str.match(/^\s+/))) {
        order[0].from = m[0].length;
        order.unshift(new BidiSpan(0, 0, m[0].length));
      }
      if (lst(order).level == 1 && (m = str.match(/\s+$/))) {
        lst(order).to -= m[0].length;
        order.push(new BidiSpan(0, len - m[0].length, len));
      }
      if (order[0].level != lst(order).level)
        order.push(new BidiSpan(order[0].level, len, len));

      return order;
    };
  })();

  // THE END

  CodeMirror.version = "4.6.0";

  return CodeMirror;
});

/* 
 *  DSP.js - a comprehensive digital signal processing  library for javascript
 * 
 *  Created by Corban Brook <corbanbrook@gmail.com> on 2010-01-01.
 *  Copyright 2010 Corban Brook. All rights reserved.
 *
 */

////////////////////////////////////////////////////////////////////////////////
//                                  CONSTANTS                                 //
////////////////////////////////////////////////////////////////////////////////

/**
 * DSP is an object which contains general purpose utility functions and constants
 */
var DSP = {
  // Channels
  LEFT:           0,
  RIGHT:          1,
  MIX:            2,

  // Waveforms
  SINE:           1,
  TRIANGLE:       2,
  SAW:            3,
  SQUARE:         4,

  // Filters
  LOWPASS:        0,
  HIGHPASS:       1,
  BANDPASS:       2,
  NOTCH:          3,

  // Window functions
  BARTLETT:       1,
  BARTLETTHANN:   2,
  BLACKMAN:       3,
  COSINE:         4,
  GAUSS:          5,
  HAMMING:        6,
  HANN:           7,
  LANCZOS:        8,
  RECTANGULAR:    9,
  TRIANGULAR:     10,

  // Loop modes
  OFF:            0,
  FW:             1,
  BW:             2,
  FWBW:           3,

  // Math
  TWO_PI:         2*Math.PI
};

// Setup arrays for platforms which do not support byte arrays
function setupTypedArray(name, fallback) {
  // check if TypedArray exists
  // typeof on Minefield and Chrome return function, typeof on Webkit returns object.
  if (typeof this[name] !== "function" && typeof this[name] !== "object") {
    // nope.. check if WebGLArray exists
    if (typeof this[fallback] === "function" && typeof this[fallback] !== "object") {
      this[name] = this[fallback];
    } else {
      // nope.. set as Native JS array
      this[name] = function(obj) {
        if (obj instanceof Array) {
          return obj;
        } else if (typeof obj === "number") {
          return new Array(obj);
        }
      };
    }
  }
}

setupTypedArray("Float32Array", "WebGLFloatArray");
setupTypedArray("Int32Array",   "WebGLIntArray");
setupTypedArray("Uint16Array",  "WebGLUnsignedShortArray");
setupTypedArray("Uint8Array",   "WebGLUnsignedByteArray");


////////////////////////////////////////////////////////////////////////////////
//                            DSP UTILITY FUNCTIONS                           //
////////////////////////////////////////////////////////////////////////////////

/**
 * Inverts the phase of a signal
 *
 * @param {Array} buffer A sample buffer
 *
 * @returns The inverted sample buffer
 */
DSP.invert = function(buffer) {
  for (var i = 0, len = buffer.length; i < len; i++) {
    buffer[i] *= -1;
  }

  return buffer;
};

/**
 * Converts split-stereo (dual mono) sample buffers into a stereo interleaved sample buffer
 *
 * @param {Array} left  A sample buffer
 * @param {Array} right A sample buffer
 *
 * @returns The stereo interleaved buffer
 */
DSP.interleave = function(left, right) {
  if (left.length !== right.length) {
    throw "Can not interleave. Channel lengths differ.";
  }
 
  var stereoInterleaved = new Float32Array(left.length * 2);
 
  for (var i = 0, len = left.length; i < len; i++) {
    stereoInterleaved[2*i]   = left[i];
    stereoInterleaved[2*i+1] = right[i];
  }
 
  return stereoInterleaved;
};

/**
 * Converts a stereo-interleaved sample buffer into split-stereo (dual mono) sample buffers
 *
 * @param {Array} buffer A stereo-interleaved sample buffer
 *
 * @returns an Array containing left and right channels
 */
DSP.deinterleave = (function() {
  var left, right, mix, deinterleaveChannel = []; 

  deinterleaveChannel[DSP.MIX] = function(buffer) {
    for (var i = 0, len = buffer.length/2; i < len; i++) {
      mix[i] = (buffer[2*i] + buffer[2*i+1]) / 2;
    }
    return mix;
  };

  deinterleaveChannel[DSP.LEFT] = function(buffer) {
    for (var i = 0, len = buffer.length/2; i < len; i++) {
      left[i]  = buffer[2*i];
    }
    return left;
  };

  deinterleaveChannel[DSP.RIGHT] = function(buffer) {
    for (var i = 0, len = buffer.length/2; i < len; i++) {
      right[i]  = buffer[2*i+1];
    }
    return right;
  };

  return function(channel, buffer) { 
    left  = left  || new Float32Array(buffer.length/2);
    right = right || new Float32Array(buffer.length/2);
    mix   = mix   || new Float32Array(buffer.length/2);

    if (buffer.length/2 !== left.length) {
      left  = new Float32Array(buffer.length/2);
      right = new Float32Array(buffer.length/2);
      mix   = new Float32Array(buffer.length/2);
    }

    return deinterleaveChannel[channel](buffer);
  };
}());

/**
 * Separates a channel from a stereo-interleaved sample buffer
 *
 * @param {Array}  buffer A stereo-interleaved sample buffer
 * @param {Number} channel A channel constant (LEFT, RIGHT, MIX)
 *
 * @returns an Array containing a signal mono sample buffer
 */
DSP.getChannel = DSP.deinterleave;

/**
 * Helper method (for Reverb) to mix two (interleaved) samplebuffers. It's possible
 * to negate the second buffer while mixing and to perform a volume correction
 * on the final signal.
 *
 * @param {Array} sampleBuffer1 Array containing Float values or a Float32Array
 * @param {Array} sampleBuffer2 Array containing Float values or a Float32Array
 * @param {Boolean} negate When true inverts/flips the audio signal
 * @param {Number} volumeCorrection When you add multiple sample buffers, use this to tame your signal ;)
 *
 * @returns A new Float32Array interleaved buffer.
 */
DSP.mixSampleBuffers = function(sampleBuffer1, sampleBuffer2, negate, volumeCorrection){
  var outputSamples = new Float32Array(sampleBuffer1);

  for(var i = 0; i<sampleBuffer1.length; i++){
    outputSamples[i] += (negate ? -sampleBuffer2[i] : sampleBuffer2[i]) / volumeCorrection;
  }
 
  return outputSamples;
}; 

// Biquad filter types
DSP.LPF = 0;                // H(s) = 1 / (s^2 + s/Q + 1)
DSP.HPF = 1;                // H(s) = s^2 / (s^2 + s/Q + 1)
DSP.BPF_CONSTANT_SKIRT = 2; // H(s) = s / (s^2 + s/Q + 1)  (constant skirt gain, peak gain = Q)
DSP.BPF_CONSTANT_PEAK = 3;  // H(s) = (s/Q) / (s^2 + s/Q + 1)      (constant 0 dB peak gain)
DSP.NOTCH = 4;              // H(s) = (s^2 + 1) / (s^2 + s/Q + 1)
DSP.APF = 5;                // H(s) = (s^2 - s/Q + 1) / (s^2 + s/Q + 1)
DSP.PEAKING_EQ = 6;         // H(s) = (s^2 + s*(A/Q) + 1) / (s^2 + s/(A*Q) + 1)
DSP.LOW_SHELF = 7;          // H(s) = A * (s^2 + (sqrt(A)/Q)*s + A)/(A*s^2 + (sqrt(A)/Q)*s + 1)
DSP.HIGH_SHELF = 8;         // H(s) = A * (A*s^2 + (sqrt(A)/Q)*s + 1)/(s^2 + (sqrt(A)/Q)*s + A)

// Biquad filter parameter types
DSP.Q = 1;
DSP.BW = 2; // SHARED with BACKWARDS LOOP MODE
DSP.S = 3;

// Find RMS of signal
DSP.RMS = function(buffer) {
  var total = 0;
  
  for (var i = 0, n = buffer.length; i < n; i++) {
    total += buffer[i] * buffer[i];
  }
  
  return Math.sqrt(total / n);
};

// Find Peak of signal
DSP.Peak = function(buffer) {
  var peak = 0;
  
  for (var i = 0, n = buffer.length; i < n; i++) {
    peak = (Math.abs(buffer[i]) > peak) ? Math.abs(buffer[i]) : peak; 
  }
  
  return peak;
};

// Fourier Transform Module used by DFT, FFT, RFFT
function FourierTransform(bufferSize, sampleRate) {
  this.bufferSize = bufferSize;
  this.sampleRate = sampleRate;
  this.bandwidth  = 2 / bufferSize * sampleRate / 2;

  this.spectrum   = new Float32Array(bufferSize/2);
  this.real       = new Float32Array(bufferSize);
  this.imag       = new Float32Array(bufferSize);

  this.peakBand   = 0;
  this.peak       = 0;

  /**
   * Calculates the *middle* frequency of an FFT band.
   *
   * @param {Number} index The index of the FFT band.
   *
   * @returns The middle frequency in Hz.
   */
  this.getBandFrequency = function(index) {
    return this.bandwidth * index + this.bandwidth / 2;
  };

  this.calculateSpectrum = function() {
    var spectrum  = this.spectrum,
        real      = this.real,
        imag      = this.imag,
        bSi       = 2 / this.bufferSize,
        sqrt      = Math.sqrt,
        rval, 
        ival,
        mag;

    for (var i = 0, N = bufferSize/2; i < N; i++) {
      rval = real[i];
      ival = imag[i];
      mag = bSi * sqrt(rval * rval + ival * ival);

      if (mag > this.peak) {
        this.peakBand = i;
        this.peak = mag;
      }

      spectrum[i] = mag;
    }
  };
}

/**
 * DFT is a class for calculating the Discrete Fourier Transform of a signal.
 *
 * @param {Number} bufferSize The size of the sample buffer to be computed
 * @param {Number} sampleRate The sampleRate of the buffer (eg. 44100)
 *
 * @constructor
 */
function DFT(bufferSize, sampleRate) {
  FourierTransform.call(this, bufferSize, sampleRate);

  var N = bufferSize/2 * bufferSize;
  var TWO_PI = 2 * Math.PI;

  this.sinTable = new Float32Array(N);
  this.cosTable = new Float32Array(N);

  for (var i = 0; i < N; i++) {
    this.sinTable[i] = Math.sin(i * TWO_PI / bufferSize);
    this.cosTable[i] = Math.cos(i * TWO_PI / bufferSize);
  }
}

/**
 * Performs a forward transform on the sample buffer.
 * Converts a time domain signal to frequency domain spectra.
 *
 * @param {Array} buffer The sample buffer
 *
 * @returns The frequency spectrum array
 */
DFT.prototype.forward = function(buffer) {
  var real = this.real, 
      imag = this.imag,
      rval,
      ival;

  for (var k = 0; k < this.bufferSize/2; k++) {
    rval = 0.0;
    ival = 0.0;

    for (var n = 0; n < buffer.length; n++) {
      rval += this.cosTable[k*n] * buffer[n];
      ival += this.sinTable[k*n] * buffer[n];
    }

    real[k] = rval;
    imag[k] = ival;
  }

  return this.calculateSpectrum();
};


/**
 * FFT is a class for calculating the Discrete Fourier Transform of a signal
 * with the Fast Fourier Transform algorithm.
 *
 * @param {Number} bufferSize The size of the sample buffer to be computed. Must be power of 2
 * @param {Number} sampleRate The sampleRate of the buffer (eg. 44100)
 *
 * @constructor
 */
function FFT(bufferSize, sampleRate) {
  FourierTransform.call(this, bufferSize, sampleRate);
   
  this.reverseTable = new Uint32Array(bufferSize);

  var limit = 1;
  var bit = bufferSize >> 1;

  var i;

  while (limit < bufferSize) {
    for (i = 0; i < limit; i++) {
      this.reverseTable[i + limit] = this.reverseTable[i] + bit;
    }

    limit = limit << 1;
    bit = bit >> 1;
  }

  this.sinTable = new Float32Array(bufferSize);
  this.cosTable = new Float32Array(bufferSize);

  for (i = 0; i < bufferSize; i++) {
    this.sinTable[i] = Math.sin(-Math.PI/i);
    this.cosTable[i] = Math.cos(-Math.PI/i);
  }
}

/**
 * Performs a forward transform on the sample buffer.
 * Converts a time domain signal to frequency domain spectra.
 *
 * @param {Array} buffer The sample buffer. Buffer Length must be power of 2
 *
 * @returns The frequency spectrum array
 */
FFT.prototype.forward = function(buffer) {
  // Locally scope variables for speed up
  var bufferSize      = this.bufferSize,
      cosTable        = this.cosTable,
      sinTable        = this.sinTable,
      reverseTable    = this.reverseTable,
      real            = this.real,
      imag            = this.imag,
      spectrum        = this.spectrum;

  var k = Math.floor(Math.log(bufferSize) / Math.LN2);

  if (Math.pow(2, k) !== bufferSize) { throw "Invalid buffer size, must be a power of 2."; }
  if (bufferSize !== buffer.length)  { throw "Supplied buffer is not the same size as defined FFT. FFT Size: " + bufferSize + " Buffer Size: " + buffer.length; }

  var halfSize = 1,
      phaseShiftStepReal,
      phaseShiftStepImag,
      currentPhaseShiftReal,
      currentPhaseShiftImag,
      off,
      tr,
      ti,
      tmpReal,
      i;

  for (i = 0; i < bufferSize; i++) {
    real[i] = buffer[reverseTable[i]];
    imag[i] = 0;
  }

  while (halfSize < bufferSize) {
    //phaseShiftStepReal = Math.cos(-Math.PI/halfSize);
    //phaseShiftStepImag = Math.sin(-Math.PI/halfSize);
    phaseShiftStepReal = cosTable[halfSize];
    phaseShiftStepImag = sinTable[halfSize];
    
    currentPhaseShiftReal = 1;
    currentPhaseShiftImag = 0;

    for (var fftStep = 0; fftStep < halfSize; fftStep++) {
      i = fftStep;

      while (i < bufferSize) {
        off = i + halfSize;
        tr = (currentPhaseShiftReal * real[off]) - (currentPhaseShiftImag * imag[off]);
        ti = (currentPhaseShiftReal * imag[off]) + (currentPhaseShiftImag * real[off]);

        real[off] = real[i] - tr;
        imag[off] = imag[i] - ti;
        real[i] += tr;
        imag[i] += ti;

        i += halfSize << 1;
      }

      tmpReal = currentPhaseShiftReal;
      currentPhaseShiftReal = (tmpReal * phaseShiftStepReal) - (currentPhaseShiftImag * phaseShiftStepImag);
      currentPhaseShiftImag = (tmpReal * phaseShiftStepImag) + (currentPhaseShiftImag * phaseShiftStepReal);
    }

    halfSize = halfSize << 1;
  }

  return this.calculateSpectrum();
};

FFT.prototype.inverse = function(real, imag) {
  // Locally scope variables for speed up
  var bufferSize      = this.bufferSize,
      cosTable        = this.cosTable,
      sinTable        = this.sinTable,
      reverseTable    = this.reverseTable,
      spectrum        = this.spectrum;
     
      real = real || this.real;
      imag = imag || this.imag;

  var halfSize = 1,
      phaseShiftStepReal,
      phaseShiftStepImag,
      currentPhaseShiftReal,
      currentPhaseShiftImag,
      off,
      tr,
      ti,
      tmpReal,
      i;

  for (i = 0; i < bufferSize; i++) {
    imag[i] *= -1;
  }

  var revReal = new Float32Array(bufferSize);
  var revImag = new Float32Array(bufferSize);
 
  for (i = 0; i < real.length; i++) {
    revReal[i] = real[reverseTable[i]];
    revImag[i] = imag[reverseTable[i]];
  }
 
  real = revReal;
  imag = revImag;

  while (halfSize < bufferSize) {
    phaseShiftStepReal = cosTable[halfSize];
    phaseShiftStepImag = sinTable[halfSize];
    currentPhaseShiftReal = 1;
    currentPhaseShiftImag = 0;

    for (var fftStep = 0; fftStep < halfSize; fftStep++) {
      i = fftStep;

      while (i < bufferSize) {
        off = i + halfSize;
        tr = (currentPhaseShiftReal * real[off]) - (currentPhaseShiftImag * imag[off]);
        ti = (currentPhaseShiftReal * imag[off]) + (currentPhaseShiftImag * real[off]);

        real[off] = real[i] - tr;
        imag[off] = imag[i] - ti;
        real[i] += tr;
        imag[i] += ti;

        i += halfSize << 1;
      }

      tmpReal = currentPhaseShiftReal;
      currentPhaseShiftReal = (tmpReal * phaseShiftStepReal) - (currentPhaseShiftImag * phaseShiftStepImag);
      currentPhaseShiftImag = (tmpReal * phaseShiftStepImag) + (currentPhaseShiftImag * phaseShiftStepReal);
    }

    halfSize = halfSize << 1;
  }

  var buffer = new Float32Array(bufferSize); // this should be reused instead
  for (i = 0; i < bufferSize; i++) {
    buffer[i] = real[i] / bufferSize;
  }

  return buffer;
};

/**
 * RFFT is a class for calculating the Discrete Fourier Transform of a signal
 * with the Fast Fourier Transform algorithm.
 *
 * This method currently only contains a forward transform but is highly optimized.
 *
 * @param {Number} bufferSize The size of the sample buffer to be computed. Must be power of 2
 * @param {Number} sampleRate The sampleRate of the buffer (eg. 44100)
 *
 * @constructor
 */

// lookup tables don't really gain us any speed, but they do increase
// cache footprint, so don't use them in here

// also we don't use sepearate arrays for real/imaginary parts

// this one a little more than twice as fast as the one in FFT
// however I only did the forward transform

// the rest of this was translated from C, see http://www.jjj.de/fxt/
// this is the real split radix FFT

function RFFT(bufferSize, sampleRate) {
  FourierTransform.call(this, bufferSize, sampleRate);

  this.trans = new Float32Array(bufferSize);

  this.reverseTable = new Uint32Array(bufferSize);

  // don't use a lookup table to do the permute, use this instead
  this.reverseBinPermute = function (dest, source) {
    var bufferSize  = this.bufferSize, 
        halfSize    = bufferSize >>> 1, 
        nm1         = bufferSize - 1, 
        i = 1, r = 0, h;

    dest[0] = source[0];

    do {
      r += halfSize;
      dest[i] = source[r];
      dest[r] = source[i];
      
      i++;

      h = halfSize << 1;
      while (h = h >> 1, !((r ^= h) & h));

      if (r >= i) { 
        dest[i]     = source[r]; 
        dest[r]     = source[i];

        dest[nm1-i] = source[nm1-r]; 
        dest[nm1-r] = source[nm1-i];
      }
      i++;
    } while (i < halfSize);
    dest[nm1] = source[nm1];
  };

  this.generateReverseTable = function () {
    var bufferSize  = this.bufferSize, 
        halfSize    = bufferSize >>> 1, 
        nm1         = bufferSize - 1, 
        i = 1, r = 0, h;

    this.reverseTable[0] = 0;

    do {
      r += halfSize;
      
      this.reverseTable[i] = r;
      this.reverseTable[r] = i;

      i++;

      h = halfSize << 1;
      while (h = h >> 1, !((r ^= h) & h));

      if (r >= i) { 
        this.reverseTable[i] = r;
        this.reverseTable[r] = i;

        this.reverseTable[nm1-i] = nm1-r;
        this.reverseTable[nm1-r] = nm1-i;
      }
      i++;
    } while (i < halfSize);

    this.reverseTable[nm1] = nm1;
  };

  this.generateReverseTable();
}


// Ordering of output:
//
// trans[0]     = re[0] (==zero frequency, purely real)
// trans[1]     = re[1]
//             ...
// trans[n/2-1] = re[n/2-1]
// trans[n/2]   = re[n/2]    (==nyquist frequency, purely real)
//
// trans[n/2+1] = im[n/2-1]
// trans[n/2+2] = im[n/2-2]
//             ...
// trans[n-1]   = im[1] 

RFFT.prototype.forward = function(buffer) {
  var n         = this.bufferSize, 
      spectrum  = this.spectrum,
      x         = this.trans, 
      TWO_PI    = 2*Math.PI,
      sqrt      = Math.sqrt,
      i         = n >>> 1,
      bSi       = 2 / n,
      n2, n4, n8, nn, 
      t1, t2, t3, t4, 
      i1, i2, i3, i4, i5, i6, i7, i8, 
      st1, cc1, ss1, cc3, ss3,
      e, 
      a,
      rval, ival, mag; 

  this.reverseBinPermute(x, buffer);

  /*
  var reverseTable = this.reverseTable;

  for (var k = 0, len = reverseTable.length; k < len; k++) {
    x[k] = buffer[reverseTable[k]];
  }
  */

  for (var ix = 0, id = 4; ix < n; id *= 4) {
    for (var i0 = ix; i0 < n; i0 += id) {
      //sumdiff(x[i0], x[i0+1]); // {a, b}  <--| {a+b, a-b}
      st1 = x[i0] - x[i0+1];
      x[i0] += x[i0+1];
      x[i0+1] = st1;
    } 
    ix = 2*(id-1);
  }

  n2 = 2;
  nn = n >>> 1;

  while((nn = nn >>> 1)) {
    ix = 0;
    n2 = n2 << 1;
    id = n2 << 1;
    n4 = n2 >>> 2;
    n8 = n2 >>> 3;
    do {
      if(n4 !== 1) {
        for(i0 = ix; i0 < n; i0 += id) {
          i1 = i0;
          i2 = i1 + n4;
          i3 = i2 + n4;
          i4 = i3 + n4;
     
          //diffsum3_r(x[i3], x[i4], t1); // {a, b, s} <--| {a, b-a, a+b}
          t1 = x[i3] + x[i4];
          x[i4] -= x[i3];
          //sumdiff3(x[i1], t1, x[i3]);   // {a, b, d} <--| {a+b, b, a-b}
          x[i3] = x[i1] - t1; 
          x[i1] += t1;
     
          i1 += n8;
          i2 += n8;
          i3 += n8;
          i4 += n8;
         
          //sumdiff(x[i3], x[i4], t1, t2); // {s, d}  <--| {a+b, a-b}
          t1 = x[i3] + x[i4];
          t2 = x[i3] - x[i4];
         
          t1 = -t1 * Math.SQRT1_2;
          t2 *= Math.SQRT1_2;
     
          // sumdiff(t1, x[i2], x[i4], x[i3]); // {s, d}  <--| {a+b, a-b}
          st1 = x[i2];
          x[i4] = t1 + st1; 
          x[i3] = t1 - st1;
          
          //sumdiff3(x[i1], t2, x[i2]); // {a, b, d} <--| {a+b, b, a-b}
          x[i2] = x[i1] - t2;
          x[i1] += t2;
        }
      } else {
        for(i0 = ix; i0 < n; i0 += id) {
          i1 = i0;
          i2 = i1 + n4;
          i3 = i2 + n4;
          i4 = i3 + n4;
     
          //diffsum3_r(x[i3], x[i4], t1); // {a, b, s} <--| {a, b-a, a+b}
          t1 = x[i3] + x[i4]; 
          x[i4] -= x[i3];
          
          //sumdiff3(x[i1], t1, x[i3]);   // {a, b, d} <--| {a+b, b, a-b}
          x[i3] = x[i1] - t1; 
          x[i1] += t1;
        }
      }
   
      ix = (id << 1) - n2;
      id = id << 2;
    } while (ix < n);
 
    e = TWO_PI / n2;

    for (var j = 1; j < n8; j++) {
      a = j * e;
      ss1 = Math.sin(a);
      cc1 = Math.cos(a);

      //ss3 = sin(3*a); cc3 = cos(3*a);
      cc3 = 4*cc1*(cc1*cc1-0.75);
      ss3 = 4*ss1*(0.75-ss1*ss1);
   
      ix = 0; id = n2 << 1;
      do {
        for (i0 = ix; i0 < n; i0 += id) {
          i1 = i0 + j;
          i2 = i1 + n4;
          i3 = i2 + n4;
          i4 = i3 + n4;
       
          i5 = i0 + n4 - j;
          i6 = i5 + n4;
          i7 = i6 + n4;
          i8 = i7 + n4;
       
          //cmult(c, s, x, y, &u, &v)
          //cmult(cc1, ss1, x[i7], x[i3], t2, t1); // {u,v} <--| {x*c-y*s, x*s+y*c}
          t2 = x[i7]*cc1 - x[i3]*ss1; 
          t1 = x[i7]*ss1 + x[i3]*cc1;
          
          //cmult(cc3, ss3, x[i8], x[i4], t4, t3);
          t4 = x[i8]*cc3 - x[i4]*ss3; 
          t3 = x[i8]*ss3 + x[i4]*cc3;
       
          //sumdiff(t2, t4);   // {a, b} <--| {a+b, a-b}
          st1 = t2 - t4;
          t2 += t4;
          t4 = st1;
          
          //sumdiff(t2, x[i6], x[i8], x[i3]); // {s, d}  <--| {a+b, a-b}
          //st1 = x[i6]; x[i8] = t2 + st1; x[i3] = t2 - st1;
          x[i8] = t2 + x[i6]; 
          x[i3] = t2 - x[i6];
         
          //sumdiff_r(t1, t3); // {a, b} <--| {a+b, b-a}
          st1 = t3 - t1;
          t1 += t3;
          t3 = st1;
          
          //sumdiff(t3, x[i2], x[i4], x[i7]); // {s, d}  <--| {a+b, a-b}
          //st1 = x[i2]; x[i4] = t3 + st1; x[i7] = t3 - st1;
          x[i4] = t3 + x[i2]; 
          x[i7] = t3 - x[i2];
         
          //sumdiff3(x[i1], t1, x[i6]);   // {a, b, d} <--| {a+b, b, a-b}
          x[i6] = x[i1] - t1; 
          x[i1] += t1;
          
          //diffsum3_r(t4, x[i5], x[i2]); // {a, b, s} <--| {a, b-a, a+b}
          x[i2] = t4 + x[i5]; 
          x[i5] -= t4;
        }
     
        ix = (id << 1) - n2;
        id = id << 2;
   
      } while (ix < n);
    }
  }

  while (--i) {
    rval = x[i];
    ival = x[n-i-1];
    mag = bSi * sqrt(rval * rval + ival * ival);

    if (mag > this.peak) {
      this.peakBand = i;
      this.peak = mag;
    }

    spectrum[i] = mag;
  }

  spectrum[0] = bSi * x[0];

  return spectrum;
};

function Sampler(file, bufferSize, sampleRate, playStart, playEnd, loopStart, loopEnd, loopMode) {
  this.file = file;
  this.bufferSize = bufferSize;
  this.sampleRate = sampleRate;
  this.playStart  = playStart || 0; // 0%
  this.playEnd    = playEnd   || 1; // 100%
  this.loopStart  = loopStart || 0;
  this.loopEnd    = loopEnd   || 1;
  this.loopMode   = loopMode  || DSP.OFF;
  this.loaded     = false;
  this.samples    = [];
  this.signal     = new Float32Array(bufferSize);
  this.frameCount = 0;
  this.envelope   = null;
  this.amplitude  = 1;
  this.rootFrequency = 110; // A2 110
  this.frequency  = 550;
  this.step       = this.frequency / this.rootFrequency;
  this.duration   = 0;
  this.samplesProcessed = 0;
  this.playhead   = 0;
 
  var audio = /* new Audio();*/ document.createElement("AUDIO");
  var self = this;
 
  this.loadSamples = function(event) {
    var buffer = DSP.getChannel(DSP.MIX, event.frameBuffer);
    for ( var i = 0; i < buffer.length; i++) {
      self.samples.push(buffer[i]);
    }
  };
 
  this.loadComplete = function() {
    // convert flexible js array into a fast typed array
    self.samples = new Float32Array(self.samples);
    self.loaded = true;
  };
 
  this.loadMetaData = function() {
    self.duration = audio.duration;
  };
 
  audio.addEventListener("MozAudioAvailable", this.loadSamples, false);
  audio.addEventListener("loadedmetadata", this.loadMetaData, false);
  audio.addEventListener("ended", this.loadComplete, false);
  audio.muted = true;
  audio.src = file;
  audio.play();
}

Sampler.prototype.applyEnvelope = function() {
  this.envelope.process(this.signal);
  return this.signal;
};

Sampler.prototype.generate = function() {
  var frameOffset = this.frameCount * this.bufferSize;
 
  var loopWidth = this.playEnd * this.samples.length - this.playStart * this.samples.length;
  var playStartSamples = this.playStart * this.samples.length; // ie 0.5 -> 50% of the length
  var playEndSamples = this.playEnd * this.samples.length; // ie 0.5 -> 50% of the length
  var offset;

  for ( var i = 0; i < this.bufferSize; i++ ) {
    switch (this.loopMode) {
      case DSP.OFF:
        this.playhead = Math.round(this.samplesProcessed * this.step + playStartSamples);
        if (this.playhead < (this.playEnd * this.samples.length) ) {
          this.signal[i] = this.samples[this.playhead] * this.amplitude;
        } else {
          this.signal[i] = 0;
        }
        break;
     
      case DSP.FW:
        this.playhead = Math.round((this.samplesProcessed * this.step) % loopWidth + playStartSamples);
        if (this.playhead < (this.playEnd * this.samples.length) ) {
          this.signal[i] = this.samples[this.playhead] * this.amplitude;
        }
        break;
       
      case DSP.BW:
        this.playhead = playEndSamples - Math.round((this.samplesProcessed * this.step) % loopWidth);
        if (this.playhead < (this.playEnd * this.samples.length) ) {
          this.signal[i] = this.samples[this.playhead] * this.amplitude;
        }
        break;
       
      case DSP.FWBW:
        if ( Math.floor(this.samplesProcessed * this.step / loopWidth) % 2 === 0 ) {
          this.playhead = Math.round((this.samplesProcessed * this.step) % loopWidth + playStartSamples);
        } else {
          this.playhead = playEndSamples - Math.round((this.samplesProcessed * this.step) % loopWidth);
        }  
        if (this.playhead < (this.playEnd * this.samples.length) ) {
          this.signal[i] = this.samples[this.playhead] * this.amplitude;
        }
        break;
    }
    this.samplesProcessed++;
  }

  this.frameCount++;

  return this.signal;
};

Sampler.prototype.setFreq = function(frequency) {
    var totalProcessed = this.samplesProcessed * this.step;
    this.frequency = frequency;
    this.step = this.frequency / this.rootFrequency;
    this.samplesProcessed = Math.round(totalProcessed/this.step);
};

Sampler.prototype.reset = function() {
  this.samplesProcessed = 0;
  this.playhead = 0;
};

/**
 * Oscillator class for generating and modifying signals
 *
 * @param {Number} type       A waveform constant (eg. DSP.SINE)
 * @param {Number} frequency  Initial frequency of the signal
 * @param {Number} amplitude  Initial amplitude of the signal
 * @param {Number} bufferSize Size of the sample buffer to generate
 * @param {Number} sampleRate The sample rate of the signal
 *
 * @contructor
 */
function Oscillator(type, frequency, amplitude, bufferSize, sampleRate) {
  this.frequency  = frequency;
  this.amplitude  = amplitude;
  this.bufferSize = bufferSize;
  this.sampleRate = sampleRate;
  //this.pulseWidth = pulseWidth;
  this.frameCount = 0;
 
  this.waveTableLength = 2048;

  this.cyclesPerSample = frequency / sampleRate;

  this.signal = new Float32Array(bufferSize);
  this.envelope = null;

  switch(parseInt(type, 10)) {
    case DSP.TRIANGLE:
      this.func = Oscillator.Triangle;
      break;

    case DSP.SAW:
      this.func = Oscillator.Saw;
      break;

    case DSP.SQUARE:
      this.func = Oscillator.Square;
      break;

    default:
    case DSP.SINE:
      this.func = Oscillator.Sine;
      break;
  }

  this.generateWaveTable = function() {
    Oscillator.waveTable[this.func] = new Float32Array(2048);
    var waveTableTime = this.waveTableLength / this.sampleRate;
    var waveTableHz = 1 / waveTableTime;

    for (var i = 0; i < this.waveTableLength; i++) {
      Oscillator.waveTable[this.func][i] = this.func(i * waveTableHz/this.sampleRate);
    }
  };

  if ( typeof Oscillator.waveTable === 'undefined' ) {
    Oscillator.waveTable = {};
  }

  if ( typeof Oscillator.waveTable[this.func] === 'undefined' ) {
    this.generateWaveTable();
  }
 
  this.waveTable = Oscillator.waveTable[this.func];
}

/**
 * Set the amplitude of the signal
 *
 * @param {Number} amplitude The amplitude of the signal (between 0 and 1)
 */
Oscillator.prototype.setAmp = function(amplitude) {
  if (amplitude >= 0 && amplitude <= 1) {
    this.amplitude = amplitude;
  } else {
    throw "Amplitude out of range (0..1).";
  }
};
  
/**
 * Set the frequency of the signal
 *
 * @param {Number} frequency The frequency of the signal
 */  
Oscillator.prototype.setFreq = function(frequency) {
  this.frequency = frequency;
  this.cyclesPerSample = frequency / this.sampleRate;
};
     
// Add an oscillator
Oscillator.prototype.add = function(oscillator) {
  for ( var i = 0; i < this.bufferSize; i++ ) {
    //this.signal[i] += oscillator.valueAt(i);
    this.signal[i] += oscillator.signal[i];
  }
 
  return this.signal;
};
     
// Add a signal to the current generated osc signal
Oscillator.prototype.addSignal = function(signal) {
  for ( var i = 0; i < signal.length; i++ ) {
    if ( i >= this.bufferSize ) {
      break;
    }
    this.signal[i] += signal[i];
   
    /*
    // Constrain amplitude
    if ( this.signal[i] > 1 ) {
      this.signal[i] = 1;
    } else if ( this.signal[i] < -1 ) {
      this.signal[i] = -1;
    }
    */
  }
  return this.signal;
};
     
// Add an envelope to the oscillator
Oscillator.prototype.addEnvelope = function(envelope) {
  this.envelope = envelope;
};

Oscillator.prototype.applyEnvelope = function() {
  this.envelope.process(this.signal);
};
     
Oscillator.prototype.valueAt = function(offset) {
  return this.waveTable[offset % this.waveTableLength];
};
     
Oscillator.prototype.generate = function() {
  var frameOffset = this.frameCount * this.bufferSize;
  var step = this.waveTableLength * this.frequency / this.sampleRate;
  var offset;

  for ( var i = 0; i < this.bufferSize; i++ ) {
    //var step = (frameOffset + i) * this.cyclesPerSample % 1;
    //this.signal[i] = this.func(step) * this.amplitude;
    //this.signal[i] = this.valueAt(Math.round((frameOffset + i) * step)) * this.amplitude;
    offset = Math.round((frameOffset + i) * step);
    this.signal[i] = this.waveTable[offset % this.waveTableLength] * this.amplitude;
  }

  this.frameCount++;

  return this.signal;
};

Oscillator.Sine = function(step) {
  return Math.sin(DSP.TWO_PI * step);
};

Oscillator.Square = function(step) {
  return step < 0.5 ? 1 : -1;
};

Oscillator.Saw = function(step) {
  return 2 * (step - Math.round(step));
};

Oscillator.Triangle = function(step) {
  return 1 - 4 * Math.abs(Math.round(step) - step);
};

Oscillator.Pulse = function(step) {
  // stub
};
 
function ADSR(attackLength, decayLength, sustainLevel, sustainLength, releaseLength, sampleRate) {
  this.sampleRate = sampleRate;
  // Length in seconds
  this.attackLength  = attackLength;
  this.decayLength   = decayLength;
  this.sustainLevel  = sustainLevel;
  this.sustainLength = sustainLength;
  this.releaseLength = releaseLength;
  this.sampleRate    = sampleRate;
 
  // Length in samples
  this.attackSamples  = attackLength  * sampleRate;
  this.decaySamples   = decayLength   * sampleRate;
  this.sustainSamples = sustainLength * sampleRate;
  this.releaseSamples = releaseLength * sampleRate;
 
  // Updates the envelope sample positions
  this.update = function() {
    this.attack         =                this.attackSamples;
    this.decay          = this.attack  + this.decaySamples;
    this.sustain        = this.decay   + this.sustainSamples;
    this.release        = this.sustain + this.releaseSamples;
  };
 
  this.update();
 
  this.samplesProcessed = 0;
}

ADSR.prototype.noteOn = function() {
  this.samplesProcessed = 0;
  this.sustainSamples = this.sustainLength * this.sampleRate;
  this.update();
};

// Send a note off when using a sustain of infinity to let the envelope enter the release phase
ADSR.prototype.noteOff = function() {
  this.sustainSamples = this.samplesProcessed - this.decaySamples;
  this.update();
};

ADSR.prototype.processSample = function(sample) {
  var amplitude = 0;

  if ( this.samplesProcessed <= this.attack ) {
    amplitude = 0 + (1 - 0) * ((this.samplesProcessed - 0) / (this.attack - 0));
  } else if ( this.samplesProcessed > this.attack && this.samplesProcessed <= this.decay ) {
    amplitude = 1 + (this.sustainLevel - 1) * ((this.samplesProcessed - this.attack) / (this.decay - this.attack));
  } else if ( this.samplesProcessed > this.decay && this.samplesProcessed <= this.sustain ) {
    amplitude = this.sustainLevel;
  } else if ( this.samplesProcessed > this.sustain && this.samplesProcessed <= this.release ) {
    amplitude = this.sustainLevel + (0 - this.sustainLevel) * ((this.samplesProcessed - this.sustain) / (this.release - this.sustain));
  }
 
  return sample * amplitude;
};

ADSR.prototype.value = function() {
  var amplitude = 0;

  if ( this.samplesProcessed <= this.attack ) {
    amplitude = 0 + (1 - 0) * ((this.samplesProcessed - 0) / (this.attack - 0));
  } else if ( this.samplesProcessed > this.attack && this.samplesProcessed <= this.decay ) {
    amplitude = 1 + (this.sustainLevel - 1) * ((this.samplesProcessed - this.attack) / (this.decay - this.attack));
  } else if ( this.samplesProcessed > this.decay && this.samplesProcessed <= this.sustain ) {
    amplitude = this.sustainLevel;
  } else if ( this.samplesProcessed > this.sustain && this.samplesProcessed <= this.release ) {
    amplitude = this.sustainLevel + (0 - this.sustainLevel) * ((this.samplesProcessed - this.sustain) / (this.release - this.sustain));
  }
 
  return amplitude;
};
     
ADSR.prototype.process = function(buffer) {
  for ( var i = 0; i < buffer.length; i++ ) {
    buffer[i] *= this.value();

    this.samplesProcessed++;
  }
 
  return buffer;
};
     
     
ADSR.prototype.isActive = function() {
  if ( this.samplesProcessed > this.release || this.samplesProcessed === -1 ) {
    return false;
  } else {
    return true;
  }
};

ADSR.prototype.disable = function() {
  this.samplesProcessed = -1;
};
 
function IIRFilter(type, cutoff, resonance, sampleRate) {
  this.sampleRate = sampleRate;

  switch(type) {
    case DSP.LOWPASS:
    case DSP.LP12:
      this.func = new IIRFilter.LP12(cutoff, resonance, sampleRate);
      break;
  }
}

IIRFilter.prototype.__defineGetter__('cutoff',
  function() {
    return this.func.cutoff;
  }
);

IIRFilter.prototype.__defineGetter__('resonance',
  function() {
    return this.func.resonance;
  }
);

IIRFilter.prototype.set = function(cutoff, resonance) {
  this.func.calcCoeff(cutoff, resonance);
};

IIRFilter.prototype.process = function(buffer) {
  this.func.process(buffer);
};

// Add an envelope to the filter
IIRFilter.prototype.addEnvelope = function(envelope) {
  if ( envelope instanceof ADSR ) {
    this.func.addEnvelope(envelope);
  } else {
    throw "Not an envelope.";
  }
};

IIRFilter.LP12 = function(cutoff, resonance, sampleRate) {
  this.sampleRate = sampleRate;
  this.vibraPos   = 0;
  this.vibraSpeed = 0;
  this.envelope = false;
 
  this.calcCoeff = function(cutoff, resonance) {
    this.w = 2.0 * Math.PI * cutoff / this.sampleRate;
    this.q = 1.0 - this.w / (2.0 * (resonance + 0.5 / (1.0 + this.w)) + this.w - 2.0);
    this.r = this.q * this.q;
    this.c = this.r + 1.0 - 2.0 * Math.cos(this.w) * this.q;
   
    this.cutoff = cutoff;
    this.resonance = resonance;
  };

  this.calcCoeff(cutoff, resonance);

  this.process = function(buffer) {
    for ( var i = 0; i < buffer.length; i++ ) {
      this.vibraSpeed += (buffer[i] - this.vibraPos) * this.c;
      this.vibraPos   += this.vibraSpeed;
      this.vibraSpeed *= this.r;
   
      /*
      var temp = this.vibraPos;
     
      if ( temp > 1.0 ) {
        temp = 1.0;
      } else if ( temp < -1.0 ) {
        temp = -1.0;
      } else if ( temp != temp ) {
        temp = 1;
      }
     
      buffer[i] = temp;
      */

      if (this.envelope) {
        buffer[i] = (buffer[i] * (1 - this.envelope.value())) + (this.vibraPos * this.envelope.value());
        this.envelope.samplesProcessed++;
      } else {
        buffer[i] = this.vibraPos;
      }
    }
  };
}; 

IIRFilter.LP12.prototype.addEnvelope = function(envelope) {
  this.envelope = envelope;
};

function IIRFilter2(type, cutoff, resonance, sampleRate) {
  this.type = type;
  this.cutoff = cutoff;
  this.resonance = resonance;
  this.sampleRate = sampleRate;

  this.f = Float32Array(4);
  this.f[0] = 0.0; // lp
  this.f[1] = 0.0; // hp
  this.f[2] = 0.0; // bp
  this.f[3] = 0.0; // br 
 
  this.calcCoeff = function(cutoff, resonance) {
    this.freq = 2 * Math.sin(Math.PI * Math.min(0.25, cutoff/(this.sampleRate*2)));  
    this.damp = Math.min(2 * (1 - Math.pow(resonance, 0.25)), Math.min(2, 2/this.freq - this.freq * 0.5));
  };

  this.calcCoeff(cutoff, resonance);
}

IIRFilter2.prototype.process = function(buffer) {
  var input, output;
  var f = this.f;

  for ( var i = 0; i < buffer.length; i++ ) {
    input = buffer[i];

    // first pass
    f[3] = input - this.damp * f[2];
    f[0] = f[0] + this.freq * f[2];
    f[1] = f[3] - f[0];
    f[2] = this.freq * f[1] + f[2];
    output = 0.5 * f[this.type];

    // second pass
    f[3] = input - this.damp * f[2];
    f[0] = f[0] + this.freq * f[2];
    f[1] = f[3] - f[0];
    f[2] = this.freq * f[1] + f[2];
    output += 0.5 * f[this.type];

    if (this.envelope) {
      buffer[i] = (buffer[i] * (1 - this.envelope.value())) + (output * this.envelope.value());
      this.envelope.samplesProcessed++;
    } else {
      buffer[i] = output;
    }
  }
};

IIRFilter2.prototype.addEnvelope = function(envelope) {
  if ( envelope instanceof ADSR ) {
    this.envelope = envelope;
  } else {
    throw "This is not an envelope.";
  }
};

IIRFilter2.prototype.set = function(cutoff, resonance) {
  this.calcCoeff(cutoff, resonance);
};



function WindowFunction(type, alpha) {
  this.alpha = alpha;
 
  switch(type) {
    case DSP.BARTLETT:
      this.func = WindowFunction.Bartlett;
      break;
     
    case DSP.BARTLETTHANN:
      this.func = WindowFunction.BartlettHann;
      break;
     
    case DSP.BLACKMAN:
      this.func = WindowFunction.Blackman;
      this.alpha = this.alpha || 0.16;
      break;
   
    case DSP.COSINE:
      this.func = WindowFunction.Cosine;
      break;
     
    case DSP.GAUSS:
      this.func = WindowFunction.Gauss;
      this.alpha = this.alpha || 0.25;
      break;
     
    case DSP.HAMMING:
      this.func = WindowFunction.Hamming;
      break;
     
    case DSP.HANN:
      this.func = WindowFunction.Hann;
      break;
   
    case DSP.LANCZOS:
      this.func = WindowFunction.Lanczoz;
      break;
     
    case DSP.RECTANGULAR:
      this.func = WindowFunction.Rectangular;
      break;
     
    case DSP.TRIANGULAR:
      this.func = WindowFunction.Triangular;
      break;
  }
}

WindowFunction.prototype.process = function(buffer) {
  var length = buffer.length;
  for ( var i = 0; i < length; i++ ) {
    buffer[i] *= this.func(length, i, this.alpha);
  }
  return buffer;
};

WindowFunction.Bartlett = function(length, index) {
  return 2 / (length - 1) * ((length - 1) / 2 - Math.abs(index - (length - 1) / 2));
};

WindowFunction.BartlettHann = function(length, index) {
  return 0.62 - 0.48 * Math.abs(index / (length - 1) - 0.5) - 0.38 * Math.cos(DSP.TWO_PI * index / (length - 1));
};

WindowFunction.Blackman = function(length, index, alpha) {
  var a0 = (1 - alpha) / 2;
  var a1 = 0.5;
  var a2 = alpha / 2;

  return a0 - a1 * Math.cos(DSP.TWO_PI * index / (length - 1)) + a2 * Math.cos(4 * Math.PI * index / (length - 1));
};

WindowFunction.Cosine = function(length, index) {
  return Math.cos(Math.PI * index / (length - 1) - Math.PI / 2);
};

WindowFunction.Gauss = function(length, index, alpha) {
  return Math.pow(Math.E, -0.5 * Math.pow((index - (length - 1) / 2) / (alpha * (length - 1) / 2), 2));
};

WindowFunction.Hamming = function(length, index) {
  return 0.54 - 0.46 * Math.cos(DSP.TWO_PI * index / (length - 1));
};

WindowFunction.Hann = function(length, index) {
  return 0.5 * (1 - Math.cos(DSP.TWO_PI * index / (length - 1)));
};

WindowFunction.Lanczos = function(length, index) {
  var x = 2 * index / (length - 1) - 1;
  return Math.sin(Math.PI * x) / (Math.PI * x);
};

WindowFunction.Rectangular = function(length, index) {
  return 1;
};

WindowFunction.Triangular = function(length, index) {
  return 2 / length * (length / 2 - Math.abs(index - (length - 1) / 2));
};

function sinh (arg) {
  // Returns the hyperbolic sine of the number, defined as (exp(number) - exp(-number))/2 
  //
  // version: 1004.2314
  // discuss at: http://phpjs.org/functions/sinh    // +   original by: Onno Marsman
  // *     example 1: sinh(-0.9834330348825909);
  // *     returns 1: -1.1497971402636502
  return (Math.exp(arg) - Math.exp(-arg))/2;
}

/* 
 *  Biquad filter
 * 
 *  Created by Ricard Marxer <email@ricardmarxer.com> on 2010-05-23.
 *  Copyright 2010 Ricard Marxer. All rights reserved.
 *
 */
// Implementation based on:
// http://www.musicdsp.org/files/Audio-EQ-Cookbook.txt
function Biquad(type, sampleRate) {
  this.Fs = sampleRate;
  this.type = type;  // type of the filter
  this.parameterType = DSP.Q; // type of the parameter

  this.x_1_l = 0;
  this.x_2_l = 0;
  this.y_1_l = 0;
  this.y_2_l = 0;

  this.x_1_r = 0;
  this.x_2_r = 0;
  this.y_1_r = 0;
  this.y_2_r = 0;

  this.b0 = 1;
  this.a0 = 1;

  this.b1 = 0;
  this.a1 = 0;

  this.b2 = 0;
  this.a2 = 0;

  this.b0a0 = this.b0 / this.a0;
  this.b1a0 = this.b1 / this.a0;
  this.b2a0 = this.b2 / this.a0;
  this.a1a0 = this.a1 / this.a0;
  this.a2a0 = this.a2 / this.a0;

  this.f0 = 3000;   // "wherever it's happenin', man."  Center Frequency or
                    // Corner Frequency, or shelf midpoint frequency, depending
                    // on which filter type.  The "significant frequency".

  this.dBgain = 12; // used only for peaking and shelving filters

  this.Q = 1;       // the EE kind of definition, except for peakingEQ in which A*Q is
                    // the classic EE Q.  That adjustment in definition was made so that
                    // a boost of N dB followed by a cut of N dB for identical Q and
                    // f0/Fs results in a precisely flat unity gain filter or "wire".

  this.BW = -3;     // the bandwidth in octaves (between -3 dB frequencies for BPF
                    // and notch or between midpoint (dBgain/2) gain frequencies for
                    // peaking EQ

  this.S = 1;       // a "shelf slope" parameter (for shelving EQ only).  When S = 1,
                    // the shelf slope is as steep as it can be and remain monotonically
                    // increasing or decreasing gain with frequency.  The shelf slope, in
                    // dB/octave, remains proportional to S for all other values for a
                    // fixed f0/Fs and dBgain.

  this.coefficients = function() {
    var b = [this.b0, this.b1, this.b2];
    var a = [this.a0, this.a1, this.a2];
    return {b: b, a:a};
  };

  this.setFilterType = function(type) {
    this.type = type;
    this.recalculateCoefficients();
  };

  this.setSampleRate = function(rate) {
    this.Fs = rate;
    this.recalculateCoefficients();
  };

  this.setQ = function(q) {
    this.parameterType = DSP.Q;
    this.Q = Math.max(Math.min(q, 115.0), 0.001);
    this.recalculateCoefficients();
  };

  this.setBW = function(bw) {
    this.parameterType = DSP.BW;
    this.BW = bw;
    this.recalculateCoefficients();
  };

  this.setS = function(s) {
    this.parameterType = DSP.S;
    this.S = Math.max(Math.min(s, 5.0), 0.0001);
    this.recalculateCoefficients();
  };

  this.setF0 = function(freq) {
    this.f0 = freq;
    this.recalculateCoefficients();
  }; 
 
  this.setDbGain = function(g) {
    this.dBgain = g;
    this.recalculateCoefficients();
  };

  this.recalculateCoefficients = function() {
    var A;
    if (type === DSP.PEAKING_EQ || type === DSP.LOW_SHELF || type === DSP.HIGH_SHELF ) {
      A = Math.pow(10, (this.dBgain/40));  // for peaking and shelving EQ filters only
    } else {
      A  = Math.sqrt( Math.pow(10, (this.dBgain/20)) );   
    }

    var w0 = DSP.TWO_PI * this.f0 / this.Fs;

    var cosw0 = Math.cos(w0);
    var sinw0 = Math.sin(w0);

    var alpha = 0;
   
    switch (this.parameterType) {
      case DSP.Q:
        alpha = sinw0/(2*this.Q);
        break;
           
      case DSP.BW:
        alpha = sinw0 * sinh( Math.LN2/2 * this.BW * w0/sinw0 );
        break;

      case DSP.S:
        alpha = sinw0/2 * Math.sqrt( (A + 1/A)*(1/this.S - 1) + 2 );
        break;
    }

    /**
        FYI: The relationship between bandwidth and Q is
             1/Q = 2*sinh(ln(2)/2*BW*w0/sin(w0))     (digital filter w BLT)
        or   1/Q = 2*sinh(ln(2)/2*BW)             (analog filter prototype)

        The relationship between shelf slope and Q is
             1/Q = sqrt((A + 1/A)*(1/S - 1) + 2)
    */

    var coeff;

    switch (this.type) {
      case DSP.LPF:       // H(s) = 1 / (s^2 + s/Q + 1)
        this.b0 =  (1 - cosw0)/2;
        this.b1 =   1 - cosw0;
        this.b2 =  (1 - cosw0)/2;
        this.a0 =   1 + alpha;
        this.a1 =  -2 * cosw0;
        this.a2 =   1 - alpha;
        break;

      case DSP.HPF:       // H(s) = s^2 / (s^2 + s/Q + 1)
        this.b0 =  (1 + cosw0)/2;
        this.b1 = -(1 + cosw0);
        this.b2 =  (1 + cosw0)/2;
        this.a0 =   1 + alpha;
        this.a1 =  -2 * cosw0;
        this.a2 =   1 - alpha;
        break;

      case DSP.BPF_CONSTANT_SKIRT:       // H(s) = s / (s^2 + s/Q + 1)  (constant skirt gain, peak gain = Q)
        this.b0 =   sinw0/2;
        this.b1 =   0;
        this.b2 =  -sinw0/2;
        this.a0 =   1 + alpha;
        this.a1 =  -2*cosw0;
        this.a2 =   1 - alpha;
        break;

      case DSP.BPF_CONSTANT_PEAK:       // H(s) = (s/Q) / (s^2 + s/Q + 1)      (constant 0 dB peak gain)
        this.b0 =   alpha;
        this.b1 =   0;
        this.b2 =  -alpha;
        this.a0 =   1 + alpha;
        this.a1 =  -2*cosw0;
        this.a2 =   1 - alpha;
        break;

      case DSP.NOTCH:     // H(s) = (s^2 + 1) / (s^2 + s/Q + 1)
        this.b0 =   1;
        this.b1 =  -2*cosw0;
        this.b2 =   1;
        this.a0 =   1 + alpha;
        this.a1 =  -2*cosw0;
        this.a2 =   1 - alpha;
        break;

      case DSP.APF:       // H(s) = (s^2 - s/Q + 1) / (s^2 + s/Q + 1)
        this.b0 =   1 - alpha;
        this.b1 =  -2*cosw0;
        this.b2 =   1 + alpha;
        this.a0 =   1 + alpha;
        this.a1 =  -2*cosw0;
        this.a2 =   1 - alpha;
        break;

      case DSP.PEAKING_EQ:  // H(s) = (s^2 + s*(A/Q) + 1) / (s^2 + s/(A*Q) + 1)
        this.b0 =   1 + alpha*A;
        this.b1 =  -2*cosw0;
        this.b2 =   1 - alpha*A;
        this.a0 =   1 + alpha/A;
        this.a1 =  -2*cosw0;
        this.a2 =   1 - alpha/A;
        break;

      case DSP.LOW_SHELF:   // H(s) = A * (s^2 + (sqrt(A)/Q)*s + A)/(A*s^2 + (sqrt(A)/Q)*s + 1)
        coeff = sinw0 * Math.sqrt( (A^2 + 1)*(1/this.S - 1) + 2*A );
        this.b0 =    A*((A+1) - (A-1)*cosw0 + coeff);
        this.b1 =  2*A*((A-1) - (A+1)*cosw0);
        this.b2 =    A*((A+1) - (A-1)*cosw0 - coeff);
        this.a0 =       (A+1) + (A-1)*cosw0 + coeff;
        this.a1 =   -2*((A-1) + (A+1)*cosw0);
        this.a2 =       (A+1) + (A-1)*cosw0 - coeff;
        break;

      case DSP.HIGH_SHELF:   // H(s) = A * (A*s^2 + (sqrt(A)/Q)*s + 1)/(s^2 + (sqrt(A)/Q)*s + A)
        coeff = sinw0 * Math.sqrt( (A^2 + 1)*(1/this.S - 1) + 2*A );
        this.b0 =    A*((A+1) + (A-1)*cosw0 + coeff);
        this.b1 = -2*A*((A-1) + (A+1)*cosw0);
        this.b2 =    A*((A+1) + (A-1)*cosw0 - coeff);
        this.a0 =       (A+1) - (A-1)*cosw0 + coeff;
        this.a1 =    2*((A-1) - (A+1)*cosw0);
        this.a2 =       (A+1) - (A-1)*cosw0 - coeff;
        break;
    }
   
    this.b0a0 = this.b0/this.a0;
    this.b1a0 = this.b1/this.a0;
    this.b2a0 = this.b2/this.a0;
    this.a1a0 = this.a1/this.a0;
    this.a2a0 = this.a2/this.a0;
  };

  this.process = function(buffer) {
      //y[n] = (b0/a0)*x[n] + (b1/a0)*x[n-1] + (b2/a0)*x[n-2]
      //       - (a1/a0)*y[n-1] - (a2/a0)*y[n-2]

      var len = buffer.length;
      var output = new Float32Array(len);

      for ( var i=0; i<buffer.length; i++ ) {
        output[i] = this.b0a0*buffer[i] + this.b1a0*this.x_1_l + this.b2a0*this.x_2_l - this.a1a0*this.y_1_l - this.a2a0*this.y_2_l;
        this.y_2_l = this.y_1_l;
        this.y_1_l = output[i];
        this.x_2_l = this.x_1_l;
        this.x_1_l = buffer[i];
      }

      return output;
  };

  this.processStereo = function(buffer) {
      //y[n] = (b0/a0)*x[n] + (b1/a0)*x[n-1] + (b2/a0)*x[n-2]
      //       - (a1/a0)*y[n-1] - (a2/a0)*y[n-2]

      var len = buffer.length;
      var output = new Float32Array(len);
     
      for (var i = 0; i < len/2; i++) {
        output[2*i] = this.b0a0*buffer[2*i] + this.b1a0*this.x_1_l + this.b2a0*this.x_2_l - this.a1a0*this.y_1_l - this.a2a0*this.y_2_l;
        this.y_2_l = this.y_1_l;
        this.y_1_l = output[2*i];
        this.x_2_l = this.x_1_l;
        this.x_1_l = buffer[2*i];

        output[2*i+1] = this.b0a0*buffer[2*i+1] + this.b1a0*this.x_1_r + this.b2a0*this.x_2_r - this.a1a0*this.y_1_r - this.a2a0*this.y_2_r;
        this.y_2_r = this.y_1_r;
        this.y_1_r = output[2*i+1];
        this.x_2_r = this.x_1_r;
        this.x_1_r = buffer[2*i+1];
      }

      return output;
  };
}

/* 
 *  Magnitude to decibels
 * 
 *  Created by Ricard Marxer <email@ricardmarxer.com> on 2010-05-23.
 *  Copyright 2010 Ricard Marxer. All rights reserved.
 *
 *  @buffer array of magnitudes to convert to decibels
 *
 *  @returns the array in decibels
 *
 */
DSP.mag2db = function(buffer) {
  var minDb = -120;
  var minMag = Math.pow(10.0, minDb / 20.0);

  var log = Math.log;
  var max = Math.max;
 
  var result = Float32Array(buffer.length);
  for (var i=0; i<buffer.length; i++) {
    result[i] = 20.0*log(max(buffer[i], minMag));
  }

  return result;
};

/* 
 *  Frequency response
 * 
 *  Created by Ricard Marxer <email@ricardmarxer.com> on 2010-05-23.
 *  Copyright 2010 Ricard Marxer. All rights reserved.
 *
 *  Calculates the frequency response at the given points.
 *
 *  @b b coefficients of the filter
 *  @a a coefficients of the filter
 *  @w w points (normally between -PI and PI) where to calculate the frequency response
 *
 *  @returns the frequency response in magnitude
 *
 */
DSP.freqz = function(b, a, w) {
  var i, j;

  if (!w) {
    w = Float32Array(200);
    for (i=0;i<w.length; i++) {
      w[i] = DSP.TWO_PI/w.length * i - Math.PI;
    }
  }

  var result = Float32Array(w.length);
 
  var sqrt = Math.sqrt;
  var cos = Math.cos;
  var sin = Math.sin;
 
  for (i=0; i<w.length; i++) {
    var numerator = {real:0.0, imag:0.0};
    for (j=0; j<b.length; j++) {
      numerator.real += b[j] * cos(-j*w[i]);
      numerator.imag += b[j] * sin(-j*w[i]);
    }

    var denominator = {real:0.0, imag:0.0};
    for (j=0; j<a.length; j++) {
      denominator.real += a[j] * cos(-j*w[i]);
      denominator.imag += a[j] * sin(-j*w[i]);
    }
 
    result[i] =  sqrt(numerator.real*numerator.real + numerator.imag*numerator.imag) / sqrt(denominator.real*denominator.real + denominator.imag*denominator.imag);
  }

  return result;
};

/* 
 *  Graphical Equalizer
 *
 *  Implementation of a graphic equalizer with a configurable bands-per-octave
 *  and minimum and maximum frequencies
 * 
 *  Created by Ricard Marxer <email@ricardmarxer.com> on 2010-05-23.
 *  Copyright 2010 Ricard Marxer. All rights reserved.
 *
 */
function GraphicalEq(sampleRate) {
  this.FS = sampleRate;
  this.minFreq = 40.0;
  this.maxFreq = 16000.0;

  this.bandsPerOctave = 1.0;

  this.filters = [];
  this.freqzs = [];

  this.calculateFreqzs = true;

  this.recalculateFilters = function() {
    var bandCount = Math.round(Math.log(this.maxFreq/this.minFreq) * this.bandsPerOctave/ Math.LN2);

    this.filters = [];
    for (var i=0; i<bandCount; i++) {
      var freq = this.minFreq*(Math.pow(2, i/this.bandsPerOctave));
      var newFilter = new Biquad(DSP.PEAKING_EQ, this.FS);
      newFilter.setDbGain(0);
      newFilter.setBW(1/this.bandsPerOctave);
      newFilter.setF0(freq);
      this.filters[i] = newFilter;
      this.recalculateFreqz(i);
    }
  };

  this.setMinimumFrequency = function(freq) {
    this.minFreq = freq;
    this.recalculateFilters();
  };

  this.setMaximumFrequency = function(freq) {
    this.maxFreq = freq;
    this.recalculateFilters();
  };

  this.setBandsPerOctave = function(bands) {
    this.bandsPerOctave = bands;
    this.recalculateFilters();
  };

  this.setBandGain = function(bandIndex, gain) {
    if (bandIndex < 0 || bandIndex > (this.filters.length-1)) {
      throw "The band index of the graphical equalizer is out of bounds.";
    }

    if (!gain) {
      throw "A gain must be passed.";
    }
   
    this.filters[bandIndex].setDbGain(gain);
    this.recalculateFreqz(bandIndex);
  };
 
  this.recalculateFreqz = function(bandIndex) {
    if (!this.calculateFreqzs) {
      return;
    }

    if (bandIndex < 0 || bandIndex > (this.filters.length-1)) {
      throw "The band index of the graphical equalizer is out of bounds. " + bandIndex + " is out of [" + 0 + ", " + this.filters.length-1 + "]";
    }
       
    if (!this.w) {
      this.w = Float32Array(400);
      for (var i=0; i<this.w.length; i++) {
         this.w[i] = Math.PI/this.w.length * i;
      }
    }
   
    var b = [this.filters[bandIndex].b0, this.filters[bandIndex].b1, this.filters[bandIndex].b2];
    var a = [this.filters[bandIndex].a0, this.filters[bandIndex].a1, this.filters[bandIndex].a2];

    this.freqzs[bandIndex] = DSP.mag2db(DSP.freqz(b, a, this.w));
  };

  this.process = function(buffer) {
    var output = buffer;

    for (var i = 0; i < this.filters.length; i++) {
      output = this.filters[i].process(output);
    }

    return output;
  };

  this.processStereo = function(buffer) {
    var output = buffer;

    for (var i = 0; i < this.filters.length; i++) {
      output = this.filters[i].processStereo(output);
    }

    return output;
  };
}

/**
 * MultiDelay effect by Almer Thie (http://code.almeros.com).
 * Copyright 2010 Almer Thie. All rights reserved.
 * Example: http://code.almeros.com/code-examples/delay-firefox-audio-api/
 *
 * This is a delay that feeds it's own delayed signal back into its circular
 * buffer. Also known as a CombFilter.
 *
 * Compatible with interleaved stereo (or more channel) buffers and
 * non-interleaved mono buffers.
 *
 * @param {Number} maxDelayInSamplesSize Maximum possible delay in samples (size of circular buffer)
 * @param {Number} delayInSamples Initial delay in samples
 * @param {Number} masterVolume Initial master volume. Float value: 0.0 (silence), 1.0 (normal), >1.0 (amplify)
 * @param {Number} delayVolume Initial feedback delay volume. Float value: 0.0 (silence), 1.0 (normal), >1.0 (amplify)
 *
 * @constructor
 */
function MultiDelay(maxDelayInSamplesSize, delayInSamples, masterVolume, delayVolume) {
  this.delayBufferSamples   = new Float32Array(maxDelayInSamplesSize); // The maximum size of delay
  this.delayInputPointer     = delayInSamples;
  this.delayOutputPointer   = 0;
 
  this.delayInSamples   = delayInSamples;
  this.masterVolume     = masterVolume;
  this.delayVolume     = delayVolume;
}

/**
 * Change the delay time in samples.
 *
 * @param {Number} delayInSamples Delay in samples
 */
MultiDelay.prototype.setDelayInSamples = function (delayInSamples) {
  this.delayInSamples = delayInSamples;
 
  this.delayInputPointer = this.delayOutputPointer + delayInSamples;

  if (this.delayInputPointer >= this.delayBufferSamples.length-1) {
    this.delayInputPointer = this.delayInputPointer - this.delayBufferSamples.length; 
  }
};

/**
 * Change the master volume.
 *
 * @param {Number} masterVolume Float value: 0.0 (silence), 1.0 (normal), >1.0 (amplify)
 */
MultiDelay.prototype.setMasterVolume = function(masterVolume) {
  this.masterVolume = masterVolume;
};

/**
 * Change the delay feedback volume.
 *
 * @param {Number} delayVolume Float value: 0.0 (silence), 1.0 (normal), >1.0 (amplify)
 */
MultiDelay.prototype.setDelayVolume = function(delayVolume) {
  this.delayVolume = delayVolume;
};

/**
 * Process a given interleaved or mono non-interleaved float value Array and adds the delayed audio.
 *
 * @param {Array} samples Array containing Float values or a Float32Array
 *
 * @returns A new Float32Array interleaved or mono non-interleaved as was fed to this function.
 */
MultiDelay.prototype.process = function(samples) {
  // NB. Make a copy to put in the output samples to return.
  var outputSamples = new Float32Array(samples.length);

  for (var i=0; i<samples.length; i++) {
    // delayBufferSamples could contain initial NULL's, return silence in that case
    var delaySample = (this.delayBufferSamples[this.delayOutputPointer] === null ? 0.0 : this.delayBufferSamples[this.delayOutputPointer]);
   
    // Mix normal audio data with delayed audio
    var sample = (delaySample * this.delayVolume) + samples[i];
   
    // Add audio data with the delay in the delay buffer
    this.delayBufferSamples[this.delayInputPointer] = sample;
   
    // Return the audio with delay mix
    outputSamples[i] = sample * this.masterVolume;
   
    // Manage circulair delay buffer pointers
    this.delayInputPointer++;
    if (this.delayInputPointer >= this.delayBufferSamples.length-1) {
      this.delayInputPointer = 0;
    }
     
    this.delayOutputPointer++;
    if (this.delayOutputPointer >= this.delayBufferSamples.length-1) {
      this.delayOutputPointer = 0; 
    } 
  }
 
  return outputSamples;
};

/**
 * SingleDelay effect by Almer Thie (http://code.almeros.com).
 * Copyright 2010 Almer Thie. All rights reserved.
 * Example: See usage in Reverb class
 *
 * This is a delay that does NOT feeds it's own delayed signal back into its 
 * circular buffer, neither does it return the original signal. Also known as
 * an AllPassFilter(?).
 *
 * Compatible with interleaved stereo (or more channel) buffers and
 * non-interleaved mono buffers.
 *
 * @param {Number} maxDelayInSamplesSize Maximum possible delay in samples (size of circular buffer)
 * @param {Number} delayInSamples Initial delay in samples
 * @param {Number} delayVolume Initial feedback delay volume. Float value: 0.0 (silence), 1.0 (normal), >1.0 (amplify)
 *
 * @constructor
 */

function SingleDelay(maxDelayInSamplesSize, delayInSamples, delayVolume) {
  this.delayBufferSamples = new Float32Array(maxDelayInSamplesSize); // The maximum size of delay
  this.delayInputPointer  = delayInSamples;
  this.delayOutputPointer = 0;
 
  this.delayInSamples     = delayInSamples;
  this.delayVolume        = delayVolume;
}

/**
 * Change the delay time in samples.
 *
 * @param {Number} delayInSamples Delay in samples
 */
SingleDelay.prototype.setDelayInSamples = function(delayInSamples) {
  this.delayInSamples = delayInSamples;
  this.delayInputPointer = this.delayOutputPointer + delayInSamples;

  if (this.delayInputPointer >= this.delayBufferSamples.length-1) {
    this.delayInputPointer = this.delayInputPointer - this.delayBufferSamples.length; 
  }
};

/**
 * Change the return signal volume.
 *
 * @param {Number} delayVolume Float value: 0.0 (silence), 1.0 (normal), >1.0 (amplify)
 */
SingleDelay.prototype.setDelayVolume = function(delayVolume) {
  this.delayVolume = delayVolume;
};

/**
 * Process a given interleaved or mono non-interleaved float value Array and
 * returns the delayed audio.
 *
 * @param {Array} samples Array containing Float values or a Float32Array
 *
 * @returns A new Float32Array interleaved or mono non-interleaved as was fed to this function.
 */
SingleDelay.prototype.process = function(samples) {
  // NB. Make a copy to put in the output samples to return.
  var outputSamples = new Float32Array(samples.length);

  for (var i=0; i<samples.length; i++) {

    // Add audio data with the delay in the delay buffer
    this.delayBufferSamples[this.delayInputPointer] = samples[i];
   
    // delayBufferSamples could contain initial NULL's, return silence in that case
    var delaySample = this.delayBufferSamples[this.delayOutputPointer];

    // Return the audio with delay mix
    outputSamples[i] = delaySample * this.delayVolume;

    // Manage circulair delay buffer pointers
    this.delayInputPointer++;

    if (this.delayInputPointer >= this.delayBufferSamples.length-1) {
      this.delayInputPointer = 0;
    }
     
    this.delayOutputPointer++;

    if (this.delayOutputPointer >= this.delayBufferSamples.length-1) {
      this.delayOutputPointer = 0; 
    } 
  }
 
  return outputSamples;
};

/**
 * Reverb effect by Almer Thie (http://code.almeros.com).
 * Copyright 2010 Almer Thie. All rights reserved.
 * Example: http://code.almeros.com/code-examples/reverb-firefox-audio-api/
 *
 * This reverb consists of 6 SingleDelays, 6 MultiDelays and an IIRFilter2
 * for each of the two stereo channels.
 *
 * Compatible with interleaved stereo buffers only!
 *
 * @param {Number} maxDelayInSamplesSize Maximum possible delay in samples (size of circular buffers)
 * @param {Number} delayInSamples Initial delay in samples for internal (Single/Multi)delays
 * @param {Number} masterVolume Initial master volume. Float value: 0.0 (silence), 1.0 (normal), >1.0 (amplify)
 * @param {Number} mixVolume Initial reverb signal mix volume. Float value: 0.0 (silence), 1.0 (normal), >1.0 (amplify)
 * @param {Number} delayVolume Initial feedback delay volume for internal (Single/Multi)delays. Float value: 0.0 (silence), 1.0 (normal), >1.0 (amplify)
 * @param {Number} dampFrequency Initial low pass filter frequency. 0 to 44100 (depending on your maximum sampling frequency)
 *
 * @constructor
 */
function Reverb(maxDelayInSamplesSize, delayInSamples, masterVolume, mixVolume, delayVolume, dampFrequency) {
  this.delayInSamples   = delayInSamples;
  this.masterVolume     = masterVolume;
  this.mixVolume       = mixVolume;
  this.delayVolume     = delayVolume;
  this.dampFrequency     = dampFrequency;
 
  this.NR_OF_MULTIDELAYS = 6;
  this.NR_OF_SINGLEDELAYS = 6;
 
  this.LOWPASSL = new IIRFilter2(DSP.LOWPASS, dampFrequency, 0, 44100);
  this.LOWPASSR = new IIRFilter2(DSP.LOWPASS, dampFrequency, 0, 44100);
 
  this.singleDelays = [];
  
  var i, delayMultiply;

  for (i = 0; i < this.NR_OF_SINGLEDELAYS; i++) {
    delayMultiply = 1.0 + (i/7.0); // 1.0, 1.1, 1.2...
    this.singleDelays[i] = new SingleDelay(maxDelayInSamplesSize, Math.round(this.delayInSamples * delayMultiply), this.delayVolume);
  }
 
  this.multiDelays = [];

  for (i = 0; i < this.NR_OF_MULTIDELAYS; i++) {
    delayMultiply = 1.0 + (i/10.0); // 1.0, 1.1, 1.2... 
    this.multiDelays[i] = new MultiDelay(maxDelayInSamplesSize, Math.round(this.delayInSamples * delayMultiply), this.masterVolume, this.delayVolume);
  }
}

/**
 * Change the delay time in samples as a base for all delays.
 *
 * @param {Number} delayInSamples Delay in samples
 */
Reverb.prototype.setDelayInSamples = function (delayInSamples){
  this.delayInSamples = delayInSamples;

  var i, delayMultiply;
 
  for (i = 0; i < this.NR_OF_SINGLEDELAYS; i++) {
    delayMultiply = 1.0 + (i/7.0); // 1.0, 1.1, 1.2...
    this.singleDelays[i].setDelayInSamples( Math.round(this.delayInSamples * delayMultiply) );
  }
   
  for (i = 0; i < this.NR_OF_MULTIDELAYS; i++) {
    delayMultiply = 1.0 + (i/10.0); // 1.0, 1.1, 1.2...
    this.multiDelays[i].setDelayInSamples( Math.round(this.delayInSamples * delayMultiply) );
  }
};

/**
 * Change the master volume.
 *
 * @param {Number} masterVolume Float value: 0.0 (silence), 1.0 (normal), >1.0 (amplify)
 */
Reverb.prototype.setMasterVolume = function (masterVolume){
  this.masterVolume = masterVolume;
};

/**
 * Change the reverb signal mix level.
 *
 * @param {Number} mixVolume Float value: 0.0 (silence), 1.0 (normal), >1.0 (amplify)
 */
Reverb.prototype.setMixVolume = function (mixVolume){
  this.mixVolume = mixVolume;
};

/**
 * Change all delays feedback volume.
 *
 * @param {Number} delayVolume Float value: 0.0 (silence), 1.0 (normal), >1.0 (amplify)
 */
Reverb.prototype.setDelayVolume = function (delayVolume){
  this.delayVolume = delayVolume;
 
  var i;

  for (i = 0; i<this.NR_OF_SINGLEDELAYS; i++) {
    this.singleDelays[i].setDelayVolume(this.delayVolume);
  } 
 
  for (i = 0; i<this.NR_OF_MULTIDELAYS; i++) {
    this.multiDelays[i].setDelayVolume(this.delayVolume);
  } 
};

/**
 * Change the Low Pass filter frequency.
 *
 * @param {Number} dampFrequency low pass filter frequency. 0 to 44100 (depending on your maximum sampling frequency)
 */
Reverb.prototype.setDampFrequency = function (dampFrequency){
  this.dampFrequency = dampFrequency;
 
  this.LOWPASSL.set(dampFrequency, 0);
  this.LOWPASSR.set(dampFrequency, 0); 
};

/**
 * Process a given interleaved float value Array and copies and adds the reverb signal.
 *
 * @param {Array} samples Array containing Float values or a Float32Array
 *
 * @returns A new Float32Array interleaved buffer.
 */
Reverb.prototype.process = function (interleavedSamples){ 
  // NB. Make a copy to put in the output samples to return.
  var outputSamples = new Float32Array(interleavedSamples.length);
 
  // Perform low pass on the input samples to mimick damp
  var leftRightMix = DSP.deinterleave(interleavedSamples);
  this.LOWPASSL.process( leftRightMix[DSP.LEFT] );
  this.LOWPASSR.process( leftRightMix[DSP.RIGHT] ); 
  var filteredSamples = DSP.interleave(leftRightMix[DSP.LEFT], leftRightMix[DSP.RIGHT]);

  var i;

  // Process MultiDelays in parallel
  for (i = 0; i<this.NR_OF_MULTIDELAYS; i++) {
    // Invert the signal of every even multiDelay
    outputSamples = DSP.mixSampleBuffers(outputSamples, this.multiDelays[i].process(filteredSamples), 2%i === 0, this.NR_OF_MULTIDELAYS);
  }
 
  // Process SingleDelays in series
  var singleDelaySamples = new Float32Array(outputSamples.length);
  for (i = 0; i<this.NR_OF_SINGLEDELAYS; i++) {
    // Invert the signal of every even singleDelay
    singleDelaySamples = DSP.mixSampleBuffers(singleDelaySamples, this.singleDelays[i].process(outputSamples), 2%i === 0, 1);
  }

  // Apply the volume of the reverb signal
  for (i = 0; i<singleDelaySamples.length; i++) {
    singleDelaySamples[i] *= this.mixVolume;
  }
 
  // Mix the original signal with the reverb signal
  outputSamples = DSP.mixSampleBuffers(singleDelaySamples, interleavedSamples, 0, 1);

  // Apply the master volume to the complete signal
  for (i = 0; i<outputSamples.length; i++) {
    outputSamples[i] *= this.masterVolume;
  }
   
  return outputSamples;
};


/*!
 * EventEmitter v4.2.11 - git.io/ee
 * Unlicense - http://unlicense.org/
 * Oliver Caldwell - http://oli.me.uk/
 * @preserve
 */
(function(){"use strict";function t(){}function i(t,n){for(var e=t.length;e--;)if(t[e].listener===n)return e;return-1}function n(e){return function(){return this[e].apply(this,arguments)}}var e=t.prototype,r=this,s=r.EventEmitter;e.getListeners=function(n){var r,e,t=this._getEvents();if(n instanceof RegExp){r={};for(e in t)t.hasOwnProperty(e)&&n.test(e)&&(r[e]=t[e])}else r=t[n]||(t[n]=[]);return r},e.flattenListeners=function(t){var e,n=[];for(e=0;e<t.length;e+=1)n.push(t[e].listener);return n},e.getListenersAsObject=function(n){var e,t=this.getListeners(n);return t instanceof Array&&(e={},e[n]=t),e||t},e.addListener=function(r,e){var t,n=this.getListenersAsObject(r),s="object"==typeof e;for(t in n)n.hasOwnProperty(t)&&-1===i(n[t],e)&&n[t].push(s?e:{listener:e,once:!1});return this},e.on=n("addListener"),e.addOnceListener=function(e,t){return this.addListener(e,{listener:t,once:!0})},e.once=n("addOnceListener"),e.defineEvent=function(e){return this.getListeners(e),this},e.defineEvents=function(t){for(var e=0;e<t.length;e+=1)this.defineEvent(t[e]);return this},e.removeListener=function(r,s){var n,e,t=this.getListenersAsObject(r);for(e in t)t.hasOwnProperty(e)&&(n=i(t[e],s),-1!==n&&t[e].splice(n,1));return this},e.off=n("removeListener"),e.addListeners=function(e,t){return this.manipulateListeners(!1,e,t)},e.removeListeners=function(e,t){return this.manipulateListeners(!0,e,t)},e.manipulateListeners=function(r,t,i){var e,n,s=r?this.removeListener:this.addListener,o=r?this.removeListeners:this.addListeners;if("object"!=typeof t||t instanceof RegExp)for(e=i.length;e--;)s.call(this,t,i[e]);else for(e in t)t.hasOwnProperty(e)&&(n=t[e])&&("function"==typeof n?s.call(this,e,n):o.call(this,e,n));return this},e.removeEvent=function(e){var t,r=typeof e,n=this._getEvents();if("string"===r)delete n[e];else if(e instanceof RegExp)for(t in n)n.hasOwnProperty(t)&&e.test(t)&&delete n[t];else delete this._events;return this},e.removeAllListeners=n("removeEvent"),e.emitEvent=function(t,u){var n,e,r,i,o,s=this.getListenersAsObject(t);for(i in s)if(s.hasOwnProperty(i))for(n=s[i].slice(0),r=n.length;r--;)e=n[r],e.once===!0&&this.removeListener(t,e.listener),o=e.listener.apply(this,u||[]),o===this._getOnceReturnValue()&&this.removeListener(t,e.listener);return this},e.trigger=n("emitEvent"),e.emit=function(e){var t=Array.prototype.slice.call(arguments,1);return this.emitEvent(e,t)},e.setOnceReturnValue=function(e){return this._onceReturnValue=e,this},e._getOnceReturnValue=function(){return this.hasOwnProperty("_onceReturnValue")?this._onceReturnValue:!0},e._getEvents=function(){return this._events||(this._events={})},t.noConflict=function(){return r.EventEmitter=s,t},"function"==typeof define&&define.amd?define(function(){return t}):"object"==typeof module&&module.exports?module.exports=t:r.EventEmitter=t}).call(this);
(function(root, factory) {
	if (typeof define === 'function' && define.amd) {
		define(factory);
	} else if (typeof exports === 'object') {
		module.exports = factory(require, exports, module);
	} else {
		root.fn = factory();
	}
}(this, function(require, exports, module) {
'use strict';

var fn = { };

fn.toArray = function (collection) {
	return Array.prototype.slice.call(collection);
};

fn.cloneArray = fn.toArray;

fn.op = {
	'+': function (value1, value2) {
		return value1 + value2;
	},
	'-': function (value1, value2) {
		return value1 - value2;
	},
	'*': function (value1, value2) {
		return value1 * value2;
	},
	'/': function (value1, value2) {
		return value1 / value2;
	},
	'==': function (value1, value2) {
		/*eslint-disable eqeqeq */
		return value1 == value2;
		/*eslint-enable eqeqeq */
	},
	'===': function (value1, value2) {
		return value1 === value2;
	}
};

fn.type = function (value) {
	// If the value is null or undefined, return the stringified name,
	// otherwise get the [[Class]] and compare to the relevant part of the value
	return value == null ?
		'' + value :
		Object.prototype.toString.call(value).slice(8, -1).toLowerCase();
};

fn.is = function (type, value) {
	return type === fn.type(value);
};

fn.apply = function (handler, args) {
	return handler.apply(null, args);
};

fn.concat = function () {
	var args = fn.toArray(arguments);
	var first = args[ 0 ];

	if (!fn.is('array', first) && !fn.is('string', first)) {
		first = args.length ? [ first ] : [ ];
	}

	return first.concat.apply(first, args.slice(1));
};

fn.partial = function () {
	var args = fn.toArray(arguments);
	var handler = args[ 0 ];
	var partialArgs = args.slice(1);

	return function () {
		return fn.apply(handler, fn.concat(partialArgs, fn.toArray(arguments)) );
	};
};

fn.identity = function (arg) {
	return arg;
};

var currier = function makeCurry(rightward) {
	return function (handler, arity) {
		if (handler.curried) {
			return handler;
		}

		arity = arity || handler.length;

		var curry = function curry() {
			var args = fn.toArray(arguments);

			if (args.length >= arity) {
				var transform = rightward ? 'reverse' : 'identity';
				return fn.apply(handler, fn[ transform ](args));
			}

			var inner = function () {
				return fn.apply(curry, args.concat(fn.toArray(arguments)));
			};

			inner.curried = true;

			return inner;
		};

		curry.curried = true;

		return curry;
	};
};

fn.curry = currier(false);

fn.curryRight = currier(true);

fn.properties = function (object) {
	var accumulator = [ ];

	for (var property in object) {
		if (object.hasOwnProperty(property)) {
			accumulator.push(property);
		}
	}

	return accumulator;
};

fn.each = function (handler, collection, params) {
	for (var index = 0, collectionLength = collection.length; index < collectionLength; index++) {
		fn.apply(handler, fn.concat([ collection[ index ], index, collection ], params));
	}
};

fn.reduce = function (handler, accumulator, collection, params) {
	fn.each(function (value, index) {
		accumulator = fn.apply(handler, fn.concat([ accumulator, value, index ], params));
	}, collection);

	return accumulator;
};

fn.filter = function (expression, collection) {
	return fn.reduce(function (accumulator, item, index) {
		expression(item, index) && accumulator.push(item);
		return accumulator;
	}, [ ], collection);
};

fn.op[ '++' ] = fn.partial(fn.op[ '+' ], 1);
fn.op[ '--' ] = fn.partial(fn.op[ '+' ], -1);

fn.map = function (handler, collection, params) {
	return fn.reduce(function (accumulator, value, index) {
		accumulator.push( fn.apply(handler, fn.concat([ value, index, collection ], params)) );
		return accumulator;
	}, [ ], collection);
};

fn.reverse = function (collection) {
	return fn.cloneArray(collection).reverse();
};

fn.pipeline = function () {
	var functions = fn.toArray(arguments);

	return function () {
		return fn.reduce(function (args, func) {
			return [ fn.apply(func, args) ];
		}, fn.toArray(arguments), functions)[ 0 ];
	};
};

fn.compose = function () {
	return fn.apply(fn.pipeline, fn.reverse(arguments));
};

fn.prop = fn.curry(function (name, object) {
	return object[ name ];
});

fn.merge = function () {
	return fn.reduce(function (accumulator, value) {
		fn.each(function (property) {
			accumulator[ property ] = value[ property ];
		}, fn.properties(value));

		return accumulator;
	}, { }, fn.toArray(arguments));
};

fn.memoize = function memoize(handler, serializer) {
	var cache = { };

	return function () {
		var args = fn.toArray(arguments);
		var key = serializer ? serializer(args) : memoize.serialize(args);

		return key in cache ?
			cache[ key ] :
			cache[ key ] = fn.apply(handler, args);
	};
};

fn.memoize.serialize = function (values) {
	return fn.type(values[ 0 ]) + '|' + JSON.stringify(values[ 0 ]);
};

fn.flip = function (handler) {
	return function () {
		return fn.apply(handler, fn.reverse(arguments));
	};
};

fn.delay = function (handler, msDelay) {
	return setTimeout(handler, msDelay);
};

fn.delayFor = fn.flip(fn.delay);

fn.delayed = function (handler, msDelay) {
	return function () {
		return fn.delay(fn.partial(handler, fn.toArray(arguments)), msDelay);
	};
};

fn.delayedFor = fn.flip(fn.delayed);

fn.async = fn.compose(fn.partial(fn.delayedFor, 0));

fn.throttle = function (handler, msDelay) {
	var throttling;

	return function () {
		var args = fn.toArray(arguments);

		if (throttling) {
			return;
		}

		throttling = fn.delay(function () {
			throttling = false;

			fn.apply(handler, args);
		}, msDelay);
	};
};

fn.debounce = function (handler, msDelay) {
	var debouncing;

	return function () {
		var args = fn.toArray(arguments);

		if (debouncing) {
			clearTimeout(debouncing);
		}

		debouncing = fn.delay(function () {
			debouncing = false;

			fn.apply(handler, args);
		}, msDelay);
	};
};

fn.contains = function (haystack, needle) {
	return haystack.indexOf(needle) !== -1;
};
return fn;
}));
/*! jQuery v1.11.2 | (c) 2005, 2014 jQuery Foundation, Inc. | jquery.org/license */
!function(a,b){"object"==typeof module&&"object"==typeof module.exports?module.exports=a.document?b(a,!0):function(a){if(!a.document)throw new Error("jQuery requires a window with a document");return b(a)}:b(a)}("undefined"!=typeof window?window:this,function(a,b){var c=[],d=c.slice,e=c.concat,f=c.push,g=c.indexOf,h={},i=h.toString,j=h.hasOwnProperty,k={},l="1.11.2",m=function(a,b){return new m.fn.init(a,b)},n=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,o=/^-ms-/,p=/-([\da-z])/gi,q=function(a,b){return b.toUpperCase()};m.fn=m.prototype={jquery:l,constructor:m,selector:"",length:0,toArray:function(){return d.call(this)},get:function(a){return null!=a?0>a?this[a+this.length]:this[a]:d.call(this)},pushStack:function(a){var b=m.merge(this.constructor(),a);return b.prevObject=this,b.context=this.context,b},each:function(a,b){return m.each(this,a,b)},map:function(a){return this.pushStack(m.map(this,function(b,c){return a.call(b,c,b)}))},slice:function(){return this.pushStack(d.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(a){var b=this.length,c=+a+(0>a?b:0);return this.pushStack(c>=0&&b>c?[this[c]]:[])},end:function(){return this.prevObject||this.constructor(null)},push:f,sort:c.sort,splice:c.splice},m.extend=m.fn.extend=function(){var a,b,c,d,e,f,g=arguments[0]||{},h=1,i=arguments.length,j=!1;for("boolean"==typeof g&&(j=g,g=arguments[h]||{},h++),"object"==typeof g||m.isFunction(g)||(g={}),h===i&&(g=this,h--);i>h;h++)if(null!=(e=arguments[h]))for(d in e)a=g[d],c=e[d],g!==c&&(j&&c&&(m.isPlainObject(c)||(b=m.isArray(c)))?(b?(b=!1,f=a&&m.isArray(a)?a:[]):f=a&&m.isPlainObject(a)?a:{},g[d]=m.extend(j,f,c)):void 0!==c&&(g[d]=c));return g},m.extend({expando:"jQuery"+(l+Math.random()).replace(/\D/g,""),isReady:!0,error:function(a){throw new Error(a)},noop:function(){},isFunction:function(a){return"function"===m.type(a)},isArray:Array.isArray||function(a){return"array"===m.type(a)},isWindow:function(a){return null!=a&&a==a.window},isNumeric:function(a){return!m.isArray(a)&&a-parseFloat(a)+1>=0},isEmptyObject:function(a){var b;for(b in a)return!1;return!0},isPlainObject:function(a){var b;if(!a||"object"!==m.type(a)||a.nodeType||m.isWindow(a))return!1;try{if(a.constructor&&!j.call(a,"constructor")&&!j.call(a.constructor.prototype,"isPrototypeOf"))return!1}catch(c){return!1}if(k.ownLast)for(b in a)return j.call(a,b);for(b in a);return void 0===b||j.call(a,b)},type:function(a){return null==a?a+"":"object"==typeof a||"function"==typeof a?h[i.call(a)]||"object":typeof a},globalEval:function(b){b&&m.trim(b)&&(a.execScript||function(b){a.eval.call(a,b)})(b)},camelCase:function(a){return a.replace(o,"ms-").replace(p,q)},nodeName:function(a,b){return a.nodeName&&a.nodeName.toLowerCase()===b.toLowerCase()},each:function(a,b,c){var d,e=0,f=a.length,g=r(a);if(c){if(g){for(;f>e;e++)if(d=b.apply(a[e],c),d===!1)break}else for(e in a)if(d=b.apply(a[e],c),d===!1)break}else if(g){for(;f>e;e++)if(d=b.call(a[e],e,a[e]),d===!1)break}else for(e in a)if(d=b.call(a[e],e,a[e]),d===!1)break;return a},trim:function(a){return null==a?"":(a+"").replace(n,"")},makeArray:function(a,b){var c=b||[];return null!=a&&(r(Object(a))?m.merge(c,"string"==typeof a?[a]:a):f.call(c,a)),c},inArray:function(a,b,c){var d;if(b){if(g)return g.call(b,a,c);for(d=b.length,c=c?0>c?Math.max(0,d+c):c:0;d>c;c++)if(c in b&&b[c]===a)return c}return-1},merge:function(a,b){var c=+b.length,d=0,e=a.length;while(c>d)a[e++]=b[d++];if(c!==c)while(void 0!==b[d])a[e++]=b[d++];return a.length=e,a},grep:function(a,b,c){for(var d,e=[],f=0,g=a.length,h=!c;g>f;f++)d=!b(a[f],f),d!==h&&e.push(a[f]);return e},map:function(a,b,c){var d,f=0,g=a.length,h=r(a),i=[];if(h)for(;g>f;f++)d=b(a[f],f,c),null!=d&&i.push(d);else for(f in a)d=b(a[f],f,c),null!=d&&i.push(d);return e.apply([],i)},guid:1,proxy:function(a,b){var c,e,f;return"string"==typeof b&&(f=a[b],b=a,a=f),m.isFunction(a)?(c=d.call(arguments,2),e=function(){return a.apply(b||this,c.concat(d.call(arguments)))},e.guid=a.guid=a.guid||m.guid++,e):void 0},now:function(){return+new Date},support:k}),m.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(a,b){h["[object "+b+"]"]=b.toLowerCase()});function r(a){var b=a.length,c=m.type(a);return"function"===c||m.isWindow(a)?!1:1===a.nodeType&&b?!0:"array"===c||0===b||"number"==typeof b&&b>0&&b-1 in a}var s=function(a){var b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u="sizzle"+1*new Date,v=a.document,w=0,x=0,y=hb(),z=hb(),A=hb(),B=function(a,b){return a===b&&(l=!0),0},C=1<<31,D={}.hasOwnProperty,E=[],F=E.pop,G=E.push,H=E.push,I=E.slice,J=function(a,b){for(var c=0,d=a.length;d>c;c++)if(a[c]===b)return c;return-1},K="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",L="[\\x20\\t\\r\\n\\f]",M="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",N=M.replace("w","w#"),O="\\["+L+"*("+M+")(?:"+L+"*([*^$|!~]?=)"+L+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+N+"))|)"+L+"*\\]",P=":("+M+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+O+")*)|.*)\\)|)",Q=new RegExp(L+"+","g"),R=new RegExp("^"+L+"+|((?:^|[^\\\\])(?:\\\\.)*)"+L+"+$","g"),S=new RegExp("^"+L+"*,"+L+"*"),T=new RegExp("^"+L+"*([>+~]|"+L+")"+L+"*"),U=new RegExp("="+L+"*([^\\]'\"]*?)"+L+"*\\]","g"),V=new RegExp(P),W=new RegExp("^"+N+"$"),X={ID:new RegExp("^#("+M+")"),CLASS:new RegExp("^\\.("+M+")"),TAG:new RegExp("^("+M.replace("w","w*")+")"),ATTR:new RegExp("^"+O),PSEUDO:new RegExp("^"+P),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+L+"*(even|odd|(([+-]|)(\\d*)n|)"+L+"*(?:([+-]|)"+L+"*(\\d+)|))"+L+"*\\)|)","i"),bool:new RegExp("^(?:"+K+")$","i"),needsContext:new RegExp("^"+L+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+L+"*((?:-\\d)?\\d*)"+L+"*\\)|)(?=[^-]|$)","i")},Y=/^(?:input|select|textarea|button)$/i,Z=/^h\d$/i,$=/^[^{]+\{\s*\[native \w/,_=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,ab=/[+~]/,bb=/'|\\/g,cb=new RegExp("\\\\([\\da-f]{1,6}"+L+"?|("+L+")|.)","ig"),db=function(a,b,c){var d="0x"+b-65536;return d!==d||c?b:0>d?String.fromCharCode(d+65536):String.fromCharCode(d>>10|55296,1023&d|56320)},eb=function(){m()};try{H.apply(E=I.call(v.childNodes),v.childNodes),E[v.childNodes.length].nodeType}catch(fb){H={apply:E.length?function(a,b){G.apply(a,I.call(b))}:function(a,b){var c=a.length,d=0;while(a[c++]=b[d++]);a.length=c-1}}}function gb(a,b,d,e){var f,h,j,k,l,o,r,s,w,x;if((b?b.ownerDocument||b:v)!==n&&m(b),b=b||n,d=d||[],k=b.nodeType,"string"!=typeof a||!a||1!==k&&9!==k&&11!==k)return d;if(!e&&p){if(11!==k&&(f=_.exec(a)))if(j=f[1]){if(9===k){if(h=b.getElementById(j),!h||!h.parentNode)return d;if(h.id===j)return d.push(h),d}else if(b.ownerDocument&&(h=b.ownerDocument.getElementById(j))&&t(b,h)&&h.id===j)return d.push(h),d}else{if(f[2])return H.apply(d,b.getElementsByTagName(a)),d;if((j=f[3])&&c.getElementsByClassName)return H.apply(d,b.getElementsByClassName(j)),d}if(c.qsa&&(!q||!q.test(a))){if(s=r=u,w=b,x=1!==k&&a,1===k&&"object"!==b.nodeName.toLowerCase()){o=g(a),(r=b.getAttribute("id"))?s=r.replace(bb,"\\$&"):b.setAttribute("id",s),s="[id='"+s+"'] ",l=o.length;while(l--)o[l]=s+rb(o[l]);w=ab.test(a)&&pb(b.parentNode)||b,x=o.join(",")}if(x)try{return H.apply(d,w.querySelectorAll(x)),d}catch(y){}finally{r||b.removeAttribute("id")}}}return i(a.replace(R,"$1"),b,d,e)}function hb(){var a=[];function b(c,e){return a.push(c+" ")>d.cacheLength&&delete b[a.shift()],b[c+" "]=e}return b}function ib(a){return a[u]=!0,a}function jb(a){var b=n.createElement("div");try{return!!a(b)}catch(c){return!1}finally{b.parentNode&&b.parentNode.removeChild(b),b=null}}function kb(a,b){var c=a.split("|"),e=a.length;while(e--)d.attrHandle[c[e]]=b}function lb(a,b){var c=b&&a,d=c&&1===a.nodeType&&1===b.nodeType&&(~b.sourceIndex||C)-(~a.sourceIndex||C);if(d)return d;if(c)while(c=c.nextSibling)if(c===b)return-1;return a?1:-1}function mb(a){return function(b){var c=b.nodeName.toLowerCase();return"input"===c&&b.type===a}}function nb(a){return function(b){var c=b.nodeName.toLowerCase();return("input"===c||"button"===c)&&b.type===a}}function ob(a){return ib(function(b){return b=+b,ib(function(c,d){var e,f=a([],c.length,b),g=f.length;while(g--)c[e=f[g]]&&(c[e]=!(d[e]=c[e]))})})}function pb(a){return a&&"undefined"!=typeof a.getElementsByTagName&&a}c=gb.support={},f=gb.isXML=function(a){var b=a&&(a.ownerDocument||a).documentElement;return b?"HTML"!==b.nodeName:!1},m=gb.setDocument=function(a){var b,e,g=a?a.ownerDocument||a:v;return g!==n&&9===g.nodeType&&g.documentElement?(n=g,o=g.documentElement,e=g.defaultView,e&&e!==e.top&&(e.addEventListener?e.addEventListener("unload",eb,!1):e.attachEvent&&e.attachEvent("onunload",eb)),p=!f(g),c.attributes=jb(function(a){return a.className="i",!a.getAttribute("className")}),c.getElementsByTagName=jb(function(a){return a.appendChild(g.createComment("")),!a.getElementsByTagName("*").length}),c.getElementsByClassName=$.test(g.getElementsByClassName),c.getById=jb(function(a){return o.appendChild(a).id=u,!g.getElementsByName||!g.getElementsByName(u).length}),c.getById?(d.find.ID=function(a,b){if("undefined"!=typeof b.getElementById&&p){var c=b.getElementById(a);return c&&c.parentNode?[c]:[]}},d.filter.ID=function(a){var b=a.replace(cb,db);return function(a){return a.getAttribute("id")===b}}):(delete d.find.ID,d.filter.ID=function(a){var b=a.replace(cb,db);return function(a){var c="undefined"!=typeof a.getAttributeNode&&a.getAttributeNode("id");return c&&c.value===b}}),d.find.TAG=c.getElementsByTagName?function(a,b){return"undefined"!=typeof b.getElementsByTagName?b.getElementsByTagName(a):c.qsa?b.querySelectorAll(a):void 0}:function(a,b){var c,d=[],e=0,f=b.getElementsByTagName(a);if("*"===a){while(c=f[e++])1===c.nodeType&&d.push(c);return d}return f},d.find.CLASS=c.getElementsByClassName&&function(a,b){return p?b.getElementsByClassName(a):void 0},r=[],q=[],(c.qsa=$.test(g.querySelectorAll))&&(jb(function(a){o.appendChild(a).innerHTML="<a id='"+u+"'></a><select id='"+u+"-\f]' msallowcapture=''><option selected=''></option></select>",a.querySelectorAll("[msallowcapture^='']").length&&q.push("[*^$]="+L+"*(?:''|\"\")"),a.querySelectorAll("[selected]").length||q.push("\\["+L+"*(?:value|"+K+")"),a.querySelectorAll("[id~="+u+"-]").length||q.push("~="),a.querySelectorAll(":checked").length||q.push(":checked"),a.querySelectorAll("a#"+u+"+*").length||q.push(".#.+[+~]")}),jb(function(a){var b=g.createElement("input");b.setAttribute("type","hidden"),a.appendChild(b).setAttribute("name","D"),a.querySelectorAll("[name=d]").length&&q.push("name"+L+"*[*^$|!~]?="),a.querySelectorAll(":enabled").length||q.push(":enabled",":disabled"),a.querySelectorAll("*,:x"),q.push(",.*:")})),(c.matchesSelector=$.test(s=o.matches||o.webkitMatchesSelector||o.mozMatchesSelector||o.oMatchesSelector||o.msMatchesSelector))&&jb(function(a){c.disconnectedMatch=s.call(a,"div"),s.call(a,"[s!='']:x"),r.push("!=",P)}),q=q.length&&new RegExp(q.join("|")),r=r.length&&new RegExp(r.join("|")),b=$.test(o.compareDocumentPosition),t=b||$.test(o.contains)?function(a,b){var c=9===a.nodeType?a.documentElement:a,d=b&&b.parentNode;return a===d||!(!d||1!==d.nodeType||!(c.contains?c.contains(d):a.compareDocumentPosition&&16&a.compareDocumentPosition(d)))}:function(a,b){if(b)while(b=b.parentNode)if(b===a)return!0;return!1},B=b?function(a,b){if(a===b)return l=!0,0;var d=!a.compareDocumentPosition-!b.compareDocumentPosition;return d?d:(d=(a.ownerDocument||a)===(b.ownerDocument||b)?a.compareDocumentPosition(b):1,1&d||!c.sortDetached&&b.compareDocumentPosition(a)===d?a===g||a.ownerDocument===v&&t(v,a)?-1:b===g||b.ownerDocument===v&&t(v,b)?1:k?J(k,a)-J(k,b):0:4&d?-1:1)}:function(a,b){if(a===b)return l=!0,0;var c,d=0,e=a.parentNode,f=b.parentNode,h=[a],i=[b];if(!e||!f)return a===g?-1:b===g?1:e?-1:f?1:k?J(k,a)-J(k,b):0;if(e===f)return lb(a,b);c=a;while(c=c.parentNode)h.unshift(c);c=b;while(c=c.parentNode)i.unshift(c);while(h[d]===i[d])d++;return d?lb(h[d],i[d]):h[d]===v?-1:i[d]===v?1:0},g):n},gb.matches=function(a,b){return gb(a,null,null,b)},gb.matchesSelector=function(a,b){if((a.ownerDocument||a)!==n&&m(a),b=b.replace(U,"='$1']"),!(!c.matchesSelector||!p||r&&r.test(b)||q&&q.test(b)))try{var d=s.call(a,b);if(d||c.disconnectedMatch||a.document&&11!==a.document.nodeType)return d}catch(e){}return gb(b,n,null,[a]).length>0},gb.contains=function(a,b){return(a.ownerDocument||a)!==n&&m(a),t(a,b)},gb.attr=function(a,b){(a.ownerDocument||a)!==n&&m(a);var e=d.attrHandle[b.toLowerCase()],f=e&&D.call(d.attrHandle,b.toLowerCase())?e(a,b,!p):void 0;return void 0!==f?f:c.attributes||!p?a.getAttribute(b):(f=a.getAttributeNode(b))&&f.specified?f.value:null},gb.error=function(a){throw new Error("Syntax error, unrecognized expression: "+a)},gb.uniqueSort=function(a){var b,d=[],e=0,f=0;if(l=!c.detectDuplicates,k=!c.sortStable&&a.slice(0),a.sort(B),l){while(b=a[f++])b===a[f]&&(e=d.push(f));while(e--)a.splice(d[e],1)}return k=null,a},e=gb.getText=function(a){var b,c="",d=0,f=a.nodeType;if(f){if(1===f||9===f||11===f){if("string"==typeof a.textContent)return a.textContent;for(a=a.firstChild;a;a=a.nextSibling)c+=e(a)}else if(3===f||4===f)return a.nodeValue}else while(b=a[d++])c+=e(b);return c},d=gb.selectors={cacheLength:50,createPseudo:ib,match:X,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(a){return a[1]=a[1].replace(cb,db),a[3]=(a[3]||a[4]||a[5]||"").replace(cb,db),"~="===a[2]&&(a[3]=" "+a[3]+" "),a.slice(0,4)},CHILD:function(a){return a[1]=a[1].toLowerCase(),"nth"===a[1].slice(0,3)?(a[3]||gb.error(a[0]),a[4]=+(a[4]?a[5]+(a[6]||1):2*("even"===a[3]||"odd"===a[3])),a[5]=+(a[7]+a[8]||"odd"===a[3])):a[3]&&gb.error(a[0]),a},PSEUDO:function(a){var b,c=!a[6]&&a[2];return X.CHILD.test(a[0])?null:(a[3]?a[2]=a[4]||a[5]||"":c&&V.test(c)&&(b=g(c,!0))&&(b=c.indexOf(")",c.length-b)-c.length)&&(a[0]=a[0].slice(0,b),a[2]=c.slice(0,b)),a.slice(0,3))}},filter:{TAG:function(a){var b=a.replace(cb,db).toLowerCase();return"*"===a?function(){return!0}:function(a){return a.nodeName&&a.nodeName.toLowerCase()===b}},CLASS:function(a){var b=y[a+" "];return b||(b=new RegExp("(^|"+L+")"+a+"("+L+"|$)"))&&y(a,function(a){return b.test("string"==typeof a.className&&a.className||"undefined"!=typeof a.getAttribute&&a.getAttribute("class")||"")})},ATTR:function(a,b,c){return function(d){var e=gb.attr(d,a);return null==e?"!="===b:b?(e+="","="===b?e===c:"!="===b?e!==c:"^="===b?c&&0===e.indexOf(c):"*="===b?c&&e.indexOf(c)>-1:"$="===b?c&&e.slice(-c.length)===c:"~="===b?(" "+e.replace(Q," ")+" ").indexOf(c)>-1:"|="===b?e===c||e.slice(0,c.length+1)===c+"-":!1):!0}},CHILD:function(a,b,c,d,e){var f="nth"!==a.slice(0,3),g="last"!==a.slice(-4),h="of-type"===b;return 1===d&&0===e?function(a){return!!a.parentNode}:function(b,c,i){var j,k,l,m,n,o,p=f!==g?"nextSibling":"previousSibling",q=b.parentNode,r=h&&b.nodeName.toLowerCase(),s=!i&&!h;if(q){if(f){while(p){l=b;while(l=l[p])if(h?l.nodeName.toLowerCase()===r:1===l.nodeType)return!1;o=p="only"===a&&!o&&"nextSibling"}return!0}if(o=[g?q.firstChild:q.lastChild],g&&s){k=q[u]||(q[u]={}),j=k[a]||[],n=j[0]===w&&j[1],m=j[0]===w&&j[2],l=n&&q.childNodes[n];while(l=++n&&l&&l[p]||(m=n=0)||o.pop())if(1===l.nodeType&&++m&&l===b){k[a]=[w,n,m];break}}else if(s&&(j=(b[u]||(b[u]={}))[a])&&j[0]===w)m=j[1];else while(l=++n&&l&&l[p]||(m=n=0)||o.pop())if((h?l.nodeName.toLowerCase()===r:1===l.nodeType)&&++m&&(s&&((l[u]||(l[u]={}))[a]=[w,m]),l===b))break;return m-=e,m===d||m%d===0&&m/d>=0}}},PSEUDO:function(a,b){var c,e=d.pseudos[a]||d.setFilters[a.toLowerCase()]||gb.error("unsupported pseudo: "+a);return e[u]?e(b):e.length>1?(c=[a,a,"",b],d.setFilters.hasOwnProperty(a.toLowerCase())?ib(function(a,c){var d,f=e(a,b),g=f.length;while(g--)d=J(a,f[g]),a[d]=!(c[d]=f[g])}):function(a){return e(a,0,c)}):e}},pseudos:{not:ib(function(a){var b=[],c=[],d=h(a.replace(R,"$1"));return d[u]?ib(function(a,b,c,e){var f,g=d(a,null,e,[]),h=a.length;while(h--)(f=g[h])&&(a[h]=!(b[h]=f))}):function(a,e,f){return b[0]=a,d(b,null,f,c),b[0]=null,!c.pop()}}),has:ib(function(a){return function(b){return gb(a,b).length>0}}),contains:ib(function(a){return a=a.replace(cb,db),function(b){return(b.textContent||b.innerText||e(b)).indexOf(a)>-1}}),lang:ib(function(a){return W.test(a||"")||gb.error("unsupported lang: "+a),a=a.replace(cb,db).toLowerCase(),function(b){var c;do if(c=p?b.lang:b.getAttribute("xml:lang")||b.getAttribute("lang"))return c=c.toLowerCase(),c===a||0===c.indexOf(a+"-");while((b=b.parentNode)&&1===b.nodeType);return!1}}),target:function(b){var c=a.location&&a.location.hash;return c&&c.slice(1)===b.id},root:function(a){return a===o},focus:function(a){return a===n.activeElement&&(!n.hasFocus||n.hasFocus())&&!!(a.type||a.href||~a.tabIndex)},enabled:function(a){return a.disabled===!1},disabled:function(a){return a.disabled===!0},checked:function(a){var b=a.nodeName.toLowerCase();return"input"===b&&!!a.checked||"option"===b&&!!a.selected},selected:function(a){return a.parentNode&&a.parentNode.selectedIndex,a.selected===!0},empty:function(a){for(a=a.firstChild;a;a=a.nextSibling)if(a.nodeType<6)return!1;return!0},parent:function(a){return!d.pseudos.empty(a)},header:function(a){return Z.test(a.nodeName)},input:function(a){return Y.test(a.nodeName)},button:function(a){var b=a.nodeName.toLowerCase();return"input"===b&&"button"===a.type||"button"===b},text:function(a){var b;return"input"===a.nodeName.toLowerCase()&&"text"===a.type&&(null==(b=a.getAttribute("type"))||"text"===b.toLowerCase())},first:ob(function(){return[0]}),last:ob(function(a,b){return[b-1]}),eq:ob(function(a,b,c){return[0>c?c+b:c]}),even:ob(function(a,b){for(var c=0;b>c;c+=2)a.push(c);return a}),odd:ob(function(a,b){for(var c=1;b>c;c+=2)a.push(c);return a}),lt:ob(function(a,b,c){for(var d=0>c?c+b:c;--d>=0;)a.push(d);return a}),gt:ob(function(a,b,c){for(var d=0>c?c+b:c;++d<b;)a.push(d);return a})}},d.pseudos.nth=d.pseudos.eq;for(b in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})d.pseudos[b]=mb(b);for(b in{submit:!0,reset:!0})d.pseudos[b]=nb(b);function qb(){}qb.prototype=d.filters=d.pseudos,d.setFilters=new qb,g=gb.tokenize=function(a,b){var c,e,f,g,h,i,j,k=z[a+" "];if(k)return b?0:k.slice(0);h=a,i=[],j=d.preFilter;while(h){(!c||(e=S.exec(h)))&&(e&&(h=h.slice(e[0].length)||h),i.push(f=[])),c=!1,(e=T.exec(h))&&(c=e.shift(),f.push({value:c,type:e[0].replace(R," ")}),h=h.slice(c.length));for(g in d.filter)!(e=X[g].exec(h))||j[g]&&!(e=j[g](e))||(c=e.shift(),f.push({value:c,type:g,matches:e}),h=h.slice(c.length));if(!c)break}return b?h.length:h?gb.error(a):z(a,i).slice(0)};function rb(a){for(var b=0,c=a.length,d="";c>b;b++)d+=a[b].value;return d}function sb(a,b,c){var d=b.dir,e=c&&"parentNode"===d,f=x++;return b.first?function(b,c,f){while(b=b[d])if(1===b.nodeType||e)return a(b,c,f)}:function(b,c,g){var h,i,j=[w,f];if(g){while(b=b[d])if((1===b.nodeType||e)&&a(b,c,g))return!0}else while(b=b[d])if(1===b.nodeType||e){if(i=b[u]||(b[u]={}),(h=i[d])&&h[0]===w&&h[1]===f)return j[2]=h[2];if(i[d]=j,j[2]=a(b,c,g))return!0}}}function tb(a){return a.length>1?function(b,c,d){var e=a.length;while(e--)if(!a[e](b,c,d))return!1;return!0}:a[0]}function ub(a,b,c){for(var d=0,e=b.length;e>d;d++)gb(a,b[d],c);return c}function vb(a,b,c,d,e){for(var f,g=[],h=0,i=a.length,j=null!=b;i>h;h++)(f=a[h])&&(!c||c(f,d,e))&&(g.push(f),j&&b.push(h));return g}function wb(a,b,c,d,e,f){return d&&!d[u]&&(d=wb(d)),e&&!e[u]&&(e=wb(e,f)),ib(function(f,g,h,i){var j,k,l,m=[],n=[],o=g.length,p=f||ub(b||"*",h.nodeType?[h]:h,[]),q=!a||!f&&b?p:vb(p,m,a,h,i),r=c?e||(f?a:o||d)?[]:g:q;if(c&&c(q,r,h,i),d){j=vb(r,n),d(j,[],h,i),k=j.length;while(k--)(l=j[k])&&(r[n[k]]=!(q[n[k]]=l))}if(f){if(e||a){if(e){j=[],k=r.length;while(k--)(l=r[k])&&j.push(q[k]=l);e(null,r=[],j,i)}k=r.length;while(k--)(l=r[k])&&(j=e?J(f,l):m[k])>-1&&(f[j]=!(g[j]=l))}}else r=vb(r===g?r.splice(o,r.length):r),e?e(null,g,r,i):H.apply(g,r)})}function xb(a){for(var b,c,e,f=a.length,g=d.relative[a[0].type],h=g||d.relative[" "],i=g?1:0,k=sb(function(a){return a===b},h,!0),l=sb(function(a){return J(b,a)>-1},h,!0),m=[function(a,c,d){var e=!g&&(d||c!==j)||((b=c).nodeType?k(a,c,d):l(a,c,d));return b=null,e}];f>i;i++)if(c=d.relative[a[i].type])m=[sb(tb(m),c)];else{if(c=d.filter[a[i].type].apply(null,a[i].matches),c[u]){for(e=++i;f>e;e++)if(d.relative[a[e].type])break;return wb(i>1&&tb(m),i>1&&rb(a.slice(0,i-1).concat({value:" "===a[i-2].type?"*":""})).replace(R,"$1"),c,e>i&&xb(a.slice(i,e)),f>e&&xb(a=a.slice(e)),f>e&&rb(a))}m.push(c)}return tb(m)}function yb(a,b){var c=b.length>0,e=a.length>0,f=function(f,g,h,i,k){var l,m,o,p=0,q="0",r=f&&[],s=[],t=j,u=f||e&&d.find.TAG("*",k),v=w+=null==t?1:Math.random()||.1,x=u.length;for(k&&(j=g!==n&&g);q!==x&&null!=(l=u[q]);q++){if(e&&l){m=0;while(o=a[m++])if(o(l,g,h)){i.push(l);break}k&&(w=v)}c&&((l=!o&&l)&&p--,f&&r.push(l))}if(p+=q,c&&q!==p){m=0;while(o=b[m++])o(r,s,g,h);if(f){if(p>0)while(q--)r[q]||s[q]||(s[q]=F.call(i));s=vb(s)}H.apply(i,s),k&&!f&&s.length>0&&p+b.length>1&&gb.uniqueSort(i)}return k&&(w=v,j=t),r};return c?ib(f):f}return h=gb.compile=function(a,b){var c,d=[],e=[],f=A[a+" "];if(!f){b||(b=g(a)),c=b.length;while(c--)f=xb(b[c]),f[u]?d.push(f):e.push(f);f=A(a,yb(e,d)),f.selector=a}return f},i=gb.select=function(a,b,e,f){var i,j,k,l,m,n="function"==typeof a&&a,o=!f&&g(a=n.selector||a);if(e=e||[],1===o.length){if(j=o[0]=o[0].slice(0),j.length>2&&"ID"===(k=j[0]).type&&c.getById&&9===b.nodeType&&p&&d.relative[j[1].type]){if(b=(d.find.ID(k.matches[0].replace(cb,db),b)||[])[0],!b)return e;n&&(b=b.parentNode),a=a.slice(j.shift().value.length)}i=X.needsContext.test(a)?0:j.length;while(i--){if(k=j[i],d.relative[l=k.type])break;if((m=d.find[l])&&(f=m(k.matches[0].replace(cb,db),ab.test(j[0].type)&&pb(b.parentNode)||b))){if(j.splice(i,1),a=f.length&&rb(j),!a)return H.apply(e,f),e;break}}}return(n||h(a,o))(f,b,!p,e,ab.test(a)&&pb(b.parentNode)||b),e},c.sortStable=u.split("").sort(B).join("")===u,c.detectDuplicates=!!l,m(),c.sortDetached=jb(function(a){return 1&a.compareDocumentPosition(n.createElement("div"))}),jb(function(a){return a.innerHTML="<a href='#'></a>","#"===a.firstChild.getAttribute("href")})||kb("type|href|height|width",function(a,b,c){return c?void 0:a.getAttribute(b,"type"===b.toLowerCase()?1:2)}),c.attributes&&jb(function(a){return a.innerHTML="<input/>",a.firstChild.setAttribute("value",""),""===a.firstChild.getAttribute("value")})||kb("value",function(a,b,c){return c||"input"!==a.nodeName.toLowerCase()?void 0:a.defaultValue}),jb(function(a){return null==a.getAttribute("disabled")})||kb(K,function(a,b,c){var d;return c?void 0:a[b]===!0?b.toLowerCase():(d=a.getAttributeNode(b))&&d.specified?d.value:null}),gb}(a);m.find=s,m.expr=s.selectors,m.expr[":"]=m.expr.pseudos,m.unique=s.uniqueSort,m.text=s.getText,m.isXMLDoc=s.isXML,m.contains=s.contains;var t=m.expr.match.needsContext,u=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,v=/^.[^:#\[\.,]*$/;function w(a,b,c){if(m.isFunction(b))return m.grep(a,function(a,d){return!!b.call(a,d,a)!==c});if(b.nodeType)return m.grep(a,function(a){return a===b!==c});if("string"==typeof b){if(v.test(b))return m.filter(b,a,c);b=m.filter(b,a)}return m.grep(a,function(a){return m.inArray(a,b)>=0!==c})}m.filter=function(a,b,c){var d=b[0];return c&&(a=":not("+a+")"),1===b.length&&1===d.nodeType?m.find.matchesSelector(d,a)?[d]:[]:m.find.matches(a,m.grep(b,function(a){return 1===a.nodeType}))},m.fn.extend({find:function(a){var b,c=[],d=this,e=d.length;if("string"!=typeof a)return this.pushStack(m(a).filter(function(){for(b=0;e>b;b++)if(m.contains(d[b],this))return!0}));for(b=0;e>b;b++)m.find(a,d[b],c);return c=this.pushStack(e>1?m.unique(c):c),c.selector=this.selector?this.selector+" "+a:a,c},filter:function(a){return this.pushStack(w(this,a||[],!1))},not:function(a){return this.pushStack(w(this,a||[],!0))},is:function(a){return!!w(this,"string"==typeof a&&t.test(a)?m(a):a||[],!1).length}});var x,y=a.document,z=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/,A=m.fn.init=function(a,b){var c,d;if(!a)return this;if("string"==typeof a){if(c="<"===a.charAt(0)&&">"===a.charAt(a.length-1)&&a.length>=3?[null,a,null]:z.exec(a),!c||!c[1]&&b)return!b||b.jquery?(b||x).find(a):this.constructor(b).find(a);if(c[1]){if(b=b instanceof m?b[0]:b,m.merge(this,m.parseHTML(c[1],b&&b.nodeType?b.ownerDocument||b:y,!0)),u.test(c[1])&&m.isPlainObject(b))for(c in b)m.isFunction(this[c])?this[c](b[c]):this.attr(c,b[c]);return this}if(d=y.getElementById(c[2]),d&&d.parentNode){if(d.id!==c[2])return x.find(a);this.length=1,this[0]=d}return this.context=y,this.selector=a,this}return a.nodeType?(this.context=this[0]=a,this.length=1,this):m.isFunction(a)?"undefined"!=typeof x.ready?x.ready(a):a(m):(void 0!==a.selector&&(this.selector=a.selector,this.context=a.context),m.makeArray(a,this))};A.prototype=m.fn,x=m(y);var B=/^(?:parents|prev(?:Until|All))/,C={children:!0,contents:!0,next:!0,prev:!0};m.extend({dir:function(a,b,c){var d=[],e=a[b];while(e&&9!==e.nodeType&&(void 0===c||1!==e.nodeType||!m(e).is(c)))1===e.nodeType&&d.push(e),e=e[b];return d},sibling:function(a,b){for(var c=[];a;a=a.nextSibling)1===a.nodeType&&a!==b&&c.push(a);return c}}),m.fn.extend({has:function(a){var b,c=m(a,this),d=c.length;return this.filter(function(){for(b=0;d>b;b++)if(m.contains(this,c[b]))return!0})},closest:function(a,b){for(var c,d=0,e=this.length,f=[],g=t.test(a)||"string"!=typeof a?m(a,b||this.context):0;e>d;d++)for(c=this[d];c&&c!==b;c=c.parentNode)if(c.nodeType<11&&(g?g.index(c)>-1:1===c.nodeType&&m.find.matchesSelector(c,a))){f.push(c);break}return this.pushStack(f.length>1?m.unique(f):f)},index:function(a){return a?"string"==typeof a?m.inArray(this[0],m(a)):m.inArray(a.jquery?a[0]:a,this):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(a,b){return this.pushStack(m.unique(m.merge(this.get(),m(a,b))))},addBack:function(a){return this.add(null==a?this.prevObject:this.prevObject.filter(a))}});function D(a,b){do a=a[b];while(a&&1!==a.nodeType);return a}m.each({parent:function(a){var b=a.parentNode;return b&&11!==b.nodeType?b:null},parents:function(a){return m.dir(a,"parentNode")},parentsUntil:function(a,b,c){return m.dir(a,"parentNode",c)},next:function(a){return D(a,"nextSibling")},prev:function(a){return D(a,"previousSibling")},nextAll:function(a){return m.dir(a,"nextSibling")},prevAll:function(a){return m.dir(a,"previousSibling")},nextUntil:function(a,b,c){return m.dir(a,"nextSibling",c)},prevUntil:function(a,b,c){return m.dir(a,"previousSibling",c)},siblings:function(a){return m.sibling((a.parentNode||{}).firstChild,a)},children:function(a){return m.sibling(a.firstChild)},contents:function(a){return m.nodeName(a,"iframe")?a.contentDocument||a.contentWindow.document:m.merge([],a.childNodes)}},function(a,b){m.fn[a]=function(c,d){var e=m.map(this,b,c);return"Until"!==a.slice(-5)&&(d=c),d&&"string"==typeof d&&(e=m.filter(d,e)),this.length>1&&(C[a]||(e=m.unique(e)),B.test(a)&&(e=e.reverse())),this.pushStack(e)}});var E=/\S+/g,F={};function G(a){var b=F[a]={};return m.each(a.match(E)||[],function(a,c){b[c]=!0}),b}m.Callbacks=function(a){a="string"==typeof a?F[a]||G(a):m.extend({},a);var b,c,d,e,f,g,h=[],i=!a.once&&[],j=function(l){for(c=a.memory&&l,d=!0,f=g||0,g=0,e=h.length,b=!0;h&&e>f;f++)if(h[f].apply(l[0],l[1])===!1&&a.stopOnFalse){c=!1;break}b=!1,h&&(i?i.length&&j(i.shift()):c?h=[]:k.disable())},k={add:function(){if(h){var d=h.length;!function f(b){m.each(b,function(b,c){var d=m.type(c);"function"===d?a.unique&&k.has(c)||h.push(c):c&&c.length&&"string"!==d&&f(c)})}(arguments),b?e=h.length:c&&(g=d,j(c))}return this},remove:function(){return h&&m.each(arguments,function(a,c){var d;while((d=m.inArray(c,h,d))>-1)h.splice(d,1),b&&(e>=d&&e--,f>=d&&f--)}),this},has:function(a){return a?m.inArray(a,h)>-1:!(!h||!h.length)},empty:function(){return h=[],e=0,this},disable:function(){return h=i=c=void 0,this},disabled:function(){return!h},lock:function(){return i=void 0,c||k.disable(),this},locked:function(){return!i},fireWith:function(a,c){return!h||d&&!i||(c=c||[],c=[a,c.slice?c.slice():c],b?i.push(c):j(c)),this},fire:function(){return k.fireWith(this,arguments),this},fired:function(){return!!d}};return k},m.extend({Deferred:function(a){var b=[["resolve","done",m.Callbacks("once memory"),"resolved"],["reject","fail",m.Callbacks("once memory"),"rejected"],["notify","progress",m.Callbacks("memory")]],c="pending",d={state:function(){return c},always:function(){return e.done(arguments).fail(arguments),this},then:function(){var a=arguments;return m.Deferred(function(c){m.each(b,function(b,f){var g=m.isFunction(a[b])&&a[b];e[f[1]](function(){var a=g&&g.apply(this,arguments);a&&m.isFunction(a.promise)?a.promise().done(c.resolve).fail(c.reject).progress(c.notify):c[f[0]+"With"](this===d?c.promise():this,g?[a]:arguments)})}),a=null}).promise()},promise:function(a){return null!=a?m.extend(a,d):d}},e={};return d.pipe=d.then,m.each(b,function(a,f){var g=f[2],h=f[3];d[f[1]]=g.add,h&&g.add(function(){c=h},b[1^a][2].disable,b[2][2].lock),e[f[0]]=function(){return e[f[0]+"With"](this===e?d:this,arguments),this},e[f[0]+"With"]=g.fireWith}),d.promise(e),a&&a.call(e,e),e},when:function(a){var b=0,c=d.call(arguments),e=c.length,f=1!==e||a&&m.isFunction(a.promise)?e:0,g=1===f?a:m.Deferred(),h=function(a,b,c){return function(e){b[a]=this,c[a]=arguments.length>1?d.call(arguments):e,c===i?g.notifyWith(b,c):--f||g.resolveWith(b,c)}},i,j,k;if(e>1)for(i=new Array(e),j=new Array(e),k=new Array(e);e>b;b++)c[b]&&m.isFunction(c[b].promise)?c[b].promise().done(h(b,k,c)).fail(g.reject).progress(h(b,j,i)):--f;return f||g.resolveWith(k,c),g.promise()}});var H;m.fn.ready=function(a){return m.ready.promise().done(a),this},m.extend({isReady:!1,readyWait:1,holdReady:function(a){a?m.readyWait++:m.ready(!0)},ready:function(a){if(a===!0?!--m.readyWait:!m.isReady){if(!y.body)return setTimeout(m.ready);m.isReady=!0,a!==!0&&--m.readyWait>0||(H.resolveWith(y,[m]),m.fn.triggerHandler&&(m(y).triggerHandler("ready"),m(y).off("ready")))}}});function I(){y.addEventListener?(y.removeEventListener("DOMContentLoaded",J,!1),a.removeEventListener("load",J,!1)):(y.detachEvent("onreadystatechange",J),a.detachEvent("onload",J))}function J(){(y.addEventListener||"load"===event.type||"complete"===y.readyState)&&(I(),m.ready())}m.ready.promise=function(b){if(!H)if(H=m.Deferred(),"complete"===y.readyState)setTimeout(m.ready);else if(y.addEventListener)y.addEventListener("DOMContentLoaded",J,!1),a.addEventListener("load",J,!1);else{y.attachEvent("onreadystatechange",J),a.attachEvent("onload",J);var c=!1;try{c=null==a.frameElement&&y.documentElement}catch(d){}c&&c.doScroll&&!function e(){if(!m.isReady){try{c.doScroll("left")}catch(a){return setTimeout(e,50)}I(),m.ready()}}()}return H.promise(b)};var K="undefined",L;for(L in m(k))break;k.ownLast="0"!==L,k.inlineBlockNeedsLayout=!1,m(function(){var a,b,c,d;c=y.getElementsByTagName("body")[0],c&&c.style&&(b=y.createElement("div"),d=y.createElement("div"),d.style.cssText="position:absolute;border:0;width:0;height:0;top:0;left:-9999px",c.appendChild(d).appendChild(b),typeof b.style.zoom!==K&&(b.style.cssText="display:inline;margin:0;border:0;padding:1px;width:1px;zoom:1",k.inlineBlockNeedsLayout=a=3===b.offsetWidth,a&&(c.style.zoom=1)),c.removeChild(d))}),function(){var a=y.createElement("div");if(null==k.deleteExpando){k.deleteExpando=!0;try{delete a.test}catch(b){k.deleteExpando=!1}}a=null}(),m.acceptData=function(a){var b=m.noData[(a.nodeName+" ").toLowerCase()],c=+a.nodeType||1;return 1!==c&&9!==c?!1:!b||b!==!0&&a.getAttribute("classid")===b};var M=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,N=/([A-Z])/g;function O(a,b,c){if(void 0===c&&1===a.nodeType){var d="data-"+b.replace(N,"-$1").toLowerCase();if(c=a.getAttribute(d),"string"==typeof c){try{c="true"===c?!0:"false"===c?!1:"null"===c?null:+c+""===c?+c:M.test(c)?m.parseJSON(c):c}catch(e){}m.data(a,b,c)}else c=void 0}return c}function P(a){var b;for(b in a)if(("data"!==b||!m.isEmptyObject(a[b]))&&"toJSON"!==b)return!1;
return!0}function Q(a,b,d,e){if(m.acceptData(a)){var f,g,h=m.expando,i=a.nodeType,j=i?m.cache:a,k=i?a[h]:a[h]&&h;if(k&&j[k]&&(e||j[k].data)||void 0!==d||"string"!=typeof b)return k||(k=i?a[h]=c.pop()||m.guid++:h),j[k]||(j[k]=i?{}:{toJSON:m.noop}),("object"==typeof b||"function"==typeof b)&&(e?j[k]=m.extend(j[k],b):j[k].data=m.extend(j[k].data,b)),g=j[k],e||(g.data||(g.data={}),g=g.data),void 0!==d&&(g[m.camelCase(b)]=d),"string"==typeof b?(f=g[b],null==f&&(f=g[m.camelCase(b)])):f=g,f}}function R(a,b,c){if(m.acceptData(a)){var d,e,f=a.nodeType,g=f?m.cache:a,h=f?a[m.expando]:m.expando;if(g[h]){if(b&&(d=c?g[h]:g[h].data)){m.isArray(b)?b=b.concat(m.map(b,m.camelCase)):b in d?b=[b]:(b=m.camelCase(b),b=b in d?[b]:b.split(" ")),e=b.length;while(e--)delete d[b[e]];if(c?!P(d):!m.isEmptyObject(d))return}(c||(delete g[h].data,P(g[h])))&&(f?m.cleanData([a],!0):k.deleteExpando||g!=g.window?delete g[h]:g[h]=null)}}}m.extend({cache:{},noData:{"applet ":!0,"embed ":!0,"object ":"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"},hasData:function(a){return a=a.nodeType?m.cache[a[m.expando]]:a[m.expando],!!a&&!P(a)},data:function(a,b,c){return Q(a,b,c)},removeData:function(a,b){return R(a,b)},_data:function(a,b,c){return Q(a,b,c,!0)},_removeData:function(a,b){return R(a,b,!0)}}),m.fn.extend({data:function(a,b){var c,d,e,f=this[0],g=f&&f.attributes;if(void 0===a){if(this.length&&(e=m.data(f),1===f.nodeType&&!m._data(f,"parsedAttrs"))){c=g.length;while(c--)g[c]&&(d=g[c].name,0===d.indexOf("data-")&&(d=m.camelCase(d.slice(5)),O(f,d,e[d])));m._data(f,"parsedAttrs",!0)}return e}return"object"==typeof a?this.each(function(){m.data(this,a)}):arguments.length>1?this.each(function(){m.data(this,a,b)}):f?O(f,a,m.data(f,a)):void 0},removeData:function(a){return this.each(function(){m.removeData(this,a)})}}),m.extend({queue:function(a,b,c){var d;return a?(b=(b||"fx")+"queue",d=m._data(a,b),c&&(!d||m.isArray(c)?d=m._data(a,b,m.makeArray(c)):d.push(c)),d||[]):void 0},dequeue:function(a,b){b=b||"fx";var c=m.queue(a,b),d=c.length,e=c.shift(),f=m._queueHooks(a,b),g=function(){m.dequeue(a,b)};"inprogress"===e&&(e=c.shift(),d--),e&&("fx"===b&&c.unshift("inprogress"),delete f.stop,e.call(a,g,f)),!d&&f&&f.empty.fire()},_queueHooks:function(a,b){var c=b+"queueHooks";return m._data(a,c)||m._data(a,c,{empty:m.Callbacks("once memory").add(function(){m._removeData(a,b+"queue"),m._removeData(a,c)})})}}),m.fn.extend({queue:function(a,b){var c=2;return"string"!=typeof a&&(b=a,a="fx",c--),arguments.length<c?m.queue(this[0],a):void 0===b?this:this.each(function(){var c=m.queue(this,a,b);m._queueHooks(this,a),"fx"===a&&"inprogress"!==c[0]&&m.dequeue(this,a)})},dequeue:function(a){return this.each(function(){m.dequeue(this,a)})},clearQueue:function(a){return this.queue(a||"fx",[])},promise:function(a,b){var c,d=1,e=m.Deferred(),f=this,g=this.length,h=function(){--d||e.resolveWith(f,[f])};"string"!=typeof a&&(b=a,a=void 0),a=a||"fx";while(g--)c=m._data(f[g],a+"queueHooks"),c&&c.empty&&(d++,c.empty.add(h));return h(),e.promise(b)}});var S=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,T=["Top","Right","Bottom","Left"],U=function(a,b){return a=b||a,"none"===m.css(a,"display")||!m.contains(a.ownerDocument,a)},V=m.access=function(a,b,c,d,e,f,g){var h=0,i=a.length,j=null==c;if("object"===m.type(c)){e=!0;for(h in c)m.access(a,b,h,c[h],!0,f,g)}else if(void 0!==d&&(e=!0,m.isFunction(d)||(g=!0),j&&(g?(b.call(a,d),b=null):(j=b,b=function(a,b,c){return j.call(m(a),c)})),b))for(;i>h;h++)b(a[h],c,g?d:d.call(a[h],h,b(a[h],c)));return e?a:j?b.call(a):i?b(a[0],c):f},W=/^(?:checkbox|radio)$/i;!function(){var a=y.createElement("input"),b=y.createElement("div"),c=y.createDocumentFragment();if(b.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",k.leadingWhitespace=3===b.firstChild.nodeType,k.tbody=!b.getElementsByTagName("tbody").length,k.htmlSerialize=!!b.getElementsByTagName("link").length,k.html5Clone="<:nav></:nav>"!==y.createElement("nav").cloneNode(!0).outerHTML,a.type="checkbox",a.checked=!0,c.appendChild(a),k.appendChecked=a.checked,b.innerHTML="<textarea>x</textarea>",k.noCloneChecked=!!b.cloneNode(!0).lastChild.defaultValue,c.appendChild(b),b.innerHTML="<input type='radio' checked='checked' name='t'/>",k.checkClone=b.cloneNode(!0).cloneNode(!0).lastChild.checked,k.noCloneEvent=!0,b.attachEvent&&(b.attachEvent("onclick",function(){k.noCloneEvent=!1}),b.cloneNode(!0).click()),null==k.deleteExpando){k.deleteExpando=!0;try{delete b.test}catch(d){k.deleteExpando=!1}}}(),function(){var b,c,d=y.createElement("div");for(b in{submit:!0,change:!0,focusin:!0})c="on"+b,(k[b+"Bubbles"]=c in a)||(d.setAttribute(c,"t"),k[b+"Bubbles"]=d.attributes[c].expando===!1);d=null}();var X=/^(?:input|select|textarea)$/i,Y=/^key/,Z=/^(?:mouse|pointer|contextmenu)|click/,$=/^(?:focusinfocus|focusoutblur)$/,_=/^([^.]*)(?:\.(.+)|)$/;function ab(){return!0}function bb(){return!1}function cb(){try{return y.activeElement}catch(a){}}m.event={global:{},add:function(a,b,c,d,e){var f,g,h,i,j,k,l,n,o,p,q,r=m._data(a);if(r){c.handler&&(i=c,c=i.handler,e=i.selector),c.guid||(c.guid=m.guid++),(g=r.events)||(g=r.events={}),(k=r.handle)||(k=r.handle=function(a){return typeof m===K||a&&m.event.triggered===a.type?void 0:m.event.dispatch.apply(k.elem,arguments)},k.elem=a),b=(b||"").match(E)||[""],h=b.length;while(h--)f=_.exec(b[h])||[],o=q=f[1],p=(f[2]||"").split(".").sort(),o&&(j=m.event.special[o]||{},o=(e?j.delegateType:j.bindType)||o,j=m.event.special[o]||{},l=m.extend({type:o,origType:q,data:d,handler:c,guid:c.guid,selector:e,needsContext:e&&m.expr.match.needsContext.test(e),namespace:p.join(".")},i),(n=g[o])||(n=g[o]=[],n.delegateCount=0,j.setup&&j.setup.call(a,d,p,k)!==!1||(a.addEventListener?a.addEventListener(o,k,!1):a.attachEvent&&a.attachEvent("on"+o,k))),j.add&&(j.add.call(a,l),l.handler.guid||(l.handler.guid=c.guid)),e?n.splice(n.delegateCount++,0,l):n.push(l),m.event.global[o]=!0);a=null}},remove:function(a,b,c,d,e){var f,g,h,i,j,k,l,n,o,p,q,r=m.hasData(a)&&m._data(a);if(r&&(k=r.events)){b=(b||"").match(E)||[""],j=b.length;while(j--)if(h=_.exec(b[j])||[],o=q=h[1],p=(h[2]||"").split(".").sort(),o){l=m.event.special[o]||{},o=(d?l.delegateType:l.bindType)||o,n=k[o]||[],h=h[2]&&new RegExp("(^|\\.)"+p.join("\\.(?:.*\\.|)")+"(\\.|$)"),i=f=n.length;while(f--)g=n[f],!e&&q!==g.origType||c&&c.guid!==g.guid||h&&!h.test(g.namespace)||d&&d!==g.selector&&("**"!==d||!g.selector)||(n.splice(f,1),g.selector&&n.delegateCount--,l.remove&&l.remove.call(a,g));i&&!n.length&&(l.teardown&&l.teardown.call(a,p,r.handle)!==!1||m.removeEvent(a,o,r.handle),delete k[o])}else for(o in k)m.event.remove(a,o+b[j],c,d,!0);m.isEmptyObject(k)&&(delete r.handle,m._removeData(a,"events"))}},trigger:function(b,c,d,e){var f,g,h,i,k,l,n,o=[d||y],p=j.call(b,"type")?b.type:b,q=j.call(b,"namespace")?b.namespace.split("."):[];if(h=l=d=d||y,3!==d.nodeType&&8!==d.nodeType&&!$.test(p+m.event.triggered)&&(p.indexOf(".")>=0&&(q=p.split("."),p=q.shift(),q.sort()),g=p.indexOf(":")<0&&"on"+p,b=b[m.expando]?b:new m.Event(p,"object"==typeof b&&b),b.isTrigger=e?2:3,b.namespace=q.join("."),b.namespace_re=b.namespace?new RegExp("(^|\\.)"+q.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,b.result=void 0,b.target||(b.target=d),c=null==c?[b]:m.makeArray(c,[b]),k=m.event.special[p]||{},e||!k.trigger||k.trigger.apply(d,c)!==!1)){if(!e&&!k.noBubble&&!m.isWindow(d)){for(i=k.delegateType||p,$.test(i+p)||(h=h.parentNode);h;h=h.parentNode)o.push(h),l=h;l===(d.ownerDocument||y)&&o.push(l.defaultView||l.parentWindow||a)}n=0;while((h=o[n++])&&!b.isPropagationStopped())b.type=n>1?i:k.bindType||p,f=(m._data(h,"events")||{})[b.type]&&m._data(h,"handle"),f&&f.apply(h,c),f=g&&h[g],f&&f.apply&&m.acceptData(h)&&(b.result=f.apply(h,c),b.result===!1&&b.preventDefault());if(b.type=p,!e&&!b.isDefaultPrevented()&&(!k._default||k._default.apply(o.pop(),c)===!1)&&m.acceptData(d)&&g&&d[p]&&!m.isWindow(d)){l=d[g],l&&(d[g]=null),m.event.triggered=p;try{d[p]()}catch(r){}m.event.triggered=void 0,l&&(d[g]=l)}return b.result}},dispatch:function(a){a=m.event.fix(a);var b,c,e,f,g,h=[],i=d.call(arguments),j=(m._data(this,"events")||{})[a.type]||[],k=m.event.special[a.type]||{};if(i[0]=a,a.delegateTarget=this,!k.preDispatch||k.preDispatch.call(this,a)!==!1){h=m.event.handlers.call(this,a,j),b=0;while((f=h[b++])&&!a.isPropagationStopped()){a.currentTarget=f.elem,g=0;while((e=f.handlers[g++])&&!a.isImmediatePropagationStopped())(!a.namespace_re||a.namespace_re.test(e.namespace))&&(a.handleObj=e,a.data=e.data,c=((m.event.special[e.origType]||{}).handle||e.handler).apply(f.elem,i),void 0!==c&&(a.result=c)===!1&&(a.preventDefault(),a.stopPropagation()))}return k.postDispatch&&k.postDispatch.call(this,a),a.result}},handlers:function(a,b){var c,d,e,f,g=[],h=b.delegateCount,i=a.target;if(h&&i.nodeType&&(!a.button||"click"!==a.type))for(;i!=this;i=i.parentNode||this)if(1===i.nodeType&&(i.disabled!==!0||"click"!==a.type)){for(e=[],f=0;h>f;f++)d=b[f],c=d.selector+" ",void 0===e[c]&&(e[c]=d.needsContext?m(c,this).index(i)>=0:m.find(c,this,null,[i]).length),e[c]&&e.push(d);e.length&&g.push({elem:i,handlers:e})}return h<b.length&&g.push({elem:this,handlers:b.slice(h)}),g},fix:function(a){if(a[m.expando])return a;var b,c,d,e=a.type,f=a,g=this.fixHooks[e];g||(this.fixHooks[e]=g=Z.test(e)?this.mouseHooks:Y.test(e)?this.keyHooks:{}),d=g.props?this.props.concat(g.props):this.props,a=new m.Event(f),b=d.length;while(b--)c=d[b],a[c]=f[c];return a.target||(a.target=f.srcElement||y),3===a.target.nodeType&&(a.target=a.target.parentNode),a.metaKey=!!a.metaKey,g.filter?g.filter(a,f):a},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(a,b){return null==a.which&&(a.which=null!=b.charCode?b.charCode:b.keyCode),a}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(a,b){var c,d,e,f=b.button,g=b.fromElement;return null==a.pageX&&null!=b.clientX&&(d=a.target.ownerDocument||y,e=d.documentElement,c=d.body,a.pageX=b.clientX+(e&&e.scrollLeft||c&&c.scrollLeft||0)-(e&&e.clientLeft||c&&c.clientLeft||0),a.pageY=b.clientY+(e&&e.scrollTop||c&&c.scrollTop||0)-(e&&e.clientTop||c&&c.clientTop||0)),!a.relatedTarget&&g&&(a.relatedTarget=g===a.target?b.toElement:g),a.which||void 0===f||(a.which=1&f?1:2&f?3:4&f?2:0),a}},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==cb()&&this.focus)try{return this.focus(),!1}catch(a){}},delegateType:"focusin"},blur:{trigger:function(){return this===cb()&&this.blur?(this.blur(),!1):void 0},delegateType:"focusout"},click:{trigger:function(){return m.nodeName(this,"input")&&"checkbox"===this.type&&this.click?(this.click(),!1):void 0},_default:function(a){return m.nodeName(a.target,"a")}},beforeunload:{postDispatch:function(a){void 0!==a.result&&a.originalEvent&&(a.originalEvent.returnValue=a.result)}}},simulate:function(a,b,c,d){var e=m.extend(new m.Event,c,{type:a,isSimulated:!0,originalEvent:{}});d?m.event.trigger(e,null,b):m.event.dispatch.call(b,e),e.isDefaultPrevented()&&c.preventDefault()}},m.removeEvent=y.removeEventListener?function(a,b,c){a.removeEventListener&&a.removeEventListener(b,c,!1)}:function(a,b,c){var d="on"+b;a.detachEvent&&(typeof a[d]===K&&(a[d]=null),a.detachEvent(d,c))},m.Event=function(a,b){return this instanceof m.Event?(a&&a.type?(this.originalEvent=a,this.type=a.type,this.isDefaultPrevented=a.defaultPrevented||void 0===a.defaultPrevented&&a.returnValue===!1?ab:bb):this.type=a,b&&m.extend(this,b),this.timeStamp=a&&a.timeStamp||m.now(),void(this[m.expando]=!0)):new m.Event(a,b)},m.Event.prototype={isDefaultPrevented:bb,isPropagationStopped:bb,isImmediatePropagationStopped:bb,preventDefault:function(){var a=this.originalEvent;this.isDefaultPrevented=ab,a&&(a.preventDefault?a.preventDefault():a.returnValue=!1)},stopPropagation:function(){var a=this.originalEvent;this.isPropagationStopped=ab,a&&(a.stopPropagation&&a.stopPropagation(),a.cancelBubble=!0)},stopImmediatePropagation:function(){var a=this.originalEvent;this.isImmediatePropagationStopped=ab,a&&a.stopImmediatePropagation&&a.stopImmediatePropagation(),this.stopPropagation()}},m.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(a,b){m.event.special[a]={delegateType:b,bindType:b,handle:function(a){var c,d=this,e=a.relatedTarget,f=a.handleObj;return(!e||e!==d&&!m.contains(d,e))&&(a.type=f.origType,c=f.handler.apply(this,arguments),a.type=b),c}}}),k.submitBubbles||(m.event.special.submit={setup:function(){return m.nodeName(this,"form")?!1:void m.event.add(this,"click._submit keypress._submit",function(a){var b=a.target,c=m.nodeName(b,"input")||m.nodeName(b,"button")?b.form:void 0;c&&!m._data(c,"submitBubbles")&&(m.event.add(c,"submit._submit",function(a){a._submit_bubble=!0}),m._data(c,"submitBubbles",!0))})},postDispatch:function(a){a._submit_bubble&&(delete a._submit_bubble,this.parentNode&&!a.isTrigger&&m.event.simulate("submit",this.parentNode,a,!0))},teardown:function(){return m.nodeName(this,"form")?!1:void m.event.remove(this,"._submit")}}),k.changeBubbles||(m.event.special.change={setup:function(){return X.test(this.nodeName)?(("checkbox"===this.type||"radio"===this.type)&&(m.event.add(this,"propertychange._change",function(a){"checked"===a.originalEvent.propertyName&&(this._just_changed=!0)}),m.event.add(this,"click._change",function(a){this._just_changed&&!a.isTrigger&&(this._just_changed=!1),m.event.simulate("change",this,a,!0)})),!1):void m.event.add(this,"beforeactivate._change",function(a){var b=a.target;X.test(b.nodeName)&&!m._data(b,"changeBubbles")&&(m.event.add(b,"change._change",function(a){!this.parentNode||a.isSimulated||a.isTrigger||m.event.simulate("change",this.parentNode,a,!0)}),m._data(b,"changeBubbles",!0))})},handle:function(a){var b=a.target;return this!==b||a.isSimulated||a.isTrigger||"radio"!==b.type&&"checkbox"!==b.type?a.handleObj.handler.apply(this,arguments):void 0},teardown:function(){return m.event.remove(this,"._change"),!X.test(this.nodeName)}}),k.focusinBubbles||m.each({focus:"focusin",blur:"focusout"},function(a,b){var c=function(a){m.event.simulate(b,a.target,m.event.fix(a),!0)};m.event.special[b]={setup:function(){var d=this.ownerDocument||this,e=m._data(d,b);e||d.addEventListener(a,c,!0),m._data(d,b,(e||0)+1)},teardown:function(){var d=this.ownerDocument||this,e=m._data(d,b)-1;e?m._data(d,b,e):(d.removeEventListener(a,c,!0),m._removeData(d,b))}}}),m.fn.extend({on:function(a,b,c,d,e){var f,g;if("object"==typeof a){"string"!=typeof b&&(c=c||b,b=void 0);for(f in a)this.on(f,b,c,a[f],e);return this}if(null==c&&null==d?(d=b,c=b=void 0):null==d&&("string"==typeof b?(d=c,c=void 0):(d=c,c=b,b=void 0)),d===!1)d=bb;else if(!d)return this;return 1===e&&(g=d,d=function(a){return m().off(a),g.apply(this,arguments)},d.guid=g.guid||(g.guid=m.guid++)),this.each(function(){m.event.add(this,a,d,c,b)})},one:function(a,b,c,d){return this.on(a,b,c,d,1)},off:function(a,b,c){var d,e;if(a&&a.preventDefault&&a.handleObj)return d=a.handleObj,m(a.delegateTarget).off(d.namespace?d.origType+"."+d.namespace:d.origType,d.selector,d.handler),this;if("object"==typeof a){for(e in a)this.off(e,b,a[e]);return this}return(b===!1||"function"==typeof b)&&(c=b,b=void 0),c===!1&&(c=bb),this.each(function(){m.event.remove(this,a,c,b)})},trigger:function(a,b){return this.each(function(){m.event.trigger(a,b,this)})},triggerHandler:function(a,b){var c=this[0];return c?m.event.trigger(a,b,c,!0):void 0}});function db(a){var b=eb.split("|"),c=a.createDocumentFragment();if(c.createElement)while(b.length)c.createElement(b.pop());return c}var eb="abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",fb=/ jQuery\d+="(?:null|\d+)"/g,gb=new RegExp("<(?:"+eb+")[\\s/>]","i"),hb=/^\s+/,ib=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,jb=/<([\w:]+)/,kb=/<tbody/i,lb=/<|&#?\w+;/,mb=/<(?:script|style|link)/i,nb=/checked\s*(?:[^=]|=\s*.checked.)/i,ob=/^$|\/(?:java|ecma)script/i,pb=/^true\/(.*)/,qb=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,rb={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],area:[1,"<map>","</map>"],param:[1,"<object>","</object>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:k.htmlSerialize?[0,"",""]:[1,"X<div>","</div>"]},sb=db(y),tb=sb.appendChild(y.createElement("div"));rb.optgroup=rb.option,rb.tbody=rb.tfoot=rb.colgroup=rb.caption=rb.thead,rb.th=rb.td;function ub(a,b){var c,d,e=0,f=typeof a.getElementsByTagName!==K?a.getElementsByTagName(b||"*"):typeof a.querySelectorAll!==K?a.querySelectorAll(b||"*"):void 0;if(!f)for(f=[],c=a.childNodes||a;null!=(d=c[e]);e++)!b||m.nodeName(d,b)?f.push(d):m.merge(f,ub(d,b));return void 0===b||b&&m.nodeName(a,b)?m.merge([a],f):f}function vb(a){W.test(a.type)&&(a.defaultChecked=a.checked)}function wb(a,b){return m.nodeName(a,"table")&&m.nodeName(11!==b.nodeType?b:b.firstChild,"tr")?a.getElementsByTagName("tbody")[0]||a.appendChild(a.ownerDocument.createElement("tbody")):a}function xb(a){return a.type=(null!==m.find.attr(a,"type"))+"/"+a.type,a}function yb(a){var b=pb.exec(a.type);return b?a.type=b[1]:a.removeAttribute("type"),a}function zb(a,b){for(var c,d=0;null!=(c=a[d]);d++)m._data(c,"globalEval",!b||m._data(b[d],"globalEval"))}function Ab(a,b){if(1===b.nodeType&&m.hasData(a)){var c,d,e,f=m._data(a),g=m._data(b,f),h=f.events;if(h){delete g.handle,g.events={};for(c in h)for(d=0,e=h[c].length;e>d;d++)m.event.add(b,c,h[c][d])}g.data&&(g.data=m.extend({},g.data))}}function Bb(a,b){var c,d,e;if(1===b.nodeType){if(c=b.nodeName.toLowerCase(),!k.noCloneEvent&&b[m.expando]){e=m._data(b);for(d in e.events)m.removeEvent(b,d,e.handle);b.removeAttribute(m.expando)}"script"===c&&b.text!==a.text?(xb(b).text=a.text,yb(b)):"object"===c?(b.parentNode&&(b.outerHTML=a.outerHTML),k.html5Clone&&a.innerHTML&&!m.trim(b.innerHTML)&&(b.innerHTML=a.innerHTML)):"input"===c&&W.test(a.type)?(b.defaultChecked=b.checked=a.checked,b.value!==a.value&&(b.value=a.value)):"option"===c?b.defaultSelected=b.selected=a.defaultSelected:("input"===c||"textarea"===c)&&(b.defaultValue=a.defaultValue)}}m.extend({clone:function(a,b,c){var d,e,f,g,h,i=m.contains(a.ownerDocument,a);if(k.html5Clone||m.isXMLDoc(a)||!gb.test("<"+a.nodeName+">")?f=a.cloneNode(!0):(tb.innerHTML=a.outerHTML,tb.removeChild(f=tb.firstChild)),!(k.noCloneEvent&&k.noCloneChecked||1!==a.nodeType&&11!==a.nodeType||m.isXMLDoc(a)))for(d=ub(f),h=ub(a),g=0;null!=(e=h[g]);++g)d[g]&&Bb(e,d[g]);if(b)if(c)for(h=h||ub(a),d=d||ub(f),g=0;null!=(e=h[g]);g++)Ab(e,d[g]);else Ab(a,f);return d=ub(f,"script"),d.length>0&&zb(d,!i&&ub(a,"script")),d=h=e=null,f},buildFragment:function(a,b,c,d){for(var e,f,g,h,i,j,l,n=a.length,o=db(b),p=[],q=0;n>q;q++)if(f=a[q],f||0===f)if("object"===m.type(f))m.merge(p,f.nodeType?[f]:f);else if(lb.test(f)){h=h||o.appendChild(b.createElement("div")),i=(jb.exec(f)||["",""])[1].toLowerCase(),l=rb[i]||rb._default,h.innerHTML=l[1]+f.replace(ib,"<$1></$2>")+l[2],e=l[0];while(e--)h=h.lastChild;if(!k.leadingWhitespace&&hb.test(f)&&p.push(b.createTextNode(hb.exec(f)[0])),!k.tbody){f="table"!==i||kb.test(f)?"<table>"!==l[1]||kb.test(f)?0:h:h.firstChild,e=f&&f.childNodes.length;while(e--)m.nodeName(j=f.childNodes[e],"tbody")&&!j.childNodes.length&&f.removeChild(j)}m.merge(p,h.childNodes),h.textContent="";while(h.firstChild)h.removeChild(h.firstChild);h=o.lastChild}else p.push(b.createTextNode(f));h&&o.removeChild(h),k.appendChecked||m.grep(ub(p,"input"),vb),q=0;while(f=p[q++])if((!d||-1===m.inArray(f,d))&&(g=m.contains(f.ownerDocument,f),h=ub(o.appendChild(f),"script"),g&&zb(h),c)){e=0;while(f=h[e++])ob.test(f.type||"")&&c.push(f)}return h=null,o},cleanData:function(a,b){for(var d,e,f,g,h=0,i=m.expando,j=m.cache,l=k.deleteExpando,n=m.event.special;null!=(d=a[h]);h++)if((b||m.acceptData(d))&&(f=d[i],g=f&&j[f])){if(g.events)for(e in g.events)n[e]?m.event.remove(d,e):m.removeEvent(d,e,g.handle);j[f]&&(delete j[f],l?delete d[i]:typeof d.removeAttribute!==K?d.removeAttribute(i):d[i]=null,c.push(f))}}}),m.fn.extend({text:function(a){return V(this,function(a){return void 0===a?m.text(this):this.empty().append((this[0]&&this[0].ownerDocument||y).createTextNode(a))},null,a,arguments.length)},append:function(){return this.domManip(arguments,function(a){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var b=wb(this,a);b.appendChild(a)}})},prepend:function(){return this.domManip(arguments,function(a){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var b=wb(this,a);b.insertBefore(a,b.firstChild)}})},before:function(){return this.domManip(arguments,function(a){this.parentNode&&this.parentNode.insertBefore(a,this)})},after:function(){return this.domManip(arguments,function(a){this.parentNode&&this.parentNode.insertBefore(a,this.nextSibling)})},remove:function(a,b){for(var c,d=a?m.filter(a,this):this,e=0;null!=(c=d[e]);e++)b||1!==c.nodeType||m.cleanData(ub(c)),c.parentNode&&(b&&m.contains(c.ownerDocument,c)&&zb(ub(c,"script")),c.parentNode.removeChild(c));return this},empty:function(){for(var a,b=0;null!=(a=this[b]);b++){1===a.nodeType&&m.cleanData(ub(a,!1));while(a.firstChild)a.removeChild(a.firstChild);a.options&&m.nodeName(a,"select")&&(a.options.length=0)}return this},clone:function(a,b){return a=null==a?!1:a,b=null==b?a:b,this.map(function(){return m.clone(this,a,b)})},html:function(a){return V(this,function(a){var b=this[0]||{},c=0,d=this.length;if(void 0===a)return 1===b.nodeType?b.innerHTML.replace(fb,""):void 0;if(!("string"!=typeof a||mb.test(a)||!k.htmlSerialize&&gb.test(a)||!k.leadingWhitespace&&hb.test(a)||rb[(jb.exec(a)||["",""])[1].toLowerCase()])){a=a.replace(ib,"<$1></$2>");try{for(;d>c;c++)b=this[c]||{},1===b.nodeType&&(m.cleanData(ub(b,!1)),b.innerHTML=a);b=0}catch(e){}}b&&this.empty().append(a)},null,a,arguments.length)},replaceWith:function(){var a=arguments[0];return this.domManip(arguments,function(b){a=this.parentNode,m.cleanData(ub(this)),a&&a.replaceChild(b,this)}),a&&(a.length||a.nodeType)?this:this.remove()},detach:function(a){return this.remove(a,!0)},domManip:function(a,b){a=e.apply([],a);var c,d,f,g,h,i,j=0,l=this.length,n=this,o=l-1,p=a[0],q=m.isFunction(p);if(q||l>1&&"string"==typeof p&&!k.checkClone&&nb.test(p))return this.each(function(c){var d=n.eq(c);q&&(a[0]=p.call(this,c,d.html())),d.domManip(a,b)});if(l&&(i=m.buildFragment(a,this[0].ownerDocument,!1,this),c=i.firstChild,1===i.childNodes.length&&(i=c),c)){for(g=m.map(ub(i,"script"),xb),f=g.length;l>j;j++)d=i,j!==o&&(d=m.clone(d,!0,!0),f&&m.merge(g,ub(d,"script"))),b.call(this[j],d,j);if(f)for(h=g[g.length-1].ownerDocument,m.map(g,yb),j=0;f>j;j++)d=g[j],ob.test(d.type||"")&&!m._data(d,"globalEval")&&m.contains(h,d)&&(d.src?m._evalUrl&&m._evalUrl(d.src):m.globalEval((d.text||d.textContent||d.innerHTML||"").replace(qb,"")));i=c=null}return this}}),m.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(a,b){m.fn[a]=function(a){for(var c,d=0,e=[],g=m(a),h=g.length-1;h>=d;d++)c=d===h?this:this.clone(!0),m(g[d])[b](c),f.apply(e,c.get());return this.pushStack(e)}});var Cb,Db={};function Eb(b,c){var d,e=m(c.createElement(b)).appendTo(c.body),f=a.getDefaultComputedStyle&&(d=a.getDefaultComputedStyle(e[0]))?d.display:m.css(e[0],"display");return e.detach(),f}function Fb(a){var b=y,c=Db[a];return c||(c=Eb(a,b),"none"!==c&&c||(Cb=(Cb||m("<iframe frameborder='0' width='0' height='0'/>")).appendTo(b.documentElement),b=(Cb[0].contentWindow||Cb[0].contentDocument).document,b.write(),b.close(),c=Eb(a,b),Cb.detach()),Db[a]=c),c}!function(){var a;k.shrinkWrapBlocks=function(){if(null!=a)return a;a=!1;var b,c,d;return c=y.getElementsByTagName("body")[0],c&&c.style?(b=y.createElement("div"),d=y.createElement("div"),d.style.cssText="position:absolute;border:0;width:0;height:0;top:0;left:-9999px",c.appendChild(d).appendChild(b),typeof b.style.zoom!==K&&(b.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:1px;width:1px;zoom:1",b.appendChild(y.createElement("div")).style.width="5px",a=3!==b.offsetWidth),c.removeChild(d),a):void 0}}();var Gb=/^margin/,Hb=new RegExp("^("+S+")(?!px)[a-z%]+$","i"),Ib,Jb,Kb=/^(top|right|bottom|left)$/;a.getComputedStyle?(Ib=function(b){return b.ownerDocument.defaultView.opener?b.ownerDocument.defaultView.getComputedStyle(b,null):a.getComputedStyle(b,null)},Jb=function(a,b,c){var d,e,f,g,h=a.style;return c=c||Ib(a),g=c?c.getPropertyValue(b)||c[b]:void 0,c&&(""!==g||m.contains(a.ownerDocument,a)||(g=m.style(a,b)),Hb.test(g)&&Gb.test(b)&&(d=h.width,e=h.minWidth,f=h.maxWidth,h.minWidth=h.maxWidth=h.width=g,g=c.width,h.width=d,h.minWidth=e,h.maxWidth=f)),void 0===g?g:g+""}):y.documentElement.currentStyle&&(Ib=function(a){return a.currentStyle},Jb=function(a,b,c){var d,e,f,g,h=a.style;return c=c||Ib(a),g=c?c[b]:void 0,null==g&&h&&h[b]&&(g=h[b]),Hb.test(g)&&!Kb.test(b)&&(d=h.left,e=a.runtimeStyle,f=e&&e.left,f&&(e.left=a.currentStyle.left),h.left="fontSize"===b?"1em":g,g=h.pixelLeft+"px",h.left=d,f&&(e.left=f)),void 0===g?g:g+""||"auto"});function Lb(a,b){return{get:function(){var c=a();if(null!=c)return c?void delete this.get:(this.get=b).apply(this,arguments)}}}!function(){var b,c,d,e,f,g,h;if(b=y.createElement("div"),b.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",d=b.getElementsByTagName("a")[0],c=d&&d.style){c.cssText="float:left;opacity:.5",k.opacity="0.5"===c.opacity,k.cssFloat=!!c.cssFloat,b.style.backgroundClip="content-box",b.cloneNode(!0).style.backgroundClip="",k.clearCloneStyle="content-box"===b.style.backgroundClip,k.boxSizing=""===c.boxSizing||""===c.MozBoxSizing||""===c.WebkitBoxSizing,m.extend(k,{reliableHiddenOffsets:function(){return null==g&&i(),g},boxSizingReliable:function(){return null==f&&i(),f},pixelPosition:function(){return null==e&&i(),e},reliableMarginRight:function(){return null==h&&i(),h}});function i(){var b,c,d,i;c=y.getElementsByTagName("body")[0],c&&c.style&&(b=y.createElement("div"),d=y.createElement("div"),d.style.cssText="position:absolute;border:0;width:0;height:0;top:0;left:-9999px",c.appendChild(d).appendChild(b),b.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;display:block;margin-top:1%;top:1%;border:1px;padding:1px;width:4px;position:absolute",e=f=!1,h=!0,a.getComputedStyle&&(e="1%"!==(a.getComputedStyle(b,null)||{}).top,f="4px"===(a.getComputedStyle(b,null)||{width:"4px"}).width,i=b.appendChild(y.createElement("div")),i.style.cssText=b.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:0",i.style.marginRight=i.style.width="0",b.style.width="1px",h=!parseFloat((a.getComputedStyle(i,null)||{}).marginRight),b.removeChild(i)),b.innerHTML="<table><tr><td></td><td>t</td></tr></table>",i=b.getElementsByTagName("td"),i[0].style.cssText="margin:0;border:0;padding:0;display:none",g=0===i[0].offsetHeight,g&&(i[0].style.display="",i[1].style.display="none",g=0===i[0].offsetHeight),c.removeChild(d))}}}(),m.swap=function(a,b,c,d){var e,f,g={};for(f in b)g[f]=a.style[f],a.style[f]=b[f];e=c.apply(a,d||[]);for(f in b)a.style[f]=g[f];return e};var Mb=/alpha\([^)]*\)/i,Nb=/opacity\s*=\s*([^)]*)/,Ob=/^(none|table(?!-c[ea]).+)/,Pb=new RegExp("^("+S+")(.*)$","i"),Qb=new RegExp("^([+-])=("+S+")","i"),Rb={position:"absolute",visibility:"hidden",display:"block"},Sb={letterSpacing:"0",fontWeight:"400"},Tb=["Webkit","O","Moz","ms"];function Ub(a,b){if(b in a)return b;var c=b.charAt(0).toUpperCase()+b.slice(1),d=b,e=Tb.length;while(e--)if(b=Tb[e]+c,b in a)return b;return d}function Vb(a,b){for(var c,d,e,f=[],g=0,h=a.length;h>g;g++)d=a[g],d.style&&(f[g]=m._data(d,"olddisplay"),c=d.style.display,b?(f[g]||"none"!==c||(d.style.display=""),""===d.style.display&&U(d)&&(f[g]=m._data(d,"olddisplay",Fb(d.nodeName)))):(e=U(d),(c&&"none"!==c||!e)&&m._data(d,"olddisplay",e?c:m.css(d,"display"))));for(g=0;h>g;g++)d=a[g],d.style&&(b&&"none"!==d.style.display&&""!==d.style.display||(d.style.display=b?f[g]||"":"none"));return a}function Wb(a,b,c){var d=Pb.exec(b);return d?Math.max(0,d[1]-(c||0))+(d[2]||"px"):b}function Xb(a,b,c,d,e){for(var f=c===(d?"border":"content")?4:"width"===b?1:0,g=0;4>f;f+=2)"margin"===c&&(g+=m.css(a,c+T[f],!0,e)),d?("content"===c&&(g-=m.css(a,"padding"+T[f],!0,e)),"margin"!==c&&(g-=m.css(a,"border"+T[f]+"Width",!0,e))):(g+=m.css(a,"padding"+T[f],!0,e),"padding"!==c&&(g+=m.css(a,"border"+T[f]+"Width",!0,e)));return g}function Yb(a,b,c){var d=!0,e="width"===b?a.offsetWidth:a.offsetHeight,f=Ib(a),g=k.boxSizing&&"border-box"===m.css(a,"boxSizing",!1,f);if(0>=e||null==e){if(e=Jb(a,b,f),(0>e||null==e)&&(e=a.style[b]),Hb.test(e))return e;d=g&&(k.boxSizingReliable()||e===a.style[b]),e=parseFloat(e)||0}return e+Xb(a,b,c||(g?"border":"content"),d,f)+"px"}m.extend({cssHooks:{opacity:{get:function(a,b){if(b){var c=Jb(a,"opacity");return""===c?"1":c}}}},cssNumber:{columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":k.cssFloat?"cssFloat":"styleFloat"},style:function(a,b,c,d){if(a&&3!==a.nodeType&&8!==a.nodeType&&a.style){var e,f,g,h=m.camelCase(b),i=a.style;if(b=m.cssProps[h]||(m.cssProps[h]=Ub(i,h)),g=m.cssHooks[b]||m.cssHooks[h],void 0===c)return g&&"get"in g&&void 0!==(e=g.get(a,!1,d))?e:i[b];if(f=typeof c,"string"===f&&(e=Qb.exec(c))&&(c=(e[1]+1)*e[2]+parseFloat(m.css(a,b)),f="number"),null!=c&&c===c&&("number"!==f||m.cssNumber[h]||(c+="px"),k.clearCloneStyle||""!==c||0!==b.indexOf("background")||(i[b]="inherit"),!(g&&"set"in g&&void 0===(c=g.set(a,c,d)))))try{i[b]=c}catch(j){}}},css:function(a,b,c,d){var e,f,g,h=m.camelCase(b);return b=m.cssProps[h]||(m.cssProps[h]=Ub(a.style,h)),g=m.cssHooks[b]||m.cssHooks[h],g&&"get"in g&&(f=g.get(a,!0,c)),void 0===f&&(f=Jb(a,b,d)),"normal"===f&&b in Sb&&(f=Sb[b]),""===c||c?(e=parseFloat(f),c===!0||m.isNumeric(e)?e||0:f):f}}),m.each(["height","width"],function(a,b){m.cssHooks[b]={get:function(a,c,d){return c?Ob.test(m.css(a,"display"))&&0===a.offsetWidth?m.swap(a,Rb,function(){return Yb(a,b,d)}):Yb(a,b,d):void 0},set:function(a,c,d){var e=d&&Ib(a);return Wb(a,c,d?Xb(a,b,d,k.boxSizing&&"border-box"===m.css(a,"boxSizing",!1,e),e):0)}}}),k.opacity||(m.cssHooks.opacity={get:function(a,b){return Nb.test((b&&a.currentStyle?a.currentStyle.filter:a.style.filter)||"")?.01*parseFloat(RegExp.$1)+"":b?"1":""},set:function(a,b){var c=a.style,d=a.currentStyle,e=m.isNumeric(b)?"alpha(opacity="+100*b+")":"",f=d&&d.filter||c.filter||"";c.zoom=1,(b>=1||""===b)&&""===m.trim(f.replace(Mb,""))&&c.removeAttribute&&(c.removeAttribute("filter"),""===b||d&&!d.filter)||(c.filter=Mb.test(f)?f.replace(Mb,e):f+" "+e)}}),m.cssHooks.marginRight=Lb(k.reliableMarginRight,function(a,b){return b?m.swap(a,{display:"inline-block"},Jb,[a,"marginRight"]):void 0}),m.each({margin:"",padding:"",border:"Width"},function(a,b){m.cssHooks[a+b]={expand:function(c){for(var d=0,e={},f="string"==typeof c?c.split(" "):[c];4>d;d++)e[a+T[d]+b]=f[d]||f[d-2]||f[0];return e}},Gb.test(a)||(m.cssHooks[a+b].set=Wb)}),m.fn.extend({css:function(a,b){return V(this,function(a,b,c){var d,e,f={},g=0;if(m.isArray(b)){for(d=Ib(a),e=b.length;e>g;g++)f[b[g]]=m.css(a,b[g],!1,d);return f}return void 0!==c?m.style(a,b,c):m.css(a,b)},a,b,arguments.length>1)},show:function(){return Vb(this,!0)},hide:function(){return Vb(this)},toggle:function(a){return"boolean"==typeof a?a?this.show():this.hide():this.each(function(){U(this)?m(this).show():m(this).hide()})}});function Zb(a,b,c,d,e){return new Zb.prototype.init(a,b,c,d,e)
}m.Tween=Zb,Zb.prototype={constructor:Zb,init:function(a,b,c,d,e,f){this.elem=a,this.prop=c,this.easing=e||"swing",this.options=b,this.start=this.now=this.cur(),this.end=d,this.unit=f||(m.cssNumber[c]?"":"px")},cur:function(){var a=Zb.propHooks[this.prop];return a&&a.get?a.get(this):Zb.propHooks._default.get(this)},run:function(a){var b,c=Zb.propHooks[this.prop];return this.pos=b=this.options.duration?m.easing[this.easing](a,this.options.duration*a,0,1,this.options.duration):a,this.now=(this.end-this.start)*b+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),c&&c.set?c.set(this):Zb.propHooks._default.set(this),this}},Zb.prototype.init.prototype=Zb.prototype,Zb.propHooks={_default:{get:function(a){var b;return null==a.elem[a.prop]||a.elem.style&&null!=a.elem.style[a.prop]?(b=m.css(a.elem,a.prop,""),b&&"auto"!==b?b:0):a.elem[a.prop]},set:function(a){m.fx.step[a.prop]?m.fx.step[a.prop](a):a.elem.style&&(null!=a.elem.style[m.cssProps[a.prop]]||m.cssHooks[a.prop])?m.style(a.elem,a.prop,a.now+a.unit):a.elem[a.prop]=a.now}}},Zb.propHooks.scrollTop=Zb.propHooks.scrollLeft={set:function(a){a.elem.nodeType&&a.elem.parentNode&&(a.elem[a.prop]=a.now)}},m.easing={linear:function(a){return a},swing:function(a){return.5-Math.cos(a*Math.PI)/2}},m.fx=Zb.prototype.init,m.fx.step={};var $b,_b,ac=/^(?:toggle|show|hide)$/,bc=new RegExp("^(?:([+-])=|)("+S+")([a-z%]*)$","i"),cc=/queueHooks$/,dc=[ic],ec={"*":[function(a,b){var c=this.createTween(a,b),d=c.cur(),e=bc.exec(b),f=e&&e[3]||(m.cssNumber[a]?"":"px"),g=(m.cssNumber[a]||"px"!==f&&+d)&&bc.exec(m.css(c.elem,a)),h=1,i=20;if(g&&g[3]!==f){f=f||g[3],e=e||[],g=+d||1;do h=h||".5",g/=h,m.style(c.elem,a,g+f);while(h!==(h=c.cur()/d)&&1!==h&&--i)}return e&&(g=c.start=+g||+d||0,c.unit=f,c.end=e[1]?g+(e[1]+1)*e[2]:+e[2]),c}]};function fc(){return setTimeout(function(){$b=void 0}),$b=m.now()}function gc(a,b){var c,d={height:a},e=0;for(b=b?1:0;4>e;e+=2-b)c=T[e],d["margin"+c]=d["padding"+c]=a;return b&&(d.opacity=d.width=a),d}function hc(a,b,c){for(var d,e=(ec[b]||[]).concat(ec["*"]),f=0,g=e.length;g>f;f++)if(d=e[f].call(c,b,a))return d}function ic(a,b,c){var d,e,f,g,h,i,j,l,n=this,o={},p=a.style,q=a.nodeType&&U(a),r=m._data(a,"fxshow");c.queue||(h=m._queueHooks(a,"fx"),null==h.unqueued&&(h.unqueued=0,i=h.empty.fire,h.empty.fire=function(){h.unqueued||i()}),h.unqueued++,n.always(function(){n.always(function(){h.unqueued--,m.queue(a,"fx").length||h.empty.fire()})})),1===a.nodeType&&("height"in b||"width"in b)&&(c.overflow=[p.overflow,p.overflowX,p.overflowY],j=m.css(a,"display"),l="none"===j?m._data(a,"olddisplay")||Fb(a.nodeName):j,"inline"===l&&"none"===m.css(a,"float")&&(k.inlineBlockNeedsLayout&&"inline"!==Fb(a.nodeName)?p.zoom=1:p.display="inline-block")),c.overflow&&(p.overflow="hidden",k.shrinkWrapBlocks()||n.always(function(){p.overflow=c.overflow[0],p.overflowX=c.overflow[1],p.overflowY=c.overflow[2]}));for(d in b)if(e=b[d],ac.exec(e)){if(delete b[d],f=f||"toggle"===e,e===(q?"hide":"show")){if("show"!==e||!r||void 0===r[d])continue;q=!0}o[d]=r&&r[d]||m.style(a,d)}else j=void 0;if(m.isEmptyObject(o))"inline"===("none"===j?Fb(a.nodeName):j)&&(p.display=j);else{r?"hidden"in r&&(q=r.hidden):r=m._data(a,"fxshow",{}),f&&(r.hidden=!q),q?m(a).show():n.done(function(){m(a).hide()}),n.done(function(){var b;m._removeData(a,"fxshow");for(b in o)m.style(a,b,o[b])});for(d in o)g=hc(q?r[d]:0,d,n),d in r||(r[d]=g.start,q&&(g.end=g.start,g.start="width"===d||"height"===d?1:0))}}function jc(a,b){var c,d,e,f,g;for(c in a)if(d=m.camelCase(c),e=b[d],f=a[c],m.isArray(f)&&(e=f[1],f=a[c]=f[0]),c!==d&&(a[d]=f,delete a[c]),g=m.cssHooks[d],g&&"expand"in g){f=g.expand(f),delete a[d];for(c in f)c in a||(a[c]=f[c],b[c]=e)}else b[d]=e}function kc(a,b,c){var d,e,f=0,g=dc.length,h=m.Deferred().always(function(){delete i.elem}),i=function(){if(e)return!1;for(var b=$b||fc(),c=Math.max(0,j.startTime+j.duration-b),d=c/j.duration||0,f=1-d,g=0,i=j.tweens.length;i>g;g++)j.tweens[g].run(f);return h.notifyWith(a,[j,f,c]),1>f&&i?c:(h.resolveWith(a,[j]),!1)},j=h.promise({elem:a,props:m.extend({},b),opts:m.extend(!0,{specialEasing:{}},c),originalProperties:b,originalOptions:c,startTime:$b||fc(),duration:c.duration,tweens:[],createTween:function(b,c){var d=m.Tween(a,j.opts,b,c,j.opts.specialEasing[b]||j.opts.easing);return j.tweens.push(d),d},stop:function(b){var c=0,d=b?j.tweens.length:0;if(e)return this;for(e=!0;d>c;c++)j.tweens[c].run(1);return b?h.resolveWith(a,[j,b]):h.rejectWith(a,[j,b]),this}}),k=j.props;for(jc(k,j.opts.specialEasing);g>f;f++)if(d=dc[f].call(j,a,k,j.opts))return d;return m.map(k,hc,j),m.isFunction(j.opts.start)&&j.opts.start.call(a,j),m.fx.timer(m.extend(i,{elem:a,anim:j,queue:j.opts.queue})),j.progress(j.opts.progress).done(j.opts.done,j.opts.complete).fail(j.opts.fail).always(j.opts.always)}m.Animation=m.extend(kc,{tweener:function(a,b){m.isFunction(a)?(b=a,a=["*"]):a=a.split(" ");for(var c,d=0,e=a.length;e>d;d++)c=a[d],ec[c]=ec[c]||[],ec[c].unshift(b)},prefilter:function(a,b){b?dc.unshift(a):dc.push(a)}}),m.speed=function(a,b,c){var d=a&&"object"==typeof a?m.extend({},a):{complete:c||!c&&b||m.isFunction(a)&&a,duration:a,easing:c&&b||b&&!m.isFunction(b)&&b};return d.duration=m.fx.off?0:"number"==typeof d.duration?d.duration:d.duration in m.fx.speeds?m.fx.speeds[d.duration]:m.fx.speeds._default,(null==d.queue||d.queue===!0)&&(d.queue="fx"),d.old=d.complete,d.complete=function(){m.isFunction(d.old)&&d.old.call(this),d.queue&&m.dequeue(this,d.queue)},d},m.fn.extend({fadeTo:function(a,b,c,d){return this.filter(U).css("opacity",0).show().end().animate({opacity:b},a,c,d)},animate:function(a,b,c,d){var e=m.isEmptyObject(a),f=m.speed(b,c,d),g=function(){var b=kc(this,m.extend({},a),f);(e||m._data(this,"finish"))&&b.stop(!0)};return g.finish=g,e||f.queue===!1?this.each(g):this.queue(f.queue,g)},stop:function(a,b,c){var d=function(a){var b=a.stop;delete a.stop,b(c)};return"string"!=typeof a&&(c=b,b=a,a=void 0),b&&a!==!1&&this.queue(a||"fx",[]),this.each(function(){var b=!0,e=null!=a&&a+"queueHooks",f=m.timers,g=m._data(this);if(e)g[e]&&g[e].stop&&d(g[e]);else for(e in g)g[e]&&g[e].stop&&cc.test(e)&&d(g[e]);for(e=f.length;e--;)f[e].elem!==this||null!=a&&f[e].queue!==a||(f[e].anim.stop(c),b=!1,f.splice(e,1));(b||!c)&&m.dequeue(this,a)})},finish:function(a){return a!==!1&&(a=a||"fx"),this.each(function(){var b,c=m._data(this),d=c[a+"queue"],e=c[a+"queueHooks"],f=m.timers,g=d?d.length:0;for(c.finish=!0,m.queue(this,a,[]),e&&e.stop&&e.stop.call(this,!0),b=f.length;b--;)f[b].elem===this&&f[b].queue===a&&(f[b].anim.stop(!0),f.splice(b,1));for(b=0;g>b;b++)d[b]&&d[b].finish&&d[b].finish.call(this);delete c.finish})}}),m.each(["toggle","show","hide"],function(a,b){var c=m.fn[b];m.fn[b]=function(a,d,e){return null==a||"boolean"==typeof a?c.apply(this,arguments):this.animate(gc(b,!0),a,d,e)}}),m.each({slideDown:gc("show"),slideUp:gc("hide"),slideToggle:gc("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(a,b){m.fn[a]=function(a,c,d){return this.animate(b,a,c,d)}}),m.timers=[],m.fx.tick=function(){var a,b=m.timers,c=0;for($b=m.now();c<b.length;c++)a=b[c],a()||b[c]!==a||b.splice(c--,1);b.length||m.fx.stop(),$b=void 0},m.fx.timer=function(a){m.timers.push(a),a()?m.fx.start():m.timers.pop()},m.fx.interval=13,m.fx.start=function(){_b||(_b=setInterval(m.fx.tick,m.fx.interval))},m.fx.stop=function(){clearInterval(_b),_b=null},m.fx.speeds={slow:600,fast:200,_default:400},m.fn.delay=function(a,b){return a=m.fx?m.fx.speeds[a]||a:a,b=b||"fx",this.queue(b,function(b,c){var d=setTimeout(b,a);c.stop=function(){clearTimeout(d)}})},function(){var a,b,c,d,e;b=y.createElement("div"),b.setAttribute("className","t"),b.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",d=b.getElementsByTagName("a")[0],c=y.createElement("select"),e=c.appendChild(y.createElement("option")),a=b.getElementsByTagName("input")[0],d.style.cssText="top:1px",k.getSetAttribute="t"!==b.className,k.style=/top/.test(d.getAttribute("style")),k.hrefNormalized="/a"===d.getAttribute("href"),k.checkOn=!!a.value,k.optSelected=e.selected,k.enctype=!!y.createElement("form").enctype,c.disabled=!0,k.optDisabled=!e.disabled,a=y.createElement("input"),a.setAttribute("value",""),k.input=""===a.getAttribute("value"),a.value="t",a.setAttribute("type","radio"),k.radioValue="t"===a.value}();var lc=/\r/g;m.fn.extend({val:function(a){var b,c,d,e=this[0];{if(arguments.length)return d=m.isFunction(a),this.each(function(c){var e;1===this.nodeType&&(e=d?a.call(this,c,m(this).val()):a,null==e?e="":"number"==typeof e?e+="":m.isArray(e)&&(e=m.map(e,function(a){return null==a?"":a+""})),b=m.valHooks[this.type]||m.valHooks[this.nodeName.toLowerCase()],b&&"set"in b&&void 0!==b.set(this,e,"value")||(this.value=e))});if(e)return b=m.valHooks[e.type]||m.valHooks[e.nodeName.toLowerCase()],b&&"get"in b&&void 0!==(c=b.get(e,"value"))?c:(c=e.value,"string"==typeof c?c.replace(lc,""):null==c?"":c)}}}),m.extend({valHooks:{option:{get:function(a){var b=m.find.attr(a,"value");return null!=b?b:m.trim(m.text(a))}},select:{get:function(a){for(var b,c,d=a.options,e=a.selectedIndex,f="select-one"===a.type||0>e,g=f?null:[],h=f?e+1:d.length,i=0>e?h:f?e:0;h>i;i++)if(c=d[i],!(!c.selected&&i!==e||(k.optDisabled?c.disabled:null!==c.getAttribute("disabled"))||c.parentNode.disabled&&m.nodeName(c.parentNode,"optgroup"))){if(b=m(c).val(),f)return b;g.push(b)}return g},set:function(a,b){var c,d,e=a.options,f=m.makeArray(b),g=e.length;while(g--)if(d=e[g],m.inArray(m.valHooks.option.get(d),f)>=0)try{d.selected=c=!0}catch(h){d.scrollHeight}else d.selected=!1;return c||(a.selectedIndex=-1),e}}}}),m.each(["radio","checkbox"],function(){m.valHooks[this]={set:function(a,b){return m.isArray(b)?a.checked=m.inArray(m(a).val(),b)>=0:void 0}},k.checkOn||(m.valHooks[this].get=function(a){return null===a.getAttribute("value")?"on":a.value})});var mc,nc,oc=m.expr.attrHandle,pc=/^(?:checked|selected)$/i,qc=k.getSetAttribute,rc=k.input;m.fn.extend({attr:function(a,b){return V(this,m.attr,a,b,arguments.length>1)},removeAttr:function(a){return this.each(function(){m.removeAttr(this,a)})}}),m.extend({attr:function(a,b,c){var d,e,f=a.nodeType;if(a&&3!==f&&8!==f&&2!==f)return typeof a.getAttribute===K?m.prop(a,b,c):(1===f&&m.isXMLDoc(a)||(b=b.toLowerCase(),d=m.attrHooks[b]||(m.expr.match.bool.test(b)?nc:mc)),void 0===c?d&&"get"in d&&null!==(e=d.get(a,b))?e:(e=m.find.attr(a,b),null==e?void 0:e):null!==c?d&&"set"in d&&void 0!==(e=d.set(a,c,b))?e:(a.setAttribute(b,c+""),c):void m.removeAttr(a,b))},removeAttr:function(a,b){var c,d,e=0,f=b&&b.match(E);if(f&&1===a.nodeType)while(c=f[e++])d=m.propFix[c]||c,m.expr.match.bool.test(c)?rc&&qc||!pc.test(c)?a[d]=!1:a[m.camelCase("default-"+c)]=a[d]=!1:m.attr(a,c,""),a.removeAttribute(qc?c:d)},attrHooks:{type:{set:function(a,b){if(!k.radioValue&&"radio"===b&&m.nodeName(a,"input")){var c=a.value;return a.setAttribute("type",b),c&&(a.value=c),b}}}}}),nc={set:function(a,b,c){return b===!1?m.removeAttr(a,c):rc&&qc||!pc.test(c)?a.setAttribute(!qc&&m.propFix[c]||c,c):a[m.camelCase("default-"+c)]=a[c]=!0,c}},m.each(m.expr.match.bool.source.match(/\w+/g),function(a,b){var c=oc[b]||m.find.attr;oc[b]=rc&&qc||!pc.test(b)?function(a,b,d){var e,f;return d||(f=oc[b],oc[b]=e,e=null!=c(a,b,d)?b.toLowerCase():null,oc[b]=f),e}:function(a,b,c){return c?void 0:a[m.camelCase("default-"+b)]?b.toLowerCase():null}}),rc&&qc||(m.attrHooks.value={set:function(a,b,c){return m.nodeName(a,"input")?void(a.defaultValue=b):mc&&mc.set(a,b,c)}}),qc||(mc={set:function(a,b,c){var d=a.getAttributeNode(c);return d||a.setAttributeNode(d=a.ownerDocument.createAttribute(c)),d.value=b+="","value"===c||b===a.getAttribute(c)?b:void 0}},oc.id=oc.name=oc.coords=function(a,b,c){var d;return c?void 0:(d=a.getAttributeNode(b))&&""!==d.value?d.value:null},m.valHooks.button={get:function(a,b){var c=a.getAttributeNode(b);return c&&c.specified?c.value:void 0},set:mc.set},m.attrHooks.contenteditable={set:function(a,b,c){mc.set(a,""===b?!1:b,c)}},m.each(["width","height"],function(a,b){m.attrHooks[b]={set:function(a,c){return""===c?(a.setAttribute(b,"auto"),c):void 0}}})),k.style||(m.attrHooks.style={get:function(a){return a.style.cssText||void 0},set:function(a,b){return a.style.cssText=b+""}});var sc=/^(?:input|select|textarea|button|object)$/i,tc=/^(?:a|area)$/i;m.fn.extend({prop:function(a,b){return V(this,m.prop,a,b,arguments.length>1)},removeProp:function(a){return a=m.propFix[a]||a,this.each(function(){try{this[a]=void 0,delete this[a]}catch(b){}})}}),m.extend({propFix:{"for":"htmlFor","class":"className"},prop:function(a,b,c){var d,e,f,g=a.nodeType;if(a&&3!==g&&8!==g&&2!==g)return f=1!==g||!m.isXMLDoc(a),f&&(b=m.propFix[b]||b,e=m.propHooks[b]),void 0!==c?e&&"set"in e&&void 0!==(d=e.set(a,c,b))?d:a[b]=c:e&&"get"in e&&null!==(d=e.get(a,b))?d:a[b]},propHooks:{tabIndex:{get:function(a){var b=m.find.attr(a,"tabindex");return b?parseInt(b,10):sc.test(a.nodeName)||tc.test(a.nodeName)&&a.href?0:-1}}}}),k.hrefNormalized||m.each(["href","src"],function(a,b){m.propHooks[b]={get:function(a){return a.getAttribute(b,4)}}}),k.optSelected||(m.propHooks.selected={get:function(a){var b=a.parentNode;return b&&(b.selectedIndex,b.parentNode&&b.parentNode.selectedIndex),null}}),m.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){m.propFix[this.toLowerCase()]=this}),k.enctype||(m.propFix.enctype="encoding");var uc=/[\t\r\n\f]/g;m.fn.extend({addClass:function(a){var b,c,d,e,f,g,h=0,i=this.length,j="string"==typeof a&&a;if(m.isFunction(a))return this.each(function(b){m(this).addClass(a.call(this,b,this.className))});if(j)for(b=(a||"").match(E)||[];i>h;h++)if(c=this[h],d=1===c.nodeType&&(c.className?(" "+c.className+" ").replace(uc," "):" ")){f=0;while(e=b[f++])d.indexOf(" "+e+" ")<0&&(d+=e+" ");g=m.trim(d),c.className!==g&&(c.className=g)}return this},removeClass:function(a){var b,c,d,e,f,g,h=0,i=this.length,j=0===arguments.length||"string"==typeof a&&a;if(m.isFunction(a))return this.each(function(b){m(this).removeClass(a.call(this,b,this.className))});if(j)for(b=(a||"").match(E)||[];i>h;h++)if(c=this[h],d=1===c.nodeType&&(c.className?(" "+c.className+" ").replace(uc," "):"")){f=0;while(e=b[f++])while(d.indexOf(" "+e+" ")>=0)d=d.replace(" "+e+" "," ");g=a?m.trim(d):"",c.className!==g&&(c.className=g)}return this},toggleClass:function(a,b){var c=typeof a;return"boolean"==typeof b&&"string"===c?b?this.addClass(a):this.removeClass(a):this.each(m.isFunction(a)?function(c){m(this).toggleClass(a.call(this,c,this.className,b),b)}:function(){if("string"===c){var b,d=0,e=m(this),f=a.match(E)||[];while(b=f[d++])e.hasClass(b)?e.removeClass(b):e.addClass(b)}else(c===K||"boolean"===c)&&(this.className&&m._data(this,"__className__",this.className),this.className=this.className||a===!1?"":m._data(this,"__className__")||"")})},hasClass:function(a){for(var b=" "+a+" ",c=0,d=this.length;d>c;c++)if(1===this[c].nodeType&&(" "+this[c].className+" ").replace(uc," ").indexOf(b)>=0)return!0;return!1}}),m.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(a,b){m.fn[b]=function(a,c){return arguments.length>0?this.on(b,null,a,c):this.trigger(b)}}),m.fn.extend({hover:function(a,b){return this.mouseenter(a).mouseleave(b||a)},bind:function(a,b,c){return this.on(a,null,b,c)},unbind:function(a,b){return this.off(a,null,b)},delegate:function(a,b,c,d){return this.on(b,a,c,d)},undelegate:function(a,b,c){return 1===arguments.length?this.off(a,"**"):this.off(b,a||"**",c)}});var vc=m.now(),wc=/\?/,xc=/(,)|(\[|{)|(}|])|"(?:[^"\\\r\n]|\\["\\\/bfnrt]|\\u[\da-fA-F]{4})*"\s*:?|true|false|null|-?(?!0\d)\d+(?:\.\d+|)(?:[eE][+-]?\d+|)/g;m.parseJSON=function(b){if(a.JSON&&a.JSON.parse)return a.JSON.parse(b+"");var c,d=null,e=m.trim(b+"");return e&&!m.trim(e.replace(xc,function(a,b,e,f){return c&&b&&(d=0),0===d?a:(c=e||b,d+=!f-!e,"")}))?Function("return "+e)():m.error("Invalid JSON: "+b)},m.parseXML=function(b){var c,d;if(!b||"string"!=typeof b)return null;try{a.DOMParser?(d=new DOMParser,c=d.parseFromString(b,"text/xml")):(c=new ActiveXObject("Microsoft.XMLDOM"),c.async="false",c.loadXML(b))}catch(e){c=void 0}return c&&c.documentElement&&!c.getElementsByTagName("parsererror").length||m.error("Invalid XML: "+b),c};var yc,zc,Ac=/#.*$/,Bc=/([?&])_=[^&]*/,Cc=/^(.*?):[ \t]*([^\r\n]*)\r?$/gm,Dc=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,Ec=/^(?:GET|HEAD)$/,Fc=/^\/\//,Gc=/^([\w.+-]+:)(?:\/\/(?:[^\/?#]*@|)([^\/?#:]*)(?::(\d+)|)|)/,Hc={},Ic={},Jc="*/".concat("*");try{zc=location.href}catch(Kc){zc=y.createElement("a"),zc.href="",zc=zc.href}yc=Gc.exec(zc.toLowerCase())||[];function Lc(a){return function(b,c){"string"!=typeof b&&(c=b,b="*");var d,e=0,f=b.toLowerCase().match(E)||[];if(m.isFunction(c))while(d=f[e++])"+"===d.charAt(0)?(d=d.slice(1)||"*",(a[d]=a[d]||[]).unshift(c)):(a[d]=a[d]||[]).push(c)}}function Mc(a,b,c,d){var e={},f=a===Ic;function g(h){var i;return e[h]=!0,m.each(a[h]||[],function(a,h){var j=h(b,c,d);return"string"!=typeof j||f||e[j]?f?!(i=j):void 0:(b.dataTypes.unshift(j),g(j),!1)}),i}return g(b.dataTypes[0])||!e["*"]&&g("*")}function Nc(a,b){var c,d,e=m.ajaxSettings.flatOptions||{};for(d in b)void 0!==b[d]&&((e[d]?a:c||(c={}))[d]=b[d]);return c&&m.extend(!0,a,c),a}function Oc(a,b,c){var d,e,f,g,h=a.contents,i=a.dataTypes;while("*"===i[0])i.shift(),void 0===e&&(e=a.mimeType||b.getResponseHeader("Content-Type"));if(e)for(g in h)if(h[g]&&h[g].test(e)){i.unshift(g);break}if(i[0]in c)f=i[0];else{for(g in c){if(!i[0]||a.converters[g+" "+i[0]]){f=g;break}d||(d=g)}f=f||d}return f?(f!==i[0]&&i.unshift(f),c[f]):void 0}function Pc(a,b,c,d){var e,f,g,h,i,j={},k=a.dataTypes.slice();if(k[1])for(g in a.converters)j[g.toLowerCase()]=a.converters[g];f=k.shift();while(f)if(a.responseFields[f]&&(c[a.responseFields[f]]=b),!i&&d&&a.dataFilter&&(b=a.dataFilter(b,a.dataType)),i=f,f=k.shift())if("*"===f)f=i;else if("*"!==i&&i!==f){if(g=j[i+" "+f]||j["* "+f],!g)for(e in j)if(h=e.split(" "),h[1]===f&&(g=j[i+" "+h[0]]||j["* "+h[0]])){g===!0?g=j[e]:j[e]!==!0&&(f=h[0],k.unshift(h[1]));break}if(g!==!0)if(g&&a["throws"])b=g(b);else try{b=g(b)}catch(l){return{state:"parsererror",error:g?l:"No conversion from "+i+" to "+f}}}return{state:"success",data:b}}m.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:zc,type:"GET",isLocal:Dc.test(yc[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Jc,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":m.parseJSON,"text xml":m.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(a,b){return b?Nc(Nc(a,m.ajaxSettings),b):Nc(m.ajaxSettings,a)},ajaxPrefilter:Lc(Hc),ajaxTransport:Lc(Ic),ajax:function(a,b){"object"==typeof a&&(b=a,a=void 0),b=b||{};var c,d,e,f,g,h,i,j,k=m.ajaxSetup({},b),l=k.context||k,n=k.context&&(l.nodeType||l.jquery)?m(l):m.event,o=m.Deferred(),p=m.Callbacks("once memory"),q=k.statusCode||{},r={},s={},t=0,u="canceled",v={readyState:0,getResponseHeader:function(a){var b;if(2===t){if(!j){j={};while(b=Cc.exec(f))j[b[1].toLowerCase()]=b[2]}b=j[a.toLowerCase()]}return null==b?null:b},getAllResponseHeaders:function(){return 2===t?f:null},setRequestHeader:function(a,b){var c=a.toLowerCase();return t||(a=s[c]=s[c]||a,r[a]=b),this},overrideMimeType:function(a){return t||(k.mimeType=a),this},statusCode:function(a){var b;if(a)if(2>t)for(b in a)q[b]=[q[b],a[b]];else v.always(a[v.status]);return this},abort:function(a){var b=a||u;return i&&i.abort(b),x(0,b),this}};if(o.promise(v).complete=p.add,v.success=v.done,v.error=v.fail,k.url=((a||k.url||zc)+"").replace(Ac,"").replace(Fc,yc[1]+"//"),k.type=b.method||b.type||k.method||k.type,k.dataTypes=m.trim(k.dataType||"*").toLowerCase().match(E)||[""],null==k.crossDomain&&(c=Gc.exec(k.url.toLowerCase()),k.crossDomain=!(!c||c[1]===yc[1]&&c[2]===yc[2]&&(c[3]||("http:"===c[1]?"80":"443"))===(yc[3]||("http:"===yc[1]?"80":"443")))),k.data&&k.processData&&"string"!=typeof k.data&&(k.data=m.param(k.data,k.traditional)),Mc(Hc,k,b,v),2===t)return v;h=m.event&&k.global,h&&0===m.active++&&m.event.trigger("ajaxStart"),k.type=k.type.toUpperCase(),k.hasContent=!Ec.test(k.type),e=k.url,k.hasContent||(k.data&&(e=k.url+=(wc.test(e)?"&":"?")+k.data,delete k.data),k.cache===!1&&(k.url=Bc.test(e)?e.replace(Bc,"$1_="+vc++):e+(wc.test(e)?"&":"?")+"_="+vc++)),k.ifModified&&(m.lastModified[e]&&v.setRequestHeader("If-Modified-Since",m.lastModified[e]),m.etag[e]&&v.setRequestHeader("If-None-Match",m.etag[e])),(k.data&&k.hasContent&&k.contentType!==!1||b.contentType)&&v.setRequestHeader("Content-Type",k.contentType),v.setRequestHeader("Accept",k.dataTypes[0]&&k.accepts[k.dataTypes[0]]?k.accepts[k.dataTypes[0]]+("*"!==k.dataTypes[0]?", "+Jc+"; q=0.01":""):k.accepts["*"]);for(d in k.headers)v.setRequestHeader(d,k.headers[d]);if(k.beforeSend&&(k.beforeSend.call(l,v,k)===!1||2===t))return v.abort();u="abort";for(d in{success:1,error:1,complete:1})v[d](k[d]);if(i=Mc(Ic,k,b,v)){v.readyState=1,h&&n.trigger("ajaxSend",[v,k]),k.async&&k.timeout>0&&(g=setTimeout(function(){v.abort("timeout")},k.timeout));try{t=1,i.send(r,x)}catch(w){if(!(2>t))throw w;x(-1,w)}}else x(-1,"No Transport");function x(a,b,c,d){var j,r,s,u,w,x=b;2!==t&&(t=2,g&&clearTimeout(g),i=void 0,f=d||"",v.readyState=a>0?4:0,j=a>=200&&300>a||304===a,c&&(u=Oc(k,v,c)),u=Pc(k,u,v,j),j?(k.ifModified&&(w=v.getResponseHeader("Last-Modified"),w&&(m.lastModified[e]=w),w=v.getResponseHeader("etag"),w&&(m.etag[e]=w)),204===a||"HEAD"===k.type?x="nocontent":304===a?x="notmodified":(x=u.state,r=u.data,s=u.error,j=!s)):(s=x,(a||!x)&&(x="error",0>a&&(a=0))),v.status=a,v.statusText=(b||x)+"",j?o.resolveWith(l,[r,x,v]):o.rejectWith(l,[v,x,s]),v.statusCode(q),q=void 0,h&&n.trigger(j?"ajaxSuccess":"ajaxError",[v,k,j?r:s]),p.fireWith(l,[v,x]),h&&(n.trigger("ajaxComplete",[v,k]),--m.active||m.event.trigger("ajaxStop")))}return v},getJSON:function(a,b,c){return m.get(a,b,c,"json")},getScript:function(a,b){return m.get(a,void 0,b,"script")}}),m.each(["get","post"],function(a,b){m[b]=function(a,c,d,e){return m.isFunction(c)&&(e=e||d,d=c,c=void 0),m.ajax({url:a,type:b,dataType:e,data:c,success:d})}}),m._evalUrl=function(a){return m.ajax({url:a,type:"GET",dataType:"script",async:!1,global:!1,"throws":!0})},m.fn.extend({wrapAll:function(a){if(m.isFunction(a))return this.each(function(b){m(this).wrapAll(a.call(this,b))});if(this[0]){var b=m(a,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&b.insertBefore(this[0]),b.map(function(){var a=this;while(a.firstChild&&1===a.firstChild.nodeType)a=a.firstChild;return a}).append(this)}return this},wrapInner:function(a){return this.each(m.isFunction(a)?function(b){m(this).wrapInner(a.call(this,b))}:function(){var b=m(this),c=b.contents();c.length?c.wrapAll(a):b.append(a)})},wrap:function(a){var b=m.isFunction(a);return this.each(function(c){m(this).wrapAll(b?a.call(this,c):a)})},unwrap:function(){return this.parent().each(function(){m.nodeName(this,"body")||m(this).replaceWith(this.childNodes)}).end()}}),m.expr.filters.hidden=function(a){return a.offsetWidth<=0&&a.offsetHeight<=0||!k.reliableHiddenOffsets()&&"none"===(a.style&&a.style.display||m.css(a,"display"))},m.expr.filters.visible=function(a){return!m.expr.filters.hidden(a)};var Qc=/%20/g,Rc=/\[\]$/,Sc=/\r?\n/g,Tc=/^(?:submit|button|image|reset|file)$/i,Uc=/^(?:input|select|textarea|keygen)/i;function Vc(a,b,c,d){var e;if(m.isArray(b))m.each(b,function(b,e){c||Rc.test(a)?d(a,e):Vc(a+"["+("object"==typeof e?b:"")+"]",e,c,d)});else if(c||"object"!==m.type(b))d(a,b);else for(e in b)Vc(a+"["+e+"]",b[e],c,d)}m.param=function(a,b){var c,d=[],e=function(a,b){b=m.isFunction(b)?b():null==b?"":b,d[d.length]=encodeURIComponent(a)+"="+encodeURIComponent(b)};if(void 0===b&&(b=m.ajaxSettings&&m.ajaxSettings.traditional),m.isArray(a)||a.jquery&&!m.isPlainObject(a))m.each(a,function(){e(this.name,this.value)});else for(c in a)Vc(c,a[c],b,e);return d.join("&").replace(Qc,"+")},m.fn.extend({serialize:function(){return m.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var a=m.prop(this,"elements");return a?m.makeArray(a):this}).filter(function(){var a=this.type;return this.name&&!m(this).is(":disabled")&&Uc.test(this.nodeName)&&!Tc.test(a)&&(this.checked||!W.test(a))}).map(function(a,b){var c=m(this).val();return null==c?null:m.isArray(c)?m.map(c,function(a){return{name:b.name,value:a.replace(Sc,"\r\n")}}):{name:b.name,value:c.replace(Sc,"\r\n")}}).get()}}),m.ajaxSettings.xhr=void 0!==a.ActiveXObject?function(){return!this.isLocal&&/^(get|post|head|put|delete|options)$/i.test(this.type)&&Zc()||$c()}:Zc;var Wc=0,Xc={},Yc=m.ajaxSettings.xhr();a.attachEvent&&a.attachEvent("onunload",function(){for(var a in Xc)Xc[a](void 0,!0)}),k.cors=!!Yc&&"withCredentials"in Yc,Yc=k.ajax=!!Yc,Yc&&m.ajaxTransport(function(a){if(!a.crossDomain||k.cors){var b;return{send:function(c,d){var e,f=a.xhr(),g=++Wc;if(f.open(a.type,a.url,a.async,a.username,a.password),a.xhrFields)for(e in a.xhrFields)f[e]=a.xhrFields[e];a.mimeType&&f.overrideMimeType&&f.overrideMimeType(a.mimeType),a.crossDomain||c["X-Requested-With"]||(c["X-Requested-With"]="XMLHttpRequest");for(e in c)void 0!==c[e]&&f.setRequestHeader(e,c[e]+"");f.send(a.hasContent&&a.data||null),b=function(c,e){var h,i,j;if(b&&(e||4===f.readyState))if(delete Xc[g],b=void 0,f.onreadystatechange=m.noop,e)4!==f.readyState&&f.abort();else{j={},h=f.status,"string"==typeof f.responseText&&(j.text=f.responseText);try{i=f.statusText}catch(k){i=""}h||!a.isLocal||a.crossDomain?1223===h&&(h=204):h=j.text?200:404}j&&d(h,i,j,f.getAllResponseHeaders())},a.async?4===f.readyState?setTimeout(b):f.onreadystatechange=Xc[g]=b:b()},abort:function(){b&&b(void 0,!0)}}}});function Zc(){try{return new a.XMLHttpRequest}catch(b){}}function $c(){try{return new a.ActiveXObject("Microsoft.XMLHTTP")}catch(b){}}m.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(a){return m.globalEval(a),a}}}),m.ajaxPrefilter("script",function(a){void 0===a.cache&&(a.cache=!1),a.crossDomain&&(a.type="GET",a.global=!1)}),m.ajaxTransport("script",function(a){if(a.crossDomain){var b,c=y.head||m("head")[0]||y.documentElement;return{send:function(d,e){b=y.createElement("script"),b.async=!0,a.scriptCharset&&(b.charset=a.scriptCharset),b.src=a.url,b.onload=b.onreadystatechange=function(a,c){(c||!b.readyState||/loaded|complete/.test(b.readyState))&&(b.onload=b.onreadystatechange=null,b.parentNode&&b.parentNode.removeChild(b),b=null,c||e(200,"success"))},c.insertBefore(b,c.firstChild)},abort:function(){b&&b.onload(void 0,!0)}}}});var _c=[],ad=/(=)\?(?=&|$)|\?\?/;m.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var a=_c.pop()||m.expando+"_"+vc++;return this[a]=!0,a}}),m.ajaxPrefilter("json jsonp",function(b,c,d){var e,f,g,h=b.jsonp!==!1&&(ad.test(b.url)?"url":"string"==typeof b.data&&!(b.contentType||"").indexOf("application/x-www-form-urlencoded")&&ad.test(b.data)&&"data");return h||"jsonp"===b.dataTypes[0]?(e=b.jsonpCallback=m.isFunction(b.jsonpCallback)?b.jsonpCallback():b.jsonpCallback,h?b[h]=b[h].replace(ad,"$1"+e):b.jsonp!==!1&&(b.url+=(wc.test(b.url)?"&":"?")+b.jsonp+"="+e),b.converters["script json"]=function(){return g||m.error(e+" was not called"),g[0]},b.dataTypes[0]="json",f=a[e],a[e]=function(){g=arguments},d.always(function(){a[e]=f,b[e]&&(b.jsonpCallback=c.jsonpCallback,_c.push(e)),g&&m.isFunction(f)&&f(g[0]),g=f=void 0}),"script"):void 0}),m.parseHTML=function(a,b,c){if(!a||"string"!=typeof a)return null;"boolean"==typeof b&&(c=b,b=!1),b=b||y;var d=u.exec(a),e=!c&&[];return d?[b.createElement(d[1])]:(d=m.buildFragment([a],b,e),e&&e.length&&m(e).remove(),m.merge([],d.childNodes))};var bd=m.fn.load;m.fn.load=function(a,b,c){if("string"!=typeof a&&bd)return bd.apply(this,arguments);var d,e,f,g=this,h=a.indexOf(" ");return h>=0&&(d=m.trim(a.slice(h,a.length)),a=a.slice(0,h)),m.isFunction(b)?(c=b,b=void 0):b&&"object"==typeof b&&(f="POST"),g.length>0&&m.ajax({url:a,type:f,dataType:"html",data:b}).done(function(a){e=arguments,g.html(d?m("<div>").append(m.parseHTML(a)).find(d):a)}).complete(c&&function(a,b){g.each(c,e||[a.responseText,b,a])}),this},m.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(a,b){m.fn[b]=function(a){return this.on(b,a)}}),m.expr.filters.animated=function(a){return m.grep(m.timers,function(b){return a===b.elem}).length};var cd=a.document.documentElement;function dd(a){return m.isWindow(a)?a:9===a.nodeType?a.defaultView||a.parentWindow:!1}m.offset={setOffset:function(a,b,c){var d,e,f,g,h,i,j,k=m.css(a,"position"),l=m(a),n={};"static"===k&&(a.style.position="relative"),h=l.offset(),f=m.css(a,"top"),i=m.css(a,"left"),j=("absolute"===k||"fixed"===k)&&m.inArray("auto",[f,i])>-1,j?(d=l.position(),g=d.top,e=d.left):(g=parseFloat(f)||0,e=parseFloat(i)||0),m.isFunction(b)&&(b=b.call(a,c,h)),null!=b.top&&(n.top=b.top-h.top+g),null!=b.left&&(n.left=b.left-h.left+e),"using"in b?b.using.call(a,n):l.css(n)}},m.fn.extend({offset:function(a){if(arguments.length)return void 0===a?this:this.each(function(b){m.offset.setOffset(this,a,b)});var b,c,d={top:0,left:0},e=this[0],f=e&&e.ownerDocument;if(f)return b=f.documentElement,m.contains(b,e)?(typeof e.getBoundingClientRect!==K&&(d=e.getBoundingClientRect()),c=dd(f),{top:d.top+(c.pageYOffset||b.scrollTop)-(b.clientTop||0),left:d.left+(c.pageXOffset||b.scrollLeft)-(b.clientLeft||0)}):d},position:function(){if(this[0]){var a,b,c={top:0,left:0},d=this[0];return"fixed"===m.css(d,"position")?b=d.getBoundingClientRect():(a=this.offsetParent(),b=this.offset(),m.nodeName(a[0],"html")||(c=a.offset()),c.top+=m.css(a[0],"borderTopWidth",!0),c.left+=m.css(a[0],"borderLeftWidth",!0)),{top:b.top-c.top-m.css(d,"marginTop",!0),left:b.left-c.left-m.css(d,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){var a=this.offsetParent||cd;while(a&&!m.nodeName(a,"html")&&"static"===m.css(a,"position"))a=a.offsetParent;return a||cd})}}),m.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(a,b){var c=/Y/.test(b);m.fn[a]=function(d){return V(this,function(a,d,e){var f=dd(a);return void 0===e?f?b in f?f[b]:f.document.documentElement[d]:a[d]:void(f?f.scrollTo(c?m(f).scrollLeft():e,c?e:m(f).scrollTop()):a[d]=e)},a,d,arguments.length,null)}}),m.each(["top","left"],function(a,b){m.cssHooks[b]=Lb(k.pixelPosition,function(a,c){return c?(c=Jb(a,b),Hb.test(c)?m(a).position()[b]+"px":c):void 0})}),m.each({Height:"height",Width:"width"},function(a,b){m.each({padding:"inner"+a,content:b,"":"outer"+a},function(c,d){m.fn[d]=function(d,e){var f=arguments.length&&(c||"boolean"!=typeof d),g=c||(d===!0||e===!0?"margin":"border");return V(this,function(b,c,d){var e;return m.isWindow(b)?b.document.documentElement["client"+a]:9===b.nodeType?(e=b.documentElement,Math.max(b.body["scroll"+a],e["scroll"+a],b.body["offset"+a],e["offset"+a],e["client"+a])):void 0===d?m.css(b,c,g):m.style(b,c,d,g)},b,f?d:void 0,f,null)}})}),m.fn.size=function(){return this.length},m.fn.andSelf=m.fn.addBack,"function"==typeof define&&define.amd&&define("jquery",[],function(){return m});var ed=a.jQuery,fd=a.$;return m.noConflict=function(b){return a.$===m&&(a.$=fd),b&&a.jQuery===m&&(a.jQuery=ed),m},typeof b===K&&(a.jQuery=a.$=m),m});

/*!
    localForage -- Offline Storage, Improved
    Version 1.4.3
    https://mozilla.github.io/localForage
    (c) 2013-2016 Mozilla, Apache License 2.0
*/
!function(a){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=a();else if("function"==typeof define&&define.amd)define([],a);else{var b;b="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,b.localforage=a()}}(function(){return function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};b[g][0].call(k.exports,function(a){var c=b[g][1][a];return e(c?c:a)},k,k.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b,c){(function(a){"use strict";function c(){k=!0;for(var a,b,c=l.length;c;){for(b=l,l=[],a=-1;++a<c;)b[a]();c=l.length}k=!1}function d(a){1!==l.push(a)||k||e()}var e,f=a.MutationObserver||a.WebKitMutationObserver;if(f){var g=0,h=new f(c),i=a.document.createTextNode("");h.observe(i,{characterData:!0}),e=function(){i.data=g=++g%2}}else if(a.setImmediate||"undefined"==typeof a.MessageChannel)e="document"in a&&"onreadystatechange"in a.document.createElement("script")?function(){var b=a.document.createElement("script");b.onreadystatechange=function(){c(),b.onreadystatechange=null,b.parentNode.removeChild(b),b=null},a.document.documentElement.appendChild(b)}:function(){setTimeout(c,0)};else{var j=new a.MessageChannel;j.port1.onmessage=c,e=function(){j.port2.postMessage(0)}}var k,l=[];b.exports=d}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],2:[function(a,b,c){"use strict";function d(){}function e(a){if("function"!=typeof a)throw new TypeError("resolver must be a function");this.state=s,this.queue=[],this.outcome=void 0,a!==d&&i(this,a)}function f(a,b,c){this.promise=a,"function"==typeof b&&(this.onFulfilled=b,this.callFulfilled=this.otherCallFulfilled),"function"==typeof c&&(this.onRejected=c,this.callRejected=this.otherCallRejected)}function g(a,b,c){o(function(){var d;try{d=b(c)}catch(b){return p.reject(a,b)}d===a?p.reject(a,new TypeError("Cannot resolve promise with itself")):p.resolve(a,d)})}function h(a){var b=a&&a.then;if(a&&"object"==typeof a&&"function"==typeof b)return function(){b.apply(a,arguments)}}function i(a,b){function c(b){f||(f=!0,p.reject(a,b))}function d(b){f||(f=!0,p.resolve(a,b))}function e(){b(d,c)}var f=!1,g=j(e);"error"===g.status&&c(g.value)}function j(a,b){var c={};try{c.value=a(b),c.status="success"}catch(a){c.status="error",c.value=a}return c}function k(a){return a instanceof this?a:p.resolve(new this(d),a)}function l(a){var b=new this(d);return p.reject(b,a)}function m(a){function b(a,b){function d(a){g[b]=a,++h!==e||f||(f=!0,p.resolve(j,g))}c.resolve(a).then(d,function(a){f||(f=!0,p.reject(j,a))})}var c=this;if("[object Array]"!==Object.prototype.toString.call(a))return this.reject(new TypeError("must be an array"));var e=a.length,f=!1;if(!e)return this.resolve([]);for(var g=new Array(e),h=0,i=-1,j=new this(d);++i<e;)b(a[i],i);return j}function n(a){function b(a){c.resolve(a).then(function(a){f||(f=!0,p.resolve(h,a))},function(a){f||(f=!0,p.reject(h,a))})}var c=this;if("[object Array]"!==Object.prototype.toString.call(a))return this.reject(new TypeError("must be an array"));var e=a.length,f=!1;if(!e)return this.resolve([]);for(var g=-1,h=new this(d);++g<e;)b(a[g]);return h}var o=a(1),p={},q=["REJECTED"],r=["FULFILLED"],s=["PENDING"];b.exports=c=e,e.prototype.catch=function(a){return this.then(null,a)},e.prototype.then=function(a,b){if("function"!=typeof a&&this.state===r||"function"!=typeof b&&this.state===q)return this;var c=new this.constructor(d);if(this.state!==s){var e=this.state===r?a:b;g(c,e,this.outcome)}else this.queue.push(new f(c,a,b));return c},f.prototype.callFulfilled=function(a){p.resolve(this.promise,a)},f.prototype.otherCallFulfilled=function(a){g(this.promise,this.onFulfilled,a)},f.prototype.callRejected=function(a){p.reject(this.promise,a)},f.prototype.otherCallRejected=function(a){g(this.promise,this.onRejected,a)},p.resolve=function(a,b){var c=j(h,b);if("error"===c.status)return p.reject(a,c.value);var d=c.value;if(d)i(a,d);else{a.state=r,a.outcome=b;for(var e=-1,f=a.queue.length;++e<f;)a.queue[e].callFulfilled(b)}return a},p.reject=function(a,b){a.state=q,a.outcome=b;for(var c=-1,d=a.queue.length;++c<d;)a.queue[c].callRejected(b);return a},c.resolve=k,c.reject=l,c.all=m,c.race=n},{1:1}],3:[function(a,b,c){(function(b){"use strict";"function"!=typeof b.Promise&&(b.Promise=a(2))}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{2:2}],4:[function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function e(){try{if("undefined"!=typeof indexedDB)return indexedDB;if("undefined"!=typeof webkitIndexedDB)return webkitIndexedDB;if("undefined"!=typeof mozIndexedDB)return mozIndexedDB;if("undefined"!=typeof OIndexedDB)return OIndexedDB;if("undefined"!=typeof msIndexedDB)return msIndexedDB}catch(a){}}function f(){try{return!!fa&&(!("undefined"!=typeof openDatabase&&"undefined"!=typeof navigator&&navigator.userAgent&&/Safari/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent))&&(fa&&"function"==typeof fa.open&&"undefined"!=typeof IDBKeyRange))}catch(a){return!1}}function g(){return"function"==typeof openDatabase}function h(){try{return"undefined"!=typeof localStorage&&"setItem"in localStorage&&localStorage.setItem}catch(a){return!1}}function i(a,b){a=a||[],b=b||{};try{return new Blob(a,b)}catch(f){if("TypeError"!==f.name)throw f;for(var c="undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof MSBlobBuilder?MSBlobBuilder:"undefined"!=typeof MozBlobBuilder?MozBlobBuilder:WebKitBlobBuilder,d=new c,e=0;e<a.length;e+=1)d.append(a[e]);return d.getBlob(b.type)}}function j(a,b){b&&a.then(function(a){b(null,a)},function(a){b(a)})}function k(a,b,c){"function"==typeof b&&a.then(b),"function"==typeof c&&a.catch(c)}function l(a){for(var b=a.length,c=new ArrayBuffer(b),d=new Uint8Array(c),e=0;e<b;e++)d[e]=a.charCodeAt(e);return c}function m(a){return new ia(function(b){var c=i([""]);a.objectStore(ja).put(c,"key"),a.onabort=function(a){a.preventDefault(),a.stopPropagation(),b(!1)},a.oncomplete=function(){var a=navigator.userAgent.match(/Chrome\/(\d+)/),c=navigator.userAgent.match(/Edge\//);b(c||!a||parseInt(a[1],10)>=43)}}).catch(function(){return!1})}function n(a){return"boolean"==typeof ga?ia.resolve(ga):m(a).then(function(a){return ga=a})}function o(a){var b=ha[a.name],c={};c.promise=new ia(function(a){c.resolve=a}),b.deferredOperations.push(c),b.dbReady?b.dbReady=b.dbReady.then(function(){return c.promise}):b.dbReady=c.promise}function p(a){var b=ha[a.name],c=b.deferredOperations.pop();c&&c.resolve()}function q(a,b){return new ia(function(c,d){if(a.db){if(!b)return c(a.db);o(a),a.db.close()}var e=[a.name];b&&e.push(a.version);var f=fa.open.apply(fa,e);b&&(f.onupgradeneeded=function(b){var c=f.result;try{c.createObjectStore(a.storeName),b.oldVersion<=1&&c.createObjectStore(ja)}catch(c){if("ConstraintError"!==c.name)throw c;console.warn('The database "'+a.name+'" has been upgraded from version '+b.oldVersion+" to version "+b.newVersion+', but the storage "'+a.storeName+'" already exists.')}}),f.onerror=function(){d(f.error)},f.onsuccess=function(){c(f.result),p(a)}})}function r(a){return q(a,!1)}function s(a){return q(a,!0)}function t(a,b){if(!a.db)return!0;var c=!a.db.objectStoreNames.contains(a.storeName),d=a.version<a.db.version,e=a.version>a.db.version;if(d&&(a.version!==b&&console.warn('The database "'+a.name+"\" can't be downgraded from version "+a.db.version+" to version "+a.version+"."),a.version=a.db.version),e||c){if(c){var f=a.db.version+1;f>a.version&&(a.version=f)}return!0}return!1}function u(a){return new ia(function(b,c){var d=new FileReader;d.onerror=c,d.onloadend=function(c){var d=btoa(c.target.result||"");b({__local_forage_encoded_blob:!0,data:d,type:a.type})},d.readAsBinaryString(a)})}function v(a){var b=l(atob(a.data));return i([b],{type:a.type})}function w(a){return a&&a.__local_forage_encoded_blob}function x(a){var b=this,c=b._initReady().then(function(){var a=ha[b._dbInfo.name];if(a&&a.dbReady)return a.dbReady});return k(c,a,a),c}function y(a){function b(){return ia.resolve()}var c=this,d={db:null};if(a)for(var e in a)d[e]=a[e];ha||(ha={});var f=ha[d.name];f||(f={forages:[],db:null,dbReady:null,deferredOperations:[]},ha[d.name]=f),f.forages.push(c),c._initReady||(c._initReady=c.ready,c.ready=x);for(var g=[],h=0;h<f.forages.length;h++){var i=f.forages[h];i!==c&&g.push(i._initReady().catch(b))}var j=f.forages.slice(0);return ia.all(g).then(function(){return d.db=f.db,r(d)}).then(function(a){return d.db=a,t(d,c._defaultConfig.version)?s(d):a}).then(function(a){d.db=f.db=a,c._dbInfo=d;for(var b=0;b<j.length;b++){var e=j[b];e!==c&&(e._dbInfo.db=d.db,e._dbInfo.version=d.version)}})}function z(a,b){var c=this;"string"!=typeof a&&(console.warn(a+" used as a key, but it is not a string."),a=String(a));var d=new ia(function(b,d){c.ready().then(function(){var e=c._dbInfo,f=e.db.transaction(e.storeName,"readonly").objectStore(e.storeName),g=f.get(a);g.onsuccess=function(){var a=g.result;void 0===a&&(a=null),w(a)&&(a=v(a)),b(a)},g.onerror=function(){d(g.error)}}).catch(d)});return j(d,b),d}function A(a,b){var c=this,d=new ia(function(b,d){c.ready().then(function(){var e=c._dbInfo,f=e.db.transaction(e.storeName,"readonly").objectStore(e.storeName),g=f.openCursor(),h=1;g.onsuccess=function(){var c=g.result;if(c){var d=c.value;w(d)&&(d=v(d));var e=a(d,c.key,h++);void 0!==e?b(e):c.continue()}else b()},g.onerror=function(){d(g.error)}}).catch(d)});return j(d,b),d}function B(a,b,c){var d=this;"string"!=typeof a&&(console.warn(a+" used as a key, but it is not a string."),a=String(a));var e=new ia(function(c,e){var f;d.ready().then(function(){return f=d._dbInfo,"[object Blob]"===ka.call(b)?n(f.db).then(function(a){return a?b:u(b)}):b}).then(function(b){var d=f.db.transaction(f.storeName,"readwrite"),g=d.objectStore(f.storeName),h=g.put(b,a);null===b&&(b=void 0),d.oncomplete=function(){void 0===b&&(b=null),c(b)},d.onabort=d.onerror=function(){var a=h.error?h.error:h.transaction.error;e(a)}}).catch(e)});return j(e,c),e}function C(a,b){var c=this;"string"!=typeof a&&(console.warn(a+" used as a key, but it is not a string."),a=String(a));var d=new ia(function(b,d){c.ready().then(function(){var e=c._dbInfo,f=e.db.transaction(e.storeName,"readwrite"),g=f.objectStore(e.storeName),h=g.delete(a);f.oncomplete=function(){b()},f.onerror=function(){d(h.error)},f.onabort=function(){var a=h.error?h.error:h.transaction.error;d(a)}}).catch(d)});return j(d,b),d}function D(a){var b=this,c=new ia(function(a,c){b.ready().then(function(){var d=b._dbInfo,e=d.db.transaction(d.storeName,"readwrite"),f=e.objectStore(d.storeName),g=f.clear();e.oncomplete=function(){a()},e.onabort=e.onerror=function(){var a=g.error?g.error:g.transaction.error;c(a)}}).catch(c)});return j(c,a),c}function E(a){var b=this,c=new ia(function(a,c){b.ready().then(function(){var d=b._dbInfo,e=d.db.transaction(d.storeName,"readonly").objectStore(d.storeName),f=e.count();f.onsuccess=function(){a(f.result)},f.onerror=function(){c(f.error)}}).catch(c)});return j(c,a),c}function F(a,b){var c=this,d=new ia(function(b,d){return a<0?void b(null):void c.ready().then(function(){var e=c._dbInfo,f=e.db.transaction(e.storeName,"readonly").objectStore(e.storeName),g=!1,h=f.openCursor();h.onsuccess=function(){var c=h.result;return c?void(0===a?b(c.key):g?b(c.key):(g=!0,c.advance(a))):void b(null)},h.onerror=function(){d(h.error)}}).catch(d)});return j(d,b),d}function G(a){var b=this,c=new ia(function(a,c){b.ready().then(function(){var d=b._dbInfo,e=d.db.transaction(d.storeName,"readonly").objectStore(d.storeName),f=e.openCursor(),g=[];f.onsuccess=function(){var b=f.result;return b?(g.push(b.key),void b.continue()):void a(g)},f.onerror=function(){c(f.error)}}).catch(c)});return j(c,a),c}function H(a){var b,c,d,e,f,g=.75*a.length,h=a.length,i=0;"="===a[a.length-1]&&(g--,"="===a[a.length-2]&&g--);var j=new ArrayBuffer(g),k=new Uint8Array(j);for(b=0;b<h;b+=4)c=ma.indexOf(a[b]),d=ma.indexOf(a[b+1]),e=ma.indexOf(a[b+2]),f=ma.indexOf(a[b+3]),k[i++]=c<<2|d>>4,k[i++]=(15&d)<<4|e>>2,k[i++]=(3&e)<<6|63&f;return j}function I(a){var b,c=new Uint8Array(a),d="";for(b=0;b<c.length;b+=3)d+=ma[c[b]>>2],d+=ma[(3&c[b])<<4|c[b+1]>>4],d+=ma[(15&c[b+1])<<2|c[b+2]>>6],d+=ma[63&c[b+2]];return c.length%3===2?d=d.substring(0,d.length-1)+"=":c.length%3===1&&(d=d.substring(0,d.length-2)+"=="),d}function J(a,b){var c="";if(a&&(c=Da.call(a)),a&&("[object ArrayBuffer]"===c||a.buffer&&"[object ArrayBuffer]"===Da.call(a.buffer))){var d,e=pa;a instanceof ArrayBuffer?(d=a,e+=ra):(d=a.buffer,"[object Int8Array]"===c?e+=ta:"[object Uint8Array]"===c?e+=ua:"[object Uint8ClampedArray]"===c?e+=va:"[object Int16Array]"===c?e+=wa:"[object Uint16Array]"===c?e+=ya:"[object Int32Array]"===c?e+=xa:"[object Uint32Array]"===c?e+=za:"[object Float32Array]"===c?e+=Aa:"[object Float64Array]"===c?e+=Ba:b(new Error("Failed to get type for BinaryArray"))),b(e+I(d))}else if("[object Blob]"===c){var f=new FileReader;f.onload=function(){var c=na+a.type+"~"+I(this.result);b(pa+sa+c)},f.readAsArrayBuffer(a)}else try{b(JSON.stringify(a))}catch(c){console.error("Couldn't convert value into a JSON string: ",a),b(null,c)}}function K(a){if(a.substring(0,qa)!==pa)return JSON.parse(a);var b,c=a.substring(Ca),d=a.substring(qa,Ca);if(d===sa&&oa.test(c)){var e=c.match(oa);b=e[1],c=c.substring(e[0].length)}var f=H(c);switch(d){case ra:return f;case sa:return i([f],{type:b});case ta:return new Int8Array(f);case ua:return new Uint8Array(f);case va:return new Uint8ClampedArray(f);case wa:return new Int16Array(f);case ya:return new Uint16Array(f);case xa:return new Int32Array(f);case za:return new Uint32Array(f);case Aa:return new Float32Array(f);case Ba:return new Float64Array(f);default:throw new Error("Unkown type: "+d)}}function L(a){var b=this,c={db:null};if(a)for(var d in a)c[d]="string"!=typeof a[d]?a[d].toString():a[d];var e=new ia(function(a,d){try{c.db=openDatabase(c.name,String(c.version),c.description,c.size)}catch(a){return d(a)}c.db.transaction(function(e){e.executeSql("CREATE TABLE IF NOT EXISTS "+c.storeName+" (id INTEGER PRIMARY KEY, key unique, value)",[],function(){b._dbInfo=c,a()},function(a,b){d(b)})})});return c.serializer=Ea,e}function M(a,b){var c=this;"string"!=typeof a&&(console.warn(a+" used as a key, but it is not a string."),a=String(a));var d=new ia(function(b,d){c.ready().then(function(){var e=c._dbInfo;e.db.transaction(function(c){c.executeSql("SELECT * FROM "+e.storeName+" WHERE key = ? LIMIT 1",[a],function(a,c){var d=c.rows.length?c.rows.item(0).value:null;d&&(d=e.serializer.deserialize(d)),b(d)},function(a,b){d(b)})})}).catch(d)});return j(d,b),d}function N(a,b){var c=this,d=new ia(function(b,d){c.ready().then(function(){var e=c._dbInfo;e.db.transaction(function(c){c.executeSql("SELECT * FROM "+e.storeName,[],function(c,d){for(var f=d.rows,g=f.length,h=0;h<g;h++){var i=f.item(h),j=i.value;if(j&&(j=e.serializer.deserialize(j)),j=a(j,i.key,h+1),void 0!==j)return void b(j)}b()},function(a,b){d(b)})})}).catch(d)});return j(d,b),d}function O(a,b,c){var d=this;"string"!=typeof a&&(console.warn(a+" used as a key, but it is not a string."),a=String(a));var e=new ia(function(c,e){d.ready().then(function(){void 0===b&&(b=null);var f=b,g=d._dbInfo;g.serializer.serialize(b,function(b,d){d?e(d):g.db.transaction(function(d){d.executeSql("INSERT OR REPLACE INTO "+g.storeName+" (key, value) VALUES (?, ?)",[a,b],function(){c(f)},function(a,b){e(b)})},function(a){a.code===a.QUOTA_ERR&&e(a)})})}).catch(e)});return j(e,c),e}function P(a,b){var c=this;"string"!=typeof a&&(console.warn(a+" used as a key, but it is not a string."),a=String(a));var d=new ia(function(b,d){c.ready().then(function(){var e=c._dbInfo;e.db.transaction(function(c){c.executeSql("DELETE FROM "+e.storeName+" WHERE key = ?",[a],function(){b()},function(a,b){d(b)})})}).catch(d)});return j(d,b),d}function Q(a){var b=this,c=new ia(function(a,c){b.ready().then(function(){var d=b._dbInfo;d.db.transaction(function(b){b.executeSql("DELETE FROM "+d.storeName,[],function(){a()},function(a,b){c(b)})})}).catch(c)});return j(c,a),c}function R(a){var b=this,c=new ia(function(a,c){b.ready().then(function(){var d=b._dbInfo;d.db.transaction(function(b){b.executeSql("SELECT COUNT(key) as c FROM "+d.storeName,[],function(b,c){var d=c.rows.item(0).c;a(d)},function(a,b){c(b)})})}).catch(c)});return j(c,a),c}function S(a,b){var c=this,d=new ia(function(b,d){c.ready().then(function(){var e=c._dbInfo;e.db.transaction(function(c){c.executeSql("SELECT key FROM "+e.storeName+" WHERE id = ? LIMIT 1",[a+1],function(a,c){var d=c.rows.length?c.rows.item(0).key:null;b(d)},function(a,b){d(b)})})}).catch(d)});return j(d,b),d}function T(a){var b=this,c=new ia(function(a,c){b.ready().then(function(){var d=b._dbInfo;d.db.transaction(function(b){b.executeSql("SELECT key FROM "+d.storeName,[],function(b,c){for(var d=[],e=0;e<c.rows.length;e++)d.push(c.rows.item(e).key);a(d)},function(a,b){c(b)})})}).catch(c)});return j(c,a),c}function U(a){var b=this,c={};if(a)for(var d in a)c[d]=a[d];return c.keyPrefix=c.name+"/",c.storeName!==b._defaultConfig.storeName&&(c.keyPrefix+=c.storeName+"/"),b._dbInfo=c,c.serializer=Ea,ia.resolve()}function V(a){var b=this,c=b.ready().then(function(){for(var a=b._dbInfo.keyPrefix,c=localStorage.length-1;c>=0;c--){var d=localStorage.key(c);0===d.indexOf(a)&&localStorage.removeItem(d)}});return j(c,a),c}function W(a,b){var c=this;"string"!=typeof a&&(console.warn(a+" used as a key, but it is not a string."),a=String(a));var d=c.ready().then(function(){var b=c._dbInfo,d=localStorage.getItem(b.keyPrefix+a);return d&&(d=b.serializer.deserialize(d)),d});return j(d,b),d}function X(a,b){var c=this,d=c.ready().then(function(){for(var b=c._dbInfo,d=b.keyPrefix,e=d.length,f=localStorage.length,g=1,h=0;h<f;h++){var i=localStorage.key(h);if(0===i.indexOf(d)){var j=localStorage.getItem(i);if(j&&(j=b.serializer.deserialize(j)),j=a(j,i.substring(e),g++),void 0!==j)return j}}});return j(d,b),d}function Y(a,b){var c=this,d=c.ready().then(function(){var b,d=c._dbInfo;try{b=localStorage.key(a)}catch(a){b=null}return b&&(b=b.substring(d.keyPrefix.length)),b});return j(d,b),d}function Z(a){var b=this,c=b.ready().then(function(){for(var a=b._dbInfo,c=localStorage.length,d=[],e=0;e<c;e++)0===localStorage.key(e).indexOf(a.keyPrefix)&&d.push(localStorage.key(e).substring(a.keyPrefix.length));return d});return j(c,a),c}function $(a){var b=this,c=b.keys().then(function(a){return a.length});return j(c,a),c}function _(a,b){var c=this;"string"!=typeof a&&(console.warn(a+" used as a key, but it is not a string."),a=String(a));var d=c.ready().then(function(){var b=c._dbInfo;localStorage.removeItem(b.keyPrefix+a)});return j(d,b),d}function aa(a,b,c){var d=this;"string"!=typeof a&&(console.warn(a+" used as a key, but it is not a string."),a=String(a));var e=d.ready().then(function(){void 0===b&&(b=null);var c=b;return new ia(function(e,f){var g=d._dbInfo;g.serializer.serialize(b,function(b,d){if(d)f(d);else try{localStorage.setItem(g.keyPrefix+a,b),e(c)}catch(a){"QuotaExceededError"!==a.name&&"NS_ERROR_DOM_QUOTA_REACHED"!==a.name||f(a),f(a)}})})});return j(e,c),e}function ba(a,b){a[b]=function(){var c=arguments;return a.ready().then(function(){return a[b].apply(a,c)})}}function ca(){for(var a=1;a<arguments.length;a++){var b=arguments[a];if(b)for(var c in b)b.hasOwnProperty(c)&&(Na(b[c])?arguments[0][c]=b[c].slice():arguments[0][c]=b[c])}return arguments[0]}function da(a){for(var b in Ia)if(Ia.hasOwnProperty(b)&&Ia[b]===a)return!0;return!1}var ea="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},fa=e();"undefined"==typeof Promise&&"undefined"!=typeof a&&a(3);var ga,ha,ia=Promise,ja="local-forage-detect-blob-support",ka=Object.prototype.toString,la={_driver:"asyncStorage",_initStorage:y,iterate:A,getItem:z,setItem:B,removeItem:C,clear:D,length:E,key:F,keys:G},ma="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",na="~~local_forage_type~",oa=/^~~local_forage_type~([^~]+)~/,pa="__lfsc__:",qa=pa.length,ra="arbf",sa="blob",ta="si08",ua="ui08",va="uic8",wa="si16",xa="si32",ya="ur16",za="ui32",Aa="fl32",Ba="fl64",Ca=qa+ra.length,Da=Object.prototype.toString,Ea={serialize:J,deserialize:K,stringToBuffer:H,bufferToString:I},Fa={_driver:"webSQLStorage",_initStorage:L,iterate:N,getItem:M,setItem:O,removeItem:P,clear:Q,length:R,key:S,keys:T},Ga={_driver:"localStorageWrapper",_initStorage:U,iterate:X,getItem:W,setItem:aa,removeItem:_,clear:V,length:$,key:Y,keys:Z},Ha={},Ia={INDEXEDDB:"asyncStorage",LOCALSTORAGE:"localStorageWrapper",WEBSQL:"webSQLStorage"},Ja=[Ia.INDEXEDDB,Ia.WEBSQL,Ia.LOCALSTORAGE],Ka=["clear","getItem","iterate","key","keys","length","removeItem","setItem"],La={description:"",driver:Ja.slice(),name:"localforage",size:4980736,storeName:"keyvaluepairs",version:1},Ma={};Ma[Ia.INDEXEDDB]=f(),Ma[Ia.WEBSQL]=g(),Ma[Ia.LOCALSTORAGE]=h();var Na=Array.isArray||function(a){return"[object Array]"===Object.prototype.toString.call(a)},Oa=function(){function a(b){d(this,a),this.INDEXEDDB=Ia.INDEXEDDB,this.LOCALSTORAGE=Ia.LOCALSTORAGE,this.WEBSQL=Ia.WEBSQL,this._defaultConfig=ca({},La),this._config=ca({},this._defaultConfig,b),this._driverSet=null,this._initDriver=null,this._ready=!1,this._dbInfo=null,this._wrapLibraryMethodsWithReady(),this.setDriver(this._config.driver).catch(function(){})}return a.prototype.config=function(a){if("object"===("undefined"==typeof a?"undefined":ea(a))){if(this._ready)return new Error("Can't call config() after localforage has been used.");for(var b in a){if("storeName"===b&&(a[b]=a[b].replace(/\W/g,"_")),"version"===b&&"number"!=typeof a[b])return new Error("Database version must be a number.");this._config[b]=a[b]}return!("driver"in a&&a.driver)||this.setDriver(this._config.driver)}return"string"==typeof a?this._config[a]:this._config},a.prototype.defineDriver=function(a,b,c){var d=new ia(function(b,c){try{var d=a._driver,e=new Error("Custom driver not compliant; see https://mozilla.github.io/localForage/#definedriver"),f=new Error("Custom driver name already in use: "+a._driver);if(!a._driver)return void c(e);if(da(a._driver))return void c(f);for(var g=Ka.concat("_initStorage"),h=0;h<g.length;h++){var i=g[h];if(!i||!a[i]||"function"!=typeof a[i])return void c(e)}var j=ia.resolve(!0);"_support"in a&&(j=a._support&&"function"==typeof a._support?a._support():ia.resolve(!!a._support)),j.then(function(c){Ma[d]=c,Ha[d]=a,b()},c)}catch(a){c(a)}});return k(d,b,c),d},a.prototype.driver=function(){return this._driver||null},a.prototype.getDriver=function(a,b,c){var d=this,e=ia.resolve().then(function(){if(!da(a)){if(Ha[a])return Ha[a];throw new Error("Driver not found.")}switch(a){case d.INDEXEDDB:return la;case d.LOCALSTORAGE:return Ga;case d.WEBSQL:return Fa}});return k(e,b,c),e},a.prototype.getSerializer=function(a){var b=ia.resolve(Ea);return k(b,a),b},a.prototype.ready=function(a){var b=this,c=b._driverSet.then(function(){return null===b._ready&&(b._ready=b._initDriver()),b._ready});return k(c,a,a),c},a.prototype.setDriver=function(a,b,c){function d(){g._config.driver=g.driver()}function e(a){return g._extend(a),d(),g._ready=g._initStorage(g._config),g._ready}function f(a){return function(){function b(){for(;c<a.length;){var f=a[c];return c++,g._dbInfo=null,g._ready=null,g.getDriver(f).then(e).catch(b)}d();var h=new Error("No available storage method found.");return g._driverSet=ia.reject(h),g._driverSet}var c=0;return b()}}var g=this;Na(a)||(a=[a]);var h=this._getSupportedDrivers(a),i=null!==this._driverSet?this._driverSet.catch(function(){return ia.resolve()}):ia.resolve();return this._driverSet=i.then(function(){var a=h[0];return g._dbInfo=null,g._ready=null,g.getDriver(a).then(function(a){g._driver=a._driver,d(),g._wrapLibraryMethodsWithReady(),g._initDriver=f(h)})}).catch(function(){d();var a=new Error("No available storage method found.");return g._driverSet=ia.reject(a),g._driverSet}),k(this._driverSet,b,c),this._driverSet},a.prototype.supports=function(a){return!!Ma[a]},a.prototype._extend=function(a){ca(this,a)},a.prototype._getSupportedDrivers=function(a){for(var b=[],c=0,d=a.length;c<d;c++){var e=a[c];this.supports(e)&&b.push(e)}return b},a.prototype._wrapLibraryMethodsWithReady=function(){for(var a=0;a<Ka.length;a++)ba(this,Ka[a])},a.prototype.createInstance=function(b){return new a(b)},a}(),Pa=new Oa;b.exports=Pa},{3:3}]},{},[4])(4)});
/*
 A JavaScript implementation of the SHA family of hashes, as
 defined in FIPS PUB 180-4 and FIPS PUB 202, as well as the corresponding
 HMAC implementation as defined in FIPS PUB 198a

 Copyright Brian Turek 2008-2016
 Distributed under the BSD License
 See http://caligatio.github.com/jsSHA/ for more information

 Several functions taken from Paul Johnston
*/
'use strict';(function(X){function C(f,b,c){var d=0,a=[],k=0,g,e,n,h,m,r,t,q,v=!1,u=[],w=[],x,y=!1,z=!1;c=c||{};g=c.encoding||"UTF8";x=c.numRounds||1;n=J(b,g);if(x!==parseInt(x,10)||1>x)throw Error("numRounds must a integer >= 1");if("SHA-1"===f)m=512,r=K,t=Y,h=160,q=function(b){return b.slice()};else if(0===f.lastIndexOf("SHA-",0))if(r=function(b,d){return L(b,d,f)},t=function(b,d,c,a){var l,k;if("SHA-224"===f||"SHA-256"===f)l=(d+65>>>9<<4)+15,k=16;else if("SHA-384"===f||"SHA-512"===f)l=(d+129>>>
10<<5)+31,k=32;else throw Error("Unexpected error in SHA-2 implementation");for(;b.length<=l;)b.push(0);b[d>>>5]|=128<<24-d%32;d=d+c;b[l]=d&4294967295;b[l-1]=d/4294967296|0;c=b.length;for(d=0;d<c;d+=k)a=L(b.slice(d,d+k),a,f);if("SHA-224"===f)b=[a[0],a[1],a[2],a[3],a[4],a[5],a[6]];else if("SHA-256"===f)b=a;else if("SHA-384"===f)b=[a[0].a,a[0].b,a[1].a,a[1].b,a[2].a,a[2].b,a[3].a,a[3].b,a[4].a,a[4].b,a[5].a,a[5].b];else if("SHA-512"===f)b=[a[0].a,a[0].b,a[1].a,a[1].b,a[2].a,a[2].b,a[3].a,a[3].b,a[4].a,
a[4].b,a[5].a,a[5].b,a[6].a,a[6].b,a[7].a,a[7].b];else throw Error("Unexpected error in SHA-2 implementation");return b},q=function(b){return b.slice()},"SHA-224"===f)m=512,h=224;else if("SHA-256"===f)m=512,h=256;else if("SHA-384"===f)m=1024,h=384;else if("SHA-512"===f)m=1024,h=512;else throw Error("Chosen SHA variant is not supported");else if(0===f.lastIndexOf("SHA3-",0)||0===f.lastIndexOf("SHAKE",0)){var F=6;r=D;q=function(b){var f=[],a;for(a=0;5>a;a+=1)f[a]=b[a].slice();return f};if("SHA3-224"===
f)m=1152,h=224;else if("SHA3-256"===f)m=1088,h=256;else if("SHA3-384"===f)m=832,h=384;else if("SHA3-512"===f)m=576,h=512;else if("SHAKE128"===f)m=1344,h=-1,F=31,z=!0;else if("SHAKE256"===f)m=1088,h=-1,F=31,z=!0;else throw Error("Chosen SHA variant is not supported");t=function(b,f,a,d,c){a=m;var l=F,k,g=[],e=a>>>5,h=0,p=f>>>5;for(k=0;k<p&&f>=a;k+=e)d=D(b.slice(k,k+e),d),f-=a;b=b.slice(k);for(f%=a;b.length<e;)b.push(0);k=f>>>3;b[k>>2]^=l<<24-k%4*8;b[e-1]^=128;for(d=D(b,d);32*g.length<c;){b=d[h%5][h/
5|0];g.push((b.b&255)<<24|(b.b&65280)<<8|(b.b&16711680)>>8|b.b>>>24);if(32*g.length>=c)break;g.push((b.a&255)<<24|(b.a&65280)<<8|(b.a&16711680)>>8|b.a>>>24);h+=1;0===64*h%a&&D(null,d)}return g}}else throw Error("Chosen SHA variant is not supported");e=B(f);this.setHMACKey=function(b,a,c){var l;if(!0===v)throw Error("HMAC key already set");if(!0===y)throw Error("Cannot set HMAC key after calling update");if(!0===z)throw Error("SHAKE is not supported for HMAC");g=(c||{}).encoding||"UTF8";a=J(a,g)(b);
b=a.binLen;a=a.value;l=m>>>3;c=l/4-1;if(l<b/8){for(a=t(a,b,0,B(f),h);a.length<=c;)a.push(0);a[c]&=4294967040}else if(l>b/8){for(;a.length<=c;)a.push(0);a[c]&=4294967040}for(b=0;b<=c;b+=1)u[b]=a[b]^909522486,w[b]=a[b]^1549556828;e=r(u,e);d=m;v=!0};this.update=function(b){var f,c,g,h=0,q=m>>>5;f=n(b,a,k);b=f.binLen;c=f.value;f=b>>>5;for(g=0;g<f;g+=q)h+m<=b&&(e=r(c.slice(g,g+q),e),h+=m);d+=h;a=c.slice(h>>>5);k=b%m;y=!0};this.getHash=function(b,c){var g,m,n,r;if(!0===v)throw Error("Cannot call getHash after setting HMAC key");
n=M(c);if(!0===z){if(-1===n.shakeLen)throw Error("shakeLen must be specified in options");h=n.shakeLen}switch(b){case "HEX":g=function(b){return N(b,h,n)};break;case "B64":g=function(b){return O(b,h,n)};break;case "BYTES":g=function(b){return P(b,h)};break;case "ARRAYBUFFER":try{m=new ArrayBuffer(0)}catch(sa){throw Error("ARRAYBUFFER not supported by this environment");}g=function(b){return Q(b,h)};break;default:throw Error("format must be HEX, B64, BYTES, or ARRAYBUFFER");}r=t(a.slice(),k,d,q(e),
h);for(m=1;m<x;m+=1)!0===z&&0!==h%32&&(r[r.length-1]&=4294967040<<24-h%32),r=t(r,h,0,B(f),h);return g(r)};this.getHMAC=function(b,c){var g,n,u,x;if(!1===v)throw Error("Cannot call getHMAC without first setting HMAC key");u=M(c);switch(b){case "HEX":g=function(b){return N(b,h,u)};break;case "B64":g=function(b){return O(b,h,u)};break;case "BYTES":g=function(b){return P(b,h)};break;case "ARRAYBUFFER":try{g=new ArrayBuffer(0)}catch(z){throw Error("ARRAYBUFFER not supported by this environment");}g=function(b){return Q(b,
h)};break;default:throw Error("outputFormat must be HEX, B64, BYTES, or ARRAYBUFFER");}n=t(a.slice(),k,d,q(e),h);x=r(w,B(f));x=t(n,h,m,x,h);return g(x)}}function a(f,b){this.a=f;this.b=b}function Z(f,b,a){var d=f.length,l,k,g,e,n;b=b||[0];a=a||0;n=a>>>3;if(0!==d%2)throw Error("String of HEX type must be in byte increments");for(l=0;l<d;l+=2){k=parseInt(f.substr(l,2),16);if(isNaN(k))throw Error("String of HEX type contains invalid characters");e=(l>>>1)+n;for(g=e>>>2;b.length<=g;)b.push(0);b[g]|=k<<
8*(3-e%4)}return{value:b,binLen:4*d+a}}function aa(f,b,a){var d=[],l,k,g,e,d=b||[0];a=a||0;k=a>>>3;for(l=0;l<f.length;l+=1)b=f.charCodeAt(l),e=l+k,g=e>>>2,d.length<=g&&d.push(0),d[g]|=b<<8*(3-e%4);return{value:d,binLen:8*f.length+a}}function ba(f,b,a){var d=[],l=0,k,g,e,n,h,m,d=b||[0];a=a||0;b=a>>>3;if(-1===f.search(/^[a-zA-Z0-9=+\/]+$/))throw Error("Invalid character in base-64 string");g=f.indexOf("=");f=f.replace(/\=/g,"");if(-1!==g&&g<f.length)throw Error("Invalid '=' found in base-64 string");
for(g=0;g<f.length;g+=4){h=f.substr(g,4);for(e=n=0;e<h.length;e+=1)k="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".indexOf(h[e]),n|=k<<18-6*e;for(e=0;e<h.length-1;e+=1){m=l+b;for(k=m>>>2;d.length<=k;)d.push(0);d[k]|=(n>>>16-8*e&255)<<8*(3-m%4);l+=1}}return{value:d,binLen:8*l+a}}function ca(a,b,c){var d=[],l,k,g,d=b||[0];c=c||0;l=c>>>3;for(b=0;b<a.byteLength;b+=1)g=b+l,k=g>>>2,d.length<=k&&d.push(0),d[k]|=a[b]<<8*(3-g%4);return{value:d,binLen:8*a.byteLength+c}}function N(a,b,c){var d=
"";b/=8;var l,k;for(l=0;l<b;l+=1)k=a[l>>>2]>>>8*(3-l%4),d+="0123456789abcdef".charAt(k>>>4&15)+"0123456789abcdef".charAt(k&15);return c.outputUpper?d.toUpperCase():d}function O(a,b,c){var d="",l=b/8,k,g,e;for(k=0;k<l;k+=3)for(g=k+1<l?a[k+1>>>2]:0,e=k+2<l?a[k+2>>>2]:0,e=(a[k>>>2]>>>8*(3-k%4)&255)<<16|(g>>>8*(3-(k+1)%4)&255)<<8|e>>>8*(3-(k+2)%4)&255,g=0;4>g;g+=1)8*k+6*g<=b?d+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(e>>>6*(3-g)&63):d+=c.b64Pad;return d}function P(a,
b){var c="",d=b/8,l,k;for(l=0;l<d;l+=1)k=a[l>>>2]>>>8*(3-l%4)&255,c+=String.fromCharCode(k);return c}function Q(a,b){var c=b/8,d,l=new ArrayBuffer(c);for(d=0;d<c;d+=1)l[d]=a[d>>>2]>>>8*(3-d%4)&255;return l}function M(a){var b={outputUpper:!1,b64Pad:"=",shakeLen:-1};a=a||{};b.outputUpper=a.outputUpper||!1;!0===a.hasOwnProperty("b64Pad")&&(b.b64Pad=a.b64Pad);if(!0===a.hasOwnProperty("shakeLen")){if(0!==a.shakeLen%8)throw Error("shakeLen must be a multiple of 8");b.shakeLen=a.shakeLen}if("boolean"!==
typeof b.outputUpper)throw Error("Invalid outputUpper formatting option");if("string"!==typeof b.b64Pad)throw Error("Invalid b64Pad formatting option");return b}function J(a,b){var c;switch(b){case "UTF8":case "UTF16BE":case "UTF16LE":break;default:throw Error("encoding must be UTF8, UTF16BE, or UTF16LE");}switch(a){case "HEX":c=Z;break;case "TEXT":c=function(a,f,c){var e=[],p=[],n=0,h,m,r,t,q,e=f||[0];f=c||0;r=f>>>3;if("UTF8"===b)for(h=0;h<a.length;h+=1)for(c=a.charCodeAt(h),p=[],128>c?p.push(c):
2048>c?(p.push(192|c>>>6),p.push(128|c&63)):55296>c||57344<=c?p.push(224|c>>>12,128|c>>>6&63,128|c&63):(h+=1,c=65536+((c&1023)<<10|a.charCodeAt(h)&1023),p.push(240|c>>>18,128|c>>>12&63,128|c>>>6&63,128|c&63)),m=0;m<p.length;m+=1){q=n+r;for(t=q>>>2;e.length<=t;)e.push(0);e[t]|=p[m]<<8*(3-q%4);n+=1}else if("UTF16BE"===b||"UTF16LE"===b)for(h=0;h<a.length;h+=1){c=a.charCodeAt(h);"UTF16LE"===b&&(m=c&255,c=m<<8|c>>>8);q=n+r;for(t=q>>>2;e.length<=t;)e.push(0);e[t]|=c<<8*(2-q%4);n+=2}return{value:e,binLen:8*
n+f}};break;case "B64":c=ba;break;case "BYTES":c=aa;break;case "ARRAYBUFFER":try{c=new ArrayBuffer(0)}catch(d){throw Error("ARRAYBUFFER not supported by this environment");}c=ca;break;default:throw Error("format must be HEX, TEXT, B64, BYTES, or ARRAYBUFFER");}return c}function y(a,b){return a<<b|a>>>32-b}function R(f,b){return 32<b?(b=b-32,new a(f.b<<b|f.a>>>32-b,f.a<<b|f.b>>>32-b)):0!==b?new a(f.a<<b|f.b>>>32-b,f.b<<b|f.a>>>32-b):f}function v(a,b){return a>>>b|a<<32-b}function w(f,b){var c=null,
c=new a(f.a,f.b);return c=32>=b?new a(c.a>>>b|c.b<<32-b&4294967295,c.b>>>b|c.a<<32-b&4294967295):new a(c.b>>>b-32|c.a<<64-b&4294967295,c.a>>>b-32|c.b<<64-b&4294967295)}function S(f,b){var c=null;return c=32>=b?new a(f.a>>>b,f.b>>>b|f.a<<32-b&4294967295):new a(0,f.a>>>b-32)}function da(a,b,c){return a&b^~a&c}function ea(f,b,c){return new a(f.a&b.a^~f.a&c.a,f.b&b.b^~f.b&c.b)}function T(a,b,c){return a&b^a&c^b&c}function fa(f,b,c){return new a(f.a&b.a^f.a&c.a^b.a&c.a,f.b&b.b^f.b&c.b^b.b&c.b)}function ga(a){return v(a,
2)^v(a,13)^v(a,22)}function ha(f){var b=w(f,28),c=w(f,34);f=w(f,39);return new a(b.a^c.a^f.a,b.b^c.b^f.b)}function ia(a){return v(a,6)^v(a,11)^v(a,25)}function ja(f){var b=w(f,14),c=w(f,18);f=w(f,41);return new a(b.a^c.a^f.a,b.b^c.b^f.b)}function ka(a){return v(a,7)^v(a,18)^a>>>3}function la(f){var b=w(f,1),c=w(f,8);f=S(f,7);return new a(b.a^c.a^f.a,b.b^c.b^f.b)}function ma(a){return v(a,17)^v(a,19)^a>>>10}function na(f){var b=w(f,19),c=w(f,61);f=S(f,6);return new a(b.a^c.a^f.a,b.b^c.b^f.b)}function G(a,
b){var c=(a&65535)+(b&65535);return((a>>>16)+(b>>>16)+(c>>>16)&65535)<<16|c&65535}function oa(a,b,c,d){var l=(a&65535)+(b&65535)+(c&65535)+(d&65535);return((a>>>16)+(b>>>16)+(c>>>16)+(d>>>16)+(l>>>16)&65535)<<16|l&65535}function H(a,b,c,d,l){var e=(a&65535)+(b&65535)+(c&65535)+(d&65535)+(l&65535);return((a>>>16)+(b>>>16)+(c>>>16)+(d>>>16)+(l>>>16)+(e>>>16)&65535)<<16|e&65535}function pa(f,b){var c,d,l;c=(f.b&65535)+(b.b&65535);d=(f.b>>>16)+(b.b>>>16)+(c>>>16);l=(d&65535)<<16|c&65535;c=(f.a&65535)+
(b.a&65535)+(d>>>16);d=(f.a>>>16)+(b.a>>>16)+(c>>>16);return new a((d&65535)<<16|c&65535,l)}function qa(f,b,c,d){var l,e,g;l=(f.b&65535)+(b.b&65535)+(c.b&65535)+(d.b&65535);e=(f.b>>>16)+(b.b>>>16)+(c.b>>>16)+(d.b>>>16)+(l>>>16);g=(e&65535)<<16|l&65535;l=(f.a&65535)+(b.a&65535)+(c.a&65535)+(d.a&65535)+(e>>>16);e=(f.a>>>16)+(b.a>>>16)+(c.a>>>16)+(d.a>>>16)+(l>>>16);return new a((e&65535)<<16|l&65535,g)}function ra(f,b,c,d,l){var e,g,p;e=(f.b&65535)+(b.b&65535)+(c.b&65535)+(d.b&65535)+(l.b&65535);g=
(f.b>>>16)+(b.b>>>16)+(c.b>>>16)+(d.b>>>16)+(l.b>>>16)+(e>>>16);p=(g&65535)<<16|e&65535;e=(f.a&65535)+(b.a&65535)+(c.a&65535)+(d.a&65535)+(l.a&65535)+(g>>>16);g=(f.a>>>16)+(b.a>>>16)+(c.a>>>16)+(d.a>>>16)+(l.a>>>16)+(e>>>16);return new a((g&65535)<<16|e&65535,p)}function A(f){var b=0,c=0,d;for(d=0;d<arguments.length;d+=1)b^=arguments[d].b,c^=arguments[d].a;return new a(c,b)}function B(f){var b=[],c;if("SHA-1"===f)b=[1732584193,4023233417,2562383102,271733878,3285377520];else if(0===f.lastIndexOf("SHA-",
0))switch(b=[3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428],c=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],f){case "SHA-224":break;case "SHA-256":b=c;break;case "SHA-384":b=[new a(3418070365,b[0]),new a(1654270250,b[1]),new a(2438529370,b[2]),new a(355462360,b[3]),new a(1731405415,b[4]),new a(41048885895,b[5]),new a(3675008525,b[6]),new a(1203062813,b[7])];break;case "SHA-512":b=[new a(c[0],4089235720),new a(c[1],
2227873595),new a(c[2],4271175723),new a(c[3],1595750129),new a(c[4],2917565137),new a(c[5],725511199),new a(c[6],4215389547),new a(c[7],327033209)];break;default:throw Error("Unknown SHA variant");}else if(0===f.lastIndexOf("SHA3-",0)||0===f.lastIndexOf("SHAKE",0))for(f=0;5>f;f+=1)b[f]=[new a(0,0),new a(0,0),new a(0,0),new a(0,0),new a(0,0)];else throw Error("No SHA variants supported");return b}function K(a,b){var c=[],d,e,k,g,p,n,h;d=b[0];e=b[1];k=b[2];g=b[3];p=b[4];for(h=0;80>h;h+=1)c[h]=16>h?
a[h]:y(c[h-3]^c[h-8]^c[h-14]^c[h-16],1),n=20>h?H(y(d,5),e&k^~e&g,p,1518500249,c[h]):40>h?H(y(d,5),e^k^g,p,1859775393,c[h]):60>h?H(y(d,5),T(e,k,g),p,2400959708,c[h]):H(y(d,5),e^k^g,p,3395469782,c[h]),p=g,g=k,k=y(e,30),e=d,d=n;b[0]=G(d,b[0]);b[1]=G(e,b[1]);b[2]=G(k,b[2]);b[3]=G(g,b[3]);b[4]=G(p,b[4]);return b}function Y(a,b,c,d){var e;for(e=(b+65>>>9<<4)+15;a.length<=e;)a.push(0);a[b>>>5]|=128<<24-b%32;b+=c;a[e]=b&4294967295;a[e-1]=b/4294967296|0;b=a.length;for(e=0;e<b;e+=16)d=K(a.slice(e,e+16),d);
return d}function L(f,b,c){var d,l,k,g,p,n,h,m,r,t,q,v,u,w,x,y,z,F,A,B,C,D,E=[],I;if("SHA-224"===c||"SHA-256"===c)t=64,v=1,D=Number,u=G,w=oa,x=H,y=ka,z=ma,F=ga,A=ia,C=T,B=da,I=e;else if("SHA-384"===c||"SHA-512"===c)t=80,v=2,D=a,u=pa,w=qa,x=ra,y=la,z=na,F=ha,A=ja,C=fa,B=ea,I=U;else throw Error("Unexpected error in SHA-2 implementation");c=b[0];d=b[1];l=b[2];k=b[3];g=b[4];p=b[5];n=b[6];h=b[7];for(q=0;q<t;q+=1)16>q?(r=q*v,m=f.length<=r?0:f[r],r=f.length<=r+1?0:f[r+1],E[q]=new D(m,r)):E[q]=w(z(E[q-2]),
E[q-7],y(E[q-15]),E[q-16]),m=x(h,A(g),B(g,p,n),I[q],E[q]),r=u(F(c),C(c,d,l)),h=n,n=p,p=g,g=u(k,m),k=l,l=d,d=c,c=u(m,r);b[0]=u(c,b[0]);b[1]=u(d,b[1]);b[2]=u(l,b[2]);b[3]=u(k,b[3]);b[4]=u(g,b[4]);b[5]=u(p,b[5]);b[6]=u(n,b[6]);b[7]=u(h,b[7]);return b}function D(f,b){var c,d,e,k,g=[],p=[];if(null!==f)for(d=0;d<f.length;d+=2)b[(d>>>1)%5][(d>>>1)/5|0]=A(b[(d>>>1)%5][(d>>>1)/5|0],new a((f[d+1]&255)<<24|(f[d+1]&65280)<<8|(f[d+1]&16711680)>>>8|f[d+1]>>>24,(f[d]&255)<<24|(f[d]&65280)<<8|(f[d]&16711680)>>>8|
f[d]>>>24));for(c=0;24>c;c+=1){k=B("SHA3-");for(d=0;5>d;d+=1)g[d]=A(b[d][0],b[d][1],b[d][2],b[d][3],b[d][4]);for(d=0;5>d;d+=1)p[d]=A(g[(d+4)%5],R(g[(d+1)%5],1));for(d=0;5>d;d+=1)for(e=0;5>e;e+=1)b[d][e]=A(b[d][e],p[d]);for(d=0;5>d;d+=1)for(e=0;5>e;e+=1)k[e][(2*d+3*e)%5]=R(b[d][e],V[d][e]);for(d=0;5>d;d+=1)for(e=0;5>e;e+=1)b[d][e]=A(k[d][e],new a(~k[(d+1)%5][e].a&k[(d+2)%5][e].a,~k[(d+1)%5][e].b&k[(d+2)%5][e].b));b[0][0]=A(b[0][0],W[c])}return b}var e,U,V,W;e=[1116352408,1899447441,3049323471,3921009573,
961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,
883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];U=[new a(e[0],3609767458),new a(e[1],602891725),new a(e[2],3964484399),new a(e[3],2173295548),new a(e[4],4081628472),new a(e[5],3053834265),new a(e[6],2937671579),new a(e[7],3664609560),new a(e[8],2734883394),new a(e[9],1164996542),new a(e[10],1323610764),new a(e[11],3590304994),new a(e[12],4068182383),new a(e[13],991336113),new a(e[14],633803317),new a(e[15],
3479774868),new a(e[16],2666613458),new a(e[17],944711139),new a(e[18],2341262773),new a(e[19],2007800933),new a(e[20],1495990901),new a(e[21],1856431235),new a(e[22],3175218132),new a(e[23],2198950837),new a(e[24],3999719339),new a(e[25],766784016),new a(e[26],2566594879),new a(e[27],3203337956),new a(e[28],1034457026),new a(e[29],2466948901),new a(e[30],3758326383),new a(e[31],168717936),new a(e[32],1188179964),new a(e[33],1546045734),new a(e[34],1522805485),new a(e[35],2643833823),new a(e[36],
2343527390),new a(e[37],1014477480),new a(e[38],1206759142),new a(e[39],344077627),new a(e[40],1290863460),new a(e[41],3158454273),new a(e[42],3505952657),new a(e[43],106217008),new a(e[44],3606008344),new a(e[45],1432725776),new a(e[46],1467031594),new a(e[47],851169720),new a(e[48],3100823752),new a(e[49],1363258195),new a(e[50],3750685593),new a(e[51],3785050280),new a(e[52],3318307427),new a(e[53],3812723403),new a(e[54],2003034995),new a(e[55],3602036899),new a(e[56],1575990012),new a(e[57],
1125592928),new a(e[58],2716904306),new a(e[59],442776044),new a(e[60],593698344),new a(e[61],3733110249),new a(e[62],2999351573),new a(e[63],3815920427),new a(3391569614,3928383900),new a(3515267271,566280711),new a(3940187606,3454069534),new a(4118630271,4000239992),new a(116418474,1914138554),new a(174292421,2731055270),new a(289380356,3203993006),new a(460393269,320620315),new a(685471733,587496836),new a(852142971,1086792851),new a(1017036298,365543100),new a(1126000580,2618297676),new a(1288033470,
3409855158),new a(1501505948,4234509866),new a(1607167915,987167468),new a(1816402316,1246189591)];W=[new a(0,1),new a(0,32898),new a(2147483648,32906),new a(2147483648,2147516416),new a(0,32907),new a(0,2147483649),new a(2147483648,2147516545),new a(2147483648,32777),new a(0,138),new a(0,136),new a(0,2147516425),new a(0,2147483658),new a(0,2147516555),new a(2147483648,139),new a(2147483648,32905),new a(2147483648,32771),new a(2147483648,32770),new a(2147483648,128),new a(0,32778),new a(2147483648,
2147483658),new a(2147483648,2147516545),new a(2147483648,32896),new a(0,2147483649),new a(2147483648,2147516424)];V=[[0,36,3,41,18],[1,44,10,45,2],[62,6,43,15,61],[28,55,25,21,56],[27,20,39,8,14]];"function"===typeof define&&define.amd?define(function(){return C}):"undefined"!==typeof exports?("undefined"!==typeof module&&module.exports&&(module.exports=C),exports=C):X.jsSHA=C})(this);

/*
 AngularJS v1.5.0
 (c) 2010-2016 Google, Inc. http://angularjs.org
 License: MIT
*/
(function(p,c,n){'use strict';function l(b,a,g){var d=g.baseHref(),k=b[0];return function(b,e,f){var g,h;f=f||{};h=f.expires;g=c.isDefined(f.path)?f.path:d;c.isUndefined(e)&&(h="Thu, 01 Jan 1970 00:00:00 GMT",e="");c.isString(h)&&(h=new Date(h));e=encodeURIComponent(b)+"="+encodeURIComponent(e);e=e+(g?";path="+g:"")+(f.domain?";domain="+f.domain:"");e+=h?";expires="+h.toUTCString():"";e+=f.secure?";secure":"";f=e.length+1;4096<f&&a.warn("Cookie '"+b+"' possibly not set or overflowed because it was too large ("+
f+" > 4096 bytes)!");k.cookie=e}}c.module("ngCookies",["ng"]).provider("$cookies",[function(){var b=this.defaults={};this.$get=["$$cookieReader","$$cookieWriter",function(a,g){return{get:function(d){return a()[d]},getObject:function(d){return(d=this.get(d))?c.fromJson(d):d},getAll:function(){return a()},put:function(d,a,m){g(d,a,m?c.extend({},b,m):b)},putObject:function(d,b,a){this.put(d,c.toJson(b),a)},remove:function(a,k){g(a,n,k?c.extend({},b,k):b)}}}]}]);c.module("ngCookies").factory("$cookieStore",
["$cookies",function(b){return{get:function(a){return b.getObject(a)},put:function(a,c){b.putObject(a,c)},remove:function(a){b.remove(a)}}}]);l.$inject=["$document","$log","$browser"];c.module("ngCookies").provider("$$cookieWriter",function(){this.$get=l})})(window,window.angular);
//# sourceMappingURL=angular-cookies.min.js.map

/**
 * @license AngularJS v1.3.0
 * (c) 2010-2014 Google, Inc. http://angularjs.org
 * License: MIT
 */
(function(window, angular, undefined) {'use strict';

/**
 * @ngdoc module
 * @name ngRoute
 * @description
 *
 * # ngRoute
 *
 * The `ngRoute` module provides routing and deeplinking services and directives for angular apps.
 *
 * ## Example
 * See {@link ngRoute.$route#example $route} for an example of configuring and using `ngRoute`.
 *
 *
 * <div doc-module-components="ngRoute"></div>
 */
 /* global -ngRouteModule */
var ngRouteModule = angular.module('ngRoute', ['ng']).
                        provider('$route', $RouteProvider),
    $routeMinErr = angular.$$minErr('ngRoute');

/**
 * @ngdoc provider
 * @name $routeProvider
 *
 * @description
 *
 * Used for configuring routes.
 *
 * ## Example
 * See {@link ngRoute.$route#example $route} for an example of configuring and using `ngRoute`.
 *
 * ## Dependencies
 * Requires the {@link ngRoute `ngRoute`} module to be installed.
 */
function $RouteProvider(){
  function inherit(parent, extra) {
    return angular.extend(new (angular.extend(function() {}, {prototype:parent}))(), extra);
  }

  var routes = {};

  /**
   * @ngdoc method
   * @name $routeProvider#when
   *
   * @param {string} path Route path (matched against `$location.path`). If `$location.path`
   *    contains redundant trailing slash or is missing one, the route will still match and the
   *    `$location.path` will be updated to add or drop the trailing slash to exactly match the
   *    route definition.
   *
   *    * `path` can contain named groups starting with a colon: e.g. `:name`. All characters up
   *        to the next slash are matched and stored in `$routeParams` under the given `name`
   *        when the route matches.
   *    * `path` can contain named groups starting with a colon and ending with a star:
   *        e.g.`:name*`. All characters are eagerly stored in `$routeParams` under the given `name`
   *        when the route matches.
   *    * `path` can contain optional named groups with a question mark: e.g.`:name?`.
   *
   *    For example, routes like `/color/:color/largecode/:largecode*\/edit` will match
   *    `/color/brown/largecode/code/with/slashes/edit` and extract:
   *
   *    * `color: brown`
   *    * `largecode: code/with/slashes`.
   *
   *
   * @param {Object} route Mapping information to be assigned to `$route.current` on route
   *    match.
   *
   *    Object properties:
   *
   *    - `controller`  `{(string|function()=}`  Controller fn that should be associated with
   *      newly created scope or the name of a {@link angular.Module#controller registered
   *      controller} if passed as a string.
   *    - `controllerAs`  `{string=}`  A controller alias name. If present the controller will be
   *      published to scope under the `controllerAs` name.
   *    - `template`  `{string=|function()=}`  html template as a string or a function that
   *      returns an html template as a string which should be used by {@link
   *      ngRoute.directive:ngView ngView} or {@link ng.directive:ngInclude ngInclude} directives.
   *      This property takes precedence over `templateUrl`.
   *
   *      If `template` is a function, it will be called with the following parameters:
   *
   *      - `{Array.<Object>}` - route parameters extracted from the current
   *        `$location.path()` by applying the current route
   *
   *    - `templateUrl`  `{string=|function()=}`  path or function that returns a path to an html
   *      template that should be used by {@link ngRoute.directive:ngView ngView}.
   *
   *      If `templateUrl` is a function, it will be called with the following parameters:
   *
   *      - `{Array.<Object>}` - route parameters extracted from the current
   *        `$location.path()` by applying the current route
   *
   *    - `resolve` - `{Object.<string, function>=}` - An optional map of dependencies which should
   *      be injected into the controller. If any of these dependencies are promises, the router
   *      will wait for them all to be resolved or one to be rejected before the controller is
   *      instantiated.
   *      If all the promises are resolved successfully, the values of the resolved promises are
   *      injected and {@link ngRoute.$route#$routeChangeSuccess $routeChangeSuccess} event is
   *      fired. If any of the promises are rejected the
   *      {@link ngRoute.$route#$routeChangeError $routeChangeError} event is fired. The map object
   *      is:
   *
   *      - `key`  `{string}`: a name of a dependency to be injected into the controller.
   *      - `factory` - `{string|function}`: If `string` then it is an alias for a service.
   *        Otherwise if function, then it is {@link auto.$injector#invoke injected}
   *        and the return value is treated as the dependency. If the result is a promise, it is
   *        resolved before its value is injected into the controller. Be aware that
   *        `ngRoute.$routeParams` will still refer to the previous route within these resolve
   *        functions.  Use `$route.current.params` to access the new route parameters, instead.
   *
   *    - `redirectTo`  {(string|function())=}  value to update
   *      {@link ng.$location $location} path with and trigger route redirection.
   *
   *      If `redirectTo` is a function, it will be called with the following parameters:
   *
   *      - `{Object.<string>}` - route parameters extracted from the current
   *        `$location.path()` by applying the current route templateUrl.
   *      - `{string}` - current `$location.path()`
   *      - `{Object}` - current `$location.search()`
   *
   *      The custom `redirectTo` function is expected to return a string which will be used
   *      to update `$location.path()` and `$location.search()`.
   *
   *    - `[reloadOnSearch=true]` - {boolean=} - reload route when only `$location.search()`
   *      or `$location.hash()` changes.
   *
   *      If the option is set to `false` and url in the browser changes, then
   *      `$routeUpdate` event is broadcasted on the root scope.
   *
   *    - `[caseInsensitiveMatch=false]` - {boolean=} - match routes without being case sensitive
   *
   *      If the option is set to `true`, then the particular route can be matched without being
   *      case sensitive
   *
   * @returns {Object} self
   *
   * @description
   * Adds a new route definition to the `$route` service.
   */
  this.when = function(path, route) {
    routes[path] = angular.extend(
      {reloadOnSearch: true},
      route,
      path && pathRegExp(path, route)
    );

    // create redirection for trailing slashes
    if (path) {
      var redirectPath = (path[path.length-1] == '/')
            ? path.substr(0, path.length-1)
            : path +'/';

      routes[redirectPath] = angular.extend(
        {redirectTo: path},
        pathRegExp(redirectPath, route)
      );
    }

    return this;
  };

   /**
    * @param path {string} path
    * @param opts {Object} options
    * @return {?Object}
    *
    * @description
    * Normalizes the given path, returning a regular expression
    * and the original path.
    *
    * Inspired by pathRexp in visionmedia/express/lib/utils.js.
    */
  function pathRegExp(path, opts) {
    var insensitive = opts.caseInsensitiveMatch,
        ret = {
          originalPath: path,
          regexp: path
        },
        keys = ret.keys = [];

    path = path
      .replace(/([().])/g, '\\$1')
      .replace(/(\/)?:(\w+)([\?\*])?/g, function(_, slash, key, option){
        var optional = option === '?' ? option : null;
        var star = option === '*' ? option : null;
        keys.push({ name: key, optional: !!optional });
        slash = slash || '';
        return ''
          + (optional ? '' : slash)
          + '(?:'
          + (optional ? slash : '')
          + (star && '(.+?)' || '([^/]+)')
          + (optional || '')
          + ')'
          + (optional || '');
      })
      .replace(/([\/$\*])/g, '\\$1');

    ret.regexp = new RegExp('^' + path + '$', insensitive ? 'i' : '');
    return ret;
  }

  /**
   * @ngdoc method
   * @name $routeProvider#otherwise
   *
   * @description
   * Sets route definition that will be used on route change when no other route definition
   * is matched.
   *
   * @param {Object|string} params Mapping information to be assigned to `$route.current`.
   * If called with a string, the value maps to `redirectTo`.
   * @returns {Object} self
   */
  this.otherwise = function(params) {
    if (typeof params === 'string') {
      params = {redirectTo: params};
    }
    this.when(null, params);
    return this;
  };


  this.$get = ['$rootScope',
               '$location',
               '$routeParams',
               '$q',
               '$injector',
               '$templateRequest',
               '$sce',
      function($rootScope, $location, $routeParams, $q, $injector, $templateRequest, $sce) {

    /**
     * @ngdoc service
     * @name $route
     * @requires $location
     * @requires $routeParams
     *
     * @property {Object} current Reference to the current route definition.
     * The route definition contains:
     *
     *   - `controller`: The controller constructor as define in route definition.
     *   - `locals`: A map of locals which is used by {@link ng.$controller $controller} service for
     *     controller instantiation. The `locals` contain
     *     the resolved values of the `resolve` map. Additionally the `locals` also contain:
     *
     *     - `$scope` - The current route scope.
     *     - `$template` - The current route template HTML.
     *
     * @property {Object} routes Object with all route configuration Objects as its properties.
     *
     * @description
     * `$route` is used for deep-linking URLs to controllers and views (HTML partials).
     * It watches `$location.url()` and tries to map the path to an existing route definition.
     *
     * Requires the {@link ngRoute `ngRoute`} module to be installed.
     *
     * You can define routes through {@link ngRoute.$routeProvider $routeProvider}'s API.
     *
     * The `$route` service is typically used in conjunction with the
     * {@link ngRoute.directive:ngView `ngView`} directive and the
     * {@link ngRoute.$routeParams `$routeParams`} service.
     *
     * @example
     * This example shows how changing the URL hash causes the `$route` to match a route against the
     * URL, and the `ngView` pulls in the partial.
     *
     * <example name="$route-service" module="ngRouteExample"
     *          deps="angular-route.js" fixBase="true">
     *   <file name="index.html">
     *     <div ng-controller="MainController">
     *       Choose:
     *       <a href="Book/Moby">Moby</a> |
     *       <a href="Book/Moby/ch/1">Moby: Ch1</a> |
     *       <a href="Book/Gatsby">Gatsby</a> |
     *       <a href="Book/Gatsby/ch/4?key=value">Gatsby: Ch4</a> |
     *       <a href="Book/Scarlet">Scarlet Letter</a><br/>
     *
     *       <div ng-view></div>
     *
     *       <hr />
     *
     *       <pre>$location.path() = {{$location.path()}}</pre>
     *       <pre>$route.current.templateUrl = {{$route.current.templateUrl}}</pre>
     *       <pre>$route.current.params = {{$route.current.params}}</pre>
     *       <pre>$route.current.scope.name = {{$route.current.scope.name}}</pre>
     *       <pre>$routeParams = {{$routeParams}}</pre>
     *     </div>
     *   </file>
     *
     *   <file name="book.html">
     *     controller: {{name}}<br />
     *     Book Id: {{params.bookId}}<br />
     *   </file>
     *
     *   <file name="chapter.html">
     *     controller: {{name}}<br />
     *     Book Id: {{params.bookId}}<br />
     *     Chapter Id: {{params.chapterId}}
     *   </file>
     *
     *   <file name="script.js">
     *     angular.module('ngRouteExample', ['ngRoute'])
     *
     *      .controller('MainController', function($scope, $route, $routeParams, $location) {
     *          $scope.$route = $route;
     *          $scope.$location = $location;
     *          $scope.$routeParams = $routeParams;
     *      })
     *
     *      .controller('BookController', function($scope, $routeParams) {
     *          $scope.name = "BookController";
     *          $scope.params = $routeParams;
     *      })
     *
     *      .controller('ChapterController', function($scope, $routeParams) {
     *          $scope.name = "ChapterController";
     *          $scope.params = $routeParams;
     *      })
     *
     *     .config(function($routeProvider, $locationProvider) {
     *       $routeProvider
     *        .when('/Book/:bookId', {
     *         templateUrl: 'book.html',
     *         controller: 'BookController',
     *         resolve: {
     *           // I will cause a 1 second delay
     *           delay: function($q, $timeout) {
     *             var delay = $q.defer();
     *             $timeout(delay.resolve, 1000);
     *             return delay.promise;
     *           }
     *         }
     *       })
     *       .when('/Book/:bookId/ch/:chapterId', {
     *         templateUrl: 'chapter.html',
     *         controller: 'ChapterController'
     *       });
     *
     *       // configure html5 to get links working on jsfiddle
     *       $locationProvider.html5Mode(true);
     *     });
     *
     *   </file>
     *
     *   <file name="protractor.js" type="protractor">
     *     it('should load and compile correct template', function() {
     *       element(by.linkText('Moby: Ch1')).click();
     *       var content = element(by.css('[ng-view]')).getText();
     *       expect(content).toMatch(/controller\: ChapterController/);
     *       expect(content).toMatch(/Book Id\: Moby/);
     *       expect(content).toMatch(/Chapter Id\: 1/);
     *
     *       element(by.partialLinkText('Scarlet')).click();
     *
     *       content = element(by.css('[ng-view]')).getText();
     *       expect(content).toMatch(/controller\: BookController/);
     *       expect(content).toMatch(/Book Id\: Scarlet/);
     *     });
     *   </file>
     * </example>
     */

    /**
     * @ngdoc event
     * @name $route#$routeChangeStart
     * @eventType broadcast on root scope
     * @description
     * Broadcasted before a route change. At this  point the route services starts
     * resolving all of the dependencies needed for the route change to occur.
     * Typically this involves fetching the view template as well as any dependencies
     * defined in `resolve` route property. Once  all of the dependencies are resolved
     * `$routeChangeSuccess` is fired.
     *
     * The route change (and the `$location` change that triggered it) can be prevented
     * by calling `preventDefault` method of the event. See {@link ng.$rootScope.Scope#$on}
     * for more details about event object.
     *
     * @param {Object} angularEvent Synthetic event object.
     * @param {Route} next Future route information.
     * @param {Route} current Current route information.
     */

    /**
     * @ngdoc event
     * @name $route#$routeChangeSuccess
     * @eventType broadcast on root scope
     * @description
     * Broadcasted after a route dependencies are resolved.
     * {@link ngRoute.directive:ngView ngView} listens for the directive
     * to instantiate the controller and render the view.
     *
     * @param {Object} angularEvent Synthetic event object.
     * @param {Route} current Current route information.
     * @param {Route|Undefined} previous Previous route information, or undefined if current is
     * first route entered.
     */

    /**
     * @ngdoc event
     * @name $route#$routeChangeError
     * @eventType broadcast on root scope
     * @description
     * Broadcasted if any of the resolve promises are rejected.
     *
     * @param {Object} angularEvent Synthetic event object
     * @param {Route} current Current route information.
     * @param {Route} previous Previous route information.
     * @param {Route} rejection Rejection of the promise. Usually the error of the failed promise.
     */

    /**
     * @ngdoc event
     * @name $route#$routeUpdate
     * @eventType broadcast on root scope
     * @description
     *
     * The `reloadOnSearch` property has been set to false, and we are reusing the same
     * instance of the Controller.
     */

    var forceReload = false,
        preparedRoute,
        preparedRouteIsUpdateOnly,
        $route = {
          routes: routes,

          /**
           * @ngdoc method
           * @name $route#reload
           *
           * @description
           * Causes `$route` service to reload the current route even if
           * {@link ng.$location $location} hasn't changed.
           *
           * As a result of that, {@link ngRoute.directive:ngView ngView}
           * creates new scope, reinstantiates the controller.
           */
          reload: function() {
            forceReload = true;
            $rootScope.$evalAsync(function() {
              // Don't support cancellation of a reload for now...
              prepareRoute();
              commitRoute();
            });
          },

          /**
           * @ngdoc method
           * @name $route#updateParams
           *
           * @description
           * Causes `$route` service to update the current URL, replacing
           * current route parameters with those specified in `newParams`.
           * Provided property names that match the route's path segment
           * definitions will be interpolated into the location's path, while
           * remaining properties will be treated as query params.
           *
           * @param {Object} newParams mapping of URL parameter names to values
           */
          updateParams: function(newParams) {
            if (this.current && this.current.$$route) {
              var searchParams = {}, self=this;

              angular.forEach(Object.keys(newParams), function(key) {
                if (!self.current.pathParams[key]) searchParams[key] = newParams[key];
              });

              newParams = angular.extend({}, this.current.params, newParams);
              $location.path(interpolate(this.current.$$route.originalPath, newParams));
              $location.search(angular.extend({}, $location.search(), searchParams));
            }
            else {
              throw $routeMinErr('norout', 'Tried updating route when with no current route');
            }
          }
        };

    $rootScope.$on('$locationChangeStart', prepareRoute);
    $rootScope.$on('$locationChangeSuccess', commitRoute);

    return $route;

    /////////////////////////////////////////////////////

    /**
     * @param on {string} current url
     * @param route {Object} route regexp to match the url against
     * @return {?Object}
     *
     * @description
     * Check if the route matches the current url.
     *
     * Inspired by match in
     * visionmedia/express/lib/router/router.js.
     */
    function switchRouteMatcher(on, route) {
      var keys = route.keys,
          params = {};

      if (!route.regexp) return null;

      var m = route.regexp.exec(on);
      if (!m) return null;

      for (var i = 1, len = m.length; i < len; ++i) {
        var key = keys[i - 1];

        var val = m[i];

        if (key && val) {
          params[key.name] = val;
        }
      }
      return params;
    }

    function prepareRoute($locationEvent) {
      var lastRoute = $route.current;

      preparedRoute = parseRoute();
      preparedRouteIsUpdateOnly = preparedRoute && lastRoute && preparedRoute.$$route === lastRoute.$$route
          && angular.equals(preparedRoute.pathParams, lastRoute.pathParams)
          && !preparedRoute.reloadOnSearch && !forceReload;

      if (!preparedRouteIsUpdateOnly && (lastRoute || preparedRoute)) {
        if ($rootScope.$broadcast('$routeChangeStart', preparedRoute, lastRoute).defaultPrevented) {
          if ($locationEvent) {
            $locationEvent.preventDefault();
          }
        }
      }
    }

    function commitRoute() {
      var lastRoute = $route.current;
      var nextRoute = preparedRoute;

      if (preparedRouteIsUpdateOnly) {
        lastRoute.params = nextRoute.params;
        angular.copy(lastRoute.params, $routeParams);
        $rootScope.$broadcast('$routeUpdate', lastRoute);
      } else if (nextRoute || lastRoute) {
        forceReload = false;
        $route.current = nextRoute;
        if (nextRoute) {
          if (nextRoute.redirectTo) {
            if (angular.isString(nextRoute.redirectTo)) {
              $location.path(interpolate(nextRoute.redirectTo, nextRoute.params)).search(nextRoute.params)
                       .replace();
            } else {
              $location.url(nextRoute.redirectTo(nextRoute.pathParams, $location.path(), $location.search()))
                       .replace();
            }
          }
        }

        $q.when(nextRoute).
          then(function() {
            if (nextRoute) {
              var locals = angular.extend({}, nextRoute.resolve),
                  template, templateUrl;

              angular.forEach(locals, function(value, key) {
                locals[key] = angular.isString(value) ?
                    $injector.get(value) : $injector.invoke(value, null, null, key);
              });

              if (angular.isDefined(template = nextRoute.template)) {
                if (angular.isFunction(template)) {
                  template = template(nextRoute.params);
                }
              } else if (angular.isDefined(templateUrl = nextRoute.templateUrl)) {
                if (angular.isFunction(templateUrl)) {
                  templateUrl = templateUrl(nextRoute.params);
                }
                templateUrl = $sce.getTrustedResourceUrl(templateUrl);
                if (angular.isDefined(templateUrl)) {
                  nextRoute.loadedTemplateUrl = templateUrl;
                  template = $templateRequest(templateUrl);
                }
              }
              if (angular.isDefined(template)) {
                locals['$template'] = template;
              }
              return $q.all(locals);
            }
          }).
          // after route change
          then(function(locals) {
            if (nextRoute == $route.current) {
              if (nextRoute) {
                nextRoute.locals = locals;
                angular.copy(nextRoute.params, $routeParams);
              }
              $rootScope.$broadcast('$routeChangeSuccess', nextRoute, lastRoute);
            }
          }, function(error) {
            if (nextRoute == $route.current) {
              $rootScope.$broadcast('$routeChangeError', nextRoute, lastRoute, error);
            }
          });
      }
    }


    /**
     * @returns {Object} the current active route, by matching it against the URL
     */
    function parseRoute() {
      // Match a route
      var params, match;
      angular.forEach(routes, function(route, path) {
        if (!match && (params = switchRouteMatcher($location.path(), route))) {
          match = inherit(route, {
            params: angular.extend({}, $location.search(), params),
            pathParams: params});
          match.$$route = route;
        }
      });
      // No route matched; fallback to "otherwise" route
      return match || routes[null] && inherit(routes[null], {params: {}, pathParams:{}});
    }

    /**
     * @returns {string} interpolation of the redirect path with the parameters
     */
    function interpolate(string, params) {
      var result = [];
      angular.forEach((string||'').split(':'), function(segment, i) {
        if (i === 0) {
          result.push(segment);
        } else {
          var segmentMatch = segment.match(/(\w+)(.*)/);
          var key = segmentMatch[1];
          result.push(params[key]);
          result.push(segmentMatch[2] || '');
          delete params[key];
        }
      });
      return result.join('');
    }
  }];
}

ngRouteModule.provider('$routeParams', $RouteParamsProvider);


/**
 * @ngdoc service
 * @name $routeParams
 * @requires $route
 *
 * @description
 * The `$routeParams` service allows you to retrieve the current set of route parameters.
 *
 * Requires the {@link ngRoute `ngRoute`} module to be installed.
 *
 * The route parameters are a combination of {@link ng.$location `$location`}'s
 * {@link ng.$location#search `search()`} and {@link ng.$location#path `path()`}.
 * The `path` parameters are extracted when the {@link ngRoute.$route `$route`} path is matched.
 *
 * In case of parameter name collision, `path` params take precedence over `search` params.
 *
 * The service guarantees that the identity of the `$routeParams` object will remain unchanged
 * (but its properties will likely change) even when a route change occurs.
 *
 * Note that the `$routeParams` are only updated *after* a route change completes successfully.
 * This means that you cannot rely on `$routeParams` being correct in route resolve functions.
 * Instead you can use `$route.current.params` to access the new route's parameters.
 *
 * @example
 * ```js
 *  // Given:
 *  // URL: http://server.com/index.html#/Chapter/1/Section/2?search=moby
 *  // Route: /Chapter/:chapterId/Section/:sectionId
 *  //
 *  // Then
 *  $routeParams ==> {chapterId:'1', sectionId:'2', search:'moby'}
 * ```
 */
function $RouteParamsProvider() {
  this.$get = function() { return {}; };
}

ngRouteModule.directive('ngView', ngViewFactory);
ngRouteModule.directive('ngView', ngViewFillContentFactory);


/**
 * @ngdoc directive
 * @name ngView
 * @restrict ECA
 *
 * @description
 * # Overview
 * `ngView` is a directive that complements the {@link ngRoute.$route $route} service by
 * including the rendered template of the current route into the main layout (`index.html`) file.
 * Every time the current route changes, the included view changes with it according to the
 * configuration of the `$route` service.
 *
 * Requires the {@link ngRoute `ngRoute`} module to be installed.
 *
 * @animations
 * enter - animation is used to bring new content into the browser.
 * leave - animation is used to animate existing content away.
 *
 * The enter and leave animation occur concurrently.
 *
 * @scope
 * @priority 400
 * @param {string=} onload Expression to evaluate whenever the view updates.
 *
 * @param {string=} autoscroll Whether `ngView` should call {@link ng.$anchorScroll
 *                  $anchorScroll} to scroll the viewport after the view is updated.
 *
 *                  - If the attribute is not set, disable scrolling.
 *                  - If the attribute is set without value, enable scrolling.
 *                  - Otherwise enable scrolling only if the `autoscroll` attribute value evaluated
 *                    as an expression yields a truthy value.
 * @example
    <example name="ngView-directive" module="ngViewExample"
             deps="angular-route.js;angular-animate.js"
             animations="true" fixBase="true">
      <file name="index.html">
        <div ng-controller="MainCtrl as main">
          Choose:
          <a href="Book/Moby">Moby</a> |
          <a href="Book/Moby/ch/1">Moby: Ch1</a> |
          <a href="Book/Gatsby">Gatsby</a> |
          <a href="Book/Gatsby/ch/4?key=value">Gatsby: Ch4</a> |
          <a href="Book/Scarlet">Scarlet Letter</a><br/>

          <div class="view-animate-container">
            <div ng-view class="view-animate"></div>
          </div>
          <hr />

          <pre>$location.path() = {{main.$location.path()}}</pre>
          <pre>$route.current.templateUrl = {{main.$route.current.templateUrl}}</pre>
          <pre>$route.current.params = {{main.$route.current.params}}</pre>
          <pre>$routeParams = {{main.$routeParams}}</pre>
        </div>
      </file>

      <file name="book.html">
        <div>
          controller: {{book.name}}<br />
          Book Id: {{book.params.bookId}}<br />
        </div>
      </file>

      <file name="chapter.html">
        <div>
          controller: {{chapter.name}}<br />
          Book Id: {{chapter.params.bookId}}<br />
          Chapter Id: {{chapter.params.chapterId}}
        </div>
      </file>

      <file name="animations.css">
        .view-animate-container {
          position:relative;
          height:100px!important;
          position:relative;
          background:white;
          border:1px solid black;
          height:40px;
          overflow:hidden;
        }

        .view-animate {
          padding:10px;
        }

        .view-animate.ng-enter, .view-animate.ng-leave {
          -webkit-transition:all cubic-bezier(0.250, 0.460, 0.450, 0.940) 1.5s;
          transition:all cubic-bezier(0.250, 0.460, 0.450, 0.940) 1.5s;

          display:block;
          width:100%;
          border-left:1px solid black;

          position:absolute;
          top:0;
          left:0;
          right:0;
          bottom:0;
          padding:10px;
        }

        .view-animate.ng-enter {
          left:100%;
        }
        .view-animate.ng-enter.ng-enter-active {
          left:0;
        }
        .view-animate.ng-leave.ng-leave-active {
          left:-100%;
        }
      </file>

      <file name="script.js">
        angular.module('ngViewExample', ['ngRoute', 'ngAnimate'])
          .config(['$routeProvider', '$locationProvider',
            function($routeProvider, $locationProvider) {
              $routeProvider
                .when('/Book/:bookId', {
                  templateUrl: 'book.html',
                  controller: 'BookCtrl',
                  controllerAs: 'book'
                })
                .when('/Book/:bookId/ch/:chapterId', {
                  templateUrl: 'chapter.html',
                  controller: 'ChapterCtrl',
                  controllerAs: 'chapter'
                });

              $locationProvider.html5Mode(true);
          }])
          .controller('MainCtrl', ['$route', '$routeParams', '$location',
            function($route, $routeParams, $location) {
              this.$route = $route;
              this.$location = $location;
              this.$routeParams = $routeParams;
          }])
          .controller('BookCtrl', ['$routeParams', function($routeParams) {
            this.name = "BookCtrl";
            this.params = $routeParams;
          }])
          .controller('ChapterCtrl', ['$routeParams', function($routeParams) {
            this.name = "ChapterCtrl";
            this.params = $routeParams;
          }]);

      </file>

      <file name="protractor.js" type="protractor">
        it('should load and compile correct template', function() {
          element(by.linkText('Moby: Ch1')).click();
          var content = element(by.css('[ng-view]')).getText();
          expect(content).toMatch(/controller\: ChapterCtrl/);
          expect(content).toMatch(/Book Id\: Moby/);
          expect(content).toMatch(/Chapter Id\: 1/);

          element(by.partialLinkText('Scarlet')).click();

          content = element(by.css('[ng-view]')).getText();
          expect(content).toMatch(/controller\: BookCtrl/);
          expect(content).toMatch(/Book Id\: Scarlet/);
        });
      </file>
    </example>
 */


/**
 * @ngdoc event
 * @name ngView#$viewContentLoaded
 * @eventType emit on the current ngView scope
 * @description
 * Emitted every time the ngView content is reloaded.
 */
ngViewFactory.$inject = ['$route', '$anchorScroll', '$animate'];
function ngViewFactory(   $route,   $anchorScroll,   $animate) {
  return {
    restrict: 'ECA',
    terminal: true,
    priority: 400,
    transclude: 'element',
    link: function(scope, $element, attr, ctrl, $transclude) {
        var currentScope,
            currentElement,
            previousLeaveAnimation,
            autoScrollExp = attr.autoscroll,
            onloadExp = attr.onload || '';

        scope.$on('$routeChangeSuccess', update);
        update();

        function cleanupLastView() {
          if(previousLeaveAnimation) {
            $animate.cancel(previousLeaveAnimation);
            previousLeaveAnimation = null;
          }

          if(currentScope) {
            currentScope.$destroy();
            currentScope = null;
          }
          if(currentElement) {
            previousLeaveAnimation = $animate.leave(currentElement);
            previousLeaveAnimation.then(function() {
              previousLeaveAnimation = null;
            });
            currentElement = null;
          }
        }

        function update() {
          var locals = $route.current && $route.current.locals,
              template = locals && locals.$template;

          if (angular.isDefined(template)) {
            var newScope = scope.$new();
            var current = $route.current;

            // Note: This will also link all children of ng-view that were contained in the original
            // html. If that content contains controllers, ... they could pollute/change the scope.
            // However, using ng-view on an element with additional content does not make sense...
            // Note: We can't remove them in the cloneAttchFn of $transclude as that
            // function is called before linking the content, which would apply child
            // directives to non existing elements.
            var clone = $transclude(newScope, function(clone) {
              $animate.enter(clone, null, currentElement || $element).then(function onNgViewEnter () {
                if (angular.isDefined(autoScrollExp)
                  && (!autoScrollExp || scope.$eval(autoScrollExp))) {
                  $anchorScroll();
                }
              });
              cleanupLastView();
            });

            currentElement = clone;
            currentScope = current.scope = newScope;
            currentScope.$emit('$viewContentLoaded');
            currentScope.$eval(onloadExp);
          } else {
            cleanupLastView();
          }
        }
    }
  };
}

// This directive is called during the $transclude call of the first `ngView` directive.
// It will replace and compile the content of the element with the loaded template.
// We need this directive so that the element content is already filled when
// the link function of another directive on the same element as ngView
// is called.
ngViewFillContentFactory.$inject = ['$compile', '$controller', '$route'];
function ngViewFillContentFactory($compile, $controller, $route) {
  return {
    restrict: 'ECA',
    priority: -400,
    link: function(scope, $element) {
      var current = $route.current,
          locals = current.locals;

      $element.html(locals.$template);

      var link = $compile($element.contents());

      if (current.controller) {
        locals.$scope = scope;
        var controller = $controller(current.controller, locals);
        if (current.controllerAs) {
          scope[current.controllerAs] = controller;
        }
        $element.data('$ngControllerController', controller);
        $element.children().data('$ngControllerController', controller);
      }

      link(scope);
    }
  };
}


})(window, window.angular);

/*!
 * angular-translate - v2.13.0 - 2016-10-30
 * 
 * Copyright (c) 2016 The angular-translate team, Pascal Precht; Licensed MIT
 */
!function(a,b){"function"==typeof define&&define.amd?define([],function(){return b()}):"object"==typeof exports?module.exports=b():b()}(this,function(){function a(a){"use strict";var b=a.storageKey(),c=a.storage(),d=function(){var d=a.preferredLanguage();angular.isString(d)?a.use(d):c.put(b,a.use())};d.displayName="fallbackFromIncorrectStorageValue",c?c.get(b)?a.use(c.get(b)).catch(d):d():angular.isString(a.preferredLanguage())&&a.use(a.preferredLanguage())}function b(){"use strict";var a,b,c,d=null,e=!1,f=!1;c={sanitize:function(a,b){return"text"===b&&(a=h(a)),a},escape:function(a,b){return"text"===b&&(a=g(a)),a},sanitizeParameters:function(a,b){return"params"===b&&(a=j(a,h)),a},escapeParameters:function(a,b){return"params"===b&&(a=j(a,g)),a},sce:function(a,b,c){return"text"===b?a=i(a):"params"===b&&"filter"!==c&&(a=j(a,g)),a},sceParameters:function(a,b){return"params"===b&&(a=j(a,i)),a}},c.escaped=c.escapeParameters,this.addStrategy=function(a,b){return c[a]=b,this},this.removeStrategy=function(a){return delete c[a],this},this.useStrategy=function(a){return e=!0,d=a,this},this.$get=["$injector","$log",function(g,h){var i={},j=function(a,b,d,e){return angular.forEach(e,function(e){if(angular.isFunction(e))a=e(a,b,d);else if(angular.isFunction(c[e]))a=c[e](a,b,d);else{if(!angular.isString(c[e]))throw new Error("pascalprecht.translate.$translateSanitization: Unknown sanitization strategy: '"+e+"'");if(!i[c[e]])try{i[c[e]]=g.get(c[e])}catch(a){throw i[c[e]]=function(){},new Error("pascalprecht.translate.$translateSanitization: Unknown sanitization strategy: '"+e+"'")}a=i[c[e]](a,b,d)}}),a},k=function(){e||f||(h.warn("pascalprecht.translate.$translateSanitization: No sanitization strategy has been configured. This can have serious security implications. See http://angular-translate.github.io/docs/#/guide/19_security for details."),f=!0)};return g.has("$sanitize")&&(a=g.get("$sanitize")),g.has("$sce")&&(b=g.get("$sce")),{useStrategy:function(a){return function(b){a.useStrategy(b)}}(this),sanitize:function(a,b,c,e){if(d||k(),c||null===c||(c=d),!c)return a;e||(e="service");var f=angular.isArray(c)?c:[c];return j(a,b,e,f)}}}];var g=function(a){var b=angular.element("<div></div>");return b.text(a),b.html()},h=function(b){if(!a)throw new Error("pascalprecht.translate.$translateSanitization: Error cannot find $sanitize service. Either include the ngSanitize module (https://docs.angularjs.org/api/ngSanitize) or use a sanitization strategy which does not depend on $sanitize, such as 'escape'.");return a(b)},i=function(a){if(!b)throw new Error("pascalprecht.translate.$translateSanitization: Error cannot find $sce service.");return b.trustAsHtml(a)},j=function(a,b,c){if(angular.isDate(a))return a;if(angular.isObject(a)){var d=angular.isArray(a)?[]:{};if(c){if(c.indexOf(a)>-1)throw new Error("pascalprecht.translate.$translateSanitization: Error cannot interpolate parameter due recursive object")}else c=[];return c.push(a),angular.forEach(a,function(a,e){angular.isFunction(a)||(d[e]=j(a,b,c))}),c.splice(-1,1),d}return angular.isNumber(a)?a:b(a)}}function c(a,b,c,d){"use strict";var e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u={},v=[],w=a,x=[],y="translate-cloak",z=!1,A=!1,B=".",C=!1,D=!1,E=0,F=!0,G="default",H={default:function(a){return(a||"").split("-").join("_")},java:function(a){var b=(a||"").split("-").join("_"),c=b.split("_");return c.length>1?c[0].toLowerCase()+"_"+c[1].toUpperCase():b},bcp47:function(a){var b=(a||"").split("_").join("-"),c=b.split("-");return c.length>1?c[0].toLowerCase()+"-"+c[1].toUpperCase():b},"iso639-1":function(a){var b=(a||"").split("_").join("-"),c=b.split("-");return c[0].toLowerCase()}},I="2.13.0",J=function(){if(angular.isFunction(d.getLocale))return d.getLocale();var a,c,e=b.$get().navigator,f=["language","browserLanguage","systemLanguage","userLanguage"];if(angular.isArray(e.languages))for(a=0;a<e.languages.length;a++)if(c=e.languages[a],c&&c.length)return c;for(a=0;a<f.length;a++)if(c=e[f[a]],c&&c.length)return c;return null};J.displayName="angular-translate/service: getFirstBrowserLanguage";var K=function(){var a=J()||"";return H[G]&&(a=H[G](a)),a};K.displayName="angular-translate/service: getLocale";var L=function(a,b){for(var c=0,d=a.length;c<d;c++)if(a[c]===b)return c;return-1},M=function(){return this.toString().replace(/^\s+|\s+$/g,"")},N=function(a){if(a){for(var b=[],c=angular.lowercase(a),d=0,e=v.length;d<e;d++)b.push(angular.lowercase(v[d]));if(L(b,c)>-1)return a;if(f){var g;for(var h in f)if(f.hasOwnProperty(h)){var i=!1,j=Object.prototype.hasOwnProperty.call(f,h)&&angular.lowercase(h)===angular.lowercase(a);if("*"===h.slice(-1)&&(i=h.slice(0,-1)===a.slice(0,h.length-1)),(j||i)&&(g=f[h],L(b,angular.lowercase(g))>-1))return g}}var k=a.split("_");return k.length>1&&L(b,angular.lowercase(k[0]))>-1?k[0]:void 0}},O=function(a,b){if(!a&&!b)return u;if(a&&!b){if(angular.isString(a))return u[a]}else angular.isObject(u[a])||(u[a]={}),angular.extend(u[a],P(b));return this};this.translations=O,this.cloakClassName=function(a){return a?(y=a,this):y},this.nestedObjectDelimeter=function(a){return a?(B=a,this):B};var P=function(a,b,c,d){var e,f,g,h;b||(b=[]),c||(c={});for(e in a)Object.prototype.hasOwnProperty.call(a,e)&&(h=a[e],angular.isObject(h)?P(h,b.concat(e),c,e):(f=b.length?""+b.join(B)+B+e:e,b.length&&e===d&&(g=""+b.join(B),c[g]="@:"+f),c[f]=h));return c};P.displayName="flatObject",this.addInterpolation=function(a){return x.push(a),this},this.useMessageFormatInterpolation=function(){return this.useInterpolation("$translateMessageFormatInterpolation")},this.useInterpolation=function(a){return n=a,this},this.useSanitizeValueStrategy=function(a){return c.useStrategy(a),this},this.preferredLanguage=function(a){return a?(Q(a),this):e};var Q=function(a){return a&&(e=a),e};this.translationNotFoundIndicator=function(a){return this.translationNotFoundIndicatorLeft(a),this.translationNotFoundIndicatorRight(a),this},this.translationNotFoundIndicatorLeft=function(a){return a?(q=a,this):q},this.translationNotFoundIndicatorRight=function(a){return a?(r=a,this):r},this.fallbackLanguage=function(a){return R(a),this};var R=function(a){return a?(angular.isString(a)?(h=!0,g=[a]):angular.isArray(a)&&(h=!1,g=a),angular.isString(e)&&L(g,e)<0&&g.push(e),this):h?g[0]:g};this.use=function(a){if(a){if(!u[a]&&!o)throw new Error("$translateProvider couldn't find translationTable for langKey: '"+a+"'");return i=a,this}return i},this.resolveClientLocale=function(){return K()};var S=function(a){return a?(w=a,this):l?l+w:w};this.storageKey=S,this.useUrlLoader=function(a,b){return this.useLoader("$translateUrlLoader",angular.extend({url:a},b))},this.useStaticFilesLoader=function(a){return this.useLoader("$translateStaticFilesLoader",a)},this.useLoader=function(a,b){return o=a,p=b||{},this},this.useLocalStorage=function(){return this.useStorage("$translateLocalStorage")},this.useCookieStorage=function(){return this.useStorage("$translateCookieStorage")},this.useStorage=function(a){return k=a,this},this.storagePrefix=function(a){return a?(l=a,this):a},this.useMissingTranslationHandlerLog=function(){return this.useMissingTranslationHandler("$translateMissingTranslationHandlerLog")},this.useMissingTranslationHandler=function(a){return m=a,this},this.usePostCompiling=function(a){return z=!!a,this},this.forceAsyncReload=function(a){return A=!!a,this},this.uniformLanguageTag=function(a){return a?angular.isString(a)&&(a={standard:a}):a={},G=a.standard,this},this.determinePreferredLanguage=function(a){var b=a&&angular.isFunction(a)?a():K();return e=v.length?N(b)||b:b,this},this.registerAvailableLanguageKeys=function(a,b){return a?(v=a,b&&(f=b),this):v},this.useLoaderCache=function(a){return a===!1?s=void 0:a===!0?s=!0:"undefined"==typeof a?s="$translationCache":a&&(s=a),this},this.directivePriority=function(a){return void 0===a?E:(E=a,this)},this.statefulFilter=function(a){return void 0===a?F:(F=a,this)},this.postProcess=function(a){return t=a?a:void 0,this},this.keepContent=function(a){return D=!!a,this},this.$get=["$log","$injector","$rootScope","$q",function(a,b,c,d){var f,l,G,H=b.get(n||"$translateDefaultInterpolation"),J=!1,T={},U={},V=function(a,b,c,h,j){!i&&e&&(i=e);var m=j&&j!==i?N(j)||j:i;if(j&&ka(j),angular.isArray(a)){var n=function(a){for(var e={},f=[],g=function(a){var f=d.defer(),g=function(b){e[a]=b,f.resolve([a,b])};return V(a,b,c,h,j).then(g,g),f.promise},i=0,k=a.length;i<k;i++)f.push(g(a[i]));return d.all(f).then(function(){return e})};return n(a)}var o=d.defer();a&&(a=M.apply(a));var p=function(){var a=e?U[e]:U[m];if(l=0,k&&!a){var b=f.get(w);if(a=U[b],g&&g.length){var c=L(g,b);l=0===c?1:0,L(g,e)<0&&g.push(e)}}return a}();if(p){var q=function(){j||(m=i),ga(a,b,c,h,m).then(o.resolve,o.reject)};q.displayName="promiseResolved",p.finally(q)}else ga(a,b,c,h,m).then(o.resolve,o.reject);return o.promise},W=function(a){return q&&(a=[q,a].join(" ")),r&&(a=[a,r].join(" ")),a},X=function(a){i=a,k&&f.put(V.storageKey(),i),c.$emit("$translateChangeSuccess",{language:a}),H.setLocale(i);var b=function(a,b){T[b].setLocale(i)};b.displayName="eachInterpolatorLocaleSetter",angular.forEach(T,b),c.$emit("$translateChangeEnd",{language:a})},Y=function(a){if(!a)throw"No language key specified for loading.";var e=d.defer();c.$emit("$translateLoadingStart",{language:a}),J=!0;var f=s;"string"==typeof f&&(f=b.get(f));var g=angular.extend({},p,{key:a,$http:angular.extend({},{cache:f},p.$http)}),h=function(b){var d={};c.$emit("$translateLoadingSuccess",{language:a}),angular.isArray(b)?angular.forEach(b,function(a){angular.extend(d,P(a))}):angular.extend(d,P(b)),J=!1,e.resolve({key:a,table:d}),c.$emit("$translateLoadingEnd",{language:a})};h.displayName="onLoaderSuccess";var i=function(a){c.$emit("$translateLoadingError",{language:a}),e.reject(a),c.$emit("$translateLoadingEnd",{language:a})};return i.displayName="onLoaderError",b.get(o)(g).then(h,i),e.promise};if(k&&(f=b.get(k),!f.get||!f.put))throw new Error("Couldn't use storage '"+k+"', missing get() or put() method!");if(x.length){var Z=function(a){var c=b.get(a);c.setLocale(e||i),T[c.getInterpolationIdentifier()]=c};Z.displayName="interpolationFactoryAdder",angular.forEach(x,Z)}var $=function(a){var b=d.defer();if(Object.prototype.hasOwnProperty.call(u,a))b.resolve(u[a]);else if(U[a]){var c=function(a){O(a.key,a.table),b.resolve(a.table)};c.displayName="translationTableResolver",U[a].then(c,b.reject)}else b.reject();return b.promise},_=function(a,b,c,e){var f=d.defer(),g=function(d){if(Object.prototype.hasOwnProperty.call(d,b)){e.setLocale(a);var g=d[b];if("@:"===g.substr(0,2))_(a,g.substr(2),c,e).then(f.resolve,f.reject);else{var h=e.interpolate(d[b],c,"service");h=ja(b,d[b],h,c,a),f.resolve(h)}e.setLocale(i)}else f.reject()};return g.displayName="fallbackTranslationResolver",$(a).then(g,f.reject),f.promise},aa=function(a,b,c,d,e){var f,g=u[a];if(g&&Object.prototype.hasOwnProperty.call(g,b)){if(d.setLocale(a),f=d.interpolate(g[b],c,"filter",e),f=ja(b,g[b],f,c,a,e),!angular.isString(f)&&angular.isFunction(f.$$unwrapTrustedValue)){var h=f.$$unwrapTrustedValue();if("@:"===h.substr(0,2))return aa(a,h.substr(2),c,d,e)}else if("@:"===f.substr(0,2))return aa(a,f.substr(2),c,d,e);d.setLocale(i)}return f},ba=function(a,c,d,e){return m?b.get(m)(a,i,c,d,e):a},ca=function(a,b,c,e,f){var h=d.defer();if(a<g.length){var i=g[a];_(i,b,c,e).then(function(a){h.resolve(a)},function(){return ca(a+1,b,c,e,f).then(h.resolve,h.reject)})}else if(f)h.resolve(f);else{var j=ba(b,c,f);m&&j?h.resolve(j):h.reject(W(b))}return h.promise},da=function(a,b,c,d,e){var f;if(a<g.length){var h=g[a];f=aa(h,b,c,d,e),f||""===f||(f=da(a+1,b,c,d))}return f},ea=function(a,b,c,d){return ca(G>0?G:l,a,b,c,d)},fa=function(a,b,c,d){return da(G>0?G:l,a,b,c,d)},ga=function(a,b,c,e,f){var h=d.defer(),i=f?u[f]:u,j=c?T[c]:H;if(i&&Object.prototype.hasOwnProperty.call(i,a)){var k=i[a];if("@:"===k.substr(0,2))V(k.substr(2),b,c,e,f).then(h.resolve,h.reject);else{var l=j.interpolate(k,b,"service");l=ja(a,k,l,b,f),h.resolve(l)}}else{var n;m&&!J&&(n=ba(a,b,e)),f&&g&&g.length?ea(a,b,j,e).then(function(a){h.resolve(a)},function(a){h.reject(W(a))}):m&&!J&&n?e?h.resolve(e):h.resolve(n):e?h.resolve(e):h.reject(W(a))}return h.promise},ha=function(a,b,c,d,e){var f,h=d?u[d]:u,i=H;if(T&&Object.prototype.hasOwnProperty.call(T,c)&&(i=T[c]),h&&Object.prototype.hasOwnProperty.call(h,a)){var j=h[a];"@:"===j.substr(0,2)?f=ha(j.substr(2),b,c,d,e):(f=i.interpolate(j,b,"filter",e),f=ja(a,j,f,b,d,e))}else{var k;m&&!J&&(k=ba(a,b,e)),d&&g&&g.length?(l=0,f=fa(a,b,i,e)):f=m&&!J&&k?k:W(a)}return f},ia=function(a){j===a&&(j=void 0),U[a]=void 0},ja=function(a,c,d,e,f,g){var h=t;return h&&("string"==typeof h&&(h=b.get(h)),h)?h(a,c,d,e,f,g):d},ka=function(a){u[a]||!o||U[a]||(U[a]=Y(a).then(function(a){return O(a.key,a.table),a}))};V.preferredLanguage=function(a){return a&&Q(a),e},V.cloakClassName=function(){return y},V.nestedObjectDelimeter=function(){return B},V.fallbackLanguage=function(a){if(void 0!==a&&null!==a){if(R(a),o&&g&&g.length)for(var b=0,c=g.length;b<c;b++)U[g[b]]||(U[g[b]]=Y(g[b]));V.use(V.use())}return h?g[0]:g},V.useFallbackLanguage=function(a){if(void 0!==a&&null!==a)if(a){var b=L(g,a);b>-1&&(G=b)}else G=0},V.proposedLanguage=function(){return j},V.storage=function(){return f},V.negotiateLocale=N,V.use=function(a){if(!a)return i;var b=d.defer();c.$emit("$translateChangeStart",{language:a});var e=N(a);return v.length>0&&!e?d.reject(a):(e&&(a=e),j=a,!A&&u[a]||!o||U[a]?U[a]?U[a].then(function(a){return j===a.key&&X(a.key),b.resolve(a.key),a},function(a){return!i&&g&&g.length>0&&g[0]!==a?V.use(g[0]).then(b.resolve,b.reject):b.reject(a)}):(b.resolve(a),X(a)):(U[a]=Y(a).then(function(c){return O(c.key,c.table),b.resolve(c.key),j===a&&X(c.key),c},function(a){return c.$emit("$translateChangeError",{language:a}),b.reject(a),c.$emit("$translateChangeEnd",{language:a}),d.reject(a)}),U[a].finally(function(){ia(a)})),b.promise)},V.resolveClientLocale=function(){return K()},V.storageKey=function(){return S()},V.isPostCompilingEnabled=function(){return z},V.isForceAsyncReloadEnabled=function(){return A},V.isKeepContent=function(){return D},V.refresh=function(a){function b(){f.resolve(),c.$emit("$translateRefreshEnd",{language:a})}function e(){f.reject(),c.$emit("$translateRefreshEnd",{language:a})}if(!o)throw new Error("Couldn't refresh translation table, no loader registered!");var f=d.defer();if(c.$emit("$translateRefreshStart",{language:a}),a)if(u[a]){var h=function(c){return O(c.key,c.table),a===i&&X(i),b(),c};h.displayName="refreshPostProcessor",Y(a).then(h,e)}else e();else{var j=[],k={};if(g&&g.length)for(var l=0,m=g.length;l<m;l++)j.push(Y(g[l])),k[g[l]]=!0;i&&!k[i]&&j.push(Y(i));var n=function(a){u={},angular.forEach(a,function(a){O(a.key,a.table)}),i&&X(i),b()};n.displayName="refreshPostProcessor",d.all(j).then(n,e)}return f.promise},V.instant=function(a,b,c,d,f){var h=d&&d!==i?N(d)||d:i;if(null===a||angular.isUndefined(a))return a;if(d&&ka(d),angular.isArray(a)){for(var j={},k=0,l=a.length;k<l;k++)j[a[k]]=V.instant(a[k],b,c,d,f);return j}if(angular.isString(a)&&a.length<1)return a;a&&(a=M.apply(a));var n,o=[];e&&o.push(e),h&&o.push(h),g&&g.length&&(o=o.concat(g));for(var p=0,s=o.length;p<s;p++){var t=o[p];if(u[t]&&"undefined"!=typeof u[t][a]&&(n=ha(a,b,c,h,f)),"undefined"!=typeof n)break}if(!n&&""!==n)if(q||r)n=W(a);else{n=H.interpolate(a,b,"filter",f);var v;m&&!J&&(v=ba(a,b,f)),m&&!J&&v&&(n=v)}return n},V.versionInfo=function(){return I},V.loaderCache=function(){return s},V.directivePriority=function(){return E},V.statefulFilter=function(){return F},V.isReady=function(){return C};var la=d.defer();la.promise.then(function(){C=!0}),V.onReady=function(a){var b=d.defer();return angular.isFunction(a)&&b.promise.then(a),C?b.resolve():la.promise.then(b.resolve),b.promise},V.getAvailableLanguageKeys=function(){return v.length>0?v:null},V.getTranslationTable=function(a){return a=a||V.use(),a&&u[a]?angular.copy(u[a]):null};var ma=c.$on("$translateReady",function(){la.resolve(),ma(),ma=null}),na=c.$on("$translateChangeEnd",function(){la.resolve(),na(),na=null});if(o){if(angular.equals(u,{})&&V.use()&&V.use(V.use()),g&&g.length)for(var oa=function(a){return O(a.key,a.table),c.$emit("$translateChangeEnd",{language:a.key}),a},pa=0,qa=g.length;pa<qa;pa++){var ra=g[pa];!A&&u[ra]||(U[ra]=Y(ra).then(oa))}}else c.$emit("$translateReady",{language:V.use()});return V}]}function d(a,b){"use strict";var c,d={},e="default";return d.setLocale=function(a){c=a},d.getInterpolationIdentifier=function(){return e},d.useSanitizeValueStrategy=function(a){return b.useStrategy(a),this},d.interpolate=function(c,d,e,f){d=d||{},d=b.sanitize(d,"params",f,e);var g;return angular.isNumber(c)?g=""+c:angular.isString(c)?(g=a(c)(d),g=b.sanitize(g,"text",f,e)):g="",g},d}function e(a,b,c,d,e){"use strict";var g=function(){return this.toString().replace(/^\s+|\s+$/g,"")};return{restrict:"AE",scope:!0,priority:a.directivePriority(),compile:function(h,i){var j=i.translateValues?i.translateValues:void 0,k=i.translateInterpolation?i.translateInterpolation:void 0,l=h[0].outerHTML.match(/translate-value-+/i),m="^(.*)("+b.startSymbol()+".*"+b.endSymbol()+")(.*)",n="^(.*)"+b.startSymbol()+"(.*)"+b.endSymbol()+"(.*)";return function(h,o,p){h.interpolateParams={},h.preText="",h.postText="",h.translateNamespace=f(h);var q={},r=function(a,b,c){if(b.translateValues&&angular.extend(a,d(b.translateValues)(h.$parent)),l)for(var e in c)if(Object.prototype.hasOwnProperty.call(b,e)&&"translateValue"===e.substr(0,14)&&"translateValues"!==e){var f=angular.lowercase(e.substr(14,1))+e.substr(15);a[f]=c[e]}},s=function(a){if(angular.isFunction(s._unwatchOld)&&(s._unwatchOld(),s._unwatchOld=void 0),angular.equals(a,"")||!angular.isDefined(a)){var c=g.apply(o.text()),d=c.match(m);if(angular.isArray(d)){h.preText=d[1],h.postText=d[3],q.translate=b(d[2])(h.$parent);var e=c.match(n);angular.isArray(e)&&e[2]&&e[2].length&&(s._unwatchOld=h.$watch(e[2],function(a){q.translate=a,y()}))}else q.translate=c?c:void 0}else q.translate=a;y()},t=function(a){p.$observe(a,function(b){q[a]=b,y()})};r(h.interpolateParams,p,i);var u=!0;p.$observe("translate",function(a){"undefined"==typeof a?s(""):""===a&&u||(q.translate=a,y()),u=!1});for(var v in p)p.hasOwnProperty(v)&&"translateAttr"===v.substr(0,13)&&v.length>13&&t(v);if(p.$observe("translateDefault",function(a){h.defaultText=a,y()}),j&&p.$observe("translateValues",function(a){a&&h.$parent.$watch(function(){angular.extend(h.interpolateParams,d(a)(h.$parent))})}),l){var w=function(a){p.$observe(a,function(b){var c=angular.lowercase(a.substr(14,1))+a.substr(15);h.interpolateParams[c]=b})};for(var x in p)Object.prototype.hasOwnProperty.call(p,x)&&"translateValue"===x.substr(0,14)&&"translateValues"!==x&&w(x)}var y=function(){for(var a in q)q.hasOwnProperty(a)&&void 0!==q[a]&&z(a,q[a],h,h.interpolateParams,h.defaultText,h.translateNamespace)},z=function(b,c,d,e,f,g){c?(g&&"."===c.charAt(0)&&(c=g+c),a(c,e,k,f,d.translateLanguage).then(function(a){A(a,d,!0,b)},function(a){A(a,d,!1,b)})):A(c,d,!1,b)},A=function(b,d,e,f){if(e||"undefined"!=typeof d.defaultText&&(b=d.defaultText),"translate"===f){(e||!e&&!a.isKeepContent()&&"undefined"==typeof p.translateKeepContent)&&o.empty().append(d.preText+b+d.postText);var g=a.isPostCompilingEnabled(),h="undefined"!=typeof i.translateCompile,j=h&&"false"!==i.translateCompile;(g&&!h||j)&&c(o.contents())(d)}else{var k=p.$attr[f];"data-"===k.substr(0,5)&&(k=k.substr(5)),k=k.substr(15),o.attr(k,b)}};(j||l||p.translateDefault)&&h.$watch("interpolateParams",y,!0),h.$on("translateLanguageChanged",y);var B=e.$on("$translateChangeSuccess",y);o.text().length?s(p.translate?p.translate:""):p.translate&&s(p.translate),y(),h.$on("$destroy",B)}}}}function f(a){"use strict";return a.translateNamespace?a.translateNamespace:a.$parent?f(a.$parent):void 0}function g(a,b){"use strict";return{restrict:"A",priority:a.directivePriority(),link:function(c,d,e){var f,g,i={},j=function(){angular.forEach(f,function(b,f){b&&(i[f]=!0,c.translateNamespace&&"."===b.charAt(0)&&(b=c.translateNamespace+b),a(b,g,e.translateInterpolation,void 0,c.translateLanguage).then(function(a){d.attr(f,a)},function(a){d.attr(f,a)}))}),angular.forEach(i,function(a,b){f[b]||(d.removeAttr(b),delete i[b])})};h(c,e.translateAttr,function(a){f=a},j),h(c,e.translateValues,function(a){g=a},j),e.translateValues&&c.$watch(e.translateValues,j,!0),c.$on("translateLanguageChanged",j);var k=b.$on("$translateChangeSuccess",j);j(),c.$on("$destroy",k)}}}function h(a,b,c,d){"use strict";b&&("::"===b.substr(0,2)?b=b.substr(2):a.$watch(b,function(a){c(a),d()},!0),c(a.$eval(b)))}function i(a,b){"use strict";return{compile:function(c){var d=function(){c.addClass(a.cloakClassName())},e=function(){c.removeClass(a.cloakClassName())};return a.onReady(function(){e()}),d(),function(c,f,g){g.translateCloak&&g.translateCloak.length&&(g.$observe("translateCloak",function(b){a(b).then(e,d)}),b.$on("$translateChangeSuccess",function(){a(g.translateCloak).then(e,d)}))}}}}function j(){"use strict";return{restrict:"A",scope:!0,compile:function(){return{pre:function(a,b,c){a.translateNamespace=f(a),a.translateNamespace&&"."===c.translateNamespace.charAt(0)?a.translateNamespace+=c.translateNamespace:a.translateNamespace=c.translateNamespace}}}}}function f(a){"use strict";return a.translateNamespace?a.translateNamespace:a.$parent?f(a.$parent):void 0}function k(){"use strict";return{restrict:"A",scope:!0,compile:function(){return function(a,b,c){c.$observe("translateLanguage",function(b){a.translateLanguage=b}),a.$watch("translateLanguage",function(){a.$broadcast("translateLanguageChanged")})}}}}function l(a,b){"use strict";var c=function(c,d,e,f){return angular.isObject(d)||(d=a(d)(this)),b.instant(c,d,e,f)};return b.statefulFilter()&&(c.$stateful=!0),c}function m(a){"use strict";return a("translations")}return a.$inject=["$translate"],c.$inject=["$STORAGE_KEY","$windowProvider","$translateSanitizationProvider","pascalprechtTranslateOverrider"],d.$inject=["$interpolate","$translateSanitization"],e.$inject=["$translate","$interpolate","$compile","$parse","$rootScope"],g.$inject=["$translate","$rootScope"],i.$inject=["$translate","$rootScope"],l.$inject=["$parse","$translate"],m.$inject=["$cacheFactory"],angular.module("pascalprecht.translate",["ng"]).run(a),a.displayName="runTranslate",angular.module("pascalprecht.translate").provider("$translateSanitization",b),angular.module("pascalprecht.translate").constant("pascalprechtTranslateOverrider",{}).provider("$translate",c),c.displayName="displayName",angular.module("pascalprecht.translate").factory("$translateDefaultInterpolation",d),d.displayName="$translateDefaultInterpolation",angular.module("pascalprecht.translate").constant("$STORAGE_KEY","NG_TRANSLATE_LANG_KEY"),angular.module("pascalprecht.translate").directive("translate",e),e.displayName="translateDirective",angular.module("pascalprecht.translate").directive("translateAttr",g),g.displayName="translateAttrDirective",angular.module("pascalprecht.translate").directive("translateCloak",i),i.displayName="translateCloakDirective",angular.module("pascalprecht.translate").directive("translateNamespace",j),j.displayName="translateNamespaceDirective",angular.module("pascalprecht.translate").directive("translateLanguage",k),k.displayName="translateLanguageDirective",angular.module("pascalprecht.translate").filter("translate",l),l.displayName="translateFilterFactory",angular.module("pascalprecht.translate").factory("$translationCache",m),m.displayName="$translationCache","pascalprecht.translate"});
/*
 *
 * https://github.com/fatlinesofcode/ngDraggable
 */
angular.module("ngDraggable", [])
    .service('ngDraggable', [function() {


        var scope = this;
        scope.inputEvent = function(event) {
            if (angular.isDefined(event.touches)) {
                return event.touches[0];
            }
            //Checking both is not redundent. If only check if touches isDefined, angularjs isDefnied will return error and stop the remaining scripty if event.originalEvent is not defined.
            else if (angular.isDefined(event.originalEvent) && angular.isDefined(event.originalEvent.touches)) {
                return event.originalEvent.touches[0];
            }
            return event;
        };

    }])
    .directive('ngDrag', ['$rootScope', '$parse', '$document', '$window', 'ngDraggable', function ($rootScope, $parse, $document, $window, ngDraggable) {
        return {
            restrict: 'A',
            link: function (scope, element, attrs) {
                scope.value = attrs.ngDrag;
                var offset,_centerAnchor=false,_mx,_my,_tx,_ty,_mrx,_mry;
                var _hasTouch = ('ontouchstart' in window) || window.DocumentTouch && document instanceof DocumentTouch;
                var _pressEvents = 'touchstart mousedown';
                var _moveEvents = 'touchmove mousemove';
                var _releaseEvents = 'touchend mouseup';
                var _dragHandle;

                // to identify the element in order to prevent getting superflous events when a single element has both drag and drop directives on it.
                var _myid = scope.$id;
                var _data = null;

                var _dragOffset = null;

                var _dragEnabled = false;

                var _pressTimer = null;

                var onDragStartCallback = $parse(attrs.ngDragStart) || null;
                var onDragStopCallback = $parse(attrs.ngDragStop) || null;
                var onDragSuccessCallback = $parse(attrs.ngDragSuccess) || null;
                var allowTransform = angular.isDefined(attrs.allowTransform) ? scope.$eval(attrs.allowTransform) : true;

                var getDragData = $parse(attrs.ngDragData);

                // deregistration function for mouse move events in $rootScope triggered by jqLite trigger handler
                var _deregisterRootMoveListener = angular.noop;

                var initialize = function () {
                    element.attr('draggable', 'false'); // prevent native drag
                    // check to see if drag handle(s) was specified
                    // if querySelectorAll is available, we use this instead of find
                    // as JQLite find is limited to tagnames
                    if (element[0].querySelectorAll) {
                        var dragHandles = angular.element(element[0].querySelectorAll('[ng-drag-handle]'));
                    } else {
                        var dragHandles = element.find('[ng-drag-handle]');
                    }
                    if (dragHandles.length) {
                        _dragHandle = dragHandles;
                    }
                    toggleListeners(true);
                };

                var toggleListeners = function (enable) {
                    if (!enable)return;
                    // add listeners.

                    scope.$on('$destroy', onDestroy);
                    scope.$watch(attrs.ngDrag, onEnableChange);
                    scope.$watch(attrs.ngCenterAnchor, onCenterAnchor);
                    // wire up touch events
                    if (_dragHandle) {
                        // handle(s) specified, use those to initiate drag
                        _dragHandle.on(_pressEvents, onpress);
                    } else {
                        // no handle(s) specified, use the element as the handle
                        element.on(_pressEvents, onpress);
                    }
                    if(! _hasTouch && element[0].nodeName.toLowerCase() == "img"){
                        element.on('mousedown', function(){ return false;}); // prevent native drag for images
                    }
                };
                var onDestroy = function (enable) {
                    toggleListeners(false);
                };
                var onEnableChange = function (newVal, oldVal) {
                    _dragEnabled = (newVal);
                };
                var onCenterAnchor = function (newVal, oldVal) {
                    if(angular.isDefined(newVal))
                        _centerAnchor = (newVal || 'true');
                };

                var isClickableElement = function (evt) {
                    return (
                        angular.isDefined(angular.element(evt.target).attr("ng-cancel-drag"))
                    );
                };
                /*
                 * When the element is clicked start the drag behaviour
                 * On touch devices as a small delay so as not to prevent native window scrolling
                 */
                var onpress = function(evt) {
                    if(! _dragEnabled)return;

                    if (isClickableElement(evt)) {
                        return;
                    }

                    if (evt.type == "mousedown" && evt.button != 0) {
                        // Do not start dragging on right-click
                        return;
                    }

                    if(_hasTouch){
                        cancelPress();
                        _pressTimer = setTimeout(function(){
                            cancelPress();
                            onlongpress(evt);
                        },100);
                        $document.on(_moveEvents, cancelPress);
                        $document.on(_releaseEvents, cancelPress);
                    }else{
                        onlongpress(evt);
                    }

                };

                var cancelPress = function() {
                    clearTimeout(_pressTimer);
                    $document.off(_moveEvents, cancelPress);
                    $document.off(_releaseEvents, cancelPress);
                };

                var onlongpress = function(evt) {
                    if(! _dragEnabled)return;
                    evt.preventDefault();

                    offset = element[0].getBoundingClientRect();
                    if(allowTransform)
                        _dragOffset = offset;
                    else{
                        _dragOffset = {left:document.body.scrollLeft, top:document.body.scrollTop};
                    }


                    element.centerX = element[0].offsetWidth / 2;
                    element.centerY = element[0].offsetHeight / 2;

                    _mx = ngDraggable.inputEvent(evt).pageX;//ngDraggable.getEventProp(evt, 'pageX');
                    _my = ngDraggable.inputEvent(evt).pageY;//ngDraggable.getEventProp(evt, 'pageY');
                    _mrx = _mx - offset.left;
                    _mry = _my - offset.top;
                    if (_centerAnchor) {
                        _tx = _mx - element.centerX - $window.pageXOffset;
                        _ty = _my - element.centerY - $window.pageYOffset;
                    } else {
                        _tx = _mx - _mrx - $window.pageXOffset;
                        _ty = _my - _mry - $window.pageYOffset;
                    }

                    $document.on(_moveEvents, onmove);
                    $document.on(_releaseEvents, onrelease);
                    // This event is used to receive manually triggered mouse move events
                    // jqLite unfortunately only supports triggerHandler(...)
                    // See http://api.jquery.com/triggerHandler/
                    // _deregisterRootMoveListener = $rootScope.$on('draggable:_triggerHandlerMove', onmove);
                    _deregisterRootMoveListener = $rootScope.$on('draggable:_triggerHandlerMove', function(event, origEvent) {
                        onmove(origEvent);
                    });
                };

                var onmove = function (evt) {
                    if (!_dragEnabled)return;
                    evt.preventDefault();

                    if (!element.hasClass('dragging')) {
                        _data = getDragData(scope);
                        element.addClass('dragging');
                        $rootScope.$broadcast('draggable:start', {x:_mx, y:_my, tx:_tx, ty:_ty, event:evt, element:element, data:_data});

                        if (onDragStartCallback ){
                            scope.$apply(function () {
                                onDragStartCallback(scope, {$data: _data, $event: evt});
                            });
                        }
                    }

                    _mx = ngDraggable.inputEvent(evt).pageX;//ngDraggable.getEventProp(evt, 'pageX');
                    _my = ngDraggable.inputEvent(evt).pageY;//ngDraggable.getEventProp(evt, 'pageY');

                    if (_centerAnchor) {
                        _tx = _mx - element.centerX - _dragOffset.left;
                        _ty = _my - element.centerY - _dragOffset.top;
                    } else {
                        _tx = _mx - _mrx - _dragOffset.left;
                        _ty = _my - _mry - _dragOffset.top;
                    }

                    moveElement(_tx, _ty);

                    $rootScope.$broadcast('draggable:move', { x: _mx, y: _my, tx: _tx, ty: _ty, event: evt, element: element, data: _data, uid: _myid, dragOffset: _dragOffset });
                };

                var onrelease = function(evt) {
                    if (!_dragEnabled)
                        return;
                    evt.preventDefault();
                    $rootScope.$broadcast('draggable:end', {x:_mx, y:_my, tx:_tx, ty:_ty, event:evt, element:element, data:_data, callback:onDragComplete, uid: _myid});
                    element.removeClass('dragging');
                    element.parent().find('.drag-enter').removeClass('drag-enter');
                    reset();
                    $document.off(_moveEvents, onmove);
                    $document.off(_releaseEvents, onrelease);

                    if (onDragStopCallback ){
                        scope.$apply(function () {
                            onDragStopCallback(scope, {$data: _data, $event: evt});
                        });
                    }

                    _deregisterRootMoveListener();
                };

                var onDragComplete = function(evt) {


                    if (!onDragSuccessCallback )return;

                    scope.$apply(function () {
                        onDragSuccessCallback(scope, {$data: _data, $event: evt});
                    });
                };

                var reset = function() {
                    if(allowTransform)
                        element.css({transform:'', 'z-index':'', '-webkit-transform':'', '-ms-transform':''});
                    else
                        element.css({'position':'',top:'',left:''});
                };

                var moveElement = function (x, y) {
                    if(allowTransform) {
                        element.css({
                            transform: 'matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, ' + x + ', ' + y + ', 0, 1)',
                            'z-index': 99999,
                            '-webkit-transform': 'matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, ' + x + ', ' + y + ', 0, 1)',
                            '-ms-transform': 'matrix(1, 0, 0, 1, ' + x + ', ' + y + ')'
                        });
                    }else{
                        element.css({'left':x+'px','top':y+'px', 'position':'fixed'});
                    }
                };
                initialize();
            }
        };
    }])

    .directive('ngDrop', ['$parse', '$timeout', '$window', '$document', 'ngDraggable', function ($parse, $timeout, $window, $document, ngDraggable) {
        return {
            restrict: 'A',
            link: function (scope, element, attrs) {
                scope.value = attrs.ngDrop;
                scope.isTouching = false;

                var _lastDropTouch=null;

                var _myid = scope.$id;

                var _dropEnabled=false;

                var onDropCallback = $parse(attrs.ngDropSuccess);// || function(){};

                var onDragStartCallback = $parse(attrs.ngDragStart);
                var onDragStopCallback = $parse(attrs.ngDragStop);
                var onDragMoveCallback = $parse(attrs.ngDragMove);

                var initialize = function () {
                    toggleListeners(true);
                };

                var toggleListeners = function (enable) {
                    // remove listeners

                    if (!enable)return;
                    // add listeners.
                    scope.$watch(attrs.ngDrop, onEnableChange);
                    scope.$on('$destroy', onDestroy);
                    scope.$on('draggable:start', onDragStart);
                    scope.$on('draggable:move', onDragMove);
                    scope.$on('draggable:end', onDragEnd);
                };

                var onDestroy = function (enable) {
                    toggleListeners(false);
                };
                var onEnableChange = function (newVal, oldVal) {
                    _dropEnabled=newVal;
                };
                var onDragStart = function(evt, obj) {
                    if(! _dropEnabled)return;
                    isTouching(obj.x,obj.y,obj.element);

                    if (attrs.ngDragStart) {
                        $timeout(function(){
                            onDragStartCallback(scope, {$data: obj.data, $event: obj});
                        });
                    }
                };
                var onDragMove = function(evt, obj) {
                    if(! _dropEnabled)return;
                    isTouching(obj.x,obj.y,obj.element);

                    if (attrs.ngDragMove) {
                        $timeout(function(){
                            onDragMoveCallback(scope, {$data: obj.data, $event: obj});
                        });
                    }
                };

                var onDragEnd = function (evt, obj) {

                    // don't listen to drop events if this is the element being dragged
                    // only update the styles and return
                    if (!_dropEnabled || _myid === obj.uid) {
                        updateDragStyles(false, obj.element);
                        return;
                    }
                    if (isTouching(obj.x, obj.y, obj.element)) {
                        // call the ngDraggable ngDragSuccess element callback
                        if(obj.callback){
                            obj.callback(obj);
                        }

                        if (attrs.ngDropSuccess) {
                            $timeout(function(){
                                onDropCallback(scope, {$data: obj.data, $event: obj, $target: scope.$eval(scope.value)});
                            });
                        }
                    }

                    if (attrs.ngDragStop) {
                        $timeout(function(){
                            onDragStopCallback(scope, {$data: obj.data, $event: obj});
                        });
                    }

                    updateDragStyles(false, obj.element);
                };

                var isTouching = function(mouseX, mouseY, dragElement) {
                    var touching= hitTest(mouseX, mouseY);
                    scope.isTouching = touching;
                    if(touching){
                        _lastDropTouch = element;
                    }
                    updateDragStyles(touching, dragElement);
                    return touching;
                };

                var updateDragStyles = function(touching, dragElement) {
                    if(touching){
                        element.addClass('drag-enter');
                        dragElement.addClass('drag-over');
                    }else if(_lastDropTouch == element){
                        _lastDropTouch=null;
                        element.removeClass('drag-enter');
                        dragElement.removeClass('drag-over');
                    }
                };

                var hitTest = function(x, y) {
                    var bounds = element[0].getBoundingClientRect();// ngDraggable.getPrivOffset(element);
                    x -= $document[0].body.scrollLeft + $document[0].documentElement.scrollLeft;
                    y -= $document[0].body.scrollTop + $document[0].documentElement.scrollTop;
                    return  x >= bounds.left
                        && x <= bounds.right
                        && y <= bounds.bottom
                        && y >= bounds.top;
                };

                initialize();
            }
        };
    }])
    .directive('ngDragClone', ['$parse', '$timeout', 'ngDraggable', function ($parse, $timeout, ngDraggable) {
        return {
            restrict: 'A',
            link: function (scope, element, attrs) {
                var img, _allowClone=true;
                var _dragOffset = null;
                scope.clonedData = {};
                var initialize = function () {

                    img = element.find('img');
                    element.attr('draggable', 'false');
                    img.attr('draggable', 'false');
                    reset();
                    toggleListeners(true);
                };


                var toggleListeners = function (enable) {
                    // remove listeners

                    if (!enable)return;
                    // add listeners.
                    scope.$on('draggable:start', onDragStart);
                    scope.$on('draggable:move', onDragMove);
                    scope.$on('draggable:end', onDragEnd);
                    preventContextMenu();

                };
                var preventContextMenu = function() {
                    //  element.off('mousedown touchstart touchmove touchend touchcancel', absorbEvent_);
                    img.off('mousedown touchstart touchmove touchend touchcancel', absorbEvent_);
                    //  element.on('mousedown touchstart touchmove touchend touchcancel', absorbEvent_);
                    img.on('mousedown touchstart touchmove touchend touchcancel', absorbEvent_);
                };
                var onDragStart = function(evt, obj, elm) {
                    _allowClone=true;
                    if(angular.isDefined(obj.data.allowClone)){
                        _allowClone=obj.data.allowClone;
                    }
                    if(_allowClone) {
                        scope.$apply(function () {
                            scope.clonedData = obj.data;
                        });
                        element.css('width', obj.element[0].offsetWidth);
                        element.css('height', obj.element[0].offsetHeight);

                        moveElement(obj.tx, obj.ty);
                    }

                };
                var onDragMove = function(evt, obj) {
                    if(_allowClone) {

                        _tx = obj.tx + obj.dragOffset.left;
                        _ty = obj.ty + obj.dragOffset.top;

                        moveElement(_tx, _ty);
                    }
                };
                var onDragEnd = function(evt, obj) {
                    //moveElement(obj.tx,obj.ty);
                    if(_allowClone) {
                        reset();
                    }
                };

                var reset = function() {
                    element.css({left:0,top:0, position:'fixed', 'z-index':-1, visibility:'hidden'});
                };
                var moveElement = function(x,y) {
                    element.css({
                        transform: 'matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, '+x+', '+y+', 0, 1)', 'z-index': 99999, 'visibility': 'visible',
                        '-webkit-transform': 'matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, '+x+', '+y+', 0, 1)',
                        '-ms-transform': 'matrix(1, 0, 0, 1, '+x+', '+y+')'
                        //,margin: '0'  don't monkey with the margin,
                    });
                };

                var absorbEvent_ = function (event) {
                    var e = event;//.originalEvent;
                    e.preventDefault && e.preventDefault();
                    e.stopPropagation && e.stopPropagation();
                    e.cancelBubble = true;
                    e.returnValue = false;
                    return false;
                };

                initialize();
            }
        };
    }])
    .directive('ngPreventDrag', ['$parse', '$timeout', function ($parse, $timeout) {
        return {
            restrict: 'A',
            link: function (scope, element, attrs) {
                var initialize = function () {

                    element.attr('draggable', 'false');
                    toggleListeners(true);
                };


                var toggleListeners = function (enable) {
                    // remove listeners

                    if (!enable)return;
                    // add listeners.
                    element.on('mousedown touchstart touchmove touchend touchcancel', absorbEvent_);
                };


                var absorbEvent_ = function (event) {
                    var e = event.originalEvent;
                    e.preventDefault && e.preventDefault();
                    e.stopPropagation && e.stopPropagation();
                    e.cancelBubble = true;
                    e.returnValue = false;
                    return false;
                };

                initialize();
            }
        };
    }])
    .directive('ngCancelDrag', [function () {
        return {
            restrict: 'A',
            link: function (scope, element, attrs) {
                element.find('*').attr('ng-cancel-drag', 'ng-cancel-drag');
            }
        };
    }])
    .directive('ngDragScroll', ['$window', '$interval', '$timeout', '$document', '$rootScope', function($window, $interval, $timeout, $document, $rootScope) {
        return {
            restrict: 'A',
            link: function(scope, element, attrs) {
                var intervalPromise = null;
                var lastMouseEvent = null;

                var config = {
                    verticalScroll: attrs.verticalScroll || true,
                    horizontalScroll: attrs.horizontalScroll || true,
                    activationDistance: attrs.activationDistance || 75,
                    scrollDistance: attrs.scrollDistance || 15
                };


                var reqAnimFrame = (function() {
                    return window.requestAnimationFrame ||
                        window.webkitRequestAnimationFrame ||
                        window.mozRequestAnimationFrame ||
                        window.oRequestAnimationFrame ||
                        window.msRequestAnimationFrame ||
                        function( /* function FrameRequestCallback */ callback, /* DOMElement Element */ element ) {
                            window.setTimeout(callback, 1000 / 60);
                        };
                })();

                var animationIsOn = false;
                var createInterval = function() {
                    animationIsOn = true;

                    function nextFrame(callback) {
                        var args = Array.prototype.slice.call(arguments);
                        if(animationIsOn) {
                            reqAnimFrame(function () {
                                $rootScope.$apply(function () {
                                    callback.apply(null, args);
                                    nextFrame(callback);
                                });
                            })
                        }
                    }

                    nextFrame(function() {
                        if (!lastMouseEvent) return;

                        var viewportWidth = Math.max(document.documentElement.clientWidth, window.innerWidth || 0);
                        var viewportHeight = Math.max(document.documentElement.clientHeight, window.innerHeight || 0);

                        var scrollX = 0;
                        var scrollY = 0;

                        if (config.horizontalScroll) {
                            // If horizontal scrolling is active.
                            if (lastMouseEvent.clientX < config.activationDistance) {
                                // If the mouse is on the left of the viewport within the activation distance.
                                scrollX = -config.scrollDistance;
                            }
                            else if (lastMouseEvent.clientX > viewportWidth - config.activationDistance) {
                                // If the mouse is on the right of the viewport within the activation distance.
                                scrollX = config.scrollDistance;
                            }
                        }

                        if (config.verticalScroll) {
                            // If vertical scrolling is active.
                            if (lastMouseEvent.clientY < config.activationDistance) {
                                // If the mouse is on the top of the viewport within the activation distance.
                                scrollY = -config.scrollDistance;
                            }
                            else if (lastMouseEvent.clientY > viewportHeight - config.activationDistance) {
                                // If the mouse is on the bottom of the viewport within the activation distance.
                                scrollY = config.scrollDistance;
                            }
                        }



                        if (scrollX !== 0 || scrollY !== 0) {
                            // Record the current scroll position.
                            var currentScrollLeft = ($window.pageXOffset || $document[0].documentElement.scrollLeft);
                            var currentScrollTop = ($window.pageYOffset || $document[0].documentElement.scrollTop);

                            // Remove the transformation from the element, scroll the window by the scroll distance
                            // record how far we scrolled, then reapply the element transformation.
                            var elementTransform = element.css('transform');
                            element.css('transform', 'initial');

                            $window.scrollBy(scrollX, scrollY);

                            var horizontalScrollAmount = ($window.pageXOffset || $document[0].documentElement.scrollLeft) - currentScrollLeft;
                            var verticalScrollAmount =  ($window.pageYOffset || $document[0].documentElement.scrollTop) - currentScrollTop;

                            element.css('transform', elementTransform);

                            lastMouseEvent.pageX += horizontalScrollAmount;
                            lastMouseEvent.pageY += verticalScrollAmount;

                            $rootScope.$emit('draggable:_triggerHandlerMove', lastMouseEvent);
                        }

                    });
                };

                var clearInterval = function() {
                    animationIsOn = false;
                };

                scope.$on('draggable:start', function(event, obj) {
                    // Ignore this event if it's not for this element.
                    if (obj.element[0] !== element[0]) return;

                    if (!animationIsOn) createInterval();
                });

                scope.$on('draggable:end', function(event, obj) {
                    // Ignore this event if it's not for this element.
                    if (obj.element[0] !== element[0]) return;

                    if (animationIsOn) clearInterval();
                });

                scope.$on('draggable:move', function(event, obj) {
                    // Ignore this event if it's not for this element.
                    if (obj.element[0] !== element[0]) return;

                    lastMouseEvent = obj.event;
                });
            }
        };
    }]);

/*
* angular-ui-bootstrap
* http://angular-ui.github.io/bootstrap/

* Version: 1.0.3 - 2016-01-11
* License: MIT
*/angular.module("ui.bootstrap",["ui.bootstrap.tpls","ui.bootstrap.modal","ui.bootstrap.stackedMap"]),angular.module("ui.bootstrap.tpls",["uib/template/modal/backdrop.html","uib/template/modal/window.html"]),angular.module("ui.bootstrap.modal",["ui.bootstrap.stackedMap"]).factory("$$multiMap",function(){return{createNew:function(){var e={};return{entries:function(){return Object.keys(e).map(function(n){return{key:n,value:e[n]}})},get:function(n){return e[n]},hasKey:function(n){return!!e[n]},keys:function(){return Object.keys(e)},put:function(n,t){e[n]||(e[n]=[]),e[n].push(t)},remove:function(n,t){var o=e[n];if(o){var a=o.indexOf(t);-1!==a&&o.splice(a,1),o.length||delete e[n]}}}}}}).provider("$uibResolve",function(){var e=this;this.resolver=null,this.setResolver=function(e){this.resolver=e},this.$get=["$injector","$q",function(n,t){var o=e.resolver?n.get(e.resolver):null;return{resolve:function(e,a,r,l){if(o)return o.resolve(e,a,r,l);var i=[];return angular.forEach(e,function(e){i.push(angular.isFunction(e)||angular.isArray(e)?t.resolve(n.invoke(e)):angular.isString(e)?t.resolve(n.get(e)):t.resolve(e))}),t.all(i).then(function(n){var t={},o=0;return angular.forEach(e,function(e,a){t[a]=n[o++]}),t})}}}]}).directive("uibModalBackdrop",["$animateCss","$injector","$uibModalStack",function(e,n,t){function o(n,o,a){a.modalInClass&&(e(o,{addClass:a.modalInClass}).start(),n.$on(t.NOW_CLOSING_EVENT,function(t,r){var l=r();n.modalOptions.animation?e(o,{removeClass:a.modalInClass}).start().then(l):l()}))}return{replace:!0,templateUrl:"uib/template/modal/backdrop.html",compile:function(e,n){return e.addClass(n.backdropClass),o}}}]).directive("uibModalWindow",["$uibModalStack","$q","$animate","$animateCss","$document",function(e,n,t,o,a){return{scope:{index:"@"},replace:!0,transclude:!0,templateUrl:function(e,n){return n.templateUrl||"uib/template/modal/window.html"},link:function(r,l,i){l.addClass(i.windowClass||""),l.addClass(i.windowTopClass||""),r.size=i.size,r.close=function(n){var t=e.getTop();t&&t.value.backdrop&&"static"!==t.value.backdrop&&n.target===n.currentTarget&&(n.preventDefault(),n.stopPropagation(),e.dismiss(t.key,"backdrop click"))},l.on("click",r.close),r.$isRendered=!0;var s=n.defer();i.$observe("modalRender",function(e){"true"===e&&s.resolve()}),s.promise.then(function(){var s=null;i.modalInClass&&(s=o(l,{addClass:i.modalInClass}).start(),r.$on(e.NOW_CLOSING_EVENT,function(e,n){var a=n();o?o(l,{removeClass:i.modalInClass}).start().then(a):t.removeClass(l,i.modalInClass).then(a)})),n.when(s).then(function(){if(!a[0].activeElement||!l[0].contains(a[0].activeElement)){var e=l[0].querySelector("[autofocus]");e?e.focus():l[0].focus()}});var u=e.getTop();u&&e.modalRendered(u.key)})}}}]).directive("uibModalAnimationClass",function(){return{compile:function(e,n){n.modalAnimation&&e.addClass(n.uibModalAnimationClass)}}}).directive("uibModalTransclude",function(){return{link:function(e,n,t,o,a){a(e.$parent,function(e){n.empty(),n.append(e)})}}}).factory("$uibModalStack",["$animate","$animateCss","$document","$compile","$rootScope","$q","$$multiMap","$$stackedMap",function(e,n,t,o,a,r,l,i){function s(){for(var e=-1,n=g.keys(),t=0;t<n.length;t++)g.get(n[t]).value.backdrop&&(e=t);return e}function u(e,n){var t=g.get(e).value,o=t.appendTo;g.remove(e),p(t.modalDomEl,t.modalScope,function(){var n=t.openedClass||$;k.remove(n,e),o.toggleClass(n,k.hasKey(n)),d(!0)}),c(),n&&n.focus?n.focus():o.focus&&o.focus()}function d(e){var n;g.length()>0&&(n=g.top().value,n.modalDomEl.toggleClass(n.windowTopClass||"",e))}function c(){if(v&&-1===s()){var e=b;p(v,b,function(){e=null}),v=void 0,b=void 0}}function p(e,t,o,a){function l(){l.done||(l.done=!0,n(e,{event:"leave"}).start().then(function(){e.remove(),a&&a.resolve()}),t.$destroy(),o&&o())}var i,s=null,u=function(){return i||(i=r.defer(),s=i.promise),function(){i.resolve()}};return t.$broadcast(w.NOW_CLOSING_EVENT,u),r.when(s).then(l)}function m(e){if(e.isDefaultPrevented())return e;var n=g.top();if(n)switch(e.which){case 27:n.value.keyboard&&(e.preventDefault(),a.$apply(function(){w.dismiss(n.key,"escape key press")}));break;case 9:w.loadFocusElementList(n);var t=!1;e.shiftKey?w.isFocusInFirstItem(e)&&(t=w.focusLastFocusableElement()):w.isFocusInLastItem(e)&&(t=w.focusFirstFocusableElement()),t&&(e.preventDefault(),e.stopPropagation())}}function f(e,n,t){return!e.value.modalScope.$broadcast("modal.closing",n,t).defaultPrevented}var v,b,h,$="modal-open",g=i.createNew(),k=l.createNew(),w={NOW_CLOSING_EVENT:"modal.stack.now-closing"},C=0,y="a[href], area[href], input:not([disabled]), button:not([disabled]),select:not([disabled]), textarea:not([disabled]), iframe, object, embed, *[tabindex], *[contenteditable=true]";return a.$watch(s,function(e){b&&(b.index=e)}),t.on("keydown",m),a.$on("$destroy",function(){t.off("keydown",m)}),w.open=function(n,r){var l=t[0].activeElement,i=r.openedClass||$;d(!1),g.add(n,{deferred:r.deferred,renderDeferred:r.renderDeferred,closedDeferred:r.closedDeferred,modalScope:r.scope,backdrop:r.backdrop,keyboard:r.keyboard,openedClass:r.openedClass,windowTopClass:r.windowTopClass,animation:r.animation,appendTo:r.appendTo}),k.put(i,n);var u=r.appendTo,c=s();if(!u.length)throw new Error("appendTo element not found. Make sure that the element passed is in DOM.");c>=0&&!v&&(b=a.$new(!0),b.modalOptions=r,b.index=c,v=angular.element('<div uib-modal-backdrop="modal-backdrop"></div>'),v.attr("backdrop-class",r.backdropClass),r.animation&&v.attr("modal-animation","true"),o(v)(b),e.enter(v,u));var p=angular.element('<div uib-modal-window="modal-window"></div>');p.attr({"template-url":r.windowTemplateUrl,"window-class":r.windowClass,"window-top-class":r.windowTopClass,size:r.size,index:g.length()-1,animate:"animate"}).html(r.content),r.animation&&p.attr("modal-animation","true"),e.enter(p,u).then(function(){o(p)(r.scope),e.addClass(u,i)}),g.top().value.modalDomEl=p,g.top().value.modalOpener=l,w.clearFocusListCache()},w.close=function(e,n){var t=g.get(e);return t&&f(t,n,!0)?(t.value.modalScope.$$uibDestructionScheduled=!0,t.value.deferred.resolve(n),u(e,t.value.modalOpener),!0):!t},w.dismiss=function(e,n){var t=g.get(e);return t&&f(t,n,!1)?(t.value.modalScope.$$uibDestructionScheduled=!0,t.value.deferred.reject(n),u(e,t.value.modalOpener),!0):!t},w.dismissAll=function(e){for(var n=this.getTop();n&&this.dismiss(n.key,e);)n=this.getTop()},w.getTop=function(){return g.top()},w.modalRendered=function(e){var n=g.get(e);n&&n.value.renderDeferred.resolve()},w.focusFirstFocusableElement=function(){return h.length>0?(h[0].focus(),!0):!1},w.focusLastFocusableElement=function(){return h.length>0?(h[h.length-1].focus(),!0):!1},w.isFocusInFirstItem=function(e){return h.length>0?(e.target||e.srcElement)===h[0]:!1},w.isFocusInLastItem=function(e){return h.length>0?(e.target||e.srcElement)===h[h.length-1]:!1},w.clearFocusListCache=function(){h=[],C=0},w.loadFocusElementList=function(e){if((void 0===h||!h.length)&&e){var n=e.value.modalDomEl;n&&n.length&&(h=n[0].querySelectorAll(y))}},w}]).provider("$uibModal",function(){var e={options:{animation:!0,backdrop:!0,keyboard:!0},$get:["$rootScope","$q","$document","$templateRequest","$controller","$uibResolve","$uibModalStack",function(n,t,o,a,r,l,i){function s(e){return e.template?t.when(e.template):a(angular.isFunction(e.templateUrl)?e.templateUrl():e.templateUrl)}var u={},d=null;return u.getPromiseChain=function(){return d},u.open=function(a){function u(){return h}var c=t.defer(),p=t.defer(),m=t.defer(),f=t.defer(),v={result:c.promise,opened:p.promise,closed:m.promise,rendered:f.promise,close:function(e){return i.close(v,e)},dismiss:function(e){return i.dismiss(v,e)}};if(a=angular.extend({},e.options,a),a.resolve=a.resolve||{},a.appendTo=a.appendTo||o.find("body").eq(0),!a.template&&!a.templateUrl)throw new Error("One of template or templateUrl options is required.");var b,h=t.all([s(a),l.resolve(a.resolve,{},null,null)]);return b=d=t.all([d]).then(u,u).then(function(e){var t=a.scope||n,o=t.$new();o.$close=v.close,o.$dismiss=v.dismiss,o.$on("$destroy",function(){o.$$uibDestructionScheduled||o.$dismiss("$uibUnscheduledDestruction")});var l,s={};a.controller&&(s.$scope=o,s.$uibModalInstance=v,angular.forEach(e[1],function(e,n){s[n]=e}),l=r(a.controller,s),a.controllerAs&&(a.bindToController&&(l.$close=o.$close,l.$dismiss=o.$dismiss,angular.extend(l,t)),o[a.controllerAs]=l)),i.open(v,{scope:o,deferred:c,renderDeferred:f,closedDeferred:m,content:e[0],animation:a.animation,backdrop:a.backdrop,keyboard:a.keyboard,backdropClass:a.backdropClass,windowTopClass:a.windowTopClass,windowClass:a.windowClass,windowTemplateUrl:a.windowTemplateUrl,size:a.size,openedClass:a.openedClass,appendTo:a.appendTo}),p.resolve(!0)},function(e){p.reject(e),c.reject(e)})["finally"](function(){d===b&&(d=null)}),v},u}]};return e}),angular.module("ui.bootstrap.stackedMap",[]).factory("$$stackedMap",function(){return{createNew:function(){var e=[];return{add:function(n,t){e.push({key:n,value:t})},get:function(n){for(var t=0;t<e.length;t++)if(n===e[t].key)return e[t]},keys:function(){for(var n=[],t=0;t<e.length;t++)n.push(e[t].key);return n},top:function(){return e[e.length-1]},remove:function(n){for(var t=-1,o=0;o<e.length;o++)if(n===e[o].key){t=o;break}return e.splice(t,1)[0]},removeTop:function(){return e.splice(e.length-1,1)[0]},length:function(){return e.length}}}}}),angular.module("uib/template/modal/backdrop.html",[]).run(["$templateCache",function(e){e.put("uib/template/modal/backdrop.html",'<div class="modal-backdrop"\n     uib-modal-animation-class="fade"\n     modal-in-class="in"\n     ng-style="{\'z-index\': 1040 + (index && 1 || 0) + index*10}"\n></div>\n')}]),angular.module("uib/template/modal/window.html",[]).run(["$templateCache",function(e){e.put("uib/template/modal/window.html",'<div modal-render="{{$isRendered}}" tabindex="-1" role="dialog" class="modal"\n    uib-modal-animation-class="fade"\n    modal-in-class="in"\n    ng-style="{\'z-index\': 1050 + index*10, display: \'block\'}">\n    <div class="modal-dialog" ng-class="size ? \'modal-\' + size : \'\'"><div class="modal-content" uib-modal-transclude></div></div>\n</div>\n')}]);
/*
* angular-ui-bootstrap
* http://angular-ui.github.io/bootstrap/

* Version: 1.0.3 - 2016-01-11
* License: MIT
*/angular.module("ui.bootstrap",["ui.bootstrap.tpls","ui.bootstrap.collapse","ui.bootstrap.accordion","ui.bootstrap.alert","ui.bootstrap.buttons","ui.bootstrap.carousel","ui.bootstrap.dateparser","ui.bootstrap.isClass","ui.bootstrap.position","ui.bootstrap.datepicker","ui.bootstrap.debounce","ui.bootstrap.dropdown","ui.bootstrap.stackedMap","ui.bootstrap.modal","ui.bootstrap.paging","ui.bootstrap.pager","ui.bootstrap.pagination","ui.bootstrap.tooltip","ui.bootstrap.popover","ui.bootstrap.progressbar","ui.bootstrap.rating","ui.bootstrap.tabs","ui.bootstrap.timepicker","ui.bootstrap.typeahead"]),angular.module("ui.bootstrap.tpls",["uib/template/accordion/accordion-group.html","uib/template/accordion/accordion.html","uib/template/alert/alert.html","uib/template/carousel/carousel.html","uib/template/carousel/slide.html","uib/template/datepicker/datepicker.html","uib/template/datepicker/day.html","uib/template/datepicker/month.html","uib/template/datepicker/popup.html","uib/template/datepicker/year.html","uib/template/modal/backdrop.html","uib/template/modal/window.html","uib/template/pager/pager.html","uib/template/pagination/pagination.html","uib/template/tooltip/tooltip-html-popup.html","uib/template/tooltip/tooltip-popup.html","uib/template/tooltip/tooltip-template-popup.html","uib/template/popover/popover-html.html","uib/template/popover/popover-template.html","uib/template/popover/popover.html","uib/template/progressbar/bar.html","uib/template/progressbar/progress.html","uib/template/progressbar/progressbar.html","uib/template/rating/rating.html","uib/template/tabs/tab.html","uib/template/tabs/tabset.html","uib/template/timepicker/timepicker.html","uib/template/typeahead/typeahead-match.html","uib/template/typeahead/typeahead-popup.html"]),angular.module("ui.bootstrap.collapse",[]).directive("uibCollapse",["$animate","$injector",function(a,b){var c=b.has("$animateCss")?b.get("$animateCss"):null;return{link:function(b,d,e){function f(){d.removeClass("collapse").addClass("collapsing").attr("aria-expanded",!0).attr("aria-hidden",!1),c?c(d,{addClass:"in",easing:"ease",to:{height:d[0].scrollHeight+"px"}}).start()["finally"](g):a.addClass(d,"in",{to:{height:d[0].scrollHeight+"px"}}).then(g)}function g(){d.removeClass("collapsing").addClass("collapse").css({height:"auto"})}function h(){return d.hasClass("collapse")||d.hasClass("in")?(d.css({height:d[0].scrollHeight+"px"}).removeClass("collapse").addClass("collapsing").attr("aria-expanded",!1).attr("aria-hidden",!0),void(c?c(d,{removeClass:"in",to:{height:"0"}}).start()["finally"](i):a.removeClass(d,"in",{to:{height:"0"}}).then(i))):i()}function i(){d.css({height:"0"}),d.removeClass("collapsing").addClass("collapse")}b.$eval(e.uibCollapse)||d.addClass("in").addClass("collapse").css({height:"auto"}),b.$watch(e.uibCollapse,function(a){a?h():f()})}}}]),angular.module("ui.bootstrap.accordion",["ui.bootstrap.collapse"]).constant("uibAccordionConfig",{closeOthers:!0}).controller("UibAccordionController",["$scope","$attrs","uibAccordionConfig",function(a,b,c){this.groups=[],this.closeOthers=function(d){var e=angular.isDefined(b.closeOthers)?a.$eval(b.closeOthers):c.closeOthers;e&&angular.forEach(this.groups,function(a){a!==d&&(a.isOpen=!1)})},this.addGroup=function(a){var b=this;this.groups.push(a),a.$on("$destroy",function(c){b.removeGroup(a)})},this.removeGroup=function(a){var b=this.groups.indexOf(a);-1!==b&&this.groups.splice(b,1)}}]).directive("uibAccordion",function(){return{controller:"UibAccordionController",controllerAs:"accordion",transclude:!0,templateUrl:function(a,b){return b.templateUrl||"uib/template/accordion/accordion.html"}}}).directive("uibAccordionGroup",function(){return{require:"^uibAccordion",transclude:!0,replace:!0,templateUrl:function(a,b){return b.templateUrl||"uib/template/accordion/accordion-group.html"},scope:{heading:"@",isOpen:"=?",isDisabled:"=?"},controller:function(){this.setHeading=function(a){this.heading=a}},link:function(a,b,c,d){d.addGroup(a),a.openClass=c.openClass||"panel-open",a.panelClass=c.panelClass||"panel-default",a.$watch("isOpen",function(c){b.toggleClass(a.openClass,!!c),c&&d.closeOthers(a)}),a.toggleOpen=function(b){a.isDisabled||b&&32!==b.which||(a.isOpen=!a.isOpen)}}}}).directive("uibAccordionHeading",function(){return{transclude:!0,template:"",replace:!0,require:"^uibAccordionGroup",link:function(a,b,c,d,e){d.setHeading(e(a,angular.noop))}}}).directive("uibAccordionTransclude",function(){return{require:"^uibAccordionGroup",link:function(a,b,c,d){a.$watch(function(){return d[c.uibAccordionTransclude]},function(a){a&&(b.find("span").html(""),b.find("span").append(a))})}}}),angular.module("ui.bootstrap.alert",[]).controller("UibAlertController",["$scope","$attrs","$interpolate","$timeout",function(a,b,c,d){a.closeable=!!b.close;var e=angular.isDefined(b.dismissOnTimeout)?c(b.dismissOnTimeout)(a.$parent):null;e&&d(function(){a.close()},parseInt(e,10))}]).directive("uibAlert",function(){return{controller:"UibAlertController",controllerAs:"alert",templateUrl:function(a,b){return b.templateUrl||"uib/template/alert/alert.html"},transclude:!0,replace:!0,scope:{type:"@",close:"&"}}}),angular.module("ui.bootstrap.buttons",[]).constant("uibButtonConfig",{activeClass:"active",toggleEvent:"click"}).controller("UibButtonsController",["uibButtonConfig",function(a){this.activeClass=a.activeClass||"active",this.toggleEvent=a.toggleEvent||"click"}]).directive("uibBtnRadio",["$parse",function(a){return{require:["uibBtnRadio","ngModel"],controller:"UibButtonsController",controllerAs:"buttons",link:function(b,c,d,e){var f=e[0],g=e[1],h=a(d.uibUncheckable);c.find("input").css({display:"none"}),g.$render=function(){c.toggleClass(f.activeClass,angular.equals(g.$modelValue,b.$eval(d.uibBtnRadio)))},c.on(f.toggleEvent,function(){if(!d.disabled){var a=c.hasClass(f.activeClass);(!a||angular.isDefined(d.uncheckable))&&b.$apply(function(){g.$setViewValue(a?null:b.$eval(d.uibBtnRadio)),g.$render()})}}),d.uibUncheckable&&b.$watch(h,function(a){d.$set("uncheckable",a?"":null)})}}}]).directive("uibBtnCheckbox",function(){return{require:["uibBtnCheckbox","ngModel"],controller:"UibButtonsController",controllerAs:"button",link:function(a,b,c,d){function e(){return g(c.btnCheckboxTrue,!0)}function f(){return g(c.btnCheckboxFalse,!1)}function g(b,c){return angular.isDefined(b)?a.$eval(b):c}var h=d[0],i=d[1];b.find("input").css({display:"none"}),i.$render=function(){b.toggleClass(h.activeClass,angular.equals(i.$modelValue,e()))},b.on(h.toggleEvent,function(){c.disabled||a.$apply(function(){i.$setViewValue(b.hasClass(h.activeClass)?f():e()),i.$render()})})}}}),angular.module("ui.bootstrap.carousel",[]).controller("UibCarouselController",["$scope","$element","$interval","$timeout","$animate",function(a,b,c,d,e){function f(){for(;s.length;)s.shift()}function g(a){if(angular.isUndefined(p[a].index))return p[a];for(var b=0,c=p.length;c>b;++b)if(p[b].index===a)return p[b]}function h(c,d,g){t||(angular.extend(c,{direction:g,active:!0}),angular.extend(o.currentSlide||{},{direction:g,active:!1}),e.enabled(b)&&!a.$currentTransition&&c.$element&&o.slides.length>1&&(c.$element.data(q,c.direction),o.currentSlide&&o.currentSlide.$element&&o.currentSlide.$element.data(q,c.direction),a.$currentTransition=!0,e.on("addClass",c.$element,function(b,c){if("close"===c&&(a.$currentTransition=null,e.off("addClass",b),s.length)){var d=s.pop(),g=a.indexOfSlide(d),i=g>o.getCurrentIndex()?"next":"prev";f(),h(d,g,i)}})),o.currentSlide=c,r=d,k())}function i(){m&&(c.cancel(m),m=null)}function j(b){b.length||(a.$currentTransition=null,f())}function k(){i();var b=+a.interval;!isNaN(b)&&b>0&&(m=c(l,b))}function l(){var b=+a.interval;n&&!isNaN(b)&&b>0&&p.length?a.next():a.pause()}var m,n,o=this,p=o.slides=a.slides=[],q="uib-slideDirection",r=-1,s=[];o.currentSlide=null;var t=!1;o.addSlide=function(b,c){b.$element=c,p.push(b),1===p.length||b.active?(a.$currentTransition&&(a.$currentTransition=null),o.select(p[p.length-1]),1===p.length&&a.play()):b.active=!1},o.getCurrentIndex=function(){return o.currentSlide&&angular.isDefined(o.currentSlide.index)?+o.currentSlide.index:r},o.next=a.next=function(){var b=(o.getCurrentIndex()+1)%p.length;return 0===b&&a.noWrap()?void a.pause():o.select(g(b),"next")},o.prev=a.prev=function(){var b=o.getCurrentIndex()-1<0?p.length-1:o.getCurrentIndex()-1;return a.noWrap()&&b===p.length-1?void a.pause():o.select(g(b),"prev")},o.removeSlide=function(a){angular.isDefined(a.index)&&p.sort(function(a,b){return+a.index>+b.index});var b=s.indexOf(a);-1!==b&&s.splice(b,1);var c=p.indexOf(a);p.splice(c,1),d(function(){p.length>0&&a.active?c>=p.length?o.select(p[c-1]):o.select(p[c]):r>c&&r--}),0===p.length&&(o.currentSlide=null,f())},o.select=a.select=function(b,c){var d=a.indexOfSlide(b);void 0===c&&(c=d>o.getCurrentIndex()?"next":"prev"),b&&b!==o.currentSlide&&!a.$currentTransition?h(b,d,c):b&&b!==o.currentSlide&&a.$currentTransition&&(s.push(b),b.active=!1)},a.indexOfSlide=function(a){return angular.isDefined(a.index)?+a.index:p.indexOf(a)},a.isActive=function(a){return o.currentSlide===a},a.pause=function(){a.noPause||(n=!1,i())},a.play=function(){n||(n=!0,k())},a.$on("$destroy",function(){t=!0,i()}),a.$watch("noTransition",function(a){e.enabled(b,!a)}),a.$watch("interval",k),a.$watchCollection("slides",j)}]).directive("uibCarousel",function(){return{transclude:!0,replace:!0,controller:"UibCarouselController",controllerAs:"carousel",templateUrl:function(a,b){return b.templateUrl||"uib/template/carousel/carousel.html"},scope:{interval:"=",noTransition:"=",noPause:"=",noWrap:"&"}}}).directive("uibSlide",function(){return{require:"^uibCarousel",transclude:!0,replace:!0,templateUrl:function(a,b){return b.templateUrl||"uib/template/carousel/slide.html"},scope:{active:"=?",actual:"=?",index:"=?"},link:function(a,b,c,d){d.addSlide(a,b),a.$on("$destroy",function(){d.removeSlide(a)}),a.$watch("active",function(b){b&&d.select(a)})}}}).animation(".item",["$animateCss",function(a){function b(a,b,c){a.removeClass(b),c&&c()}var c="uib-slideDirection";return{beforeAddClass:function(d,e,f){if("active"===e){var g=!1,h=d.data(c),i="next"===h?"left":"right",j=b.bind(this,d,i+" "+h,f);return d.addClass(h),a(d,{addClass:i}).start().done(j),function(){g=!0}}f()},beforeRemoveClass:function(d,e,f){if("active"===e){var g=!1,h=d.data(c),i="next"===h?"left":"right",j=b.bind(this,d,i,f);return a(d,{addClass:i}).start().done(j),function(){g=!0}}f()}}}]),angular.module("ui.bootstrap.dateparser",[]).service("uibDateParser",["$log","$locale","orderByFilter",function(a,b,c){function d(a){var b=[],d=a.split(""),e=a.indexOf("'");if(e>-1){var f=!1;a=a.split("");for(var g=e;g<a.length;g++)f?("'"===a[g]&&(g+1<a.length&&"'"===a[g+1]?(a[g+1]="$",d[g+1]=""):(d[g]="",f=!1)),a[g]="$"):"'"===a[g]&&(a[g]="$",d[g]="",f=!0);a=a.join("")}return angular.forEach(m,function(c){var e=a.indexOf(c.key);if(e>-1){a=a.split(""),d[e]="("+c.regex+")",a[e]="$";for(var f=e+1,g=e+c.key.length;g>f;f++)d[f]="",a[f]="$";a=a.join(""),b.push({index:e,apply:c.apply,matcher:c.regex})}}),{regex:new RegExp("^"+d.join("")+"$"),map:c(b,"index")}}function e(a,b,c){return 1>c?!1:1===b&&c>28?29===c&&(a%4===0&&a%100!==0||a%400===0):3===b||5===b||8===b||10===b?31>c:!0}function f(a){return parseInt(a,10)}function g(a,b){return a&&b?k(a,b):a}function h(a,b){return a&&b?k(a,b,!0):a}function i(a,b){var c=Date.parse("Jan 01, 1970 00:00:00 "+a)/6e4;return isNaN(c)?b:c}function j(a,b){return a=new Date(a.getTime()),a.setMinutes(a.getMinutes()+b),a}function k(a,b,c){c=c?-1:1;var d=i(b,a.getTimezoneOffset());return j(a,c*(d-a.getTimezoneOffset()))}var l,m,n=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g;this.init=function(){l=b.id,this.parsers={},m=[{key:"yyyy",regex:"\\d{4}",apply:function(a){this.year=+a}},{key:"yy",regex:"\\d{2}",apply:function(a){this.year=+a+2e3}},{key:"y",regex:"\\d{1,4}",apply:function(a){this.year=+a}},{key:"M!",regex:"0?[1-9]|1[0-2]",apply:function(a){this.month=a-1}},{key:"MMMM",regex:b.DATETIME_FORMATS.MONTH.join("|"),apply:function(a){this.month=b.DATETIME_FORMATS.MONTH.indexOf(a)}},{key:"MMM",regex:b.DATETIME_FORMATS.SHORTMONTH.join("|"),apply:function(a){this.month=b.DATETIME_FORMATS.SHORTMONTH.indexOf(a)}},{key:"MM",regex:"0[1-9]|1[0-2]",apply:function(a){this.month=a-1}},{key:"M",regex:"[1-9]|1[0-2]",apply:function(a){this.month=a-1}},{key:"d!",regex:"[0-2]?[0-9]{1}|3[0-1]{1}",apply:function(a){this.date=+a}},{key:"dd",regex:"[0-2][0-9]{1}|3[0-1]{1}",apply:function(a){this.date=+a}},{key:"d",regex:"[1-2]?[0-9]{1}|3[0-1]{1}",apply:function(a){this.date=+a}},{key:"EEEE",regex:b.DATETIME_FORMATS.DAY.join("|")},{key:"EEE",regex:b.DATETIME_FORMATS.SHORTDAY.join("|")},{key:"HH",regex:"(?:0|1)[0-9]|2[0-3]",apply:function(a){this.hours=+a}},{key:"hh",regex:"0[0-9]|1[0-2]",apply:function(a){this.hours=+a}},{key:"H",regex:"1?[0-9]|2[0-3]",apply:function(a){this.hours=+a}},{key:"h",regex:"[0-9]|1[0-2]",apply:function(a){this.hours=+a}},{key:"mm",regex:"[0-5][0-9]",apply:function(a){this.minutes=+a}},{key:"m",regex:"[0-9]|[1-5][0-9]",apply:function(a){this.minutes=+a}},{key:"sss",regex:"[0-9][0-9][0-9]",apply:function(a){this.milliseconds=+a}},{key:"ss",regex:"[0-5][0-9]",apply:function(a){this.seconds=+a}},{key:"s",regex:"[0-9]|[1-5][0-9]",apply:function(a){this.seconds=+a}},{key:"a",regex:b.DATETIME_FORMATS.AMPMS.join("|"),apply:function(a){12===this.hours&&(this.hours=0),"PM"===a&&(this.hours+=12)}},{key:"Z",regex:"[+-]\\d{4}",apply:function(a){var b=a.match(/([+-])(\d{2})(\d{2})/),c=b[1],d=b[2],e=b[3];this.hours+=f(c+d),this.minutes+=f(c+e)}},{key:"ww",regex:"[0-4][0-9]|5[0-3]"},{key:"w",regex:"[0-9]|[1-4][0-9]|5[0-3]"},{key:"GGGG",regex:b.DATETIME_FORMATS.ERANAMES.join("|").replace(/\s/g,"\\s")},{key:"GGG",regex:b.DATETIME_FORMATS.ERAS.join("|")},{key:"GG",regex:b.DATETIME_FORMATS.ERAS.join("|")},{key:"G",regex:b.DATETIME_FORMATS.ERAS.join("|")}]},this.init(),this.parse=function(c,f,g){if(!angular.isString(c)||!f)return c;f=b.DATETIME_FORMATS[f]||f,f=f.replace(n,"\\$&"),b.id!==l&&this.init(),this.parsers[f]||(this.parsers[f]=d(f));var h=this.parsers[f],i=h.regex,j=h.map,k=c.match(i),m=!1;if(k&&k.length){var o,p;angular.isDate(g)&&!isNaN(g.getTime())?o={year:g.getFullYear(),month:g.getMonth(),date:g.getDate(),hours:g.getHours(),minutes:g.getMinutes(),seconds:g.getSeconds(),milliseconds:g.getMilliseconds()}:(g&&a.warn("dateparser:","baseDate is not a valid date"),o={year:1900,month:0,date:1,hours:0,minutes:0,seconds:0,milliseconds:0});for(var q=1,r=k.length;r>q;q++){var s=j[q-1];"Z"===s.matcher&&(m=!0),s.apply&&s.apply.call(o,k[q])}var t=m?Date.prototype.setUTCFullYear:Date.prototype.setFullYear,u=m?Date.prototype.setUTCHours:Date.prototype.setHours;return e(o.year,o.month,o.date)&&(!angular.isDate(g)||isNaN(g.getTime())||m?(p=new Date(0),t.call(p,o.year,o.month,o.date),u.call(p,o.hours||0,o.minutes||0,o.seconds||0,o.milliseconds||0)):(p=new Date(g),t.call(p,o.year,o.month,o.date),u.call(p,o.hours,o.minutes,o.seconds,o.milliseconds))),p}},this.toTimezone=g,this.fromTimezone=h,this.timezoneToOffset=i,this.addDateMinutes=j,this.convertTimezoneToLocal=k}]),angular.module("ui.bootstrap.isClass",[]).directive("uibIsClass",["$animate",function(a){var b=/^\s*([\s\S]+?)\s+on\s+([\s\S]+?)\s*$/,c=/^\s*([\s\S]+?)\s+for\s+([\s\S]+?)\s*$/;return{restrict:"A",compile:function(d,e){function f(a,b,c){i.push(a),j.push({scope:a,element:b}),o.forEach(function(b,c){g(b,a)}),a.$on("$destroy",h)}function g(b,d){var e=b.match(c),f=d.$eval(e[1]),g=e[2],h=k[b];if(!h){var i=function(b){var c=null;j.some(function(a){var d=a.scope.$eval(m);return d===b?(c=a,!0):void 0}),h.lastActivated!==c&&(h.lastActivated&&a.removeClass(h.lastActivated.element,f),c&&a.addClass(c.element,f),h.lastActivated=c)};k[b]=h={lastActivated:null,scope:d,watchFn:i,compareWithExp:g,watcher:d.$watch(g,i)}}h.watchFn(d.$eval(g))}function h(a){var b=a.targetScope,c=i.indexOf(b);if(i.splice(c,1),j.splice(c,1),i.length){var d=i[0];angular.forEach(k,function(a){a.scope===b&&(a.watcher=d.$watch(a.compareWithExp,a.watchFn),a.scope=d)})}else k={}}var i=[],j=[],k={},l=e.uibIsClass.match(b),m=l[2],n=l[1],o=n.split(",");return f}}}]),angular.module("ui.bootstrap.position",[]).factory("$uibPosition",["$document","$window",function(a,b){var c,d={normal:/(auto|scroll)/,hidden:/(auto|scroll|hidden)/},e={auto:/\s?auto?\s?/i,primary:/^(top|bottom|left|right)$/,secondary:/^(top|bottom|left|right|center)$/,vertical:/^(top|bottom)$/};return{getRawNode:function(a){return a[0]||a},parseStyle:function(a){return a=parseFloat(a),isFinite(a)?a:0},offsetParent:function(c){function d(a){return"static"===(b.getComputedStyle(a).position||"static")}c=this.getRawNode(c);for(var e=c.offsetParent||a[0].documentElement;e&&e!==a[0].documentElement&&d(e);)e=e.offsetParent;return e||a[0].documentElement},scrollbarWidth:function(){if(angular.isUndefined(c)){var b=angular.element('<div style="position: absolute; top: -9999px; width: 50px; height: 50px; overflow: scroll;"></div>');a.find("body").append(b),c=b[0].offsetWidth-b[0].clientWidth,c=isFinite(c)?c:0,b.remove()}return c},scrollParent:function(c,e){c=this.getRawNode(c);var f=e?d.hidden:d.normal,g=a[0].documentElement,h=b.getComputedStyle(c),i="absolute"===h.position,j=c.parentElement||g;if(j===g||"fixed"===h.position)return g;for(;j.parentElement&&j!==g;){var k=b.getComputedStyle(j);if(i&&"static"!==k.position&&(i=!1),!i&&f.test(k.overflow+k.overflowY+k.overflowX))break;j=j.parentElement}return j},position:function(c,d){c=this.getRawNode(c);var e=this.offset(c);if(d){var f=b.getComputedStyle(c);e.top-=this.parseStyle(f.marginTop),e.left-=this.parseStyle(f.marginLeft)}var g=this.offsetParent(c),h={top:0,left:0};return g!==a[0].documentElement&&(h=this.offset(g),h.top+=g.clientTop-g.scrollTop,h.left+=g.clientLeft-g.scrollLeft),{width:Math.round(angular.isNumber(e.width)?e.width:c.offsetWidth),height:Math.round(angular.isNumber(e.height)?e.height:c.offsetHeight),top:Math.round(e.top-h.top),left:Math.round(e.left-h.left)}},offset:function(c){c=this.getRawNode(c);var d=c.getBoundingClientRect();return{width:Math.round(angular.isNumber(d.width)?d.width:c.offsetWidth),height:Math.round(angular.isNumber(d.height)?d.height:c.offsetHeight),top:Math.round(d.top+(b.pageYOffset||a[0].documentElement.scrollTop)),left:Math.round(d.left+(b.pageXOffset||a[0].documentElement.scrollLeft))}},viewportOffset:function(c,d,e){c=this.getRawNode(c),e=e!==!1?!0:!1;var f=c.getBoundingClientRect(),g={top:0,left:0,bottom:0,right:0},h=d?a[0].documentElement:this.scrollParent(c),i=h.getBoundingClientRect();if(g.top=i.top+h.clientTop,g.left=i.left+h.clientLeft,h===a[0].documentElement&&(g.top+=b.pageYOffset,g.left+=b.pageXOffset),g.bottom=g.top+h.clientHeight,g.right=g.left+h.clientWidth,e){var j=b.getComputedStyle(h);g.top+=this.parseStyle(j.paddingTop),g.bottom-=this.parseStyle(j.paddingBottom),g.left+=this.parseStyle(j.paddingLeft),g.right-=this.parseStyle(j.paddingRight)}return{top:Math.round(f.top-g.top),bottom:Math.round(g.bottom-f.bottom),left:Math.round(f.left-g.left),right:Math.round(g.right-f.right)}},parsePlacement:function(a){var b=e.auto.test(a);return b&&(a=a.replace(e.auto,"")),a=a.split("-"),a[0]=a[0]||"top",e.primary.test(a[0])||(a[0]="top"),a[1]=a[1]||"center",e.secondary.test(a[1])||(a[1]="center"),b?a[2]=!0:a[2]=!1,a},positionElements:function(a,c,d,f){a=this.getRawNode(a),c=this.getRawNode(c);var g=angular.isDefined(c.offsetWidth)?c.offsetWidth:c.prop("offsetWidth"),h=angular.isDefined(c.offsetHeight)?c.offsetHeight:c.prop("offsetHeight");d=this.parsePlacement(d);var i=f?this.offset(a):this.position(a),j={top:0,left:0,placement:""};if(d[2]){var k=this.viewportOffset(a),l=b.getComputedStyle(c),m={width:g+Math.round(Math.abs(this.parseStyle(l.marginLeft)+this.parseStyle(l.marginRight))),height:h+Math.round(Math.abs(this.parseStyle(l.marginTop)+this.parseStyle(l.marginBottom)))};if(d[0]="top"===d[0]&&m.height>k.top&&m.height<=k.bottom?"bottom":"bottom"===d[0]&&m.height>k.bottom&&m.height<=k.top?"top":"left"===d[0]&&m.width>k.left&&m.width<=k.right?"right":"right"===d[0]&&m.width>k.right&&m.width<=k.left?"left":d[0],d[1]="top"===d[1]&&m.height-i.height>k.bottom&&m.height-i.height<=k.top?"bottom":"bottom"===d[1]&&m.height-i.height>k.top&&m.height-i.height<=k.bottom?"top":"left"===d[1]&&m.width-i.width>k.right&&m.width-i.width<=k.left?"right":"right"===d[1]&&m.width-i.width>k.left&&m.width-i.width<=k.right?"left":d[1],"center"===d[1])if(e.vertical.test(d[0])){var n=i.width/2-g/2;k.left+n<0&&m.width-i.width<=k.right?d[1]="left":k.right+n<0&&m.width-i.width<=k.left&&(d[1]="right")}else{var o=i.height/2-m.height/2;k.top+o<0&&m.height-i.height<=k.bottom?d[1]="top":k.bottom+o<0&&m.height-i.height<=k.top&&(d[1]="bottom")}}switch(d[0]){case"top":j.top=i.top-h;break;case"bottom":j.top=i.top+i.height;break;case"left":j.left=i.left-g;break;case"right":j.left=i.left+i.width}switch(d[1]){case"top":j.top=i.top;break;case"bottom":j.top=i.top+i.height-h;break;case"left":j.left=i.left;break;case"right":j.left=i.left+i.width-g;break;case"center":e.vertical.test(d[0])?j.left=i.left+i.width/2-g/2:j.top=i.top+i.height/2-h/2}return j.top=Math.round(j.top),j.left=Math.round(j.left),j.placement="center"===d[1]?d[0]:d[0]+"-"+d[1],j},positionArrow:function(a,c){a=this.getRawNode(a);var d=!0,f=a.querySelector(".tooltip-inner");if(f||(d=!1,f=a.querySelector(".popover-inner")),f){var g=d?a.querySelector(".tooltip-arrow"):a.querySelector(".arrow");if(g){if(c=this.parsePlacement(c),"center"===c[1])return void angular.element(g).css({top:"",bottom:"",right:"",left:"",margin:""});var h="border-"+c[0]+"-width",i=b.getComputedStyle(g)[h],j="border-";j+=e.vertical.test(c[0])?c[0]+"-"+c[1]:c[1]+"-"+c[0],j+="-radius";var k=b.getComputedStyle(d?f:a)[j],l={top:"auto",bottom:"auto",left:"auto",right:"auto",margin:0};switch(c[0]){case"top":l.bottom=d?"0":"-"+i;break;case"bottom":l.top=d?"0":"-"+i;break;case"left":l.right=d?"0":"-"+i;break;case"right":l.left=d?"0":"-"+i}l[c[1]]=k,angular.element(g).css(l)}}}}}]),angular.module("ui.bootstrap.datepicker",["ui.bootstrap.dateparser","ui.bootstrap.isClass","ui.bootstrap.position"]).value("$datepickerSuppressError",!1).constant("uibDatepickerConfig",{formatDay:"dd",formatMonth:"MMMM",formatYear:"yyyy",formatDayHeader:"EEE",formatDayTitle:"MMMM yyyy",formatMonthTitle:"yyyy",datepickerMode:"day",minMode:"day",maxMode:"year",showWeeks:!0,startingDay:0,yearRows:4,yearColumns:5,minDate:null,maxDate:null,shortcutPropagation:!1,ngModelOptions:{}}).controller("UibDatepickerController",["$scope","$attrs","$parse","$interpolate","$log","dateFilter","uibDatepickerConfig","$datepickerSuppressError","uibDateParser",function(a,b,c,d,e,f,g,h,i){var j=this,k={$setViewValue:angular.noop},l={};this.modes=["day","month","year"],angular.forEach(["formatDay","formatMonth","formatYear","formatDayHeader","formatDayTitle","formatMonthTitle"],function(c){j[c]=angular.isDefined(b[c])?d(b[c])(a.$parent):g[c]}),angular.forEach(["showWeeks","startingDay","yearRows","yearColumns","shortcutPropagation"],function(c){j[c]=angular.isDefined(b[c])?a.$parent.$eval(b[c]):g[c]}),angular.forEach(["minDate","maxDate"],function(c){b[c]?a.$parent.$watch(b[c],function(a){j[c]=a?angular.isDate(a)?i.fromTimezone(new Date(a),l.timezone):new Date(f(a,"medium")):null,j.refreshView()}):j[c]=g[c]?i.fromTimezone(new Date(g[c]),l.timezone):null}),angular.forEach(["minMode","maxMode"],function(c){b[c]?a.$parent.$watch(b[c],function(d){j[c]=a[c]=angular.isDefined(d)?d:b[c],("minMode"===c&&j.modes.indexOf(a.datepickerMode)<j.modes.indexOf(j[c])||"maxMode"===c&&j.modes.indexOf(a.datepickerMode)>j.modes.indexOf(j[c]))&&(a.datepickerMode=j[c])}):j[c]=a[c]=g[c]||null}),a.datepickerMode=a.datepickerMode||g.datepickerMode,a.uniqueId="datepicker-"+a.$id+"-"+Math.floor(1e4*Math.random()),angular.isDefined(b.initDate)?(this.activeDate=i.fromTimezone(a.$parent.$eval(b.initDate),l.timezone)||new Date,a.$parent.$watch(b.initDate,function(a){a&&(k.$isEmpty(k.$modelValue)||k.$invalid)&&(j.activeDate=i.fromTimezone(a,l.timezone),j.refreshView())})):this.activeDate=new Date,a.disabled=angular.isDefined(b.disabled)||!1,angular.isDefined(b.ngDisabled)&&a.$parent.$watch(b.ngDisabled,function(b){a.disabled=b,j.refreshView()}),a.isActive=function(b){return 0===j.compare(b.date,j.activeDate)?(a.activeDateId=b.uid,!0):!1},this.init=function(a){k=a,l=a.$options||g.ngModelOptions,k.$modelValue&&(this.activeDate=k.$modelValue),k.$render=function(){j.render()}},this.render=function(){if(k.$viewValue){var a=new Date(k.$viewValue),b=!isNaN(a);b?this.activeDate=i.fromTimezone(a,l.timezone):h||e.error('Datepicker directive: "ng-model" value must be a Date object')}this.refreshView()},this.refreshView=function(){if(this.element){a.selectedDt=null,this._refreshView(),a.activeDt&&(a.activeDateId=a.activeDt.uid);var b=k.$viewValue?new Date(k.$viewValue):null;b=i.fromTimezone(b,l.timezone),k.$setValidity("dateDisabled",!b||this.element&&!this.isDisabled(b))}},this.createDateObject=function(b,c){var d=k.$viewValue?new Date(k.$viewValue):null;d=i.fromTimezone(d,l.timezone);var e={date:b,label:f(b,c.replace(/d!/,"dd")).replace(/M!/,"MM"),selected:d&&0===this.compare(b,d),disabled:this.isDisabled(b),current:0===this.compare(b,new Date),customClass:this.customClass(b)||null};return d&&0===this.compare(b,d)&&(a.selectedDt=e),j.activeDate&&0===this.compare(e.date,j.activeDate)&&(a.activeDt=e),e},this.isDisabled=function(c){return a.disabled||this.minDate&&this.compare(c,this.minDate)<0||this.maxDate&&this.compare(c,this.maxDate)>0||b.dateDisabled&&a.dateDisabled({date:c,mode:a.datepickerMode})},this.customClass=function(b){return a.customClass({date:b,mode:a.datepickerMode})},this.split=function(a,b){for(var c=[];a.length>0;)c.push(a.splice(0,b));return c},a.select=function(b){if(a.datepickerMode===j.minMode){var c=k.$viewValue?i.fromTimezone(new Date(k.$viewValue),l.timezone):new Date(0,0,0,0,0,0,0);c.setFullYear(b.getFullYear(),b.getMonth(),b.getDate()),c=i.toTimezone(c,l.timezone),k.$setViewValue(c),k.$render()}else j.activeDate=b,a.datepickerMode=j.modes[j.modes.indexOf(a.datepickerMode)-1]},a.move=function(a){var b=j.activeDate.getFullYear()+a*(j.step.years||0),c=j.activeDate.getMonth()+a*(j.step.months||0);j.activeDate.setFullYear(b,c,1),j.refreshView()},a.toggleMode=function(b){b=b||1,a.datepickerMode===j.maxMode&&1===b||a.datepickerMode===j.minMode&&-1===b||(a.datepickerMode=j.modes[j.modes.indexOf(a.datepickerMode)+b])},a.keys={13:"enter",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down"};var m=function(){j.element[0].focus()};a.$on("uib:datepicker.focus",m),a.keydown=function(b){var c=a.keys[b.which];if(c&&!b.shiftKey&&!b.altKey&&!a.disabled)if(b.preventDefault(),j.shortcutPropagation||b.stopPropagation(),"enter"===c||"space"===c){if(j.isDisabled(j.activeDate))return;a.select(j.activeDate)}else!b.ctrlKey||"up"!==c&&"down"!==c?(j.handleKeyDown(c,b),j.refreshView()):a.toggleMode("up"===c?1:-1)}}]).controller("UibDaypickerController",["$scope","$element","dateFilter",function(a,b,c){function d(a,b){return 1!==b||a%4!==0||a%100===0&&a%400!==0?f[b]:29}function e(a){var b=new Date(a);b.setDate(b.getDate()+4-(b.getDay()||7));var c=b.getTime();return b.setMonth(0),b.setDate(1),Math.floor(Math.round((c-b)/864e5)/7)+1}var f=[31,28,31,30,31,30,31,31,30,31,30,31];this.step={months:1},this.element=b,this.init=function(b){angular.extend(b,this),a.showWeeks=b.showWeeks,b.refreshView()},this.getDates=function(a,b){for(var c,d=new Array(b),e=new Date(a),f=0;b>f;)c=new Date(e),d[f++]=c,e.setDate(e.getDate()+1);return d},this._refreshView=function(){var b=this.activeDate.getFullYear(),d=this.activeDate.getMonth(),f=new Date(this.activeDate);f.setFullYear(b,d,1);var g=this.startingDay-f.getDay(),h=g>0?7-g:-g,i=new Date(f);h>0&&i.setDate(-h+1);for(var j=this.getDates(i,42),k=0;42>k;k++)j[k]=angular.extend(this.createDateObject(j[k],this.formatDay),{secondary:j[k].getMonth()!==d,uid:a.uniqueId+"-"+k});a.labels=new Array(7);for(var l=0;7>l;l++)a.labels[l]={abbr:c(j[l].date,this.formatDayHeader),full:c(j[l].date,"EEEE")};if(a.title=c(this.activeDate,this.formatDayTitle),a.rows=this.split(j,7),a.showWeeks){a.weekNumbers=[];for(var m=(11-this.startingDay)%7,n=a.rows.length,o=0;n>o;o++)a.weekNumbers.push(e(a.rows[o][m].date))}},this.compare=function(a,b){var c=new Date(a.getFullYear(),a.getMonth(),a.getDate()),d=new Date(b.getFullYear(),b.getMonth(),b.getDate());return c.setFullYear(a.getFullYear()),d.setFullYear(b.getFullYear()),c-d},this.handleKeyDown=function(a,b){var c=this.activeDate.getDate();if("left"===a)c-=1;else if("up"===a)c-=7;else if("right"===a)c+=1;else if("down"===a)c+=7;else if("pageup"===a||"pagedown"===a){var e=this.activeDate.getMonth()+("pageup"===a?-1:1);this.activeDate.setMonth(e,1),c=Math.min(d(this.activeDate.getFullYear(),this.activeDate.getMonth()),c)}else"home"===a?c=1:"end"===a&&(c=d(this.activeDate.getFullYear(),this.activeDate.getMonth()));this.activeDate.setDate(c)}}]).controller("UibMonthpickerController",["$scope","$element","dateFilter",function(a,b,c){this.step={years:1},this.element=b,this.init=function(a){angular.extend(a,this),a.refreshView()},this._refreshView=function(){for(var b,d=new Array(12),e=this.activeDate.getFullYear(),f=0;12>f;f++)b=new Date(this.activeDate),b.setFullYear(e,f,1),d[f]=angular.extend(this.createDateObject(b,this.formatMonth),{uid:a.uniqueId+"-"+f});a.title=c(this.activeDate,this.formatMonthTitle),a.rows=this.split(d,3)},this.compare=function(a,b){var c=new Date(a.getFullYear(),a.getMonth()),d=new Date(b.getFullYear(),b.getMonth());return c.setFullYear(a.getFullYear()),d.setFullYear(b.getFullYear()),c-d},this.handleKeyDown=function(a,b){var c=this.activeDate.getMonth();if("left"===a)c-=1;else if("up"===a)c-=3;else if("right"===a)c+=1;else if("down"===a)c+=3;else if("pageup"===a||"pagedown"===a){var d=this.activeDate.getFullYear()+("pageup"===a?-1:1);this.activeDate.setFullYear(d)}else"home"===a?c=0:"end"===a&&(c=11);this.activeDate.setMonth(c)}}]).controller("UibYearpickerController",["$scope","$element","dateFilter",function(a,b,c){function d(a){return parseInt((a-1)/f,10)*f+1}var e,f;this.element=b,this.yearpickerInit=function(){e=this.yearColumns,f=this.yearRows*e,this.step={years:f}},this._refreshView=function(){for(var b,c=new Array(f),g=0,h=d(this.activeDate.getFullYear());f>g;g++)b=new Date(this.activeDate),b.setFullYear(h+g,0,1),c[g]=angular.extend(this.createDateObject(b,this.formatYear),{uid:a.uniqueId+"-"+g});a.title=[c[0].label,c[f-1].label].join(" - "),a.rows=this.split(c,e),a.columns=e},this.compare=function(a,b){return a.getFullYear()-b.getFullYear()},this.handleKeyDown=function(a,b){var c=this.activeDate.getFullYear();"left"===a?c-=1:"up"===a?c-=e:"right"===a?c+=1:"down"===a?c+=e:"pageup"===a||"pagedown"===a?c+=("pageup"===a?-1:1)*f:"home"===a?c=d(this.activeDate.getFullYear()):"end"===a&&(c=d(this.activeDate.getFullYear())+f-1),this.activeDate.setFullYear(c)}}]).directive("uibDatepicker",function(){return{replace:!0,templateUrl:function(a,b){return b.templateUrl||"uib/template/datepicker/datepicker.html"},scope:{datepickerMode:"=?",dateDisabled:"&",customClass:"&",shortcutPropagation:"&?"},require:["uibDatepicker","^ngModel"],controller:"UibDatepickerController",controllerAs:"datepicker",link:function(a,b,c,d){var e=d[0],f=d[1];e.init(f)}}}).directive("uibDaypicker",function(){return{replace:!0,templateUrl:function(a,b){return b.templateUrl||"uib/template/datepicker/day.html"},require:["^uibDatepicker","uibDaypicker"],controller:"UibDaypickerController",link:function(a,b,c,d){var e=d[0],f=d[1];f.init(e)}}}).directive("uibMonthpicker",function(){return{replace:!0,templateUrl:function(a,b){return b.templateUrl||"uib/template/datepicker/month.html"},require:["^uibDatepicker","uibMonthpicker"],controller:"UibMonthpickerController",link:function(a,b,c,d){var e=d[0],f=d[1];f.init(e)}}}).directive("uibYearpicker",function(){return{replace:!0,templateUrl:function(a,b){
return b.templateUrl||"uib/template/datepicker/year.html"},require:["^uibDatepicker","uibYearpicker"],controller:"UibYearpickerController",link:function(a,b,c,d){var e=d[0];angular.extend(e,d[1]),e.yearpickerInit(),e.refreshView()}}}).constant("uibDatepickerPopupConfig",{datepickerPopup:"yyyy-MM-dd",datepickerPopupTemplateUrl:"uib/template/datepicker/popup.html",datepickerTemplateUrl:"uib/template/datepicker/datepicker.html",html5Types:{date:"yyyy-MM-dd","datetime-local":"yyyy-MM-ddTHH:mm:ss.sss",month:"yyyy-MM"},currentText:"Today",clearText:"Clear",closeText:"Done",closeOnDateSelection:!0,appendToBody:!1,showButtonBar:!0,onOpenFocus:!0,altInputFormats:[]}).controller("UibDatepickerPopupController",["$scope","$element","$attrs","$compile","$parse","$document","$rootScope","$uibPosition","dateFilter","uibDateParser","uibDatepickerPopupConfig","$timeout","uibDatepickerConfig",function(a,b,c,d,e,f,g,h,i,j,k,l,m){function n(a){return a.replace(/([A-Z])/g,function(a){return"-"+a.toLowerCase()})}function o(b){var c=j.parse(b,t,a.date);if(isNaN(c))for(var d=0;d<E.length;d++)if(c=j.parse(b,E[d],a.date),!isNaN(c))return c;return c}function p(a){if(angular.isNumber(a)&&(a=new Date(a)),!a)return null;if(angular.isDate(a)&&!isNaN(a))return a;if(angular.isString(a)){var b=o(a);if(!isNaN(b))return j.toTimezone(b,C.timezone)}return B.$options&&B.$options.allowInvalid?a:void 0}function q(a,b){var d=a||b;return c.ngRequired||d?(angular.isNumber(d)&&(d=new Date(d)),d?angular.isDate(d)&&!isNaN(d)?!0:angular.isString(d)?!isNaN(o(b)):!1:!0):!0}function r(c){if(a.isOpen||!a.disabled){var d=D[0],e=b[0].contains(c.target),f=void 0!==d.contains&&d.contains(c.target);!a.isOpen||e||f||a.$apply(function(){a.isOpen=!1})}}function s(c){27===c.which&&a.isOpen?(c.preventDefault(),c.stopPropagation(),a.$apply(function(){a.isOpen=!1}),b[0].focus()):40!==c.which||a.isOpen||(c.preventDefault(),c.stopPropagation(),a.$apply(function(){a.isOpen=!0}))}var t,u,v,w,x,y,z,A,B,C,D,E,F={},G=!1;a.watchData={},this.init=function(h){if(B=h,C=h.$options||m.ngModelOptions,u=angular.isDefined(c.closeOnDateSelection)?a.$parent.$eval(c.closeOnDateSelection):k.closeOnDateSelection,v=angular.isDefined(c.datepickerAppendToBody)?a.$parent.$eval(c.datepickerAppendToBody):k.appendToBody,w=angular.isDefined(c.onOpenFocus)?a.$parent.$eval(c.onOpenFocus):k.onOpenFocus,x=angular.isDefined(c.datepickerPopupTemplateUrl)?c.datepickerPopupTemplateUrl:k.datepickerPopupTemplateUrl,y=angular.isDefined(c.datepickerTemplateUrl)?c.datepickerTemplateUrl:k.datepickerTemplateUrl,E=angular.isDefined(c.altInputFormats)?a.$parent.$eval(c.altInputFormats):k.altInputFormats,a.showButtonBar=angular.isDefined(c.showButtonBar)?a.$parent.$eval(c.showButtonBar):k.showButtonBar,k.html5Types[c.type]?(t=k.html5Types[c.type],G=!0):(t=c.uibDatepickerPopup||k.datepickerPopup,c.$observe("uibDatepickerPopup",function(a,b){var c=a||k.datepickerPopup;if(c!==t&&(t=c,B.$modelValue=null,!t))throw new Error("uibDatepickerPopup must have a date format specified.")})),!t)throw new Error("uibDatepickerPopup must have a date format specified.");if(G&&c.uibDatepickerPopup)throw new Error("HTML5 date input types do not support custom formats.");if(z=angular.element("<div uib-datepicker-popup-wrap><div uib-datepicker></div></div>"),a.ngModelOptions=angular.copy(C),a.ngModelOptions.timezone=null,z.attr({"ng-model":"date","ng-model-options":"ngModelOptions","ng-change":"dateSelection(date)","template-url":x}),A=angular.element(z.children()[0]),A.attr("template-url",y),G&&"month"===c.type&&(A.attr("datepicker-mode",'"month"'),A.attr("min-mode","month")),c.datepickerOptions){var l=a.$parent.$eval(c.datepickerOptions);l&&l.initDate&&(a.initDate=j.fromTimezone(l.initDate,C.timezone),A.attr("init-date","initDate"),delete l.initDate),angular.forEach(l,function(a,b){A.attr(n(b),a)})}angular.forEach(["minMode","maxMode"],function(b){c[b]&&(a.$parent.$watch(function(){return c[b]},function(c){a.watchData[b]=c}),A.attr(n(b),"watchData."+b))}),angular.forEach(["datepickerMode","shortcutPropagation"],function(b){if(c[b]){var d=e(c[b]),f={get:function(){return d(a.$parent)}};if(A.attr(n(b),"watchData."+b),"datepickerMode"===b){var g=d.assign;f.set=function(b){g(a.$parent,b)}}Object.defineProperty(a.watchData,b,f)}}),angular.forEach(["minDate","maxDate","initDate"],function(b){if(c[b]){var d=e(c[b]);a.$parent.$watch(d,function(c){("minDate"===b||"maxDate"===b)&&(F[b]=angular.isDate(c)?j.fromTimezone(new Date(c),C.timezone):new Date(i(c,"medium"))),a.watchData[b]=F[b]||j.fromTimezone(new Date(c),C.timezone)}),A.attr(n(b),"watchData."+b)}}),c.dateDisabled&&A.attr("date-disabled","dateDisabled({ date: date, mode: mode })"),angular.forEach(["formatDay","formatMonth","formatYear","formatDayHeader","formatDayTitle","formatMonthTitle","showWeeks","startingDay","yearRows","yearColumns"],function(a){angular.isDefined(c[a])&&A.attr(n(a),c[a])}),c.customClass&&A.attr("custom-class","customClass({ date: date, mode: mode })"),G?B.$formatters.push(function(b){return a.date=j.fromTimezone(b,C.timezone),b}):(B.$$parserName="date",B.$validators.date=q,B.$parsers.unshift(p),B.$formatters.push(function(b){return B.$isEmpty(b)?(a.date=b,b):(a.date=j.fromTimezone(b,C.timezone),t=t.replace(/M!/,"MM").replace(/d!/,"dd"),i(a.date,t))})),B.$viewChangeListeners.push(function(){a.date=o(B.$viewValue)}),b.bind("keydown",s),D=d(z)(a),z.remove(),v?f.find("body").append(D):b.after(D),a.$on("$destroy",function(){a.isOpen===!0&&(g.$$phase||a.$apply(function(){a.isOpen=!1})),D.remove(),b.unbind("keydown",s),f.unbind("click",r)})},a.getText=function(b){return a[b+"Text"]||k[b+"Text"]},a.isDisabled=function(b){return"today"===b&&(b=new Date),a.watchData.minDate&&a.compare(b,F.minDate)<0||a.watchData.maxDate&&a.compare(b,F.maxDate)>0},a.compare=function(a,b){return new Date(a.getFullYear(),a.getMonth(),a.getDate())-new Date(b.getFullYear(),b.getMonth(),b.getDate())},a.dateSelection=function(c){angular.isDefined(c)&&(a.date=c);var d=a.date?i(a.date,t):null;b.val(d),B.$setViewValue(d),u&&(a.isOpen=!1,b[0].focus())},a.keydown=function(c){27===c.which&&(c.stopPropagation(),a.isOpen=!1,b[0].focus())},a.select=function(b){if("today"===b){var c=new Date;angular.isDate(a.date)?(b=new Date(a.date),b.setFullYear(c.getFullYear(),c.getMonth(),c.getDate())):b=new Date(c.setHours(0,0,0,0))}a.dateSelection(b)},a.close=function(){a.isOpen=!1,b[0].focus()},a.disabled=angular.isDefined(c.disabled)||!1,c.ngDisabled&&a.$parent.$watch(e(c.ngDisabled),function(b){a.disabled=b}),a.$watch("isOpen",function(c){c?a.disabled?a.isOpen=!1:(a.position=v?h.offset(b):h.position(b),a.position.top=a.position.top+b.prop("offsetHeight"),l(function(){w&&a.$broadcast("uib:datepicker.focus"),f.bind("click",r)},0,!1)):f.unbind("click",r)})}]).directive("uibDatepickerPopup",function(){return{require:["ngModel","uibDatepickerPopup"],controller:"UibDatepickerPopupController",scope:{isOpen:"=?",currentText:"@",clearText:"@",closeText:"@",dateDisabled:"&",customClass:"&"},link:function(a,b,c,d){var e=d[0],f=d[1];f.init(e)}}}).directive("uibDatepickerPopupWrap",function(){return{replace:!0,transclude:!0,templateUrl:function(a,b){return b.templateUrl||"uib/template/datepicker/popup.html"}}}),angular.module("ui.bootstrap.debounce",[]).factory("$$debounce",["$timeout",function(a){return function(b,c){var d;return function(){var e=this,f=Array.prototype.slice.call(arguments);d&&a.cancel(d),d=a(function(){b.apply(e,f)},c)}}}]),angular.module("ui.bootstrap.dropdown",["ui.bootstrap.position"]).constant("uibDropdownConfig",{appendToOpenClass:"uib-dropdown-open",openClass:"open"}).service("uibDropdownService",["$document","$rootScope",function(a,b){var c=null;this.open=function(b){c||(a.on("click",d),a.on("keydown",e)),c&&c!==b&&(c.isOpen=!1),c=b},this.close=function(b){c===b&&(c=null,a.off("click",d),a.off("keydown",e))};var d=function(a){if(c&&!(a&&"disabled"===c.getAutoClose()||a&&3===a.which)){var d=c.getToggleElement();if(!(a&&d&&d[0].contains(a.target))){var e=c.getDropdownElement();a&&"outsideClick"===c.getAutoClose()&&e&&e[0].contains(a.target)||(c.isOpen=!1,b.$$phase||c.$apply())}}},e=function(a){27===a.which?(c.focusToggleElement(),d()):c.isKeynavEnabled()&&-1!==[38,40].indexOf(a.which)&&c.isOpen&&(a.preventDefault(),a.stopPropagation(),c.focusDropdownEntry(a.which))}}]).controller("UibDropdownController",["$scope","$element","$attrs","$parse","uibDropdownConfig","uibDropdownService","$animate","$uibPosition","$document","$compile","$templateRequest",function(a,b,c,d,e,f,g,h,i,j,k){var l,m,n=this,o=a.$new(),p=e.appendToOpenClass,q=e.openClass,r=angular.noop,s=c.onToggle?d(c.onToggle):angular.noop,t=!1,u=null,v=!1,w=i.find("body");b.addClass("dropdown"),this.init=function(){if(c.isOpen&&(m=d(c.isOpen),r=m.assign,a.$watch(m,function(a){o.isOpen=!!a})),angular.isDefined(c.dropdownAppendTo)){var e=d(c.dropdownAppendTo)(o);e&&(u=angular.element(e))}t=angular.isDefined(c.dropdownAppendToBody),v=angular.isDefined(c.keyboardNav),t&&!u&&(u=w),u&&n.dropdownMenu&&(u.append(n.dropdownMenu),b.on("$destroy",function(){n.dropdownMenu.remove()}))},this.toggle=function(a){return o.isOpen=arguments.length?!!a:!o.isOpen},this.isOpen=function(){return o.isOpen},o.getToggleElement=function(){return n.toggleElement},o.getAutoClose=function(){return c.autoClose||"always"},o.getElement=function(){return b},o.isKeynavEnabled=function(){return v},o.focusDropdownEntry=function(a){var c=n.dropdownMenu?angular.element(n.dropdownMenu).find("a"):b.find("ul").eq(0).find("a");switch(a){case 40:angular.isNumber(n.selectedOption)?n.selectedOption=n.selectedOption===c.length-1?n.selectedOption:n.selectedOption+1:n.selectedOption=0;break;case 38:angular.isNumber(n.selectedOption)?n.selectedOption=0===n.selectedOption?0:n.selectedOption-1:n.selectedOption=c.length-1}c[n.selectedOption].focus()},o.getDropdownElement=function(){return n.dropdownMenu},o.focusToggleElement=function(){n.toggleElement&&n.toggleElement[0].focus()},o.$watch("isOpen",function(c,d){if(u&&n.dropdownMenu){var e,i,m=h.positionElements(b,n.dropdownMenu,"bottom-left",!0);if(e={top:m.top+"px",display:c?"block":"none"},i=n.dropdownMenu.hasClass("dropdown-menu-right"),i?(e.left="auto",e.right=window.innerWidth-(m.left+b.prop("offsetWidth"))+"px"):(e.left=m.left+"px",e.right="auto"),!t){var v=h.offset(u);e.top=m.top-v.top+"px",i?e.right=window.innerWidth-(m.left-v.left+b.prop("offsetWidth"))+"px":e.left=m.left-v.left+"px"}n.dropdownMenu.css(e)}var w=u?u:b;if(g[c?"addClass":"removeClass"](w,u?p:q).then(function(){angular.isDefined(c)&&c!==d&&s(a,{open:!!c})}),c)n.dropdownMenuTemplateUrl&&k(n.dropdownMenuTemplateUrl).then(function(a){l=o.$new(),j(a.trim())(l,function(a){var b=a;n.dropdownMenu.replaceWith(b),n.dropdownMenu=b})}),o.focusToggleElement(),f.open(o);else{if(n.dropdownMenuTemplateUrl){l&&l.$destroy();var x=angular.element('<ul class="dropdown-menu"></ul>');n.dropdownMenu.replaceWith(x),n.dropdownMenu=x}f.close(o),n.selectedOption=null}angular.isFunction(r)&&r(a,c)}),a.$on("$locationChangeSuccess",function(){"disabled"!==o.getAutoClose()&&(o.isOpen=!1)})}]).directive("uibDropdown",function(){return{controller:"UibDropdownController",link:function(a,b,c,d){d.init()}}}).directive("uibDropdownMenu",function(){return{restrict:"A",require:"?^uibDropdown",link:function(a,b,c,d){if(d&&!angular.isDefined(c.dropdownNested)){b.addClass("dropdown-menu");var e=c.templateUrl;e&&(d.dropdownMenuTemplateUrl=e),d.dropdownMenu||(d.dropdownMenu=b)}}}}).directive("uibDropdownToggle",function(){return{require:"?^uibDropdown",link:function(a,b,c,d){if(d){b.addClass("dropdown-toggle"),d.toggleElement=b;var e=function(e){e.preventDefault(),b.hasClass("disabled")||c.disabled||a.$apply(function(){d.toggle()})};b.bind("click",e),b.attr({"aria-haspopup":!0,"aria-expanded":!1}),a.$watch(d.isOpen,function(a){b.attr("aria-expanded",!!a)}),a.$on("$destroy",function(){b.unbind("click",e)})}}}}),angular.module("ui.bootstrap.stackedMap",[]).factory("$$stackedMap",function(){return{createNew:function(){var a=[];return{add:function(b,c){a.push({key:b,value:c})},get:function(b){for(var c=0;c<a.length;c++)if(b===a[c].key)return a[c]},keys:function(){for(var b=[],c=0;c<a.length;c++)b.push(a[c].key);return b},top:function(){return a[a.length-1]},remove:function(b){for(var c=-1,d=0;d<a.length;d++)if(b===a[d].key){c=d;break}return a.splice(c,1)[0]},removeTop:function(){return a.splice(a.length-1,1)[0]},length:function(){return a.length}}}}}),angular.module("ui.bootstrap.modal",["ui.bootstrap.stackedMap"]).factory("$$multiMap",function(){return{createNew:function(){var a={};return{entries:function(){return Object.keys(a).map(function(b){return{key:b,value:a[b]}})},get:function(b){return a[b]},hasKey:function(b){return!!a[b]},keys:function(){return Object.keys(a)},put:function(b,c){a[b]||(a[b]=[]),a[b].push(c)},remove:function(b,c){var d=a[b];if(d){var e=d.indexOf(c);-1!==e&&d.splice(e,1),d.length||delete a[b]}}}}}}).provider("$uibResolve",function(){var a=this;this.resolver=null,this.setResolver=function(a){this.resolver=a},this.$get=["$injector","$q",function(b,c){var d=a.resolver?b.get(a.resolver):null;return{resolve:function(a,e,f,g){if(d)return d.resolve(a,e,f,g);var h=[];return angular.forEach(a,function(a){angular.isFunction(a)||angular.isArray(a)?h.push(c.resolve(b.invoke(a))):angular.isString(a)?h.push(c.resolve(b.get(a))):h.push(c.resolve(a))}),c.all(h).then(function(b){var c={},d=0;return angular.forEach(a,function(a,e){c[e]=b[d++]}),c})}}}]}).directive("uibModalBackdrop",["$animateCss","$injector","$uibModalStack",function(a,b,c){function d(b,d,e){e.modalInClass&&(a(d,{addClass:e.modalInClass}).start(),b.$on(c.NOW_CLOSING_EVENT,function(c,f){var g=f();b.modalOptions.animation?a(d,{removeClass:e.modalInClass}).start().then(g):g()}))}return{replace:!0,templateUrl:"uib/template/modal/backdrop.html",compile:function(a,b){return a.addClass(b.backdropClass),d}}}]).directive("uibModalWindow",["$uibModalStack","$q","$animate","$animateCss","$document",function(a,b,c,d,e){return{scope:{index:"@"},replace:!0,transclude:!0,templateUrl:function(a,b){return b.templateUrl||"uib/template/modal/window.html"},link:function(f,g,h){g.addClass(h.windowClass||""),g.addClass(h.windowTopClass||""),f.size=h.size,f.close=function(b){var c=a.getTop();c&&c.value.backdrop&&"static"!==c.value.backdrop&&b.target===b.currentTarget&&(b.preventDefault(),b.stopPropagation(),a.dismiss(c.key,"backdrop click"))},g.on("click",f.close),f.$isRendered=!0;var i=b.defer();h.$observe("modalRender",function(a){"true"===a&&i.resolve()}),i.promise.then(function(){var i=null;h.modalInClass&&(i=d(g,{addClass:h.modalInClass}).start(),f.$on(a.NOW_CLOSING_EVENT,function(a,b){var e=b();d?d(g,{removeClass:h.modalInClass}).start().then(e):c.removeClass(g,h.modalInClass).then(e)})),b.when(i).then(function(){if(!e[0].activeElement||!g[0].contains(e[0].activeElement)){var a=g[0].querySelector("[autofocus]");a?a.focus():g[0].focus()}});var j=a.getTop();j&&a.modalRendered(j.key)})}}}]).directive("uibModalAnimationClass",function(){return{compile:function(a,b){b.modalAnimation&&a.addClass(b.uibModalAnimationClass)}}}).directive("uibModalTransclude",function(){return{link:function(a,b,c,d,e){e(a.$parent,function(a){b.empty(),b.append(a)})}}}).factory("$uibModalStack",["$animate","$animateCss","$document","$compile","$rootScope","$q","$$multiMap","$$stackedMap",function(a,b,c,d,e,f,g,h){function i(){for(var a=-1,b=t.keys(),c=0;c<b.length;c++)t.get(b[c]).value.backdrop&&(a=c);return a}function j(a,b){var c=t.get(a).value,d=c.appendTo;t.remove(a),m(c.modalDomEl,c.modalScope,function(){var b=c.openedClass||s;u.remove(b,a),d.toggleClass(b,u.hasKey(b)),k(!0)}),l(),b&&b.focus?b.focus():d.focus&&d.focus()}function k(a){var b;t.length()>0&&(b=t.top().value,b.modalDomEl.toggleClass(b.windowTopClass||"",a))}function l(){if(p&&-1===i()){var a=q;m(p,q,function(){a=null}),p=void 0,q=void 0}}function m(a,c,d,e){function g(){g.done||(g.done=!0,b(a,{event:"leave"}).start().then(function(){a.remove(),e&&e.resolve()}),c.$destroy(),d&&d())}var h,i=null,j=function(){return h||(h=f.defer(),i=h.promise),function(){h.resolve()}};return c.$broadcast(v.NOW_CLOSING_EVENT,j),f.when(i).then(g)}function n(a){if(a.isDefaultPrevented())return a;var b=t.top();if(b)switch(a.which){case 27:b.value.keyboard&&(a.preventDefault(),e.$apply(function(){v.dismiss(b.key,"escape key press")}));break;case 9:v.loadFocusElementList(b);var c=!1;a.shiftKey?v.isFocusInFirstItem(a)&&(c=v.focusLastFocusableElement()):v.isFocusInLastItem(a)&&(c=v.focusFirstFocusableElement()),c&&(a.preventDefault(),a.stopPropagation())}}function o(a,b,c){return!a.value.modalScope.$broadcast("modal.closing",b,c).defaultPrevented}var p,q,r,s="modal-open",t=h.createNew(),u=g.createNew(),v={NOW_CLOSING_EVENT:"modal.stack.now-closing"},w=0,x="a[href], area[href], input:not([disabled]), button:not([disabled]),select:not([disabled]), textarea:not([disabled]), iframe, object, embed, *[tabindex], *[contenteditable=true]";return e.$watch(i,function(a){q&&(q.index=a)}),c.on("keydown",n),e.$on("$destroy",function(){c.off("keydown",n)}),v.open=function(b,f){var g=c[0].activeElement,h=f.openedClass||s;k(!1),t.add(b,{deferred:f.deferred,renderDeferred:f.renderDeferred,closedDeferred:f.closedDeferred,modalScope:f.scope,backdrop:f.backdrop,keyboard:f.keyboard,openedClass:f.openedClass,windowTopClass:f.windowTopClass,animation:f.animation,appendTo:f.appendTo}),u.put(h,b);var j=f.appendTo,l=i();if(!j.length)throw new Error("appendTo element not found. Make sure that the element passed is in DOM.");l>=0&&!p&&(q=e.$new(!0),q.modalOptions=f,q.index=l,p=angular.element('<div uib-modal-backdrop="modal-backdrop"></div>'),p.attr("backdrop-class",f.backdropClass),f.animation&&p.attr("modal-animation","true"),d(p)(q),a.enter(p,j));var m=angular.element('<div uib-modal-window="modal-window"></div>');m.attr({"template-url":f.windowTemplateUrl,"window-class":f.windowClass,"window-top-class":f.windowTopClass,size:f.size,index:t.length()-1,animate:"animate"}).html(f.content),f.animation&&m.attr("modal-animation","true"),a.enter(m,j).then(function(){d(m)(f.scope),a.addClass(j,h)}),t.top().value.modalDomEl=m,t.top().value.modalOpener=g,v.clearFocusListCache()},v.close=function(a,b){var c=t.get(a);return c&&o(c,b,!0)?(c.value.modalScope.$$uibDestructionScheduled=!0,c.value.deferred.resolve(b),j(a,c.value.modalOpener),!0):!c},v.dismiss=function(a,b){var c=t.get(a);return c&&o(c,b,!1)?(c.value.modalScope.$$uibDestructionScheduled=!0,c.value.deferred.reject(b),j(a,c.value.modalOpener),!0):!c},v.dismissAll=function(a){for(var b=this.getTop();b&&this.dismiss(b.key,a);)b=this.getTop()},v.getTop=function(){return t.top()},v.modalRendered=function(a){var b=t.get(a);b&&b.value.renderDeferred.resolve()},v.focusFirstFocusableElement=function(){return r.length>0?(r[0].focus(),!0):!1},v.focusLastFocusableElement=function(){return r.length>0?(r[r.length-1].focus(),!0):!1},v.isFocusInFirstItem=function(a){return r.length>0?(a.target||a.srcElement)===r[0]:!1},v.isFocusInLastItem=function(a){return r.length>0?(a.target||a.srcElement)===r[r.length-1]:!1},v.clearFocusListCache=function(){r=[],w=0},v.loadFocusElementList=function(a){if((void 0===r||!r.length)&&a){var b=a.value.modalDomEl;b&&b.length&&(r=b[0].querySelectorAll(x))}},v}]).provider("$uibModal",function(){var a={options:{animation:!0,backdrop:!0,keyboard:!0},$get:["$rootScope","$q","$document","$templateRequest","$controller","$uibResolve","$uibModalStack",function(b,c,d,e,f,g,h){function i(a){return a.template?c.when(a.template):e(angular.isFunction(a.templateUrl)?a.templateUrl():a.templateUrl)}var j={},k=null;return j.getPromiseChain=function(){return k},j.open=function(e){function j(){return r}var l=c.defer(),m=c.defer(),n=c.defer(),o=c.defer(),p={result:l.promise,opened:m.promise,closed:n.promise,rendered:o.promise,close:function(a){return h.close(p,a)},dismiss:function(a){return h.dismiss(p,a)}};if(e=angular.extend({},a.options,e),e.resolve=e.resolve||{},e.appendTo=e.appendTo||d.find("body").eq(0),!e.template&&!e.templateUrl)throw new Error("One of template or templateUrl options is required.");var q,r=c.all([i(e),g.resolve(e.resolve,{},null,null)]);return q=k=c.all([k]).then(j,j).then(function(a){var c=e.scope||b,d=c.$new();d.$close=p.close,d.$dismiss=p.dismiss,d.$on("$destroy",function(){d.$$uibDestructionScheduled||d.$dismiss("$uibUnscheduledDestruction")});var g,i={};e.controller&&(i.$scope=d,i.$uibModalInstance=p,angular.forEach(a[1],function(a,b){i[b]=a}),g=f(e.controller,i),e.controllerAs&&(e.bindToController&&(g.$close=d.$close,g.$dismiss=d.$dismiss,angular.extend(g,c)),d[e.controllerAs]=g)),h.open(p,{scope:d,deferred:l,renderDeferred:o,closedDeferred:n,content:a[0],animation:e.animation,backdrop:e.backdrop,keyboard:e.keyboard,backdropClass:e.backdropClass,windowTopClass:e.windowTopClass,windowClass:e.windowClass,windowTemplateUrl:e.windowTemplateUrl,size:e.size,openedClass:e.openedClass,appendTo:e.appendTo}),m.resolve(!0)},function(a){m.reject(a),l.reject(a)})["finally"](function(){k===q&&(k=null)}),p},j}]};return a}),angular.module("ui.bootstrap.paging",[]).factory("uibPaging",["$parse",function(a){return{create:function(b,c,d){b.setNumPages=d.numPages?a(d.numPages).assign:angular.noop,b.ngModelCtrl={$setViewValue:angular.noop},b.init=function(e,f){b.ngModelCtrl=e,b.config=f,e.$render=function(){b.render()},d.itemsPerPage?c.$parent.$watch(a(d.itemsPerPage),function(a){b.itemsPerPage=parseInt(a,10),c.totalPages=b.calculateTotalPages(),b.updatePage()}):b.itemsPerPage=f.itemsPerPage,c.$watch("totalItems",function(a,d){(angular.isDefined(a)||a!==d)&&(c.totalPages=b.calculateTotalPages(),b.updatePage())})},b.calculateTotalPages=function(){var a=b.itemsPerPage<1?1:Math.ceil(c.totalItems/b.itemsPerPage);return Math.max(a||0,1)},b.render=function(){c.page=parseInt(b.ngModelCtrl.$viewValue,10)||1},c.selectPage=function(a,d){d&&d.preventDefault();var e=!c.ngDisabled||!d;e&&c.page!==a&&a>0&&a<=c.totalPages&&(d&&d.target&&d.target.blur(),b.ngModelCtrl.$setViewValue(a),b.ngModelCtrl.$render())},c.getText=function(a){return c[a+"Text"]||b.config[a+"Text"]},c.noPrevious=function(){return 1===c.page},c.noNext=function(){return c.page===c.totalPages},b.updatePage=function(){b.setNumPages(c.$parent,c.totalPages),c.page>c.totalPages?c.selectPage(c.totalPages):b.ngModelCtrl.$render()}}}}]),angular.module("ui.bootstrap.pager",["ui.bootstrap.paging"]).controller("UibPagerController",["$scope","$attrs","uibPaging","uibPagerConfig",function(a,b,c,d){a.align=angular.isDefined(b.align)?a.$parent.$eval(b.align):d.align,c.create(this,a,b)}]).constant("uibPagerConfig",{itemsPerPage:10,previousText:" Previous",nextText:"Next ",align:!0}).directive("uibPager",["uibPagerConfig",function(a){return{scope:{totalItems:"=",previousText:"@",nextText:"@",ngDisabled:"="},require:["uibPager","?ngModel"],controller:"UibPagerController",controllerAs:"pager",templateUrl:function(a,b){return b.templateUrl||"uib/template/pager/pager.html"},replace:!0,link:function(b,c,d,e){var f=e[0],g=e[1];g&&f.init(g,a)}}}]),angular.module("ui.bootstrap.pagination",["ui.bootstrap.paging"]).controller("UibPaginationController",["$scope","$attrs","$parse","uibPaging","uibPaginationConfig",function(a,b,c,d,e){function f(a,b,c){return{number:a,text:b,active:c}}function g(a,b){var c=[],d=1,e=b,g=angular.isDefined(i)&&b>i;g&&(j?(d=Math.max(a-Math.floor(i/2),1),e=d+i-1,e>b&&(e=b,d=e-i+1)):(d=(Math.ceil(a/i)-1)*i+1,e=Math.min(d+i-1,b)));for(var h=d;e>=h;h++){var m=f(h,h,h===a);c.push(m)}if(g&&i>0&&(!j||k||l)){if(d>1){if(!l||d>3){var n=f(d-1,"...",!1);c.unshift(n)}if(l){if(3===d){var o=f(2,"2",!1);c.unshift(o)}var p=f(1,"1",!1);c.unshift(p)}}if(b>e){if(!l||b-2>e){var q=f(e+1,"...",!1);c.push(q)}if(l){if(e===b-2){var r=f(b-1,b-1,!1);c.push(r)}var s=f(b,b,!1);c.push(s)}}}return c}var h=this,i=angular.isDefined(b.maxSize)?a.$parent.$eval(b.maxSize):e.maxSize,j=angular.isDefined(b.rotate)?a.$parent.$eval(b.rotate):e.rotate,k=angular.isDefined(b.forceEllipses)?a.$parent.$eval(b.forceEllipses):e.forceEllipses,l=angular.isDefined(b.boundaryLinkNumbers)?a.$parent.$eval(b.boundaryLinkNumbers):e.boundaryLinkNumbers;a.boundaryLinks=angular.isDefined(b.boundaryLinks)?a.$parent.$eval(b.boundaryLinks):e.boundaryLinks,a.directionLinks=angular.isDefined(b.directionLinks)?a.$parent.$eval(b.directionLinks):e.directionLinks,d.create(this,a,b),b.maxSize&&a.$parent.$watch(c(b.maxSize),function(a){i=parseInt(a,10),h.render()});var m=this.render;this.render=function(){m(),a.page>0&&a.page<=a.totalPages&&(a.pages=g(a.page,a.totalPages))}}]).constant("uibPaginationConfig",{itemsPerPage:10,boundaryLinks:!1,boundaryLinkNumbers:!1,directionLinks:!0,firstText:"First",previousText:"Previous",nextText:"Next",lastText:"Last",rotate:!0,forceEllipses:!1}).directive("uibPagination",["$parse","uibPaginationConfig",function(a,b){return{scope:{totalItems:"=",firstText:"@",previousText:"@",nextText:"@",lastText:"@",ngDisabled:"="},require:["uibPagination","?ngModel"],controller:"UibPaginationController",controllerAs:"pagination",templateUrl:function(a,b){return b.templateUrl||"uib/template/pagination/pagination.html"},replace:!0,link:function(a,c,d,e){var f=e[0],g=e[1];g&&f.init(g,b)}}}]),angular.module("ui.bootstrap.tooltip",["ui.bootstrap.position","ui.bootstrap.stackedMap"]).provider("$uibTooltip",function(){function a(a){var b=/[A-Z]/g,c="-";return a.replace(b,function(a,b){return(b?c:"")+a.toLowerCase()})}var b={placement:"top",placementClassPrefix:"",animation:!0,popupDelay:0,popupCloseDelay:0,useContentExp:!1},c={mouseenter:"mouseleave",click:"click",outsideClick:"outsideClick",focus:"blur",none:""},d={};this.options=function(a){angular.extend(d,a)},this.setTriggers=function(a){angular.extend(c,a)},this.$get=["$window","$compile","$timeout","$document","$uibPosition","$interpolate","$rootScope","$parse","$$stackedMap",function(e,f,g,h,i,j,k,l,m){function n(a){if(27===a.which){var b=o.top();b&&(b.value.close(),o.removeTop(),b=null)}}var o=m.createNew();return h.on("keypress",n),k.$on("$destroy",function(){h.off("keypress",n)}),function(e,k,m,n){function p(a){var b=(a||n.trigger||m).split(" "),d=b.map(function(a){return c[a]||a});return{show:b,hide:d}}n=angular.extend({},b,d,n);var q=a(e),r=j.startSymbol(),s=j.endSymbol(),t="<div "+q+'-popup title="'+r+"title"+s+'" '+(n.useContentExp?'content-exp="contentExp()" ':'content="'+r+"content"+s+'" ')+'placement="'+r+"placement"+s+'" popup-class="'+r+"popupClass"+s+'" animation="animation" is-open="isOpen"origin-scope="origScope" style="visibility: hidden; display: block; top: -9999px; left: -9999px;"></div>';return{compile:function(a,b){var c=f(t);return function(a,b,d,f){function j(){M.isOpen?q():m()}function m(){(!L||a.$eval(d[k+"Enable"]))&&(u(),x(),M.popupDelay?G||(G=g(r,M.popupDelay,!1)):r())}function q(){s(),M.popupCloseDelay?H||(H=g(t,M.popupCloseDelay,!1)):t()}function r(){return s(),u(),M.content?(v(),void M.$evalAsync(function(){M.isOpen=!0,y(!0),R()})):angular.noop}function s(){G&&(g.cancel(G),G=null),I&&(g.cancel(I),I=null)}function t(){M&&M.$evalAsync(function(){M.isOpen=!1,y(!1),M.animation?F||(F=g(w,150,!1)):w()})}function u(){H&&(g.cancel(H),H=null),F&&(g.cancel(F),F=null)}function v(){D||(E=M.$new(),D=c(E,function(a){J?h.find("body").append(a):b.after(a)}),z())}function w(){s(),u(),A(),D&&(D.remove(),D=null),E&&(E.$destroy(),E=null)}function x(){M.title=d[k+"Title"],P?M.content=P(a):M.content=d[e],M.popupClass=d[k+"Class"],M.placement=angular.isDefined(d[k+"Placement"])?d[k+"Placement"]:n.placement;var b=parseInt(d[k+"PopupDelay"],10),c=parseInt(d[k+"PopupCloseDelay"],10);M.popupDelay=isNaN(b)?n.popupDelay:b,M.popupCloseDelay=isNaN(c)?n.popupCloseDelay:c}function y(b){O&&angular.isFunction(O.assign)&&O.assign(a,b)}function z(){Q.length=0,P?(Q.push(a.$watch(P,function(a){M.content=a,!a&&M.isOpen&&t()})),Q.push(E.$watch(function(){N||(N=!0,E.$$postDigest(function(){N=!1,M&&M.isOpen&&R()}))}))):Q.push(d.$observe(e,function(a){M.content=a,!a&&M.isOpen?t():R()})),Q.push(d.$observe(k+"Title",function(a){M.title=a,M.isOpen&&R()})),Q.push(d.$observe(k+"Placement",function(a){M.placement=a?a:n.placement,M.isOpen&&R()}))}function A(){Q.length&&(angular.forEach(Q,function(a){a()}),Q.length=0)}function B(a){M&&M.isOpen&&D&&(b[0].contains(a.target)||D[0].contains(a.target)||q())}function C(){var a=d[k+"Trigger"];S(),K=p(a),"none"!==K.show&&K.show.forEach(function(a,c){"outsideClick"===a?(b.on("click",j),h.on("click",B)):a===K.hide[c]?b.on(a,j):a&&(b.on(a,m),b.on(K.hide[c],q)),b.on("keypress",function(a){27===a.which&&q()})})}var D,E,F,G,H,I,J=angular.isDefined(n.appendToBody)?n.appendToBody:!1,K=p(void 0),L=angular.isDefined(d[k+"Enable"]),M=a.$new(!0),N=!1,O=angular.isDefined(d[k+"IsOpen"])?l(d[k+"IsOpen"]):!1,P=n.useContentExp?l(d[e]):!1,Q=[],R=function(){D&&D.html()&&(I||(I=g(function(){D.css({top:0,left:0});var a=i.positionElements(b,D,M.placement,J);D.css({top:a.top+"px",left:a.left+"px",visibility:"visible"}),n.placementClassPrefix&&D.removeClass("top bottom left right"),D.removeClass(n.placementClassPrefix+"top "+n.placementClassPrefix+"top-left "+n.placementClassPrefix+"top-right "+n.placementClassPrefix+"bottom "+n.placementClassPrefix+"bottom-left "+n.placementClassPrefix+"bottom-right "+n.placementClassPrefix+"left "+n.placementClassPrefix+"left-top "+n.placementClassPrefix+"left-bottom "+n.placementClassPrefix+"right "+n.placementClassPrefix+"right-top "+n.placementClassPrefix+"right-bottom");var c=a.placement.split("-");D.addClass(c[0],n.placementClassPrefix+a.placement),i.positionArrow(D,a.placement),I=null},0,!1)))};M.origScope=a,M.isOpen=!1,o.add(M,{close:t}),M.contentExp=function(){return M.content},d.$observe("disabled",function(a){a&&s(),a&&M.isOpen&&t()}),O&&a.$watch(O,function(a){M&&!a===M.isOpen&&j()});var S=function(){K.show.forEach(function(a){"outsideClick"===a?b.off("click",j):(b.off(a,m),b.off(a,j))}),K.hide.forEach(function(a){"outsideClick"===a?h.off("click",B):b.off(a,q)})};C();var T=a.$eval(d[k+"Animation"]);M.animation=angular.isDefined(T)?!!T:n.animation;var U,V=k+"AppendToBody";U=V in d&&void 0===d[V]?!0:a.$eval(d[V]),J=angular.isDefined(U)?U:J,J&&a.$on("$locationChangeSuccess",function(){M.isOpen&&t()}),a.$on("$destroy",function(){S(),w(),o.remove(M),M=null})}}}}}]}).directive("uibTooltipTemplateTransclude",["$animate","$sce","$compile","$templateRequest",function(a,b,c,d){return{link:function(e,f,g){var h,i,j,k=e.$eval(g.tooltipTemplateTranscludeScope),l=0,m=function(){i&&(i.remove(),i=null),h&&(h.$destroy(),h=null),j&&(a.leave(j).then(function(){i=null}),i=j,j=null)};e.$watch(b.parseAsResourceUrl(g.uibTooltipTemplateTransclude),function(b){var g=++l;b?(d(b,!0).then(function(d){if(g===l){var e=k.$new(),i=d,n=c(i)(e,function(b){m(),a.enter(b,f)});h=e,j=n,h.$emit("$includeContentLoaded",b)}},function(){g===l&&(m(),e.$emit("$includeContentError",b))}),e.$emit("$includeContentRequested",b)):m()}),e.$on("$destroy",m)}}}]).directive("uibTooltipClasses",["$uibPosition",function(a){return{restrict:"A",link:function(b,c,d){if(b.placement){var e=a.parsePlacement(b.placement);c.addClass(e[0])}else c.addClass("top");b.popupClass&&c.addClass(b.popupClass),b.animation()&&c.addClass(d.tooltipAnimationClass)}}}]).directive("uibTooltipPopup",function(){return{replace:!0,scope:{content:"@",placement:"@",popupClass:"@",animation:"&",isOpen:"&"},templateUrl:"uib/template/tooltip/tooltip-popup.html"}}).directive("uibTooltip",["$uibTooltip",function(a){return a("uibTooltip","tooltip","mouseenter")}]).directive("uibTooltipTemplatePopup",function(){return{replace:!0,scope:{contentExp:"&",placement:"@",popupClass:"@",animation:"&",isOpen:"&",originScope:"&"},templateUrl:"uib/template/tooltip/tooltip-template-popup.html"}}).directive("uibTooltipTemplate",["$uibTooltip",function(a){return a("uibTooltipTemplate","tooltip","mouseenter",{useContentExp:!0})}]).directive("uibTooltipHtmlPopup",function(){return{replace:!0,scope:{contentExp:"&",
placement:"@",popupClass:"@",animation:"&",isOpen:"&"},templateUrl:"uib/template/tooltip/tooltip-html-popup.html"}}).directive("uibTooltipHtml",["$uibTooltip",function(a){return a("uibTooltipHtml","tooltip","mouseenter",{useContentExp:!0})}]),angular.module("ui.bootstrap.popover",["ui.bootstrap.tooltip"]).directive("uibPopoverTemplatePopup",function(){return{replace:!0,scope:{title:"@",contentExp:"&",placement:"@",popupClass:"@",animation:"&",isOpen:"&",originScope:"&"},templateUrl:"uib/template/popover/popover-template.html"}}).directive("uibPopoverTemplate",["$uibTooltip",function(a){return a("uibPopoverTemplate","popover","click",{useContentExp:!0})}]).directive("uibPopoverHtmlPopup",function(){return{replace:!0,scope:{contentExp:"&",title:"@",placement:"@",popupClass:"@",animation:"&",isOpen:"&"},templateUrl:"uib/template/popover/popover-html.html"}}).directive("uibPopoverHtml",["$uibTooltip",function(a){return a("uibPopoverHtml","popover","click",{useContentExp:!0})}]).directive("uibPopoverPopup",function(){return{replace:!0,scope:{title:"@",content:"@",placement:"@",popupClass:"@",animation:"&",isOpen:"&"},templateUrl:"uib/template/popover/popover.html"}}).directive("uibPopover",["$uibTooltip",function(a){return a("uibPopover","popover","click")}]),angular.module("ui.bootstrap.progressbar",[]).constant("uibProgressConfig",{animate:!0,max:100}).controller("UibProgressController",["$scope","$attrs","uibProgressConfig",function(a,b,c){var d=this,e=angular.isDefined(b.animate)?a.$parent.$eval(b.animate):c.animate;this.bars=[],a.max=angular.isDefined(a.max)?a.max:c.max,this.addBar=function(b,c,f){e||c.css({transition:"none"}),this.bars.push(b),b.max=a.max,b.title=f&&angular.isDefined(f.title)?f.title:"progressbar",b.$watch("value",function(a){b.recalculatePercentage()}),b.recalculatePercentage=function(){var a=d.bars.reduce(function(a,b){return b.percent=+(100*b.value/b.max).toFixed(2),a+b.percent},0);a>100&&(b.percent-=a-100)},b.$on("$destroy",function(){c=null,d.removeBar(b)})},this.removeBar=function(a){this.bars.splice(this.bars.indexOf(a),1),this.bars.forEach(function(a){a.recalculatePercentage()})},a.$watch("max",function(b){d.bars.forEach(function(b){b.max=a.max,b.recalculatePercentage()})})}]).directive("uibProgress",function(){return{replace:!0,transclude:!0,controller:"UibProgressController",require:"uibProgress",scope:{max:"=?"},templateUrl:"uib/template/progressbar/progress.html"}}).directive("uibBar",function(){return{replace:!0,transclude:!0,require:"^uibProgress",scope:{value:"=",type:"@"},templateUrl:"uib/template/progressbar/bar.html",link:function(a,b,c,d){d.addBar(a,b,c)}}}).directive("uibProgressbar",function(){return{replace:!0,transclude:!0,controller:"UibProgressController",scope:{value:"=",max:"=?",type:"@"},templateUrl:"uib/template/progressbar/progressbar.html",link:function(a,b,c,d){d.addBar(a,angular.element(b.children()[0]),{title:c.title})}}}),angular.module("ui.bootstrap.rating",[]).constant("uibRatingConfig",{max:5,stateOn:null,stateOff:null,titles:["one","two","three","four","five"]}).controller("UibRatingController",["$scope","$attrs","uibRatingConfig",function(a,b,c){var d={$setViewValue:angular.noop};this.init=function(e){d=e,d.$render=this.render,d.$formatters.push(function(a){return angular.isNumber(a)&&a<<0!==a&&(a=Math.round(a)),a}),this.stateOn=angular.isDefined(b.stateOn)?a.$parent.$eval(b.stateOn):c.stateOn,this.stateOff=angular.isDefined(b.stateOff)?a.$parent.$eval(b.stateOff):c.stateOff;var f=angular.isDefined(b.titles)?a.$parent.$eval(b.titles):c.titles;this.titles=angular.isArray(f)&&f.length>0?f:c.titles;var g=angular.isDefined(b.ratingStates)?a.$parent.$eval(b.ratingStates):new Array(angular.isDefined(b.max)?a.$parent.$eval(b.max):c.max);a.range=this.buildTemplateObjects(g)},this.buildTemplateObjects=function(a){for(var b=0,c=a.length;c>b;b++)a[b]=angular.extend({index:b},{stateOn:this.stateOn,stateOff:this.stateOff,title:this.getTitle(b)},a[b]);return a},this.getTitle=function(a){return a>=this.titles.length?a+1:this.titles[a]},a.rate=function(b){!a.readonly&&b>=0&&b<=a.range.length&&(d.$setViewValue(d.$viewValue===b?0:b),d.$render())},a.enter=function(b){a.readonly||(a.value=b),a.onHover({value:b})},a.reset=function(){a.value=d.$viewValue,a.onLeave()},a.onKeydown=function(b){/(37|38|39|40)/.test(b.which)&&(b.preventDefault(),b.stopPropagation(),a.rate(a.value+(38===b.which||39===b.which?1:-1)))},this.render=function(){a.value=d.$viewValue}}]).directive("uibRating",function(){return{require:["uibRating","ngModel"],scope:{readonly:"=?",onHover:"&",onLeave:"&"},controller:"UibRatingController",templateUrl:"uib/template/rating/rating.html",replace:!0,link:function(a,b,c,d){var e=d[0],f=d[1];e.init(f)}}}),angular.module("ui.bootstrap.tabs",[]).controller("UibTabsetController",["$scope",function(a){var b=this,c=b.tabs=a.tabs=[];b.select=function(a){angular.forEach(c,function(b){b.active&&b!==a&&(b.active=!1,b.onDeselect(),a.selectCalled=!1)}),a.active=!0,a.selectCalled||(a.onSelect(),a.selectCalled=!0)},b.addTab=function(a){c.push(a),1===c.length&&a.active!==!1?a.active=!0:a.active?b.select(a):a.active=!1},b.removeTab=function(a){var e=c.indexOf(a);if(a.active&&c.length>1&&!d){var f=e===c.length-1?e-1:e+1;b.select(c[f])}c.splice(e,1)};var d;a.$on("$destroy",function(){d=!0})}]).directive("uibTabset",function(){return{transclude:!0,replace:!0,scope:{type:"@"},controller:"UibTabsetController",templateUrl:"uib/template/tabs/tabset.html",link:function(a,b,c){a.vertical=angular.isDefined(c.vertical)?a.$parent.$eval(c.vertical):!1,a.justified=angular.isDefined(c.justified)?a.$parent.$eval(c.justified):!1}}}).directive("uibTab",["$parse",function(a){return{require:"^uibTabset",replace:!0,templateUrl:"uib/template/tabs/tab.html",transclude:!0,scope:{active:"=?",heading:"@",onSelect:"&select",onDeselect:"&deselect"},controller:function(){},controllerAs:"tab",link:function(b,c,d,e,f){b.$watch("active",function(a){a&&e.select(b)}),b.disabled=!1,d.disable&&b.$parent.$watch(a(d.disable),function(a){b.disabled=!!a}),b.select=function(){b.disabled||(b.active=!0)},e.addTab(b),b.$on("$destroy",function(){e.removeTab(b)}),b.$transcludeFn=f}}}]).directive("uibTabHeadingTransclude",function(){return{restrict:"A",require:"^uibTab",link:function(a,b){a.$watch("headingElement",function(a){a&&(b.html(""),b.append(a))})}}}).directive("uibTabContentTransclude",function(){function a(a){return a.tagName&&(a.hasAttribute("uib-tab-heading")||a.hasAttribute("data-uib-tab-heading")||a.hasAttribute("x-uib-tab-heading")||"uib-tab-heading"===a.tagName.toLowerCase()||"data-uib-tab-heading"===a.tagName.toLowerCase()||"x-uib-tab-heading"===a.tagName.toLowerCase())}return{restrict:"A",require:"^uibTabset",link:function(b,c,d){var e=b.$eval(d.uibTabContentTransclude);e.$transcludeFn(e.$parent,function(b){angular.forEach(b,function(b){a(b)?e.headingElement=b:c.append(b)})})}}}),angular.module("ui.bootstrap.timepicker",[]).constant("uibTimepickerConfig",{hourStep:1,minuteStep:1,secondStep:1,showMeridian:!0,showSeconds:!1,meridians:null,readonlyInput:!1,mousewheel:!0,arrowkeys:!0,showSpinners:!0,templateUrl:"uib/template/timepicker/timepicker.html"}).controller("UibTimepickerController",["$scope","$element","$attrs","$parse","$log","$locale","uibTimepickerConfig",function(a,b,c,d,e,f,g){function h(){var b=+a.hours,c=a.showMeridian?b>0&&13>b:b>=0&&24>b;return c?(a.showMeridian&&(12===b&&(b=0),a.meridian===t[1]&&(b+=12)),b):void 0}function i(){var b=+a.minutes;return b>=0&&60>b?b:void 0}function j(){var b=+a.seconds;return b>=0&&60>b?b:void 0}function k(a){return null===a?"":angular.isDefined(a)&&a.toString().length<2?"0"+a:a.toString()}function l(a){m(),s.$setViewValue(new Date(r)),n(a)}function m(){s.$setValidity("time",!0),a.invalidHours=!1,a.invalidMinutes=!1,a.invalidSeconds=!1}function n(b){if(s.$modelValue){var c=r.getHours(),d=r.getMinutes(),e=r.getSeconds();a.showMeridian&&(c=0===c||12===c?12:c%12),a.hours="h"===b?c:k(c),"m"!==b&&(a.minutes=k(d)),a.meridian=r.getHours()<12?t[0]:t[1],"s"!==b&&(a.seconds=k(e)),a.meridian=r.getHours()<12?t[0]:t[1]}else a.hours=null,a.minutes=null,a.seconds=null,a.meridian=t[0]}function o(a){r=q(r,a),l()}function p(a,b){return q(a,60*b)}function q(a,b){var c=new Date(a.getTime()+1e3*b),d=new Date(a);return d.setHours(c.getHours(),c.getMinutes(),c.getSeconds()),d}var r=new Date,s={$setViewValue:angular.noop},t=angular.isDefined(c.meridians)?a.$parent.$eval(c.meridians):g.meridians||f.DATETIME_FORMATS.AMPMS;a.tabindex=angular.isDefined(c.tabindex)?c.tabindex:0,b.removeAttr("tabindex"),this.init=function(b,d){s=b,s.$render=this.render,s.$formatters.unshift(function(a){return a?new Date(a):null});var e=d.eq(0),f=d.eq(1),h=d.eq(2),i=angular.isDefined(c.mousewheel)?a.$parent.$eval(c.mousewheel):g.mousewheel;i&&this.setupMousewheelEvents(e,f,h);var j=angular.isDefined(c.arrowkeys)?a.$parent.$eval(c.arrowkeys):g.arrowkeys;j&&this.setupArrowkeyEvents(e,f,h),a.readonlyInput=angular.isDefined(c.readonlyInput)?a.$parent.$eval(c.readonlyInput):g.readonlyInput,this.setupInputEvents(e,f,h)};var u=g.hourStep;c.hourStep&&a.$parent.$watch(d(c.hourStep),function(a){u=+a});var v=g.minuteStep;c.minuteStep&&a.$parent.$watch(d(c.minuteStep),function(a){v=+a});var w;a.$parent.$watch(d(c.min),function(a){var b=new Date(a);w=isNaN(b)?void 0:b});var x;a.$parent.$watch(d(c.max),function(a){var b=new Date(a);x=isNaN(b)?void 0:b});var y=!1;c.ngDisabled&&a.$parent.$watch(d(c.ngDisabled),function(a){y=a}),a.noIncrementHours=function(){var a=p(r,60*u);return y||a>x||r>a&&w>a},a.noDecrementHours=function(){var a=p(r,60*-u);return y||w>a||a>r&&a>x},a.noIncrementMinutes=function(){var a=p(r,v);return y||a>x||r>a&&w>a},a.noDecrementMinutes=function(){var a=p(r,-v);return y||w>a||a>r&&a>x},a.noIncrementSeconds=function(){var a=q(r,z);return y||a>x||r>a&&w>a},a.noDecrementSeconds=function(){var a=q(r,-z);return y||w>a||a>r&&a>x},a.noToggleMeridian=function(){return r.getHours()<12?y||p(r,720)>x:y||p(r,-720)<w};var z=g.secondStep;c.secondStep&&a.$parent.$watch(d(c.secondStep),function(a){z=+a}),a.showSeconds=g.showSeconds,c.showSeconds&&a.$parent.$watch(d(c.showSeconds),function(b){a.showSeconds=!!b}),a.showMeridian=g.showMeridian,c.showMeridian&&a.$parent.$watch(d(c.showMeridian),function(b){if(a.showMeridian=!!b,s.$error.time){var c=h(),d=i();angular.isDefined(c)&&angular.isDefined(d)&&(r.setHours(c),l())}else n()}),this.setupMousewheelEvents=function(b,c,d){var e=function(a){a.originalEvent&&(a=a.originalEvent);var b=a.wheelDelta?a.wheelDelta:-a.deltaY;return a.detail||b>0};b.bind("mousewheel wheel",function(b){y||a.$apply(e(b)?a.incrementHours():a.decrementHours()),b.preventDefault()}),c.bind("mousewheel wheel",function(b){y||a.$apply(e(b)?a.incrementMinutes():a.decrementMinutes()),b.preventDefault()}),d.bind("mousewheel wheel",function(b){y||a.$apply(e(b)?a.incrementSeconds():a.decrementSeconds()),b.preventDefault()})},this.setupArrowkeyEvents=function(b,c,d){b.bind("keydown",function(b){y||(38===b.which?(b.preventDefault(),a.incrementHours(),a.$apply()):40===b.which&&(b.preventDefault(),a.decrementHours(),a.$apply()))}),c.bind("keydown",function(b){y||(38===b.which?(b.preventDefault(),a.incrementMinutes(),a.$apply()):40===b.which&&(b.preventDefault(),a.decrementMinutes(),a.$apply()))}),d.bind("keydown",function(b){y||(38===b.which?(b.preventDefault(),a.incrementSeconds(),a.$apply()):40===b.which&&(b.preventDefault(),a.decrementSeconds(),a.$apply()))})},this.setupInputEvents=function(b,c,d){if(a.readonlyInput)return a.updateHours=angular.noop,a.updateMinutes=angular.noop,void(a.updateSeconds=angular.noop);var e=function(b,c,d){s.$setViewValue(null),s.$setValidity("time",!1),angular.isDefined(b)&&(a.invalidHours=b),angular.isDefined(c)&&(a.invalidMinutes=c),angular.isDefined(d)&&(a.invalidSeconds=d)};a.updateHours=function(){var a=h(),b=i();s.$setDirty(),angular.isDefined(a)&&angular.isDefined(b)?(r.setHours(a),r.setMinutes(b),w>r||r>x?e(!0):l("h")):e(!0)},b.bind("blur",function(b){s.$setTouched(),null===a.hours||""===a.hours?e(!0):!a.invalidHours&&a.hours<10&&a.$apply(function(){a.hours=k(a.hours)})}),a.updateMinutes=function(){var a=i(),b=h();s.$setDirty(),angular.isDefined(a)&&angular.isDefined(b)?(r.setHours(b),r.setMinutes(a),w>r||r>x?e(void 0,!0):l("m")):e(void 0,!0)},c.bind("blur",function(b){s.$setTouched(),null===a.minutes?e(void 0,!0):!a.invalidMinutes&&a.minutes<10&&a.$apply(function(){a.minutes=k(a.minutes)})}),a.updateSeconds=function(){var a=j();s.$setDirty(),angular.isDefined(a)?(r.setSeconds(a),l("s")):e(void 0,void 0,!0)},d.bind("blur",function(b){!a.invalidSeconds&&a.seconds<10&&a.$apply(function(){a.seconds=k(a.seconds)})})},this.render=function(){var b=s.$viewValue;isNaN(b)?(s.$setValidity("time",!1),e.error('Timepicker directive: "ng-model" value must be a Date object, a number of milliseconds since 01.01.1970 or a string representing an RFC2822 or ISO 8601 date.')):(b&&(r=b),w>r||r>x?(s.$setValidity("time",!1),a.invalidHours=!0,a.invalidMinutes=!0):m(),n())},a.showSpinners=angular.isDefined(c.showSpinners)?a.$parent.$eval(c.showSpinners):g.showSpinners,a.incrementHours=function(){a.noIncrementHours()||o(60*u*60)},a.decrementHours=function(){a.noDecrementHours()||o(60*-u*60)},a.incrementMinutes=function(){a.noIncrementMinutes()||o(60*v)},a.decrementMinutes=function(){a.noDecrementMinutes()||o(60*-v)},a.incrementSeconds=function(){a.noIncrementSeconds()||o(z)},a.decrementSeconds=function(){a.noDecrementSeconds()||o(-z)},a.toggleMeridian=function(){var b=i(),c=h();a.noToggleMeridian()||(angular.isDefined(b)&&angular.isDefined(c)?o(720*(r.getHours()<12?60:-60)):a.meridian=a.meridian===t[0]?t[1]:t[0])},a.blur=function(){s.$setTouched()}}]).directive("uibTimepicker",["uibTimepickerConfig",function(a){return{require:["uibTimepicker","?^ngModel"],controller:"UibTimepickerController",controllerAs:"timepicker",replace:!0,scope:{},templateUrl:function(b,c){return c.templateUrl||a.templateUrl},link:function(a,b,c,d){var e=d[0],f=d[1];f&&e.init(f,b.find("input"))}}}]),angular.module("ui.bootstrap.typeahead",["ui.bootstrap.debounce","ui.bootstrap.position"]).factory("uibTypeaheadParser",["$parse",function(a){var b=/^\s*([\s\S]+?)(?:\s+as\s+([\s\S]+?))?\s+for\s+(?:([\$\w][\$\w\d]*))\s+in\s+([\s\S]+?)$/;return{parse:function(c){var d=c.match(b);if(!d)throw new Error('Expected typeahead specification in form of "_modelValue_ (as _label_)? for _item_ in _collection_" but got "'+c+'".');return{itemName:d[3],source:a(d[4]),viewMapper:a(d[2]||d[1]),modelMapper:a(d[1])}}}}]).controller("UibTypeaheadController",["$scope","$element","$attrs","$compile","$parse","$q","$timeout","$document","$window","$rootScope","$$debounce","$uibPosition","uibTypeaheadParser",function(a,b,c,d,e,f,g,h,i,j,k,l,m){function n(){N.moveInProgress||(N.moveInProgress=!0,N.$digest()),Y()}function o(){N.position=D?l.offset(b):l.position(b),N.position.top+=b.prop("offsetHeight")}var p,q,r=[9,13,27,38,40],s=200,t=a.$eval(c.typeaheadMinLength);t||0===t||(t=1);var u=a.$eval(c.typeaheadWaitMs)||0,v=a.$eval(c.typeaheadEditable)!==!1;a.$watch(c.typeaheadEditable,function(a){v=a!==!1});var w,x,y=e(c.typeaheadLoading).assign||angular.noop,z=e(c.typeaheadOnSelect),A=angular.isDefined(c.typeaheadSelectOnBlur)?a.$eval(c.typeaheadSelectOnBlur):!1,B=e(c.typeaheadNoResults).assign||angular.noop,C=c.typeaheadInputFormatter?e(c.typeaheadInputFormatter):void 0,D=c.typeaheadAppendToBody?a.$eval(c.typeaheadAppendToBody):!1,E=c.typeaheadAppendTo?a.$eval(c.typeaheadAppendTo):null,F=a.$eval(c.typeaheadFocusFirst)!==!1,G=c.typeaheadSelectOnExact?a.$eval(c.typeaheadSelectOnExact):!1,H=e(c.typeaheadIsOpen).assign||angular.noop,I=a.$eval(c.typeaheadShowHint)||!1,J=e(c.ngModel),K=e(c.ngModel+"($$$p)"),L=function(b,c){return angular.isFunction(J(a))&&q&&q.$options&&q.$options.getterSetter?K(b,{$$$p:c}):J.assign(b,c)},M=m.parse(c.uibTypeahead),N=a.$new(),O=a.$on("$destroy",function(){N.$destroy()});N.$on("$destroy",O);var P="typeahead-"+N.$id+"-"+Math.floor(1e4*Math.random());b.attr({"aria-autocomplete":"list","aria-expanded":!1,"aria-owns":P});var Q,R;I&&(Q=angular.element("<div></div>"),Q.css("position","relative"),b.after(Q),R=b.clone(),R.attr("placeholder",""),R.val(""),R.css({position:"absolute",top:"0px",left:"0px","border-color":"transparent","box-shadow":"none",opacity:1,background:"none 0% 0% / auto repeat scroll padding-box border-box rgb(255, 255, 255)",color:"#999"}),b.css({position:"relative","vertical-align":"top","background-color":"transparent"}),Q.append(R),R.after(b));var S=angular.element("<div uib-typeahead-popup></div>");S.attr({id:P,matches:"matches",active:"activeIdx",select:"select(activeIdx, evt)","move-in-progress":"moveInProgress",query:"query",position:"position","assign-is-open":"assignIsOpen(isOpen)",debounce:"debounceUpdate"}),angular.isDefined(c.typeaheadTemplateUrl)&&S.attr("template-url",c.typeaheadTemplateUrl),angular.isDefined(c.typeaheadPopupTemplateUrl)&&S.attr("popup-template-url",c.typeaheadPopupTemplateUrl);var T=function(){I&&R.val("")},U=function(){N.matches=[],N.activeIdx=-1,b.attr("aria-expanded",!1),T()},V=function(a){return P+"-option-"+a};N.$watch("activeIdx",function(a){0>a?b.removeAttr("aria-activedescendant"):b.attr("aria-activedescendant",V(a))});var W=function(a,b){return N.matches.length>b&&a?a.toUpperCase()===N.matches[b].label.toUpperCase():!1},X=function(c,d){var e={$viewValue:c};y(a,!0),B(a,!1),f.when(M.source(a,e)).then(function(f){var g=c===p.$viewValue;if(g&&w)if(f&&f.length>0){N.activeIdx=F?0:-1,B(a,!1),N.matches.length=0;for(var h=0;h<f.length;h++)e[M.itemName]=f[h],N.matches.push({id:V(h),label:M.viewMapper(N,e),model:f[h]});if(N.query=c,o(),b.attr("aria-expanded",!0),G&&1===N.matches.length&&W(c,0)&&(angular.isNumber(N.debounceUpdate)||angular.isObject(N.debounceUpdate)?k(function(){N.select(0,d)},angular.isNumber(N.debounceUpdate)?N.debounceUpdate:N.debounceUpdate["default"]):N.select(0,d)),I){var i=N.matches[0].label;c.length>0&&i.slice(0,c.length).toUpperCase()===c.toUpperCase()?R.val(c+i.slice(c.length)):R.val("")}}else U(),B(a,!0);g&&y(a,!1)},function(){U(),y(a,!1),B(a,!0)})};D&&(angular.element(i).on("resize",n),h.find("body").on("scroll",n));var Y=k(function(){N.matches.length&&o(),N.moveInProgress=!1},s);N.moveInProgress=!1,N.query=void 0;var Z,$=function(a){Z=g(function(){X(a)},u)},_=function(){Z&&g.cancel(Z)};U(),N.assignIsOpen=function(b){H(a,b)},N.select=function(d,e){var f,h,i={};x=!0,i[M.itemName]=h=N.matches[d].model,f=M.modelMapper(a,i),L(a,f),p.$setValidity("editable",!0),p.$setValidity("parse",!0),z(a,{$item:h,$model:f,$label:M.viewMapper(a,i),$event:e}),U(),N.$eval(c.typeaheadFocusOnSelect)!==!1&&g(function(){b[0].focus()},0,!1)},b.on("keydown",function(a){if(0!==N.matches.length&&-1!==r.indexOf(a.which)){if(-1===N.activeIdx&&(9===a.which||13===a.which))return U(),void N.$digest();a.preventDefault();var b;switch(a.which){case 9:case 13:N.$apply(function(){angular.isNumber(N.debounceUpdate)||angular.isObject(N.debounceUpdate)?k(function(){N.select(N.activeIdx,a)},angular.isNumber(N.debounceUpdate)?N.debounceUpdate:N.debounceUpdate["default"]):N.select(N.activeIdx,a)});break;case 27:a.stopPropagation(),U(),N.$digest();break;case 38:N.activeIdx=(N.activeIdx>0?N.activeIdx:N.matches.length)-1,N.$digest(),b=S.find("li")[N.activeIdx],b.parentNode.scrollTop=b.offsetTop;break;case 40:N.activeIdx=(N.activeIdx+1)%N.matches.length,N.$digest(),b=S.find("li")[N.activeIdx],b.parentNode.scrollTop=b.offsetTop}}}),b.bind("focus",function(a){w=!0,0!==t||p.$viewValue||g(function(){X(p.$viewValue,a)},0)}),b.bind("blur",function(a){A&&N.matches.length&&-1!==N.activeIdx&&!x&&(x=!0,N.$apply(function(){angular.isObject(N.debounceUpdate)&&angular.isNumber(N.debounceUpdate.blur)?k(function(){N.select(N.activeIdx,a)},N.debounceUpdate.blur):N.select(N.activeIdx,a)})),!v&&p.$error.editable&&(p.$viewValue="",b.val("")),w=!1,x=!1});var aa=function(a){b[0]!==a.target&&3!==a.which&&0!==N.matches.length&&(U(),j.$$phase||N.$digest())};h.on("click",aa),a.$on("$destroy",function(){h.off("click",aa),(D||E)&&ba.remove(),D&&(angular.element(i).off("resize",n),h.find("body").off("scroll",n)),S.remove(),I&&Q.remove()});var ba=d(S)(N);D?h.find("body").append(ba):E?angular.element(E).eq(0).append(ba):b.after(ba),this.init=function(b,c){p=b,q=c,N.debounceUpdate=p.$options&&e(p.$options.debounce)(a),p.$parsers.unshift(function(b){return w=!0,0===t||b&&b.length>=t?u>0?(_(),$(b)):X(b):(y(a,!1),_(),U()),v?b:b?void p.$setValidity("editable",!1):(p.$setValidity("editable",!0),null)}),p.$formatters.push(function(b){var c,d,e={};return v||p.$setValidity("editable",!0),C?(e.$model=b,C(a,e)):(e[M.itemName]=b,c=M.viewMapper(a,e),e[M.itemName]=void 0,d=M.viewMapper(a,e),c!==d?c:b)})}}]).directive("uibTypeahead",function(){return{controller:"UibTypeaheadController",require:["ngModel","^?ngModelOptions","uibTypeahead"],link:function(a,b,c,d){d[2].init(d[0],d[1])}}}).directive("uibTypeaheadPopup",["$$debounce",function(a){return{scope:{matches:"=",query:"=",active:"=",position:"&",moveInProgress:"=",select:"&",assignIsOpen:"&",debounce:"&"},replace:!0,templateUrl:function(a,b){return b.popupTemplateUrl||"uib/template/typeahead/typeahead-popup.html"},link:function(b,c,d){b.templateUrl=d.templateUrl,b.isOpen=function(){var a=b.matches.length>0;return b.assignIsOpen({isOpen:a}),a},b.isActive=function(a){return b.active===a},b.selectActive=function(a){b.active=a},b.selectMatch=function(c,d){var e=b.debounce();angular.isNumber(e)||angular.isObject(e)?a(function(){b.select({activeIdx:c,evt:d})},angular.isNumber(e)?e:e["default"]):b.select({activeIdx:c,evt:d})}}}}]).directive("uibTypeaheadMatch",["$templateRequest","$compile","$parse",function(a,b,c){return{scope:{index:"=",match:"=",query:"="},link:function(d,e,f){var g=c(f.templateUrl)(d.$parent)||"uib/template/typeahead/typeahead-match.html";a(g).then(function(a){var c=angular.element(a.trim());e.replaceWith(c),b(c)(d)})}}}]).filter("uibTypeaheadHighlight",["$sce","$injector","$log",function(a,b,c){function d(a){return a.replace(/([.?*+^$[\]\\(){}|-])/g,"\\$1")}function e(a){return/<.*>/g.test(a)}var f;return f=b.has("$sanitize"),function(b,g){return!f&&e(b)&&c.warn("Unsafe use of typeahead please use ngSanitize"),b=g?(""+b).replace(new RegExp(d(g),"gi"),"<strong>$&</strong>"):b,f||(b=a.trustAsHtml(b)),b}}]),angular.module("uib/template/accordion/accordion-group.html",[]).run(["$templateCache",function(a){a.put("uib/template/accordion/accordion-group.html",'<div class="panel" ng-class="panelClass || \'panel-default\'">\n  <div class="panel-heading" ng-keypress="toggleOpen($event)">\n    <h4 class="panel-title">\n      <div tabindex="0" class="accordion-toggle" ng-click="toggleOpen()" uib-accordion-transclude="heading"><span ng-class="{\'text-muted\': isDisabled}">{{heading}}</span></div>\n    </h4>\n  </div>\n  <div class="panel-collapse collapse" uib-collapse="!isOpen">\n	  <div class="panel-body" ng-transclude></div>\n  </div>\n</div>\n')}]),angular.module("uib/template/accordion/accordion.html",[]).run(["$templateCache",function(a){a.put("uib/template/accordion/accordion.html",'<div class="panel-group" ng-transclude></div>')}]),angular.module("uib/template/alert/alert.html",[]).run(["$templateCache",function(a){a.put("uib/template/alert/alert.html",'<div class="alert" ng-class="[\'alert-\' + (type || \'warning\'), closeable ? \'alert-dismissible\' : null]" role="alert">\n    <button ng-show="closeable" type="button" class="close" ng-click="close({$event: $event})">\n        <span aria-hidden="true">&times;</span>\n        <span class="sr-only">Close</span>\n    </button>\n    <div ng-transclude></div>\n</div>\n')}]),angular.module("uib/template/carousel/carousel.html",[]).run(["$templateCache",function(a){a.put("uib/template/carousel/carousel.html",'<div ng-mouseenter="pause()" ng-mouseleave="play()" class="carousel" ng-swipe-right="prev()" ng-swipe-left="next()">\n  <div class="carousel-inner" ng-transclude></div>\n  <a role="button" href class="left carousel-control" ng-click="prev()" ng-show="slides.length > 1">\n    <span aria-hidden="true" class="glyphicon glyphicon-chevron-left"></span>\n    <span class="sr-only">previous</span>\n  </a>\n  <a role="button" href class="right carousel-control" ng-click="next()" ng-show="slides.length > 1">\n    <span aria-hidden="true" class="glyphicon glyphicon-chevron-right"></span>\n    <span class="sr-only">next</span>\n  </a>\n  <ol class="carousel-indicators" ng-show="slides.length > 1">\n    <li ng-repeat="slide in slides | orderBy:indexOfSlide track by $index" ng-class="{ active: isActive(slide) }" ng-click="select(slide)">\n      <span class="sr-only">slide {{ $index + 1 }} of {{ slides.length }}<span ng-if="isActive(slide)">, currently active</span></span>\n    </li>\n  </ol>\n</div>')}]),angular.module("uib/template/carousel/slide.html",[]).run(["$templateCache",function(a){a.put("uib/template/carousel/slide.html",'<div ng-class="{\n    \'active\': active\n  }" class="item text-center" ng-transclude></div>\n')}]),angular.module("uib/template/datepicker/datepicker.html",[]).run(["$templateCache",function(a){a.put("uib/template/datepicker/datepicker.html",'<div class="uib-datepicker" ng-switch="datepickerMode" role="application" ng-keydown="keydown($event)">\n  <uib-daypicker ng-switch-when="day" tabindex="0"></uib-daypicker>\n  <uib-monthpicker ng-switch-when="month" tabindex="0"></uib-monthpicker>\n  <uib-yearpicker ng-switch-when="year" tabindex="0"></uib-yearpicker>\n</div>')}]),angular.module("uib/template/datepicker/day.html",[]).run(["$templateCache",function(a){a.put("uib/template/datepicker/day.html",'<table class="uib-daypicker" role="grid" aria-labelledby="{{::uniqueId}}-title" aria-activedescendant="{{activeDateId}}">\n  <thead>\n    <tr>\n      <th><button type="button" class="btn btn-default btn-sm pull-left uib-left" ng-click="move(-1)" tabindex="-1"><i class="glyphicon glyphicon-chevron-left"></i></button></th>\n      <th colspan="{{::5 + showWeeks}}"><button id="{{::uniqueId}}-title" role="heading" aria-live="assertive" aria-atomic="true" type="button" class="btn btn-default btn-sm uib-title" ng-click="toggleMode()" ng-disabled="datepickerMode === maxMode" tabindex="-1" style="width:100%;"><strong>{{title}}</strong></button></th>\n      <th><button type="button" class="btn btn-default btn-sm pull-right uib-right" ng-click="move(1)" tabindex="-1"><i class="glyphicon glyphicon-chevron-right"></i></button></th>\n    </tr>\n    <tr>\n      <th ng-if="showWeeks" class="text-center"></th>\n      <th ng-repeat="label in ::labels track by $index" class="text-center"><small aria-label="{{::label.full}}">{{::label.abbr}}</small></th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr class="uib-weeks" ng-repeat="row in rows track by $index">\n      <td ng-if="showWeeks" class="text-center h6"><em>{{ weekNumbers[$index] }}</em></td>\n      <td ng-repeat="dt in row" class="uib-day text-center" role="gridcell"\n        id="{{::dt.uid}}"\n        ng-class="::dt.customClass">\n        <button type="button" style="min-width:100%;" class="btn btn-default btn-sm"\n          uib-is-class="\n            \'btn-info\' for selectedDt,\n            \'active\' for activeDt\n            on dt"\n          ng-click="select(dt.date)"\n          ng-disabled="::dt.disabled"\n          tabindex="-1"><span ng-class="::{\'text-muted\': dt.secondary, \'text-info\': dt.current}">{{::dt.label}}</span></button>\n      </td>\n    </tr>\n  </tbody>\n</table>\n')}]),angular.module("uib/template/datepicker/month.html",[]).run(["$templateCache",function(a){a.put("uib/template/datepicker/month.html",'<table class="uib-monthpicker" role="grid" aria-labelledby="{{::uniqueId}}-title" aria-activedescendant="{{activeDateId}}">\n  <thead>\n    <tr>\n      <th><button type="button" class="btn btn-default btn-sm pull-left uib-left" ng-click="move(-1)" tabindex="-1"><i class="glyphicon glyphicon-chevron-left"></i></button></th>\n      <th><button id="{{::uniqueId}}-title" role="heading" aria-live="assertive" aria-atomic="true" type="button" class="btn btn-default btn-sm uib-title" ng-click="toggleMode()" ng-disabled="datepickerMode === maxMode" tabindex="-1" style="width:100%;"><strong>{{title}}</strong></button></th>\n      <th><button type="button" class="btn btn-default btn-sm pull-right uib-right" ng-click="move(1)" tabindex="-1"><i class="glyphicon glyphicon-chevron-right"></i></button></th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr class="uib-months" ng-repeat="row in rows track by $index">\n      <td ng-repeat="dt in row" class="uib-month text-center" role="gridcell"\n        id="{{::dt.uid}}"\n        ng-class="::dt.customClass">\n        <button type="button" style="min-width:100%;" class="btn btn-default"\n          uib-is-class="\n            \'btn-info\' for selectedDt,\n            \'active\' for activeDt\n            on dt"\n          ng-click="select(dt.date)"\n          ng-disabled="::dt.disabled"\n          tabindex="-1"><span ng-class="::{\'text-info\': dt.current}">{{::dt.label}}</span></button>\n      </td>\n    </tr>\n  </tbody>\n</table>\n')}]),angular.module("uib/template/datepicker/popup.html",[]).run(["$templateCache",function(a){a.put("uib/template/datepicker/popup.html",'<ul class="uib-datepicker-popup dropdown-menu" dropdown-nested ng-if="isOpen" style="display: block" ng-style="{top: position.top+\'px\', left: position.left+\'px\'}" ng-keydown="keydown($event)" ng-click="$event.stopPropagation()">\n	<li ng-transclude></li>\n	<li ng-if="showButtonBar" style="padding:10px 9px 2px" class="uib-button-bar">\n		<span class="btn-group pull-left">\n			<button type="button" class="btn btn-sm btn-info uib-datepicker-current" ng-click="select(\'today\')" ng-disabled="isDisabled(\'today\')">{{ getText(\'current\') }}</button>\n			<button type="button" class="btn btn-sm btn-danger uib-clear" ng-click="select(null)">{{ getText(\'clear\') }}</button>\n		</span>\n		<button type="button" class="btn btn-sm btn-success pull-right uib-close" ng-click="close()">{{ getText(\'close\') }}</button>\n	</li>\n</ul>\n')}]),angular.module("uib/template/datepicker/year.html",[]).run(["$templateCache",function(a){a.put("uib/template/datepicker/year.html",'<table class="uib-yearpicker" role="grid" aria-labelledby="{{::uniqueId}}-title" aria-activedescendant="{{activeDateId}}">\n  <thead>\n    <tr>\n      <th><button type="button" class="btn btn-default btn-sm pull-left uib-left" ng-click="move(-1)" tabindex="-1"><i class="glyphicon glyphicon-chevron-left"></i></button></th>\n      <th colspan="{{::columns - 2}}"><button id="{{::uniqueId}}-title" role="heading" aria-live="assertive" aria-atomic="true" type="button" class="btn btn-default btn-sm uib-title" ng-click="toggleMode()" ng-disabled="datepickerMode === maxMode" tabindex="-1" style="width:100%;"><strong>{{title}}</strong></button></th>\n      <th><button type="button" class="btn btn-default btn-sm pull-right uib-right" ng-click="move(1)" tabindex="-1"><i class="glyphicon glyphicon-chevron-right"></i></button></th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr class="uib-years" ng-repeat="row in rows track by $index">\n      <td ng-repeat="dt in row" class="uib-year text-center" role="gridcell"\n        id="{{::dt.uid}}"\n        ng-class="::dt.customClass">\n        <button type="button" style="min-width:100%;" class="btn btn-default"\n          uib-is-class="\n            \'btn-info\' for selectedDt,\n            \'active\' for activeDt\n            on dt"\n          ng-click="select(dt.date)"\n          ng-disabled="::dt.disabled"\n          tabindex="-1"><span ng-class="::{\'text-info\': dt.current}">{{::dt.label}}</span></button>\n      </td>\n    </tr>\n  </tbody>\n</table>\n')}]),angular.module("uib/template/modal/backdrop.html",[]).run(["$templateCache",function(a){a.put("uib/template/modal/backdrop.html",'<div class="modal-backdrop"\n     uib-modal-animation-class="fade"\n     modal-in-class="in"\n     ng-style="{\'z-index\': 1040 + (index && 1 || 0) + index*10}"\n></div>\n');
}]),angular.module("uib/template/modal/window.html",[]).run(["$templateCache",function(a){a.put("uib/template/modal/window.html",'<div modal-render="{{$isRendered}}" tabindex="-1" role="dialog" class="modal"\n    uib-modal-animation-class="fade"\n    modal-in-class="in"\n    ng-style="{\'z-index\': 1050 + index*10, display: \'block\'}">\n    <div class="modal-dialog" ng-class="size ? \'modal-\' + size : \'\'"><div class="modal-content" uib-modal-transclude></div></div>\n</div>\n')}]),angular.module("uib/template/pager/pager.html",[]).run(["$templateCache",function(a){a.put("uib/template/pager/pager.html",'<ul class="pager">\n  <li ng-class="{disabled: noPrevious()||ngDisabled, previous: align}"><a href ng-click="selectPage(page - 1, $event)">{{::getText(\'previous\')}}</a></li>\n  <li ng-class="{disabled: noNext()||ngDisabled, next: align}"><a href ng-click="selectPage(page + 1, $event)">{{::getText(\'next\')}}</a></li>\n</ul>\n')}]),angular.module("uib/template/pagination/pagination.html",[]).run(["$templateCache",function(a){a.put("uib/template/pagination/pagination.html",'<ul class="pagination">\n  <li ng-if="::boundaryLinks" ng-class="{disabled: noPrevious()||ngDisabled}" class="pagination-first"><a href ng-click="selectPage(1, $event)">{{::getText(\'first\')}}</a></li>\n  <li ng-if="::directionLinks" ng-class="{disabled: noPrevious()||ngDisabled}" class="pagination-prev"><a href ng-click="selectPage(page - 1, $event)">{{::getText(\'previous\')}}</a></li>\n  <li ng-repeat="page in pages track by $index" ng-class="{active: page.active,disabled: ngDisabled&&!page.active}" class="pagination-page"><a href ng-click="selectPage(page.number, $event)">{{page.text}}</a></li>\n  <li ng-if="::directionLinks" ng-class="{disabled: noNext()||ngDisabled}" class="pagination-next"><a href ng-click="selectPage(page + 1, $event)">{{::getText(\'next\')}}</a></li>\n  <li ng-if="::boundaryLinks" ng-class="{disabled: noNext()||ngDisabled}" class="pagination-last"><a href ng-click="selectPage(totalPages, $event)">{{::getText(\'last\')}}</a></li>\n</ul>\n')}]),angular.module("uib/template/tooltip/tooltip-html-popup.html",[]).run(["$templateCache",function(a){a.put("uib/template/tooltip/tooltip-html-popup.html",'<div class="tooltip"\n  tooltip-animation-class="fade"\n  uib-tooltip-classes\n  ng-class="{ in: isOpen() }">\n  <div class="tooltip-arrow"></div>\n  <div class="tooltip-inner" ng-bind-html="contentExp()"></div>\n</div>\n')}]),angular.module("template/tooltip/tooltip-html-unsafe-popup.html",[]).run(["$templateCache",function(a){a.put("template/tooltip/tooltip-html-unsafe-popup.html",'<div class="tooltip"\n  tooltip-animation-class="fade"\n  tooltip-classes\n  ng-class="{ in: isOpen() }">\n  <div class="tooltip-arrow"></div>\n  <div class="tooltip-inner" bind-html-unsafe="content"></div>\n</div>\n')}]),angular.module("uib/template/tooltip/tooltip-popup.html",[]).run(["$templateCache",function(a){a.put("uib/template/tooltip/tooltip-popup.html",'<div class="tooltip"\n  tooltip-animation-class="fade"\n  uib-tooltip-classes\n  ng-class="{ in: isOpen() }">\n  <div class="tooltip-arrow"></div>\n  <div class="tooltip-inner" ng-bind="content"></div>\n</div>\n')}]),angular.module("uib/template/tooltip/tooltip-template-popup.html",[]).run(["$templateCache",function(a){a.put("uib/template/tooltip/tooltip-template-popup.html",'<div class="tooltip"\n  tooltip-animation-class="fade"\n  uib-tooltip-classes\n  ng-class="{ in: isOpen() }">\n  <div class="tooltip-arrow"></div>\n  <div class="tooltip-inner"\n    uib-tooltip-template-transclude="contentExp()"\n    tooltip-template-transclude-scope="originScope()"></div>\n</div>\n')}]),angular.module("uib/template/popover/popover-html.html",[]).run(["$templateCache",function(a){a.put("uib/template/popover/popover-html.html",'<div class="popover"\n  tooltip-animation-class="fade"\n  uib-tooltip-classes\n  ng-class="{ in: isOpen() }">\n  <div class="arrow"></div>\n\n  <div class="popover-inner">\n      <h3 class="popover-title" ng-bind="title" ng-if="title"></h3>\n      <div class="popover-content" ng-bind-html="contentExp()"></div>\n  </div>\n</div>\n')}]),angular.module("uib/template/popover/popover-template.html",[]).run(["$templateCache",function(a){a.put("uib/template/popover/popover-template.html",'<div class="popover"\n  tooltip-animation-class="fade"\n  uib-tooltip-classes\n  ng-class="{ in: isOpen() }">\n  <div class="arrow"></div>\n\n  <div class="popover-inner">\n      <h3 class="popover-title" ng-bind="title" ng-if="title"></h3>\n      <div class="popover-content"\n        uib-tooltip-template-transclude="contentExp()"\n        tooltip-template-transclude-scope="originScope()"></div>\n  </div>\n</div>\n')}]),angular.module("uib/template/popover/popover.html",[]).run(["$templateCache",function(a){a.put("uib/template/popover/popover.html",'<div class="popover"\n  tooltip-animation-class="fade"\n  uib-tooltip-classes\n  ng-class="{ in: isOpen() }">\n  <div class="arrow"></div>\n\n  <div class="popover-inner">\n      <h3 class="popover-title" ng-bind="title" ng-if="title"></h3>\n      <div class="popover-content" ng-bind="content"></div>\n  </div>\n</div>\n')}]),angular.module("uib/template/progressbar/bar.html",[]).run(["$templateCache",function(a){a.put("uib/template/progressbar/bar.html",'<div class="progress-bar" ng-class="type && \'progress-bar-\' + type" role="progressbar" aria-valuenow="{{value}}" aria-valuemin="0" aria-valuemax="{{max}}" ng-style="{width: (percent < 100 ? percent : 100) + \'%\'}" aria-valuetext="{{percent | number:0}}%" aria-labelledby="{{::title}}" ng-transclude></div>\n')}]),angular.module("uib/template/progressbar/progress.html",[]).run(["$templateCache",function(a){a.put("uib/template/progressbar/progress.html",'<div class="progress" ng-transclude aria-labelledby="{{::title}}"></div>')}]),angular.module("uib/template/progressbar/progressbar.html",[]).run(["$templateCache",function(a){a.put("uib/template/progressbar/progressbar.html",'<div class="progress">\n  <div class="progress-bar" ng-class="type && \'progress-bar-\' + type" role="progressbar" aria-valuenow="{{value}}" aria-valuemin="0" aria-valuemax="{{max}}" ng-style="{width: (percent < 100 ? percent : 100) + \'%\'}" aria-valuetext="{{percent | number:0}}%" aria-labelledby="{{::title}}" ng-transclude></div>\n</div>\n')}]),angular.module("uib/template/rating/rating.html",[]).run(["$templateCache",function(a){a.put("uib/template/rating/rating.html",'<span ng-mouseleave="reset()" ng-keydown="onKeydown($event)" tabindex="0" role="slider" aria-valuemin="0" aria-valuemax="{{range.length}}" aria-valuenow="{{value}}">\n    <span ng-repeat-start="r in range track by $index" class="sr-only">({{ $index < value ? \'*\' : \' \' }})</span>\n    <i ng-repeat-end ng-mouseenter="enter($index + 1)" ng-click="rate($index + 1)" class="glyphicon" ng-class="$index < value && (r.stateOn || \'glyphicon-star\') || (r.stateOff || \'glyphicon-star-empty\')" ng-attr-title="{{r.title}}" aria-valuetext="{{r.title}}"></i>\n</span>\n')}]),angular.module("uib/template/tabs/tab.html",[]).run(["$templateCache",function(a){a.put("uib/template/tabs/tab.html",'<li ng-class="{active: active, disabled: disabled}" class="uib-tab">\n  <div ng-click="select()" uib-tab-heading-transclude>{{heading}}</div>\n</li>\n')}]),angular.module("uib/template/tabs/tabset.html",[]).run(["$templateCache",function(a){a.put("uib/template/tabs/tabset.html",'<div>\n  <ul class="nav nav-{{type || \'tabs\'}}" ng-class="{\'nav-stacked\': vertical, \'nav-justified\': justified}" ng-transclude></ul>\n  <div class="tab-content">\n    <div class="tab-pane" \n         ng-repeat="tab in tabs" \n         ng-class="{active: tab.active}"\n         uib-tab-content-transclude="tab">\n    </div>\n  </div>\n</div>\n')}]),angular.module("uib/template/timepicker/timepicker.html",[]).run(["$templateCache",function(a){a.put("uib/template/timepicker/timepicker.html",'<table class="uib-timepicker">\n  <tbody>\n    <tr class="text-center" ng-show="::showSpinners">\n      <td class="uib-increment hours"><a ng-click="incrementHours()" ng-class="{disabled: noIncrementHours()}" class="btn btn-link" ng-disabled="noIncrementHours()" tabindex="{{::tabindex}}"><span class="glyphicon glyphicon-chevron-up"></span></a></td>\n      <td>&nbsp;</td>\n      <td class="uib-increment minutes"><a ng-click="incrementMinutes()" ng-class="{disabled: noIncrementMinutes()}" class="btn btn-link" ng-disabled="noIncrementMinutes()" tabindex="{{::tabindex}}"><span class="glyphicon glyphicon-chevron-up"></span></a></td>\n      <td ng-show="showSeconds">&nbsp;</td>\n      <td ng-show="showSeconds" class="uib-increment seconds"><a ng-click="incrementSeconds()" ng-class="{disabled: noIncrementSeconds()}" class="btn btn-link" ng-disabled="noIncrementSeconds()" tabindex="{{::tabindex}}"><span class="glyphicon glyphicon-chevron-up"></span></a></td>\n      <td ng-show="showMeridian"></td>\n    </tr>\n    <tr>\n      <td class="form-group uib-time hours" ng-class="{\'has-error\': invalidHours}">\n        <input style="width:50px;" type="text" placeholder="HH" ng-model="hours" ng-change="updateHours()" class="form-control text-center" ng-readonly="::readonlyInput" maxlength="2" tabindex="{{::tabindex}}" ng-disabled="noIncrementHours()" ng-blur="blur()">\n      </td>\n      <td class="uib-separator">:</td>\n      <td class="form-group uib-time minutes" ng-class="{\'has-error\': invalidMinutes}">\n        <input style="width:50px;" type="text" placeholder="MM" ng-model="minutes" ng-change="updateMinutes()" class="form-control text-center" ng-readonly="::readonlyInput" maxlength="2" tabindex="{{::tabindex}}" ng-disabled="noIncrementMinutes()" ng-blur="blur()">\n      </td>\n      <td ng-show="showSeconds" class="uib-separator">:</td>\n      <td class="form-group uib-time seconds" ng-class="{\'has-error\': invalidSeconds}" ng-show="showSeconds">\n        <input style="width:50px;" type="text" ng-model="seconds" ng-change="updateSeconds()" class="form-control text-center" ng-readonly="readonlyInput" maxlength="2" tabindex="{{::tabindex}}" ng-disabled="noIncrementSeconds()" ng-blur="blur()">\n      </td>\n      <td ng-show="showMeridian" class="uib-time am-pm"><button type="button" ng-class="{disabled: noToggleMeridian()}" class="btn btn-default text-center" ng-click="toggleMeridian()" ng-disabled="noToggleMeridian()" tabindex="{{::tabindex}}">{{meridian}}</button></td>\n    </tr>\n    <tr class="text-center" ng-show="::showSpinners">\n      <td class="uib-decrement hours"><a ng-click="decrementHours()" ng-class="{disabled: noDecrementHours()}" class="btn btn-link" ng-disabled="noDecrementHours()" tabindex="{{::tabindex}}"><span class="glyphicon glyphicon-chevron-down"></span></a></td>\n      <td>&nbsp;</td>\n      <td class="uib-decrement minutes"><a ng-click="decrementMinutes()" ng-class="{disabled: noDecrementMinutes()}" class="btn btn-link" ng-disabled="noDecrementMinutes()" tabindex="{{::tabindex}}"><span class="glyphicon glyphicon-chevron-down"></span></a></td>\n      <td ng-show="showSeconds">&nbsp;</td>\n      <td ng-show="showSeconds" class="uib-decrement seconds"><a ng-click="decrementSeconds()" ng-class="{disabled: noDecrementSeconds()}" class="btn btn-link" ng-disabled="noDecrementSeconds()" tabindex="{{::tabindex}}"><span class="glyphicon glyphicon-chevron-down"></span></a></td>\n      <td ng-show="showMeridian"></td>\n    </tr>\n  </tbody>\n</table>\n')}]),angular.module("uib/template/typeahead/typeahead-match.html",[]).run(["$templateCache",function(a){a.put("uib/template/typeahead/typeahead-match.html",'<a href tabindex="-1" ng-bind-html="match.label | uibTypeaheadHighlight:query"></a>\n')}]),angular.module("uib/template/typeahead/typeahead-popup.html",[]).run(["$templateCache",function(a){a.put("uib/template/typeahead/typeahead-popup.html",'<ul class="dropdown-menu" ng-show="isOpen() && !moveInProgress" ng-style="{top: position().top+\'px\', left: position().left+\'px\'}" style="display: block;" role="listbox" aria-hidden="{{!isOpen()}}">\n    <li ng-repeat="match in matches track by $index" ng-class="{active: isActive($index) }" ng-mouseenter="selectActive($index)" ng-click="selectMatch($index, $event)" role="option" id="{{::match.id}}">\n        <div uib-typeahead-match index="$index" match="match" query="query" template-url="templateUrl"></div>\n    </li>\n</ul>\n')}]),angular.module("ui.bootstrap.carousel").run(function(){!angular.$$csp().noInlineStyle&&angular.element(document).find("head").prepend('<style type="text/css">.ng-animate.item:not(.left):not(.right){-webkit-transition:0s ease-in-out left;transition:0s ease-in-out left}</style>')}),angular.module("ui.bootstrap.tabs").run(function(){!angular.$$csp().noInlineStyle&&angular.element(document).find("head").prepend('<style type="text/css">.uib-tab > div{position:relative;display:block;padding:10px 15px;outline:0;color:#337ab7;}.uib-tab > div:focus,.uib-tab > div:hover{background-color:#eee;color:#23527c;}.uib-tab.disabled > div{color:#777;}.uib-tab.disabled > div:focus,.uib-tab.disabled > div:hover{color:#777;cursor:not-allowed;background-color:transparent;}.nav-tabs > .uib-tab > div{margin-right:2px;line-height:1.42857143;border:1px solid transparent;border-radius:4px 4px 0 0;}.nav-tabs > .uib-tab > div:hover{border-color:#eee #eee #ddd;}.nav-tabs > .uib-tab.active > div,.nav-tabs > .uib-tab.active > div:focus,.nav-tabs > .uib-tab.active > div:hover{color:#555;cursor:default;background-color:#fff;border-color:#ddd #ddd transparent #ddd;}.nav-pills > .uib-tab > div{border-radius:4px;}.nav-pills > .uib-tab.active > div,.nav-pills > .uib-tab.active > div:focus,.nav-pills > .uib-tab.active > div:hover{color:#fff;background-color:#337ab7;}</style>')});
'use strict';

/**
 * Binds a CodeMirror widget to a <textarea> element.
 */
angular.module('ui.codemirror', [])
  .constant('uiCodemirrorConfig', {})
  .directive('uiCodemirror', ['uiCodemirrorConfig', function (uiCodemirrorConfig) {
    return {
      restrict: 'EA',
      require: '?ngModel',
      priority: 1,
      compile: function compile() {

        // Require CodeMirror
        if (angular.isUndefined(window.CodeMirror)) {
          throw new Error('ui-codemirror need CodeMirror to work... (o rly?)');
        }

        return function postLink(scope, iElement, iAttrs, ngModel) {


          var options, opts, codeMirror, initialTextValue;

          initialTextValue = iElement.text();

          options = uiCodemirrorConfig.codemirror || {};
          opts = angular.extend({ value: initialTextValue }, options, scope.$eval(iAttrs.uiCodemirror), scope.$eval(iAttrs.uiCodemirrorOpts));

          if (iElement[0].tagName === 'TEXTAREA') {
            // Might bug but still ...
            codeMirror = window.CodeMirror.fromTextArea(iElement[0], opts);
          } else {
            iElement.html('');
            codeMirror = new window.CodeMirror(function(cm_el) {
              iElement.append(cm_el);
            }, opts);
          }

          if (iAttrs.uiCodemirror || iAttrs.uiCodemirrorOpts) {
            var codemirrorDefaultsKeys = Object.keys(window.CodeMirror.defaults);
            scope.$watch(iAttrs.uiCodemirror || iAttrs.uiCodemirrorOpts, function updateOptions(newValues, oldValue) {
              if (! angular.isObject(newValues)){
                return;
              }
              codemirrorDefaultsKeys.forEach(function (key) {
                if (newValues.hasOwnProperty(key)) {

                  if (oldValue && newValues[key] === oldValue[key]){
                    return;
                  }

                  codeMirror.setOption(key, newValues[key]);
                }
              });
            }, true);
          }

          if (ngModel) {
            // CodeMirror expects a string, so make sure it gets one.
            // This does not change the model.
            ngModel.$formatters.push(function (value) {
              if (angular.isUndefined(value) || value === null) {
                return '';
              } else if (angular.isObject(value) || angular.isArray(value)) {
                throw new Error('ui-codemirror cannot use an object or an array as a model');
              }
              return value;
            });


            // Override the ngModelController $render method, which is what gets called when the model is updated.
            // This takes care of the synchronizing the codeMirror element with the underlying model, in the case that it is changed by something else.
            ngModel.$render = function () {
              //Code mirror expects a string so make sure it gets one
              //Although the formatter have already done this, it can be possible that another formatter returns undefined (for example the required directive)
              var safeViewValue = ngModel.$viewValue || '';
              codeMirror.setValue(safeViewValue);
            };


            // Keep the ngModel in sync with changes from CodeMirror
            codeMirror.on('change', function (instance) {
              var newValue = instance.getValue();
              if (newValue !== ngModel.$viewValue) {
                // Changes to the model from a callback need to be wrapped in $apply or angular will not notice them
                scope.$apply(function() {
                  ngModel.$setViewValue(newValue);
                });
              }
            });
          }


          // Watch ui-refresh and refresh the directive
          if (iAttrs.uiRefresh) {
            scope.$watch(iAttrs.uiRefresh, function (newVal, oldVal) {
              // Skip the initial watch firing
              if (newVal !== oldVal) {
                codeMirror.refresh();
              }
            });
          }


          // Allow access to the CodeMirror instance through a broadcasted event
          // eg: $broadcast('CodeMirror', function(cm){...});
          scope.$on('CodeMirror', function(event, callback) {
            if (angular.isFunction(callback)) {
              callback(codeMirror);
            } else {
              throw new Error('the CodeMirror event requires a callback function');
            }
          });


          // onLoad callback
          if (angular.isFunction(opts.onLoad)) {
            opts.onLoad(codeMirror);
          }

        };
      }
    };
  }]);

/*!
 * Bootstrap v3.3.4 (http://getbootstrap.com)
 * Copyright 2011-2015 Twitter, Inc.
 * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)
 */
if("undefined"==typeof jQuery)throw new Error("Bootstrap's JavaScript requires jQuery");+function(a){"use strict";var b=a.fn.jquery.split(" ")[0].split(".");if(b[0]<2&&b[1]<9||1==b[0]&&9==b[1]&&b[2]<1)throw new Error("Bootstrap's JavaScript requires jQuery version 1.9.1 or higher")}(jQuery),+function(a){"use strict";function b(){var a=document.createElement("bootstrap"),b={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(var c in b)if(void 0!==a.style[c])return{end:b[c]};return!1}a.fn.emulateTransitionEnd=function(b){var c=!1,d=this;a(this).one("bsTransitionEnd",function(){c=!0});var e=function(){c||a(d).trigger(a.support.transition.end)};return setTimeout(e,b),this},a(function(){a.support.transition=b(),a.support.transition&&(a.event.special.bsTransitionEnd={bindType:a.support.transition.end,delegateType:a.support.transition.end,handle:function(b){return a(b.target).is(this)?b.handleObj.handler.apply(this,arguments):void 0}})})}(jQuery),+function(a){"use strict";function b(b){return this.each(function(){var c=a(this),e=c.data("bs.alert");e||c.data("bs.alert",e=new d(this)),"string"==typeof b&&e[b].call(c)})}var c='[data-dismiss="alert"]',d=function(b){a(b).on("click",c,this.close)};d.VERSION="3.3.4",d.TRANSITION_DURATION=150,d.prototype.close=function(b){function c(){g.detach().trigger("closed.bs.alert").remove()}var e=a(this),f=e.attr("data-target");f||(f=e.attr("href"),f=f&&f.replace(/.*(?=#[^\s]*$)/,""));var g=a(f);b&&b.preventDefault(),g.length||(g=e.closest(".alert")),g.trigger(b=a.Event("close.bs.alert")),b.isDefaultPrevented()||(g.removeClass("in"),a.support.transition&&g.hasClass("fade")?g.one("bsTransitionEnd",c).emulateTransitionEnd(d.TRANSITION_DURATION):c())};var e=a.fn.alert;a.fn.alert=b,a.fn.alert.Constructor=d,a.fn.alert.noConflict=function(){return a.fn.alert=e,this},a(document).on("click.bs.alert.data-api",c,d.prototype.close)}(jQuery),+function(a){"use strict";function b(b){return this.each(function(){var d=a(this),e=d.data("bs.button"),f="object"==typeof b&&b;e||d.data("bs.button",e=new c(this,f)),"toggle"==b?e.toggle():b&&e.setState(b)})}var c=function(b,d){this.$element=a(b),this.options=a.extend({},c.DEFAULTS,d),this.isLoading=!1};c.VERSION="3.3.4",c.DEFAULTS={loadingText:"loading..."},c.prototype.setState=function(b){var c="disabled",d=this.$element,e=d.is("input")?"val":"html",f=d.data();b+="Text",null==f.resetText&&d.data("resetText",d[e]()),setTimeout(a.proxy(function(){d[e](null==f[b]?this.options[b]:f[b]),"loadingText"==b?(this.isLoading=!0,d.addClass(c).attr(c,c)):this.isLoading&&(this.isLoading=!1,d.removeClass(c).removeAttr(c))},this),0)},c.prototype.toggle=function(){var a=!0,b=this.$element.closest('[data-toggle="buttons"]');if(b.length){var c=this.$element.find("input");"radio"==c.prop("type")&&(c.prop("checked")&&this.$element.hasClass("active")?a=!1:b.find(".active").removeClass("active")),a&&c.prop("checked",!this.$element.hasClass("active")).trigger("change")}else this.$element.attr("aria-pressed",!this.$element.hasClass("active"));a&&this.$element.toggleClass("active")};var d=a.fn.button;a.fn.button=b,a.fn.button.Constructor=c,a.fn.button.noConflict=function(){return a.fn.button=d,this},a(document).on("click.bs.button.data-api",'[data-toggle^="button"]',function(c){var d=a(c.target);d.hasClass("btn")||(d=d.closest(".btn")),b.call(d,"toggle"),c.preventDefault()}).on("focus.bs.button.data-api blur.bs.button.data-api",'[data-toggle^="button"]',function(b){a(b.target).closest(".btn").toggleClass("focus",/^focus(in)?$/.test(b.type))})}(jQuery),+function(a){"use strict";function b(b){return this.each(function(){var d=a(this),e=d.data("bs.carousel"),f=a.extend({},c.DEFAULTS,d.data(),"object"==typeof b&&b),g="string"==typeof b?b:f.slide;e||d.data("bs.carousel",e=new c(this,f)),"number"==typeof b?e.to(b):g?e[g]():f.interval&&e.pause().cycle()})}var c=function(b,c){this.$element=a(b),this.$indicators=this.$element.find(".carousel-indicators"),this.options=c,this.paused=null,this.sliding=null,this.interval=null,this.$active=null,this.$items=null,this.options.keyboard&&this.$element.on("keydown.bs.carousel",a.proxy(this.keydown,this)),"hover"==this.options.pause&&!("ontouchstart"in document.documentElement)&&this.$element.on("mouseenter.bs.carousel",a.proxy(this.pause,this)).on("mouseleave.bs.carousel",a.proxy(this.cycle,this))};c.VERSION="3.3.4",c.TRANSITION_DURATION=600,c.DEFAULTS={interval:5e3,pause:"hover",wrap:!0,keyboard:!0},c.prototype.keydown=function(a){if(!/input|textarea/i.test(a.target.tagName)){switch(a.which){case 37:this.prev();break;case 39:this.next();break;default:return}a.preventDefault()}},c.prototype.cycle=function(b){return b||(this.paused=!1),this.interval&&clearInterval(this.interval),this.options.interval&&!this.paused&&(this.interval=setInterval(a.proxy(this.next,this),this.options.interval)),this},c.prototype.getItemIndex=function(a){return this.$items=a.parent().children(".item"),this.$items.index(a||this.$active)},c.prototype.getItemForDirection=function(a,b){var c=this.getItemIndex(b),d="prev"==a&&0===c||"next"==a&&c==this.$items.length-1;if(d&&!this.options.wrap)return b;var e="prev"==a?-1:1,f=(c+e)%this.$items.length;return this.$items.eq(f)},c.prototype.to=function(a){var b=this,c=this.getItemIndex(this.$active=this.$element.find(".item.active"));return a>this.$items.length-1||0>a?void 0:this.sliding?this.$element.one("slid.bs.carousel",function(){b.to(a)}):c==a?this.pause().cycle():this.slide(a>c?"next":"prev",this.$items.eq(a))},c.prototype.pause=function(b){return b||(this.paused=!0),this.$element.find(".next, .prev").length&&a.support.transition&&(this.$element.trigger(a.support.transition.end),this.cycle(!0)),this.interval=clearInterval(this.interval),this},c.prototype.next=function(){return this.sliding?void 0:this.slide("next")},c.prototype.prev=function(){return this.sliding?void 0:this.slide("prev")},c.prototype.slide=function(b,d){var e=this.$element.find(".item.active"),f=d||this.getItemForDirection(b,e),g=this.interval,h="next"==b?"left":"right",i=this;if(f.hasClass("active"))return this.sliding=!1;var j=f[0],k=a.Event("slide.bs.carousel",{relatedTarget:j,direction:h});if(this.$element.trigger(k),!k.isDefaultPrevented()){if(this.sliding=!0,g&&this.pause(),this.$indicators.length){this.$indicators.find(".active").removeClass("active");var l=a(this.$indicators.children()[this.getItemIndex(f)]);l&&l.addClass("active")}var m=a.Event("slid.bs.carousel",{relatedTarget:j,direction:h});return a.support.transition&&this.$element.hasClass("slide")?(f.addClass(b),f[0].offsetWidth,e.addClass(h),f.addClass(h),e.one("bsTransitionEnd",function(){f.removeClass([b,h].join(" ")).addClass("active"),e.removeClass(["active",h].join(" ")),i.sliding=!1,setTimeout(function(){i.$element.trigger(m)},0)}).emulateTransitionEnd(c.TRANSITION_DURATION)):(e.removeClass("active"),f.addClass("active"),this.sliding=!1,this.$element.trigger(m)),g&&this.cycle(),this}};var d=a.fn.carousel;a.fn.carousel=b,a.fn.carousel.Constructor=c,a.fn.carousel.noConflict=function(){return a.fn.carousel=d,this};var e=function(c){var d,e=a(this),f=a(e.attr("data-target")||(d=e.attr("href"))&&d.replace(/.*(?=#[^\s]+$)/,""));if(f.hasClass("carousel")){var g=a.extend({},f.data(),e.data()),h=e.attr("data-slide-to");h&&(g.interval=!1),b.call(f,g),h&&f.data("bs.carousel").to(h),c.preventDefault()}};a(document).on("click.bs.carousel.data-api","[data-slide]",e).on("click.bs.carousel.data-api","[data-slide-to]",e),a(window).on("load",function(){a('[data-ride="carousel"]').each(function(){var c=a(this);b.call(c,c.data())})})}(jQuery),+function(a){"use strict";function b(b){var c,d=b.attr("data-target")||(c=b.attr("href"))&&c.replace(/.*(?=#[^\s]+$)/,"");return a(d)}function c(b){return this.each(function(){var c=a(this),e=c.data("bs.collapse"),f=a.extend({},d.DEFAULTS,c.data(),"object"==typeof b&&b);!e&&f.toggle&&/show|hide/.test(b)&&(f.toggle=!1),e||c.data("bs.collapse",e=new d(this,f)),"string"==typeof b&&e[b]()})}var d=function(b,c){this.$element=a(b),this.options=a.extend({},d.DEFAULTS,c),this.$trigger=a('[data-toggle="collapse"][href="#'+b.id+'"],[data-toggle="collapse"][data-target="#'+b.id+'"]'),this.transitioning=null,this.options.parent?this.$parent=this.getParent():this.addAriaAndCollapsedClass(this.$element,this.$trigger),this.options.toggle&&this.toggle()};d.VERSION="3.3.4",d.TRANSITION_DURATION=350,d.DEFAULTS={toggle:!0},d.prototype.dimension=function(){var a=this.$element.hasClass("width");return a?"width":"height"},d.prototype.show=function(){if(!this.transitioning&&!this.$element.hasClass("in")){var b,e=this.$parent&&this.$parent.children(".panel").children(".in, .collapsing");if(!(e&&e.length&&(b=e.data("bs.collapse"),b&&b.transitioning))){var f=a.Event("show.bs.collapse");if(this.$element.trigger(f),!f.isDefaultPrevented()){e&&e.length&&(c.call(e,"hide"),b||e.data("bs.collapse",null));var g=this.dimension();this.$element.removeClass("collapse").addClass("collapsing")[g](0).attr("aria-expanded",!0),this.$trigger.removeClass("collapsed").attr("aria-expanded",!0),this.transitioning=1;var h=function(){this.$element.removeClass("collapsing").addClass("collapse in")[g](""),this.transitioning=0,this.$element.trigger("shown.bs.collapse")};if(!a.support.transition)return h.call(this);var i=a.camelCase(["scroll",g].join("-"));this.$element.one("bsTransitionEnd",a.proxy(h,this)).emulateTransitionEnd(d.TRANSITION_DURATION)[g](this.$element[0][i])}}}},d.prototype.hide=function(){if(!this.transitioning&&this.$element.hasClass("in")){var b=a.Event("hide.bs.collapse");if(this.$element.trigger(b),!b.isDefaultPrevented()){var c=this.dimension();this.$element[c](this.$element[c]())[0].offsetHeight,this.$element.addClass("collapsing").removeClass("collapse in").attr("aria-expanded",!1),this.$trigger.addClass("collapsed").attr("aria-expanded",!1),this.transitioning=1;var e=function(){this.transitioning=0,this.$element.removeClass("collapsing").addClass("collapse").trigger("hidden.bs.collapse")};return a.support.transition?void this.$element[c](0).one("bsTransitionEnd",a.proxy(e,this)).emulateTransitionEnd(d.TRANSITION_DURATION):e.call(this)}}},d.prototype.toggle=function(){this[this.$element.hasClass("in")?"hide":"show"]()},d.prototype.getParent=function(){return a(this.options.parent).find('[data-toggle="collapse"][data-parent="'+this.options.parent+'"]').each(a.proxy(function(c,d){var e=a(d);this.addAriaAndCollapsedClass(b(e),e)},this)).end()},d.prototype.addAriaAndCollapsedClass=function(a,b){var c=a.hasClass("in");a.attr("aria-expanded",c),b.toggleClass("collapsed",!c).attr("aria-expanded",c)};var e=a.fn.collapse;a.fn.collapse=c,a.fn.collapse.Constructor=d,a.fn.collapse.noConflict=function(){return a.fn.collapse=e,this},a(document).on("click.bs.collapse.data-api",'[data-toggle="collapse"]',function(d){var e=a(this);e.attr("data-target")||d.preventDefault();var f=b(e),g=f.data("bs.collapse"),h=g?"toggle":e.data();c.call(f,h)})}(jQuery),+function(a){"use strict";function b(b){b&&3===b.which||(a(e).remove(),a(f).each(function(){var d=a(this),e=c(d),f={relatedTarget:this};e.hasClass("open")&&(e.trigger(b=a.Event("hide.bs.dropdown",f)),b.isDefaultPrevented()||(d.attr("aria-expanded","false"),e.removeClass("open").trigger("hidden.bs.dropdown",f)))}))}function c(b){var c=b.attr("data-target");c||(c=b.attr("href"),c=c&&/#[A-Za-z]/.test(c)&&c.replace(/.*(?=#[^\s]*$)/,""));var d=c&&a(c);return d&&d.length?d:b.parent()}function d(b){return this.each(function(){var c=a(this),d=c.data("bs.dropdown");d||c.data("bs.dropdown",d=new g(this)),"string"==typeof b&&d[b].call(c)})}var e=".dropdown-backdrop",f='[data-toggle="dropdown"]',g=function(b){a(b).on("click.bs.dropdown",this.toggle)};g.VERSION="3.3.4",g.prototype.toggle=function(d){var e=a(this);if(!e.is(".disabled, :disabled")){var f=c(e),g=f.hasClass("open");if(b(),!g){"ontouchstart"in document.documentElement&&!f.closest(".navbar-nav").length&&a('<div class="dropdown-backdrop"/>').insertAfter(a(this)).on("click",b);var h={relatedTarget:this};if(f.trigger(d=a.Event("show.bs.dropdown",h)),d.isDefaultPrevented())return;e.trigger("focus").attr("aria-expanded","true"),f.toggleClass("open").trigger("shown.bs.dropdown",h)}return!1}},g.prototype.keydown=function(b){if(/(38|40|27|32)/.test(b.which)&&!/input|textarea/i.test(b.target.tagName)){var d=a(this);if(b.preventDefault(),b.stopPropagation(),!d.is(".disabled, :disabled")){var e=c(d),g=e.hasClass("open");if(!g&&27!=b.which||g&&27==b.which)return 27==b.which&&e.find(f).trigger("focus"),d.trigger("click");var h=" li:not(.disabled):visible a",i=e.find('[role="menu"]'+h+', [role="listbox"]'+h);if(i.length){var j=i.index(b.target);38==b.which&&j>0&&j--,40==b.which&&j<i.length-1&&j++,~j||(j=0),i.eq(j).trigger("focus")}}}};var h=a.fn.dropdown;a.fn.dropdown=d,a.fn.dropdown.Constructor=g,a.fn.dropdown.noConflict=function(){return a.fn.dropdown=h,this},a(document).on("click.bs.dropdown.data-api",b).on("click.bs.dropdown.data-api",".dropdown form",function(a){a.stopPropagation()}).on("click.bs.dropdown.data-api",f,g.prototype.toggle).on("keydown.bs.dropdown.data-api",f,g.prototype.keydown).on("keydown.bs.dropdown.data-api",'[role="menu"]',g.prototype.keydown).on("keydown.bs.dropdown.data-api",'[role="listbox"]',g.prototype.keydown)}(jQuery),+function(a){"use strict";function b(b,d){return this.each(function(){var e=a(this),f=e.data("bs.modal"),g=a.extend({},c.DEFAULTS,e.data(),"object"==typeof b&&b);f||e.data("bs.modal",f=new c(this,g)),"string"==typeof b?f[b](d):g.show&&f.show(d)})}var c=function(b,c){this.options=c,this.$body=a(document.body),this.$element=a(b),this.$dialog=this.$element.find(".modal-dialog"),this.$backdrop=null,this.isShown=null,this.originalBodyPad=null,this.scrollbarWidth=0,this.ignoreBackdropClick=!1,this.options.remote&&this.$element.find(".modal-content").load(this.options.remote,a.proxy(function(){this.$element.trigger("loaded.bs.modal")},this))};c.VERSION="3.3.4",c.TRANSITION_DURATION=300,c.BACKDROP_TRANSITION_DURATION=150,c.DEFAULTS={backdrop:!0,keyboard:!0,show:!0},c.prototype.toggle=function(a){return this.isShown?this.hide():this.show(a)},c.prototype.show=function(b){var d=this,e=a.Event("show.bs.modal",{relatedTarget:b});this.$element.trigger(e),this.isShown||e.isDefaultPrevented()||(this.isShown=!0,this.checkScrollbar(),this.setScrollbar(),this.$body.addClass("modal-open"),this.escape(),this.resize(),this.$element.on("click.dismiss.bs.modal",'[data-dismiss="modal"]',a.proxy(this.hide,this)),this.$dialog.on("mousedown.dismiss.bs.modal",function(){d.$element.one("mouseup.dismiss.bs.modal",function(b){a(b.target).is(d.$element)&&(d.ignoreBackdropClick=!0)})}),this.backdrop(function(){var e=a.support.transition&&d.$element.hasClass("fade");d.$element.parent().length||d.$element.appendTo(d.$body),d.$element.show().scrollTop(0),d.adjustDialog(),e&&d.$element[0].offsetWidth,d.$element.addClass("in").attr("aria-hidden",!1),d.enforceFocus();var f=a.Event("shown.bs.modal",{relatedTarget:b});e?d.$dialog.one("bsTransitionEnd",function(){d.$element.trigger("focus").trigger(f)}).emulateTransitionEnd(c.TRANSITION_DURATION):d.$element.trigger("focus").trigger(f)}))},c.prototype.hide=function(b){b&&b.preventDefault(),b=a.Event("hide.bs.modal"),this.$element.trigger(b),this.isShown&&!b.isDefaultPrevented()&&(this.isShown=!1,this.escape(),this.resize(),a(document).off("focusin.bs.modal"),this.$element.removeClass("in").attr("aria-hidden",!0).off("click.dismiss.bs.modal").off("mouseup.dismiss.bs.modal"),this.$dialog.off("mousedown.dismiss.bs.modal"),a.support.transition&&this.$element.hasClass("fade")?this.$element.one("bsTransitionEnd",a.proxy(this.hideModal,this)).emulateTransitionEnd(c.TRANSITION_DURATION):this.hideModal())},c.prototype.enforceFocus=function(){a(document).off("focusin.bs.modal").on("focusin.bs.modal",a.proxy(function(a){this.$element[0]===a.target||this.$element.has(a.target).length||this.$element.trigger("focus")},this))},c.prototype.escape=function(){this.isShown&&this.options.keyboard?this.$element.on("keydown.dismiss.bs.modal",a.proxy(function(a){27==a.which&&this.hide()},this)):this.isShown||this.$element.off("keydown.dismiss.bs.modal")},c.prototype.resize=function(){this.isShown?a(window).on("resize.bs.modal",a.proxy(this.handleUpdate,this)):a(window).off("resize.bs.modal")},c.prototype.hideModal=function(){var a=this;this.$element.hide(),this.backdrop(function(){a.$body.removeClass("modal-open"),a.resetAdjustments(),a.resetScrollbar(),a.$element.trigger("hidden.bs.modal")})},c.prototype.removeBackdrop=function(){this.$backdrop&&this.$backdrop.remove(),this.$backdrop=null},c.prototype.backdrop=function(b){var d=this,e=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var f=a.support.transition&&e;if(this.$backdrop=a('<div class="modal-backdrop '+e+'" />').appendTo(this.$body),this.$element.on("click.dismiss.bs.modal",a.proxy(function(a){return this.ignoreBackdropClick?void(this.ignoreBackdropClick=!1):void(a.target===a.currentTarget&&("static"==this.options.backdrop?this.$element[0].focus():this.hide()))},this)),f&&this.$backdrop[0].offsetWidth,this.$backdrop.addClass("in"),!b)return;f?this.$backdrop.one("bsTransitionEnd",b).emulateTransitionEnd(c.BACKDROP_TRANSITION_DURATION):b()}else if(!this.isShown&&this.$backdrop){this.$backdrop.removeClass("in");var g=function(){d.removeBackdrop(),b&&b()};a.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one("bsTransitionEnd",g).emulateTransitionEnd(c.BACKDROP_TRANSITION_DURATION):g()}else b&&b()},c.prototype.handleUpdate=function(){this.adjustDialog()},c.prototype.adjustDialog=function(){var a=this.$element[0].scrollHeight>document.documentElement.clientHeight;this.$element.css({paddingLeft:!this.bodyIsOverflowing&&a?this.scrollbarWidth:"",paddingRight:this.bodyIsOverflowing&&!a?this.scrollbarWidth:""})},c.prototype.resetAdjustments=function(){this.$element.css({paddingLeft:"",paddingRight:""})},c.prototype.checkScrollbar=function(){var a=window.innerWidth;if(!a){var b=document.documentElement.getBoundingClientRect();a=b.right-Math.abs(b.left)}this.bodyIsOverflowing=document.body.clientWidth<a,this.scrollbarWidth=this.measureScrollbar()},c.prototype.setScrollbar=function(){var a=parseInt(this.$body.css("padding-right")||0,10);this.originalBodyPad=document.body.style.paddingRight||"",this.bodyIsOverflowing&&this.$body.css("padding-right",a+this.scrollbarWidth)},c.prototype.resetScrollbar=function(){this.$body.css("padding-right",this.originalBodyPad)},c.prototype.measureScrollbar=function(){var a=document.createElement("div");a.className="modal-scrollbar-measure",this.$body.append(a);var b=a.offsetWidth-a.clientWidth;return this.$body[0].removeChild(a),b};var d=a.fn.modal;a.fn.modal=b,a.fn.modal.Constructor=c,a.fn.modal.noConflict=function(){return a.fn.modal=d,this},a(document).on("click.bs.modal.data-api",'[data-toggle="modal"]',function(c){var d=a(this),e=d.attr("href"),f=a(d.attr("data-target")||e&&e.replace(/.*(?=#[^\s]+$)/,"")),g=f.data("bs.modal")?"toggle":a.extend({remote:!/#/.test(e)&&e},f.data(),d.data());d.is("a")&&c.preventDefault(),f.one("show.bs.modal",function(a){a.isDefaultPrevented()||f.one("hidden.bs.modal",function(){d.is(":visible")&&d.trigger("focus")})}),b.call(f,g,this)})}(jQuery),+function(a){"use strict";function b(b){return this.each(function(){var d=a(this),e=d.data("bs.tooltip"),f="object"==typeof b&&b;(e||!/destroy|hide/.test(b))&&(e||d.data("bs.tooltip",e=new c(this,f)),"string"==typeof b&&e[b]())})}var c=function(a,b){this.type=null,this.options=null,this.enabled=null,this.timeout=null,this.hoverState=null,this.$element=null,this.init("tooltip",a,b)};c.VERSION="3.3.4",c.TRANSITION_DURATION=150,c.DEFAULTS={animation:!0,placement:"top",selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,container:!1,viewport:{selector:"body",padding:0}},c.prototype.init=function(b,c,d){if(this.enabled=!0,this.type=b,this.$element=a(c),this.options=this.getOptions(d),this.$viewport=this.options.viewport&&a(this.options.viewport.selector||this.options.viewport),this.$element[0]instanceof document.constructor&&!this.options.selector)throw new Error("`selector` option must be specified when initializing "+this.type+" on the window.document object!");for(var e=this.options.trigger.split(" "),f=e.length;f--;){var g=e[f];if("click"==g)this.$element.on("click."+this.type,this.options.selector,a.proxy(this.toggle,this));else if("manual"!=g){var h="hover"==g?"mouseenter":"focusin",i="hover"==g?"mouseleave":"focusout";this.$element.on(h+"."+this.type,this.options.selector,a.proxy(this.enter,this)),this.$element.on(i+"."+this.type,this.options.selector,a.proxy(this.leave,this))}}this.options.selector?this._options=a.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()},c.prototype.getDefaults=function(){return c.DEFAULTS},c.prototype.getOptions=function(b){return b=a.extend({},this.getDefaults(),this.$element.data(),b),b.delay&&"number"==typeof b.delay&&(b.delay={show:b.delay,hide:b.delay}),b},c.prototype.getDelegateOptions=function(){var b={},c=this.getDefaults();return this._options&&a.each(this._options,function(a,d){c[a]!=d&&(b[a]=d)}),b},c.prototype.enter=function(b){var c=b instanceof this.constructor?b:a(b.currentTarget).data("bs."+this.type);return c&&c.$tip&&c.$tip.is(":visible")?void(c.hoverState="in"):(c||(c=new this.constructor(b.currentTarget,this.getDelegateOptions()),a(b.currentTarget).data("bs."+this.type,c)),clearTimeout(c.timeout),c.hoverState="in",c.options.delay&&c.options.delay.show?void(c.timeout=setTimeout(function(){"in"==c.hoverState&&c.show()},c.options.delay.show)):c.show())},c.prototype.leave=function(b){var c=b instanceof this.constructor?b:a(b.currentTarget).data("bs."+this.type);return c||(c=new this.constructor(b.currentTarget,this.getDelegateOptions()),a(b.currentTarget).data("bs."+this.type,c)),clearTimeout(c.timeout),c.hoverState="out",c.options.delay&&c.options.delay.hide?void(c.timeout=setTimeout(function(){"out"==c.hoverState&&c.hide()},c.options.delay.hide)):c.hide()},c.prototype.show=function(){var b=a.Event("show.bs."+this.type);if(this.hasContent()&&this.enabled){this.$element.trigger(b);var d=a.contains(this.$element[0].ownerDocument.documentElement,this.$element[0]);if(b.isDefaultPrevented()||!d)return;var e=this,f=this.tip(),g=this.getUID(this.type);this.setContent(),f.attr("id",g),this.$element.attr("aria-describedby",g),this.options.animation&&f.addClass("fade");var h="function"==typeof this.options.placement?this.options.placement.call(this,f[0],this.$element[0]):this.options.placement,i=/\s?auto?\s?/i,j=i.test(h);j&&(h=h.replace(i,"")||"top"),f.detach().css({top:0,left:0,display:"block"}).addClass(h).data("bs."+this.type,this),this.options.container?f.appendTo(this.options.container):f.insertAfter(this.$element);var k=this.getPosition(),l=f[0].offsetWidth,m=f[0].offsetHeight;if(j){var n=h,o=this.options.container?a(this.options.container):this.$element.parent(),p=this.getPosition(o);h="bottom"==h&&k.bottom+m>p.bottom?"top":"top"==h&&k.top-m<p.top?"bottom":"right"==h&&k.right+l>p.width?"left":"left"==h&&k.left-l<p.left?"right":h,f.removeClass(n).addClass(h)}var q=this.getCalculatedOffset(h,k,l,m);this.applyPlacement(q,h);var r=function(){var a=e.hoverState;e.$element.trigger("shown.bs."+e.type),e.hoverState=null,"out"==a&&e.leave(e)};a.support.transition&&this.$tip.hasClass("fade")?f.one("bsTransitionEnd",r).emulateTransitionEnd(c.TRANSITION_DURATION):r()}},c.prototype.applyPlacement=function(b,c){var d=this.tip(),e=d[0].offsetWidth,f=d[0].offsetHeight,g=parseInt(d.css("margin-top"),10),h=parseInt(d.css("margin-left"),10);isNaN(g)&&(g=0),isNaN(h)&&(h=0),b.top=b.top+g,b.left=b.left+h,a.offset.setOffset(d[0],a.extend({using:function(a){d.css({top:Math.round(a.top),left:Math.round(a.left)})}},b),0),d.addClass("in");var i=d[0].offsetWidth,j=d[0].offsetHeight;"top"==c&&j!=f&&(b.top=b.top+f-j);var k=this.getViewportAdjustedDelta(c,b,i,j);k.left?b.left+=k.left:b.top+=k.top;var l=/top|bottom/.test(c),m=l?2*k.left-e+i:2*k.top-f+j,n=l?"offsetWidth":"offsetHeight";d.offset(b),this.replaceArrow(m,d[0][n],l)},c.prototype.replaceArrow=function(a,b,c){this.arrow().css(c?"left":"top",50*(1-a/b)+"%").css(c?"top":"left","")},c.prototype.setContent=function(){var a=this.tip(),b=this.getTitle();a.find(".tooltip-inner")[this.options.html?"html":"text"](b),a.removeClass("fade in top bottom left right")},c.prototype.hide=function(b){function d(){"in"!=e.hoverState&&f.detach(),e.$element.removeAttr("aria-describedby").trigger("hidden.bs."+e.type),b&&b()}var e=this,f=a(this.$tip),g=a.Event("hide.bs."+this.type);return this.$element.trigger(g),g.isDefaultPrevented()?void 0:(f.removeClass("in"),a.support.transition&&f.hasClass("fade")?f.one("bsTransitionEnd",d).emulateTransitionEnd(c.TRANSITION_DURATION):d(),this.hoverState=null,this)},c.prototype.fixTitle=function(){var a=this.$element;(a.attr("title")||"string"!=typeof a.attr("data-original-title"))&&a.attr("data-original-title",a.attr("title")||"").attr("title","")},c.prototype.hasContent=function(){return this.getTitle()},c.prototype.getPosition=function(b){b=b||this.$element;var c=b[0],d="BODY"==c.tagName,e=c.getBoundingClientRect();null==e.width&&(e=a.extend({},e,{width:e.right-e.left,height:e.bottom-e.top}));var f=d?{top:0,left:0}:b.offset(),g={scroll:d?document.documentElement.scrollTop||document.body.scrollTop:b.scrollTop()},h=d?{width:a(window).width(),height:a(window).height()}:null;return a.extend({},e,g,h,f)},c.prototype.getCalculatedOffset=function(a,b,c,d){return"bottom"==a?{top:b.top+b.height,left:b.left+b.width/2-c/2}:"top"==a?{top:b.top-d,left:b.left+b.width/2-c/2}:"left"==a?{top:b.top+b.height/2-d/2,left:b.left-c}:{top:b.top+b.height/2-d/2,left:b.left+b.width}},c.prototype.getViewportAdjustedDelta=function(a,b,c,d){var e={top:0,left:0};if(!this.$viewport)return e;var f=this.options.viewport&&this.options.viewport.padding||0,g=this.getPosition(this.$viewport);if(/right|left/.test(a)){var h=b.top-f-g.scroll,i=b.top+f-g.scroll+d;h<g.top?e.top=g.top-h:i>g.top+g.height&&(e.top=g.top+g.height-i)}else{var j=b.left-f,k=b.left+f+c;j<g.left?e.left=g.left-j:k>g.width&&(e.left=g.left+g.width-k)}return e},c.prototype.getTitle=function(){var a,b=this.$element,c=this.options;return a=b.attr("data-original-title")||("function"==typeof c.title?c.title.call(b[0]):c.title)},c.prototype.getUID=function(a){do a+=~~(1e6*Math.random());while(document.getElementById(a));return a},c.prototype.tip=function(){return this.$tip=this.$tip||a(this.options.template)},c.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".tooltip-arrow")},c.prototype.enable=function(){this.enabled=!0},c.prototype.disable=function(){this.enabled=!1},c.prototype.toggleEnabled=function(){this.enabled=!this.enabled},c.prototype.toggle=function(b){var c=this;b&&(c=a(b.currentTarget).data("bs."+this.type),c||(c=new this.constructor(b.currentTarget,this.getDelegateOptions()),a(b.currentTarget).data("bs."+this.type,c))),c.tip().hasClass("in")?c.leave(c):c.enter(c)},c.prototype.destroy=function(){var a=this;clearTimeout(this.timeout),this.hide(function(){a.$element.off("."+a.type).removeData("bs."+a.type)})};var d=a.fn.tooltip;a.fn.tooltip=b,a.fn.tooltip.Constructor=c,a.fn.tooltip.noConflict=function(){return a.fn.tooltip=d,this}}(jQuery),+function(a){"use strict";function b(b){return this.each(function(){var d=a(this),e=d.data("bs.popover"),f="object"==typeof b&&b;(e||!/destroy|hide/.test(b))&&(e||d.data("bs.popover",e=new c(this,f)),"string"==typeof b&&e[b]())})}var c=function(a,b){this.init("popover",a,b)};if(!a.fn.tooltip)throw new Error("Popover requires tooltip.js");c.VERSION="3.3.4",c.DEFAULTS=a.extend({},a.fn.tooltip.Constructor.DEFAULTS,{placement:"right",trigger:"click",content:"",template:'<div class="popover" role="tooltip"><div class="arrow"></div><h3 class="popover-title"></h3><div class="popover-content"></div></div>'}),c.prototype=a.extend({},a.fn.tooltip.Constructor.prototype),c.prototype.constructor=c,c.prototype.getDefaults=function(){return c.DEFAULTS},c.prototype.setContent=function(){var a=this.tip(),b=this.getTitle(),c=this.getContent();a.find(".popover-title")[this.options.html?"html":"text"](b),a.find(".popover-content").children().detach().end()[this.options.html?"string"==typeof c?"html":"append":"text"](c),a.removeClass("fade top bottom left right in"),a.find(".popover-title").html()||a.find(".popover-title").hide()},c.prototype.hasContent=function(){return this.getTitle()||this.getContent()},c.prototype.getContent=function(){var a=this.$element,b=this.options;return a.attr("data-content")||("function"==typeof b.content?b.content.call(a[0]):b.content)},c.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".arrow")};var d=a.fn.popover;a.fn.popover=b,a.fn.popover.Constructor=c,a.fn.popover.noConflict=function(){return a.fn.popover=d,this}}(jQuery),+function(a){"use strict";function b(c,d){this.$body=a(document.body),this.$scrollElement=a(a(c).is(document.body)?window:c),this.options=a.extend({},b.DEFAULTS,d),this.selector=(this.options.target||"")+" .nav li > a",this.offsets=[],this.targets=[],this.activeTarget=null,this.scrollHeight=0,this.$scrollElement.on("scroll.bs.scrollspy",a.proxy(this.process,this)),this.refresh(),this.process()}function c(c){return this.each(function(){var d=a(this),e=d.data("bs.scrollspy"),f="object"==typeof c&&c;e||d.data("bs.scrollspy",e=new b(this,f)),"string"==typeof c&&e[c]()})}b.VERSION="3.3.4",b.DEFAULTS={offset:10},b.prototype.getScrollHeight=function(){return this.$scrollElement[0].scrollHeight||Math.max(this.$body[0].scrollHeight,document.documentElement.scrollHeight)},b.prototype.refresh=function(){var b=this,c="offset",d=0;this.offsets=[],this.targets=[],this.scrollHeight=this.getScrollHeight(),a.isWindow(this.$scrollElement[0])||(c="position",d=this.$scrollElement.scrollTop()),this.$body.find(this.selector).map(function(){var b=a(this),e=b.data("target")||b.attr("href"),f=/^#./.test(e)&&a(e);return f&&f.length&&f.is(":visible")&&[[f[c]().top+d,e]]||null}).sort(function(a,b){return a[0]-b[0]}).each(function(){b.offsets.push(this[0]),b.targets.push(this[1])})},b.prototype.process=function(){var a,b=this.$scrollElement.scrollTop()+this.options.offset,c=this.getScrollHeight(),d=this.options.offset+c-this.$scrollElement.height(),e=this.offsets,f=this.targets,g=this.activeTarget;if(this.scrollHeight!=c&&this.refresh(),b>=d)return g!=(a=f[f.length-1])&&this.activate(a);if(g&&b<e[0])return this.activeTarget=null,this.clear();for(a=e.length;a--;)g!=f[a]&&b>=e[a]&&(void 0===e[a+1]||b<e[a+1])&&this.activate(f[a])},b.prototype.activate=function(b){this.activeTarget=b,this.clear();var c=this.selector+'[data-target="'+b+'"],'+this.selector+'[href="'+b+'"]',d=a(c).parents("li").addClass("active");d.parent(".dropdown-menu").length&&(d=d.closest("li.dropdown").addClass("active")),d.trigger("activate.bs.scrollspy")},b.prototype.clear=function(){a(this.selector).parentsUntil(this.options.target,".active").removeClass("active")};var d=a.fn.scrollspy;a.fn.scrollspy=c,a.fn.scrollspy.Constructor=b,a.fn.scrollspy.noConflict=function(){return a.fn.scrollspy=d,this},a(window).on("load.bs.scrollspy.data-api",function(){a('[data-spy="scroll"]').each(function(){var b=a(this);c.call(b,b.data())})})}(jQuery),+function(a){"use strict";function b(b){return this.each(function(){var d=a(this),e=d.data("bs.tab");e||d.data("bs.tab",e=new c(this)),"string"==typeof b&&e[b]()})}var c=function(b){this.element=a(b)};c.VERSION="3.3.4",c.TRANSITION_DURATION=150,c.prototype.show=function(){var b=this.element,c=b.closest("ul:not(.dropdown-menu)"),d=b.data("target");if(d||(d=b.attr("href"),d=d&&d.replace(/.*(?=#[^\s]*$)/,"")),!b.parent("li").hasClass("active")){
var e=c.find(".active:last a"),f=a.Event("hide.bs.tab",{relatedTarget:b[0]}),g=a.Event("show.bs.tab",{relatedTarget:e[0]});if(e.trigger(f),b.trigger(g),!g.isDefaultPrevented()&&!f.isDefaultPrevented()){var h=a(d);this.activate(b.closest("li"),c),this.activate(h,h.parent(),function(){e.trigger({type:"hidden.bs.tab",relatedTarget:b[0]}),b.trigger({type:"shown.bs.tab",relatedTarget:e[0]})})}}},c.prototype.activate=function(b,d,e){function f(){g.removeClass("active").find("> .dropdown-menu > .active").removeClass("active").end().find('[data-toggle="tab"]').attr("aria-expanded",!1),b.addClass("active").find('[data-toggle="tab"]').attr("aria-expanded",!0),h?(b[0].offsetWidth,b.addClass("in")):b.removeClass("fade"),b.parent(".dropdown-menu").length&&b.closest("li.dropdown").addClass("active").end().find('[data-toggle="tab"]').attr("aria-expanded",!0),e&&e()}var g=d.find("> .active"),h=e&&a.support.transition&&(g.length&&g.hasClass("fade")||!!d.find("> .fade").length);g.length&&h?g.one("bsTransitionEnd",f).emulateTransitionEnd(c.TRANSITION_DURATION):f(),g.removeClass("in")};var d=a.fn.tab;a.fn.tab=b,a.fn.tab.Constructor=c,a.fn.tab.noConflict=function(){return a.fn.tab=d,this};var e=function(c){c.preventDefault(),b.call(a(this),"show")};a(document).on("click.bs.tab.data-api",'[data-toggle="tab"]',e).on("click.bs.tab.data-api",'[data-toggle="pill"]',e)}(jQuery),+function(a){"use strict";function b(b){return this.each(function(){var d=a(this),e=d.data("bs.affix"),f="object"==typeof b&&b;e||d.data("bs.affix",e=new c(this,f)),"string"==typeof b&&e[b]()})}var c=function(b,d){this.options=a.extend({},c.DEFAULTS,d),this.$target=a(this.options.target).on("scroll.bs.affix.data-api",a.proxy(this.checkPosition,this)).on("click.bs.affix.data-api",a.proxy(this.checkPositionWithEventLoop,this)),this.$element=a(b),this.affixed=null,this.unpin=null,this.pinnedOffset=null,this.checkPosition()};c.VERSION="3.3.4",c.RESET="affix affix-top affix-bottom",c.DEFAULTS={offset:0,target:window},c.prototype.getState=function(a,b,c,d){var e=this.$target.scrollTop(),f=this.$element.offset(),g=this.$target.height();if(null!=c&&"top"==this.affixed)return c>e?"top":!1;if("bottom"==this.affixed)return null!=c?e+this.unpin<=f.top?!1:"bottom":a-d>=e+g?!1:"bottom";var h=null==this.affixed,i=h?e:f.top,j=h?g:b;return null!=c&&c>=e?"top":null!=d&&i+j>=a-d?"bottom":!1},c.prototype.getPinnedOffset=function(){if(this.pinnedOffset)return this.pinnedOffset;this.$element.removeClass(c.RESET).addClass("affix");var a=this.$target.scrollTop(),b=this.$element.offset();return this.pinnedOffset=b.top-a},c.prototype.checkPositionWithEventLoop=function(){setTimeout(a.proxy(this.checkPosition,this),1)},c.prototype.checkPosition=function(){if(this.$element.is(":visible")){var b=this.$element.height(),d=this.options.offset,e=d.top,f=d.bottom,g=a(document.body).height();"object"!=typeof d&&(f=e=d),"function"==typeof e&&(e=d.top(this.$element)),"function"==typeof f&&(f=d.bottom(this.$element));var h=this.getState(g,b,e,f);if(this.affixed!=h){null!=this.unpin&&this.$element.css("top","");var i="affix"+(h?"-"+h:""),j=a.Event(i+".bs.affix");if(this.$element.trigger(j),j.isDefaultPrevented())return;this.affixed=h,this.unpin="bottom"==h?this.getPinnedOffset():null,this.$element.removeClass(c.RESET).addClass(i).trigger(i.replace("affix","affixed")+".bs.affix")}"bottom"==h&&this.$element.offset({top:g-b-f})}};var d=a.fn.affix;a.fn.affix=b,a.fn.affix.Constructor=c,a.fn.affix.noConflict=function(){return a.fn.affix=d,this},a(window).on("load",function(){a('[data-spy="affix"]').each(function(){var c=a(this),d=c.data();d.offset=d.offset||{},null!=d.offsetBottom&&(d.offset.bottom=d.offsetBottom),null!=d.offsetTop&&(d.offset.top=d.offsetTop),b.call(c,d)})})}(jQuery);
// CodeMirror, copyright (c) by Marijn Haverbeke and others
// Distributed under an MIT license: http://codemirror.net/LICENSE

// TODO actually recognize syntax of TypeScript constructs

(function(mod) {
  if (typeof exports == "object" && typeof module == "object") // CommonJS
    mod(require("../../lib/codemirror"));
  else if (typeof define == "function" && define.amd) // AMD
    define(["../../lib/codemirror"], mod);
  else // Plain browser env
    mod(CodeMirror);
})(function(CodeMirror) {
"use strict";

CodeMirror.defineMode("javascript", function(config, parserConfig) {
  var indentUnit = config.indentUnit;
  var statementIndent = parserConfig.statementIndent;
  var jsonldMode = parserConfig.jsonld;
  var jsonMode = parserConfig.json || jsonldMode;
  var isTS = parserConfig.typescript;
  var wordRE = parserConfig.wordCharacters || /[\w$]/;

  // Tokenizer

  var keywords = function(){
    function kw(type) {return {type: type, style: "keyword"};}
    var A = kw("keyword a"), B = kw("keyword b"), C = kw("keyword c");
    var operator = kw("operator"), atom = {type: "atom", style: "atom"};

    var jsKeywords = {
      "if": kw("if"), "while": A, "with": A, "else": B, "do": B, "try": B, "finally": B,
      "return": C, "break": C, "continue": C, "new": C, "delete": C, "throw": C, "debugger": C,
      "var": kw("var"), "const": kw("var"), "let": kw("var"),
      "function": kw("function"), "catch": kw("catch"),
      "for": kw("for"), "switch": kw("switch"), "case": kw("case"), "default": kw("default"),
      "in": operator, "typeof": operator, "instanceof": operator,
      "true": atom, "false": atom, "null": atom, "undefined": atom, "NaN": atom, "Infinity": atom,
      "this": kw("this"), "module": kw("module"), "class": kw("class"), "super": kw("atom"),
      "yield": C, "export": kw("export"), "import": kw("import"), "extends": C
    };

    // Extend the 'normal' keywords with the TypeScript language extensions
    if (isTS) {
      var type = {type: "variable", style: "variable-3"};
      var tsKeywords = {
        // object-like things
        "interface": kw("interface"),
        "extends": kw("extends"),
        "constructor": kw("constructor"),

        // scope modifiers
        "public": kw("public"),
        "private": kw("private"),
        "protected": kw("protected"),
        "static": kw("static"),

        // types
        "string": type, "number": type, "bool": type, "any": type
      };

      for (var attr in tsKeywords) {
        jsKeywords[attr] = tsKeywords[attr];
      }
    }

    return jsKeywords;
  }();

  var isOperatorChar = /[+\-*&%=<>!?|~^]/;
  var isJsonldKeyword = /^@(context|id|value|language|type|container|list|set|reverse|index|base|vocab|graph)"/;

  function readRegexp(stream) {
    var escaped = false, next, inSet = false;
    while ((next = stream.next()) != null) {
      if (!escaped) {
        if (next == "/" && !inSet) return;
        if (next == "[") inSet = true;
        else if (inSet && next == "]") inSet = false;
      }
      escaped = !escaped && next == "\\";
    }
  }

  // Used as scratch variables to communicate multiple values without
  // consing up tons of objects.
  var type, content;
  function ret(tp, style, cont) {
    type = tp; content = cont;
    return style;
  }
  function tokenBase(stream, state) {
    var ch = stream.next();
    if (ch == '"' || ch == "'") {
      state.tokenize = tokenString(ch);
      return state.tokenize(stream, state);
    } else if (ch == "." && stream.match(/^\d+(?:[eE][+\-]?\d+)?/)) {
      return ret("number", "number");
    } else if (ch == "." && stream.match("..")) {
      return ret("spread", "meta");
    } else if (/[\[\]{}\(\),;\:\.]/.test(ch)) {
      return ret(ch);
    } else if (ch == "=" && stream.eat(">")) {
      return ret("=>", "operator");
    } else if (ch == "0" && stream.eat(/x/i)) {
      stream.eatWhile(/[\da-f]/i);
      return ret("number", "number");
    } else if (/\d/.test(ch)) {
      stream.match(/^\d*(?:\.\d*)?(?:[eE][+\-]?\d+)?/);
      return ret("number", "number");
    } else if (ch == "/") {
      if (stream.eat("*")) {
        state.tokenize = tokenComment;
        return tokenComment(stream, state);
      } else if (stream.eat("/")) {
        stream.skipToEnd();
        return ret("comment", "comment");
      } else if (state.lastType == "operator" || state.lastType == "keyword c" ||
               state.lastType == "sof" || /^[\[{}\(,;:]$/.test(state.lastType)) {
        readRegexp(stream);
        stream.eatWhile(/[gimy]/); // 'y' is "sticky" option in Mozilla
        return ret("regexp", "string-2");
      } else {
        stream.eatWhile(isOperatorChar);
        return ret("operator", "operator", stream.current());
      }
    } else if (ch == "`") {
      state.tokenize = tokenQuasi;
      return tokenQuasi(stream, state);
    } else if (ch == "#") {
      stream.skipToEnd();
      return ret("error", "error");
    } else if (isOperatorChar.test(ch)) {
      stream.eatWhile(isOperatorChar);
      return ret("operator", "operator", stream.current());
    } else if (wordRE.test(ch)) {
      stream.eatWhile(wordRE);
      var word = stream.current(), known = keywords.propertyIsEnumerable(word) && keywords[word];
      return (known && state.lastType != ".") ? ret(known.type, known.style, word) :
                     ret("variable", "variable", word);
    }
  }

  function tokenString(quote) {
    return function(stream, state) {
      var escaped = false, next;
      if (jsonldMode && stream.peek() == "@" && stream.match(isJsonldKeyword)){
        state.tokenize = tokenBase;
        return ret("jsonld-keyword", "meta");
      }
      while ((next = stream.next()) != null) {
        if (next == quote && !escaped) break;
        escaped = !escaped && next == "\\";
      }
      if (!escaped) state.tokenize = tokenBase;
      return ret("string", "string");
    };
  }

  function tokenComment(stream, state) {
    var maybeEnd = false, ch;
    while (ch = stream.next()) {
      if (ch == "/" && maybeEnd) {
        state.tokenize = tokenBase;
        break;
      }
      maybeEnd = (ch == "*");
    }
    return ret("comment", "comment");
  }

  function tokenQuasi(stream, state) {
    var escaped = false, next;
    while ((next = stream.next()) != null) {
      if (!escaped && (next == "`" || next == "$" && stream.eat("{"))) {
        state.tokenize = tokenBase;
        break;
      }
      escaped = !escaped && next == "\\";
    }
    return ret("quasi", "string-2", stream.current());
  }

  var brackets = "([{}])";
  // This is a crude lookahead trick to try and notice that we're
  // parsing the argument patterns for a fat-arrow function before we
  // actually hit the arrow token. It only works if the arrow is on
  // the same line as the arguments and there's no strange noise
  // (comments) in between. Fallback is to only notice when we hit the
  // arrow, and not declare the arguments as locals for the arrow
  // body.
  function findFatArrow(stream, state) {
    if (state.fatArrowAt) state.fatArrowAt = null;
    var arrow = stream.string.indexOf("=>", stream.start);
    if (arrow < 0) return;

    var depth = 0, sawSomething = false;
    for (var pos = arrow - 1; pos >= 0; --pos) {
      var ch = stream.string.charAt(pos);
      var bracket = brackets.indexOf(ch);
      if (bracket >= 0 && bracket < 3) {
        if (!depth) { ++pos; break; }
        if (--depth == 0) break;
      } else if (bracket >= 3 && bracket < 6) {
        ++depth;
      } else if (wordRE.test(ch)) {
        sawSomething = true;
      } else if (sawSomething && !depth) {
        ++pos;
        break;
      }
    }
    if (sawSomething && !depth) state.fatArrowAt = pos;
  }

  // Parser

  var atomicTypes = {"atom": true, "number": true, "variable": true, "string": true, "regexp": true, "this": true, "jsonld-keyword": true};

  function JSLexical(indented, column, type, align, prev, info) {
    this.indented = indented;
    this.column = column;
    this.type = type;
    this.prev = prev;
    this.info = info;
    if (align != null) this.align = align;
  }

  function inScope(state, varname) {
    for (var v = state.localVars; v; v = v.next)
      if (v.name == varname) return true;
    for (var cx = state.context; cx; cx = cx.prev) {
      for (var v = cx.vars; v; v = v.next)
        if (v.name == varname) return true;
    }
  }

  function parseJS(state, style, type, content, stream) {
    var cc = state.cc;
    // Communicate our context to the combinators.
    // (Less wasteful than consing up a hundred closures on every call.)
    cx.state = state; cx.stream = stream; cx.marked = null, cx.cc = cc; cx.style = style;

    if (!state.lexical.hasOwnProperty("align"))
      state.lexical.align = true;

    while(true) {
      var combinator = cc.length ? cc.pop() : jsonMode ? expression : statement;
      if (combinator(type, content)) {
        while(cc.length && cc[cc.length - 1].lex)
          cc.pop()();
        if (cx.marked) return cx.marked;
        if (type == "variable" && inScope(state, content)) return "variable-2";
        return style;
      }
    }
  }

  // Combinator utils

  var cx = {state: null, column: null, marked: null, cc: null};
  function pass() {
    for (var i = arguments.length - 1; i >= 0; i--) cx.cc.push(arguments[i]);
  }
  function cont() {
    pass.apply(null, arguments);
    return true;
  }
  function register(varname) {
    function inList(list) {
      for (var v = list; v; v = v.next)
        if (v.name == varname) return true;
      return false;
    }
    var state = cx.state;
    if (state.context) {
      cx.marked = "def";
      if (inList(state.localVars)) return;
      state.localVars = {name: varname, next: state.localVars};
    } else {
      if (inList(state.globalVars)) return;
      if (parserConfig.globalVars)
        state.globalVars = {name: varname, next: state.globalVars};
    }
  }

  // Combinators

  var defaultVars = {name: "this", next: {name: "arguments"}};
  function pushcontext() {
    cx.state.context = {prev: cx.state.context, vars: cx.state.localVars};
    cx.state.localVars = defaultVars;
  }
  function popcontext() {
    cx.state.localVars = cx.state.context.vars;
    cx.state.context = cx.state.context.prev;
  }
  function pushlex(type, info) {
    var result = function() {
      var state = cx.state, indent = state.indented;
      if (state.lexical.type == "stat") indent = state.lexical.indented;
      else for (var outer = state.lexical; outer && outer.type == ")" && outer.align; outer = outer.prev)
        indent = outer.indented;
      state.lexical = new JSLexical(indent, cx.stream.column(), type, null, state.lexical, info);
    };
    result.lex = true;
    return result;
  }
  function poplex() {
    var state = cx.state;
    if (state.lexical.prev) {
      if (state.lexical.type == ")")
        state.indented = state.lexical.indented;
      state.lexical = state.lexical.prev;
    }
  }
  poplex.lex = true;

  function expect(wanted) {
    function exp(type) {
      if (type == wanted) return cont();
      else if (wanted == ";") return pass();
      else return cont(exp);
    };
    return exp;
  }

  function statement(type, value) {
    if (type == "var") return cont(pushlex("vardef", value.length), vardef, expect(";"), poplex);
    if (type == "keyword a") return cont(pushlex("form"), expression, statement, poplex);
    if (type == "keyword b") return cont(pushlex("form"), statement, poplex);
    if (type == "{") return cont(pushlex("}"), block, poplex);
    if (type == ";") return cont();
    if (type == "if") {
      if (cx.state.lexical.info == "else" && cx.state.cc[cx.state.cc.length - 1] == poplex)
        cx.state.cc.pop()();
      return cont(pushlex("form"), expression, statement, poplex, maybeelse);
    }
    if (type == "function") return cont(functiondef);
    if (type == "for") return cont(pushlex("form"), forspec, statement, poplex);
    if (type == "variable") return cont(pushlex("stat"), maybelabel);
    if (type == "switch") return cont(pushlex("form"), expression, pushlex("}", "switch"), expect("{"),
                                      block, poplex, poplex);
    if (type == "case") return cont(expression, expect(":"));
    if (type == "default") return cont(expect(":"));
    if (type == "catch") return cont(pushlex("form"), pushcontext, expect("("), funarg, expect(")"),
                                     statement, poplex, popcontext);
    if (type == "module") return cont(pushlex("form"), pushcontext, afterModule, popcontext, poplex);
    if (type == "class") return cont(pushlex("form"), className, poplex);
    if (type == "export") return cont(pushlex("form"), afterExport, poplex);
    if (type == "import") return cont(pushlex("form"), afterImport, poplex);
    return pass(pushlex("stat"), expression, expect(";"), poplex);
  }
  function expression(type) {
    return expressionInner(type, false);
  }
  function expressionNoComma(type) {
    return expressionInner(type, true);
  }
  function expressionInner(type, noComma) {
    if (cx.state.fatArrowAt == cx.stream.start) {
      var body = noComma ? arrowBodyNoComma : arrowBody;
      if (type == "(") return cont(pushcontext, pushlex(")"), commasep(pattern, ")"), poplex, expect("=>"), body, popcontext);
      else if (type == "variable") return pass(pushcontext, pattern, expect("=>"), body, popcontext);
    }

    var maybeop = noComma ? maybeoperatorNoComma : maybeoperatorComma;
    if (atomicTypes.hasOwnProperty(type)) return cont(maybeop);
    if (type == "function") return cont(functiondef, maybeop);
    if (type == "keyword c") return cont(noComma ? maybeexpressionNoComma : maybeexpression);
    if (type == "(") return cont(pushlex(")"), maybeexpression, comprehension, expect(")"), poplex, maybeop);
    if (type == "operator" || type == "spread") return cont(noComma ? expressionNoComma : expression);
    if (type == "[") return cont(pushlex("]"), arrayLiteral, poplex, maybeop);
    if (type == "{") return contCommasep(objprop, "}", null, maybeop);
    if (type == "quasi") { return pass(quasi, maybeop); }
    return cont();
  }
  function maybeexpression(type) {
    if (type.match(/[;\}\)\],]/)) return pass();
    return pass(expression);
  }
  function maybeexpressionNoComma(type) {
    if (type.match(/[;\}\)\],]/)) return pass();
    return pass(expressionNoComma);
  }

  function maybeoperatorComma(type, value) {
    if (type == ",") return cont(expression);
    return maybeoperatorNoComma(type, value, false);
  }
  function maybeoperatorNoComma(type, value, noComma) {
    var me = noComma == false ? maybeoperatorComma : maybeoperatorNoComma;
    var expr = noComma == false ? expression : expressionNoComma;
    if (type == "=>") return cont(pushcontext, noComma ? arrowBodyNoComma : arrowBody, popcontext);
    if (type == "operator") {
      if (/\+\+|--/.test(value)) return cont(me);
      if (value == "?") return cont(expression, expect(":"), expr);
      return cont(expr);
    }
    if (type == "quasi") { return pass(quasi, me); }
    if (type == ";") return;
    if (type == "(") return contCommasep(expressionNoComma, ")", "call", me);
    if (type == ".") return cont(property, me);
    if (type == "[") return cont(pushlex("]"), maybeexpression, expect("]"), poplex, me);
  }
  function quasi(type, value) {
    if (type != "quasi") return pass();
    if (value.slice(value.length - 2) != "${") return cont(quasi);
    return cont(expression, continueQuasi);
  }
  function continueQuasi(type) {
    if (type == "}") {
      cx.marked = "string-2";
      cx.state.tokenize = tokenQuasi;
      return cont(quasi);
    }
  }
  function arrowBody(type) {
    findFatArrow(cx.stream, cx.state);
    return pass(type == "{" ? statement : expression);
  }
  function arrowBodyNoComma(type) {
    findFatArrow(cx.stream, cx.state);
    return pass(type == "{" ? statement : expressionNoComma);
  }
  function maybelabel(type) {
    if (type == ":") return cont(poplex, statement);
    return pass(maybeoperatorComma, expect(";"), poplex);
  }
  function property(type) {
    if (type == "variable") {cx.marked = "property"; return cont();}
  }
  function objprop(type, value) {
    if (type == "variable" || cx.style == "keyword") {
      cx.marked = "property";
      if (value == "get" || value == "set") return cont(getterSetter);
      return cont(afterprop);
    } else if (type == "number" || type == "string") {
      cx.marked = jsonldMode ? "property" : (cx.style + " property");
      return cont(afterprop);
    } else if (type == "jsonld-keyword") {
      return cont(afterprop);
    } else if (type == "[") {
      return cont(expression, expect("]"), afterprop);
    }
  }
  function getterSetter(type) {
    if (type != "variable") return pass(afterprop);
    cx.marked = "property";
    return cont(functiondef);
  }
  function afterprop(type) {
    if (type == ":") return cont(expressionNoComma);
    if (type == "(") return pass(functiondef);
  }
  function commasep(what, end) {
    function proceed(type) {
      if (type == ",") {
        var lex = cx.state.lexical;
        if (lex.info == "call") lex.pos = (lex.pos || 0) + 1;
        return cont(what, proceed);
      }
      if (type == end) return cont();
      return cont(expect(end));
    }
    return function(type) {
      if (type == end) return cont();
      return pass(what, proceed);
    };
  }
  function contCommasep(what, end, info) {
    for (var i = 3; i < arguments.length; i++)
      cx.cc.push(arguments[i]);
    return cont(pushlex(end, info), commasep(what, end), poplex);
  }
  function block(type) {
    if (type == "}") return cont();
    return pass(statement, block);
  }
  function maybetype(type) {
    if (isTS && type == ":") return cont(typedef);
  }
  function typedef(type) {
    if (type == "variable"){cx.marked = "variable-3"; return cont();}
  }
  function vardef() {
    return pass(pattern, maybetype, maybeAssign, vardefCont);
  }
  function pattern(type, value) {
    if (type == "variable") { register(value); return cont(); }
    if (type == "[") return contCommasep(pattern, "]");
    if (type == "{") return contCommasep(proppattern, "}");
  }
  function proppattern(type, value) {
    if (type == "variable" && !cx.stream.match(/^\s*:/, false)) {
      register(value);
      return cont(maybeAssign);
    }
    if (type == "variable") cx.marked = "property";
    return cont(expect(":"), pattern, maybeAssign);
  }
  function maybeAssign(_type, value) {
    if (value == "=") return cont(expressionNoComma);
  }
  function vardefCont(type) {
    if (type == ",") return cont(vardef);
  }
  function maybeelse(type, value) {
    if (type == "keyword b" && value == "else") return cont(pushlex("form", "else"), statement, poplex);
  }
  function forspec(type) {
    if (type == "(") return cont(pushlex(")"), forspec1, expect(")"), poplex);
  }
  function forspec1(type) {
    if (type == "var") return cont(vardef, expect(";"), forspec2);
    if (type == ";") return cont(forspec2);
    if (type == "variable") return cont(formaybeinof);
    return pass(expression, expect(";"), forspec2);
  }
  function formaybeinof(_type, value) {
    if (value == "in" || value == "of") { cx.marked = "keyword"; return cont(expression); }
    return cont(maybeoperatorComma, forspec2);
  }
  function forspec2(type, value) {
    if (type == ";") return cont(forspec3);
    if (value == "in" || value == "of") { cx.marked = "keyword"; return cont(expression); }
    return pass(expression, expect(";"), forspec3);
  }
  function forspec3(type) {
    if (type != ")") cont(expression);
  }
  function functiondef(type, value) {
    if (value == "*") {cx.marked = "keyword"; return cont(functiondef);}
    if (type == "variable") {register(value); return cont(functiondef);}
    if (type == "(") return cont(pushcontext, pushlex(")"), commasep(funarg, ")"), poplex, statement, popcontext);
  }
  function funarg(type) {
    if (type == "spread") return cont(funarg);
    return pass(pattern, maybetype);
  }
  function className(type, value) {
    if (type == "variable") {register(value); return cont(classNameAfter);}
  }
  function classNameAfter(type, value) {
    if (value == "extends") return cont(expression, classNameAfter);
    if (type == "{") return cont(pushlex("}"), classBody, poplex);
  }
  function classBody(type, value) {
    if (type == "variable" || cx.style == "keyword") {
      cx.marked = "property";
      if (value == "get" || value == "set") return cont(classGetterSetter, functiondef, classBody);
      return cont(functiondef, classBody);
    }
    if (value == "*") {
      cx.marked = "keyword";
      return cont(classBody);
    }
    if (type == ";") return cont(classBody);
    if (type == "}") return cont();
  }
  function classGetterSetter(type) {
    if (type != "variable") return pass();
    cx.marked = "property";
    return cont();
  }
  function afterModule(type, value) {
    if (type == "string") return cont(statement);
    if (type == "variable") { register(value); return cont(maybeFrom); }
  }
  function afterExport(_type, value) {
    if (value == "*") { cx.marked = "keyword"; return cont(maybeFrom, expect(";")); }
    if (value == "default") { cx.marked = "keyword"; return cont(expression, expect(";")); }
    return pass(statement);
  }
  function afterImport(type) {
    if (type == "string") return cont();
    return pass(importSpec, maybeFrom);
  }
  function importSpec(type, value) {
    if (type == "{") return contCommasep(importSpec, "}");
    if (type == "variable") register(value);
    return cont();
  }
  function maybeFrom(_type, value) {
    if (value == "from") { cx.marked = "keyword"; return cont(expression); }
  }
  function arrayLiteral(type) {
    if (type == "]") return cont();
    return pass(expressionNoComma, maybeArrayComprehension);
  }
  function maybeArrayComprehension(type) {
    if (type == "for") return pass(comprehension, expect("]"));
    if (type == ",") return cont(commasep(expressionNoComma, "]"));
    return pass(commasep(expressionNoComma, "]"));
  }
  function comprehension(type) {
    if (type == "for") return cont(forspec, comprehension);
    if (type == "if") return cont(expression, comprehension);
  }

  // Interface

  return {
    startState: function(basecolumn) {
      var state = {
        tokenize: tokenBase,
        lastType: "sof",
        cc: [],
        lexical: new JSLexical((basecolumn || 0) - indentUnit, 0, "block", false),
        localVars: parserConfig.localVars,
        context: parserConfig.localVars && {vars: parserConfig.localVars},
        indented: 0
      };
      if (parserConfig.globalVars && typeof parserConfig.globalVars == "object")
        state.globalVars = parserConfig.globalVars;
      return state;
    },

    token: function(stream, state) {
      if (stream.sol()) {
        if (!state.lexical.hasOwnProperty("align"))
          state.lexical.align = false;
        state.indented = stream.indentation();
        findFatArrow(stream, state);
      }
      if (state.tokenize != tokenComment && stream.eatSpace()) return null;
      var style = state.tokenize(stream, state);
      if (type == "comment") return style;
      state.lastType = type == "operator" && (content == "++" || content == "--") ? "incdec" : type;
      return parseJS(state, style, type, content, stream);
    },

    indent: function(state, textAfter) {
      if (state.tokenize == tokenComment) return CodeMirror.Pass;
      if (state.tokenize != tokenBase) return 0;
      var firstChar = textAfter && textAfter.charAt(0), lexical = state.lexical;
      // Kludge to prevent 'maybelse' from blocking lexical scope pops
      if (!/^\s*else\b/.test(textAfter)) for (var i = state.cc.length - 1; i >= 0; --i) {
        var c = state.cc[i];
        if (c == poplex) lexical = lexical.prev;
        else if (c != maybeelse) break;
      }
      if (lexical.type == "stat" && firstChar == "}") lexical = lexical.prev;
      if (statementIndent && lexical.type == ")" && lexical.prev.type == "stat")
        lexical = lexical.prev;
      var type = lexical.type, closing = firstChar == type;

      if (type == "vardef") return lexical.indented + (state.lastType == "operator" || state.lastType == "," ? lexical.info + 1 : 0);
      else if (type == "form" && firstChar == "{") return lexical.indented;
      else if (type == "form") return lexical.indented + indentUnit;
      else if (type == "stat")
        return lexical.indented + (state.lastType == "operator" || state.lastType == "," ? statementIndent || indentUnit : 0);
      else if (lexical.info == "switch" && !closing && parserConfig.doubleIndentSwitch != false)
        return lexical.indented + (/^(?:case|default)\b/.test(textAfter) ? indentUnit : 2 * indentUnit);
      else if (lexical.align) return lexical.column + (closing ? 0 : 1);
      else return lexical.indented + (closing ? 0 : indentUnit);
    },

    electricInput: /^\s*(?:case .*?:|default:|\{|\})$/,
    blockCommentStart: jsonMode ? null : "/*",
    blockCommentEnd: jsonMode ? null : "*/",
    lineComment: jsonMode ? null : "//",
    fold: "brace",

    helperType: jsonMode ? "json" : "javascript",
    jsonldMode: jsonldMode,
    jsonMode: jsonMode
  };
});

CodeMirror.registerHelper("wordChars", "javascript", /[\w$]/);

CodeMirror.defineMIME("text/javascript", "javascript");
CodeMirror.defineMIME("text/ecmascript", "javascript");
CodeMirror.defineMIME("application/javascript", "javascript");
CodeMirror.defineMIME("application/x-javascript", "javascript");
CodeMirror.defineMIME("application/ecmascript", "javascript");
CodeMirror.defineMIME("application/json", {name: "javascript", json: true});
CodeMirror.defineMIME("application/x-json", {name: "javascript", json: true});
CodeMirror.defineMIME("application/ld+json", {name: "javascript", jsonld: true});
CodeMirror.defineMIME("text/typescript", { name: "javascript", typescript: true });
CodeMirror.defineMIME("application/typescript", { name: "javascript", typescript: true });

});

;

var musicShowCaseApp = angular.module("MusicShowCaseApp", ['ui.codemirror', 'ngRoute', 'ui.bootstrap', 'ngDraggable', 'ngCookies', 'pascalprecht.translate']);
musicShowCaseApp.constant("MUSIC", MUSIC);
musicShowCaseApp.constant("TICKS_PER_BEAT", 96);
musicShowCaseApp.constant("SONG_MAX_TRACKS", 32);
musicShowCaseApp.constant("localforage", localforage);
;

var musicShowCaseApp = angular.module("MusicShowCaseApp");
var enTranslations = {
  midi: {
    settings: 'MIDI Settings',
    inputs: 'Inputs',
    connected: 'MIDI Input Connected',
    disconnected: 'MIDI Input Disconnected (Click to setup)',
    events: 'Events',
    octave: 'Base Octave',
    transpose: 'Transpose'
  },
  open_project: {
    p1: 'Select the project you want to open',
    title: 'Open Project'
  },
  array_editor: {
    tooltip: {
      remove_item: 'Removes the object from array',
      add_item: 'Click to add a new object to array',
      edit_item: 'Click to edit this object'
    }
  },
  index: {
    not_implemented: 'Sorry. Not implemented Yet :P',
    filter: 'Type here the word to filter objects',
    tooltip: {
      type: {
        instrument: 'This is a resource object of type instrument',
        pattern: 'This is a resource object of type pattern',
        song: 'This is a resource object of type song',
        fx: 'This is a resource object of type fx'
      },
      type_p1: 'To use the resource, drag them from here into your creation on the right',
      type_p2: 'To instead, *edit* the resource, double click it',
      index: 'This is the object index, you can find here your crafting outputs and inputs'
    }
  },
  project: {
    basic_info: 'Properties',
    references: 'References',
    settings: 'Project Settings',
    'new': 'New Project'
  },
  menu: {
    'new': 'File',
    new_instrument: 'New Instrument',
    new_pattern: 'New Pattern',
    new_song: 'New Song',
    new_project: 'New Project...',
    open_project: 'Open Project...',
    file_import: 'Import...',
    tools: 'Tools',
    tools_preferences: 'Preferences',
    help_view_help: 'View Help',
    help_recipes: 'Recipes',
    help_recipes_intro: 'Basic intro tour',
    help_recipes_howto_create_song: 'How to create a song',
    help_recipes_howto_create_instrument: 'How to create an instrument (square + 2 voices echo)',
    help_contextual_help: 'Contextual Help',
    help_welcome: 'Welcome!',
    help_about: 'About Music.js',
    recycle_bin: 'Recycle Bin...',
    tooltip: {
      'new': 'You can create new blank items from this option',
      preferences: 'You can edit your preferences here',
      help: 'Menu to access help options and about'
    },
    project: 'Project',
    project_settings: 'Settings...',
    project_remove_project: 'Remove Project',
    project_export_project: 'Export Project'
  },
  contextual_help: {
    enable: 'Enable Contextual Help',
    disable: 'Disable Contextual Help'
  },
  recycle: {
    p1: 'This is the recycle bin, from here, you can restore the items that have been removed',
    p2: 'Remember: items in the recycle bin will be permanently deleted if and when available storage space runs out',
    p3: '* Double-click the item you want to RESTORE',
    title: 'Recycle Bin',
    compact_title: 'Recycle Bin',
    compact_hint_restore: '* Double-click the item you want to RESTORE',
    compact_hint_open: '* Click here to open recycle bin window',
    EMPTY: 'EMPTY'
  },
  welcome: {
    title: 'Welcome to Music.js: 8bit Edition',
    p1: 'Music.js is a web application that allows the composition of melodies powered (optionally) by javascript programming',
    p2: 'This first basic edition, is fully oriented towards retro/8bit music by providing elemental oscillators, noise generators and basic modulation patterns',
    p3: 'Do you want a basic tour?',
    nevershow: 'Never show this message again'
  },
  about: {
    title: 'About Music.js: 8bit Edition',
    p3: 'In the long term, the goal of music.js is to cover all the layers needed between HTML5 Web Audio API provided by browsers and fully usable music composition application similar to known ones like FL Studio',
    authors: 'AUTHORS',
    i_am: 'I am Dario Seminara, but also I should give credit to some key library authors:',
    credit: {
      mohayonao: '@mohayonao (Author of Timbre.js)',
      higuma: '@higuma (Author of WebAudioRecorder)',
      kristopolous: '@kristopolous (Author of BOOTSTRA.386 Bootstrap Template)'
    },
    contribute: 'CONTRIBUTE',
    contact_me: 'Contact me at github'
  },
  common: {
    yes: 'Yes',
    no: 'No',
    ok: 'Ok',
    dismiss: 'Dismiss',
    cancel: 'Cancel',
    create: 'Create',
    open: 'Open',
    name: 'Name',
    language: 'Language:',
    loader_error: 'Error when trying to load file',
    cantremove_error: 'Can not delete the file if it is being used',
    cantremove_project_error: 'Can not delete the project if it is being used in another project',
    error_title: 'Error',
    HELP: 'HELP',
    more: 'more',
    remove: 'Remove',
    'export': 'Export',
    reset: 'Reset',
    play: 'Play',
    pause: 'Pause',
    stop: 'Stop',
    record: 'Rec.',
    bpm: 'Bpm',
    bpm_lc: 'bpm',
    add: 'Add',
    tooltip: {
      playing_speed: 'Playing speed, number of beats per minute',
      remove_item: 'Removes item, you can restore it from recycle bin',
      modulation: 'You can setup the effects modulation for {{name}} here. If you leave it empty, there will be no modulation at all'
    },
    new_instrument: 'New Instrument',
    new_pattern: 'New Pattern',
    new_song: 'New Song',
    modulation: '{{name}} Modulation'
  },
  help: {
    FLOW: 'MUSIC.JS FLOW',
    RECIPES: 'RECIPES',
    p1: 'In order to create a song, you need to craft it, and craft the materials.',
    p2: 'Actually, there are three types of craftable resources: instruments, patterns and songs',
    p3: 'While the right section shows the item being crafted. The left pannel shows the crafting materials',
    p4: 'You can drop resources (instruments or patterns) into drop zones, when applicable',
    p5: 'To use the resource on the item being crafted, you need to drag it to any of the dropzones',
    p6: 'Following this principle, you can use instruments to compose patterns, and finally, patterns to compose songs',
    p7: 'Furthermore, you can compose your custom instruments, from a range of effects:',
    p8: 'Don\'t worry, if you don\'t get it at first, there are recipes and contextual help at your disposal',
    recipes: {
      p1: 'Recipes are interactive mini-tutorials on how to craft anything here (example: a song)',
      p2: 'Some tutorials (such as \'intro\') only explain a few things about the main interface',
      p3: 'It\'s recommended to follow these recipes if you don\'t know what to do or how to start using the app. The recipes are reachable from the help menu (?)'
    },
    CONTEXTUAL_HELP: "CONTEXTUAL HELP",
    contextual_help: {
      p1: 'There is a series of tooltips explaining on detail the different features of the app. You can enable or disable these tooltips by clicking on the box in the left-bottom corner of the screen'
    }
  },
  stack: {
    drop_elements_here: "drop new elements here",
    tooltip: {
      you_can_drop_new_effects_here: 'You can drop new effects from the object index here',
      remove: 'Removes the effect element from the pipeline',
      up: 'Changes the order of the element, to execute it AFTER',
      down: 'Changes the order of the element, to execute it BEFORE',
      expand: 'Expand/Shrink the display of advanced options for the element'
    }
  },
  editor: {
    keyboard_instructions: 'Use ZXCVBNM keys to play instrument, or hover mouse on virtual keyboard',
    tooltip: {
      test_instrument_here: 'Test the instrument here, using mouse or keyboard',
      type_here_instrument: 'Type here the name of the instrument'
    }
  },
  pattern: {
    track_muted: 'Muted',
    track_solo: 'Solo',
    measure_beats: 'Measure beats',
    amount_beats: 'Amount of beats per measure',
    measure_count: 'Measure count',
    zoom_level: 'Zoom level',
    total_measures: 'Total count of measures on pattern',
    tracks: 'Tracks',
    drop_instrument: 'drop instrument here',
    tooltip: {
      change_name: 'Change the pattern name',
      zoom_level: 'Zoom level for all tracks',
      play: 'Click to play the pattern',
      stop: 'Click to stop playing',
      remove_track: 'Click to remove track',
      compact_view_p1: 'Track compact view: see the notes without having to expand the track.',
      compact_view_p2: 'Click here to expand the track',
      drop_zone: 'Instrument drop zone, drop instruments from the left panel to use it on the track',
      editor_notes_p1: 'Note area, add the notes here:',
      editor_notes_p2: 'Click to add a new one, and drag to change value/time',
      editor_notes_p3: 'CTRL+Z to undo changes',
      editor_notes_p4: 'CTRL+Y to redo changes',
      add_track: 'Click this button to add new empty tracks',
      note_event_p1: 'Note event. Drag from the right edge to change the duration or press delete key to remove',
      note_event_p2: 'Drag to change the value and/or starting time',
      note_event_p3: 'Note event. Click to select and edit it',
      muted: 'Disable the track in order to silence it',
      solo: 'Isolate the track so that it is the only one that plays. Can be more than one',
      instrument_edit: "Click this button to edit the instrument"
    }
  },
  song: {
    drop_pattern: "Drop pattern here",
    tooltip: {
      measure_beats: "Amount of beats per measure. Make sure this value match the measure length of the patterns",
      play: "Click to play/pause the song",
      stop: "Click to stop playing the song",
      download: "Click to record the song and download the audio file",
      drop_pattern: "Drop zone for patterns, drop here a pattern from the panel on the left",
      remove_block: "Click here to remove the pattern and leave the block empty",
      edit_block: "Click here to edit the pattern used by this block"
    }
  },
  BUTTON_LANG_EN: 'English',
  BUTTON_LANG_ES: 'Spanish'
};
musicShowCaseApp.constant("enTranslations", enTranslations);
;

var musicShowCaseApp = angular.module("MusicShowCaseApp");
var esTranslations = {
  midi: {
    settings: 'Opciones de MIDI',
    inputs: 'Entradas',
    connected: 'Entrada MIDI Conectada',
    disconnected: 'Entrada MIDI Desconectada (Click para configurar)',
    events: 'Eventos',
    octave: 'Octava Base',
    transpose: 'Transposicion'
  },
  open_project: {
    p1: 'Selecciona el proyecto que quieras abrir',
    title: 'Abrir Proyecto'
  },
  array_editor: {
    tooltip: {
      remove_item: 'Elimina el objeto de la coleccion',
      add_item: 'Click para agregar un nuevo objeto a la coleccion',
      edit_item: 'Click para editar este objeto'
    }
  },
  index: {
    not_implemented: 'Disculpa, funcionalidad no implementada',
    filter: 'Tipea aqui las palabras clave para filtrar los objetos',
    tooltip: {
      type: {
        instrument: 'Este es un recurso del tipo instrumento',
        pattern: 'Este es un recurso del tipo patron',
        song: 'Este es un recurso del tipo cancion',
        fx: 'Este es un recurso del tipo fx (efecto)'
      },
      type_p1: 'Para usar este recurso, arrastralo desde aqui hasta tu creacion',
      type_p2: 'Para, en lugar de eso, editarlo, haz doble click en el',
      index: 'Este es el indice de objetos, puedes encontrar tus materiales y productos listados aqui'
    }
  },
  project: {
    basic_info: 'Propiedades del proyecto',
    references: 'Referencias',
    settings: 'Configuracion del Proyecto',
    'new': 'Nuevo Proyecto'
  },
  menu: {
    'new': 'Archivo',
    new_instrument: 'Nuevo Instrumento',
    new_pattern: 'Nuevo Patron',
    new_song: 'Nueva Cancion',
    new_project: 'Nuevo Proyecto...',
    open_project: 'Abrir Proyecto...',
    file_import: 'Importar...',
    tools: 'Herramientas',
    tools_preferences: 'Preferencias',
    help_view_help: 'Ver Pagina de Ayuda',
    help_recipes: 'Recetas',
    help_recipes_intro: 'Recorrido Introductorio',
    help_recipes_howto_create_song: 'Como crear una cancion',
    help_recipes_howto_create_instrument: 'Como crear un instrumento (cuadrada + eco a dos voces)',
    help_contextual_help: 'Ayuda Contextual',
    help_welcome: 'Bienvenido!',
    help_about: 'Acerca de Music.js',
    recycle_bin: 'Papelera de Reciclaje...',
    tooltip: {
      'new': 'Puedes crear nuevos items en blanco desde esta opcion',
      preferences: 'Puedes editar tus preferencias aqui',
      help: 'Menu para acceder a las opciones de ayuda y *Acerca De*'
    },
    project: 'Proyecto',
    project_settings: 'Configuracion...',
    project_remove_project: 'Eliminar Proyecto',
    project_export_project: 'Exportar Proyecto'
  },
  contextual_help: {
    enable: 'Activar Ayuda Contextual',
    disable: 'Desactivar Ayuda Contextual'
  },
  recycle: {
    p1: 'Esta es la papelera de reciclaje, desde aqui puedes restaurar los elementos que han sido eliminados',
    p2: 'Recuerda que los elementos en la papelera se eliminaran permanentemente cuando se agote el espacio disponible',
    p3: '* Haz doble-click en el elemento que quieras RESTAURAR',
    title: 'Papelera de Reciclaje',
    compact_title: 'Papelera de R.',
    compact_hint_restore: '* Haz doble-click en el elemento que quieras RESTAURAR',
    compact_hint_open: '* Haz click aqui para abrir la papelera de reciclaje',
    EMPTY: 'Vacia'
  },
  welcome: {
    title: 'Bienvenido a Music.js: Edicion de 8bit',
    p1: 'Music.js es una aplicacion web que permite componer musica con el poder de javascript (opcional)',
    p2: 'La primera version esta totalmente orientada a la musica retro/8bit mediante osciladores elementales, generadores de ruido y patrones de modulacion',
    p3: 'Quieres realizar un recorrido basico?',
    nevershow: 'Nunca mostrar este mensaje de nuevo'
  },
  about: {
    title: 'Acerca de Music.js: Edicion de 8bit',
    p3: 'A largo plazo, el objetivo de music.js es cubrir todas las capas necesarias entre el API de Web Audio provista pr los navegadores y una solucion completa de composicion musical similar a las mas conocidas como por ej FL Studio',
    authors: 'AUTORES',
    i_am: 'Yo soy Dario Seminara, pero tambien tengo que dar credito a autores de varias librerias que son clave:',
    credit: {
      mohayonao: '@mohayonao (Autor de Timbre.js)',
      higuma: '@higuma (Autor de WebAudioRecorder)',
      kristopolous: '@kristopolous (Autor de la plantilla de bootstrap BOOTSTRA.386)'
    },
    contribute: 'COMO CONTRIBUIR',
    contact_me: 'Contactame a travez de github'
  },
  common: {
    yes: 'Si',
    no: 'No',
    ok: 'Aceptar',
    dismiss: 'Cerrar',
    cancel: 'Cancelar',
    create: 'Crear',
    open: 'Abrir',
    name: 'Nombre',
    loader_error: 'Error al intentar cargar el archivo',
    cantremove_error: 'No se puede eliminar el archivo si esta siendo utilizado',
    cantremove_project_error: 'No se puede eliminar el proyecto si esta siendo usado desde otro proyecto',
    error_title: 'Error',
    language: 'Idioma:',
    HELP: 'AYUDA',
    more: 'mas',
    remove: 'Elimi.',
    'export': 'Exportar',
    reset: 'Fabr.',
    play: 'Reprod.',
    pause: 'Pausar',
    stop: 'Detener',
    record: 'Rec.',
    bpm: 'Ppm',
    bpm_lc: 'ppm',
    add: 'Agreg.',
    tooltip: {
      playing_speed: 'Velocidad de reproduccion, cantidad de pulsos por minuto',
      remove_item: 'Elimina el elemento, puedes restaurarlo desde la papelera de reciclaje',
      modulation: 'Puedes configurar los efectos de modulacion aqui. Si lo dejas vacio, no habra modulacion'
    },
    new_instrument: 'Nuevo Instrumento',
    new_pattern: 'Nuevo Patron',
    new_song: 'Nueva Cancion',
    modulation: 'Modulacion de {{name}}'
  },
  help: {
    FLOW: 'FLUJO DE MUSIC.JS',
    RECIPES: 'RECETAS',
    p1: 'Para crear una cancion, tienes que ensamblarla, asi como sus componentes',
    p2: 'Hay tres tipos de recursos que se pueden crear: instrumentos, patrones y canciones',
    p3: 'Mientras que la seccion de la derecha muestra el elemento que se esta creando, la seccion de la izquierda muestra los materiales que se pueden usar',
    p4: 'Puedes arrastrar y soltar esos materiales en las zonas indicadas',
    p5: 'Para usar algun recurso en algun elemento que estes creando, lo tienes que arrastrar a esas zonas',
    p6: 'Siguiendo este principio, puedes usar instrumentos para componer patrones, y finalmente, los patrones para componer las canciones',
    p7: 'Ademas, puedes crear tus propios instrumentos, combinando varios efectos:',
    p8: 'No te preocupes si no lo entiendes ahora mismo, hay recetas y ayuda contextual que podras usar para familiarizarte con estos conceptos',
    recipes: {
      p1: 'Las recetas, son mini-tutoriales interactivos que explican como crear algo (por ejemplo, una cancion)',
      p2: 'Algunos tutoriales (Como por ejemplo \'Recorrido Introductorio\') solo explican algunas cosas de la interfaz principal',
      p3: 'Te recomiendo que sigas estas recetas si no sabes que hacer o como empezar a usar la aplicacion. Puedes acceder a las recetas desde el menu de ayuda (?)'
    },
    CONTEXTUAL_HELP: "AYUDA CONTEXTUAL",
    contextual_help: {
      p1: 'Hay una serie de tooltips que explican detalladamente las distintas funcionalidades de la aplicacion. Puedes activar o desactivar estas ayudas clickeando en el recuadro que aparece en la esquina inferior izquierda de la pantalla'
    }
  },
  editor: {
    keyboard_instructions: 'Usa las teclas ZXCVBNM para tocar el instrumento, o pasa el puntero del mouse sobre el teclado virtual',
    tooltip: {
      test_instrument_here: 'Prueba el instrumento aqui, usando el teclado o el mouse',
      type_here_instrument: 'Escribe aqui el nombre para el instrumento'
    }
  },
  pattern: {
    track_muted: 'Apagado',
    track_solo: 'Solo',
    measure_beats: 'Pulsos/compas',
    measure_count: 'Cant. de compases',
    zoom_level: 'Nivel de zoom',
    tracks: 'Pistas',
    drop_instrument: 'Suelta el instrumento aqui',
    tooltip: {
      amount_beats: 'Cantidad de pulsos por compas',
      total_measures: 'Cantidad total de compases en el patron',
      change_name: 'Cambia el nombre del patron',
      zoom_level: 'Nivel de zoom para todas las pistas',
      play: 'Click para reproducir el patron',
      stop: 'Click para detener la reproduccion',
      remove_track: 'Click para eliminar la pista',
      compact_view_p1: 'Vista compacta de la pista: muestra las notas sin necesidad de expandir la pista.',
      compact_view_p2: 'Clickea aqui para expandir la pista',
      drop_zone: 'Area para soltar el instrumento, arrastra aqui instrumentos del panel izquierdo para usarlos en la pista',
      editor_notes_p1: 'Area de notas, puedes agregar las notas aqui:',
      editor_notes_p2: 'Clickea para agregar una nueva nota, y arrastralas para cambiar su valor y su tiempo de inicio en la secuencia',
      editor_notes_p3: 'CTRL+Z para deshacer cambios',
      editor_notes_p4: 'CTRL+Y para rehacer cambios',
      add_track: 'Clickea este boton para agregar una nueva pista vacia',
      note_event_p1: 'Evento de nota. Arrastra desde el borde derecho para cambiar su duracion, o presiona la tecla SUPR. para eliminarlo',
      note_event_p2: 'Arrastra para cambiar el valor o el tiempo de comienzo en la secuencia',
      note_event_p3: 'Evento de nota. Clickea para seleccionarlo y editarlo',
      muted: 'Desactiva la pista haciendo que no se reproduzca',
      solo: 'Aisla la pista de manera que sea la unica que se reproduzca. Pueden aislarse varias',
      instrument_edit: 'Clickea este boton para editar el instrumento'
    }
  },
  song: {
    drop_pattern: "Suelta el patron aqui",
    tooltip: {
      measure_beats: "Pulsos/Compas. Tiene que coincidir con el de los patrones que se usan",
      play: "Click para reproducir/pausar la cancion",
      stop: "Click para detener la reproduccion",
      download: "Click para grabar la cancion a un archivo de audio y descargarlo",
      drop_pattern: "Area para soltar los patrones, arrastra aqui patrones desde el panel izquierdo",
      remove_block: "Click aqui para eliminar el patron y dejar el bloque vacio",
      edit_block: "Click aqui para saltar a la edicion del patron utilizado en este bloque"
    }
  },
  stack: {
    drop_elements_here: "suelta nuevos elementos aqui",
    tooltip: {
      you_can_drop_new_effects_here: 'Puedes soltar nuevos efectos del indice aqui',
      remove: 'Elimina el efecto de la secuencia',
      up: 'Cambia el orden del elemento, para que se ejecute DESPUES',
      down: 'Cambia el orden del elemento, para que se ejecute ANTES',
      expand: 'Expande/Comprime la vista avanzada del elemento'
    }
  },
  BUTTON_LANG_EN: 'Ingles',
  BUTTON_LANG_ES: 'Espaol'
};
musicShowCaseApp.constant("esTranslations", esTranslations);
;

var musicShowCaseApp = angular.module("MusicShowCaseApp");
musicShowCaseApp.config(['$translateProvider', function ($translateProvider) {
  var getBrowserLanguage = function getBrowserLanguage() {
    if (!$translateProvider.resolveClientLocale()) return 'en';
    var langCode = $translateProvider.resolveClientLocale().split("-")[0];
    if (!langCode) return 'en';
    return $translateProvider.translations()[langCode] ? langCode : 'en';
  };

  $translateProvider.preferredLanguage(getBrowserLanguage());
  $translateProvider.fallbackLanguage('en');
  $translateProvider.useSanitizeValueStrategy(null);
  $translateProvider.useLoader('translationsLoader');
}]);
;

var musicShowCaseApp = angular.module("MusicShowCaseApp");
musicShowCaseApp.config(["$routeProvider", "$locationProvider", function ($routeProvider, $locationProvider) {
  $routeProvider.when('/editor/:project/instrument/:id', {
    templateUrl: 'site/templates/editor.html',
    controller: 'EditorController'
  }).when('/editor/:project/song/:id', {
    templateUrl: 'site/templates/songEditor.html',
    controller: 'SongEditorController'
  }).when('/editor/:project/pattern/:id', {
    templateUrl: 'site/templates/patternEditor.html',
    controller: 'PatternEditorController'
  }).when('/editor/:project', {
    templateUrl: 'site/templates/dashboard.html',
    controller: 'ProjectDashboardController'
  }).when('/', {
    templateUrl: 'site/templates/dashboard.html',
    controller: 'DashboardController'
  }); // configure html5 to get links working on jsfiddle
  //$locationProvider.html5Mode(true);
}]);
;
;

var musicShowCaseApp = angular.module("MusicShowCaseApp");
musicShowCaseApp.directive("musicObjectEditor", ["$timeout", "$http", "TypeService", "Recipe", "MusicObjectFactory", function ($timeout, $http, TypeService, Recipe, MusicObjectFactory) {
  return {
    scope: {
      file: "=file"
    },
    templateUrl: "site/templates/objectEditor.html",
    link: function link(scope, element, attrs) {
      var file;
      var types = TypeService.getTypes();
      scope.output = {};
      scope.parameters = [];
      scope.recipe = Recipe.start;

      scope.termschanged = function () {
        scope.$broadcast('termschanged');
      };

      scope.f_t = function (str, state) {
        try {
          var ret = eval("(function(t) { return " + str + "; })");
          delete state.error;
          return ret;
        } catch (e) {
          state.error = e.toString();
          throw e;
        }
      };

      scope.oscTermsUpdateFromWaveForm = fn.debounce(function (waveform, terms, resolution) {
        try {
          var waveform = eval("(function(t) { return " + waveform + "; })");
          var count = resolution;
          var values = new Array(count);

          for (var i = 0; i < count; i++) {
            values[i] = waveform(i / count);
            if (isNaN(values[i])) throw "Not a number: " + values[i];
          }

          var ft = new DFT(values.length);
          ft.forward(values);

          for (var i = 0; i < count; i++) {
            terms.cos[i] = ft.real[i];
            terms.sin[i] = ft.imag[i];
          }

          terms.cos.length = ft.real.length / 2;
          terms.sin.length = ft.imag.length / 2;

          var f = function f(t) {
            var ret = 0;

            for (var i = 1; i < count / 2; i++) {
              var a = terms.sin[i];
              var b = terms.cos[i];
              ret = ret + a * Math.sin(t * 2 * Math.PI * i);
              ret = ret + b * Math.cos(t * 2 * Math.PI * i);
            }

            return ret;
          };

          var maxvalue = 0;
          var count = terms.sin.length;

          for (var i = 0; i < count; i++) {
            var value = f(i / count);

            if (value > maxvalue) {
              maxvalue = value;
            } else if (value < -maxvalue) {
              maxvalue = -value;
            }
          }

          for (var i = 0; i < count; i++) {
            terms.sin[i] = terms.sin[i] / maxvalue;
            terms.cos[i] = terms.cos[i] / maxvalue;
          }

          $timeout(function () {
            scope.invalidWaveform = false;
          });
          scope.$broadcast('termschanged');
        } catch (err) {
          $timeout(function () {
            scope.invalidWaveform = err.toString();
          });
        }
      }, 400);
      scope.oscTermsUpdate = fn.debounce(function (serie, terms, errVar) {
        try {
          var serie = eval("(function(n) { return " + serie + "; })");

          for (var n = 1; n < 512; n++) {
            terms[n] = serie(n);
            if (isNaN(terms[n])) throw "Not a number: " + terms[n];
          }

          scope[errVar] = false;
          $timeout(function () {
            scope.$broadcast('termschanged');
          });
        } catch (err) {
          $timeout(function () {
            scope[errVar] = err.toString();
          });
        }
      }, 400);

      scope.range = function (init, end) {
        var x = [];

        for (var i = init; i <= end; i++) {
          x.push(i);
        }

        return x;
      };

      var truthy = function truthy(x) {
        return x;
      };

      var updateObject = function updateObject(newValue) {
        $timeout(function () {
          if (scope.file && scope.file.changed) scope.file.changed();
        });
      };

      var outputObserver;
      scope.$on("$destroy", function () {
        if (outputObserver) outputObserver.destroy();
      });

      var updateTemplate = function updateTemplate(file) {
        if (!file) return;
        if (outputObserver) outputObserver.destroy();
        var outputObserver = MusicObjectFactory().observeOutput(file, function (output) {
          $timeout(function () {
            scope.output = output;
          });
        });
        types.then(function () {
          $timeout(function () {
            scope.selectedType = file.type;
            TypeService.getType(file.type, function (type) {
              $timeout(function () {
                scope.templateUrl = type.templateUrl;
                scope.type = type;

                for (var k in type._default) {
                  if (typeof file.data[k] === "undefined") {
                    file.data[k] = type._default[k];
                  }
                }

                if (type.parameters) {
                  scope.parameters = type.parameters.map(function (parameter) {
                    return {
                      name: parameter.name,
                      data: parameter,
                      value: file.data && typeof file.data[parameter.name] !== "undefined" ? file.data[parameter.name] : parameter.value
                    };
                  });
                }

                if (type.components) {
                  scope.modulations = (type.components || []).map(function (component) {
                    return {
                      name: component,
                      value: file.data && file.data.modulation && file.data.modulation[component] || {
                        type: "stack",
                        data: {
                          array: []
                        }
                      }
                    };
                  });
                }

                updateObject(file.data);
              });
            });
          });
        });
      };

      if (scope.file) updateTemplate(scope.file);
      types.then(function (types) {
        scope.types = types;
      });

      var changeType = function changeType(newValue) {
        if (!newValue) return;
        if (!scope.file) return;
        scope.file.type = newValue;
        updateTemplate(scope.file);
      };

      scope.$watch("modulations", function (newValue) {
        if (!scope.modulations) return;
        scope.modulations.forEach(function (modulation) {
          scope.file.data.modulation = scope.file.data.modulation || {};
          scope.file.data.modulation[modulation.name] = modulation.value;
        });
        scope.$emit("objectChanged");
      }, true);
      scope.$watch("parameters", function (newValue) {
        if (!scope.parameters) return;
        scope.parameters.forEach(function (parameter) {
          scope.file.data[parameter.data.name] = parameter.value;
        });
        scope.$emit("objectChanged");
      }, true);
      scope.$watch("selectedType", changeType);
      scope.$watch("file", updateTemplate); //scope.$watch("file.data", fn.debounce(function(newValue) { debugger; },800), true);
    }
  };
}]);
musicShowCaseApp.directive("arrayEditor", ["$timeout", "Recipe", function ($timeout, Recipe) {
  return {
    scope: {
      data: "=data"
    },
    templateUrl: "site/templates/arrayEditor.html",
    link: function link(scope, element, attrs) {
      scope.data.subobjects = scope.data.subobjects || [];
      scope.maxElements = attrs.maxelements ? parseInt(attrs.maxelements) : Infinity;
      scope.currentTab = 0;
      scope.recipe = Recipe.start;

      var addObject = function addObject(newObject) {
        $timeout(function () {
          scope.data.subobjects = scope.data.subobjects || [];
          scope.data.subobjects.push(newObject);
          scope.setCurrentTab(scope.data.subobjects.length - 1);
        });
      };

      scope.setCurrentTab = function (idx) {
        scope.currentTab = idx;
      };

      scope.removeObject = function (object) {
        scope.data.subobjects = scope.data.subobjects.filter(function (o) {
          return o !== object;
        });
      };

      scope.addObject = function () {
        addObject({
          data: {
            array: []
          },
          type: "stack"
        });
      };

      if (scope.data.subobjects.length === 0) {
        scope.addObject();
      }
    }
  };
}]);
musicShowCaseApp.directive("musicStack", ["$timeout", "Recipe", "TypeService", function ($timeout, Recipe, TypeService) {
  return {
    scope: {
      initFile: "=initFile",
      dropzoneExtraName: "=dropzoneExtraName"
    },
    templateUrl: "site/templates/stack.html",
    link: function link(scope, element, attrs) {
      scope.recipe = Recipe.start;

      var swap = function swap(idx1, idx2) {
        scope.$emit("stackChanged");
        $timeout(function () {
          var tmp = scope.file.array[idx1];
          scope.file.array[idx1] = scope.file.array[idx2];
          scope.file.array[idx2] = tmp;
        });
      };

      var defaultStackAppend = function defaultStackAppend(file, data) {
        file.array = [{
          type: data.name,
          data: {}
        }].concat(file.array);
      };

      scope.onDropComplete = function (data, event) {
        if (data.type === "fx") {
          TypeService.getType(data.name).then(function (type) {
            (type.stackAppend || defaultStackAppend)(scope.file, data);
            scope.$emit("stackChanged");
          });
        }
      };

      scope.up = function (idx) {
        swap(idx - 1, idx);
      };

      scope.down = function (idx) {
        swap(idx + 1, idx);
      };

      scope.remove = function (idx) {
        scope.$emit("stackChanged");
        $timeout(function () {
          var oldCollection = scope.file.array;
          scope.file.array = [];

          for (var i = 0; i < oldCollection.length; i++) {
            if (i !== idx) scope.file.array.push(oldCollection[i]);
          }
        });
      };

      scope.add = function () {
        scope.$emit("stackChanged");
        $timeout(function () {
          scope.file.array.push({
            data: {},
            type: "null"
          });
        });
      };

      scope.$watch("initFile", function (newFile) {
        if (newFile) {
          scope.file = newFile.data;
        }
      });
    }
  };
}]);
musicShowCaseApp.directive("customOscGraph", ["$timeout", function ($timeout) {
  return {
    scope: {
      terms: "=terms"
    },
    template: '<function-graph f="f" samples=64 t0="0" tf="1" scaley="0.8"></function-graph>',
    link: function link(scope, element, attrs) {
      var termsChanged = function termsChanged() {
        scope.f = function (t) {
          var ret = 0;

          for (var i = 1; i < scope.terms.sin.length; i++) {
            var a = scope.terms.sin[i];
            var b = scope.terms.cos[i];
            ret = ret + a * Math.sin(t * 2 * Math.PI * i);
            ret = ret + b * Math.cos(t * 2 * Math.PI * i);
          }

          return ret;
        };
      };

      scope.f = function () {
        return 0;
      };

      scope.$on("termschanged", fn.debounce(termsChanged, 10));
      termsChanged();
    }
  };
}]);
musicShowCaseApp.directive("showScale", ["$timeout", function ($timeout) {
  return {
    scope: {
      scale: "=scale"
    },
    template: '<div class="note-cell" ng-repeat="note in notes">{{note}}</div><div class="note-cell" ng-repeat="note in notes">{{note}}</div>',
    link: function link(scope, element, attrs) {
      var semitoneToNote = function semitoneToNote(n) {
        return [0, [0, 1], 1, [1, 2], 2, 3, [3, 4], 4, [4, 5], 5, [5, 6], 6][n % 12];
      };

      var noteToSemitone = function noteToSemitone(n) {
        return [0, 2, 4, 5, 7, 9, 11][n % 7];
      };

      var notation7 = function notation7(n) {
        return ["C", "D", "E", "F", "G", "A", "B"][n % 7];
      };

      scope.$watch("scale", function (newVal) {
        $timeout(function () {
          var scale = MUSIC.Utils.Scale(newVal);
          var deltas = [0, 1, 2, 3, 4, 5, 6];
          var initTone = semitoneToNote(newVal);
          if (initTone.length) initTone = initTone[1];
          scope.notes = deltas.map(function (d) {
            var semitone = scale.add(newVal, d);
            var tone = (initTone + d) % 7;
            var alt = "";
            if (noteToSemitone(tone) > semitone % 12) alt = "b";
            if (noteToSemitone(tone) < semitone % 12) alt = "#";
            return notation7(tone) + alt;
          });
        });
      });
    }
  };
}]);
musicShowCaseApp.directive("ngScrollTop", ["$parse", "$timeout", function ($parse, $timeout) {
  return {
    restrict: 'A',
    link: function link(scope, element, attrs) {
      var scrollVarGetter = $parse(attrs.ngScrollTop);
      var scrollVarSetter = scrollVarGetter.assign;
      scope.$watch(attrs.ngScrollTop, function () {
        $(element).scrollTop(scrollVarGetter(scope));
      });
      element.on('scroll', function () {
        $timeout(function () {
          scrollVarSetter(scope, $(element).scrollTop());
        });
      });
    }
  };
}]);
musicShowCaseApp.directive("ngScrollLeft", ["$parse", "$timeout", function ($parse, $timeout) {
  return {
    restrict: 'A',
    link: function link(scope, element, attrs) {
      var scrollVarGetter = $parse(attrs.ngScrollLeft);
      var scrollVarSetter = scrollVarGetter.assign;
      scope.$watch(attrs.ngScrollLeft, function () {
        $(element).scrollLeft(scrollVarGetter(scope));
      });
      element.on('scroll', function () {
        $timeout(function () {
          scrollVarSetter(scope, $(element).scrollLeft());
        });
      });
    }
  };
}]);
;

musicShowCaseApp.directive("functionGraph", ["$timeout", "$parse", function ($timeout, $parse) {
  return {
    scope: {},
    replace: true,
    template: '<canvas class="wavegraph"></canvas>',
    link: function link(scope, element, attrs) {
      var f;
      var t0 = parseFloat(attrs.t0);
      var tf = parseFloat(attrs.tf);
      var samples = parseInt(attrs.samples);
      var scaley = parseFloat(attrs.scaley);
      scope.$parent.$watch(attrs.f, function (_f) {
        f = _f;
        if (f) redraw();
      });

      var redraw = function redraw() {
        var canvas = element[0];
        var context = canvas.getContext('2d');
        canvas.width = canvas.clientWidth / 4;
        canvas.height = canvas.clientHeight / 4;

        var drawLine = function drawLine(x0, y0, x1, y1, color) {
          context.save();
          context.beginPath();
          context.moveTo(x0, y0);
          context.lineTo(x1, y1);
          context.strokeStyle = color;
          context.lineWidth = 1;
          context.stroke();
          context.restore();
        };

        var drawFunc = function drawFunc(color) {
          context.save();
          context.save();
          context.translate(0, canvas.height / 2);
          context.scale(canvas.width, canvas.height / 2);
          context.moveTo(0, -f(t0) * scaley);

          for (var i = 1; i <= samples; i++) {
            var x = i / samples;
            var t = (tf - t0) * x + t0;
            context.lineTo(x, -f(t) * scaley);
          }

          context.restore();
          context.lineJoin = 'round';
          context.lineWidth = 1;
          context.strokeStyle = color;
          context.stroke();
          context.restore();
        };

        drawLine(0, canvas.height / 2, canvas.width, canvas.height / 2, 'aqua');
        drawFunc("#FFF");
      };
    }
  };
}]);
;

var musicShowCaseApp = angular.module("MusicShowCaseApp");
musicShowCaseApp.directive("keyboard", ["$timeout", "$uibModal", "Midi", "MusicContext", function ($timeout, $uibModal, Midi, MusicContext) {
  return {
    scope: {
      instrument: '=instrument'
    },
    templateUrl: "site/templates/keyboard.html",
    link: function link(scope, element, attrs) {
      var inputs;

      var onMIDIMessage = function onMIDIMessage(event) {
        var command = event.data[0];
        var value = event.data[1];
        var velocity = event.data[2];
        var octaveNumber = Math.floor(value / 12);
        if (octaveNumber < 0) return;
        var oct = scope.octaves[octaveNumber];
        if (!oct) return;

        if (command === 144) {
          oct.midi[value % 12] = true;
          oct.update();
        } else if (command === 128) {
          oct.midi[value % 12] = false;
          oct.update();
        }
      };

      var listener = Midi.registerEventListener(onMIDIMessage);

      var updateMidiStatus = function updateMidiStatus() {
        Midi.getStatus().then(function (data) {
          $timeout(function () {
            scope.midiConnected = data.connected;
          });
        });
      };

      updateMidiStatus();
      scope.$on("$destroy", function () {
        listener.destroy();
      });
      var keyCodeToNote = {
        90: 'C',
        83: 'C#',
        88: 'D',
        68: 'D#',
        67: 'E',
        86: 'F',
        71: 'F#',
        66: 'G',
        72: 'G#',
        78: 'A',
        74: 'A#',
        77: 'B'
      };

      var stopAll = function stopAll(x) {
        return x.stopAll();
      };

      var update = function update(octave) {
        return octave.update();
      };

      scope.midiSetup = function () {
        var modalIns = $uibModal.open({
          templateUrl: "site/templates/modal/midiSettings.html",
          controller: "midiSettingsModalCtrl"
        }).result.then(updateMidiStatus);
      };

      scope.stopAll = function () {
        scope.octaves.forEach(stopAll);
      };

      var octave = function octave(base) {
        return {
          mouse: {},
          key: {},
          midi: {},
          note: [],
          play: function play(idx) {
            if (this.note[idx]) return;
            this.note[idx] = scope.instrument.note(base + idx).play();
          },
          stop: function stop(idx) {
            if (!this.note[idx]) return;
            this.note[idx].stop();
            this.note[idx] = undefined;
          },
          update: function update() {
            for (var idx = 0; idx < 12; idx++) {
              if (this.mouse[idx] || this.key[idx] || this.midi[idx]) {
                this.play(idx);
              } else {
                this.stop(idx);
              }
            }

            $timeout(function () {});
          },
          stopAll: function stopAll() {
            this.note.forEach(function (note) {
              if (note && note.stop) note.stop();
            });
            this.note = [];
          }
        };
      };

      var gesture = function gesture() {
        MusicContext.resumeAudio();
      };

      var mouseOff = function mouseOff(octave) {
        gesture();
        octave.mouse = {};
        octave.update();
      };

      scope.mouseLeave = function (octave, idx) {
        gesture();
        octave.mouse[idx] = false;
        octave.update();
      };

      scope.mouseEnter = function (octave, idx) {
        gesture();
        scope.octaves.forEach(mouseOff);
        octave.mouse[idx] = true;
        scope.octaves.forEach(update);
      };

      var keyDownHandler = function keyDownHandler(e) {
        gesture();
        if (document.activeElement.tagName.toLowerCase() === "input") return;
        var keyCode = e.keyCode;
        var noteName = keyCodeToNote[keyCode];
        if (!noteName) return;
        var idx = MUSIC.noteToNoteNum(noteName);
        scope.octaves[1].key[idx] = true;
        scope.octaves[1].update();
        scope.$digest();
      };

      var keyUpHandler = function keyUpHandler(e) {
        gesture();
        var keyCode = e.keyCode;
        var noteName = keyCodeToNote[keyCode];
        if (!noteName) return;
        var idx = MUSIC.noteToNoteNum(noteName);
        scope.octaves[1].key[idx] = false;
        scope.octaves[1].update();
        scope.$digest();
      };

      $(document).bind("keydown", keyDownHandler);
      $(document).bind("keyup", keyUpHandler);
      var pianoFirstRow = $(element).find(".piano-firstrow .key");
      var pianoSecondRow = $(element).find(".piano-secondrow .key");
      pianoFirstRow.bind("click", gesture);
      pianoSecondRow.bind("click", gesture);
      scope.$on("$destroy", function () {
        $(document).unbind("keydown", keyDownHandler);
        $(document).unbind("keyup", keyUpHandler);
        pianoFirstRow.unbind("click", gesture);
        pianoSecondRow.unbind("click", gesture);
        scope.octaves.forEach(function (octave) {
          octave.stopAll();
        });
      });
      scope.octaves = [24, 36, 48, 60, 72].map(octave);
      scope.$watch("instrument", function (instrument) {
        scope.instrument = instrument;
      });
    }
  };
}]);
;

musicShowCaseApp.directive("musicEventEditor", ["$timeout", "TICKS_PER_BEAT", "Pattern", "MusicContext", function ($timeout, TICKS_PER_BEAT, Pattern, MusicContext) {
  return {
    scope: {
      /* Current pattern */
      pattern: "=pattern",

      /* Current track */
      track: "=track",

      /* Display params */
      zoomLevel: "=zoomLevel",
      beatWidth: "=beatWidth",

      /* File params (common to all tracks) */
      measure: "=measure",
      measureCount: "=measureCount",
      recipe: '=recipe'
    },
    templateUrl: "site/templates/directives/musicEventEditor.html",
    link: function link(scope, element, attrs) {
      scope.TICKS_PER_BEAT = TICKS_PER_BEAT;
      var defaultL = TICKS_PER_BEAT;

      var clearShadow = function clearShadow() {
        scope.shadowEvt = null;
      };

      var defaultMouseLeave = clearShadow;

      var defaultMouseMove = function defaultMouseMove(event) {
        var clipDistance = TICKS_PER_BEAT / scope.zoomLevel;

        if (!event.target.classList.contains("event-list")) {
          return;
        }

        scope.shadowEvt = scope.shadowEvt || {};
        scope.shadowEvt.n = Math.floor(upperLimit() - event.offsetY / 20);
        scope.shadowEvt.l = defaultL;

        if (scope.shadowEvt.s) {
          var exactPosition = Math.floor(event.offsetX / scope.beatWidth / scope.zoomLevel * TICKS_PER_BEAT);
          exactPosition = Math.floor(exactPosition);
          var clipS = Pattern.findClipS(scope.pattern, scope.track, {
            s: exactPosition,
            l: defaultL
          }, exactPosition);

          if (Math.abs(exactPosition - clipS - clipDistance / 2) < clipDistance) {
            scope.shadowEvt.s = clipS;
            Pattern.cutEvent(scope.pattern, scope.track, scope.shadowEvt);
            return;
          }
        }

        scope.shadowEvt.s = Math.floor(Math.floor(event.offsetX / 2 / scope.beatWidth) * 2 / scope.zoomLevel * TICKS_PER_BEAT);
        if (scope.shadowEvt.s < 0) scope.shadowEvt.s = 0;
        Pattern.cutEvent(scope.pattern, scope.track, scope.shadowEvt);
      };

      var semitoneToNote = function semitoneToNote(n) {
        return [0, [0, 1], 1, [1, 2], 2, 3, [3, 4], 4, [4, 5], 5, [5, 6], 6][n % 12];
      };

      var noteToSemitone = function noteToSemitone(n) {
        return [0, 2, 4, 5, 7, 9, 11][n % 7];
      };

      var notation7 = function notation7(n) {
        return ["C", "D", "E", "F", "G", "A", "B"][n % 7];
      };

      scope.raiseEventChanged = function (oldevt, evt, track) {
        scope.$emit('eventChanged', {
          oldevt: oldevt,
          evt: evt,
          track: track
        });
      };

      scope.noteName = function (n) {
        var note7 = semitoneToNote(n);
        var octave = Math.floor(n / 12);

        if (Array.isArray(note7)) {
          note7 = note7[0];
          return notation7(note7) + '#' + octave;
        } else {
          return notation7(note7) + octave;
        }
      };

      var updateGrid = function updateGrid() {
        scope.mainGridStyle = {
          "background-size": scope.measure * scope.beatWidth * scope.zoomLevel + "px 240px"
        };
      };

      scope.$watch("[measure, beatWidth, zoomLevel]", updateGrid);
      scope.$watch("track.scroll", function () {
        scope.$emit("trackChanged", scope.track);
      });
      $timeout(updateGrid);

      var addNewEvent = function addNewEvent(newEvt) {
        if (scope.track.events.find(function (evt) {
          return newEvt.s === evt.s && newEvt.n === evt.n;
        })) {
          return;
        }

        newEvt = angular.copy(newEvt);
        if (Pattern.collision(scope.track, newEvt)) return;
        scope.$emit("patternSelectEvent", newEvt);
        scope.selected = newEvt;
        scope.recipe.raise('pattern_note_added');
        scope.track.events.push(newEvt);
        scope.$emit("trackChanged", scope.track);
        scope.$emit("eventChanged", {
          oldevt: {},
          evt: newEvt,
          track: scope.track
        });
        scope.mouseMove = moveEvent(newEvt, 0);
        scope.mouseMoveEvent = moveEventFromEvent(newEvt, 0);
        clearShadow();

        scope.mouseLeave = function () {
          defaultMouseLeave();
          cancelMove();
        };

        scope.mouseUpResizeEvent = cancelMove;
        scope.mouseUpEvent = cancelMove;
        scope.mouseUp = cancelMove;
      };

      scope.mouseMoveResizeEvent = function () {
        clearShadow();
      };

      scope.shadowMouseMove = function (event) {
        var deltaS = Math.floor(event.offsetX / 2 / scope.beatWidth) * 2 / scope.zoomLevel * TICKS_PER_BEAT;
        if (deltaS > 0) scope.shadowEvt.s = scope.shadowEvt.s + deltaS;
        Pattern.cutEvent(scope.pattern, scope.track, scope.shadowEvt);
      };

      scope.addFromShadow = function (event) {
        addNewEvent(scope.shadowEvt);
      };

      scope.mouseUp = function (event) {
        scope.mouseMove = defaultMouseMove;
      };

      scope.mouseLeave = function () {
        defaultMouseLeave();
        scope.mouseMove = defaultMouseMove;
      };

      scope.mouseMove = defaultMouseMove;
      scope.mouseMoveEvent = clearShadow;

      var upperLimit = function upperLimit() {
        return scope.track.instrument === 'tempo' ? 1024 : 120;
      };

      var max = function max(c1, c2) {
        return c1 > c2 ? c1 : c2;
      };

      var preventCollision = function preventCollision(evt, f) {
        return function () {
          var savedEvt = angular.copy(evt);
          var ret = f.apply(null, arguments);

          if (Pattern.collision(scope.track, evt)) {
            evt.n = savedEvt.n;
            evt.s = savedEvt.s;
            evt.l = savedEvt.l;
            return;
          }

          if (evt.n !== savedEvt.n || evt.l !== savedEvt.l || evt.s !== savedEvt.s) {
            scope.$emit("trackChanged", scope.track);
            scope.$emit("eventChanged", {
              oldevt: savedEvt,
              evt: evt,
              track: scope.track
            });
          }
        };
      };

      var moveEvent = function moveEvent(evt, offsetX) {
        return function (event) {
          MusicContext.resumeAudio();
          var clipDistance = TICKS_PER_BEAT / scope.zoomLevel;
          var oldevt = {
            n: evt.n,
            s: evt.s,
            l: evt.l
          };
          var exactPosition = Math.floor((event.offsetX - offsetX) / scope.beatWidth / scope.zoomLevel * TICKS_PER_BEAT);
          exactPosition = Math.floor(exactPosition);
          var clipS = Pattern.findClipS(scope.pattern, scope.track, evt, exactPosition);
          if (!event.target.classList.contains("event-list")) return;

          if (Math.abs(exactPosition - clipS - clipDistance / 2) < clipDistance) {
            evt.s = clipS;
          } else {
            evt.s = Math.floor((event.offsetX - offsetX) / 2 / scope.beatWidth) * 2 / scope.zoomLevel * TICKS_PER_BEAT;
            evt.s = Math.floor(evt.s);
          }

          if (evt.s < 0) evt.s = 0;
          var oldN = evt.n;
          evt.n = Math.floor(upperLimit() - event.offsetY / 20);
        };
      };

      var moveEventFromEvent = function moveEventFromEvent(evt, offsetX) {
        clearShadow();
        return function (dragevt, event) {
          MusicContext.resumeAudio();
          var clipDistance = TICKS_PER_BEAT / scope.zoomLevel;
          var oldevt = {
            n: evt.n,
            s: evt.s,
            l: evt.l
          };
          var exactPosition = dragevt.s + Math.floor((event.offsetX - offsetX) / scope.beatWidth / scope.zoomLevel * TICKS_PER_BEAT);
          exactPosition = Math.floor(exactPosition);
          var clipS = Pattern.findClipS(scope.pattern, scope.track, evt, exactPosition);

          if (Math.abs(exactPosition - clipS - clipDistance / 2) < clipDistance) {
            evt.s = clipS;
          } else {
            evt.s = dragevt.s + Math.floor((event.offsetX - offsetX) / 2 / scope.beatWidth) * 2 / scope.zoomLevel * TICKS_PER_BEAT;
            evt.s = Math.floor(evt.s);
          }

          evt.n = dragevt.n;
          if (evt.s < 0) evt.s = 0;
        };
      };

      var cancelMove = function cancelMove() {
        scope.mouseMoveEvent = clearShadow;
        scope.mouseMove = defaultMouseMove;
        scope.mouseLeave = defaultMouseLeave;
      };

      scope.mouseDown = function (event) {
        MusicContext.resumeAudio();
        if (!event.target.classList.contains("event-list")) return;
        var newEvt = {
          n: Math.floor(upperLimit() - event.offsetY / 20),
          s: Math.floor(event.offsetX / scope.beatWidth) / scope.zoomLevel * TICKS_PER_BEAT,
          l: defaultL
        };
        newEvt.s = Math.floor(newEvt.s);
        Pattern.cutEvent(scope.pattern, scope.track, newEvt);
        addNewEvent(newEvt);
      };

      var eventSplit = function eventSplit(evt, ticks) {
        var originalL = evt.l;
        evt.l = ticks;
        var newEvt = {
          n: evt.n,
          s: evt.s + evt.l,
          l: originalL - ticks
        };
        scope.recipe.raise('pattern_note_added');
        scope.track.events.push(newEvt);
      };

      var eventLeftSplit = function eventLeftSplit(evt) {
        if (evt.l % 3 === 0) {
          eventSplit(evt, evt.l / 3);
        } else {
          eventCenterSplit(evt);
        }
      };

      var eventRightSplit = function eventRightSplit(evt) {
        if (evt.l % 3 === 0) {
          eventSplit(evt, evt.l * 2 / 3);
        } else {
          eventCenterSplit(evt);
        }
      };

      var eventCenterSplit = function eventCenterSplit(evt) {
        if (evt.l % 2 === 0) {
          eventSplit(evt, evt.l / 2);
        }
      };

      scope.mouseDblClickEvent = function (evt, event) {
        var elementWidth = $(event.target)[0].clientWidth + 5;

        if (event.offsetX < elementWidth / 3) {
          eventLeftSplit(evt);
        } else if (event.offsetX > elementWidth * 2 / 3) {
          eventRightSplit(evt);
        } else {
          eventCenterSplit(evt);
        }
      };

      scope.mouseDownEvent = function (evt, event) {
        MusicContext.resumeAudio();
        event.preventDefault();
        document.activeElement.blur();
        scope.$emit("eventSelected", {
          evt: evt,
          track: scope.track
        });
        scope.$emit("patternSelectEvent", evt);
        scope.selected = evt;
        scope.mouseMove = preventCollision(evt, moveEvent(evt, event.offsetX));
        scope.mouseMoveEvent = preventCollision(evt, moveEventFromEvent(evt, event.offsetX));
        clearShadow();

        scope.mouseLeave = function () {
          defaultMouseLeave();
          cancelMove();
        };

        var _cancelMove = function _cancelMove() {
          scope.recipe.raise('pattern_note_drag');
          cancelMove();
        };

        scope.mouseUpResizeEvent = _cancelMove;
        scope.mouseUpEvent = _cancelMove;
        scope.mouseUp = _cancelMove;
      };

      scope.mouseDownResizeEvent = function (evt, event) {
        MusicContext.resumeAudio();
        event.preventDefault();
        scope.$emit("patternSelectEvent", evt);
        scope.selected = evt;
        scope.mouseMove = preventCollision(evt, function (event) {
          var oldevt = {
            n: evt.n,
            s: evt.s,
            l: evt.l
          };
          var clipDistance = TICKS_PER_BEAT / scope.zoomLevel;
          var clipL = Pattern.findClipL(scope.pattern, scope.track, evt, evt.s);
          if (!event.target.classList.contains("event-list")) return;
          var exactL = Math.floor(event.offsetX / scope.beatWidth / scope.zoomLevel * TICKS_PER_BEAT) - evt.s;

          if (Math.abs(exactL - clipL - clipDistance) < clipDistance) {
            evt.l = clipL;
          } else {
            var refs = Math.floor(event.offsetX / scope.beatWidth / 2) * 2 / scope.zoomLevel * TICKS_PER_BEAT;
            evt.l = refs - evt.s;
            evt.l = Math.floor(evt.l);
            if (evt.l < TICKS_PER_BEAT / scope.zoomLevel) evt.l = TICKS_PER_BEAT / scope.zoomLevel;
            defaultL = evt.l;
          }
        });
        scope.mouseMoveEvent = preventCollision(evt, function (dragevt, event) {
          var oldevt = {
            n: evt.n,
            s: evt.s,
            l: evt.l
          };
          var clipDistance = TICKS_PER_BEAT / scope.zoomLevel;
          var clipL = Pattern.findClipL(scope.pattern, scope.track, evt, evt.s);
          var exactL = dragevt.s + Math.floor(event.offsetX / scope.beatWidth / scope.zoomLevel * TICKS_PER_BEAT) - evt.s;

          if (Math.abs(exactL - clipL - clipDistance) < clipDistance) {
            evt.l = clipL;
          } else {
            var refs = dragevt.s + Math.floor(event.offsetX / scope.beatWidth / 2) * 2 / scope.zoomLevel * TICKS_PER_BEAT;
            evt.l = refs - evt.s;
            evt.l = Math.floor(evt.l);
            if (evt.l < TICKS_PER_BEAT / scope.zoomLevel) evt.l = TICKS_PER_BEAT / scope.zoomLevel;
            defaultL = evt.l;
          }
        });
        scope.mouseUpResizeEvent = cancelMove;
        scope.mouseUpEvent = cancelMove;
        scope.mouseUp = cancelMove;
      };

      var keyDownHandler = function keyDownHandler(e) {
        if (document.activeElement.tagName.toLowerCase() === "input") return;

        if (e.keyCode == 46) {
          $timeout(function () {
            scope.track.events = scope.track.events.filter(function (evt) {
              return evt !== scope.selected;
            });
            scope.$emit("trackChanged", scope.track);
          });
        }
      };

      $(document).bind("keydown", keyDownHandler);
      scope.$on("$destroy", function () {
        $(document).unbind("keydown", keyDownHandler);
      });
      scope.$on("trackSelectEvent", function (evt, event) {
        scope.selected = event;
      });
    }
  };
}]);
;

var musicShowCaseApp = angular.module("MusicShowCaseApp");
musicShowCaseApp.directive("ngfDrop", ["$parse", function ($parse) {
  return {
    restrict: 'A',
    link: function link(scope, element, attrs) {
      var ngfDropGetter = $parse(attrs.ngfDrop);

      var allowDrag = function allowDrag(e) {
        e.dataTransfer.dropEffect = 'copy';
        e.preventDefault();
      };

      var onDrop = function onDrop(e) {
        ngfDropGetter(scope, {
          '$files': e.dataTransfer.files
        });
        e.preventDefault();
      };

      window.addEventListener('dragenter', allowDrag);
      window.addEventListener('dragover', allowDrag);
      window.addEventListener('drop', onDrop);
      scope.$on("$destroy", function () {
        window.removeEventListener('dragenter', allowDrag);
        window.removeEventListener('dragover', allowDrag);
        window.removeEventListener('drop', onDrop);
      });
    }
  };
}]);
;

var musicShowCaseApp = angular.module("MusicShowCaseApp");
musicShowCaseApp.directive("ngfLoader", ["$parse", function ($parse) {
  return {
    restrict: 'A',
    link: function link(scope, element, attrs) {
      var ngfLoaderGetter = $parse(attrs.ngfLoader);

      var onChange = function onChange(e) {
        ngfLoaderGetter(scope, {
          '$files': e.target.files
        });
        $(element).val("");
      };

      $(element).on('change', onChange);
      scope.$on('$destroy', function () {
        $(element).off('change', onChange);
      });
    }
  };
}]);
;

musicShowCaseApp.directive("patternTrackCompactView", ["$timeout", "TICKS_PER_BEAT", "Recipe", "Pattern", "MusicContext", function ($timeout, TICKS_PER_BEAT, Recipe, Pattern, MusicContext) {
  return {
    scope: {
      /* Current pattern */
      pattern: "=pattern",

      /* Current track */
      track: "=track",

      /* Display params */
      zoomLevel: "=zoomLevel",
      beatWidth: "=beatWidth",

      /* File params (common to all tracks) */
      measure: "=measure",
      measureCount: "=measureCount"
    },
    templateUrl: "site/templates/directives/patternTrackCompactView.html",
    link: function link(scope, element) {
      scope.recipe = Recipe.start;
      scope.TICKS_PER_BEAT = TICKS_PER_BEAT;

      var semitoneToNote = function semitoneToNote(n) {
        return [0, [0, 1], 1, [1, 2], 2, 3, [3, 4], 4, [4, 5], 5, [5, 6], 6][n % 12];
      };

      var notation7 = function notation7(n) {
        return ["C", "D", "E", "F", "G", "A", "B"][n % 7];
      };

      scope.noteName = function (n) {
        var note7 = semitoneToNote(n);
        var octave = Math.floor(n / 12);

        if (Array.isArray(note7)) {
          note7 = note7[0];
          return notation7(note7) + '#' + octave;
        } else {
          return notation7(note7) + octave;
        }
      };

      var updateGrid = function updateGrid() {
        scope.mainGridStyle = {
          "background-size": scope.measure * scope.beatWidth * scope.zoomLevel + "px 240px",
          "background-position": -scope.pattern.scrollLeft + "px"
        };
      };

      scope.$watch("[measure, beatWidth, zoomLevel, pattern.scrollLeft]", updateGrid);
      scope.$on("trackSelectEvent", function (evt, event) {
        scope.selected = event;
      });

      var mouseUp = function mouseUp(event) {
        scope.$emit("enableTrack", scope.track);

        scope.mouseMove = function () {};
      };

      scope.mouseUp = mouseUp;

      scope.mouseLeave = function () {
        scope.mouseMove = function () {};
      };

      var cancelMove = function cancelMove() {
        scope.mouseMoveEvent = function () {};

        scope.mouseMove = function () {};

        scope.mouseLeave = function () {};
      };

      scope.mouseDownEvent = function (evt, event) {
        var moved = false;

        var moveEvent = function moveEvent(evt, offsetX) {
          return function (event) {
            MusicContext.resumeAudio();
            var clipDistance = TICKS_PER_BEAT / scope.zoomLevel;
            var oldevt = {
              n: evt.n,
              s: evt.s,
              l: evt.l
            };
            if (!event.target.parentElement.classList.contains("track-compact-view")) return;
            var exactPosition = Math.floor((event.offsetX - offsetX) / scope.beatWidth / scope.zoomLevel * TICKS_PER_BEAT);
            exactPosition = Math.floor(exactPosition);
            var clipS = Pattern.findClipS(scope.pattern, scope.track, evt, exactPosition);

            if (Math.abs(exactPosition - clipS - clipDistance / 2) < clipDistance) {
              evt.s = clipS;
            } else {
              evt.s = Math.floor((event.offsetX - offsetX) / 2 / scope.beatWidth) * 2 / scope.zoomLevel * TICKS_PER_BEAT;
              evt.s = Math.floor(evt.s);
            }

            if (evt.s < 0) evt.s = 0;
            if (evt.s !== oldevt.s) moved = true;
            scope.$emit("trackChanged", scope.track);
            scope.$emit("eventChanged", {
              oldevt: oldevt,
              evt: evt,
              track: scope.track
            });
          };
        };

        var moveEventFromEvent = function moveEventFromEvent(evt, offsetX) {
          return function (dragevt, event) {
            MusicContext.resumeAudio();
            var clipDistance = TICKS_PER_BEAT / scope.zoomLevel;
            var oldevt = {
              n: evt.n,
              s: evt.s,
              l: evt.l
            };
            var exactPosition = dragevt.s + Math.floor((event.offsetX - offsetX) / scope.beatWidth / scope.zoomLevel * TICKS_PER_BEAT);
            exactPosition = Math.floor(exactPosition);
            var clipS = Pattern.findClipS(scope.pattern, scope.track, evt, exactPosition);

            if (Math.abs(exactPosition - clipS - clipDistance / 2) < clipDistance) {
              evt.s = clipS;
            } else {
              evt.s = dragevt.s + Math.floor((event.offsetX - offsetX) / 2 / scope.beatWidth) * 2 / scope.zoomLevel * TICKS_PER_BEAT;
              evt.s = Math.floor(evt.s);
            }

            if (evt.s < 0) evt.s = 0;
            if (evt.s !== oldevt.s) moved = true;
            scope.$emit("trackChanged", scope.track);
            scope.$emit("eventChanged", {
              oldevt: oldevt,
              evt: evt,
              track: scope.track
            });
          };
        };

        event.preventDefault();
        document.activeElement.blur();
        scope.$emit("eventSelected", {
          evt: evt,
          track: scope.track
        });
        scope.mouseMove = moveEvent(evt, event.offsetX);
        scope.mouseMoveEvent = moveEventFromEvent(evt, event.offsetX);

        scope.mouseLeave = function () {
          cancelMove();
        };

        var _cancelMove = function _cancelMove() {
          scope.recipe.raise('pattern_note_drag');
          cancelMove();
        };

        scope.mouseUpResizeEvent = _cancelMove;
        scope.mouseUpEvent = _cancelMove;

        scope.mouseUp = function () {
          scope.mouseUp = mouseUp;
          if (!moved) scope.$emit("enableTrack", scope.track);
          scope.$emit("patternSelectEvent", evt);

          _cancelMove();
        };
      };

      scope.mouseDownResizeEvent = function (evt, event) {
        var moved = false;
        event.preventDefault();

        scope.mouseMove = function (event) {
          MusicContext.resumeAudio();
          var oldevt = {
            n: evt.n,
            s: evt.s,
            l: evt.l
          };
          var clipDistance = TICKS_PER_BEAT / scope.zoomLevel;
          var clipL = Pattern.findClipL(scope.pattern, scope.track, evt, evt.s);
          if (!event.target.parentElement.classList.contains("track-compact-view")) return;
          var exactL = Math.floor(event.offsetX / scope.beatWidth / scope.zoomLevel * TICKS_PER_BEAT) - evt.s;

          if (Math.abs(exactL - clipL - clipDistance) < clipDistance) {
            evt.l = clipL;
          } else {
            var refs = Math.floor(event.offsetX / scope.beatWidth / 2) * 2 / scope.zoomLevel * TICKS_PER_BEAT;
            evt.l = refs - evt.s;
            evt.l = Math.floor(evt.l);
            if (evt.l < TICKS_PER_BEAT / scope.zoomLevel) evt.l = TICKS_PER_BEAT / scope.zoomLevel;
            defaultL = evt.l;
          }

          if (evt.l !== oldevt.l) {
            moved = true;
          }

          scope.$emit("trackChanged", scope.track);
          scope.$emit("eventChanged", {
            oldevt: oldevt,
            evt: evt,
            track: scope.track
          });
        };

        scope.mouseMoveEvent = function (dragevt, event) {
          MusicContext.resumeAudio();
          var oldevt = {
            n: evt.n,
            s: evt.s,
            l: evt.l
          };
          var clipDistance = TICKS_PER_BEAT / scope.zoomLevel;
          var clipL = Pattern.findClipL(scope.pattern, scope.track, evt, evt.s);
          var exactL = dragevt.s + Math.floor(event.offsetX / scope.beatWidth / scope.zoomLevel * TICKS_PER_BEAT) - evt.s;

          if (Math.abs(exactL - clipL - clipDistance) < clipDistance) {
            evt.l = clipL;
          } else {
            var refs = dragevt.s + Math.floor(event.offsetX / scope.beatWidth / 2) * 2 / scope.zoomLevel * TICKS_PER_BEAT;
            evt.l = refs - evt.s;
            evt.l = Math.floor(evt.l);
            if (evt.l < TICKS_PER_BEAT / scope.zoomLevel) evt.l = TICKS_PER_BEAT / scope.zoomLevel;
            defaultL = evt.l;
          }

          if (evt.l !== oldevt.l) {
            moved = true;
          }

          scope.$emit("trackChanged", scope.track);
          scope.$emit("eventChanged", {
            oldevt: oldevt,
            evt: evt,
            track: scope.track
          });
        };

        scope.mouseUpResizeEvent = cancelMove;
        scope.mouseUpEvent = cancelMove;

        scope.mouseUp = function () {
          scope.mouseUp = mouseUp;
          if (!moved) scope.$emit("enableTrack", scope.track);
          scope.$emit("patternSelectEvent", evt);
          cancelMove();
        };
      };
    }
  };
}]);
;

musicShowCaseApp.directive("playingLine", ["$timeout", "$parse", "TICKS_PER_BEAT", function ($timeout, $parse, TICKS_PER_BEAT) {
  return {
    scope: {},
    replace: true,
    templateUrl: "site/templates/directives/playingLine.html",
    link: function link(scope, element, attrs) {
      var t0;
      var timeToTicks;
      var playing = false;
      var getBpm = $parse(attrs.bpm);
      var getZoomLevel = $parse(attrs.zoomLevel);
      var getBeatWidth = $parse(attrs.beatWidth);
      var bpm, zoomLevel, beatWidth;

      var ticksToPX = function ticksToPX(ticks) {
        zoomLevel = getZoomLevel(scope.$parent);
        beatWidth = getBeatWidth(scope.$parent);
        return ticks * zoomLevel * beatWidth / TICKS_PER_BEAT;
      };

      var callback = function callback() {
        if (bpm && playing) {
          var ticks = timeToTicks(window.performance.now() - t0);
          var displacement = ticksToPX(ticks);
          element.css("left", displacement + "px");
        }

        requestAnimationFrame(callback);
      };

      var playingLine = $(element);
      var requestId = requestAnimationFrame(callback);
      scope.$on('startClock', function (evt, _timeToTicks) {
        var _t0 = window.performance.now();

        playing = true;
        bpm = getBpm(scope.$parent);
        timeToTicks = _timeToTicks;
        t0 = _t0;
      });
      scope.$on('stopClock', function (evt) {
        playing = false;
      });
      scope.$on('pauseClock', function (evt) {
        var ticks = timeToTicks(window.performance.now() - t0);
        var displacement = ticksToPX(ticks || 0);
        playing = false;
        scope.$emit('pausedClock', ticks);
        element.css("left", displacement + "px");
      });
      scope.$on('resetClock', function (evt, baseTicks) {
        var displacement = ticksToPX(baseTicks || 0);
        playing = false;
        element.css("left", displacement + "px");
      });
      scope.$on('$destroy', function () {
        cancelAnimationFrame(requestId);
      });
    }
  };
}]);
;

var musicShowCaseApp = angular.module("MusicShowCaseApp");
musicShowCaseApp.directive("recipeBlink", ["$parse", "$timeout", "Recipe", function ($parse, $timeout, Recipe) {
  return {
    restrict: 'A',
    link: function link(scope, element, attrs) {
      var recipeBlinkGetter = $parse(attrs.recipeBlink);
      var blinkElementId = recipeBlinkGetter(scope);

      if (!Array.isArray(blinkElementId)) {
        blinkElementId = [blinkElementId];
      }

      var blink = function blink() {
        $timeout(function () {
          $(element).addClass('blink');
        });
      };

      var noblink = function noblink() {
        $timeout(function () {
          $(element).removeClass('blink');
        });
      };

      var registerEvent = function registerEvent(blinkElementId) {
        if (Recipe.getBlinks().indexOf(blinkElementId) !== -1) {
          blink();
        }

        scope.$on("_blink_enable_" + blinkElementId, function (event, args) {
          blink();
        });
        scope.$on("_blink_disable_" + blinkElementId, function () {
          noblink();
        });
        scope.$on("__blink_disable_all", function () {
          noblink();
        });
      };

      blinkElementId.forEach(registerEvent);
    }
  };
}]);
;

var musicShowCaseApp = angular.module("MusicShowCaseApp");
musicShowCaseApp.directive("recipeTooltip", ["$parse", "$timeout", function ($parse, $timeout) {
  return {
    restrict: 'E',
    scope: {},
    template: '<div ng-click="onClick($event)" ng-class="{\'show-recipe-tooltip\': tooltipEnabled, \'cap-right\': capRight}" class="help-tooltip recipe-tooltip"><p>{{text|translate}}</p></div>',
    link: function link(scope, element, attrs) {
      var rtIdGetter = $parse(attrs.rtId);
      var tooltipElementId = rtIdGetter(scope.$parent);
      scope.tooltipEnabled = false;

      scope.onClick = function (e) {
        scope.$parent.recipe.raise("tooltip_click");
        e.stopImmediatePropagation();
      };

      scope.$on("_tooltip_display_" + tooltipElementId, function (event, args) {
        $timeout(function () {
          var windowWidth = Math.max(document.documentElement.clientWidth, window.innerWidth || 0);
          var el = element[0];
          var offset = windowWidth - el.getBoundingClientRect().left;
          scope.capRight = offset < 300;
          scope.text = args.text;
          scope.tooltipEnabled = true;
        });
      });
      scope.$on("_tooltip_hide_" + tooltipElementId, function () {
        scope.tooltipEnabled = false;
      });
      scope.$on("__tooltip_hide_all", function () {
        scope.tooltipEnabled = false;
      });
    }
  };
}]);
;

var musicShowCaseApp = angular.module("MusicShowCaseApp");
musicShowCaseApp.directive("recipeWizard", ["$timeout", function ($timeout) {
  return {
    restrict: 'E',
    template: '<div class="recipe-wizard"><p>{{text}}</p></div>',
    link: function link(scope, element, attrs) {}
  };
}]);
;

var musicShowCaseApp = angular.module("MusicShowCaseApp");
musicShowCaseApp.directive("recycleBinCompactView", ["$timeout", "$uibModal", "FileRepository", "ErrMessage", function ($timeout, $uibModal, FileRepository, ErrMessage) {
  return {
    templateUrl: 'site/templates/directives/recycleBinCompactView.html',
    scope: {},
    link: function link(scope, element, attrs) {
      var observer = FileRepository.observeRecycled(function () {
        FileRepository.searchRecycled(null, {
          limit: 10
        }).then(function (result) {
          $timeout(function () {
            scope.files = result.results.slice(0, 4);
          });
        });
      });
      scope.$on("destroy", observer.destroy);

      scope.openRecycleBin = function () {
        // show recycle bin modal
        var modalIns = $uibModal.open({
          templateUrl: "site/templates/modal/recycleBin.html",
          controller: "recycleBinModalCtrl"
        });
      };

      scope.restore = function (file) {
        FileRepository.restoreFromRecycleBin(file.id).then(function () {
          if (file.type === 'project') {
            document.location = "#/editor/" + file.id;
          } else {
            document.location = "#/editor/" + file.project + "/" + file.type + "/" + file.id;
          }
        });
      };

      scope.onDropComplete = function (file) {
        FileRepository.moveToRecycleBin(file.id).catch(function (err) {
          if (err.type && err.type === 'cantremove') {
            ErrMessage('common.error_title', 'common.cantremove_error');
          } else {
            throw err;
          }
        });
      };
    }
  };
}]);
;

var musicShowCaseApp = angular.module("MusicShowCaseApp");
musicShowCaseApp.filter("icon_from_type", function () {
  return function (type) {
    if (type === "instrument") return "keyboard";
    if (type === "tempo") return "clock";
    if (type === "song") return "th";
    if (type === "pattern") return "music";
    if (type === "fx") return "magic";
    if (type === "project") return "folder";
    return "question";
  };
});
musicShowCaseApp.directive("typeIcon", ["$parse", function ($parse) {
  return {
    restrict: 'A',
    scope: {},
    replace: true,
    template: '<span class="fa fa-{{typeIcon | icon_from_type}}">',
    link: function link(scope, element, attrs) {
      var iconTypeName = $parse(attrs.typeIcon);
      scope.$parent.$watch(iconTypeName, function (newValue) {
        scope.typeIcon = iconTypeName(scope.$parent);
      });
    }
  };
}]);
;

var musicShowCaseApp = angular.module("MusicShowCaseApp");
musicShowCaseApp.factory("MusicObjectFactory", ["MusicContext", "$q", "TypeService", "pruneWrapper", function (MusicContext, $q, TypeService, pruneWrapper) {
  var fileOutputMap = new WeakMap();
  return function (options) {
    var nextId = 0;
    var _last_type = {};
    var ___cache = {};
    var monitor = options && options.monitor;

    var getConstructor = function getConstructor(descriptor, channel) {
      return TypeService.getType(descriptor.type).then(function (type) {
        if (type.monitor && !monitor) {
          return function (subobjects) {
            var wrapped = subobjects[0];
            return function (music) {
              return wrapped(music);
            };
          };
        }

        var ret = function ret(subobjects) {
          var buildComponents = [];

          if (type.components) {
            type.components.forEach(function (componentName) {
              if (!descriptor.data.modulation) return;
              var value = descriptor.data.modulation[componentName];
              if (!value) return;
              if (!value.data) return;
              if (!value.data.array) return;
              if (value.data.array.length === 0) return;
              buildComponents.push(createParametric(value).then(function (obj) {
                return {
                  name: componentName,
                  obj: obj
                };
              }));
            });
          }

          return $q.all(buildComponents).then(function (objs) {
            var components = {};
            objs.forEach(function (obj) {
              components[obj.name] = obj.obj;
            });
            _last_type[channel] = _last_type[channel] || new WeakMap();
            ___cache[channel] = ___cache[channel] || new WeakMap();
            var last_type = _last_type[channel];
            var __cache = ___cache[channel];
            /*>                  if (!last_type.has(descriptor)||last_type.get(descriptor) === descriptor.type) {
                                if (subobjects.length === 1) {
                                  if (__cache.has(descriptor) && __cache.get(descriptor)[subobjects[0].id]) {
                                    return $q(function(resolve) {
                                      resolve(__cache.get(descriptor)[subobjects[0].id]
                                            .update(descriptor.data, components));
                                    });
                                  }
                                } else if (subobjects.length === 0) {
                                  if (__cache.has(descriptor) && __cache.get(descriptor).noid) {
                                    return $q(function(resolve) {
                                      resolve(__cache.get(descriptor).noid
                                            .update(descriptor.data, components));
                                    });
                                  }
                                }
                              }*/

            last_type.set(descriptor, descriptor.type);
            var ret = type.constructor(descriptor.data, subobjects, components);
            nextId++;
            ret.id = nextId;

            if (subobjects.length === 1) {
              if (!__cache.has(descriptor)) __cache.set(descriptor, {});
              __cache.get(descriptor)[subobjects[0].id] = ret;
            } else if (subobjects.length === 0) {
              if (!__cache.has(descriptor)) __cache.set(descriptor, {});
              __cache.get(descriptor).noid = ret;
            }

            return ret;
          });
        };

        ret.subobjects = type.subobjects;
        return ret;
      });
    };

    var createParametricFromStack = function createParametricFromStack(array, idx, channel) {
      if (array.length === 0) return $q.when(null);
      var descriptor = array[idx];
      channel = channel || 0;
      return getConstructor(descriptor, channel).then(function (constructor) {
        if (constructor.subobjects) {
          var getObject = function getObject(d, index) {
            var newArray = d.data.array.concat(array.slice(idx + 1));
            return createParametricFromStack(newArray, 0, channel * 16 + index);
          };

          return $q.all(descriptor.data.subobjects.map(getObject)).then(function (objs) {
            return constructor(objs);
          });
        }

        if (array.length === 1) {
          return constructor([]);
        }

        return createParametricFromStack(array.slice(idx + 1), 0, channel).then(function (obj) {
          return constructor([obj]);
        });
      }).then(function (obj) {
        if (obj && obj.dataLink) {
          obj.dataLink(notifyChangeFor(descriptor));
        }

        return obj;
      });
    };

    var notifyChangeFor = function notifyChangeFor(descriptor) {
      return function (output) {
        if (fileOutputMap.has(descriptor)) {
          var ee = fileOutputMap.get(descriptor);
          ee.emit('changed', output);
        }
      };
    };

    var createParametric = function createParametric(descriptor) {
      if (descriptor.type === "stack") {
        return createParametricFromStack(descriptor.data.array, 0);
      } else {
        return getConstructor(descriptor, 0).then(function (constructor) {
          return constructor([]);
        });
      }
    };

    var destroyAll = function destroyAll(obj) {
      for (var channel in _last_type) {
        _last_type[channel] = new WeakMap();
      }

      for (var channel in ___cache) {
        ___cache[channel] = new WeakMap();
      }

      bases.forEach(function (base) {
        base.prune();
      });
      bases = [];
      return $q.when(null);
    };

    var bases = [];

    var create = function create(descriptor, music) {
      return createParametric(descriptor).then(function (fcn) {
        if (!fcn) return;

        if (music) {
          var base = music.sfxBase();
          bases.push(base);
          return fcn(base);
        }

        return MusicContext.runFcn(function (music) {
          var base = music.sfxBase();
          bases.push(base);
          return fcn(base);
        });
      });
    };

    var observeOutput = function observeOutput(file, listener) {
      var ee;

      if (fileOutputMap.has(file)) {
        ee = fileOutputMap.get(file);
      } else {
        ee = new EventEmitter();
        fileOutputMap.set(file, ee);
      }

      ee.on('changed', listener);
      return {
        destroy: function destroy() {
          ee.removeListener('changed', listener);
        }
      };
    };

    return {
      create: create,
      destroyAll: destroyAll,
      observeOutput: observeOutput
    };
  };
}]);
musicShowCaseApp.service("MusicContext", function () {
  var music;
  var context;

  var Recordable = function Recordable(music, playable, name) {
    this._playable = playable;
    this._music = music;
    this._name = name;
  };

  Recordable.prototype.record = function () {
    var playable = this._playable;
    var recording = music.record();
    var recordFileName = this._name;
    var playing = playable.play();
    MUSIC.Utils.FunctionSeq.preciseTimeout(function () {
      recording.stop();
      recording.exportWAV(function (blob) {
        var a = document.createElement("a");
        document.body.appendChild(a);
        a.style = "display: none";
        var url = window.URL.createObjectURL(blob);
        a.href = url;
        a.download = recordFileName + ".wav";
        a.click();
        window.URL.revokeObjectURL(url);
      });
    }, playable.duration());
  };

  return {
    resumeAudio: function resumeAudio() {
      if (!music) {
        context = new MUSIC.Context();
        music = context.sfxBase();
      }

      context.resume();
    },
    runFcn: function runFcn(f) {
      if (!music) {
        context = new MUSIC.Context();
        music = context.sfxBase();
      }

      return f(music);
    },
    record: function record(options, callback) {
      return this.runFcn(function () {
        return context.record(options, callback);
      });
    },
    run: function run(code) {
      if (music) {
        music.prune();
      }

      music = new MUSIC.Context().sfxBase();

      try {
        return {
          object: eval("(function() {\n" + code + "\n})")()
        };
      } catch (e) {
        return {
          error: e.toString()
        };
      }
    }
  };
});
musicShowCaseApp.service("Historial", [function () {
  return function () {
    var array = [];
    var currentVersion = 0;

    var undo = function undo() {
      if (currentVersion > 0) currentVersion--;
      return array[currentVersion];
    };

    var redo = function redo() {
      if (currentVersion < array.length - 1) currentVersion++;
      return array[currentVersion];
    };

    var registerVersion = function registerVersion(data) {
      array = array.slice(0, currentVersion + 1);
      array.push(data);
      if (array.length > 128) array = array.slice(1);
      currentVersion = array.length - 1;
    };

    return {
      registerVersion: registerVersion,
      undo: undo,
      redo: redo
    };
  };
}]);
musicShowCaseApp.service("Pattern", ["MUSIC", 'TICKS_PER_BEAT', function (MUSIC, TICKS_PER_BEAT) {
  var schedule = function schedule(noteseq, file, track, eventPreprocessor, onStop, ctx) {
    var events = track.events.sort(function (e1, e2) {
      return e1.s - e2.s;
    });
    var scaledEvents = events.map(function (evt) {
      return [evt.n, evt.s, evt.l, {
        tc: evt.tc
      }];
    });

    for (var i = 0; i < scaledEvents.length; i++) {
      var evt = scaledEvents[i];
      noteseq.push(eventPreprocessor(evt, scaledEvents), ctx);
    }

    noteseq.paddingTo(TICKS_PER_BEAT * file.measureCount * file.measure);
    noteseq.pushCallback([TICKS_PER_BEAT * file.measureCount * file.measure, onStop]);
    var totalBeats = file.measure * file.measureCount;
  };

  var noteseq = function noteseq(file, track, eventPreprocessor, onStop) {
    var noteseq = new MUSIC.NoteSequence();
    schedule(noteseq, file, track, eventPreprocessor, onStop);
    return noteseq;
  };

  var patternCompose = function patternCompose(file, instruments, base, onStop, options) {
    var start = options && options.start || 0;

    var isTempoTrack = function isTempoTrack(track, idx) {
      idx = base + idx;
      var instrument = instruments[track.instrument + '_' + idx];
      return instrument && instrument.tempo;
    };

    var getEvents = function getEvents(track) {
      return track.events;
    };

    var concat = function concat(a, b) {
      return a.concat(b);
    };

    var byStart = function byStart(a, b) {
      return a.s - b.s;
    };

    var songCtx = {};
    var noteseq = new MUSIC.NoteSequence(null, {
      time: MUSIC.Math.ticksToTime({
        bpm: file.bpm,
        ticks_per_beat: TICKS_PER_BEAT,
        bpm_events: file.tracks.filter(isTempoTrack).map(getEvents).reduce(concat, []).sort(byStart),
        start: start
      }),
      songCtx: songCtx
    });
    file.tracks.forEach(function (track, idx) {
      idx = base + idx;
      var instrument = instruments[track.instrument + '_' + idx];

      if (instrument && !instrument.tempo) {
        var eventPreprocessor = instrument.eventPreprocessor || function (x) {
          return x;
        };

        var context = MUSIC.NoteSequence.context(instrument, null, songCtx);
        schedule(noteseq, file, track, eventPreprocessor, onStop, context);
      }
    });
    var ret = noteseq.makePlayable(null);

    ret.schedule = function (noteSequence, songCtx) {
      var contexts = [];
      songCtx = songCtx || {};
      file.tracks.forEach(function (track, idx) {
        idx = base + idx;
        var instrument = instruments[track.instrument + '_' + idx];

        if (instrument) {
          var eventPreprocessor = instrument.eventPreprocessor || function (x) {
            return x;
          };

          var context = MUSIC.NoteSequence.context(instrument, null, songCtx);
          contexts.push(context);
          schedule(noteSequence, file, track, eventPreprocessor, onStop, context);
        }
      });
      return contexts;
    };

    ret.timeToTicks = function () {
      return MUSIC.Math.timeToTicks({
        bpm: file.bpm,
        ticks_per_beat: TICKS_PER_BEAT,
        bpm_events: file.tracks.filter(isTempoTrack).map(getEvents).reduce(concat, []).sort(byStart),
        start: start
      });
    };

    ret.bpm_events = file.tracks.filter(isTempoTrack).map(getEvents).reduce(concat, []).sort(byStart);
    return ret;
  };

  var higher = function higher(a, b) {
    return a > b ? a : b;
  };

  var computeMeasureCount = function computeMeasureCount(file, measure) {
    if (measure < 1) measure = 1;
    var endTime = file.tracks.map(function (track) {
      return track.events.map(function (evt) {
        return evt.s + evt.l;
      }).reduce(higher, 0);
    }).reduce(higher, 0);
    var measureLength = measure * TICKS_PER_BEAT;
    var measureCount = Math.floor((endTime - 1) / measureLength) + 1;
    if (measureCount < 1) return 1;
    return measureCount;
  };

  var getMutedState = function getMutedState(file) {
    var someSolo = file.tracks.some(function (t) {
      return t.solo;
    });
    return file.tracks.map(function (t) {
      if (someSolo) {
        return t.muted || !t.solo;
      } else {
        return t.muted || !t.instrument;
      }
    });
  };

  var concat = function concat(a, b) {
    return a.concat(b);
  };

  var _not = function _not(self) {
    return function (evt) {
      return evt !== self;
    };
  };

  var findClipS = function findClipS(pattern, track, self, s) {
    var nearest = function nearest(c1, c2) {
      return Math.abs(self.s - c1) < Math.abs(self.s - c2) ? c1 : c2;
    };

    var allEvents = pattern.tracks.map(function (track) {
      return track.events.filter(_not(self));
    }).reduce(concat);
    var allOtherEvents = pattern.tracks.map(function (tr) {
      if (track === tr) return [];
      return tr.events.filter(_not(self));
    }).reduce(concat);
    if (allEvents.length === 0) return 0;
    var clips = allEvents.map(function (evt) {
      return evt.s + evt.l;
    }).concat(allEvents.map(function (evt) {
      return evt.s - self.l;
    })).concat(allOtherEvents.map(function (evt) {
      return evt.s;
    }));
    return clips.reduce(nearest);
  };

  var findClipL = function findClipL(pattern, track, self, s) {
    var nearest = function nearest(c1, c2) {
      return Math.abs(self.s + self.l - c1) < Math.abs(self.s + self.l - c2) ? c1 : c2;
    };

    var allEvents = pattern.tracks.map(function (track) {
      return track.events.filter(_not(self));
    }).reduce(concat);
    var allOtherEvents = pattern.tracks.map(function (tr) {
      if (track === tr) return [];
      return tr.events.filter(_not(self));
    }).reduce(concat);
    if (allEvents.length === 0) return 0;
    var clips = allEvents.map(function (evt) {
      return evt.s;
    }).concat(allOtherEvents.map(function (evt) {
      return evt.s + evt.l;
    }));
    return clips.reduce(nearest) - self.s;
  };

  var cutEvent = function cutEvent(pattern, track, self) {
    var allEvents = track.events.filter(_not(self));
    allEvents.filter(function (evt) {
      return evt.s > self.s;
    }).forEach(function (evt) {
      if (self.s + self.l > evt.s) {
        self.l = evt.s - self.s;
      }
    });
    var measureTicks = pattern.measure * TICKS_PER_BEAT;

    if ((self.s + self.l) % measureTicks < self.s % measureTicks) {
      self.l = self.l - (self.s + self.l) % measureTicks;
    }
  };

  var collision = function collision(track, self) {
    var allEvents = track.events.filter(_not(self));
    return allEvents.some(function (evt) {
      if (evt.n !== self.n) return false;
      if (evt.s <= self.s && self.s < evt.s + evt.l) return true;
      if (self.s <= evt.s && evt.s < self.s + self.l) return true;
      return false;
    });
  };

  return {
    noteseq: noteseq,
    patternCompose: patternCompose,
    computeMeasureCount: computeMeasureCount,
    getMutedState: getMutedState,
    findClipL: findClipL,
    findClipS: findClipS,
    cutEvent: cutEvent,
    collision: collision
  };
}]);
musicShowCaseApp.service("InstrumentSet", ["FileRepository", "MusicObjectFactory", "MusicContext", function (FileRepository, MusicObjectFactory, MusicContext) {
  var ret = function ret(music) {
    var musicObjectFactory;
    var trackControl = {};
    var set = {};
    var created = [];

    var load = function load(id, trackNo) {
      trackNo = trackNo || 0;

      var _id = id + "_" + trackNo;

      if (!set[_id]) {
        trackControl[trackNo] = trackControl[trackNo] || music.gain(1.0);
        set[_id] = FileRepository.getFile(id).then(function (file) {
          if (file.index.type === 'instrument') {
            if (!musicObjectFactory) musicObjectFactory = MusicObjectFactory();
            return musicObjectFactory.create(file.contents, trackControl[trackNo]).then(function (obj) {
              created.push(obj);
              return obj;
            });
          } else {
            return {
              tempo: true
            };
          }
        });
      }

      return set[_id];
    };

    var dispose = function dispose() {
      created.forEach(function (instrument) {
        if (instrument.dispose) {
          instrument.dispose();
        }
      });

      if (musicObjectFactory) {
        return musicObjectFactory.destroyAll();
      }
    };

    var mute = function mute(trackNo, muteState) {
      trackControl[trackNo] = trackControl[trackNo] || music.gain(1.0);
      trackControl[trackNo].update(muteState ? 0.0 : 1.0);
    };

    return {
      load: load,
      mute: mute,
      all: set,
      dispose: dispose
    };
  };

  return function (music) {
    if (music) return ret(music);
    return MusicContext.runFcn(ret);
  };
}]);
musicShowCaseApp.service("FileRepository", ["$http", "$q", "TypeService", "Historial", "Index", "_localforage", function ($http, $q, TypeService, Historial, Index, localforage) {
  var createdFilesIndex = [];
  var createdFiles = {};
  var builtIns = ["site/builtin/defaultProject.json", "site/builtin/samples.json", "site/builtin/smb-underworld.json", "site/builtin/smb-overworld.json", "site/builtin/bomberman.json", "site/builtin/entertainer.json", "site/builtin/eva-thanatos.json", "site/builtin/bioshock-solace.json"];

  var loadBuiltIn = function loadBuiltIn(uri) {
    return $http.get(uri).then(function (r) {
      r.data.forEach(function (obj) {
        var objectId = obj.id;
        createdFiles[objectId] = obj.contents;
        createdFilesIndex.push({
          project: obj.project,
          type: obj.type,
          name: obj.name,
          id: objectId,
          ref: obj.ref,
          builtIn: true
        });
      });
    });
  };

  var createDefault = function createDefault(id, type, name, content) {
    createdFilesIndex.push({
      project: "default",
      type: type,
      id: id,
      name: name,
      noExportable: true
    });
    createdFiles[id] = content;
  };

  createDefault('tempo', 'tempo', 'Tempo', {});
  var builtInLoaded = $q.all(builtIns.map(loadBuiltIn));

  var createId = function createId() {
    var array = [];

    for (var i = 0; i < 32; i++) {
      var value = [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 'a', 'b', 'c', 'd', 'e', 'f'][Math.floor(Math.random() * 16)];
      array.push(value);
    }

    return array.join("");
  };

  var genericStateEmmiter = new EventEmitter();
  var recycledEmmiter = new EventEmitter();
  var defaultFile = {
    instrument: {
      type: "stack",
      data: {
        array: []
      }
    },
    song: {
      measure: 4,
      bpm: 140,
      tracks: [{
        blocks: [{}, {}, {}]
      }, {
        blocks: [{}, {}, {}]
      }]
    },
    pattern: {
      measure: 4,
      measureCount: 1,
      bpm: 140,
      selectedTrack: 0,
      tracks: [{
        scroll: 1000,
        events: []
      }],
      scrollLeft: 0
    }
  };
  var hist = new WeakMap();

  var updateFile = function updateFile(id, contents, options) {
    return $q.when().then(function () {
      var localFile = createdFilesIndex.filter(function (x) {
        return x.id === id;
      })[0];
      if (localFile) return localFile;
      return storageIndex.getEntry(id);
    }).then(function (localFile) {
      if (localFile) {
        var serialized = MUSIC.Formats.MultiSerializer.serialize(localFile.type, contents);

        if (!options || !options.noHistory) {
          hist[id] = hist[id] || Historial();
          hist[id].registerVersion(JSON.stringify(contents));
        }

        return localforage.setItem(id, serialized);
      }
    }).then(function () {
      return recycleIndex.reload();
    }).then(function () {
      recycledEmmiter.emit("changed");
    });
  };

  var destroyFile = function destroyFile(id) {
    return localforage.removeItem(id).then(function () {
      return $q.all({
        r: recycleIndex.removeEntry(id),
        l: storageIndex.removeEntry(id)
      });
    });
  };

  var purgeFromRecycleBin = function purgeFromRecycleBin(id) {
    return recycleIndex.removeEntry(id);
  };

  var restoreFromRecycleBin = function restoreFromRecycleBin(id) {
    return _restoreFromRecycleBin(id).then(function () {
      genericStateEmmiter.emit("changed");
      recycledEmmiter.emit("changed");
    });
  };

  var _restoreFromRecycleBin = function _restoreFromRecycleBin(id) {
    return recycleIndex.getEntry(id).then(function (localFile) {
      if (localFile) {
        return recycleIndex.removeEntry(id).then(function () {
          return storageIndex.createEntry(localFile);
        }).then(function () {
          var refs = localFile.ref || [];
          if (localFile.project) refs.push(localFile.project);
          return $q.all(refs.map(_restoreFromRecycleBin));
        });
      }
    });
  };

  var moveToRecycleBin = function moveToRecycleBin(id) {
    return _moveToRecycleBin(id).then(function () {
      genericStateEmmiter.emit("changed");
      recycledEmmiter.emit("changed");
    });
  };

  var _moveToRecycleBin = function _moveToRecycleBin(id) {
    var getId = function getId(x) {
      return x.id;
    };

    var isProjectType = function isProjectType(file) {
      return file.type === 'project';
    };

    return storageIndex.willRemove(id).then(function () {
      return storageIndex.getEntry(id).then(function (localFile) {
        if (localFile) {
          return recycleIndex.getAll().then(function (idx) {
            if (idx && idx.length >= 100) {
              return recycleIndex.getFreeItems().then(function (idx) {
                if (!idx[0]) return;
                return recycleIndex.removeEntry(idx[0].id).then(function () {
                  return localforage.removeItem(id);
                });
              });
            }
          }).then(function () {
            return storageIndex.removeEntry(id);
          }).then(function () {
            return recycleIndex.createEntry(localFile);
          });
        }
      });
    }).then(function () {
      return storageIndex.getOrphan(createdFilesIndex.map(getId), createdFilesIndex.filter(isProjectType).map(getId));
    }).then(function (orphanFiles) {
      return $q.all(orphanFiles.map(getId).map(_moveToRecycleBin)).catch(function (e) {
        console.error(e);
      });
    });
  };

  var getPatternSongs = function getPatternSongs(options) {
    var byProject = function byProject(file) {
      return file.project === options.project;
    };

    var byType = function byType(file) {
      return file.type === 'pattern' || file.type === 'song';
    };

    var typeSong = function typeSong(file) {
      return file.type === 'song';
    };

    var loadFile = function loadFile(file) {
      return getFile(file.id);
    };

    return $q.all({
      storage: storageIndex.getAll(),
      builtin: createdFilesIndex
    }).then(function (result) {
      var files = result.storage.concat(result.builtin);
      var fileIndexes = files.filter(byProject).filter(byType);

      if (fileIndexes.some(typeSong)) {
        fileIndexes = fileIndexes.filter(typeSong);
      }

      return $q.all(fileIndexes.map(loadFile));
    });
  };

  var mode = function mode(files, fcn) {
    var obj = {};
    files.forEach(function (file) {
      var value = fcn(file);
      obj[value] = (obj[value] || 0) + 1;
    });
    var maxcount = 0;

    var _m;

    for (var k in obj) {
      var count = obj[k];

      if (count > maxcount) {
        _m = k;
        maxcount = count;
      }
    }

    ;
    return _m;
  };

  var getDefaultMeasure = function getDefaultMeasure(options) {
    return getPatternSongs(options).then(function (files) {
      if (!files.length) return 4;
      return mode(files, function (file) {
        return file.contents.measure;
      });
    });
  };

  var getDefaultBPM = function getDefaultBPM(options) {
    return getPatternSongs(options).then(function (files) {
      if (!files.length) return 140;
      return mode(files, function (file) {
        return file.contents.bpm;
      });
    });
  };

  var getFile = function getFile(id) {
    var builtIn = false;
    var changed = false;
    return builtInLoaded.then(function () {
      var localFile = createdFilesIndex.filter(function (x) {
        return x.id === id;
      })[0];

      if (localFile) {
        builtIn = true;
        return localFile;
      }

      return storageIndex.getEntry(id);
    }).then(function (localFile) {
      return localforage.getItem(id).then(function (serialized) {
        if (serialized) {
          var contents = MUSIC.Formats.MultiSerializer.deserialize(localFile.type, serialized);
          return {
            index: {
              name: localFile.name,
              id: localFile.id,
              builtIn: builtIn,
              type: localFile.type,
              ref: localFile.ref || getRefs(localFile.type, contents),
              updated: true,
              project: localFile.project
            },
            contents: contents
          };
        } else {
          if (localFile) {
            return {
              index: {
                name: localFile.name,
                id: localFile.id,
                builtIn: builtIn,
                type: localFile.type,
                ref: localFile.ref,
                project: localFile.project,
                noExportable: localFile.noExportable
              },
              contents: JSON.parse(JSON.stringify(createdFiles[id]))
            };
          }

          ;
        }
      });
    });
  };

  var createFile = function createFile(options) {
    var newid = options.id || createId();
    var contents = options.contents || defaultFile[options.type] || {};
    return $q.all({
      defaultMeasure: getDefaultMeasure(options),
      defaultBPM: getDefaultBPM(options)
    }).then(function (value) {
      contents.measure = parseInt(value.defaultMeasure);
      contents.bpm = parseInt(value.defaultBPM);
    }).then(function () {
      hist[newid] = hist[newid] || Historial();
      hist[newid].registerVersion(JSON.stringify(contents));
      var serialized = MUSIC.Formats.MultiSerializer.serialize(options.type, contents);
      return localforage.setItem(newid, serialized);
    }).then(function () {
      return storageIndex.createEntry({
        type: options.type,
        name: options.name,
        project: options.project,
        id: newid,
        ref: options.ref
      });
    }).then(function () {
      return recycleIndex.reload();
    }).then(function () {
      genericStateEmmiter.emit("changed");
      recycledEmmiter.emit("changed");
      return newid;
    }).catch(function (err) {
      debugger;
    });
  };

  var s0 = MUSIC.Formats.JSONSerializer;
  var s1 = MUSIC.Formats.CachedSerializer(MUSIC.Formats.PackedJSONSerializer);
  var s2 = MUSIC.Formats.HuffmanSerializerWrapper(s0);
  var s3 = MUSIC.Formats.HuffmanSerializerWrapper(s1);
  var s4 = MUSIC.Formats.CachedSerializer(MUSIC.Formats.PackedJSONSerializerB);
  var s5 = MUSIC.Formats.HuffmanSerializerWrapper(s4);
  MUSIC.Formats.MultiSerializer.setSerializers([{
    serializer: s0,
    base: '0'
  }, {
    serializer: s1,
    base: '1'
  }, {
    serializer: s2,
    base: '2'
  }, {
    serializer: s3,
    base: '3'
  }, {
    serializer: s4,
    base: '4'
  }, {
    serializer: s5,
    base: '5'
  }]);
  var storageIndex = Index("index");
  var recycleIndex = Index("recycle");
  recycleIndex.getAll().then(function () {
    recycledEmmiter.emit("changed");
  });

  var changed = function changed() {
    genericStateEmmiter.emit("changed");
    recycledEmmiter.emit("changed");
  };

  var getRefs = function getRefs(type, contents) {
    var ref = [];

    if (type === 'song') {
      contents.tracks.forEach(function (track) {
        for (var i = 0; i < track.blocks.length; i++) {
          var blockId = track.blocks[i].id;
          if (blockId && ref.indexOf(blockId) === -1) ref.push(blockId);
        }
      });
    } else if (type === 'pattern') {
      contents.tracks.forEach(function (track) {
        if (track.instrument && ref.indexOf(track.instrument) === -1) ref.push(track.instrument);
      });
    }

    return ref;
  };

  var getProjectFiles = function getProjectFiles(projectId) {
    return storageIndex.getAll().then(function (idx) {
      return idx.concat(createdFilesIndex).filter(function (file) {
        return file.project === projectId || file.id === projectId;
      });
    });
  };

  return {
    getRefs: getRefs,
    getProjectFiles: getProjectFiles,
    undo: function undo(id) {
      var oldVer = hist[id].undo();
      if (!oldVer) return;
      return updateFile(id, JSON.parse(oldVer), {
        noHistory: true
      });
    },
    redo: function redo(id) {
      var nextVer = hist[id].redo();
      if (!nextVer) return;
      return updateFile(id, JSON.parse(nextVer), {
        noHistory: true
      });
    },
    purgeFromRecycleBin: purgeFromRecycleBin,
    moveToRecycleBin: moveToRecycleBin,
    restoreFromRecycleBin: restoreFromRecycleBin,
    destroyFile: destroyFile,
    createFile: createFile,
    changed: changed,
    updateIndex: function updateIndex(id, attributes) {
      var localFile = createdFilesIndex.filter(function (x) {
        return x.id === id;
      })[0];

      if (localFile) {
        localFile.name = attributes.name;
        genericStateEmmiter.emit("changed");
        return $q.when(localFile);
      }

      return storageIndex.updateEntry(id, attributes).then(function () {
        genericStateEmmiter.emit("changed");
      });
    },
    getIndex: function getIndex(id) {
      var localFile = createdFilesIndex.filter(function (x) {
        return x.id === id;
      })[0];
      if (localFile) return $q.when(localFile);
      return storageIndex.getEntry(id);
    },
    updateFile: updateFile,
    getFile: getFile,
    observeRecycled: function observeRecycled(callback) {
      recycleIndex.reload().then(function () {
        recycledEmmiter.emit("changed");
      });
      recycledEmmiter.addListener("changed", callback);
      return {
        destroy: function destroy() {
          recycledEmmiter.removeListener("changed", callback);
        }
      };
    },
    searchRecycled: function searchRecycled(keyword, options) {
      options = options || {};
      var limit = typeof options.limit === 'undefined' ? 10 : options.limit;

      var hasKeyword = function hasKeyword() {
        return true;
      };

      if (keyword && keyword.length > 0) {
        keyword = keyword.toLowerCase();

        hasKeyword = function hasKeyword(x) {
          return x.name.toLowerCase().indexOf(keyword) !== -1;
        };
      }

      return recycleIndex.getAll().then(function (index) {
        var filtered = (index || []).filter(hasKeyword).reverse();
        return {
          results: limit ? filtered.slice(0, limit) : filtered,
          total: filtered.length
        };
      });
    },
    search: function search(keyword, options) {
      options = options || {};

      var hasKeyword = function hasKeyword() {
        return true;
      };

      if (keyword && keyword.length > 0) {
        keyword = keyword.toLowerCase();

        hasKeyword = function hasKeyword(x) {
          return x.name.toLowerCase().indexOf(keyword) !== -1;
        };
      }

      var byProject = function byProject() {
        return true;
      };

      if (options.project) {
        byProject = function byProject(x) {
          if (options.type) {
            if (options.type.indexOf(x.type) === -1) return false;
          }

          return x.type === 'tempo' || options.project.indexOf(x.project) !== -1;
        };
      } else {
        if (options.type) {
          byProject = function byProject(x) {
            if (options.type.indexOf(x.type) === -1) return false;
            return true;
          };
        }
      }

      var ee = new EventEmitter();

      var updateSearch = function updateSearch() {
        builtInLoaded.then(function () {
          $q.all([storageIndex.getAll(), createdFilesIndex, TypeService.getTypes(keyword)]).then(function (result) {
            var notInRes = function notInRes(item) {
              return true; //                return ids.indexOf(item.id) === -1;
            };

            var res = result[0] || [];
            var ids = res.map(function (x) {
              return x.id;
            });
            if (result[1]) res = res.concat(result[1].filter(notInRes));
            res = res.concat(result[2].map(convertType));
            res = res.filter(hasKeyword).filter(byProject);
            ee.emit("changed", {
              results: res.slice(0, 15),
              total: res.length
            });
          });
        });
      };

      return {
        observe: function observe(cb) {
          ee.addListener("changed", cb);
          genericStateEmmiter.addListener("changed", updateSearch);
          updateSearch();
          return {
            close: function close() {
              ee.removeListener("changed", cb);
              genericStateEmmiter.removeListener("changed", updateSearch);
            }
          };
        }
      };
    }
  };
}]);

var convertType = function convertType(type) {
  return {
    type: "fx",
    name: type.name,
    id: "type" + type.name,
    project: 'core'
  };
};

musicShowCaseApp.factory("pruneWrapper", function () {
  return function (fcn) {
    if (!fcn._wrapper) {
      fcn._wrapper = function (music, modWrapper) {
        var sfxBase = music.sfxBase();
        var obj = fcn(sfxBase, modWrapper);
        var originalDispose;

        if (obj.dispose) {
          originalDispose = obj.dispose.bind(obj);

          obj.dispose = function () {
            originalDispose();
            sfxBase.prune();
          };
        } else {
          obj.dispose = function () {
            sfxBase.prune();
          };
        }

        return obj;
      };
    }

    return fcn._wrapper;
  };
});
musicShowCaseApp.factory("sfxBaseOneEntryCacheWrapper", function () {
  return function (fcn) {
    var _lastmusic;

    var _lastinstance;

    var ret = function ret(music, options) {
      options = options || {};

      if (!options.nowrap) {
        if (_lastmusic && _lastmusic === music) {
          return _lastinstance;
        }
      }

      _lastmusic = music;
      _lastinstance = fcn(music, options);
      return _lastinstance;
    };

    ret.update = function () {
      fcn.update.bind(fcn).apply(null, arguments);
      return ret;
    };

    return ret;
  };
});
;

var musicShowCaseApp = angular.module("MusicShowCaseApp");
musicShowCaseApp.factory("ErrMessage", ['$uibModal', '$translate', function ($uibModal, $translate) {
  return function (_title, _text) {
    var modalIns = $uibModal.open({
      templateUrl: "site/templates/modal/error.html",
      controller: "errorModalCtrl",
      windowClass: 'error',
      resolve: {
        text: function text() {
          return $translate(_text);
        },
        title: function title() {
          return $translate(_title);
        }
      }
    });
    return modalIns;
  };
}]);
;

var musicShowCaseApp = angular.module("MusicShowCaseApp");
musicShowCaseApp.factory("Export", ['$q', 'FileRepository', function ($q, FileRepository) {
  var exportContents = function exportContents(name, contents) {
    var a = document.createElement("a");
    document.body.appendChild(a);
    a.style = "display: none";
    var blob = new Blob([JSON.stringify(contents)]);
    var url = window.URL.createObjectURL(blob);
    a.href = url;
    a.download = name + ".json";
    a.click();
    window.URL.revokeObjectURL(url);
  };

  var getRelatedIds = function getRelatedIds(file) {
    if (file.index.type === 'project') {
      return file.index.ref || [];
    } else {
      var ret = FileRepository.getRefs(file.index.type, file.contents);
      if (file.index.project) ret.push(file.index.project);
      return ret;
    }
  };

  var concat = function concat(x, y) {
    return x.concat(y);
  };

  var getFileWithRelated = function getFileWithRelated(id) {
    var ret = [];
    return FileRepository.getFile(id).then(function (file) {
      if (!file) return [];

      if (file.index.noExportable) {
        return [];
      }

      ret.push({
        name: file.index.name,
        type: file.index.type,
        id: file.index.id,
        contents: file.contents,
        project: file.index.project,
        ref: file.index.ref
      });
      return $q.all(getRelatedIds(file).map(getFileWithRelated)).then(function (relarray) {
        relarray.forEach(function (rel) {
          ret = ret.concat(rel);
        });
        return ret;
      });
    });
  };

  var uniq = function uniq(array) {
    var files = {};
    array.forEach(function (file) {
      files[file.id] = file;
    });
    return Object.keys(files).map(function (id) {
      return files[id];
    });
  };

  var exportProject = function exportProject(name, id) {
    var getId = function getId(x) {
      return x.id;
    };

    FileRepository.getProjectFiles(id).then(function (files) {
      return $q.all(files.map(getId).map(getFileWithRelated));
    }).then(function (array) {
      array = array.reduce(concat, []);
      exportContents(name, uniq(array));
    });
  };

  var exportFile = function exportFile(name, id) {
    return getFileWithRelated(id).then(function (array) {
      exportContents(name, uniq(array));
    });
  };

  var importFile = function importFile(contents) {
    var importItem = function importItem(item) {
      return function () {
        return FileRepository.getIndex(item.id).then(function (index) {
          if (index) {
            return FileRepository.updateFile(item.id, item.contents).then(function () {
              return FileRepository.updateIndex(item.id, {
                name: item.name,
                project: item.project
              });
            });
          } else {
            return FileRepository.purgeFromRecycleBin(item.id).then(function () {
              return FileRepository.createFile({
                id: item.id,
                contents: item.contents,
                type: item.type,
                name: item.name,
                project: item.project,
                ref: item.ref
              });
            });
          }
        });
      };
    };

    return $q.when().then(function () {
      var p = null;
      var parsed = JSON.parse(contents);
      var firstItem = parsed[0];
      parsed.forEach(function (item) {
        if (p) {
          p = p.then(importItem(item));
        } else {
          p = importItem(item)();
        }
      });
      return p.then(function () {
        return {
          id: firstItem.id,
          type: firstItem.type,
          project: firstItem.project
        };
      });
    });
  };

  return {
    exportContents: exportContents,
    exportFile: exportFile,
    exportProject: exportProject,
    importFile: importFile
  };
}]);
;

var musicShowCaseApp = angular.module("MusicShowCaseApp");
musicShowCaseApp.factory("Index", ['$q', '$timeout', 'Sync', '_localforage', function ($q, $timeout, Sync, localforage) {
  function CantRemove(id, file) {
    this.id = id;
    this.file = file;
    this.stack = new Error().stack;
    this.type = "cantremove";
  }

  CantRemove.prototype = new Error();

  var IndexFactory = function IndexFactory(indexName) {
    var entryChange = new Sync();

    var reload = function reload() {
      // load stoargeIndex
      var storageIndex;
      storageIndex = localforage.getItem(indexName).then(function (array) {
        return array || [];
      });
      return storageIndex;
    };

    var clearItem = function clearItem(data) {
      var ret = {
        id: data.id,
        name: data.name,
        type: data.type,
        project: data.project,
        ref: data.ref
      };
      if (data.c) ret.c = data.c;
      return ret;
    };

    var removeEntry = entryChange.sync(function (id) {
      return reload().then(function (index) {
        if (!index) return;
        index = index.filter(function (x) {
          return x.id !== id;
        });
        return localforage.setItem(indexName, index.map(clearItem));
      }).then(reload);
    });

    var getEntry = function getEntry(id) {
      return reload().then(function (index) {
        if (!index) return null;
        return index.filter(function (x) {
          return x.id === id;
        })[0];
      });
    };

    var createEntry = entryChange.sync(function (data) {
      return reload().then(function (index) {
        index = index || [];

        if (IndexFactory.isolatedContext) {
          data.c = IndexFactory.isolatedContext;
        }

        index.push(data);
        return localforage.setItem(indexName, index.map(clearItem));
      }).then(reload);
    });
    var updateEntry = entryChange.sync(function (id, attributes) {
      return reload().then(function (index) {
        var localFile = index.filter(function (x) {
          return x.id === id;
        })[0];
        localFile.name = attributes.name;
        localFile.ref = attributes.ref;

        if (IndexFactory.isolatedContext) {
          localFile.c = IndexFactory.isolatedContext;
        }

        return localforage.setItem(indexName, index.map(clearItem));
      }).then(reload);
    });

    var getAll = function getAll() {
      return reload().then(function (index) {
        var ic = IndexFactory.isolatedContext;

        if (ic) {
          return index.filter(function (entry) {
            return entry.c === ic;
          });
        }

        return index;
      });
    };

    var refs = function refs(index, id) {
      return index.filter(function (file) {
        return (file.ref || []).indexOf(id) !== -1;
      });
    };

    var isProjectType = function isProjectType(file) {
      return file.type === 'project';
    };

    var getId = function getId(file) {
      return file.id;
    };

    var willRemove = function willRemove(id) {
      return reload().then(function (index) {
        var localFile = index.filter(function (x) {
          return x.id === id;
        })[0];
        if (!localFile) return;
        var r = refs(index, id); // if the item has no references, it can be removed!

        if (r.length === 0) return;

        if (localFile.type === 'project') {
          if (r.some(isProjectType)) {
            throw new CantRemove(id, localFile);
          }
        } else {
          throw new CantRemove(id, localFile);
        }

        return $q.all(r.map(getId).map(willRemove));
      });
    };

    var getOrphan = function getOrphan(extraIds, extraProjectIds) {
      return reload().then(function (index) {
        var projectIds = index.filter(isProjectType).map(getId).concat(extraProjectIds);
        var ids = index.map(getId).concat(extraIds || []);

        var isOrphan = function isOrphan(file) {
          if (file.project) {
            if (projectIds.indexOf(file.project) === -1) {
              return true;
            }
          }

          return (file.ref || []).some(function (id) {
            return ids.indexOf(id) === -1;
          });
        };

        return index.filter(isOrphan);
      });
    };

    var getFreeItems = function getFreeItems() {
      return reload().then(function (index) {
        var referenced = {};
        index.forEach(function (file) {
          (file.ref || []).forEach(function (r) {
            referenced[r] = true;
          });
        });
        return index.filter(function (file) {
          return !referenced[file.id];
        });
      });
    };

    reload();
    return {
      willRemove: willRemove,
      reload: reload,
      removeEntry: removeEntry,
      getOrphan: getOrphan,
      getEntry: getEntry,
      getFreeItems: getFreeItems,
      createEntry: createEntry,
      updateEntry: updateEntry,
      getAll: getAll
    };
  };

  return IndexFactory;
}]);
;

var musicJs = angular.module("MusicShowCaseApp");
musicJs.factory("Midi", ['$q', 'Sync', '_localforage', function ($q, Sync, localforage) {
  var setupStore = new Sync();
  var midiSetupRequested;
  var midiLoaded;
  var storeInputEnabled = setupStore.sync(function (inputId, enabled) {
    return localforage.getItem("midiSetup").then(function (midiSetup) {
      midiSetup = midiSetup || {};
      midiSetup.inputs = midiSetup.inputs || {};
      midiSetup.inputs[inputId] = enabled;
      return localforage.setItem("midiSetup", midiSetup);
    });
  });
  var midiAccessRequested;

  if (navigator.requestMIDIAccess) {
    midiAccessRequested = navigator.requestMIDIAccess({
      sysex: false
    });
  }

  var wrapInput = function wrapInput(input) {
    var enable = function enable() {
      input.onmidimessage = onMIDIMessage;
      input.enabled = true;
      storeInputEnabled(input.id, true);
    };

    var disable = function disable() {
      input.onmidimessage = null;
      input.enabled = false;
      storeInputEnabled(input.id, false);
    };

    var update = function update() {
      if (this.enabled) {
        enable();
      } else {
        disable();
      }
    };

    var ret = {
      enabled: !!input.onmidimessage,
      enable: enable,
      disable: disable,
      update: update,
      name: input.name,
      id: input.id
    };
    return ret;
  };

  var getStatus = function getStatus() {
    return midiLoaded.then(function () {
      return midiAccessRequested;
    }).then(function (midiAccess) {
      var data = {
        connected: false
      };
      var inputs = midiAccess.inputs.values();

      for (var input = inputs.next(); input && !input.done; input = inputs.next()) {
        if (input.value.onmidimessage) {
          data.connected = true;
        }
      }

      return data;
    });
  };

  var getInputs = function getInputs() {
    return midiAccessRequested.then(function (midiAccess) {
      var retInputs = [];
      var inputs = midiAccess.inputs.values();

      for (var input = inputs.next(); input && !input.done; input = inputs.next()) {
        retInputs.push(wrapInput(input.value));
      }

      return retInputs;
    });
  };

  var eventListeners = [];

  var registerEventListener = function registerEventListener(callback) {
    var destroy = function destroy() {
      eventListeners = eventListeners.filter(function (c) {
        return c !== callback;
      });
    };

    eventListeners.push(callback);
    return {
      destroy: destroy
    };
  };

  var onMIDIMessage = function onMIDIMessage(event) {
    midiSetupRequested.then(function (cfg) {
      event.data[1] = event.data[1] - cfg.octave * 12 + cfg.transpose;
      eventListeners.forEach(function (callback) {
        callback(event);
      });
    });
  };

  var reloadConfig = function reloadConfig() {
    midiSetupRequested = localforage.getItem("midiSetup").then(function (midiSetup) {
      if (!midiSetup) midiSetup = {};
      if (typeof midiSetup.octave === 'undefined') midiSetup.octave = 3;
      if (typeof midiSetup.transpose === 'undefined') midiSetup.transpose = 0;
      return midiSetup;
    });
  };

  reloadConfig();
  midiLoaded = $q.all({
    inputs: getInputs(),
    midiSetup: midiSetupRequested
  }).then(function (result) {
    var midiSetup = result.midiSetup;

    if (midiSetup && midiSetup.inputs) {
      result.inputs.forEach(function (input) {
        if (midiSetup.inputs[input.id]) {
          input.enable();
        }
      });
    }
  });

  var getConfig = function getConfig() {
    return midiSetupRequested;
  };

  var setConfig = setupStore.sync(function (cfg) {
    return localforage.getItem("midiSetup").then(function (midiSetup) {
      midiSetup = midiSetup || {};
      midiSetup.inputs = midiSetup.inputs || {};
      midiSetup.octave = cfg.octave;
      midiSetup.transpose = cfg.transpose;
      return localforage.setItem("midiSetup", midiSetup);
    }).then(reloadConfig);
  });
  return {
    getInputs: getInputs,
    registerEventListener: registerEventListener,
    getStatus: getStatus,
    getConfig: getConfig,
    setConfig: setConfig
  };
}]);
;

var musicShowCaseApp = angular.module("MusicShowCaseApp");
musicShowCaseApp.factory("Recipe", ['$q', '$timeout', '$rootScope', '$http', 'Index', 'FileRepository', function ($q, $timeout, $rootScope, $http, Index, FileRepository) {
  var recipeList = ['intro', 'create_a_song', 'create_an_instrument'];
  var blinks = [];
  var currentRecipe = {
    steps: [],
    currentStep: 0
  };

  var handleEvent = function handleEvent(event, args) {
    var step = currentRecipe.steps[currentRecipe.currentStep];
    if (!step) return;
    if (step.eventHandler) step.eventHandler(event, args);
  };

  var runRecipeStep = function runRecipeStep(currentStep) {
    currentStep = currentStep || currentRecipe.currentStep;
    var step = currentRecipe.steps[currentStep];
    blinks = [];
    $rootScope.$broadcast("__blink_disable_all");
    $rootScope.$broadcast("__tooltip_hide_all");

    if (!step) {
      // recipe ends
      Index.isolatedContext = null;
      FileRepository.changed();
      return;
    }

    (step.blink || []).forEach(function (blink_id) {
      blinks.push(blink_id);
      $rootScope.$broadcast("_blink_enable_" + blink_id);
    });

    for (var tooltip_id in step.tooltip || {}) {
      $rootScope.$broadcast("_tooltip_display_" + tooltip_id, {
        text: step.tooltip[tooltip_id]
      });
    }

    if (step.duration) {
      $timeout(function () {
        if (currentRecipe.currentStep <= currentStep) {
          currentRecipe.currentStep = currentStep + 1;
          runRecipeStep();
        }
      }, step.duration * 1000);
    }
  };

  var next_step_on = function next_step_on(eventName) {
    return function (event, args) {
      if (event === eventName) {
        currentRecipe.currentStep++;
        runRecipeStep();
      }
    };
  };

  var delay = function delay(fcn, ms) {
    return function (event, args) {
      $timeout(function () {
        fcn(event, args);
      }, ms);
    };
  };

  var getLocaleName = function getLocaleName(stepIndex, tooltipName) {
    return "s" + stepIndex + "_tooltip_" + tooltipName;
  };

  var start = function start(name) {
    var loadEventHandler = function loadEventHandler(eventHandlerData) {
      if (eventHandlerData.next_step_on) {
        return next_step_on(eventHandlerData.next_step_on);
      } else if (eventHandlerData.delay) {
        return delay(loadEventHandler(eventHandlerData.inner), eventHandlerData.delay);
      }
    };

    var loadStep = function loadStep(stepData, stepIndex) {
      var tr = {};

      for (var k in stepData.tooltip) {
        tr[k] = "recipe" + "." + name + "." + getLocaleName(stepIndex, k);
      }

      return {
        blink: stepData.blink,
        tooltip: tr,
        eventHandler: loadEventHandler(stepData.eventHandler),
        duration: stepData.duration
      };
    };

    var createFile = function createFile(file) {
      return FileRepository.destroyFile(file.index.id).then(function () {
        return FileRepository.createFile({
          id: file.index.id,
          type: file.index.type,
          project: file.index.project,
          name: file.index.name,
          contents: file.contents
        });
      });
    };

    var createFiles = function createFiles(result) {
      return $q.all((result.data.files || []).map(createFile)).then(function () {
        return result;
      });
    };

    var switchProject = function switchProject(result) {
      if (result.data.project) {
        document.location = "#/editor/" + result.data.project;
      }

      return result;
    };

    return $http.get("recipes/" + name + ".json").then(createFiles).then(switchProject).then(function (result) {
      var recipeData = result.data;

      if (result.data.isolatedContext) {
        Index.isolatedContext = result.data.isolatedContext + Math.floor(Date.now() / 1000);
        FileRepository.changed();
      }

      currentRecipe.steps = recipeData.steps.map(loadStep);
      currentRecipe.currentStep = 0;
      runRecipeStep();
    });
  };

  start.raise = function (name) {
    handleEvent(name);
  };

  var loadTranslations = function loadTranslations(options) {
    var key = options.key;

    var loadRecipeTranslation = function loadRecipeTranslation(name) {
      return $http.get("recipes/" + name + ".json").then(function (result) {
        var recipeData = result.data;
        if (!recipeData.lang) return {};
        var langIndex = recipeData.lang.indexOf(key);
        if (langIndex === -1) return {};
        var data = {};
        recipeData.steps.forEach(function (step, stepIndex) {
          if (step.tooltip) {
            for (var k in step.tooltip) {
              var tp = step.tooltip[k];
              var localeName = getLocaleName(stepIndex, k);

              if (Array.isArray(tp)) {
                data[localeName] = tp[langIndex];
              } else {
                if (langIndex === 0) {
                  data[localeName] = tp;
                }
              }
            }
          }
        });
        return data;
      });
    };

    var actions = {};
    recipeList.forEach(function (recipeId) {
      actions[recipeId] = loadRecipeTranslation(recipeId);
    });
    return $q.all(actions).then(function (recipeTranslationData) {
      return {
        recipe: recipeTranslationData
      };
    });
  };

  var getBlinks = function getBlinks() {
    return blinks;
  };

  return {
    start: start,
    step: runRecipeStep,
    handleEvent: handleEvent,
    loadTranslations: loadTranslations,
    getBlinks: getBlinks
  };
}]);
;

var musicJs = angular.module("MusicShowCaseApp");
musicJs.factory("Sync", ['$q', function ($q) {
  return function () {
    var promise = $q.when();

    this.sync = function (f) {
      return function () {
        var _args = arguments;

        var _self = this;

        var defer = $q.defer();
        promise = promise.then(function () {
          return f.apply(_self, _args).then(function (value) {
            defer.resolve(value);
          }).catch(function (err) {
            defer.reject(err);
          });
        });
        return defer.promise;
      };
    };
  };
}]);
;

var musicShowCaseApp = angular.module("MusicShowCaseApp");
musicShowCaseApp.factory("translationsLoader", ['$q', 'TypeService', 'esTranslations', 'enTranslations', 'Recipe', function ($q, TypeService, esTranslations, enTranslations, Recipe) {
  return function (options) {
    var baseTranslation = {};

    if (options.key === 'es') {
      baseTranslation = esTranslations;
    }

    if (options.key === 'en') {
      baseTranslation = enTranslations;
    }

    var addTranslations = function addTranslations(tr) {
      for (var k in tr) {
        baseTranslation[k] = tr[k];
      }
    };

    return $q.all({
      typeTranslations: TypeService.loadTranslations(options),
      recipeTranslations: Recipe.loadTranslations(options)
    }).then(function (result) {
      addTranslations(result.typeTranslations);
      addTranslations(result.recipeTranslations);
      return baseTranslation;
    });
  };
}]);
;

var musicShowCaseApp = angular.module("MusicShowCaseApp");

var ObjectCache = function ObjectCache() {
  var wm = new WeakMap();

  this.get = function (music, object) {
    var array = wm.get(music);
    var strobj = JSON.stringify(object);
    if (!array) return undefined;
    var elem = array.filter(function (x) {
      return x.obj === strobj;
    })[0];
    return elem && elem.value;
  };

  this.set = function (music, object, value) {
    var array = wm.get(music);
    var strobj = JSON.stringify(object);

    if (!array) {
      array = [];
    }

    var elem = array.filter(function (x) {
      return x.obj === strobj;
    })[0];

    if (elem) {
      elem.value = value;
    } else {
      array.push({
        obj: strobj,
        value: value
      });
    }

    if (array.length > 8) array = array.slice(1);
    wm.set(music, array);
  };
};

musicShowCaseApp.service("TypeService", ["$http", "$q", function ($http, $q) {
  var make_mutable = function make_mutable(fcn, options) {
    var cacheData = new ObjectCache();

    var cacheWrap = function cacheWrap(object, baseMusic) {
      var originalPrune = baseMusic.prune;

      baseMusic.prune = function () {
        cacheData = new ObjectCache();

        if (originalPrune) {
          return originalPrune.apply(this, arguments);
        }
      };

      return function (constructor) {
        return function (music, params) {
          var key = baseMusic;
          if (key.getOriginal) key = key.getOriginal();
          cacheData.set(key, object, music);
          return constructor(music, params);
        };
      };
    };

    return function (object, subobjects, components) {
      var current;
      var instances = [];

      if (options && options.reusableNode) {
        current = function current(music, params) {
          var wrapped = subobjects[0];
          var constructor = fcn(object, subobjects.map(cacheWrap(object, music)), components);
          var key = music;
          if (key.getOriginal) key = key.getOriginal();
          var newBase = cacheData.get(key, object);

          if (newBase) {
            return wrapped(newBase);
          } else {
            return constructor(music, params);
          }
        };
      } else {
        current = fcn(object, subobjects, components);
      }

      if (current.update) {
        return current;
      }

      var ret = function ret(music, options) {
        var r;
        var wrapped = {};
        var lastCurrent = current;

        var proxy = function proxy(name) {
          wrapped[name] = function () {
            if (lastCurrent != current) update();
            return r[name].apply(r, arguments);
          };
        };

        var update = function update() {
          var newr = current(music, options);
          if (newr !== r && r && r.dispose) r.dispose();
          r = newr;
          instances.push(newr);
          lastCurrent = current;

          for (var k in r) {
            proxy(k);
          }
        };

        update();
        return wrapped;
      };

      var lastObjData;

      ret.update = function (newobject, _components) {
        components = _components;
        if (JSON.stringify(newobject) === lastObjData) return ret;
        lastObjData = JSON.stringify(newobject);
        instances.forEach(function (instance) {
          if (instance.dispose) instance.dispose();
        });
        instances = [];
        current = fcn(newobject, subobjects, components);
        return ret;
      };

      return ret;
    };
  };

  var plugins = ["core"];
  var types = [];
  var translation = {};

  var m = function m(pluginName) {
    return {
      lang: function lang(key, translateData) {
        translation[key] = translation[key] || {};
        translation[key][pluginName] = translateData;
      },
      type: function type(typeName, options, constructor) {
        types.push({
          templateUrl: "site/plugin/" + pluginName + "/" + options.template + ".html",
          parameters: options.parameters,
          constructor: make_mutable(constructor, {
            reusableNode: options.reusableNode
          }),
          name: typeName,
          composition: options.composition,
          components: options.components,
          description: options.description,
          _default: options._default,
          subobjects: options.subobjects,
          stackAppend: options.stackAppend,
          monitor: options.monitor
        });
      }
    };
  };

  var loadPlugin = function loadPlugin(pluginName) {
    return $http.get("site/plugin/" + pluginName + "/index.js").then(function (result) {
      var runnerCode = result.data;
      var module = {
        export: function _export() {}
      };
      eval(runnerCode);
      module.export(m(pluginName));
    });
  };

  var pluginsLoaded = $q.all(plugins.map(loadPlugin));

  var getTypes = function getTypes(keyword) {
    var hasKeyword = function hasKeyword() {
      return true;
    };

    if (keyword) {
      keyword = keyword.toLowerCase();

      hasKeyword = function hasKeyword(x) {
        return x.name.toLowerCase().indexOf(keyword) !== -1;
      };
    }

    return pluginsLoaded.then(function () {
      return types.filter(hasKeyword);
    });
  };

  var getType = function getType(typeName, callback) {
    return pluginsLoaded.then(function () {
      var ret = types.filter(function (type) {
        return type.name === typeName;
      })[0];
      if (callback) callback(ret);
      return ret;
    });
  };

  var loadTranslations = function loadTranslations(options) {
    return pluginsLoaded.then(function () {
      return translation[options.key] || {};
    });
  };

  return {
    getTypes: getTypes,
    getType: getType,
    loadTranslations: loadTranslations
  };
}]);
;

var musicShowCaseApp = angular.module("MusicShowCaseApp");
musicShowCaseApp.factory("WelcomeMessage", ['localforage', function (localforage) {
  var skip = function skip() {
    return localforage.getItem("welcome_skip").then(function (result) {
      return !!result;
    });
  };

  var setSkip = function setSkip(value) {
    if (value) {
      return localforage.setItem("welcome_skip", value);
    } else {
      return localforage.removeItem("welcome_skip");
    }
  };

  return {
    setSkip: setSkip,
    skip: skip
  };
}]);
;

var musicShowCaseApp = angular.module("MusicShowCaseApp");
musicShowCaseApp.factory("_localforage", ['$q', 'localforage', function ($q, localforage) {
  var getItem = localforage.getItem.bind(localforage);

  var releaseWithIndex = function releaseWithIndex(index, bytes) {
    if (index.length === 0) return $q.when(index);
    if (bytes <= 0) return $q.when(index);
    var nextEntry = index.shift();
    return localforage.getItem(nextEntry.id).then(function (value) {
      return localforage.removeItem(nextEntry.id).then(function () {
        return releaseWithIndex(index, bytes - (value ? value.length : 0));
      });
    });
  };

  var clearItem = function clearItem(data) {
    return {
      id: data.id,
      name: data.name,
      type: data.type
    };
  };

  var release = function release(bytes) {
    return localforage.getItem("recycle").then(function (index) {
      return releaseWithIndex(index, bytes);
    }).then(function (newIndex) {
      return localforage.setItem("recycle", newIndex.map(clearItem));
    });
  };

  var setItem = function setItem(key, object, isretry) {
    return localforage.setItem(key, object).catch(function (err) {
      if (!isretry) {
        return release(object.length).then(function () {
          return setItem(key, object, true);
        });
      }

      throw err;
    });
  };

  var removeItem = localforage.removeItem.bind(localforage);
  return {
    getItem: getItem,
    setItem: setItem,
    removeItem: removeItem
  };
}]);
;

var musicShowCaseApp = angular.module("MusicShowCaseApp");
musicShowCaseApp.filter("instrument_name", function () {
  return function (instrumentId, instrumentMap) {
    return instrumentMap[instrumentId] && instrumentMap[instrumentId] ? instrumentMap[instrumentId].name : instrumentId;
  };
});
musicShowCaseApp.filter("instrument_type", function () {
  return function (instrumentId, instrumentMap) {
    return instrumentMap[instrumentId] && instrumentMap[instrumentId] ? instrumentMap[instrumentId].type : 'instrument';
  };
});
musicShowCaseApp.filter("block_name", function () {
  return function (block, indexMap) {
    return indexMap[block.id] && indexMap[block.id].index ? indexMap[block.id].index.name : block.id;
  };
});
musicShowCaseApp.filter("block_length", ["Pattern", function (Pattern) {
  return function (block, indexMap, measure) {
    if (!block.id) return 1;
    if (!indexMap[block.id]) return 1;
    if (!indexMap[block.id].contents) return 1;
    return Pattern.computeMeasureCount(indexMap[block.id].contents, measure);
  };
}]);
musicShowCaseApp.controller("recordOptionsCtrl", ["$scope", "$uibModalInstance", "Recipe", function ($scope, $uibModalInstance, Recipe) {
  $scope.numChannels = 2;
  $scope.encoding = "wav";
  $scope.recipe = Recipe.start;

  $scope.cancel = function () {
    $uibModalInstance.dismiss();
  };

  $scope.start = function () {
    $scope.recipe.raise("song_rec_confirm");
    $uibModalInstance.close({
      encoding: $scope.encoding,
      numChannels: $scope.numChannels
    });
  };
}]);
musicShowCaseApp.controller("DashboardController", ["$scope", function ($scope) {
  $scope.$emit('switchProject', "default");
}]);
musicShowCaseApp.controller("ProjectDashboardController", ["$scope", "$routeParams", function ($scope, $routeParams) {
  $scope.$emit('switchProject', $routeParams.project);
}]);
musicShowCaseApp.controller("SongEditorController", ["$scope", "$uibModal", "$q", "$timeout", "$routeParams", "$http", "MusicContext", "FileRepository", "InstrumentSet", "Pattern", "Export", "TICKS_PER_BEAT", "SONG_MAX_TRACKS", function ($scope, $uibModal, $q, $timeout, $routeParams, $http, MusicContext, FileRepository, InstrumentSet, Pattern, Export, TICKS_PER_BEAT, SONG_MAX_TRACKS) {
  $scope.indexMap = {};
  var id = $routeParams.id;
  var instSet = InstrumentSet();
  var playingStartOffset = 0;
  $scope.$emit('switchProject', $routeParams.project);

  var pxToTicks = function pxToTicks(px) {
    var beatWidth = 154 / $scope.file.measure;
    var zoomLevel = 1;
    return TICKS_PER_BEAT * px / zoomLevel / beatWidth;
  };

  $scope.seek = function (event) {
    if ($scope.currentRec) return;
    playingStartOffset = pxToTicks(event.offsetX);
    $scope.$broadcast("resetClock", playingStartOffset);

    if ($scope.playing) {
      $scope.playing.stop();
      $scope.playing = null;
      $scope.replay();
    }
  };

  $scope.patternEdit = function (block) {
    document.location = "#/editor/" + $routeParams.project + "/pattern/" + block.id;
  };

  $scope.exportItem = function () {
    Export.exportFile($scope.fileIndex.name, $scope.fileIndex.id);
  };

  $scope.removeItem = function () {
    if ($scope.fileIndex.builtIn) {
      $scope.file = null;
      $scope.fileIndex = null;
      FileRepository.destroyFile(id).then(function () {
        reloadFromRepo();
      });
      return;
    }

    FileRepository.moveToRecycleBin(id).then(function () {
      document.location = "#/editor/" + $routeParams.project;
    });
  };

  $scope.remove = function (block) {
    delete block.id;
    checkPayload();
    $scope.fileChanged();
  };

  $scope.currentRec = null;

  $scope.record = function () {
    if ($scope.playing) {
      $scope.playing.stop();
      $scope.playing = null;
      $scope.$broadcast("pauseClock");
    }

    var modalIns = $uibModal.open({
      templateUrl: "site/templates/modal/recordOptions.html",
      controller: "recordOptionsCtrl"
    });
    modalIns.result.then(function (encodingOptions) {
      $scope.currentRec = MusicContext.record({
        encoding: encodingOptions.encoding,
        numChannels: encodingOptions.numChannels
      }, function (blob) {
        var a = document.createElement("a");
        document.body.appendChild(a);
        a.style = "display: none";
        var url = window.URL.createObjectURL(blob);
        a.href = url;
        a.download = $scope.fileIndex.name + "." + encodingOptions.encoding;
        a.click();
        window.URL.revokeObjectURL(url);
        $scope.recipe.raise('song_rec_stop');
      });
      $scope.play();
    });
  };

  $scope.stop = function () {
    playingStartOffset = 0;
    $scope.$broadcast("stopClock");
    $scope.$broadcast("resetClock", playingStartOffset);
    if ($scope.playing) $scope.playing.stop();
    $scope.recipe.raise("song_play_stopped");
    $scope.playing = null;
  };

  $scope.playing = null;
  $scope.$on('pausedClock', function (evt, ticks) {
    playingStartOffset = ticks;
  });

  $scope.play = function () {
    if ($scope.playing) {
      $scope.playing.stop();
      $scope.playing = null;
      $scope.$broadcast("pauseClock");
      return;
    }

    $scope.replay();
  };

  $scope.replay = function () {
    MusicContext.resumeAudio();
    $q.all(instSet.all).then(function (instruments) {
      var patterns = {};

      var createPattern = function createPattern(id, songTrackIdx) {
        if (!id) return null;
        if (patterns[id]) return patterns[id];
        var pattern = $scope.indexMap[id].contents;
        var changedBpm = Object.create(pattern);
        changedBpm.bpm = $scope.file.bpm;
        patterns[id] = Pattern.patternCompose(changedBpm, instruments, songTrackIdx * SONG_MAX_TRACKS, function () {});
        return patterns[id];
      };

      var song = new MUSIC.Song($scope.file.tracks.map(function (track, songTrackIdx) {
        return track.blocks.map(function (block) {
          return createPattern(block.id, songTrackIdx);
        });
      }), {
        measure: $scope.file.measure,
        bpm: $scope.file.bpm,
        ticks_per_beat: TICKS_PER_BEAT,
        start: playingStartOffset
      });
      $scope.$broadcast("startClock", song.timeToTicks());
      $scope.playing = song.play({
        onStop: function onStop() {
          $scope.$broadcast("stopClock");
          $scope.$broadcast("resetClock", playingStartOffset);
          $scope.recipe.raise("song_play_stopped");
          $scope.playing = null;
          if ($scope.currentRec) $scope.currentRec.stop();
          $scope.currentRec = null;
          $timeout(function () {});
        }
      });
    });
  };

  $scope.indexChanged = function () {
    $scope.fileIndex.ref = FileRepository.getRefs("song", $scope.file);
    FileRepository.updateIndex(id, $scope.fileIndex);
  };

  $scope.fileChanged = fn.debounce(function () {
    FileRepository.updateFile(id, $scope.file).then(function () {
      $scope.indexChanged();
    });
  }, 100);

  var checkPayload = function checkPayload() {
    var maxblocks = 0;
    var maxTrackIndex = 0;
    if (!$scope.file) return;
    if (!$scope.file.tracks) return;
    $scope.file.tracks.forEach(function (track, trackIndex) {
      for (var i = 0; i < track.blocks.length; i++) {
        if (track.blocks[i].id) {
          var mCount = Pattern.computeMeasureCount($scope.indexMap[track.blocks[i].id].contents, $scope.file.measure);
          if (i + mCount > maxblocks) maxblocks = i + mCount;
          if (trackIndex > maxTrackIndex) maxTrackIndex = trackIndex;
        }
      }
    });

    if ($scope.file.tracks.length < maxTrackIndex + 2 && $scope.file.tracks.length < SONG_MAX_TRACKS) {
      $scope.file.tracks.push({
        blocks: $scope.file.tracks[0].blocks.map(function () {
          return {};
        })
      });
    } else {
      $scope.file.tracks = $scope.file.tracks.slice(0, maxTrackIndex + 2);
    }

    var target = maxblocks + 1;
    $scope.file.tracks.forEach(function (track) {
      if (target > track.blocks.length) {
        var payload = target - track.blocks.length;

        for (var i = 0; i < payload; i++) {
          track.blocks.push({});
        }
      } else {
        track.blocks = track.blocks.slice(0, target);
      }
    });
    $scope.fileChanged();
  };

  $scope.$watch("file.measure", checkPayload);

  $scope.onDropComplete = function ($data, $event, block, songTrackIdx) {
    if ($data.fromBlock) {
      var swapId = block.id;
      block.id = $data.fromBlock.id;
      $data.fromBlock.id = swapId;
      checkPayload();
      return;
    }

    if ($data.type !== 'pattern') return;
    block.id = $data.id;
    FileRepository.getFile($data.id).then(function (f) {
      f.contents.tracks.forEach(function (track, idx) {
        if (track.instrument) instSet.load(track.instrument, songTrackIdx * SONG_MAX_TRACKS + idx);
      });
      $scope.indexMap[$data.id] = f;
      checkPayload();
      $scope.fileChanged();
      $scope.recipe.raise('song_pattern_dropped');
    });
  };

  var reloadFromRepo = function reloadFromRepo() {
    var block_ids = {};
    FileRepository.getFile(id).then(function (file) {
      if (file) {
        file.contents.tracks.forEach(function (track, idx) {
          track.blocks.forEach(function (block) {
            if (block && block.id) {
              if (!block_ids[block.id]) {
                block_ids[block.id] = FileRepository.getFile(block.id).then(function (file) {
                  return {
                    file: file,
                    idx: idx
                  };
                });
              }
            }
          });
        });
      }

      ;
      return $q.all(block_ids).then(function (indexMap) {
        $scope.indexMap = {};

        for (var blockId in indexMap) {
          var pattern = indexMap[blockId].file.contents;
          var songTrackIdx = indexMap[blockId].idx;
          $scope.indexMap[blockId] = indexMap[blockId].file;
          pattern.tracks.forEach(function (track, idx) {
            if (track.instrument) instSet.load(track.instrument, songTrackIdx * SONG_MAX_TRACKS + idx);
          });
        }
      }).then(function () {
        $timeout(function () {
          var outputFile = {};
          $scope.fileIndex = file.index;
          $scope.file = file.contents;
        });
      });
    });
  };

  reloadFromRepo();

  var keyDownHandler = function keyDownHandler(evt) {
    if (document.activeElement.tagName.toLowerCase() === "input") return;

    if (evt.keyCode === 90 && evt.ctrlKey) {
      FileRepository.undo(id).then(reloadFromRepo);
    }

    if (evt.keyCode === 89 && evt.ctrlKey) {
      FileRepository.redo(id).then(reloadFromRepo);
    }
  };

  $(document).bind("keydown", keyDownHandler);
  $scope.$on("$destroy", function () {
    $(document).unbind("keydown", keyDownHandler);
    instSet.dispose();
  });
}]);
musicShowCaseApp.controller("PatternEditorController", ["$q", "$translate", "$scope", "$timeout", "$routeParams", "$http", "TICKS_PER_BEAT", "MusicContext", "FileRepository", "Pattern", "InstrumentSet", 'Export', 'ErrMessage', function ($q, $translate, $scope, $timeout, $routeParams, $http, TICKS_PER_BEAT, MusicContext, FileRepository, Pattern, InstrumentSet, Export, ErrMessage) {
  var id = $routeParams.id;
  var playingStartOffset = 0;

  $scope.exportItem = function () {
    Export.exportFile($scope.fileIndex.name, $scope.fileIndex.id);
  };

  $scope.$emit('switchProject', $routeParams.project);

  $scope.instrumentEdit = function (track) {
    document.location = "#/editor/" + $routeParams.project + "/instrument/" + track.instrument;
  };

  $scope.instrumentMap = {};
  $scope.beatWidth = 10;
  $scope.zoomLevel = 8;
  $scope.selectedTrack = 0;
  $scope.mutedState = [];
  var instSet = InstrumentSet();

  var pxToTicks = function pxToTicks(px) {
    var beatWidth = 10;
    return TICKS_PER_BEAT * px / $scope.zoomLevel / beatWidth;
  };

  $scope.seek = function (event) {
    playingStartOffset = pxToTicks(event.offsetX + $scope.file.scrollLeft);
    $scope.$broadcast("resetClock", playingStartOffset);

    if ($scope.playing) {
      $scope.playing.stop();
      $scope.playing = null;
      $scope.replay();
    }
  };

  $scope.updateMuted = function () {
    $scope.mutedState = Pattern.getMutedState($scope.file);
    $scope.fileChanged();
    $scope.file.tracks.forEach(function (track, idx) {
      instSet.mute(idx, $scope.mutedState[idx]);
    });
  };

  $scope.removeItem = function () {
    if ($scope.fileIndex.builtIn) {
      $scope.file = null;
      $scope.fileIndex = null;
      FileRepository.destroyFile(id).then(function () {
        reloadFromRepo();
      });
      return;
    }

    FileRepository.moveToRecycleBin(id).then(function () {
      document.location = "#/editor/" + $routeParams.project;
    }).catch(function (err) {
      if (err.type && err.type === 'cantremove') {
        ErrMessage('common.error_title', 'common.cantremove_error');
      } else {
        throw err;
      }
    });
  };

  $scope.removeTrack = function (trackIdx) {
    $scope.file.tracks = $scope.file.tracks.slice(0, trackIdx).concat($scope.file.tracks.slice(trackIdx + 1));
    $scope.file.selectedTrack = $scope.file.selectedTrack % $scope.file.tracks.length;
    $scope.updateMuted();
    $scope.fileChanged();
  };

  $scope.addTrack = function () {
    $scope.file.tracks.push({
      events: [],
      scroll: 1000
    });
    $scope.file.selectedTrack = $scope.file.tracks.length - 1;
    $scope.updateMuted();
    $scope.fileChanged();
  };

  $scope.stop = function () {
    playingStartOffset = 0;
    $scope.$broadcast("stopClock");
    $scope.$broadcast("resetClock", playingStartOffset);
    if ($scope.playing) $scope.playing.stop();
    $scope.recipe.raise("song_play_stopped");
    $scope.playing = null;
  };

  $scope.$on('pausedClock', function (evt, ticks) {
    playingStartOffset = ticks;
  });

  $scope.play = function () {
    if ($scope.playing) {
      $scope.playing.stop();
      $scope.playing = null;
      $scope.$broadcast("pauseClock");
      return;
    }

    $scope.replay();
  };

  $scope.replay = function () {
    MusicContext.resumeAudio();
    var playingLine = $(".playing-line");
    $q.all(instSet.all).then(function (instruments) {
      if ($scope.playing) $scope.playing.stop();

      var onStop = function onStop() {
        $scope.$broadcast("stopClock");
        $scope.$broadcast("resetClock");
        $scope.recipe.raise("pattern_play_stopped");
        $timeout(function () {
          $scope.playing = null;
        });
        playingStartOffset = 0;
      };

      var pattern = Pattern.patternCompose($scope.file, instruments, 0, onStop, {
        start: playingStartOffset
      });
      $scope.playing = pattern.play();
      var timeToTicks = pattern.timeToTicks();
      $scope.$broadcast("startClock", timeToTicks);
    });
  };

  $scope.zoomIn = function () {
    $scope.zoomLevel = $scope.zoomLevel * 2;
    if ($scope.zoomLevel > 32) $scope.zoomLevel = 32;
  };

  $scope.zoomOut = function () {
    $scope.zoomLevel = $scope.zoomLevel / 2;
    if ($scope.zoomLevel < 1) $scope.zoomLevel = 1;
  };

  $scope.indexChanged = function () {
    $scope.fileIndex.ref = FileRepository.getRefs("pattern", $scope.file);
    FileRepository.updateIndex(id, $scope.fileIndex);
  };

  $scope.fileChanged = fn.debounce(function () {
    FileRepository.updateFile(id, $scope.file).then($scope.indexChanged);
  }, 100);
  $scope.$on("trackChanged", function (track) {
    computeMeasureCount();
    $scope.fileChanged();
  });

  var beep = function beep(instrument, n) {
    if (!instrument) return;
    if (!instrument.note) return;
    if (lastPlaying) lastPlaying.stop();
    lastPlaying = instrument.note(n).play();
    setTimeout(function () {
      if (lastPlaying) lastPlaying.stop();
      lastPlaying = null;
    }, 50);
  };

  var computeMeasureCount = function computeMeasureCount() {
    if (!$scope.file) return;
    if (!$scope.file.tracks[0]) return;
    $scope.file.measureCount = Pattern.computeMeasureCount($scope.file, $scope.file.measure);
  };

  var lastPlaying;

  var trackMuted = function trackMuted(track) {
    return $scope.mutedState[$scope.file.tracks.indexOf(track)];
  };

  $scope.$on("eventChanged", function (evt, data) {
    computeMeasureCount();
    if (data.oldevt.n !== data.evt.n && !trackMuted(data.track)) beep(instrument.get(data.track), data.evt.n);
    $scope.fileChanged();
  });
  $scope.$on("eventSelected", function (evt, data) {
    if (!trackMuted(data.track)) beep(instrument.get(data.track), data.evt.n);
  });
  $scope.$watch("file.measure", computeMeasureCount);
  var instrument = new WeakMap();

  $scope.updateInstrument = function (trackNo) {
    if (!$scope.file.tracks[trackNo]) return;
    if (!$scope.file.tracks[trackNo].instrument) return;
    return $q.all({
      musicObject: instSet.load($scope.file.tracks[trackNo].instrument, trackNo),
      index: FileRepository.getIndex($scope.file.tracks[trackNo].instrument)
    }).then(function (result) {
      $scope.instrumentMap[$scope.file.tracks[trackNo].instrument] = result.index;
      if (result.musicObject) instrument.set($scope.file.tracks[trackNo], result.musicObject);
      return result.musicObject;
    });
  };

  $scope.onDropComplete = function (instrument, event) {
    MusicContext.resumeAudio();
    if (instrument.type !== 'instrument' && instrument.type !== 'tempo') return;
    var trackNo = $scope.file.selectedTrack;
    $scope.file.tracks = $scope.file.tracks || [];
    $scope.file.tracks[trackNo] = $scope.file.tracks[trackNo] || {};
    $scope.file.tracks[trackNo].instrument = instrument.id;
    FileRepository.updateFile(id, $scope.file);
    $scope.updateInstrument(trackNo).then(function (musicObject) {
      $scope.updateMuted();
      if (!$scope.mutedState[trackNo]) beep(musicObject, 36);
    });
  };

  var reloadFromRepo = function reloadFromRepo() {
    FileRepository.getFile(id).then(function (file) {
      $timeout(function () {
        var outputFile = {};
        $scope.fileIndex = file.index;
        $scope.file = file.contents;
        $scope.mutedState = Pattern.getMutedState($scope.file);
        $scope.updateMuted();
        if (!$scope.file.tracks) $scope.file.tracks = [{}];
        $scope.file.tracks.forEach(function (track, idx) {
          track.events = track.events || [];
          $scope.updateInstrument(idx);
        });
      });
    });
  };

  reloadFromRepo(); // undo & redo

  var keyDownHandler = function keyDownHandler(evt) {
    if (document.activeElement.tagName.toLowerCase() === "input") return;

    if (evt.keyCode === 90 && evt.ctrlKey) {
      FileRepository.undo(id).then(reloadFromRepo);
    }

    if (evt.keyCode === 89 && evt.ctrlKey) {
      FileRepository.redo(id).then(reloadFromRepo);
    }
  };

  var playButton = $("button.play-button");
  playButton.bind("click", MusicContext.resumeAudio);
  $(document).bind("keydown", keyDownHandler);
  $scope.$on("$destroy", function () {
    playButton.unbind("click", MusicContext.resumeAudio);
    $(document).unbind("keydown", keyDownHandler);
    instSet.dispose();
  });
  $scope.$on("enableTrack", function (evt, track) {
    $scope.file.selectedTrack = $scope.file.tracks.indexOf(track);
  });
  $scope.$on("patternSelectEvent", function (evt, event) {
    $timeout(function () {
      $scope.$broadcast("trackSelectEvent", event);
    });
  });
}]);
musicShowCaseApp.controller("EditorController", ["$scope", "$q", "$timeout", "$routeParams", "$http", "MusicContext", "FileRepository", "MusicObjectFactory", "Export", function ($scope, $q, $timeout, $routeParams, $http, MusicContext, FileRepository, MusicObjectFactory, Export) {
  var id = $routeParams.id;
  $scope.$emit('switchProject', $routeParams.project);

  $scope.exportItem = function () {
    Export.exportFile($scope.fileIndex.name, $scope.fileIndex.id);
  };

  $scope.removeItem = function () {
    destroyAll();

    if ($scope.fileIndex.builtIn) {
      $scope.file = null;
      $scope.fileIndex = null;
      FileRepository.destroyFile(id).then(function () {
        reloadFromRepo();
      });
      return;
    } else {
      FileRepository.moveToRecycleBin(id).then(function () {
        document.location = "#/editor/" + $routeParams.project;
      }).catch(function (err) {
        if (err.type && err.type === 'cantremove') {
          ErrMessage('common.error_title', 'common.cantremove_error');
        } else {
          throw err;
        }
      });
    }
  };

  var lastObj;
  var musicObjectFactory = MusicObjectFactory({
    monitor: true
  });

  var destroyAll = function destroyAll() {
    ($scope.instruments || []).forEach(function (instrument) {
      if (instrument.dispose) instrument.dispose();
    });
    ($scope.playables || []).forEach(function (playable) {
      $scope.stopPlay(playable);
    });
    return musicObjectFactory.destroyAll();
  };

  var lazyLoadInstrument = function lazyLoadInstrument(f) {
    var callStop = function callStop(p) {
      return p.stop();
    };

    var callPlay = function callPlay(p) {
      return p.play();
    };

    var instrumentPromise;
    var innerInstrument;

    var note = function note(n) {
      if (innerInstrument) return innerInstrument.note(n);
      var innerNote;

      if (!instrumentPromise) {
        instrumentPromise = f();
      }

      innerNote = instrumentPromise.then(function (inst) {
        innerInstrument = inst;
        return inst.note(n);
      });

      var play = function play() {
        var playing = innerNote.then(callPlay);

        var stop = function stop() {
          return playing.then(callStop);
        };

        return {
          stop: stop
        };
      };

      return {
        play: play
      };
    };

    return MUSIC.instrumentExtend({
      note: note
    }).stopDelay(10);
  };

  var createInstrumentFromFile = function createInstrumentFromFile() {
    return musicObjectFactory.create($scope.file);
  };

  var fileChanged = fn.debounce(function (newFile, oldFile) {
    if (!$scope.file) return;
    $q.when(null).then(function () {
      return destroyAll();
    }).then(function () {
      return lazyLoadInstrument(createInstrumentFromFile);
    }).then(function (obj) {
      if (!obj) {
        $scope.instruments = [];
        $scope.playables = [];
        return;
      }

      if (obj !== lastObj) {
        $scope.instruments = [];
        $scope.playables = [];

        if (obj.note) {
          // instrument
          $scope.instruments.push(obj);
        } else if (obj.play) {
          $scope.playables.push(obj);
        }
      }

      if (oldFile) {
        FileRepository.updateFile(id, $scope.file);
        $scope.fileIndex.updated = true;
      }

      lastObj = obj;
    });
  }, 250);
  $scope.$watch('file', fileChanged, true);

  $scope.indexChanged = function () {
    FileRepository.updateIndex(id, $scope.fileIndex);
  };

  var reloadFromRepo = function reloadFromRepo() {
    FileRepository.getFile(id).then(function (file) {
      $timeout(function () {
        var outputFile = {};
        $scope.outputFile = outputFile;
        $scope.file = file.contents;
        $scope.fileIndex = file.index;
        $scope.observer = {};

        $scope.observer.notify = function () {
          $timeout(function () {
            $scope.instruments = [];
            $scope.playables = [];
          });
        };
      });
    });
  };

  reloadFromRepo();
  $scope.$on("stackChanged", function () {
    $scope.resetStack = true;
    fileChanged();
  });
  $scope.$on("$destroy", destroyAll);

  $scope.startPlay = function (playable) {
    playable.playing = playable.play();
  };

  $scope.stopPlay = function (playable) {
    if (!playable.playing) return;
    playable.playing.stop();
    playable.playing = undefined;
  };
}]);
musicShowCaseApp.controller("MainController", ["$q", "$scope", "$timeout", "$uibModal", "$translate", "MusicContext", "FileRepository", "Recipe", "WelcomeMessage", "localforage", "Export", "ErrMessage", function ($q, $scope, $timeout, $uibModal, $translate, MusicContext, FileRepository, Recipe, WelcomeMessage, localforage, Export, ErrMessage) {
  var music;
  $scope.$on("switchProject", function (evt, id) {
    switchProject(id);
  });

  var concat = function concat(a, b) {
    return a.concat(b);
  };

  var switchProject = function switchProject(projectId) {
    var pFilter = [projectId];
    return FileRepository.getFile(projectId).then(function (file) {
      $scope.project = file;
      return (file.index.ref || []).concat([projectId]);
    }).then(function (filter) {
      $scope.projectFilter = filter.concat(['core']);
      if (filter.indexOf('default') !== -1) $scope.projectFilter.push(undefined);
    }).then(updateSearch).catch(function () {
      document.location = "#";
    });
  };

  var updateSearch = fn.debounce(function () {
    if (currentObserver) currentObserver.close();
    currentObserver = FileRepository.search(null, {
      project: $scope.projectFilter,
      type: ['instrument', 'pattern', 'song', 'fx']
    }).observe(function (files) {
      $timeout(function () {
        $scope.filesTotal = files.total;
        $scope.files = files.results;
      });
    });
  }, 100);
  var currentObserver;

  $scope.fileInputClick = function () {
    $timeout(function () {
      $(".choose-file-import-container input[type=file]").click();
    });
  };

  $scope.fileImport = function (files) {
    var readTextFile = function readTextFile(file) {
      return $q(function (resolve, reject) {
        var fileReader = new FileReader();

        fileReader.onload = function (e) {
          resolve(e.target.result);
        };

        fileReader.onerror = function (err) {
          reject(err);
        };

        fileReader.readAsText(file);
      });
    };

    var nextLocation;

    var importFile = function importFile(file) {
      return function (options) {
        return readTextFile(file).then(function (json) {
          return Export.importFile(json).then(function (file) {
            if (options && options.first) {
              if (file.type === 'project') {
                nextLocation = "#/editor/" + file.id;
              } else {
                nextLocation = "#/editor/" + file.project + "/" + file.type + "/" + file.id;
              }
            }
          });
        });
      };
    };

    var p = null;

    for (var i = 0; i < files.length; i++) {
      if (p) {
        p = p.then(importFile(files[i]));
      } else {
        p = importFile(files[i])({
          first: true
        });
      }
    }

    if (p) {
      p.then(function (index) {
        if (nextLocation) document.location = nextLocation;
      }).catch(function (err) {
        var modalIns = $uibModal.open({
          templateUrl: "site/templates/modal/error.html",
          controller: "errorModalCtrl",
          windowClass: 'error',
          resolve: {
            text: function text() {
              return $translate('common.loader_error');
            },
            title: function title() {
              return $translate('common.error_title');
            }
          }
        });
      });
    }
  };

  $scope.changeLanguage = function (langKey) {
    localforage.setItem('lang', langKey);
    $translate.use(langKey);
  };

  localforage.getItem("lang").then(function (currentLanguage) {
    if (currentLanguage) $scope.changeLanguage(currentLanguage);
    $timeout(function () {
      $scope.langLoaded = true;
    });
  });

  $scope.welcome = function () {
    // show welcome modal
    var modalIns = $uibModal.open({
      templateUrl: "site/templates/modal/welcome.html",
      controller: "welcomeModalCtrl",
      resolve: {
        dontshowagain: ["WelcomeMessage", function (WelcomeMessage) {
          return WelcomeMessage.skip();
        }]
      }
    });
  };

  $scope.openRecycleBin = function () {
    // show recycle bin modal
    var modalIns = $uibModal.open({
      templateUrl: "site/templates/modal/recycleBin.html",
      controller: "recycleBinModalCtrl"
    });
  };

  WelcomeMessage.skip().then(function (skip) {
    if (!skip) $scope.welcome();
  });
  $scope.recipe = Recipe.start;

  $scope.activate = function (example) {
    if (example.type === "instrument" || example.type === "song" || example.type === "pattern") {
      document.location = "#/editor/" + $scope.project.index.id + "/" + example.type + "/" + example.id;
    }

    if (example.type === "project") {
      document.location = "#/editor/" + example.id;
    }
  };

  $scope.keywordUpdated = fn.debounce(function () {
    if (currentObserver) currentObserver.close();
    currentObserver = FileRepository.search($scope.searchKeyword, {
      project: $scope.projectFilter,
      type: ['instrument', 'pattern', 'song', 'fx', 'tempo']
    }).observe(function (files) {
      $scope.filesTotal = files.total;
      $scope.files = files.results;
    });
  }, 200);

  $scope.removeProject = function () {
    FileRepository.moveToRecycleBin($scope.project.index.id).then(function () {
      document.location = "#";
    }).catch(function (err) {
      if (err.type && err.type === 'cantremove') {
        ErrMessage('common.error_title', 'common.cantremove_project_error');
      } else {
        throw err;
      }
    });
  };

  $scope.exportProject = function () {
    Export.exportProject($scope.project.index.name, $scope.project.index.id);
  };

  $scope.projectSettings = function () {
    $uibModal.open({
      templateUrl: "site/templates/modal/projectSettings.html",
      controller: "projectSettingsModalCtrl",
      resolve: {
        project: {
          name: $scope.project.index.name,
          ref: $scope.project.index.ref
        },
        buttonText: function buttonText() {
          return 'common.ok';
        }
      }
    }).result.then(function (project) {
      $scope.project.index.name = project.name;
      FileRepository.updateIndex($scope.project.index.id, {
        type: 'project',
        name: project.name,
        ref: project.ref
      }).then(function () {
        switchProject($scope.project.index.id);
      });
    });
  };

  $scope.newProject = function () {
    // open "project settings" modal
    $translate('project.new').then(function (projectName) {
      $uibModal.open({
        templateUrl: "site/templates/modal/projectSettings.html",
        controller: "projectSettingsModalCtrl",
        resolve: {
          project: {
            name: projectName
          },
          buttonText: function buttonText() {
            return 'common.create';
          }
        }
      }).result.then(function (project) {
        FileRepository.createFile({
          type: 'project',
          name: project.name,
          ref: project.ref
        }).then(function (id) {
          document.location = "#/editor/" + id;
        });
      });
    });
  };

  $scope.openProject = function () {
    $uibModal.open({
      templateUrl: "site/templates/modal/openProject.html",
      controller: "openProjectModalCtrl"
    }).result.then(function (id) {
      var moreImportant = function moreImportant(file1, file2) {
        if (file1.type !== file2.type) {
          if (file1.type === 'song') return file1;
          if (file2.type === 'song') return file2;
          if (file1.type === 'pattern') return file1;
          if (file2.type === 'pattern') return file2;
        } else {
          return (file1.ref || []).length > (file2.ref || []).length ? file1 : file2;
        }

        return file2;
      }; // switch to main object


      return FileRepository.getProjectFiles(id).then(function (files) {
        if (files.length > 0) {
          var better = files.reduce(moreImportant, files[0]);

          if (better && better.type !== 'project') {
            document.location = "#/editor/" + id + "/" + better.type + "/" + better.id;
          } else {
            document.location = "#/editor/" + id;
          }
        } else {
          document.location = "#/editor/" + id;
        }
      });
    });
  };

  $scope.newInstrument = function () {
    $translate("common.new_instrument").then(function (name) {
      return FileRepository.createFile({
        type: "instrument",
        name: name,
        project: $scope.project.index.id
      });
    }).then(function (id) {
      document.location = "#/editor/" + $scope.project.index.id + "/instrument/" + id;
    }).catch(function (err) {
      debugger;
    });
  };

  $scope.newSong = function () {
    $translate("common.new_song").then(function (name) {
      return FileRepository.createFile({
        type: "song",
        name: name,
        project: $scope.project.index.id
      });
    }).then(function (id) {
      document.location = "#/editor/" + $scope.project.index.id + "/song/" + id;
    });
  };

  $scope.newPattern = function () {
    $translate("common.new_pattern").then(function (name) {
      return FileRepository.createFile({
        type: "pattern",
        name: name,
        project: $scope.project.index.id
      });
    }).then(function (id) {
      document.location = "#/editor/" + $scope.project.index.id + "/pattern/" + id;
    });
  };

  $scope.about = function () {
    $uibModal.open({
      templateUrl: "site/templates/modal/about.html",
      controller: "infoModalCtrl"
    });
  };

  $scope.help = function () {
    $uibModal.open({
      templateUrl: "site/templates/modal/help.html",
      controller: "infoModalCtrl"
    });
  };

  $scope.todo = function () {
    $uibModal.open({
      templateUrl: "todoModal.html",
      controller: "todoModalCtrl"
    });
  };
}]);
musicShowCaseApp.controller("todoModalCtrl", ["$scope", "$uibModalInstance", function ($scope, $uibModalInstance) {
  $scope.dismiss = function () {
    $uibModalInstance.dismiss();
  };
}]);
;

var musicShowCaseApp = angular.module("MusicShowCaseApp");
musicShowCaseApp.controller("errorModalCtrl", ["$scope", "$uibModalInstance", "text", "title", function ($scope, $uibModalInstance, text, title) {
  $scope.text = text;
  $scope.title = title;

  $scope.dismiss = function () {
    $uibModalInstance.dismiss();
  };
}]);
;

var musicShowCaseApp = angular.module("MusicShowCaseApp");
musicShowCaseApp.controller("infoModalCtrl", ["$scope", "$uibModalInstance", function ($scope, $uibModalInstance) {
  $scope.dismiss = function () {
    $uibModalInstance.dismiss();
  };
}]);
;

var musicShowCaseApp = angular.module("MusicShowCaseApp");
musicShowCaseApp.controller("midiSettingsModalCtrl", ["$scope", "$q", "$timeout", "$uibModalInstance", "Midi", function ($scope, $q, $timeout, $uibModalInstance, Midi) {
  Midi.getInputs().then(function (inputs) {
    $scope.inputs = inputs;
  });
  Midi.getConfig().then(function (config) {
    $scope.config = config;
  });

  $scope.updateConfig = function () {
    Midi.setConfig($scope.config);
  };

  $scope.done = function () {
    $uibModalInstance.close();
  };
}]);
;

var musicShowCaseApp = angular.module("MusicShowCaseApp");
musicShowCaseApp.controller("openProjectModalCtrl", ["$q", "$scope", "$uibModalInstance", 'FileRepository', function ($q, $scope, $uibModalInstance, FileRepository) {
  var currentObserver;

  var immediateUpdateSearch = function immediateUpdateSearch() {
    if (currentObserver) currentObserver.close();
    currentObserver = FileRepository.search($scope.searchKeyword, {
      type: ['project']
    }).observe(function (files) {
      $scope.filesTotal = files.total;
      $scope.files = files.results;
    });
  };

  $scope.updateSearch = fn.debounce(immediateUpdateSearch, 250);

  $scope.cancel = function () {
    $uibModalInstance.dismiss();
  };

  $scope.select = function (projectId) {
    $scope.selected = projectId;
  };

  $scope.open = function (projectId) {
    $uibModalInstance.close(projectId);
  };

  immediateUpdateSearch();
}]);
;

var musicShowCaseApp = angular.module("MusicShowCaseApp");
musicShowCaseApp.controller("projectSettingsModalCtrl", ["$q", "$scope", "$uibModalInstance", "FileRepository", "project", "buttonText", function ($q, $scope, $uibModalInstance, FileRepository, project, buttonText) {
  var currentObserver;

  var immediateUpdateSearch = function immediateUpdateSearch() {
    if (currentObserver) currentObserver.close();
    currentObserver = FileRepository.search($scope.searchKeyword, {
      type: ['project']
    }).observe(function (files) {
      $scope.filesTotal = files.total;
      $scope.files = files.results;
    });
  };

  $scope.project = project;
  $scope.buttonText = buttonText;

  var getIndex = function getIndex(id) {
    return FileRepository.getFile(id).then(function (file) {
      return file.index;
    });
  };

  $scope.refs = [];
  $q.all(($scope.project.ref || []).map(getIndex)).then(function (refs) {
    $scope.refs = refs;
  });
  $scope.updateSearch = fn.debounce(immediateUpdateSearch, 250);

  $scope.cancel = function () {
    $uibModalInstance.dismiss();
  };

  $scope.done = function () {
    $scope.project.ref = $scope.refs.map(getId);
    $uibModalInstance.close($scope.project);
  };

  var getId = function getId(x) {
    return x.id;
  };

  $scope.remove = function (file) {
    $scope.refs = $scope.refs.filter(function (f) {
      return f.id !== file.id;
    });
  };

  $scope.add = function (file) {
    if ($scope.refs.map(getId).indexOf(file.id) === -1) {
      $scope.refs.push(file);
    }
  };

  immediateUpdateSearch();
}]);
;

var musicShowCaseApp = angular.module("MusicShowCaseApp");
musicShowCaseApp.controller("recycleBinModalCtrl", ["$scope", "$timeout", "$uibModalInstance", "FileRepository", function ($scope, $timeout, $uibModalInstance, FileRepository) {
  $scope.dismiss = function () {
    $uibModalInstance.dismiss();
  };

  var immediateUpdateSearch = function immediateUpdateSearch() {
    FileRepository.searchRecycled($scope.searchKeyword, {
      limit: 10
    }).then(function (results) {
      $timeout(function () {
        $scope.files = results.results;
        $scope.filesTotal = results.total;
      });
    });
  };

  $scope.updateSearch = fn.debounce(immediateUpdateSearch, 250);

  $scope.restoreFromRecycleBin = function (file) {
    FileRepository.restoreFromRecycleBin(file.id).then(immediateUpdateSearch);
  };

  immediateUpdateSearch();
}]);
;

var musicShowCaseApp = angular.module("MusicShowCaseApp");
musicShowCaseApp.controller("welcomeModalCtrl", ["$q", "$scope", "$uibModalInstance", "Recipe", "WelcomeMessage", "dontshowagain", function ($q, $scope, $uibModalInstance, Recipe, WelcomeMessage, dontshowagain) {
  $scope.dontshowagain = dontshowagain;
  var skipUpdated = $q.when(null);

  $scope.updateSkip = function () {
    skipUpdated = WelcomeMessage.setSkip($scope.dontshowagain);
  };

  $scope.dismiss = function () {
    skipUpdated.then(function () {
      $uibModalInstance.dismiss();
    });
  };

  $scope.tutorial = function () {
    skipUpdated.then(function () {
      $uibModalInstance.dismiss();
      Recipe.start('intro');
    });
  };
}]);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNpdGUvbGliL2FuZ3VsYXIubWluLmpzIiwic2l0ZS9saWIvY29kZW1pcnJvci5qcyIsInNpdGUvbGliL2RzcC5qcyIsInNpdGUvbGliL0V2ZW50RW1pdHRlci5taW4uanMiLCJzaXRlL2xpYi9mbi5qcyIsInNpdGUvbGliL2pxdWVyeS0xLjExLjIubWluLmpzIiwic2l0ZS9saWIvbG9jYWxmb3JhZ2UubWluLmpzIiwic2l0ZS9saWIvc2hhLmpzIiwic2l0ZS9saWIvYW5ndWxhci9hbmd1bGFyLWNvb2tpZXMubWluLmpzIiwic2l0ZS9saWIvYW5ndWxhci9hbmd1bGFyLXJvdXRlLmpzIiwic2l0ZS9saWIvYW5ndWxhci9hbmd1bGFyLXRyYW5zbGF0ZS5taW4uanMiLCJzaXRlL2xpYi9hbmd1bGFyL25nRHJhZ2dhYmxlLmpzIiwic2l0ZS9saWIvYW5ndWxhci91aS1ib290c3RyYXAtY3VzdG9tLXRwbHMtMS4wLjMubWluLmpzIiwic2l0ZS9saWIvYW5ndWxhci91aS1ib290c3RyYXAtdHBscy0xLjAuMy5taW4uanMiLCJzaXRlL2xpYi9hbmd1bGFyL3VpLWNvZGVtaXJyb3IuanMiLCJzaXRlL2xpYi9qcXVlcnkvYm9vdHN0cmFwLm1pbi5qcyIsInNpdGUvbGliL2NvZGVtaXJyb3IvbW9kZS9qYXZhc2NyaXB0LmpzIiwic2l0ZS9hcHAuanMiLCJzaXRlL2xhbmcvZW4uanMiLCJzaXRlL2xhbmcvZXMuanMiLCJzaXRlL2xhbmdTZXR0aW5ncy5qcyIsInNpdGUvcm91dGVzLmpzIiwic2l0ZS9kaXJlY3RpdmVzLmpzIiwic2l0ZS9kaXJlY3RpdmVzL2Z1bmN0aW9uR3JhcGguanMiLCJzaXRlL2RpcmVjdGl2ZXMva2V5Ym9hcmQuanMiLCJzaXRlL2RpcmVjdGl2ZXMvbXVzaWNFdmVudEVkaXRvci5qcyIsInNpdGUvZGlyZWN0aXZlcy9uZ2ZEcm9wLmpzIiwic2l0ZS9kaXJlY3RpdmVzL25nZkxvYWRlci5qcyIsInNpdGUvZGlyZWN0aXZlcy9wYXR0ZXJuVHJhY2tDb21wYWN0Vmlldy5qcyIsInNpdGUvZGlyZWN0aXZlcy9wbGF5aW5nTGluZS5qcyIsInNpdGUvZGlyZWN0aXZlcy9yZWNpcGVCbGluay5qcyIsInNpdGUvZGlyZWN0aXZlcy9yZWNpcGVUb29sdGlwLmpzIiwic2l0ZS9kaXJlY3RpdmVzL3JlY2lwZVdpemFyZC5qcyIsInNpdGUvZGlyZWN0aXZlcy9yZWN5Y2xlQmluQ29tcGFjdFZpZXcuanMiLCJzaXRlL2RpcmVjdGl2ZXMvdHlwZUljb24uanMiLCJzaXRlL3NlcnZpY2VzLmpzIiwic2l0ZS9zZXJ2aWNlcy9lcnJNZXNzYWdlLmpzIiwic2l0ZS9zZXJ2aWNlcy9leHBvcnQuanMiLCJzaXRlL3NlcnZpY2VzL2luZGV4LmpzIiwic2l0ZS9zZXJ2aWNlcy9taWRpLmpzIiwic2l0ZS9zZXJ2aWNlcy9yZWNpcGUuanMiLCJzaXRlL3NlcnZpY2VzL3N5bmMuanMiLCJzaXRlL3NlcnZpY2VzL3RyYW5zbGF0aW9uc0xvYWRlci5qcyIsInNpdGUvc2VydmljZXMvdHlwZVNlcnZpY2UuanMiLCJzaXRlL3NlcnZpY2VzL3dlbGNvbWVNZXNzYWdlLmpzIiwic2l0ZS9zZXJ2aWNlcy9fbG9jYWxmb3JhZ2UuanMiLCJzaXRlL2NvbnRyb2xsZXJzLmpzIiwic2l0ZS9jb250cm9sbGVycy9lcnJvck1vZGFsQ3RybC5qcyIsInNpdGUvY29udHJvbGxlcnMvaW5mb01vZGFsQ29udHJvbGxlci5qcyIsInNpdGUvY29udHJvbGxlcnMvbWlkaVNldHRpbmdzTW9kYWxDdHJsLmpzIiwic2l0ZS9jb250cm9sbGVycy9vcGVuUHJvamVjdE1vZGFsQ3RybC5qcyIsInNpdGUvY29udHJvbGxlcnMvcHJvamVjdFNldHRpbmdzTW9kYWxDdHJsLmpzIiwic2l0ZS9jb250cm9sbGVycy9yZWN5Y2xlQmluTW9kYWxDdHJsLmpzIiwic2l0ZS9jb250cm9sbGVycy93ZWxjb21lTW9kYWxDdHJsLmpzIl0sIm5hbWVzIjpbIm11c2ljU2hvd0Nhc2VBcHAiLCJhbmd1bGFyIiwibW9kdWxlIiwiY29uc3RhbnQiLCJNVVNJQyIsImxvY2FsZm9yYWdlIiwiZW5UcmFuc2xhdGlvbnMiLCJtaWRpIiwic2V0dGluZ3MiLCJpbnB1dHMiLCJjb25uZWN0ZWQiLCJkaXNjb25uZWN0ZWQiLCJldmVudHMiLCJvY3RhdmUiLCJ0cmFuc3Bvc2UiLCJvcGVuX3Byb2plY3QiLCJwMSIsInRpdGxlIiwiYXJyYXlfZWRpdG9yIiwidG9vbHRpcCIsInJlbW92ZV9pdGVtIiwiYWRkX2l0ZW0iLCJlZGl0X2l0ZW0iLCJpbmRleCIsIm5vdF9pbXBsZW1lbnRlZCIsImZpbHRlciIsInR5cGUiLCJpbnN0cnVtZW50IiwicGF0dGVybiIsInNvbmciLCJmeCIsInR5cGVfcDEiLCJ0eXBlX3AyIiwicHJvamVjdCIsImJhc2ljX2luZm8iLCJyZWZlcmVuY2VzIiwibWVudSIsIm5ld19pbnN0cnVtZW50IiwibmV3X3BhdHRlcm4iLCJuZXdfc29uZyIsIm5ld19wcm9qZWN0IiwiZmlsZV9pbXBvcnQiLCJ0b29scyIsInRvb2xzX3ByZWZlcmVuY2VzIiwiaGVscF92aWV3X2hlbHAiLCJoZWxwX3JlY2lwZXMiLCJoZWxwX3JlY2lwZXNfaW50cm8iLCJoZWxwX3JlY2lwZXNfaG93dG9fY3JlYXRlX3NvbmciLCJoZWxwX3JlY2lwZXNfaG93dG9fY3JlYXRlX2luc3RydW1lbnQiLCJoZWxwX2NvbnRleHR1YWxfaGVscCIsImhlbHBfd2VsY29tZSIsImhlbHBfYWJvdXQiLCJyZWN5Y2xlX2JpbiIsInByZWZlcmVuY2VzIiwiaGVscCIsInByb2plY3Rfc2V0dGluZ3MiLCJwcm9qZWN0X3JlbW92ZV9wcm9qZWN0IiwicHJvamVjdF9leHBvcnRfcHJvamVjdCIsImNvbnRleHR1YWxfaGVscCIsImVuYWJsZSIsImRpc2FibGUiLCJyZWN5Y2xlIiwicDIiLCJwMyIsImNvbXBhY3RfdGl0bGUiLCJjb21wYWN0X2hpbnRfcmVzdG9yZSIsImNvbXBhY3RfaGludF9vcGVuIiwiRU1QVFkiLCJ3ZWxjb21lIiwibmV2ZXJzaG93IiwiYWJvdXQiLCJhdXRob3JzIiwiaV9hbSIsImNyZWRpdCIsIm1vaGF5b25hbyIsImhpZ3VtYSIsImtyaXN0b3BvbG91cyIsImNvbnRyaWJ1dGUiLCJjb250YWN0X21lIiwiY29tbW9uIiwieWVzIiwibm8iLCJvayIsImRpc21pc3MiLCJjYW5jZWwiLCJjcmVhdGUiLCJvcGVuIiwibmFtZSIsImxhbmd1YWdlIiwibG9hZGVyX2Vycm9yIiwiY2FudHJlbW92ZV9lcnJvciIsImNhbnRyZW1vdmVfcHJvamVjdF9lcnJvciIsImVycm9yX3RpdGxlIiwiSEVMUCIsIm1vcmUiLCJyZW1vdmUiLCJyZXNldCIsInBsYXkiLCJwYXVzZSIsInN0b3AiLCJyZWNvcmQiLCJicG0iLCJicG1fbGMiLCJhZGQiLCJwbGF5aW5nX3NwZWVkIiwibW9kdWxhdGlvbiIsIkZMT1ciLCJSRUNJUEVTIiwicDQiLCJwNSIsInA2IiwicDciLCJwOCIsInJlY2lwZXMiLCJDT05URVhUVUFMX0hFTFAiLCJzdGFjayIsImRyb3BfZWxlbWVudHNfaGVyZSIsInlvdV9jYW5fZHJvcF9uZXdfZWZmZWN0c19oZXJlIiwidXAiLCJkb3duIiwiZXhwYW5kIiwiZWRpdG9yIiwia2V5Ym9hcmRfaW5zdHJ1Y3Rpb25zIiwidGVzdF9pbnN0cnVtZW50X2hlcmUiLCJ0eXBlX2hlcmVfaW5zdHJ1bWVudCIsInRyYWNrX211dGVkIiwidHJhY2tfc29sbyIsIm1lYXN1cmVfYmVhdHMiLCJhbW91bnRfYmVhdHMiLCJtZWFzdXJlX2NvdW50Iiwiem9vbV9sZXZlbCIsInRvdGFsX21lYXN1cmVzIiwidHJhY2tzIiwiZHJvcF9pbnN0cnVtZW50IiwiY2hhbmdlX25hbWUiLCJyZW1vdmVfdHJhY2siLCJjb21wYWN0X3ZpZXdfcDEiLCJjb21wYWN0X3ZpZXdfcDIiLCJkcm9wX3pvbmUiLCJlZGl0b3Jfbm90ZXNfcDEiLCJlZGl0b3Jfbm90ZXNfcDIiLCJlZGl0b3Jfbm90ZXNfcDMiLCJlZGl0b3Jfbm90ZXNfcDQiLCJhZGRfdHJhY2siLCJub3RlX2V2ZW50X3AxIiwibm90ZV9ldmVudF9wMiIsIm5vdGVfZXZlbnRfcDMiLCJtdXRlZCIsInNvbG8iLCJpbnN0cnVtZW50X2VkaXQiLCJkcm9wX3BhdHRlcm4iLCJkb3dubG9hZCIsInJlbW92ZV9ibG9jayIsImVkaXRfYmxvY2siLCJCVVRUT05fTEFOR19FTiIsIkJVVFRPTl9MQU5HX0VTIiwiZXNUcmFuc2xhdGlvbnMiLCJjb25maWciLCIkdHJhbnNsYXRlUHJvdmlkZXIiLCJnZXRCcm93c2VyTGFuZ3VhZ2UiLCJyZXNvbHZlQ2xpZW50TG9jYWxlIiwibGFuZ0NvZGUiLCJzcGxpdCIsInRyYW5zbGF0aW9ucyIsInByZWZlcnJlZExhbmd1YWdlIiwiZmFsbGJhY2tMYW5ndWFnZSIsInVzZVNhbml0aXplVmFsdWVTdHJhdGVneSIsInVzZUxvYWRlciIsIiRyb3V0ZVByb3ZpZGVyIiwiJGxvY2F0aW9uUHJvdmlkZXIiLCJ3aGVuIiwidGVtcGxhdGVVcmwiLCJjb250cm9sbGVyIiwiZGlyZWN0aXZlIiwiJHRpbWVvdXQiLCIkaHR0cCIsIlR5cGVTZXJ2aWNlIiwiUmVjaXBlIiwiTXVzaWNPYmplY3RGYWN0b3J5Iiwic2NvcGUiLCJmaWxlIiwibGluayIsImVsZW1lbnQiLCJhdHRycyIsInR5cGVzIiwiZ2V0VHlwZXMiLCJvdXRwdXQiLCJwYXJhbWV0ZXJzIiwicmVjaXBlIiwic3RhcnQiLCJ0ZXJtc2NoYW5nZWQiLCIkYnJvYWRjYXN0IiwiZl90Iiwic3RyIiwic3RhdGUiLCJyZXQiLCJldmFsIiwiZXJyb3IiLCJlIiwidG9TdHJpbmciLCJvc2NUZXJtc1VwZGF0ZUZyb21XYXZlRm9ybSIsImZuIiwiZGVib3VuY2UiLCJ3YXZlZm9ybSIsInRlcm1zIiwicmVzb2x1dGlvbiIsImNvdW50IiwidmFsdWVzIiwiQXJyYXkiLCJpIiwiaXNOYU4iLCJmdCIsIkRGVCIsImxlbmd0aCIsImZvcndhcmQiLCJjb3MiLCJyZWFsIiwic2luIiwiaW1hZyIsImYiLCJ0IiwiYSIsImIiLCJNYXRoIiwiUEkiLCJtYXh2YWx1ZSIsInZhbHVlIiwiaW52YWxpZFdhdmVmb3JtIiwiZXJyIiwib3NjVGVybXNVcGRhdGUiLCJzZXJpZSIsImVyclZhciIsIm4iLCJyYW5nZSIsImluaXQiLCJlbmQiLCJ4IiwicHVzaCIsInRydXRoeSIsInVwZGF0ZU9iamVjdCIsIm5ld1ZhbHVlIiwiY2hhbmdlZCIsIm91dHB1dE9ic2VydmVyIiwiJG9uIiwiZGVzdHJveSIsInVwZGF0ZVRlbXBsYXRlIiwib2JzZXJ2ZU91dHB1dCIsInRoZW4iLCJzZWxlY3RlZFR5cGUiLCJnZXRUeXBlIiwiayIsIl9kZWZhdWx0IiwiZGF0YSIsIm1hcCIsInBhcmFtZXRlciIsImNvbXBvbmVudHMiLCJtb2R1bGF0aW9ucyIsImNvbXBvbmVudCIsImFycmF5IiwiY2hhbmdlVHlwZSIsIiR3YXRjaCIsImZvckVhY2giLCIkZW1pdCIsInN1Ym9iamVjdHMiLCJtYXhFbGVtZW50cyIsIm1heGVsZW1lbnRzIiwicGFyc2VJbnQiLCJJbmZpbml0eSIsImN1cnJlbnRUYWIiLCJhZGRPYmplY3QiLCJuZXdPYmplY3QiLCJzZXRDdXJyZW50VGFiIiwiaWR4IiwicmVtb3ZlT2JqZWN0Iiwib2JqZWN0IiwibyIsImluaXRGaWxlIiwiZHJvcHpvbmVFeHRyYU5hbWUiLCJzd2FwIiwiaWR4MSIsImlkeDIiLCJ0bXAiLCJkZWZhdWx0U3RhY2tBcHBlbmQiLCJjb25jYXQiLCJvbkRyb3BDb21wbGV0ZSIsImV2ZW50Iiwic3RhY2tBcHBlbmQiLCJvbGRDb2xsZWN0aW9uIiwibmV3RmlsZSIsInRlbXBsYXRlIiwidGVybXNDaGFuZ2VkIiwic2NhbGUiLCJzZW1pdG9uZVRvTm90ZSIsIm5vdGVUb1NlbWl0b25lIiwibm90YXRpb243IiwibmV3VmFsIiwiVXRpbHMiLCJTY2FsZSIsImRlbHRhcyIsImluaXRUb25lIiwibm90ZXMiLCJkIiwic2VtaXRvbmUiLCJ0b25lIiwiYWx0IiwiJHBhcnNlIiwicmVzdHJpY3QiLCJzY3JvbGxWYXJHZXR0ZXIiLCJuZ1Njcm9sbFRvcCIsInNjcm9sbFZhclNldHRlciIsImFzc2lnbiIsIiQiLCJzY3JvbGxUb3AiLCJvbiIsIm5nU2Nyb2xsTGVmdCIsInNjcm9sbExlZnQiLCJyZXBsYWNlIiwidDAiLCJwYXJzZUZsb2F0IiwidGYiLCJzYW1wbGVzIiwic2NhbGV5IiwiJHBhcmVudCIsIl9mIiwicmVkcmF3IiwiY2FudmFzIiwiY29udGV4dCIsImdldENvbnRleHQiLCJ3aWR0aCIsImNsaWVudFdpZHRoIiwiaGVpZ2h0IiwiY2xpZW50SGVpZ2h0IiwiZHJhd0xpbmUiLCJ4MCIsInkwIiwieDEiLCJ5MSIsImNvbG9yIiwic2F2ZSIsImJlZ2luUGF0aCIsIm1vdmVUbyIsImxpbmVUbyIsInN0cm9rZVN0eWxlIiwibGluZVdpZHRoIiwic3Ryb2tlIiwicmVzdG9yZSIsImRyYXdGdW5jIiwidHJhbnNsYXRlIiwibGluZUpvaW4iLCIkdWliTW9kYWwiLCJNaWRpIiwiTXVzaWNDb250ZXh0Iiwib25NSURJTWVzc2FnZSIsImNvbW1hbmQiLCJ2ZWxvY2l0eSIsIm9jdGF2ZU51bWJlciIsImZsb29yIiwib2N0Iiwib2N0YXZlcyIsInVwZGF0ZSIsImxpc3RlbmVyIiwicmVnaXN0ZXJFdmVudExpc3RlbmVyIiwidXBkYXRlTWlkaVN0YXR1cyIsImdldFN0YXR1cyIsIm1pZGlDb25uZWN0ZWQiLCJrZXlDb2RlVG9Ob3RlIiwic3RvcEFsbCIsIm1pZGlTZXR1cCIsIm1vZGFsSW5zIiwicmVzdWx0IiwiYmFzZSIsIm1vdXNlIiwia2V5Iiwibm90ZSIsInVuZGVmaW5lZCIsImdlc3R1cmUiLCJyZXN1bWVBdWRpbyIsIm1vdXNlT2ZmIiwibW91c2VMZWF2ZSIsIm1vdXNlRW50ZXIiLCJrZXlEb3duSGFuZGxlciIsImRvY3VtZW50IiwiYWN0aXZlRWxlbWVudCIsInRhZ05hbWUiLCJ0b0xvd2VyQ2FzZSIsImtleUNvZGUiLCJub3RlTmFtZSIsIm5vdGVUb05vdGVOdW0iLCIkZGlnZXN0Iiwia2V5VXBIYW5kbGVyIiwiYmluZCIsInBpYW5vRmlyc3RSb3ciLCJmaW5kIiwicGlhbm9TZWNvbmRSb3ciLCJ1bmJpbmQiLCJUSUNLU19QRVJfQkVBVCIsIlBhdHRlcm4iLCJ0cmFjayIsInpvb21MZXZlbCIsImJlYXRXaWR0aCIsIm1lYXN1cmUiLCJtZWFzdXJlQ291bnQiLCJkZWZhdWx0TCIsImNsZWFyU2hhZG93Iiwic2hhZG93RXZ0IiwiZGVmYXVsdE1vdXNlTGVhdmUiLCJkZWZhdWx0TW91c2VNb3ZlIiwiY2xpcERpc3RhbmNlIiwidGFyZ2V0IiwiY2xhc3NMaXN0IiwiY29udGFpbnMiLCJ1cHBlckxpbWl0Iiwib2Zmc2V0WSIsImwiLCJzIiwiZXhhY3RQb3NpdGlvbiIsIm9mZnNldFgiLCJjbGlwUyIsImZpbmRDbGlwUyIsImFicyIsImN1dEV2ZW50IiwicmFpc2VFdmVudENoYW5nZWQiLCJvbGRldnQiLCJldnQiLCJub3RlNyIsImlzQXJyYXkiLCJ1cGRhdGVHcmlkIiwibWFpbkdyaWRTdHlsZSIsImFkZE5ld0V2ZW50IiwibmV3RXZ0IiwiY29weSIsImNvbGxpc2lvbiIsInNlbGVjdGVkIiwicmFpc2UiLCJtb3VzZU1vdmUiLCJtb3ZlRXZlbnQiLCJtb3VzZU1vdmVFdmVudCIsIm1vdmVFdmVudEZyb21FdmVudCIsImNhbmNlbE1vdmUiLCJtb3VzZVVwUmVzaXplRXZlbnQiLCJtb3VzZVVwRXZlbnQiLCJtb3VzZVVwIiwibW91c2VNb3ZlUmVzaXplRXZlbnQiLCJzaGFkb3dNb3VzZU1vdmUiLCJkZWx0YVMiLCJhZGRGcm9tU2hhZG93IiwibWF4IiwiYzEiLCJjMiIsInByZXZlbnRDb2xsaXNpb24iLCJzYXZlZEV2dCIsImFwcGx5IiwiYXJndW1lbnRzIiwib2xkTiIsImRyYWdldnQiLCJtb3VzZURvd24iLCJldmVudFNwbGl0IiwidGlja3MiLCJvcmlnaW5hbEwiLCJldmVudExlZnRTcGxpdCIsImV2ZW50Q2VudGVyU3BsaXQiLCJldmVudFJpZ2h0U3BsaXQiLCJtb3VzZURibENsaWNrRXZlbnQiLCJlbGVtZW50V2lkdGgiLCJtb3VzZURvd25FdmVudCIsInByZXZlbnREZWZhdWx0IiwiYmx1ciIsIl9jYW5jZWxNb3ZlIiwibW91c2VEb3duUmVzaXplRXZlbnQiLCJjbGlwTCIsImZpbmRDbGlwTCIsImV4YWN0TCIsInJlZnMiLCJuZ2ZEcm9wR2V0dGVyIiwibmdmRHJvcCIsImFsbG93RHJhZyIsImRhdGFUcmFuc2ZlciIsImRyb3BFZmZlY3QiLCJvbkRyb3AiLCJmaWxlcyIsIndpbmRvdyIsImFkZEV2ZW50TGlzdGVuZXIiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwibmdmTG9hZGVyR2V0dGVyIiwibmdmTG9hZGVyIiwib25DaGFuZ2UiLCJ2YWwiLCJvZmYiLCJtb3ZlZCIsInBhcmVudEVsZW1lbnQiLCJ0aW1lVG9UaWNrcyIsInBsYXlpbmciLCJnZXRCcG0iLCJnZXRab29tTGV2ZWwiLCJnZXRCZWF0V2lkdGgiLCJ0aWNrc1RvUFgiLCJjYWxsYmFjayIsInBlcmZvcm1hbmNlIiwibm93IiwiZGlzcGxhY2VtZW50IiwiY3NzIiwicmVxdWVzdEFuaW1hdGlvbkZyYW1lIiwicGxheWluZ0xpbmUiLCJyZXF1ZXN0SWQiLCJfdGltZVRvVGlja3MiLCJfdDAiLCJiYXNlVGlja3MiLCJjYW5jZWxBbmltYXRpb25GcmFtZSIsInJlY2lwZUJsaW5rR2V0dGVyIiwicmVjaXBlQmxpbmsiLCJibGlua0VsZW1lbnRJZCIsImJsaW5rIiwiYWRkQ2xhc3MiLCJub2JsaW5rIiwicmVtb3ZlQ2xhc3MiLCJyZWdpc3RlckV2ZW50IiwiZ2V0QmxpbmtzIiwiaW5kZXhPZiIsImFyZ3MiLCJydElkR2V0dGVyIiwicnRJZCIsInRvb2x0aXBFbGVtZW50SWQiLCJ0b29sdGlwRW5hYmxlZCIsIm9uQ2xpY2siLCJzdG9wSW1tZWRpYXRlUHJvcGFnYXRpb24iLCJ3aW5kb3dXaWR0aCIsImRvY3VtZW50RWxlbWVudCIsImlubmVyV2lkdGgiLCJlbCIsIm9mZnNldCIsImdldEJvdW5kaW5nQ2xpZW50UmVjdCIsImxlZnQiLCJjYXBSaWdodCIsInRleHQiLCJGaWxlUmVwb3NpdG9yeSIsIkVyck1lc3NhZ2UiLCJvYnNlcnZlciIsIm9ic2VydmVSZWN5Y2xlZCIsInNlYXJjaFJlY3ljbGVkIiwibGltaXQiLCJyZXN1bHRzIiwic2xpY2UiLCJvcGVuUmVjeWNsZUJpbiIsInJlc3RvcmVGcm9tUmVjeWNsZUJpbiIsImlkIiwibG9jYXRpb24iLCJtb3ZlVG9SZWN5Y2xlQmluIiwiY2F0Y2giLCJpY29uVHlwZU5hbWUiLCJ0eXBlSWNvbiIsImZhY3RvcnkiLCIkcSIsInBydW5lV3JhcHBlciIsImZpbGVPdXRwdXRNYXAiLCJXZWFrTWFwIiwib3B0aW9ucyIsIm5leHRJZCIsIl9sYXN0X3R5cGUiLCJfX19jYWNoZSIsIm1vbml0b3IiLCJnZXRDb25zdHJ1Y3RvciIsImRlc2NyaXB0b3IiLCJjaGFubmVsIiwid3JhcHBlZCIsIm11c2ljIiwiYnVpbGRDb21wb25lbnRzIiwiY29tcG9uZW50TmFtZSIsImNyZWF0ZVBhcmFtZXRyaWMiLCJvYmoiLCJhbGwiLCJvYmpzIiwibGFzdF90eXBlIiwiX19jYWNoZSIsInNldCIsImNvbnN0cnVjdG9yIiwiaGFzIiwiZ2V0Iiwibm9pZCIsImNyZWF0ZVBhcmFtZXRyaWNGcm9tU3RhY2siLCJnZXRPYmplY3QiLCJuZXdBcnJheSIsImRhdGFMaW5rIiwibm90aWZ5Q2hhbmdlRm9yIiwiZWUiLCJlbWl0IiwiZGVzdHJveUFsbCIsImJhc2VzIiwicHJ1bmUiLCJmY24iLCJzZnhCYXNlIiwicnVuRmNuIiwiRXZlbnRFbWl0dGVyIiwicmVtb3ZlTGlzdGVuZXIiLCJzZXJ2aWNlIiwiUmVjb3JkYWJsZSIsInBsYXlhYmxlIiwiX3BsYXlhYmxlIiwiX211c2ljIiwiX25hbWUiLCJwcm90b3R5cGUiLCJyZWNvcmRpbmciLCJyZWNvcmRGaWxlTmFtZSIsIkZ1bmN0aW9uU2VxIiwicHJlY2lzZVRpbWVvdXQiLCJleHBvcnRXQVYiLCJibG9iIiwiY3JlYXRlRWxlbWVudCIsImJvZHkiLCJhcHBlbmRDaGlsZCIsInN0eWxlIiwidXJsIiwiVVJMIiwiY3JlYXRlT2JqZWN0VVJMIiwiaHJlZiIsImNsaWNrIiwicmV2b2tlT2JqZWN0VVJMIiwiZHVyYXRpb24iLCJDb250ZXh0IiwicmVzdW1lIiwicnVuIiwiY29kZSIsImN1cnJlbnRWZXJzaW9uIiwidW5kbyIsInJlZG8iLCJyZWdpc3RlclZlcnNpb24iLCJzY2hlZHVsZSIsIm5vdGVzZXEiLCJldmVudFByZXByb2Nlc3NvciIsIm9uU3RvcCIsImN0eCIsInNvcnQiLCJlMSIsImUyIiwic2NhbGVkRXZlbnRzIiwidGMiLCJwYWRkaW5nVG8iLCJwdXNoQ2FsbGJhY2siLCJ0b3RhbEJlYXRzIiwiTm90ZVNlcXVlbmNlIiwicGF0dGVybkNvbXBvc2UiLCJpbnN0cnVtZW50cyIsImlzVGVtcG9UcmFjayIsInRlbXBvIiwiZ2V0RXZlbnRzIiwiYnlTdGFydCIsInNvbmdDdHgiLCJ0aW1lIiwidGlja3NUb1RpbWUiLCJ0aWNrc19wZXJfYmVhdCIsImJwbV9ldmVudHMiLCJyZWR1Y2UiLCJtYWtlUGxheWFibGUiLCJub3RlU2VxdWVuY2UiLCJjb250ZXh0cyIsImhpZ2hlciIsImNvbXB1dGVNZWFzdXJlQ291bnQiLCJlbmRUaW1lIiwibWVhc3VyZUxlbmd0aCIsImdldE11dGVkU3RhdGUiLCJzb21lU29sbyIsInNvbWUiLCJfbm90Iiwic2VsZiIsIm5lYXJlc3QiLCJhbGxFdmVudHMiLCJhbGxPdGhlckV2ZW50cyIsInRyIiwiY2xpcHMiLCJtZWFzdXJlVGlja3MiLCJtdXNpY09iamVjdEZhY3RvcnkiLCJ0cmFja0NvbnRyb2wiLCJjcmVhdGVkIiwibG9hZCIsInRyYWNrTm8iLCJfaWQiLCJnYWluIiwiZ2V0RmlsZSIsImNvbnRlbnRzIiwiZGlzcG9zZSIsIm11dGUiLCJtdXRlU3RhdGUiLCJIaXN0b3JpYWwiLCJJbmRleCIsImNyZWF0ZWRGaWxlc0luZGV4IiwiY3JlYXRlZEZpbGVzIiwiYnVpbHRJbnMiLCJsb2FkQnVpbHRJbiIsInVyaSIsInIiLCJvYmplY3RJZCIsInJlZiIsImJ1aWx0SW4iLCJjcmVhdGVEZWZhdWx0IiwiY29udGVudCIsIm5vRXhwb3J0YWJsZSIsImJ1aWx0SW5Mb2FkZWQiLCJjcmVhdGVJZCIsInJhbmRvbSIsImpvaW4iLCJnZW5lcmljU3RhdGVFbW1pdGVyIiwicmVjeWNsZWRFbW1pdGVyIiwiZGVmYXVsdEZpbGUiLCJibG9ja3MiLCJzZWxlY3RlZFRyYWNrIiwic2Nyb2xsIiwiaGlzdCIsInVwZGF0ZUZpbGUiLCJsb2NhbEZpbGUiLCJzdG9yYWdlSW5kZXgiLCJnZXRFbnRyeSIsInNlcmlhbGl6ZWQiLCJGb3JtYXRzIiwiTXVsdGlTZXJpYWxpemVyIiwic2VyaWFsaXplIiwibm9IaXN0b3J5IiwiSlNPTiIsInN0cmluZ2lmeSIsInNldEl0ZW0iLCJyZWN5Y2xlSW5kZXgiLCJyZWxvYWQiLCJkZXN0cm95RmlsZSIsInJlbW92ZUl0ZW0iLCJyZW1vdmVFbnRyeSIsInB1cmdlRnJvbVJlY3ljbGVCaW4iLCJfcmVzdG9yZUZyb21SZWN5Y2xlQmluIiwiY3JlYXRlRW50cnkiLCJfbW92ZVRvUmVjeWNsZUJpbiIsImdldElkIiwiaXNQcm9qZWN0VHlwZSIsIndpbGxSZW1vdmUiLCJnZXRBbGwiLCJnZXRGcmVlSXRlbXMiLCJnZXRPcnBoYW4iLCJvcnBoYW5GaWxlcyIsImNvbnNvbGUiLCJnZXRQYXR0ZXJuU29uZ3MiLCJieVByb2plY3QiLCJieVR5cGUiLCJ0eXBlU29uZyIsImxvYWRGaWxlIiwic3RvcmFnZSIsImJ1aWx0aW4iLCJmaWxlSW5kZXhlcyIsIm1vZGUiLCJtYXhjb3VudCIsIl9tIiwiZ2V0RGVmYXVsdE1lYXN1cmUiLCJnZXREZWZhdWx0QlBNIiwiZ2V0SXRlbSIsImRlc2VyaWFsaXplIiwiZ2V0UmVmcyIsInVwZGF0ZWQiLCJwYXJzZSIsImNyZWF0ZUZpbGUiLCJuZXdpZCIsImRlZmF1bHRNZWFzdXJlIiwiZGVmYXVsdEJQTSIsInMwIiwiSlNPTlNlcmlhbGl6ZXIiLCJzMSIsIkNhY2hlZFNlcmlhbGl6ZXIiLCJQYWNrZWRKU09OU2VyaWFsaXplciIsInMyIiwiSHVmZm1hblNlcmlhbGl6ZXJXcmFwcGVyIiwiczMiLCJzNCIsIlBhY2tlZEpTT05TZXJpYWxpemVyQiIsInM1Iiwic2V0U2VyaWFsaXplcnMiLCJzZXJpYWxpemVyIiwiYmxvY2tJZCIsImdldFByb2plY3RGaWxlcyIsInByb2plY3RJZCIsIm9sZFZlciIsIm5leHRWZXIiLCJ1cGRhdGVJbmRleCIsImF0dHJpYnV0ZXMiLCJ1cGRhdGVFbnRyeSIsImdldEluZGV4IiwiYWRkTGlzdGVuZXIiLCJrZXl3b3JkIiwiaGFzS2V5d29yZCIsImZpbHRlcmVkIiwicmV2ZXJzZSIsInRvdGFsIiwic2VhcmNoIiwidXBkYXRlU2VhcmNoIiwibm90SW5SZXMiLCJpdGVtIiwicmVzIiwiaWRzIiwiY29udmVydFR5cGUiLCJvYnNlcnZlIiwiY2IiLCJjbG9zZSIsIl93cmFwcGVyIiwibW9kV3JhcHBlciIsIm9yaWdpbmFsRGlzcG9zZSIsIl9sYXN0bXVzaWMiLCJfbGFzdGluc3RhbmNlIiwibm93cmFwIiwiJHRyYW5zbGF0ZSIsIndpbmRvd0NsYXNzIiwicmVzb2x2ZSIsImV4cG9ydENvbnRlbnRzIiwiQmxvYiIsImdldFJlbGF0ZWRJZHMiLCJ5IiwiZ2V0RmlsZVdpdGhSZWxhdGVkIiwicmVsYXJyYXkiLCJyZWwiLCJ1bmlxIiwiT2JqZWN0Iiwia2V5cyIsImV4cG9ydFByb2plY3QiLCJleHBvcnRGaWxlIiwiaW1wb3J0RmlsZSIsImltcG9ydEl0ZW0iLCJwIiwicGFyc2VkIiwiZmlyc3RJdGVtIiwiU3luYyIsIkNhbnRSZW1vdmUiLCJFcnJvciIsIkluZGV4RmFjdG9yeSIsImluZGV4TmFtZSIsImVudHJ5Q2hhbmdlIiwiY2xlYXJJdGVtIiwiYyIsInN5bmMiLCJpc29sYXRlZENvbnRleHQiLCJpYyIsImVudHJ5IiwiZXh0cmFJZHMiLCJleHRyYVByb2plY3RJZHMiLCJwcm9qZWN0SWRzIiwiaXNPcnBoYW4iLCJyZWZlcmVuY2VkIiwibXVzaWNKcyIsInNldHVwU3RvcmUiLCJtaWRpU2V0dXBSZXF1ZXN0ZWQiLCJtaWRpTG9hZGVkIiwic3RvcmVJbnB1dEVuYWJsZWQiLCJpbnB1dElkIiwiZW5hYmxlZCIsIm1pZGlBY2Nlc3NSZXF1ZXN0ZWQiLCJuYXZpZ2F0b3IiLCJyZXF1ZXN0TUlESUFjY2VzcyIsInN5c2V4Iiwid3JhcElucHV0IiwiaW5wdXQiLCJvbm1pZGltZXNzYWdlIiwibWlkaUFjY2VzcyIsIm5leHQiLCJkb25lIiwiZ2V0SW5wdXRzIiwicmV0SW5wdXRzIiwiZXZlbnRMaXN0ZW5lcnMiLCJjZmciLCJyZWxvYWRDb25maWciLCJnZXRDb25maWciLCJzZXRDb25maWciLCIkcm9vdFNjb3BlIiwicmVjaXBlTGlzdCIsImJsaW5rcyIsImN1cnJlbnRSZWNpcGUiLCJzdGVwcyIsImN1cnJlbnRTdGVwIiwiaGFuZGxlRXZlbnQiLCJzdGVwIiwiZXZlbnRIYW5kbGVyIiwicnVuUmVjaXBlU3RlcCIsImJsaW5rX2lkIiwidG9vbHRpcF9pZCIsIm5leHRfc3RlcF9vbiIsImV2ZW50TmFtZSIsImRlbGF5IiwibXMiLCJnZXRMb2NhbGVOYW1lIiwic3RlcEluZGV4IiwidG9vbHRpcE5hbWUiLCJsb2FkRXZlbnRIYW5kbGVyIiwiZXZlbnRIYW5kbGVyRGF0YSIsImlubmVyIiwibG9hZFN0ZXAiLCJzdGVwRGF0YSIsImNyZWF0ZUZpbGVzIiwic3dpdGNoUHJvamVjdCIsInJlY2lwZURhdGEiLCJEYXRlIiwibG9hZFRyYW5zbGF0aW9ucyIsImxvYWRSZWNpcGVUcmFuc2xhdGlvbiIsImxhbmciLCJsYW5nSW5kZXgiLCJ0cCIsImxvY2FsZU5hbWUiLCJhY3Rpb25zIiwicmVjaXBlSWQiLCJyZWNpcGVUcmFuc2xhdGlvbkRhdGEiLCJwcm9taXNlIiwiX2FyZ3MiLCJfc2VsZiIsImRlZmVyIiwicmVqZWN0IiwiYmFzZVRyYW5zbGF0aW9uIiwiYWRkVHJhbnNsYXRpb25zIiwidHlwZVRyYW5zbGF0aW9ucyIsInJlY2lwZVRyYW5zbGF0aW9ucyIsIk9iamVjdENhY2hlIiwid20iLCJzdHJvYmoiLCJlbGVtIiwibWFrZV9tdXRhYmxlIiwiY2FjaGVEYXRhIiwiY2FjaGVXcmFwIiwiYmFzZU11c2ljIiwib3JpZ2luYWxQcnVuZSIsInBhcmFtcyIsImdldE9yaWdpbmFsIiwiY3VycmVudCIsImluc3RhbmNlcyIsInJldXNhYmxlTm9kZSIsIm5ld0Jhc2UiLCJsYXN0Q3VycmVudCIsInByb3h5IiwibmV3ciIsImxhc3RPYmpEYXRhIiwibmV3b2JqZWN0IiwiX2NvbXBvbmVudHMiLCJpbnN0YW5jZSIsInBsdWdpbnMiLCJ0cmFuc2xhdGlvbiIsIm0iLCJwbHVnaW5OYW1lIiwidHJhbnNsYXRlRGF0YSIsInR5cGVOYW1lIiwiY29tcG9zaXRpb24iLCJkZXNjcmlwdGlvbiIsImxvYWRQbHVnaW4iLCJydW5uZXJDb2RlIiwiZXhwb3J0IiwicGx1Z2luc0xvYWRlZCIsInNraXAiLCJzZXRTa2lwIiwicmVsZWFzZVdpdGhJbmRleCIsImJ5dGVzIiwibmV4dEVudHJ5Iiwic2hpZnQiLCJyZWxlYXNlIiwibmV3SW5kZXgiLCJpc3JldHJ5IiwiaW5zdHJ1bWVudElkIiwiaW5zdHJ1bWVudE1hcCIsImJsb2NrIiwiaW5kZXhNYXAiLCIkc2NvcGUiLCIkdWliTW9kYWxJbnN0YW5jZSIsIm51bUNoYW5uZWxzIiwiZW5jb2RpbmciLCIkcm91dGVQYXJhbXMiLCJJbnN0cnVtZW50U2V0IiwiRXhwb3J0IiwiU09OR19NQVhfVFJBQ0tTIiwiaW5zdFNldCIsInBsYXlpbmdTdGFydE9mZnNldCIsInB4VG9UaWNrcyIsInB4Iiwic2VlayIsImN1cnJlbnRSZWMiLCJyZXBsYXkiLCJwYXR0ZXJuRWRpdCIsImV4cG9ydEl0ZW0iLCJmaWxlSW5kZXgiLCJyZWxvYWRGcm9tUmVwbyIsImNoZWNrUGF5bG9hZCIsImZpbGVDaGFuZ2VkIiwiZW5jb2RpbmdPcHRpb25zIiwicGF0dGVybnMiLCJjcmVhdGVQYXR0ZXJuIiwic29uZ1RyYWNrSWR4IiwiY2hhbmdlZEJwbSIsIlNvbmciLCJpbmRleENoYW5nZWQiLCJtYXhibG9ja3MiLCJtYXhUcmFja0luZGV4IiwidHJhY2tJbmRleCIsIm1Db3VudCIsInBheWxvYWQiLCIkZGF0YSIsIiRldmVudCIsImZyb21CbG9jayIsInN3YXBJZCIsImJsb2NrX2lkcyIsIm91dHB1dEZpbGUiLCJjdHJsS2V5IiwiaW5zdHJ1bWVudEVkaXQiLCJtdXRlZFN0YXRlIiwidXBkYXRlTXV0ZWQiLCJyZW1vdmVUcmFjayIsInRyYWNrSWR4IiwiYWRkVHJhY2siLCJ6b29tSW4iLCJ6b29tT3V0IiwiYmVlcCIsImxhc3RQbGF5aW5nIiwic2V0VGltZW91dCIsInRyYWNrTXV0ZWQiLCJ1cGRhdGVJbnN0cnVtZW50IiwibXVzaWNPYmplY3QiLCJwbGF5QnV0dG9uIiwibGFzdE9iaiIsInBsYXlhYmxlcyIsInN0b3BQbGF5IiwibGF6eUxvYWRJbnN0cnVtZW50IiwiY2FsbFN0b3AiLCJjYWxsUGxheSIsImluc3RydW1lbnRQcm9taXNlIiwiaW5uZXJJbnN0cnVtZW50IiwiaW5uZXJOb3RlIiwiaW5zdCIsImluc3RydW1lbnRFeHRlbmQiLCJzdG9wRGVsYXkiLCJjcmVhdGVJbnN0cnVtZW50RnJvbUZpbGUiLCJvbGRGaWxlIiwibm90aWZ5IiwicmVzZXRTdGFjayIsInN0YXJ0UGxheSIsIldlbGNvbWVNZXNzYWdlIiwicEZpbHRlciIsInByb2plY3RGaWx0ZXIiLCJjdXJyZW50T2JzZXJ2ZXIiLCJmaWxlc1RvdGFsIiwiZmlsZUlucHV0Q2xpY2siLCJmaWxlSW1wb3J0IiwicmVhZFRleHRGaWxlIiwiZmlsZVJlYWRlciIsIkZpbGVSZWFkZXIiLCJvbmxvYWQiLCJvbmVycm9yIiwicmVhZEFzVGV4dCIsIm5leHRMb2NhdGlvbiIsImpzb24iLCJmaXJzdCIsImNoYW5nZUxhbmd1YWdlIiwibGFuZ0tleSIsInVzZSIsImN1cnJlbnRMYW5ndWFnZSIsImxhbmdMb2FkZWQiLCJkb250c2hvd2FnYWluIiwiYWN0aXZhdGUiLCJleGFtcGxlIiwia2V5d29yZFVwZGF0ZWQiLCJzZWFyY2hLZXl3b3JkIiwicmVtb3ZlUHJvamVjdCIsInByb2plY3RTZXR0aW5ncyIsImJ1dHRvblRleHQiLCJuZXdQcm9qZWN0IiwicHJvamVjdE5hbWUiLCJvcGVuUHJvamVjdCIsIm1vcmVJbXBvcnRhbnQiLCJmaWxlMSIsImZpbGUyIiwiYmV0dGVyIiwibmV3SW5zdHJ1bWVudCIsIm5ld1NvbmciLCJuZXdQYXR0ZXJuIiwidG9kbyIsInVwZGF0ZUNvbmZpZyIsImltbWVkaWF0ZVVwZGF0ZVNlYXJjaCIsInNlbGVjdCIsInNraXBVcGRhdGVkIiwidXBkYXRlU2tpcCIsInR1dG9yaWFsIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FDaFRBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUN2cFBBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUM5dkVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FDTkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FDaFJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUNKQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQ05BO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FDN0NBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FDVEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUNsOUJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQ0xBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQzdvQkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUNOQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQ1RBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQzdIQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQ05BO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUM1cUJBLElBQUlBLGdCQUFnQixHQUFHQyxPQUFPLENBQUNDLE1BQVIsQ0FBZSxrQkFBZixFQUFtQyxDQUFDLGVBQUQsRUFBa0IsU0FBbEIsRUFBNkIsY0FBN0IsRUFBNkMs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LGFBQWhFLEVBQStFO0FBQ2hON0YsRUFBQUEsTUFBTSxDQUFDNkYsYUFBUCxHQUF1QkEsYUFBdkI7QUFFQSxNQUFJc0IsV0FBVyxHQUFHdmdCLEVBQUUsQ0FBQzdYLElBQUgsQ0FBUSxJQUFSLENBQWxCOztBQUNBaXhCLEVBQUFBLE1BQU0sQ0FBQ29ILFVBQVAsR0FBb0IsWUFBVztBQUM3QkQsSUFBQUEsV0FBVyxHQUFHM0MsY0FBYyxDQUFDcEYsT0FBZixDQUF1QlksTUFBTSxDQUFDNkYsYUFBOUIsQ0FBZDtBQUNELEdBRkQ7O0FBSUE3RixFQUFBQSxNQUFNLENBQUN4MkIsT0FBUCxHQUFpQixZQUFXO0FBQzFCMjlCLElBQUFBLFdBQVcsQ0FDUnZ6QixJQURILENBQ1EsWUFBVztBQUNmcXNCLE1BQUFBLGlCQUFpQixDQUFDejJCLE9BQWxCO0FBQ0QsS0FISDtBQUtELEdBTkQ7O0FBUUF3MkIsRUFBQUEsTUFBTSxDQUFDcUgsUUFBUCxHQUFrQixZQUFXO0FBQzNCRixJQUFBQSxXQUFXLENBQ1J2ekIsSUFESCxDQUNRLFlBQVc7QUFDZnFzQixNQUFBQSxpQkFBaUIsQ0FBQ3oyQixPQUFsQjtBQUNBOEYsTUFBQUEsTUFBTSxDQUFDWSxLQUFQLENBQWEsT0FBYjtBQUNELEtBSkg7QUFLRCxHQU5EO0FBT0QsQ0F2QitDLENBQWhEIiwiZmlsZSI6InNpdGUuanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKlxyXG4gQW5ndWxhckpTIHYxLjUuMC1yYy4wXHJcbiAoYykgMjAxMC0yMDE1IEdvb2dsZSwgSW5jLiBodHRwOi8vYW5ndWxhcmpzLm9yZ1xyXG4gTGljZW5zZTogTUlUXHJcbiovXHJcbihmdW5jdGlvbihTLFosdSl7J3VzZSBzdHJpY3QnO2Z1bmN0aW9uIFAoYSl7cmV0dXJuIGZ1bmN0aW9uKCl7dmFyIGI9YXJndW1lbnRzWzBdLGQ7ZD1cIltcIisoYT9hK1wiOlwiOlwiXCIpK2IrXCJdIGh0dHA6Ly9lcnJvcnMuYW5ndWxhcmpzLm9yZy8xLjUuMC1yYy4wL1wiKyhhP2ErXCIvXCI6XCJcIikrYjtmb3IoYj0xO2I8YXJndW1lbnRzLmxlbmd0aDtiKyspe2Q9ZCsoMT09Yj9cIj9cIjpcIiZcIikrXCJwXCIrKGItMSkrXCI9XCI7dmFyIGM9ZW5jb2RlVVJJQ29tcG9uZW50LGU7ZT1hcmd1bWVudHNbYl07ZT1cImZ1bmN0aW9uXCI9PXR5cGVvZiBlP2UudG9TdHJpbmcoKS5yZXBsYWNlKC8gXFx7W1xcc1xcU10qJC8sXCJcIik6XCJ1bmRlZmluZWRcIj09dHlwZW9mIGU/XCJ1bmRlZmluZWRcIjpcInN0cmluZ1wiIT10eXBlb2YgZT9KU09OLnN0cmluZ2lmeShlKTplO2QrPWMoZSl9cmV0dXJuIEVycm9yKGQpfX1mdW5jdGlvbiBDYShhKXtpZihudWxsPT1hfHxaYShhKSlyZXR1cm4hMTtpZihLKGEpfHxHKGEpfHxBJiZhIGluc3RhbmNlb2ZcclxuQSlyZXR1cm4hMDt2YXIgYj1cImxlbmd0aFwiaW4gT2JqZWN0KGEpJiZhLmxlbmd0aDtyZXR1cm4gVShiKSYmKDA8PWImJmItMSBpbiBhfHxcImZ1bmN0aW9uXCI9PXR5cGVvZiBhLml0ZW0pfWZ1bmN0aW9uIG4oYSxiLGQpe3ZhciBjLGU7aWYoYSlpZihEKGEpKWZvcihjIGluIGEpXCJwcm90b3R5cGVcIj09Y3x8XCJsZW5ndGhcIj09Y3x8XCJuYW1lXCI9PWN8fGEuaGFzT3duUHJvcGVydHkmJiFhLmhhc093blByb3BlcnR5KGMpfHxiLmNhbGwoZCxhW2NdLGMsYSk7ZWxzZSBpZihLKGEpfHxDYShhKSl7dmFyIGY9XCJvYmplY3RcIiE9PXR5cGVvZiBhO2M9MDtmb3IoZT1hLmxlbmd0aDtjPGU7YysrKShmfHxjIGluIGEpJiZiLmNhbGwoZCxhW2NdLGMsYSl9ZWxzZSBpZihhLmZvckVhY2gmJmEuZm9yRWFjaCE9PW4pYS5mb3JFYWNoKGIsZCxhKTtlbHNlIGlmKG9jKGEpKWZvcihjIGluIGEpYi5jYWxsKGQsYVtjXSxjLGEpO2Vsc2UgaWYoXCJmdW5jdGlvblwiPT09dHlwZW9mIGEuaGFzT3duUHJvcGVydHkpZm9yKGMgaW4gYSlhLmhhc093blByb3BlcnR5KGMpJiZcclxuYi5jYWxsKGQsYVtjXSxjLGEpO2Vsc2UgZm9yKGMgaW4gYSlxYS5jYWxsKGEsYykmJmIuY2FsbChkLGFbY10sYyxhKTtyZXR1cm4gYX1mdW5jdGlvbiBwYyhhLGIsZCl7Zm9yKHZhciBjPU9iamVjdC5rZXlzKGEpLnNvcnQoKSxlPTA7ZTxjLmxlbmd0aDtlKyspYi5jYWxsKGQsYVtjW2VdXSxjW2VdKTtyZXR1cm4gY31mdW5jdGlvbiBxYyhhKXtyZXR1cm4gZnVuY3Rpb24oYixkKXthKGQsYil9fWZ1bmN0aW9uIFdkKCl7cmV0dXJuKytwYn1mdW5jdGlvbiBPYihhLGIsZCl7Zm9yKHZhciBjPWEuJCRoYXNoS2V5LGU9MCxmPWIubGVuZ3RoO2U8ZjsrK2Upe3ZhciBnPWJbZV07aWYoSihnKXx8RChnKSlmb3IodmFyIGg9T2JqZWN0LmtleXMoZyksaz0wLGw9aC5sZW5ndGg7azxsO2srKyl7dmFyIG09aFtrXSxzPWdbbV07ZCYmSihzKT9iYShzKT9hW21dPW5ldyBEYXRlKHMudmFsdWVPZigpKTpPYShzKT9hW21dPW5ldyBSZWdFeHAocyk6cy5ub2RlTmFtZT9hW21dPXMuY2xvbmVOb2RlKCEwKTpcclxuUGIocyk/YVttXT1zLmNsb25lKCk6KEooYVttXSl8fChhW21dPUsocyk/W106e30pLE9iKGFbbV0sW3NdLCEwKSk6YVttXT1zfX1jP2EuJCRoYXNoS2V5PWM6ZGVsZXRlIGEuJCRoYXNoS2V5O3JldHVybiBhfWZ1bmN0aW9uIEwoYSl7cmV0dXJuIE9iKGEsd2EuY2FsbChhcmd1bWVudHMsMSksITEpfWZ1bmN0aW9uIFhkKGEpe3JldHVybiBPYihhLHdhLmNhbGwoYXJndW1lbnRzLDEpLCEwKX1mdW5jdGlvbiBlYShhKXtyZXR1cm4gcGFyc2VJbnQoYSwxMCl9ZnVuY3Rpb24gUWIoYSxiKXtyZXR1cm4gTChPYmplY3QuY3JlYXRlKGEpLGIpfWZ1bmN0aW9uIHcoKXt9ZnVuY3Rpb24gJGEoYSl7cmV0dXJuIGF9ZnVuY3Rpb24ga2EoYSl7cmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuIGF9fWZ1bmN0aW9uIHJjKGEpe3JldHVybiBEKGEudG9TdHJpbmcpJiZhLnRvU3RyaW5nIT09cmF9ZnVuY3Rpb24geChhKXtyZXR1cm5cInVuZGVmaW5lZFwiPT09dHlwZW9mIGF9ZnVuY3Rpb24geihhKXtyZXR1cm5cInVuZGVmaW5lZFwiIT09XHJcbnR5cGVvZiBhfWZ1bmN0aW9uIEooYSl7cmV0dXJuIG51bGwhPT1hJiZcIm9iamVjdFwiPT09dHlwZW9mIGF9ZnVuY3Rpb24gb2MoYSl7cmV0dXJuIG51bGwhPT1hJiZcIm9iamVjdFwiPT09dHlwZW9mIGEmJiFzYyhhKX1mdW5jdGlvbiBHKGEpe3JldHVyblwic3RyaW5nXCI9PT10eXBlb2YgYX1mdW5jdGlvbiBVKGEpe3JldHVyblwibnVtYmVyXCI9PT10eXBlb2YgYX1mdW5jdGlvbiBiYShhKXtyZXR1cm5cIltvYmplY3QgRGF0ZV1cIj09PXJhLmNhbGwoYSl9ZnVuY3Rpb24gRChhKXtyZXR1cm5cImZ1bmN0aW9uXCI9PT10eXBlb2YgYX1mdW5jdGlvbiBPYShhKXtyZXR1cm5cIltvYmplY3QgUmVnRXhwXVwiPT09cmEuY2FsbChhKX1mdW5jdGlvbiBaYShhKXtyZXR1cm4gYSYmYS53aW5kb3c9PT1hfWZ1bmN0aW9uIGFiKGEpe3JldHVybiBhJiZhLiRldmFsQXN5bmMmJmEuJHdhdGNofWZ1bmN0aW9uIGJiKGEpe3JldHVyblwiYm9vbGVhblwiPT09dHlwZW9mIGF9ZnVuY3Rpb24gdGMoYSl7cmV0dXJuIGEmJlUoYS5sZW5ndGgpJiZcclxuWWQudGVzdChyYS5jYWxsKGEpKX1mdW5jdGlvbiBQYihhKXtyZXR1cm4hKCFhfHwhKGEubm9kZU5hbWV8fGEucHJvcCYmYS5hdHRyJiZhLmZpbmQpKX1mdW5jdGlvbiBaZChhKXt2YXIgYj17fTthPWEuc3BsaXQoXCIsXCIpO3ZhciBkO2ZvcihkPTA7ZDxhLmxlbmd0aDtkKyspYlthW2RdXT0hMDtyZXR1cm4gYn1mdW5jdGlvbiB0YShhKXtyZXR1cm4gSChhLm5vZGVOYW1lfHxhWzBdJiZhWzBdLm5vZGVOYW1lKX1mdW5jdGlvbiBjYihhLGIpe3ZhciBkPWEuaW5kZXhPZihiKTswPD1kJiZhLnNwbGljZShkLDEpO3JldHVybiBkfWZ1bmN0aW9uIFBhKGEsYil7ZnVuY3Rpb24gZChhLGIpe3ZhciBkPWIuJCRoYXNoS2V5LGU7aWYoSyhhKSl7ZT0wO2Zvcih2YXIgZj1hLmxlbmd0aDtlPGY7ZSsrKWIucHVzaChjKGFbZV0pKX1lbHNlIGlmKG9jKGEpKWZvcihlIGluIGEpYltlXT1jKGFbZV0pO2Vsc2UgaWYoYSYmXCJmdW5jdGlvblwiPT09dHlwZW9mIGEuaGFzT3duUHJvcGVydHkpZm9yKGUgaW4gYSlhLmhhc093blByb3BlcnR5KGUpJiZcclxuKGJbZV09YyhhW2VdKSk7ZWxzZSBmb3IoZSBpbiBhKXFhLmNhbGwoYSxlKSYmKGJbZV09YyhhW2VdKSk7ZD9iLiQkaGFzaEtleT1kOmRlbGV0ZSBiLiQkaGFzaEtleTtyZXR1cm4gYn1mdW5jdGlvbiBjKGEpe2lmKCFKKGEpKXJldHVybiBhO3ZhciBiPWUuaW5kZXhPZihhKTtpZigtMSE9PWIpcmV0dXJuIGZbYl07aWYoWmEoYSl8fGFiKGEpKXRocm93IERhKFwiY3B3c1wiKTt2YXIgYj0hMSxjO0soYSk/KGM9W10sYj0hMCk6dGMoYSk/Yz1uZXcgYS5jb25zdHJ1Y3RvcihhKTpiYShhKT9jPW5ldyBEYXRlKGEuZ2V0VGltZSgpKTpPYShhKT8oYz1uZXcgUmVnRXhwKGEuc291cmNlLGEudG9TdHJpbmcoKS5tYXRjaCgvW15cXC9dKiQvKVswXSksYy5sYXN0SW5kZXg9YS5sYXN0SW5kZXgpOkQoYS5jbG9uZU5vZGUpP2M9YS5jbG9uZU5vZGUoITApOihjPU9iamVjdC5jcmVhdGUoc2MoYSkpLGI9ITApO2UucHVzaChhKTtmLnB1c2goYyk7cmV0dXJuIGI/ZChhLGMpOmN9dmFyIGU9W10sZj1bXTtpZihiKXtpZih0YyhiKSl0aHJvdyBEYShcImNwdGFcIik7XHJcbmlmKGE9PT1iKXRocm93IERhKFwiY3BpXCIpO0soYik/Yi5sZW5ndGg9MDpuKGIsZnVuY3Rpb24oYSxjKXtcIiQkaGFzaEtleVwiIT09YyYmZGVsZXRlIGJbY119KTtlLnB1c2goYSk7Zi5wdXNoKGIpO3JldHVybiBkKGEsYil9cmV0dXJuIGMoYSl9ZnVuY3Rpb24gVihhLGIpe2lmKEsoYSkpe2I9Ynx8W107Zm9yKHZhciBkPTAsYz1hLmxlbmd0aDtkPGM7ZCsrKWJbZF09YVtkXX1lbHNlIGlmKEooYSkpZm9yKGQgaW4gYj1ifHx7fSxhKWlmKFwiJFwiIT09ZC5jaGFyQXQoMCl8fFwiJFwiIT09ZC5jaGFyQXQoMSkpYltkXT1hW2RdO3JldHVybiBifHxhfWZ1bmN0aW9uIGxhKGEsYil7aWYoYT09PWIpcmV0dXJuITA7aWYobnVsbD09PWF8fG51bGw9PT1iKXJldHVybiExO2lmKGEhPT1hJiZiIT09YilyZXR1cm4hMDt2YXIgZD10eXBlb2YgYSxjO2lmKGQ9PXR5cGVvZiBiJiZcIm9iamVjdFwiPT1kKWlmKEsoYSkpe2lmKCFLKGIpKXJldHVybiExO2lmKChkPWEubGVuZ3RoKT09Yi5sZW5ndGgpe2ZvcihjPTA7YzxcclxuZDtjKyspaWYoIWxhKGFbY10sYltjXSkpcmV0dXJuITE7cmV0dXJuITB9fWVsc2V7aWYoYmEoYSkpcmV0dXJuIGJhKGIpP2xhKGEuZ2V0VGltZSgpLGIuZ2V0VGltZSgpKTohMTtpZihPYShhKSlyZXR1cm4gT2EoYik/YS50b1N0cmluZygpPT1iLnRvU3RyaW5nKCk6ITE7aWYoYWIoYSl8fGFiKGIpfHxaYShhKXx8WmEoYil8fEsoYil8fGJhKGIpfHxPYShiKSlyZXR1cm4hMTtkPVgoKTtmb3IoYyBpbiBhKWlmKFwiJFwiIT09Yy5jaGFyQXQoMCkmJiFEKGFbY10pKXtpZighbGEoYVtjXSxiW2NdKSlyZXR1cm4hMTtkW2NdPSEwfWZvcihjIGluIGIpaWYoIShjIGluIGQpJiZcIiRcIiE9PWMuY2hhckF0KDApJiZ6KGJbY10pJiYhRChiW2NdKSlyZXR1cm4hMTtyZXR1cm4hMH1yZXR1cm4hMX1mdW5jdGlvbiBkYihhLGIsZCl7cmV0dXJuIGEuY29uY2F0KHdhLmNhbGwoYixkKSl9ZnVuY3Rpb24gdWMoYSxiKXt2YXIgZD0yPGFyZ3VtZW50cy5sZW5ndGg/d2EuY2FsbChhcmd1bWVudHMsMik6W107cmV0dXJuIUQoYil8fFxyXG5iIGluc3RhbmNlb2YgUmVnRXhwP2I6ZC5sZW5ndGg/ZnVuY3Rpb24oKXtyZXR1cm4gYXJndW1lbnRzLmxlbmd0aD9iLmFwcGx5KGEsZGIoZCxhcmd1bWVudHMsMCkpOmIuYXBwbHkoYSxkKX06ZnVuY3Rpb24oKXtyZXR1cm4gYXJndW1lbnRzLmxlbmd0aD9iLmFwcGx5KGEsYXJndW1lbnRzKTpiLmNhbGwoYSl9fWZ1bmN0aW9uICRkKGEsYil7dmFyIGQ9YjtcInN0cmluZ1wiPT09dHlwZW9mIGEmJlwiJFwiPT09YS5jaGFyQXQoMCkmJlwiJFwiPT09YS5jaGFyQXQoMSk/ZD11OlphKGIpP2Q9XCIkV0lORE9XXCI6YiYmWj09PWI/ZD1cIiRET0NVTUVOVFwiOmFiKGIpJiYoZD1cIiRTQ09QRVwiKTtyZXR1cm4gZH1mdW5jdGlvbiBlYihhLGIpe2lmKFwidW5kZWZpbmVkXCI9PT10eXBlb2YgYSlyZXR1cm4gdTtVKGIpfHwoYj1iPzI6bnVsbCk7cmV0dXJuIEpTT04uc3RyaW5naWZ5KGEsJGQsYil9ZnVuY3Rpb24gdmMoYSl7cmV0dXJuIEcoYSk/SlNPTi5wYXJzZShhKTphfWZ1bmN0aW9uIHdjKGEsYil7dmFyIGQ9RGF0ZS5wYXJzZShcIkphbiAwMSwgMTk3MCAwMDowMDowMCBcIitcclxuYSkvNkU0O3JldHVybiBpc05hTihkKT9iOmR9ZnVuY3Rpb24gUmIoYSxiLGQpe2Q9ZD8tMToxO3ZhciBjPXdjKGIsYS5nZXRUaW1lem9uZU9mZnNldCgpKTtiPWE7YT1kKihjLWEuZ2V0VGltZXpvbmVPZmZzZXQoKSk7Yj1uZXcgRGF0ZShiLmdldFRpbWUoKSk7Yi5zZXRNaW51dGVzKGIuZ2V0TWludXRlcygpK2EpO3JldHVybiBifWZ1bmN0aW9uIHVhKGEpe2E9QShhKS5jbG9uZSgpO3RyeXthLmVtcHR5KCl9Y2F0Y2goYil7fXZhciBkPUEoXCI8ZGl2PlwiKS5hcHBlbmQoYSkuaHRtbCgpO3RyeXtyZXR1cm4gYVswXS5ub2RlVHlwZT09PVFhP0goZCk6ZC5tYXRjaCgvXig8W14+XSs+KS8pWzFdLnJlcGxhY2UoL148KFtcXHdcXC1dKykvLGZ1bmN0aW9uKGEsYil7cmV0dXJuXCI8XCIrSChiKX0pfWNhdGNoKGMpe3JldHVybiBIKGQpfX1mdW5jdGlvbiB4YyhhKXt0cnl7cmV0dXJuIGRlY29kZVVSSUNvbXBvbmVudChhKX1jYXRjaChiKXt9fWZ1bmN0aW9uIHljKGEpe3ZhciBiPXt9O24oKGF8fFwiXCIpLnNwbGl0KFwiJlwiKSxcclxuZnVuY3Rpb24oYSl7dmFyIGMsZSxmO2EmJihlPWE9YS5yZXBsYWNlKC9cXCsvZyxcIiUyMFwiKSxjPWEuaW5kZXhPZihcIj1cIiksLTEhPT1jJiYoZT1hLnN1YnN0cmluZygwLGMpLGY9YS5zdWJzdHJpbmcoYysxKSksZT14YyhlKSx6KGUpJiYoZj16KGYpP3hjKGYpOiEwLHFhLmNhbGwoYixlKT9LKGJbZV0pP2JbZV0ucHVzaChmKTpiW2VdPVtiW2VdLGZdOmJbZV09ZikpfSk7cmV0dXJuIGJ9ZnVuY3Rpb24gU2IoYSl7dmFyIGI9W107bihhLGZ1bmN0aW9uKGEsYyl7SyhhKT9uKGEsZnVuY3Rpb24oYSl7Yi5wdXNoKGdhKGMsITApKyghMD09PWE/XCJcIjpcIj1cIitnYShhLCEwKSkpfSk6Yi5wdXNoKGdhKGMsITApKyghMD09PWE/XCJcIjpcIj1cIitnYShhLCEwKSkpfSk7cmV0dXJuIGIubGVuZ3RoP2Iuam9pbihcIiZcIik6XCJcIn1mdW5jdGlvbiBxYihhKXtyZXR1cm4gZ2EoYSwhMCkucmVwbGFjZSgvJTI2L2dpLFwiJlwiKS5yZXBsYWNlKC8lM0QvZ2ksXCI9XCIpLnJlcGxhY2UoLyUyQi9naSxcIitcIil9ZnVuY3Rpb24gZ2EoYSxcclxuYil7cmV0dXJuIGVuY29kZVVSSUNvbXBvbmVudChhKS5yZXBsYWNlKC8lNDAvZ2ksXCJAXCIpLnJlcGxhY2UoLyUzQS9naSxcIjpcIikucmVwbGFjZSgvJTI0L2csXCIkXCIpLnJlcGxhY2UoLyUyQy9naSxcIixcIikucmVwbGFjZSgvJTNCL2dpLFwiO1wiKS5yZXBsYWNlKC8lMjAvZyxiP1wiJTIwXCI6XCIrXCIpfWZ1bmN0aW9uIGFlKGEsYil7dmFyIGQsYyxlPVJhLmxlbmd0aDtmb3IoYz0wO2M8ZTsrK2MpaWYoZD1SYVtjXStiLEcoZD1hLmdldEF0dHJpYnV0ZShkKSkpcmV0dXJuIGQ7cmV0dXJuIG51bGx9ZnVuY3Rpb24gYmUoYSxiKXt2YXIgZCxjLGU9e307bihSYSxmdW5jdGlvbihiKXtiKz1cImFwcFwiOyFkJiZhLmhhc0F0dHJpYnV0ZSYmYS5oYXNBdHRyaWJ1dGUoYikmJihkPWEsYz1hLmdldEF0dHJpYnV0ZShiKSl9KTtuKFJhLGZ1bmN0aW9uKGIpe2IrPVwiYXBwXCI7dmFyIGU7IWQmJihlPWEucXVlcnlTZWxlY3RvcihcIltcIitiLnJlcGxhY2UoXCI6XCIsXCJcXFxcOlwiKStcIl1cIikpJiYoZD1lLGM9ZS5nZXRBdHRyaWJ1dGUoYikpfSk7XHJcbmQmJihlLnN0cmljdERpPW51bGwhPT1hZShkLFwic3RyaWN0LWRpXCIpLGIoZCxjP1tjXTpbXSxlKSl9ZnVuY3Rpb24gemMoYSxiLGQpe0ooZCl8fChkPXt9KTtkPUwoe3N0cmljdERpOiExfSxkKTt2YXIgYz1mdW5jdGlvbigpe2E9QShhKTtpZihhLmluamVjdG9yKCkpe3ZhciBjPWFbMF09PT1aP1wiZG9jdW1lbnRcIjp1YShhKTt0aHJvdyBEYShcImJ0c3RycGRcIixjLnJlcGxhY2UoLzwvLFwiJmx0O1wiKS5yZXBsYWNlKC8+LyxcIiZndDtcIikpO31iPWJ8fFtdO2IudW5zaGlmdChbXCIkcHJvdmlkZVwiLGZ1bmN0aW9uKGIpe2IudmFsdWUoXCIkcm9vdEVsZW1lbnRcIixhKX1dKTtkLmRlYnVnSW5mb0VuYWJsZWQmJmIucHVzaChbXCIkY29tcGlsZVByb3ZpZGVyXCIsZnVuY3Rpb24oYSl7YS5kZWJ1Z0luZm9FbmFibGVkKCEwKX1dKTtiLnVuc2hpZnQoXCJuZ1wiKTtjPWZiKGIsZC5zdHJpY3REaSk7Yy5pbnZva2UoW1wiJHJvb3RTY29wZVwiLFwiJHJvb3RFbGVtZW50XCIsXCIkY29tcGlsZVwiLFwiJGluamVjdG9yXCIsZnVuY3Rpb24oYSxcclxuYixjLGQpe2EuJGFwcGx5KGZ1bmN0aW9uKCl7Yi5kYXRhKFwiJGluamVjdG9yXCIsZCk7YyhiKShhKX0pfV0pO3JldHVybiBjfSxlPS9eTkdfRU5BQkxFX0RFQlVHX0lORk8hLyxmPS9eTkdfREVGRVJfQk9PVFNUUkFQIS87UyYmZS50ZXN0KFMubmFtZSkmJihkLmRlYnVnSW5mb0VuYWJsZWQ9ITAsUy5uYW1lPVMubmFtZS5yZXBsYWNlKGUsXCJcIikpO2lmKFMmJiFmLnRlc3QoUy5uYW1lKSlyZXR1cm4gYygpO1MubmFtZT1TLm5hbWUucmVwbGFjZShmLFwiXCIpOyQucmVzdW1lQm9vdHN0cmFwPWZ1bmN0aW9uKGEpe24oYSxmdW5jdGlvbihhKXtiLnB1c2goYSl9KTtyZXR1cm4gYygpfTtEKCQucmVzdW1lRGVmZXJyZWRCb290c3RyYXApJiYkLnJlc3VtZURlZmVycmVkQm9vdHN0cmFwKCl9ZnVuY3Rpb24gY2UoKXtTLm5hbWU9XCJOR19FTkFCTEVfREVCVUdfSU5GTyFcIitTLm5hbWU7Uy5sb2NhdGlvbi5yZWxvYWQoKX1mdW5jdGlvbiBkZShhKXthPSQuZWxlbWVudChhKS5pbmplY3RvcigpO2lmKCFhKXRocm93IERhKFwidGVzdFwiKTtcclxucmV0dXJuIGEuZ2V0KFwiJCR0ZXN0YWJpbGl0eVwiKX1mdW5jdGlvbiBBYyhhLGIpe2I9Ynx8XCJfXCI7cmV0dXJuIGEucmVwbGFjZShlZSxmdW5jdGlvbihhLGMpe3JldHVybihjP2I6XCJcIikrYS50b0xvd2VyQ2FzZSgpfSl9ZnVuY3Rpb24gZmUoKXt2YXIgYTtpZighQmMpe3ZhciBiPXJiKCk7KHhhPXgoYik/Uy5qUXVlcnk6Yj9TW2JdOnUpJiZ4YS5mbi5vbj8oQT14YSxMKHhhLmZuLHtzY29wZTpTYS5zY29wZSxpc29sYXRlU2NvcGU6U2EuaXNvbGF0ZVNjb3BlLGNvbnRyb2xsZXI6U2EuY29udHJvbGxlcixpbmplY3RvcjpTYS5pbmplY3Rvcixpbmhlcml0ZWREYXRhOlNhLmluaGVyaXRlZERhdGF9KSxhPXhhLmNsZWFuRGF0YSx4YS5jbGVhbkRhdGE9ZnVuY3Rpb24oYil7Zm9yKHZhciBjLGU9MCxmO251bGwhPShmPWJbZV0pO2UrKykoYz14YS5fZGF0YShmLFwiZXZlbnRzXCIpKSYmYy4kZGVzdHJveSYmeGEoZikudHJpZ2dlckhhbmRsZXIoXCIkZGVzdHJveVwiKTthKGIpfSk6QT1FOyQuZWxlbWVudD1cclxuQTtCYz0hMH19ZnVuY3Rpb24gc2IoYSxiLGQpe2lmKCFhKXRocm93IERhKFwiYXJlcVwiLGJ8fFwiP1wiLGR8fFwicmVxdWlyZWRcIik7cmV0dXJuIGF9ZnVuY3Rpb24gVGEoYSxiLGQpe2QmJksoYSkmJihhPWFbYS5sZW5ndGgtMV0pO3NiKEQoYSksYixcIm5vdCBhIGZ1bmN0aW9uLCBnb3QgXCIrKGEmJlwib2JqZWN0XCI9PT10eXBlb2YgYT9hLmNvbnN0cnVjdG9yLm5hbWV8fFwiT2JqZWN0XCI6dHlwZW9mIGEpKTtyZXR1cm4gYX1mdW5jdGlvbiBVYShhLGIpe2lmKFwiaGFzT3duUHJvcGVydHlcIj09PWEpdGhyb3cgRGEoXCJiYWRuYW1lXCIsYik7fWZ1bmN0aW9uIENjKGEsYixkKXtpZighYilyZXR1cm4gYTtiPWIuc3BsaXQoXCIuXCIpO2Zvcih2YXIgYyxlPWEsZj1iLmxlbmd0aCxnPTA7ZzxmO2crKyljPWJbZ10sYSYmKGE9KGU9YSlbY10pO3JldHVybiFkJiZEKGEpP3VjKGUsYSk6YX1mdW5jdGlvbiB0YihhKXtmb3IodmFyIGI9YVswXSxkPWFbYS5sZW5ndGgtMV0sYyxlPTE7YiE9PWQmJihiPWIubmV4dFNpYmxpbmcpO2UrKylpZihjfHxcclxuYVtlXSE9PWIpY3x8KGM9QSh3YS5jYWxsKGEsMCxlKSkpLGMucHVzaChiKTtyZXR1cm4gY3x8YX1mdW5jdGlvbiBYKCl7cmV0dXJuIE9iamVjdC5jcmVhdGUobnVsbCl9ZnVuY3Rpb24gZ2UoYSl7ZnVuY3Rpb24gYihhLGIsYyl7cmV0dXJuIGFbYl18fChhW2JdPWMoKSl9dmFyIGQ9UChcIiRpbmplY3RvclwiKSxjPVAoXCJuZ1wiKSxlPWIoYSxcImFuZ3VsYXJcIixPYmplY3QpO2UuJCRtaW5FcnI9ZS4kJG1pbkVycnx8UDtyZXR1cm4gYihlLFwibW9kdWxlXCIsZnVuY3Rpb24oKXt2YXIgYT17fTtyZXR1cm4gZnVuY3Rpb24oZyxoLGspe2lmKFwiaGFzT3duUHJvcGVydHlcIj09PWcpdGhyb3cgYyhcImJhZG5hbWVcIixcIm1vZHVsZVwiKTtoJiZhLmhhc093blByb3BlcnR5KGcpJiYoYVtnXT1udWxsKTtyZXR1cm4gYihhLGcsZnVuY3Rpb24oKXtmdW5jdGlvbiBhKGIsZCxlLGYpe2Z8fChmPWMpO3JldHVybiBmdW5jdGlvbigpe2ZbZXx8XCJwdXNoXCJdKFtiLGQsYXJndW1lbnRzXSk7cmV0dXJuIHR9fWZ1bmN0aW9uIGIoYSxcclxuZCl7cmV0dXJuIGZ1bmN0aW9uKGIsZSl7ZSYmRChlKSYmKGUuJCRtb2R1bGVOYW1lPWcpO2MucHVzaChbYSxkLGFyZ3VtZW50c10pO3JldHVybiB0fX1pZighaCl0aHJvdyBkKFwibm9tb2RcIixnKTt2YXIgYz1bXSxmPVtdLEI9W10sUT1hKFwiJGluamVjdG9yXCIsXCJpbnZva2VcIixcInB1c2hcIixmKSx0PXtfaW52b2tlUXVldWU6YyxfY29uZmlnQmxvY2tzOmYsX3J1bkJsb2NrczpCLHJlcXVpcmVzOmgsbmFtZTpnLHByb3ZpZGVyOmIoXCIkcHJvdmlkZVwiLFwicHJvdmlkZXJcIiksZmFjdG9yeTpiKFwiJHByb3ZpZGVcIixcImZhY3RvcnlcIiksc2VydmljZTpiKFwiJHByb3ZpZGVcIixcInNlcnZpY2VcIiksdmFsdWU6YShcIiRwcm92aWRlXCIsXCJ2YWx1ZVwiKSxjb25zdGFudDphKFwiJHByb3ZpZGVcIixcImNvbnN0YW50XCIsXCJ1bnNoaWZ0XCIpLGRlY29yYXRvcjpiKFwiJHByb3ZpZGVcIixcImRlY29yYXRvclwiKSxhbmltYXRpb246YihcIiRhbmltYXRlUHJvdmlkZXJcIixcInJlZ2lzdGVyXCIpLGZpbHRlcjpiKFwiJGZpbHRlclByb3ZpZGVyXCIsXHJcblwicmVnaXN0ZXJcIiksY29udHJvbGxlcjpiKFwiJGNvbnRyb2xsZXJQcm92aWRlclwiLFwicmVnaXN0ZXJcIiksZGlyZWN0aXZlOmIoXCIkY29tcGlsZVByb3ZpZGVyXCIsXCJkaXJlY3RpdmVcIiksY29tcG9uZW50OmZ1bmN0aW9uKGEsYil7ZnVuY3Rpb24gYyhkKXtmdW5jdGlvbiBmKGEpe3JldHVybiBlLmlzRnVuY3Rpb24oYSk/ZnVuY3Rpb24oYixjKXtyZXR1cm4gZC5pbnZva2UoYSx0aGlzLHskZWxlbWVudDpiLCRhdHRyczpjfSl9OmF9dmFyIGc9Yi50ZW1wbGF0ZXx8Yi50ZW1wbGF0ZVVybD9iLnRlbXBsYXRlOlwiXCI7cmV0dXJue2NvbnRyb2xsZXI6Yi5jb250cm9sbGVyfHxmdW5jdGlvbigpe30sY29udHJvbGxlckFzOkRjKGIuY29udHJvbGxlcil8fGIuY29udHJvbGxlckFzfHxhLHRlbXBsYXRlOmYoZyksdGVtcGxhdGVVcmw6ZihiLnRlbXBsYXRlVXJsKSx0cmFuc2NsdWRlOmIudHJhbnNjbHVkZT09PXU/ITA6Yi50cmFuc2NsdWRlLHNjb3BlOiExPT09Yi5pc29sYXRlPyEwOnt9LGJpbmRUb0NvbnRyb2xsZXI6Yi5iaW5kaW5nc3x8XHJcbnt9LHJlc3RyaWN0OmIucmVzdHJpY3R8fFwiRVwifX1iLiRjYW5BY3RpdmF0ZSYmKGMuJGNhbkFjdGl2YXRlPWIuJGNhbkFjdGl2YXRlKTtiLiRyb3V0ZUNvbmZpZyYmKGMuJHJvdXRlQ29uZmlnPWIuJHJvdXRlQ29uZmlnKTtjLiRpbmplY3Q9W1wiJGluamVjdG9yXCJdO3JldHVybiB0LmRpcmVjdGl2ZShhLGMpfSxjb25maWc6USxydW46ZnVuY3Rpb24oYSl7Qi5wdXNoKGEpO3JldHVybiB0aGlzfX07ayYmUShrKTtyZXR1cm4gdH0pfX0pfWZ1bmN0aW9uIGhlKGEpe0woYSx7Ym9vdHN0cmFwOnpjLGNvcHk6UGEsZXh0ZW5kOkwsbWVyZ2U6WGQsZXF1YWxzOmxhLGVsZW1lbnQ6QSxmb3JFYWNoOm4saW5qZWN0b3I6ZmIsbm9vcDp3LGJpbmQ6dWMsdG9Kc29uOmViLGZyb21Kc29uOnZjLGlkZW50aXR5OiRhLGlzVW5kZWZpbmVkOngsaXNEZWZpbmVkOnosaXNTdHJpbmc6Ryxpc0Z1bmN0aW9uOkQsaXNPYmplY3Q6Sixpc051bWJlcjpVLGlzRWxlbWVudDpQYixpc0FycmF5OkssdmVyc2lvbjppZSxcclxuaXNEYXRlOmJhLGxvd2VyY2FzZTpILHVwcGVyY2FzZTp1YixjYWxsYmFja3M6e2NvdW50ZXI6MH0sZ2V0VGVzdGFiaWxpdHk6ZGUsJCRtaW5FcnI6UCwkJGNzcDpFYSxyZWxvYWRXaXRoRGVidWdJbmZvOmNlfSk7VGI9Z2UoUyk7VGIoXCJuZ1wiLFtcIm5nTG9jYWxlXCJdLFtcIiRwcm92aWRlXCIsZnVuY3Rpb24oYSl7YS5wcm92aWRlcih7JCRzYW5pdGl6ZVVyaTpqZX0pO2EucHJvdmlkZXIoXCIkY29tcGlsZVwiLEVjKS5kaXJlY3RpdmUoe2E6a2UsaW5wdXQ6RmMsdGV4dGFyZWE6RmMsZm9ybTpsZSxzY3JpcHQ6bWUsc2VsZWN0Om5lLHN0eWxlOm9lLG9wdGlvbjpwZSxuZ0JpbmQ6cWUsbmdCaW5kSHRtbDpyZSxuZ0JpbmRUZW1wbGF0ZTpzZSxuZ0NsYXNzOnRlLG5nQ2xhc3NFdmVuOnVlLG5nQ2xhc3NPZGQ6dmUsbmdDbG9hazp3ZSxuZ0NvbnRyb2xsZXI6eGUsbmdGb3JtOnllLG5nSGlkZTp6ZSxuZ0lmOkFlLG5nSW5jbHVkZTpCZSxuZ0luaXQ6Q2UsbmdOb25CaW5kYWJsZTpEZSxuZ1BsdXJhbGl6ZTpFZSxcclxubmdSZXBlYXQ6RmUsbmdTaG93OkdlLG5nU3R5bGU6SGUsbmdTd2l0Y2g6SWUsbmdTd2l0Y2hXaGVuOkplLG5nU3dpdGNoRGVmYXVsdDpLZSxuZ09wdGlvbnM6TGUsbmdUcmFuc2NsdWRlOk1lLG5nTW9kZWw6TmUsbmdMaXN0Ok9lLG5nQ2hhbmdlOlBlLHBhdHRlcm46R2MsbmdQYXR0ZXJuOkdjLHJlcXVpcmVkOkhjLG5nUmVxdWlyZWQ6SGMsbWlubGVuZ3RoOkljLG5nTWlubGVuZ3RoOkljLG1heGxlbmd0aDpKYyxuZ01heGxlbmd0aDpKYyxuZ1ZhbHVlOlFlLG5nTW9kZWxPcHRpb25zOlJlfSkuZGlyZWN0aXZlKHtuZ0luY2x1ZGU6U2V9KS5kaXJlY3RpdmUodmIpLmRpcmVjdGl2ZShLYyk7YS5wcm92aWRlcih7JGFuY2hvclNjcm9sbDpUZSwkYW5pbWF0ZTpVZSwkYW5pbWF0ZUNzczpWZSwkJGFuaW1hdGVRdWV1ZTpXZSwkJEFuaW1hdGVSdW5uZXI6WGUsJCRhbmltYXRlQXN5bmNSdW46WWUsJGJyb3dzZXI6WmUsJGNhY2hlRmFjdG9yeTokZSwkY29udHJvbGxlcjphZiwkZG9jdW1lbnQ6YmYsXHJcbiRleGNlcHRpb25IYW5kbGVyOmNmLCRmaWx0ZXI6TGMsJCRmb3JjZVJlZmxvdzpkZiwkaW50ZXJwb2xhdGU6ZWYsJGludGVydmFsOmZmLCRodHRwOmdmLCRodHRwUGFyYW1TZXJpYWxpemVyOmhmLCRodHRwUGFyYW1TZXJpYWxpemVySlFMaWtlOmpmLCRodHRwQmFja2VuZDprZiwkeGhyRmFjdG9yeTpsZiwkbG9jYXRpb246bWYsJGxvZzpuZiwkcGFyc2U6b2YsJHJvb3RTY29wZTpwZiwkcTpxZiwkJHE6cmYsJHNjZTpzZiwkc2NlRGVsZWdhdGU6dGYsJHNuaWZmZXI6dWYsJHRlbXBsYXRlQ2FjaGU6dmYsJHRlbXBsYXRlUmVxdWVzdDp3ZiwkJHRlc3RhYmlsaXR5OnhmLCR0aW1lb3V0OnlmLCR3aW5kb3c6emYsJCRyQUY6QWYsJCRqcUxpdGU6QmYsJCRIYXNoTWFwOkNmLCQkY29va2llUmVhZGVyOkRmfSl9XSl9ZnVuY3Rpb24gZ2IoYSl7cmV0dXJuIGEucmVwbGFjZShFZixmdW5jdGlvbihhLGQsYyxlKXtyZXR1cm4gZT9jLnRvVXBwZXJDYXNlKCk6Y30pLnJlcGxhY2UoRmYsXCJNb3okMVwiKX1cclxuZnVuY3Rpb24gTWMoYSl7YT1hLm5vZGVUeXBlO3JldHVybiAxPT09YXx8IWF8fDk9PT1hfWZ1bmN0aW9uIE5jKGEsYil7dmFyIGQsYyxlPWIuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpLGY9W107aWYoVWIudGVzdChhKSl7ZD1kfHxlLmFwcGVuZENoaWxkKGIuY3JlYXRlRWxlbWVudChcImRpdlwiKSk7Yz0oR2YuZXhlYyhhKXx8W1wiXCIsXCJcIl0pWzFdLnRvTG93ZXJDYXNlKCk7Yz1uYVtjXXx8bmEuX2RlZmF1bHQ7ZC5pbm5lckhUTUw9Y1sxXSthLnJlcGxhY2UoSGYsXCI8JDE+PC8kMj5cIikrY1syXTtmb3IoYz1jWzBdO2MtLTspZD1kLmxhc3RDaGlsZDtmPWRiKGYsZC5jaGlsZE5vZGVzKTtkPWUuZmlyc3RDaGlsZDtkLnRleHRDb250ZW50PVwiXCJ9ZWxzZSBmLnB1c2goYi5jcmVhdGVUZXh0Tm9kZShhKSk7ZS50ZXh0Q29udGVudD1cIlwiO2UuaW5uZXJIVE1MPVwiXCI7bihmLGZ1bmN0aW9uKGEpe2UuYXBwZW5kQ2hpbGQoYSl9KTtyZXR1cm4gZX1mdW5jdGlvbiBFKGEpe2lmKGEgaW5zdGFuY2VvZiBFKXJldHVybiBhO1xyXG52YXIgYjtHKGEpJiYoYT1ZKGEpLGI9ITApO2lmKCEodGhpcyBpbnN0YW5jZW9mIEUpKXtpZihiJiZcIjxcIiE9YS5jaGFyQXQoMCkpdGhyb3cgVmIoXCJub3NlbFwiKTtyZXR1cm4gbmV3IEUoYSl9aWYoYil7Yj1aO3ZhciBkO2E9KGQ9SWYuZXhlYyhhKSk/W2IuY3JlYXRlRWxlbWVudChkWzFdKV06KGQ9TmMoYSxiKSk/ZC5jaGlsZE5vZGVzOltdfU9jKHRoaXMsYSl9ZnVuY3Rpb24gV2IoYSl7cmV0dXJuIGEuY2xvbmVOb2RlKCEwKX1mdW5jdGlvbiB3YihhLGIpe2J8fGhiKGEpO2lmKGEucXVlcnlTZWxlY3RvckFsbClmb3IodmFyIGQ9YS5xdWVyeVNlbGVjdG9yQWxsKFwiKlwiKSxjPTAsZT1kLmxlbmd0aDtjPGU7YysrKWhiKGRbY10pfWZ1bmN0aW9uIFBjKGEsYixkLGMpe2lmKHooYykpdGhyb3cgVmIoXCJvZmZhcmdzXCIpO3ZhciBlPShjPXhiKGEpKSYmYy5ldmVudHMsZj1jJiZjLmhhbmRsZTtpZihmKWlmKGIpe3ZhciBnPWZ1bmN0aW9uKGIpe3ZhciBjPWVbYl07eihkKSYmY2IoY3x8W10sZCk7XHJcbnooZCkmJmMmJjA8Yy5sZW5ndGh8fChhLnJlbW92ZUV2ZW50TGlzdGVuZXIoYixmLCExKSxkZWxldGUgZVtiXSl9O24oYi5zcGxpdChcIiBcIiksZnVuY3Rpb24oYSl7ZyhhKTt5YlthXSYmZyh5YlthXSl9KX1lbHNlIGZvcihiIGluIGUpXCIkZGVzdHJveVwiIT09YiYmYS5yZW1vdmVFdmVudExpc3RlbmVyKGIsZiwhMSksZGVsZXRlIGVbYl19ZnVuY3Rpb24gaGIoYSxiKXt2YXIgZD1hLm5nMzM5LGM9ZCYmaWJbZF07YyYmKGI/ZGVsZXRlIGMuZGF0YVtiXTooYy5oYW5kbGUmJihjLmV2ZW50cy4kZGVzdHJveSYmYy5oYW5kbGUoe30sXCIkZGVzdHJveVwiKSxQYyhhKSksZGVsZXRlIGliW2RdLGEubmczMzk9dSkpfWZ1bmN0aW9uIHhiKGEsYil7dmFyIGQ9YS5uZzMzOSxkPWQmJmliW2RdO2ImJiFkJiYoYS5uZzMzOT1kPSsrSmYsZD1pYltkXT17ZXZlbnRzOnt9LGRhdGE6e30saGFuZGxlOnV9KTtyZXR1cm4gZH1mdW5jdGlvbiBYYihhLGIsZCl7aWYoTWMoYSkpe3ZhciBjPXooZCksZT0hYyYmYiYmXHJcbiFKKGIpLGY9IWI7YT0oYT14YihhLCFlKSkmJmEuZGF0YTtpZihjKWFbYl09ZDtlbHNle2lmKGYpcmV0dXJuIGE7aWYoZSlyZXR1cm4gYSYmYVtiXTtMKGEsYil9fX1mdW5jdGlvbiB6YihhLGIpe3JldHVybiBhLmdldEF0dHJpYnV0ZT8tMTwoXCIgXCIrKGEuZ2V0QXR0cmlidXRlKFwiY2xhc3NcIil8fFwiXCIpK1wiIFwiKS5yZXBsYWNlKC9bXFxuXFx0XS9nLFwiIFwiKS5pbmRleE9mKFwiIFwiK2IrXCIgXCIpOiExfWZ1bmN0aW9uIEFiKGEsYil7YiYmYS5zZXRBdHRyaWJ1dGUmJm4oYi5zcGxpdChcIiBcIiksZnVuY3Rpb24oYil7YS5zZXRBdHRyaWJ1dGUoXCJjbGFzc1wiLFkoKFwiIFwiKyhhLmdldEF0dHJpYnV0ZShcImNsYXNzXCIpfHxcIlwiKStcIiBcIikucmVwbGFjZSgvW1xcblxcdF0vZyxcIiBcIikucmVwbGFjZShcIiBcIitZKGIpK1wiIFwiLFwiIFwiKSkpfSl9ZnVuY3Rpb24gQmIoYSxiKXtpZihiJiZhLnNldEF0dHJpYnV0ZSl7dmFyIGQ9KFwiIFwiKyhhLmdldEF0dHJpYnV0ZShcImNsYXNzXCIpfHxcIlwiKStcIiBcIikucmVwbGFjZSgvW1xcblxcdF0vZyxcclxuXCIgXCIpO24oYi5zcGxpdChcIiBcIiksZnVuY3Rpb24oYSl7YT1ZKGEpOy0xPT09ZC5pbmRleE9mKFwiIFwiK2ErXCIgXCIpJiYoZCs9YStcIiBcIil9KTthLnNldEF0dHJpYnV0ZShcImNsYXNzXCIsWShkKSl9fWZ1bmN0aW9uIE9jKGEsYil7aWYoYilpZihiLm5vZGVUeXBlKWFbYS5sZW5ndGgrK109YjtlbHNle3ZhciBkPWIubGVuZ3RoO2lmKFwibnVtYmVyXCI9PT10eXBlb2YgZCYmYi53aW5kb3chPT1iKXtpZihkKWZvcih2YXIgYz0wO2M8ZDtjKyspYVthLmxlbmd0aCsrXT1iW2NdfWVsc2UgYVthLmxlbmd0aCsrXT1ifX1mdW5jdGlvbiBRYyhhLGIpe3JldHVybiBDYihhLFwiJFwiKyhifHxcIm5nQ29udHJvbGxlclwiKStcIkNvbnRyb2xsZXJcIil9ZnVuY3Rpb24gQ2IoYSxiLGQpezk9PWEubm9kZVR5cGUmJihhPWEuZG9jdW1lbnRFbGVtZW50KTtmb3IoYj1LKGIpP2I6W2JdO2E7KXtmb3IodmFyIGM9MCxlPWIubGVuZ3RoO2M8ZTtjKyspaWYoeihkPUEuZGF0YShhLGJbY10pKSlyZXR1cm4gZDthPWEucGFyZW50Tm9kZXx8XHJcbjExPT09YS5ub2RlVHlwZSYmYS5ob3N0fX1mdW5jdGlvbiBSYyhhKXtmb3Iod2IoYSwhMCk7YS5maXJzdENoaWxkOylhLnJlbW92ZUNoaWxkKGEuZmlyc3RDaGlsZCl9ZnVuY3Rpb24gWWIoYSxiKXtifHx3YihhKTt2YXIgZD1hLnBhcmVudE5vZGU7ZCYmZC5yZW1vdmVDaGlsZChhKX1mdW5jdGlvbiBLZihhLGIpe2I9Ynx8UztpZihcImNvbXBsZXRlXCI9PT1iLmRvY3VtZW50LnJlYWR5U3RhdGUpYi5zZXRUaW1lb3V0KGEpO2Vsc2UgQShiKS5vbihcImxvYWRcIixhKX1mdW5jdGlvbiBTYyhhLGIpe3ZhciBkPURiW2IudG9Mb3dlckNhc2UoKV07cmV0dXJuIGQmJlRjW3RhKGEpXSYmZH1mdW5jdGlvbiBMZihhLGIpe3ZhciBkPWZ1bmN0aW9uKGMsZCl7Yy5pc0RlZmF1bHRQcmV2ZW50ZWQ9ZnVuY3Rpb24oKXtyZXR1cm4gYy5kZWZhdWx0UHJldmVudGVkfTt2YXIgZj1iW2R8fGMudHlwZV0sZz1mP2YubGVuZ3RoOjA7aWYoZyl7aWYoeChjLmltbWVkaWF0ZVByb3BhZ2F0aW9uU3RvcHBlZCkpe3ZhciBoPVxyXG5jLnN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbjtjLnN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbj1mdW5jdGlvbigpe2MuaW1tZWRpYXRlUHJvcGFnYXRpb25TdG9wcGVkPSEwO2Muc3RvcFByb3BhZ2F0aW9uJiZjLnN0b3BQcm9wYWdhdGlvbigpO2gmJmguY2FsbChjKX19Yy5pc0ltbWVkaWF0ZVByb3BhZ2F0aW9uU3RvcHBlZD1mdW5jdGlvbigpe3JldHVybiEwPT09Yy5pbW1lZGlhdGVQcm9wYWdhdGlvblN0b3BwZWR9O3ZhciBrPWYuc3BlY2lhbEhhbmRsZXJXcmFwcGVyfHxNZjsxPGcmJihmPVYoZikpO2Zvcih2YXIgbD0wO2w8ZztsKyspYy5pc0ltbWVkaWF0ZVByb3BhZ2F0aW9uU3RvcHBlZCgpfHxrKGEsYyxmW2xdKX19O2QuZWxlbT1hO3JldHVybiBkfWZ1bmN0aW9uIE1mKGEsYixkKXtkLmNhbGwoYSxiKX1mdW5jdGlvbiBOZihhLGIsZCl7dmFyIGM9Yi5yZWxhdGVkVGFyZ2V0O2MmJihjPT09YXx8T2YuY2FsbChhLGMpKXx8ZC5jYWxsKGEsYil9ZnVuY3Rpb24gQmYoKXt0aGlzLiRnZXQ9XHJcbmZ1bmN0aW9uKCl7cmV0dXJuIEwoRSx7aGFzQ2xhc3M6ZnVuY3Rpb24oYSxiKXthLmF0dHImJihhPWFbMF0pO3JldHVybiB6YihhLGIpfSxhZGRDbGFzczpmdW5jdGlvbihhLGIpe2EuYXR0ciYmKGE9YVswXSk7cmV0dXJuIEJiKGEsYil9LHJlbW92ZUNsYXNzOmZ1bmN0aW9uKGEsYil7YS5hdHRyJiYoYT1hWzBdKTtyZXR1cm4gQWIoYSxiKX19KX19ZnVuY3Rpb24gRmEoYSxiKXt2YXIgZD1hJiZhLiQkaGFzaEtleTtpZihkKXJldHVyblwiZnVuY3Rpb25cIj09PXR5cGVvZiBkJiYoZD1hLiQkaGFzaEtleSgpKSxkO2Q9dHlwZW9mIGE7cmV0dXJuIGQ9XCJmdW5jdGlvblwiPT1kfHxcIm9iamVjdFwiPT1kJiZudWxsIT09YT9hLiQkaGFzaEtleT1kK1wiOlwiKyhifHxXZCkoKTpkK1wiOlwiK2F9ZnVuY3Rpb24gVmEoYSxiKXtpZihiKXt2YXIgZD0wO3RoaXMubmV4dFVpZD1mdW5jdGlvbigpe3JldHVybisrZH19bihhLHRoaXMucHV0LHRoaXMpfWZ1bmN0aW9uIFVjKGEpe2E9YS50b1N0cmluZygpLnJlcGxhY2UoUGYsXHJcblwiXCIpO3JldHVybiBhLm1hdGNoKFFmKXx8YS5tYXRjaChSZil9ZnVuY3Rpb24gU2YoYSl7cmV0dXJuKGE9VWMoYSkpP1wiZnVuY3Rpb24oXCIrKGFbMV18fFwiXCIpLnJlcGxhY2UoL1tcXHNcXHJcXG5dKy8sXCIgXCIpK1wiKVwiOlwiZm5cIn1mdW5jdGlvbiBmYihhLGIpe2Z1bmN0aW9uIGQoYSl7cmV0dXJuIGZ1bmN0aW9uKGIsYyl7aWYoSihiKSluKGIscWMoYSkpO2Vsc2UgcmV0dXJuIGEoYixjKX19ZnVuY3Rpb24gYyhhLGIpe1VhKGEsXCJzZXJ2aWNlXCIpO2lmKEQoYil8fEsoYikpYj1yLmluc3RhbnRpYXRlKGIpO2lmKCFiLiRnZXQpdGhyb3cgR2EoXCJwZ2V0XCIsYSk7cmV0dXJuIHNbYStcIlByb3ZpZGVyXCJdPWJ9ZnVuY3Rpb24gZShhLGIpe3JldHVybiBmdW5jdGlvbigpe3ZhciBjPXQuaW52b2tlKGIsdGhpcyk7aWYoeChjKSl0aHJvdyBHYShcInVuZGVmXCIsYSk7cmV0dXJuIGN9fWZ1bmN0aW9uIGYoYSxiLGQpe3JldHVybiBjKGEseyRnZXQ6ITEhPT1kP2UoYSxiKTpifSl9ZnVuY3Rpb24gZyhhKXtzYih4KGEpfHxcclxuSyhhKSxcIm1vZHVsZXNUb0xvYWRcIixcIm5vdCBhbiBhcnJheVwiKTt2YXIgYj1bXSxjO24oYSxmdW5jdGlvbihhKXtmdW5jdGlvbiBkKGEpe3ZhciBiLGM7Yj0wO2ZvcihjPWEubGVuZ3RoO2I8YztiKyspe3ZhciBlPWFbYl0sZj1yLmdldChlWzBdKTtmW2VbMV1dLmFwcGx5KGYsZVsyXSl9fWlmKCFtLmdldChhKSl7bS5wdXQoYSwhMCk7dHJ5e0coYSk/KGM9VGIoYSksYj1iLmNvbmNhdChnKGMucmVxdWlyZXMpKS5jb25jYXQoYy5fcnVuQmxvY2tzKSxkKGMuX2ludm9rZVF1ZXVlKSxkKGMuX2NvbmZpZ0Jsb2NrcykpOkQoYSk/Yi5wdXNoKHIuaW52b2tlKGEpKTpLKGEpP2IucHVzaChyLmludm9rZShhKSk6VGEoYSxcIm1vZHVsZVwiKX1jYXRjaChlKXt0aHJvdyBLKGEpJiYoYT1hW2EubGVuZ3RoLTFdKSxlLm1lc3NhZ2UmJmUuc3RhY2smJi0xPT1lLnN0YWNrLmluZGV4T2YoZS5tZXNzYWdlKSYmKGU9ZS5tZXNzYWdlK1wiXFxuXCIrZS5zdGFjayksR2EoXCJtb2R1bGVyclwiLGEsZS5zdGFja3x8ZS5tZXNzYWdlfHxcclxuZSk7fX19KTtyZXR1cm4gYn1mdW5jdGlvbiBoKGEsYyl7ZnVuY3Rpb24gZChiLGUpe2lmKGEuaGFzT3duUHJvcGVydHkoYikpe2lmKGFbYl09PT1rKXRocm93IEdhKFwiY2RlcFwiLGIrXCIgPC0gXCIrbC5qb2luKFwiIDwtIFwiKSk7cmV0dXJuIGFbYl19dHJ5e3JldHVybiBsLnVuc2hpZnQoYiksYVtiXT1rLGFbYl09YyhiLGUpfWNhdGNoKGYpe3Rocm93IGFbYl09PT1rJiZkZWxldGUgYVtiXSxmO31maW5hbGx5e2wuc2hpZnQoKX19ZnVuY3Rpb24gZShhLGMsZixnKXtcInN0cmluZ1wiPT09dHlwZW9mIGYmJihnPWYsZj1udWxsKTt2YXIgaD1bXSxrPWZiLiQkYW5ub3RhdGUoYSxiLGcpLGwsbSxzO209MDtmb3IobD1rLmxlbmd0aDttPGw7bSsrKXtzPWtbbV07aWYoXCJzdHJpbmdcIiE9PXR5cGVvZiBzKXRocm93IEdhKFwiaXRrblwiLHMpO2gucHVzaChmJiZmLmhhc093blByb3BlcnR5KHMpP2Zbc106ZChzLGcpKX1LKGEpJiYoYT1hW2xdKTtyZXR1cm4gYS5hcHBseShjLGgpfXJldHVybntpbnZva2U6ZSxcclxuaW5zdGFudGlhdGU6ZnVuY3Rpb24oYSxiLGMpe3ZhciBkPU9iamVjdC5jcmVhdGUoKEsoYSk/YVthLmxlbmd0aC0xXTphKS5wcm90b3R5cGV8fG51bGwpO2E9ZShhLGQsYixjKTtyZXR1cm4gSihhKXx8RChhKT9hOmR9LGdldDpkLGFubm90YXRlOmZiLiQkYW5ub3RhdGUsaGFzOmZ1bmN0aW9uKGIpe3JldHVybiBzLmhhc093blByb3BlcnR5KGIrXCJQcm92aWRlclwiKXx8YS5oYXNPd25Qcm9wZXJ0eShiKX19fWI9ITA9PT1iO3ZhciBrPXt9LGw9W10sbT1uZXcgVmEoW10sITApLHM9eyRwcm92aWRlOntwcm92aWRlcjpkKGMpLGZhY3Rvcnk6ZChmKSxzZXJ2aWNlOmQoZnVuY3Rpb24oYSxiKXtyZXR1cm4gZihhLFtcIiRpbmplY3RvclwiLGZ1bmN0aW9uKGEpe3JldHVybiBhLmluc3RhbnRpYXRlKGIpfV0pfSksdmFsdWU6ZChmdW5jdGlvbihhLGIpe3JldHVybiBmKGEsa2EoYiksITEpfSksY29uc3RhbnQ6ZChmdW5jdGlvbihhLGIpe1VhKGEsXCJjb25zdGFudFwiKTtzW2FdPWI7QlthXT1ifSksXHJcbmRlY29yYXRvcjpmdW5jdGlvbihhLGIpe3ZhciBjPXIuZ2V0KGErXCJQcm92aWRlclwiKSxkPWMuJGdldDtjLiRnZXQ9ZnVuY3Rpb24oKXt2YXIgYT10Lmludm9rZShkLGMpO3JldHVybiB0Lmludm9rZShiLG51bGwseyRkZWxlZ2F0ZTphfSl9fX19LHI9cy4kaW5qZWN0b3I9aChzLGZ1bmN0aW9uKGEsYil7JC5pc1N0cmluZyhiKSYmbC5wdXNoKGIpO3Rocm93IEdhKFwidW5wclwiLGwuam9pbihcIiA8LSBcIikpO30pLEI9e30sUT1oKEIsZnVuY3Rpb24oYSxiKXt2YXIgYz1yLmdldChhK1wiUHJvdmlkZXJcIixiKTtyZXR1cm4gdC5pbnZva2UoYy4kZ2V0LGMsdSxhKX0pLHQ9UTtzLiRpbmplY3RvclByb3ZpZGVyPXskZ2V0OmthKFEpfTt2YXIgcD1nKGEpLHQ9US5nZXQoXCIkaW5qZWN0b3JcIik7dC5zdHJpY3REaT1iO24ocCxmdW5jdGlvbihhKXthJiZ0Lmludm9rZShhKX0pO3JldHVybiB0fWZ1bmN0aW9uIFRlKCl7dmFyIGE9ITA7dGhpcy5kaXNhYmxlQXV0b1Njcm9sbGluZz1mdW5jdGlvbigpe2E9XHJcbiExfTt0aGlzLiRnZXQ9W1wiJHdpbmRvd1wiLFwiJGxvY2F0aW9uXCIsXCIkcm9vdFNjb3BlXCIsZnVuY3Rpb24oYixkLGMpe2Z1bmN0aW9uIGUoYSl7dmFyIGI9bnVsbDtBcnJheS5wcm90b3R5cGUuc29tZS5jYWxsKGEsZnVuY3Rpb24oYSl7aWYoXCJhXCI9PT10YShhKSlyZXR1cm4gYj1hLCEwfSk7cmV0dXJuIGJ9ZnVuY3Rpb24gZihhKXtpZihhKXthLnNjcm9sbEludG9WaWV3KCk7dmFyIGM7Yz1nLnlPZmZzZXQ7RChjKT9jPWMoKTpQYihjKT8oYz1jWzBdLGM9XCJmaXhlZFwiIT09Yi5nZXRDb21wdXRlZFN0eWxlKGMpLnBvc2l0aW9uPzA6Yy5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS5ib3R0b20pOlUoYyl8fChjPTApO2MmJihhPWEuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkudG9wLGIuc2Nyb2xsQnkoMCxhLWMpKX1lbHNlIGIuc2Nyb2xsVG8oMCwwKX1mdW5jdGlvbiBnKGEpe2E9RyhhKT9hOmQuaGFzaCgpO3ZhciBiO2E/KGI9aC5nZXRFbGVtZW50QnlJZChhKSk/ZihiKTooYj1lKGguZ2V0RWxlbWVudHNCeU5hbWUoYSkpKT9cclxuZihiKTpcInRvcFwiPT09YSYmZihudWxsKTpmKG51bGwpfXZhciBoPWIuZG9jdW1lbnQ7YSYmYy4kd2F0Y2goZnVuY3Rpb24oKXtyZXR1cm4gZC5oYXNoKCl9LGZ1bmN0aW9uKGEsYil7YT09PWImJlwiXCI9PT1hfHxLZihmdW5jdGlvbigpe2MuJGV2YWxBc3luYyhnKX0pfSk7cmV0dXJuIGd9XX1mdW5jdGlvbiBqYihhLGIpe2lmKCFhJiYhYilyZXR1cm5cIlwiO2lmKCFhKXJldHVybiBiO2lmKCFiKXJldHVybiBhO0soYSkmJihhPWEuam9pbihcIiBcIikpO0soYikmJihiPWIuam9pbihcIiBcIikpO3JldHVybiBhK1wiIFwiK2J9ZnVuY3Rpb24gVGYoYSl7RyhhKSYmKGE9YS5zcGxpdChcIiBcIikpO3ZhciBiPVgoKTtuKGEsZnVuY3Rpb24oYSl7YS5sZW5ndGgmJihiW2FdPSEwKX0pO3JldHVybiBifWZ1bmN0aW9uIElhKGEpe3JldHVybiBKKGEpP2E6e319ZnVuY3Rpb24gVWYoYSxiLGQsYyl7ZnVuY3Rpb24gZShhKXt0cnl7YS5hcHBseShudWxsLHdhLmNhbGwoYXJndW1lbnRzLDEpKX1maW5hbGx5e2lmKFEtLSxcclxuMD09PVEpZm9yKDt0Lmxlbmd0aDspdHJ5e3QucG9wKCkoKX1jYXRjaChiKXtkLmVycm9yKGIpfX19ZnVuY3Rpb24gZigpe009bnVsbDtnKCk7aCgpfWZ1bmN0aW9uIGcoKXthOnt0cnl7cD1tLnN0YXRlO2JyZWFrIGF9Y2F0Y2goYSl7fXA9dm9pZCAwfXA9eChwKT9udWxsOnA7bGEocCxXKSYmKHA9Vyk7Vz1wfWZ1bmN0aW9uIGgoKXtpZih2IT09ay51cmwoKXx8eSE9PXApdj1rLnVybCgpLHk9cCxuKEYsZnVuY3Rpb24oYSl7YShrLnVybCgpLHApfSl9dmFyIGs9dGhpcyxsPWEubG9jYXRpb24sbT1hLmhpc3Rvcnkscz1hLnNldFRpbWVvdXQscj1hLmNsZWFyVGltZW91dCxCPXt9O2suaXNNb2NrPSExO3ZhciBRPTAsdD1bXTtrLiQkY29tcGxldGVPdXRzdGFuZGluZ1JlcXVlc3Q9ZTtrLiQkaW5jT3V0c3RhbmRpbmdSZXF1ZXN0Q291bnQ9ZnVuY3Rpb24oKXtRKyt9O2subm90aWZ5V2hlbk5vT3V0c3RhbmRpbmdSZXF1ZXN0cz1mdW5jdGlvbihhKXswPT09UT9hKCk6dC5wdXNoKGEpfTt2YXIgcCxcclxueSx2PWwuaHJlZix5YT1iLmZpbmQoXCJiYXNlXCIpLE09bnVsbDtnKCk7eT1wO2sudXJsPWZ1bmN0aW9uKGIsZCxlKXt4KGUpJiYoZT1udWxsKTtsIT09YS5sb2NhdGlvbiYmKGw9YS5sb2NhdGlvbik7bSE9PWEuaGlzdG9yeSYmKG09YS5oaXN0b3J5KTtpZihiKXt2YXIgZj15PT09ZTtpZih2PT09YiYmKCFjLmhpc3Rvcnl8fGYpKXJldHVybiBrO3ZhciBoPXYmJkphKHYpPT09SmEoYik7dj1iO3k9ZTtpZighYy5oaXN0b3J5fHxoJiZmKXtpZighaHx8TSlNPWI7ZD9sLnJlcGxhY2UoYik6aD8oZD1sLGU9Yi5pbmRleE9mKFwiI1wiKSxlPS0xPT09ZT9cIlwiOmIuc3Vic3RyKGUpLGQuaGFzaD1lKTpsLmhyZWY9YjtsLmhyZWYhPT1iJiYoTT1iKX1lbHNlIG1bZD9cInJlcGxhY2VTdGF0ZVwiOlwicHVzaFN0YXRlXCJdKGUsXCJcIixiKSxnKCkseT1wO3JldHVybiBrfXJldHVybiBNfHxsLmhyZWYucmVwbGFjZSgvJTI3L2csXCInXCIpfTtrLnN0YXRlPWZ1bmN0aW9uKCl7cmV0dXJuIHB9O3ZhciBGPVtdLEM9ITEsXHJcblc9bnVsbDtrLm9uVXJsQ2hhbmdlPWZ1bmN0aW9uKGIpe2lmKCFDKXtpZihjLmhpc3RvcnkpQShhKS5vbihcInBvcHN0YXRlXCIsZik7QShhKS5vbihcImhhc2hjaGFuZ2VcIixmKTtDPSEwfUYucHVzaChiKTtyZXR1cm4gYn07ay4kJGFwcGxpY2F0aW9uRGVzdHJveWVkPWZ1bmN0aW9uKCl7QShhKS5vZmYoXCJoYXNoY2hhbmdlIHBvcHN0YXRlXCIsZil9O2suJCRjaGVja1VybENoYW5nZT1oO2suYmFzZUhyZWY9ZnVuY3Rpb24oKXt2YXIgYT15YS5hdHRyKFwiaHJlZlwiKTtyZXR1cm4gYT9hLnJlcGxhY2UoL14oaHR0cHM/XFw6KT9cXC9cXC9bXlxcL10qLyxcIlwiKTpcIlwifTtrLmRlZmVyPWZ1bmN0aW9uKGEsYil7dmFyIGM7USsrO2M9cyhmdW5jdGlvbigpe2RlbGV0ZSBCW2NdO2UoYSl9LGJ8fDApO0JbY109ITA7cmV0dXJuIGN9O2suZGVmZXIuY2FuY2VsPWZ1bmN0aW9uKGEpe3JldHVybiBCW2FdPyhkZWxldGUgQlthXSxyKGEpLGUodyksITApOiExfX1mdW5jdGlvbiBaZSgpe3RoaXMuJGdldD1bXCIkd2luZG93XCIsXHJcblwiJGxvZ1wiLFwiJHNuaWZmZXJcIixcIiRkb2N1bWVudFwiLGZ1bmN0aW9uKGEsYixkLGMpe3JldHVybiBuZXcgVWYoYSxjLGIsZCl9XX1mdW5jdGlvbiAkZSgpe3RoaXMuJGdldD1mdW5jdGlvbigpe2Z1bmN0aW9uIGEoYSxjKXtmdW5jdGlvbiBlKGEpe2EhPXMmJihyP3I9PWEmJihyPWEubik6cj1hLGYoYS5uLGEucCksZihhLHMpLHM9YSxzLm49bnVsbCl9ZnVuY3Rpb24gZihhLGIpe2EhPWImJihhJiYoYS5wPWIpLGImJihiLm49YSkpfWlmKGEgaW4gYil0aHJvdyBQKFwiJGNhY2hlRmFjdG9yeVwiKShcImlpZFwiLGEpO3ZhciBnPTAsaD1MKHt9LGMse2lkOmF9KSxrPVgoKSxsPWMmJmMuY2FwYWNpdHl8fE51bWJlci5NQVhfVkFMVUUsbT1YKCkscz1udWxsLHI9bnVsbDtyZXR1cm4gYlthXT17cHV0OmZ1bmN0aW9uKGEsYil7aWYoIXgoYikpe2lmKGw8TnVtYmVyLk1BWF9WQUxVRSl7dmFyIGM9bVthXXx8KG1bYV09e2tleTphfSk7ZShjKX1hIGluIGt8fGcrKztrW2FdPWI7Zz5sJiZ0aGlzLnJlbW92ZShyLmtleSk7XHJcbnJldHVybiBifX0sZ2V0OmZ1bmN0aW9uKGEpe2lmKGw8TnVtYmVyLk1BWF9WQUxVRSl7dmFyIGI9bVthXTtpZighYilyZXR1cm47ZShiKX1yZXR1cm4ga1thXX0scmVtb3ZlOmZ1bmN0aW9uKGEpe2lmKGw8TnVtYmVyLk1BWF9WQUxVRSl7dmFyIGI9bVthXTtpZighYilyZXR1cm47Yj09cyYmKHM9Yi5wKTtiPT1yJiYocj1iLm4pO2YoYi5uLGIucCk7ZGVsZXRlIG1bYV19YSBpbiBrJiYoZGVsZXRlIGtbYV0sZy0tKX0scmVtb3ZlQWxsOmZ1bmN0aW9uKCl7az1YKCk7Zz0wO209WCgpO3M9cj1udWxsfSxkZXN0cm95OmZ1bmN0aW9uKCl7bT1oPWs9bnVsbDtkZWxldGUgYlthXX0saW5mbzpmdW5jdGlvbigpe3JldHVybiBMKHt9LGgse3NpemU6Z30pfX19dmFyIGI9e307YS5pbmZvPWZ1bmN0aW9uKCl7dmFyIGE9e307bihiLGZ1bmN0aW9uKGIsZSl7YVtlXT1iLmluZm8oKX0pO3JldHVybiBhfTthLmdldD1mdW5jdGlvbihhKXtyZXR1cm4gYlthXX07cmV0dXJuIGF9fWZ1bmN0aW9uIHZmKCl7dGhpcy4kZ2V0PVxyXG5bXCIkY2FjaGVGYWN0b3J5XCIsZnVuY3Rpb24oYSl7cmV0dXJuIGEoXCJ0ZW1wbGF0ZXNcIil9XX1mdW5jdGlvbiBFYyhhLGIpe2Z1bmN0aW9uIGQoYSxiLGMpe3ZhciBkPS9eXFxzKihbQCZdfD0oXFwqPykpKFxcPz8pXFxzKihcXHcqKVxccyokLyxlPXt9O24oYSxmdW5jdGlvbihhLGYpe3ZhciBnPWEubWF0Y2goZCk7aWYoIWcpdGhyb3cgaWEoXCJpc2NwXCIsYixmLGEsYz9cImNvbnRyb2xsZXIgYmluZGluZ3MgZGVmaW5pdGlvblwiOlwiaXNvbGF0ZSBzY29wZSBkZWZpbml0aW9uXCIpO2VbZl09e21vZGU6Z1sxXVswXSxjb2xsZWN0aW9uOlwiKlwiPT09Z1syXSxvcHRpb25hbDpcIj9cIj09PWdbM10sYXR0ck5hbWU6Z1s0XXx8Zn19KTtyZXR1cm4gZX1mdW5jdGlvbiBjKGEpe3ZhciBiPWEuY2hhckF0KDApO2lmKCFifHxiIT09SChiKSl0aHJvdyBpYShcImJhZGRpclwiLGEpO2lmKGEhPT1hLnRyaW0oKSl0aHJvdyBpYShcImJhZGRpclwiLGEpO312YXIgZT17fSxmPS9eXFxzKmRpcmVjdGl2ZVxcOlxccyooW1xcd1xcLV0rKVxccysoLiopJC8sXHJcbmc9LygoW1xcd1xcLV0rKSg/OlxcOihbXjtdKykpPzs/KS8saD1aZChcIm5nU3JjLG5nU3Jjc2V0LHNyYyxzcmNzZXRcIiksaz0vXig/OihcXF5cXF4/KT8oXFw/KT8oXFxeXFxePyk/KT8vLGw9L14ob25bYS16XSt8Zm9ybWFjdGlvbikkLzt0aGlzLmRpcmVjdGl2ZT1mdW5jdGlvbiByKGIsZil7VWEoYixcImRpcmVjdGl2ZVwiKTtHKGIpPyhjKGIpLHNiKGYsXCJkaXJlY3RpdmVGYWN0b3J5XCIpLGUuaGFzT3duUHJvcGVydHkoYil8fChlW2JdPVtdLGEuZmFjdG9yeShiK1wiRGlyZWN0aXZlXCIsW1wiJGluamVjdG9yXCIsXCIkZXhjZXB0aW9uSGFuZGxlclwiLGZ1bmN0aW9uKGEsYyl7dmFyIGY9W107bihlW2JdLGZ1bmN0aW9uKGUsZyl7dHJ5e3ZhciBoPWEuaW52b2tlKGUpO0QoaCk/aD17Y29tcGlsZTprYShoKX06IWguY29tcGlsZSYmaC5saW5rJiYoaC5jb21waWxlPWthKGgubGluaykpO2gucHJpb3JpdHk9aC5wcmlvcml0eXx8MDtoLmluZGV4PWc7aC5uYW1lPWgubmFtZXx8YjtoLnJlcXVpcmU9aC5yZXF1aXJlfHxcclxuaC5jb250cm9sbGVyJiZoLm5hbWU7aC5yZXN0cmljdD1oLnJlc3RyaWN0fHxcIkVBXCI7dmFyIGs9aCxsPWgsbT1oLm5hbWUscj17aXNvbGF0ZVNjb3BlOm51bGwsYmluZFRvQ29udHJvbGxlcjpudWxsfTtKKGwuc2NvcGUpJiYoITA9PT1sLmJpbmRUb0NvbnRyb2xsZXI/KHIuYmluZFRvQ29udHJvbGxlcj1kKGwuc2NvcGUsbSwhMCksci5pc29sYXRlU2NvcGU9e30pOnIuaXNvbGF0ZVNjb3BlPWQobC5zY29wZSxtLCExKSk7SihsLmJpbmRUb0NvbnRyb2xsZXIpJiYoci5iaW5kVG9Db250cm9sbGVyPWQobC5iaW5kVG9Db250cm9sbGVyLG0sITApKTtpZihKKHIuYmluZFRvQ29udHJvbGxlcikpe3ZhciBPPWwuY29udHJvbGxlcixRPWwuY29udHJvbGxlckFzO2lmKCFPKXRocm93IGlhKFwibm9jdHJsXCIsbSk7aWYoIURjKE8sUSkpdGhyb3cgaWEoXCJub2lkZW50XCIsbSk7fXZhciBoYT1rLiQkYmluZGluZ3M9cjtKKGhhLmlzb2xhdGVTY29wZSkmJihoLiQkaXNvbGF0ZUJpbmRpbmdzPWhhLmlzb2xhdGVTY29wZSk7XHJcbmguJCRtb2R1bGVOYW1lPWUuJCRtb2R1bGVOYW1lO2YucHVzaChoKX1jYXRjaChuKXtjKG4pfX0pO3JldHVybiBmfV0pKSxlW2JdLnB1c2goZikpOm4oYixxYyhyKSk7cmV0dXJuIHRoaXN9O3RoaXMuYUhyZWZTYW5pdGl6YXRpb25XaGl0ZWxpc3Q9ZnVuY3Rpb24oYSl7cmV0dXJuIHooYSk/KGIuYUhyZWZTYW5pdGl6YXRpb25XaGl0ZWxpc3QoYSksdGhpcyk6Yi5hSHJlZlNhbml0aXphdGlvbldoaXRlbGlzdCgpfTt0aGlzLmltZ1NyY1Nhbml0aXphdGlvbldoaXRlbGlzdD1mdW5jdGlvbihhKXtyZXR1cm4geihhKT8oYi5pbWdTcmNTYW5pdGl6YXRpb25XaGl0ZWxpc3QoYSksdGhpcyk6Yi5pbWdTcmNTYW5pdGl6YXRpb25XaGl0ZWxpc3QoKX07dmFyIG09ITA7dGhpcy5kZWJ1Z0luZm9FbmFibGVkPWZ1bmN0aW9uKGEpe3JldHVybiB6KGEpPyhtPWEsdGhpcyk6bX07dGhpcy4kZ2V0PVtcIiRpbmplY3RvclwiLFwiJGludGVycG9sYXRlXCIsXCIkZXhjZXB0aW9uSGFuZGxlclwiLFwiJHRlbXBsYXRlUmVxdWVzdFwiLFxyXG5cIiRwYXJzZVwiLFwiJGNvbnRyb2xsZXJcIixcIiRyb290U2NvcGVcIixcIiRkb2N1bWVudFwiLFwiJHNjZVwiLFwiJGFuaW1hdGVcIixcIiQkc2FuaXRpemVVcmlcIixmdW5jdGlvbihhLGIsYyxkLHAseSx2LHlhLE0sRixDKXtmdW5jdGlvbiBXKGEsYixjKXskLmlubmVySFRNTD1cIjxzcGFuIFwiK2IrXCI+XCI7Yj0kLmZpcnN0Q2hpbGQuYXR0cmlidXRlczt2YXIgZD1iWzBdO2IucmVtb3ZlTmFtZWRJdGVtKGQubmFtZSk7ZC52YWx1ZT1jO2EuYXR0cmlidXRlcy5zZXROYW1lZEl0ZW0oZCl9ZnVuY3Rpb24gTihhLGIpe3RyeXthLmFkZENsYXNzKGIpfWNhdGNoKGMpe319ZnVuY3Rpb24gTyhhLGIsYyxkLGUpe2EgaW5zdGFuY2VvZiBBfHwoYT1BKGEpKTtuKGEsZnVuY3Rpb24oYixjKXtiLm5vZGVUeXBlPT1RYSYmYi5ub2RlVmFsdWUubWF0Y2goL1xcUysvKSYmKGFbY109QShiKS53cmFwKFwiPHNwYW4+PC9zcGFuPlwiKS5wYXJlbnQoKVswXSl9KTt2YXIgZj1SKGEsYixhLGMsZCxlKTtPLiQkYWRkU2NvcGVDbGFzcyhhKTtcclxudmFyIGc9bnVsbDtyZXR1cm4gZnVuY3Rpb24oYixjLGQpe3NiKGIsXCJzY29wZVwiKTtlJiZlLm5lZWRzTmV3U2NvcGUmJihiPWIuJHBhcmVudC4kbmV3KCkpO2Q9ZHx8e307dmFyIGg9ZC5wYXJlbnRCb3VuZFRyYW5zY2x1ZGVGbixrPWQudHJhbnNjbHVkZUNvbnRyb2xsZXJzO2Q9ZC5mdXR1cmVQYXJlbnRFbGVtZW50O2gmJmguJCRib3VuZFRyYW5zY2x1ZGUmJihoPWguJCRib3VuZFRyYW5zY2x1ZGUpO2d8fChnPShkPWQmJmRbMF0pP1wiZm9yZWlnbm9iamVjdFwiIT09dGEoZCkmJmQudG9TdHJpbmcoKS5tYXRjaCgvU1ZHLyk/XCJzdmdcIjpcImh0bWxcIjpcImh0bWxcIik7ZD1cImh0bWxcIiE9PWc/QShVKGcsQShcIjxkaXY+XCIpLmFwcGVuZChhKS5odG1sKCkpKTpjP1NhLmNsb25lLmNhbGwoYSk6YTtpZihrKWZvcih2YXIgbCBpbiBrKWQuZGF0YShcIiRcIitsK1wiQ29udHJvbGxlclwiLGtbbF0uaW5zdGFuY2UpO08uJCRhZGRTY29wZUluZm8oZCxiKTtjJiZjKGQsYik7ZiYmZihiLGQsZCxoKTtyZXR1cm4gZH19XHJcbmZ1bmN0aW9uIFIoYSxiLGMsZCxlLGYpe2Z1bmN0aW9uIGcoYSxjLGQsZSl7dmFyIGYsayxsLG0scixCLHY7aWYocClmb3Iodj1BcnJheShjLmxlbmd0aCksbT0wO208aC5sZW5ndGg7bSs9MylmPWhbbV0sdltmXT1jW2ZdO2Vsc2Ugdj1jO209MDtmb3Iocj1oLmxlbmd0aDttPHI7KWs9dltoW20rK11dLGM9aFttKytdLGY9aFttKytdLGM/KGMuc2NvcGU/KGw9YS4kbmV3KCksTy4kJGFkZFNjb3BlSW5mbyhBKGspLGwpKTpsPWEsQj1jLnRyYW5zY2x1ZGVPblRoaXNFbGVtZW50P2hhKGEsYy50cmFuc2NsdWRlLGUpOiFjLnRlbXBsYXRlT25UaGlzRWxlbWVudCYmZT9lOiFlJiZiP2hhKGEsYik6bnVsbCxjKGYsbCxrLGQsQikpOmYmJmYoYSxrLmNoaWxkTm9kZXMsdSxlKX1mb3IodmFyIGg9W10sayxsLG0scixwLEI9MDtCPGEubGVuZ3RoO0IrKyl7az1uZXcga2E7bD1IYShhW0JdLFtdLGssMD09PUI/ZDp1LGUpOyhmPWwubGVuZ3RoP29hKGwsYVtCXSxrLGIsYyxudWxsLFtdLFtdLGYpOlxyXG5udWxsKSYmZi5zY29wZSYmTy4kJGFkZFNjb3BlQ2xhc3Moay4kJGVsZW1lbnQpO2s9ZiYmZi50ZXJtaW5hbHx8IShtPWFbQl0uY2hpbGROb2Rlcyl8fCFtLmxlbmd0aD9udWxsOlIobSxmPyhmLnRyYW5zY2x1ZGVPblRoaXNFbGVtZW50fHwhZi50ZW1wbGF0ZU9uVGhpc0VsZW1lbnQpJiZmLnRyYW5zY2x1ZGU6Yik7aWYoZnx8ayloLnB1c2goQixmLGspLHI9ITAscD1wfHxmO2Y9bnVsbH1yZXR1cm4gcj9nOm51bGx9ZnVuY3Rpb24gaGEoYSxiLGMpe3ZhciBkPWZ1bmN0aW9uKGQsZSxmLGcsaCl7ZHx8KGQ9YS4kbmV3KCExLGgpLGQuJCR0cmFuc2NsdWRlZD0hMCk7cmV0dXJuIGIoZCxlLHtwYXJlbnRCb3VuZFRyYW5zY2x1ZGVGbjpjLHRyYW5zY2x1ZGVDb250cm9sbGVyczpmLGZ1dHVyZVBhcmVudEVsZW1lbnQ6Z30pfSxlPWQuJCRzbG90cz1YKCksZjtmb3IoZiBpbiBiLiQkc2xvdHMpZVtmXT1iLiQkc2xvdHNbZl0/aGEoYSxiLiQkc2xvdHNbZl0sYyk6bnVsbDtyZXR1cm4gZH1mdW5jdGlvbiBIYShhLFxyXG5iLGMsZCxlKXt2YXIgaD1jLiRhdHRyLGs7c3dpdGNoKGEubm9kZVR5cGUpe2Nhc2UgMTpwYShiLHZhKHRhKGEpKSxcIkVcIixkLGUpO2Zvcih2YXIgbCxtLHIscD1hLmF0dHJpYnV0ZXMsQj0wLHY9cCYmcC5sZW5ndGg7Qjx2O0IrKyl7dmFyIEY9ITEsdD0hMTtsPXBbQl07az1sLm5hbWU7bT1ZKGwudmFsdWUpO2w9dmEoayk7aWYocj1qYS50ZXN0KGwpKWs9ay5yZXBsYWNlKFdjLFwiXCIpLnN1YnN0cig4KS5yZXBsYWNlKC9fKC4pL2csZnVuY3Rpb24oYSxiKXtyZXR1cm4gYi50b1VwcGVyQ2FzZSgpfSk7KGw9bC5tYXRjaChtYSkpJiZzYShsWzFdKSYmKEY9ayx0PWsuc3Vic3RyKDAsay5sZW5ndGgtNSkrXCJlbmRcIixrPWsuc3Vic3RyKDAsay5sZW5ndGgtNikpO2w9dmEoay50b0xvd2VyQ2FzZSgpKTtoW2xdPWs7aWYocnx8IWMuaGFzT3duUHJvcGVydHkobCkpY1tsXT1tLFNjKGEsbCkmJihjW2xdPSEwKTtUKGEsYixtLGwscik7cGEoYixsLFwiQVwiLGQsZSxGLHQpfWE9YS5jbGFzc05hbWU7SihhKSYmXHJcbihhPWEuYW5pbVZhbCk7aWYoRyhhKSYmXCJcIiE9PWEpZm9yKDtrPWcuZXhlYyhhKTspbD12YShrWzJdKSxwYShiLGwsXCJDXCIsZCxlKSYmKGNbbF09WShrWzNdKSksYT1hLnN1YnN0cihrLmluZGV4K2tbMF0ubGVuZ3RoKTticmVhaztjYXNlIFFhOmlmKDExPT09S2EpZm9yKDthLnBhcmVudE5vZGUmJmEubmV4dFNpYmxpbmcmJmEubmV4dFNpYmxpbmcubm9kZVR5cGU9PT1RYTspYS5ub2RlVmFsdWUrPWEubmV4dFNpYmxpbmcubm9kZVZhbHVlLGEucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChhLm5leHRTaWJsaW5nKTtTKGIsYS5ub2RlVmFsdWUpO2JyZWFrO2Nhc2UgODp0cnl7aWYoaz1mLmV4ZWMoYS5ub2RlVmFsdWUpKWw9dmEoa1sxXSkscGEoYixsLFwiTVwiLGQsZSkmJihjW2xdPVkoa1syXSkpfWNhdGNoKE8pe319Yi5zb3J0KGZhKTtyZXR1cm4gYn1mdW5jdGlvbiBxKGEsYixjKXt2YXIgZD1bXSxlPTA7aWYoYiYmYS5oYXNBdHRyaWJ1dGUmJmEuaGFzQXR0cmlidXRlKGIpKXtkb3tpZighYSl0aHJvdyBpYShcInV0ZXJkaXJcIixcclxuYixjKTsxPT1hLm5vZGVUeXBlJiYoYS5oYXNBdHRyaWJ1dGUoYikmJmUrKyxhLmhhc0F0dHJpYnV0ZShjKSYmZS0tKTtkLnB1c2goYSk7YT1hLm5leHRTaWJsaW5nfXdoaWxlKDA8ZSl9ZWxzZSBkLnB1c2goYSk7cmV0dXJuIEEoZCl9ZnVuY3Rpb24geihhLGIsYyl7cmV0dXJuIGZ1bmN0aW9uKGQsZSxmLGcsaCl7ZT1xKGVbMF0sYixjKTtyZXR1cm4gYShkLGUsZixnLGgpfX1mdW5jdGlvbiBaYihhLGIsYyxkLGUsZil7aWYoYSlyZXR1cm4gTyhiLGMsZCxlLGYpO3ZhciBnO3JldHVybiBmdW5jdGlvbigpe2d8fChnPU8oYixjLGQsZSxmKSxiPWM9Zj1udWxsKTtyZXR1cm4gZy5hcHBseSh0aGlzLGFyZ3VtZW50cyl9fWZ1bmN0aW9uIG9hKGEsYixkLGUsZixnLGgsbCxtKXtmdW5jdGlvbiByKGEsYixjLGQpe2lmKGEpe2MmJihhPXooYSxjLGQpKTthLnJlcXVpcmU9SS5yZXF1aXJlO2EuZGlyZWN0aXZlTmFtZT1zYTtpZihDPT09SXx8SS4kJGlzb2xhdGVTY29wZSlhPWRhKGEse2lzb2xhdGVTY29wZTohMH0pO1xyXG5oLnB1c2goYSl9aWYoYil7YyYmKGI9eihiLGMsZCkpO2IucmVxdWlyZT1JLnJlcXVpcmU7Yi5kaXJlY3RpdmVOYW1lPXNhO2lmKEM9PT1JfHxJLiQkaXNvbGF0ZVNjb3BlKWI9ZGEoYix7aXNvbGF0ZVNjb3BlOiEwfSk7bC5wdXNoKGIpfX1mdW5jdGlvbiBwKGEsYixjLGQpe3ZhciBlO2lmKEcoYikpe3ZhciBmPWIubWF0Y2goayk7Yj1iLnN1YnN0cmluZyhmWzBdLmxlbmd0aCk7dmFyIGc9ZlsxXXx8ZlszXSxmPVwiP1wiPT09ZlsyXTtcIl5eXCI9PT1nP2M9Yy5wYXJlbnQoKTplPShlPWQmJmRbYl0pJiZlLmluc3RhbmNlO2V8fChkPVwiJFwiK2IrXCJDb250cm9sbGVyXCIsZT1nP2MuaW5oZXJpdGVkRGF0YShkKTpjLmRhdGEoZCkpO2lmKCFlJiYhZil0aHJvdyBpYShcImN0cmVxXCIsYixhKTt9ZWxzZSBpZihLKGIpKWZvcihlPVtdLGc9MCxmPWIubGVuZ3RoO2c8ZjtnKyspZVtnXT1wKGEsYltnXSxjLGQpO3JldHVybiBlfHxudWxsfWZ1bmN0aW9uIEIoYSxiLGMsZCxlLGYpe3ZhciBnPVgoKSxoO2ZvcihoIGluIGQpe3ZhciBrPVxyXG5kW2hdLGw9eyRzY29wZTprPT09Q3x8ay4kJGlzb2xhdGVTY29wZT9lOmYsJGVsZW1lbnQ6YSwkYXR0cnM6YiwkdHJhbnNjbHVkZTpjfSxtPWsuY29udHJvbGxlcjtcIkBcIj09bSYmKG09YltrLm5hbWVdKTtsPXkobSxsLCEwLGsuY29udHJvbGxlckFzKTtnW2submFtZV09bDt5YXx8YS5kYXRhKFwiJFwiK2submFtZStcIkNvbnRyb2xsZXJcIixsLmluc3RhbmNlKX1yZXR1cm4gZ31mdW5jdGlvbiB2KGEsYyxlLGYsZyl7ZnVuY3Rpb24gayhhLGIsYyxkKXt2YXIgZTthYihhKXx8KGQ9YyxjPWIsYj1hLGE9dSk7eWEmJihlPXkpO2N8fChjPXlhP1IucGFyZW50KCk6Uik7aWYoZCl7dmFyIGY9Zy4kJHNsb3RzW2RdO2lmKGYpcmV0dXJuIGYoYSxiLGUsYyxxKTtpZih4KGYpKXRocm93IGlhKFwibm9zbG90XCIsZCx1YShSKSk7fWVsc2UgcmV0dXJuIGcoYSxiLGUsYyxxKX12YXIgbSxyLEYseSxRLFIsVztiPT09ZT8oZj1kLFI9ZC4kJGVsZW1lbnQpOihSPUEoZSksZj1uZXcga2EoUixkKSk7Rj1jO0M/cj1cclxuYy4kbmV3KCEwKTp0JiYoRj1jLiRwYXJlbnQpO2cmJihRPWssUS4kJGJvdW5kVHJhbnNjbHVkZT1nLFEuaXNTbG90RmlsbGVkPWZ1bmN0aW9uKGEpe3JldHVybiEhZy4kJHNsb3RzW2FdfSk7TiYmKHk9QihSLGYsUSxOLHIsYykpO0MmJihPLiQkYWRkU2NvcGVJbmZvKFIsciwhMCwhKGhhJiYoaGE9PT1DfHxoYT09PUMuJCRvcmlnaW5hbERpcmVjdGl2ZSkpKSxPLiQkYWRkU2NvcGVDbGFzcyhSLCEwKSxyLiQkaXNvbGF0ZUJpbmRpbmdzPUMuJCRpc29sYXRlQmluZGluZ3MsKFc9Y2EoYyxmLHIsci4kJGlzb2xhdGVCaW5kaW5ncyxDKSkmJnIuJG9uKFwiJGRlc3Ryb3lcIixXKSk7Zm9yKHZhciBWYyBpbiB5KXtXPU5bVmNdO3ZhciBuPXlbVmNdLE09Vy4kJGJpbmRpbmdzLmJpbmRUb0NvbnRyb2xsZXI7bi5pZGVudGlmaWVyJiZNJiYobT1jYShGLGYsbi5pbnN0YW5jZSxNLFcpKTt2YXIgSGE9bigpO0hhIT09bi5pbnN0YW5jZSYmKG4uaW5zdGFuY2U9SGEsUi5kYXRhKFwiJFwiK1cubmFtZStcIkNvbnRyb2xsZXJcIixcclxuSGEpLG0mJm0oKSxtPWNhKEYsZixuLmluc3RhbmNlLE0sVykpfWZhPTA7Zm9yKFQ9aC5sZW5ndGg7ZmE8VDtmYSsrKW09aFtmYV0sZWEobSxtLmlzb2xhdGVTY29wZT9yOmMsUixmLG0ucmVxdWlyZSYmcChtLmRpcmVjdGl2ZU5hbWUsbS5yZXF1aXJlLFIseSksUSk7dmFyIHE9YztDJiYoQy50ZW1wbGF0ZXx8bnVsbD09PUMudGVtcGxhdGVVcmwpJiYocT1yKTthJiZhKHEsZS5jaGlsZE5vZGVzLHUsZyk7Zm9yKGZhPWwubGVuZ3RoLTE7MDw9ZmE7ZmEtLSltPWxbZmFdLGVhKG0sbS5pc29sYXRlU2NvcGU/cjpjLFIsZixtLnJlcXVpcmUmJnAobS5kaXJlY3RpdmVOYW1lLG0ucmVxdWlyZSxSLHkpLFEpfW09bXx8e307Zm9yKHZhciBGPS1OdW1iZXIuTUFYX1ZBTFVFLHQ9bS5uZXdTY29wZURpcmVjdGl2ZSxOPW0uY29udHJvbGxlckRpcmVjdGl2ZXMsQz1tLm5ld0lzb2xhdGVTY29wZURpcmVjdGl2ZSxoYT1tLnRlbXBsYXRlRGlyZWN0aXZlLFI9bS5ub25UbGJUcmFuc2NsdWRlRGlyZWN0aXZlLFxyXG5XPSExLE09ITEseWE9bS5oYXNFbGVtZW50VHJhbnNjbHVkZURpcmVjdGl2ZSx3PWQuJCRlbGVtZW50PUEoYiksSSxzYSxvYSxIPWUsTCxwYT0hMSxTPSExLEUsZmE9MCxUPWEubGVuZ3RoO2ZhPFQ7ZmErKyl7ST1hW2ZhXTt2YXIgJD1JLiQkc3RhcnQsYmE9SS4kJGVuZDskJiYodz1xKGIsJCxiYSkpO29hPXU7aWYoRj5JLnByaW9yaXR5KWJyZWFrO2lmKEU9SS5zY29wZSlJLnRlbXBsYXRlVXJsfHwoSihFKT8oV2EoXCJuZXcvaXNvbGF0ZWQgc2NvcGVcIixDfHx0LEksdyksQz1JKTpXYShcIm5ldy9pc29sYXRlZCBzY29wZVwiLEMsSSx3KSksdD10fHxJO3NhPUkubmFtZTtpZighcGEmJihJLnJlcGxhY2UmJihJLnRlbXBsYXRlVXJsfHxJLnRlbXBsYXRlKXx8SS50cmFuc2NsdWRlJiYhSS4kJHRsYikpe2ZvcihFPWZhKzE7cGE9YVtFKytdOylpZihwYS50cmFuc2NsdWRlJiYhcGEuJCR0bGJ8fHBhLnJlcGxhY2UmJihwYS50ZW1wbGF0ZVVybHx8cGEudGVtcGxhdGUpKXtTPSEwO2JyZWFrfXBhPVxyXG4hMH0hSS50ZW1wbGF0ZVVybCYmSS5jb250cm9sbGVyJiYoRT1JLmNvbnRyb2xsZXIsTj1OfHxYKCksV2EoXCInXCIrc2ErXCInIGNvbnRyb2xsZXJcIixOW3NhXSxJLHcpLE5bc2FdPUkpO2lmKEU9SS50cmFuc2NsdWRlKWlmKFc9ITAsSS4kJHRsYnx8KFdhKFwidHJhbnNjbHVzaW9uXCIsUixJLHcpLFI9SSksXCJlbGVtZW50XCI9PUUpeWE9ITAsRj1JLnByaW9yaXR5LG9hPXcsdz1kLiQkZWxlbWVudD1BKFouY3JlYXRlQ29tbWVudChcIiBcIitzYStcIjogXCIrZFtzYV0rXCIgXCIpKSxiPXdbMF0sYWEoZix3YS5jYWxsKG9hLDApLGIpLEg9WmIoUyxvYSxlLEYsZyYmZy5uYW1lLHtub25UbGJUcmFuc2NsdWRlRGlyZWN0aXZlOlJ9KTtlbHNle3ZhciBWPVgoKTtvYT1BKFdiKGIpKS5jb250ZW50cygpO2lmKEooRSkpe29hPVtdO3ZhciBnYT1YKCksamE9WCgpO24oRSxmdW5jdGlvbihhLGIpe3ZhciBjPVwiP1wiPT09YS5jaGFyQXQoMCk7YT1jP2Euc3Vic3RyaW5nKDEpOmE7Z2FbYV09YjtWW2JdPW51bGw7amFbYl09XHJcbmN9KTtuKHcuY29udGVudHMoKSxmdW5jdGlvbihhKXt2YXIgYj1nYVt2YSh0YShhKSldO2I/KGphW2JdPSEwLFZbYl09VltiXXx8W10sVltiXS5wdXNoKGEpKTpvYS5wdXNoKGEpfSk7bihqYSxmdW5jdGlvbihhLGIpe2lmKCFhKXRocm93IGlhKFwicmVxc2xvdFwiLGIpO30pO2Zvcih2YXIgbGEgaW4gVilWW2xhXSYmKFZbbGFdPVpiKFMsVltsYV0sZSkpfXcuZW1wdHkoKTtIPVpiKFMsb2EsZSx1LHUse25lZWRzTmV3U2NvcGU6SS4kJGlzb2xhdGVTY29wZXx8SS4kJG5ld1Njb3BlfSk7SC4kJHNsb3RzPVZ9aWYoSS50ZW1wbGF0ZSlpZihNPSEwLFdhKFwidGVtcGxhdGVcIixoYSxJLHcpLGhhPUksRT1EKEkudGVtcGxhdGUpP0kudGVtcGxhdGUodyxkKTpJLnRlbXBsYXRlLEU9bmEoRSksSS5yZXBsYWNlKXtnPUk7b2E9VWIudGVzdChFKT9YYyhVKEkudGVtcGxhdGVOYW1lc3BhY2UsWShFKSkpOltdO2I9b2FbMF07aWYoMSE9b2EubGVuZ3RofHwxIT09Yi5ub2RlVHlwZSl0aHJvdyBpYShcInRwbHJ0XCIsXHJcbnNhLFwiXCIpO2FhKGYsdyxiKTtFPXskYXR0cjp7fX07dmFyIG1hPUhhKGIsW10sRSkscWE9YS5zcGxpY2UoZmErMSxhLmxlbmd0aC0oZmErMSkpOyhDfHx0KSYmUChtYSxDLHQpO2E9YS5jb25jYXQobWEpLmNvbmNhdChxYSk7WWMoZCxFKTtUPWEubGVuZ3RofWVsc2Ugdy5odG1sKEUpO2lmKEkudGVtcGxhdGVVcmwpTT0hMCxXYShcInRlbXBsYXRlXCIsaGEsSSx3KSxoYT1JLEkucmVwbGFjZSYmKGc9SSksdj1WZihhLnNwbGljZShmYSxhLmxlbmd0aC1mYSksdyxkLGYsVyYmSCxoLGwse2NvbnRyb2xsZXJEaXJlY3RpdmVzOk4sbmV3U2NvcGVEaXJlY3RpdmU6dCE9PUkmJnQsbmV3SXNvbGF0ZVNjb3BlRGlyZWN0aXZlOkMsdGVtcGxhdGVEaXJlY3RpdmU6aGEsbm9uVGxiVHJhbnNjbHVkZURpcmVjdGl2ZTpSfSksVD1hLmxlbmd0aDtlbHNlIGlmKEkuY29tcGlsZSl0cnl7TD1JLmNvbXBpbGUodyxkLEgpLEQoTCk/cihudWxsLEwsJCxiYSk6TCYmcihMLnByZSxMLnBvc3QsJCxiYSl9Y2F0Y2gocmEpe2MocmEsXHJcbnVhKHcpKX1JLnRlcm1pbmFsJiYodi50ZXJtaW5hbD0hMCxGPU1hdGgubWF4KEYsSS5wcmlvcml0eSkpfXYuc2NvcGU9dCYmITA9PT10LnNjb3BlO3YudHJhbnNjbHVkZU9uVGhpc0VsZW1lbnQ9Vzt2LnRlbXBsYXRlT25UaGlzRWxlbWVudD1NO3YudHJhbnNjbHVkZT1IO20uaGFzRWxlbWVudFRyYW5zY2x1ZGVEaXJlY3RpdmU9eWE7cmV0dXJuIHZ9ZnVuY3Rpb24gUChhLGIsYyl7Zm9yKHZhciBkPTAsZT1hLmxlbmd0aDtkPGU7ZCsrKWFbZF09UWIoYVtkXSx7JCRpc29sYXRlU2NvcGU6YiwkJG5ld1Njb3BlOmN9KX1mdW5jdGlvbiBwYShiLGQsZixnLGgsayxsKXtpZihkPT09aClyZXR1cm4gbnVsbDtoPW51bGw7aWYoZS5oYXNPd25Qcm9wZXJ0eShkKSl7dmFyIG07ZD1hLmdldChkK1wiRGlyZWN0aXZlXCIpO2Zvcih2YXIgcD0wLEI9ZC5sZW5ndGg7cDxCO3ArKyl0cnl7bT1kW3BdLCh4KGcpfHxnPm0ucHJpb3JpdHkpJiYtMSE9bS5yZXN0cmljdC5pbmRleE9mKGYpJiYoayYmKG09UWIobSxcclxueyQkc3RhcnQ6aywkJGVuZDpsfSkpLGIucHVzaChtKSxoPW0pfWNhdGNoKHYpe2Modil9fXJldHVybiBofWZ1bmN0aW9uIHNhKGIpe2lmKGUuaGFzT3duUHJvcGVydHkoYikpZm9yKHZhciBjPWEuZ2V0KGIrXCJEaXJlY3RpdmVcIiksZD0wLGY9Yy5sZW5ndGg7ZDxmO2QrKylpZihiPWNbZF0sYi5tdWx0aUVsZW1lbnQpcmV0dXJuITA7cmV0dXJuITF9ZnVuY3Rpb24gWWMoYSxiKXt2YXIgYz1iLiRhdHRyLGQ9YS4kYXR0cixlPWEuJCRlbGVtZW50O24oYSxmdW5jdGlvbihkLGUpe1wiJFwiIT1lLmNoYXJBdCgwKSYmKGJbZV0mJmJbZV0hPT1kJiYoZCs9KFwic3R5bGVcIj09PWU/XCI7XCI6XCIgXCIpK2JbZV0pLGEuJHNldChlLGQsITAsY1tlXSkpfSk7bihiLGZ1bmN0aW9uKGIsZil7XCJjbGFzc1wiPT1mPyhOKGUsYiksYVtcImNsYXNzXCJdPShhW1wiY2xhc3NcIl0/YVtcImNsYXNzXCJdK1wiIFwiOlwiXCIpK2IpOlwic3R5bGVcIj09Zj8oZS5hdHRyKFwic3R5bGVcIixlLmF0dHIoXCJzdHlsZVwiKStcIjtcIitiKSxhLnN0eWxlPShhLnN0eWxlP1xyXG5hLnN0eWxlK1wiO1wiOlwiXCIpK2IpOlwiJFwiPT1mLmNoYXJBdCgwKXx8YS5oYXNPd25Qcm9wZXJ0eShmKXx8KGFbZl09YixkW2ZdPWNbZl0pfSl9ZnVuY3Rpb24gVmYoYSxiLGMsZSxmLGcsaCxrKXt2YXIgbD1bXSxtLHIscD1iWzBdLEI9YS5zaGlmdCgpLHY9UWIoQix7dGVtcGxhdGVVcmw6bnVsbCx0cmFuc2NsdWRlOm51bGwscmVwbGFjZTpudWxsLCQkb3JpZ2luYWxEaXJlY3RpdmU6Qn0pLEY9RChCLnRlbXBsYXRlVXJsKT9CLnRlbXBsYXRlVXJsKGIsYyk6Qi50ZW1wbGF0ZVVybCx5PUIudGVtcGxhdGVOYW1lc3BhY2U7Yi5lbXB0eSgpO2QoRikudGhlbihmdW5jdGlvbihkKXt2YXIgdCxPO2Q9bmEoZCk7aWYoQi5yZXBsYWNlKXtkPVViLnRlc3QoZCk/WGMoVSh5LFkoZCkpKTpbXTt0PWRbMF07aWYoMSE9ZC5sZW5ndGh8fDEhPT10Lm5vZGVUeXBlKXRocm93IGlhKFwidHBscnRcIixCLm5hbWUsRik7ZD17JGF0dHI6e319O2FhKGUsYix0KTt2YXIgQz1IYSh0LFtdLGQpO0ooQi5zY29wZSkmJlxyXG5QKEMsITApO2E9Qy5jb25jYXQoYSk7WWMoYyxkKX1lbHNlIHQ9cCxiLmh0bWwoZCk7YS51bnNoaWZ0KHYpO209b2EoYSx0LGMsZixiLEIsZyxoLGspO24oZSxmdW5jdGlvbihhLGMpe2E9PXQmJihlW2NdPWJbMF0pfSk7Zm9yKHI9UihiWzBdLmNoaWxkTm9kZXMsZik7bC5sZW5ndGg7KXtkPWwuc2hpZnQoKTtPPWwuc2hpZnQoKTt2YXIgUT1sLnNoaWZ0KCksVz1sLnNoaWZ0KCksQz1iWzBdO2lmKCFkLiQkZGVzdHJveWVkKXtpZihPIT09cCl7dmFyIE09Ty5jbGFzc05hbWU7ay5oYXNFbGVtZW50VHJhbnNjbHVkZURpcmVjdGl2ZSYmQi5yZXBsYWNlfHwoQz1XYih0KSk7YWEoUSxBKE8pLEMpO04oQShDKSxNKX1PPW0udHJhbnNjbHVkZU9uVGhpc0VsZW1lbnQ/aGEoZCxtLnRyYW5zY2x1ZGUsVyk6VzttKHIsZCxDLGUsTyl9fWw9bnVsbH0pO3JldHVybiBmdW5jdGlvbihhLGIsYyxkLGUpe2E9ZTtiLiQkZGVzdHJveWVkfHwobD9sLnB1c2goYixjLGQsYSk6KG0udHJhbnNjbHVkZU9uVGhpc0VsZW1lbnQmJlxyXG4oYT1oYShiLG0udHJhbnNjbHVkZSxlKSksbShyLGIsYyxkLGEpKSl9fWZ1bmN0aW9uIGZhKGEsYil7dmFyIGM9Yi5wcmlvcml0eS1hLnByaW9yaXR5O3JldHVybiAwIT09Yz9jOmEubmFtZSE9PWIubmFtZT9hLm5hbWU8Yi5uYW1lPy0xOjE6YS5pbmRleC1iLmluZGV4fWZ1bmN0aW9uIFdhKGEsYixjLGQpe2Z1bmN0aW9uIGUoYSl7cmV0dXJuIGE/XCIgKG1vZHVsZTogXCIrYStcIilcIjpcIlwifWlmKGIpdGhyb3cgaWEoXCJtdWx0aWRpclwiLGIubmFtZSxlKGIuJCRtb2R1bGVOYW1lKSxjLm5hbWUsZShjLiQkbW9kdWxlTmFtZSksYSx1YShkKSk7fWZ1bmN0aW9uIFMoYSxjKXt2YXIgZD1iKGMsITApO2QmJmEucHVzaCh7cHJpb3JpdHk6MCxjb21waWxlOmZ1bmN0aW9uKGEpe2E9YS5wYXJlbnQoKTt2YXIgYj0hIWEubGVuZ3RoO2ImJk8uJCRhZGRCaW5kaW5nQ2xhc3MoYSk7cmV0dXJuIGZ1bmN0aW9uKGEsYyl7dmFyIGU9Yy5wYXJlbnQoKTtifHxPLiQkYWRkQmluZGluZ0NsYXNzKGUpO08uJCRhZGRCaW5kaW5nSW5mbyhlLFxyXG5kLmV4cHJlc3Npb25zKTthLiR3YXRjaChkLGZ1bmN0aW9uKGEpe2NbMF0ubm9kZVZhbHVlPWF9KX19fSl9ZnVuY3Rpb24gVShhLGIpe2E9SChhfHxcImh0bWxcIik7c3dpdGNoKGEpe2Nhc2UgXCJzdmdcIjpjYXNlIFwibWF0aFwiOnZhciBjPVouY3JlYXRlRWxlbWVudChcImRpdlwiKTtjLmlubmVySFRNTD1cIjxcIithK1wiPlwiK2IrXCI8L1wiK2ErXCI+XCI7cmV0dXJuIGMuY2hpbGROb2Rlc1swXS5jaGlsZE5vZGVzO2RlZmF1bHQ6cmV0dXJuIGJ9fWZ1bmN0aW9uIEUoYSxiKXtpZihcInNyY2RvY1wiPT1iKXJldHVybiBNLkhUTUw7dmFyIGM9dGEoYSk7aWYoXCJ4bGlua0hyZWZcIj09Ynx8XCJmb3JtXCI9PWMmJlwiYWN0aW9uXCI9PWJ8fFwiaW1nXCIhPWMmJihcInNyY1wiPT1ifHxcIm5nU3JjXCI9PWIpKXJldHVybiBNLlJFU09VUkNFX1VSTH1mdW5jdGlvbiBUKGEsYyxkLGUsZil7dmFyIGc9RShhLGUpO2Y9aFtlXXx8Zjt2YXIgaz1iKGQsITAsZyxmKTtpZihrKXtpZihcIm11bHRpcGxlXCI9PT1lJiZcInNlbGVjdFwiPT09dGEoYSkpdGhyb3cgaWEoXCJzZWxtdWx0aVwiLFxyXG51YShhKSk7Yy5wdXNoKHtwcmlvcml0eToxMDAsY29tcGlsZTpmdW5jdGlvbigpe3JldHVybntwcmU6ZnVuY3Rpb24oYSxjLGgpe2M9aC4kJG9ic2VydmVyc3x8KGguJCRvYnNlcnZlcnM9WCgpKTtpZihsLnRlc3QoZSkpdGhyb3cgaWEoXCJub2RvbWV2ZW50c1wiKTt2YXIgbT1oW2VdO20hPT1kJiYoaz1tJiZiKG0sITAsZyxmKSxkPW0pO2smJihoW2VdPWsoYSksKGNbZV18fChjW2VdPVtdKSkuJCRpbnRlcj0hMCwoaC4kJG9ic2VydmVycyYmaC4kJG9ic2VydmVyc1tlXS4kJHNjb3BlfHxhKS4kd2F0Y2goayxmdW5jdGlvbihhLGIpe1wiY2xhc3NcIj09PWUmJmEhPWI/aC4kdXBkYXRlQ2xhc3MoYSxiKTpoLiRzZXQoZSxhKX0pKX19fX0pfX1mdW5jdGlvbiBhYShhLGIsYyl7dmFyIGQ9YlswXSxlPWIubGVuZ3RoLGY9ZC5wYXJlbnROb2RlLGcsaDtpZihhKWZvcihnPTAsaD1hLmxlbmd0aDtnPGg7ZysrKWlmKGFbZ109PWQpe2FbZysrXT1jO2g9ZytlLTE7Zm9yKHZhciBrPWEubGVuZ3RoO2c8XHJcbms7ZysrLGgrKyloPGs/YVtnXT1hW2hdOmRlbGV0ZSBhW2ddO2EubGVuZ3RoLT1lLTE7YS5jb250ZXh0PT09ZCYmKGEuY29udGV4dD1jKTticmVha31mJiZmLnJlcGxhY2VDaGlsZChjLGQpO2E9Wi5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCk7Zm9yKGc9MDtnPGU7ZysrKWEuYXBwZW5kQ2hpbGQoYltnXSk7QS5oYXNEYXRhKGQpJiYoQS5kYXRhKGMsQS5kYXRhKGQpKSxBKGQpLm9mZihcIiRkZXN0cm95XCIpKTtBLmNsZWFuRGF0YShhLnF1ZXJ5U2VsZWN0b3JBbGwoXCIqXCIpKTtmb3IoZz0xO2c8ZTtnKyspZGVsZXRlIGJbZ107YlswXT1jO2IubGVuZ3RoPTF9ZnVuY3Rpb24gZGEoYSxiKXtyZXR1cm4gTChmdW5jdGlvbigpe3JldHVybiBhLmFwcGx5KG51bGwsYXJndW1lbnRzKX0sYSxiKX1mdW5jdGlvbiBlYShhLGIsZCxlLGYsZyl7dHJ5e2EoYixkLGUsZixnKX1jYXRjaChoKXtjKGgsdWEoZCkpfX1mdW5jdGlvbiBjYShhLGMsZCxlLGYpe3ZhciBnPVtdO24oZSxmdW5jdGlvbihlLGgpe3ZhciBrPVxyXG5lLmF0dHJOYW1lLGw9ZS5vcHRpb25hbCxtLHIsdixGO3N3aXRjaChlLm1vZGUpe2Nhc2UgXCJAXCI6bHx8cWEuY2FsbChjLGspfHwoZFtoXT1jW2tdPXZvaWQgMCk7Yy4kb2JzZXJ2ZShrLGZ1bmN0aW9uKGEpe0coYSkmJihkW2hdPWEpfSk7Yy4kJG9ic2VydmVyc1trXS4kJHNjb3BlPWE7RyhjW2tdKSYmKGRbaF09YihjW2tdKShhKSk7YnJlYWs7Y2FzZSBcIj1cIjppZighcWEuY2FsbChjLGspKXtpZihsKWJyZWFrO2Nba109dm9pZCAwfWlmKGwmJiFjW2tdKWJyZWFrO3I9cChjW2tdKTtGPXIubGl0ZXJhbD9sYTpmdW5jdGlvbihhLGIpe3JldHVybiBhPT09Ynx8YSE9PWEmJmIhPT1ifTt2PXIuYXNzaWdufHxmdW5jdGlvbigpe209ZFtoXT1yKGEpO3Rocm93IGlhKFwibm9uYXNzaWduXCIsY1trXSxmLm5hbWUpO307bT1kW2hdPXIoYSk7bD1mdW5jdGlvbihiKXtGKGIsZFtoXSl8fChGKGIsbSk/dihhLGI9ZFtoXSk6ZFtoXT1iKTtyZXR1cm4gbT1ifTtsLiRzdGF0ZWZ1bD0hMDtsPWUuY29sbGVjdGlvbj9cclxuYS4kd2F0Y2hDb2xsZWN0aW9uKGNba10sbCk6YS4kd2F0Y2gocChjW2tdLGwpLG51bGwsci5saXRlcmFsKTtnLnB1c2gobCk7YnJlYWs7Y2FzZSBcIiZcIjpyPWMuaGFzT3duUHJvcGVydHkoayk/cChjW2tdKTp3O2lmKHI9PT13JiZsKWJyZWFrO2RbaF09ZnVuY3Rpb24oYil7cmV0dXJuIHIoYSxiKX19fSk7cmV0dXJuIGcubGVuZ3RoJiZmdW5jdGlvbigpe2Zvcih2YXIgYT0wLGI9Zy5sZW5ndGg7YTxiOysrYSlnW2FdKCl9fXZhciBiYT0vXlxcdy8sJD1aLmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiksa2E9ZnVuY3Rpb24oYSxiKXtpZihiKXt2YXIgYz1PYmplY3Qua2V5cyhiKSxkLGUsZjtkPTA7Zm9yKGU9Yy5sZW5ndGg7ZDxlO2QrKylmPWNbZF0sdGhpc1tmXT1iW2ZdfWVsc2UgdGhpcy4kYXR0cj17fTt0aGlzLiQkZWxlbWVudD1hfTtrYS5wcm90b3R5cGU9eyRub3JtYWxpemU6dmEsJGFkZENsYXNzOmZ1bmN0aW9uKGEpe2EmJjA8YS5sZW5ndGgmJkYuYWRkQ2xhc3ModGhpcy4kJGVsZW1lbnQsXHJcbmEpfSwkcmVtb3ZlQ2xhc3M6ZnVuY3Rpb24oYSl7YSYmMDxhLmxlbmd0aCYmRi5yZW1vdmVDbGFzcyh0aGlzLiQkZWxlbWVudCxhKX0sJHVwZGF0ZUNsYXNzOmZ1bmN0aW9uKGEsYil7dmFyIGM9WmMoYSxiKTtjJiZjLmxlbmd0aCYmRi5hZGRDbGFzcyh0aGlzLiQkZWxlbWVudCxjKTsoYz1aYyhiLGEpKSYmYy5sZW5ndGgmJkYucmVtb3ZlQ2xhc3ModGhpcy4kJGVsZW1lbnQsYyl9LCRzZXQ6ZnVuY3Rpb24oYSxiLGQsZSl7dmFyIGY9U2ModGhpcy4kJGVsZW1lbnRbMF0sYSksZz0kY1thXSxoPWE7Zj8odGhpcy4kJGVsZW1lbnQucHJvcChhLGIpLGU9Zik6ZyYmKHRoaXNbZ109YixoPWcpO3RoaXNbYV09YjtlP3RoaXMuJGF0dHJbYV09ZTooZT10aGlzLiRhdHRyW2FdKXx8KHRoaXMuJGF0dHJbYV09ZT1BYyhhLFwiLVwiKSk7Zj10YSh0aGlzLiQkZWxlbWVudCk7aWYoXCJhXCI9PT1mJiYoXCJocmVmXCI9PT1hfHxcInhsaW5rSHJlZlwiPT09YSl8fFwiaW1nXCI9PT1mJiZcInNyY1wiPT09YSl0aGlzW2FdPVxyXG5iPUMoYixcInNyY1wiPT09YSk7ZWxzZSBpZihcImltZ1wiPT09ZiYmXCJzcmNzZXRcIj09PWEpe2Zvcih2YXIgZj1cIlwiLGc9WShiKSxrPS8oXFxzK1xcZCt4XFxzKix8XFxzK1xcZCt3XFxzKix8XFxzKyx8LFxccyspLyxrPS9cXHMvLnRlc3QoZyk/azovKCwpLyxnPWcuc3BsaXQoayksaz1NYXRoLmZsb29yKGcubGVuZ3RoLzIpLGw9MDtsPGs7bCsrKXZhciBtPTIqbCxmPWYrQyhZKGdbbV0pLCEwKSxmPWYrKFwiIFwiK1koZ1ttKzFdKSk7Zz1ZKGdbMipsXSkuc3BsaXQoL1xccy8pO2YrPUMoWShnWzBdKSwhMCk7Mj09PWcubGVuZ3RoJiYoZis9XCIgXCIrWShnWzFdKSk7dGhpc1thXT1iPWZ9ITEhPT1kJiYobnVsbD09PWJ8fHgoYik/dGhpcy4kJGVsZW1lbnQucmVtb3ZlQXR0cihlKTpiYS50ZXN0KGUpP3RoaXMuJCRlbGVtZW50LmF0dHIoZSxiKTpXKHRoaXMuJCRlbGVtZW50WzBdLGUsYikpOyhhPXRoaXMuJCRvYnNlcnZlcnMpJiZuKGFbaF0sZnVuY3Rpb24oYSl7dHJ5e2EoYil9Y2F0Y2goZCl7YyhkKX19KX0sJG9ic2VydmU6ZnVuY3Rpb24oYSxcclxuYil7dmFyIGM9dGhpcyxkPWMuJCRvYnNlcnZlcnN8fChjLiQkb2JzZXJ2ZXJzPVgoKSksZT1kW2FdfHwoZFthXT1bXSk7ZS5wdXNoKGIpO3YuJGV2YWxBc3luYyhmdW5jdGlvbigpe2UuJCRpbnRlcnx8IWMuaGFzT3duUHJvcGVydHkoYSl8fHgoY1thXSl8fGIoY1thXSl9KTtyZXR1cm4gZnVuY3Rpb24oKXtjYihlLGIpfX19O3ZhciBWPWIuc3RhcnRTeW1ib2woKSxnYT1iLmVuZFN5bWJvbCgpLG5hPVwie3tcIj09Vnx8XCJ9fVwiPT1nYT8kYTpmdW5jdGlvbihhKXtyZXR1cm4gYS5yZXBsYWNlKC9cXHtcXHsvZyxWKS5yZXBsYWNlKC99fS9nLGdhKX0samE9L15uZ0F0dHJbQS1aXS8sbWE9L14oLispU3RhcnQkLztPLiQkYWRkQmluZGluZ0luZm89bT9mdW5jdGlvbihhLGIpe3ZhciBjPWEuZGF0YShcIiRiaW5kaW5nXCIpfHxbXTtLKGIpP2M9Yy5jb25jYXQoYik6Yy5wdXNoKGIpO2EuZGF0YShcIiRiaW5kaW5nXCIsYyl9Onc7Ty4kJGFkZEJpbmRpbmdDbGFzcz1tP2Z1bmN0aW9uKGEpe04oYSxcIm5nLWJpbmRpbmdcIil9OlxyXG53O08uJCRhZGRTY29wZUluZm89bT9mdW5jdGlvbihhLGIsYyxkKXthLmRhdGEoYz9kP1wiJGlzb2xhdGVTY29wZU5vVGVtcGxhdGVcIjpcIiRpc29sYXRlU2NvcGVcIjpcIiRzY29wZVwiLGIpfTp3O08uJCRhZGRTY29wZUNsYXNzPW0/ZnVuY3Rpb24oYSxiKXtOKGEsYj9cIm5nLWlzb2xhdGUtc2NvcGVcIjpcIm5nLXNjb3BlXCIpfTp3O3JldHVybiBPfV19ZnVuY3Rpb24gdmEoYSl7cmV0dXJuIGdiKGEucmVwbGFjZShXYyxcIlwiKSl9ZnVuY3Rpb24gWmMoYSxiKXt2YXIgZD1cIlwiLGM9YS5zcGxpdCgvXFxzKy8pLGU9Yi5zcGxpdCgvXFxzKy8pLGY9MDthOmZvcig7ZjxjLmxlbmd0aDtmKyspe2Zvcih2YXIgZz1jW2ZdLGg9MDtoPGUubGVuZ3RoO2grKylpZihnPT1lW2hdKWNvbnRpbnVlIGE7ZCs9KDA8ZC5sZW5ndGg/XCIgXCI6XCJcIikrZ31yZXR1cm4gZH1mdW5jdGlvbiBYYyhhKXthPUEoYSk7dmFyIGI9YS5sZW5ndGg7aWYoMT49YilyZXR1cm4gYTtmb3IoO2ItLTspOD09PWFbYl0ubm9kZVR5cGUmJldmLmNhbGwoYSxcclxuYiwxKTtyZXR1cm4gYX1mdW5jdGlvbiBEYyhhLGIpe2lmKGImJkcoYikpcmV0dXJuIGI7aWYoRyhhKSl7dmFyIGQ9YWQuZXhlYyhhKTtpZihkKXJldHVybiBkWzNdfX1mdW5jdGlvbiBhZigpe3ZhciBhPXt9LGI9ITE7dGhpcy5yZWdpc3Rlcj1mdW5jdGlvbihiLGMpe1VhKGIsXCJjb250cm9sbGVyXCIpO0ooYik/TChhLGIpOmFbYl09Y307dGhpcy5hbGxvd0dsb2JhbHM9ZnVuY3Rpb24oKXtiPSEwfTt0aGlzLiRnZXQ9W1wiJGluamVjdG9yXCIsXCIkd2luZG93XCIsZnVuY3Rpb24oZCxjKXtmdW5jdGlvbiBlKGEsYixjLGQpe2lmKCFhfHwhSihhLiRzY29wZSkpdGhyb3cgUChcIiRjb250cm9sbGVyXCIpKFwibm9zY3BcIixkLGIpO2EuJHNjb3BlW2JdPWN9cmV0dXJuIGZ1bmN0aW9uKGYsZyxoLGspe3ZhciBsLG0scztoPSEwPT09aDtrJiZHKGspJiYocz1rKTtpZihHKGYpKXtrPWYubWF0Y2goYWQpO2lmKCFrKXRocm93IFhmKFwiY3RybGZtdFwiLGYpO209a1sxXTtzPXN8fGtbM107Zj1hLmhhc093blByb3BlcnR5KG0pP1xyXG5hW21dOkNjKGcuJHNjb3BlLG0sITApfHwoYj9DYyhjLG0sITApOnUpO1RhKGYsbSwhMCl9aWYoaClyZXR1cm4gaD0oSyhmKT9mW2YubGVuZ3RoLTFdOmYpLnByb3RvdHlwZSxsPU9iamVjdC5jcmVhdGUoaHx8bnVsbCkscyYmZShnLHMsbCxtfHxmLm5hbWUpLEwoZnVuY3Rpb24oKXt2YXIgYT1kLmludm9rZShmLGwsZyxtKTthIT09bCYmKEooYSl8fEQoYSkpJiYobD1hLHMmJmUoZyxzLGwsbXx8Zi5uYW1lKSk7cmV0dXJuIGx9LHtpbnN0YW5jZTpsLGlkZW50aWZpZXI6c30pO2w9ZC5pbnN0YW50aWF0ZShmLGcsbSk7cyYmZShnLHMsbCxtfHxmLm5hbWUpO3JldHVybiBsfX1dfWZ1bmN0aW9uIGJmKCl7dGhpcy4kZ2V0PVtcIiR3aW5kb3dcIixmdW5jdGlvbihhKXtyZXR1cm4gQShhLmRvY3VtZW50KX1dfWZ1bmN0aW9uIGNmKCl7dGhpcy4kZ2V0PVtcIiRsb2dcIixmdW5jdGlvbihhKXtyZXR1cm4gZnVuY3Rpb24oYixkKXthLmVycm9yLmFwcGx5KGEsYXJndW1lbnRzKX19XX1mdW5jdGlvbiAkYihhKXtyZXR1cm4gSihhKT9cclxuYmEoYSk/YS50b0lTT1N0cmluZygpOmViKGEpOmF9ZnVuY3Rpb24gaGYoKXt0aGlzLiRnZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24oYSl7aWYoIWEpcmV0dXJuXCJcIjt2YXIgYj1bXTtwYyhhLGZ1bmN0aW9uKGEsYyl7bnVsbD09PWF8fHgoYSl8fChLKGEpP24oYSxmdW5jdGlvbihhLGQpe2IucHVzaChnYShjKStcIj1cIitnYSgkYihhKSkpfSk6Yi5wdXNoKGdhKGMpK1wiPVwiK2dhKCRiKGEpKSkpfSk7cmV0dXJuIGIuam9pbihcIiZcIil9fX1mdW5jdGlvbiBqZigpe3RoaXMuJGdldD1mdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbihhKXtmdW5jdGlvbiBiKGEsZSxmKXtudWxsPT09YXx8eChhKXx8KEsoYSk/bihhLGZ1bmN0aW9uKGEsYyl7YihhLGUrXCJbXCIrKEooYSk/YzpcIlwiKStcIl1cIil9KTpKKGEpJiYhYmEoYSk/cGMoYSxmdW5jdGlvbihhLGMpe2IoYSxlKyhmP1wiXCI6XCJbXCIpK2MrKGY/XCJcIjpcIl1cIikpfSk6ZC5wdXNoKGdhKGUpK1wiPVwiK2dhKCRiKGEpKSkpfWlmKCFhKXJldHVyblwiXCI7dmFyIGQ9XHJcbltdO2IoYSxcIlwiLCEwKTtyZXR1cm4gZC5qb2luKFwiJlwiKX19fWZ1bmN0aW9uIGFjKGEsYil7aWYoRyhhKSl7dmFyIGQ9YS5yZXBsYWNlKFlmLFwiXCIpLnRyaW0oKTtpZihkKXt2YXIgYz1iKFwiQ29udGVudC1UeXBlXCIpOyhjPWMmJjA9PT1jLmluZGV4T2YoYmQpKXx8KGM9KGM9ZC5tYXRjaChaZikpJiYkZltjWzBdXS50ZXN0KGQpKTtjJiYoYT12YyhkKSl9fXJldHVybiBhfWZ1bmN0aW9uIGNkKGEpe3ZhciBiPVgoKSxkO0coYSk/bihhLnNwbGl0KFwiXFxuXCIpLGZ1bmN0aW9uKGEpe2Q9YS5pbmRleE9mKFwiOlwiKTt2YXIgZT1IKFkoYS5zdWJzdHIoMCxkKSkpO2E9WShhLnN1YnN0cihkKzEpKTtlJiYoYltlXT1iW2VdP2JbZV0rXCIsIFwiK2E6YSl9KTpKKGEpJiZuKGEsZnVuY3Rpb24oYSxkKXt2YXIgZj1IKGQpLGc9WShhKTtmJiYoYltmXT1iW2ZdP2JbZl0rXCIsIFwiK2c6Zyl9KTtyZXR1cm4gYn1mdW5jdGlvbiBkZChhKXt2YXIgYjtyZXR1cm4gZnVuY3Rpb24oZCl7Ynx8KGI9Y2QoYSkpO3JldHVybiBkP1xyXG4oZD1iW0goZCldLHZvaWQgMD09PWQmJihkPW51bGwpLGQpOmJ9fWZ1bmN0aW9uIGVkKGEsYixkLGMpe2lmKEQoYykpcmV0dXJuIGMoYSxiLGQpO24oYyxmdW5jdGlvbihjKXthPWMoYSxiLGQpfSk7cmV0dXJuIGF9ZnVuY3Rpb24gZ2YoKXt2YXIgYT10aGlzLmRlZmF1bHRzPXt0cmFuc2Zvcm1SZXNwb25zZTpbYWNdLHRyYW5zZm9ybVJlcXVlc3Q6W2Z1bmN0aW9uKGEpe3JldHVybiBKKGEpJiZcIltvYmplY3QgRmlsZV1cIiE9PXJhLmNhbGwoYSkmJlwiW29iamVjdCBCbG9iXVwiIT09cmEuY2FsbChhKSYmXCJbb2JqZWN0IEZvcm1EYXRhXVwiIT09cmEuY2FsbChhKT9lYihhKTphfV0saGVhZGVyczp7Y29tbW9uOntBY2NlcHQ6XCJhcHBsaWNhdGlvbi9qc29uLCB0ZXh0L3BsYWluLCAqLypcIn0scG9zdDpWKGJjKSxwdXQ6VihiYykscGF0Y2g6VihiYyl9LHhzcmZDb29raWVOYW1lOlwiWFNSRi1UT0tFTlwiLHhzcmZIZWFkZXJOYW1lOlwiWC1YU1JGLVRPS0VOXCIscGFyYW1TZXJpYWxpemVyOlwiJGh0dHBQYXJhbVNlcmlhbGl6ZXJcIn0sXHJcbmI9ITE7dGhpcy51c2VBcHBseUFzeW5jPWZ1bmN0aW9uKGEpe3JldHVybiB6KGEpPyhiPSEhYSx0aGlzKTpifTt2YXIgZD0hMDt0aGlzLnVzZUxlZ2FjeVByb21pc2VFeHRlbnNpb25zPWZ1bmN0aW9uKGEpe3JldHVybiB6KGEpPyhkPSEhYSx0aGlzKTpkfTt2YXIgYz10aGlzLmludGVyY2VwdG9ycz1bXTt0aGlzLiRnZXQ9W1wiJGh0dHBCYWNrZW5kXCIsXCIkJGNvb2tpZVJlYWRlclwiLFwiJGNhY2hlRmFjdG9yeVwiLFwiJHJvb3RTY29wZVwiLFwiJHFcIixcIiRpbmplY3RvclwiLGZ1bmN0aW9uKGUsZixnLGgsayxsKXtmdW5jdGlvbiBtKGIpe2Z1bmN0aW9uIGMoYSl7dmFyIGI9TCh7fSxhKTtiLmRhdGE9ZWQoYS5kYXRhLGEuaGVhZGVycyxhLnN0YXR1cyxmLnRyYW5zZm9ybVJlc3BvbnNlKTthPWEuc3RhdHVzO3JldHVybiAyMDA8PWEmJjMwMD5hP2I6ay5yZWplY3QoYil9ZnVuY3Rpb24gZShhLGIpe3ZhciBjLGQ9e307bihhLGZ1bmN0aW9uKGEsZSl7RChhKT8oYz1hKGIpLG51bGwhPWMmJihkW2VdPVxyXG5jKSk6ZFtlXT1hfSk7cmV0dXJuIGR9aWYoIUooYikpdGhyb3cgUChcIiRodHRwXCIpKFwiYmFkcmVxXCIsYik7aWYoIUcoYi51cmwpKXRocm93IFAoXCIkaHR0cFwiKShcImJhZHJlcVwiLGIudXJsKTt2YXIgZj1MKHttZXRob2Q6XCJnZXRcIix0cmFuc2Zvcm1SZXF1ZXN0OmEudHJhbnNmb3JtUmVxdWVzdCx0cmFuc2Zvcm1SZXNwb25zZTphLnRyYW5zZm9ybVJlc3BvbnNlLHBhcmFtU2VyaWFsaXplcjphLnBhcmFtU2VyaWFsaXplcn0sYik7Zi5oZWFkZXJzPWZ1bmN0aW9uKGIpe3ZhciBjPWEuaGVhZGVycyxkPUwoe30sYi5oZWFkZXJzKSxmLGcsaCxjPUwoe30sYy5jb21tb24sY1tIKGIubWV0aG9kKV0pO2E6Zm9yKGYgaW4gYyl7Zz1IKGYpO2ZvcihoIGluIGQpaWYoSChoKT09PWcpY29udGludWUgYTtkW2ZdPWNbZl19cmV0dXJuIGUoZCxWKGIpKX0oYik7Zi5tZXRob2Q9dWIoZi5tZXRob2QpO2YucGFyYW1TZXJpYWxpemVyPUcoZi5wYXJhbVNlcmlhbGl6ZXIpP2wuZ2V0KGYucGFyYW1TZXJpYWxpemVyKTpcclxuZi5wYXJhbVNlcmlhbGl6ZXI7dmFyIGc9W2Z1bmN0aW9uKGIpe3ZhciBkPWIuaGVhZGVycyxlPWVkKGIuZGF0YSxkZChkKSx1LGIudHJhbnNmb3JtUmVxdWVzdCk7eChlKSYmbihkLGZ1bmN0aW9uKGEsYil7XCJjb250ZW50LXR5cGVcIj09PUgoYikmJmRlbGV0ZSBkW2JdfSk7eChiLndpdGhDcmVkZW50aWFscykmJiF4KGEud2l0aENyZWRlbnRpYWxzKSYmKGIud2l0aENyZWRlbnRpYWxzPWEud2l0aENyZWRlbnRpYWxzKTtyZXR1cm4gcyhiLGUpLnRoZW4oYyxjKX0sdV0saD1rLndoZW4oZik7Zm9yKG4oUSxmdW5jdGlvbihhKXsoYS5yZXF1ZXN0fHxhLnJlcXVlc3RFcnJvcikmJmcudW5zaGlmdChhLnJlcXVlc3QsYS5yZXF1ZXN0RXJyb3IpOyhhLnJlc3BvbnNlfHxhLnJlc3BvbnNlRXJyb3IpJiZnLnB1c2goYS5yZXNwb25zZSxhLnJlc3BvbnNlRXJyb3IpfSk7Zy5sZW5ndGg7KXtiPWcuc2hpZnQoKTt2YXIgbT1nLnNoaWZ0KCksaD1oLnRoZW4oYixtKX1kPyhoLnN1Y2Nlc3M9ZnVuY3Rpb24oYSl7VGEoYSxcclxuXCJmblwiKTtoLnRoZW4oZnVuY3Rpb24oYil7YShiLmRhdGEsYi5zdGF0dXMsYi5oZWFkZXJzLGYpfSk7cmV0dXJuIGh9LGguZXJyb3I9ZnVuY3Rpb24oYSl7VGEoYSxcImZuXCIpO2gudGhlbihudWxsLGZ1bmN0aW9uKGIpe2EoYi5kYXRhLGIuc3RhdHVzLGIuaGVhZGVycyxmKX0pO3JldHVybiBofSk6KGguc3VjY2Vzcz1mZChcInN1Y2Nlc3NcIiksaC5lcnJvcj1mZChcImVycm9yXCIpKTtyZXR1cm4gaH1mdW5jdGlvbiBzKGMsZCl7ZnVuY3Rpb24gZyhhLGMsZCxlKXtmdW5jdGlvbiBmKCl7bChjLGEsZCxlKX1uJiYoMjAwPD1hJiYzMDA+YT9uLnB1dChSLFthLGMsY2QoZCksZV0pOm4ucmVtb3ZlKFIpKTtiP2guJGFwcGx5QXN5bmMoZik6KGYoKSxoLiQkcGhhc2V8fGguJGFwcGx5KCkpfWZ1bmN0aW9uIGwoYSxiLGQsZSl7Yj0tMTw9Yj9iOjA7KDIwMDw9YiYmMzAwPmI/Ri5yZXNvbHZlOkYucmVqZWN0KSh7ZGF0YTphLHN0YXR1czpiLGhlYWRlcnM6ZGQoZCksY29uZmlnOmMsc3RhdHVzVGV4dDplfSl9XHJcbmZ1bmN0aW9uIHMoYSl7bChhLmRhdGEsYS5zdGF0dXMsVihhLmhlYWRlcnMoKSksYS5zdGF0dXNUZXh0KX1mdW5jdGlvbiBRKCl7dmFyIGE9bS5wZW5kaW5nUmVxdWVzdHMuaW5kZXhPZihjKTstMSE9PWEmJm0ucGVuZGluZ1JlcXVlc3RzLnNwbGljZShhLDEpfXZhciBGPWsuZGVmZXIoKSxDPUYucHJvbWlzZSxuLE4sTz1jLmhlYWRlcnMsUj1yKGMudXJsLGMucGFyYW1TZXJpYWxpemVyKGMucGFyYW1zKSk7bS5wZW5kaW5nUmVxdWVzdHMucHVzaChjKTtDLnRoZW4oUSxRKTshYy5jYWNoZSYmIWEuY2FjaGV8fCExPT09Yy5jYWNoZXx8XCJHRVRcIiE9PWMubWV0aG9kJiZcIkpTT05QXCIhPT1jLm1ldGhvZHx8KG49SihjLmNhY2hlKT9jLmNhY2hlOkooYS5jYWNoZSk/YS5jYWNoZTpCKTtuJiYoTj1uLmdldChSKSx6KE4pP04mJkQoTi50aGVuKT9OLnRoZW4ocyxzKTpLKE4pP2woTlsxXSxOWzBdLFYoTlsyXSksTlszXSk6bChOLDIwMCx7fSxcIk9LXCIpOm4ucHV0KFIsQykpO3goTikmJigoTj1nZChjLnVybCk/XHJcbmYoKVtjLnhzcmZDb29raWVOYW1lfHxhLnhzcmZDb29raWVOYW1lXTp1KSYmKE9bYy54c3JmSGVhZGVyTmFtZXx8YS54c3JmSGVhZGVyTmFtZV09TiksZShjLm1ldGhvZCxSLGQsZyxPLGMudGltZW91dCxjLndpdGhDcmVkZW50aWFscyxjLnJlc3BvbnNlVHlwZSkpO3JldHVybiBDfWZ1bmN0aW9uIHIoYSxiKXswPGIubGVuZ3RoJiYoYSs9KC0xPT1hLmluZGV4T2YoXCI/XCIpP1wiP1wiOlwiJlwiKStiKTtyZXR1cm4gYX12YXIgQj1nKFwiJGh0dHBcIik7YS5wYXJhbVNlcmlhbGl6ZXI9RyhhLnBhcmFtU2VyaWFsaXplcik/bC5nZXQoYS5wYXJhbVNlcmlhbGl6ZXIpOmEucGFyYW1TZXJpYWxpemVyO3ZhciBRPVtdO24oYyxmdW5jdGlvbihhKXtRLnVuc2hpZnQoRyhhKT9sLmdldChhKTpsLmludm9rZShhKSl9KTttLnBlbmRpbmdSZXF1ZXN0cz1bXTsoZnVuY3Rpb24oYSl7bihhcmd1bWVudHMsZnVuY3Rpb24oYSl7bVthXT1mdW5jdGlvbihiLGMpe3JldHVybiBtKEwoe30sY3x8e30se21ldGhvZDphLFxyXG51cmw6Yn0pKX19KX0pKFwiZ2V0XCIsXCJkZWxldGVcIixcImhlYWRcIixcImpzb25wXCIpOyhmdW5jdGlvbihhKXtuKGFyZ3VtZW50cyxmdW5jdGlvbihhKXttW2FdPWZ1bmN0aW9uKGIsYyxkKXtyZXR1cm4gbShMKHt9LGR8fHt9LHttZXRob2Q6YSx1cmw6YixkYXRhOmN9KSl9fSl9KShcInBvc3RcIixcInB1dFwiLFwicGF0Y2hcIik7bS5kZWZhdWx0cz1hO3JldHVybiBtfV19ZnVuY3Rpb24gbGYoKXt0aGlzLiRnZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gbmV3IFMuWE1MSHR0cFJlcXVlc3R9fX1mdW5jdGlvbiBrZigpe3RoaXMuJGdldD1bXCIkYnJvd3NlclwiLFwiJHdpbmRvd1wiLFwiJGRvY3VtZW50XCIsXCIkeGhyRmFjdG9yeVwiLGZ1bmN0aW9uKGEsYixkLGMpe3JldHVybiBhZyhhLGMsYS5kZWZlcixiLmFuZ3VsYXIuY2FsbGJhY2tzLGRbMF0pfV19ZnVuY3Rpb24gYWcoYSxiLGQsYyxlKXtmdW5jdGlvbiBmKGEsYixkKXt2YXIgZj1lLmNyZWF0ZUVsZW1lbnQoXCJzY3JpcHRcIiksbT1udWxsO1xyXG5mLnR5cGU9XCJ0ZXh0L2phdmFzY3JpcHRcIjtmLnNyYz1hO2YuYXN5bmM9ITA7bT1mdW5jdGlvbihhKXtmLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJsb2FkXCIsbSwhMSk7Zi5yZW1vdmVFdmVudExpc3RlbmVyKFwiZXJyb3JcIixtLCExKTtlLmJvZHkucmVtb3ZlQ2hpbGQoZik7Zj1udWxsO3ZhciBnPS0xLEI9XCJ1bmtub3duXCI7YSYmKFwibG9hZFwiIT09YS50eXBlfHxjW2JdLmNhbGxlZHx8KGE9e3R5cGU6XCJlcnJvclwifSksQj1hLnR5cGUsZz1cImVycm9yXCI9PT1hLnR5cGU/NDA0OjIwMCk7ZCYmZChnLEIpfTtmLmFkZEV2ZW50TGlzdGVuZXIoXCJsb2FkXCIsbSwhMSk7Zi5hZGRFdmVudExpc3RlbmVyKFwiZXJyb3JcIixtLCExKTtlLmJvZHkuYXBwZW5kQ2hpbGQoZik7cmV0dXJuIG19cmV0dXJuIGZ1bmN0aW9uKGUsaCxrLGwsbSxzLHIsQil7ZnVuY3Rpb24gUSgpe3kmJnkoKTt2JiZ2LmFib3J0KCl9ZnVuY3Rpb24gdChiLGMsZSxmLGcpe3ooTSkmJmQuY2FuY2VsKE0pO3k9dj1udWxsO2IoYyxlLGYsZyk7XHJcbmEuJCRjb21wbGV0ZU91dHN0YW5kaW5nUmVxdWVzdCh3KX1hLiQkaW5jT3V0c3RhbmRpbmdSZXF1ZXN0Q291bnQoKTtoPWh8fGEudXJsKCk7aWYoXCJqc29ucFwiPT1IKGUpKXt2YXIgcD1cIl9cIisoYy5jb3VudGVyKyspLnRvU3RyaW5nKDM2KTtjW3BdPWZ1bmN0aW9uKGEpe2NbcF0uZGF0YT1hO2NbcF0uY2FsbGVkPSEwfTt2YXIgeT1mKGgucmVwbGFjZShcIkpTT05fQ0FMTEJBQ0tcIixcImFuZ3VsYXIuY2FsbGJhY2tzLlwiK3ApLHAsZnVuY3Rpb24oYSxiKXt0KGwsYSxjW3BdLmRhdGEsXCJcIixiKTtjW3BdPXd9KX1lbHNle3ZhciB2PWIoZSxoKTt2Lm9wZW4oZSxoLCEwKTtuKG0sZnVuY3Rpb24oYSxiKXt6KGEpJiZ2LnNldFJlcXVlc3RIZWFkZXIoYixhKX0pO3Yub25sb2FkPWZ1bmN0aW9uKCl7dmFyIGE9di5zdGF0dXNUZXh0fHxcIlwiLGI9XCJyZXNwb25zZVwiaW4gdj92LnJlc3BvbnNlOnYucmVzcG9uc2VUZXh0LGM9MTIyMz09PXYuc3RhdHVzPzIwNDp2LnN0YXR1czswPT09YyYmKGM9Yj8yMDA6XHJcblwiZmlsZVwiPT16YShoKS5wcm90b2NvbD80MDQ6MCk7dChsLGMsYix2LmdldEFsbFJlc3BvbnNlSGVhZGVycygpLGEpfTtlPWZ1bmN0aW9uKCl7dChsLC0xLG51bGwsbnVsbCxcIlwiKX07di5vbmVycm9yPWU7di5vbmFib3J0PWU7ciYmKHYud2l0aENyZWRlbnRpYWxzPSEwKTtpZihCKXRyeXt2LnJlc3BvbnNlVHlwZT1CfWNhdGNoKHEpe2lmKFwianNvblwiIT09Qil0aHJvdyBxO312LnNlbmQoeChrKT9udWxsOmspfWlmKDA8cyl2YXIgTT1kKFEscyk7ZWxzZSBzJiZEKHMudGhlbikmJnMudGhlbihRKX19ZnVuY3Rpb24gZWYoKXt2YXIgYT1cInt7XCIsYj1cIn19XCI7dGhpcy5zdGFydFN5bWJvbD1mdW5jdGlvbihiKXtyZXR1cm4gYj8oYT1iLHRoaXMpOmF9O3RoaXMuZW5kU3ltYm9sPWZ1bmN0aW9uKGEpe3JldHVybiBhPyhiPWEsdGhpcyk6Yn07dGhpcy4kZ2V0PVtcIiRwYXJzZVwiLFwiJGV4Y2VwdGlvbkhhbmRsZXJcIixcIiRzY2VcIixmdW5jdGlvbihkLGMsZSl7ZnVuY3Rpb24gZihhKXtyZXR1cm5cIlxcXFxcXFxcXFxcXFwiK1xyXG5hfWZ1bmN0aW9uIGcoYyl7cmV0dXJuIGMucmVwbGFjZShzLGEpLnJlcGxhY2UocixiKX1mdW5jdGlvbiBoKGEsYixjLGQpe3ZhciBlO3JldHVybiBlPWEuJHdhdGNoKGZ1bmN0aW9uKGEpe2UoKTtyZXR1cm4gZChhKX0sYixjKX1mdW5jdGlvbiBrKGYsayxzLHIpe2Z1bmN0aW9uIHkoYSl7dHJ5e3ZhciBiPWE7YT1zP2UuZ2V0VHJ1c3RlZChzLGIpOmUudmFsdWVPZihiKTt2YXIgZDtpZihyJiYheihhKSlkPWE7ZWxzZSBpZihudWxsPT1hKWQ9XCJcIjtlbHNle3N3aXRjaCh0eXBlb2YgYSl7Y2FzZSBcInN0cmluZ1wiOmJyZWFrO2Nhc2UgXCJudW1iZXJcIjphPVwiXCIrYTticmVhaztkZWZhdWx0OmE9ZWIoYSl9ZD1hfXJldHVybiBkfWNhdGNoKGcpe2MoTGEuaW50ZXJyKGYsZykpfX1pZighZi5sZW5ndGh8fC0xPT09Zi5pbmRleE9mKGEpKXt2YXIgdjtrfHwoaz1nKGYpLHY9a2Eoayksdi5leHA9Zix2LmV4cHJlc3Npb25zPVtdLHYuJCR3YXRjaERlbGVnYXRlPWgpO3JldHVybiB2fXI9ISFyO3ZhciBuLFxyXG5xLEY9MCxDPVtdLFc9W107dj1mLmxlbmd0aDtmb3IodmFyIE49W10sTz1bXTtGPHY7KWlmKC0xIT0obj1mLmluZGV4T2YoYSxGKSkmJi0xIT0ocT1mLmluZGV4T2YoYixuK2wpKSlGIT09biYmTi5wdXNoKGcoZi5zdWJzdHJpbmcoRixuKSkpLEY9Zi5zdWJzdHJpbmcobitsLHEpLEMucHVzaChGKSxXLnB1c2goZChGLHkpKSxGPXErbSxPLnB1c2goTi5sZW5ndGgpLE4ucHVzaChcIlwiKTtlbHNle0YhPT12JiZOLnB1c2goZyhmLnN1YnN0cmluZyhGKSkpO2JyZWFrfXMmJjE8Ti5sZW5ndGgmJkxhLnRocm93Tm9jb25jYXQoZik7aWYoIWt8fEMubGVuZ3RoKXt2YXIgUj1mdW5jdGlvbihhKXtmb3IodmFyIGI9MCxjPUMubGVuZ3RoO2I8YztiKyspe2lmKHImJngoYVtiXSkpcmV0dXJuO05bT1tiXV09YVtiXX1yZXR1cm4gTi5qb2luKFwiXCIpfTtyZXR1cm4gTChmdW5jdGlvbihhKXt2YXIgYj0wLGQ9Qy5sZW5ndGgsZT1BcnJheShkKTt0cnl7Zm9yKDtiPGQ7YisrKWVbYl09V1tiXShhKTtyZXR1cm4gUihlKX1jYXRjaChnKXtjKExhLmludGVycihmLFxyXG5nKSl9fSx7ZXhwOmYsZXhwcmVzc2lvbnM6QywkJHdhdGNoRGVsZWdhdGU6ZnVuY3Rpb24oYSxiKXt2YXIgYztyZXR1cm4gYS4kd2F0Y2hHcm91cChXLGZ1bmN0aW9uKGQsZSl7dmFyIGY9UihkKTtEKGIpJiZiLmNhbGwodGhpcyxmLGQhPT1lP2M6ZixhKTtjPWZ9KX19KX19dmFyIGw9YS5sZW5ndGgsbT1iLmxlbmd0aCxzPW5ldyBSZWdFeHAoYS5yZXBsYWNlKC8uL2csZiksXCJnXCIpLHI9bmV3IFJlZ0V4cChiLnJlcGxhY2UoLy4vZyxmKSxcImdcIik7ay5zdGFydFN5bWJvbD1mdW5jdGlvbigpe3JldHVybiBhfTtrLmVuZFN5bWJvbD1mdW5jdGlvbigpe3JldHVybiBifTtyZXR1cm4ga31dfWZ1bmN0aW9uIGZmKCl7dGhpcy4kZ2V0PVtcIiRyb290U2NvcGVcIixcIiR3aW5kb3dcIixcIiRxXCIsXCIkJHFcIixcIiRicm93c2VyXCIsZnVuY3Rpb24oYSxiLGQsYyxlKXtmdW5jdGlvbiBmKGYsayxsLG0pe2Z1bmN0aW9uIHMoKXtyP2YuYXBwbHkobnVsbCxCKTpmKHApfXZhciByPTQ8YXJndW1lbnRzLmxlbmd0aCxcclxuQj1yP3dhLmNhbGwoYXJndW1lbnRzLDQpOltdLG49Yi5zZXRJbnRlcnZhbCx0PWIuY2xlYXJJbnRlcnZhbCxwPTAseT16KG0pJiYhbSx2PSh5P2M6ZCkuZGVmZXIoKSxxPXYucHJvbWlzZTtsPXoobCk/bDowO3EuJCRpbnRlcnZhbElkPW4oZnVuY3Rpb24oKXt5P2UuZGVmZXIocyk6YS4kZXZhbEFzeW5jKHMpO3Yubm90aWZ5KHArKyk7MDxsJiZwPj1sJiYodi5yZXNvbHZlKHApLHQocS4kJGludGVydmFsSWQpLGRlbGV0ZSBnW3EuJCRpbnRlcnZhbElkXSk7eXx8YS4kYXBwbHkoKX0sayk7Z1txLiQkaW50ZXJ2YWxJZF09djtyZXR1cm4gcX12YXIgZz17fTtmLmNhbmNlbD1mdW5jdGlvbihhKXtyZXR1cm4gYSYmYS4kJGludGVydmFsSWQgaW4gZz8oZ1thLiQkaW50ZXJ2YWxJZF0ucmVqZWN0KFwiY2FuY2VsZWRcIiksYi5jbGVhckludGVydmFsKGEuJCRpbnRlcnZhbElkKSxkZWxldGUgZ1thLiQkaW50ZXJ2YWxJZF0sITApOiExfTtyZXR1cm4gZn1dfWZ1bmN0aW9uIGNjKGEpe2E9YS5zcGxpdChcIi9cIik7XHJcbmZvcih2YXIgYj1hLmxlbmd0aDtiLS07KWFbYl09cWIoYVtiXSk7cmV0dXJuIGEuam9pbihcIi9cIil9ZnVuY3Rpb24gaGQoYSxiKXt2YXIgZD16YShhKTtiLiQkcHJvdG9jb2w9ZC5wcm90b2NvbDtiLiQkaG9zdD1kLmhvc3RuYW1lO2IuJCRwb3J0PWVhKGQucG9ydCl8fGJnW2QucHJvdG9jb2xdfHxudWxsfWZ1bmN0aW9uIGlkKGEsYil7dmFyIGQ9XCIvXCIhPT1hLmNoYXJBdCgwKTtkJiYoYT1cIi9cIithKTt2YXIgYz16YShhKTtiLiQkcGF0aD1kZWNvZGVVUklDb21wb25lbnQoZCYmXCIvXCI9PT1jLnBhdGhuYW1lLmNoYXJBdCgwKT9jLnBhdGhuYW1lLnN1YnN0cmluZygxKTpjLnBhdGhuYW1lKTtiLiQkc2VhcmNoPXljKGMuc2VhcmNoKTtiLiQkaGFzaD1kZWNvZGVVUklDb21wb25lbnQoYy5oYXNoKTtiLiQkcGF0aCYmXCIvXCIhPWIuJCRwYXRoLmNoYXJBdCgwKSYmKGIuJCRwYXRoPVwiL1wiK2IuJCRwYXRoKX1mdW5jdGlvbiBtYShhLGIpe2lmKDA9PT1iLmluZGV4T2YoYSkpcmV0dXJuIGIuc3Vic3RyKGEubGVuZ3RoKX1cclxuZnVuY3Rpb24gSmEoYSl7dmFyIGI9YS5pbmRleE9mKFwiI1wiKTtyZXR1cm4tMT09Yj9hOmEuc3Vic3RyKDAsYil9ZnVuY3Rpb24ga2IoYSl7cmV0dXJuIGEucmVwbGFjZSgvKCMuKyl8IyQvLFwiJDFcIil9ZnVuY3Rpb24gZGMoYSxiLGQpe3RoaXMuJCRodG1sNT0hMDtkPWR8fFwiXCI7aGQoYSx0aGlzKTt0aGlzLiQkcGFyc2U9ZnVuY3Rpb24oYSl7dmFyIGQ9bWEoYixhKTtpZighRyhkKSl0aHJvdyBFYihcImlwdGhwcmZ4XCIsYSxiKTtpZChkLHRoaXMpO3RoaXMuJCRwYXRofHwodGhpcy4kJHBhdGg9XCIvXCIpO3RoaXMuJCRjb21wb3NlKCl9O3RoaXMuJCRjb21wb3NlPWZ1bmN0aW9uKCl7dmFyIGE9U2IodGhpcy4kJHNlYXJjaCksZD10aGlzLiQkaGFzaD9cIiNcIitxYih0aGlzLiQkaGFzaCk6XCJcIjt0aGlzLiQkdXJsPWNjKHRoaXMuJCRwYXRoKSsoYT9cIj9cIithOlwiXCIpK2Q7dGhpcy4kJGFic1VybD1iK3RoaXMuJCR1cmwuc3Vic3RyKDEpfTt0aGlzLiQkcGFyc2VMaW5rVXJsPWZ1bmN0aW9uKGMsZSl7aWYoZSYmXHJcblwiI1wiPT09ZVswXSlyZXR1cm4gdGhpcy5oYXNoKGUuc2xpY2UoMSkpLCEwO3ZhciBmLGc7eihmPW1hKGEsYykpPyhnPWYsZz16KGY9bWEoZCxmKSk/YisobWEoXCIvXCIsZil8fGYpOmErZyk6eihmPW1hKGIsYykpP2c9YitmOmI9PWMrXCIvXCImJihnPWIpO2cmJnRoaXMuJCRwYXJzZShnKTtyZXR1cm4hIWd9fWZ1bmN0aW9uIGVjKGEsYixkKXtoZChhLHRoaXMpO3RoaXMuJCRwYXJzZT1mdW5jdGlvbihjKXt2YXIgZT1tYShhLGMpfHxtYShiLGMpLGY7eChlKXx8XCIjXCIhPT1lLmNoYXJBdCgwKT90aGlzLiQkaHRtbDU/Zj1lOihmPVwiXCIseChlKSYmKGE9Yyx0aGlzLnJlcGxhY2UoKSkpOihmPW1hKGQsZSkseChmKSYmKGY9ZSkpO2lkKGYsdGhpcyk7Yz10aGlzLiQkcGF0aDt2YXIgZT1hLGc9L15cXC9bQS1aXTooXFwvLiopLzswPT09Zi5pbmRleE9mKGUpJiYoZj1mLnJlcGxhY2UoZSxcIlwiKSk7Zy5leGVjKGYpfHwoYz0oZj1nLmV4ZWMoYykpP2ZbMV06Yyk7dGhpcy4kJHBhdGg9Yzt0aGlzLiQkY29tcG9zZSgpfTtcclxudGhpcy4kJGNvbXBvc2U9ZnVuY3Rpb24oKXt2YXIgYj1TYih0aGlzLiQkc2VhcmNoKSxlPXRoaXMuJCRoYXNoP1wiI1wiK3FiKHRoaXMuJCRoYXNoKTpcIlwiO3RoaXMuJCR1cmw9Y2ModGhpcy4kJHBhdGgpKyhiP1wiP1wiK2I6XCJcIikrZTt0aGlzLiQkYWJzVXJsPWErKHRoaXMuJCR1cmw/ZCt0aGlzLiQkdXJsOlwiXCIpfTt0aGlzLiQkcGFyc2VMaW5rVXJsPWZ1bmN0aW9uKGIsZCl7cmV0dXJuIEphKGEpPT1KYShiKT8odGhpcy4kJHBhcnNlKGIpLCEwKTohMX19ZnVuY3Rpb24gamQoYSxiLGQpe3RoaXMuJCRodG1sNT0hMDtlYy5hcHBseSh0aGlzLGFyZ3VtZW50cyk7dGhpcy4kJHBhcnNlTGlua1VybD1mdW5jdGlvbihjLGUpe2lmKGUmJlwiI1wiPT09ZVswXSlyZXR1cm4gdGhpcy5oYXNoKGUuc2xpY2UoMSkpLCEwO3ZhciBmLGc7YT09SmEoYyk/Zj1jOihnPW1hKGIsYykpP2Y9YStkK2c6Yj09PWMrXCIvXCImJihmPWIpO2YmJnRoaXMuJCRwYXJzZShmKTtyZXR1cm4hIWZ9O3RoaXMuJCRjb21wb3NlPWZ1bmN0aW9uKCl7dmFyIGI9XHJcblNiKHRoaXMuJCRzZWFyY2gpLGU9dGhpcy4kJGhhc2g/XCIjXCIrcWIodGhpcy4kJGhhc2gpOlwiXCI7dGhpcy4kJHVybD1jYyh0aGlzLiQkcGF0aCkrKGI/XCI/XCIrYjpcIlwiKStlO3RoaXMuJCRhYnNVcmw9YStkK3RoaXMuJCR1cmx9fWZ1bmN0aW9uIEZiKGEpe3JldHVybiBmdW5jdGlvbigpe3JldHVybiB0aGlzW2FdfX1mdW5jdGlvbiBrZChhLGIpe3JldHVybiBmdW5jdGlvbihkKXtpZih4KGQpKXJldHVybiB0aGlzW2FdO3RoaXNbYV09YihkKTt0aGlzLiQkY29tcG9zZSgpO3JldHVybiB0aGlzfX1mdW5jdGlvbiBtZigpe3ZhciBhPVwiXCIsYj17ZW5hYmxlZDohMSxyZXF1aXJlQmFzZTohMCxyZXdyaXRlTGlua3M6ITB9O3RoaXMuaGFzaFByZWZpeD1mdW5jdGlvbihiKXtyZXR1cm4geihiKT8oYT1iLHRoaXMpOmF9O3RoaXMuaHRtbDVNb2RlPWZ1bmN0aW9uKGEpe3JldHVybiBiYihhKT8oYi5lbmFibGVkPWEsdGhpcyk6SihhKT8oYmIoYS5lbmFibGVkKSYmKGIuZW5hYmxlZD1hLmVuYWJsZWQpLFxyXG5iYihhLnJlcXVpcmVCYXNlKSYmKGIucmVxdWlyZUJhc2U9YS5yZXF1aXJlQmFzZSksYmIoYS5yZXdyaXRlTGlua3MpJiYoYi5yZXdyaXRlTGlua3M9YS5yZXdyaXRlTGlua3MpLHRoaXMpOmJ9O3RoaXMuJGdldD1bXCIkcm9vdFNjb3BlXCIsXCIkYnJvd3NlclwiLFwiJHNuaWZmZXJcIixcIiRyb290RWxlbWVudFwiLFwiJHdpbmRvd1wiLGZ1bmN0aW9uKGQsYyxlLGYsZyl7ZnVuY3Rpb24gaChhLGIsZCl7dmFyIGU9bC51cmwoKSxmPWwuJCRzdGF0ZTt0cnl7Yy51cmwoYSxiLGQpLGwuJCRzdGF0ZT1jLnN0YXRlKCl9Y2F0Y2goZyl7dGhyb3cgbC51cmwoZSksbC4kJHN0YXRlPWYsZzt9fWZ1bmN0aW9uIGsoYSxiKXtkLiRicm9hZGNhc3QoXCIkbG9jYXRpb25DaGFuZ2VTdWNjZXNzXCIsbC5hYnNVcmwoKSxhLGwuJCRzdGF0ZSxiKX12YXIgbCxtO209Yy5iYXNlSHJlZigpO3ZhciBzPWMudXJsKCkscjtpZihiLmVuYWJsZWQpe2lmKCFtJiZiLnJlcXVpcmVCYXNlKXRocm93IEViKFwibm9iYXNlXCIpO3I9cy5zdWJzdHJpbmcoMCxcclxucy5pbmRleE9mKFwiL1wiLHMuaW5kZXhPZihcIi8vXCIpKzIpKSsobXx8XCIvXCIpO209ZS5oaXN0b3J5P2RjOmpkfWVsc2Ugcj1KYShzKSxtPWVjO3ZhciBCPXIuc3Vic3RyKDAsSmEocikubGFzdEluZGV4T2YoXCIvXCIpKzEpO2w9bmV3IG0ocixCLFwiI1wiK2EpO2wuJCRwYXJzZUxpbmtVcmwocyxzKTtsLiQkc3RhdGU9Yy5zdGF0ZSgpO3ZhciBuPS9eXFxzKihqYXZhc2NyaXB0fG1haWx0byk6L2k7Zi5vbihcImNsaWNrXCIsZnVuY3Rpb24oYSl7aWYoYi5yZXdyaXRlTGlua3MmJiFhLmN0cmxLZXkmJiFhLm1ldGFLZXkmJiFhLnNoaWZ0S2V5JiYyIT1hLndoaWNoJiYyIT1hLmJ1dHRvbil7Zm9yKHZhciBlPUEoYS50YXJnZXQpO1wiYVwiIT09dGEoZVswXSk7KWlmKGVbMF09PT1mWzBdfHwhKGU9ZS5wYXJlbnQoKSlbMF0pcmV0dXJuO3ZhciBoPWUucHJvcChcImhyZWZcIiksaz1lLmF0dHIoXCJocmVmXCIpfHxlLmF0dHIoXCJ4bGluazpocmVmXCIpO0ooaCkmJlwiW29iamVjdCBTVkdBbmltYXRlZFN0cmluZ11cIj09PWgudG9TdHJpbmcoKSYmXHJcbihoPXphKGguYW5pbVZhbCkuaHJlZik7bi50ZXN0KGgpfHwhaHx8ZS5hdHRyKFwidGFyZ2V0XCIpfHxhLmlzRGVmYXVsdFByZXZlbnRlZCgpfHwhbC4kJHBhcnNlTGlua1VybChoLGspfHwoYS5wcmV2ZW50RGVmYXVsdCgpLGwuYWJzVXJsKCkhPWMudXJsKCkmJihkLiRhcHBseSgpLGcuYW5ndWxhcltcImZmLTY4NDIwOC1wcmV2ZW50RGVmYXVsdFwiXT0hMCkpfX0pO2tiKGwuYWJzVXJsKCkpIT1rYihzKSYmYy51cmwobC5hYnNVcmwoKSwhMCk7dmFyIHQ9ITA7Yy5vblVybENoYW5nZShmdW5jdGlvbihhLGIpe3gobWEoQixhKSk/Zy5sb2NhdGlvbi5ocmVmPWE6KGQuJGV2YWxBc3luYyhmdW5jdGlvbigpe3ZhciBjPWwuYWJzVXJsKCksZT1sLiQkc3RhdGUsZjthPWtiKGEpO2wuJCRwYXJzZShhKTtsLiQkc3RhdGU9YjtmPWQuJGJyb2FkY2FzdChcIiRsb2NhdGlvbkNoYW5nZVN0YXJ0XCIsYSxjLGIsZSkuZGVmYXVsdFByZXZlbnRlZDtsLmFic1VybCgpPT09YSYmKGY/KGwuJCRwYXJzZShjKSxsLiQkc3RhdGU9XHJcbmUsaChjLCExLGUpKToodD0hMSxrKGMsZSkpKX0pLGQuJCRwaGFzZXx8ZC4kZGlnZXN0KCkpfSk7ZC4kd2F0Y2goZnVuY3Rpb24oKXt2YXIgYT1rYihjLnVybCgpKSxiPWtiKGwuYWJzVXJsKCkpLGY9Yy5zdGF0ZSgpLGc9bC4kJHJlcGxhY2UsbT1hIT09Ynx8bC4kJGh0bWw1JiZlLmhpc3RvcnkmJmYhPT1sLiQkc3RhdGU7aWYodHx8bSl0PSExLGQuJGV2YWxBc3luYyhmdW5jdGlvbigpe3ZhciBiPWwuYWJzVXJsKCksYz1kLiRicm9hZGNhc3QoXCIkbG9jYXRpb25DaGFuZ2VTdGFydFwiLGIsYSxsLiQkc3RhdGUsZikuZGVmYXVsdFByZXZlbnRlZDtsLmFic1VybCgpPT09YiYmKGM/KGwuJCRwYXJzZShhKSxsLiQkc3RhdGU9Zik6KG0mJmgoYixnLGY9PT1sLiQkc3RhdGU/bnVsbDpsLiQkc3RhdGUpLGsoYSxmKSkpfSk7bC4kJHJlcGxhY2U9ITF9KTtyZXR1cm4gbH1dfWZ1bmN0aW9uIG5mKCl7dmFyIGE9ITAsYj10aGlzO3RoaXMuZGVidWdFbmFibGVkPWZ1bmN0aW9uKGIpe3JldHVybiB6KGIpP1xyXG4oYT1iLHRoaXMpOmF9O3RoaXMuJGdldD1bXCIkd2luZG93XCIsZnVuY3Rpb24oZCl7ZnVuY3Rpb24gYyhhKXthIGluc3RhbmNlb2YgRXJyb3ImJihhLnN0YWNrP2E9YS5tZXNzYWdlJiYtMT09PWEuc3RhY2suaW5kZXhPZihhLm1lc3NhZ2UpP1wiRXJyb3I6IFwiK2EubWVzc2FnZStcIlxcblwiK2Euc3RhY2s6YS5zdGFjazphLnNvdXJjZVVSTCYmKGE9YS5tZXNzYWdlK1wiXFxuXCIrYS5zb3VyY2VVUkwrXCI6XCIrYS5saW5lKSk7cmV0dXJuIGF9ZnVuY3Rpb24gZShhKXt2YXIgYj1kLmNvbnNvbGV8fHt9LGU9YlthXXx8Yi5sb2d8fHc7YT0hMTt0cnl7YT0hIWUuYXBwbHl9Y2F0Y2goayl7fXJldHVybiBhP2Z1bmN0aW9uKCl7dmFyIGE9W107bihhcmd1bWVudHMsZnVuY3Rpb24oYil7YS5wdXNoKGMoYikpfSk7cmV0dXJuIGUuYXBwbHkoYixhKX06ZnVuY3Rpb24oYSxiKXtlKGEsbnVsbD09Yj9cIlwiOmIpfX1yZXR1cm57bG9nOmUoXCJsb2dcIiksaW5mbzplKFwiaW5mb1wiKSx3YXJuOmUoXCJ3YXJuXCIpLGVycm9yOmUoXCJlcnJvclwiKSxcclxuZGVidWc6ZnVuY3Rpb24oKXt2YXIgYz1lKFwiZGVidWdcIik7cmV0dXJuIGZ1bmN0aW9uKCl7YSYmYy5hcHBseShiLGFyZ3VtZW50cyl9fSgpfX1dfWZ1bmN0aW9uIFhhKGEsYil7aWYoXCJfX2RlZmluZUdldHRlcl9fXCI9PT1hfHxcIl9fZGVmaW5lU2V0dGVyX19cIj09PWF8fFwiX19sb29rdXBHZXR0ZXJfX1wiPT09YXx8XCJfX2xvb2t1cFNldHRlcl9fXCI9PT1hfHxcIl9fcHJvdG9fX1wiPT09YSl0aHJvdyBjYShcImlzZWNmbGRcIixiKTtyZXR1cm4gYX1mdW5jdGlvbiBsZChhLGIpe2ErPVwiXCI7aWYoIUcoYSkpdGhyb3cgY2EoXCJpc2VjY3N0XCIsYik7cmV0dXJuIGF9ZnVuY3Rpb24gQWEoYSxiKXtpZihhKXtpZihhLmNvbnN0cnVjdG9yPT09YSl0aHJvdyBjYShcImlzZWNmblwiLGIpO2lmKGEud2luZG93PT09YSl0aHJvdyBjYShcImlzZWN3aW5kb3dcIixiKTtpZihhLmNoaWxkcmVuJiYoYS5ub2RlTmFtZXx8YS5wcm9wJiZhLmF0dHImJmEuZmluZCkpdGhyb3cgY2EoXCJpc2VjZG9tXCIsYik7aWYoYT09PU9iamVjdCl0aHJvdyBjYShcImlzZWNvYmpcIixcclxuYik7fXJldHVybiBhfWZ1bmN0aW9uIG1kKGEsYil7aWYoYSl7aWYoYS5jb25zdHJ1Y3Rvcj09PWEpdGhyb3cgY2EoXCJpc2VjZm5cIixiKTtpZihhPT09Y2d8fGE9PT1kZ3x8YT09PWVnKXRocm93IGNhKFwiaXNlY2ZmXCIsYik7fX1mdW5jdGlvbiBHYihhLGIpe2lmKGEmJihhPT09KDApLmNvbnN0cnVjdG9yfHxhPT09KCExKS5jb25zdHJ1Y3Rvcnx8YT09PVwiXCIuY29uc3RydWN0b3J8fGE9PT17fS5jb25zdHJ1Y3Rvcnx8YT09PVtdLmNvbnN0cnVjdG9yfHxhPT09RnVuY3Rpb24uY29uc3RydWN0b3IpKXRocm93IGNhKFwiaXNlY2FmXCIsYik7fWZ1bmN0aW9uIGZnKGEsYil7cmV0dXJuXCJ1bmRlZmluZWRcIiE9PXR5cGVvZiBhP2E6Yn1mdW5jdGlvbiBuZChhLGIpe3JldHVyblwidW5kZWZpbmVkXCI9PT10eXBlb2YgYT9iOlwidW5kZWZpbmVkXCI9PT10eXBlb2YgYj9hOmErYn1mdW5jdGlvbiBUKGEsYil7dmFyIGQsYztzd2l0Y2goYS50eXBlKXtjYXNlIHEuUHJvZ3JhbTpkPSEwO24oYS5ib2R5LGZ1bmN0aW9uKGEpe1QoYS5leHByZXNzaW9uLFxyXG5iKTtkPWQmJmEuZXhwcmVzc2lvbi5jb25zdGFudH0pO2EuY29uc3RhbnQ9ZDticmVhaztjYXNlIHEuTGl0ZXJhbDphLmNvbnN0YW50PSEwO2EudG9XYXRjaD1bXTticmVhaztjYXNlIHEuVW5hcnlFeHByZXNzaW9uOlQoYS5hcmd1bWVudCxiKTthLmNvbnN0YW50PWEuYXJndW1lbnQuY29uc3RhbnQ7YS50b1dhdGNoPWEuYXJndW1lbnQudG9XYXRjaDticmVhaztjYXNlIHEuQmluYXJ5RXhwcmVzc2lvbjpUKGEubGVmdCxiKTtUKGEucmlnaHQsYik7YS5jb25zdGFudD1hLmxlZnQuY29uc3RhbnQmJmEucmlnaHQuY29uc3RhbnQ7YS50b1dhdGNoPWEubGVmdC50b1dhdGNoLmNvbmNhdChhLnJpZ2h0LnRvV2F0Y2gpO2JyZWFrO2Nhc2UgcS5Mb2dpY2FsRXhwcmVzc2lvbjpUKGEubGVmdCxiKTtUKGEucmlnaHQsYik7YS5jb25zdGFudD1hLmxlZnQuY29uc3RhbnQmJmEucmlnaHQuY29uc3RhbnQ7YS50b1dhdGNoPWEuY29uc3RhbnQ/W106W2FdO2JyZWFrO2Nhc2UgcS5Db25kaXRpb25hbEV4cHJlc3Npb246VChhLnRlc3QsXHJcbmIpO1QoYS5hbHRlcm5hdGUsYik7VChhLmNvbnNlcXVlbnQsYik7YS5jb25zdGFudD1hLnRlc3QuY29uc3RhbnQmJmEuYWx0ZXJuYXRlLmNvbnN0YW50JiZhLmNvbnNlcXVlbnQuY29uc3RhbnQ7YS50b1dhdGNoPWEuY29uc3RhbnQ/W106W2FdO2JyZWFrO2Nhc2UgcS5JZGVudGlmaWVyOmEuY29uc3RhbnQ9ITE7YS50b1dhdGNoPVthXTticmVhaztjYXNlIHEuTWVtYmVyRXhwcmVzc2lvbjpUKGEub2JqZWN0LGIpO2EuY29tcHV0ZWQmJlQoYS5wcm9wZXJ0eSxiKTthLmNvbnN0YW50PWEub2JqZWN0LmNvbnN0YW50JiYoIWEuY29tcHV0ZWR8fGEucHJvcGVydHkuY29uc3RhbnQpO2EudG9XYXRjaD1bYV07YnJlYWs7Y2FzZSBxLkNhbGxFeHByZXNzaW9uOmQ9YS5maWx0ZXI/IWIoYS5jYWxsZWUubmFtZSkuJHN0YXRlZnVsOiExO2M9W107bihhLmFyZ3VtZW50cyxmdW5jdGlvbihhKXtUKGEsYik7ZD1kJiZhLmNvbnN0YW50O2EuY29uc3RhbnR8fGMucHVzaC5hcHBseShjLGEudG9XYXRjaCl9KTtcclxuYS5jb25zdGFudD1kO2EudG9XYXRjaD1hLmZpbHRlciYmIWIoYS5jYWxsZWUubmFtZSkuJHN0YXRlZnVsP2M6W2FdO2JyZWFrO2Nhc2UgcS5Bc3NpZ25tZW50RXhwcmVzc2lvbjpUKGEubGVmdCxiKTtUKGEucmlnaHQsYik7YS5jb25zdGFudD1hLmxlZnQuY29uc3RhbnQmJmEucmlnaHQuY29uc3RhbnQ7YS50b1dhdGNoPVthXTticmVhaztjYXNlIHEuQXJyYXlFeHByZXNzaW9uOmQ9ITA7Yz1bXTtuKGEuZWxlbWVudHMsZnVuY3Rpb24oYSl7VChhLGIpO2Q9ZCYmYS5jb25zdGFudDthLmNvbnN0YW50fHxjLnB1c2guYXBwbHkoYyxhLnRvV2F0Y2gpfSk7YS5jb25zdGFudD1kO2EudG9XYXRjaD1jO2JyZWFrO2Nhc2UgcS5PYmplY3RFeHByZXNzaW9uOmQ9ITA7Yz1bXTtuKGEucHJvcGVydGllcyxmdW5jdGlvbihhKXtUKGEudmFsdWUsYik7ZD1kJiZhLnZhbHVlLmNvbnN0YW50O2EudmFsdWUuY29uc3RhbnR8fGMucHVzaC5hcHBseShjLGEudmFsdWUudG9XYXRjaCl9KTthLmNvbnN0YW50PVxyXG5kO2EudG9XYXRjaD1jO2JyZWFrO2Nhc2UgcS5UaGlzRXhwcmVzc2lvbjphLmNvbnN0YW50PSExO2EudG9XYXRjaD1bXTticmVhaztjYXNlIHEuTG9jYWxzRXhwcmVzc2lvbjphLmNvbnN0YW50PSExLGEudG9XYXRjaD1bXX19ZnVuY3Rpb24gb2QoYSl7aWYoMT09YS5sZW5ndGgpe2E9YVswXS5leHByZXNzaW9uO3ZhciBiPWEudG9XYXRjaDtyZXR1cm4gMSE9PWIubGVuZ3RoP2I6YlswXSE9PWE/Yjp1fX1mdW5jdGlvbiBwZChhKXtyZXR1cm4gYS50eXBlPT09cS5JZGVudGlmaWVyfHxhLnR5cGU9PT1xLk1lbWJlckV4cHJlc3Npb259ZnVuY3Rpb24gcWQoYSl7aWYoMT09PWEuYm9keS5sZW5ndGgmJnBkKGEuYm9keVswXS5leHByZXNzaW9uKSlyZXR1cm57dHlwZTpxLkFzc2lnbm1lbnRFeHByZXNzaW9uLGxlZnQ6YS5ib2R5WzBdLmV4cHJlc3Npb24scmlnaHQ6e3R5cGU6cS5OR1ZhbHVlUGFyYW1ldGVyfSxvcGVyYXRvcjpcIj1cIn19ZnVuY3Rpb24gcmQoYSl7cmV0dXJuIDA9PT1hLmJvZHkubGVuZ3RofHxcclxuMT09PWEuYm9keS5sZW5ndGgmJihhLmJvZHlbMF0uZXhwcmVzc2lvbi50eXBlPT09cS5MaXRlcmFsfHxhLmJvZHlbMF0uZXhwcmVzc2lvbi50eXBlPT09cS5BcnJheUV4cHJlc3Npb258fGEuYm9keVswXS5leHByZXNzaW9uLnR5cGU9PT1xLk9iamVjdEV4cHJlc3Npb24pfWZ1bmN0aW9uIHNkKGEsYil7dGhpcy5hc3RCdWlsZGVyPWE7dGhpcy4kZmlsdGVyPWJ9ZnVuY3Rpb24gdGQoYSxiKXt0aGlzLmFzdEJ1aWxkZXI9YTt0aGlzLiRmaWx0ZXI9Yn1mdW5jdGlvbiBIYihhKXtyZXR1cm5cImNvbnN0cnVjdG9yXCI9PWF9ZnVuY3Rpb24gZmMoYSl7cmV0dXJuIEQoYS52YWx1ZU9mKT9hLnZhbHVlT2YoKTpnZy5jYWxsKGEpfWZ1bmN0aW9uIG9mKCl7dmFyIGE9WCgpLGI9WCgpO3RoaXMuJGdldD1bXCIkZmlsdGVyXCIsZnVuY3Rpb24oZCl7ZnVuY3Rpb24gYyhhLGIpe3JldHVybiBudWxsPT1hfHxudWxsPT1iP2E9PT1iOlwib2JqZWN0XCI9PT10eXBlb2YgYSYmKGE9ZmMoYSksXCJvYmplY3RcIj09PXR5cGVvZiBhKT9cclxuITE6YT09PWJ8fGEhPT1hJiZiIT09Yn1mdW5jdGlvbiBlKGEsYixkLGUsZil7dmFyIGc9ZS5pbnB1dHMsaDtpZigxPT09Zy5sZW5ndGgpe3ZhciBrPWMsZz1nWzBdO3JldHVybiBhLiR3YXRjaChmdW5jdGlvbihhKXt2YXIgYj1nKGEpO2MoYixrKXx8KGg9ZShhLHUsdSxbYl0pLGs9YiYmZmMoYikpO3JldHVybiBofSxiLGQsZil9Zm9yKHZhciBsPVtdLG09W10scz0wLG49Zy5sZW5ndGg7czxuO3MrKylsW3NdPWMsbVtzXT1udWxsO3JldHVybiBhLiR3YXRjaChmdW5jdGlvbihhKXtmb3IodmFyIGI9ITEsZD0wLGY9Zy5sZW5ndGg7ZDxmO2QrKyl7dmFyIGs9Z1tkXShhKTtpZihifHwoYj0hYyhrLGxbZF0pKSltW2RdPWssbFtkXT1rJiZmYyhrKX1iJiYoaD1lKGEsdSx1LG0pKTtyZXR1cm4gaH0sYixkLGYpfWZ1bmN0aW9uIGYoYSxiLGMsZCl7dmFyIGUsZjtyZXR1cm4gZT1hLiR3YXRjaChmdW5jdGlvbihhKXtyZXR1cm4gZChhKX0sZnVuY3Rpb24oYSxjLGQpe2Y9YTtEKGIpJiZiLmFwcGx5KHRoaXMsXHJcbmFyZ3VtZW50cyk7eihhKSYmZC4kJHBvc3REaWdlc3QoZnVuY3Rpb24oKXt6KGYpJiZlKCl9KX0sYyl9ZnVuY3Rpb24gZyhhLGIsYyxkKXtmdW5jdGlvbiBlKGEpe3ZhciBiPSEwO24oYSxmdW5jdGlvbihhKXt6KGEpfHwoYj0hMSl9KTtyZXR1cm4gYn12YXIgZixnO3JldHVybiBmPWEuJHdhdGNoKGZ1bmN0aW9uKGEpe3JldHVybiBkKGEpfSxmdW5jdGlvbihhLGMsZCl7Zz1hO0QoYikmJmIuY2FsbCh0aGlzLGEsYyxkKTtlKGEpJiZkLiQkcG9zdERpZ2VzdChmdW5jdGlvbigpe2UoZykmJmYoKX0pfSxjKX1mdW5jdGlvbiBoKGEsYixjLGQpe3ZhciBlO3JldHVybiBlPWEuJHdhdGNoKGZ1bmN0aW9uKGEpe2UoKTtyZXR1cm4gZChhKX0sYixjKX1mdW5jdGlvbiBrKGEsYil7aWYoIWIpcmV0dXJuIGE7dmFyIGM9YS4kJHdhdGNoRGVsZWdhdGUsZD0hMSxjPWMhPT1nJiZjIT09Zj9mdW5jdGlvbihjLGUsZixnKXtmPWQmJmc/Z1swXTphKGMsZSxmLGcpO3JldHVybiBiKGYsYyxlKX06ZnVuY3Rpb24oYyxcclxuZCxlLGYpe2U9YShjLGQsZSxmKTtjPWIoZSxjLGQpO3JldHVybiB6KGUpP2M6ZX07YS4kJHdhdGNoRGVsZWdhdGUmJmEuJCR3YXRjaERlbGVnYXRlIT09ZT9jLiQkd2F0Y2hEZWxlZ2F0ZT1hLiQkd2F0Y2hEZWxlZ2F0ZTpiLiRzdGF0ZWZ1bHx8KGMuJCR3YXRjaERlbGVnYXRlPWUsZD0hYS5pbnB1dHMsYy5pbnB1dHM9YS5pbnB1dHM/YS5pbnB1dHM6W2FdKTtyZXR1cm4gY312YXIgbD1FYSgpLm5vVW5zYWZlRXZhbCxtPXtjc3A6bCxleHBlbnNpdmVDaGVja3M6ITF9LHM9e2NzcDpsLGV4cGVuc2l2ZUNoZWNrczohMH07cmV0dXJuIGZ1bmN0aW9uKGMsbCxuKXt2YXIgdCxwLHk7c3dpdGNoKHR5cGVvZiBjKXtjYXNlIFwic3RyaW5nXCI6eT1jPWMudHJpbSgpO3ZhciB2PW4/YjphO3Q9dlt5XTt0fHwoXCI6XCI9PT1jLmNoYXJBdCgwKSYmXCI6XCI9PT1jLmNoYXJBdCgxKSYmKHA9ITAsYz1jLnN1YnN0cmluZygyKSksbj1uP3M6bSx0PW5ldyBnYyhuKSx0PShuZXcgaGModCxkLG4pKS5wYXJzZShjKSxcclxudC5jb25zdGFudD90LiQkd2F0Y2hEZWxlZ2F0ZT1oOnA/dC4kJHdhdGNoRGVsZWdhdGU9dC5saXRlcmFsP2c6Zjp0LmlucHV0cyYmKHQuJCR3YXRjaERlbGVnYXRlPWUpLHZbeV09dCk7cmV0dXJuIGsodCxsKTtjYXNlIFwiZnVuY3Rpb25cIjpyZXR1cm4gayhjLGwpO2RlZmF1bHQ6cmV0dXJuIGsodyxsKX19fV19ZnVuY3Rpb24gcWYoKXt0aGlzLiRnZXQ9W1wiJHJvb3RTY29wZVwiLFwiJGV4Y2VwdGlvbkhhbmRsZXJcIixmdW5jdGlvbihhLGIpe3JldHVybiB1ZChmdW5jdGlvbihiKXthLiRldmFsQXN5bmMoYil9LGIpfV19ZnVuY3Rpb24gcmYoKXt0aGlzLiRnZXQ9W1wiJGJyb3dzZXJcIixcIiRleGNlcHRpb25IYW5kbGVyXCIsZnVuY3Rpb24oYSxiKXtyZXR1cm4gdWQoZnVuY3Rpb24oYil7YS5kZWZlcihiKX0sYil9XX1mdW5jdGlvbiB1ZChhLGIpe2Z1bmN0aW9uIGQoKXt0aGlzLiQkc3RhdGU9e3N0YXR1czowfX1mdW5jdGlvbiBjKGEsYil7cmV0dXJuIGZ1bmN0aW9uKGMpe2IuY2FsbChhLGMpfX1cclxuZnVuY3Rpb24gZShjKXshYy5wcm9jZXNzU2NoZWR1bGVkJiZjLnBlbmRpbmcmJihjLnByb2Nlc3NTY2hlZHVsZWQ9ITAsYShmdW5jdGlvbigpe3ZhciBhLGQsZTtlPWMucGVuZGluZztjLnByb2Nlc3NTY2hlZHVsZWQ9ITE7Yy5wZW5kaW5nPXU7Zm9yKHZhciBmPTAsZz1lLmxlbmd0aDtmPGc7KytmKXtkPWVbZl1bMF07YT1lW2ZdW2Muc3RhdHVzXTt0cnl7RChhKT9kLnJlc29sdmUoYShjLnZhbHVlKSk6MT09PWMuc3RhdHVzP2QucmVzb2x2ZShjLnZhbHVlKTpkLnJlamVjdChjLnZhbHVlKX1jYXRjaChoKXtkLnJlamVjdChoKSxiKGgpfX19KSl9ZnVuY3Rpb24gZigpe3RoaXMucHJvbWlzZT1uZXcgZH12YXIgZz1QKFwiJHFcIixUeXBlRXJyb3IpO0woZC5wcm90b3R5cGUse3RoZW46ZnVuY3Rpb24oYSxiLGMpe2lmKHgoYSkmJngoYikmJngoYykpcmV0dXJuIHRoaXM7dmFyIGQ9bmV3IGY7dGhpcy4kJHN0YXRlLnBlbmRpbmc9dGhpcy4kJHN0YXRlLnBlbmRpbmd8fFtdO3RoaXMuJCRzdGF0ZS5wZW5kaW5nLnB1c2goW2QsXHJcbmEsYixjXSk7MDx0aGlzLiQkc3RhdGUuc3RhdHVzJiZlKHRoaXMuJCRzdGF0ZSk7cmV0dXJuIGQucHJvbWlzZX0sXCJjYXRjaFwiOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLnRoZW4obnVsbCxhKX0sXCJmaW5hbGx5XCI6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gdGhpcy50aGVuKGZ1bmN0aW9uKGIpe3JldHVybiBrKGIsITAsYSl9LGZ1bmN0aW9uKGIpe3JldHVybiBrKGIsITEsYSl9LGIpfX0pO0woZi5wcm90b3R5cGUse3Jlc29sdmU6ZnVuY3Rpb24oYSl7dGhpcy5wcm9taXNlLiQkc3RhdGUuc3RhdHVzfHwoYT09PXRoaXMucHJvbWlzZT90aGlzLiQkcmVqZWN0KGcoXCJxY3ljbGVcIixhKSk6dGhpcy4kJHJlc29sdmUoYSkpfSwkJHJlc29sdmU6ZnVuY3Rpb24oYSl7ZnVuY3Rpb24gZChhKXtrfHwoaz0hMCxoLiQkcmVzb2x2ZShhKSl9ZnVuY3Rpb24gZihhKXtrfHwoaz0hMCxoLiQkcmVqZWN0KGEpKX12YXIgZyxoPXRoaXMsaz0hMTt0cnl7aWYoSihhKXx8RChhKSlnPWEmJmEudGhlbjtEKGcpP1xyXG4odGhpcy5wcm9taXNlLiQkc3RhdGUuc3RhdHVzPS0xLGcuY2FsbChhLGQsZixjKHRoaXMsdGhpcy5ub3RpZnkpKSk6KHRoaXMucHJvbWlzZS4kJHN0YXRlLnZhbHVlPWEsdGhpcy5wcm9taXNlLiQkc3RhdGUuc3RhdHVzPTEsZSh0aGlzLnByb21pc2UuJCRzdGF0ZSkpfWNhdGNoKGwpe2YobCksYihsKX19LHJlamVjdDpmdW5jdGlvbihhKXt0aGlzLnByb21pc2UuJCRzdGF0ZS5zdGF0dXN8fHRoaXMuJCRyZWplY3QoYSl9LCQkcmVqZWN0OmZ1bmN0aW9uKGEpe3RoaXMucHJvbWlzZS4kJHN0YXRlLnZhbHVlPWE7dGhpcy5wcm9taXNlLiQkc3RhdGUuc3RhdHVzPTI7ZSh0aGlzLnByb21pc2UuJCRzdGF0ZSl9LG5vdGlmeTpmdW5jdGlvbihjKXt2YXIgZD10aGlzLnByb21pc2UuJCRzdGF0ZS5wZW5kaW5nOzA+PXRoaXMucHJvbWlzZS4kJHN0YXRlLnN0YXR1cyYmZCYmZC5sZW5ndGgmJmEoZnVuY3Rpb24oKXtmb3IodmFyIGEsZSxmPTAsZz1kLmxlbmd0aDtmPGc7ZisrKXtlPWRbZl1bMF07XHJcbmE9ZFtmXVszXTt0cnl7ZS5ub3RpZnkoRChhKT9hKGMpOmMpfWNhdGNoKGgpe2IoaCl9fX0pfX0pO3ZhciBoPWZ1bmN0aW9uKGEsYil7dmFyIGM9bmV3IGY7Yj9jLnJlc29sdmUoYSk6Yy5yZWplY3QoYSk7cmV0dXJuIGMucHJvbWlzZX0saz1mdW5jdGlvbihhLGIsYyl7dmFyIGQ9bnVsbDt0cnl7RChjKSYmKGQ9YygpKX1jYXRjaChlKXtyZXR1cm4gaChlLCExKX1yZXR1cm4gZCYmRChkLnRoZW4pP2QudGhlbihmdW5jdGlvbigpe3JldHVybiBoKGEsYil9LGZ1bmN0aW9uKGEpe3JldHVybiBoKGEsITEpfSk6aChhLGIpfSxsPWZ1bmN0aW9uKGEsYixjLGQpe3ZhciBlPW5ldyBmO2UucmVzb2x2ZShhKTtyZXR1cm4gZS5wcm9taXNlLnRoZW4oYixjLGQpfSxtPWZ1bmN0aW9uIHIoYSl7aWYoIUQoYSkpdGhyb3cgZyhcIm5vcnNsdnJcIixhKTtpZighKHRoaXMgaW5zdGFuY2VvZiByKSlyZXR1cm4gbmV3IHIoYSk7dmFyIGI9bmV3IGY7YShmdW5jdGlvbihhKXtiLnJlc29sdmUoYSl9LGZ1bmN0aW9uKGEpe2IucmVqZWN0KGEpfSk7XHJcbnJldHVybiBiLnByb21pc2V9O20uZGVmZXI9ZnVuY3Rpb24oKXt2YXIgYT1uZXcgZjthLnJlc29sdmU9YyhhLGEucmVzb2x2ZSk7YS5yZWplY3Q9YyhhLGEucmVqZWN0KTthLm5vdGlmeT1jKGEsYS5ub3RpZnkpO3JldHVybiBhfTttLnJlamVjdD1mdW5jdGlvbihhKXt2YXIgYj1uZXcgZjtiLnJlamVjdChhKTtyZXR1cm4gYi5wcm9taXNlfTttLndoZW49bDttLnJlc29sdmU9bDttLmFsbD1mdW5jdGlvbihhKXt2YXIgYj1uZXcgZixjPTAsZD1LKGEpP1tdOnt9O24oYSxmdW5jdGlvbihhLGUpe2MrKztsKGEpLnRoZW4oZnVuY3Rpb24oYSl7ZC5oYXNPd25Qcm9wZXJ0eShlKXx8KGRbZV09YSwtLWN8fGIucmVzb2x2ZShkKSl9LGZ1bmN0aW9uKGEpe2QuaGFzT3duUHJvcGVydHkoZSl8fGIucmVqZWN0KGEpfSl9KTswPT09YyYmYi5yZXNvbHZlKGQpO3JldHVybiBiLnByb21pc2V9O3JldHVybiBtfWZ1bmN0aW9uIEFmKCl7dGhpcy4kZ2V0PVtcIiR3aW5kb3dcIixcIiR0aW1lb3V0XCIsZnVuY3Rpb24oYSxcclxuYil7dmFyIGQ9YS5yZXF1ZXN0QW5pbWF0aW9uRnJhbWV8fGEud2Via2l0UmVxdWVzdEFuaW1hdGlvbkZyYW1lLGM9YS5jYW5jZWxBbmltYXRpb25GcmFtZXx8YS53ZWJraXRDYW5jZWxBbmltYXRpb25GcmFtZXx8YS53ZWJraXRDYW5jZWxSZXF1ZXN0QW5pbWF0aW9uRnJhbWUsZT0hIWQsZj1lP2Z1bmN0aW9uKGEpe3ZhciBiPWQoYSk7cmV0dXJuIGZ1bmN0aW9uKCl7YyhiKX19OmZ1bmN0aW9uKGEpe3ZhciBjPWIoYSwxNi42NiwhMSk7cmV0dXJuIGZ1bmN0aW9uKCl7Yi5jYW5jZWwoYyl9fTtmLnN1cHBvcnRlZD1lO3JldHVybiBmfV19ZnVuY3Rpb24gcGYoKXtmdW5jdGlvbiBhKGEpe2Z1bmN0aW9uIGIoKXt0aGlzLiQkd2F0Y2hlcnM9dGhpcy4kJG5leHRTaWJsaW5nPXRoaXMuJCRjaGlsZEhlYWQ9dGhpcy4kJGNoaWxkVGFpbD1udWxsO3RoaXMuJCRsaXN0ZW5lcnM9e307dGhpcy4kJGxpc3RlbmVyQ291bnQ9e307dGhpcy4kJHdhdGNoZXJzQ291bnQ9MDt0aGlzLiRpZD0rK3BiO3RoaXMuJCRDaGlsZFNjb3BlPVxyXG5udWxsfWIucHJvdG90eXBlPWE7cmV0dXJuIGJ9dmFyIGI9MTAsZD1QKFwiJHJvb3RTY29wZVwiKSxjPW51bGwsZT1udWxsO3RoaXMuZGlnZXN0VHRsPWZ1bmN0aW9uKGEpe2FyZ3VtZW50cy5sZW5ndGgmJihiPWEpO3JldHVybiBifTt0aGlzLiRnZXQ9W1wiJGV4Y2VwdGlvbkhhbmRsZXJcIixcIiRwYXJzZVwiLFwiJGJyb3dzZXJcIixmdW5jdGlvbihmLGcsaCl7ZnVuY3Rpb24gayhhKXthLmN1cnJlbnRTY29wZS4kJGRlc3Ryb3llZD0hMH1mdW5jdGlvbiBsKGEpezk9PT1LYSYmKGEuJCRjaGlsZEhlYWQmJmwoYS4kJGNoaWxkSGVhZCksYS4kJG5leHRTaWJsaW5nJiZsKGEuJCRuZXh0U2libGluZykpO2EuJHBhcmVudD1hLiQkbmV4dFNpYmxpbmc9YS4kJHByZXZTaWJsaW5nPWEuJCRjaGlsZEhlYWQ9YS4kJGNoaWxkVGFpbD1hLiRyb290PWEuJCR3YXRjaGVycz1udWxsfWZ1bmN0aW9uIG0oKXt0aGlzLiRpZD0rK3BiO3RoaXMuJCRwaGFzZT10aGlzLiRwYXJlbnQ9dGhpcy4kJHdhdGNoZXJzPXRoaXMuJCRuZXh0U2libGluZz1cclxudGhpcy4kJHByZXZTaWJsaW5nPXRoaXMuJCRjaGlsZEhlYWQ9dGhpcy4kJGNoaWxkVGFpbD1udWxsO3RoaXMuJHJvb3Q9dGhpczt0aGlzLiQkZGVzdHJveWVkPSExO3RoaXMuJCRsaXN0ZW5lcnM9e307dGhpcy4kJGxpc3RlbmVyQ291bnQ9e307dGhpcy4kJHdhdGNoZXJzQ291bnQ9MDt0aGlzLiQkaXNvbGF0ZUJpbmRpbmdzPW51bGx9ZnVuY3Rpb24gcyhhKXtpZih5LiQkcGhhc2UpdGhyb3cgZChcImlucHJvZ1wiLHkuJCRwaGFzZSk7eS4kJHBoYXNlPWF9ZnVuY3Rpb24gcihhLGIpe2RvIGEuJCR3YXRjaGVyc0NvdW50Kz1iO3doaWxlKGE9YS4kcGFyZW50KX1mdW5jdGlvbiBCKGEsYixjKXtkbyBhLiQkbGlzdGVuZXJDb3VudFtjXS09YiwwPT09YS4kJGxpc3RlbmVyQ291bnRbY10mJmRlbGV0ZSBhLiQkbGlzdGVuZXJDb3VudFtjXTt3aGlsZShhPWEuJHBhcmVudCl9ZnVuY3Rpb24gcSgpe31mdW5jdGlvbiB0KCl7Zm9yKDtNLmxlbmd0aDspdHJ5e00uc2hpZnQoKSgpfWNhdGNoKGEpe2YoYSl9ZT1cclxubnVsbH1mdW5jdGlvbiBwKCl7bnVsbD09PWUmJihlPWguZGVmZXIoZnVuY3Rpb24oKXt5LiRhcHBseSh0KX0pKX1tLnByb3RvdHlwZT17Y29uc3RydWN0b3I6bSwkbmV3OmZ1bmN0aW9uKGIsYyl7dmFyIGQ7Yz1jfHx0aGlzO2I/KGQ9bmV3IG0sZC4kcm9vdD10aGlzLiRyb290KToodGhpcy4kJENoaWxkU2NvcGV8fCh0aGlzLiQkQ2hpbGRTY29wZT1hKHRoaXMpKSxkPW5ldyB0aGlzLiQkQ2hpbGRTY29wZSk7ZC4kcGFyZW50PWM7ZC4kJHByZXZTaWJsaW5nPWMuJCRjaGlsZFRhaWw7Yy4kJGNoaWxkSGVhZD8oYy4kJGNoaWxkVGFpbC4kJG5leHRTaWJsaW5nPWQsYy4kJGNoaWxkVGFpbD1kKTpjLiQkY2hpbGRIZWFkPWMuJCRjaGlsZFRhaWw9ZDsoYnx8YyE9dGhpcykmJmQuJG9uKFwiJGRlc3Ryb3lcIixrKTtyZXR1cm4gZH0sJHdhdGNoOmZ1bmN0aW9uKGEsYixkLGUpe3ZhciBmPWcoYSk7aWYoZi4kJHdhdGNoRGVsZWdhdGUpcmV0dXJuIGYuJCR3YXRjaERlbGVnYXRlKHRoaXMsYixkLGYsXHJcbmEpO3ZhciBoPXRoaXMsaz1oLiQkd2F0Y2hlcnMsbD17Zm46YixsYXN0OnEsZ2V0OmYsZXhwOmV8fGEsZXE6ISFkfTtjPW51bGw7RChiKXx8KGwuZm49dyk7a3x8KGs9aC4kJHdhdGNoZXJzPVtdKTtrLnVuc2hpZnQobCk7cih0aGlzLDEpO3JldHVybiBmdW5jdGlvbigpezA8PWNiKGssbCkmJnIoaCwtMSk7Yz1udWxsfX0sJHdhdGNoR3JvdXA6ZnVuY3Rpb24oYSxiKXtmdW5jdGlvbiBjKCl7aD0hMTtrPyhrPSExLGIoZSxlLGcpKTpiKGUsZCxnKX12YXIgZD1BcnJheShhLmxlbmd0aCksZT1BcnJheShhLmxlbmd0aCksZj1bXSxnPXRoaXMsaD0hMSxrPSEwO2lmKCFhLmxlbmd0aCl7dmFyIGw9ITA7Zy4kZXZhbEFzeW5jKGZ1bmN0aW9uKCl7bCYmYihlLGUsZyl9KTtyZXR1cm4gZnVuY3Rpb24oKXtsPSExfX1pZigxPT09YS5sZW5ndGgpcmV0dXJuIHRoaXMuJHdhdGNoKGFbMF0sZnVuY3Rpb24oYSxjLGYpe2VbMF09YTtkWzBdPWM7YihlLGE9PT1jP2U6ZCxmKX0pO24oYSxmdW5jdGlvbihhLFxyXG5iKXt2YXIgaz1nLiR3YXRjaChhLGZ1bmN0aW9uKGEsZil7ZVtiXT1hO2RbYl09ZjtofHwoaD0hMCxnLiRldmFsQXN5bmMoYykpfSk7Zi5wdXNoKGspfSk7cmV0dXJuIGZ1bmN0aW9uKCl7Zm9yKDtmLmxlbmd0aDspZi5zaGlmdCgpKCl9fSwkd2F0Y2hDb2xsZWN0aW9uOmZ1bmN0aW9uKGEsYil7ZnVuY3Rpb24gYyhhKXtlPWE7dmFyIGIsZCxnLGg7aWYoIXgoZSkpe2lmKEooZSkpaWYoQ2EoZSkpZm9yKGYhPT1zJiYoZj1zLG49Zi5sZW5ndGg9MCxsKyspLGE9ZS5sZW5ndGgsbiE9PWEmJihsKyssZi5sZW5ndGg9bj1hKSxiPTA7YjxhO2IrKyloPWZbYl0sZz1lW2JdLGQ9aCE9PWgmJmchPT1nLGR8fGg9PT1nfHwobCsrLGZbYl09Zyk7ZWxzZXtmIT09ciYmKGY9cj17fSxuPTAsbCsrKTthPTA7Zm9yKGIgaW4gZSlxYS5jYWxsKGUsYikmJihhKyssZz1lW2JdLGg9ZltiXSxiIGluIGY/KGQ9aCE9PWgmJmchPT1nLGR8fGg9PT1nfHwobCsrLGZbYl09ZykpOihuKyssZltiXT1nLGwrKykpO2lmKG4+XHJcbmEpZm9yKGIgaW4gbCsrLGYpcWEuY2FsbChlLGIpfHwobi0tLGRlbGV0ZSBmW2JdKX1lbHNlIGYhPT1lJiYoZj1lLGwrKyk7cmV0dXJuIGx9fWMuJHN0YXRlZnVsPSEwO3ZhciBkPXRoaXMsZSxmLGgsaz0xPGIubGVuZ3RoLGw9MCxtPWcoYSxjKSxzPVtdLHI9e30scD0hMCxuPTA7cmV0dXJuIHRoaXMuJHdhdGNoKG0sZnVuY3Rpb24oKXtwPyhwPSExLGIoZSxlLGQpKTpiKGUsaCxkKTtpZihrKWlmKEooZSkpaWYoQ2EoZSkpe2g9QXJyYXkoZS5sZW5ndGgpO2Zvcih2YXIgYT0wO2E8ZS5sZW5ndGg7YSsrKWhbYV09ZVthXX1lbHNlIGZvcihhIGluIGg9e30sZSlxYS5jYWxsKGUsYSkmJihoW2FdPWVbYV0pO2Vsc2UgaD1lfSl9LCRkaWdlc3Q6ZnVuY3Rpb24oKXt2YXIgYSxnLGssbCxtLHIsbj1iLHAsQj1bXSxNLHo7cyhcIiRkaWdlc3RcIik7aC4kJGNoZWNrVXJsQ2hhbmdlKCk7dGhpcz09PXkmJm51bGwhPT1lJiYoaC5kZWZlci5jYW5jZWwoZSksdCgpKTtjPW51bGw7ZG97cj0hMTtmb3IocD1cclxudGhpczt2Lmxlbmd0aDspe3RyeXt6PXYuc2hpZnQoKSx6LnNjb3BlLiRldmFsKHouZXhwcmVzc2lvbix6LmxvY2Fscyl9Y2F0Y2godyl7Zih3KX1jPW51bGx9YTpkb3tpZihsPXAuJCR3YXRjaGVycylmb3IobT1sLmxlbmd0aDttLS07KXRyeXtpZihhPWxbbV0paWYoKGc9YS5nZXQocCkpIT09KGs9YS5sYXN0KSYmIShhLmVxP2xhKGcsayk6XCJudW1iZXJcIj09PXR5cGVvZiBnJiZcIm51bWJlclwiPT09dHlwZW9mIGsmJmlzTmFOKGcpJiZpc05hTihrKSkpcj0hMCxjPWEsYS5sYXN0PWEuZXE/UGEoZyxudWxsKTpnLGEuZm4oZyxrPT09cT9nOmsscCksNT5uJiYoTT00LW4sQltNXXx8KEJbTV09W10pLEJbTV0ucHVzaCh7bXNnOkQoYS5leHApP1wiZm46IFwiKyhhLmV4cC5uYW1lfHxhLmV4cC50b1N0cmluZygpKTphLmV4cCxuZXdWYWw6ZyxvbGRWYWw6a30pKTtlbHNlIGlmKGE9PT1jKXtyPSExO2JyZWFrIGF9fWNhdGNoKHgpe2YoeCl9aWYoIShsPXAuJCR3YXRjaGVyc0NvdW50JiZwLiQkY2hpbGRIZWFkfHxcclxucCE9PXRoaXMmJnAuJCRuZXh0U2libGluZykpZm9yKDtwIT09dGhpcyYmIShsPXAuJCRuZXh0U2libGluZyk7KXA9cC4kcGFyZW50fXdoaWxlKHA9bCk7aWYoKHJ8fHYubGVuZ3RoKSYmIW4tLSl0aHJvdyB5LiQkcGhhc2U9bnVsbCxkKFwiaW5mZGlnXCIsYixCKTt9d2hpbGUocnx8di5sZW5ndGgpO2Zvcih5LiQkcGhhc2U9bnVsbDt1Lmxlbmd0aDspdHJ5e3Uuc2hpZnQoKSgpfWNhdGNoKEEpe2YoQSl9fSwkZGVzdHJveTpmdW5jdGlvbigpe2lmKCF0aGlzLiQkZGVzdHJveWVkKXt2YXIgYT10aGlzLiRwYXJlbnQ7dGhpcy4kYnJvYWRjYXN0KFwiJGRlc3Ryb3lcIik7dGhpcy4kJGRlc3Ryb3llZD0hMDt0aGlzPT09eSYmaC4kJGFwcGxpY2F0aW9uRGVzdHJveWVkKCk7cih0aGlzLC10aGlzLiQkd2F0Y2hlcnNDb3VudCk7Zm9yKHZhciBiIGluIHRoaXMuJCRsaXN0ZW5lckNvdW50KUIodGhpcyx0aGlzLiQkbGlzdGVuZXJDb3VudFtiXSxiKTthJiZhLiQkY2hpbGRIZWFkPT10aGlzJiYoYS4kJGNoaWxkSGVhZD1cclxudGhpcy4kJG5leHRTaWJsaW5nKTthJiZhLiQkY2hpbGRUYWlsPT10aGlzJiYoYS4kJGNoaWxkVGFpbD10aGlzLiQkcHJldlNpYmxpbmcpO3RoaXMuJCRwcmV2U2libGluZyYmKHRoaXMuJCRwcmV2U2libGluZy4kJG5leHRTaWJsaW5nPXRoaXMuJCRuZXh0U2libGluZyk7dGhpcy4kJG5leHRTaWJsaW5nJiYodGhpcy4kJG5leHRTaWJsaW5nLiQkcHJldlNpYmxpbmc9dGhpcy4kJHByZXZTaWJsaW5nKTt0aGlzLiRkZXN0cm95PXRoaXMuJGRpZ2VzdD10aGlzLiRhcHBseT10aGlzLiRldmFsQXN5bmM9dGhpcy4kYXBwbHlBc3luYz13O3RoaXMuJG9uPXRoaXMuJHdhdGNoPXRoaXMuJHdhdGNoR3JvdXA9ZnVuY3Rpb24oKXtyZXR1cm4gd307dGhpcy4kJGxpc3RlbmVycz17fTt0aGlzLiQkbmV4dFNpYmxpbmc9bnVsbDtsKHRoaXMpfX0sJGV2YWw6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gZyhhKSh0aGlzLGIpfSwkZXZhbEFzeW5jOmZ1bmN0aW9uKGEsYil7eS4kJHBoYXNlfHx2Lmxlbmd0aHx8XHJcbmguZGVmZXIoZnVuY3Rpb24oKXt2Lmxlbmd0aCYmeS4kZGlnZXN0KCl9KTt2LnB1c2goe3Njb3BlOnRoaXMsZXhwcmVzc2lvbjphLGxvY2FsczpifSl9LCQkcG9zdERpZ2VzdDpmdW5jdGlvbihhKXt1LnB1c2goYSl9LCRhcHBseTpmdW5jdGlvbihhKXt0cnl7cyhcIiRhcHBseVwiKTt0cnl7cmV0dXJuIHRoaXMuJGV2YWwoYSl9ZmluYWxseXt5LiQkcGhhc2U9bnVsbH19Y2F0Y2goYil7ZihiKX1maW5hbGx5e3RyeXt5LiRkaWdlc3QoKX1jYXRjaChjKXt0aHJvdyBmKGMpLGM7fX19LCRhcHBseUFzeW5jOmZ1bmN0aW9uKGEpe2Z1bmN0aW9uIGIoKXtjLiRldmFsKGEpfXZhciBjPXRoaXM7YSYmTS5wdXNoKGIpO3AoKX0sJG9uOmZ1bmN0aW9uKGEsYil7dmFyIGM9dGhpcy4kJGxpc3RlbmVyc1thXTtjfHwodGhpcy4kJGxpc3RlbmVyc1thXT1jPVtdKTtjLnB1c2goYik7dmFyIGQ9dGhpcztkbyBkLiQkbGlzdGVuZXJDb3VudFthXXx8KGQuJCRsaXN0ZW5lckNvdW50W2FdPTApLGQuJCRsaXN0ZW5lckNvdW50W2FdKys7XHJcbndoaWxlKGQ9ZC4kcGFyZW50KTt2YXIgZT10aGlzO3JldHVybiBmdW5jdGlvbigpe3ZhciBkPWMuaW5kZXhPZihiKTstMSE9PWQmJihjW2RdPW51bGwsQihlLDEsYSkpfX0sJGVtaXQ6ZnVuY3Rpb24oYSxiKXt2YXIgYz1bXSxkLGU9dGhpcyxnPSExLGg9e25hbWU6YSx0YXJnZXRTY29wZTplLHN0b3BQcm9wYWdhdGlvbjpmdW5jdGlvbigpe2c9ITB9LHByZXZlbnREZWZhdWx0OmZ1bmN0aW9uKCl7aC5kZWZhdWx0UHJldmVudGVkPSEwfSxkZWZhdWx0UHJldmVudGVkOiExfSxrPWRiKFtoXSxhcmd1bWVudHMsMSksbCxtO2Rve2Q9ZS4kJGxpc3RlbmVyc1thXXx8YztoLmN1cnJlbnRTY29wZT1lO2w9MDtmb3IobT1kLmxlbmd0aDtsPG07bCsrKWlmKGRbbF0pdHJ5e2RbbF0uYXBwbHkobnVsbCxrKX1jYXRjaChzKXtmKHMpfWVsc2UgZC5zcGxpY2UobCwxKSxsLS0sbS0tO2lmKGcpcmV0dXJuIGguY3VycmVudFNjb3BlPW51bGwsaDtlPWUuJHBhcmVudH13aGlsZShlKTtoLmN1cnJlbnRTY29wZT1cclxubnVsbDtyZXR1cm4gaH0sJGJyb2FkY2FzdDpmdW5jdGlvbihhLGIpe3ZhciBjPXRoaXMsZD10aGlzLGU9e25hbWU6YSx0YXJnZXRTY29wZTp0aGlzLHByZXZlbnREZWZhdWx0OmZ1bmN0aW9uKCl7ZS5kZWZhdWx0UHJldmVudGVkPSEwfSxkZWZhdWx0UHJldmVudGVkOiExfTtpZighdGhpcy4kJGxpc3RlbmVyQ291bnRbYV0pcmV0dXJuIGU7Zm9yKHZhciBnPWRiKFtlXSxhcmd1bWVudHMsMSksaCxrO2M9ZDspe2UuY3VycmVudFNjb3BlPWM7ZD1jLiQkbGlzdGVuZXJzW2FdfHxbXTtoPTA7Zm9yKGs9ZC5sZW5ndGg7aDxrO2grKylpZihkW2hdKXRyeXtkW2hdLmFwcGx5KG51bGwsZyl9Y2F0Y2gobCl7ZihsKX1lbHNlIGQuc3BsaWNlKGgsMSksaC0tLGstLTtpZighKGQ9Yy4kJGxpc3RlbmVyQ291bnRbYV0mJmMuJCRjaGlsZEhlYWR8fGMhPT10aGlzJiZjLiQkbmV4dFNpYmxpbmcpKWZvcig7YyE9PXRoaXMmJiEoZD1jLiQkbmV4dFNpYmxpbmcpOyljPWMuJHBhcmVudH1lLmN1cnJlbnRTY29wZT1cclxubnVsbDtyZXR1cm4gZX19O3ZhciB5PW5ldyBtLHY9eS4kJGFzeW5jUXVldWU9W10sdT15LiQkcG9zdERpZ2VzdFF1ZXVlPVtdLE09eS4kJGFwcGx5QXN5bmNRdWV1ZT1bXTtyZXR1cm4geX1dfWZ1bmN0aW9uIGplKCl7dmFyIGE9L15cXHMqKGh0dHBzP3xmdHB8bWFpbHRvfHRlbHxmaWxlKTovLGI9L15cXHMqKChodHRwcz98ZnRwfGZpbGV8YmxvYik6fGRhdGE6aW1hZ2VcXC8pLzt0aGlzLmFIcmVmU2FuaXRpemF0aW9uV2hpdGVsaXN0PWZ1bmN0aW9uKGIpe3JldHVybiB6KGIpPyhhPWIsdGhpcyk6YX07dGhpcy5pbWdTcmNTYW5pdGl6YXRpb25XaGl0ZWxpc3Q9ZnVuY3Rpb24oYSl7cmV0dXJuIHooYSk/KGI9YSx0aGlzKTpifTt0aGlzLiRnZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24oZCxjKXt2YXIgZT1jP2I6YSxmO2Y9emEoZCkuaHJlZjtyZXR1cm5cIlwiPT09Znx8Zi5tYXRjaChlKT9kOlwidW5zYWZlOlwiK2Z9fX1mdW5jdGlvbiBoZyhhKXtpZihcInNlbGZcIj09PWEpcmV0dXJuIGE7XHJcbmlmKEcoYSkpe2lmKC0xPGEuaW5kZXhPZihcIioqKlwiKSl0aHJvdyBCYShcIml3Y2FyZFwiLGEpO2E9dmQoYSkucmVwbGFjZShcIlxcXFwqXFxcXCpcIixcIi4qXCIpLnJlcGxhY2UoXCJcXFxcKlwiLFwiW146Ly4/JjtdKlwiKTtyZXR1cm4gbmV3IFJlZ0V4cChcIl5cIithK1wiJFwiKX1pZihPYShhKSlyZXR1cm4gbmV3IFJlZ0V4cChcIl5cIithLnNvdXJjZStcIiRcIik7dGhyb3cgQmEoXCJpbWF0Y2hlclwiKTt9ZnVuY3Rpb24gd2QoYSl7dmFyIGI9W107eihhKSYmbihhLGZ1bmN0aW9uKGEpe2IucHVzaChoZyhhKSl9KTtyZXR1cm4gYn1mdW5jdGlvbiB0Zigpe3RoaXMuU0NFX0NPTlRFWFRTPWphO3ZhciBhPVtcInNlbGZcIl0sYj1bXTt0aGlzLnJlc291cmNlVXJsV2hpdGVsaXN0PWZ1bmN0aW9uKGIpe2FyZ3VtZW50cy5sZW5ndGgmJihhPXdkKGIpKTtyZXR1cm4gYX07dGhpcy5yZXNvdXJjZVVybEJsYWNrbGlzdD1mdW5jdGlvbihhKXthcmd1bWVudHMubGVuZ3RoJiYoYj13ZChhKSk7cmV0dXJuIGJ9O3RoaXMuJGdldD1bXCIkaW5qZWN0b3JcIixcclxuZnVuY3Rpb24oZCl7ZnVuY3Rpb24gYyhhLGIpe3JldHVyblwic2VsZlwiPT09YT9nZChiKTohIWEuZXhlYyhiLmhyZWYpfWZ1bmN0aW9uIGUoYSl7dmFyIGI9ZnVuY3Rpb24oYSl7dGhpcy4kJHVud3JhcFRydXN0ZWRWYWx1ZT1mdW5jdGlvbigpe3JldHVybiBhfX07YSYmKGIucHJvdG90eXBlPW5ldyBhKTtiLnByb3RvdHlwZS52YWx1ZU9mPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuJCR1bndyYXBUcnVzdGVkVmFsdWUoKX07Yi5wcm90b3R5cGUudG9TdHJpbmc9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy4kJHVud3JhcFRydXN0ZWRWYWx1ZSgpLnRvU3RyaW5nKCl9O3JldHVybiBifXZhciBmPWZ1bmN0aW9uKGEpe3Rocm93IEJhKFwidW5zYWZlXCIpO307ZC5oYXMoXCIkc2FuaXRpemVcIikmJihmPWQuZ2V0KFwiJHNhbml0aXplXCIpKTt2YXIgZz1lKCksaD17fTtoW2phLkhUTUxdPWUoZyk7aFtqYS5DU1NdPWUoZyk7aFtqYS5VUkxdPWUoZyk7aFtqYS5KU109ZShnKTtoW2phLlJFU09VUkNFX1VSTF09XHJcbmUoaFtqYS5VUkxdKTtyZXR1cm57dHJ1c3RBczpmdW5jdGlvbihhLGIpe3ZhciBjPWguaGFzT3duUHJvcGVydHkoYSk/aFthXTpudWxsO2lmKCFjKXRocm93IEJhKFwiaWNvbnRleHRcIixhLGIpO2lmKG51bGw9PT1ifHx4KGIpfHxcIlwiPT09YilyZXR1cm4gYjtpZihcInN0cmluZ1wiIT09dHlwZW9mIGIpdGhyb3cgQmEoXCJpdHlwZVwiLGEpO3JldHVybiBuZXcgYyhiKX0sZ2V0VHJ1c3RlZDpmdW5jdGlvbihkLGUpe2lmKG51bGw9PT1lfHx4KGUpfHxcIlwiPT09ZSlyZXR1cm4gZTt2YXIgZz1oLmhhc093blByb3BlcnR5KGQpP2hbZF06bnVsbDtpZihnJiZlIGluc3RhbmNlb2YgZylyZXR1cm4gZS4kJHVud3JhcFRydXN0ZWRWYWx1ZSgpO2lmKGQ9PT1qYS5SRVNPVVJDRV9VUkwpe3ZhciBnPXphKGUudG9TdHJpbmcoKSkscyxyLG49ITE7cz0wO2ZvcihyPWEubGVuZ3RoO3M8cjtzKyspaWYoYyhhW3NdLGcpKXtuPSEwO2JyZWFrfWlmKG4pZm9yKHM9MCxyPWIubGVuZ3RoO3M8cjtzKyspaWYoYyhiW3NdLFxyXG5nKSl7bj0hMTticmVha31pZihuKXJldHVybiBlO3Rocm93IEJhKFwiaW5zZWN1cmxcIixlLnRvU3RyaW5nKCkpO31pZihkPT09amEuSFRNTClyZXR1cm4gZihlKTt0aHJvdyBCYShcInVuc2FmZVwiKTt9LHZhbHVlT2Y6ZnVuY3Rpb24oYSl7cmV0dXJuIGEgaW5zdGFuY2VvZiBnP2EuJCR1bndyYXBUcnVzdGVkVmFsdWUoKTphfX19XX1mdW5jdGlvbiBzZigpe3ZhciBhPSEwO3RoaXMuZW5hYmxlZD1mdW5jdGlvbihiKXthcmd1bWVudHMubGVuZ3RoJiYoYT0hIWIpO3JldHVybiBhfTt0aGlzLiRnZXQ9W1wiJHBhcnNlXCIsXCIkc2NlRGVsZWdhdGVcIixmdW5jdGlvbihiLGQpe2lmKGEmJjg+S2EpdGhyb3cgQmEoXCJpZXF1aXJrc1wiKTt2YXIgYz1WKGphKTtjLmlzRW5hYmxlZD1mdW5jdGlvbigpe3JldHVybiBhfTtjLnRydXN0QXM9ZC50cnVzdEFzO2MuZ2V0VHJ1c3RlZD1kLmdldFRydXN0ZWQ7Yy52YWx1ZU9mPWQudmFsdWVPZjthfHwoYy50cnVzdEFzPWMuZ2V0VHJ1c3RlZD1mdW5jdGlvbihhLGIpe3JldHVybiBifSxcclxuYy52YWx1ZU9mPSRhKTtjLnBhcnNlQXM9ZnVuY3Rpb24oYSxkKXt2YXIgZT1iKGQpO3JldHVybiBlLmxpdGVyYWwmJmUuY29uc3RhbnQ/ZTpiKGQsZnVuY3Rpb24oYil7cmV0dXJuIGMuZ2V0VHJ1c3RlZChhLGIpfSl9O3ZhciBlPWMucGFyc2VBcyxmPWMuZ2V0VHJ1c3RlZCxnPWMudHJ1c3RBcztuKGphLGZ1bmN0aW9uKGEsYil7dmFyIGQ9SChiKTtjW2diKFwicGFyc2VfYXNfXCIrZCldPWZ1bmN0aW9uKGIpe3JldHVybiBlKGEsYil9O2NbZ2IoXCJnZXRfdHJ1c3RlZF9cIitkKV09ZnVuY3Rpb24oYil7cmV0dXJuIGYoYSxiKX07Y1tnYihcInRydXN0X2FzX1wiK2QpXT1mdW5jdGlvbihiKXtyZXR1cm4gZyhhLGIpfX0pO3JldHVybiBjfV19ZnVuY3Rpb24gdWYoKXt0aGlzLiRnZXQ9W1wiJHdpbmRvd1wiLFwiJGRvY3VtZW50XCIsZnVuY3Rpb24oYSxiKXt2YXIgZD17fSxjPWVhKCgvYW5kcm9pZCAoXFxkKykvLmV4ZWMoSCgoYS5uYXZpZ2F0b3J8fHt9KS51c2VyQWdlbnQpKXx8W10pWzFdKSxlPS9Cb3hlZS9pLnRlc3QoKGEubmF2aWdhdG9yfHxcclxue30pLnVzZXJBZ2VudCksZj1iWzBdfHx7fSxnLGg9L14oTW96fHdlYmtpdHxtcykoPz1bQS1aXSkvLGs9Zi5ib2R5JiZmLmJvZHkuc3R5bGUsbD0hMSxtPSExO2lmKGspe2Zvcih2YXIgcyBpbiBrKWlmKGw9aC5leGVjKHMpKXtnPWxbMF07Zz1nLnN1YnN0cigwLDEpLnRvVXBwZXJDYXNlKCkrZy5zdWJzdHIoMSk7YnJlYWt9Z3x8KGc9XCJXZWJraXRPcGFjaXR5XCJpbiBrJiZcIndlYmtpdFwiKTtsPSEhKFwidHJhbnNpdGlvblwiaW4ga3x8ZytcIlRyYW5zaXRpb25cImluIGspO209ISEoXCJhbmltYXRpb25cImluIGt8fGcrXCJBbmltYXRpb25cImluIGspOyFjfHxsJiZtfHwobD1HKGsud2Via2l0VHJhbnNpdGlvbiksbT1HKGsud2Via2l0QW5pbWF0aW9uKSl9cmV0dXJue2hpc3Rvcnk6ISghYS5oaXN0b3J5fHwhYS5oaXN0b3J5LnB1c2hTdGF0ZXx8ND5jfHxlKSxoYXNFdmVudDpmdW5jdGlvbihhKXtpZihcImlucHV0XCI9PT1hJiYxMT49S2EpcmV0dXJuITE7aWYoeChkW2FdKSl7dmFyIGI9Zi5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xyXG5kW2FdPVwib25cIithIGluIGJ9cmV0dXJuIGRbYV19LGNzcDpFYSgpLHZlbmRvclByZWZpeDpnLHRyYW5zaXRpb25zOmwsYW5pbWF0aW9uczptLGFuZHJvaWQ6Y319XX1mdW5jdGlvbiB3Zigpe3ZhciBhO3RoaXMuaHR0cE9wdGlvbnM9ZnVuY3Rpb24oYil7cmV0dXJuIGI/KGE9Yix0aGlzKTphfTt0aGlzLiRnZXQ9W1wiJHRlbXBsYXRlQ2FjaGVcIixcIiRodHRwXCIsXCIkcVwiLFwiJHNjZVwiLGZ1bmN0aW9uKGIsZCxjLGUpe2Z1bmN0aW9uIGYoZyxoKXtmLnRvdGFsUGVuZGluZ1JlcXVlc3RzKys7RyhnKSYmYi5nZXQoZyl8fChnPWUuZ2V0VHJ1c3RlZFJlc291cmNlVXJsKGcpKTt2YXIgaz1kLmRlZmF1bHRzJiZkLmRlZmF1bHRzLnRyYW5zZm9ybVJlc3BvbnNlO0soayk/az1rLmZpbHRlcihmdW5jdGlvbihhKXtyZXR1cm4gYSE9PWFjfSk6az09PWFjJiYoaz1udWxsKTtyZXR1cm4gZC5nZXQoZyxMKHtjYWNoZTpiLHRyYW5zZm9ybVJlc3BvbnNlOmt9LGEpKVtcImZpbmFsbHlcIl0oZnVuY3Rpb24oKXtmLnRvdGFsUGVuZGluZ1JlcXVlc3RzLS19KS50aGVuKGZ1bmN0aW9uKGEpe2IucHV0KGcsXHJcbmEuZGF0YSk7cmV0dXJuIGEuZGF0YX0sZnVuY3Rpb24oYSl7aWYoIWgpdGhyb3cgaWEoXCJ0cGxvYWRcIixnLGEuc3RhdHVzLGEuc3RhdHVzVGV4dCk7cmV0dXJuIGMucmVqZWN0KGEpfSl9Zi50b3RhbFBlbmRpbmdSZXF1ZXN0cz0wO3JldHVybiBmfV19ZnVuY3Rpb24geGYoKXt0aGlzLiRnZXQ9W1wiJHJvb3RTY29wZVwiLFwiJGJyb3dzZXJcIixcIiRsb2NhdGlvblwiLGZ1bmN0aW9uKGEsYixkKXtyZXR1cm57ZmluZEJpbmRpbmdzOmZ1bmN0aW9uKGEsYixkKXthPWEuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZShcIm5nLWJpbmRpbmdcIik7dmFyIGc9W107bihhLGZ1bmN0aW9uKGEpe3ZhciBjPSQuZWxlbWVudChhKS5kYXRhKFwiJGJpbmRpbmdcIik7YyYmbihjLGZ1bmN0aW9uKGMpe2Q/KG5ldyBSZWdFeHAoXCIoXnxcXFxccylcIit2ZChiKStcIihcXFxcc3xcXFxcfHwkKVwiKSkudGVzdChjKSYmZy5wdXNoKGEpOi0xIT1jLmluZGV4T2YoYikmJmcucHVzaChhKX0pfSk7cmV0dXJuIGd9LGZpbmRNb2RlbHM6ZnVuY3Rpb24oYSxcclxuYixkKXtmb3IodmFyIGc9W1wibmctXCIsXCJkYXRhLW5nLVwiLFwibmdcXFxcOlwiXSxoPTA7aDxnLmxlbmd0aDsrK2gpe3ZhciBrPWEucXVlcnlTZWxlY3RvckFsbChcIltcIitnW2hdK1wibW9kZWxcIisoZD9cIj1cIjpcIio9XCIpKydcIicrYisnXCJdJyk7aWYoay5sZW5ndGgpcmV0dXJuIGt9fSxnZXRMb2NhdGlvbjpmdW5jdGlvbigpe3JldHVybiBkLnVybCgpfSxzZXRMb2NhdGlvbjpmdW5jdGlvbihiKXtiIT09ZC51cmwoKSYmKGQudXJsKGIpLGEuJGRpZ2VzdCgpKX0sd2hlblN0YWJsZTpmdW5jdGlvbihhKXtiLm5vdGlmeVdoZW5Ob091dHN0YW5kaW5nUmVxdWVzdHMoYSl9fX1dfWZ1bmN0aW9uIHlmKCl7dGhpcy4kZ2V0PVtcIiRyb290U2NvcGVcIixcIiRicm93c2VyXCIsXCIkcVwiLFwiJCRxXCIsXCIkZXhjZXB0aW9uSGFuZGxlclwiLGZ1bmN0aW9uKGEsYixkLGMsZSl7ZnVuY3Rpb24gZihmLGssbCl7RChmKXx8KGw9ayxrPWYsZj13KTt2YXIgbT13YS5jYWxsKGFyZ3VtZW50cywzKSxzPXoobCkmJiFsLHI9KHM/YzpkKS5kZWZlcigpLFxyXG5uPXIucHJvbWlzZSxxO3E9Yi5kZWZlcihmdW5jdGlvbigpe3RyeXtyLnJlc29sdmUoZi5hcHBseShudWxsLG0pKX1jYXRjaChiKXtyLnJlamVjdChiKSxlKGIpfWZpbmFsbHl7ZGVsZXRlIGdbbi4kJHRpbWVvdXRJZF19c3x8YS4kYXBwbHkoKX0sayk7bi4kJHRpbWVvdXRJZD1xO2dbcV09cjtyZXR1cm4gbn12YXIgZz17fTtmLmNhbmNlbD1mdW5jdGlvbihhKXtyZXR1cm4gYSYmYS4kJHRpbWVvdXRJZCBpbiBnPyhnW2EuJCR0aW1lb3V0SWRdLnJlamVjdChcImNhbmNlbGVkXCIpLGRlbGV0ZSBnW2EuJCR0aW1lb3V0SWRdLGIuZGVmZXIuY2FuY2VsKGEuJCR0aW1lb3V0SWQpKTohMX07cmV0dXJuIGZ9XX1mdW5jdGlvbiB6YShhKXtLYSYmKGFhLnNldEF0dHJpYnV0ZShcImhyZWZcIixhKSxhPWFhLmhyZWYpO2FhLnNldEF0dHJpYnV0ZShcImhyZWZcIixhKTtyZXR1cm57aHJlZjphYS5ocmVmLHByb3RvY29sOmFhLnByb3RvY29sP2FhLnByb3RvY29sLnJlcGxhY2UoLzokLyxcIlwiKTpcIlwiLGhvc3Q6YWEuaG9zdCxcclxuc2VhcmNoOmFhLnNlYXJjaD9hYS5zZWFyY2gucmVwbGFjZSgvXlxcPy8sXCJcIik6XCJcIixoYXNoOmFhLmhhc2g/YWEuaGFzaC5yZXBsYWNlKC9eIy8sXCJcIik6XCJcIixob3N0bmFtZTphYS5ob3N0bmFtZSxwb3J0OmFhLnBvcnQscGF0aG5hbWU6XCIvXCI9PT1hYS5wYXRobmFtZS5jaGFyQXQoMCk/YWEucGF0aG5hbWU6XCIvXCIrYWEucGF0aG5hbWV9fWZ1bmN0aW9uIGdkKGEpe2E9RyhhKT96YShhKTphO3JldHVybiBhLnByb3RvY29sPT09eGQucHJvdG9jb2wmJmEuaG9zdD09PXhkLmhvc3R9ZnVuY3Rpb24gemYoKXt0aGlzLiRnZXQ9a2EoUyl9ZnVuY3Rpb24geWQoYSl7ZnVuY3Rpb24gYihhKXt0cnl7cmV0dXJuIGRlY29kZVVSSUNvbXBvbmVudChhKX1jYXRjaChiKXtyZXR1cm4gYX19dmFyIGQ9YVswXXx8e30sYz17fSxlPVwiXCI7cmV0dXJuIGZ1bmN0aW9uKCl7dmFyIGEsZyxoLGssbDthPWQuY29va2llfHxcIlwiO2lmKGEhPT1lKWZvcihlPWEsYT1lLnNwbGl0KFwiOyBcIiksYz17fSxoPTA7aDxhLmxlbmd0aDtoKyspZz1cclxuYVtoXSxrPWcuaW5kZXhPZihcIj1cIiksMDxrJiYobD1iKGcuc3Vic3RyaW5nKDAsaykpLHgoY1tsXSkmJihjW2xdPWIoZy5zdWJzdHJpbmcoaysxKSkpKTtyZXR1cm4gY319ZnVuY3Rpb24gRGYoKXt0aGlzLiRnZXQ9eWR9ZnVuY3Rpb24gTGMoYSl7ZnVuY3Rpb24gYihkLGMpe2lmKEooZCkpe3ZhciBlPXt9O24oZCxmdW5jdGlvbihhLGMpe2VbY109YihjLGEpfSk7cmV0dXJuIGV9cmV0dXJuIGEuZmFjdG9yeShkK1wiRmlsdGVyXCIsYyl9dGhpcy5yZWdpc3Rlcj1iO3RoaXMuJGdldD1bXCIkaW5qZWN0b3JcIixmdW5jdGlvbihhKXtyZXR1cm4gZnVuY3Rpb24oYil7cmV0dXJuIGEuZ2V0KGIrXCJGaWx0ZXJcIil9fV07YihcImN1cnJlbmN5XCIsemQpO2IoXCJkYXRlXCIsQWQpO2IoXCJmaWx0ZXJcIixpZyk7YihcImpzb25cIixqZyk7YihcImxpbWl0VG9cIixrZyk7YihcImxvd2VyY2FzZVwiLGxnKTtiKFwibnVtYmVyXCIsQmQpO2IoXCJvcmRlckJ5XCIsQ2QpO2IoXCJ1cHBlcmNhc2VcIixtZyl9ZnVuY3Rpb24gaWcoKXtyZXR1cm4gZnVuY3Rpb24oYSxcclxuYixkKXtpZighQ2EoYSkpe2lmKG51bGw9PWEpcmV0dXJuIGE7dGhyb3cgUChcImZpbHRlclwiKShcIm5vdGFycmF5XCIsYSk7fXZhciBjO3N3aXRjaChpYyhiKSl7Y2FzZSBcImZ1bmN0aW9uXCI6YnJlYWs7Y2FzZSBcImJvb2xlYW5cIjpjYXNlIFwibnVsbFwiOmNhc2UgXCJudW1iZXJcIjpjYXNlIFwic3RyaW5nXCI6Yz0hMDtjYXNlIFwib2JqZWN0XCI6Yj1uZyhiLGQsYyk7YnJlYWs7ZGVmYXVsdDpyZXR1cm4gYX1yZXR1cm4gQXJyYXkucHJvdG90eXBlLmZpbHRlci5jYWxsKGEsYil9fWZ1bmN0aW9uIG5nKGEsYixkKXt2YXIgYz1KKGEpJiZcIiRcImluIGE7ITA9PT1iP2I9bGE6RChiKXx8KGI9ZnVuY3Rpb24oYSxiKXtpZih4KGEpKXJldHVybiExO2lmKG51bGw9PT1hfHxudWxsPT09YilyZXR1cm4gYT09PWI7aWYoSihiKXx8SihhKSYmIXJjKGEpKXJldHVybiExO2E9SChcIlwiK2EpO2I9SChcIlwiK2IpO3JldHVybi0xIT09YS5pbmRleE9mKGIpfSk7cmV0dXJuIGZ1bmN0aW9uKGUpe3JldHVybiBjJiYhSihlKT9NYShlLFxyXG5hLiQsYiwhMSk6TWEoZSxhLGIsZCl9fWZ1bmN0aW9uIE1hKGEsYixkLGMsZSl7dmFyIGY9aWMoYSksZz1pYyhiKTtpZihcInN0cmluZ1wiPT09ZyYmXCIhXCI9PT1iLmNoYXJBdCgwKSlyZXR1cm4hTWEoYSxiLnN1YnN0cmluZygxKSxkLGMpO2lmKEsoYSkpcmV0dXJuIGEuc29tZShmdW5jdGlvbihhKXtyZXR1cm4gTWEoYSxiLGQsYyl9KTtzd2l0Y2goZil7Y2FzZSBcIm9iamVjdFwiOnZhciBoO2lmKGMpe2ZvcihoIGluIGEpaWYoXCIkXCIhPT1oLmNoYXJBdCgwKSYmTWEoYVtoXSxiLGQsITApKXJldHVybiEwO3JldHVybiBlPyExOk1hKGEsYixkLCExKX1pZihcIm9iamVjdFwiPT09Zyl7Zm9yKGggaW4gYilpZihlPWJbaF0sIUQoZSkmJiF4KGUpJiYoZj1cIiRcIj09PWgsIU1hKGY/YTphW2hdLGUsZCxmLGYpKSlyZXR1cm4hMTtyZXR1cm4hMH1yZXR1cm4gZChhLGIpO2Nhc2UgXCJmdW5jdGlvblwiOnJldHVybiExO2RlZmF1bHQ6cmV0dXJuIGQoYSxiKX19ZnVuY3Rpb24gaWMoYSl7cmV0dXJuIG51bGw9PT1cclxuYT9cIm51bGxcIjp0eXBlb2YgYX1mdW5jdGlvbiB6ZChhKXt2YXIgYj1hLk5VTUJFUl9GT1JNQVRTO3JldHVybiBmdW5jdGlvbihhLGMsZSl7eChjKSYmKGM9Yi5DVVJSRU5DWV9TWU0pO3goZSkmJihlPWIuUEFUVEVSTlNbMV0ubWF4RnJhYyk7cmV0dXJuIG51bGw9PWE/YTpEZChhLGIuUEFUVEVSTlNbMV0sYi5HUk9VUF9TRVAsYi5ERUNJTUFMX1NFUCxlKS5yZXBsYWNlKC9cXHUwMEE0L2csYyl9fWZ1bmN0aW9uIEJkKGEpe3ZhciBiPWEuTlVNQkVSX0ZPUk1BVFM7cmV0dXJuIGZ1bmN0aW9uKGEsYyl7cmV0dXJuIG51bGw9PWE/YTpEZChhLGIuUEFUVEVSTlNbMF0sYi5HUk9VUF9TRVAsYi5ERUNJTUFMX1NFUCxjKX19ZnVuY3Rpb24gb2coYSl7dmFyIGI9MCxkLGMsZSxmLGc7LTE8KGM9YS5pbmRleE9mKEVkKSkmJihhPWEucmVwbGFjZShFZCxcIlwiKSk7MDwoZT1hLnNlYXJjaCgvZS9pKSk/KDA+YyYmKGM9ZSksYys9K2Euc2xpY2UoZSsxKSxhPWEuc3Vic3RyaW5nKDAsZSkpOjA+YyYmKGM9XHJcbmEubGVuZ3RoKTtmb3IoZT0wO2EuY2hhckF0KGUpPT1qYztlKyspO2lmKGU9PShnPWEubGVuZ3RoKSlkPVswXSxjPTE7ZWxzZXtmb3IoZy0tO2EuY2hhckF0KGcpPT1qYzspZy0tO2MtPWU7ZD1bXTtmb3IoZj0wO2U8PWc7ZSsrLGYrKylkW2ZdPSthLmNoYXJBdChlKX1jPkZkJiYoZD1kLnNwbGljZSgwLEZkLTEpLGI9Yy0xLGM9MSk7cmV0dXJue2Q6ZCxlOmIsaTpjfX1mdW5jdGlvbiBwZyhhLGIsZCxjKXt2YXIgZT1hLmQsZj1lLmxlbmd0aC1hLmk7Yj14KGIpP01hdGgubWluKE1hdGgubWF4KGQsZiksYyk6K2I7ZD1iK2EuaTtjPWVbZF07aWYoMDxkKWUuc3BsaWNlKGQpO2Vsc2V7YS5pPTE7ZS5sZW5ndGg9ZD1iKzE7Zm9yKHZhciBnPTA7ZzxkO2crKyllW2ddPTB9Zm9yKDU8PWMmJmVbZC0xXSsrO2Y8YjtmKyspZS5wdXNoKDApO2lmKGI9ZS5yZWR1Y2VSaWdodChmdW5jdGlvbihhLGIsYyxkKXtiKz1hO2RbY109YiUxMDtyZXR1cm4gTWF0aC5mbG9vcihiLzEwKX0sMCkpZS51bnNoaWZ0KGIpLFxyXG5hLmkrK31mdW5jdGlvbiBEZChhLGIsZCxjLGUpe2lmKCFHKGEpJiYhVShhKXx8aXNOYU4oYSkpcmV0dXJuXCJcIjt2YXIgZj0haXNGaW5pdGUoYSksZz0hMSxoPU1hdGguYWJzKGEpK1wiXCIsaz1cIlwiO2lmKGYpaz1cIlxcdTIyMWVcIjtlbHNle2c9b2coaCk7cGcoZyxlLGIubWluRnJhYyxiLm1heEZyYWMpO2s9Zy5kO2g9Zy5pO2U9Zy5lO2Y9W107Zm9yKGc9ay5yZWR1Y2UoZnVuY3Rpb24oYSxiKXtyZXR1cm4gYSYmIWJ9LCEwKTswPmg7KWsudW5zaGlmdCgwKSxoKys7MDxoP2Y9ay5zcGxpY2UoaCk6KGY9ayxrPVswXSk7aD1bXTtmb3Ioay5sZW5ndGg+Yi5sZ1NpemUmJmgudW5zaGlmdChrLnNwbGljZSgtYi5sZ1NpemUpLmpvaW4oXCJcIikpO2subGVuZ3RoPmIuZ1NpemU7KWgudW5zaGlmdChrLnNwbGljZSgtYi5nU2l6ZSkuam9pbihcIlwiKSk7ay5sZW5ndGgmJmgudW5zaGlmdChrLmpvaW4oXCJcIikpO2s9aC5qb2luKGQpO2YubGVuZ3RoJiYoays9YytmLmpvaW4oXCJcIikpO2UmJihrKz1cImUrXCIrZSl9cmV0dXJuIDA+XHJcbmEmJiFnP2IubmVnUHJlK2srYi5uZWdTdWY6Yi5wb3NQcmUraytiLnBvc1N1Zn1mdW5jdGlvbiBJYihhLGIsZCl7dmFyIGM9XCJcIjswPmEmJihjPVwiLVwiLGE9LWEpO2ZvcihhPVwiXCIrYTthLmxlbmd0aDxiOylhPWpjK2E7ZCYmKGE9YS5zdWJzdHIoYS5sZW5ndGgtYikpO3JldHVybiBjK2F9ZnVuY3Rpb24gZGEoYSxiLGQsYyl7ZD1kfHwwO3JldHVybiBmdW5jdGlvbihlKXtlPWVbXCJnZXRcIithXSgpO2lmKDA8ZHx8ZT4tZCllKz1kOzA9PT1lJiYtMTI9PWQmJihlPTEyKTtyZXR1cm4gSWIoZSxiLGMpfX1mdW5jdGlvbiBKYihhLGIpe3JldHVybiBmdW5jdGlvbihkLGMpe3ZhciBlPWRbXCJnZXRcIithXSgpLGY9dWIoYj9cIlNIT1JUXCIrYTphKTtyZXR1cm4gY1tmXVtlXX19ZnVuY3Rpb24gR2QoYSl7dmFyIGI9KG5ldyBEYXRlKGEsMCwxKSkuZ2V0RGF5KCk7cmV0dXJuIG5ldyBEYXRlKGEsMCwoND49Yj81OjEyKS1iKX1mdW5jdGlvbiBIZChhKXtyZXR1cm4gZnVuY3Rpb24oYil7dmFyIGQ9R2QoYi5nZXRGdWxsWWVhcigpKTtcclxuYj0rbmV3IERhdGUoYi5nZXRGdWxsWWVhcigpLGIuZ2V0TW9udGgoKSxiLmdldERhdGUoKSsoNC1iLmdldERheSgpKSktK2Q7Yj0xK01hdGgucm91bmQoYi82MDQ4RTUpO3JldHVybiBJYihiLGEpfX1mdW5jdGlvbiBrYyhhLGIpe3JldHVybiAwPj1hLmdldEZ1bGxZZWFyKCk/Yi5FUkFTWzBdOmIuRVJBU1sxXX1mdW5jdGlvbiBBZChhKXtmdW5jdGlvbiBiKGEpe3ZhciBiO2lmKGI9YS5tYXRjaChkKSl7YT1uZXcgRGF0ZSgwKTt2YXIgZj0wLGc9MCxoPWJbOF0/YS5zZXRVVENGdWxsWWVhcjphLnNldEZ1bGxZZWFyLGs9Yls4XT9hLnNldFVUQ0hvdXJzOmEuc2V0SG91cnM7Yls5XSYmKGY9ZWEoYls5XStiWzEwXSksZz1lYShiWzldK2JbMTFdKSk7aC5jYWxsKGEsZWEoYlsxXSksZWEoYlsyXSktMSxlYShiWzNdKSk7Zj1lYShiWzRdfHwwKS1mO2c9ZWEoYls1XXx8MCktZztoPWVhKGJbNl18fDApO2I9TWF0aC5yb3VuZCgxRTMqcGFyc2VGbG9hdChcIjAuXCIrKGJbN118fDApKSk7ay5jYWxsKGEsXHJcbmYsZyxoLGIpfXJldHVybiBhfXZhciBkPS9eKFxcZHs0fSktPyhcXGRcXGQpLT8oXFxkXFxkKSg/OlQoXFxkXFxkKSg/Ojo/KFxcZFxcZCkoPzo6PyhcXGRcXGQpKD86XFwuKFxcZCspKT8pPyk/KFp8KFsrLV0pKFxcZFxcZCk6PyhcXGRcXGQpKT8pPyQvO3JldHVybiBmdW5jdGlvbihjLGQsZil7dmFyIGc9XCJcIixoPVtdLGssbDtkPWR8fFwibWVkaXVtRGF0ZVwiO2Q9YS5EQVRFVElNRV9GT1JNQVRTW2RdfHxkO0coYykmJihjPXFnLnRlc3QoYyk/ZWEoYyk6YihjKSk7VShjKSYmKGM9bmV3IERhdGUoYykpO2lmKCFiYShjKXx8IWlzRmluaXRlKGMuZ2V0VGltZSgpKSlyZXR1cm4gYztmb3IoO2Q7KShsPXJnLmV4ZWMoZCkpPyhoPWRiKGgsbCwxKSxkPWgucG9wKCkpOihoLnB1c2goZCksZD1udWxsKTt2YXIgbT1jLmdldFRpbWV6b25lT2Zmc2V0KCk7ZiYmKG09d2MoZixjLmdldFRpbWV6b25lT2Zmc2V0KCkpLGM9UmIoYyxmLCEwKSk7bihoLGZ1bmN0aW9uKGIpe2s9c2dbYl07Zys9az9rKGMsYS5EQVRFVElNRV9GT1JNQVRTLFxyXG5tKTpiLnJlcGxhY2UoLyheJ3wnJCkvZyxcIlwiKS5yZXBsYWNlKC8nJy9nLFwiJ1wiKX0pO3JldHVybiBnfX1mdW5jdGlvbiBqZygpe3JldHVybiBmdW5jdGlvbihhLGIpe3goYikmJihiPTIpO3JldHVybiBlYihhLGIpfX1mdW5jdGlvbiBrZygpe3JldHVybiBmdW5jdGlvbihhLGIsZCl7Yj1JbmZpbml0eT09PU1hdGguYWJzKE51bWJlcihiKSk/TnVtYmVyKGIpOmVhKGIpO2lmKGlzTmFOKGIpKXJldHVybiBhO1UoYSkmJihhPWEudG9TdHJpbmcoKSk7aWYoIUsoYSkmJiFHKGEpKXJldHVybiBhO2Q9IWR8fGlzTmFOKGQpPzA6ZWEoZCk7ZD0wPmQ/TWF0aC5tYXgoMCxhLmxlbmd0aCtkKTpkO3JldHVybiAwPD1iP2Euc2xpY2UoZCxkK2IpOjA9PT1kP2Euc2xpY2UoYixhLmxlbmd0aCk6YS5zbGljZShNYXRoLm1heCgwLGQrYiksZCl9fWZ1bmN0aW9uIENkKGEpe2Z1bmN0aW9uIGIoYixkKXtkPWQ/LTE6MTtyZXR1cm4gYi5tYXAoZnVuY3Rpb24oYil7dmFyIGM9MSxoPSRhO2lmKEQoYikpaD1iO1xyXG5lbHNlIGlmKEcoYikpe2lmKFwiK1wiPT1iLmNoYXJBdCgwKXx8XCItXCI9PWIuY2hhckF0KDApKWM9XCItXCI9PWIuY2hhckF0KDApPy0xOjEsYj1iLnN1YnN0cmluZygxKTtpZihcIlwiIT09YiYmKGg9YShiKSxoLmNvbnN0YW50KSl2YXIgaz1oKCksaD1mdW5jdGlvbihhKXtyZXR1cm4gYVtrXX19cmV0dXJue2dldDpoLGRlc2NlbmRpbmc6YypkfX0pfWZ1bmN0aW9uIGQoYSl7c3dpdGNoKHR5cGVvZiBhKXtjYXNlIFwibnVtYmVyXCI6Y2FzZSBcImJvb2xlYW5cIjpjYXNlIFwic3RyaW5nXCI6cmV0dXJuITA7ZGVmYXVsdDpyZXR1cm4hMX19cmV0dXJuIGZ1bmN0aW9uKGEsZSxmKXtpZihudWxsPT1hKXJldHVybiBhO2lmKCFDYShhKSl0aHJvdyBQKFwib3JkZXJCeVwiKShcIm5vdGFycmF5XCIsYSk7SyhlKXx8KGU9W2VdKTswPT09ZS5sZW5ndGgmJihlPVtcIitcIl0pO3ZhciBnPWIoZSxmKTtnLnB1c2goe2dldDpmdW5jdGlvbigpe3JldHVybnt9fSxkZXNjZW5kaW5nOmY/LTE6MX0pO2E9QXJyYXkucHJvdG90eXBlLm1hcC5jYWxsKGEsXHJcbmZ1bmN0aW9uKGEsYil7cmV0dXJue3ZhbHVlOmEscHJlZGljYXRlVmFsdWVzOmcubWFwKGZ1bmN0aW9uKGMpe3ZhciBlPWMuZ2V0KGEpO2M9dHlwZW9mIGU7aWYobnVsbD09PWUpYz1cInN0cmluZ1wiLGU9XCJudWxsXCI7ZWxzZSBpZihcInN0cmluZ1wiPT09YyllPWUudG9Mb3dlckNhc2UoKTtlbHNlIGlmKFwib2JqZWN0XCI9PT1jKWE6e2lmKFwiZnVuY3Rpb25cIj09PXR5cGVvZiBlLnZhbHVlT2YmJihlPWUudmFsdWVPZigpLGQoZSkpKWJyZWFrIGE7aWYocmMoZSkmJihlPWUudG9TdHJpbmcoKSxkKGUpKSlicmVhayBhO2U9Yn1yZXR1cm57dmFsdWU6ZSx0eXBlOmN9fSl9fSk7YS5zb3J0KGZ1bmN0aW9uKGEsYil7Zm9yKHZhciBjPTAsZD0wLGU9Zy5sZW5ndGg7ZDxlOysrZCl7dmFyIGM9YS5wcmVkaWNhdGVWYWx1ZXNbZF0sZj1iLnByZWRpY2F0ZVZhbHVlc1tkXSxuPTA7Yy50eXBlPT09Zi50eXBlP2MudmFsdWUhPT1mLnZhbHVlJiYobj1jLnZhbHVlPGYudmFsdWU/LTE6MSk6bj1jLnR5cGU8Zi50eXBlP1xyXG4tMToxO2lmKGM9bipnW2RdLmRlc2NlbmRpbmcpYnJlYWt9cmV0dXJuIGN9KTtyZXR1cm4gYT1hLm1hcChmdW5jdGlvbihhKXtyZXR1cm4gYS52YWx1ZX0pfX1mdW5jdGlvbiBOYShhKXtEKGEpJiYoYT17bGluazphfSk7YS5yZXN0cmljdD1hLnJlc3RyaWN0fHxcIkFDXCI7cmV0dXJuIGthKGEpfWZ1bmN0aW9uIElkKGEsYixkLGMsZSl7dmFyIGY9dGhpcyxnPVtdO2YuJGVycm9yPXt9O2YuJCRzdWNjZXNzPXt9O2YuJHBlbmRpbmc9dTtmLiRuYW1lPWUoYi5uYW1lfHxiLm5nRm9ybXx8XCJcIikoZCk7Zi4kZGlydHk9ITE7Zi4kcHJpc3RpbmU9ITA7Zi4kdmFsaWQ9ITA7Zi4kaW52YWxpZD0hMTtmLiRzdWJtaXR0ZWQ9ITE7Zi4kJHBhcmVudEZvcm09S2I7Zi4kcm9sbGJhY2tWaWV3VmFsdWU9ZnVuY3Rpb24oKXtuKGcsZnVuY3Rpb24oYSl7YS4kcm9sbGJhY2tWaWV3VmFsdWUoKX0pfTtmLiRjb21taXRWaWV3VmFsdWU9ZnVuY3Rpb24oKXtuKGcsZnVuY3Rpb24oYSl7YS4kY29tbWl0Vmlld1ZhbHVlKCl9KX07XHJcbmYuJGFkZENvbnRyb2w9ZnVuY3Rpb24oYSl7VWEoYS4kbmFtZSxcImlucHV0XCIpO2cucHVzaChhKTthLiRuYW1lJiYoZlthLiRuYW1lXT1hKTthLiQkcGFyZW50Rm9ybT1mfTtmLiQkcmVuYW1lQ29udHJvbD1mdW5jdGlvbihhLGIpe3ZhciBjPWEuJG5hbWU7ZltjXT09PWEmJmRlbGV0ZSBmW2NdO2ZbYl09YTthLiRuYW1lPWJ9O2YuJHJlbW92ZUNvbnRyb2w9ZnVuY3Rpb24oYSl7YS4kbmFtZSYmZlthLiRuYW1lXT09PWEmJmRlbGV0ZSBmW2EuJG5hbWVdO24oZi4kcGVuZGluZyxmdW5jdGlvbihiLGMpe2YuJHNldFZhbGlkaXR5KGMsbnVsbCxhKX0pO24oZi4kZXJyb3IsZnVuY3Rpb24oYixjKXtmLiRzZXRWYWxpZGl0eShjLG51bGwsYSl9KTtuKGYuJCRzdWNjZXNzLGZ1bmN0aW9uKGIsYyl7Zi4kc2V0VmFsaWRpdHkoYyxudWxsLGEpfSk7Y2IoZyxhKTthLiQkcGFyZW50Rm9ybT1LYn07SmQoe2N0cmw6dGhpcywkZWxlbWVudDphLHNldDpmdW5jdGlvbihhLGIsYyl7dmFyIGQ9YVtiXTtkP1xyXG4tMT09PWQuaW5kZXhPZihjKSYmZC5wdXNoKGMpOmFbYl09W2NdfSx1bnNldDpmdW5jdGlvbihhLGIsYyl7dmFyIGQ9YVtiXTtkJiYoY2IoZCxjKSwwPT09ZC5sZW5ndGgmJmRlbGV0ZSBhW2JdKX0sJGFuaW1hdGU6Y30pO2YuJHNldERpcnR5PWZ1bmN0aW9uKCl7Yy5yZW1vdmVDbGFzcyhhLFlhKTtjLmFkZENsYXNzKGEsTGIpO2YuJGRpcnR5PSEwO2YuJHByaXN0aW5lPSExO2YuJCRwYXJlbnRGb3JtLiRzZXREaXJ0eSgpfTtmLiRzZXRQcmlzdGluZT1mdW5jdGlvbigpe2Muc2V0Q2xhc3MoYSxZYSxMYitcIiBuZy1zdWJtaXR0ZWRcIik7Zi4kZGlydHk9ITE7Zi4kcHJpc3RpbmU9ITA7Zi4kc3VibWl0dGVkPSExO24oZyxmdW5jdGlvbihhKXthLiRzZXRQcmlzdGluZSgpfSl9O2YuJHNldFVudG91Y2hlZD1mdW5jdGlvbigpe24oZyxmdW5jdGlvbihhKXthLiRzZXRVbnRvdWNoZWQoKX0pfTtmLiRzZXRTdWJtaXR0ZWQ9ZnVuY3Rpb24oKXtjLmFkZENsYXNzKGEsXCJuZy1zdWJtaXR0ZWRcIik7XHJcbmYuJHN1Ym1pdHRlZD0hMDtmLiQkcGFyZW50Rm9ybS4kc2V0U3VibWl0dGVkKCl9fWZ1bmN0aW9uIGxjKGEpe2EuJGZvcm1hdHRlcnMucHVzaChmdW5jdGlvbihiKXtyZXR1cm4gYS4kaXNFbXB0eShiKT9iOmIudG9TdHJpbmcoKX0pfWZ1bmN0aW9uIGxiKGEsYixkLGMsZSxmKXt2YXIgZz1IKGJbMF0udHlwZSk7aWYoIWUuYW5kcm9pZCl7dmFyIGg9ITE7Yi5vbihcImNvbXBvc2l0aW9uc3RhcnRcIixmdW5jdGlvbihhKXtoPSEwfSk7Yi5vbihcImNvbXBvc2l0aW9uZW5kXCIsZnVuY3Rpb24oKXtoPSExO2soKX0pfXZhciBrPWZ1bmN0aW9uKGEpe2wmJihmLmRlZmVyLmNhbmNlbChsKSxsPW51bGwpO2lmKCFoKXt2YXIgZT1iLnZhbCgpO2E9YSYmYS50eXBlO1wicGFzc3dvcmRcIj09PWd8fGQubmdUcmltJiZcImZhbHNlXCI9PT1kLm5nVHJpbXx8KGU9WShlKSk7KGMuJHZpZXdWYWx1ZSE9PWV8fFwiXCI9PT1lJiZjLiQkaGFzTmF0aXZlVmFsaWRhdG9ycykmJmMuJHNldFZpZXdWYWx1ZShlLGEpfX07aWYoZS5oYXNFdmVudChcImlucHV0XCIpKWIub24oXCJpbnB1dFwiLFxyXG5rKTtlbHNle3ZhciBsLG09ZnVuY3Rpb24oYSxiLGMpe2x8fChsPWYuZGVmZXIoZnVuY3Rpb24oKXtsPW51bGw7YiYmYi52YWx1ZT09PWN8fGsoYSl9KSl9O2Iub24oXCJrZXlkb3duXCIsZnVuY3Rpb24oYSl7dmFyIGI9YS5rZXlDb2RlOzkxPT09Ynx8MTU8YiYmMTk+Ynx8Mzc8PWImJjQwPj1ifHxtKGEsdGhpcyx0aGlzLnZhbHVlKX0pO2lmKGUuaGFzRXZlbnQoXCJwYXN0ZVwiKSliLm9uKFwicGFzdGUgY3V0XCIsbSl9Yi5vbihcImNoYW5nZVwiLGspO2MuJHJlbmRlcj1mdW5jdGlvbigpe3ZhciBhPWMuJGlzRW1wdHkoYy4kdmlld1ZhbHVlKT9cIlwiOmMuJHZpZXdWYWx1ZTtiLnZhbCgpIT09YSYmYi52YWwoYSl9fWZ1bmN0aW9uIE1iKGEsYil7cmV0dXJuIGZ1bmN0aW9uKGQsYyl7dmFyIGUsZjtpZihiYShkKSlyZXR1cm4gZDtpZihHKGQpKXsnXCInPT1kLmNoYXJBdCgwKSYmJ1wiJz09ZC5jaGFyQXQoZC5sZW5ndGgtMSkmJihkPWQuc3Vic3RyaW5nKDEsZC5sZW5ndGgtMSkpO2lmKHRnLnRlc3QoZCkpcmV0dXJuIG5ldyBEYXRlKGQpO1xyXG5hLmxhc3RJbmRleD0wO2lmKGU9YS5leGVjKGQpKXJldHVybiBlLnNoaWZ0KCksZj1jP3t5eXl5OmMuZ2V0RnVsbFllYXIoKSxNTTpjLmdldE1vbnRoKCkrMSxkZDpjLmdldERhdGUoKSxISDpjLmdldEhvdXJzKCksbW06Yy5nZXRNaW51dGVzKCksc3M6Yy5nZXRTZWNvbmRzKCksc3NzOmMuZ2V0TWlsbGlzZWNvbmRzKCkvMUUzfTp7eXl5eToxOTcwLE1NOjEsZGQ6MSxISDowLG1tOjAsc3M6MCxzc3M6MH0sbihlLGZ1bmN0aW9uKGEsYyl7YzxiLmxlbmd0aCYmKGZbYltjXV09K2EpfSksbmV3IERhdGUoZi55eXl5LGYuTU0tMSxmLmRkLGYuSEgsZi5tbSxmLnNzfHwwLDFFMypmLnNzc3x8MCl9cmV0dXJuIE5hTn19ZnVuY3Rpb24gbWIoYSxiLGQsYyl7cmV0dXJuIGZ1bmN0aW9uKGUsZixnLGgsayxsLG0pe2Z1bmN0aW9uIHMoYSl7cmV0dXJuIGEmJiEoYS5nZXRUaW1lJiZhLmdldFRpbWUoKSE9PWEuZ2V0VGltZSgpKX1mdW5jdGlvbiByKGEpe3JldHVybiB6KGEpJiYhYmEoYSk/ZChhKXx8XHJcbnU6YX1LZChlLGYsZyxoKTtsYihlLGYsZyxoLGssbCk7dmFyIG49aCYmaC4kb3B0aW9ucyYmaC4kb3B0aW9ucy50aW1lem9uZSxxO2guJCRwYXJzZXJOYW1lPWE7aC4kcGFyc2Vycy5wdXNoKGZ1bmN0aW9uKGEpe3JldHVybiBoLiRpc0VtcHR5KGEpP251bGw6Yi50ZXN0KGEpPyhhPWQoYSxxKSxuJiYoYT1SYihhLG4pKSxhKTp1fSk7aC4kZm9ybWF0dGVycy5wdXNoKGZ1bmN0aW9uKGEpe2lmKGEmJiFiYShhKSl0aHJvdyBuYihcImRhdGVmbXRcIixhKTtpZihzKGEpKXJldHVybihxPWEpJiZuJiYocT1SYihxLG4sITApKSxtKFwiZGF0ZVwiKShhLGMsbik7cT1udWxsO3JldHVyblwiXCJ9KTtpZih6KGcubWluKXx8Zy5uZ01pbil7dmFyIHQ7aC4kdmFsaWRhdG9ycy5taW49ZnVuY3Rpb24oYSl7cmV0dXJuIXMoYSl8fHgodCl8fGQoYSk+PXR9O2cuJG9ic2VydmUoXCJtaW5cIixmdW5jdGlvbihhKXt0PXIoYSk7aC4kdmFsaWRhdGUoKX0pfWlmKHooZy5tYXgpfHxnLm5nTWF4KXt2YXIgcDtoLiR2YWxpZGF0b3JzLm1heD1cclxuZnVuY3Rpb24oYSl7cmV0dXJuIXMoYSl8fHgocCl8fGQoYSk8PXB9O2cuJG9ic2VydmUoXCJtYXhcIixmdW5jdGlvbihhKXtwPXIoYSk7aC4kdmFsaWRhdGUoKX0pfX19ZnVuY3Rpb24gS2QoYSxiLGQsYyl7KGMuJCRoYXNOYXRpdmVWYWxpZGF0b3JzPUooYlswXS52YWxpZGl0eSkpJiZjLiRwYXJzZXJzLnB1c2goZnVuY3Rpb24oYSl7dmFyIGM9Yi5wcm9wKFwidmFsaWRpdHlcIil8fHt9O3JldHVybiBjLmJhZElucHV0fHxjLnR5cGVNaXNtYXRjaD91OmF9KX1mdW5jdGlvbiBMZChhLGIsZCxjLGUpe2lmKHooYykpe2E9YShjKTtpZighYS5jb25zdGFudCl0aHJvdyBuYihcImNvbnN0ZXhwclwiLGQsYyk7cmV0dXJuIGEoYil9cmV0dXJuIGV9ZnVuY3Rpb24gbWMoYSxiKXthPVwibmdDbGFzc1wiK2E7cmV0dXJuW1wiJGFuaW1hdGVcIixmdW5jdGlvbihkKXtmdW5jdGlvbiBjKGEsYil7dmFyIGM9W10sZD0wO2E6Zm9yKDtkPGEubGVuZ3RoO2QrKyl7Zm9yKHZhciBlPWFbZF0sbT0wO208Yi5sZW5ndGg7bSsrKWlmKGU9PVxyXG5iW21dKWNvbnRpbnVlIGE7Yy5wdXNoKGUpfXJldHVybiBjfWZ1bmN0aW9uIGUoYSl7dmFyIGI9W107cmV0dXJuIEsoYSk/KG4oYSxmdW5jdGlvbihhKXtiPWIuY29uY2F0KGUoYSkpfSksYik6RyhhKT9hLnNwbGl0KFwiIFwiKTpKKGEpPyhuKGEsZnVuY3Rpb24oYSxjKXthJiYoYj1iLmNvbmNhdChjLnNwbGl0KFwiIFwiKSkpfSksYik6YX1yZXR1cm57cmVzdHJpY3Q6XCJBQ1wiLGxpbms6ZnVuY3Rpb24oZixnLGgpe2Z1bmN0aW9uIGsoYSxiKXt2YXIgYz1nLmRhdGEoXCIkY2xhc3NDb3VudHNcIil8fFgoKSxkPVtdO24oYSxmdW5jdGlvbihhKXtpZigwPGJ8fGNbYV0pY1thXT0oY1thXXx8MCkrYixjW2FdPT09KygwPGIpJiZkLnB1c2goYSl9KTtnLmRhdGEoXCIkY2xhc3NDb3VudHNcIixjKTtyZXR1cm4gZC5qb2luKFwiIFwiKX1mdW5jdGlvbiBsKGEpe2lmKCEwPT09Ynx8Zi4kaW5kZXglMj09PWIpe3ZhciBsPWUoYXx8W10pO2lmKCFtKXt2YXIgbj1rKGwsMSk7aC4kYWRkQ2xhc3Mobil9ZWxzZSBpZighbGEoYSxcclxubSkpe3ZhciBxPWUobSksbj1jKGwscSksbD1jKHEsbCksbj1rKG4sMSksbD1rKGwsLTEpO24mJm4ubGVuZ3RoJiZkLmFkZENsYXNzKGcsbik7bCYmbC5sZW5ndGgmJmQucmVtb3ZlQ2xhc3MoZyxsKX19bT1WKGEpfXZhciBtO2YuJHdhdGNoKGhbYV0sbCwhMCk7aC4kb2JzZXJ2ZShcImNsYXNzXCIsZnVuY3Rpb24oYil7bChmLiRldmFsKGhbYV0pKX0pO1wibmdDbGFzc1wiIT09YSYmZi4kd2F0Y2goXCIkaW5kZXhcIixmdW5jdGlvbihjLGQpe3ZhciBnPWMmMTtpZihnIT09KGQmMSkpe3ZhciBsPWUoZi4kZXZhbChoW2FdKSk7Zz09PWI/KGc9ayhsLDEpLGguJGFkZENsYXNzKGcpKTooZz1rKGwsLTEpLGguJHJlbW92ZUNsYXNzKGcpKX19KX19fV19ZnVuY3Rpb24gSmQoYSl7ZnVuY3Rpb24gYihhLGIpe2ImJiFmW2FdPyhrLmFkZENsYXNzKGUsYSksZlthXT0hMCk6IWImJmZbYV0mJihrLnJlbW92ZUNsYXNzKGUsYSksZlthXT0hMSl9ZnVuY3Rpb24gZChhLGMpe2E9YT9cIi1cIitBYyhhLFwiLVwiKTpcIlwiO1xyXG5iKG9iK2EsITA9PT1jKTtiKE1kK2EsITE9PT1jKX12YXIgYz1hLmN0cmwsZT1hLiRlbGVtZW50LGY9e30sZz1hLnNldCxoPWEudW5zZXQsaz1hLiRhbmltYXRlO2ZbTWRdPSEoZltvYl09ZS5oYXNDbGFzcyhvYikpO2MuJHNldFZhbGlkaXR5PWZ1bmN0aW9uKGEsZSxmKXt4KGUpPyhjLiRwZW5kaW5nfHwoYy4kcGVuZGluZz17fSksZyhjLiRwZW5kaW5nLGEsZikpOihjLiRwZW5kaW5nJiZoKGMuJHBlbmRpbmcsYSxmKSxOZChjLiRwZW5kaW5nKSYmKGMuJHBlbmRpbmc9dSkpO2JiKGUpP2U/KGgoYy4kZXJyb3IsYSxmKSxnKGMuJCRzdWNjZXNzLGEsZikpOihnKGMuJGVycm9yLGEsZiksaChjLiQkc3VjY2VzcyxhLGYpKTooaChjLiRlcnJvcixhLGYpLGgoYy4kJHN1Y2Nlc3MsYSxmKSk7Yy4kcGVuZGluZz8oYihPZCwhMCksYy4kdmFsaWQ9Yy4kaW52YWxpZD11LGQoXCJcIixudWxsKSk6KGIoT2QsITEpLGMuJHZhbGlkPU5kKGMuJGVycm9yKSxjLiRpbnZhbGlkPSFjLiR2YWxpZCxkKFwiXCIsXHJcbmMuJHZhbGlkKSk7ZT1jLiRwZW5kaW5nJiZjLiRwZW5kaW5nW2FdP3U6Yy4kZXJyb3JbYV0/ITE6Yy4kJHN1Y2Nlc3NbYV0/ITA6bnVsbDtkKGEsZSk7Yy4kJHBhcmVudEZvcm0uJHNldFZhbGlkaXR5KGEsZSxjKX19ZnVuY3Rpb24gTmQoYSl7aWYoYSlmb3IodmFyIGIgaW4gYSlpZihhLmhhc093blByb3BlcnR5KGIpKXJldHVybiExO3JldHVybiEwfXZhciB1Zz0vXlxcLyguKylcXC8oW2Etel0qKSQvLEg9ZnVuY3Rpb24oYSl7cmV0dXJuIEcoYSk/YS50b0xvd2VyQ2FzZSgpOmF9LHFhPU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHksdWI9ZnVuY3Rpb24oYSl7cmV0dXJuIEcoYSk/YS50b1VwcGVyQ2FzZSgpOmF9LEthLEEseGEsd2E9W10uc2xpY2UsV2Y9W10uc3BsaWNlLHZnPVtdLnB1c2gscmE9T2JqZWN0LnByb3RvdHlwZS50b1N0cmluZyxzYz1PYmplY3QuZ2V0UHJvdG90eXBlT2YsRGE9UChcIm5nXCIpLCQ9Uy5hbmd1bGFyfHwoUy5hbmd1bGFyPXt9KSxUYixwYj0wO0thPVouZG9jdW1lbnRNb2RlO1xyXG53LiRpbmplY3Q9W107JGEuJGluamVjdD1bXTt2YXIgSz1BcnJheS5pc0FycmF5LFlkPS9eXFxbb2JqZWN0ICg/OlVpbnQ4fFVpbnQ4Q2xhbXBlZHxVaW50MTZ8VWludDMyfEludDh8SW50MTZ8SW50MzJ8RmxvYXQzMnxGbG9hdDY0KUFycmF5XFxdJC8sWT1mdW5jdGlvbihhKXtyZXR1cm4gRyhhKT9hLnRyaW0oKTphfSx2ZD1mdW5jdGlvbihhKXtyZXR1cm4gYS5yZXBsYWNlKC8oWy0oKVxcW1xcXXt9Kz8qLiRcXF58LDojPCFcXFxcXSkvZyxcIlxcXFwkMVwiKS5yZXBsYWNlKC9cXHgwOC9nLFwiXFxcXHgwOFwiKX0sRWE9ZnVuY3Rpb24oKXtpZigheihFYS5ydWxlcykpe3ZhciBhPVoucXVlcnlTZWxlY3RvcihcIltuZy1jc3BdXCIpfHxaLnF1ZXJ5U2VsZWN0b3IoXCJbZGF0YS1uZy1jc3BdXCIpO2lmKGEpe3ZhciBiPWEuZ2V0QXR0cmlidXRlKFwibmctY3NwXCIpfHxhLmdldEF0dHJpYnV0ZShcImRhdGEtbmctY3NwXCIpO0VhLnJ1bGVzPXtub1Vuc2FmZUV2YWw6IWJ8fC0xIT09Yi5pbmRleE9mKFwibm8tdW5zYWZlLWV2YWxcIiksXHJcbm5vSW5saW5lU3R5bGU6IWJ8fC0xIT09Yi5pbmRleE9mKFwibm8taW5saW5lLXN0eWxlXCIpfX1lbHNle2E9RWE7dHJ5e25ldyBGdW5jdGlvbihcIlwiKSxiPSExfWNhdGNoKGQpe2I9ITB9YS5ydWxlcz17bm9VbnNhZmVFdmFsOmIsbm9JbmxpbmVTdHlsZTohMX19fXJldHVybiBFYS5ydWxlc30scmI9ZnVuY3Rpb24oKXtpZih6KHJiLm5hbWVfKSlyZXR1cm4gcmIubmFtZV87dmFyIGEsYixkPVJhLmxlbmd0aCxjLGU7Zm9yKGI9MDtiPGQ7KytiKWlmKGM9UmFbYl0sYT1aLnF1ZXJ5U2VsZWN0b3IoXCJbXCIrYy5yZXBsYWNlKFwiOlwiLFwiXFxcXDpcIikrXCJqcV1cIikpe2U9YS5nZXRBdHRyaWJ1dGUoYytcImpxXCIpO2JyZWFrfXJldHVybiByYi5uYW1lXz1lfSxSYT1bXCJuZy1cIixcImRhdGEtbmctXCIsXCJuZzpcIixcIngtbmctXCJdLGVlPS9bQS1aXS9nLEJjPSExLFFhPTMsaWU9e2Z1bGw6XCIxLjUuMC1yYy4wXCIsbWFqb3I6MSxtaW5vcjo1LGRvdDowLGNvZGVOYW1lOlwib2Jsb25nLXBhbm9wdGlrdW1cIn07RS5leHBhbmRvPVxyXG5cIm5nMzM5XCI7dmFyIGliPUUuY2FjaGU9e30sSmY9MTtFLl9kYXRhPWZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLmNhY2hlW2FbdGhpcy5leHBhbmRvXV18fHt9fTt2YXIgRWY9LyhbXFw6XFwtXFxfXSsoLikpL2csRmY9L15tb3ooW0EtWl0pLyx5Yj17bW91c2VsZWF2ZTpcIm1vdXNlb3V0XCIsbW91c2VlbnRlcjpcIm1vdXNlb3ZlclwifSxWYj1QKFwianFMaXRlXCIpLElmPS9ePChbXFx3LV0rKVxccypcXC8/Pig/OjxcXC9cXDE+fCkkLyxVYj0vPHwmIz9cXHcrOy8sR2Y9LzwoW1xcdzotXSspLyxIZj0vPCg/IWFyZWF8YnJ8Y29sfGVtYmVkfGhyfGltZ3xpbnB1dHxsaW5rfG1ldGF8cGFyYW0pKChbXFx3Oi1dKylbXj5dKilcXC8+L2dpLG5hPXtvcHRpb246WzEsJzxzZWxlY3QgbXVsdGlwbGU9XCJtdWx0aXBsZVwiPicsXCI8L3NlbGVjdD5cIl0sdGhlYWQ6WzEsXCI8dGFibGU+XCIsXCI8L3RhYmxlPlwiXSxjb2w6WzIsXCI8dGFibGU+PGNvbGdyb3VwPlwiLFwiPC9jb2xncm91cD48L3RhYmxlPlwiXSx0cjpbMixcIjx0YWJsZT48dGJvZHk+XCIsXHJcblwiPC90Ym9keT48L3RhYmxlPlwiXSx0ZDpbMyxcIjx0YWJsZT48dGJvZHk+PHRyPlwiLFwiPC90cj48L3Rib2R5PjwvdGFibGU+XCJdLF9kZWZhdWx0OlswLFwiXCIsXCJcIl19O25hLm9wdGdyb3VwPW5hLm9wdGlvbjtuYS50Ym9keT1uYS50Zm9vdD1uYS5jb2xncm91cD1uYS5jYXB0aW9uPW5hLnRoZWFkO25hLnRoPW5hLnRkO3ZhciBPZj1Ob2RlLnByb3RvdHlwZS5jb250YWluc3x8ZnVuY3Rpb24oYSl7cmV0dXJuISEodGhpcy5jb21wYXJlRG9jdW1lbnRQb3NpdGlvbihhKSYxNil9LFNhPUUucHJvdG90eXBlPXtyZWFkeTpmdW5jdGlvbihhKXtmdW5jdGlvbiBiKCl7ZHx8KGQ9ITAsYSgpKX12YXIgZD0hMTtcImNvbXBsZXRlXCI9PT1aLnJlYWR5U3RhdGU/c2V0VGltZW91dChiKToodGhpcy5vbihcIkRPTUNvbnRlbnRMb2FkZWRcIixiKSxFKFMpLm9uKFwibG9hZFwiLGIpKX0sdG9TdHJpbmc6ZnVuY3Rpb24oKXt2YXIgYT1bXTtuKHRoaXMsZnVuY3Rpb24oYil7YS5wdXNoKFwiXCIrYil9KTtyZXR1cm5cIltcIithLmpvaW4oXCIsIFwiKStcclxuXCJdXCJ9LGVxOmZ1bmN0aW9uKGEpe3JldHVybiAwPD1hP0EodGhpc1thXSk6QSh0aGlzW3RoaXMubGVuZ3RoK2FdKX0sbGVuZ3RoOjAscHVzaDp2Zyxzb3J0OltdLnNvcnQsc3BsaWNlOltdLnNwbGljZX0sRGI9e307bihcIm11bHRpcGxlIHNlbGVjdGVkIGNoZWNrZWQgZGlzYWJsZWQgcmVhZE9ubHkgcmVxdWlyZWQgb3BlblwiLnNwbGl0KFwiIFwiKSxmdW5jdGlvbihhKXtEYltIKGEpXT1hfSk7dmFyIFRjPXt9O24oXCJpbnB1dCBzZWxlY3Qgb3B0aW9uIHRleHRhcmVhIGJ1dHRvbiBmb3JtIGRldGFpbHNcIi5zcGxpdChcIiBcIiksZnVuY3Rpb24oYSl7VGNbYV09ITB9KTt2YXIgJGM9e25nTWlubGVuZ3RoOlwibWlubGVuZ3RoXCIsbmdNYXhsZW5ndGg6XCJtYXhsZW5ndGhcIixuZ01pbjpcIm1pblwiLG5nTWF4OlwibWF4XCIsbmdQYXR0ZXJuOlwicGF0dGVyblwifTtuKHtkYXRhOlhiLHJlbW92ZURhdGE6aGIsaGFzRGF0YTpmdW5jdGlvbihhKXtmb3IodmFyIGIgaW4gaWJbYS5uZzMzOV0pcmV0dXJuITA7cmV0dXJuITF9LFxyXG5jbGVhbkRhdGE6ZnVuY3Rpb24oYSl7Zm9yKHZhciBiPTAsZD1hLmxlbmd0aDtiPGQ7YisrKWhiKGFbYl0pfX0sZnVuY3Rpb24oYSxiKXtFW2JdPWF9KTtuKHtkYXRhOlhiLGluaGVyaXRlZERhdGE6Q2Isc2NvcGU6ZnVuY3Rpb24oYSl7cmV0dXJuIEEuZGF0YShhLFwiJHNjb3BlXCIpfHxDYihhLnBhcmVudE5vZGV8fGEsW1wiJGlzb2xhdGVTY29wZVwiLFwiJHNjb3BlXCJdKX0saXNvbGF0ZVNjb3BlOmZ1bmN0aW9uKGEpe3JldHVybiBBLmRhdGEoYSxcIiRpc29sYXRlU2NvcGVcIil8fEEuZGF0YShhLFwiJGlzb2xhdGVTY29wZU5vVGVtcGxhdGVcIil9LGNvbnRyb2xsZXI6UWMsaW5qZWN0b3I6ZnVuY3Rpb24oYSl7cmV0dXJuIENiKGEsXCIkaW5qZWN0b3JcIil9LHJlbW92ZUF0dHI6ZnVuY3Rpb24oYSxiKXthLnJlbW92ZUF0dHJpYnV0ZShiKX0saGFzQ2xhc3M6emIsY3NzOmZ1bmN0aW9uKGEsYixkKXtiPWdiKGIpO2lmKHooZCkpYS5zdHlsZVtiXT1kO2Vsc2UgcmV0dXJuIGEuc3R5bGVbYl19LGF0dHI6ZnVuY3Rpb24oYSxcclxuYixkKXt2YXIgYz1hLm5vZGVUeXBlO2lmKGMhPT1RYSYmMiE9PWMmJjghPT1jKWlmKGM9SChiKSxEYltjXSlpZih6KGQpKWQ/KGFbYl09ITAsYS5zZXRBdHRyaWJ1dGUoYixjKSk6KGFbYl09ITEsYS5yZW1vdmVBdHRyaWJ1dGUoYykpO2Vsc2UgcmV0dXJuIGFbYl18fChhLmF0dHJpYnV0ZXMuZ2V0TmFtZWRJdGVtKGIpfHx3KS5zcGVjaWZpZWQ/Yzp1O2Vsc2UgaWYoeihkKSlhLnNldEF0dHJpYnV0ZShiLGQpO2Vsc2UgaWYoYS5nZXRBdHRyaWJ1dGUpcmV0dXJuIGE9YS5nZXRBdHRyaWJ1dGUoYiwyKSxudWxsPT09YT91OmF9LHByb3A6ZnVuY3Rpb24oYSxiLGQpe2lmKHooZCkpYVtiXT1kO2Vsc2UgcmV0dXJuIGFbYl19LHRleHQ6ZnVuY3Rpb24oKXtmdW5jdGlvbiBhKGEsZCl7aWYoeChkKSl7dmFyIGM9YS5ub2RlVHlwZTtyZXR1cm4gMT09PWN8fGM9PT1RYT9hLnRleHRDb250ZW50OlwiXCJ9YS50ZXh0Q29udGVudD1kfWEuJGR2PVwiXCI7cmV0dXJuIGF9KCksdmFsOmZ1bmN0aW9uKGEsYil7aWYoeChiKSl7aWYoYS5tdWx0aXBsZSYmXHJcblwic2VsZWN0XCI9PT10YShhKSl7dmFyIGQ9W107bihhLm9wdGlvbnMsZnVuY3Rpb24oYSl7YS5zZWxlY3RlZCYmZC5wdXNoKGEudmFsdWV8fGEudGV4dCl9KTtyZXR1cm4gMD09PWQubGVuZ3RoP251bGw6ZH1yZXR1cm4gYS52YWx1ZX1hLnZhbHVlPWJ9LGh0bWw6ZnVuY3Rpb24oYSxiKXtpZih4KGIpKXJldHVybiBhLmlubmVySFRNTDt3YihhLCEwKTthLmlubmVySFRNTD1ifSxlbXB0eTpSY30sZnVuY3Rpb24oYSxiKXtFLnByb3RvdHlwZVtiXT1mdW5jdGlvbihiLGMpe3ZhciBlLGYsZz10aGlzLmxlbmd0aDtpZihhIT09UmMmJngoMj09YS5sZW5ndGgmJmEhPT16YiYmYSE9PVFjP2I6Yykpe2lmKEooYikpe2ZvcihlPTA7ZTxnO2UrKylpZihhPT09WGIpYSh0aGlzW2VdLGIpO2Vsc2UgZm9yKGYgaW4gYilhKHRoaXNbZV0sZixiW2ZdKTtyZXR1cm4gdGhpc31lPWEuJGR2O2c9eChlKT9NYXRoLm1pbihnLDEpOmc7Zm9yKGY9MDtmPGc7ZisrKXt2YXIgaD1hKHRoaXNbZl0sYixjKTtlPWU/XHJcbmUraDpofXJldHVybiBlfWZvcihlPTA7ZTxnO2UrKylhKHRoaXNbZV0sYixjKTtyZXR1cm4gdGhpc319KTtuKHtyZW1vdmVEYXRhOmhiLG9uOmZ1bmN0aW9uKGEsYixkLGMpe2lmKHooYykpdGhyb3cgVmIoXCJvbmFyZ3NcIik7aWYoTWMoYSkpe2M9eGIoYSwhMCk7dmFyIGU9Yy5ldmVudHMsZj1jLmhhbmRsZTtmfHwoZj1jLmhhbmRsZT1MZihhLGUpKTtjPTA8PWIuaW5kZXhPZihcIiBcIik/Yi5zcGxpdChcIiBcIik6W2JdO2Zvcih2YXIgZz1jLmxlbmd0aCxoPWZ1bmN0aW9uKGIsYyxnKXt2YXIgaD1lW2JdO2h8fChoPWVbYl09W10saC5zcGVjaWFsSGFuZGxlcldyYXBwZXI9YyxcIiRkZXN0cm95XCI9PT1ifHxnfHxhLmFkZEV2ZW50TGlzdGVuZXIoYixmLCExKSk7aC5wdXNoKGQpfTtnLS07KWI9Y1tnXSx5YltiXT8oaCh5YltiXSxOZiksaChiLHUsITApKTpoKGIpfX0sb2ZmOlBjLG9uZTpmdW5jdGlvbihhLGIsZCl7YT1BKGEpO2Eub24oYixmdW5jdGlvbiBlKCl7YS5vZmYoYixkKTthLm9mZihiLFxyXG5lKX0pO2Eub24oYixkKX0scmVwbGFjZVdpdGg6ZnVuY3Rpb24oYSxiKXt2YXIgZCxjPWEucGFyZW50Tm9kZTt3YihhKTtuKG5ldyBFKGIpLGZ1bmN0aW9uKGIpe2Q/Yy5pbnNlcnRCZWZvcmUoYixkLm5leHRTaWJsaW5nKTpjLnJlcGxhY2VDaGlsZChiLGEpO2Q9Yn0pfSxjaGlsZHJlbjpmdW5jdGlvbihhKXt2YXIgYj1bXTtuKGEuY2hpbGROb2RlcyxmdW5jdGlvbihhKXsxPT09YS5ub2RlVHlwZSYmYi5wdXNoKGEpfSk7cmV0dXJuIGJ9LGNvbnRlbnRzOmZ1bmN0aW9uKGEpe3JldHVybiBhLmNvbnRlbnREb2N1bWVudHx8YS5jaGlsZE5vZGVzfHxbXX0sYXBwZW5kOmZ1bmN0aW9uKGEsYil7dmFyIGQ9YS5ub2RlVHlwZTtpZigxPT09ZHx8MTE9PT1kKXtiPW5ldyBFKGIpO2Zvcih2YXIgZD0wLGM9Yi5sZW5ndGg7ZDxjO2QrKylhLmFwcGVuZENoaWxkKGJbZF0pfX0scHJlcGVuZDpmdW5jdGlvbihhLGIpe2lmKDE9PT1hLm5vZGVUeXBlKXt2YXIgZD1hLmZpcnN0Q2hpbGQ7bihuZXcgRShiKSxcclxuZnVuY3Rpb24oYil7YS5pbnNlcnRCZWZvcmUoYixkKX0pfX0sd3JhcDpmdW5jdGlvbihhLGIpe2I9QShiKS5lcSgwKS5jbG9uZSgpWzBdO3ZhciBkPWEucGFyZW50Tm9kZTtkJiZkLnJlcGxhY2VDaGlsZChiLGEpO2IuYXBwZW5kQ2hpbGQoYSl9LHJlbW92ZTpZYixkZXRhY2g6ZnVuY3Rpb24oYSl7WWIoYSwhMCl9LGFmdGVyOmZ1bmN0aW9uKGEsYil7dmFyIGQ9YSxjPWEucGFyZW50Tm9kZTtiPW5ldyBFKGIpO2Zvcih2YXIgZT0wLGY9Yi5sZW5ndGg7ZTxmO2UrKyl7dmFyIGc9YltlXTtjLmluc2VydEJlZm9yZShnLGQubmV4dFNpYmxpbmcpO2Q9Z319LGFkZENsYXNzOkJiLHJlbW92ZUNsYXNzOkFiLHRvZ2dsZUNsYXNzOmZ1bmN0aW9uKGEsYixkKXtiJiZuKGIuc3BsaXQoXCIgXCIpLGZ1bmN0aW9uKGIpe3ZhciBlPWQ7eChlKSYmKGU9IXpiKGEsYikpOyhlP0JiOkFiKShhLGIpfSl9LHBhcmVudDpmdW5jdGlvbihhKXtyZXR1cm4oYT1hLnBhcmVudE5vZGUpJiYxMSE9PWEubm9kZVR5cGU/XHJcbmE6bnVsbH0sbmV4dDpmdW5jdGlvbihhKXtyZXR1cm4gYS5uZXh0RWxlbWVudFNpYmxpbmd9LGZpbmQ6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gYS5nZXRFbGVtZW50c0J5VGFnTmFtZT9hLmdldEVsZW1lbnRzQnlUYWdOYW1lKGIpOltdfSxjbG9uZTpXYix0cmlnZ2VySGFuZGxlcjpmdW5jdGlvbihhLGIsZCl7dmFyIGMsZSxmPWIudHlwZXx8YixnPXhiKGEpO2lmKGc9KGc9ZyYmZy5ldmVudHMpJiZnW2ZdKWM9e3ByZXZlbnREZWZhdWx0OmZ1bmN0aW9uKCl7dGhpcy5kZWZhdWx0UHJldmVudGVkPSEwfSxpc0RlZmF1bHRQcmV2ZW50ZWQ6ZnVuY3Rpb24oKXtyZXR1cm4hMD09PXRoaXMuZGVmYXVsdFByZXZlbnRlZH0sc3RvcEltbWVkaWF0ZVByb3BhZ2F0aW9uOmZ1bmN0aW9uKCl7dGhpcy5pbW1lZGlhdGVQcm9wYWdhdGlvblN0b3BwZWQ9ITB9LGlzSW1tZWRpYXRlUHJvcGFnYXRpb25TdG9wcGVkOmZ1bmN0aW9uKCl7cmV0dXJuITA9PT10aGlzLmltbWVkaWF0ZVByb3BhZ2F0aW9uU3RvcHBlZH0sXHJcbnN0b3BQcm9wYWdhdGlvbjp3LHR5cGU6Zix0YXJnZXQ6YX0sYi50eXBlJiYoYz1MKGMsYikpLGI9VihnKSxlPWQ/W2NdLmNvbmNhdChkKTpbY10sbihiLGZ1bmN0aW9uKGIpe2MuaXNJbW1lZGlhdGVQcm9wYWdhdGlvblN0b3BwZWQoKXx8Yi5hcHBseShhLGUpfSl9fSxmdW5jdGlvbihhLGIpe0UucHJvdG90eXBlW2JdPWZ1bmN0aW9uKGIsYyxlKXtmb3IodmFyIGYsZz0wLGg9dGhpcy5sZW5ndGg7ZzxoO2crKyl4KGYpPyhmPWEodGhpc1tnXSxiLGMsZSkseihmKSYmKGY9QShmKSkpOk9jKGYsYSh0aGlzW2ddLGIsYyxlKSk7cmV0dXJuIHooZik/Zjp0aGlzfTtFLnByb3RvdHlwZS5iaW5kPUUucHJvdG90eXBlLm9uO0UucHJvdG90eXBlLnVuYmluZD1FLnByb3RvdHlwZS5vZmZ9KTtWYS5wcm90b3R5cGU9e3B1dDpmdW5jdGlvbihhLGIpe3RoaXNbRmEoYSx0aGlzLm5leHRVaWQpXT1ifSxnZXQ6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXNbRmEoYSx0aGlzLm5leHRVaWQpXX0scmVtb3ZlOmZ1bmN0aW9uKGEpe3ZhciBiPVxyXG50aGlzW2E9RmEoYSx0aGlzLm5leHRVaWQpXTtkZWxldGUgdGhpc1thXTtyZXR1cm4gYn19O3ZhciBDZj1bZnVuY3Rpb24oKXt0aGlzLiRnZXQ9W2Z1bmN0aW9uKCl7cmV0dXJuIFZhfV19XSxRZj0vXihbXlxcKF0rPyk9Pi8sUmY9L15bXlxcKF0qXFwoXFxzKihbXlxcKV0qKVxcKS9tLHdnPS8sLyx4Zz0vXlxccyooXz8pKFxcUys/KVxcMVxccyokLyxQZj0vKChcXC9cXC8uKiQpfChcXC9cXCpbXFxzXFxTXSo/XFwqXFwvKSkvbWcsR2E9UChcIiRpbmplY3RvclwiKTtmYi4kJGFubm90YXRlPWZ1bmN0aW9uKGEsYixkKXt2YXIgYztpZihcImZ1bmN0aW9uXCI9PT10eXBlb2YgYSl7aWYoIShjPWEuJGluamVjdCkpe2M9W107aWYoYS5sZW5ndGgpe2lmKGIpdGhyb3cgRyhkKSYmZHx8KGQ9YS5uYW1lfHxTZihhKSksR2EoXCJzdHJpY3RkaVwiLGQpO2I9VWMoYSk7bihiWzFdLnNwbGl0KHdnKSxmdW5jdGlvbihhKXthLnJlcGxhY2UoeGcsZnVuY3Rpb24oYSxiLGQpe2MucHVzaChkKX0pfSl9YS4kaW5qZWN0PWN9fWVsc2UgSyhhKT9cclxuKGI9YS5sZW5ndGgtMSxUYShhW2JdLFwiZm5cIiksYz1hLnNsaWNlKDAsYikpOlRhKGEsXCJmblwiLCEwKTtyZXR1cm4gY307dmFyIFBkPVAoXCIkYW5pbWF0ZVwiKSxXZT1mdW5jdGlvbigpe3ZhciBhPW5ldyBWYSxiPVtdO3RoaXMuJGdldD1bXCIkJEFuaW1hdGVSdW5uZXJcIixcIiRyb290U2NvcGVcIixmdW5jdGlvbihkLGMpe2Z1bmN0aW9uIGUoYSxiLGMpe3ZhciBkPSExO2ImJihiPUcoYik/Yi5zcGxpdChcIiBcIik6SyhiKT9iOltdLG4oYixmdW5jdGlvbihiKXtiJiYoZD0hMCxhW2JdPWMpfSkpO3JldHVybiBkfWZ1bmN0aW9uIGYoKXtuKGIsZnVuY3Rpb24oYil7dmFyIGM9YS5nZXQoYik7aWYoYyl7dmFyIGQ9VGYoYi5hdHRyKFwiY2xhc3NcIikpLGU9XCJcIixmPVwiXCI7bihjLGZ1bmN0aW9uKGEsYil7YSE9PSEhZFtiXSYmKGE/ZSs9KGUubGVuZ3RoP1wiIFwiOlwiXCIpK2I6Zis9KGYubGVuZ3RoP1wiIFwiOlwiXCIpK2IpfSk7bihiLGZ1bmN0aW9uKGEpe2UmJkJiKGEsZSk7ZiYmQWIoYSxmKX0pO2EucmVtb3ZlKGIpfX0pO1xyXG5iLmxlbmd0aD0wfXJldHVybntlbmFibGVkOncsb246dyxvZmY6dyxwaW46dyxwdXNoOmZ1bmN0aW9uKGcsaCxrLGwpe2wmJmwoKTtrPWt8fHt9O2suZnJvbSYmZy5jc3Moay5mcm9tKTtrLnRvJiZnLmNzcyhrLnRvKTtpZihrLmFkZENsYXNzfHxrLnJlbW92ZUNsYXNzKWlmKGg9ay5hZGRDbGFzcyxsPWsucmVtb3ZlQ2xhc3Msaz1hLmdldChnKXx8e30saD1lKGssaCwhMCksbD1lKGssbCwhMSksaHx8bClhLnB1dChnLGspLGIucHVzaChnKSwxPT09Yi5sZW5ndGgmJmMuJCRwb3N0RGlnZXN0KGYpO2c9bmV3IGQ7Zy5jb21wbGV0ZSgpO3JldHVybiBnfX19XX0sVWU9W1wiJHByb3ZpZGVcIixmdW5jdGlvbihhKXt2YXIgYj10aGlzO3RoaXMuJCRyZWdpc3RlcmVkQW5pbWF0aW9ucz1PYmplY3QuY3JlYXRlKG51bGwpO3RoaXMucmVnaXN0ZXI9ZnVuY3Rpb24oZCxjKXtpZihkJiZcIi5cIiE9PWQuY2hhckF0KDApKXRocm93IFBkKFwibm90Y3NlbFwiLGQpO3ZhciBlPWQrXCItYW5pbWF0aW9uXCI7Yi4kJHJlZ2lzdGVyZWRBbmltYXRpb25zW2Quc3Vic3RyKDEpXT1cclxuZTthLmZhY3RvcnkoZSxjKX07dGhpcy5jbGFzc05hbWVGaWx0ZXI9ZnVuY3Rpb24oYSl7aWYoMT09PWFyZ3VtZW50cy5sZW5ndGgmJih0aGlzLiQkY2xhc3NOYW1lRmlsdGVyPWEgaW5zdGFuY2VvZiBSZWdFeHA/YTpudWxsKSYmLyhcXHMrfFxcLyluZy1hbmltYXRlKFxccyt8XFwvKS8udGVzdCh0aGlzLiQkY2xhc3NOYW1lRmlsdGVyLnRvU3RyaW5nKCkpKXRocm93IFBkKFwibm9uZ2Nsc1wiLFwibmctYW5pbWF0ZVwiKTtyZXR1cm4gdGhpcy4kJGNsYXNzTmFtZUZpbHRlcn07dGhpcy4kZ2V0PVtcIiQkYW5pbWF0ZVF1ZXVlXCIsZnVuY3Rpb24oYSl7ZnVuY3Rpb24gYihhLGMsZCl7aWYoZCl7dmFyIGg7YTp7Zm9yKGg9MDtoPGQubGVuZ3RoO2grKyl7dmFyIGs9ZFtoXTtpZigxPT09ay5ub2RlVHlwZSl7aD1rO2JyZWFrIGF9fWg9dm9pZCAwfSFofHxoLnBhcmVudE5vZGV8fGgucHJldmlvdXNFbGVtZW50U2libGluZ3x8KGQ9bnVsbCl9ZD9kLmFmdGVyKGEpOmMucHJlcGVuZChhKX1yZXR1cm57b246YS5vbixcclxub2ZmOmEub2ZmLHBpbjphLnBpbixlbmFibGVkOmEuZW5hYmxlZCxjYW5jZWw6ZnVuY3Rpb24oYSl7YS5lbmQmJmEuZW5kKCl9LGVudGVyOmZ1bmN0aW9uKGUsZixnLGgpe2Y9ZiYmQShmKTtnPWcmJkEoZyk7Zj1mfHxnLnBhcmVudCgpO2IoZSxmLGcpO3JldHVybiBhLnB1c2goZSxcImVudGVyXCIsSWEoaCkpfSxtb3ZlOmZ1bmN0aW9uKGUsZixnLGgpe2Y9ZiYmQShmKTtnPWcmJkEoZyk7Zj1mfHxnLnBhcmVudCgpO2IoZSxmLGcpO3JldHVybiBhLnB1c2goZSxcIm1vdmVcIixJYShoKSl9LGxlYXZlOmZ1bmN0aW9uKGIsYyl7cmV0dXJuIGEucHVzaChiLFwibGVhdmVcIixJYShjKSxmdW5jdGlvbigpe2IucmVtb3ZlKCl9KX0sYWRkQ2xhc3M6ZnVuY3Rpb24oYixjLGcpe2c9SWEoZyk7Zy5hZGRDbGFzcz1qYihnLmFkZGNsYXNzLGMpO3JldHVybiBhLnB1c2goYixcImFkZENsYXNzXCIsZyl9LHJlbW92ZUNsYXNzOmZ1bmN0aW9uKGIsYyxnKXtnPUlhKGcpO2cucmVtb3ZlQ2xhc3M9amIoZy5yZW1vdmVDbGFzcyxcclxuYyk7cmV0dXJuIGEucHVzaChiLFwicmVtb3ZlQ2xhc3NcIixnKX0sc2V0Q2xhc3M6ZnVuY3Rpb24oYixjLGcsaCl7aD1JYShoKTtoLmFkZENsYXNzPWpiKGguYWRkQ2xhc3MsYyk7aC5yZW1vdmVDbGFzcz1qYihoLnJlbW92ZUNsYXNzLGcpO3JldHVybiBhLnB1c2goYixcInNldENsYXNzXCIsaCl9LGFuaW1hdGU6ZnVuY3Rpb24oYixjLGcsaCxrKXtrPUlhKGspO2suZnJvbT1rLmZyb20/TChrLmZyb20sYyk6YztrLnRvPWsudG8/TChrLnRvLGcpOmc7ay50ZW1wQ2xhc3Nlcz1qYihrLnRlbXBDbGFzc2VzLGh8fFwibmctaW5saW5lLWFuaW1hdGVcIik7cmV0dXJuIGEucHVzaChiLFwiYW5pbWF0ZVwiLGspfX19XX1dLFllPWZ1bmN0aW9uKCl7dGhpcy4kZ2V0PVtcIiQkckFGXCIsZnVuY3Rpb24oYSl7ZnVuY3Rpb24gYihiKXtkLnB1c2goYik7MTxkLmxlbmd0aHx8YShmdW5jdGlvbigpe2Zvcih2YXIgYT0wO2E8ZC5sZW5ndGg7YSsrKWRbYV0oKTtkPVtdfSl9dmFyIGQ9W107cmV0dXJuIGZ1bmN0aW9uKCl7dmFyIGE9XHJcbiExO2IoZnVuY3Rpb24oKXthPSEwfSk7cmV0dXJuIGZ1bmN0aW9uKGQpe2E/ZCgpOmIoZCl9fX1dfSxYZT1mdW5jdGlvbigpe3RoaXMuJGdldD1bXCIkcVwiLFwiJHNuaWZmZXJcIixcIiQkYW5pbWF0ZUFzeW5jUnVuXCIsZnVuY3Rpb24oYSxiLGQpe2Z1bmN0aW9uIGMoYSl7dGhpcy5zZXRIb3N0KGEpO3RoaXMuX2RvbmVDYWxsYmFja3M9W107dGhpcy5fcnVuSW5BbmltYXRpb25GcmFtZT1kKCk7dGhpcy5fc3RhdGU9MH1jLmNoYWluPWZ1bmN0aW9uKGEsYil7ZnVuY3Rpb24gYygpe2lmKGQ9PT1hLmxlbmd0aCliKCEwKTtlbHNlIGFbZF0oZnVuY3Rpb24oYSl7ITE9PT1hP2IoITEpOihkKyssYygpKX0pfXZhciBkPTA7YygpfTtjLmFsbD1mdW5jdGlvbihhLGIpe2Z1bmN0aW9uIGMoZyl7az1rJiZnOysrZD09PWEubGVuZ3RoJiZiKGspfXZhciBkPTAsaz0hMDtuKGEsZnVuY3Rpb24oYSl7YS5kb25lKGMpfSl9O2MucHJvdG90eXBlPXtzZXRIb3N0OmZ1bmN0aW9uKGEpe3RoaXMuaG9zdD1hfHx7fX0sXHJcbmRvbmU6ZnVuY3Rpb24oYSl7Mj09PXRoaXMuX3N0YXRlP2EoKTp0aGlzLl9kb25lQ2FsbGJhY2tzLnB1c2goYSl9LHByb2dyZXNzOncsZ2V0UHJvbWlzZTpmdW5jdGlvbigpe2lmKCF0aGlzLnByb21pc2Upe3ZhciBiPXRoaXM7dGhpcy5wcm9taXNlPWEoZnVuY3Rpb24oYSxjKXtiLmRvbmUoZnVuY3Rpb24oYil7ITE9PT1iP2MoKTphKCl9KX0pfXJldHVybiB0aGlzLnByb21pc2V9LHRoZW46ZnVuY3Rpb24oYSxiKXtyZXR1cm4gdGhpcy5nZXRQcm9taXNlKCkudGhlbihhLGIpfSxcImNhdGNoXCI6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMuZ2V0UHJvbWlzZSgpW1wiY2F0Y2hcIl0oYSl9LFwiZmluYWxseVwiOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLmdldFByb21pc2UoKVtcImZpbmFsbHlcIl0oYSl9LHBhdXNlOmZ1bmN0aW9uKCl7dGhpcy5ob3N0LnBhdXNlJiZ0aGlzLmhvc3QucGF1c2UoKX0scmVzdW1lOmZ1bmN0aW9uKCl7dGhpcy5ob3N0LnJlc3VtZSYmdGhpcy5ob3N0LnJlc3VtZSgpfSxlbmQ6ZnVuY3Rpb24oKXt0aGlzLmhvc3QuZW5kJiZcclxudGhpcy5ob3N0LmVuZCgpO3RoaXMuX3Jlc29sdmUoITApfSxjYW5jZWw6ZnVuY3Rpb24oKXt0aGlzLmhvc3QuY2FuY2VsJiZ0aGlzLmhvc3QuY2FuY2VsKCk7dGhpcy5fcmVzb2x2ZSghMSl9LGNvbXBsZXRlOmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXM7MD09PWIuX3N0YXRlJiYoYi5fc3RhdGU9MSxiLl9ydW5JbkFuaW1hdGlvbkZyYW1lKGZ1bmN0aW9uKCl7Yi5fcmVzb2x2ZShhKX0pKX0sX3Jlc29sdmU6ZnVuY3Rpb24oYSl7MiE9PXRoaXMuX3N0YXRlJiYobih0aGlzLl9kb25lQ2FsbGJhY2tzLGZ1bmN0aW9uKGIpe2IoYSl9KSx0aGlzLl9kb25lQ2FsbGJhY2tzLmxlbmd0aD0wLHRoaXMuX3N0YXRlPTIpfX07cmV0dXJuIGN9XX0sVmU9ZnVuY3Rpb24oKXt0aGlzLiRnZXQ9W1wiJCRyQUZcIixcIiRxXCIsXCIkJEFuaW1hdGVSdW5uZXJcIixmdW5jdGlvbihhLGIsZCl7cmV0dXJuIGZ1bmN0aW9uKGIsZSl7ZnVuY3Rpb24gZigpe2EoZnVuY3Rpb24oKXtnLmFkZENsYXNzJiYoYi5hZGRDbGFzcyhnLmFkZENsYXNzKSxcclxuZy5hZGRDbGFzcz1udWxsKTtnLnJlbW92ZUNsYXNzJiYoYi5yZW1vdmVDbGFzcyhnLnJlbW92ZUNsYXNzKSxnLnJlbW92ZUNsYXNzPW51bGwpO2cudG8mJihiLmNzcyhnLnRvKSxnLnRvPW51bGwpO2h8fGsuY29tcGxldGUoKTtoPSEwfSk7cmV0dXJuIGt9dmFyIGc9UGEoZSk7Zy5jbGVhbnVwU3R5bGVzJiYoZy5mcm9tPWcudG89bnVsbCk7Zy5mcm9tJiYoYi5jc3MoZy5mcm9tKSxnLmZyb209bnVsbCk7dmFyIGgsaz1uZXcgZDtyZXR1cm57c3RhcnQ6ZixlbmQ6Zn19fV19LGlhPVAoXCIkY29tcGlsZVwiKTtFYy4kaW5qZWN0PVtcIiRwcm92aWRlXCIsXCIkJHNhbml0aXplVXJpUHJvdmlkZXJcIl07dmFyIFdjPS9eKCg/Onh8ZGF0YSlbXFw6XFwtX10pL2ksWGY9UChcIiRjb250cm9sbGVyXCIpLGFkPS9eKFxcUyspKFxccythc1xccysoXFx3KykpPyQvLGRmPWZ1bmN0aW9uKCl7dGhpcy4kZ2V0PVtcIiRkb2N1bWVudFwiLGZ1bmN0aW9uKGEpe3JldHVybiBmdW5jdGlvbihiKXtiPyFiLm5vZGVUeXBlJiZiIGluc3RhbmNlb2ZcclxuQSYmKGI9YlswXSk6Yj1hWzBdLmJvZHk7cmV0dXJuIGIub2Zmc2V0V2lkdGgrMX19XX0sYmQ9XCJhcHBsaWNhdGlvbi9qc29uXCIsYmM9e1wiQ29udGVudC1UeXBlXCI6YmQrXCI7Y2hhcnNldD11dGYtOFwifSxaZj0vXlxcW3xeXFx7KD8hXFx7KS8sJGY9e1wiW1wiOi9dJC8sXCJ7XCI6L30kL30sWWY9L15cXClcXF1cXH0nLD9cXG4vLHlnPVAoXCIkaHR0cFwiKSxmZD1mdW5jdGlvbihhKXtyZXR1cm4gZnVuY3Rpb24oKXt0aHJvdyB5ZyhcImxlZ2FjeVwiLGEpO319LExhPSQuJGludGVycG9sYXRlTWluRXJyPVAoXCIkaW50ZXJwb2xhdGVcIik7TGEudGhyb3dOb2NvbmNhdD1mdW5jdGlvbihhKXt0aHJvdyBMYShcIm5vY29uY2F0XCIsYSk7fTtMYS5pbnRlcnI9ZnVuY3Rpb24oYSxiKXtyZXR1cm4gTGEoXCJpbnRlcnJcIixhLGIudG9TdHJpbmcoKSl9O3ZhciB6Zz0vXihbXlxcPyNdKikoXFw/KFteI10qKSk/KCMoLiopKT8kLyxiZz17aHR0cDo4MCxodHRwczo0NDMsZnRwOjIxfSxFYj1QKFwiJGxvY2F0aW9uXCIpLEFnPXskJGh0bWw1OiExLFxyXG4kJHJlcGxhY2U6ITEsYWJzVXJsOkZiKFwiJCRhYnNVcmxcIiksdXJsOmZ1bmN0aW9uKGEpe2lmKHgoYSkpcmV0dXJuIHRoaXMuJCR1cmw7dmFyIGI9emcuZXhlYyhhKTsoYlsxXXx8XCJcIj09PWEpJiZ0aGlzLnBhdGgoZGVjb2RlVVJJQ29tcG9uZW50KGJbMV0pKTsoYlsyXXx8YlsxXXx8XCJcIj09PWEpJiZ0aGlzLnNlYXJjaChiWzNdfHxcIlwiKTt0aGlzLmhhc2goYls1XXx8XCJcIik7cmV0dXJuIHRoaXN9LHByb3RvY29sOkZiKFwiJCRwcm90b2NvbFwiKSxob3N0OkZiKFwiJCRob3N0XCIpLHBvcnQ6RmIoXCIkJHBvcnRcIikscGF0aDprZChcIiQkcGF0aFwiLGZ1bmN0aW9uKGEpe2E9bnVsbCE9PWE/YS50b1N0cmluZygpOlwiXCI7cmV0dXJuXCIvXCI9PWEuY2hhckF0KDApP2E6XCIvXCIrYX0pLHNlYXJjaDpmdW5jdGlvbihhLGIpe3N3aXRjaChhcmd1bWVudHMubGVuZ3RoKXtjYXNlIDA6cmV0dXJuIHRoaXMuJCRzZWFyY2g7Y2FzZSAxOmlmKEcoYSl8fFUoYSkpYT1hLnRvU3RyaW5nKCksdGhpcy4kJHNlYXJjaD15YyhhKTtcclxuZWxzZSBpZihKKGEpKWE9UGEoYSx7fSksbihhLGZ1bmN0aW9uKGIsYyl7bnVsbD09YiYmZGVsZXRlIGFbY119KSx0aGlzLiQkc2VhcmNoPWE7ZWxzZSB0aHJvdyBFYihcImlzcmNoYXJnXCIpO2JyZWFrO2RlZmF1bHQ6eChiKXx8bnVsbD09PWI/ZGVsZXRlIHRoaXMuJCRzZWFyY2hbYV06dGhpcy4kJHNlYXJjaFthXT1ifXRoaXMuJCRjb21wb3NlKCk7cmV0dXJuIHRoaXN9LGhhc2g6a2QoXCIkJGhhc2hcIixmdW5jdGlvbihhKXtyZXR1cm4gbnVsbCE9PWE/YS50b1N0cmluZygpOlwiXCJ9KSxyZXBsYWNlOmZ1bmN0aW9uKCl7dGhpcy4kJHJlcGxhY2U9ITA7cmV0dXJuIHRoaXN9fTtuKFtqZCxlYyxkY10sZnVuY3Rpb24oYSl7YS5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShBZyk7YS5wcm90b3R5cGUuc3RhdGU9ZnVuY3Rpb24oYil7aWYoIWFyZ3VtZW50cy5sZW5ndGgpcmV0dXJuIHRoaXMuJCRzdGF0ZTtpZihhIT09ZGN8fCF0aGlzLiQkaHRtbDUpdGhyb3cgRWIoXCJub3N0YXRlXCIpO3RoaXMuJCRzdGF0ZT1cclxueChiKT9udWxsOmI7cmV0dXJuIHRoaXN9fSk7dmFyIGNhPVAoXCIkcGFyc2VcIiksY2c9RnVuY3Rpb24ucHJvdG90eXBlLmNhbGwsZGc9RnVuY3Rpb24ucHJvdG90eXBlLmFwcGx5LGVnPUZ1bmN0aW9uLnByb3RvdHlwZS5iaW5kLE5iPVgoKTtuKFwiKyAtICogLyAlID09PSAhPT0gPT0gIT0gPCA+IDw9ID49ICYmIHx8ICEgPSB8XCIuc3BsaXQoXCIgXCIpLGZ1bmN0aW9uKGEpe05iW2FdPSEwfSk7dmFyIEJnPXtuOlwiXFxuXCIsZjpcIlxcZlwiLHI6XCJcXHJcIix0OlwiXFx0XCIsdjpcIlxcdlwiLFwiJ1wiOlwiJ1wiLCdcIic6J1wiJ30sZ2M9ZnVuY3Rpb24oYSl7dGhpcy5vcHRpb25zPWF9O2djLnByb3RvdHlwZT17Y29uc3RydWN0b3I6Z2MsbGV4OmZ1bmN0aW9uKGEpe3RoaXMudGV4dD1hO3RoaXMuaW5kZXg9MDtmb3IodGhpcy50b2tlbnM9W107dGhpcy5pbmRleDx0aGlzLnRleHQubGVuZ3RoOylpZihhPXRoaXMudGV4dC5jaGFyQXQodGhpcy5pbmRleCksJ1wiJz09PWF8fFwiJ1wiPT09YSl0aGlzLnJlYWRTdHJpbmcoYSk7ZWxzZSBpZih0aGlzLmlzTnVtYmVyKGEpfHxcclxuXCIuXCI9PT1hJiZ0aGlzLmlzTnVtYmVyKHRoaXMucGVlaygpKSl0aGlzLnJlYWROdW1iZXIoKTtlbHNlIGlmKHRoaXMuaXNJZGVudChhKSl0aGlzLnJlYWRJZGVudCgpO2Vsc2UgaWYodGhpcy5pcyhhLFwiKCl7fVtdLiw7Oj9cIikpdGhpcy50b2tlbnMucHVzaCh7aW5kZXg6dGhpcy5pbmRleCx0ZXh0OmF9KSx0aGlzLmluZGV4Kys7ZWxzZSBpZih0aGlzLmlzV2hpdGVzcGFjZShhKSl0aGlzLmluZGV4Kys7ZWxzZXt2YXIgYj1hK3RoaXMucGVlaygpLGQ9Yit0aGlzLnBlZWsoMiksYz1OYltiXSxlPU5iW2RdO05iW2FdfHxjfHxlPyhhPWU/ZDpjP2I6YSx0aGlzLnRva2Vucy5wdXNoKHtpbmRleDp0aGlzLmluZGV4LHRleHQ6YSxvcGVyYXRvcjohMH0pLHRoaXMuaW5kZXgrPWEubGVuZ3RoKTp0aGlzLnRocm93RXJyb3IoXCJVbmV4cGVjdGVkIG5leHQgY2hhcmFjdGVyIFwiLHRoaXMuaW5kZXgsdGhpcy5pbmRleCsxKX1yZXR1cm4gdGhpcy50b2tlbnN9LGlzOmZ1bmN0aW9uKGEsYil7cmV0dXJuLTEhPT1cclxuYi5pbmRleE9mKGEpfSxwZWVrOmZ1bmN0aW9uKGEpe2E9YXx8MTtyZXR1cm4gdGhpcy5pbmRleCthPHRoaXMudGV4dC5sZW5ndGg/dGhpcy50ZXh0LmNoYXJBdCh0aGlzLmluZGV4K2EpOiExfSxpc051bWJlcjpmdW5jdGlvbihhKXtyZXR1cm5cIjBcIjw9YSYmXCI5XCI+PWEmJlwic3RyaW5nXCI9PT10eXBlb2YgYX0saXNXaGl0ZXNwYWNlOmZ1bmN0aW9uKGEpe3JldHVyblwiIFwiPT09YXx8XCJcXHJcIj09PWF8fFwiXFx0XCI9PT1hfHxcIlxcblwiPT09YXx8XCJcXHZcIj09PWF8fFwiXFx1MDBhMFwiPT09YX0saXNJZGVudDpmdW5jdGlvbihhKXtyZXR1cm5cImFcIjw9YSYmXCJ6XCI+PWF8fFwiQVwiPD1hJiZcIlpcIj49YXx8XCJfXCI9PT1hfHxcIiRcIj09PWF9LGlzRXhwT3BlcmF0b3I6ZnVuY3Rpb24oYSl7cmV0dXJuXCItXCI9PT1hfHxcIitcIj09PWF8fHRoaXMuaXNOdW1iZXIoYSl9LHRocm93RXJyb3I6ZnVuY3Rpb24oYSxiLGQpe2Q9ZHx8dGhpcy5pbmRleDtiPXooYik/XCJzIFwiK2IrXCItXCIrdGhpcy5pbmRleCtcIiBbXCIrdGhpcy50ZXh0LnN1YnN0cmluZyhiLFxyXG5kKStcIl1cIjpcIiBcIitkO3Rocm93IGNhKFwibGV4ZXJyXCIsYSxiLHRoaXMudGV4dCk7fSxyZWFkTnVtYmVyOmZ1bmN0aW9uKCl7Zm9yKHZhciBhPVwiXCIsYj10aGlzLmluZGV4O3RoaXMuaW5kZXg8dGhpcy50ZXh0Lmxlbmd0aDspe3ZhciBkPUgodGhpcy50ZXh0LmNoYXJBdCh0aGlzLmluZGV4KSk7aWYoXCIuXCI9PWR8fHRoaXMuaXNOdW1iZXIoZCkpYSs9ZDtlbHNle3ZhciBjPXRoaXMucGVlaygpO2lmKFwiZVwiPT1kJiZ0aGlzLmlzRXhwT3BlcmF0b3IoYykpYSs9ZDtlbHNlIGlmKHRoaXMuaXNFeHBPcGVyYXRvcihkKSYmYyYmdGhpcy5pc051bWJlcihjKSYmXCJlXCI9PWEuY2hhckF0KGEubGVuZ3RoLTEpKWErPWQ7ZWxzZSBpZighdGhpcy5pc0V4cE9wZXJhdG9yKGQpfHxjJiZ0aGlzLmlzTnVtYmVyKGMpfHxcImVcIiE9YS5jaGFyQXQoYS5sZW5ndGgtMSkpYnJlYWs7ZWxzZSB0aGlzLnRocm93RXJyb3IoXCJJbnZhbGlkIGV4cG9uZW50XCIpfXRoaXMuaW5kZXgrK310aGlzLnRva2Vucy5wdXNoKHtpbmRleDpiLFxyXG50ZXh0OmEsY29uc3RhbnQ6ITAsdmFsdWU6TnVtYmVyKGEpfSl9LHJlYWRJZGVudDpmdW5jdGlvbigpe2Zvcih2YXIgYT10aGlzLmluZGV4O3RoaXMuaW5kZXg8dGhpcy50ZXh0Lmxlbmd0aDspe3ZhciBiPXRoaXMudGV4dC5jaGFyQXQodGhpcy5pbmRleCk7aWYoIXRoaXMuaXNJZGVudChiKSYmIXRoaXMuaXNOdW1iZXIoYikpYnJlYWs7dGhpcy5pbmRleCsrfXRoaXMudG9rZW5zLnB1c2goe2luZGV4OmEsdGV4dDp0aGlzLnRleHQuc2xpY2UoYSx0aGlzLmluZGV4KSxpZGVudGlmaWVyOiEwfSl9LHJlYWRTdHJpbmc6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5pbmRleDt0aGlzLmluZGV4Kys7Zm9yKHZhciBkPVwiXCIsYz1hLGU9ITE7dGhpcy5pbmRleDx0aGlzLnRleHQubGVuZ3RoOyl7dmFyIGY9dGhpcy50ZXh0LmNoYXJBdCh0aGlzLmluZGV4KSxjPWMrZjtpZihlKVwidVwiPT09Zj8oZT10aGlzLnRleHQuc3Vic3RyaW5nKHRoaXMuaW5kZXgrMSx0aGlzLmluZGV4KzUpLGUubWF0Y2goL1tcXGRhLWZdezR9L2kpfHxcclxudGhpcy50aHJvd0Vycm9yKFwiSW52YWxpZCB1bmljb2RlIGVzY2FwZSBbXFxcXHVcIitlK1wiXVwiKSx0aGlzLmluZGV4Kz00LGQrPVN0cmluZy5mcm9tQ2hhckNvZGUocGFyc2VJbnQoZSwxNikpKTpkKz1CZ1tmXXx8ZixlPSExO2Vsc2UgaWYoXCJcXFxcXCI9PT1mKWU9ITA7ZWxzZXtpZihmPT09YSl7dGhpcy5pbmRleCsrO3RoaXMudG9rZW5zLnB1c2goe2luZGV4OmIsdGV4dDpjLGNvbnN0YW50OiEwLHZhbHVlOmR9KTtyZXR1cm59ZCs9Zn10aGlzLmluZGV4Kyt9dGhpcy50aHJvd0Vycm9yKFwiVW50ZXJtaW5hdGVkIHF1b3RlXCIsYil9fTt2YXIgcT1mdW5jdGlvbihhLGIpe3RoaXMubGV4ZXI9YTt0aGlzLm9wdGlvbnM9Yn07cS5Qcm9ncmFtPVwiUHJvZ3JhbVwiO3EuRXhwcmVzc2lvblN0YXRlbWVudD1cIkV4cHJlc3Npb25TdGF0ZW1lbnRcIjtxLkFzc2lnbm1lbnRFeHByZXNzaW9uPVwiQXNzaWdubWVudEV4cHJlc3Npb25cIjtxLkNvbmRpdGlvbmFsRXhwcmVzc2lvbj1cIkNvbmRpdGlvbmFsRXhwcmVzc2lvblwiO1xyXG5xLkxvZ2ljYWxFeHByZXNzaW9uPVwiTG9naWNhbEV4cHJlc3Npb25cIjtxLkJpbmFyeUV4cHJlc3Npb249XCJCaW5hcnlFeHByZXNzaW9uXCI7cS5VbmFyeUV4cHJlc3Npb249XCJVbmFyeUV4cHJlc3Npb25cIjtxLkNhbGxFeHByZXNzaW9uPVwiQ2FsbEV4cHJlc3Npb25cIjtxLk1lbWJlckV4cHJlc3Npb249XCJNZW1iZXJFeHByZXNzaW9uXCI7cS5JZGVudGlmaWVyPVwiSWRlbnRpZmllclwiO3EuTGl0ZXJhbD1cIkxpdGVyYWxcIjtxLkFycmF5RXhwcmVzc2lvbj1cIkFycmF5RXhwcmVzc2lvblwiO3EuUHJvcGVydHk9XCJQcm9wZXJ0eVwiO3EuT2JqZWN0RXhwcmVzc2lvbj1cIk9iamVjdEV4cHJlc3Npb25cIjtxLlRoaXNFeHByZXNzaW9uPVwiVGhpc0V4cHJlc3Npb25cIjtxLkxvY2Fsc0V4cHJlc3Npb249XCJMb2NhbHNFeHByZXNzaW9uXCI7cS5OR1ZhbHVlUGFyYW1ldGVyPVwiTkdWYWx1ZVBhcmFtZXRlclwiO3EucHJvdG90eXBlPXthc3Q6ZnVuY3Rpb24oYSl7dGhpcy50ZXh0PWE7dGhpcy50b2tlbnM9dGhpcy5sZXhlci5sZXgoYSk7XHJcbmE9dGhpcy5wcm9ncmFtKCk7MCE9PXRoaXMudG9rZW5zLmxlbmd0aCYmdGhpcy50aHJvd0Vycm9yKFwiaXMgYW4gdW5leHBlY3RlZCB0b2tlblwiLHRoaXMudG9rZW5zWzBdKTtyZXR1cm4gYX0scHJvZ3JhbTpmdW5jdGlvbigpe2Zvcih2YXIgYT1bXTs7KWlmKDA8dGhpcy50b2tlbnMubGVuZ3RoJiYhdGhpcy5wZWVrKFwifVwiLFwiKVwiLFwiO1wiLFwiXVwiKSYmYS5wdXNoKHRoaXMuZXhwcmVzc2lvblN0YXRlbWVudCgpKSwhdGhpcy5leHBlY3QoXCI7XCIpKXJldHVybnt0eXBlOnEuUHJvZ3JhbSxib2R5OmF9fSxleHByZXNzaW9uU3RhdGVtZW50OmZ1bmN0aW9uKCl7cmV0dXJue3R5cGU6cS5FeHByZXNzaW9uU3RhdGVtZW50LGV4cHJlc3Npb246dGhpcy5maWx0ZXJDaGFpbigpfX0sZmlsdGVyQ2hhaW46ZnVuY3Rpb24oKXtmb3IodmFyIGE9dGhpcy5leHByZXNzaW9uKCk7dGhpcy5leHBlY3QoXCJ8XCIpOylhPXRoaXMuZmlsdGVyKGEpO3JldHVybiBhfSxleHByZXNzaW9uOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuYXNzaWdubWVudCgpfSxcclxuYXNzaWdubWVudDpmdW5jdGlvbigpe3ZhciBhPXRoaXMudGVybmFyeSgpO3RoaXMuZXhwZWN0KFwiPVwiKSYmKGE9e3R5cGU6cS5Bc3NpZ25tZW50RXhwcmVzc2lvbixsZWZ0OmEscmlnaHQ6dGhpcy5hc3NpZ25tZW50KCksb3BlcmF0b3I6XCI9XCJ9KTtyZXR1cm4gYX0sdGVybmFyeTpmdW5jdGlvbigpe3ZhciBhPXRoaXMubG9naWNhbE9SKCksYixkO3JldHVybiB0aGlzLmV4cGVjdChcIj9cIikmJihiPXRoaXMuZXhwcmVzc2lvbigpLHRoaXMuY29uc3VtZShcIjpcIikpPyhkPXRoaXMuZXhwcmVzc2lvbigpLHt0eXBlOnEuQ29uZGl0aW9uYWxFeHByZXNzaW9uLHRlc3Q6YSxhbHRlcm5hdGU6Yixjb25zZXF1ZW50OmR9KTphfSxsb2dpY2FsT1I6ZnVuY3Rpb24oKXtmb3IodmFyIGE9dGhpcy5sb2dpY2FsQU5EKCk7dGhpcy5leHBlY3QoXCJ8fFwiKTspYT17dHlwZTpxLkxvZ2ljYWxFeHByZXNzaW9uLG9wZXJhdG9yOlwifHxcIixsZWZ0OmEscmlnaHQ6dGhpcy5sb2dpY2FsQU5EKCl9O3JldHVybiBhfSxsb2dpY2FsQU5EOmZ1bmN0aW9uKCl7Zm9yKHZhciBhPVxyXG50aGlzLmVxdWFsaXR5KCk7dGhpcy5leHBlY3QoXCImJlwiKTspYT17dHlwZTpxLkxvZ2ljYWxFeHByZXNzaW9uLG9wZXJhdG9yOlwiJiZcIixsZWZ0OmEscmlnaHQ6dGhpcy5lcXVhbGl0eSgpfTtyZXR1cm4gYX0sZXF1YWxpdHk6ZnVuY3Rpb24oKXtmb3IodmFyIGE9dGhpcy5yZWxhdGlvbmFsKCksYjtiPXRoaXMuZXhwZWN0KFwiPT1cIixcIiE9XCIsXCI9PT1cIixcIiE9PVwiKTspYT17dHlwZTpxLkJpbmFyeUV4cHJlc3Npb24sb3BlcmF0b3I6Yi50ZXh0LGxlZnQ6YSxyaWdodDp0aGlzLnJlbGF0aW9uYWwoKX07cmV0dXJuIGF9LHJlbGF0aW9uYWw6ZnVuY3Rpb24oKXtmb3IodmFyIGE9dGhpcy5hZGRpdGl2ZSgpLGI7Yj10aGlzLmV4cGVjdChcIjxcIixcIj5cIixcIjw9XCIsXCI+PVwiKTspYT17dHlwZTpxLkJpbmFyeUV4cHJlc3Npb24sb3BlcmF0b3I6Yi50ZXh0LGxlZnQ6YSxyaWdodDp0aGlzLmFkZGl0aXZlKCl9O3JldHVybiBhfSxhZGRpdGl2ZTpmdW5jdGlvbigpe2Zvcih2YXIgYT10aGlzLm11bHRpcGxpY2F0aXZlKCksXHJcbmI7Yj10aGlzLmV4cGVjdChcIitcIixcIi1cIik7KWE9e3R5cGU6cS5CaW5hcnlFeHByZXNzaW9uLG9wZXJhdG9yOmIudGV4dCxsZWZ0OmEscmlnaHQ6dGhpcy5tdWx0aXBsaWNhdGl2ZSgpfTtyZXR1cm4gYX0sbXVsdGlwbGljYXRpdmU6ZnVuY3Rpb24oKXtmb3IodmFyIGE9dGhpcy51bmFyeSgpLGI7Yj10aGlzLmV4cGVjdChcIipcIixcIi9cIixcIiVcIik7KWE9e3R5cGU6cS5CaW5hcnlFeHByZXNzaW9uLG9wZXJhdG9yOmIudGV4dCxsZWZ0OmEscmlnaHQ6dGhpcy51bmFyeSgpfTtyZXR1cm4gYX0sdW5hcnk6ZnVuY3Rpb24oKXt2YXIgYTtyZXR1cm4oYT10aGlzLmV4cGVjdChcIitcIixcIi1cIixcIiFcIikpP3t0eXBlOnEuVW5hcnlFeHByZXNzaW9uLG9wZXJhdG9yOmEudGV4dCxwcmVmaXg6ITAsYXJndW1lbnQ6dGhpcy51bmFyeSgpfTp0aGlzLnByaW1hcnkoKX0scHJpbWFyeTpmdW5jdGlvbigpe3ZhciBhO3RoaXMuZXhwZWN0KFwiKFwiKT8oYT10aGlzLmZpbHRlckNoYWluKCksdGhpcy5jb25zdW1lKFwiKVwiKSk6XHJcbnRoaXMuZXhwZWN0KFwiW1wiKT9hPXRoaXMuYXJyYXlEZWNsYXJhdGlvbigpOnRoaXMuZXhwZWN0KFwie1wiKT9hPXRoaXMub2JqZWN0KCk6dGhpcy5jb25zdGFudHMuaGFzT3duUHJvcGVydHkodGhpcy5wZWVrKCkudGV4dCk/YT1QYSh0aGlzLmNvbnN0YW50c1t0aGlzLmNvbnN1bWUoKS50ZXh0XSk6dGhpcy5wZWVrKCkuaWRlbnRpZmllcj9hPXRoaXMuaWRlbnRpZmllcigpOnRoaXMucGVlaygpLmNvbnN0YW50P2E9dGhpcy5jb25zdGFudCgpOnRoaXMudGhyb3dFcnJvcihcIm5vdCBhIHByaW1hcnkgZXhwcmVzc2lvblwiLHRoaXMucGVlaygpKTtmb3IodmFyIGI7Yj10aGlzLmV4cGVjdChcIihcIixcIltcIixcIi5cIik7KVwiKFwiPT09Yi50ZXh0PyhhPXt0eXBlOnEuQ2FsbEV4cHJlc3Npb24sY2FsbGVlOmEsYXJndW1lbnRzOnRoaXMucGFyc2VBcmd1bWVudHMoKX0sdGhpcy5jb25zdW1lKFwiKVwiKSk6XCJbXCI9PT1iLnRleHQ/KGE9e3R5cGU6cS5NZW1iZXJFeHByZXNzaW9uLG9iamVjdDphLHByb3BlcnR5OnRoaXMuZXhwcmVzc2lvbigpLFxyXG5jb21wdXRlZDohMH0sdGhpcy5jb25zdW1lKFwiXVwiKSk6XCIuXCI9PT1iLnRleHQ/YT17dHlwZTpxLk1lbWJlckV4cHJlc3Npb24sb2JqZWN0OmEscHJvcGVydHk6dGhpcy5pZGVudGlmaWVyKCksY29tcHV0ZWQ6ITF9OnRoaXMudGhyb3dFcnJvcihcIklNUE9TU0lCTEVcIik7cmV0dXJuIGF9LGZpbHRlcjpmdW5jdGlvbihhKXthPVthXTtmb3IodmFyIGI9e3R5cGU6cS5DYWxsRXhwcmVzc2lvbixjYWxsZWU6dGhpcy5pZGVudGlmaWVyKCksYXJndW1lbnRzOmEsZmlsdGVyOiEwfTt0aGlzLmV4cGVjdChcIjpcIik7KWEucHVzaCh0aGlzLmV4cHJlc3Npb24oKSk7cmV0dXJuIGJ9LHBhcnNlQXJndW1lbnRzOmZ1bmN0aW9uKCl7dmFyIGE9W107aWYoXCIpXCIhPT10aGlzLnBlZWtUb2tlbigpLnRleHQpe2RvIGEucHVzaCh0aGlzLmV4cHJlc3Npb24oKSk7d2hpbGUodGhpcy5leHBlY3QoXCIsXCIpKX1yZXR1cm4gYX0saWRlbnRpZmllcjpmdW5jdGlvbigpe3ZhciBhPXRoaXMuY29uc3VtZSgpO2EuaWRlbnRpZmllcnx8XHJcbnRoaXMudGhyb3dFcnJvcihcImlzIG5vdCBhIHZhbGlkIGlkZW50aWZpZXJcIixhKTtyZXR1cm57dHlwZTpxLklkZW50aWZpZXIsbmFtZTphLnRleHR9fSxjb25zdGFudDpmdW5jdGlvbigpe3JldHVybnt0eXBlOnEuTGl0ZXJhbCx2YWx1ZTp0aGlzLmNvbnN1bWUoKS52YWx1ZX19LGFycmF5RGVjbGFyYXRpb246ZnVuY3Rpb24oKXt2YXIgYT1bXTtpZihcIl1cIiE9PXRoaXMucGVla1Rva2VuKCkudGV4dCl7ZG97aWYodGhpcy5wZWVrKFwiXVwiKSlicmVhazthLnB1c2godGhpcy5leHByZXNzaW9uKCkpfXdoaWxlKHRoaXMuZXhwZWN0KFwiLFwiKSl9dGhpcy5jb25zdW1lKFwiXVwiKTtyZXR1cm57dHlwZTpxLkFycmF5RXhwcmVzc2lvbixlbGVtZW50czphfX0sb2JqZWN0OmZ1bmN0aW9uKCl7dmFyIGE9W10sYjtpZihcIn1cIiE9PXRoaXMucGVla1Rva2VuKCkudGV4dCl7ZG97aWYodGhpcy5wZWVrKFwifVwiKSlicmVhaztiPXt0eXBlOnEuUHJvcGVydHksa2luZDpcImluaXRcIn07dGhpcy5wZWVrKCkuY29uc3RhbnQ/XHJcbmIua2V5PXRoaXMuY29uc3RhbnQoKTp0aGlzLnBlZWsoKS5pZGVudGlmaWVyP2Iua2V5PXRoaXMuaWRlbnRpZmllcigpOnRoaXMudGhyb3dFcnJvcihcImludmFsaWQga2V5XCIsdGhpcy5wZWVrKCkpO3RoaXMuY29uc3VtZShcIjpcIik7Yi52YWx1ZT10aGlzLmV4cHJlc3Npb24oKTthLnB1c2goYil9d2hpbGUodGhpcy5leHBlY3QoXCIsXCIpKX10aGlzLmNvbnN1bWUoXCJ9XCIpO3JldHVybnt0eXBlOnEuT2JqZWN0RXhwcmVzc2lvbixwcm9wZXJ0aWVzOmF9fSx0aHJvd0Vycm9yOmZ1bmN0aW9uKGEsYil7dGhyb3cgY2EoXCJzeW50YXhcIixiLnRleHQsYSxiLmluZGV4KzEsdGhpcy50ZXh0LHRoaXMudGV4dC5zdWJzdHJpbmcoYi5pbmRleCkpO30sY29uc3VtZTpmdW5jdGlvbihhKXtpZigwPT09dGhpcy50b2tlbnMubGVuZ3RoKXRocm93IGNhKFwidWVvZVwiLHRoaXMudGV4dCk7dmFyIGI9dGhpcy5leHBlY3QoYSk7Ynx8dGhpcy50aHJvd0Vycm9yKFwiaXMgdW5leHBlY3RlZCwgZXhwZWN0aW5nIFtcIithK1xyXG5cIl1cIix0aGlzLnBlZWsoKSk7cmV0dXJuIGJ9LHBlZWtUb2tlbjpmdW5jdGlvbigpe2lmKDA9PT10aGlzLnRva2Vucy5sZW5ndGgpdGhyb3cgY2EoXCJ1ZW9lXCIsdGhpcy50ZXh0KTtyZXR1cm4gdGhpcy50b2tlbnNbMF19LHBlZWs6ZnVuY3Rpb24oYSxiLGQsYyl7cmV0dXJuIHRoaXMucGVla0FoZWFkKDAsYSxiLGQsYyl9LHBlZWtBaGVhZDpmdW5jdGlvbihhLGIsZCxjLGUpe2lmKHRoaXMudG9rZW5zLmxlbmd0aD5hKXthPXRoaXMudG9rZW5zW2FdO3ZhciBmPWEudGV4dDtpZihmPT09Ynx8Zj09PWR8fGY9PT1jfHxmPT09ZXx8IShifHxkfHxjfHxlKSlyZXR1cm4gYX1yZXR1cm4hMX0sZXhwZWN0OmZ1bmN0aW9uKGEsYixkLGMpe3JldHVybihhPXRoaXMucGVlayhhLGIsZCxjKSk/KHRoaXMudG9rZW5zLnNoaWZ0KCksYSk6ITF9LGNvbnN0YW50czp7XCJ0cnVlXCI6e3R5cGU6cS5MaXRlcmFsLHZhbHVlOiEwfSxcImZhbHNlXCI6e3R5cGU6cS5MaXRlcmFsLHZhbHVlOiExfSxcIm51bGxcIjp7dHlwZTpxLkxpdGVyYWwsXHJcbnZhbHVlOm51bGx9LHVuZGVmaW5lZDp7dHlwZTpxLkxpdGVyYWwsdmFsdWU6dX0sXCJ0aGlzXCI6e3R5cGU6cS5UaGlzRXhwcmVzc2lvbn0sJGxvY2Fsczp7dHlwZTpxLkxvY2Fsc0V4cHJlc3Npb259fX07c2QucHJvdG90eXBlPXtjb21waWxlOmZ1bmN0aW9uKGEsYil7dmFyIGQ9dGhpcyxjPXRoaXMuYXN0QnVpbGRlci5hc3QoYSk7dGhpcy5zdGF0ZT17bmV4dElkOjAsZmlsdGVyczp7fSxleHBlbnNpdmVDaGVja3M6Yixmbjp7dmFyczpbXSxib2R5OltdLG93bjp7fX0sYXNzaWduOnt2YXJzOltdLGJvZHk6W10sb3duOnt9fSxpbnB1dHM6W119O1QoYyxkLiRmaWx0ZXIpO3ZhciBlPVwiXCIsZjt0aGlzLnN0YWdlPVwiYXNzaWduXCI7aWYoZj1xZChjKSl0aGlzLnN0YXRlLmNvbXB1dGluZz1cImFzc2lnblwiLGU9dGhpcy5uZXh0SWQoKSx0aGlzLnJlY3Vyc2UoZixlKSx0aGlzLnJldHVybl8oZSksZT1cImZuLmFzc2lnbj1cIit0aGlzLmdlbmVyYXRlRnVuY3Rpb24oXCJhc3NpZ25cIixcInMsdixsXCIpO2Y9XHJcbm9kKGMuYm9keSk7ZC5zdGFnZT1cImlucHV0c1wiO24oZixmdW5jdGlvbihhLGIpe3ZhciBjPVwiZm5cIitiO2Quc3RhdGVbY109e3ZhcnM6W10sYm9keTpbXSxvd246e319O2Quc3RhdGUuY29tcHV0aW5nPWM7dmFyIGU9ZC5uZXh0SWQoKTtkLnJlY3Vyc2UoYSxlKTtkLnJldHVybl8oZSk7ZC5zdGF0ZS5pbnB1dHMucHVzaChjKTthLndhdGNoSWQ9Yn0pO3RoaXMuc3RhdGUuY29tcHV0aW5nPVwiZm5cIjt0aGlzLnN0YWdlPVwibWFpblwiO3RoaXMucmVjdXJzZShjKTtlPSdcIicrdGhpcy5VU0UrXCIgXCIrdGhpcy5TVFJJQ1QrJ1wiO1xcbicrdGhpcy5maWx0ZXJQcmVmaXgoKStcInZhciBmbj1cIit0aGlzLmdlbmVyYXRlRnVuY3Rpb24oXCJmblwiLFwicyxsLGEsaVwiKStlK3RoaXMud2F0Y2hGbnMoKStcInJldHVybiBmbjtcIjtlPShuZXcgRnVuY3Rpb24oXCIkZmlsdGVyXCIsXCJlbnN1cmVTYWZlTWVtYmVyTmFtZVwiLFwiZW5zdXJlU2FmZU9iamVjdFwiLFwiZW5zdXJlU2FmZUZ1bmN0aW9uXCIsXCJnZXRTdHJpbmdWYWx1ZVwiLFwiZW5zdXJlU2FmZUFzc2lnbkNvbnRleHRcIixcclxuXCJpZkRlZmluZWRcIixcInBsdXNcIixcInRleHRcIixlKSkodGhpcy4kZmlsdGVyLFhhLEFhLG1kLGxkLEdiLGZnLG5kLGEpO3RoaXMuc3RhdGU9dGhpcy5zdGFnZT11O2UubGl0ZXJhbD1yZChjKTtlLmNvbnN0YW50PWMuY29uc3RhbnQ7cmV0dXJuIGV9LFVTRTpcInVzZVwiLFNUUklDVDpcInN0cmljdFwiLHdhdGNoRm5zOmZ1bmN0aW9uKCl7dmFyIGE9W10sYj10aGlzLnN0YXRlLmlucHV0cyxkPXRoaXM7bihiLGZ1bmN0aW9uKGIpe2EucHVzaChcInZhciBcIitiK1wiPVwiK2QuZ2VuZXJhdGVGdW5jdGlvbihiLFwic1wiKSl9KTtiLmxlbmd0aCYmYS5wdXNoKFwiZm4uaW5wdXRzPVtcIitiLmpvaW4oXCIsXCIpK1wiXTtcIik7cmV0dXJuIGEuam9pbihcIlwiKX0sZ2VuZXJhdGVGdW5jdGlvbjpmdW5jdGlvbihhLGIpe3JldHVyblwiZnVuY3Rpb24oXCIrYitcIil7XCIrdGhpcy52YXJzUHJlZml4KGEpK3RoaXMuYm9keShhKStcIn07XCJ9LGZpbHRlclByZWZpeDpmdW5jdGlvbigpe3ZhciBhPVtdLGI9dGhpcztuKHRoaXMuc3RhdGUuZmlsdGVycyxcclxuZnVuY3Rpb24oZCxjKXthLnB1c2goZCtcIj0kZmlsdGVyKFwiK2IuZXNjYXBlKGMpK1wiKVwiKX0pO3JldHVybiBhLmxlbmd0aD9cInZhciBcIithLmpvaW4oXCIsXCIpK1wiO1wiOlwiXCJ9LHZhcnNQcmVmaXg6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMuc3RhdGVbYV0udmFycy5sZW5ndGg/XCJ2YXIgXCIrdGhpcy5zdGF0ZVthXS52YXJzLmpvaW4oXCIsXCIpK1wiO1wiOlwiXCJ9LGJvZHk6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMuc3RhdGVbYV0uYm9keS5qb2luKFwiXCIpfSxyZWN1cnNlOmZ1bmN0aW9uKGEsYixkLGMsZSxmKXt2YXIgZyxoLGs9dGhpcyxsLG07Yz1jfHx3O2lmKCFmJiZ6KGEud2F0Y2hJZCkpYj1ifHx0aGlzLm5leHRJZCgpLHRoaXMuaWZfKFwiaVwiLHRoaXMubGF6eUFzc2lnbihiLHRoaXMuY29tcHV0ZWRNZW1iZXIoXCJpXCIsYS53YXRjaElkKSksdGhpcy5sYXp5UmVjdXJzZShhLGIsZCxjLGUsITApKTtlbHNlIHN3aXRjaChhLnR5cGUpe2Nhc2UgcS5Qcm9ncmFtOm4oYS5ib2R5LGZ1bmN0aW9uKGIsYyl7ay5yZWN1cnNlKGIuZXhwcmVzc2lvbixcclxudSx1LGZ1bmN0aW9uKGEpe2g9YX0pO2MhPT1hLmJvZHkubGVuZ3RoLTE/ay5jdXJyZW50KCkuYm9keS5wdXNoKGgsXCI7XCIpOmsucmV0dXJuXyhoKX0pO2JyZWFrO2Nhc2UgcS5MaXRlcmFsOm09dGhpcy5lc2NhcGUoYS52YWx1ZSk7dGhpcy5hc3NpZ24oYixtKTtjKG0pO2JyZWFrO2Nhc2UgcS5VbmFyeUV4cHJlc3Npb246dGhpcy5yZWN1cnNlKGEuYXJndW1lbnQsdSx1LGZ1bmN0aW9uKGEpe2g9YX0pO209YS5vcGVyYXRvcitcIihcIit0aGlzLmlmRGVmaW5lZChoLDApK1wiKVwiO3RoaXMuYXNzaWduKGIsbSk7YyhtKTticmVhaztjYXNlIHEuQmluYXJ5RXhwcmVzc2lvbjp0aGlzLnJlY3Vyc2UoYS5sZWZ0LHUsdSxmdW5jdGlvbihhKXtnPWF9KTt0aGlzLnJlY3Vyc2UoYS5yaWdodCx1LHUsZnVuY3Rpb24oYSl7aD1hfSk7bT1cIitcIj09PWEub3BlcmF0b3I/dGhpcy5wbHVzKGcsaCk6XCItXCI9PT1hLm9wZXJhdG9yP3RoaXMuaWZEZWZpbmVkKGcsMCkrYS5vcGVyYXRvcit0aGlzLmlmRGVmaW5lZChoLFxyXG4wKTpcIihcIitnK1wiKVwiK2Eub3BlcmF0b3IrXCIoXCIraCtcIilcIjt0aGlzLmFzc2lnbihiLG0pO2MobSk7YnJlYWs7Y2FzZSBxLkxvZ2ljYWxFeHByZXNzaW9uOmI9Ynx8dGhpcy5uZXh0SWQoKTtrLnJlY3Vyc2UoYS5sZWZ0LGIpO2suaWZfKFwiJiZcIj09PWEub3BlcmF0b3I/YjprLm5vdChiKSxrLmxhenlSZWN1cnNlKGEucmlnaHQsYikpO2MoYik7YnJlYWs7Y2FzZSBxLkNvbmRpdGlvbmFsRXhwcmVzc2lvbjpiPWJ8fHRoaXMubmV4dElkKCk7ay5yZWN1cnNlKGEudGVzdCxiKTtrLmlmXyhiLGsubGF6eVJlY3Vyc2UoYS5hbHRlcm5hdGUsYiksay5sYXp5UmVjdXJzZShhLmNvbnNlcXVlbnQsYikpO2MoYik7YnJlYWs7Y2FzZSBxLklkZW50aWZpZXI6Yj1ifHx0aGlzLm5leHRJZCgpO2QmJihkLmNvbnRleHQ9XCJpbnB1dHNcIj09PWsuc3RhZ2U/XCJzXCI6dGhpcy5hc3NpZ24odGhpcy5uZXh0SWQoKSx0aGlzLmdldEhhc093blByb3BlcnR5KFwibFwiLGEubmFtZSkrXCI/bDpzXCIpLGQuY29tcHV0ZWQ9ITEsXHJcbmQubmFtZT1hLm5hbWUpO1hhKGEubmFtZSk7ay5pZl8oXCJpbnB1dHNcIj09PWsuc3RhZ2V8fGsubm90KGsuZ2V0SGFzT3duUHJvcGVydHkoXCJsXCIsYS5uYW1lKSksZnVuY3Rpb24oKXtrLmlmXyhcImlucHV0c1wiPT09ay5zdGFnZXx8XCJzXCIsZnVuY3Rpb24oKXtlJiYxIT09ZSYmay5pZl8oay5ub3Qoay5ub25Db21wdXRlZE1lbWJlcihcInNcIixhLm5hbWUpKSxrLmxhenlBc3NpZ24oay5ub25Db21wdXRlZE1lbWJlcihcInNcIixhLm5hbWUpLFwie31cIikpO2suYXNzaWduKGIsay5ub25Db21wdXRlZE1lbWJlcihcInNcIixhLm5hbWUpKX0pfSxiJiZrLmxhenlBc3NpZ24oYixrLm5vbkNvbXB1dGVkTWVtYmVyKFwibFwiLGEubmFtZSkpKTsoay5zdGF0ZS5leHBlbnNpdmVDaGVja3N8fEhiKGEubmFtZSkpJiZrLmFkZEVuc3VyZVNhZmVPYmplY3QoYik7YyhiKTticmVhaztjYXNlIHEuTWVtYmVyRXhwcmVzc2lvbjpnPWQmJihkLmNvbnRleHQ9dGhpcy5uZXh0SWQoKSl8fHRoaXMubmV4dElkKCk7Yj1ifHx0aGlzLm5leHRJZCgpO1xyXG5rLnJlY3Vyc2UoYS5vYmplY3QsZyx1LGZ1bmN0aW9uKCl7ay5pZl8oay5ub3ROdWxsKGcpLGZ1bmN0aW9uKCl7ZSYmMSE9PWUmJmsuYWRkRW5zdXJlU2FmZUFzc2lnbkNvbnRleHQoZyk7aWYoYS5jb21wdXRlZCloPWsubmV4dElkKCksay5yZWN1cnNlKGEucHJvcGVydHksaCksay5nZXRTdHJpbmdWYWx1ZShoKSxrLmFkZEVuc3VyZVNhZmVNZW1iZXJOYW1lKGgpLGUmJjEhPT1lJiZrLmlmXyhrLm5vdChrLmNvbXB1dGVkTWVtYmVyKGcsaCkpLGsubGF6eUFzc2lnbihrLmNvbXB1dGVkTWVtYmVyKGcsaCksXCJ7fVwiKSksbT1rLmVuc3VyZVNhZmVPYmplY3Qoay5jb21wdXRlZE1lbWJlcihnLGgpKSxrLmFzc2lnbihiLG0pLGQmJihkLmNvbXB1dGVkPSEwLGQubmFtZT1oKTtlbHNle1hhKGEucHJvcGVydHkubmFtZSk7ZSYmMSE9PWUmJmsuaWZfKGsubm90KGsubm9uQ29tcHV0ZWRNZW1iZXIoZyxhLnByb3BlcnR5Lm5hbWUpKSxrLmxhenlBc3NpZ24oay5ub25Db21wdXRlZE1lbWJlcihnLFxyXG5hLnByb3BlcnR5Lm5hbWUpLFwie31cIikpO209ay5ub25Db21wdXRlZE1lbWJlcihnLGEucHJvcGVydHkubmFtZSk7aWYoay5zdGF0ZS5leHBlbnNpdmVDaGVja3N8fEhiKGEucHJvcGVydHkubmFtZSkpbT1rLmVuc3VyZVNhZmVPYmplY3QobSk7ay5hc3NpZ24oYixtKTtkJiYoZC5jb21wdXRlZD0hMSxkLm5hbWU9YS5wcm9wZXJ0eS5uYW1lKX19LGZ1bmN0aW9uKCl7ay5hc3NpZ24oYixcInVuZGVmaW5lZFwiKX0pO2MoYil9LCEhZSk7YnJlYWs7Y2FzZSBxLkNhbGxFeHByZXNzaW9uOmI9Ynx8dGhpcy5uZXh0SWQoKTthLmZpbHRlcj8oaD1rLmZpbHRlcihhLmNhbGxlZS5uYW1lKSxsPVtdLG4oYS5hcmd1bWVudHMsZnVuY3Rpb24oYSl7dmFyIGI9ay5uZXh0SWQoKTtrLnJlY3Vyc2UoYSxiKTtsLnB1c2goYil9KSxtPWgrXCIoXCIrbC5qb2luKFwiLFwiKStcIilcIixrLmFzc2lnbihiLG0pLGMoYikpOihoPWsubmV4dElkKCksZz17fSxsPVtdLGsucmVjdXJzZShhLmNhbGxlZSxoLGcsZnVuY3Rpb24oKXtrLmlmXyhrLm5vdE51bGwoaCksXHJcbmZ1bmN0aW9uKCl7ay5hZGRFbnN1cmVTYWZlRnVuY3Rpb24oaCk7bihhLmFyZ3VtZW50cyxmdW5jdGlvbihhKXtrLnJlY3Vyc2UoYSxrLm5leHRJZCgpLHUsZnVuY3Rpb24oYSl7bC5wdXNoKGsuZW5zdXJlU2FmZU9iamVjdChhKSl9KX0pO2cubmFtZT8oay5zdGF0ZS5leHBlbnNpdmVDaGVja3N8fGsuYWRkRW5zdXJlU2FmZU9iamVjdChnLmNvbnRleHQpLG09ay5tZW1iZXIoZy5jb250ZXh0LGcubmFtZSxnLmNvbXB1dGVkKStcIihcIitsLmpvaW4oXCIsXCIpK1wiKVwiKTptPWgrXCIoXCIrbC5qb2luKFwiLFwiKStcIilcIjttPWsuZW5zdXJlU2FmZU9iamVjdChtKTtrLmFzc2lnbihiLG0pfSxmdW5jdGlvbigpe2suYXNzaWduKGIsXCJ1bmRlZmluZWRcIil9KTtjKGIpfSkpO2JyZWFrO2Nhc2UgcS5Bc3NpZ25tZW50RXhwcmVzc2lvbjpoPXRoaXMubmV4dElkKCk7Zz17fTtpZighcGQoYS5sZWZ0KSl0aHJvdyBjYShcImx2YWxcIik7dGhpcy5yZWN1cnNlKGEubGVmdCx1LGcsZnVuY3Rpb24oKXtrLmlmXyhrLm5vdE51bGwoZy5jb250ZXh0KSxcclxuZnVuY3Rpb24oKXtrLnJlY3Vyc2UoYS5yaWdodCxoKTtrLmFkZEVuc3VyZVNhZmVPYmplY3Qoay5tZW1iZXIoZy5jb250ZXh0LGcubmFtZSxnLmNvbXB1dGVkKSk7ay5hZGRFbnN1cmVTYWZlQXNzaWduQ29udGV4dChnLmNvbnRleHQpO209ay5tZW1iZXIoZy5jb250ZXh0LGcubmFtZSxnLmNvbXB1dGVkKSthLm9wZXJhdG9yK2g7ay5hc3NpZ24oYixtKTtjKGJ8fG0pfSl9LDEpO2JyZWFrO2Nhc2UgcS5BcnJheUV4cHJlc3Npb246bD1bXTtuKGEuZWxlbWVudHMsZnVuY3Rpb24oYSl7ay5yZWN1cnNlKGEsay5uZXh0SWQoKSx1LGZ1bmN0aW9uKGEpe2wucHVzaChhKX0pfSk7bT1cIltcIitsLmpvaW4oXCIsXCIpK1wiXVwiO3RoaXMuYXNzaWduKGIsbSk7YyhtKTticmVhaztjYXNlIHEuT2JqZWN0RXhwcmVzc2lvbjpsPVtdO24oYS5wcm9wZXJ0aWVzLGZ1bmN0aW9uKGEpe2sucmVjdXJzZShhLnZhbHVlLGsubmV4dElkKCksdSxmdW5jdGlvbihiKXtsLnB1c2goay5lc2NhcGUoYS5rZXkudHlwZT09PVxyXG5xLklkZW50aWZpZXI/YS5rZXkubmFtZTpcIlwiK2Eua2V5LnZhbHVlKStcIjpcIitiKX0pfSk7bT1cIntcIitsLmpvaW4oXCIsXCIpK1wifVwiO3RoaXMuYXNzaWduKGIsbSk7YyhtKTticmVhaztjYXNlIHEuVGhpc0V4cHJlc3Npb246dGhpcy5hc3NpZ24oYixcInNcIik7YyhcInNcIik7YnJlYWs7Y2FzZSBxLkxvY2Fsc0V4cHJlc3Npb246dGhpcy5hc3NpZ24oYixcImxcIik7YyhcImxcIik7YnJlYWs7Y2FzZSBxLk5HVmFsdWVQYXJhbWV0ZXI6dGhpcy5hc3NpZ24oYixcInZcIiksYyhcInZcIil9fSxnZXRIYXNPd25Qcm9wZXJ0eTpmdW5jdGlvbihhLGIpe3ZhciBkPWErXCIuXCIrYixjPXRoaXMuY3VycmVudCgpLm93bjtjLmhhc093blByb3BlcnR5KGQpfHwoY1tkXT10aGlzLm5leHRJZCghMSxhK1wiJiYoXCIrdGhpcy5lc2NhcGUoYikrXCIgaW4gXCIrYStcIilcIikpO3JldHVybiBjW2RdfSxhc3NpZ246ZnVuY3Rpb24oYSxiKXtpZihhKXJldHVybiB0aGlzLmN1cnJlbnQoKS5ib2R5LnB1c2goYSxcIj1cIixiLFwiO1wiKSxhfSxmaWx0ZXI6ZnVuY3Rpb24oYSl7dGhpcy5zdGF0ZS5maWx0ZXJzLmhhc093blByb3BlcnR5KGEpfHxcclxuKHRoaXMuc3RhdGUuZmlsdGVyc1thXT10aGlzLm5leHRJZCghMCkpO3JldHVybiB0aGlzLnN0YXRlLmZpbHRlcnNbYV19LGlmRGVmaW5lZDpmdW5jdGlvbihhLGIpe3JldHVyblwiaWZEZWZpbmVkKFwiK2ErXCIsXCIrdGhpcy5lc2NhcGUoYikrXCIpXCJ9LHBsdXM6ZnVuY3Rpb24oYSxiKXtyZXR1cm5cInBsdXMoXCIrYStcIixcIitiK1wiKVwifSxyZXR1cm5fOmZ1bmN0aW9uKGEpe3RoaXMuY3VycmVudCgpLmJvZHkucHVzaChcInJldHVybiBcIixhLFwiO1wiKX0saWZfOmZ1bmN0aW9uKGEsYixkKXtpZighMD09PWEpYigpO2Vsc2V7dmFyIGM9dGhpcy5jdXJyZW50KCkuYm9keTtjLnB1c2goXCJpZihcIixhLFwiKXtcIik7YigpO2MucHVzaChcIn1cIik7ZCYmKGMucHVzaChcImVsc2V7XCIpLGQoKSxjLnB1c2goXCJ9XCIpKX19LG5vdDpmdW5jdGlvbihhKXtyZXR1cm5cIiEoXCIrYStcIilcIn0sbm90TnVsbDpmdW5jdGlvbihhKXtyZXR1cm4gYStcIiE9bnVsbFwifSxub25Db21wdXRlZE1lbWJlcjpmdW5jdGlvbihhLGIpe3JldHVybiBhK1xyXG5cIi5cIitifSxjb21wdXRlZE1lbWJlcjpmdW5jdGlvbihhLGIpe3JldHVybiBhK1wiW1wiK2IrXCJdXCJ9LG1lbWJlcjpmdW5jdGlvbihhLGIsZCl7cmV0dXJuIGQ/dGhpcy5jb21wdXRlZE1lbWJlcihhLGIpOnRoaXMubm9uQ29tcHV0ZWRNZW1iZXIoYSxiKX0sYWRkRW5zdXJlU2FmZU9iamVjdDpmdW5jdGlvbihhKXt0aGlzLmN1cnJlbnQoKS5ib2R5LnB1c2godGhpcy5lbnN1cmVTYWZlT2JqZWN0KGEpLFwiO1wiKX0sYWRkRW5zdXJlU2FmZU1lbWJlck5hbWU6ZnVuY3Rpb24oYSl7dGhpcy5jdXJyZW50KCkuYm9keS5wdXNoKHRoaXMuZW5zdXJlU2FmZU1lbWJlck5hbWUoYSksXCI7XCIpfSxhZGRFbnN1cmVTYWZlRnVuY3Rpb246ZnVuY3Rpb24oYSl7dGhpcy5jdXJyZW50KCkuYm9keS5wdXNoKHRoaXMuZW5zdXJlU2FmZUZ1bmN0aW9uKGEpLFwiO1wiKX0sYWRkRW5zdXJlU2FmZUFzc2lnbkNvbnRleHQ6ZnVuY3Rpb24oYSl7dGhpcy5jdXJyZW50KCkuYm9keS5wdXNoKHRoaXMuZW5zdXJlU2FmZUFzc2lnbkNvbnRleHQoYSksXHJcblwiO1wiKX0sZW5zdXJlU2FmZU9iamVjdDpmdW5jdGlvbihhKXtyZXR1cm5cImVuc3VyZVNhZmVPYmplY3QoXCIrYStcIix0ZXh0KVwifSxlbnN1cmVTYWZlTWVtYmVyTmFtZTpmdW5jdGlvbihhKXtyZXR1cm5cImVuc3VyZVNhZmVNZW1iZXJOYW1lKFwiK2ErXCIsdGV4dClcIn0sZW5zdXJlU2FmZUZ1bmN0aW9uOmZ1bmN0aW9uKGEpe3JldHVyblwiZW5zdXJlU2FmZUZ1bmN0aW9uKFwiK2ErXCIsdGV4dClcIn0sZ2V0U3RyaW5nVmFsdWU6ZnVuY3Rpb24oYSl7dGhpcy5hc3NpZ24oYSxcImdldFN0cmluZ1ZhbHVlKFwiK2ErXCIsdGV4dClcIil9LGVuc3VyZVNhZmVBc3NpZ25Db250ZXh0OmZ1bmN0aW9uKGEpe3JldHVyblwiZW5zdXJlU2FmZUFzc2lnbkNvbnRleHQoXCIrYStcIix0ZXh0KVwifSxsYXp5UmVjdXJzZTpmdW5jdGlvbihhLGIsZCxjLGUsZil7dmFyIGc9dGhpcztyZXR1cm4gZnVuY3Rpb24oKXtnLnJlY3Vyc2UoYSxiLGQsYyxlLGYpfX0sbGF6eUFzc2lnbjpmdW5jdGlvbihhLGIpe3ZhciBkPXRoaXM7cmV0dXJuIGZ1bmN0aW9uKCl7ZC5hc3NpZ24oYSxcclxuYil9fSxzdHJpbmdFc2NhcGVSZWdleDovW14gYS16QS1aMC05XS9nLHN0cmluZ0VzY2FwZUZuOmZ1bmN0aW9uKGEpe3JldHVyblwiXFxcXHVcIisoXCIwMDAwXCIrYS5jaGFyQ29kZUF0KDApLnRvU3RyaW5nKDE2KSkuc2xpY2UoLTQpfSxlc2NhcGU6ZnVuY3Rpb24oYSl7aWYoRyhhKSlyZXR1cm5cIidcIithLnJlcGxhY2UodGhpcy5zdHJpbmdFc2NhcGVSZWdleCx0aGlzLnN0cmluZ0VzY2FwZUZuKStcIidcIjtpZihVKGEpKXJldHVybiBhLnRvU3RyaW5nKCk7aWYoITA9PT1hKXJldHVyblwidHJ1ZVwiO2lmKCExPT09YSlyZXR1cm5cImZhbHNlXCI7aWYobnVsbD09PWEpcmV0dXJuXCJudWxsXCI7aWYoXCJ1bmRlZmluZWRcIj09PXR5cGVvZiBhKXJldHVyblwidW5kZWZpbmVkXCI7dGhyb3cgY2EoXCJlc2NcIik7fSxuZXh0SWQ6ZnVuY3Rpb24oYSxiKXt2YXIgZD1cInZcIit0aGlzLnN0YXRlLm5leHRJZCsrO2F8fHRoaXMuY3VycmVudCgpLnZhcnMucHVzaChkKyhiP1wiPVwiK2I6XCJcIikpO3JldHVybiBkfSxjdXJyZW50OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuc3RhdGVbdGhpcy5zdGF0ZS5jb21wdXRpbmddfX07XHJcbnRkLnByb3RvdHlwZT17Y29tcGlsZTpmdW5jdGlvbihhLGIpe3ZhciBkPXRoaXMsYz10aGlzLmFzdEJ1aWxkZXIuYXN0KGEpO3RoaXMuZXhwcmVzc2lvbj1hO3RoaXMuZXhwZW5zaXZlQ2hlY2tzPWI7VChjLGQuJGZpbHRlcik7dmFyIGUsZjtpZihlPXFkKGMpKWY9dGhpcy5yZWN1cnNlKGUpO2U9b2QoYy5ib2R5KTt2YXIgZztlJiYoZz1bXSxuKGUsZnVuY3Rpb24oYSxiKXt2YXIgYz1kLnJlY3Vyc2UoYSk7YS5pbnB1dD1jO2cucHVzaChjKTthLndhdGNoSWQ9Yn0pKTt2YXIgaD1bXTtuKGMuYm9keSxmdW5jdGlvbihhKXtoLnB1c2goZC5yZWN1cnNlKGEuZXhwcmVzc2lvbikpfSk7ZT0wPT09Yy5ib2R5Lmxlbmd0aD9mdW5jdGlvbigpe306MT09PWMuYm9keS5sZW5ndGg/aFswXTpmdW5jdGlvbihhLGIpe3ZhciBjO24oaCxmdW5jdGlvbihkKXtjPWQoYSxiKX0pO3JldHVybiBjfTtmJiYoZS5hc3NpZ249ZnVuY3Rpb24oYSxiLGMpe3JldHVybiBmKGEsYyxiKX0pO2cmJihlLmlucHV0cz1cclxuZyk7ZS5saXRlcmFsPXJkKGMpO2UuY29uc3RhbnQ9Yy5jb25zdGFudDtyZXR1cm4gZX0scmVjdXJzZTpmdW5jdGlvbihhLGIsZCl7dmFyIGMsZSxmPXRoaXMsZztpZihhLmlucHV0KXJldHVybiB0aGlzLmlucHV0cyhhLmlucHV0LGEud2F0Y2hJZCk7c3dpdGNoKGEudHlwZSl7Y2FzZSBxLkxpdGVyYWw6cmV0dXJuIHRoaXMudmFsdWUoYS52YWx1ZSxiKTtjYXNlIHEuVW5hcnlFeHByZXNzaW9uOnJldHVybiBlPXRoaXMucmVjdXJzZShhLmFyZ3VtZW50KSx0aGlzW1widW5hcnlcIithLm9wZXJhdG9yXShlLGIpO2Nhc2UgcS5CaW5hcnlFeHByZXNzaW9uOnJldHVybiBjPXRoaXMucmVjdXJzZShhLmxlZnQpLGU9dGhpcy5yZWN1cnNlKGEucmlnaHQpLHRoaXNbXCJiaW5hcnlcIithLm9wZXJhdG9yXShjLGUsYik7Y2FzZSBxLkxvZ2ljYWxFeHByZXNzaW9uOnJldHVybiBjPXRoaXMucmVjdXJzZShhLmxlZnQpLGU9dGhpcy5yZWN1cnNlKGEucmlnaHQpLHRoaXNbXCJiaW5hcnlcIithLm9wZXJhdG9yXShjLFxyXG5lLGIpO2Nhc2UgcS5Db25kaXRpb25hbEV4cHJlc3Npb246cmV0dXJuIHRoaXNbXCJ0ZXJuYXJ5PzpcIl0odGhpcy5yZWN1cnNlKGEudGVzdCksdGhpcy5yZWN1cnNlKGEuYWx0ZXJuYXRlKSx0aGlzLnJlY3Vyc2UoYS5jb25zZXF1ZW50KSxiKTtjYXNlIHEuSWRlbnRpZmllcjpyZXR1cm4gWGEoYS5uYW1lLGYuZXhwcmVzc2lvbiksZi5pZGVudGlmaWVyKGEubmFtZSxmLmV4cGVuc2l2ZUNoZWNrc3x8SGIoYS5uYW1lKSxiLGQsZi5leHByZXNzaW9uKTtjYXNlIHEuTWVtYmVyRXhwcmVzc2lvbjpyZXR1cm4gYz10aGlzLnJlY3Vyc2UoYS5vYmplY3QsITEsISFkKSxhLmNvbXB1dGVkfHwoWGEoYS5wcm9wZXJ0eS5uYW1lLGYuZXhwcmVzc2lvbiksZT1hLnByb3BlcnR5Lm5hbWUpLGEuY29tcHV0ZWQmJihlPXRoaXMucmVjdXJzZShhLnByb3BlcnR5KSksYS5jb21wdXRlZD90aGlzLmNvbXB1dGVkTWVtYmVyKGMsZSxiLGQsZi5leHByZXNzaW9uKTp0aGlzLm5vbkNvbXB1dGVkTWVtYmVyKGMsZSxcclxuZi5leHBlbnNpdmVDaGVja3MsYixkLGYuZXhwcmVzc2lvbik7Y2FzZSBxLkNhbGxFeHByZXNzaW9uOnJldHVybiBnPVtdLG4oYS5hcmd1bWVudHMsZnVuY3Rpb24oYSl7Zy5wdXNoKGYucmVjdXJzZShhKSl9KSxhLmZpbHRlciYmKGU9dGhpcy4kZmlsdGVyKGEuY2FsbGVlLm5hbWUpKSxhLmZpbHRlcnx8KGU9dGhpcy5yZWN1cnNlKGEuY2FsbGVlLCEwKSksYS5maWx0ZXI/ZnVuY3Rpb24oYSxjLGQsZil7Zm9yKHZhciBuPVtdLHI9MDtyPGcubGVuZ3RoOysrciluLnB1c2goZ1tyXShhLGMsZCxmKSk7YT1lLmFwcGx5KHUsbixmKTtyZXR1cm4gYj97Y29udGV4dDp1LG5hbWU6dSx2YWx1ZTphfTphfTpmdW5jdGlvbihhLGMsZCxtKXt2YXIgbj1lKGEsYyxkLG0pLHI7aWYobnVsbCE9bi52YWx1ZSl7QWEobi5jb250ZXh0LGYuZXhwcmVzc2lvbik7bWQobi52YWx1ZSxmLmV4cHJlc3Npb24pO3I9W107Zm9yKHZhciBxPTA7cTxnLmxlbmd0aDsrK3Epci5wdXNoKEFhKGdbcV0oYSxjLGQsbSksXHJcbmYuZXhwcmVzc2lvbikpO3I9QWEobi52YWx1ZS5hcHBseShuLmNvbnRleHQsciksZi5leHByZXNzaW9uKX1yZXR1cm4gYj97dmFsdWU6cn06cn07Y2FzZSBxLkFzc2lnbm1lbnRFeHByZXNzaW9uOnJldHVybiBjPXRoaXMucmVjdXJzZShhLmxlZnQsITAsMSksZT10aGlzLnJlY3Vyc2UoYS5yaWdodCksZnVuY3Rpb24oYSxkLGcsbSl7dmFyIG49YyhhLGQsZyxtKTthPWUoYSxkLGcsbSk7QWEobi52YWx1ZSxmLmV4cHJlc3Npb24pO0diKG4uY29udGV4dCk7bi5jb250ZXh0W24ubmFtZV09YTtyZXR1cm4gYj97dmFsdWU6YX06YX07Y2FzZSBxLkFycmF5RXhwcmVzc2lvbjpyZXR1cm4gZz1bXSxuKGEuZWxlbWVudHMsZnVuY3Rpb24oYSl7Zy5wdXNoKGYucmVjdXJzZShhKSl9KSxmdW5jdGlvbihhLGMsZCxlKXtmb3IodmFyIGY9W10sbj0wO248Zy5sZW5ndGg7KytuKWYucHVzaChnW25dKGEsYyxkLGUpKTtyZXR1cm4gYj97dmFsdWU6Zn06Zn07Y2FzZSBxLk9iamVjdEV4cHJlc3Npb246cmV0dXJuIGc9XHJcbltdLG4oYS5wcm9wZXJ0aWVzLGZ1bmN0aW9uKGEpe2cucHVzaCh7a2V5OmEua2V5LnR5cGU9PT1xLklkZW50aWZpZXI/YS5rZXkubmFtZTpcIlwiK2Eua2V5LnZhbHVlLHZhbHVlOmYucmVjdXJzZShhLnZhbHVlKX0pfSksZnVuY3Rpb24oYSxjLGQsZSl7Zm9yKHZhciBmPXt9LG49MDtuPGcubGVuZ3RoOysrbilmW2dbbl0ua2V5XT1nW25dLnZhbHVlKGEsYyxkLGUpO3JldHVybiBiP3t2YWx1ZTpmfTpmfTtjYXNlIHEuVGhpc0V4cHJlc3Npb246cmV0dXJuIGZ1bmN0aW9uKGEpe3JldHVybiBiP3t2YWx1ZTphfTphfTtjYXNlIHEuTG9jYWxzRXhwcmVzc2lvbjpyZXR1cm4gZnVuY3Rpb24oYSxjKXtyZXR1cm4gYj97dmFsdWU6Y306Y307Y2FzZSBxLk5HVmFsdWVQYXJhbWV0ZXI6cmV0dXJuIGZ1bmN0aW9uKGEsYyxkLGUpe3JldHVybiBiP3t2YWx1ZTpkfTpkfX19LFwidW5hcnkrXCI6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gZnVuY3Rpb24oZCxjLGUsZil7ZD1hKGQsYyxlLGYpO2Q9eihkKT8rZDpcclxuMDtyZXR1cm4gYj97dmFsdWU6ZH06ZH19LFwidW5hcnktXCI6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gZnVuY3Rpb24oZCxjLGUsZil7ZD1hKGQsYyxlLGYpO2Q9eihkKT8tZDowO3JldHVybiBiP3t2YWx1ZTpkfTpkfX0sXCJ1bmFyeSFcIjpmdW5jdGlvbihhLGIpe3JldHVybiBmdW5jdGlvbihkLGMsZSxmKXtkPSFhKGQsYyxlLGYpO3JldHVybiBiP3t2YWx1ZTpkfTpkfX0sXCJiaW5hcnkrXCI6ZnVuY3Rpb24oYSxiLGQpe3JldHVybiBmdW5jdGlvbihjLGUsZixnKXt2YXIgaD1hKGMsZSxmLGcpO2M9YihjLGUsZixnKTtoPW5kKGgsYyk7cmV0dXJuIGQ/e3ZhbHVlOmh9Omh9fSxcImJpbmFyeS1cIjpmdW5jdGlvbihhLGIsZCl7cmV0dXJuIGZ1bmN0aW9uKGMsZSxmLGcpe3ZhciBoPWEoYyxlLGYsZyk7Yz1iKGMsZSxmLGcpO2g9KHooaCk/aDowKS0oeihjKT9jOjApO3JldHVybiBkP3t2YWx1ZTpofTpofX0sXCJiaW5hcnkqXCI6ZnVuY3Rpb24oYSxiLGQpe3JldHVybiBmdW5jdGlvbihjLGUsZixnKXtjPVxyXG5hKGMsZSxmLGcpKmIoYyxlLGYsZyk7cmV0dXJuIGQ/e3ZhbHVlOmN9OmN9fSxcImJpbmFyeS9cIjpmdW5jdGlvbihhLGIsZCl7cmV0dXJuIGZ1bmN0aW9uKGMsZSxmLGcpe2M9YShjLGUsZixnKS9iKGMsZSxmLGcpO3JldHVybiBkP3t2YWx1ZTpjfTpjfX0sXCJiaW5hcnklXCI6ZnVuY3Rpb24oYSxiLGQpe3JldHVybiBmdW5jdGlvbihjLGUsZixnKXtjPWEoYyxlLGYsZyklYihjLGUsZixnKTtyZXR1cm4gZD97dmFsdWU6Y306Y319LFwiYmluYXJ5PT09XCI6ZnVuY3Rpb24oYSxiLGQpe3JldHVybiBmdW5jdGlvbihjLGUsZixnKXtjPWEoYyxlLGYsZyk9PT1iKGMsZSxmLGcpO3JldHVybiBkP3t2YWx1ZTpjfTpjfX0sXCJiaW5hcnkhPT1cIjpmdW5jdGlvbihhLGIsZCl7cmV0dXJuIGZ1bmN0aW9uKGMsZSxmLGcpe2M9YShjLGUsZixnKSE9PWIoYyxlLGYsZyk7cmV0dXJuIGQ/e3ZhbHVlOmN9OmN9fSxcImJpbmFyeT09XCI6ZnVuY3Rpb24oYSxiLGQpe3JldHVybiBmdW5jdGlvbihjLGUsZixnKXtjPWEoYyxcclxuZSxmLGcpPT1iKGMsZSxmLGcpO3JldHVybiBkP3t2YWx1ZTpjfTpjfX0sXCJiaW5hcnkhPVwiOmZ1bmN0aW9uKGEsYixkKXtyZXR1cm4gZnVuY3Rpb24oYyxlLGYsZyl7Yz1hKGMsZSxmLGcpIT1iKGMsZSxmLGcpO3JldHVybiBkP3t2YWx1ZTpjfTpjfX0sXCJiaW5hcnk8XCI6ZnVuY3Rpb24oYSxiLGQpe3JldHVybiBmdW5jdGlvbihjLGUsZixnKXtjPWEoYyxlLGYsZyk8YihjLGUsZixnKTtyZXR1cm4gZD97dmFsdWU6Y306Y319LFwiYmluYXJ5PlwiOmZ1bmN0aW9uKGEsYixkKXtyZXR1cm4gZnVuY3Rpb24oYyxlLGYsZyl7Yz1hKGMsZSxmLGcpPmIoYyxlLGYsZyk7cmV0dXJuIGQ/e3ZhbHVlOmN9OmN9fSxcImJpbmFyeTw9XCI6ZnVuY3Rpb24oYSxiLGQpe3JldHVybiBmdW5jdGlvbihjLGUsZixnKXtjPWEoYyxlLGYsZyk8PWIoYyxlLGYsZyk7cmV0dXJuIGQ/e3ZhbHVlOmN9OmN9fSxcImJpbmFyeT49XCI6ZnVuY3Rpb24oYSxiLGQpe3JldHVybiBmdW5jdGlvbihjLGUsZixnKXtjPWEoYyxlLGYsZyk+PVxyXG5iKGMsZSxmLGcpO3JldHVybiBkP3t2YWx1ZTpjfTpjfX0sXCJiaW5hcnkmJlwiOmZ1bmN0aW9uKGEsYixkKXtyZXR1cm4gZnVuY3Rpb24oYyxlLGYsZyl7Yz1hKGMsZSxmLGcpJiZiKGMsZSxmLGcpO3JldHVybiBkP3t2YWx1ZTpjfTpjfX0sXCJiaW5hcnl8fFwiOmZ1bmN0aW9uKGEsYixkKXtyZXR1cm4gZnVuY3Rpb24oYyxlLGYsZyl7Yz1hKGMsZSxmLGcpfHxiKGMsZSxmLGcpO3JldHVybiBkP3t2YWx1ZTpjfTpjfX0sXCJ0ZXJuYXJ5PzpcIjpmdW5jdGlvbihhLGIsZCxjKXtyZXR1cm4gZnVuY3Rpb24oZSxmLGcsaCl7ZT1hKGUsZixnLGgpP2IoZSxmLGcsaCk6ZChlLGYsZyxoKTtyZXR1cm4gYz97dmFsdWU6ZX06ZX19LHZhbHVlOmZ1bmN0aW9uKGEsYil7cmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuIGI/e2NvbnRleHQ6dSxuYW1lOnUsdmFsdWU6YX06YX19LGlkZW50aWZpZXI6ZnVuY3Rpb24oYSxiLGQsYyxlKXtyZXR1cm4gZnVuY3Rpb24oZixnLGgsayl7Zj1nJiZhIGluIGc/ZzpmO2MmJjEhPT1cclxuYyYmZiYmIWZbYV0mJihmW2FdPXt9KTtnPWY/ZlthXTp1O2ImJkFhKGcsZSk7cmV0dXJuIGQ/e2NvbnRleHQ6ZixuYW1lOmEsdmFsdWU6Z306Z319LGNvbXB1dGVkTWVtYmVyOmZ1bmN0aW9uKGEsYixkLGMsZSl7cmV0dXJuIGZ1bmN0aW9uKGYsZyxoLGspe3ZhciBsPWEoZixnLGgsayksbSxuO251bGwhPWwmJihtPWIoZixnLGgsayksbT1sZChtKSxYYShtLGUpLGMmJjEhPT1jJiYoR2IobCksbCYmIWxbbV0mJihsW21dPXt9KSksbj1sW21dLEFhKG4sZSkpO3JldHVybiBkP3tjb250ZXh0OmwsbmFtZTptLHZhbHVlOm59Om59fSxub25Db21wdXRlZE1lbWJlcjpmdW5jdGlvbihhLGIsZCxjLGUsZil7cmV0dXJuIGZ1bmN0aW9uKGcsaCxrLGwpe2c9YShnLGgsayxsKTtlJiYxIT09ZSYmKEdiKGcpLGcmJiFnW2JdJiYoZ1tiXT17fSkpO2g9bnVsbCE9Zz9nW2JdOnU7KGR8fEhiKGIpKSYmQWEoaCxmKTtyZXR1cm4gYz97Y29udGV4dDpnLG5hbWU6Yix2YWx1ZTpofTpofX0saW5wdXRzOmZ1bmN0aW9uKGEsXHJcbmIpe3JldHVybiBmdW5jdGlvbihkLGMsZSxmKXtyZXR1cm4gZj9mW2JdOmEoZCxjLGUpfX19O3ZhciBoYz1mdW5jdGlvbihhLGIsZCl7dGhpcy5sZXhlcj1hO3RoaXMuJGZpbHRlcj1iO3RoaXMub3B0aW9ucz1kO3RoaXMuYXN0PW5ldyBxKHRoaXMubGV4ZXIpO3RoaXMuYXN0Q29tcGlsZXI9ZC5jc3A/bmV3IHRkKHRoaXMuYXN0LGIpOm5ldyBzZCh0aGlzLmFzdCxiKX07aGMucHJvdG90eXBlPXtjb25zdHJ1Y3RvcjpoYyxwYXJzZTpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5hc3RDb21waWxlci5jb21waWxlKGEsdGhpcy5vcHRpb25zLmV4cGVuc2l2ZUNoZWNrcyl9fTtYKCk7WCgpO3ZhciBnZz1PYmplY3QucHJvdG90eXBlLnZhbHVlT2YsQmE9UChcIiRzY2VcIiksamE9e0hUTUw6XCJodG1sXCIsQ1NTOlwiY3NzXCIsVVJMOlwidXJsXCIsUkVTT1VSQ0VfVVJMOlwicmVzb3VyY2VVcmxcIixKUzpcImpzXCJ9LGlhPVAoXCIkY29tcGlsZVwiKSxhYT1aLmNyZWF0ZUVsZW1lbnQoXCJhXCIpLHhkPXphKFMubG9jYXRpb24uaHJlZik7XHJcbnlkLiRpbmplY3Q9W1wiJGRvY3VtZW50XCJdO0xjLiRpbmplY3Q9W1wiJHByb3ZpZGVcIl07dmFyIEZkPTIyLEVkPVwiLlwiLGpjPVwiMFwiO3pkLiRpbmplY3Q9W1wiJGxvY2FsZVwiXTtCZC4kaW5qZWN0PVtcIiRsb2NhbGVcIl07dmFyIHNnPXt5eXl5OmRhKFwiRnVsbFllYXJcIiw0KSx5eTpkYShcIkZ1bGxZZWFyXCIsMiwwLCEwKSx5OmRhKFwiRnVsbFllYXJcIiwxKSxNTU1NOkpiKFwiTW9udGhcIiksTU1NOkpiKFwiTW9udGhcIiwhMCksTU06ZGEoXCJNb250aFwiLDIsMSksTTpkYShcIk1vbnRoXCIsMSwxKSxkZDpkYShcIkRhdGVcIiwyKSxkOmRhKFwiRGF0ZVwiLDEpLEhIOmRhKFwiSG91cnNcIiwyKSxIOmRhKFwiSG91cnNcIiwxKSxoaDpkYShcIkhvdXJzXCIsMiwtMTIpLGg6ZGEoXCJIb3Vyc1wiLDEsLTEyKSxtbTpkYShcIk1pbnV0ZXNcIiwyKSxtOmRhKFwiTWludXRlc1wiLDEpLHNzOmRhKFwiU2Vjb25kc1wiLDIpLHM6ZGEoXCJTZWNvbmRzXCIsMSksc3NzOmRhKFwiTWlsbGlzZWNvbmRzXCIsMyksRUVFRTpKYihcIkRheVwiKSxFRUU6SmIoXCJEYXlcIiwhMCksXHJcbmE6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gMTI+YS5nZXRIb3VycygpP2IuQU1QTVNbMF06Yi5BTVBNU1sxXX0sWjpmdW5jdGlvbihhLGIsZCl7YT0tMSpkO3JldHVybiBhPSgwPD1hP1wiK1wiOlwiXCIpKyhJYihNYXRoWzA8YT9cImZsb29yXCI6XCJjZWlsXCJdKGEvNjApLDIpK0liKE1hdGguYWJzKGElNjApLDIpKX0sd3c6SGQoMiksdzpIZCgxKSxHOmtjLEdHOmtjLEdHRzprYyxHR0dHOmZ1bmN0aW9uKGEsYil7cmV0dXJuIDA+PWEuZ2V0RnVsbFllYXIoKT9iLkVSQU5BTUVTWzBdOmIuRVJBTkFNRVNbMV19fSxyZz0vKCg/OlteeU1kSGhtc2FaRXdHJ10rKXwoPzonKD86W14nXXwnJykqJyl8KD86RSt8eSt8TSt8ZCt8SCt8aCt8bSt8cyt8YXxafEcrfHcrKSkoLiopLyxxZz0vXlxcLT9cXGQrJC87QWQuJGluamVjdD1bXCIkbG9jYWxlXCJdO3ZhciBsZz1rYShIKSxtZz1rYSh1Yik7Q2QuJGluamVjdD1bXCIkcGFyc2VcIl07dmFyIGtlPWthKHtyZXN0cmljdDpcIkVcIixjb21waWxlOmZ1bmN0aW9uKGEsYil7aWYoIWIuaHJlZiYmXHJcbiFiLnhsaW5rSHJlZilyZXR1cm4gZnVuY3Rpb24oYSxiKXtpZihcImFcIj09PWJbMF0ubm9kZU5hbWUudG9Mb3dlckNhc2UoKSl7dmFyIGU9XCJbb2JqZWN0IFNWR0FuaW1hdGVkU3RyaW5nXVwiPT09cmEuY2FsbChiLnByb3AoXCJocmVmXCIpKT9cInhsaW5rOmhyZWZcIjpcImhyZWZcIjtiLm9uKFwiY2xpY2tcIixmdW5jdGlvbihhKXtiLmF0dHIoZSl8fGEucHJldmVudERlZmF1bHQoKX0pfX19fSksdmI9e307bihEYixmdW5jdGlvbihhLGIpe2Z1bmN0aW9uIGQoYSxkLGUpe2EuJHdhdGNoKGVbY10sZnVuY3Rpb24oYSl7ZS4kc2V0KGIsISFhKX0pfWlmKFwibXVsdGlwbGVcIiE9YSl7dmFyIGM9dmEoXCJuZy1cIitiKSxlPWQ7XCJjaGVja2VkXCI9PT1hJiYoZT1mdW5jdGlvbihhLGIsZSl7ZS5uZ01vZGVsIT09ZVtjXSYmZChhLGIsZSl9KTt2YltjXT1mdW5jdGlvbigpe3JldHVybntyZXN0cmljdDpcIkFcIixwcmlvcml0eToxMDAsbGluazplfX19fSk7bigkYyxmdW5jdGlvbihhLGIpe3ZiW2JdPWZ1bmN0aW9uKCl7cmV0dXJue3ByaW9yaXR5OjEwMCxcclxubGluazpmdW5jdGlvbihhLGMsZSl7aWYoXCJuZ1BhdHRlcm5cIj09PWImJlwiL1wiPT1lLm5nUGF0dGVybi5jaGFyQXQoMCkmJihjPWUubmdQYXR0ZXJuLm1hdGNoKHVnKSkpe2UuJHNldChcIm5nUGF0dGVyblwiLG5ldyBSZWdFeHAoY1sxXSxjWzJdKSk7cmV0dXJufWEuJHdhdGNoKGVbYl0sZnVuY3Rpb24oYSl7ZS4kc2V0KGIsYSl9KX19fX0pO24oW1wic3JjXCIsXCJzcmNzZXRcIixcImhyZWZcIl0sZnVuY3Rpb24oYSl7dmFyIGI9dmEoXCJuZy1cIithKTt2YltiXT1mdW5jdGlvbigpe3JldHVybntwcmlvcml0eTo5OSxsaW5rOmZ1bmN0aW9uKGQsYyxlKXt2YXIgZj1hLGc9YTtcImhyZWZcIj09PWEmJlwiW29iamVjdCBTVkdBbmltYXRlZFN0cmluZ11cIj09PXJhLmNhbGwoYy5wcm9wKFwiaHJlZlwiKSkmJihnPVwieGxpbmtIcmVmXCIsZS4kYXR0cltnXT1cInhsaW5rOmhyZWZcIixmPW51bGwpO2UuJG9ic2VydmUoYixmdW5jdGlvbihiKXtiPyhlLiRzZXQoZyxiKSxLYSYmZiYmYy5wcm9wKGYsZVtnXSkpOlwiaHJlZlwiPT09XHJcbmEmJmUuJHNldChnLG51bGwpfSl9fX19KTt2YXIgS2I9eyRhZGRDb250cm9sOncsJCRyZW5hbWVDb250cm9sOmZ1bmN0aW9uKGEsYil7YS4kbmFtZT1ifSwkcmVtb3ZlQ29udHJvbDp3LCRzZXRWYWxpZGl0eTp3LCRzZXREaXJ0eTp3LCRzZXRQcmlzdGluZTp3LCRzZXRTdWJtaXR0ZWQ6d307SWQuJGluamVjdD1bXCIkZWxlbWVudFwiLFwiJGF0dHJzXCIsXCIkc2NvcGVcIixcIiRhbmltYXRlXCIsXCIkaW50ZXJwb2xhdGVcIl07dmFyIFFkPWZ1bmN0aW9uKGEpe3JldHVybltcIiR0aW1lb3V0XCIsXCIkcGFyc2VcIixmdW5jdGlvbihiLGQpe2Z1bmN0aW9uIGMoYSl7cmV0dXJuXCJcIj09PWE/ZCgndGhpc1tcIlwiXScpLmFzc2lnbjpkKGEpLmFzc2lnbnx8d31yZXR1cm57bmFtZTpcImZvcm1cIixyZXN0cmljdDphP1wiRUFDXCI6XCJFXCIscmVxdWlyZTpbXCJmb3JtXCIsXCJeXj9mb3JtXCJdLGNvbnRyb2xsZXI6SWQsY29tcGlsZTpmdW5jdGlvbihkLGYpe2QuYWRkQ2xhc3MoWWEpLmFkZENsYXNzKG9iKTt2YXIgZz1mLm5hbWU/XCJuYW1lXCI6XHJcbmEmJmYubmdGb3JtP1wibmdGb3JtXCI6ITE7cmV0dXJue3ByZTpmdW5jdGlvbihhLGQsZSxmKXt2YXIgbj1mWzBdO2lmKCEoXCJhY3Rpb25cImluIGUpKXt2YXIgcj1mdW5jdGlvbihiKXthLiRhcHBseShmdW5jdGlvbigpe24uJGNvbW1pdFZpZXdWYWx1ZSgpO24uJHNldFN1Ym1pdHRlZCgpfSk7Yi5wcmV2ZW50RGVmYXVsdCgpfTtkWzBdLmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIixyLCExKTtkLm9uKFwiJGRlc3Ryb3lcIixmdW5jdGlvbigpe2IoZnVuY3Rpb24oKXtkWzBdLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIixyLCExKX0sMCwhMSl9KX0oZlsxXXx8bi4kJHBhcmVudEZvcm0pLiRhZGRDb250cm9sKG4pO3ZhciBxPWc/YyhuLiRuYW1lKTp3O2cmJihxKGEsbiksZS4kb2JzZXJ2ZShnLGZ1bmN0aW9uKGIpe24uJG5hbWUhPT1iJiYocShhLHUpLG4uJCRwYXJlbnRGb3JtLiQkcmVuYW1lQ29udHJvbChuLGIpLHE9YyhuLiRuYW1lKSxxKGEsbikpfSkpO2Qub24oXCIkZGVzdHJveVwiLFxyXG5mdW5jdGlvbigpe24uJCRwYXJlbnRGb3JtLiRyZW1vdmVDb250cm9sKG4pO3EoYSx1KTtMKG4sS2IpfSl9fX19fV19LGxlPVFkKCkseWU9UWQoITApLHRnPS9cXGR7NH0tWzAxXVxcZC1bMC0zXVxcZFRbMC0yXVxcZDpbMC01XVxcZDpbMC01XVxcZFxcLlxcZCsoWystXVswLTJdXFxkOlswLTVdXFxkfFopLyxDZz0vXltBLVphLXpdW0EtWmEtelxcZC4rLV0qOlxcLyooPzpcXHcrKD86OlxcdyspP0ApP1teXFxzL10rKD86OlxcZCspPyg/OlxcL1tcXHcjITouPys9JiVAXFwtL1tcXF0kJygpKiw7fl0qKT8kLyxEZz0vXlthLXowLTkhIyQlJicqK1xcLz0/Xl9ge3x9fi4tXStAW2EtejAtOV0oW2EtejAtOS1dKlthLXowLTldKT8oXFwuW2EtejAtOV0oW2EtejAtOS1dKlthLXowLTldKT8pKiQvaSxFZz0vXlxccyooXFwtfFxcKyk/KFxcZCt8KFxcZCooXFwuXFxkKikpKShbZUVdWystXT9cXGQrKT9cXHMqJC8sUmQ9L14oXFxkezR9KS0oXFxkezJ9KS0oXFxkezJ9KSQvLFNkPS9eKFxcZHs0fSktKFxcZFxcZCktKFxcZFxcZClUKFxcZFxcZCk6KFxcZFxcZCkoPzo6KFxcZFxcZCkoXFwuXFxkezEsM30pPyk/JC8sXHJcbm5jPS9eKFxcZHs0fSktVyhcXGRcXGQpJC8sVGQ9L14oXFxkezR9KS0oXFxkXFxkKSQvLFVkPS9eKFxcZFxcZCk6KFxcZFxcZCkoPzo6KFxcZFxcZCkoXFwuXFxkezEsM30pPyk/JC8sVmQ9e3RleHQ6ZnVuY3Rpb24oYSxiLGQsYyxlLGYpe2xiKGEsYixkLGMsZSxmKTtsYyhjKX0sZGF0ZTptYihcImRhdGVcIixSZCxNYihSZCxbXCJ5eXl5XCIsXCJNTVwiLFwiZGRcIl0pLFwieXl5eS1NTS1kZFwiKSxcImRhdGV0aW1lLWxvY2FsXCI6bWIoXCJkYXRldGltZWxvY2FsXCIsU2QsTWIoU2QsXCJ5eXl5IE1NIGRkIEhIIG1tIHNzIHNzc1wiLnNwbGl0KFwiIFwiKSksXCJ5eXl5LU1NLWRkVEhIOm1tOnNzLnNzc1wiKSx0aW1lOm1iKFwidGltZVwiLFVkLE1iKFVkLFtcIkhIXCIsXCJtbVwiLFwic3NcIixcInNzc1wiXSksXCJISDptbTpzcy5zc3NcIiksd2VlazptYihcIndlZWtcIixuYyxmdW5jdGlvbihhLGIpe2lmKGJhKGEpKXJldHVybiBhO2lmKEcoYSkpe25jLmxhc3RJbmRleD0wO3ZhciBkPW5jLmV4ZWMoYSk7aWYoZCl7dmFyIGM9K2RbMV0sZT0rZFsyXSxmPWQ9MCxnPVxyXG4wLGg9MCxrPUdkKGMpLGU9NyooZS0xKTtiJiYoZD1iLmdldEhvdXJzKCksZj1iLmdldE1pbnV0ZXMoKSxnPWIuZ2V0U2Vjb25kcygpLGg9Yi5nZXRNaWxsaXNlY29uZHMoKSk7cmV0dXJuIG5ldyBEYXRlKGMsMCxrLmdldERhdGUoKStlLGQsZixnLGgpfX1yZXR1cm4gTmFOfSxcInl5eXktV3d3XCIpLG1vbnRoOm1iKFwibW9udGhcIixUZCxNYihUZCxbXCJ5eXl5XCIsXCJNTVwiXSksXCJ5eXl5LU1NXCIpLG51bWJlcjpmdW5jdGlvbihhLGIsZCxjLGUsZil7S2QoYSxiLGQsYyk7bGIoYSxiLGQsYyxlLGYpO2MuJCRwYXJzZXJOYW1lPVwibnVtYmVyXCI7Yy4kcGFyc2Vycy5wdXNoKGZ1bmN0aW9uKGEpe3JldHVybiBjLiRpc0VtcHR5KGEpP251bGw6RWcudGVzdChhKT9wYXJzZUZsb2F0KGEpOnV9KTtjLiRmb3JtYXR0ZXJzLnB1c2goZnVuY3Rpb24oYSl7aWYoIWMuJGlzRW1wdHkoYSkpe2lmKCFVKGEpKXRocm93IG5iKFwibnVtZm10XCIsYSk7YT1hLnRvU3RyaW5nKCl9cmV0dXJuIGF9KTtpZih6KGQubWluKXx8XHJcbmQubmdNaW4pe3ZhciBnO2MuJHZhbGlkYXRvcnMubWluPWZ1bmN0aW9uKGEpe3JldHVybiBjLiRpc0VtcHR5KGEpfHx4KGcpfHxhPj1nfTtkLiRvYnNlcnZlKFwibWluXCIsZnVuY3Rpb24oYSl7eihhKSYmIVUoYSkmJihhPXBhcnNlRmxvYXQoYSwxMCkpO2c9VShhKSYmIWlzTmFOKGEpP2E6dTtjLiR2YWxpZGF0ZSgpfSl9aWYoeihkLm1heCl8fGQubmdNYXgpe3ZhciBoO2MuJHZhbGlkYXRvcnMubWF4PWZ1bmN0aW9uKGEpe3JldHVybiBjLiRpc0VtcHR5KGEpfHx4KGgpfHxhPD1ofTtkLiRvYnNlcnZlKFwibWF4XCIsZnVuY3Rpb24oYSl7eihhKSYmIVUoYSkmJihhPXBhcnNlRmxvYXQoYSwxMCkpO2g9VShhKSYmIWlzTmFOKGEpP2E6dTtjLiR2YWxpZGF0ZSgpfSl9fSx1cmw6ZnVuY3Rpb24oYSxiLGQsYyxlLGYpe2xiKGEsYixkLGMsZSxmKTtsYyhjKTtjLiQkcGFyc2VyTmFtZT1cInVybFwiO2MuJHZhbGlkYXRvcnMudXJsPWZ1bmN0aW9uKGEsYil7dmFyIGQ9YXx8YjtyZXR1cm4gYy4kaXNFbXB0eShkKXx8XHJcbkNnLnRlc3QoZCl9fSxlbWFpbDpmdW5jdGlvbihhLGIsZCxjLGUsZil7bGIoYSxiLGQsYyxlLGYpO2xjKGMpO2MuJCRwYXJzZXJOYW1lPVwiZW1haWxcIjtjLiR2YWxpZGF0b3JzLmVtYWlsPWZ1bmN0aW9uKGEsYil7dmFyIGQ9YXx8YjtyZXR1cm4gYy4kaXNFbXB0eShkKXx8RGcudGVzdChkKX19LHJhZGlvOmZ1bmN0aW9uKGEsYixkLGMpe3goZC5uYW1lKSYmYi5hdHRyKFwibmFtZVwiLCsrcGIpO2Iub24oXCJjbGlja1wiLGZ1bmN0aW9uKGEpe2JbMF0uY2hlY2tlZCYmYy4kc2V0Vmlld1ZhbHVlKGQudmFsdWUsYSYmYS50eXBlKX0pO2MuJHJlbmRlcj1mdW5jdGlvbigpe2JbMF0uY2hlY2tlZD1kLnZhbHVlPT1jLiR2aWV3VmFsdWV9O2QuJG9ic2VydmUoXCJ2YWx1ZVwiLGMuJHJlbmRlcil9LGNoZWNrYm94OmZ1bmN0aW9uKGEsYixkLGMsZSxmLGcsaCl7dmFyIGs9TGQoaCxhLFwibmdUcnVlVmFsdWVcIixkLm5nVHJ1ZVZhbHVlLCEwKSxsPUxkKGgsYSxcIm5nRmFsc2VWYWx1ZVwiLGQubmdGYWxzZVZhbHVlLFxyXG4hMSk7Yi5vbihcImNsaWNrXCIsZnVuY3Rpb24oYSl7Yy4kc2V0Vmlld1ZhbHVlKGJbMF0uY2hlY2tlZCxhJiZhLnR5cGUpfSk7Yy4kcmVuZGVyPWZ1bmN0aW9uKCl7YlswXS5jaGVja2VkPWMuJHZpZXdWYWx1ZX07Yy4kaXNFbXB0eT1mdW5jdGlvbihhKXtyZXR1cm4hMT09PWF9O2MuJGZvcm1hdHRlcnMucHVzaChmdW5jdGlvbihhKXtyZXR1cm4gbGEoYSxrKX0pO2MuJHBhcnNlcnMucHVzaChmdW5jdGlvbihhKXtyZXR1cm4gYT9rOmx9KX0saGlkZGVuOncsYnV0dG9uOncsc3VibWl0OncscmVzZXQ6dyxmaWxlOnd9LEZjPVtcIiRicm93c2VyXCIsXCIkc25pZmZlclwiLFwiJGZpbHRlclwiLFwiJHBhcnNlXCIsZnVuY3Rpb24oYSxiLGQsYyl7cmV0dXJue3Jlc3RyaWN0OlwiRVwiLHJlcXVpcmU6W1wiP25nTW9kZWxcIl0sbGluazp7cHJlOmZ1bmN0aW9uKGUsZixnLGgpe2hbMF0mJihWZFtIKGcudHlwZSldfHxWZC50ZXh0KShlLGYsZyxoWzBdLGIsYSxkLGMpfX19fV0sRmc9L14odHJ1ZXxmYWxzZXxcXGQrKSQvLFxyXG5RZT1mdW5jdGlvbigpe3JldHVybntyZXN0cmljdDpcIkFcIixwcmlvcml0eToxMDAsY29tcGlsZTpmdW5jdGlvbihhLGIpe3JldHVybiBGZy50ZXN0KGIubmdWYWx1ZSk/ZnVuY3Rpb24oYSxiLGUpe2UuJHNldChcInZhbHVlXCIsYS4kZXZhbChlLm5nVmFsdWUpKX06ZnVuY3Rpb24oYSxiLGUpe2EuJHdhdGNoKGUubmdWYWx1ZSxmdW5jdGlvbihhKXtlLiRzZXQoXCJ2YWx1ZVwiLGEpfSl9fX19LHFlPVtcIiRjb21waWxlXCIsZnVuY3Rpb24oYSl7cmV0dXJue3Jlc3RyaWN0OlwiQUNcIixjb21waWxlOmZ1bmN0aW9uKGIpe2EuJCRhZGRCaW5kaW5nQ2xhc3MoYik7cmV0dXJuIGZ1bmN0aW9uKGIsYyxlKXthLiQkYWRkQmluZGluZ0luZm8oYyxlLm5nQmluZCk7Yz1jWzBdO2IuJHdhdGNoKGUubmdCaW5kLGZ1bmN0aW9uKGEpe2MudGV4dENvbnRlbnQ9eChhKT9cIlwiOmF9KX19fX1dLHNlPVtcIiRpbnRlcnBvbGF0ZVwiLFwiJGNvbXBpbGVcIixmdW5jdGlvbihhLGIpe3JldHVybntjb21waWxlOmZ1bmN0aW9uKGQpe2IuJCRhZGRCaW5kaW5nQ2xhc3MoZCk7XHJcbnJldHVybiBmdW5jdGlvbihjLGQsZil7Yz1hKGQuYXR0cihmLiRhdHRyLm5nQmluZFRlbXBsYXRlKSk7Yi4kJGFkZEJpbmRpbmdJbmZvKGQsYy5leHByZXNzaW9ucyk7ZD1kWzBdO2YuJG9ic2VydmUoXCJuZ0JpbmRUZW1wbGF0ZVwiLGZ1bmN0aW9uKGEpe2QudGV4dENvbnRlbnQ9eChhKT9cIlwiOmF9KX19fX1dLHJlPVtcIiRzY2VcIixcIiRwYXJzZVwiLFwiJGNvbXBpbGVcIixmdW5jdGlvbihhLGIsZCl7cmV0dXJue3Jlc3RyaWN0OlwiQVwiLGNvbXBpbGU6ZnVuY3Rpb24oYyxlKXt2YXIgZj1iKGUubmdCaW5kSHRtbCksZz1iKGUubmdCaW5kSHRtbCxmdW5jdGlvbihhKXtyZXR1cm4oYXx8XCJcIikudG9TdHJpbmcoKX0pO2QuJCRhZGRCaW5kaW5nQ2xhc3MoYyk7cmV0dXJuIGZ1bmN0aW9uKGIsYyxlKXtkLiQkYWRkQmluZGluZ0luZm8oYyxlLm5nQmluZEh0bWwpO2IuJHdhdGNoKGcsZnVuY3Rpb24oKXtjLmh0bWwoYS5nZXRUcnVzdGVkSHRtbChmKGIpKXx8XCJcIil9KX19fX1dLFBlPWthKHtyZXN0cmljdDpcIkFcIixcclxucmVxdWlyZTpcIm5nTW9kZWxcIixsaW5rOmZ1bmN0aW9uKGEsYixkLGMpe2MuJHZpZXdDaGFuZ2VMaXN0ZW5lcnMucHVzaChmdW5jdGlvbigpe2EuJGV2YWwoZC5uZ0NoYW5nZSl9KX19KSx0ZT1tYyhcIlwiLCEwKSx2ZT1tYyhcIk9kZFwiLDApLHVlPW1jKFwiRXZlblwiLDEpLHdlPU5hKHtjb21waWxlOmZ1bmN0aW9uKGEsYil7Yi4kc2V0KFwibmdDbG9ha1wiLHUpO2EucmVtb3ZlQ2xhc3MoXCJuZy1jbG9ha1wiKX19KSx4ZT1bZnVuY3Rpb24oKXtyZXR1cm57cmVzdHJpY3Q6XCJBXCIsc2NvcGU6ITAsY29udHJvbGxlcjpcIkBcIixwcmlvcml0eTo1MDB9fV0sS2M9e30sR2c9e2JsdXI6ITAsZm9jdXM6ITB9O24oXCJjbGljayBkYmxjbGljayBtb3VzZWRvd24gbW91c2V1cCBtb3VzZW92ZXIgbW91c2VvdXQgbW91c2Vtb3ZlIG1vdXNlZW50ZXIgbW91c2VsZWF2ZSBrZXlkb3duIGtleXVwIGtleXByZXNzIHN1Ym1pdCBmb2N1cyBibHVyIGNvcHkgY3V0IHBhc3RlXCIuc3BsaXQoXCIgXCIpLGZ1bmN0aW9uKGEpe3ZhciBiPVxyXG52YShcIm5nLVwiK2EpO0tjW2JdPVtcIiRwYXJzZVwiLFwiJHJvb3RTY29wZVwiLGZ1bmN0aW9uKGQsYyl7cmV0dXJue3Jlc3RyaWN0OlwiQVwiLGNvbXBpbGU6ZnVuY3Rpb24oZSxmKXt2YXIgZz1kKGZbYl0sbnVsbCwhMCk7cmV0dXJuIGZ1bmN0aW9uKGIsZCl7ZC5vbihhLGZ1bmN0aW9uKGQpe3ZhciBlPWZ1bmN0aW9uKCl7ZyhiLHskZXZlbnQ6ZH0pfTtHZ1thXSYmYy4kJHBoYXNlP2IuJGV2YWxBc3luYyhlKTpiLiRhcHBseShlKX0pfX19fV19KTt2YXIgQWU9W1wiJGFuaW1hdGVcIixmdW5jdGlvbihhKXtyZXR1cm57bXVsdGlFbGVtZW50OiEwLHRyYW5zY2x1ZGU6XCJlbGVtZW50XCIscHJpb3JpdHk6NjAwLHRlcm1pbmFsOiEwLHJlc3RyaWN0OlwiQVwiLCQkdGxiOiEwLGxpbms6ZnVuY3Rpb24oYixkLGMsZSxmKXt2YXIgZyxoLGs7Yi4kd2F0Y2goYy5uZ0lmLGZ1bmN0aW9uKGIpe2I/aHx8ZihmdW5jdGlvbihiLGUpe2g9ZTtiW2IubGVuZ3RoKytdPVouY3JlYXRlQ29tbWVudChcIiBlbmQgbmdJZjogXCIrXHJcbmMubmdJZitcIiBcIik7Zz17Y2xvbmU6Yn07YS5lbnRlcihiLGQucGFyZW50KCksZCl9KTooayYmKGsucmVtb3ZlKCksaz1udWxsKSxoJiYoaC4kZGVzdHJveSgpLGg9bnVsbCksZyYmKGs9dGIoZy5jbG9uZSksYS5sZWF2ZShrKS50aGVuKGZ1bmN0aW9uKCl7az1udWxsfSksZz1udWxsKSl9KX19fV0sQmU9W1wiJHRlbXBsYXRlUmVxdWVzdFwiLFwiJGFuY2hvclNjcm9sbFwiLFwiJGFuaW1hdGVcIixmdW5jdGlvbihhLGIsZCl7cmV0dXJue3Jlc3RyaWN0OlwiRUNBXCIscHJpb3JpdHk6NDAwLHRlcm1pbmFsOiEwLHRyYW5zY2x1ZGU6XCJlbGVtZW50XCIsY29udHJvbGxlcjokLm5vb3AsY29tcGlsZTpmdW5jdGlvbihjLGUpe3ZhciBmPWUubmdJbmNsdWRlfHxlLnNyYyxnPWUub25sb2FkfHxcIlwiLGg9ZS5hdXRvc2Nyb2xsO3JldHVybiBmdW5jdGlvbihjLGUsbSxuLHIpe3ZhciBxPTAsdSx0LHAseT1mdW5jdGlvbigpe3QmJih0LnJlbW92ZSgpLHQ9bnVsbCk7dSYmKHUuJGRlc3Ryb3koKSx1PW51bGwpO3AmJlxyXG4oZC5sZWF2ZShwKS50aGVuKGZ1bmN0aW9uKCl7dD1udWxsfSksdD1wLHA9bnVsbCl9O2MuJHdhdGNoKGYsZnVuY3Rpb24oZil7dmFyIG09ZnVuY3Rpb24oKXsheihoKXx8aCYmIWMuJGV2YWwoaCl8fGIoKX0sdD0rK3E7Zj8oYShmLCEwKS50aGVuKGZ1bmN0aW9uKGEpe2lmKHQ9PT1xKXt2YXIgYj1jLiRuZXcoKTtuLnRlbXBsYXRlPWE7YT1yKGIsZnVuY3Rpb24oYSl7eSgpO2QuZW50ZXIoYSxudWxsLGUpLnRoZW4obSl9KTt1PWI7cD1hO3UuJGVtaXQoXCIkaW5jbHVkZUNvbnRlbnRMb2FkZWRcIixmKTtjLiRldmFsKGcpfX0sZnVuY3Rpb24oKXt0PT09cSYmKHkoKSxjLiRlbWl0KFwiJGluY2x1ZGVDb250ZW50RXJyb3JcIixmKSl9KSxjLiRlbWl0KFwiJGluY2x1ZGVDb250ZW50UmVxdWVzdGVkXCIsZikpOih5KCksbi50ZW1wbGF0ZT1udWxsKX0pfX19fV0sU2U9W1wiJGNvbXBpbGVcIixmdW5jdGlvbihhKXtyZXR1cm57cmVzdHJpY3Q6XCJFQ0FcIixwcmlvcml0eTotNDAwLHJlcXVpcmU6XCJuZ0luY2x1ZGVcIixcclxubGluazpmdW5jdGlvbihiLGQsYyxlKXsvU1ZHLy50ZXN0KGRbMF0udG9TdHJpbmcoKSk/KGQuZW1wdHkoKSxhKE5jKGUudGVtcGxhdGUsWikuY2hpbGROb2RlcykoYixmdW5jdGlvbihhKXtkLmFwcGVuZChhKX0se2Z1dHVyZVBhcmVudEVsZW1lbnQ6ZH0pKTooZC5odG1sKGUudGVtcGxhdGUpLGEoZC5jb250ZW50cygpKShiKSl9fX1dLENlPU5hKHtwcmlvcml0eTo0NTAsY29tcGlsZTpmdW5jdGlvbigpe3JldHVybntwcmU6ZnVuY3Rpb24oYSxiLGQpe2EuJGV2YWwoZC5uZ0luaXQpfX19fSksT2U9ZnVuY3Rpb24oKXtyZXR1cm57cmVzdHJpY3Q6XCJBXCIscHJpb3JpdHk6MTAwLHJlcXVpcmU6XCJuZ01vZGVsXCIsbGluazpmdW5jdGlvbihhLGIsZCxjKXt2YXIgZT1iLmF0dHIoZC4kYXR0ci5uZ0xpc3QpfHxcIiwgXCIsZj1cImZhbHNlXCIhPT1kLm5nVHJpbSxnPWY/WShlKTplO2MuJHBhcnNlcnMucHVzaChmdW5jdGlvbihhKXtpZigheChhKSl7dmFyIGI9W107YSYmbihhLnNwbGl0KGcpLGZ1bmN0aW9uKGEpe2EmJlxyXG5iLnB1c2goZj9ZKGEpOmEpfSk7cmV0dXJuIGJ9fSk7Yy4kZm9ybWF0dGVycy5wdXNoKGZ1bmN0aW9uKGEpe3JldHVybiBLKGEpP2Euam9pbihlKTp1fSk7Yy4kaXNFbXB0eT1mdW5jdGlvbihhKXtyZXR1cm4hYXx8IWEubGVuZ3RofX19fSxvYj1cIm5nLXZhbGlkXCIsTWQ9XCJuZy1pbnZhbGlkXCIsWWE9XCJuZy1wcmlzdGluZVwiLExiPVwibmctZGlydHlcIixPZD1cIm5nLXBlbmRpbmdcIixuYj1QKFwibmdNb2RlbFwiKSxIZz1bXCIkc2NvcGVcIixcIiRleGNlcHRpb25IYW5kbGVyXCIsXCIkYXR0cnNcIixcIiRlbGVtZW50XCIsXCIkcGFyc2VcIixcIiRhbmltYXRlXCIsXCIkdGltZW91dFwiLFwiJHJvb3RTY29wZVwiLFwiJHFcIixcIiRpbnRlcnBvbGF0ZVwiLGZ1bmN0aW9uKGEsYixkLGMsZSxmLGcsaCxrLGwpe3RoaXMuJG1vZGVsVmFsdWU9dGhpcy4kdmlld1ZhbHVlPU51bWJlci5OYU47dGhpcy4kJHJhd01vZGVsVmFsdWU9dTt0aGlzLiR2YWxpZGF0b3JzPXt9O3RoaXMuJGFzeW5jVmFsaWRhdG9ycz17fTt0aGlzLiRwYXJzZXJzPVxyXG5bXTt0aGlzLiRmb3JtYXR0ZXJzPVtdO3RoaXMuJHZpZXdDaGFuZ2VMaXN0ZW5lcnM9W107dGhpcy4kdW50b3VjaGVkPSEwO3RoaXMuJHRvdWNoZWQ9ITE7dGhpcy4kcHJpc3RpbmU9ITA7dGhpcy4kZGlydHk9ITE7dGhpcy4kdmFsaWQ9ITA7dGhpcy4kaW52YWxpZD0hMTt0aGlzLiRlcnJvcj17fTt0aGlzLiQkc3VjY2Vzcz17fTt0aGlzLiRwZW5kaW5nPXU7dGhpcy4kbmFtZT1sKGQubmFtZXx8XCJcIiwhMSkoYSk7dGhpcy4kJHBhcmVudEZvcm09S2I7dmFyIG09ZShkLm5nTW9kZWwpLHM9bS5hc3NpZ24scj1tLHE9cyxBPW51bGwsdCxwPXRoaXM7dGhpcy4kJHNldE9wdGlvbnM9ZnVuY3Rpb24oYSl7aWYoKHAuJG9wdGlvbnM9YSkmJmEuZ2V0dGVyU2V0dGVyKXt2YXIgYj1lKGQubmdNb2RlbCtcIigpXCIpLGY9ZShkLm5nTW9kZWwrXCIoJCQkcClcIik7cj1mdW5jdGlvbihhKXt2YXIgYz1tKGEpO0QoYykmJihjPWIoYSkpO3JldHVybiBjfTtxPWZ1bmN0aW9uKGEsYil7RChtKGEpKT9mKGEseyQkJHA6cC4kbW9kZWxWYWx1ZX0pOlxyXG5zKGEscC4kbW9kZWxWYWx1ZSl9fWVsc2UgaWYoIW0uYXNzaWduKXRocm93IG5iKFwibm9uYXNzaWduXCIsZC5uZ01vZGVsLHVhKGMpKTt9O3RoaXMuJHJlbmRlcj13O3RoaXMuJGlzRW1wdHk9ZnVuY3Rpb24oYSl7cmV0dXJuIHgoYSl8fFwiXCI9PT1hfHxudWxsPT09YXx8YSE9PWF9O3RoaXMuJCR1cGRhdGVFbXB0eUNsYXNzZXM9ZnVuY3Rpb24oYSl7cC4kaXNFbXB0eShhKT8oZi5yZW1vdmVDbGFzcyhjLFwibmctbm90LWVtcHR5XCIpLGYuYWRkQ2xhc3MoYyxcIm5nLWVtcHR5XCIpKTooZi5yZW1vdmVDbGFzcyhjLFwibmctZW1wdHlcIiksZi5hZGRDbGFzcyhjLFwibmctbm90LWVtcHR5XCIpKX07dmFyIHk9MDtKZCh7Y3RybDp0aGlzLCRlbGVtZW50OmMsc2V0OmZ1bmN0aW9uKGEsYil7YVtiXT0hMH0sdW5zZXQ6ZnVuY3Rpb24oYSxiKXtkZWxldGUgYVtiXX0sJGFuaW1hdGU6Zn0pO3RoaXMuJHNldFByaXN0aW5lPWZ1bmN0aW9uKCl7cC4kZGlydHk9ITE7cC4kcHJpc3RpbmU9ITA7Zi5yZW1vdmVDbGFzcyhjLFxyXG5MYik7Zi5hZGRDbGFzcyhjLFlhKX07dGhpcy4kc2V0RGlydHk9ZnVuY3Rpb24oKXtwLiRkaXJ0eT0hMDtwLiRwcmlzdGluZT0hMTtmLnJlbW92ZUNsYXNzKGMsWWEpO2YuYWRkQ2xhc3MoYyxMYik7cC4kJHBhcmVudEZvcm0uJHNldERpcnR5KCl9O3RoaXMuJHNldFVudG91Y2hlZD1mdW5jdGlvbigpe3AuJHRvdWNoZWQ9ITE7cC4kdW50b3VjaGVkPSEwO2Yuc2V0Q2xhc3MoYyxcIm5nLXVudG91Y2hlZFwiLFwibmctdG91Y2hlZFwiKX07dGhpcy4kc2V0VG91Y2hlZD1mdW5jdGlvbigpe3AuJHRvdWNoZWQ9ITA7cC4kdW50b3VjaGVkPSExO2Yuc2V0Q2xhc3MoYyxcIm5nLXRvdWNoZWRcIixcIm5nLXVudG91Y2hlZFwiKX07dGhpcy4kcm9sbGJhY2tWaWV3VmFsdWU9ZnVuY3Rpb24oKXtnLmNhbmNlbChBKTtwLiR2aWV3VmFsdWU9cC4kJGxhc3RDb21taXR0ZWRWaWV3VmFsdWU7cC4kcmVuZGVyKCl9O3RoaXMuJHZhbGlkYXRlPWZ1bmN0aW9uKCl7aWYoIVUocC4kbW9kZWxWYWx1ZSl8fCFpc05hTihwLiRtb2RlbFZhbHVlKSl7dmFyIGE9XHJcbnAuJCRyYXdNb2RlbFZhbHVlLGI9cC4kdmFsaWQsYz1wLiRtb2RlbFZhbHVlLGQ9cC4kb3B0aW9ucyYmcC4kb3B0aW9ucy5hbGxvd0ludmFsaWQ7cC4kJHJ1blZhbGlkYXRvcnMoYSxwLiQkbGFzdENvbW1pdHRlZFZpZXdWYWx1ZSxmdW5jdGlvbihlKXtkfHxiPT09ZXx8KHAuJG1vZGVsVmFsdWU9ZT9hOnUscC4kbW9kZWxWYWx1ZSE9PWMmJnAuJCR3cml0ZU1vZGVsVG9TY29wZSgpKX0pfX07dGhpcy4kJHJ1blZhbGlkYXRvcnM9ZnVuY3Rpb24oYSxiLGMpe2Z1bmN0aW9uIGQoKXt2YXIgYz0hMDtuKHAuJHZhbGlkYXRvcnMsZnVuY3Rpb24oZCxlKXt2YXIgZz1kKGEsYik7Yz1jJiZnO2YoZSxnKX0pO3JldHVybiBjPyEwOihuKHAuJGFzeW5jVmFsaWRhdG9ycyxmdW5jdGlvbihhLGIpe2YoYixudWxsKX0pLCExKX1mdW5jdGlvbiBlKCl7dmFyIGM9W10sZD0hMDtuKHAuJGFzeW5jVmFsaWRhdG9ycyxmdW5jdGlvbihlLGcpe3ZhciBoPWUoYSxiKTtpZighaHx8IUQoaC50aGVuKSl0aHJvdyBuYihcIiRhc3luY1ZhbGlkYXRvcnNcIixcclxuaCk7ZihnLHUpO2MucHVzaChoLnRoZW4oZnVuY3Rpb24oKXtmKGcsITApfSxmdW5jdGlvbihhKXtkPSExO2YoZywhMSl9KSl9KTtjLmxlbmd0aD9rLmFsbChjKS50aGVuKGZ1bmN0aW9uKCl7ZyhkKX0sdyk6ZyghMCl9ZnVuY3Rpb24gZihhLGIpe2g9PT15JiZwLiRzZXRWYWxpZGl0eShhLGIpfWZ1bmN0aW9uIGcoYSl7aD09PXkmJmMoYSl9eSsrO3ZhciBoPXk7KGZ1bmN0aW9uKCl7dmFyIGE9cC4kJHBhcnNlck5hbWV8fFwicGFyc2VcIjtpZih4KHQpKWYoYSxudWxsKTtlbHNlIHJldHVybiB0fHwobihwLiR2YWxpZGF0b3JzLGZ1bmN0aW9uKGEsYil7ZihiLG51bGwpfSksbihwLiRhc3luY1ZhbGlkYXRvcnMsZnVuY3Rpb24oYSxiKXtmKGIsbnVsbCl9KSksZihhLHQpLHQ7cmV0dXJuITB9KSgpP2QoKT9lKCk6ZyghMSk6ZyghMSl9O3RoaXMuJGNvbW1pdFZpZXdWYWx1ZT1mdW5jdGlvbigpe3ZhciBhPXAuJHZpZXdWYWx1ZTtnLmNhbmNlbChBKTtpZihwLiQkbGFzdENvbW1pdHRlZFZpZXdWYWx1ZSE9PVxyXG5hfHxcIlwiPT09YSYmcC4kJGhhc05hdGl2ZVZhbGlkYXRvcnMpcC4kJHVwZGF0ZUVtcHR5Q2xhc3NlcyhhKSxwLiQkbGFzdENvbW1pdHRlZFZpZXdWYWx1ZT1hLHAuJHByaXN0aW5lJiZ0aGlzLiRzZXREaXJ0eSgpLHRoaXMuJCRwYXJzZUFuZFZhbGlkYXRlKCl9O3RoaXMuJCRwYXJzZUFuZFZhbGlkYXRlPWZ1bmN0aW9uKCl7dmFyIGI9cC4kJGxhc3RDb21taXR0ZWRWaWV3VmFsdWU7aWYodD14KGIpP3U6ITApZm9yKHZhciBjPTA7YzxwLiRwYXJzZXJzLmxlbmd0aDtjKyspaWYoYj1wLiRwYXJzZXJzW2NdKGIpLHgoYikpe3Q9ITE7YnJlYWt9VShwLiRtb2RlbFZhbHVlKSYmaXNOYU4ocC4kbW9kZWxWYWx1ZSkmJihwLiRtb2RlbFZhbHVlPXIoYSkpO3ZhciBkPXAuJG1vZGVsVmFsdWUsZT1wLiRvcHRpb25zJiZwLiRvcHRpb25zLmFsbG93SW52YWxpZDtwLiQkcmF3TW9kZWxWYWx1ZT1iO2UmJihwLiRtb2RlbFZhbHVlPWIscC4kbW9kZWxWYWx1ZSE9PWQmJnAuJCR3cml0ZU1vZGVsVG9TY29wZSgpKTtcclxucC4kJHJ1blZhbGlkYXRvcnMoYixwLiQkbGFzdENvbW1pdHRlZFZpZXdWYWx1ZSxmdW5jdGlvbihhKXtlfHwocC4kbW9kZWxWYWx1ZT1hP2I6dSxwLiRtb2RlbFZhbHVlIT09ZCYmcC4kJHdyaXRlTW9kZWxUb1Njb3BlKCkpfSl9O3RoaXMuJCR3cml0ZU1vZGVsVG9TY29wZT1mdW5jdGlvbigpe3EoYSxwLiRtb2RlbFZhbHVlKTtuKHAuJHZpZXdDaGFuZ2VMaXN0ZW5lcnMsZnVuY3Rpb24oYSl7dHJ5e2EoKX1jYXRjaChjKXtiKGMpfX0pfTt0aGlzLiRzZXRWaWV3VmFsdWU9ZnVuY3Rpb24oYSxiKXtwLiR2aWV3VmFsdWU9YTtwLiRvcHRpb25zJiYhcC4kb3B0aW9ucy51cGRhdGVPbkRlZmF1bHR8fHAuJCRkZWJvdW5jZVZpZXdWYWx1ZUNvbW1pdChiKX07dGhpcy4kJGRlYm91bmNlVmlld1ZhbHVlQ29tbWl0PWZ1bmN0aW9uKGIpe3ZhciBjPTAsZD1wLiRvcHRpb25zO2QmJnooZC5kZWJvdW5jZSkmJihkPWQuZGVib3VuY2UsVShkKT9jPWQ6VShkW2JdKT9jPWRbYl06VShkW1wiZGVmYXVsdFwiXSkmJlxyXG4oYz1kW1wiZGVmYXVsdFwiXSkpO2cuY2FuY2VsKEEpO2M/QT1nKGZ1bmN0aW9uKCl7cC4kY29tbWl0Vmlld1ZhbHVlKCl9LGMpOmguJCRwaGFzZT9wLiRjb21taXRWaWV3VmFsdWUoKTphLiRhcHBseShmdW5jdGlvbigpe3AuJGNvbW1pdFZpZXdWYWx1ZSgpfSl9O2EuJHdhdGNoKGZ1bmN0aW9uKCl7dmFyIGI9cihhKTtpZihiIT09cC4kbW9kZWxWYWx1ZSYmKHAuJG1vZGVsVmFsdWU9PT1wLiRtb2RlbFZhbHVlfHxiPT09Yikpe3AuJG1vZGVsVmFsdWU9cC4kJHJhd01vZGVsVmFsdWU9Yjt0PXU7Zm9yKHZhciBjPXAuJGZvcm1hdHRlcnMsZD1jLmxlbmd0aCxlPWI7ZC0tOyllPWNbZF0oZSk7cC4kdmlld1ZhbHVlIT09ZSYmKHAuJCR1cGRhdGVFbXB0eUNsYXNzZXMoZSkscC4kdmlld1ZhbHVlPXAuJCRsYXN0Q29tbWl0dGVkVmlld1ZhbHVlPWUscC4kcmVuZGVyKCkscC4kJHJ1blZhbGlkYXRvcnMoYixlLHcpKX1yZXR1cm4gYn0pfV0sTmU9W1wiJHJvb3RTY29wZVwiLGZ1bmN0aW9uKGEpe3JldHVybntyZXN0cmljdDpcIkFcIixcclxucmVxdWlyZTpbXCJuZ01vZGVsXCIsXCJeP2Zvcm1cIixcIl4/bmdNb2RlbE9wdGlvbnNcIl0sY29udHJvbGxlcjpIZyxwcmlvcml0eToxLGNvbXBpbGU6ZnVuY3Rpb24oYil7Yi5hZGRDbGFzcyhZYSkuYWRkQ2xhc3MoXCJuZy11bnRvdWNoZWRcIikuYWRkQ2xhc3Mob2IpO3JldHVybntwcmU6ZnVuY3Rpb24oYSxiLGUsZil7dmFyIGc9ZlswXTtiPWZbMV18fGcuJCRwYXJlbnRGb3JtO2cuJCRzZXRPcHRpb25zKGZbMl0mJmZbMl0uJG9wdGlvbnMpO2IuJGFkZENvbnRyb2woZyk7ZS4kb2JzZXJ2ZShcIm5hbWVcIixmdW5jdGlvbihhKXtnLiRuYW1lIT09YSYmZy4kJHBhcmVudEZvcm0uJCRyZW5hbWVDb250cm9sKGcsYSl9KTthLiRvbihcIiRkZXN0cm95XCIsZnVuY3Rpb24oKXtnLiQkcGFyZW50Rm9ybS4kcmVtb3ZlQ29udHJvbChnKX0pfSxwb3N0OmZ1bmN0aW9uKGIsYyxlLGYpe3ZhciBnPWZbMF07aWYoZy4kb3B0aW9ucyYmZy4kb3B0aW9ucy51cGRhdGVPbiljLm9uKGcuJG9wdGlvbnMudXBkYXRlT24sXHJcbmZ1bmN0aW9uKGEpe2cuJCRkZWJvdW5jZVZpZXdWYWx1ZUNvbW1pdChhJiZhLnR5cGUpfSk7Yy5vbihcImJsdXJcIixmdW5jdGlvbihjKXtnLiR0b3VjaGVkfHwoYS4kJHBoYXNlP2IuJGV2YWxBc3luYyhnLiRzZXRUb3VjaGVkKTpiLiRhcHBseShnLiRzZXRUb3VjaGVkKSl9KX19fX19XSxJZz0vKFxccyt8XilkZWZhdWx0KFxccyt8JCkvLFJlPWZ1bmN0aW9uKCl7cmV0dXJue3Jlc3RyaWN0OlwiQVwiLGNvbnRyb2xsZXI6W1wiJHNjb3BlXCIsXCIkYXR0cnNcIixmdW5jdGlvbihhLGIpe3ZhciBkPXRoaXM7dGhpcy4kb3B0aW9ucz1QYShhLiRldmFsKGIubmdNb2RlbE9wdGlvbnMpKTt6KHRoaXMuJG9wdGlvbnMudXBkYXRlT24pPyh0aGlzLiRvcHRpb25zLnVwZGF0ZU9uRGVmYXVsdD0hMSx0aGlzLiRvcHRpb25zLnVwZGF0ZU9uPVkodGhpcy4kb3B0aW9ucy51cGRhdGVPbi5yZXBsYWNlKElnLGZ1bmN0aW9uKCl7ZC4kb3B0aW9ucy51cGRhdGVPbkRlZmF1bHQ9ITA7cmV0dXJuXCIgXCJ9KSkpOnRoaXMuJG9wdGlvbnMudXBkYXRlT25EZWZhdWx0PVxyXG4hMH1dfX0sRGU9TmEoe3Rlcm1pbmFsOiEwLHByaW9yaXR5OjFFM30pLEpnPVAoXCJuZ09wdGlvbnNcIiksS2c9L15cXHMqKFtcXHNcXFNdKz8pKD86XFxzK2FzXFxzKyhbXFxzXFxTXSs/KSk/KD86XFxzK2dyb3VwXFxzK2J5XFxzKyhbXFxzXFxTXSs/KSk/KD86XFxzK2Rpc2FibGVcXHMrd2hlblxccysoW1xcc1xcU10rPykpP1xccytmb3JcXHMrKD86KFtcXCRcXHddW1xcJFxcd10qKXwoPzpcXChcXHMqKFtcXCRcXHddW1xcJFxcd10qKVxccyosXFxzKihbXFwkXFx3XVtcXCRcXHddKilcXHMqXFwpKSlcXHMraW5cXHMrKFtcXHNcXFNdKz8pKD86XFxzK3RyYWNrXFxzK2J5XFxzKyhbXFxzXFxTXSs/KSk/JC8sTGU9W1wiJGNvbXBpbGVcIixcIiRwYXJzZVwiLGZ1bmN0aW9uKGEsYil7ZnVuY3Rpb24gZChhLGMsZCl7ZnVuY3Rpb24gZShhLGIsYyxkLGYpe3RoaXMuc2VsZWN0VmFsdWU9YTt0aGlzLnZpZXdWYWx1ZT1iO3RoaXMubGFiZWw9Yzt0aGlzLmdyb3VwPWQ7dGhpcy5kaXNhYmxlZD1mfWZ1bmN0aW9uIGwoYSl7dmFyIGI7aWYoIXImJkNhKGEpKWI9YTtlbHNle2I9W107XHJcbmZvcih2YXIgYyBpbiBhKWEuaGFzT3duUHJvcGVydHkoYykmJlwiJFwiIT09Yy5jaGFyQXQoMCkmJmIucHVzaChjKX1yZXR1cm4gYn12YXIgbT1hLm1hdGNoKEtnKTtpZighbSl0aHJvdyBKZyhcImlleHBcIixhLHVhKGMpKTt2YXIgbj1tWzVdfHxtWzddLHI9bVs2XTthPS8gYXMgLy50ZXN0KG1bMF0pJiZtWzFdO3ZhciBxPW1bOV07Yz1iKG1bMl0/bVsxXTpuKTt2YXIgdT1hJiZiKGEpfHxjLHQ9cSYmYihxKSxwPXE/ZnVuY3Rpb24oYSxiKXtyZXR1cm4gdChkLGIpfTpmdW5jdGlvbihhKXtyZXR1cm4gRmEoYSl9LHk9ZnVuY3Rpb24oYSxiKXtyZXR1cm4gcChhLEEoYSxiKSl9LHY9YihtWzJdfHxtWzFdKSx6PWIobVszXXx8XCJcIiksdz1iKG1bNF18fFwiXCIpLEY9YihtWzhdKSx4PXt9LEE9cj9mdW5jdGlvbihhLGIpe3hbcl09Yjt4W25dPWE7cmV0dXJuIHh9OmZ1bmN0aW9uKGEpe3hbbl09YTtyZXR1cm4geH07cmV0dXJue3RyYWNrQnk6cSxnZXRUcmFja0J5VmFsdWU6eSxnZXRXYXRjaGFibGVzOmIoRixcclxuZnVuY3Rpb24oYSl7dmFyIGI9W107YT1hfHxbXTtmb3IodmFyIGM9bChhKSxlPWMubGVuZ3RoLGY9MDtmPGU7ZisrKXt2YXIgZz1hPT09Yz9mOmNbZl0saz1BKGFbZ10sZyksZz1wKGFbZ10sayk7Yi5wdXNoKGcpO2lmKG1bMl18fG1bMV0pZz12KGQsayksYi5wdXNoKGcpO21bNF0mJihrPXcoZCxrKSxiLnB1c2goaykpfXJldHVybiBifSksZ2V0T3B0aW9uczpmdW5jdGlvbigpe2Zvcih2YXIgYT1bXSxiPXt9LGM9RihkKXx8W10sZj1sKGMpLGc9Zi5sZW5ndGgsbT0wO208ZzttKyspe3ZhciBuPWM9PT1mP206ZlttXSxyPUEoY1tuXSxuKSxzPXUoZCxyKSxuPXAocyxyKSx0PXYoZCxyKSx4PXooZCxyKSxyPXcoZCxyKSxzPW5ldyBlKG4scyx0LHgscik7YS5wdXNoKHMpO2Jbbl09c31yZXR1cm57aXRlbXM6YSxzZWxlY3RWYWx1ZU1hcDpiLGdldE9wdGlvbkZyb21WaWV3VmFsdWU6ZnVuY3Rpb24oYSl7cmV0dXJuIGJbeShhKV19LGdldFZpZXdWYWx1ZUZyb21PcHRpb246ZnVuY3Rpb24oYSl7cmV0dXJuIHE/XHJcbiQuY29weShhLnZpZXdWYWx1ZSk6YS52aWV3VmFsdWV9fX19fXZhciBjPVouY3JlYXRlRWxlbWVudChcIm9wdGlvblwiKSxlPVouY3JlYXRlRWxlbWVudChcIm9wdGdyb3VwXCIpO3JldHVybntyZXN0cmljdDpcIkFcIix0ZXJtaW5hbDohMCxyZXF1aXJlOltcInNlbGVjdFwiLFwibmdNb2RlbFwiXSxsaW5rOntwcmU6ZnVuY3Rpb24oYSxiLGMsZCl7ZFswXS5yZWdpc3Rlck9wdGlvbj13fSxwb3N0OmZ1bmN0aW9uKGIsZyxoLGspe2Z1bmN0aW9uIGwoYSxiKXthLmVsZW1lbnQ9YjtiLmRpc2FibGVkPWEuZGlzYWJsZWQ7YS5sYWJlbCE9PWIubGFiZWwmJihiLmxhYmVsPWEubGFiZWwsYi50ZXh0Q29udGVudD1hLmxhYmVsKTthLnZhbHVlIT09Yi52YWx1ZSYmKGIudmFsdWU9YS5zZWxlY3RWYWx1ZSl9ZnVuY3Rpb24gbShhLGIsYyxkKXtiJiZIKGIubm9kZU5hbWUpPT09Yz9jPWI6KGM9ZC5jbG9uZU5vZGUoITEpLGI/YS5pbnNlcnRCZWZvcmUoYyxiKTphLmFwcGVuZENoaWxkKGMpKTtyZXR1cm4gY31mdW5jdGlvbiBxKGEpe2Zvcih2YXIgYjthOyliPVxyXG5hLm5leHRTaWJsaW5nLFliKGEpLGE9Yn1mdW5jdGlvbiByKGEpe3ZhciBiPXkmJnlbMF0sYz1GJiZGWzBdO2lmKGJ8fGMpZm9yKDthJiYoYT09PWJ8fGE9PT1jfHw4PT09YS5ub2RlVHlwZXx8XCJcIj09PWEudmFsdWUpOylhPWEubmV4dFNpYmxpbmc7cmV0dXJuIGF9ZnVuY3Rpb24gdSgpe3ZhciBhPUMmJngucmVhZFZhbHVlKCk7Qz1ELmdldE9wdGlvbnMoKTt2YXIgYj17fSxkPWdbMF0uZmlyc3RDaGlsZDtNJiZnLnByZXBlbmQoeSk7ZD1yKGQpO0MuaXRlbXMuZm9yRWFjaChmdW5jdGlvbihhKXt2YXIgZixoO3ooYS5ncm91cCk/KGY9YlthLmdyb3VwXSxmfHwoZj1tKGdbMF0sZCxcIm9wdGdyb3VwXCIsZSksZD1mLm5leHRTaWJsaW5nLGYubGFiZWw9YS5ncm91cCxmPWJbYS5ncm91cF09e2dyb3VwRWxlbWVudDpmLGN1cnJlbnRPcHRpb25FbGVtZW50OmYuZmlyc3RDaGlsZH0pLGg9bShmLmdyb3VwRWxlbWVudCxmLmN1cnJlbnRPcHRpb25FbGVtZW50LFwib3B0aW9uXCIsYyksbChhLGgpLGYuY3VycmVudE9wdGlvbkVsZW1lbnQ9XHJcbmgubmV4dFNpYmxpbmcpOihoPW0oZ1swXSxkLFwib3B0aW9uXCIsYyksbChhLGgpLGQ9aC5uZXh0U2libGluZyl9KTtPYmplY3Qua2V5cyhiKS5mb3JFYWNoKGZ1bmN0aW9uKGEpe3EoYlthXS5jdXJyZW50T3B0aW9uRWxlbWVudCl9KTtxKGQpO3QuJHJlbmRlcigpO2lmKCF0LiRpc0VtcHR5KGEpKXt2YXIgZj14LnJlYWRWYWx1ZSgpOyhELnRyYWNrQnl8fHA/bGEoYSxmKTphPT09Zil8fCh0LiRzZXRWaWV3VmFsdWUoZiksdC4kcmVuZGVyKCkpfX12YXIgeD1rWzBdLHQ9a1sxXSxwPWgubXVsdGlwbGUseTtrPTA7Zm9yKHZhciB2PWcuY2hpbGRyZW4oKSx3PXYubGVuZ3RoO2s8dztrKyspaWYoXCJcIj09PXZba10udmFsdWUpe3k9di5lcShrKTticmVha312YXIgTT0hIXksRj1BKGMuY2xvbmVOb2RlKCExKSk7Ri52YWwoXCI/XCIpO3ZhciBDLEQ9ZChoLm5nT3B0aW9ucyxnLGIpO3A/KHQuJGlzRW1wdHk9ZnVuY3Rpb24oYSl7cmV0dXJuIWF8fDA9PT1hLmxlbmd0aH0seC53cml0ZVZhbHVlPWZ1bmN0aW9uKGEpe0MuaXRlbXMuZm9yRWFjaChmdW5jdGlvbihhKXthLmVsZW1lbnQuc2VsZWN0ZWQ9XHJcbiExfSk7YSYmYS5mb3JFYWNoKGZ1bmN0aW9uKGEpeyhhPUMuZ2V0T3B0aW9uRnJvbVZpZXdWYWx1ZShhKSkmJiFhLmRpc2FibGVkJiYoYS5lbGVtZW50LnNlbGVjdGVkPSEwKX0pfSx4LnJlYWRWYWx1ZT1mdW5jdGlvbigpe3ZhciBhPWcudmFsKCl8fFtdLGI9W107bihhLGZ1bmN0aW9uKGEpeyhhPUMuc2VsZWN0VmFsdWVNYXBbYV0pJiYhYS5kaXNhYmxlZCYmYi5wdXNoKEMuZ2V0Vmlld1ZhbHVlRnJvbU9wdGlvbihhKSl9KTtyZXR1cm4gYn0sRC50cmFja0J5JiZiLiR3YXRjaENvbGxlY3Rpb24oZnVuY3Rpb24oKXtpZihLKHQuJHZpZXdWYWx1ZSkpcmV0dXJuIHQuJHZpZXdWYWx1ZS5tYXAoZnVuY3Rpb24oYSl7cmV0dXJuIEQuZ2V0VHJhY2tCeVZhbHVlKGEpfSl9LGZ1bmN0aW9uKCl7dC4kcmVuZGVyKCl9KSk6KHgud3JpdGVWYWx1ZT1mdW5jdGlvbihhKXt2YXIgYj1DLmdldE9wdGlvbkZyb21WaWV3VmFsdWUoYSk7YiYmIWIuZGlzYWJsZWQ/Z1swXS52YWx1ZSE9PWIuc2VsZWN0VmFsdWUmJlxyXG4oRi5yZW1vdmUoKSxNfHx5LnJlbW92ZSgpLGdbMF0udmFsdWU9Yi5zZWxlY3RWYWx1ZSxiLmVsZW1lbnQuc2VsZWN0ZWQ9ITAsYi5lbGVtZW50LnNldEF0dHJpYnV0ZShcInNlbGVjdGVkXCIsXCJzZWxlY3RlZFwiKSk6bnVsbD09PWF8fE0/KEYucmVtb3ZlKCksTXx8Zy5wcmVwZW5kKHkpLGcudmFsKFwiXCIpLHkucHJvcChcInNlbGVjdGVkXCIsITApLHkuYXR0cihcInNlbGVjdGVkXCIsITApKTooTXx8eS5yZW1vdmUoKSxnLnByZXBlbmQoRiksZy52YWwoXCI/XCIpLEYucHJvcChcInNlbGVjdGVkXCIsITApLEYuYXR0cihcInNlbGVjdGVkXCIsITApKX0seC5yZWFkVmFsdWU9ZnVuY3Rpb24oKXt2YXIgYT1DLnNlbGVjdFZhbHVlTWFwW2cudmFsKCldO3JldHVybiBhJiYhYS5kaXNhYmxlZD8oTXx8eS5yZW1vdmUoKSxGLnJlbW92ZSgpLEMuZ2V0Vmlld1ZhbHVlRnJvbU9wdGlvbihhKSk6bnVsbH0sRC50cmFja0J5JiZiLiR3YXRjaChmdW5jdGlvbigpe3JldHVybiBELmdldFRyYWNrQnlWYWx1ZSh0LiR2aWV3VmFsdWUpfSxcclxuZnVuY3Rpb24oKXt0LiRyZW5kZXIoKX0pKTtNPyh5LnJlbW92ZSgpLGEoeSkoYikseS5yZW1vdmVDbGFzcyhcIm5nLXNjb3BlXCIpKTp5PUEoYy5jbG9uZU5vZGUoITEpKTt1KCk7Yi4kd2F0Y2hDb2xsZWN0aW9uKEQuZ2V0V2F0Y2hhYmxlcyx1KX19fX1dLEVlPVtcIiRsb2NhbGVcIixcIiRpbnRlcnBvbGF0ZVwiLFwiJGxvZ1wiLGZ1bmN0aW9uKGEsYixkKXt2YXIgYz0ve30vZyxlPS9ed2hlbihNaW51cyk/KC4rKSQvO3JldHVybntsaW5rOmZ1bmN0aW9uKGYsZyxoKXtmdW5jdGlvbiBrKGEpe2cudGV4dChhfHxcIlwiKX12YXIgbD1oLmNvdW50LG09aC4kYXR0ci53aGVuJiZnLmF0dHIoaC4kYXR0ci53aGVuKSxxPWgub2Zmc2V0fHwwLHI9Zi4kZXZhbChtKXx8e30sdT17fSx6PWIuc3RhcnRTeW1ib2woKSx0PWIuZW5kU3ltYm9sKCkscD16K2wrXCItXCIrcSt0LHk9JC5ub29wLHY7bihoLGZ1bmN0aW9uKGEsYil7dmFyIGM9ZS5leGVjKGIpO2MmJihjPShjWzFdP1wiLVwiOlwiXCIpK0goY1syXSkscltjXT1nLmF0dHIoaC4kYXR0cltiXSkpfSk7XHJcbm4ocixmdW5jdGlvbihhLGQpe3VbZF09YihhLnJlcGxhY2UoYyxwKSl9KTtmLiR3YXRjaChsLGZ1bmN0aW9uKGIpe3ZhciBjPXBhcnNlRmxvYXQoYiksZT1pc05hTihjKTtlfHxjIGluIHJ8fChjPWEucGx1cmFsQ2F0KGMtcSkpO2M9PT12fHxlJiZVKHYpJiZpc05hTih2KXx8KHkoKSxlPXVbY10seChlKT8obnVsbCE9YiYmZC5kZWJ1ZyhcIm5nUGx1cmFsaXplOiBubyBydWxlIGRlZmluZWQgZm9yICdcIitjK1wiJyBpbiBcIittKSx5PXcsaygpKTp5PWYuJHdhdGNoKGUsayksdj1jKX0pfX19XSxGZT1bXCIkcGFyc2VcIixcIiRhbmltYXRlXCIsZnVuY3Rpb24oYSxiKXt2YXIgZD1QKFwibmdSZXBlYXRcIiksYz1mdW5jdGlvbihhLGIsYyxkLGssbCxtKXthW2NdPWQ7ayYmKGFba109bCk7YS4kaW5kZXg9YjthLiRmaXJzdD0wPT09YjthLiRsYXN0PWI9PT1tLTE7YS4kbWlkZGxlPSEoYS4kZmlyc3R8fGEuJGxhc3QpO2EuJG9kZD0hKGEuJGV2ZW49MD09PShiJjEpKX07cmV0dXJue3Jlc3RyaWN0OlwiQVwiLFxyXG5tdWx0aUVsZW1lbnQ6ITAsdHJhbnNjbHVkZTpcImVsZW1lbnRcIixwcmlvcml0eToxRTMsdGVybWluYWw6ITAsJCR0bGI6ITAsY29tcGlsZTpmdW5jdGlvbihlLGYpe3ZhciBnPWYubmdSZXBlYXQsaD1aLmNyZWF0ZUNvbW1lbnQoXCIgZW5kIG5nUmVwZWF0OiBcIitnK1wiIFwiKSxrPWcubWF0Y2goL15cXHMqKFtcXHNcXFNdKz8pXFxzK2luXFxzKyhbXFxzXFxTXSs/KSg/Olxccythc1xccysoW1xcc1xcU10rPykpPyg/Olxccyt0cmFja1xccytieVxccysoW1xcc1xcU10rPykpP1xccyokLyk7aWYoIWspdGhyb3cgZChcImlleHBcIixnKTt2YXIgbD1rWzFdLG09a1syXSxxPWtbM10scj1rWzRdLGs9bC5tYXRjaCgvXig/OihcXHMqW1xcJFxcd10rKXxcXChcXHMqKFtcXCRcXHddKylcXHMqLFxccyooW1xcJFxcd10rKVxccypcXCkpJC8pO2lmKCFrKXRocm93IGQoXCJpaWRleHBcIixsKTt2YXIgeD1rWzNdfHxrWzFdLHo9a1syXTtpZihxJiYoIS9eWyRhLXpBLVpfXVskYS16QS1aMC05X10qJC8udGVzdChxKXx8L14obnVsbHx1bmRlZmluZWR8dGhpc3xcXCRpbmRleHxcXCRmaXJzdHxcXCRtaWRkbGV8XFwkbGFzdHxcXCRldmVufFxcJG9kZHxcXCRwYXJlbnR8XFwkcm9vdHxcXCRpZCkkLy50ZXN0KHEpKSl0aHJvdyBkKFwiYmFkaWRlbnRcIixcclxucSk7dmFyIHQscCx5LHYsdz17JGlkOkZhfTtyP3Q9YShyKTooeT1mdW5jdGlvbihhLGIpe3JldHVybiBGYShiKX0sdj1mdW5jdGlvbihhKXtyZXR1cm4gYX0pO3JldHVybiBmdW5jdGlvbihhLGUsZixrLGwpe3QmJihwPWZ1bmN0aW9uKGIsYyxkKXt6JiYod1t6XT1iKTt3W3hdPWM7dy4kaW5kZXg9ZDtyZXR1cm4gdChhLHcpfSk7dmFyIHI9WCgpO2EuJHdhdGNoQ29sbGVjdGlvbihtLGZ1bmN0aW9uKGYpe3ZhciBrLG0sdD1lWzBdLHcsRD1YKCksQyxHLEosRSxLLEgsTDtxJiYoYVtxXT1mKTtpZihDYShmKSlLPWYsbT1wfHx5O2Vsc2UgZm9yKEwgaW4gbT1wfHx2LEs9W10sZilxYS5jYWxsKGYsTCkmJlwiJFwiIT09TC5jaGFyQXQoMCkmJksucHVzaChMKTtDPUsubGVuZ3RoO0w9QXJyYXkoQyk7Zm9yKGs9MDtrPEM7aysrKWlmKEc9Zj09PUs/azpLW2tdLEo9ZltHXSxFPW0oRyxKLGspLHJbRV0pSD1yW0VdLGRlbGV0ZSByW0VdLERbRV09SCxMW2tdPUg7ZWxzZXtpZihEW0VdKXRocm93IG4oTCxcclxuZnVuY3Rpb24oYSl7YSYmYS5zY29wZSYmKHJbYS5pZF09YSl9KSxkKFwiZHVwZXNcIixnLEUsSik7TFtrXT17aWQ6RSxzY29wZTp1LGNsb25lOnV9O0RbRV09ITB9Zm9yKHcgaW4gcil7SD1yW3ddO0U9dGIoSC5jbG9uZSk7Yi5sZWF2ZShFKTtpZihFWzBdLnBhcmVudE5vZGUpZm9yKGs9MCxtPUUubGVuZ3RoO2s8bTtrKyspRVtrXS4kJE5HX1JFTU9WRUQ9ITA7SC5zY29wZS4kZGVzdHJveSgpfWZvcihrPTA7azxDO2srKylpZihHPWY9PT1LP2s6S1trXSxKPWZbR10sSD1MW2tdLEguc2NvcGUpe3c9dDtkbyB3PXcubmV4dFNpYmxpbmc7d2hpbGUodyYmdy4kJE5HX1JFTU9WRUQpO0guY2xvbmVbMF0hPXcmJmIubW92ZSh0YihILmNsb25lKSxudWxsLEEodCkpO3Q9SC5jbG9uZVtILmNsb25lLmxlbmd0aC0xXTtjKEguc2NvcGUsayx4LEoseixHLEMpfWVsc2UgbChmdW5jdGlvbihhLGQpe0guc2NvcGU9ZDt2YXIgZT1oLmNsb25lTm9kZSghMSk7YVthLmxlbmd0aCsrXT1lO2IuZW50ZXIoYSxcclxubnVsbCxBKHQpKTt0PWU7SC5jbG9uZT1hO0RbSC5pZF09SDtjKEguc2NvcGUsayx4LEoseixHLEMpfSk7cj1EfSl9fX19XSxHZT1bXCIkYW5pbWF0ZVwiLGZ1bmN0aW9uKGEpe3JldHVybntyZXN0cmljdDpcIkFcIixtdWx0aUVsZW1lbnQ6ITAsbGluazpmdW5jdGlvbihiLGQsYyl7Yi4kd2F0Y2goYy5uZ1Nob3csZnVuY3Rpb24oYil7YVtiP1wicmVtb3ZlQ2xhc3NcIjpcImFkZENsYXNzXCJdKGQsXCJuZy1oaWRlXCIse3RlbXBDbGFzc2VzOlwibmctaGlkZS1hbmltYXRlXCJ9KX0pfX19XSx6ZT1bXCIkYW5pbWF0ZVwiLGZ1bmN0aW9uKGEpe3JldHVybntyZXN0cmljdDpcIkFcIixtdWx0aUVsZW1lbnQ6ITAsbGluazpmdW5jdGlvbihiLGQsYyl7Yi4kd2F0Y2goYy5uZ0hpZGUsZnVuY3Rpb24oYil7YVtiP1wiYWRkQ2xhc3NcIjpcInJlbW92ZUNsYXNzXCJdKGQsXCJuZy1oaWRlXCIse3RlbXBDbGFzc2VzOlwibmctaGlkZS1hbmltYXRlXCJ9KX0pfX19XSxIZT1OYShmdW5jdGlvbihhLGIsZCl7YS4kd2F0Y2goZC5uZ1N0eWxlLFxyXG5mdW5jdGlvbihhLGQpe2QmJmEhPT1kJiZuKGQsZnVuY3Rpb24oYSxjKXtiLmNzcyhjLFwiXCIpfSk7YSYmYi5jc3MoYSl9LCEwKX0pLEllPVtcIiRhbmltYXRlXCIsZnVuY3Rpb24oYSl7cmV0dXJue3JlcXVpcmU6XCJuZ1N3aXRjaFwiLGNvbnRyb2xsZXI6W1wiJHNjb3BlXCIsZnVuY3Rpb24oKXt0aGlzLmNhc2VzPXt9fV0sbGluazpmdW5jdGlvbihiLGQsYyxlKXt2YXIgZj1bXSxnPVtdLGg9W10saz1bXSxsPWZ1bmN0aW9uKGEsYil7cmV0dXJuIGZ1bmN0aW9uKCl7YS5zcGxpY2UoYiwxKX19O2IuJHdhdGNoKGMubmdTd2l0Y2h8fGMub24sZnVuY3Rpb24oYil7dmFyIGMsZDtjPTA7Zm9yKGQ9aC5sZW5ndGg7YzxkOysrYylhLmNhbmNlbChoW2NdKTtjPWgubGVuZ3RoPTA7Zm9yKGQ9ay5sZW5ndGg7YzxkOysrYyl7dmFyIHE9dGIoZ1tjXS5jbG9uZSk7a1tjXS4kZGVzdHJveSgpOyhoW2NdPWEubGVhdmUocSkpLnRoZW4obChoLGMpKX1nLmxlbmd0aD0wO2subGVuZ3RoPTA7KGY9ZS5jYXNlc1tcIiFcIitcclxuYl18fGUuY2FzZXNbXCI/XCJdKSYmbihmLGZ1bmN0aW9uKGIpe2IudHJhbnNjbHVkZShmdW5jdGlvbihjLGQpe2sucHVzaChkKTt2YXIgZT1iLmVsZW1lbnQ7Y1tjLmxlbmd0aCsrXT1aLmNyZWF0ZUNvbW1lbnQoXCIgZW5kIG5nU3dpdGNoV2hlbjogXCIpO2cucHVzaCh7Y2xvbmU6Y30pO2EuZW50ZXIoYyxlLnBhcmVudCgpLGUpfSl9KX0pfX19XSxKZT1OYSh7dHJhbnNjbHVkZTpcImVsZW1lbnRcIixwcmlvcml0eToxMjAwLHJlcXVpcmU6XCJebmdTd2l0Y2hcIixtdWx0aUVsZW1lbnQ6ITAsbGluazpmdW5jdGlvbihhLGIsZCxjLGUpe2MuY2FzZXNbXCIhXCIrZC5uZ1N3aXRjaFdoZW5dPWMuY2FzZXNbXCIhXCIrZC5uZ1N3aXRjaFdoZW5dfHxbXTtjLmNhc2VzW1wiIVwiK2QubmdTd2l0Y2hXaGVuXS5wdXNoKHt0cmFuc2NsdWRlOmUsZWxlbWVudDpifSl9fSksS2U9TmEoe3RyYW5zY2x1ZGU6XCJlbGVtZW50XCIscHJpb3JpdHk6MTIwMCxyZXF1aXJlOlwiXm5nU3dpdGNoXCIsbXVsdGlFbGVtZW50OiEwLGxpbms6ZnVuY3Rpb24oYSxcclxuYixkLGMsZSl7Yy5jYXNlc1tcIj9cIl09Yy5jYXNlc1tcIj9cIl18fFtdO2MuY2FzZXNbXCI/XCJdLnB1c2goe3RyYW5zY2x1ZGU6ZSxlbGVtZW50OmJ9KX19KSxMZz1QKFwibmdUcmFuc2NsdWRlXCIpLE1lPU5hKHtyZXN0cmljdDpcIkVBQ1wiLGxpbms6ZnVuY3Rpb24oYSxiLGQsYyxlKXtkLm5nVHJhbnNjbHVkZT09PWQuJGF0dHIubmdUcmFuc2NsdWRlJiYoZC5uZ1RyYW5zY2x1ZGU9XCJcIik7aWYoIWUpdGhyb3cgTGcoXCJvcnBoYW5cIix1YShiKSk7ZShmdW5jdGlvbihhKXthLmxlbmd0aCYmKGIuZW1wdHkoKSxiLmFwcGVuZChhKSl9LG51bGwsZC5uZ1RyYW5zY2x1ZGV8fGQubmdUcmFuc2NsdWRlU2xvdCl9fSksbWU9W1wiJHRlbXBsYXRlQ2FjaGVcIixmdW5jdGlvbihhKXtyZXR1cm57cmVzdHJpY3Q6XCJFXCIsdGVybWluYWw6ITAsY29tcGlsZTpmdW5jdGlvbihiLGQpe1widGV4dC9uZy10ZW1wbGF0ZVwiPT1kLnR5cGUmJmEucHV0KGQuaWQsYlswXS50ZXh0KX19fV0sTWc9eyRzZXRWaWV3VmFsdWU6dywkcmVuZGVyOnd9LFxyXG5OZz1bXCIkZWxlbWVudFwiLFwiJHNjb3BlXCIsXCIkYXR0cnNcIixmdW5jdGlvbihhLGIsZCl7dmFyIGM9dGhpcyxlPW5ldyBWYTtjLm5nTW9kZWxDdHJsPU1nO2MudW5rbm93bk9wdGlvbj1BKFouY3JlYXRlRWxlbWVudChcIm9wdGlvblwiKSk7Yy5yZW5kZXJVbmtub3duT3B0aW9uPWZ1bmN0aW9uKGIpe2I9XCI/IFwiK0ZhKGIpK1wiID9cIjtjLnVua25vd25PcHRpb24udmFsKGIpO2EucHJlcGVuZChjLnVua25vd25PcHRpb24pO2EudmFsKGIpfTtiLiRvbihcIiRkZXN0cm95XCIsZnVuY3Rpb24oKXtjLnJlbmRlclVua25vd25PcHRpb249d30pO2MucmVtb3ZlVW5rbm93bk9wdGlvbj1mdW5jdGlvbigpe2MudW5rbm93bk9wdGlvbi5wYXJlbnQoKSYmYy51bmtub3duT3B0aW9uLnJlbW92ZSgpfTtjLnJlYWRWYWx1ZT1mdW5jdGlvbigpe2MucmVtb3ZlVW5rbm93bk9wdGlvbigpO3JldHVybiBhLnZhbCgpfTtjLndyaXRlVmFsdWU9ZnVuY3Rpb24oYil7Yy5oYXNPcHRpb24oYik/KGMucmVtb3ZlVW5rbm93bk9wdGlvbigpLFxyXG5hLnZhbChiKSxcIlwiPT09YiYmYy5lbXB0eU9wdGlvbi5wcm9wKFwic2VsZWN0ZWRcIiwhMCkpOm51bGw9PWImJmMuZW1wdHlPcHRpb24/KGMucmVtb3ZlVW5rbm93bk9wdGlvbigpLGEudmFsKFwiXCIpKTpjLnJlbmRlclVua25vd25PcHRpb24oYil9O2MuYWRkT3B0aW9uPWZ1bmN0aW9uKGEsYil7VWEoYSwnXCJvcHRpb24gdmFsdWVcIicpO1wiXCI9PT1hJiYoYy5lbXB0eU9wdGlvbj1iKTt2YXIgZD1lLmdldChhKXx8MDtlLnB1dChhLGQrMSk7Yy5uZ01vZGVsQ3RybC4kcmVuZGVyKCk7YlswXS5oYXNBdHRyaWJ1dGUoXCJzZWxlY3RlZFwiKSYmKGJbMF0uc2VsZWN0ZWQ9ITApfTtjLnJlbW92ZU9wdGlvbj1mdW5jdGlvbihhKXt2YXIgYj1lLmdldChhKTtiJiYoMT09PWI/KGUucmVtb3ZlKGEpLFwiXCI9PT1hJiYoYy5lbXB0eU9wdGlvbj11KSk6ZS5wdXQoYSxiLTEpKX07Yy5oYXNPcHRpb249ZnVuY3Rpb24oYSl7cmV0dXJuISFlLmdldChhKX07Yy5yZWdpc3Rlck9wdGlvbj1mdW5jdGlvbihhLGIsZCxlLFxyXG5sKXtpZihlKXt2YXIgbTtkLiRvYnNlcnZlKFwidmFsdWVcIixmdW5jdGlvbihhKXt6KG0pJiZjLnJlbW92ZU9wdGlvbihtKTttPWE7Yy5hZGRPcHRpb24oYSxiKX0pfWVsc2UgbD9hLiR3YXRjaChsLGZ1bmN0aW9uKGEsZSl7ZC4kc2V0KFwidmFsdWVcIixhKTtlIT09YSYmYy5yZW1vdmVPcHRpb24oZSk7Yy5hZGRPcHRpb24oYSxiKX0pOmMuYWRkT3B0aW9uKGQudmFsdWUsYik7Yi5vbihcIiRkZXN0cm95XCIsZnVuY3Rpb24oKXtjLnJlbW92ZU9wdGlvbihkLnZhbHVlKTtjLm5nTW9kZWxDdHJsLiRyZW5kZXIoKX0pfX1dLG5lPWZ1bmN0aW9uKCl7cmV0dXJue3Jlc3RyaWN0OlwiRVwiLHJlcXVpcmU6W1wic2VsZWN0XCIsXCI/bmdNb2RlbFwiXSxjb250cm9sbGVyOk5nLHByaW9yaXR5OjEsbGluazp7cHJlOmZ1bmN0aW9uKGEsYixkLGMpe3ZhciBlPWNbMV07aWYoZSl7dmFyIGY9Y1swXTtmLm5nTW9kZWxDdHJsPWU7ZS4kcmVuZGVyPWZ1bmN0aW9uKCl7Zi53cml0ZVZhbHVlKGUuJHZpZXdWYWx1ZSl9O2Iub24oXCJjaGFuZ2VcIixcclxuZnVuY3Rpb24oKXthLiRhcHBseShmdW5jdGlvbigpe2UuJHNldFZpZXdWYWx1ZShmLnJlYWRWYWx1ZSgpKX0pfSk7aWYoZC5tdWx0aXBsZSl7Zi5yZWFkVmFsdWU9ZnVuY3Rpb24oKXt2YXIgYT1bXTtuKGIuZmluZChcIm9wdGlvblwiKSxmdW5jdGlvbihiKXtiLnNlbGVjdGVkJiZhLnB1c2goYi52YWx1ZSl9KTtyZXR1cm4gYX07Zi53cml0ZVZhbHVlPWZ1bmN0aW9uKGEpe3ZhciBjPW5ldyBWYShhKTtuKGIuZmluZChcIm9wdGlvblwiKSxmdW5jdGlvbihhKXthLnNlbGVjdGVkPXooYy5nZXQoYS52YWx1ZSkpfSl9O3ZhciBnLGg9TmFOO2EuJHdhdGNoKGZ1bmN0aW9uKCl7aCE9PWUuJHZpZXdWYWx1ZXx8bGEoZyxlLiR2aWV3VmFsdWUpfHwoZz1WKGUuJHZpZXdWYWx1ZSksZS4kcmVuZGVyKCkpO2g9ZS4kdmlld1ZhbHVlfSk7ZS4kaXNFbXB0eT1mdW5jdGlvbihhKXtyZXR1cm4hYXx8MD09PWEubGVuZ3RofX19fX19fSxwZT1bXCIkaW50ZXJwb2xhdGVcIixmdW5jdGlvbihhKXtyZXR1cm57cmVzdHJpY3Q6XCJFXCIsXHJcbnByaW9yaXR5OjEwMCxjb21waWxlOmZ1bmN0aW9uKGIsZCl7aWYoeihkLnZhbHVlKSl2YXIgYz1hKGQudmFsdWUsITApO2Vsc2V7dmFyIGU9YShiLnRleHQoKSwhMCk7ZXx8ZC4kc2V0KFwidmFsdWVcIixiLnRleHQoKSl9cmV0dXJuIGZ1bmN0aW9uKGEsYixkKXt2YXIgaz1iLnBhcmVudCgpOyhrPWsuZGF0YShcIiRzZWxlY3RDb250cm9sbGVyXCIpfHxrLnBhcmVudCgpLmRhdGEoXCIkc2VsZWN0Q29udHJvbGxlclwiKSkmJmsucmVnaXN0ZXJPcHRpb24oYSxiLGQsYyxlKX19fX1dLG9lPWthKHtyZXN0cmljdDpcIkVcIix0ZXJtaW5hbDohMX0pLEhjPWZ1bmN0aW9uKCl7cmV0dXJue3Jlc3RyaWN0OlwiQVwiLHJlcXVpcmU6XCI/bmdNb2RlbFwiLGxpbms6ZnVuY3Rpb24oYSxiLGQsYyl7YyYmKGQucmVxdWlyZWQ9ITAsYy4kdmFsaWRhdG9ycy5yZXF1aXJlZD1mdW5jdGlvbihhLGIpe3JldHVybiFkLnJlcXVpcmVkfHwhYy4kaXNFbXB0eShiKX0sZC4kb2JzZXJ2ZShcInJlcXVpcmVkXCIsZnVuY3Rpb24oKXtjLiR2YWxpZGF0ZSgpfSkpfX19LFxyXG5HYz1mdW5jdGlvbigpe3JldHVybntyZXN0cmljdDpcIkFcIixyZXF1aXJlOlwiP25nTW9kZWxcIixsaW5rOmZ1bmN0aW9uKGEsYixkLGMpe2lmKGMpe3ZhciBlLGY9ZC5uZ1BhdHRlcm58fGQucGF0dGVybjtkLiRvYnNlcnZlKFwicGF0dGVyblwiLGZ1bmN0aW9uKGEpe0coYSkmJjA8YS5sZW5ndGgmJihhPW5ldyBSZWdFeHAoXCJeXCIrYStcIiRcIikpO2lmKGEmJiFhLnRlc3QpdGhyb3cgUChcIm5nUGF0dGVyblwiKShcIm5vcmVnZXhwXCIsZixhLHVhKGIpKTtlPWF8fHU7Yy4kdmFsaWRhdGUoKX0pO2MuJHZhbGlkYXRvcnMucGF0dGVybj1mdW5jdGlvbihhLGIpe3JldHVybiBjLiRpc0VtcHR5KGIpfHx4KGUpfHxlLnRlc3QoYil9fX19fSxKYz1mdW5jdGlvbigpe3JldHVybntyZXN0cmljdDpcIkFcIixyZXF1aXJlOlwiP25nTW9kZWxcIixsaW5rOmZ1bmN0aW9uKGEsYixkLGMpe2lmKGMpe3ZhciBlPS0xO2QuJG9ic2VydmUoXCJtYXhsZW5ndGhcIixmdW5jdGlvbihhKXthPWVhKGEpO2U9aXNOYU4oYSk/LTE6YTtjLiR2YWxpZGF0ZSgpfSk7XHJcbmMuJHZhbGlkYXRvcnMubWF4bGVuZ3RoPWZ1bmN0aW9uKGEsYil7cmV0dXJuIDA+ZXx8Yy4kaXNFbXB0eShiKXx8Yi5sZW5ndGg8PWV9fX19fSxJYz1mdW5jdGlvbigpe3JldHVybntyZXN0cmljdDpcIkFcIixyZXF1aXJlOlwiP25nTW9kZWxcIixsaW5rOmZ1bmN0aW9uKGEsYixkLGMpe2lmKGMpe3ZhciBlPTA7ZC4kb2JzZXJ2ZShcIm1pbmxlbmd0aFwiLGZ1bmN0aW9uKGEpe2U9ZWEoYSl8fDA7Yy4kdmFsaWRhdGUoKX0pO2MuJHZhbGlkYXRvcnMubWlubGVuZ3RoPWZ1bmN0aW9uKGEsYil7cmV0dXJuIGMuJGlzRW1wdHkoYil8fGIubGVuZ3RoPj1lfX19fX07Uy5hbmd1bGFyLmJvb3RzdHJhcD9jb25zb2xlLmxvZyhcIldBUk5JTkc6IFRyaWVkIHRvIGxvYWQgYW5ndWxhciBtb3JlIHRoYW4gb25jZS5cIik6KGZlKCksaGUoJCksJC5tb2R1bGUoXCJuZ0xvY2FsZVwiLFtdLFtcIiRwcm92aWRlXCIsZnVuY3Rpb24oYSl7ZnVuY3Rpb24gYihhKXthKz1cIlwiO3ZhciBiPWEuaW5kZXhPZihcIi5cIik7cmV0dXJuLTE9PVxyXG5iPzA6YS5sZW5ndGgtYi0xfWEudmFsdWUoXCIkbG9jYWxlXCIse0RBVEVUSU1FX0ZPUk1BVFM6e0FNUE1TOltcIkFNXCIsXCJQTVwiXSxEQVk6XCJTdW5kYXkgTW9uZGF5IFR1ZXNkYXkgV2VkbmVzZGF5IFRodXJzZGF5IEZyaWRheSBTYXR1cmRheVwiLnNwbGl0KFwiIFwiKSxFUkFOQU1FUzpbXCJCZWZvcmUgQ2hyaXN0XCIsXCJBbm5vIERvbWluaVwiXSxFUkFTOltcIkJDXCIsXCJBRFwiXSxGSVJTVERBWU9GV0VFSzo2LE1PTlRIOlwiSmFudWFyeSBGZWJydWFyeSBNYXJjaCBBcHJpbCBNYXkgSnVuZSBKdWx5IEF1Z3VzdCBTZXB0ZW1iZXIgT2N0b2JlciBOb3ZlbWJlciBEZWNlbWJlclwiLnNwbGl0KFwiIFwiKSxTSE9SVERBWTpcIlN1biBNb24gVHVlIFdlZCBUaHUgRnJpIFNhdFwiLnNwbGl0KFwiIFwiKSxTSE9SVE1PTlRIOlwiSmFuIEZlYiBNYXIgQXByIE1heSBKdW4gSnVsIEF1ZyBTZXAgT2N0IE5vdiBEZWNcIi5zcGxpdChcIiBcIiksU1RBTkRBTE9ORU1PTlRIOlwiSmFudWFyeSBGZWJydWFyeSBNYXJjaCBBcHJpbCBNYXkgSnVuZSBKdWx5IEF1Z3VzdCBTZXB0ZW1iZXIgT2N0b2JlciBOb3ZlbWJlciBEZWNlbWJlclwiLnNwbGl0KFwiIFwiKSxcclxuV0VFS0VORFJBTkdFOls1LDZdLGZ1bGxEYXRlOlwiRUVFRSwgTU1NTSBkLCB5XCIsbG9uZ0RhdGU6XCJNTU1NIGQsIHlcIixtZWRpdW06XCJNTU0gZCwgeSBoOm1tOnNzIGFcIixtZWRpdW1EYXRlOlwiTU1NIGQsIHlcIixtZWRpdW1UaW1lOlwiaDptbTpzcyBhXCIsXCJzaG9ydFwiOlwiTS9kL3l5IGg6bW0gYVwiLHNob3J0RGF0ZTpcIk0vZC95eVwiLHNob3J0VGltZTpcImg6bW0gYVwifSxOVU1CRVJfRk9STUFUUzp7Q1VSUkVOQ1lfU1lNOlwiJFwiLERFQ0lNQUxfU0VQOlwiLlwiLEdST1VQX1NFUDpcIixcIixQQVRURVJOUzpbe2dTaXplOjMsbGdTaXplOjMsbWF4RnJhYzozLG1pbkZyYWM6MCxtaW5JbnQ6MSxuZWdQcmU6XCItXCIsbmVnU3VmOlwiXCIscG9zUHJlOlwiXCIscG9zU3VmOlwiXCJ9LHtnU2l6ZTozLGxnU2l6ZTozLG1heEZyYWM6MixtaW5GcmFjOjIsbWluSW50OjEsbmVnUHJlOlwiLVxcdTAwYTRcIixuZWdTdWY6XCJcIixwb3NQcmU6XCJcXHUwMGE0XCIscG9zU3VmOlwiXCJ9XX0saWQ6XCJlbi11c1wiLHBsdXJhbENhdDpmdW5jdGlvbihhLGMpe3ZhciBlPVxyXG5hfDAsZj1jO3U9PT1mJiYoZj1NYXRoLm1pbihiKGEpLDMpKTtNYXRoLnBvdygxMCxmKTtyZXR1cm4gMT09ZSYmMD09Zj9cIm9uZVwiOlwib3RoZXJcIn19KX1dKSxBKFopLnJlYWR5KGZ1bmN0aW9uKCl7YmUoWix6Yyl9KSl9KSh3aW5kb3csZG9jdW1lbnQpOyF3aW5kb3cuYW5ndWxhci4kJGNzcCgpLm5vSW5saW5lU3R5bGUmJndpbmRvdy5hbmd1bGFyLmVsZW1lbnQoZG9jdW1lbnQuaGVhZCkucHJlcGVuZCgnPHN0eWxlIHR5cGU9XCJ0ZXh0L2Nzc1wiPkBjaGFyc2V0IFwiVVRGLThcIjtbbmdcXFxcOmNsb2FrXSxbbmctY2xvYWtdLFtkYXRhLW5nLWNsb2FrXSxbeC1uZy1jbG9ha10sLm5nLWNsb2FrLC54LW5nLWNsb2FrLC5uZy1oaWRlOm5vdCgubmctaGlkZS1hbmltYXRlKXtkaXNwbGF5Om5vbmUgIWltcG9ydGFudDt9bmdcXFxcOmZvcm17ZGlzcGxheTpibG9jazt9Lm5nLWFuaW1hdGUtc2hpbXt2aXNpYmlsaXR5OmhpZGRlbjt9Lm5nLWFuY2hvcntwb3NpdGlvbjphYnNvbHV0ZTt9PC9zdHlsZT4nKTtcclxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YW5ndWxhci5taW4uanMubWFwXHJcbiIsIi8vIENvZGVNaXJyb3IsIGNvcHlyaWdodCAoYykgYnkgTWFyaWpuIEhhdmVyYmVrZSBhbmQgb3RoZXJzXHJcbi8vIERpc3RyaWJ1dGVkIHVuZGVyIGFuIE1JVCBsaWNlbnNlOiBodHRwOi8vY29kZW1pcnJvci5uZXQvTElDRU5TRVxyXG5cclxuLy8gVGhpcyBpcyBDb2RlTWlycm9yIChodHRwOi8vY29kZW1pcnJvci5uZXQpLCBhIGNvZGUgZWRpdG9yXHJcbi8vIGltcGxlbWVudGVkIGluIEphdmFTY3JpcHQgb24gdG9wIG9mIHRoZSBicm93c2VyJ3MgRE9NLlxyXG4vL1xyXG4vLyBZb3UgY2FuIGZpbmQgc29tZSB0ZWNobmljYWwgYmFja2dyb3VuZCBmb3Igc29tZSBvZiB0aGUgY29kZSBiZWxvd1xyXG4vLyBhdCBodHRwOi8vbWFyaWpuaGF2ZXJiZWtlLm5sL2Jsb2cvI2NtLWludGVybmFscyAuXHJcblxyXG4oZnVuY3Rpb24obW9kKSB7XHJcbiAgaWYgKHR5cGVvZiBleHBvcnRzID09IFwib2JqZWN0XCIgJiYgdHlwZW9mIG1vZHVsZSA9PSBcIm9iamVjdFwiKSAvLyBDb21tb25KU1xyXG4gICAgbW9kdWxlLmV4cG9ydHMgPSBtb2QoKTtcclxuICBlbHNlIGlmICh0eXBlb2YgZGVmaW5lID09IFwiZnVuY3Rpb25cIiAmJiBkZWZpbmUuYW1kKSAvLyBBTURcclxuICAgIHJldHVybiBkZWZpbmUoW10sIG1vZCk7XHJcbiAgZWxzZSAvLyBQbGFpbiBicm93c2VyIGVudlxyXG4gICAgdGhpcy5Db2RlTWlycm9yID0gbW9kKCk7XHJcbn0pKGZ1bmN0aW9uKCkge1xyXG4gIFwidXNlIHN0cmljdFwiO1xyXG5cclxuICAvLyBCUk9XU0VSIFNOSUZGSU5HXHJcblxyXG4gIC8vIEtsdWRnZXMgZm9yIGJ1Z3MgYW5kIGJlaGF2aW9yIGRpZmZlcmVuY2VzIHRoYXQgY2FuJ3QgYmUgZmVhdHVyZVxyXG4gIC8vIGRldGVjdGVkIGFyZSBlbmFibGVkIGJhc2VkIG9uIHVzZXJBZ2VudCBldGMgc25pZmZpbmcuXHJcblxyXG4gIHZhciBnZWNrbyA9IC9nZWNrb1xcL1xcZC9pLnRlc3QobmF2aWdhdG9yLnVzZXJBZ2VudCk7XHJcbiAgLy8gaWVfdXB0b04gbWVhbnMgSW50ZXJuZXQgRXhwbG9yZXIgdmVyc2lvbiBOIG9yIGxvd2VyXHJcbiAgdmFyIGllX3VwdG8xMCA9IC9NU0lFIFxcZC8udGVzdChuYXZpZ2F0b3IudXNlckFnZW50KTtcclxuICB2YXIgaWVfMTF1cCA9IC9UcmlkZW50XFwvKD86WzctOV18XFxkezIsfSlcXC4uKnJ2OihcXGQrKS8uZXhlYyhuYXZpZ2F0b3IudXNlckFnZW50KTtcclxuICB2YXIgaWUgPSBpZV91cHRvMTAgfHwgaWVfMTF1cDtcclxuICB2YXIgaWVfdmVyc2lvbiA9IGllICYmIChpZV91cHRvMTAgPyBkb2N1bWVudC5kb2N1bWVudE1vZGUgfHwgNiA6IGllXzExdXBbMV0pO1xyXG4gIHZhciB3ZWJraXQgPSAvV2ViS2l0XFwvLy50ZXN0KG5hdmlnYXRvci51c2VyQWdlbnQpO1xyXG4gIHZhciBxdHdlYmtpdCA9IHdlYmtpdCAmJiAvUXRcXC9cXGQrXFwuXFxkKy8udGVzdChuYXZpZ2F0b3IudXNlckFnZW50KTtcclxuICB2YXIgY2hyb21lID0gL0Nocm9tZVxcLy8udGVzdChuYXZpZ2F0b3IudXNlckFnZW50KTtcclxuICB2YXIgcHJlc3RvID0gL09wZXJhXFwvLy50ZXN0KG5hdmlnYXRvci51c2VyQWdlbnQpO1xyXG4gIHZhciBzYWZhcmkgPSAvQXBwbGUgQ29tcHV0ZXIvLnRlc3QobmF2aWdhdG9yLnZlbmRvcik7XHJcbiAgdmFyIGtodG1sID0gL0tIVE1MXFwvLy50ZXN0KG5hdmlnYXRvci51c2VyQWdlbnQpO1xyXG4gIHZhciBtYWNfZ2VNb3VudGFpbkxpb24gPSAvTWFjIE9TIFggMVxcZFxcRChbOC05XXxcXGRcXGQpXFxELy50ZXN0KG5hdmlnYXRvci51c2VyQWdlbnQpO1xyXG4gIHZhciBwaGFudG9tID0gL1BoYW50b21KUy8udGVzdChuYXZpZ2F0b3IudXNlckFnZW50KTtcclxuXHJcbiAgdmFyIGlvcyA9IC9BcHBsZVdlYktpdC8udGVzdChuYXZpZ2F0b3IudXNlckFnZW50KSAmJiAvTW9iaWxlXFwvXFx3Ky8udGVzdChuYXZpZ2F0b3IudXNlckFnZW50KTtcclxuICAvLyBUaGlzIGlzIHdvZWZ1bGx5IGluY29tcGxldGUuIFN1Z2dlc3Rpb25zIGZvciBhbHRlcm5hdGl2ZSBtZXRob2RzIHdlbGNvbWUuXHJcbiAgdmFyIG1vYmlsZSA9IGlvcyB8fCAvQW5kcm9pZHx3ZWJPU3xCbGFja0JlcnJ5fE9wZXJhIE1pbml8T3BlcmEgTW9iaXxJRU1vYmlsZS9pLnRlc3QobmF2aWdhdG9yLnVzZXJBZ2VudCk7XHJcbiAgdmFyIG1hYyA9IGlvcyB8fCAvTWFjLy50ZXN0KG5hdmlnYXRvci5wbGF0Zm9ybSk7XHJcbiAgdmFyIHdpbmRvd3MgPSAvd2luL2kudGVzdChuYXZpZ2F0b3IucGxhdGZvcm0pO1xyXG5cclxuICB2YXIgcHJlc3RvX3ZlcnNpb24gPSBwcmVzdG8gJiYgbmF2aWdhdG9yLnVzZXJBZ2VudC5tYXRjaCgvVmVyc2lvblxcLyhcXGQqXFwuXFxkKikvKTtcclxuICBpZiAocHJlc3RvX3ZlcnNpb24pIHByZXN0b192ZXJzaW9uID0gTnVtYmVyKHByZXN0b192ZXJzaW9uWzFdKTtcclxuICBpZiAocHJlc3RvX3ZlcnNpb24gJiYgcHJlc3RvX3ZlcnNpb24gPj0gMTUpIHsgcHJlc3RvID0gZmFsc2U7IHdlYmtpdCA9IHRydWU7IH1cclxuICAvLyBTb21lIGJyb3dzZXJzIHVzZSB0aGUgd3JvbmcgZXZlbnQgcHJvcGVydGllcyB0byBzaWduYWwgY21kL2N0cmwgb24gT1MgWFxyXG4gIHZhciBmbGlwQ3RybENtZCA9IG1hYyAmJiAocXR3ZWJraXQgfHwgcHJlc3RvICYmIChwcmVzdG9fdmVyc2lvbiA9PSBudWxsIHx8IHByZXN0b192ZXJzaW9uIDwgMTIuMTEpKTtcclxuICB2YXIgY2FwdHVyZVJpZ2h0Q2xpY2sgPSBnZWNrbyB8fCAoaWUgJiYgaWVfdmVyc2lvbiA+PSA5KTtcclxuXHJcbiAgLy8gT3B0aW1pemUgc29tZSBjb2RlIHdoZW4gdGhlc2UgZmVhdHVyZXMgYXJlIG5vdCB1c2VkLlxyXG4gIHZhciBzYXdSZWFkT25seVNwYW5zID0gZmFsc2UsIHNhd0NvbGxhcHNlZFNwYW5zID0gZmFsc2U7XHJcblxyXG4gIC8vIEVESVRPUiBDT05TVFJVQ1RPUlxyXG5cclxuICAvLyBBIENvZGVNaXJyb3IgaW5zdGFuY2UgcmVwcmVzZW50cyBhbiBlZGl0b3IuIFRoaXMgaXMgdGhlIG9iamVjdFxyXG4gIC8vIHRoYXQgdXNlciBjb2RlIGlzIHVzdWFsbHkgZGVhbGluZyB3aXRoLlxyXG5cclxuICBmdW5jdGlvbiBDb2RlTWlycm9yKHBsYWNlLCBvcHRpb25zKSB7XHJcbiAgICBpZiAoISh0aGlzIGluc3RhbmNlb2YgQ29kZU1pcnJvcikpIHJldHVybiBuZXcgQ29kZU1pcnJvcihwbGFjZSwgb3B0aW9ucyk7XHJcblxyXG4gICAgdGhpcy5vcHRpb25zID0gb3B0aW9ucyA9IG9wdGlvbnMgfHwge307XHJcbiAgICAvLyBEZXRlcm1pbmUgZWZmZWN0aXZlIG9wdGlvbnMgYmFzZWQgb24gZ2l2ZW4gdmFsdWVzIGFuZCBkZWZhdWx0cy5cclxuICAgIGNvcHlPYmooZGVmYXVsdHMsIG9wdGlvbnMsIGZhbHNlKTtcclxuICAgIHNldEd1dHRlcnNGb3JMaW5lTnVtYmVycyhvcHRpb25zKTtcclxuXHJcbiAgICB2YXIgZG9jID0gb3B0aW9ucy52YWx1ZTtcclxuICAgIGlmICh0eXBlb2YgZG9jID09IFwic3RyaW5nXCIpIGRvYyA9IG5ldyBEb2MoZG9jLCBvcHRpb25zLm1vZGUpO1xyXG4gICAgdGhpcy5kb2MgPSBkb2M7XHJcblxyXG4gICAgdmFyIGRpc3BsYXkgPSB0aGlzLmRpc3BsYXkgPSBuZXcgRGlzcGxheShwbGFjZSwgZG9jKTtcclxuICAgIGRpc3BsYXkud3JhcHBlci5Db2RlTWlycm9yID0gdGhpcztcclxuICAgIHVwZGF0ZUd1dHRlcnModGhpcyk7XHJcbiAgICB0aGVtZUNoYW5nZWQodGhpcyk7XHJcbiAgICBpZiAob3B0aW9ucy5saW5lV3JhcHBpbmcpXHJcbiAgICAgIHRoaXMuZGlzcGxheS53cmFwcGVyLmNsYXNzTmFtZSArPSBcIiBDb2RlTWlycm9yLXdyYXBcIjtcclxuICAgIGlmIChvcHRpb25zLmF1dG9mb2N1cyAmJiAhbW9iaWxlKSBmb2N1c0lucHV0KHRoaXMpO1xyXG5cclxuICAgIHRoaXMuc3RhdGUgPSB7XHJcbiAgICAgIGtleU1hcHM6IFtdLCAgLy8gc3RvcmVzIG1hcHMgYWRkZWQgYnkgYWRkS2V5TWFwXHJcbiAgICAgIG92ZXJsYXlzOiBbXSwgLy8gaGlnaGxpZ2h0aW5nIG92ZXJsYXlzLCBhcyBhZGRlZCBieSBhZGRPdmVybGF5XHJcbiAgICAgIG1vZGVHZW46IDAsICAgLy8gYnVtcGVkIHdoZW4gbW9kZS9vdmVybGF5IGNoYW5nZXMsIHVzZWQgdG8gaW52YWxpZGF0ZSBoaWdobGlnaHRpbmcgaW5mb1xyXG4gICAgICBvdmVyd3JpdGU6IGZhbHNlLCBmb2N1c2VkOiBmYWxzZSxcclxuICAgICAgc3VwcHJlc3NFZGl0czogZmFsc2UsIC8vIHVzZWQgdG8gZGlzYWJsZSBlZGl0aW5nIGR1cmluZyBrZXkgaGFuZGxlcnMgd2hlbiBpbiByZWFkT25seSBtb2RlXHJcbiAgICAgIHBhc3RlSW5jb21pbmc6IGZhbHNlLCBjdXRJbmNvbWluZzogZmFsc2UsIC8vIGhlbHAgcmVjb2duaXplIHBhc3RlL2N1dCBlZGl0cyBpbiByZWFkSW5wdXRcclxuICAgICAgZHJhZ2dpbmdUZXh0OiBmYWxzZSxcclxuICAgICAgaGlnaGxpZ2h0OiBuZXcgRGVsYXllZCgpIC8vIHN0b3JlcyBoaWdobGlnaHQgd29ya2VyIHRpbWVvdXRcclxuICAgIH07XHJcblxyXG4gICAgLy8gT3ZlcnJpZGUgbWFnaWMgdGV4dGFyZWEgY29udGVudCByZXN0b3JlIHRoYXQgSUUgc29tZXRpbWVzIGRvZXNcclxuICAgIC8vIG9uIG91ciBoaWRkZW4gdGV4dGFyZWEgb24gcmVsb2FkXHJcbiAgICBpZiAoaWUgJiYgaWVfdmVyc2lvbiA8IDExKSBzZXRUaW1lb3V0KGJpbmQocmVzZXRJbnB1dCwgdGhpcywgdHJ1ZSksIDIwKTtcclxuXHJcbiAgICByZWdpc3RlckV2ZW50SGFuZGxlcnModGhpcyk7XHJcbiAgICBlbnN1cmVHbG9iYWxIYW5kbGVycygpO1xyXG5cclxuICAgIHZhciBjbSA9IHRoaXM7XHJcbiAgICBydW5Jbk9wKHRoaXMsIGZ1bmN0aW9uKCkge1xyXG4gICAgICBjbS5jdXJPcC5mb3JjZVVwZGF0ZSA9IHRydWU7XHJcbiAgICAgIGF0dGFjaERvYyhjbSwgZG9jKTtcclxuXHJcbiAgICAgIGlmICgob3B0aW9ucy5hdXRvZm9jdXMgJiYgIW1vYmlsZSkgfHwgYWN0aXZlRWx0KCkgPT0gZGlzcGxheS5pbnB1dClcclxuICAgICAgICBzZXRUaW1lb3V0KGJpbmQob25Gb2N1cywgY20pLCAyMCk7XHJcbiAgICAgIGVsc2VcclxuICAgICAgICBvbkJsdXIoY20pO1xyXG5cclxuICAgICAgZm9yICh2YXIgb3B0IGluIG9wdGlvbkhhbmRsZXJzKSBpZiAob3B0aW9uSGFuZGxlcnMuaGFzT3duUHJvcGVydHkob3B0KSlcclxuICAgICAgICBvcHRpb25IYW5kbGVyc1tvcHRdKGNtLCBvcHRpb25zW29wdF0sIEluaXQpO1xyXG4gICAgICBtYXliZVVwZGF0ZUxpbmVOdW1iZXJXaWR0aChjbSk7XHJcbiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgaW5pdEhvb2tzLmxlbmd0aDsgKytpKSBpbml0SG9va3NbaV0oY20pO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICAvLyBESVNQTEFZIENPTlNUUlVDVE9SXHJcblxyXG4gIC8vIFRoZSBkaXNwbGF5IGhhbmRsZXMgdGhlIERPTSBpbnRlZ3JhdGlvbiwgYm90aCBmb3IgaW5wdXQgcmVhZGluZ1xyXG4gIC8vIGFuZCBjb250ZW50IGRyYXdpbmcuIEl0IGhvbGRzIHJlZmVyZW5jZXMgdG8gRE9NIG5vZGVzIGFuZFxyXG4gIC8vIGRpc3BsYXktcmVsYXRlZCBzdGF0ZS5cclxuXHJcbiAgZnVuY3Rpb24gRGlzcGxheShwbGFjZSwgZG9jKSB7XHJcbiAgICB2YXIgZCA9IHRoaXM7XHJcblxyXG4gICAgLy8gVGhlIHNlbWloaWRkZW4gdGV4dGFyZWEgdGhhdCBpcyBmb2N1c2VkIHdoZW4gdGhlIGVkaXRvciBpc1xyXG4gICAgLy8gZm9jdXNlZCwgYW5kIHJlY2VpdmVzIGlucHV0LlxyXG4gICAgdmFyIGlucHV0ID0gZC5pbnB1dCA9IGVsdChcInRleHRhcmVhXCIsIG51bGwsIG51bGwsIFwicG9zaXRpb246IGFic29sdXRlOyBwYWRkaW5nOiAwOyB3aWR0aDogMXB4OyBoZWlnaHQ6IDFlbTsgb3V0bGluZTogbm9uZVwiKTtcclxuICAgIC8vIFRoZSB0ZXh0YXJlYSBpcyBrZXB0IHBvc2l0aW9uZWQgbmVhciB0aGUgY3Vyc29yIHRvIHByZXZlbnQgdGhlXHJcbiAgICAvLyBmYWN0IHRoYXQgaXQnbGwgYmUgc2Nyb2xsZWQgaW50byB2aWV3IG9uIGlucHV0IGZyb20gc2Nyb2xsaW5nXHJcbiAgICAvLyBvdXIgZmFrZSBjdXJzb3Igb3V0IG9mIHZpZXcuIE9uIHdlYmtpdCwgd2hlbiB3cmFwPW9mZiwgcGFzdGUgaXNcclxuICAgIC8vIHZlcnkgc2xvdy4gU28gbWFrZSB0aGUgYXJlYSB3aWRlIGluc3RlYWQuXHJcbiAgICBpZiAod2Via2l0KSBpbnB1dC5zdHlsZS53aWR0aCA9IFwiMTAwMHB4XCI7XHJcbiAgICBlbHNlIGlucHV0LnNldEF0dHJpYnV0ZShcIndyYXBcIiwgXCJvZmZcIik7XHJcbiAgICAvLyBJZiBib3JkZXI6IDA7IC0tIGlPUyBmYWlscyB0byBvcGVuIGtleWJvYXJkIChpc3N1ZSAjMTI4NylcclxuICAgIGlmIChpb3MpIGlucHV0LnN0eWxlLmJvcmRlciA9IFwiMXB4IHNvbGlkIGJsYWNrXCI7XHJcbiAgICBpbnB1dC5zZXRBdHRyaWJ1dGUoXCJhdXRvY29ycmVjdFwiLCBcIm9mZlwiKTsgaW5wdXQuc2V0QXR0cmlidXRlKFwiYXV0b2NhcGl0YWxpemVcIiwgXCJvZmZcIik7IGlucHV0LnNldEF0dHJpYnV0ZShcInNwZWxsY2hlY2tcIiwgXCJmYWxzZVwiKTtcclxuXHJcbiAgICAvLyBXcmFwcyBhbmQgaGlkZXMgaW5wdXQgdGV4dGFyZWFcclxuICAgIGQuaW5wdXREaXYgPSBlbHQoXCJkaXZcIiwgW2lucHV0XSwgbnVsbCwgXCJvdmVyZmxvdzogaGlkZGVuOyBwb3NpdGlvbjogcmVsYXRpdmU7IHdpZHRoOiAzcHg7IGhlaWdodDogMHB4O1wiKTtcclxuICAgIC8vIFRoZSBmYWtlIHNjcm9sbGJhciBlbGVtZW50cy5cclxuICAgIGQuc2Nyb2xsYmFySCA9IGVsdChcImRpdlwiLCBbZWx0KFwiZGl2XCIsIG51bGwsIG51bGwsIFwiaGVpZ2h0OiAxMDAlOyBtaW4taGVpZ2h0OiAxcHhcIildLCBcIkNvZGVNaXJyb3ItaHNjcm9sbGJhclwiKTtcclxuICAgIGQuc2Nyb2xsYmFyViA9IGVsdChcImRpdlwiLCBbZWx0KFwiZGl2XCIsIG51bGwsIG51bGwsIFwibWluLXdpZHRoOiAxcHhcIildLCBcIkNvZGVNaXJyb3ItdnNjcm9sbGJhclwiKTtcclxuICAgIC8vIENvdmVycyBib3R0b20tcmlnaHQgc3F1YXJlIHdoZW4gYm90aCBzY3JvbGxiYXJzIGFyZSBwcmVzZW50LlxyXG4gICAgZC5zY3JvbGxiYXJGaWxsZXIgPSBlbHQoXCJkaXZcIiwgbnVsbCwgXCJDb2RlTWlycm9yLXNjcm9sbGJhci1maWxsZXJcIik7XHJcbiAgICAvLyBDb3ZlcnMgYm90dG9tIG9mIGd1dHRlciB3aGVuIGNvdmVyR3V0dGVyTmV4dFRvU2Nyb2xsYmFyIGlzIG9uXHJcbiAgICAvLyBhbmQgaCBzY3JvbGxiYXIgaXMgcHJlc2VudC5cclxuICAgIGQuZ3V0dGVyRmlsbGVyID0gZWx0KFwiZGl2XCIsIG51bGwsIFwiQ29kZU1pcnJvci1ndXR0ZXItZmlsbGVyXCIpO1xyXG4gICAgLy8gV2lsbCBjb250YWluIHRoZSBhY3R1YWwgY29kZSwgcG9zaXRpb25lZCB0byBjb3ZlciB0aGUgdmlld3BvcnQuXHJcbiAgICBkLmxpbmVEaXYgPSBlbHQoXCJkaXZcIiwgbnVsbCwgXCJDb2RlTWlycm9yLWNvZGVcIik7XHJcbiAgICAvLyBFbGVtZW50cyBhcmUgYWRkZWQgdG8gdGhlc2UgdG8gcmVwcmVzZW50IHNlbGVjdGlvbiBhbmQgY3Vyc29ycy5cclxuICAgIGQuc2VsZWN0aW9uRGl2ID0gZWx0KFwiZGl2XCIsIG51bGwsIG51bGwsIFwicG9zaXRpb246IHJlbGF0aXZlOyB6LWluZGV4OiAxXCIpO1xyXG4gICAgZC5jdXJzb3JEaXYgPSBlbHQoXCJkaXZcIiwgbnVsbCwgXCJDb2RlTWlycm9yLWN1cnNvcnNcIik7XHJcbiAgICAvLyBBIHZpc2liaWxpdHk6IGhpZGRlbiBlbGVtZW50IHVzZWQgdG8gZmluZCB0aGUgc2l6ZSBvZiB0aGluZ3MuXHJcbiAgICBkLm1lYXN1cmUgPSBlbHQoXCJkaXZcIiwgbnVsbCwgXCJDb2RlTWlycm9yLW1lYXN1cmVcIik7XHJcbiAgICAvLyBXaGVuIGxpbmVzIG91dHNpZGUgb2YgdGhlIHZpZXdwb3J0IGFyZSBtZWFzdXJlZCwgdGhleSBhcmUgZHJhd24gaW4gdGhpcy5cclxuICAgIGQubGluZU1lYXN1cmUgPSBlbHQoXCJkaXZcIiwgbnVsbCwgXCJDb2RlTWlycm9yLW1lYXN1cmVcIik7XHJcbiAgICAvLyBXcmFwcyBldmVyeXRoaW5nIHRoYXQgbmVlZHMgdG8gZXhpc3QgaW5zaWRlIHRoZSB2ZXJ0aWNhbGx5LXBhZGRlZCBjb29yZGluYXRlIHN5c3RlbVxyXG4gICAgZC5saW5lU3BhY2UgPSBlbHQoXCJkaXZcIiwgW2QubWVhc3VyZSwgZC5saW5lTWVhc3VyZSwgZC5zZWxlY3Rpb25EaXYsIGQuY3Vyc29yRGl2LCBkLmxpbmVEaXZdLFxyXG4gICAgICAgICAgICAgICAgICAgICAgbnVsbCwgXCJwb3NpdGlvbjogcmVsYXRpdmU7IG91dGxpbmU6IG5vbmVcIik7XHJcbiAgICAvLyBNb3ZlZCBhcm91bmQgaXRzIHBhcmVudCB0byBjb3ZlciB2aXNpYmxlIHZpZXcuXHJcbiAgICBkLm1vdmVyID0gZWx0KFwiZGl2XCIsIFtlbHQoXCJkaXZcIiwgW2QubGluZVNwYWNlXSwgXCJDb2RlTWlycm9yLWxpbmVzXCIpXSwgbnVsbCwgXCJwb3NpdGlvbjogcmVsYXRpdmVcIik7XHJcbiAgICAvLyBTZXQgdG8gdGhlIGhlaWdodCBvZiB0aGUgZG9jdW1lbnQsIGFsbG93aW5nIHNjcm9sbGluZy5cclxuICAgIGQuc2l6ZXIgPSBlbHQoXCJkaXZcIiwgW2QubW92ZXJdLCBcIkNvZGVNaXJyb3Itc2l6ZXJcIik7XHJcbiAgICAvLyBCZWhhdmlvciBvZiBlbHRzIHdpdGggb3ZlcmZsb3c6IGF1dG8gYW5kIHBhZGRpbmcgaXNcclxuICAgIC8vIGluY29uc2lzdGVudCBhY3Jvc3MgYnJvd3NlcnMuIFRoaXMgaXMgdXNlZCB0byBlbnN1cmUgdGhlXHJcbiAgICAvLyBzY3JvbGxhYmxlIGFyZWEgaXMgYmlnIGVub3VnaC5cclxuICAgIGQuaGVpZ2h0Rm9yY2VyID0gZWx0KFwiZGl2XCIsIG51bGwsIG51bGwsIFwicG9zaXRpb246IGFic29sdXRlOyBoZWlnaHQ6IFwiICsgc2Nyb2xsZXJDdXRPZmYgKyBcInB4OyB3aWR0aDogMXB4O1wiKTtcclxuICAgIC8vIFdpbGwgY29udGFpbiB0aGUgZ3V0dGVycywgaWYgYW55LlxyXG4gICAgZC5ndXR0ZXJzID0gZWx0KFwiZGl2XCIsIG51bGwsIFwiQ29kZU1pcnJvci1ndXR0ZXJzXCIpO1xyXG4gICAgZC5saW5lR3V0dGVyID0gbnVsbDtcclxuICAgIC8vIEFjdHVhbCBzY3JvbGxhYmxlIGVsZW1lbnQuXHJcbiAgICBkLnNjcm9sbGVyID0gZWx0KFwiZGl2XCIsIFtkLnNpemVyLCBkLmhlaWdodEZvcmNlciwgZC5ndXR0ZXJzXSwgXCJDb2RlTWlycm9yLXNjcm9sbFwiKTtcclxuICAgIGQuc2Nyb2xsZXIuc2V0QXR0cmlidXRlKFwidGFiSW5kZXhcIiwgXCItMVwiKTtcclxuICAgIC8vIFRoZSBlbGVtZW50IGluIHdoaWNoIHRoZSBlZGl0b3IgbGl2ZXMuXHJcbiAgICBkLndyYXBwZXIgPSBlbHQoXCJkaXZcIiwgW2QuaW5wdXREaXYsIGQuc2Nyb2xsYmFySCwgZC5zY3JvbGxiYXJWLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZC5zY3JvbGxiYXJGaWxsZXIsIGQuZ3V0dGVyRmlsbGVyLCBkLnNjcm9sbGVyXSwgXCJDb2RlTWlycm9yXCIpO1xyXG5cclxuICAgIC8vIFdvcmsgYXJvdW5kIElFNyB6LWluZGV4IGJ1ZyAobm90IHBlcmZlY3QsIGhlbmNlIElFNyBub3QgcmVhbGx5IGJlaW5nIHN1cHBvcnRlZClcclxuICAgIGlmIChpZSAmJiBpZV92ZXJzaW9uIDwgOCkgeyBkLmd1dHRlcnMuc3R5bGUuekluZGV4ID0gLTE7IGQuc2Nyb2xsZXIuc3R5bGUucGFkZGluZ1JpZ2h0ID0gMDsgfVxyXG4gICAgLy8gTmVlZGVkIHRvIGhpZGUgYmlnIGJsdWUgYmxpbmtpbmcgY3Vyc29yIG9uIE1vYmlsZSBTYWZhcmlcclxuICAgIGlmIChpb3MpIGlucHV0LnN0eWxlLndpZHRoID0gXCIwcHhcIjtcclxuICAgIGlmICghd2Via2l0KSBkLnNjcm9sbGVyLmRyYWdnYWJsZSA9IHRydWU7XHJcbiAgICAvLyBOZWVkZWQgdG8gaGFuZGxlIFRhYiBrZXkgaW4gS0hUTUxcclxuICAgIGlmIChraHRtbCkgeyBkLmlucHV0RGl2LnN0eWxlLmhlaWdodCA9IFwiMXB4XCI7IGQuaW5wdXREaXYuc3R5bGUucG9zaXRpb24gPSBcImFic29sdXRlXCI7IH1cclxuICAgIC8vIE5lZWQgdG8gc2V0IGEgbWluaW11bSB3aWR0aCB0byBzZWUgdGhlIHNjcm9sbGJhciBvbiBJRTcgKGJ1dCBtdXN0IG5vdCBzZXQgaXQgb24gSUU4KS5cclxuICAgIGlmIChpZSAmJiBpZV92ZXJzaW9uIDwgOCkgZC5zY3JvbGxiYXJILnN0eWxlLm1pbkhlaWdodCA9IGQuc2Nyb2xsYmFyVi5zdHlsZS5taW5XaWR0aCA9IFwiMThweFwiO1xyXG5cclxuICAgIGlmIChwbGFjZS5hcHBlbmRDaGlsZCkgcGxhY2UuYXBwZW5kQ2hpbGQoZC53cmFwcGVyKTtcclxuICAgIGVsc2UgcGxhY2UoZC53cmFwcGVyKTtcclxuXHJcbiAgICAvLyBDdXJyZW50IHJlbmRlcmVkIHJhbmdlIChtYXkgYmUgYmlnZ2VyIHRoYW4gdGhlIHZpZXcgd2luZG93KS5cclxuICAgIGQudmlld0Zyb20gPSBkLnZpZXdUbyA9IGRvYy5maXJzdDtcclxuICAgIC8vIEluZm9ybWF0aW9uIGFib3V0IHRoZSByZW5kZXJlZCBsaW5lcy5cclxuICAgIGQudmlldyA9IFtdO1xyXG4gICAgLy8gSG9sZHMgaW5mbyBhYm91dCBhIHNpbmdsZSByZW5kZXJlZCBsaW5lIHdoZW4gaXQgd2FzIHJlbmRlcmVkXHJcbiAgICAvLyBmb3IgbWVhc3VyZW1lbnQsIHdoaWxlIG5vdCBpbiB2aWV3LlxyXG4gICAgZC5leHRlcm5hbE1lYXN1cmVkID0gbnVsbDtcclxuICAgIC8vIEVtcHR5IHNwYWNlIChpbiBwaXhlbHMpIGFib3ZlIHRoZSB2aWV3XHJcbiAgICBkLnZpZXdPZmZzZXQgPSAwO1xyXG4gICAgZC5sYXN0U2l6ZUMgPSAwO1xyXG4gICAgZC51cGRhdGVMaW5lTnVtYmVycyA9IG51bGw7XHJcblxyXG4gICAgLy8gVXNlZCB0byBvbmx5IHJlc2l6ZSB0aGUgbGluZSBudW1iZXIgZ3V0dGVyIHdoZW4gbmVjZXNzYXJ5ICh3aGVuXHJcbiAgICAvLyB0aGUgYW1vdW50IG9mIGxpbmVzIGNyb3NzZXMgYSBib3VuZGFyeSB0aGF0IG1ha2VzIGl0cyB3aWR0aCBjaGFuZ2UpXHJcbiAgICBkLmxpbmVOdW1XaWR0aCA9IGQubGluZU51bUlubmVyV2lkdGggPSBkLmxpbmVOdW1DaGFycyA9IG51bGw7XHJcbiAgICAvLyBTZWUgcmVhZElucHV0IGFuZCByZXNldElucHV0XHJcbiAgICBkLnByZXZJbnB1dCA9IFwiXCI7XHJcbiAgICAvLyBTZXQgdG8gdHJ1ZSB3aGVuIGEgbm9uLWhvcml6b250YWwtc2Nyb2xsaW5nIGxpbmUgd2lkZ2V0IGlzXHJcbiAgICAvLyBhZGRlZC4gQXMgYW4gb3B0aW1pemF0aW9uLCBsaW5lIHdpZGdldCBhbGlnbmluZyBpcyBza2lwcGVkIHdoZW5cclxuICAgIC8vIHRoaXMgaXMgZmFsc2UuXHJcbiAgICBkLmFsaWduV2lkZ2V0cyA9IGZhbHNlO1xyXG4gICAgLy8gRmxhZyB0aGF0IGluZGljYXRlcyB3aGV0aGVyIHdlIGV4cGVjdCBpbnB1dCB0byBhcHBlYXIgcmVhbCBzb29uXHJcbiAgICAvLyBub3cgKGFmdGVyIHNvbWUgZXZlbnQgbGlrZSAna2V5cHJlc3MnIG9yICdpbnB1dCcpIGFuZCBhcmVcclxuICAgIC8vIHBvbGxpbmcgaW50ZW5zaXZlbHkuXHJcbiAgICBkLnBvbGxpbmdGYXN0ID0gZmFsc2U7XHJcbiAgICAvLyBTZWxmLXJlc2V0dGluZyB0aW1lb3V0IGZvciB0aGUgcG9sbGVyXHJcbiAgICBkLnBvbGwgPSBuZXcgRGVsYXllZCgpO1xyXG5cclxuICAgIGQuY2FjaGVkQ2hhcldpZHRoID0gZC5jYWNoZWRUZXh0SGVpZ2h0ID0gZC5jYWNoZWRQYWRkaW5nSCA9IG51bGw7XHJcblxyXG4gICAgLy8gVHJhY2tzIHdoZW4gcmVzZXRJbnB1dCBoYXMgcHVudGVkIHRvIGp1c3QgcHV0dGluZyBhIHNob3J0XHJcbiAgICAvLyBzdHJpbmcgaW50byB0aGUgdGV4dGFyZWEgaW5zdGVhZCBvZiB0aGUgZnVsbCBzZWxlY3Rpb24uXHJcbiAgICBkLmluYWNjdXJhdGVTZWxlY3Rpb24gPSBmYWxzZTtcclxuXHJcbiAgICAvLyBUcmFja3MgdGhlIG1heGltdW0gbGluZSBsZW5ndGggc28gdGhhdCB0aGUgaG9yaXpvbnRhbCBzY3JvbGxiYXJcclxuICAgIC8vIGNhbiBiZSBrZXB0IHN0YXRpYyB3aGVuIHNjcm9sbGluZy5cclxuICAgIGQubWF4TGluZSA9IG51bGw7XHJcbiAgICBkLm1heExpbmVMZW5ndGggPSAwO1xyXG4gICAgZC5tYXhMaW5lQ2hhbmdlZCA9IGZhbHNlO1xyXG5cclxuICAgIC8vIFVzZWQgZm9yIG1lYXN1cmluZyB3aGVlbCBzY3JvbGxpbmcgZ3JhbnVsYXJpdHlcclxuICAgIGQud2hlZWxEWCA9IGQud2hlZWxEWSA9IGQud2hlZWxTdGFydFggPSBkLndoZWVsU3RhcnRZID0gbnVsbDtcclxuXHJcbiAgICAvLyBUcnVlIHdoZW4gc2hpZnQgaXMgaGVsZCBkb3duLlxyXG4gICAgZC5zaGlmdCA9IGZhbHNlO1xyXG5cclxuICAgIC8vIFVzZWQgdG8gdHJhY2sgd2hldGhlciBhbnl0aGluZyBoYXBwZW5lZCBzaW5jZSB0aGUgY29udGV4dCBtZW51XHJcbiAgICAvLyB3YXMgb3BlbmVkLlxyXG4gICAgZC5zZWxGb3JDb250ZXh0TWVudSA9IG51bGw7XHJcbiAgfVxyXG5cclxuICAvLyBTVEFURSBVUERBVEVTXHJcblxyXG4gIC8vIFVzZWQgdG8gZ2V0IHRoZSBlZGl0b3IgaW50byBhIGNvbnNpc3RlbnQgc3RhdGUgYWdhaW4gd2hlbiBvcHRpb25zIGNoYW5nZS5cclxuXHJcbiAgZnVuY3Rpb24gbG9hZE1vZGUoY20pIHtcclxuICAgIGNtLmRvYy5tb2RlID0gQ29kZU1pcnJvci5nZXRNb2RlKGNtLm9wdGlvbnMsIGNtLmRvYy5tb2RlT3B0aW9uKTtcclxuICAgIHJlc2V0TW9kZVN0YXRlKGNtKTtcclxuICB9XHJcblxyXG4gIGZ1bmN0aW9uIHJlc2V0TW9kZVN0YXRlKGNtKSB7XHJcbiAgICBjbS5kb2MuaXRlcihmdW5jdGlvbihsaW5lKSB7XHJcbiAgICAgIGlmIChsaW5lLnN0YXRlQWZ0ZXIpIGxpbmUuc3RhdGVBZnRlciA9IG51bGw7XHJcbiAgICAgIGlmIChsaW5lLnN0eWxlcykgbGluZS5zdHlsZXMgPSBudWxsO1xyXG4gICAgfSk7XHJcbiAgICBjbS5kb2MuZnJvbnRpZXIgPSBjbS5kb2MuZmlyc3Q7XHJcbiAgICBzdGFydFdvcmtlcihjbSwgMTAwKTtcclxuICAgIGNtLnN0YXRlLm1vZGVHZW4rKztcclxuICAgIGlmIChjbS5jdXJPcCkgcmVnQ2hhbmdlKGNtKTtcclxuICB9XHJcblxyXG4gIGZ1bmN0aW9uIHdyYXBwaW5nQ2hhbmdlZChjbSkge1xyXG4gICAgaWYgKGNtLm9wdGlvbnMubGluZVdyYXBwaW5nKSB7XHJcbiAgICAgIGFkZENsYXNzKGNtLmRpc3BsYXkud3JhcHBlciwgXCJDb2RlTWlycm9yLXdyYXBcIik7XHJcbiAgICAgIGNtLmRpc3BsYXkuc2l6ZXIuc3R5bGUubWluV2lkdGggPSBcIlwiO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgcm1DbGFzcyhjbS5kaXNwbGF5LndyYXBwZXIsIFwiQ29kZU1pcnJvci13cmFwXCIpO1xyXG4gICAgICBmaW5kTWF4TGluZShjbSk7XHJcbiAgICB9XHJcbiAgICBlc3RpbWF0ZUxpbmVIZWlnaHRzKGNtKTtcclxuICAgIHJlZ0NoYW5nZShjbSk7XHJcbiAgICBjbGVhckNhY2hlcyhjbSk7XHJcbiAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7dXBkYXRlU2Nyb2xsYmFycyhjbSk7fSwgMTAwKTtcclxuICB9XHJcblxyXG4gIC8vIFJldHVybnMgYSBmdW5jdGlvbiB0aGF0IGVzdGltYXRlcyB0aGUgaGVpZ2h0IG9mIGEgbGluZSwgdG8gdXNlIGFzXHJcbiAgLy8gZmlyc3QgYXBwcm94aW1hdGlvbiB1bnRpbCB0aGUgbGluZSBiZWNvbWVzIHZpc2libGUgKGFuZCBpcyB0aHVzXHJcbiAgLy8gcHJvcGVybHkgbWVhc3VyYWJsZSkuXHJcbiAgZnVuY3Rpb24gZXN0aW1hdGVIZWlnaHQoY20pIHtcclxuICAgIHZhciB0aCA9IHRleHRIZWlnaHQoY20uZGlzcGxheSksIHdyYXBwaW5nID0gY20ub3B0aW9ucy5saW5lV3JhcHBpbmc7XHJcbiAgICB2YXIgcGVyTGluZSA9IHdyYXBwaW5nICYmIE1hdGgubWF4KDUsIGNtLmRpc3BsYXkuc2Nyb2xsZXIuY2xpZW50V2lkdGggLyBjaGFyV2lkdGgoY20uZGlzcGxheSkgLSAzKTtcclxuICAgIHJldHVybiBmdW5jdGlvbihsaW5lKSB7XHJcbiAgICAgIGlmIChsaW5lSXNIaWRkZW4oY20uZG9jLCBsaW5lKSkgcmV0dXJuIDA7XHJcblxyXG4gICAgICB2YXIgd2lkZ2V0c0hlaWdodCA9IDA7XHJcbiAgICAgIGlmIChsaW5lLndpZGdldHMpIGZvciAodmFyIGkgPSAwOyBpIDwgbGluZS53aWRnZXRzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgaWYgKGxpbmUud2lkZ2V0c1tpXS5oZWlnaHQpIHdpZGdldHNIZWlnaHQgKz0gbGluZS53aWRnZXRzW2ldLmhlaWdodDtcclxuICAgICAgfVxyXG5cclxuICAgICAgaWYgKHdyYXBwaW5nKVxyXG4gICAgICAgIHJldHVybiB3aWRnZXRzSGVpZ2h0ICsgKE1hdGguY2VpbChsaW5lLnRleHQubGVuZ3RoIC8gcGVyTGluZSkgfHwgMSkgKiB0aDtcclxuICAgICAgZWxzZVxyXG4gICAgICAgIHJldHVybiB3aWRnZXRzSGVpZ2h0ICsgdGg7XHJcbiAgICB9O1xyXG4gIH1cclxuXHJcbiAgZnVuY3Rpb24gZXN0aW1hdGVMaW5lSGVpZ2h0cyhjbSkge1xyXG4gICAgdmFyIGRvYyA9IGNtLmRvYywgZXN0ID0gZXN0aW1hdGVIZWlnaHQoY20pO1xyXG4gICAgZG9jLml0ZXIoZnVuY3Rpb24obGluZSkge1xyXG4gICAgICB2YXIgZXN0SGVpZ2h0ID0gZXN0KGxpbmUpO1xyXG4gICAgICBpZiAoZXN0SGVpZ2h0ICE9IGxpbmUuaGVpZ2h0KSB1cGRhdGVMaW5lSGVpZ2h0KGxpbmUsIGVzdEhlaWdodCk7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIGZ1bmN0aW9uIGtleU1hcENoYW5nZWQoY20pIHtcclxuICAgIHZhciBtYXAgPSBrZXlNYXBbY20ub3B0aW9ucy5rZXlNYXBdLCBzdHlsZSA9IG1hcC5zdHlsZTtcclxuICAgIGNtLmRpc3BsYXkud3JhcHBlci5jbGFzc05hbWUgPSBjbS5kaXNwbGF5LndyYXBwZXIuY2xhc3NOYW1lLnJlcGxhY2UoL1xccypjbS1rZXltYXAtXFxTKy9nLCBcIlwiKSArXHJcbiAgICAgIChzdHlsZSA/IFwiIGNtLWtleW1hcC1cIiArIHN0eWxlIDogXCJcIik7XHJcbiAgfVxyXG5cclxuICBmdW5jdGlvbiB0aGVtZUNoYW5nZWQoY20pIHtcclxuICAgIGNtLmRpc3BsYXkud3JhcHBlci5jbGFzc05hbWUgPSBjbS5kaXNwbGF5LndyYXBwZXIuY2xhc3NOYW1lLnJlcGxhY2UoL1xccypjbS1zLVxcUysvZywgXCJcIikgK1xyXG4gICAgICBjbS5vcHRpb25zLnRoZW1lLnJlcGxhY2UoLyhefFxccylcXHMqL2csIFwiIGNtLXMtXCIpO1xyXG4gICAgY2xlYXJDYWNoZXMoY20pO1xyXG4gIH1cclxuXHJcbiAgZnVuY3Rpb24gZ3V0dGVyc0NoYW5nZWQoY20pIHtcclxuICAgIHVwZGF0ZUd1dHRlcnMoY20pO1xyXG4gICAgcmVnQ2hhbmdlKGNtKTtcclxuICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKXthbGlnbkhvcml6b250YWxseShjbSk7fSwgMjApO1xyXG4gIH1cclxuXHJcbiAgLy8gUmVidWlsZCB0aGUgZ3V0dGVyIGVsZW1lbnRzLCBlbnN1cmUgdGhlIG1hcmdpbiB0byB0aGUgbGVmdCBvZiB0aGVcclxuICAvLyBjb2RlIG1hdGNoZXMgdGhlaXIgd2lkdGguXHJcbiAgZnVuY3Rpb24gdXBkYXRlR3V0dGVycyhjbSkge1xyXG4gICAgdmFyIGd1dHRlcnMgPSBjbS5kaXNwbGF5Lmd1dHRlcnMsIHNwZWNzID0gY20ub3B0aW9ucy5ndXR0ZXJzO1xyXG4gICAgcmVtb3ZlQ2hpbGRyZW4oZ3V0dGVycyk7XHJcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHNwZWNzLmxlbmd0aDsgKytpKSB7XHJcbiAgICAgIHZhciBndXR0ZXJDbGFzcyA9IHNwZWNzW2ldO1xyXG4gICAgICB2YXIgZ0VsdCA9IGd1dHRlcnMuYXBwZW5kQ2hpbGQoZWx0KFwiZGl2XCIsIG51bGwsIFwiQ29kZU1pcnJvci1ndXR0ZXIgXCIgKyBndXR0ZXJDbGFzcykpO1xyXG4gICAgICBpZiAoZ3V0dGVyQ2xhc3MgPT0gXCJDb2RlTWlycm9yLWxpbmVudW1iZXJzXCIpIHtcclxuICAgICAgICBjbS5kaXNwbGF5LmxpbmVHdXR0ZXIgPSBnRWx0O1xyXG4gICAgICAgIGdFbHQuc3R5bGUud2lkdGggPSAoY20uZGlzcGxheS5saW5lTnVtV2lkdGggfHwgMSkgKyBcInB4XCI7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIGd1dHRlcnMuc3R5bGUuZGlzcGxheSA9IGkgPyBcIlwiIDogXCJub25lXCI7XHJcbiAgICB1cGRhdGVHdXR0ZXJTcGFjZShjbSk7XHJcbiAgfVxyXG5cclxuICBmdW5jdGlvbiB1cGRhdGVHdXR0ZXJTcGFjZShjbSkge1xyXG4gICAgdmFyIHdpZHRoID0gY20uZGlzcGxheS5ndXR0ZXJzLm9mZnNldFdpZHRoO1xyXG4gICAgY20uZGlzcGxheS5zaXplci5zdHlsZS5tYXJnaW5MZWZ0ID0gd2lkdGggKyBcInB4XCI7XHJcbiAgICBjbS5kaXNwbGF5LnNjcm9sbGJhckguc3R5bGUubGVmdCA9IGNtLm9wdGlvbnMuZml4ZWRHdXR0ZXIgPyB3aWR0aCArIFwicHhcIiA6IDA7XHJcbiAgfVxyXG5cclxuICAvLyBDb21wdXRlIHRoZSBjaGFyYWN0ZXIgbGVuZ3RoIG9mIGEgbGluZSwgdGFraW5nIGludG8gYWNjb3VudFxyXG4gIC8vIGNvbGxhcHNlZCByYW5nZXMgKHNlZSBtYXJrVGV4dCkgdGhhdCBtaWdodCBoaWRlIHBhcnRzLCBhbmQgam9pblxyXG4gIC8vIG90aGVyIGxpbmVzIG9udG8gaXQuXHJcbiAgZnVuY3Rpb24gbGluZUxlbmd0aChsaW5lKSB7XHJcbiAgICBpZiAobGluZS5oZWlnaHQgPT0gMCkgcmV0dXJuIDA7XHJcbiAgICB2YXIgbGVuID0gbGluZS50ZXh0Lmxlbmd0aCwgbWVyZ2VkLCBjdXIgPSBsaW5lO1xyXG4gICAgd2hpbGUgKG1lcmdlZCA9IGNvbGxhcHNlZFNwYW5BdFN0YXJ0KGN1cikpIHtcclxuICAgICAgdmFyIGZvdW5kID0gbWVyZ2VkLmZpbmQoMCwgdHJ1ZSk7XHJcbiAgICAgIGN1ciA9IGZvdW5kLmZyb20ubGluZTtcclxuICAgICAgbGVuICs9IGZvdW5kLmZyb20uY2ggLSBmb3VuZC50by5jaDtcclxuICAgIH1cclxuICAgIGN1ciA9IGxpbmU7XHJcbiAgICB3aGlsZSAobWVyZ2VkID0gY29sbGFwc2VkU3BhbkF0RW5kKGN1cikpIHtcclxuICAgICAgdmFyIGZvdW5kID0gbWVyZ2VkLmZpbmQoMCwgdHJ1ZSk7XHJcbiAgICAgIGxlbiAtPSBjdXIudGV4dC5sZW5ndGggLSBmb3VuZC5mcm9tLmNoO1xyXG4gICAgICBjdXIgPSBmb3VuZC50by5saW5lO1xyXG4gICAgICBsZW4gKz0gY3VyLnRleHQubGVuZ3RoIC0gZm91bmQudG8uY2g7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gbGVuO1xyXG4gIH1cclxuXHJcbiAgLy8gRmluZCB0aGUgbG9uZ2VzdCBsaW5lIGluIHRoZSBkb2N1bWVudC5cclxuICBmdW5jdGlvbiBmaW5kTWF4TGluZShjbSkge1xyXG4gICAgdmFyIGQgPSBjbS5kaXNwbGF5LCBkb2MgPSBjbS5kb2M7XHJcbiAgICBkLm1heExpbmUgPSBnZXRMaW5lKGRvYywgZG9jLmZpcnN0KTtcclxuICAgIGQubWF4TGluZUxlbmd0aCA9IGxpbmVMZW5ndGgoZC5tYXhMaW5lKTtcclxuICAgIGQubWF4TGluZUNoYW5nZWQgPSB0cnVlO1xyXG4gICAgZG9jLml0ZXIoZnVuY3Rpb24obGluZSkge1xyXG4gICAgICB2YXIgbGVuID0gbGluZUxlbmd0aChsaW5lKTtcclxuICAgICAgaWYgKGxlbiA+IGQubWF4TGluZUxlbmd0aCkge1xyXG4gICAgICAgIGQubWF4TGluZUxlbmd0aCA9IGxlbjtcclxuICAgICAgICBkLm1heExpbmUgPSBsaW5lO1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIC8vIE1ha2Ugc3VyZSB0aGUgZ3V0dGVycyBvcHRpb25zIGNvbnRhaW5zIHRoZSBlbGVtZW50XHJcbiAgLy8gXCJDb2RlTWlycm9yLWxpbmVudW1iZXJzXCIgd2hlbiB0aGUgbGluZU51bWJlcnMgb3B0aW9uIGlzIHRydWUuXHJcbiAgZnVuY3Rpb24gc2V0R3V0dGVyc0ZvckxpbmVOdW1iZXJzKG9wdGlvbnMpIHtcclxuICAgIHZhciBmb3VuZCA9IGluZGV4T2Yob3B0aW9ucy5ndXR0ZXJzLCBcIkNvZGVNaXJyb3ItbGluZW51bWJlcnNcIik7XHJcbiAgICBpZiAoZm91bmQgPT0gLTEgJiYgb3B0aW9ucy5saW5lTnVtYmVycykge1xyXG4gICAgICBvcHRpb25zLmd1dHRlcnMgPSBvcHRpb25zLmd1dHRlcnMuY29uY2F0KFtcIkNvZGVNaXJyb3ItbGluZW51bWJlcnNcIl0pO1xyXG4gICAgfSBlbHNlIGlmIChmb3VuZCA+IC0xICYmICFvcHRpb25zLmxpbmVOdW1iZXJzKSB7XHJcbiAgICAgIG9wdGlvbnMuZ3V0dGVycyA9IG9wdGlvbnMuZ3V0dGVycy5zbGljZSgwKTtcclxuICAgICAgb3B0aW9ucy5ndXR0ZXJzLnNwbGljZShmb3VuZCwgMSk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvLyBTQ1JPTExCQVJTXHJcblxyXG4gIGZ1bmN0aW9uIGhTY3JvbGxiYXJUYWtlc1NwYWNlKGNtKSB7XHJcbiAgICByZXR1cm4gY20uZGlzcGxheS5zY3JvbGxlci5jbGllbnRIZWlnaHQgLSBjbS5kaXNwbGF5LndyYXBwZXIuY2xpZW50SGVpZ2h0IDwgc2Nyb2xsZXJDdXRPZmYgLSAzO1xyXG4gIH1cclxuXHJcbiAgLy8gUHJlcGFyZSBET00gcmVhZHMgbmVlZGVkIHRvIHVwZGF0ZSB0aGUgc2Nyb2xsYmFycy4gRG9uZSBpbiBvbmVcclxuICAvLyBzaG90IHRvIG1pbmltaXplIHVwZGF0ZS9tZWFzdXJlIHJvdW5kdHJpcHMuXHJcbiAgZnVuY3Rpb24gbWVhc3VyZUZvclNjcm9sbGJhcnMoY20pIHtcclxuICAgIHZhciBzY3JvbGwgPSBjbS5kaXNwbGF5LnNjcm9sbGVyO1xyXG4gICAgcmV0dXJuIHtcclxuICAgICAgY2xpZW50SGVpZ2h0OiBzY3JvbGwuY2xpZW50SGVpZ2h0LFxyXG4gICAgICBiYXJIZWlnaHQ6IGNtLmRpc3BsYXkuc2Nyb2xsYmFyVi5jbGllbnRIZWlnaHQsXHJcbiAgICAgIHNjcm9sbFdpZHRoOiBzY3JvbGwuc2Nyb2xsV2lkdGgsIGNsaWVudFdpZHRoOiBzY3JvbGwuY2xpZW50V2lkdGgsXHJcbiAgICAgIGhTY3JvbGxiYXJUYWtlc1NwYWNlOiBoU2Nyb2xsYmFyVGFrZXNTcGFjZShjbSksXHJcbiAgICAgIGJhcldpZHRoOiBjbS5kaXNwbGF5LnNjcm9sbGJhckguY2xpZW50V2lkdGgsXHJcbiAgICAgIGRvY0hlaWdodDogTWF0aC5yb3VuZChjbS5kb2MuaGVpZ2h0ICsgcGFkZGluZ1ZlcnQoY20uZGlzcGxheSkpXHJcbiAgICB9O1xyXG4gIH1cclxuXHJcbiAgLy8gUmUtc3luY2hyb25pemUgdGhlIGZha2Ugc2Nyb2xsYmFycyB3aXRoIHRoZSBhY3R1YWwgc2l6ZSBvZiB0aGVcclxuICAvLyBjb250ZW50LlxyXG4gIGZ1bmN0aW9uIHVwZGF0ZVNjcm9sbGJhcnMoY20sIG1lYXN1cmUpIHtcclxuICAgIGlmICghbWVhc3VyZSkgbWVhc3VyZSA9IG1lYXN1cmVGb3JTY3JvbGxiYXJzKGNtKTtcclxuICAgIHZhciBkID0gY20uZGlzcGxheSwgc1dpZHRoID0gc2Nyb2xsYmFyV2lkdGgoZC5tZWFzdXJlKTtcclxuICAgIHZhciBzY3JvbGxIZWlnaHQgPSBtZWFzdXJlLmRvY0hlaWdodCArIHNjcm9sbGVyQ3V0T2ZmO1xyXG4gICAgdmFyIG5lZWRzSCA9IG1lYXN1cmUuc2Nyb2xsV2lkdGggPiBtZWFzdXJlLmNsaWVudFdpZHRoO1xyXG4gICAgaWYgKG5lZWRzSCAmJiBtZWFzdXJlLnNjcm9sbFdpZHRoIDw9IG1lYXN1cmUuY2xpZW50V2lkdGggKyAxICYmXHJcbiAgICAgICAgc1dpZHRoID4gMCAmJiAhbWVhc3VyZS5oU2Nyb2xsYmFyVGFrZXNTcGFjZSlcclxuICAgICAgbmVlZHNIID0gZmFsc2U7IC8vIChJc3N1ZSAjMjU2MilcclxuICAgIHZhciBuZWVkc1YgPSBzY3JvbGxIZWlnaHQgPiBtZWFzdXJlLmNsaWVudEhlaWdodDtcclxuXHJcbiAgICBpZiAobmVlZHNWKSB7XHJcbiAgICAgIGQuc2Nyb2xsYmFyVi5zdHlsZS5kaXNwbGF5ID0gXCJibG9ja1wiO1xyXG4gICAgICBkLnNjcm9sbGJhclYuc3R5bGUuYm90dG9tID0gbmVlZHNIID8gc1dpZHRoICsgXCJweFwiIDogXCIwXCI7XHJcbiAgICAgIC8vIEEgYnVnIGluIElFOCBjYW4gY2F1c2UgdGhpcyB2YWx1ZSB0byBiZSBuZWdhdGl2ZSwgc28gZ3VhcmQgaXQuXHJcbiAgICAgIGQuc2Nyb2xsYmFyVi5maXJzdENoaWxkLnN0eWxlLmhlaWdodCA9XHJcbiAgICAgICAgTWF0aC5tYXgoMCwgc2Nyb2xsSGVpZ2h0IC0gbWVhc3VyZS5jbGllbnRIZWlnaHQgKyAobWVhc3VyZS5iYXJIZWlnaHQgfHwgZC5zY3JvbGxiYXJWLmNsaWVudEhlaWdodCkpICsgXCJweFwiO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgZC5zY3JvbGxiYXJWLnN0eWxlLmRpc3BsYXkgPSBcIlwiO1xyXG4gICAgICBkLnNjcm9sbGJhclYuZmlyc3RDaGlsZC5zdHlsZS5oZWlnaHQgPSBcIjBcIjtcclxuICAgIH1cclxuICAgIGlmIChuZWVkc0gpIHtcclxuICAgICAgZC5zY3JvbGxiYXJILnN0eWxlLmRpc3BsYXkgPSBcImJsb2NrXCI7XHJcbiAgICAgIGQuc2Nyb2xsYmFySC5zdHlsZS5yaWdodCA9IG5lZWRzViA/IHNXaWR0aCArIFwicHhcIiA6IFwiMFwiO1xyXG4gICAgICBkLnNjcm9sbGJhckguZmlyc3RDaGlsZC5zdHlsZS53aWR0aCA9XHJcbiAgICAgICAgKG1lYXN1cmUuc2Nyb2xsV2lkdGggLSBtZWFzdXJlLmNsaWVudFdpZHRoICsgKG1lYXN1cmUuYmFyV2lkdGggfHwgZC5zY3JvbGxiYXJILmNsaWVudFdpZHRoKSkgKyBcInB4XCI7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBkLnNjcm9sbGJhckguc3R5bGUuZGlzcGxheSA9IFwiXCI7XHJcbiAgICAgIGQuc2Nyb2xsYmFySC5maXJzdENoaWxkLnN0eWxlLndpZHRoID0gXCIwXCI7XHJcbiAgICB9XHJcbiAgICBpZiAobmVlZHNIICYmIG5lZWRzVikge1xyXG4gICAgICBkLnNjcm9sbGJhckZpbGxlci5zdHlsZS5kaXNwbGF5ID0gXCJibG9ja1wiO1xyXG4gICAgICBkLnNjcm9sbGJhckZpbGxlci5zdHlsZS5oZWlnaHQgPSBkLnNjcm9sbGJhckZpbGxlci5zdHlsZS53aWR0aCA9IHNXaWR0aCArIFwicHhcIjtcclxuICAgIH0gZWxzZSBkLnNjcm9sbGJhckZpbGxlci5zdHlsZS5kaXNwbGF5ID0gXCJcIjtcclxuICAgIGlmIChuZWVkc0ggJiYgY20ub3B0aW9ucy5jb3Zlckd1dHRlck5leHRUb1Njcm9sbGJhciAmJiBjbS5vcHRpb25zLmZpeGVkR3V0dGVyKSB7XHJcbiAgICAgIGQuZ3V0dGVyRmlsbGVyLnN0eWxlLmRpc3BsYXkgPSBcImJsb2NrXCI7XHJcbiAgICAgIGQuZ3V0dGVyRmlsbGVyLnN0eWxlLmhlaWdodCA9IHNXaWR0aCArIFwicHhcIjtcclxuICAgICAgZC5ndXR0ZXJGaWxsZXIuc3R5bGUud2lkdGggPSBkLmd1dHRlcnMub2Zmc2V0V2lkdGggKyBcInB4XCI7XHJcbiAgICB9IGVsc2UgZC5ndXR0ZXJGaWxsZXIuc3R5bGUuZGlzcGxheSA9IFwiXCI7XHJcblxyXG4gICAgaWYgKCFjbS5zdGF0ZS5jaGVja2VkT3ZlcmxheVNjcm9sbGJhciAmJiBtZWFzdXJlLmNsaWVudEhlaWdodCA+IDApIHtcclxuICAgICAgaWYgKHNXaWR0aCA9PT0gMCkge1xyXG4gICAgICAgIHZhciB3ID0gbWFjICYmICFtYWNfZ2VNb3VudGFpbkxpb24gPyBcIjEycHhcIiA6IFwiMThweFwiO1xyXG4gICAgICAgIGQuc2Nyb2xsYmFyVi5zdHlsZS5taW5XaWR0aCA9IGQuc2Nyb2xsYmFySC5zdHlsZS5taW5IZWlnaHQgPSB3O1xyXG4gICAgICAgIHZhciBiYXJNb3VzZURvd24gPSBmdW5jdGlvbihlKSB7XHJcbiAgICAgICAgICBpZiAoZV90YXJnZXQoZSkgIT0gZC5zY3JvbGxiYXJWICYmIGVfdGFyZ2V0KGUpICE9IGQuc2Nyb2xsYmFySClcclxuICAgICAgICAgICAgb3BlcmF0aW9uKGNtLCBvbk1vdXNlRG93bikoZSk7XHJcbiAgICAgICAgfTtcclxuICAgICAgICBvbihkLnNjcm9sbGJhclYsIFwibW91c2Vkb3duXCIsIGJhck1vdXNlRG93bik7XHJcbiAgICAgICAgb24oZC5zY3JvbGxiYXJILCBcIm1vdXNlZG93blwiLCBiYXJNb3VzZURvd24pO1xyXG4gICAgICB9XHJcbiAgICAgIGNtLnN0YXRlLmNoZWNrZWRPdmVybGF5U2Nyb2xsYmFyID0gdHJ1ZTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8vIENvbXB1dGUgdGhlIGxpbmVzIHRoYXQgYXJlIHZpc2libGUgaW4gYSBnaXZlbiB2aWV3cG9ydCAoZGVmYXVsdHNcclxuICAvLyB0aGUgdGhlIGN1cnJlbnQgc2Nyb2xsIHBvc2l0aW9uKS4gdmlld3BvcnQgbWF5IGNvbnRhaW4gdG9wLFxyXG4gIC8vIGhlaWdodCwgYW5kIGVuc3VyZSAoc2VlIG9wLnNjcm9sbFRvUG9zKSBwcm9wZXJ0aWVzLlxyXG4gIGZ1bmN0aW9uIHZpc2libGVMaW5lcyhkaXNwbGF5LCBkb2MsIHZpZXdwb3J0KSB7XHJcbiAgICB2YXIgdG9wID0gdmlld3BvcnQgJiYgdmlld3BvcnQudG9wICE9IG51bGwgPyBNYXRoLm1heCgwLCB2aWV3cG9ydC50b3ApIDogZGlzcGxheS5zY3JvbGxlci5zY3JvbGxUb3A7XHJcbiAgICB0b3AgPSBNYXRoLmZsb29yKHRvcCAtIHBhZGRpbmdUb3AoZGlzcGxheSkpO1xyXG4gICAgdmFyIGJvdHRvbSA9IHZpZXdwb3J0ICYmIHZpZXdwb3J0LmJvdHRvbSAhPSBudWxsID8gdmlld3BvcnQuYm90dG9tIDogdG9wICsgZGlzcGxheS53cmFwcGVyLmNsaWVudEhlaWdodDtcclxuXHJcbiAgICB2YXIgZnJvbSA9IGxpbmVBdEhlaWdodChkb2MsIHRvcCksIHRvID0gbGluZUF0SGVpZ2h0KGRvYywgYm90dG9tKTtcclxuICAgIC8vIEVuc3VyZSBpcyBhIHtmcm9tOiB7bGluZSwgY2h9LCB0bzoge2xpbmUsIGNofX0gb2JqZWN0LCBhbmRcclxuICAgIC8vIGZvcmNlcyB0aG9zZSBsaW5lcyBpbnRvIHRoZSB2aWV3cG9ydCAoaWYgcG9zc2libGUpLlxyXG4gICAgaWYgKHZpZXdwb3J0ICYmIHZpZXdwb3J0LmVuc3VyZSkge1xyXG4gICAgICB2YXIgZW5zdXJlRnJvbSA9IHZpZXdwb3J0LmVuc3VyZS5mcm9tLmxpbmUsIGVuc3VyZVRvID0gdmlld3BvcnQuZW5zdXJlLnRvLmxpbmU7XHJcbiAgICAgIGlmIChlbnN1cmVGcm9tIDwgZnJvbSlcclxuICAgICAgICByZXR1cm4ge2Zyb206IGVuc3VyZUZyb20sXHJcbiAgICAgICAgICAgICAgICB0bzogbGluZUF0SGVpZ2h0KGRvYywgaGVpZ2h0QXRMaW5lKGdldExpbmUoZG9jLCBlbnN1cmVGcm9tKSkgKyBkaXNwbGF5LndyYXBwZXIuY2xpZW50SGVpZ2h0KX07XHJcbiAgICAgIGlmIChNYXRoLm1pbihlbnN1cmVUbywgZG9jLmxhc3RMaW5lKCkpID49IHRvKVxyXG4gICAgICAgIHJldHVybiB7ZnJvbTogbGluZUF0SGVpZ2h0KGRvYywgaGVpZ2h0QXRMaW5lKGdldExpbmUoZG9jLCBlbnN1cmVUbykpIC0gZGlzcGxheS53cmFwcGVyLmNsaWVudEhlaWdodCksXHJcbiAgICAgICAgICAgICAgICB0bzogZW5zdXJlVG99O1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIHtmcm9tOiBmcm9tLCB0bzogTWF0aC5tYXgodG8sIGZyb20gKyAxKX07XHJcbiAgfVxyXG5cclxuICAvLyBMSU5FIE5VTUJFUlNcclxuXHJcbiAgLy8gUmUtYWxpZ24gbGluZSBudW1iZXJzIGFuZCBndXR0ZXIgbWFya3MgdG8gY29tcGVuc2F0ZSBmb3JcclxuICAvLyBob3Jpem9udGFsIHNjcm9sbGluZy5cclxuICBmdW5jdGlvbiBhbGlnbkhvcml6b250YWxseShjbSkge1xyXG4gICAgdmFyIGRpc3BsYXkgPSBjbS5kaXNwbGF5LCB2aWV3ID0gZGlzcGxheS52aWV3O1xyXG4gICAgaWYgKCFkaXNwbGF5LmFsaWduV2lkZ2V0cyAmJiAoIWRpc3BsYXkuZ3V0dGVycy5maXJzdENoaWxkIHx8ICFjbS5vcHRpb25zLmZpeGVkR3V0dGVyKSkgcmV0dXJuO1xyXG4gICAgdmFyIGNvbXAgPSBjb21wZW5zYXRlRm9ySFNjcm9sbChkaXNwbGF5KSAtIGRpc3BsYXkuc2Nyb2xsZXIuc2Nyb2xsTGVmdCArIGNtLmRvYy5zY3JvbGxMZWZ0O1xyXG4gICAgdmFyIGd1dHRlclcgPSBkaXNwbGF5Lmd1dHRlcnMub2Zmc2V0V2lkdGgsIGxlZnQgPSBjb21wICsgXCJweFwiO1xyXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCB2aWV3Lmxlbmd0aDsgaSsrKSBpZiAoIXZpZXdbaV0uaGlkZGVuKSB7XHJcbiAgICAgIGlmIChjbS5vcHRpb25zLmZpeGVkR3V0dGVyICYmIHZpZXdbaV0uZ3V0dGVyKVxyXG4gICAgICAgIHZpZXdbaV0uZ3V0dGVyLnN0eWxlLmxlZnQgPSBsZWZ0O1xyXG4gICAgICB2YXIgYWxpZ24gPSB2aWV3W2ldLmFsaWduYWJsZTtcclxuICAgICAgaWYgKGFsaWduKSBmb3IgKHZhciBqID0gMDsgaiA8IGFsaWduLmxlbmd0aDsgaisrKVxyXG4gICAgICAgIGFsaWduW2pdLnN0eWxlLmxlZnQgPSBsZWZ0O1xyXG4gICAgfVxyXG4gICAgaWYgKGNtLm9wdGlvbnMuZml4ZWRHdXR0ZXIpXHJcbiAgICAgIGRpc3BsYXkuZ3V0dGVycy5zdHlsZS5sZWZ0ID0gKGNvbXAgKyBndXR0ZXJXKSArIFwicHhcIjtcclxuICB9XHJcblxyXG4gIC8vIFVzZWQgdG8gZW5zdXJlIHRoYXQgdGhlIGxpbmUgbnVtYmVyIGd1dHRlciBpcyBzdGlsbCB0aGUgcmlnaHRcclxuICAvLyBzaXplIGZvciB0aGUgY3VycmVudCBkb2N1bWVudCBzaXplLiBSZXR1cm5zIHRydWUgd2hlbiBhbiB1cGRhdGVcclxuICAvLyBpcyBuZWVkZWQuXHJcbiAgZnVuY3Rpb24gbWF5YmVVcGRhdGVMaW5lTnVtYmVyV2lkdGgoY20pIHtcclxuICAgIGlmICghY20ub3B0aW9ucy5saW5lTnVtYmVycykgcmV0dXJuIGZhbHNlO1xyXG4gICAgdmFyIGRvYyA9IGNtLmRvYywgbGFzdCA9IGxpbmVOdW1iZXJGb3IoY20ub3B0aW9ucywgZG9jLmZpcnN0ICsgZG9jLnNpemUgLSAxKSwgZGlzcGxheSA9IGNtLmRpc3BsYXk7XHJcbiAgICBpZiAobGFzdC5sZW5ndGggIT0gZGlzcGxheS5saW5lTnVtQ2hhcnMpIHtcclxuICAgICAgdmFyIHRlc3QgPSBkaXNwbGF5Lm1lYXN1cmUuYXBwZW5kQ2hpbGQoZWx0KFwiZGl2XCIsIFtlbHQoXCJkaXZcIiwgbGFzdCldLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJDb2RlTWlycm9yLWxpbmVudW1iZXIgQ29kZU1pcnJvci1ndXR0ZXItZWx0XCIpKTtcclxuICAgICAgdmFyIGlubmVyVyA9IHRlc3QuZmlyc3RDaGlsZC5vZmZzZXRXaWR0aCwgcGFkZGluZyA9IHRlc3Qub2Zmc2V0V2lkdGggLSBpbm5lclc7XHJcbiAgICAgIGRpc3BsYXkubGluZUd1dHRlci5zdHlsZS53aWR0aCA9IFwiXCI7XHJcbiAgICAgIGRpc3BsYXkubGluZU51bUlubmVyV2lkdGggPSBNYXRoLm1heChpbm5lclcsIGRpc3BsYXkubGluZUd1dHRlci5vZmZzZXRXaWR0aCAtIHBhZGRpbmcpO1xyXG4gICAgICBkaXNwbGF5LmxpbmVOdW1XaWR0aCA9IGRpc3BsYXkubGluZU51bUlubmVyV2lkdGggKyBwYWRkaW5nO1xyXG4gICAgICBkaXNwbGF5LmxpbmVOdW1DaGFycyA9IGRpc3BsYXkubGluZU51bUlubmVyV2lkdGggPyBsYXN0Lmxlbmd0aCA6IC0xO1xyXG4gICAgICBkaXNwbGF5LmxpbmVHdXR0ZXIuc3R5bGUud2lkdGggPSBkaXNwbGF5LmxpbmVOdW1XaWR0aCArIFwicHhcIjtcclxuICAgICAgdXBkYXRlR3V0dGVyU3BhY2UoY20pO1xyXG4gICAgICByZXR1cm4gdHJ1ZTtcclxuICAgIH1cclxuICAgIHJldHVybiBmYWxzZTtcclxuICB9XHJcblxyXG4gIGZ1bmN0aW9uIGxpbmVOdW1iZXJGb3Iob3B0aW9ucywgaSkge1xyXG4gICAgcmV0dXJuIFN0cmluZyhvcHRpb25zLmxpbmVOdW1iZXJGb3JtYXR0ZXIoaSArIG9wdGlvbnMuZmlyc3RMaW5lTnVtYmVyKSk7XHJcbiAgfVxyXG5cclxuICAvLyBDb21wdXRlcyBkaXNwbGF5LnNjcm9sbGVyLnNjcm9sbExlZnQgKyBkaXNwbGF5Lmd1dHRlcnMub2Zmc2V0V2lkdGgsXHJcbiAgLy8gYnV0IHVzaW5nIGdldEJvdW5kaW5nQ2xpZW50UmVjdCB0byBnZXQgYSBzdWItcGl4ZWwtYWNjdXJhdGVcclxuICAvLyByZXN1bHQuXHJcbiAgZnVuY3Rpb24gY29tcGVuc2F0ZUZvckhTY3JvbGwoZGlzcGxheSkge1xyXG4gICAgcmV0dXJuIGRpc3BsYXkuc2Nyb2xsZXIuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkubGVmdCAtIGRpc3BsYXkuc2l6ZXIuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkubGVmdDtcclxuICB9XHJcblxyXG4gIC8vIERJU1BMQVkgRFJBV0lOR1xyXG5cclxuICBmdW5jdGlvbiBEaXNwbGF5VXBkYXRlKGNtLCB2aWV3cG9ydCwgZm9yY2UpIHtcclxuICAgIHZhciBkaXNwbGF5ID0gY20uZGlzcGxheTtcclxuXHJcbiAgICB0aGlzLnZpZXdwb3J0ID0gdmlld3BvcnQ7XHJcbiAgICAvLyBTdG9yZSBzb21lIHZhbHVlcyB0aGF0IHdlJ2xsIG5lZWQgbGF0ZXIgKGJ1dCBkb24ndCB3YW50IHRvIGZvcmNlIGEgcmVsYXlvdXQgZm9yKVxyXG4gICAgdGhpcy52aXNpYmxlID0gdmlzaWJsZUxpbmVzKGRpc3BsYXksIGNtLmRvYywgdmlld3BvcnQpO1xyXG4gICAgdGhpcy5lZGl0b3JJc0hpZGRlbiA9ICFkaXNwbGF5LndyYXBwZXIub2Zmc2V0V2lkdGg7XHJcbiAgICB0aGlzLndyYXBwZXJIZWlnaHQgPSBkaXNwbGF5LndyYXBwZXIuY2xpZW50SGVpZ2h0O1xyXG4gICAgdGhpcy5vbGRWaWV3RnJvbSA9IGRpc3BsYXkudmlld0Zyb207IHRoaXMub2xkVmlld1RvID0gZGlzcGxheS52aWV3VG87XHJcbiAgICB0aGlzLm9sZFNjcm9sbGVyV2lkdGggPSBkaXNwbGF5LnNjcm9sbGVyLmNsaWVudFdpZHRoO1xyXG4gICAgdGhpcy5mb3JjZSA9IGZvcmNlO1xyXG4gICAgdGhpcy5kaW1zID0gZ2V0RGltZW5zaW9ucyhjbSk7XHJcbiAgfVxyXG5cclxuICAvLyBEb2VzIHRoZSBhY3R1YWwgdXBkYXRpbmcgb2YgdGhlIGxpbmUgZGlzcGxheS4gQmFpbHMgb3V0XHJcbiAgLy8gKHJldHVybmluZyBmYWxzZSkgd2hlbiB0aGVyZSBpcyBub3RoaW5nIHRvIGJlIGRvbmUgYW5kIGZvcmNlZCBpc1xyXG4gIC8vIGZhbHNlLlxyXG4gIGZ1bmN0aW9uIHVwZGF0ZURpc3BsYXlJZk5lZWRlZChjbSwgdXBkYXRlKSB7XHJcbiAgICB2YXIgZGlzcGxheSA9IGNtLmRpc3BsYXksIGRvYyA9IGNtLmRvYztcclxuICAgIGlmICh1cGRhdGUuZWRpdG9ySXNIaWRkZW4pIHtcclxuICAgICAgcmVzZXRWaWV3KGNtKTtcclxuICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIEJhaWwgb3V0IGlmIHRoZSB2aXNpYmxlIGFyZWEgaXMgYWxyZWFkeSByZW5kZXJlZCBhbmQgbm90aGluZyBjaGFuZ2VkLlxyXG4gICAgaWYgKCF1cGRhdGUuZm9yY2UgJiZcclxuICAgICAgICB1cGRhdGUudmlzaWJsZS5mcm9tID49IGRpc3BsYXkudmlld0Zyb20gJiYgdXBkYXRlLnZpc2libGUudG8gPD0gZGlzcGxheS52aWV3VG8gJiZcclxuICAgICAgICAoZGlzcGxheS51cGRhdGVMaW5lTnVtYmVycyA9PSBudWxsIHx8IGRpc3BsYXkudXBkYXRlTGluZU51bWJlcnMgPj0gZGlzcGxheS52aWV3VG8pICYmXHJcbiAgICAgICAgY291bnREaXJ0eVZpZXcoY20pID09IDApXHJcbiAgICAgIHJldHVybiBmYWxzZTtcclxuXHJcbiAgICBpZiAobWF5YmVVcGRhdGVMaW5lTnVtYmVyV2lkdGgoY20pKSB7XHJcbiAgICAgIHJlc2V0VmlldyhjbSk7XHJcbiAgICAgIHVwZGF0ZS5kaW1zID0gZ2V0RGltZW5zaW9ucyhjbSk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gQ29tcHV0ZSBhIHN1aXRhYmxlIG5ldyB2aWV3cG9ydCAoZnJvbSAmIHRvKVxyXG4gICAgdmFyIGVuZCA9IGRvYy5maXJzdCArIGRvYy5zaXplO1xyXG4gICAgdmFyIGZyb20gPSBNYXRoLm1heCh1cGRhdGUudmlzaWJsZS5mcm9tIC0gY20ub3B0aW9ucy52aWV3cG9ydE1hcmdpbiwgZG9jLmZpcnN0KTtcclxuICAgIHZhciB0byA9IE1hdGgubWluKGVuZCwgdXBkYXRlLnZpc2libGUudG8gKyBjbS5vcHRpb25zLnZpZXdwb3J0TWFyZ2luKTtcclxuICAgIGlmIChkaXNwbGF5LnZpZXdGcm9tIDwgZnJvbSAmJiBmcm9tIC0gZGlzcGxheS52aWV3RnJvbSA8IDIwKSBmcm9tID0gTWF0aC5tYXgoZG9jLmZpcnN0LCBkaXNwbGF5LnZpZXdGcm9tKTtcclxuICAgIGlmIChkaXNwbGF5LnZpZXdUbyA+IHRvICYmIGRpc3BsYXkudmlld1RvIC0gdG8gPCAyMCkgdG8gPSBNYXRoLm1pbihlbmQsIGRpc3BsYXkudmlld1RvKTtcclxuICAgIGlmIChzYXdDb2xsYXBzZWRTcGFucykge1xyXG4gICAgICBmcm9tID0gdmlzdWFsTGluZU5vKGNtLmRvYywgZnJvbSk7XHJcbiAgICAgIHRvID0gdmlzdWFsTGluZUVuZE5vKGNtLmRvYywgdG8pO1xyXG4gICAgfVxyXG5cclxuICAgIHZhciBkaWZmZXJlbnQgPSBmcm9tICE9IGRpc3BsYXkudmlld0Zyb20gfHwgdG8gIT0gZGlzcGxheS52aWV3VG8gfHxcclxuICAgICAgZGlzcGxheS5sYXN0U2l6ZUMgIT0gdXBkYXRlLndyYXBwZXJIZWlnaHQ7XHJcbiAgICBhZGp1c3RWaWV3KGNtLCBmcm9tLCB0byk7XHJcblxyXG4gICAgZGlzcGxheS52aWV3T2Zmc2V0ID0gaGVpZ2h0QXRMaW5lKGdldExpbmUoY20uZG9jLCBkaXNwbGF5LnZpZXdGcm9tKSk7XHJcbiAgICAvLyBQb3NpdGlvbiB0aGUgbW92ZXIgZGl2IHRvIGFsaWduIHdpdGggdGhlIGN1cnJlbnQgc2Nyb2xsIHBvc2l0aW9uXHJcbiAgICBjbS5kaXNwbGF5Lm1vdmVyLnN0eWxlLnRvcCA9IGRpc3BsYXkudmlld09mZnNldCArIFwicHhcIjtcclxuXHJcbiAgICB2YXIgdG9VcGRhdGUgPSBjb3VudERpcnR5VmlldyhjbSk7XHJcbiAgICBpZiAoIWRpZmZlcmVudCAmJiB0b1VwZGF0ZSA9PSAwICYmICF1cGRhdGUuZm9yY2UgJiZcclxuICAgICAgICAoZGlzcGxheS51cGRhdGVMaW5lTnVtYmVycyA9PSBudWxsIHx8IGRpc3BsYXkudXBkYXRlTGluZU51bWJlcnMgPj0gZGlzcGxheS52aWV3VG8pKVxyXG4gICAgICByZXR1cm4gZmFsc2U7XHJcblxyXG4gICAgLy8gRm9yIGJpZyBjaGFuZ2VzLCB3ZSBoaWRlIHRoZSBlbmNsb3NpbmcgZWxlbWVudCBkdXJpbmcgdGhlXHJcbiAgICAvLyB1cGRhdGUsIHNpbmNlIHRoYXQgc3BlZWRzIHVwIHRoZSBvcGVyYXRpb25zIG9uIG1vc3QgYnJvd3NlcnMuXHJcbiAgICB2YXIgZm9jdXNlZCA9IGFjdGl2ZUVsdCgpO1xyXG4gICAgaWYgKHRvVXBkYXRlID4gNCkgZGlzcGxheS5saW5lRGl2LnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcclxuICAgIHBhdGNoRGlzcGxheShjbSwgZGlzcGxheS51cGRhdGVMaW5lTnVtYmVycywgdXBkYXRlLmRpbXMpO1xyXG4gICAgaWYgKHRvVXBkYXRlID4gNCkgZGlzcGxheS5saW5lRGl2LnN0eWxlLmRpc3BsYXkgPSBcIlwiO1xyXG4gICAgLy8gVGhlcmUgbWlnaHQgaGF2ZSBiZWVuIGEgd2lkZ2V0IHdpdGggYSBmb2N1c2VkIGVsZW1lbnQgdGhhdCBnb3RcclxuICAgIC8vIGhpZGRlbiBvciB1cGRhdGVkLCBpZiBzbyByZS1mb2N1cyBpdC5cclxuICAgIGlmIChmb2N1c2VkICYmIGFjdGl2ZUVsdCgpICE9IGZvY3VzZWQgJiYgZm9jdXNlZC5vZmZzZXRIZWlnaHQpIGZvY3VzZWQuZm9jdXMoKTtcclxuXHJcbiAgICAvLyBQcmV2ZW50IHNlbGVjdGlvbiBhbmQgY3Vyc29ycyBmcm9tIGludGVyZmVyaW5nIHdpdGggdGhlIHNjcm9sbFxyXG4gICAgLy8gd2lkdGguXHJcbiAgICByZW1vdmVDaGlsZHJlbihkaXNwbGF5LmN1cnNvckRpdik7XHJcbiAgICByZW1vdmVDaGlsZHJlbihkaXNwbGF5LnNlbGVjdGlvbkRpdik7XHJcblxyXG4gICAgaWYgKGRpZmZlcmVudCkge1xyXG4gICAgICBkaXNwbGF5Lmxhc3RTaXplQyA9IHVwZGF0ZS53cmFwcGVySGVpZ2h0O1xyXG4gICAgICBzdGFydFdvcmtlcihjbSwgNDAwKTtcclxuICAgIH1cclxuXHJcbiAgICBkaXNwbGF5LnVwZGF0ZUxpbmVOdW1iZXJzID0gbnVsbDtcclxuXHJcbiAgICByZXR1cm4gdHJ1ZTtcclxuICB9XHJcblxyXG4gIGZ1bmN0aW9uIHBvc3RVcGRhdGVEaXNwbGF5KGNtLCB1cGRhdGUpIHtcclxuICAgIHZhciBmb3JjZSA9IHVwZGF0ZS5mb3JjZSwgdmlld3BvcnQgPSB1cGRhdGUudmlld3BvcnQ7XHJcbiAgICBmb3IgKHZhciBmaXJzdCA9IHRydWU7OyBmaXJzdCA9IGZhbHNlKSB7XHJcbiAgICAgIGlmIChmaXJzdCAmJiBjbS5vcHRpb25zLmxpbmVXcmFwcGluZyAmJiB1cGRhdGUub2xkU2Nyb2xsZXJXaWR0aCAhPSBjbS5kaXNwbGF5LnNjcm9sbGVyLmNsaWVudFdpZHRoKSB7XHJcbiAgICAgICAgZm9yY2UgPSB0cnVlO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIGZvcmNlID0gZmFsc2U7XHJcbiAgICAgICAgLy8gQ2xpcCBmb3JjZWQgdmlld3BvcnQgdG8gYWN0dWFsIHNjcm9sbGFibGUgYXJlYS5cclxuICAgICAgICBpZiAodmlld3BvcnQgJiYgdmlld3BvcnQudG9wICE9IG51bGwpXHJcbiAgICAgICAgICB2aWV3cG9ydCA9IHt0b3A6IE1hdGgubWluKGNtLmRvYy5oZWlnaHQgKyBwYWRkaW5nVmVydChjbS5kaXNwbGF5KSAtIHNjcm9sbGVyQ3V0T2ZmIC1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY20uZGlzcGxheS5zY3JvbGxlci5jbGllbnRIZWlnaHQsIHZpZXdwb3J0LnRvcCl9O1xyXG4gICAgICAgIC8vIFVwZGF0ZWQgbGluZSBoZWlnaHRzIG1pZ2h0IHJlc3VsdCBpbiB0aGUgZHJhd24gYXJlYSBub3RcclxuICAgICAgICAvLyBhY3R1YWxseSBjb3ZlcmluZyB0aGUgdmlld3BvcnQuIEtlZXAgbG9vcGluZyB1bnRpbCBpdCBkb2VzLlxyXG4gICAgICAgIHVwZGF0ZS52aXNpYmxlID0gdmlzaWJsZUxpbmVzKGNtLmRpc3BsYXksIGNtLmRvYywgdmlld3BvcnQpO1xyXG4gICAgICAgIGlmICh1cGRhdGUudmlzaWJsZS5mcm9tID49IGNtLmRpc3BsYXkudmlld0Zyb20gJiYgdXBkYXRlLnZpc2libGUudG8gPD0gY20uZGlzcGxheS52aWV3VG8pXHJcbiAgICAgICAgICBicmVhaztcclxuICAgICAgfVxyXG4gICAgICBpZiAoIXVwZGF0ZURpc3BsYXlJZk5lZWRlZChjbSwgdXBkYXRlKSkgYnJlYWs7XHJcbiAgICAgIHVwZGF0ZUhlaWdodHNJblZpZXdwb3J0KGNtKTtcclxuICAgICAgdmFyIGJhck1lYXN1cmUgPSBtZWFzdXJlRm9yU2Nyb2xsYmFycyhjbSk7XHJcbiAgICAgIHVwZGF0ZVNlbGVjdGlvbihjbSk7XHJcbiAgICAgIHNldERvY3VtZW50SGVpZ2h0KGNtLCBiYXJNZWFzdXJlKTtcclxuICAgICAgdXBkYXRlU2Nyb2xsYmFycyhjbSwgYmFyTWVhc3VyZSk7XHJcbiAgICB9XHJcblxyXG4gICAgc2lnbmFsTGF0ZXIoY20sIFwidXBkYXRlXCIsIGNtKTtcclxuICAgIGlmIChjbS5kaXNwbGF5LnZpZXdGcm9tICE9IHVwZGF0ZS5vbGRWaWV3RnJvbSB8fCBjbS5kaXNwbGF5LnZpZXdUbyAhPSB1cGRhdGUub2xkVmlld1RvKVxyXG4gICAgICBzaWduYWxMYXRlcihjbSwgXCJ2aWV3cG9ydENoYW5nZVwiLCBjbSwgY20uZGlzcGxheS52aWV3RnJvbSwgY20uZGlzcGxheS52aWV3VG8pO1xyXG4gIH1cclxuXHJcbiAgZnVuY3Rpb24gdXBkYXRlRGlzcGxheVNpbXBsZShjbSwgdmlld3BvcnQpIHtcclxuICAgIHZhciB1cGRhdGUgPSBuZXcgRGlzcGxheVVwZGF0ZShjbSwgdmlld3BvcnQpO1xyXG4gICAgaWYgKHVwZGF0ZURpc3BsYXlJZk5lZWRlZChjbSwgdXBkYXRlKSkge1xyXG4gICAgICB1cGRhdGVIZWlnaHRzSW5WaWV3cG9ydChjbSk7XHJcbiAgICAgIHBvc3RVcGRhdGVEaXNwbGF5KGNtLCB1cGRhdGUpO1xyXG4gICAgICB2YXIgYmFyTWVhc3VyZSA9IG1lYXN1cmVGb3JTY3JvbGxiYXJzKGNtKTtcclxuICAgICAgdXBkYXRlU2VsZWN0aW9uKGNtKTtcclxuICAgICAgc2V0RG9jdW1lbnRIZWlnaHQoY20sIGJhck1lYXN1cmUpO1xyXG4gICAgICB1cGRhdGVTY3JvbGxiYXJzKGNtLCBiYXJNZWFzdXJlKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIGZ1bmN0aW9uIHNldERvY3VtZW50SGVpZ2h0KGNtLCBtZWFzdXJlKSB7XHJcbiAgICBjbS5kaXNwbGF5LnNpemVyLnN0eWxlLm1pbkhlaWdodCA9IGNtLmRpc3BsYXkuaGVpZ2h0Rm9yY2VyLnN0eWxlLnRvcCA9IG1lYXN1cmUuZG9jSGVpZ2h0ICsgXCJweFwiO1xyXG4gICAgY20uZGlzcGxheS5ndXR0ZXJzLnN0eWxlLmhlaWdodCA9IE1hdGgubWF4KG1lYXN1cmUuZG9jSGVpZ2h0LCBtZWFzdXJlLmNsaWVudEhlaWdodCAtIHNjcm9sbGVyQ3V0T2ZmKSArIFwicHhcIjtcclxuICB9XHJcblxyXG4gIGZ1bmN0aW9uIGNoZWNrRm9yV2Via2l0V2lkdGhCdWcoY20sIG1lYXN1cmUpIHtcclxuICAgIC8vIFdvcmsgYXJvdW5kIFdlYmtpdCBidWcgd2hlcmUgaXQgc29tZXRpbWVzIHJlc2VydmVzIHNwYWNlIGZvciBhXHJcbiAgICAvLyBub24tZXhpc3RpbmcgcGhhbnRvbSBzY3JvbGxiYXIgaW4gdGhlIHNjcm9sbGVyIChJc3N1ZSAjMjQyMClcclxuICAgIGlmIChjbS5kaXNwbGF5LnNpemVyLm9mZnNldFdpZHRoICsgY20uZGlzcGxheS5ndXR0ZXJzLm9mZnNldFdpZHRoIDwgY20uZGlzcGxheS5zY3JvbGxlci5jbGllbnRXaWR0aCAtIDEpIHtcclxuICAgICAgY20uZGlzcGxheS5zaXplci5zdHlsZS5taW5IZWlnaHQgPSBjbS5kaXNwbGF5LmhlaWdodEZvcmNlci5zdHlsZS50b3AgPSBcIjBweFwiO1xyXG4gICAgICBjbS5kaXNwbGF5Lmd1dHRlcnMuc3R5bGUuaGVpZ2h0ID0gbWVhc3VyZS5kb2NIZWlnaHQgKyBcInB4XCI7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvLyBSZWFkIHRoZSBhY3R1YWwgaGVpZ2h0cyBvZiB0aGUgcmVuZGVyZWQgbGluZXMsIGFuZCB1cGRhdGUgdGhlaXJcclxuICAvLyBzdG9yZWQgaGVpZ2h0cyB0byBtYXRjaC5cclxuICBmdW5jdGlvbiB1cGRhdGVIZWlnaHRzSW5WaWV3cG9ydChjbSkge1xyXG4gICAgdmFyIGRpc3BsYXkgPSBjbS5kaXNwbGF5O1xyXG4gICAgdmFyIHByZXZCb3R0b20gPSBkaXNwbGF5LmxpbmVEaXYub2Zmc2V0VG9wO1xyXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBkaXNwbGF5LnZpZXcubGVuZ3RoOyBpKyspIHtcclxuICAgICAgdmFyIGN1ciA9IGRpc3BsYXkudmlld1tpXSwgaGVpZ2h0O1xyXG4gICAgICBpZiAoY3VyLmhpZGRlbikgY29udGludWU7XHJcbiAgICAgIGlmIChpZSAmJiBpZV92ZXJzaW9uIDwgOCkge1xyXG4gICAgICAgIHZhciBib3QgPSBjdXIubm9kZS5vZmZzZXRUb3AgKyBjdXIubm9kZS5vZmZzZXRIZWlnaHQ7XHJcbiAgICAgICAgaGVpZ2h0ID0gYm90IC0gcHJldkJvdHRvbTtcclxuICAgICAgICBwcmV2Qm90dG9tID0gYm90O1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIHZhciBib3ggPSBjdXIubm9kZS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcclxuICAgICAgICBoZWlnaHQgPSBib3guYm90dG9tIC0gYm94LnRvcDtcclxuICAgICAgfVxyXG4gICAgICB2YXIgZGlmZiA9IGN1ci5saW5lLmhlaWdodCAtIGhlaWdodDtcclxuICAgICAgaWYgKGhlaWdodCA8IDIpIGhlaWdodCA9IHRleHRIZWlnaHQoZGlzcGxheSk7XHJcbiAgICAgIGlmIChkaWZmID4gLjAwMSB8fCBkaWZmIDwgLS4wMDEpIHtcclxuICAgICAgICB1cGRhdGVMaW5lSGVpZ2h0KGN1ci5saW5lLCBoZWlnaHQpO1xyXG4gICAgICAgIHVwZGF0ZVdpZGdldEhlaWdodChjdXIubGluZSk7XHJcbiAgICAgICAgaWYgKGN1ci5yZXN0KSBmb3IgKHZhciBqID0gMDsgaiA8IGN1ci5yZXN0Lmxlbmd0aDsgaisrKVxyXG4gICAgICAgICAgdXBkYXRlV2lkZ2V0SGVpZ2h0KGN1ci5yZXN0W2pdKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLy8gUmVhZCBhbmQgc3RvcmUgdGhlIGhlaWdodCBvZiBsaW5lIHdpZGdldHMgYXNzb2NpYXRlZCB3aXRoIHRoZVxyXG4gIC8vIGdpdmVuIGxpbmUuXHJcbiAgZnVuY3Rpb24gdXBkYXRlV2lkZ2V0SGVpZ2h0KGxpbmUpIHtcclxuICAgIGlmIChsaW5lLndpZGdldHMpIGZvciAodmFyIGkgPSAwOyBpIDwgbGluZS53aWRnZXRzLmxlbmd0aDsgKytpKVxyXG4gICAgICBsaW5lLndpZGdldHNbaV0uaGVpZ2h0ID0gbGluZS53aWRnZXRzW2ldLm5vZGUub2Zmc2V0SGVpZ2h0O1xyXG4gIH1cclxuXHJcbiAgLy8gRG8gYSBidWxrLXJlYWQgb2YgdGhlIERPTSBwb3NpdGlvbnMgYW5kIHNpemVzIG5lZWRlZCB0byBkcmF3IHRoZVxyXG4gIC8vIHZpZXcsIHNvIHRoYXQgd2UgZG9uJ3QgaW50ZXJsZWF2ZSByZWFkaW5nIGFuZCB3cml0aW5nIHRvIHRoZSBET00uXHJcbiAgZnVuY3Rpb24gZ2V0RGltZW5zaW9ucyhjbSkge1xyXG4gICAgdmFyIGQgPSBjbS5kaXNwbGF5LCBsZWZ0ID0ge30sIHdpZHRoID0ge307XHJcbiAgICBmb3IgKHZhciBuID0gZC5ndXR0ZXJzLmZpcnN0Q2hpbGQsIGkgPSAwOyBuOyBuID0gbi5uZXh0U2libGluZywgKytpKSB7XHJcbiAgICAgIGxlZnRbY20ub3B0aW9ucy5ndXR0ZXJzW2ldXSA9IG4ub2Zmc2V0TGVmdDtcclxuICAgICAgd2lkdGhbY20ub3B0aW9ucy5ndXR0ZXJzW2ldXSA9IG4ub2Zmc2V0V2lkdGg7XHJcbiAgICB9XHJcbiAgICByZXR1cm4ge2ZpeGVkUG9zOiBjb21wZW5zYXRlRm9ySFNjcm9sbChkKSxcclxuICAgICAgICAgICAgZ3V0dGVyVG90YWxXaWR0aDogZC5ndXR0ZXJzLm9mZnNldFdpZHRoLFxyXG4gICAgICAgICAgICBndXR0ZXJMZWZ0OiBsZWZ0LFxyXG4gICAgICAgICAgICBndXR0ZXJXaWR0aDogd2lkdGgsXHJcbiAgICAgICAgICAgIHdyYXBwZXJXaWR0aDogZC53cmFwcGVyLmNsaWVudFdpZHRofTtcclxuICB9XHJcblxyXG4gIC8vIFN5bmMgdGhlIGFjdHVhbCBkaXNwbGF5IERPTSBzdHJ1Y3R1cmUgd2l0aCBkaXNwbGF5LnZpZXcsIHJlbW92aW5nXHJcbiAgLy8gbm9kZXMgZm9yIGxpbmVzIHRoYXQgYXJlIG5vIGxvbmdlciBpbiB2aWV3LCBhbmQgY3JlYXRpbmcgdGhlIG9uZXNcclxuICAvLyB0aGF0IGFyZSBub3QgdGhlcmUgeWV0LCBhbmQgdXBkYXRpbmcgdGhlIG9uZXMgdGhhdCBhcmUgb3V0IG9mXHJcbiAgLy8gZGF0ZS5cclxuICBmdW5jdGlvbiBwYXRjaERpc3BsYXkoY20sIHVwZGF0ZU51bWJlcnNGcm9tLCBkaW1zKSB7XHJcbiAgICB2YXIgZGlzcGxheSA9IGNtLmRpc3BsYXksIGxpbmVOdW1iZXJzID0gY20ub3B0aW9ucy5saW5lTnVtYmVycztcclxuICAgIHZhciBjb250YWluZXIgPSBkaXNwbGF5LmxpbmVEaXYsIGN1ciA9IGNvbnRhaW5lci5maXJzdENoaWxkO1xyXG5cclxuICAgIGZ1bmN0aW9uIHJtKG5vZGUpIHtcclxuICAgICAgdmFyIG5leHQgPSBub2RlLm5leHRTaWJsaW5nO1xyXG4gICAgICAvLyBXb3JrcyBhcm91bmQgYSB0aHJvdy1zY3JvbGwgYnVnIGluIE9TIFggV2Via2l0XHJcbiAgICAgIGlmICh3ZWJraXQgJiYgbWFjICYmIGNtLmRpc3BsYXkuY3VycmVudFdoZWVsVGFyZ2V0ID09IG5vZGUpXHJcbiAgICAgICAgbm9kZS5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XHJcbiAgICAgIGVsc2VcclxuICAgICAgICBub2RlLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQobm9kZSk7XHJcbiAgICAgIHJldHVybiBuZXh0O1xyXG4gICAgfVxyXG5cclxuICAgIHZhciB2aWV3ID0gZGlzcGxheS52aWV3LCBsaW5lTiA9IGRpc3BsYXkudmlld0Zyb207XHJcbiAgICAvLyBMb29wIG92ZXIgdGhlIGVsZW1lbnRzIGluIHRoZSB2aWV3LCBzeW5jaW5nIGN1ciAodGhlIERPTSBub2Rlc1xyXG4gICAgLy8gaW4gZGlzcGxheS5saW5lRGl2KSB3aXRoIHRoZSB2aWV3IGFzIHdlIGdvLlxyXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCB2aWV3Lmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgIHZhciBsaW5lVmlldyA9IHZpZXdbaV07XHJcbiAgICAgIGlmIChsaW5lVmlldy5oaWRkZW4pIHtcclxuICAgICAgfSBlbHNlIGlmICghbGluZVZpZXcubm9kZSkgeyAvLyBOb3QgZHJhd24geWV0XHJcbiAgICAgICAgdmFyIG5vZGUgPSBidWlsZExpbmVFbGVtZW50KGNtLCBsaW5lVmlldywgbGluZU4sIGRpbXMpO1xyXG4gICAgICAgIGNvbnRhaW5lci5pbnNlcnRCZWZvcmUobm9kZSwgY3VyKTtcclxuICAgICAgfSBlbHNlIHsgLy8gQWxyZWFkeSBkcmF3blxyXG4gICAgICAgIHdoaWxlIChjdXIgIT0gbGluZVZpZXcubm9kZSkgY3VyID0gcm0oY3VyKTtcclxuICAgICAgICB2YXIgdXBkYXRlTnVtYmVyID0gbGluZU51bWJlcnMgJiYgdXBkYXRlTnVtYmVyc0Zyb20gIT0gbnVsbCAmJlxyXG4gICAgICAgICAgdXBkYXRlTnVtYmVyc0Zyb20gPD0gbGluZU4gJiYgbGluZVZpZXcubGluZU51bWJlcjtcclxuICAgICAgICBpZiAobGluZVZpZXcuY2hhbmdlcykge1xyXG4gICAgICAgICAgaWYgKGluZGV4T2YobGluZVZpZXcuY2hhbmdlcywgXCJndXR0ZXJcIikgPiAtMSkgdXBkYXRlTnVtYmVyID0gZmFsc2U7XHJcbiAgICAgICAgICB1cGRhdGVMaW5lRm9yQ2hhbmdlcyhjbSwgbGluZVZpZXcsIGxpbmVOLCBkaW1zKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHVwZGF0ZU51bWJlcikge1xyXG4gICAgICAgICAgcmVtb3ZlQ2hpbGRyZW4obGluZVZpZXcubGluZU51bWJlcik7XHJcbiAgICAgICAgICBsaW5lVmlldy5saW5lTnVtYmVyLmFwcGVuZENoaWxkKGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKGxpbmVOdW1iZXJGb3IoY20ub3B0aW9ucywgbGluZU4pKSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGN1ciA9IGxpbmVWaWV3Lm5vZGUubmV4dFNpYmxpbmc7XHJcbiAgICAgIH1cclxuICAgICAgbGluZU4gKz0gbGluZVZpZXcuc2l6ZTtcclxuICAgIH1cclxuICAgIHdoaWxlIChjdXIpIGN1ciA9IHJtKGN1cik7XHJcbiAgfVxyXG5cclxuICAvLyBXaGVuIGFuIGFzcGVjdCBvZiBhIGxpbmUgY2hhbmdlcywgYSBzdHJpbmcgaXMgYWRkZWQgdG9cclxuICAvLyBsaW5lVmlldy5jaGFuZ2VzLiBUaGlzIHVwZGF0ZXMgdGhlIHJlbGV2YW50IHBhcnQgb2YgdGhlIGxpbmUnc1xyXG4gIC8vIERPTSBzdHJ1Y3R1cmUuXHJcbiAgZnVuY3Rpb24gdXBkYXRlTGluZUZvckNoYW5nZXMoY20sIGxpbmVWaWV3LCBsaW5lTiwgZGltcykge1xyXG4gICAgZm9yICh2YXIgaiA9IDA7IGogPCBsaW5lVmlldy5jaGFuZ2VzLmxlbmd0aDsgaisrKSB7XHJcbiAgICAgIHZhciB0eXBlID0gbGluZVZpZXcuY2hhbmdlc1tqXTtcclxuICAgICAgaWYgKHR5cGUgPT0gXCJ0ZXh0XCIpIHVwZGF0ZUxpbmVUZXh0KGNtLCBsaW5lVmlldyk7XHJcbiAgICAgIGVsc2UgaWYgKHR5cGUgPT0gXCJndXR0ZXJcIikgdXBkYXRlTGluZUd1dHRlcihjbSwgbGluZVZpZXcsIGxpbmVOLCBkaW1zKTtcclxuICAgICAgZWxzZSBpZiAodHlwZSA9PSBcImNsYXNzXCIpIHVwZGF0ZUxpbmVDbGFzc2VzKGxpbmVWaWV3KTtcclxuICAgICAgZWxzZSBpZiAodHlwZSA9PSBcIndpZGdldFwiKSB1cGRhdGVMaW5lV2lkZ2V0cyhsaW5lVmlldywgZGltcyk7XHJcbiAgICB9XHJcbiAgICBsaW5lVmlldy5jaGFuZ2VzID0gbnVsbDtcclxuICB9XHJcblxyXG4gIC8vIExpbmVzIHdpdGggZ3V0dGVyIGVsZW1lbnRzLCB3aWRnZXRzIG9yIGEgYmFja2dyb3VuZCBjbGFzcyBuZWVkIHRvXHJcbiAgLy8gYmUgd3JhcHBlZCwgYW5kIGhhdmUgdGhlIGV4dHJhIGVsZW1lbnRzIGFkZGVkIHRvIHRoZSB3cmFwcGVyIGRpdlxyXG4gIGZ1bmN0aW9uIGVuc3VyZUxpbmVXcmFwcGVkKGxpbmVWaWV3KSB7XHJcbiAgICBpZiAobGluZVZpZXcubm9kZSA9PSBsaW5lVmlldy50ZXh0KSB7XHJcbiAgICAgIGxpbmVWaWV3Lm5vZGUgPSBlbHQoXCJkaXZcIiwgbnVsbCwgbnVsbCwgXCJwb3NpdGlvbjogcmVsYXRpdmVcIik7XHJcbiAgICAgIGlmIChsaW5lVmlldy50ZXh0LnBhcmVudE5vZGUpXHJcbiAgICAgICAgbGluZVZpZXcudGV4dC5wYXJlbnROb2RlLnJlcGxhY2VDaGlsZChsaW5lVmlldy5ub2RlLCBsaW5lVmlldy50ZXh0KTtcclxuICAgICAgbGluZVZpZXcubm9kZS5hcHBlbmRDaGlsZChsaW5lVmlldy50ZXh0KTtcclxuICAgICAgaWYgKGllICYmIGllX3ZlcnNpb24gPCA4KSBsaW5lVmlldy5ub2RlLnN0eWxlLnpJbmRleCA9IDI7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gbGluZVZpZXcubm9kZTtcclxuICB9XHJcblxyXG4gIGZ1bmN0aW9uIHVwZGF0ZUxpbmVCYWNrZ3JvdW5kKGxpbmVWaWV3KSB7XHJcbiAgICB2YXIgY2xzID0gbGluZVZpZXcuYmdDbGFzcyA/IGxpbmVWaWV3LmJnQ2xhc3MgKyBcIiBcIiArIChsaW5lVmlldy5saW5lLmJnQ2xhc3MgfHwgXCJcIikgOiBsaW5lVmlldy5saW5lLmJnQ2xhc3M7XHJcbiAgICBpZiAoY2xzKSBjbHMgKz0gXCIgQ29kZU1pcnJvci1saW5lYmFja2dyb3VuZFwiO1xyXG4gICAgaWYgKGxpbmVWaWV3LmJhY2tncm91bmQpIHtcclxuICAgICAgaWYgKGNscykgbGluZVZpZXcuYmFja2dyb3VuZC5jbGFzc05hbWUgPSBjbHM7XHJcbiAgICAgIGVsc2UgeyBsaW5lVmlldy5iYWNrZ3JvdW5kLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQobGluZVZpZXcuYmFja2dyb3VuZCk7IGxpbmVWaWV3LmJhY2tncm91bmQgPSBudWxsOyB9XHJcbiAgICB9IGVsc2UgaWYgKGNscykge1xyXG4gICAgICB2YXIgd3JhcCA9IGVuc3VyZUxpbmVXcmFwcGVkKGxpbmVWaWV3KTtcclxuICAgICAgbGluZVZpZXcuYmFja2dyb3VuZCA9IHdyYXAuaW5zZXJ0QmVmb3JlKGVsdChcImRpdlwiLCBudWxsLCBjbHMpLCB3cmFwLmZpcnN0Q2hpbGQpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLy8gV3JhcHBlciBhcm91bmQgYnVpbGRMaW5lQ29udGVudCB3aGljaCB3aWxsIHJldXNlIHRoZSBzdHJ1Y3R1cmVcclxuICAvLyBpbiBkaXNwbGF5LmV4dGVybmFsTWVhc3VyZWQgd2hlbiBwb3NzaWJsZS5cclxuICBmdW5jdGlvbiBnZXRMaW5lQ29udGVudChjbSwgbGluZVZpZXcpIHtcclxuICAgIHZhciBleHQgPSBjbS5kaXNwbGF5LmV4dGVybmFsTWVhc3VyZWQ7XHJcbiAgICBpZiAoZXh0ICYmIGV4dC5saW5lID09IGxpbmVWaWV3LmxpbmUpIHtcclxuICAgICAgY20uZGlzcGxheS5leHRlcm5hbE1lYXN1cmVkID0gbnVsbDtcclxuICAgICAgbGluZVZpZXcubWVhc3VyZSA9IGV4dC5tZWFzdXJlO1xyXG4gICAgICByZXR1cm4gZXh0LmJ1aWx0O1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIGJ1aWxkTGluZUNvbnRlbnQoY20sIGxpbmVWaWV3KTtcclxuICB9XHJcblxyXG4gIC8vIFJlZHJhdyB0aGUgbGluZSdzIHRleHQuIEludGVyYWN0cyB3aXRoIHRoZSBiYWNrZ3JvdW5kIGFuZCB0ZXh0XHJcbiAgLy8gY2xhc3NlcyBiZWNhdXNlIHRoZSBtb2RlIG1heSBvdXRwdXQgdG9rZW5zIHRoYXQgaW5mbHVlbmNlIHRoZXNlXHJcbiAgLy8gY2xhc3Nlcy5cclxuICBmdW5jdGlvbiB1cGRhdGVMaW5lVGV4dChjbSwgbGluZVZpZXcpIHtcclxuICAgIHZhciBjbHMgPSBsaW5lVmlldy50ZXh0LmNsYXNzTmFtZTtcclxuICAgIHZhciBidWlsdCA9IGdldExpbmVDb250ZW50KGNtLCBsaW5lVmlldyk7XHJcbiAgICBpZiAobGluZVZpZXcudGV4dCA9PSBsaW5lVmlldy5ub2RlKSBsaW5lVmlldy5ub2RlID0gYnVpbHQucHJlO1xyXG4gICAgbGluZVZpZXcudGV4dC5wYXJlbnROb2RlLnJlcGxhY2VDaGlsZChidWlsdC5wcmUsIGxpbmVWaWV3LnRleHQpO1xyXG4gICAgbGluZVZpZXcudGV4dCA9IGJ1aWx0LnByZTtcclxuICAgIGlmIChidWlsdC5iZ0NsYXNzICE9IGxpbmVWaWV3LmJnQ2xhc3MgfHwgYnVpbHQudGV4dENsYXNzICE9IGxpbmVWaWV3LnRleHRDbGFzcykge1xyXG4gICAgICBsaW5lVmlldy5iZ0NsYXNzID0gYnVpbHQuYmdDbGFzcztcclxuICAgICAgbGluZVZpZXcudGV4dENsYXNzID0gYnVpbHQudGV4dENsYXNzO1xyXG4gICAgICB1cGRhdGVMaW5lQ2xhc3NlcyhsaW5lVmlldyk7XHJcbiAgICB9IGVsc2UgaWYgKGNscykge1xyXG4gICAgICBsaW5lVmlldy50ZXh0LmNsYXNzTmFtZSA9IGNscztcclxuICAgIH1cclxuICB9XHJcblxyXG4gIGZ1bmN0aW9uIHVwZGF0ZUxpbmVDbGFzc2VzKGxpbmVWaWV3KSB7XHJcbiAgICB1cGRhdGVMaW5lQmFja2dyb3VuZChsaW5lVmlldyk7XHJcbiAgICBpZiAobGluZVZpZXcubGluZS53cmFwQ2xhc3MpXHJcbiAgICAgIGVuc3VyZUxpbmVXcmFwcGVkKGxpbmVWaWV3KS5jbGFzc05hbWUgPSBsaW5lVmlldy5saW5lLndyYXBDbGFzcztcclxuICAgIGVsc2UgaWYgKGxpbmVWaWV3Lm5vZGUgIT0gbGluZVZpZXcudGV4dClcclxuICAgICAgbGluZVZpZXcubm9kZS5jbGFzc05hbWUgPSBcIlwiO1xyXG4gICAgdmFyIHRleHRDbGFzcyA9IGxpbmVWaWV3LnRleHRDbGFzcyA/IGxpbmVWaWV3LnRleHRDbGFzcyArIFwiIFwiICsgKGxpbmVWaWV3LmxpbmUudGV4dENsYXNzIHx8IFwiXCIpIDogbGluZVZpZXcubGluZS50ZXh0Q2xhc3M7XHJcbiAgICBsaW5lVmlldy50ZXh0LmNsYXNzTmFtZSA9IHRleHRDbGFzcyB8fCBcIlwiO1xyXG4gIH1cclxuXHJcbiAgZnVuY3Rpb24gdXBkYXRlTGluZUd1dHRlcihjbSwgbGluZVZpZXcsIGxpbmVOLCBkaW1zKSB7XHJcbiAgICBpZiAobGluZVZpZXcuZ3V0dGVyKSB7XHJcbiAgICAgIGxpbmVWaWV3Lm5vZGUucmVtb3ZlQ2hpbGQobGluZVZpZXcuZ3V0dGVyKTtcclxuICAgICAgbGluZVZpZXcuZ3V0dGVyID0gbnVsbDtcclxuICAgIH1cclxuICAgIHZhciBtYXJrZXJzID0gbGluZVZpZXcubGluZS5ndXR0ZXJNYXJrZXJzO1xyXG4gICAgaWYgKGNtLm9wdGlvbnMubGluZU51bWJlcnMgfHwgbWFya2Vycykge1xyXG4gICAgICB2YXIgd3JhcCA9IGVuc3VyZUxpbmVXcmFwcGVkKGxpbmVWaWV3KTtcclxuICAgICAgdmFyIGd1dHRlcldyYXAgPSBsaW5lVmlldy5ndXR0ZXIgPVxyXG4gICAgICAgIHdyYXAuaW5zZXJ0QmVmb3JlKGVsdChcImRpdlwiLCBudWxsLCBcIkNvZGVNaXJyb3ItZ3V0dGVyLXdyYXBwZXJcIiwgXCJwb3NpdGlvbjogYWJzb2x1dGU7IGxlZnQ6IFwiICtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKGNtLm9wdGlvbnMuZml4ZWRHdXR0ZXIgPyBkaW1zLmZpeGVkUG9zIDogLWRpbXMuZ3V0dGVyVG90YWxXaWR0aCkgKyBcInB4XCIpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGxpbmVWaWV3LnRleHQpO1xyXG4gICAgICBpZiAoY20ub3B0aW9ucy5saW5lTnVtYmVycyAmJiAoIW1hcmtlcnMgfHwgIW1hcmtlcnNbXCJDb2RlTWlycm9yLWxpbmVudW1iZXJzXCJdKSlcclxuICAgICAgICBsaW5lVmlldy5saW5lTnVtYmVyID0gZ3V0dGVyV3JhcC5hcHBlbmRDaGlsZChcclxuICAgICAgICAgIGVsdChcImRpdlwiLCBsaW5lTnVtYmVyRm9yKGNtLm9wdGlvbnMsIGxpbmVOKSxcclxuICAgICAgICAgICAgICBcIkNvZGVNaXJyb3ItbGluZW51bWJlciBDb2RlTWlycm9yLWd1dHRlci1lbHRcIixcclxuICAgICAgICAgICAgICBcImxlZnQ6IFwiICsgZGltcy5ndXR0ZXJMZWZ0W1wiQ29kZU1pcnJvci1saW5lbnVtYmVyc1wiXSArIFwicHg7IHdpZHRoOiBcIlxyXG4gICAgICAgICAgICAgICsgY20uZGlzcGxheS5saW5lTnVtSW5uZXJXaWR0aCArIFwicHhcIikpO1xyXG4gICAgICBpZiAobWFya2VycykgZm9yICh2YXIgayA9IDA7IGsgPCBjbS5vcHRpb25zLmd1dHRlcnMubGVuZ3RoOyArK2spIHtcclxuICAgICAgICB2YXIgaWQgPSBjbS5vcHRpb25zLmd1dHRlcnNba10sIGZvdW5kID0gbWFya2Vycy5oYXNPd25Qcm9wZXJ0eShpZCkgJiYgbWFya2Vyc1tpZF07XHJcbiAgICAgICAgaWYgKGZvdW5kKVxyXG4gICAgICAgICAgZ3V0dGVyV3JhcC5hcHBlbmRDaGlsZChlbHQoXCJkaXZcIiwgW2ZvdW5kXSwgXCJDb2RlTWlycm9yLWd1dHRlci1lbHRcIiwgXCJsZWZ0OiBcIiArXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkaW1zLmd1dHRlckxlZnRbaWRdICsgXCJweDsgd2lkdGg6IFwiICsgZGltcy5ndXR0ZXJXaWR0aFtpZF0gKyBcInB4XCIpKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgZnVuY3Rpb24gdXBkYXRlTGluZVdpZGdldHMobGluZVZpZXcsIGRpbXMpIHtcclxuICAgIGlmIChsaW5lVmlldy5hbGlnbmFibGUpIGxpbmVWaWV3LmFsaWduYWJsZSA9IG51bGw7XHJcbiAgICBmb3IgKHZhciBub2RlID0gbGluZVZpZXcubm9kZS5maXJzdENoaWxkLCBuZXh0OyBub2RlOyBub2RlID0gbmV4dCkge1xyXG4gICAgICB2YXIgbmV4dCA9IG5vZGUubmV4dFNpYmxpbmc7XHJcbiAgICAgIGlmIChub2RlLmNsYXNzTmFtZSA9PSBcIkNvZGVNaXJyb3ItbGluZXdpZGdldFwiKVxyXG4gICAgICAgIGxpbmVWaWV3Lm5vZGUucmVtb3ZlQ2hpbGQobm9kZSk7XHJcbiAgICB9XHJcbiAgICBpbnNlcnRMaW5lV2lkZ2V0cyhsaW5lVmlldywgZGltcyk7XHJcbiAgfVxyXG5cclxuICAvLyBCdWlsZCBhIGxpbmUncyBET00gcmVwcmVzZW50YXRpb24gZnJvbSBzY3JhdGNoXHJcbiAgZnVuY3Rpb24gYnVpbGRMaW5lRWxlbWVudChjbSwgbGluZVZpZXcsIGxpbmVOLCBkaW1zKSB7XHJcbiAgICB2YXIgYnVpbHQgPSBnZXRMaW5lQ29udGVudChjbSwgbGluZVZpZXcpO1xyXG4gICAgbGluZVZpZXcudGV4dCA9IGxpbmVWaWV3Lm5vZGUgPSBidWlsdC5wcmU7XHJcbiAgICBpZiAoYnVpbHQuYmdDbGFzcykgbGluZVZpZXcuYmdDbGFzcyA9IGJ1aWx0LmJnQ2xhc3M7XHJcbiAgICBpZiAoYnVpbHQudGV4dENsYXNzKSBsaW5lVmlldy50ZXh0Q2xhc3MgPSBidWlsdC50ZXh0Q2xhc3M7XHJcblxyXG4gICAgdXBkYXRlTGluZUNsYXNzZXMobGluZVZpZXcpO1xyXG4gICAgdXBkYXRlTGluZUd1dHRlcihjbSwgbGluZVZpZXcsIGxpbmVOLCBkaW1zKTtcclxuICAgIGluc2VydExpbmVXaWRnZXRzKGxpbmVWaWV3LCBkaW1zKTtcclxuICAgIHJldHVybiBsaW5lVmlldy5ub2RlO1xyXG4gIH1cclxuXHJcbiAgLy8gQSBsaW5lVmlldyBtYXkgY29udGFpbiBtdWx0aXBsZSBsb2dpY2FsIGxpbmVzICh3aGVuIG1lcmdlZCBieVxyXG4gIC8vIGNvbGxhcHNlZCBzcGFucykuIFRoZSB3aWRnZXRzIGZvciBhbGwgb2YgdGhlbSBuZWVkIHRvIGJlIGRyYXduLlxyXG4gIGZ1bmN0aW9uIGluc2VydExpbmVXaWRnZXRzKGxpbmVWaWV3LCBkaW1zKSB7XHJcbiAgICBpbnNlcnRMaW5lV2lkZ2V0c0ZvcihsaW5lVmlldy5saW5lLCBsaW5lVmlldywgZGltcywgdHJ1ZSk7XHJcbiAgICBpZiAobGluZVZpZXcucmVzdCkgZm9yICh2YXIgaSA9IDA7IGkgPCBsaW5lVmlldy5yZXN0Lmxlbmd0aDsgaSsrKVxyXG4gICAgICBpbnNlcnRMaW5lV2lkZ2V0c0ZvcihsaW5lVmlldy5yZXN0W2ldLCBsaW5lVmlldywgZGltcywgZmFsc2UpO1xyXG4gIH1cclxuXHJcbiAgZnVuY3Rpb24gaW5zZXJ0TGluZVdpZGdldHNGb3IobGluZSwgbGluZVZpZXcsIGRpbXMsIGFsbG93QWJvdmUpIHtcclxuICAgIGlmICghbGluZS53aWRnZXRzKSByZXR1cm47XHJcbiAgICB2YXIgd3JhcCA9IGVuc3VyZUxpbmVXcmFwcGVkKGxpbmVWaWV3KTtcclxuICAgIGZvciAodmFyIGkgPSAwLCB3cyA9IGxpbmUud2lkZ2V0czsgaSA8IHdzLmxlbmd0aDsgKytpKSB7XHJcbiAgICAgIHZhciB3aWRnZXQgPSB3c1tpXSwgbm9kZSA9IGVsdChcImRpdlwiLCBbd2lkZ2V0Lm5vZGVdLCBcIkNvZGVNaXJyb3ItbGluZXdpZGdldFwiKTtcclxuICAgICAgaWYgKCF3aWRnZXQuaGFuZGxlTW91c2VFdmVudHMpIG5vZGUuaWdub3JlRXZlbnRzID0gdHJ1ZTtcclxuICAgICAgcG9zaXRpb25MaW5lV2lkZ2V0KHdpZGdldCwgbm9kZSwgbGluZVZpZXcsIGRpbXMpO1xyXG4gICAgICBpZiAoYWxsb3dBYm92ZSAmJiB3aWRnZXQuYWJvdmUpXHJcbiAgICAgICAgd3JhcC5pbnNlcnRCZWZvcmUobm9kZSwgbGluZVZpZXcuZ3V0dGVyIHx8IGxpbmVWaWV3LnRleHQpO1xyXG4gICAgICBlbHNlXHJcbiAgICAgICAgd3JhcC5hcHBlbmRDaGlsZChub2RlKTtcclxuICAgICAgc2lnbmFsTGF0ZXIod2lkZ2V0LCBcInJlZHJhd1wiKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIGZ1bmN0aW9uIHBvc2l0aW9uTGluZVdpZGdldCh3aWRnZXQsIG5vZGUsIGxpbmVWaWV3LCBkaW1zKSB7XHJcbiAgICBpZiAod2lkZ2V0Lm5vSFNjcm9sbCkge1xyXG4gICAgICAobGluZVZpZXcuYWxpZ25hYmxlIHx8IChsaW5lVmlldy5hbGlnbmFibGUgPSBbXSkpLnB1c2gobm9kZSk7XHJcbiAgICAgIHZhciB3aWR0aCA9IGRpbXMud3JhcHBlcldpZHRoO1xyXG4gICAgICBub2RlLnN0eWxlLmxlZnQgPSBkaW1zLmZpeGVkUG9zICsgXCJweFwiO1xyXG4gICAgICBpZiAoIXdpZGdldC5jb3Zlckd1dHRlcikge1xyXG4gICAgICAgIHdpZHRoIC09IGRpbXMuZ3V0dGVyVG90YWxXaWR0aDtcclxuICAgICAgICBub2RlLnN0eWxlLnBhZGRpbmdMZWZ0ID0gZGltcy5ndXR0ZXJUb3RhbFdpZHRoICsgXCJweFwiO1xyXG4gICAgICB9XHJcbiAgICAgIG5vZGUuc3R5bGUud2lkdGggPSB3aWR0aCArIFwicHhcIjtcclxuICAgIH1cclxuICAgIGlmICh3aWRnZXQuY292ZXJHdXR0ZXIpIHtcclxuICAgICAgbm9kZS5zdHlsZS56SW5kZXggPSA1O1xyXG4gICAgICBub2RlLnN0eWxlLnBvc2l0aW9uID0gXCJyZWxhdGl2ZVwiO1xyXG4gICAgICBpZiAoIXdpZGdldC5ub0hTY3JvbGwpIG5vZGUuc3R5bGUubWFyZ2luTGVmdCA9IC1kaW1zLmd1dHRlclRvdGFsV2lkdGggKyBcInB4XCI7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvLyBQT1NJVElPTiBPQkpFQ1RcclxuXHJcbiAgLy8gQSBQb3MgaW5zdGFuY2UgcmVwcmVzZW50cyBhIHBvc2l0aW9uIHdpdGhpbiB0aGUgdGV4dC5cclxuICB2YXIgUG9zID0gQ29kZU1pcnJvci5Qb3MgPSBmdW5jdGlvbihsaW5lLCBjaCkge1xyXG4gICAgaWYgKCEodGhpcyBpbnN0YW5jZW9mIFBvcykpIHJldHVybiBuZXcgUG9zKGxpbmUsIGNoKTtcclxuICAgIHRoaXMubGluZSA9IGxpbmU7IHRoaXMuY2ggPSBjaDtcclxuICB9O1xyXG5cclxuICAvLyBDb21wYXJlIHR3byBwb3NpdGlvbnMsIHJldHVybiAwIGlmIHRoZXkgYXJlIHRoZSBzYW1lLCBhIG5lZ2F0aXZlXHJcbiAgLy8gbnVtYmVyIHdoZW4gYSBpcyBsZXNzLCBhbmQgYSBwb3NpdGl2ZSBudW1iZXIgb3RoZXJ3aXNlLlxyXG4gIHZhciBjbXAgPSBDb2RlTWlycm9yLmNtcFBvcyA9IGZ1bmN0aW9uKGEsIGIpIHsgcmV0dXJuIGEubGluZSAtIGIubGluZSB8fCBhLmNoIC0gYi5jaDsgfTtcclxuXHJcbiAgZnVuY3Rpb24gY29weVBvcyh4KSB7cmV0dXJuIFBvcyh4LmxpbmUsIHguY2gpO31cclxuICBmdW5jdGlvbiBtYXhQb3MoYSwgYikgeyByZXR1cm4gY21wKGEsIGIpIDwgMCA/IGIgOiBhOyB9XHJcbiAgZnVuY3Rpb24gbWluUG9zKGEsIGIpIHsgcmV0dXJuIGNtcChhLCBiKSA8IDAgPyBhIDogYjsgfVxyXG5cclxuICAvLyBTRUxFQ1RJT04gLyBDVVJTT1JcclxuXHJcbiAgLy8gU2VsZWN0aW9uIG9iamVjdHMgYXJlIGltbXV0YWJsZS4gQSBuZXcgb25lIGlzIGNyZWF0ZWQgZXZlcnkgdGltZVxyXG4gIC8vIHRoZSBzZWxlY3Rpb24gY2hhbmdlcy4gQSBzZWxlY3Rpb24gaXMgb25lIG9yIG1vcmUgbm9uLW92ZXJsYXBwaW5nXHJcbiAgLy8gKGFuZCBub24tdG91Y2hpbmcpIHJhbmdlcywgc29ydGVkLCBhbmQgYW4gaW50ZWdlciB0aGF0IGluZGljYXRlc1xyXG4gIC8vIHdoaWNoIG9uZSBpcyB0aGUgcHJpbWFyeSBzZWxlY3Rpb24gKHRoZSBvbmUgdGhhdCdzIHNjcm9sbGVkIGludG9cclxuICAvLyB2aWV3LCB0aGF0IGdldEN1cnNvciByZXR1cm5zLCBldGMpLlxyXG4gIGZ1bmN0aW9uIFNlbGVjdGlvbihyYW5nZXMsIHByaW1JbmRleCkge1xyXG4gICAgdGhpcy5yYW5nZXMgPSByYW5nZXM7XHJcbiAgICB0aGlzLnByaW1JbmRleCA9IHByaW1JbmRleDtcclxuICB9XHJcblxyXG4gIFNlbGVjdGlvbi5wcm90b3R5cGUgPSB7XHJcbiAgICBwcmltYXJ5OiBmdW5jdGlvbigpIHsgcmV0dXJuIHRoaXMucmFuZ2VzW3RoaXMucHJpbUluZGV4XTsgfSxcclxuICAgIGVxdWFsczogZnVuY3Rpb24ob3RoZXIpIHtcclxuICAgICAgaWYgKG90aGVyID09IHRoaXMpIHJldHVybiB0cnVlO1xyXG4gICAgICBpZiAob3RoZXIucHJpbUluZGV4ICE9IHRoaXMucHJpbUluZGV4IHx8IG90aGVyLnJhbmdlcy5sZW5ndGggIT0gdGhpcy5yYW5nZXMubGVuZ3RoKSByZXR1cm4gZmFsc2U7XHJcbiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5yYW5nZXMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICB2YXIgaGVyZSA9IHRoaXMucmFuZ2VzW2ldLCB0aGVyZSA9IG90aGVyLnJhbmdlc1tpXTtcclxuICAgICAgICBpZiAoY21wKGhlcmUuYW5jaG9yLCB0aGVyZS5hbmNob3IpICE9IDAgfHwgY21wKGhlcmUuaGVhZCwgdGhlcmUuaGVhZCkgIT0gMCkgcmV0dXJuIGZhbHNlO1xyXG4gICAgICB9XHJcbiAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgfSxcclxuICAgIGRlZXBDb3B5OiBmdW5jdGlvbigpIHtcclxuICAgICAgZm9yICh2YXIgb3V0ID0gW10sIGkgPSAwOyBpIDwgdGhpcy5yYW5nZXMubGVuZ3RoOyBpKyspXHJcbiAgICAgICAgb3V0W2ldID0gbmV3IFJhbmdlKGNvcHlQb3ModGhpcy5yYW5nZXNbaV0uYW5jaG9yKSwgY29weVBvcyh0aGlzLnJhbmdlc1tpXS5oZWFkKSk7XHJcbiAgICAgIHJldHVybiBuZXcgU2VsZWN0aW9uKG91dCwgdGhpcy5wcmltSW5kZXgpO1xyXG4gICAgfSxcclxuICAgIHNvbWV0aGluZ1NlbGVjdGVkOiBmdW5jdGlvbigpIHtcclxuICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLnJhbmdlcy5sZW5ndGg7IGkrKylcclxuICAgICAgICBpZiAoIXRoaXMucmFuZ2VzW2ldLmVtcHR5KCkpIHJldHVybiB0cnVlO1xyXG4gICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9LFxyXG4gICAgY29udGFpbnM6IGZ1bmN0aW9uKHBvcywgZW5kKSB7XHJcbiAgICAgIGlmICghZW5kKSBlbmQgPSBwb3M7XHJcbiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5yYW5nZXMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICB2YXIgcmFuZ2UgPSB0aGlzLnJhbmdlc1tpXTtcclxuICAgICAgICBpZiAoY21wKGVuZCwgcmFuZ2UuZnJvbSgpKSA+PSAwICYmIGNtcChwb3MsIHJhbmdlLnRvKCkpIDw9IDApXHJcbiAgICAgICAgICByZXR1cm4gaTtcclxuICAgICAgfVxyXG4gICAgICByZXR1cm4gLTE7XHJcbiAgICB9XHJcbiAgfTtcclxuXHJcbiAgZnVuY3Rpb24gUmFuZ2UoYW5jaG9yLCBoZWFkKSB7XHJcbiAgICB0aGlzLmFuY2hvciA9IGFuY2hvcjsgdGhpcy5oZWFkID0gaGVhZDtcclxuICB9XHJcblxyXG4gIFJhbmdlLnByb3RvdHlwZSA9IHtcclxuICAgIGZyb206IGZ1bmN0aW9uKCkgeyByZXR1cm4gbWluUG9zKHRoaXMuYW5jaG9yLCB0aGlzLmhlYWQpOyB9LFxyXG4gICAgdG86IGZ1bmN0aW9uKCkgeyByZXR1cm4gbWF4UG9zKHRoaXMuYW5jaG9yLCB0aGlzLmhlYWQpOyB9LFxyXG4gICAgZW1wdHk6IGZ1bmN0aW9uKCkge1xyXG4gICAgICByZXR1cm4gdGhpcy5oZWFkLmxpbmUgPT0gdGhpcy5hbmNob3IubGluZSAmJiB0aGlzLmhlYWQuY2ggPT0gdGhpcy5hbmNob3IuY2g7XHJcbiAgICB9XHJcbiAgfTtcclxuXHJcbiAgLy8gVGFrZSBhbiB1bnNvcnRlZCwgcG90ZW50aWFsbHkgb3ZlcmxhcHBpbmcgc2V0IG9mIHJhbmdlcywgYW5kXHJcbiAgLy8gYnVpbGQgYSBzZWxlY3Rpb24gb3V0IG9mIGl0LiAnQ29uc3VtZXMnIHJhbmdlcyBhcnJheSAobW9kaWZ5aW5nXHJcbiAgLy8gaXQpLlxyXG4gIGZ1bmN0aW9uIG5vcm1hbGl6ZVNlbGVjdGlvbihyYW5nZXMsIHByaW1JbmRleCkge1xyXG4gICAgdmFyIHByaW0gPSByYW5nZXNbcHJpbUluZGV4XTtcclxuICAgIHJhbmdlcy5zb3J0KGZ1bmN0aW9uKGEsIGIpIHsgcmV0dXJuIGNtcChhLmZyb20oKSwgYi5mcm9tKCkpOyB9KTtcclxuICAgIHByaW1JbmRleCA9IGluZGV4T2YocmFuZ2VzLCBwcmltKTtcclxuICAgIGZvciAodmFyIGkgPSAxOyBpIDwgcmFuZ2VzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgIHZhciBjdXIgPSByYW5nZXNbaV0sIHByZXYgPSByYW5nZXNbaSAtIDFdO1xyXG4gICAgICBpZiAoY21wKHByZXYudG8oKSwgY3VyLmZyb20oKSkgPj0gMCkge1xyXG4gICAgICAgIHZhciBmcm9tID0gbWluUG9zKHByZXYuZnJvbSgpLCBjdXIuZnJvbSgpKSwgdG8gPSBtYXhQb3MocHJldi50bygpLCBjdXIudG8oKSk7XHJcbiAgICAgICAgdmFyIGludiA9IHByZXYuZW1wdHkoKSA/IGN1ci5mcm9tKCkgPT0gY3VyLmhlYWQgOiBwcmV2LmZyb20oKSA9PSBwcmV2LmhlYWQ7XHJcbiAgICAgICAgaWYgKGkgPD0gcHJpbUluZGV4KSAtLXByaW1JbmRleDtcclxuICAgICAgICByYW5nZXMuc3BsaWNlKC0taSwgMiwgbmV3IFJhbmdlKGludiA/IHRvIDogZnJvbSwgaW52ID8gZnJvbSA6IHRvKSk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIHJldHVybiBuZXcgU2VsZWN0aW9uKHJhbmdlcywgcHJpbUluZGV4KTtcclxuICB9XHJcblxyXG4gIGZ1bmN0aW9uIHNpbXBsZVNlbGVjdGlvbihhbmNob3IsIGhlYWQpIHtcclxuICAgIHJldHVybiBuZXcgU2VsZWN0aW9uKFtuZXcgUmFuZ2UoYW5jaG9yLCBoZWFkIHx8IGFuY2hvcildLCAwKTtcclxuICB9XHJcblxyXG4gIC8vIE1vc3Qgb2YgdGhlIGV4dGVybmFsIEFQSSBjbGlwcyBnaXZlbiBwb3NpdGlvbnMgdG8gbWFrZSBzdXJlIHRoZXlcclxuICAvLyBhY3R1YWxseSBleGlzdCB3aXRoaW4gdGhlIGRvY3VtZW50LlxyXG4gIGZ1bmN0aW9uIGNsaXBMaW5lKGRvYywgbikge3JldHVybiBNYXRoLm1heChkb2MuZmlyc3QsIE1hdGgubWluKG4sIGRvYy5maXJzdCArIGRvYy5zaXplIC0gMSkpO31cclxuICBmdW5jdGlvbiBjbGlwUG9zKGRvYywgcG9zKSB7XHJcbiAgICBpZiAocG9zLmxpbmUgPCBkb2MuZmlyc3QpIHJldHVybiBQb3MoZG9jLmZpcnN0LCAwKTtcclxuICAgIHZhciBsYXN0ID0gZG9jLmZpcnN0ICsgZG9jLnNpemUgLSAxO1xyXG4gICAgaWYgKHBvcy5saW5lID4gbGFzdCkgcmV0dXJuIFBvcyhsYXN0LCBnZXRMaW5lKGRvYywgbGFzdCkudGV4dC5sZW5ndGgpO1xyXG4gICAgcmV0dXJuIGNsaXBUb0xlbihwb3MsIGdldExpbmUoZG9jLCBwb3MubGluZSkudGV4dC5sZW5ndGgpO1xyXG4gIH1cclxuICBmdW5jdGlvbiBjbGlwVG9MZW4ocG9zLCBsaW5lbGVuKSB7XHJcbiAgICB2YXIgY2ggPSBwb3MuY2g7XHJcbiAgICBpZiAoY2ggPT0gbnVsbCB8fCBjaCA+IGxpbmVsZW4pIHJldHVybiBQb3MocG9zLmxpbmUsIGxpbmVsZW4pO1xyXG4gICAgZWxzZSBpZiAoY2ggPCAwKSByZXR1cm4gUG9zKHBvcy5saW5lLCAwKTtcclxuICAgIGVsc2UgcmV0dXJuIHBvcztcclxuICB9XHJcbiAgZnVuY3Rpb24gaXNMaW5lKGRvYywgbCkge3JldHVybiBsID49IGRvYy5maXJzdCAmJiBsIDwgZG9jLmZpcnN0ICsgZG9jLnNpemU7fVxyXG4gIGZ1bmN0aW9uIGNsaXBQb3NBcnJheShkb2MsIGFycmF5KSB7XHJcbiAgICBmb3IgKHZhciBvdXQgPSBbXSwgaSA9IDA7IGkgPCBhcnJheS5sZW5ndGg7IGkrKykgb3V0W2ldID0gY2xpcFBvcyhkb2MsIGFycmF5W2ldKTtcclxuICAgIHJldHVybiBvdXQ7XHJcbiAgfVxyXG5cclxuICAvLyBTRUxFQ1RJT04gVVBEQVRFU1xyXG5cclxuICAvLyBUaGUgJ3Njcm9sbCcgcGFyYW1ldGVyIGdpdmVuIHRvIG1hbnkgb2YgdGhlc2UgaW5kaWNhdGVkIHdoZXRoZXJcclxuICAvLyB0aGUgbmV3IGN1cnNvciBwb3NpdGlvbiBzaG91bGQgYmUgc2Nyb2xsZWQgaW50byB2aWV3IGFmdGVyXHJcbiAgLy8gbW9kaWZ5aW5nIHRoZSBzZWxlY3Rpb24uXHJcblxyXG4gIC8vIElmIHNoaWZ0IGlzIGhlbGQgb3IgdGhlIGV4dGVuZCBmbGFnIGlzIHNldCwgZXh0ZW5kcyBhIHJhbmdlIHRvXHJcbiAgLy8gaW5jbHVkZSBhIGdpdmVuIHBvc2l0aW9uIChhbmQgb3B0aW9uYWxseSBhIHNlY29uZCBwb3NpdGlvbikuXHJcbiAgLy8gT3RoZXJ3aXNlLCBzaW1wbHkgcmV0dXJucyB0aGUgcmFuZ2UgYmV0d2VlbiB0aGUgZ2l2ZW4gcG9zaXRpb25zLlxyXG4gIC8vIFVzZWQgZm9yIGN1cnNvciBtb3Rpb24gYW5kIHN1Y2guXHJcbiAgZnVuY3Rpb24gZXh0ZW5kUmFuZ2UoZG9jLCByYW5nZSwgaGVhZCwgb3RoZXIpIHtcclxuICAgIGlmIChkb2MuY20gJiYgZG9jLmNtLmRpc3BsYXkuc2hpZnQgfHwgZG9jLmV4dGVuZCkge1xyXG4gICAgICB2YXIgYW5jaG9yID0gcmFuZ2UuYW5jaG9yO1xyXG4gICAgICBpZiAob3RoZXIpIHtcclxuICAgICAgICB2YXIgcG9zQmVmb3JlID0gY21wKGhlYWQsIGFuY2hvcikgPCAwO1xyXG4gICAgICAgIGlmIChwb3NCZWZvcmUgIT0gKGNtcChvdGhlciwgYW5jaG9yKSA8IDApKSB7XHJcbiAgICAgICAgICBhbmNob3IgPSBoZWFkO1xyXG4gICAgICAgICAgaGVhZCA9IG90aGVyO1xyXG4gICAgICAgIH0gZWxzZSBpZiAocG9zQmVmb3JlICE9IChjbXAoaGVhZCwgb3RoZXIpIDwgMCkpIHtcclxuICAgICAgICAgIGhlYWQgPSBvdGhlcjtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgICAgcmV0dXJuIG5ldyBSYW5nZShhbmNob3IsIGhlYWQpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgcmV0dXJuIG5ldyBSYW5nZShvdGhlciB8fCBoZWFkLCBoZWFkKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8vIEV4dGVuZCB0aGUgcHJpbWFyeSBzZWxlY3Rpb24gcmFuZ2UsIGRpc2NhcmQgdGhlIHJlc3QuXHJcbiAgZnVuY3Rpb24gZXh0ZW5kU2VsZWN0aW9uKGRvYywgaGVhZCwgb3RoZXIsIG9wdGlvbnMpIHtcclxuICAgIHNldFNlbGVjdGlvbihkb2MsIG5ldyBTZWxlY3Rpb24oW2V4dGVuZFJhbmdlKGRvYywgZG9jLnNlbC5wcmltYXJ5KCksIGhlYWQsIG90aGVyKV0sIDApLCBvcHRpb25zKTtcclxuICB9XHJcblxyXG4gIC8vIEV4dGVuZCBhbGwgc2VsZWN0aW9ucyAocG9zIGlzIGFuIGFycmF5IG9mIHNlbGVjdGlvbnMgd2l0aCBsZW5ndGhcclxuICAvLyBlcXVhbCB0aGUgbnVtYmVyIG9mIHNlbGVjdGlvbnMpXHJcbiAgZnVuY3Rpb24gZXh0ZW5kU2VsZWN0aW9ucyhkb2MsIGhlYWRzLCBvcHRpb25zKSB7XHJcbiAgICBmb3IgKHZhciBvdXQgPSBbXSwgaSA9IDA7IGkgPCBkb2Muc2VsLnJhbmdlcy5sZW5ndGg7IGkrKylcclxuICAgICAgb3V0W2ldID0gZXh0ZW5kUmFuZ2UoZG9jLCBkb2Muc2VsLnJhbmdlc1tpXSwgaGVhZHNbaV0sIG51bGwpO1xyXG4gICAgdmFyIG5ld1NlbCA9IG5vcm1hbGl6ZVNlbGVjdGlvbihvdXQsIGRvYy5zZWwucHJpbUluZGV4KTtcclxuICAgIHNldFNlbGVjdGlvbihkb2MsIG5ld1NlbCwgb3B0aW9ucyk7XHJcbiAgfVxyXG5cclxuICAvLyBVcGRhdGVzIGEgc2luZ2xlIHJhbmdlIGluIHRoZSBzZWxlY3Rpb24uXHJcbiAgZnVuY3Rpb24gcmVwbGFjZU9uZVNlbGVjdGlvbihkb2MsIGksIHJhbmdlLCBvcHRpb25zKSB7XHJcbiAgICB2YXIgcmFuZ2VzID0gZG9jLnNlbC5yYW5nZXMuc2xpY2UoMCk7XHJcbiAgICByYW5nZXNbaV0gPSByYW5nZTtcclxuICAgIHNldFNlbGVjdGlvbihkb2MsIG5vcm1hbGl6ZVNlbGVjdGlvbihyYW5nZXMsIGRvYy5zZWwucHJpbUluZGV4KSwgb3B0aW9ucyk7XHJcbiAgfVxyXG5cclxuICAvLyBSZXNldCB0aGUgc2VsZWN0aW9uIHRvIGEgc2luZ2xlIHJhbmdlLlxyXG4gIGZ1bmN0aW9uIHNldFNpbXBsZVNlbGVjdGlvbihkb2MsIGFuY2hvciwgaGVhZCwgb3B0aW9ucykge1xyXG4gICAgc2V0U2VsZWN0aW9uKGRvYywgc2ltcGxlU2VsZWN0aW9uKGFuY2hvciwgaGVhZCksIG9wdGlvbnMpO1xyXG4gIH1cclxuXHJcbiAgLy8gR2l2ZSBiZWZvcmVTZWxlY3Rpb25DaGFuZ2UgaGFuZGxlcnMgYSBjaGFuZ2UgdG8gaW5mbHVlbmNlIGFcclxuICAvLyBzZWxlY3Rpb24gdXBkYXRlLlxyXG4gIGZ1bmN0aW9uIGZpbHRlclNlbGVjdGlvbkNoYW5nZShkb2MsIHNlbCkge1xyXG4gICAgdmFyIG9iaiA9IHtcclxuICAgICAgcmFuZ2VzOiBzZWwucmFuZ2VzLFxyXG4gICAgICB1cGRhdGU6IGZ1bmN0aW9uKHJhbmdlcykge1xyXG4gICAgICAgIHRoaXMucmFuZ2VzID0gW107XHJcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCByYW5nZXMubGVuZ3RoOyBpKyspXHJcbiAgICAgICAgICB0aGlzLnJhbmdlc1tpXSA9IG5ldyBSYW5nZShjbGlwUG9zKGRvYywgcmFuZ2VzW2ldLmFuY2hvciksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGlwUG9zKGRvYywgcmFuZ2VzW2ldLmhlYWQpKTtcclxuICAgICAgfVxyXG4gICAgfTtcclxuICAgIHNpZ25hbChkb2MsIFwiYmVmb3JlU2VsZWN0aW9uQ2hhbmdlXCIsIGRvYywgb2JqKTtcclxuICAgIGlmIChkb2MuY20pIHNpZ25hbChkb2MuY20sIFwiYmVmb3JlU2VsZWN0aW9uQ2hhbmdlXCIsIGRvYy5jbSwgb2JqKTtcclxuICAgIGlmIChvYmoucmFuZ2VzICE9IHNlbC5yYW5nZXMpIHJldHVybiBub3JtYWxpemVTZWxlY3Rpb24ob2JqLnJhbmdlcywgb2JqLnJhbmdlcy5sZW5ndGggLSAxKTtcclxuICAgIGVsc2UgcmV0dXJuIHNlbDtcclxuICB9XHJcblxyXG4gIGZ1bmN0aW9uIHNldFNlbGVjdGlvblJlcGxhY2VIaXN0b3J5KGRvYywgc2VsLCBvcHRpb25zKSB7XHJcbiAgICB2YXIgZG9uZSA9IGRvYy5oaXN0b3J5LmRvbmUsIGxhc3QgPSBsc3QoZG9uZSk7XHJcbiAgICBpZiAobGFzdCAmJiBsYXN0LnJhbmdlcykge1xyXG4gICAgICBkb25lW2RvbmUubGVuZ3RoIC0gMV0gPSBzZWw7XHJcbiAgICAgIHNldFNlbGVjdGlvbk5vVW5kbyhkb2MsIHNlbCwgb3B0aW9ucyk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBzZXRTZWxlY3Rpb24oZG9jLCBzZWwsIG9wdGlvbnMpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLy8gU2V0IGEgbmV3IHNlbGVjdGlvbi5cclxuICBmdW5jdGlvbiBzZXRTZWxlY3Rpb24oZG9jLCBzZWwsIG9wdGlvbnMpIHtcclxuICAgIHNldFNlbGVjdGlvbk5vVW5kbyhkb2MsIHNlbCwgb3B0aW9ucyk7XHJcbiAgICBhZGRTZWxlY3Rpb25Ub0hpc3RvcnkoZG9jLCBkb2Muc2VsLCBkb2MuY20gPyBkb2MuY20uY3VyT3AuaWQgOiBOYU4sIG9wdGlvbnMpO1xyXG4gIH1cclxuXHJcbiAgZnVuY3Rpb24gc2V0U2VsZWN0aW9uTm9VbmRvKGRvYywgc2VsLCBvcHRpb25zKSB7XHJcbiAgICBpZiAoaGFzSGFuZGxlcihkb2MsIFwiYmVmb3JlU2VsZWN0aW9uQ2hhbmdlXCIpIHx8IGRvYy5jbSAmJiBoYXNIYW5kbGVyKGRvYy5jbSwgXCJiZWZvcmVTZWxlY3Rpb25DaGFuZ2VcIikpXHJcbiAgICAgIHNlbCA9IGZpbHRlclNlbGVjdGlvbkNoYW5nZShkb2MsIHNlbCk7XHJcblxyXG4gICAgdmFyIGJpYXMgPSBvcHRpb25zICYmIG9wdGlvbnMuYmlhcyB8fFxyXG4gICAgICAoY21wKHNlbC5wcmltYXJ5KCkuaGVhZCwgZG9jLnNlbC5wcmltYXJ5KCkuaGVhZCkgPCAwID8gLTEgOiAxKTtcclxuICAgIHNldFNlbGVjdGlvbklubmVyKGRvYywgc2tpcEF0b21pY0luU2VsZWN0aW9uKGRvYywgc2VsLCBiaWFzLCB0cnVlKSk7XHJcblxyXG4gICAgaWYgKCEob3B0aW9ucyAmJiBvcHRpb25zLnNjcm9sbCA9PT0gZmFsc2UpICYmIGRvYy5jbSlcclxuICAgICAgZW5zdXJlQ3Vyc29yVmlzaWJsZShkb2MuY20pO1xyXG4gIH1cclxuXHJcbiAgZnVuY3Rpb24gc2V0U2VsZWN0aW9uSW5uZXIoZG9jLCBzZWwpIHtcclxuICAgIGlmIChzZWwuZXF1YWxzKGRvYy5zZWwpKSByZXR1cm47XHJcblxyXG4gICAgZG9jLnNlbCA9IHNlbDtcclxuXHJcbiAgICBpZiAoZG9jLmNtKSB7XHJcbiAgICAgIGRvYy5jbS5jdXJPcC51cGRhdGVJbnB1dCA9IGRvYy5jbS5jdXJPcC5zZWxlY3Rpb25DaGFuZ2VkID0gdHJ1ZTtcclxuICAgICAgc2lnbmFsQ3Vyc29yQWN0aXZpdHkoZG9jLmNtKTtcclxuICAgIH1cclxuICAgIHNpZ25hbExhdGVyKGRvYywgXCJjdXJzb3JBY3Rpdml0eVwiLCBkb2MpO1xyXG4gIH1cclxuXHJcbiAgLy8gVmVyaWZ5IHRoYXQgdGhlIHNlbGVjdGlvbiBkb2VzIG5vdCBwYXJ0aWFsbHkgc2VsZWN0IGFueSBhdG9taWNcclxuICAvLyBtYXJrZWQgcmFuZ2VzLlxyXG4gIGZ1bmN0aW9uIHJlQ2hlY2tTZWxlY3Rpb24oZG9jKSB7XHJcbiAgICBzZXRTZWxlY3Rpb25Jbm5lcihkb2MsIHNraXBBdG9taWNJblNlbGVjdGlvbihkb2MsIGRvYy5zZWwsIG51bGwsIGZhbHNlKSwgc2VsX2RvbnRTY3JvbGwpO1xyXG4gIH1cclxuXHJcbiAgLy8gUmV0dXJuIGEgc2VsZWN0aW9uIHRoYXQgZG9lcyBub3QgcGFydGlhbGx5IHNlbGVjdCBhbnkgYXRvbWljXHJcbiAgLy8gcmFuZ2VzLlxyXG4gIGZ1bmN0aW9uIHNraXBBdG9taWNJblNlbGVjdGlvbihkb2MsIHNlbCwgYmlhcywgbWF5Q2xlYXIpIHtcclxuICAgIHZhciBvdXQ7XHJcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHNlbC5yYW5nZXMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgdmFyIHJhbmdlID0gc2VsLnJhbmdlc1tpXTtcclxuICAgICAgdmFyIG5ld0FuY2hvciA9IHNraXBBdG9taWMoZG9jLCByYW5nZS5hbmNob3IsIGJpYXMsIG1heUNsZWFyKTtcclxuICAgICAgdmFyIG5ld0hlYWQgPSBza2lwQXRvbWljKGRvYywgcmFuZ2UuaGVhZCwgYmlhcywgbWF5Q2xlYXIpO1xyXG4gICAgICBpZiAob3V0IHx8IG5ld0FuY2hvciAhPSByYW5nZS5hbmNob3IgfHwgbmV3SGVhZCAhPSByYW5nZS5oZWFkKSB7XHJcbiAgICAgICAgaWYgKCFvdXQpIG91dCA9IHNlbC5yYW5nZXMuc2xpY2UoMCwgaSk7XHJcbiAgICAgICAgb3V0W2ldID0gbmV3IFJhbmdlKG5ld0FuY2hvciwgbmV3SGVhZCk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIHJldHVybiBvdXQgPyBub3JtYWxpemVTZWxlY3Rpb24ob3V0LCBzZWwucHJpbUluZGV4KSA6IHNlbDtcclxuICB9XHJcblxyXG4gIC8vIEVuc3VyZSBhIGdpdmVuIHBvc2l0aW9uIGlzIG5vdCBpbnNpZGUgYW4gYXRvbWljIHJhbmdlLlxyXG4gIGZ1bmN0aW9uIHNraXBBdG9taWMoZG9jLCBwb3MsIGJpYXMsIG1heUNsZWFyKSB7XHJcbiAgICB2YXIgZmxpcHBlZCA9IGZhbHNlLCBjdXJQb3MgPSBwb3M7XHJcbiAgICB2YXIgZGlyID0gYmlhcyB8fCAxO1xyXG4gICAgZG9jLmNhbnRFZGl0ID0gZmFsc2U7XHJcbiAgICBzZWFyY2g6IGZvciAoOzspIHtcclxuICAgICAgdmFyIGxpbmUgPSBnZXRMaW5lKGRvYywgY3VyUG9zLmxpbmUpO1xyXG4gICAgICBpZiAobGluZS5tYXJrZWRTcGFucykge1xyXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGluZS5tYXJrZWRTcGFucy5sZW5ndGg7ICsraSkge1xyXG4gICAgICAgICAgdmFyIHNwID0gbGluZS5tYXJrZWRTcGFuc1tpXSwgbSA9IHNwLm1hcmtlcjtcclxuICAgICAgICAgIGlmICgoc3AuZnJvbSA9PSBudWxsIHx8IChtLmluY2x1c2l2ZUxlZnQgPyBzcC5mcm9tIDw9IGN1clBvcy5jaCA6IHNwLmZyb20gPCBjdXJQb3MuY2gpKSAmJlxyXG4gICAgICAgICAgICAgIChzcC50byA9PSBudWxsIHx8IChtLmluY2x1c2l2ZVJpZ2h0ID8gc3AudG8gPj0gY3VyUG9zLmNoIDogc3AudG8gPiBjdXJQb3MuY2gpKSkge1xyXG4gICAgICAgICAgICBpZiAobWF5Q2xlYXIpIHtcclxuICAgICAgICAgICAgICBzaWduYWwobSwgXCJiZWZvcmVDdXJzb3JFbnRlclwiKTtcclxuICAgICAgICAgICAgICBpZiAobS5leHBsaWNpdGx5Q2xlYXJlZCkge1xyXG4gICAgICAgICAgICAgICAgaWYgKCFsaW5lLm1hcmtlZFNwYW5zKSBicmVhaztcclxuICAgICAgICAgICAgICAgIGVsc2Ugey0taTsgY29udGludWU7fVxyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAoIW0uYXRvbWljKSBjb250aW51ZTtcclxuICAgICAgICAgICAgdmFyIG5ld1BvcyA9IG0uZmluZChkaXIgPCAwID8gLTEgOiAxKTtcclxuICAgICAgICAgICAgaWYgKGNtcChuZXdQb3MsIGN1clBvcykgPT0gMCkge1xyXG4gICAgICAgICAgICAgIG5ld1Bvcy5jaCArPSBkaXI7XHJcbiAgICAgICAgICAgICAgaWYgKG5ld1Bvcy5jaCA8IDApIHtcclxuICAgICAgICAgICAgICAgIGlmIChuZXdQb3MubGluZSA+IGRvYy5maXJzdCkgbmV3UG9zID0gY2xpcFBvcyhkb2MsIFBvcyhuZXdQb3MubGluZSAtIDEpKTtcclxuICAgICAgICAgICAgICAgIGVsc2UgbmV3UG9zID0gbnVsbDtcclxuICAgICAgICAgICAgICB9IGVsc2UgaWYgKG5ld1Bvcy5jaCA+IGxpbmUudGV4dC5sZW5ndGgpIHtcclxuICAgICAgICAgICAgICAgIGlmIChuZXdQb3MubGluZSA8IGRvYy5maXJzdCArIGRvYy5zaXplIC0gMSkgbmV3UG9zID0gUG9zKG5ld1Bvcy5saW5lICsgMSwgMCk7XHJcbiAgICAgICAgICAgICAgICBlbHNlIG5ld1BvcyA9IG51bGw7XHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgIGlmICghbmV3UG9zKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoZmxpcHBlZCkge1xyXG4gICAgICAgICAgICAgICAgICAvLyBEcml2ZW4gaW4gYSBjb3JuZXIgLS0gbm8gdmFsaWQgY3Vyc29yIHBvc2l0aW9uIGZvdW5kIGF0IGFsbFxyXG4gICAgICAgICAgICAgICAgICAvLyAtLSB0cnkgYWdhaW4gKndpdGgqIGNsZWFyaW5nLCBpZiB3ZSBkaWRuJ3QgYWxyZWFkeVxyXG4gICAgICAgICAgICAgICAgICBpZiAoIW1heUNsZWFyKSByZXR1cm4gc2tpcEF0b21pYyhkb2MsIHBvcywgYmlhcywgdHJ1ZSk7XHJcbiAgICAgICAgICAgICAgICAgIC8vIE90aGVyd2lzZSwgdHVybiBvZmYgZWRpdGluZyB1bnRpbCBmdXJ0aGVyIG5vdGljZSwgYW5kIHJldHVybiB0aGUgc3RhcnQgb2YgdGhlIGRvY1xyXG4gICAgICAgICAgICAgICAgICBkb2MuY2FudEVkaXQgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICByZXR1cm4gUG9zKGRvYy5maXJzdCwgMCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBmbGlwcGVkID0gdHJ1ZTsgbmV3UG9zID0gcG9zOyBkaXIgPSAtZGlyO1xyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBjdXJQb3MgPSBuZXdQb3M7XHJcbiAgICAgICAgICAgIGNvbnRpbnVlIHNlYXJjaDtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgICAgcmV0dXJuIGN1clBvcztcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8vIFNFTEVDVElPTiBEUkFXSU5HXHJcblxyXG4gIC8vIFJlZHJhdyB0aGUgc2VsZWN0aW9uIGFuZC9vciBjdXJzb3JcclxuICBmdW5jdGlvbiBkcmF3U2VsZWN0aW9uKGNtKSB7XHJcbiAgICB2YXIgZGlzcGxheSA9IGNtLmRpc3BsYXksIGRvYyA9IGNtLmRvYywgcmVzdWx0ID0ge307XHJcbiAgICB2YXIgY3VyRnJhZ21lbnQgPSByZXN1bHQuY3Vyc29ycyA9IGRvY3VtZW50LmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKTtcclxuICAgIHZhciBzZWxGcmFnbWVudCA9IHJlc3VsdC5zZWxlY3Rpb24gPSBkb2N1bWVudC5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCk7XHJcblxyXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBkb2Muc2VsLnJhbmdlcy5sZW5ndGg7IGkrKykge1xyXG4gICAgICB2YXIgcmFuZ2UgPSBkb2Muc2VsLnJhbmdlc1tpXTtcclxuICAgICAgdmFyIGNvbGxhcHNlZCA9IHJhbmdlLmVtcHR5KCk7XHJcbiAgICAgIGlmIChjb2xsYXBzZWQgfHwgY20ub3B0aW9ucy5zaG93Q3Vyc29yV2hlblNlbGVjdGluZylcclxuICAgICAgICBkcmF3U2VsZWN0aW9uQ3Vyc29yKGNtLCByYW5nZSwgY3VyRnJhZ21lbnQpO1xyXG4gICAgICBpZiAoIWNvbGxhcHNlZClcclxuICAgICAgICBkcmF3U2VsZWN0aW9uUmFuZ2UoY20sIHJhbmdlLCBzZWxGcmFnbWVudCk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gTW92ZSB0aGUgaGlkZGVuIHRleHRhcmVhIG5lYXIgdGhlIGN1cnNvciB0byBwcmV2ZW50IHNjcm9sbGluZyBhcnRpZmFjdHNcclxuICAgIGlmIChjbS5vcHRpb25zLm1vdmVJbnB1dFdpdGhDdXJzb3IpIHtcclxuICAgICAgdmFyIGhlYWRQb3MgPSBjdXJzb3JDb29yZHMoY20sIGRvYy5zZWwucHJpbWFyeSgpLmhlYWQsIFwiZGl2XCIpO1xyXG4gICAgICB2YXIgd3JhcE9mZiA9IGRpc3BsYXkud3JhcHBlci5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKSwgbGluZU9mZiA9IGRpc3BsYXkubGluZURpdi5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcclxuICAgICAgcmVzdWx0LnRlVG9wID0gTWF0aC5tYXgoMCwgTWF0aC5taW4oZGlzcGxheS53cmFwcGVyLmNsaWVudEhlaWdodCAtIDEwLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBoZWFkUG9zLnRvcCArIGxpbmVPZmYudG9wIC0gd3JhcE9mZi50b3ApKTtcclxuICAgICAgcmVzdWx0LnRlTGVmdCA9IE1hdGgubWF4KDAsIE1hdGgubWluKGRpc3BsYXkud3JhcHBlci5jbGllbnRXaWR0aCAtIDEwLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaGVhZFBvcy5sZWZ0ICsgbGluZU9mZi5sZWZ0IC0gd3JhcE9mZi5sZWZ0KSk7XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIHJlc3VsdDtcclxuICB9XHJcblxyXG4gIGZ1bmN0aW9uIHNob3dTZWxlY3Rpb24oY20sIGRyYXduKSB7XHJcbiAgICByZW1vdmVDaGlsZHJlbkFuZEFkZChjbS5kaXNwbGF5LmN1cnNvckRpdiwgZHJhd24uY3Vyc29ycyk7XHJcbiAgICByZW1vdmVDaGlsZHJlbkFuZEFkZChjbS5kaXNwbGF5LnNlbGVjdGlvbkRpdiwgZHJhd24uc2VsZWN0aW9uKTtcclxuICAgIGlmIChkcmF3bi50ZVRvcCAhPSBudWxsKSB7XHJcbiAgICAgIGNtLmRpc3BsYXkuaW5wdXREaXYuc3R5bGUudG9wID0gZHJhd24udGVUb3AgKyBcInB4XCI7XHJcbiAgICAgIGNtLmRpc3BsYXkuaW5wdXREaXYuc3R5bGUubGVmdCA9IGRyYXduLnRlTGVmdCArIFwicHhcIjtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIGZ1bmN0aW9uIHVwZGF0ZVNlbGVjdGlvbihjbSkge1xyXG4gICAgc2hvd1NlbGVjdGlvbihjbSwgZHJhd1NlbGVjdGlvbihjbSkpO1xyXG4gIH1cclxuXHJcbiAgLy8gRHJhd3MgYSBjdXJzb3IgZm9yIHRoZSBnaXZlbiByYW5nZVxyXG4gIGZ1bmN0aW9uIGRyYXdTZWxlY3Rpb25DdXJzb3IoY20sIHJhbmdlLCBvdXRwdXQpIHtcclxuICAgIHZhciBwb3MgPSBjdXJzb3JDb29yZHMoY20sIHJhbmdlLmhlYWQsIFwiZGl2XCIsIG51bGwsIG51bGwsICFjbS5vcHRpb25zLnNpbmdsZUN1cnNvckhlaWdodFBlckxpbmUpO1xyXG5cclxuICAgIHZhciBjdXJzb3IgPSBvdXRwdXQuYXBwZW5kQ2hpbGQoZWx0KFwiZGl2XCIsIFwiXFx1MDBhMFwiLCBcIkNvZGVNaXJyb3ItY3Vyc29yXCIpKTtcclxuICAgIGN1cnNvci5zdHlsZS5sZWZ0ID0gcG9zLmxlZnQgKyBcInB4XCI7XHJcbiAgICBjdXJzb3Iuc3R5bGUudG9wID0gcG9zLnRvcCArIFwicHhcIjtcclxuICAgIGN1cnNvci5zdHlsZS5oZWlnaHQgPSBNYXRoLm1heCgwLCBwb3MuYm90dG9tIC0gcG9zLnRvcCkgKiBjbS5vcHRpb25zLmN1cnNvckhlaWdodCArIFwicHhcIjtcclxuXHJcbiAgICBpZiAocG9zLm90aGVyKSB7XHJcbiAgICAgIC8vIFNlY29uZGFyeSBjdXJzb3IsIHNob3duIHdoZW4gb24gYSAnanVtcCcgaW4gYmktZGlyZWN0aW9uYWwgdGV4dFxyXG4gICAgICB2YXIgb3RoZXJDdXJzb3IgPSBvdXRwdXQuYXBwZW5kQ2hpbGQoZWx0KFwiZGl2XCIsIFwiXFx1MDBhMFwiLCBcIkNvZGVNaXJyb3ItY3Vyc29yIENvZGVNaXJyb3Itc2Vjb25kYXJ5Y3Vyc29yXCIpKTtcclxuICAgICAgb3RoZXJDdXJzb3Iuc3R5bGUuZGlzcGxheSA9IFwiXCI7XHJcbiAgICAgIG90aGVyQ3Vyc29yLnN0eWxlLmxlZnQgPSBwb3Mub3RoZXIubGVmdCArIFwicHhcIjtcclxuICAgICAgb3RoZXJDdXJzb3Iuc3R5bGUudG9wID0gcG9zLm90aGVyLnRvcCArIFwicHhcIjtcclxuICAgICAgb3RoZXJDdXJzb3Iuc3R5bGUuaGVpZ2h0ID0gKHBvcy5vdGhlci5ib3R0b20gLSBwb3Mub3RoZXIudG9wKSAqIC44NSArIFwicHhcIjtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8vIERyYXdzIHRoZSBnaXZlbiByYW5nZSBhcyBhIGhpZ2hsaWdodGVkIHNlbGVjdGlvblxyXG4gIGZ1bmN0aW9uIGRyYXdTZWxlY3Rpb25SYW5nZShjbSwgcmFuZ2UsIG91dHB1dCkge1xyXG4gICAgdmFyIGRpc3BsYXkgPSBjbS5kaXNwbGF5LCBkb2MgPSBjbS5kb2M7XHJcbiAgICB2YXIgZnJhZ21lbnQgPSBkb2N1bWVudC5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCk7XHJcbiAgICB2YXIgcGFkZGluZyA9IHBhZGRpbmdIKGNtLmRpc3BsYXkpLCBsZWZ0U2lkZSA9IHBhZGRpbmcubGVmdCwgcmlnaHRTaWRlID0gZGlzcGxheS5saW5lU3BhY2Uub2Zmc2V0V2lkdGggLSBwYWRkaW5nLnJpZ2h0O1xyXG5cclxuICAgIGZ1bmN0aW9uIGFkZChsZWZ0LCB0b3AsIHdpZHRoLCBib3R0b20pIHtcclxuICAgICAgaWYgKHRvcCA8IDApIHRvcCA9IDA7XHJcbiAgICAgIHRvcCA9IE1hdGgucm91bmQodG9wKTtcclxuICAgICAgYm90dG9tID0gTWF0aC5yb3VuZChib3R0b20pO1xyXG4gICAgICBmcmFnbWVudC5hcHBlbmRDaGlsZChlbHQoXCJkaXZcIiwgbnVsbCwgXCJDb2RlTWlycm9yLXNlbGVjdGVkXCIsIFwicG9zaXRpb246IGFic29sdXRlOyBsZWZ0OiBcIiArIGxlZnQgK1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJweDsgdG9wOiBcIiArIHRvcCArIFwicHg7IHdpZHRoOiBcIiArICh3aWR0aCA9PSBudWxsID8gcmlnaHRTaWRlIC0gbGVmdCA6IHdpZHRoKSArXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcInB4OyBoZWlnaHQ6IFwiICsgKGJvdHRvbSAtIHRvcCkgKyBcInB4XCIpKTtcclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBkcmF3Rm9yTGluZShsaW5lLCBmcm9tQXJnLCB0b0FyZykge1xyXG4gICAgICB2YXIgbGluZU9iaiA9IGdldExpbmUoZG9jLCBsaW5lKTtcclxuICAgICAgdmFyIGxpbmVMZW4gPSBsaW5lT2JqLnRleHQubGVuZ3RoO1xyXG4gICAgICB2YXIgc3RhcnQsIGVuZDtcclxuICAgICAgZnVuY3Rpb24gY29vcmRzKGNoLCBiaWFzKSB7XHJcbiAgICAgICAgcmV0dXJuIGNoYXJDb29yZHMoY20sIFBvcyhsaW5lLCBjaCksIFwiZGl2XCIsIGxpbmVPYmosIGJpYXMpO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBpdGVyYXRlQmlkaVNlY3Rpb25zKGdldE9yZGVyKGxpbmVPYmopLCBmcm9tQXJnIHx8IDAsIHRvQXJnID09IG51bGwgPyBsaW5lTGVuIDogdG9BcmcsIGZ1bmN0aW9uKGZyb20sIHRvLCBkaXIpIHtcclxuICAgICAgICB2YXIgbGVmdFBvcyA9IGNvb3Jkcyhmcm9tLCBcImxlZnRcIiksIHJpZ2h0UG9zLCBsZWZ0LCByaWdodDtcclxuICAgICAgICBpZiAoZnJvbSA9PSB0bykge1xyXG4gICAgICAgICAgcmlnaHRQb3MgPSBsZWZ0UG9zO1xyXG4gICAgICAgICAgbGVmdCA9IHJpZ2h0ID0gbGVmdFBvcy5sZWZ0O1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICByaWdodFBvcyA9IGNvb3Jkcyh0byAtIDEsIFwicmlnaHRcIik7XHJcbiAgICAgICAgICBpZiAoZGlyID09IFwicnRsXCIpIHsgdmFyIHRtcCA9IGxlZnRQb3M7IGxlZnRQb3MgPSByaWdodFBvczsgcmlnaHRQb3MgPSB0bXA7IH1cclxuICAgICAgICAgIGxlZnQgPSBsZWZ0UG9zLmxlZnQ7XHJcbiAgICAgICAgICByaWdodCA9IHJpZ2h0UG9zLnJpZ2h0O1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoZnJvbUFyZyA9PSBudWxsICYmIGZyb20gPT0gMCkgbGVmdCA9IGxlZnRTaWRlO1xyXG4gICAgICAgIGlmIChyaWdodFBvcy50b3AgLSBsZWZ0UG9zLnRvcCA+IDMpIHsgLy8gRGlmZmVyZW50IGxpbmVzLCBkcmF3IHRvcCBwYXJ0XHJcbiAgICAgICAgICBhZGQobGVmdCwgbGVmdFBvcy50b3AsIG51bGwsIGxlZnRQb3MuYm90dG9tKTtcclxuICAgICAgICAgIGxlZnQgPSBsZWZ0U2lkZTtcclxuICAgICAgICAgIGlmIChsZWZ0UG9zLmJvdHRvbSA8IHJpZ2h0UG9zLnRvcCkgYWRkKGxlZnQsIGxlZnRQb3MuYm90dG9tLCBudWxsLCByaWdodFBvcy50b3ApO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAodG9BcmcgPT0gbnVsbCAmJiB0byA9PSBsaW5lTGVuKSByaWdodCA9IHJpZ2h0U2lkZTtcclxuICAgICAgICBpZiAoIXN0YXJ0IHx8IGxlZnRQb3MudG9wIDwgc3RhcnQudG9wIHx8IGxlZnRQb3MudG9wID09IHN0YXJ0LnRvcCAmJiBsZWZ0UG9zLmxlZnQgPCBzdGFydC5sZWZ0KVxyXG4gICAgICAgICAgc3RhcnQgPSBsZWZ0UG9zO1xyXG4gICAgICAgIGlmICghZW5kIHx8IHJpZ2h0UG9zLmJvdHRvbSA+IGVuZC5ib3R0b20gfHwgcmlnaHRQb3MuYm90dG9tID09IGVuZC5ib3R0b20gJiYgcmlnaHRQb3MucmlnaHQgPiBlbmQucmlnaHQpXHJcbiAgICAgICAgICBlbmQgPSByaWdodFBvcztcclxuICAgICAgICBpZiAobGVmdCA8IGxlZnRTaWRlICsgMSkgbGVmdCA9IGxlZnRTaWRlO1xyXG4gICAgICAgIGFkZChsZWZ0LCByaWdodFBvcy50b3AsIHJpZ2h0IC0gbGVmdCwgcmlnaHRQb3MuYm90dG9tKTtcclxuICAgICAgfSk7XHJcbiAgICAgIHJldHVybiB7c3RhcnQ6IHN0YXJ0LCBlbmQ6IGVuZH07XHJcbiAgICB9XHJcblxyXG4gICAgdmFyIHNGcm9tID0gcmFuZ2UuZnJvbSgpLCBzVG8gPSByYW5nZS50bygpO1xyXG4gICAgaWYgKHNGcm9tLmxpbmUgPT0gc1RvLmxpbmUpIHtcclxuICAgICAgZHJhd0ZvckxpbmUoc0Zyb20ubGluZSwgc0Zyb20uY2gsIHNUby5jaCk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB2YXIgZnJvbUxpbmUgPSBnZXRMaW5lKGRvYywgc0Zyb20ubGluZSksIHRvTGluZSA9IGdldExpbmUoZG9jLCBzVG8ubGluZSk7XHJcbiAgICAgIHZhciBzaW5nbGVWTGluZSA9IHZpc3VhbExpbmUoZnJvbUxpbmUpID09IHZpc3VhbExpbmUodG9MaW5lKTtcclxuICAgICAgdmFyIGxlZnRFbmQgPSBkcmF3Rm9yTGluZShzRnJvbS5saW5lLCBzRnJvbS5jaCwgc2luZ2xlVkxpbmUgPyBmcm9tTGluZS50ZXh0Lmxlbmd0aCArIDEgOiBudWxsKS5lbmQ7XHJcbiAgICAgIHZhciByaWdodFN0YXJ0ID0gZHJhd0ZvckxpbmUoc1RvLmxpbmUsIHNpbmdsZVZMaW5lID8gMCA6IG51bGwsIHNUby5jaCkuc3RhcnQ7XHJcbiAgICAgIGlmIChzaW5nbGVWTGluZSkge1xyXG4gICAgICAgIGlmIChsZWZ0RW5kLnRvcCA8IHJpZ2h0U3RhcnQudG9wIC0gMikge1xyXG4gICAgICAgICAgYWRkKGxlZnRFbmQucmlnaHQsIGxlZnRFbmQudG9wLCBudWxsLCBsZWZ0RW5kLmJvdHRvbSk7XHJcbiAgICAgICAgICBhZGQobGVmdFNpZGUsIHJpZ2h0U3RhcnQudG9wLCByaWdodFN0YXJ0LmxlZnQsIHJpZ2h0U3RhcnQuYm90dG9tKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgYWRkKGxlZnRFbmQucmlnaHQsIGxlZnRFbmQudG9wLCByaWdodFN0YXJ0LmxlZnQgLSBsZWZ0RW5kLnJpZ2h0LCBsZWZ0RW5kLmJvdHRvbSk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICAgIGlmIChsZWZ0RW5kLmJvdHRvbSA8IHJpZ2h0U3RhcnQudG9wKVxyXG4gICAgICAgIGFkZChsZWZ0U2lkZSwgbGVmdEVuZC5ib3R0b20sIG51bGwsIHJpZ2h0U3RhcnQudG9wKTtcclxuICAgIH1cclxuXHJcbiAgICBvdXRwdXQuYXBwZW5kQ2hpbGQoZnJhZ21lbnQpO1xyXG4gIH1cclxuXHJcbiAgLy8gQ3Vyc29yLWJsaW5raW5nXHJcbiAgZnVuY3Rpb24gcmVzdGFydEJsaW5rKGNtKSB7XHJcbiAgICBpZiAoIWNtLnN0YXRlLmZvY3VzZWQpIHJldHVybjtcclxuICAgIHZhciBkaXNwbGF5ID0gY20uZGlzcGxheTtcclxuICAgIGNsZWFySW50ZXJ2YWwoZGlzcGxheS5ibGlua2VyKTtcclxuICAgIHZhciBvbiA9IHRydWU7XHJcbiAgICBkaXNwbGF5LmN1cnNvckRpdi5zdHlsZS52aXNpYmlsaXR5ID0gXCJcIjtcclxuICAgIGlmIChjbS5vcHRpb25zLmN1cnNvckJsaW5rUmF0ZSA+IDApXHJcbiAgICAgIGRpc3BsYXkuYmxpbmtlciA9IHNldEludGVydmFsKGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIGRpc3BsYXkuY3Vyc29yRGl2LnN0eWxlLnZpc2liaWxpdHkgPSAob24gPSAhb24pID8gXCJcIiA6IFwiaGlkZGVuXCI7XHJcbiAgICAgIH0sIGNtLm9wdGlvbnMuY3Vyc29yQmxpbmtSYXRlKTtcclxuICAgIGVsc2UgaWYgKGNtLm9wdGlvbnMuY3Vyc29yQmxpbmtSYXRlIDwgMClcclxuICAgICAgZGlzcGxheS5jdXJzb3JEaXYuc3R5bGUudmlzaWJpbGl0eSA9IFwiaGlkZGVuXCI7XHJcbiAgfVxyXG5cclxuICAvLyBISUdITElHSFQgV09SS0VSXHJcblxyXG4gIGZ1bmN0aW9uIHN0YXJ0V29ya2VyKGNtLCB0aW1lKSB7XHJcbiAgICBpZiAoY20uZG9jLm1vZGUuc3RhcnRTdGF0ZSAmJiBjbS5kb2MuZnJvbnRpZXIgPCBjbS5kaXNwbGF5LnZpZXdUbylcclxuICAgICAgY20uc3RhdGUuaGlnaGxpZ2h0LnNldCh0aW1lLCBiaW5kKGhpZ2hsaWdodFdvcmtlciwgY20pKTtcclxuICB9XHJcblxyXG4gIGZ1bmN0aW9uIGhpZ2hsaWdodFdvcmtlcihjbSkge1xyXG4gICAgdmFyIGRvYyA9IGNtLmRvYztcclxuICAgIGlmIChkb2MuZnJvbnRpZXIgPCBkb2MuZmlyc3QpIGRvYy5mcm9udGllciA9IGRvYy5maXJzdDtcclxuICAgIGlmIChkb2MuZnJvbnRpZXIgPj0gY20uZGlzcGxheS52aWV3VG8pIHJldHVybjtcclxuICAgIHZhciBlbmQgPSArbmV3IERhdGUgKyBjbS5vcHRpb25zLndvcmtUaW1lO1xyXG4gICAgdmFyIHN0YXRlID0gY29weVN0YXRlKGRvYy5tb2RlLCBnZXRTdGF0ZUJlZm9yZShjbSwgZG9jLmZyb250aWVyKSk7XHJcbiAgICB2YXIgY2hhbmdlZExpbmVzID0gW107XHJcblxyXG4gICAgZG9jLml0ZXIoZG9jLmZyb250aWVyLCBNYXRoLm1pbihkb2MuZmlyc3QgKyBkb2Muc2l6ZSwgY20uZGlzcGxheS52aWV3VG8gKyA1MDApLCBmdW5jdGlvbihsaW5lKSB7XHJcbiAgICAgIGlmIChkb2MuZnJvbnRpZXIgPj0gY20uZGlzcGxheS52aWV3RnJvbSkgeyAvLyBWaXNpYmxlXHJcbiAgICAgICAgdmFyIG9sZFN0eWxlcyA9IGxpbmUuc3R5bGVzO1xyXG4gICAgICAgIHZhciBoaWdobGlnaHRlZCA9IGhpZ2hsaWdodExpbmUoY20sIGxpbmUsIHN0YXRlLCB0cnVlKTtcclxuICAgICAgICBsaW5lLnN0eWxlcyA9IGhpZ2hsaWdodGVkLnN0eWxlcztcclxuICAgICAgICB2YXIgb2xkQ2xzID0gbGluZS5zdHlsZUNsYXNzZXMsIG5ld0NscyA9IGhpZ2hsaWdodGVkLmNsYXNzZXM7XHJcbiAgICAgICAgaWYgKG5ld0NscykgbGluZS5zdHlsZUNsYXNzZXMgPSBuZXdDbHM7XHJcbiAgICAgICAgZWxzZSBpZiAob2xkQ2xzKSBsaW5lLnN0eWxlQ2xhc3NlcyA9IG51bGw7XHJcbiAgICAgICAgdmFyIGlzY2hhbmdlID0gIW9sZFN0eWxlcyB8fCBvbGRTdHlsZXMubGVuZ3RoICE9IGxpbmUuc3R5bGVzLmxlbmd0aCB8fFxyXG4gICAgICAgICAgb2xkQ2xzICE9IG5ld0NscyAmJiAoIW9sZENscyB8fCAhbmV3Q2xzIHx8IG9sZENscy5iZ0NsYXNzICE9IG5ld0Nscy5iZ0NsYXNzIHx8IG9sZENscy50ZXh0Q2xhc3MgIT0gbmV3Q2xzLnRleHRDbGFzcyk7XHJcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7ICFpc2NoYW5nZSAmJiBpIDwgb2xkU3R5bGVzLmxlbmd0aDsgKytpKSBpc2NoYW5nZSA9IG9sZFN0eWxlc1tpXSAhPSBsaW5lLnN0eWxlc1tpXTtcclxuICAgICAgICBpZiAoaXNjaGFuZ2UpIGNoYW5nZWRMaW5lcy5wdXNoKGRvYy5mcm9udGllcik7XHJcbiAgICAgICAgbGluZS5zdGF0ZUFmdGVyID0gY29weVN0YXRlKGRvYy5tb2RlLCBzdGF0ZSk7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgcHJvY2Vzc0xpbmUoY20sIGxpbmUudGV4dCwgc3RhdGUpO1xyXG4gICAgICAgIGxpbmUuc3RhdGVBZnRlciA9IGRvYy5mcm9udGllciAlIDUgPT0gMCA/IGNvcHlTdGF0ZShkb2MubW9kZSwgc3RhdGUpIDogbnVsbDtcclxuICAgICAgfVxyXG4gICAgICArK2RvYy5mcm9udGllcjtcclxuICAgICAgaWYgKCtuZXcgRGF0ZSA+IGVuZCkge1xyXG4gICAgICAgIHN0YXJ0V29ya2VyKGNtLCBjbS5vcHRpb25zLndvcmtEZWxheSk7XHJcbiAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG4gICAgaWYgKGNoYW5nZWRMaW5lcy5sZW5ndGgpIHJ1bkluT3AoY20sIGZ1bmN0aW9uKCkge1xyXG4gICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGNoYW5nZWRMaW5lcy5sZW5ndGg7IGkrKylcclxuICAgICAgICByZWdMaW5lQ2hhbmdlKGNtLCBjaGFuZ2VkTGluZXNbaV0sIFwidGV4dFwiKTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgLy8gRmluZHMgdGhlIGxpbmUgdG8gc3RhcnQgd2l0aCB3aGVuIHN0YXJ0aW5nIGEgcGFyc2UuIFRyaWVzIHRvXHJcbiAgLy8gZmluZCBhIGxpbmUgd2l0aCBhIHN0YXRlQWZ0ZXIsIHNvIHRoYXQgaXQgY2FuIHN0YXJ0IHdpdGggYVxyXG4gIC8vIHZhbGlkIHN0YXRlLiBJZiB0aGF0IGZhaWxzLCBpdCByZXR1cm5zIHRoZSBsaW5lIHdpdGggdGhlXHJcbiAgLy8gc21hbGxlc3QgaW5kZW50YXRpb24sIHdoaWNoIHRlbmRzIHRvIG5lZWQgdGhlIGxlYXN0IGNvbnRleHQgdG9cclxuICAvLyBwYXJzZSBjb3JyZWN0bHkuXHJcbiAgZnVuY3Rpb24gZmluZFN0YXJ0TGluZShjbSwgbiwgcHJlY2lzZSkge1xyXG4gICAgdmFyIG1pbmluZGVudCwgbWlubGluZSwgZG9jID0gY20uZG9jO1xyXG4gICAgdmFyIGxpbSA9IHByZWNpc2UgPyAtMSA6IG4gLSAoY20uZG9jLm1vZGUuaW5uZXJNb2RlID8gMTAwMCA6IDEwMCk7XHJcbiAgICBmb3IgKHZhciBzZWFyY2ggPSBuOyBzZWFyY2ggPiBsaW07IC0tc2VhcmNoKSB7XHJcbiAgICAgIGlmIChzZWFyY2ggPD0gZG9jLmZpcnN0KSByZXR1cm4gZG9jLmZpcnN0O1xyXG4gICAgICB2YXIgbGluZSA9IGdldExpbmUoZG9jLCBzZWFyY2ggLSAxKTtcclxuICAgICAgaWYgKGxpbmUuc3RhdGVBZnRlciAmJiAoIXByZWNpc2UgfHwgc2VhcmNoIDw9IGRvYy5mcm9udGllcikpIHJldHVybiBzZWFyY2g7XHJcbiAgICAgIHZhciBpbmRlbnRlZCA9IGNvdW50Q29sdW1uKGxpbmUudGV4dCwgbnVsbCwgY20ub3B0aW9ucy50YWJTaXplKTtcclxuICAgICAgaWYgKG1pbmxpbmUgPT0gbnVsbCB8fCBtaW5pbmRlbnQgPiBpbmRlbnRlZCkge1xyXG4gICAgICAgIG1pbmxpbmUgPSBzZWFyY2ggLSAxO1xyXG4gICAgICAgIG1pbmluZGVudCA9IGluZGVudGVkO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4gbWlubGluZTtcclxuICB9XHJcblxyXG4gIGZ1bmN0aW9uIGdldFN0YXRlQmVmb3JlKGNtLCBuLCBwcmVjaXNlKSB7XHJcbiAgICB2YXIgZG9jID0gY20uZG9jLCBkaXNwbGF5ID0gY20uZGlzcGxheTtcclxuICAgIGlmICghZG9jLm1vZGUuc3RhcnRTdGF0ZSkgcmV0dXJuIHRydWU7XHJcbiAgICB2YXIgcG9zID0gZmluZFN0YXJ0TGluZShjbSwgbiwgcHJlY2lzZSksIHN0YXRlID0gcG9zID4gZG9jLmZpcnN0ICYmIGdldExpbmUoZG9jLCBwb3MtMSkuc3RhdGVBZnRlcjtcclxuICAgIGlmICghc3RhdGUpIHN0YXRlID0gc3RhcnRTdGF0ZShkb2MubW9kZSk7XHJcbiAgICBlbHNlIHN0YXRlID0gY29weVN0YXRlKGRvYy5tb2RlLCBzdGF0ZSk7XHJcbiAgICBkb2MuaXRlcihwb3MsIG4sIGZ1bmN0aW9uKGxpbmUpIHtcclxuICAgICAgcHJvY2Vzc0xpbmUoY20sIGxpbmUudGV4dCwgc3RhdGUpO1xyXG4gICAgICB2YXIgc2F2ZSA9IHBvcyA9PSBuIC0gMSB8fCBwb3MgJSA1ID09IDAgfHwgcG9zID49IGRpc3BsYXkudmlld0Zyb20gJiYgcG9zIDwgZGlzcGxheS52aWV3VG87XHJcbiAgICAgIGxpbmUuc3RhdGVBZnRlciA9IHNhdmUgPyBjb3B5U3RhdGUoZG9jLm1vZGUsIHN0YXRlKSA6IG51bGw7XHJcbiAgICAgICsrcG9zO1xyXG4gICAgfSk7XHJcbiAgICBpZiAocHJlY2lzZSkgZG9jLmZyb250aWVyID0gcG9zO1xyXG4gICAgcmV0dXJuIHN0YXRlO1xyXG4gIH1cclxuXHJcbiAgLy8gUE9TSVRJT04gTUVBU1VSRU1FTlRcclxuXHJcbiAgZnVuY3Rpb24gcGFkZGluZ1RvcChkaXNwbGF5KSB7cmV0dXJuIGRpc3BsYXkubGluZVNwYWNlLm9mZnNldFRvcDt9XHJcbiAgZnVuY3Rpb24gcGFkZGluZ1ZlcnQoZGlzcGxheSkge3JldHVybiBkaXNwbGF5Lm1vdmVyLm9mZnNldEhlaWdodCAtIGRpc3BsYXkubGluZVNwYWNlLm9mZnNldEhlaWdodDt9XHJcbiAgZnVuY3Rpb24gcGFkZGluZ0goZGlzcGxheSkge1xyXG4gICAgaWYgKGRpc3BsYXkuY2FjaGVkUGFkZGluZ0gpIHJldHVybiBkaXNwbGF5LmNhY2hlZFBhZGRpbmdIO1xyXG4gICAgdmFyIGUgPSByZW1vdmVDaGlsZHJlbkFuZEFkZChkaXNwbGF5Lm1lYXN1cmUsIGVsdChcInByZVwiLCBcInhcIikpO1xyXG4gICAgdmFyIHN0eWxlID0gd2luZG93LmdldENvbXB1dGVkU3R5bGUgPyB3aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZShlKSA6IGUuY3VycmVudFN0eWxlO1xyXG4gICAgdmFyIGRhdGEgPSB7bGVmdDogcGFyc2VJbnQoc3R5bGUucGFkZGluZ0xlZnQpLCByaWdodDogcGFyc2VJbnQoc3R5bGUucGFkZGluZ1JpZ2h0KX07XHJcbiAgICBpZiAoIWlzTmFOKGRhdGEubGVmdCkgJiYgIWlzTmFOKGRhdGEucmlnaHQpKSBkaXNwbGF5LmNhY2hlZFBhZGRpbmdIID0gZGF0YTtcclxuICAgIHJldHVybiBkYXRhO1xyXG4gIH1cclxuXHJcbiAgLy8gRW5zdXJlIHRoZSBsaW5lVmlldy53cmFwcGluZy5oZWlnaHRzIGFycmF5IGlzIHBvcHVsYXRlZC4gVGhpcyBpc1xyXG4gIC8vIGFuIGFycmF5IG9mIGJvdHRvbSBvZmZzZXRzIGZvciB0aGUgbGluZXMgdGhhdCBtYWtlIHVwIGEgZHJhd25cclxuICAvLyBsaW5lLiBXaGVuIGxpbmVXcmFwcGluZyBpcyBvbiwgdGhlcmUgbWlnaHQgYmUgbW9yZSB0aGFuIG9uZVxyXG4gIC8vIGhlaWdodC5cclxuICBmdW5jdGlvbiBlbnN1cmVMaW5lSGVpZ2h0cyhjbSwgbGluZVZpZXcsIHJlY3QpIHtcclxuICAgIHZhciB3cmFwcGluZyA9IGNtLm9wdGlvbnMubGluZVdyYXBwaW5nO1xyXG4gICAgdmFyIGN1cldpZHRoID0gd3JhcHBpbmcgJiYgY20uZGlzcGxheS5zY3JvbGxlci5jbGllbnRXaWR0aDtcclxuICAgIGlmICghbGluZVZpZXcubWVhc3VyZS5oZWlnaHRzIHx8IHdyYXBwaW5nICYmIGxpbmVWaWV3Lm1lYXN1cmUud2lkdGggIT0gY3VyV2lkdGgpIHtcclxuICAgICAgdmFyIGhlaWdodHMgPSBsaW5lVmlldy5tZWFzdXJlLmhlaWdodHMgPSBbXTtcclxuICAgICAgaWYgKHdyYXBwaW5nKSB7XHJcbiAgICAgICAgbGluZVZpZXcubWVhc3VyZS53aWR0aCA9IGN1cldpZHRoO1xyXG4gICAgICAgIHZhciByZWN0cyA9IGxpbmVWaWV3LnRleHQuZmlyc3RDaGlsZC5nZXRDbGllbnRSZWN0cygpO1xyXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcmVjdHMubGVuZ3RoIC0gMTsgaSsrKSB7XHJcbiAgICAgICAgICB2YXIgY3VyID0gcmVjdHNbaV0sIG5leHQgPSByZWN0c1tpICsgMV07XHJcbiAgICAgICAgICBpZiAoTWF0aC5hYnMoY3VyLmJvdHRvbSAtIG5leHQuYm90dG9tKSA+IDIpXHJcbiAgICAgICAgICAgIGhlaWdodHMucHVzaCgoY3VyLmJvdHRvbSArIG5leHQudG9wKSAvIDIgLSByZWN0LnRvcCk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICAgIGhlaWdodHMucHVzaChyZWN0LmJvdHRvbSAtIHJlY3QudG9wKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8vIEZpbmQgYSBsaW5lIG1hcCAobWFwcGluZyBjaGFyYWN0ZXIgb2Zmc2V0cyB0byB0ZXh0IG5vZGVzKSBhbmQgYVxyXG4gIC8vIG1lYXN1cmVtZW50IGNhY2hlIGZvciB0aGUgZ2l2ZW4gbGluZSBudW1iZXIuIChBIGxpbmUgdmlldyBtaWdodFxyXG4gIC8vIGNvbnRhaW4gbXVsdGlwbGUgbGluZXMgd2hlbiBjb2xsYXBzZWQgcmFuZ2VzIGFyZSBwcmVzZW50LilcclxuICBmdW5jdGlvbiBtYXBGcm9tTGluZVZpZXcobGluZVZpZXcsIGxpbmUsIGxpbmVOKSB7XHJcbiAgICBpZiAobGluZVZpZXcubGluZSA9PSBsaW5lKVxyXG4gICAgICByZXR1cm4ge21hcDogbGluZVZpZXcubWVhc3VyZS5tYXAsIGNhY2hlOiBsaW5lVmlldy5tZWFzdXJlLmNhY2hlfTtcclxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGluZVZpZXcucmVzdC5sZW5ndGg7IGkrKylcclxuICAgICAgaWYgKGxpbmVWaWV3LnJlc3RbaV0gPT0gbGluZSlcclxuICAgICAgICByZXR1cm4ge21hcDogbGluZVZpZXcubWVhc3VyZS5tYXBzW2ldLCBjYWNoZTogbGluZVZpZXcubWVhc3VyZS5jYWNoZXNbaV19O1xyXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsaW5lVmlldy5yZXN0Lmxlbmd0aDsgaSsrKVxyXG4gICAgICBpZiAobGluZU5vKGxpbmVWaWV3LnJlc3RbaV0pID4gbGluZU4pXHJcbiAgICAgICAgcmV0dXJuIHttYXA6IGxpbmVWaWV3Lm1lYXN1cmUubWFwc1tpXSwgY2FjaGU6IGxpbmVWaWV3Lm1lYXN1cmUuY2FjaGVzW2ldLCBiZWZvcmU6IHRydWV9O1xyXG4gIH1cclxuXHJcbiAgLy8gUmVuZGVyIGEgbGluZSBpbnRvIHRoZSBoaWRkZW4gbm9kZSBkaXNwbGF5LmV4dGVybmFsTWVhc3VyZWQuIFVzZWRcclxuICAvLyB3aGVuIG1lYXN1cmVtZW50IGlzIG5lZWRlZCBmb3IgYSBsaW5lIHRoYXQncyBub3QgaW4gdGhlIHZpZXdwb3J0LlxyXG4gIGZ1bmN0aW9uIHVwZGF0ZUV4dGVybmFsTWVhc3VyZW1lbnQoY20sIGxpbmUpIHtcclxuICAgIGxpbmUgPSB2aXN1YWxMaW5lKGxpbmUpO1xyXG4gICAgdmFyIGxpbmVOID0gbGluZU5vKGxpbmUpO1xyXG4gICAgdmFyIHZpZXcgPSBjbS5kaXNwbGF5LmV4dGVybmFsTWVhc3VyZWQgPSBuZXcgTGluZVZpZXcoY20uZG9jLCBsaW5lLCBsaW5lTik7XHJcbiAgICB2aWV3LmxpbmVOID0gbGluZU47XHJcbiAgICB2YXIgYnVpbHQgPSB2aWV3LmJ1aWx0ID0gYnVpbGRMaW5lQ29udGVudChjbSwgdmlldyk7XHJcbiAgICB2aWV3LnRleHQgPSBidWlsdC5wcmU7XHJcbiAgICByZW1vdmVDaGlsZHJlbkFuZEFkZChjbS5kaXNwbGF5LmxpbmVNZWFzdXJlLCBidWlsdC5wcmUpO1xyXG4gICAgcmV0dXJuIHZpZXc7XHJcbiAgfVxyXG5cclxuICAvLyBHZXQgYSB7dG9wLCBib3R0b20sIGxlZnQsIHJpZ2h0fSBib3ggKGluIGxpbmUtbG9jYWwgY29vcmRpbmF0ZXMpXHJcbiAgLy8gZm9yIGEgZ2l2ZW4gY2hhcmFjdGVyLlxyXG4gIGZ1bmN0aW9uIG1lYXN1cmVDaGFyKGNtLCBsaW5lLCBjaCwgYmlhcykge1xyXG4gICAgcmV0dXJuIG1lYXN1cmVDaGFyUHJlcGFyZWQoY20sIHByZXBhcmVNZWFzdXJlRm9yTGluZShjbSwgbGluZSksIGNoLCBiaWFzKTtcclxuICB9XHJcblxyXG4gIC8vIEZpbmQgYSBsaW5lIHZpZXcgdGhhdCBjb3JyZXNwb25kcyB0byB0aGUgZ2l2ZW4gbGluZSBudW1iZXIuXHJcbiAgZnVuY3Rpb24gZmluZFZpZXdGb3JMaW5lKGNtLCBsaW5lTikge1xyXG4gICAgaWYgKGxpbmVOID49IGNtLmRpc3BsYXkudmlld0Zyb20gJiYgbGluZU4gPCBjbS5kaXNwbGF5LnZpZXdUbylcclxuICAgICAgcmV0dXJuIGNtLmRpc3BsYXkudmlld1tmaW5kVmlld0luZGV4KGNtLCBsaW5lTildO1xyXG4gICAgdmFyIGV4dCA9IGNtLmRpc3BsYXkuZXh0ZXJuYWxNZWFzdXJlZDtcclxuICAgIGlmIChleHQgJiYgbGluZU4gPj0gZXh0LmxpbmVOICYmIGxpbmVOIDwgZXh0LmxpbmVOICsgZXh0LnNpemUpXHJcbiAgICAgIHJldHVybiBleHQ7XHJcbiAgfVxyXG5cclxuICAvLyBNZWFzdXJlbWVudCBjYW4gYmUgc3BsaXQgaW4gdHdvIHN0ZXBzLCB0aGUgc2V0LXVwIHdvcmsgdGhhdFxyXG4gIC8vIGFwcGxpZXMgdG8gdGhlIHdob2xlIGxpbmUsIGFuZCB0aGUgbWVhc3VyZW1lbnQgb2YgdGhlIGFjdHVhbFxyXG4gIC8vIGNoYXJhY3Rlci4gRnVuY3Rpb25zIGxpa2UgY29vcmRzQ2hhciwgdGhhdCBuZWVkIHRvIGRvIGEgbG90IG9mXHJcbiAgLy8gbWVhc3VyZW1lbnRzIGluIGEgcm93LCBjYW4gdGh1cyBlbnN1cmUgdGhhdCB0aGUgc2V0LXVwIHdvcmsgaXNcclxuICAvLyBvbmx5IGRvbmUgb25jZS5cclxuICBmdW5jdGlvbiBwcmVwYXJlTWVhc3VyZUZvckxpbmUoY20sIGxpbmUpIHtcclxuICAgIHZhciBsaW5lTiA9IGxpbmVObyhsaW5lKTtcclxuICAgIHZhciB2aWV3ID0gZmluZFZpZXdGb3JMaW5lKGNtLCBsaW5lTik7XHJcbiAgICBpZiAodmlldyAmJiAhdmlldy50ZXh0KVxyXG4gICAgICB2aWV3ID0gbnVsbDtcclxuICAgIGVsc2UgaWYgKHZpZXcgJiYgdmlldy5jaGFuZ2VzKVxyXG4gICAgICB1cGRhdGVMaW5lRm9yQ2hhbmdlcyhjbSwgdmlldywgbGluZU4sIGdldERpbWVuc2lvbnMoY20pKTtcclxuICAgIGlmICghdmlldylcclxuICAgICAgdmlldyA9IHVwZGF0ZUV4dGVybmFsTWVhc3VyZW1lbnQoY20sIGxpbmUpO1xyXG5cclxuICAgIHZhciBpbmZvID0gbWFwRnJvbUxpbmVWaWV3KHZpZXcsIGxpbmUsIGxpbmVOKTtcclxuICAgIHJldHVybiB7XHJcbiAgICAgIGxpbmU6IGxpbmUsIHZpZXc6IHZpZXcsIHJlY3Q6IG51bGwsXHJcbiAgICAgIG1hcDogaW5mby5tYXAsIGNhY2hlOiBpbmZvLmNhY2hlLCBiZWZvcmU6IGluZm8uYmVmb3JlLFxyXG4gICAgICBoYXNIZWlnaHRzOiBmYWxzZVxyXG4gICAgfTtcclxuICB9XHJcblxyXG4gIC8vIEdpdmVuIGEgcHJlcGFyZWQgbWVhc3VyZW1lbnQgb2JqZWN0LCBtZWFzdXJlcyB0aGUgcG9zaXRpb24gb2YgYW5cclxuICAvLyBhY3R1YWwgY2hhcmFjdGVyIChvciBmZXRjaGVzIGl0IGZyb20gdGhlIGNhY2hlKS5cclxuICBmdW5jdGlvbiBtZWFzdXJlQ2hhclByZXBhcmVkKGNtLCBwcmVwYXJlZCwgY2gsIGJpYXMsIHZhckhlaWdodCkge1xyXG4gICAgaWYgKHByZXBhcmVkLmJlZm9yZSkgY2ggPSAtMTtcclxuICAgIHZhciBrZXkgPSBjaCArIChiaWFzIHx8IFwiXCIpLCBmb3VuZDtcclxuICAgIGlmIChwcmVwYXJlZC5jYWNoZS5oYXNPd25Qcm9wZXJ0eShrZXkpKSB7XHJcbiAgICAgIGZvdW5kID0gcHJlcGFyZWQuY2FjaGVba2V5XTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIGlmICghcHJlcGFyZWQucmVjdClcclxuICAgICAgICBwcmVwYXJlZC5yZWN0ID0gcHJlcGFyZWQudmlldy50ZXh0LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xyXG4gICAgICBpZiAoIXByZXBhcmVkLmhhc0hlaWdodHMpIHtcclxuICAgICAgICBlbnN1cmVMaW5lSGVpZ2h0cyhjbSwgcHJlcGFyZWQudmlldywgcHJlcGFyZWQucmVjdCk7XHJcbiAgICAgICAgcHJlcGFyZWQuaGFzSGVpZ2h0cyA9IHRydWU7XHJcbiAgICAgIH1cclxuICAgICAgZm91bmQgPSBtZWFzdXJlQ2hhcklubmVyKGNtLCBwcmVwYXJlZCwgY2gsIGJpYXMpO1xyXG4gICAgICBpZiAoIWZvdW5kLmJvZ3VzKSBwcmVwYXJlZC5jYWNoZVtrZXldID0gZm91bmQ7XHJcbiAgICB9XHJcbiAgICByZXR1cm4ge2xlZnQ6IGZvdW5kLmxlZnQsIHJpZ2h0OiBmb3VuZC5yaWdodCxcclxuICAgICAgICAgICAgdG9wOiB2YXJIZWlnaHQgPyBmb3VuZC5ydG9wIDogZm91bmQudG9wLFxyXG4gICAgICAgICAgICBib3R0b206IHZhckhlaWdodCA/IGZvdW5kLnJib3R0b20gOiBmb3VuZC5ib3R0b219O1xyXG4gIH1cclxuXHJcbiAgdmFyIG51bGxSZWN0ID0ge2xlZnQ6IDAsIHJpZ2h0OiAwLCB0b3A6IDAsIGJvdHRvbTogMH07XHJcblxyXG4gIGZ1bmN0aW9uIG1lYXN1cmVDaGFySW5uZXIoY20sIHByZXBhcmVkLCBjaCwgYmlhcykge1xyXG4gICAgdmFyIG1hcCA9IHByZXBhcmVkLm1hcDtcclxuXHJcbiAgICB2YXIgbm9kZSwgc3RhcnQsIGVuZCwgY29sbGFwc2U7XHJcbiAgICAvLyBGaXJzdCwgc2VhcmNoIHRoZSBsaW5lIG1hcCBmb3IgdGhlIHRleHQgbm9kZSBjb3JyZXNwb25kaW5nIHRvLFxyXG4gICAgLy8gb3IgY2xvc2VzdCB0bywgdGhlIHRhcmdldCBjaGFyYWN0ZXIuXHJcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IG1hcC5sZW5ndGg7IGkgKz0gMykge1xyXG4gICAgICB2YXIgbVN0YXJ0ID0gbWFwW2ldLCBtRW5kID0gbWFwW2kgKyAxXTtcclxuICAgICAgaWYgKGNoIDwgbVN0YXJ0KSB7XHJcbiAgICAgICAgc3RhcnQgPSAwOyBlbmQgPSAxO1xyXG4gICAgICAgIGNvbGxhcHNlID0gXCJsZWZ0XCI7XHJcbiAgICAgIH0gZWxzZSBpZiAoY2ggPCBtRW5kKSB7XHJcbiAgICAgICAgc3RhcnQgPSBjaCAtIG1TdGFydDtcclxuICAgICAgICBlbmQgPSBzdGFydCArIDE7XHJcbiAgICAgIH0gZWxzZSBpZiAoaSA9PSBtYXAubGVuZ3RoIC0gMyB8fCBjaCA9PSBtRW5kICYmIG1hcFtpICsgM10gPiBjaCkge1xyXG4gICAgICAgIGVuZCA9IG1FbmQgLSBtU3RhcnQ7XHJcbiAgICAgICAgc3RhcnQgPSBlbmQgLSAxO1xyXG4gICAgICAgIGlmIChjaCA+PSBtRW5kKSBjb2xsYXBzZSA9IFwicmlnaHRcIjtcclxuICAgICAgfVxyXG4gICAgICBpZiAoc3RhcnQgIT0gbnVsbCkge1xyXG4gICAgICAgIG5vZGUgPSBtYXBbaSArIDJdO1xyXG4gICAgICAgIGlmIChtU3RhcnQgPT0gbUVuZCAmJiBiaWFzID09IChub2RlLmluc2VydExlZnQgPyBcImxlZnRcIiA6IFwicmlnaHRcIikpXHJcbiAgICAgICAgICBjb2xsYXBzZSA9IGJpYXM7XHJcbiAgICAgICAgaWYgKGJpYXMgPT0gXCJsZWZ0XCIgJiYgc3RhcnQgPT0gMClcclxuICAgICAgICAgIHdoaWxlIChpICYmIG1hcFtpIC0gMl0gPT0gbWFwW2kgLSAzXSAmJiBtYXBbaSAtIDFdLmluc2VydExlZnQpIHtcclxuICAgICAgICAgICAgbm9kZSA9IG1hcFsoaSAtPSAzKSArIDJdO1xyXG4gICAgICAgICAgICBjb2xsYXBzZSA9IFwibGVmdFwiO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIGlmIChiaWFzID09IFwicmlnaHRcIiAmJiBzdGFydCA9PSBtRW5kIC0gbVN0YXJ0KVxyXG4gICAgICAgICAgd2hpbGUgKGkgPCBtYXAubGVuZ3RoIC0gMyAmJiBtYXBbaSArIDNdID09IG1hcFtpICsgNF0gJiYgIW1hcFtpICsgNV0uaW5zZXJ0TGVmdCkge1xyXG4gICAgICAgICAgICBub2RlID0gbWFwWyhpICs9IDMpICsgMl07XHJcbiAgICAgICAgICAgIGNvbGxhcHNlID0gXCJyaWdodFwiO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIGJyZWFrO1xyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgdmFyIHJlY3Q7XHJcbiAgICBpZiAobm9kZS5ub2RlVHlwZSA9PSAzKSB7IC8vIElmIGl0IGlzIGEgdGV4dCBub2RlLCB1c2UgYSByYW5nZSB0byByZXRyaWV2ZSB0aGUgY29vcmRpbmF0ZXMuXHJcbiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgNDsgaSsrKSB7IC8vIFJldHJ5IGEgbWF4aW11bSBvZiA0IHRpbWVzIHdoZW4gbm9uc2Vuc2UgcmVjdGFuZ2xlcyBhcmUgcmV0dXJuZWRcclxuICAgICAgICB3aGlsZSAoc3RhcnQgJiYgaXNFeHRlbmRpbmdDaGFyKHByZXBhcmVkLmxpbmUudGV4dC5jaGFyQXQobVN0YXJ0ICsgc3RhcnQpKSkgLS1zdGFydDtcclxuICAgICAgICB3aGlsZSAobVN0YXJ0ICsgZW5kIDwgbUVuZCAmJiBpc0V4dGVuZGluZ0NoYXIocHJlcGFyZWQubGluZS50ZXh0LmNoYXJBdChtU3RhcnQgKyBlbmQpKSkgKytlbmQ7XHJcbiAgICAgICAgaWYgKGllICYmIGllX3ZlcnNpb24gPCA5ICYmIHN0YXJ0ID09IDAgJiYgZW5kID09IG1FbmQgLSBtU3RhcnQpIHtcclxuICAgICAgICAgIHJlY3QgPSBub2RlLnBhcmVudE5vZGUuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XHJcbiAgICAgICAgfSBlbHNlIGlmIChpZSAmJiBjbS5vcHRpb25zLmxpbmVXcmFwcGluZykge1xyXG4gICAgICAgICAgdmFyIHJlY3RzID0gcmFuZ2Uobm9kZSwgc3RhcnQsIGVuZCkuZ2V0Q2xpZW50UmVjdHMoKTtcclxuICAgICAgICAgIGlmIChyZWN0cy5sZW5ndGgpXHJcbiAgICAgICAgICAgIHJlY3QgPSByZWN0c1tiaWFzID09IFwicmlnaHRcIiA/IHJlY3RzLmxlbmd0aCAtIDEgOiAwXTtcclxuICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAgcmVjdCA9IG51bGxSZWN0O1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICByZWN0ID0gcmFuZ2Uobm9kZSwgc3RhcnQsIGVuZCkuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkgfHwgbnVsbFJlY3Q7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChyZWN0LmxlZnQgfHwgcmVjdC5yaWdodCB8fCBzdGFydCA9PSAwKSBicmVhaztcclxuICAgICAgICBlbmQgPSBzdGFydDtcclxuICAgICAgICBzdGFydCA9IHN0YXJ0IC0gMTtcclxuICAgICAgICBjb2xsYXBzZSA9IFwicmlnaHRcIjtcclxuICAgICAgfVxyXG4gICAgICBpZiAoaWUgJiYgaWVfdmVyc2lvbiA8IDExKSByZWN0ID0gbWF5YmVVcGRhdGVSZWN0Rm9yWm9vbWluZyhjbS5kaXNwbGF5Lm1lYXN1cmUsIHJlY3QpO1xyXG4gICAgfSBlbHNlIHsgLy8gSWYgaXQgaXMgYSB3aWRnZXQsIHNpbXBseSBnZXQgdGhlIGJveCBmb3IgdGhlIHdob2xlIHdpZGdldC5cclxuICAgICAgaWYgKHN0YXJ0ID4gMCkgY29sbGFwc2UgPSBiaWFzID0gXCJyaWdodFwiO1xyXG4gICAgICB2YXIgcmVjdHM7XHJcbiAgICAgIGlmIChjbS5vcHRpb25zLmxpbmVXcmFwcGluZyAmJiAocmVjdHMgPSBub2RlLmdldENsaWVudFJlY3RzKCkpLmxlbmd0aCA+IDEpXHJcbiAgICAgICAgcmVjdCA9IHJlY3RzW2JpYXMgPT0gXCJyaWdodFwiID8gcmVjdHMubGVuZ3RoIC0gMSA6IDBdO1xyXG4gICAgICBlbHNlXHJcbiAgICAgICAgcmVjdCA9IG5vZGUuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XHJcbiAgICB9XHJcbiAgICBpZiAoaWUgJiYgaWVfdmVyc2lvbiA8IDkgJiYgIXN0YXJ0ICYmICghcmVjdCB8fCAhcmVjdC5sZWZ0ICYmICFyZWN0LnJpZ2h0KSkge1xyXG4gICAgICB2YXIgclNwYW4gPSBub2RlLnBhcmVudE5vZGUuZ2V0Q2xpZW50UmVjdHMoKVswXTtcclxuICAgICAgaWYgKHJTcGFuKVxyXG4gICAgICAgIHJlY3QgPSB7bGVmdDogclNwYW4ubGVmdCwgcmlnaHQ6IHJTcGFuLmxlZnQgKyBjaGFyV2lkdGgoY20uZGlzcGxheSksIHRvcDogclNwYW4udG9wLCBib3R0b206IHJTcGFuLmJvdHRvbX07XHJcbiAgICAgIGVsc2VcclxuICAgICAgICByZWN0ID0gbnVsbFJlY3Q7XHJcbiAgICB9XHJcblxyXG4gICAgdmFyIHJ0b3AgPSByZWN0LnRvcCAtIHByZXBhcmVkLnJlY3QudG9wLCByYm90ID0gcmVjdC5ib3R0b20gLSBwcmVwYXJlZC5yZWN0LnRvcDtcclxuICAgIHZhciBtaWQgPSAocnRvcCArIHJib3QpIC8gMjtcclxuICAgIHZhciBoZWlnaHRzID0gcHJlcGFyZWQudmlldy5tZWFzdXJlLmhlaWdodHM7XHJcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGhlaWdodHMubGVuZ3RoIC0gMTsgaSsrKVxyXG4gICAgICBpZiAobWlkIDwgaGVpZ2h0c1tpXSkgYnJlYWs7XHJcbiAgICB2YXIgdG9wID0gaSA/IGhlaWdodHNbaSAtIDFdIDogMCwgYm90ID0gaGVpZ2h0c1tpXTtcclxuICAgIHZhciByZXN1bHQgPSB7bGVmdDogKGNvbGxhcHNlID09IFwicmlnaHRcIiA/IHJlY3QucmlnaHQgOiByZWN0LmxlZnQpIC0gcHJlcGFyZWQucmVjdC5sZWZ0LFxyXG4gICAgICAgICAgICAgICAgICByaWdodDogKGNvbGxhcHNlID09IFwibGVmdFwiID8gcmVjdC5sZWZ0IDogcmVjdC5yaWdodCkgLSBwcmVwYXJlZC5yZWN0LmxlZnQsXHJcbiAgICAgICAgICAgICAgICAgIHRvcDogdG9wLCBib3R0b206IGJvdH07XHJcbiAgICBpZiAoIXJlY3QubGVmdCAmJiAhcmVjdC5yaWdodCkgcmVzdWx0LmJvZ3VzID0gdHJ1ZTtcclxuICAgIGlmICghY20ub3B0aW9ucy5zaW5nbGVDdXJzb3JIZWlnaHRQZXJMaW5lKSB7IHJlc3VsdC5ydG9wID0gcnRvcDsgcmVzdWx0LnJib3R0b20gPSByYm90OyB9XHJcblxyXG4gICAgcmV0dXJuIHJlc3VsdDtcclxuICB9XHJcblxyXG4gIC8vIFdvcmsgYXJvdW5kIHByb2JsZW0gd2l0aCBib3VuZGluZyBjbGllbnQgcmVjdHMgb24gcmFuZ2VzIGJlaW5nXHJcbiAgLy8gcmV0dXJuZWQgaW5jb3JyZWN0bHkgd2hlbiB6b29tZWQgb24gSUUxMCBhbmQgYmVsb3cuXHJcbiAgZnVuY3Rpb24gbWF5YmVVcGRhdGVSZWN0Rm9yWm9vbWluZyhtZWFzdXJlLCByZWN0KSB7XHJcbiAgICBpZiAoIXdpbmRvdy5zY3JlZW4gfHwgc2NyZWVuLmxvZ2ljYWxYRFBJID09IG51bGwgfHxcclxuICAgICAgICBzY3JlZW4ubG9naWNhbFhEUEkgPT0gc2NyZWVuLmRldmljZVhEUEkgfHwgIWhhc0JhZFpvb21lZFJlY3RzKG1lYXN1cmUpKVxyXG4gICAgICByZXR1cm4gcmVjdDtcclxuICAgIHZhciBzY2FsZVggPSBzY3JlZW4ubG9naWNhbFhEUEkgLyBzY3JlZW4uZGV2aWNlWERQSTtcclxuICAgIHZhciBzY2FsZVkgPSBzY3JlZW4ubG9naWNhbFlEUEkgLyBzY3JlZW4uZGV2aWNlWURQSTtcclxuICAgIHJldHVybiB7bGVmdDogcmVjdC5sZWZ0ICogc2NhbGVYLCByaWdodDogcmVjdC5yaWdodCAqIHNjYWxlWCxcclxuICAgICAgICAgICAgdG9wOiByZWN0LnRvcCAqIHNjYWxlWSwgYm90dG9tOiByZWN0LmJvdHRvbSAqIHNjYWxlWX07XHJcbiAgfVxyXG5cclxuICBmdW5jdGlvbiBjbGVhckxpbmVNZWFzdXJlbWVudENhY2hlRm9yKGxpbmVWaWV3KSB7XHJcbiAgICBpZiAobGluZVZpZXcubWVhc3VyZSkge1xyXG4gICAgICBsaW5lVmlldy5tZWFzdXJlLmNhY2hlID0ge307XHJcbiAgICAgIGxpbmVWaWV3Lm1lYXN1cmUuaGVpZ2h0cyA9IG51bGw7XHJcbiAgICAgIGlmIChsaW5lVmlldy5yZXN0KSBmb3IgKHZhciBpID0gMDsgaSA8IGxpbmVWaWV3LnJlc3QubGVuZ3RoOyBpKyspXHJcbiAgICAgICAgbGluZVZpZXcubWVhc3VyZS5jYWNoZXNbaV0gPSB7fTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIGZ1bmN0aW9uIGNsZWFyTGluZU1lYXN1cmVtZW50Q2FjaGUoY20pIHtcclxuICAgIGNtLmRpc3BsYXkuZXh0ZXJuYWxNZWFzdXJlID0gbnVsbDtcclxuICAgIHJlbW92ZUNoaWxkcmVuKGNtLmRpc3BsYXkubGluZU1lYXN1cmUpO1xyXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBjbS5kaXNwbGF5LnZpZXcubGVuZ3RoOyBpKyspXHJcbiAgICAgIGNsZWFyTGluZU1lYXN1cmVtZW50Q2FjaGVGb3IoY20uZGlzcGxheS52aWV3W2ldKTtcclxuICB9XHJcblxyXG4gIGZ1bmN0aW9uIGNsZWFyQ2FjaGVzKGNtKSB7XHJcbiAgICBjbGVhckxpbmVNZWFzdXJlbWVudENhY2hlKGNtKTtcclxuICAgIGNtLmRpc3BsYXkuY2FjaGVkQ2hhcldpZHRoID0gY20uZGlzcGxheS5jYWNoZWRUZXh0SGVpZ2h0ID0gY20uZGlzcGxheS5jYWNoZWRQYWRkaW5nSCA9IG51bGw7XHJcbiAgICBpZiAoIWNtLm9wdGlvbnMubGluZVdyYXBwaW5nKSBjbS5kaXNwbGF5Lm1heExpbmVDaGFuZ2VkID0gdHJ1ZTtcclxuICAgIGNtLmRpc3BsYXkubGluZU51bUNoYXJzID0gbnVsbDtcclxuICB9XHJcblxyXG4gIGZ1bmN0aW9uIHBhZ2VTY3JvbGxYKCkgeyByZXR1cm4gd2luZG93LnBhZ2VYT2Zmc2V0IHx8IChkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQgfHwgZG9jdW1lbnQuYm9keSkuc2Nyb2xsTGVmdDsgfVxyXG4gIGZ1bmN0aW9uIHBhZ2VTY3JvbGxZKCkgeyByZXR1cm4gd2luZG93LnBhZ2VZT2Zmc2V0IHx8IChkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQgfHwgZG9jdW1lbnQuYm9keSkuc2Nyb2xsVG9wOyB9XHJcblxyXG4gIC8vIENvbnZlcnRzIGEge3RvcCwgYm90dG9tLCBsZWZ0LCByaWdodH0gYm94IGZyb20gbGluZS1sb2NhbFxyXG4gIC8vIGNvb3JkaW5hdGVzIGludG8gYW5vdGhlciBjb29yZGluYXRlIHN5c3RlbS4gQ29udGV4dCBtYXkgYmUgb25lIG9mXHJcbiAgLy8gXCJsaW5lXCIsIFwiZGl2XCIgKGRpc3BsYXkubGluZURpdiksIFwibG9jYWxcIi9udWxsIChlZGl0b3IpLCBvciBcInBhZ2VcIi5cclxuICBmdW5jdGlvbiBpbnRvQ29vcmRTeXN0ZW0oY20sIGxpbmVPYmosIHJlY3QsIGNvbnRleHQpIHtcclxuICAgIGlmIChsaW5lT2JqLndpZGdldHMpIGZvciAodmFyIGkgPSAwOyBpIDwgbGluZU9iai53aWRnZXRzLmxlbmd0aDsgKytpKSBpZiAobGluZU9iai53aWRnZXRzW2ldLmFib3ZlKSB7XHJcbiAgICAgIHZhciBzaXplID0gd2lkZ2V0SGVpZ2h0KGxpbmVPYmoud2lkZ2V0c1tpXSk7XHJcbiAgICAgIHJlY3QudG9wICs9IHNpemU7IHJlY3QuYm90dG9tICs9IHNpemU7XHJcbiAgICB9XHJcbiAgICBpZiAoY29udGV4dCA9PSBcImxpbmVcIikgcmV0dXJuIHJlY3Q7XHJcbiAgICBpZiAoIWNvbnRleHQpIGNvbnRleHQgPSBcImxvY2FsXCI7XHJcbiAgICB2YXIgeU9mZiA9IGhlaWdodEF0TGluZShsaW5lT2JqKTtcclxuICAgIGlmIChjb250ZXh0ID09IFwibG9jYWxcIikgeU9mZiArPSBwYWRkaW5nVG9wKGNtLmRpc3BsYXkpO1xyXG4gICAgZWxzZSB5T2ZmIC09IGNtLmRpc3BsYXkudmlld09mZnNldDtcclxuICAgIGlmIChjb250ZXh0ID09IFwicGFnZVwiIHx8IGNvbnRleHQgPT0gXCJ3aW5kb3dcIikge1xyXG4gICAgICB2YXIgbE9mZiA9IGNtLmRpc3BsYXkubGluZVNwYWNlLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xyXG4gICAgICB5T2ZmICs9IGxPZmYudG9wICsgKGNvbnRleHQgPT0gXCJ3aW5kb3dcIiA/IDAgOiBwYWdlU2Nyb2xsWSgpKTtcclxuICAgICAgdmFyIHhPZmYgPSBsT2ZmLmxlZnQgKyAoY29udGV4dCA9PSBcIndpbmRvd1wiID8gMCA6IHBhZ2VTY3JvbGxYKCkpO1xyXG4gICAgICByZWN0LmxlZnQgKz0geE9mZjsgcmVjdC5yaWdodCArPSB4T2ZmO1xyXG4gICAgfVxyXG4gICAgcmVjdC50b3AgKz0geU9mZjsgcmVjdC5ib3R0b20gKz0geU9mZjtcclxuICAgIHJldHVybiByZWN0O1xyXG4gIH1cclxuXHJcbiAgLy8gQ292ZXJ0cyBhIGJveCBmcm9tIFwiZGl2XCIgY29vcmRzIHRvIGFub3RoZXIgY29vcmRpbmF0ZSBzeXN0ZW0uXHJcbiAgLy8gQ29udGV4dCBtYXkgYmUgXCJ3aW5kb3dcIiwgXCJwYWdlXCIsIFwiZGl2XCIsIG9yIFwibG9jYWxcIi9udWxsLlxyXG4gIGZ1bmN0aW9uIGZyb21Db29yZFN5c3RlbShjbSwgY29vcmRzLCBjb250ZXh0KSB7XHJcbiAgICBpZiAoY29udGV4dCA9PSBcImRpdlwiKSByZXR1cm4gY29vcmRzO1xyXG4gICAgdmFyIGxlZnQgPSBjb29yZHMubGVmdCwgdG9wID0gY29vcmRzLnRvcDtcclxuICAgIC8vIEZpcnN0IG1vdmUgaW50byBcInBhZ2VcIiBjb29yZGluYXRlIHN5c3RlbVxyXG4gICAgaWYgKGNvbnRleHQgPT0gXCJwYWdlXCIpIHtcclxuICAgICAgbGVmdCAtPSBwYWdlU2Nyb2xsWCgpO1xyXG4gICAgICB0b3AgLT0gcGFnZVNjcm9sbFkoKTtcclxuICAgIH0gZWxzZSBpZiAoY29udGV4dCA9PSBcImxvY2FsXCIgfHwgIWNvbnRleHQpIHtcclxuICAgICAgdmFyIGxvY2FsQm94ID0gY20uZGlzcGxheS5zaXplci5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcclxuICAgICAgbGVmdCArPSBsb2NhbEJveC5sZWZ0O1xyXG4gICAgICB0b3AgKz0gbG9jYWxCb3gudG9wO1xyXG4gICAgfVxyXG5cclxuICAgIHZhciBsaW5lU3BhY2VCb3ggPSBjbS5kaXNwbGF5LmxpbmVTcGFjZS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcclxuICAgIHJldHVybiB7bGVmdDogbGVmdCAtIGxpbmVTcGFjZUJveC5sZWZ0LCB0b3A6IHRvcCAtIGxpbmVTcGFjZUJveC50b3B9O1xyXG4gIH1cclxuXHJcbiAgZnVuY3Rpb24gY2hhckNvb3JkcyhjbSwgcG9zLCBjb250ZXh0LCBsaW5lT2JqLCBiaWFzKSB7XHJcbiAgICBpZiAoIWxpbmVPYmopIGxpbmVPYmogPSBnZXRMaW5lKGNtLmRvYywgcG9zLmxpbmUpO1xyXG4gICAgcmV0dXJuIGludG9Db29yZFN5c3RlbShjbSwgbGluZU9iaiwgbWVhc3VyZUNoYXIoY20sIGxpbmVPYmosIHBvcy5jaCwgYmlhcyksIGNvbnRleHQpO1xyXG4gIH1cclxuXHJcbiAgLy8gUmV0dXJucyBhIGJveCBmb3IgYSBnaXZlbiBjdXJzb3IgcG9zaXRpb24sIHdoaWNoIG1heSBoYXZlIGFuXHJcbiAgLy8gJ290aGVyJyBwcm9wZXJ0eSBjb250YWluaW5nIHRoZSBwb3NpdGlvbiBvZiB0aGUgc2Vjb25kYXJ5IGN1cnNvclxyXG4gIC8vIG9uIGEgYmlkaSBib3VuZGFyeS5cclxuICBmdW5jdGlvbiBjdXJzb3JDb29yZHMoY20sIHBvcywgY29udGV4dCwgbGluZU9iaiwgcHJlcGFyZWRNZWFzdXJlLCB2YXJIZWlnaHQpIHtcclxuICAgIGxpbmVPYmogPSBsaW5lT2JqIHx8IGdldExpbmUoY20uZG9jLCBwb3MubGluZSk7XHJcbiAgICBpZiAoIXByZXBhcmVkTWVhc3VyZSkgcHJlcGFyZWRNZWFzdXJlID0gcHJlcGFyZU1lYXN1cmVGb3JMaW5lKGNtLCBsaW5lT2JqKTtcclxuICAgIGZ1bmN0aW9uIGdldChjaCwgcmlnaHQpIHtcclxuICAgICAgdmFyIG0gPSBtZWFzdXJlQ2hhclByZXBhcmVkKGNtLCBwcmVwYXJlZE1lYXN1cmUsIGNoLCByaWdodCA/IFwicmlnaHRcIiA6IFwibGVmdFwiLCB2YXJIZWlnaHQpO1xyXG4gICAgICBpZiAocmlnaHQpIG0ubGVmdCA9IG0ucmlnaHQ7IGVsc2UgbS5yaWdodCA9IG0ubGVmdDtcclxuICAgICAgcmV0dXJuIGludG9Db29yZFN5c3RlbShjbSwgbGluZU9iaiwgbSwgY29udGV4dCk7XHJcbiAgICB9XHJcbiAgICBmdW5jdGlvbiBnZXRCaWRpKGNoLCBwYXJ0UG9zKSB7XHJcbiAgICAgIHZhciBwYXJ0ID0gb3JkZXJbcGFydFBvc10sIHJpZ2h0ID0gcGFydC5sZXZlbCAlIDI7XHJcbiAgICAgIGlmIChjaCA9PSBiaWRpTGVmdChwYXJ0KSAmJiBwYXJ0UG9zICYmIHBhcnQubGV2ZWwgPCBvcmRlcltwYXJ0UG9zIC0gMV0ubGV2ZWwpIHtcclxuICAgICAgICBwYXJ0ID0gb3JkZXJbLS1wYXJ0UG9zXTtcclxuICAgICAgICBjaCA9IGJpZGlSaWdodChwYXJ0KSAtIChwYXJ0LmxldmVsICUgMiA/IDAgOiAxKTtcclxuICAgICAgICByaWdodCA9IHRydWU7XHJcbiAgICAgIH0gZWxzZSBpZiAoY2ggPT0gYmlkaVJpZ2h0KHBhcnQpICYmIHBhcnRQb3MgPCBvcmRlci5sZW5ndGggLSAxICYmIHBhcnQubGV2ZWwgPCBvcmRlcltwYXJ0UG9zICsgMV0ubGV2ZWwpIHtcclxuICAgICAgICBwYXJ0ID0gb3JkZXJbKytwYXJ0UG9zXTtcclxuICAgICAgICBjaCA9IGJpZGlMZWZ0KHBhcnQpIC0gcGFydC5sZXZlbCAlIDI7XHJcbiAgICAgICAgcmlnaHQgPSBmYWxzZTtcclxuICAgICAgfVxyXG4gICAgICBpZiAocmlnaHQgJiYgY2ggPT0gcGFydC50byAmJiBjaCA+IHBhcnQuZnJvbSkgcmV0dXJuIGdldChjaCAtIDEpO1xyXG4gICAgICByZXR1cm4gZ2V0KGNoLCByaWdodCk7XHJcbiAgICB9XHJcbiAgICB2YXIgb3JkZXIgPSBnZXRPcmRlcihsaW5lT2JqKSwgY2ggPSBwb3MuY2g7XHJcbiAgICBpZiAoIW9yZGVyKSByZXR1cm4gZ2V0KGNoKTtcclxuICAgIHZhciBwYXJ0UG9zID0gZ2V0QmlkaVBhcnRBdChvcmRlciwgY2gpO1xyXG4gICAgdmFyIHZhbCA9IGdldEJpZGkoY2gsIHBhcnRQb3MpO1xyXG4gICAgaWYgKGJpZGlPdGhlciAhPSBudWxsKSB2YWwub3RoZXIgPSBnZXRCaWRpKGNoLCBiaWRpT3RoZXIpO1xyXG4gICAgcmV0dXJuIHZhbDtcclxuICB9XHJcblxyXG4gIC8vIFVzZWQgdG8gY2hlYXBseSBlc3RpbWF0ZSB0aGUgY29vcmRpbmF0ZXMgZm9yIGEgcG9zaXRpb24uIFVzZWQgZm9yXHJcbiAgLy8gaW50ZXJtZWRpYXRlIHNjcm9sbCB1cGRhdGVzLlxyXG4gIGZ1bmN0aW9uIGVzdGltYXRlQ29vcmRzKGNtLCBwb3MpIHtcclxuICAgIHZhciBsZWZ0ID0gMCwgcG9zID0gY2xpcFBvcyhjbS5kb2MsIHBvcyk7XHJcbiAgICBpZiAoIWNtLm9wdGlvbnMubGluZVdyYXBwaW5nKSBsZWZ0ID0gY2hhcldpZHRoKGNtLmRpc3BsYXkpICogcG9zLmNoO1xyXG4gICAgdmFyIGxpbmVPYmogPSBnZXRMaW5lKGNtLmRvYywgcG9zLmxpbmUpO1xyXG4gICAgdmFyIHRvcCA9IGhlaWdodEF0TGluZShsaW5lT2JqKSArIHBhZGRpbmdUb3AoY20uZGlzcGxheSk7XHJcbiAgICByZXR1cm4ge2xlZnQ6IGxlZnQsIHJpZ2h0OiBsZWZ0LCB0b3A6IHRvcCwgYm90dG9tOiB0b3AgKyBsaW5lT2JqLmhlaWdodH07XHJcbiAgfVxyXG5cclxuICAvLyBQb3NpdGlvbnMgcmV0dXJuZWQgYnkgY29vcmRzQ2hhciBjb250YWluIHNvbWUgZXh0cmEgaW5mb3JtYXRpb24uXHJcbiAgLy8geFJlbCBpcyB0aGUgcmVsYXRpdmUgeCBwb3NpdGlvbiBvZiB0aGUgaW5wdXQgY29vcmRpbmF0ZXMgY29tcGFyZWRcclxuICAvLyB0byB0aGUgZm91bmQgcG9zaXRpb24gKHNvIHhSZWwgPiAwIG1lYW5zIHRoZSBjb29yZGluYXRlcyBhcmUgdG9cclxuICAvLyB0aGUgcmlnaHQgb2YgdGhlIGNoYXJhY3RlciBwb3NpdGlvbiwgZm9yIGV4YW1wbGUpLiBXaGVuIG91dHNpZGVcclxuICAvLyBpcyB0cnVlLCB0aGF0IG1lYW5zIHRoZSBjb29yZGluYXRlcyBsaWUgb3V0c2lkZSB0aGUgbGluZSdzXHJcbiAgLy8gdmVydGljYWwgcmFuZ2UuXHJcbiAgZnVuY3Rpb24gUG9zV2l0aEluZm8obGluZSwgY2gsIG91dHNpZGUsIHhSZWwpIHtcclxuICAgIHZhciBwb3MgPSBQb3MobGluZSwgY2gpO1xyXG4gICAgcG9zLnhSZWwgPSB4UmVsO1xyXG4gICAgaWYgKG91dHNpZGUpIHBvcy5vdXRzaWRlID0gdHJ1ZTtcclxuICAgIHJldHVybiBwb3M7XHJcbiAgfVxyXG5cclxuICAvLyBDb21wdXRlIHRoZSBjaGFyYWN0ZXIgcG9zaXRpb24gY2xvc2VzdCB0byB0aGUgZ2l2ZW4gY29vcmRpbmF0ZXMuXHJcbiAgLy8gSW5wdXQgbXVzdCBiZSBsaW5lU3BhY2UtbG9jYWwgKFwiZGl2XCIgY29vcmRpbmF0ZSBzeXN0ZW0pLlxyXG4gIGZ1bmN0aW9uIGNvb3Jkc0NoYXIoY20sIHgsIHkpIHtcclxuICAgIHZhciBkb2MgPSBjbS5kb2M7XHJcbiAgICB5ICs9IGNtLmRpc3BsYXkudmlld09mZnNldDtcclxuICAgIGlmICh5IDwgMCkgcmV0dXJuIFBvc1dpdGhJbmZvKGRvYy5maXJzdCwgMCwgdHJ1ZSwgLTEpO1xyXG4gICAgdmFyIGxpbmVOID0gbGluZUF0SGVpZ2h0KGRvYywgeSksIGxhc3QgPSBkb2MuZmlyc3QgKyBkb2Muc2l6ZSAtIDE7XHJcbiAgICBpZiAobGluZU4gPiBsYXN0KVxyXG4gICAgICByZXR1cm4gUG9zV2l0aEluZm8oZG9jLmZpcnN0ICsgZG9jLnNpemUgLSAxLCBnZXRMaW5lKGRvYywgbGFzdCkudGV4dC5sZW5ndGgsIHRydWUsIDEpO1xyXG4gICAgaWYgKHggPCAwKSB4ID0gMDtcclxuXHJcbiAgICB2YXIgbGluZU9iaiA9IGdldExpbmUoZG9jLCBsaW5lTik7XHJcbiAgICBmb3IgKDs7KSB7XHJcbiAgICAgIHZhciBmb3VuZCA9IGNvb3Jkc0NoYXJJbm5lcihjbSwgbGluZU9iaiwgbGluZU4sIHgsIHkpO1xyXG4gICAgICB2YXIgbWVyZ2VkID0gY29sbGFwc2VkU3BhbkF0RW5kKGxpbmVPYmopO1xyXG4gICAgICB2YXIgbWVyZ2VkUG9zID0gbWVyZ2VkICYmIG1lcmdlZC5maW5kKDAsIHRydWUpO1xyXG4gICAgICBpZiAobWVyZ2VkICYmIChmb3VuZC5jaCA+IG1lcmdlZFBvcy5mcm9tLmNoIHx8IGZvdW5kLmNoID09IG1lcmdlZFBvcy5mcm9tLmNoICYmIGZvdW5kLnhSZWwgPiAwKSlcclxuICAgICAgICBsaW5lTiA9IGxpbmVObyhsaW5lT2JqID0gbWVyZ2VkUG9zLnRvLmxpbmUpO1xyXG4gICAgICBlbHNlXHJcbiAgICAgICAgcmV0dXJuIGZvdW5kO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgZnVuY3Rpb24gY29vcmRzQ2hhcklubmVyKGNtLCBsaW5lT2JqLCBsaW5lTm8sIHgsIHkpIHtcclxuICAgIHZhciBpbm5lck9mZiA9IHkgLSBoZWlnaHRBdExpbmUobGluZU9iaik7XHJcbiAgICB2YXIgd3JvbmdMaW5lID0gZmFsc2UsIGFkanVzdCA9IDIgKiBjbS5kaXNwbGF5LndyYXBwZXIuY2xpZW50V2lkdGg7XHJcbiAgICB2YXIgcHJlcGFyZWRNZWFzdXJlID0gcHJlcGFyZU1lYXN1cmVGb3JMaW5lKGNtLCBsaW5lT2JqKTtcclxuXHJcbiAgICBmdW5jdGlvbiBnZXRYKGNoKSB7XHJcbiAgICAgIHZhciBzcCA9IGN1cnNvckNvb3JkcyhjbSwgUG9zKGxpbmVObywgY2gpLCBcImxpbmVcIiwgbGluZU9iaiwgcHJlcGFyZWRNZWFzdXJlKTtcclxuICAgICAgd3JvbmdMaW5lID0gdHJ1ZTtcclxuICAgICAgaWYgKGlubmVyT2ZmID4gc3AuYm90dG9tKSByZXR1cm4gc3AubGVmdCAtIGFkanVzdDtcclxuICAgICAgZWxzZSBpZiAoaW5uZXJPZmYgPCBzcC50b3ApIHJldHVybiBzcC5sZWZ0ICsgYWRqdXN0O1xyXG4gICAgICBlbHNlIHdyb25nTGluZSA9IGZhbHNlO1xyXG4gICAgICByZXR1cm4gc3AubGVmdDtcclxuICAgIH1cclxuXHJcbiAgICB2YXIgYmlkaSA9IGdldE9yZGVyKGxpbmVPYmopLCBkaXN0ID0gbGluZU9iai50ZXh0Lmxlbmd0aDtcclxuICAgIHZhciBmcm9tID0gbGluZUxlZnQobGluZU9iaiksIHRvID0gbGluZVJpZ2h0KGxpbmVPYmopO1xyXG4gICAgdmFyIGZyb21YID0gZ2V0WChmcm9tKSwgZnJvbU91dHNpZGUgPSB3cm9uZ0xpbmUsIHRvWCA9IGdldFgodG8pLCB0b091dHNpZGUgPSB3cm9uZ0xpbmU7XHJcblxyXG4gICAgaWYgKHggPiB0b1gpIHJldHVybiBQb3NXaXRoSW5mbyhsaW5lTm8sIHRvLCB0b091dHNpZGUsIDEpO1xyXG4gICAgLy8gRG8gYSBiaW5hcnkgc2VhcmNoIGJldHdlZW4gdGhlc2UgYm91bmRzLlxyXG4gICAgZm9yICg7Oykge1xyXG4gICAgICBpZiAoYmlkaSA/IHRvID09IGZyb20gfHwgdG8gPT0gbW92ZVZpc3VhbGx5KGxpbmVPYmosIGZyb20sIDEpIDogdG8gLSBmcm9tIDw9IDEpIHtcclxuICAgICAgICB2YXIgY2ggPSB4IDwgZnJvbVggfHwgeCAtIGZyb21YIDw9IHRvWCAtIHggPyBmcm9tIDogdG87XHJcbiAgICAgICAgdmFyIHhEaWZmID0geCAtIChjaCA9PSBmcm9tID8gZnJvbVggOiB0b1gpO1xyXG4gICAgICAgIHdoaWxlIChpc0V4dGVuZGluZ0NoYXIobGluZU9iai50ZXh0LmNoYXJBdChjaCkpKSArK2NoO1xyXG4gICAgICAgIHZhciBwb3MgPSBQb3NXaXRoSW5mbyhsaW5lTm8sIGNoLCBjaCA9PSBmcm9tID8gZnJvbU91dHNpZGUgOiB0b091dHNpZGUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHhEaWZmIDwgLTEgPyAtMSA6IHhEaWZmID4gMSA/IDEgOiAwKTtcclxuICAgICAgICByZXR1cm4gcG9zO1xyXG4gICAgICB9XHJcbiAgICAgIHZhciBzdGVwID0gTWF0aC5jZWlsKGRpc3QgLyAyKSwgbWlkZGxlID0gZnJvbSArIHN0ZXA7XHJcbiAgICAgIGlmIChiaWRpKSB7XHJcbiAgICAgICAgbWlkZGxlID0gZnJvbTtcclxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHN0ZXA7ICsraSkgbWlkZGxlID0gbW92ZVZpc3VhbGx5KGxpbmVPYmosIG1pZGRsZSwgMSk7XHJcbiAgICAgIH1cclxuICAgICAgdmFyIG1pZGRsZVggPSBnZXRYKG1pZGRsZSk7XHJcbiAgICAgIGlmIChtaWRkbGVYID4geCkge3RvID0gbWlkZGxlOyB0b1ggPSBtaWRkbGVYOyBpZiAodG9PdXRzaWRlID0gd3JvbmdMaW5lKSB0b1ggKz0gMTAwMDsgZGlzdCA9IHN0ZXA7fVxyXG4gICAgICBlbHNlIHtmcm9tID0gbWlkZGxlOyBmcm9tWCA9IG1pZGRsZVg7IGZyb21PdXRzaWRlID0gd3JvbmdMaW5lOyBkaXN0IC09IHN0ZXA7fVxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgdmFyIG1lYXN1cmVUZXh0O1xyXG4gIC8vIENvbXB1dGUgdGhlIGRlZmF1bHQgdGV4dCBoZWlnaHQuXHJcbiAgZnVuY3Rpb24gdGV4dEhlaWdodChkaXNwbGF5KSB7XHJcbiAgICBpZiAoZGlzcGxheS5jYWNoZWRUZXh0SGVpZ2h0ICE9IG51bGwpIHJldHVybiBkaXNwbGF5LmNhY2hlZFRleHRIZWlnaHQ7XHJcbiAgICBpZiAobWVhc3VyZVRleHQgPT0gbnVsbCkge1xyXG4gICAgICBtZWFzdXJlVGV4dCA9IGVsdChcInByZVwiKTtcclxuICAgICAgLy8gTWVhc3VyZSBhIGJ1bmNoIG9mIGxpbmVzLCBmb3IgYnJvd3NlcnMgdGhhdCBjb21wdXRlXHJcbiAgICAgIC8vIGZyYWN0aW9uYWwgaGVpZ2h0cy5cclxuICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCA0OTsgKytpKSB7XHJcbiAgICAgICAgbWVhc3VyZVRleHQuYXBwZW5kQ2hpbGQoZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoXCJ4XCIpKTtcclxuICAgICAgICBtZWFzdXJlVGV4dC5hcHBlbmRDaGlsZChlbHQoXCJiclwiKSk7XHJcbiAgICAgIH1cclxuICAgICAgbWVhc3VyZVRleHQuYXBwZW5kQ2hpbGQoZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoXCJ4XCIpKTtcclxuICAgIH1cclxuICAgIHJlbW92ZUNoaWxkcmVuQW5kQWRkKGRpc3BsYXkubWVhc3VyZSwgbWVhc3VyZVRleHQpO1xyXG4gICAgdmFyIGhlaWdodCA9IG1lYXN1cmVUZXh0Lm9mZnNldEhlaWdodCAvIDUwO1xyXG4gICAgaWYgKGhlaWdodCA+IDMpIGRpc3BsYXkuY2FjaGVkVGV4dEhlaWdodCA9IGhlaWdodDtcclxuICAgIHJlbW92ZUNoaWxkcmVuKGRpc3BsYXkubWVhc3VyZSk7XHJcbiAgICByZXR1cm4gaGVpZ2h0IHx8IDE7XHJcbiAgfVxyXG5cclxuICAvLyBDb21wdXRlIHRoZSBkZWZhdWx0IGNoYXJhY3RlciB3aWR0aC5cclxuICBmdW5jdGlvbiBjaGFyV2lkdGgoZGlzcGxheSkge1xyXG4gICAgaWYgKGRpc3BsYXkuY2FjaGVkQ2hhcldpZHRoICE9IG51bGwpIHJldHVybiBkaXNwbGF5LmNhY2hlZENoYXJXaWR0aDtcclxuICAgIHZhciBhbmNob3IgPSBlbHQoXCJzcGFuXCIsIFwieHh4eHh4eHh4eFwiKTtcclxuICAgIHZhciBwcmUgPSBlbHQoXCJwcmVcIiwgW2FuY2hvcl0pO1xyXG4gICAgcmVtb3ZlQ2hpbGRyZW5BbmRBZGQoZGlzcGxheS5tZWFzdXJlLCBwcmUpO1xyXG4gICAgdmFyIHJlY3QgPSBhbmNob3IuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCksIHdpZHRoID0gKHJlY3QucmlnaHQgLSByZWN0LmxlZnQpIC8gMTA7XHJcbiAgICBpZiAod2lkdGggPiAyKSBkaXNwbGF5LmNhY2hlZENoYXJXaWR0aCA9IHdpZHRoO1xyXG4gICAgcmV0dXJuIHdpZHRoIHx8IDEwO1xyXG4gIH1cclxuXHJcbiAgLy8gT1BFUkFUSU9OU1xyXG5cclxuICAvLyBPcGVyYXRpb25zIGFyZSB1c2VkIHRvIHdyYXAgYSBzZXJpZXMgb2YgY2hhbmdlcyB0byB0aGUgZWRpdG9yXHJcbiAgLy8gc3RhdGUgaW4gc3VjaCBhIHdheSB0aGF0IGVhY2ggY2hhbmdlIHdvbid0IGhhdmUgdG8gdXBkYXRlIHRoZVxyXG4gIC8vIGN1cnNvciBhbmQgZGlzcGxheSAod2hpY2ggd291bGQgYmUgYXdrd2FyZCwgc2xvdywgYW5kXHJcbiAgLy8gZXJyb3ItcHJvbmUpLiBJbnN0ZWFkLCBkaXNwbGF5IHVwZGF0ZXMgYXJlIGJhdGNoZWQgYW5kIHRoZW4gYWxsXHJcbiAgLy8gY29tYmluZWQgYW5kIGV4ZWN1dGVkIGF0IG9uY2UuXHJcblxyXG4gIHZhciBvcGVyYXRpb25Hcm91cCA9IG51bGw7XHJcblxyXG4gIHZhciBuZXh0T3BJZCA9IDA7XHJcbiAgLy8gU3RhcnQgYSBuZXcgb3BlcmF0aW9uLlxyXG4gIGZ1bmN0aW9uIHN0YXJ0T3BlcmF0aW9uKGNtKSB7XHJcbiAgICBjbS5jdXJPcCA9IHtcclxuICAgICAgY206IGNtLFxyXG4gICAgICB2aWV3Q2hhbmdlZDogZmFsc2UsICAgICAgLy8gRmxhZyB0aGF0IGluZGljYXRlcyB0aGF0IGxpbmVzIG1pZ2h0IG5lZWQgdG8gYmUgcmVkcmF3blxyXG4gICAgICBzdGFydEhlaWdodDogY20uZG9jLmhlaWdodCwgLy8gVXNlZCB0byBkZXRlY3QgbmVlZCB0byB1cGRhdGUgc2Nyb2xsYmFyXHJcbiAgICAgIGZvcmNlVXBkYXRlOiBmYWxzZSwgICAgICAvLyBVc2VkIHRvIGZvcmNlIGEgcmVkcmF3XHJcbiAgICAgIHVwZGF0ZUlucHV0OiBudWxsLCAgICAgICAvLyBXaGV0aGVyIHRvIHJlc2V0IHRoZSBpbnB1dCB0ZXh0YXJlYVxyXG4gICAgICB0eXBpbmc6IGZhbHNlLCAgICAgICAgICAgLy8gV2hldGhlciB0aGlzIHJlc2V0IHNob3VsZCBiZSBjYXJlZnVsIHRvIGxlYXZlIGV4aXN0aW5nIHRleHQgKGZvciBjb21wb3NpdGluZylcclxuICAgICAgY2hhbmdlT2JqczogbnVsbCwgICAgICAgIC8vIEFjY3VtdWxhdGVkIGNoYW5nZXMsIGZvciBmaXJpbmcgY2hhbmdlIGV2ZW50c1xyXG4gICAgICBjdXJzb3JBY3Rpdml0eUhhbmRsZXJzOiBudWxsLCAvLyBTZXQgb2YgaGFuZGxlcnMgdG8gZmlyZSBjdXJzb3JBY3Rpdml0eSBvblxyXG4gICAgICBjdXJzb3JBY3Rpdml0eUNhbGxlZDogMCwgLy8gVHJhY2tzIHdoaWNoIGN1cnNvckFjdGl2aXR5IGhhbmRsZXJzIGhhdmUgYmVlbiBjYWxsZWQgYWxyZWFkeVxyXG4gICAgICBzZWxlY3Rpb25DaGFuZ2VkOiBmYWxzZSwgLy8gV2hldGhlciB0aGUgc2VsZWN0aW9uIG5lZWRzIHRvIGJlIHJlZHJhd25cclxuICAgICAgdXBkYXRlTWF4TGluZTogZmFsc2UsICAgIC8vIFNldCB3aGVuIHRoZSB3aWRlc3QgbGluZSBuZWVkcyB0byBiZSBkZXRlcm1pbmVkIGFuZXdcclxuICAgICAgc2Nyb2xsTGVmdDogbnVsbCwgc2Nyb2xsVG9wOiBudWxsLCAvLyBJbnRlcm1lZGlhdGUgc2Nyb2xsIHBvc2l0aW9uLCBub3QgcHVzaGVkIHRvIERPTSB5ZXRcclxuICAgICAgc2Nyb2xsVG9Qb3M6IG51bGwsICAgICAgIC8vIFVzZWQgdG8gc2Nyb2xsIHRvIGEgc3BlY2lmaWMgcG9zaXRpb25cclxuICAgICAgaWQ6ICsrbmV4dE9wSWQgICAgICAgICAgIC8vIFVuaXF1ZSBJRFxyXG4gICAgfTtcclxuICAgIGlmIChvcGVyYXRpb25Hcm91cCkge1xyXG4gICAgICBvcGVyYXRpb25Hcm91cC5vcHMucHVzaChjbS5jdXJPcCk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBjbS5jdXJPcC5vd25zR3JvdXAgPSBvcGVyYXRpb25Hcm91cCA9IHtcclxuICAgICAgICBvcHM6IFtjbS5jdXJPcF0sXHJcbiAgICAgICAgZGVsYXllZENhbGxiYWNrczogW11cclxuICAgICAgfTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIGZ1bmN0aW9uIGZpcmVDYWxsYmFja3NGb3JPcHMoZ3JvdXApIHtcclxuICAgIC8vIENhbGxzIGRlbGF5ZWQgY2FsbGJhY2tzIGFuZCBjdXJzb3JBY3Rpdml0eSBoYW5kbGVycyB1bnRpbCBub1xyXG4gICAgLy8gbmV3IG9uZXMgYXBwZWFyXHJcbiAgICB2YXIgY2FsbGJhY2tzID0gZ3JvdXAuZGVsYXllZENhbGxiYWNrcywgaSA9IDA7XHJcbiAgICBkbyB7XHJcbiAgICAgIGZvciAoOyBpIDwgY2FsbGJhY2tzLmxlbmd0aDsgaSsrKVxyXG4gICAgICAgIGNhbGxiYWNrc1tpXSgpO1xyXG4gICAgICBmb3IgKHZhciBqID0gMDsgaiA8IGdyb3VwLm9wcy5sZW5ndGg7IGorKykge1xyXG4gICAgICAgIHZhciBvcCA9IGdyb3VwLm9wc1tqXTtcclxuICAgICAgICBpZiAob3AuY3Vyc29yQWN0aXZpdHlIYW5kbGVycylcclxuICAgICAgICAgIHdoaWxlIChvcC5jdXJzb3JBY3Rpdml0eUNhbGxlZCA8IG9wLmN1cnNvckFjdGl2aXR5SGFuZGxlcnMubGVuZ3RoKVxyXG4gICAgICAgICAgICBvcC5jdXJzb3JBY3Rpdml0eUhhbmRsZXJzW29wLmN1cnNvckFjdGl2aXR5Q2FsbGVkKytdKG9wLmNtKTtcclxuICAgICAgfVxyXG4gICAgfSB3aGlsZSAoaSA8IGNhbGxiYWNrcy5sZW5ndGgpO1xyXG4gIH1cclxuXHJcbiAgLy8gRmluaXNoIGFuIG9wZXJhdGlvbiwgdXBkYXRpbmcgdGhlIGRpc3BsYXkgYW5kIHNpZ25hbGxpbmcgZGVsYXllZCBldmVudHNcclxuICBmdW5jdGlvbiBlbmRPcGVyYXRpb24oY20pIHtcclxuICAgIHZhciBvcCA9IGNtLmN1ck9wLCBncm91cCA9IG9wLm93bnNHcm91cDtcclxuICAgIGlmICghZ3JvdXApIHJldHVybjtcclxuXHJcbiAgICB0cnkgeyBmaXJlQ2FsbGJhY2tzRm9yT3BzKGdyb3VwKTsgfVxyXG4gICAgZmluYWxseSB7XHJcbiAgICAgIG9wZXJhdGlvbkdyb3VwID0gbnVsbDtcclxuICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBncm91cC5vcHMubGVuZ3RoOyBpKyspXHJcbiAgICAgICAgZ3JvdXAub3BzW2ldLmNtLmN1ck9wID0gbnVsbDtcclxuICAgICAgZW5kT3BlcmF0aW9ucyhncm91cCk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvLyBUaGUgRE9NIHVwZGF0ZXMgZG9uZSB3aGVuIGFuIG9wZXJhdGlvbiBmaW5pc2hlcyBhcmUgYmF0Y2hlZCBzb1xyXG4gIC8vIHRoYXQgdGhlIG1pbmltdW0gbnVtYmVyIG9mIHJlbGF5b3V0cyBhcmUgcmVxdWlyZWQuXHJcbiAgZnVuY3Rpb24gZW5kT3BlcmF0aW9ucyhncm91cCkge1xyXG4gICAgdmFyIG9wcyA9IGdyb3VwLm9wcztcclxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgb3BzLmxlbmd0aDsgaSsrKSAvLyBSZWFkIERPTVxyXG4gICAgICBlbmRPcGVyYXRpb25fUjEob3BzW2ldKTtcclxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgb3BzLmxlbmd0aDsgaSsrKSAvLyBXcml0ZSBET00gKG1heWJlKVxyXG4gICAgICBlbmRPcGVyYXRpb25fVzEob3BzW2ldKTtcclxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgb3BzLmxlbmd0aDsgaSsrKSAvLyBSZWFkIERPTVxyXG4gICAgICBlbmRPcGVyYXRpb25fUjIob3BzW2ldKTtcclxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgb3BzLmxlbmd0aDsgaSsrKSAvLyBXcml0ZSBET00gKG1heWJlKVxyXG4gICAgICBlbmRPcGVyYXRpb25fVzIob3BzW2ldKTtcclxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgb3BzLmxlbmd0aDsgaSsrKSAvLyBSZWFkIERPTVxyXG4gICAgICBlbmRPcGVyYXRpb25fZmluaXNoKG9wc1tpXSk7XHJcbiAgfVxyXG5cclxuICBmdW5jdGlvbiBlbmRPcGVyYXRpb25fUjEob3ApIHtcclxuICAgIHZhciBjbSA9IG9wLmNtLCBkaXNwbGF5ID0gY20uZGlzcGxheTtcclxuICAgIGlmIChvcC51cGRhdGVNYXhMaW5lKSBmaW5kTWF4TGluZShjbSk7XHJcblxyXG4gICAgb3AubXVzdFVwZGF0ZSA9IG9wLnZpZXdDaGFuZ2VkIHx8IG9wLmZvcmNlVXBkYXRlIHx8IG9wLnNjcm9sbFRvcCAhPSBudWxsIHx8XHJcbiAgICAgIG9wLnNjcm9sbFRvUG9zICYmIChvcC5zY3JvbGxUb1Bvcy5mcm9tLmxpbmUgPCBkaXNwbGF5LnZpZXdGcm9tIHx8XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICBvcC5zY3JvbGxUb1Bvcy50by5saW5lID49IGRpc3BsYXkudmlld1RvKSB8fFxyXG4gICAgICBkaXNwbGF5Lm1heExpbmVDaGFuZ2VkICYmIGNtLm9wdGlvbnMubGluZVdyYXBwaW5nO1xyXG4gICAgb3AudXBkYXRlID0gb3AubXVzdFVwZGF0ZSAmJlxyXG4gICAgICBuZXcgRGlzcGxheVVwZGF0ZShjbSwgb3AubXVzdFVwZGF0ZSAmJiB7dG9wOiBvcC5zY3JvbGxUb3AsIGVuc3VyZTogb3Auc2Nyb2xsVG9Qb3N9LCBvcC5mb3JjZVVwZGF0ZSk7XHJcbiAgfVxyXG5cclxuICBmdW5jdGlvbiBlbmRPcGVyYXRpb25fVzEob3ApIHtcclxuICAgIG9wLnVwZGF0ZWREaXNwbGF5ID0gb3AubXVzdFVwZGF0ZSAmJiB1cGRhdGVEaXNwbGF5SWZOZWVkZWQob3AuY20sIG9wLnVwZGF0ZSk7XHJcbiAgfVxyXG5cclxuICBmdW5jdGlvbiBlbmRPcGVyYXRpb25fUjIob3ApIHtcclxuICAgIHZhciBjbSA9IG9wLmNtLCBkaXNwbGF5ID0gY20uZGlzcGxheTtcclxuICAgIGlmIChvcC51cGRhdGVkRGlzcGxheSkgdXBkYXRlSGVpZ2h0c0luVmlld3BvcnQoY20pO1xyXG5cclxuICAgIG9wLmJhck1lYXN1cmUgPSBtZWFzdXJlRm9yU2Nyb2xsYmFycyhjbSk7XHJcblxyXG4gICAgLy8gSWYgdGhlIG1heCBsaW5lIGNoYW5nZWQgc2luY2UgaXQgd2FzIGxhc3QgbWVhc3VyZWQsIG1lYXN1cmUgaXQsXHJcbiAgICAvLyBhbmQgZW5zdXJlIHRoZSBkb2N1bWVudCdzIHdpZHRoIG1hdGNoZXMgaXQuXHJcbiAgICAvLyB1cGRhdGVEaXNwbGF5X1cyIHdpbGwgdXNlIHRoZXNlIHByb3BlcnRpZXMgdG8gZG8gdGhlIGFjdHVhbCByZXNpemluZ1xyXG4gICAgaWYgKGRpc3BsYXkubWF4TGluZUNoYW5nZWQgJiYgIWNtLm9wdGlvbnMubGluZVdyYXBwaW5nKSB7XHJcbiAgICAgIG9wLmFkanVzdFdpZHRoVG8gPSBtZWFzdXJlQ2hhcihjbSwgZGlzcGxheS5tYXhMaW5lLCBkaXNwbGF5Lm1heExpbmUudGV4dC5sZW5ndGgpLmxlZnQgKyAzO1xyXG4gICAgICBvcC5tYXhTY3JvbGxMZWZ0ID0gTWF0aC5tYXgoMCwgZGlzcGxheS5zaXplci5vZmZzZXRMZWZ0ICsgb3AuYWRqdXN0V2lkdGhUbyArXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzY3JvbGxlckN1dE9mZiAtIGRpc3BsYXkuc2Nyb2xsZXIuY2xpZW50V2lkdGgpO1xyXG4gICAgfVxyXG5cclxuICAgIGlmIChvcC51cGRhdGVkRGlzcGxheSB8fCBvcC5zZWxlY3Rpb25DaGFuZ2VkKVxyXG4gICAgICBvcC5uZXdTZWxlY3Rpb25Ob2RlcyA9IGRyYXdTZWxlY3Rpb24oY20pO1xyXG4gIH1cclxuXHJcbiAgZnVuY3Rpb24gZW5kT3BlcmF0aW9uX1cyKG9wKSB7XHJcbiAgICB2YXIgY20gPSBvcC5jbTtcclxuXHJcbiAgICBpZiAob3AuYWRqdXN0V2lkdGhUbyAhPSBudWxsKSB7XHJcbiAgICAgIGNtLmRpc3BsYXkuc2l6ZXIuc3R5bGUubWluV2lkdGggPSBvcC5hZGp1c3RXaWR0aFRvICsgXCJweFwiO1xyXG4gICAgICBpZiAob3AubWF4U2Nyb2xsTGVmdCA8IGNtLmRvYy5zY3JvbGxMZWZ0KVxyXG4gICAgICAgIHNldFNjcm9sbExlZnQoY20sIE1hdGgubWluKGNtLmRpc3BsYXkuc2Nyb2xsZXIuc2Nyb2xsTGVmdCwgb3AubWF4U2Nyb2xsTGVmdCksIHRydWUpO1xyXG4gICAgICBjbS5kaXNwbGF5Lm1heExpbmVDaGFuZ2VkID0gZmFsc2U7XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKG9wLm5ld1NlbGVjdGlvbk5vZGVzKVxyXG4gICAgICBzaG93U2VsZWN0aW9uKGNtLCBvcC5uZXdTZWxlY3Rpb25Ob2Rlcyk7XHJcbiAgICBpZiAob3AudXBkYXRlZERpc3BsYXkpXHJcbiAgICAgIHNldERvY3VtZW50SGVpZ2h0KGNtLCBvcC5iYXJNZWFzdXJlKTtcclxuICAgIGlmIChvcC51cGRhdGVkRGlzcGxheSB8fCBvcC5zdGFydEhlaWdodCAhPSBjbS5kb2MuaGVpZ2h0KVxyXG4gICAgICB1cGRhdGVTY3JvbGxiYXJzKGNtLCBvcC5iYXJNZWFzdXJlKTtcclxuXHJcbiAgICBpZiAob3Auc2VsZWN0aW9uQ2hhbmdlZCkgcmVzdGFydEJsaW5rKGNtKTtcclxuXHJcbiAgICBpZiAoY20uc3RhdGUuZm9jdXNlZCAmJiBvcC51cGRhdGVJbnB1dClcclxuICAgICAgcmVzZXRJbnB1dChjbSwgb3AudHlwaW5nKTtcclxuICB9XHJcblxyXG4gIGZ1bmN0aW9uIGVuZE9wZXJhdGlvbl9maW5pc2gob3ApIHtcclxuICAgIHZhciBjbSA9IG9wLmNtLCBkaXNwbGF5ID0gY20uZGlzcGxheSwgZG9jID0gY20uZG9jO1xyXG5cclxuICAgIGlmIChvcC5hZGp1c3RXaWR0aFRvICE9IG51bGwgJiYgTWF0aC5hYnMob3AuYmFyTWVhc3VyZS5zY3JvbGxXaWR0aCAtIGNtLmRpc3BsYXkuc2Nyb2xsZXIuc2Nyb2xsV2lkdGgpID4gMSlcclxuICAgICAgdXBkYXRlU2Nyb2xsYmFycyhjbSk7XHJcblxyXG4gICAgaWYgKG9wLnVwZGF0ZWREaXNwbGF5KSBwb3N0VXBkYXRlRGlzcGxheShjbSwgb3AudXBkYXRlKTtcclxuXHJcbiAgICAvLyBBYm9ydCBtb3VzZSB3aGVlbCBkZWx0YSBtZWFzdXJlbWVudCwgd2hlbiBzY3JvbGxpbmcgZXhwbGljaXRseVxyXG4gICAgaWYgKGRpc3BsYXkud2hlZWxTdGFydFggIT0gbnVsbCAmJiAob3Auc2Nyb2xsVG9wICE9IG51bGwgfHwgb3Auc2Nyb2xsTGVmdCAhPSBudWxsIHx8IG9wLnNjcm9sbFRvUG9zKSlcclxuICAgICAgZGlzcGxheS53aGVlbFN0YXJ0WCA9IGRpc3BsYXkud2hlZWxTdGFydFkgPSBudWxsO1xyXG5cclxuICAgIC8vIFByb3BhZ2F0ZSB0aGUgc2Nyb2xsIHBvc2l0aW9uIHRvIHRoZSBhY3R1YWwgRE9NIHNjcm9sbGVyXHJcbiAgICBpZiAob3Auc2Nyb2xsVG9wICE9IG51bGwgJiYgKGRpc3BsYXkuc2Nyb2xsZXIuc2Nyb2xsVG9wICE9IG9wLnNjcm9sbFRvcCB8fCBvcC5mb3JjZVNjcm9sbCkpIHtcclxuICAgICAgdmFyIHRvcCA9IE1hdGgubWF4KDAsIE1hdGgubWluKGRpc3BsYXkuc2Nyb2xsZXIuc2Nyb2xsSGVpZ2h0IC0gZGlzcGxheS5zY3JvbGxlci5jbGllbnRIZWlnaHQsIG9wLnNjcm9sbFRvcCkpO1xyXG4gICAgICBkaXNwbGF5LnNjcm9sbGVyLnNjcm9sbFRvcCA9IGRpc3BsYXkuc2Nyb2xsYmFyVi5zY3JvbGxUb3AgPSBkb2Muc2Nyb2xsVG9wID0gdG9wO1xyXG4gICAgfVxyXG4gICAgaWYgKG9wLnNjcm9sbExlZnQgIT0gbnVsbCAmJiAoZGlzcGxheS5zY3JvbGxlci5zY3JvbGxMZWZ0ICE9IG9wLnNjcm9sbExlZnQgfHwgb3AuZm9yY2VTY3JvbGwpKSB7XHJcbiAgICAgIHZhciBsZWZ0ID0gTWF0aC5tYXgoMCwgTWF0aC5taW4oZGlzcGxheS5zY3JvbGxlci5zY3JvbGxXaWR0aCAtIGRpc3BsYXkuc2Nyb2xsZXIuY2xpZW50V2lkdGgsIG9wLnNjcm9sbExlZnQpKTtcclxuICAgICAgZGlzcGxheS5zY3JvbGxlci5zY3JvbGxMZWZ0ID0gZGlzcGxheS5zY3JvbGxiYXJILnNjcm9sbExlZnQgPSBkb2Muc2Nyb2xsTGVmdCA9IGxlZnQ7XHJcbiAgICAgIGFsaWduSG9yaXpvbnRhbGx5KGNtKTtcclxuICAgIH1cclxuICAgIC8vIElmIHdlIG5lZWQgdG8gc2Nyb2xsIGEgc3BlY2lmaWMgcG9zaXRpb24gaW50byB2aWV3LCBkbyBzby5cclxuICAgIGlmIChvcC5zY3JvbGxUb1Bvcykge1xyXG4gICAgICB2YXIgY29vcmRzID0gc2Nyb2xsUG9zSW50b1ZpZXcoY20sIGNsaXBQb3MoZG9jLCBvcC5zY3JvbGxUb1Bvcy5mcm9tKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsaXBQb3MoZG9jLCBvcC5zY3JvbGxUb1Bvcy50byksIG9wLnNjcm9sbFRvUG9zLm1hcmdpbik7XHJcbiAgICAgIGlmIChvcC5zY3JvbGxUb1Bvcy5pc0N1cnNvciAmJiBjbS5zdGF0ZS5mb2N1c2VkKSBtYXliZVNjcm9sbFdpbmRvdyhjbSwgY29vcmRzKTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBGaXJlIGV2ZW50cyBmb3IgbWFya2VycyB0aGF0IGFyZSBoaWRkZW4vdW5pZGRlbiBieSBlZGl0aW5nIG9yXHJcbiAgICAvLyB1bmRvaW5nXHJcbiAgICB2YXIgaGlkZGVuID0gb3AubWF5YmVIaWRkZW5NYXJrZXJzLCB1bmhpZGRlbiA9IG9wLm1heWJlVW5oaWRkZW5NYXJrZXJzO1xyXG4gICAgaWYgKGhpZGRlbikgZm9yICh2YXIgaSA9IDA7IGkgPCBoaWRkZW4ubGVuZ3RoOyArK2kpXHJcbiAgICAgIGlmICghaGlkZGVuW2ldLmxpbmVzLmxlbmd0aCkgc2lnbmFsKGhpZGRlbltpXSwgXCJoaWRlXCIpO1xyXG4gICAgaWYgKHVuaGlkZGVuKSBmb3IgKHZhciBpID0gMDsgaSA8IHVuaGlkZGVuLmxlbmd0aDsgKytpKVxyXG4gICAgICBpZiAodW5oaWRkZW5baV0ubGluZXMubGVuZ3RoKSBzaWduYWwodW5oaWRkZW5baV0sIFwidW5oaWRlXCIpO1xyXG5cclxuICAgIGlmIChkaXNwbGF5LndyYXBwZXIub2Zmc2V0SGVpZ2h0KVxyXG4gICAgICBkb2Muc2Nyb2xsVG9wID0gY20uZGlzcGxheS5zY3JvbGxlci5zY3JvbGxUb3A7XHJcblxyXG4gICAgLy8gQXBwbHkgd29ya2Fyb3VuZCBmb3IgdHdvIHdlYmtpdCBidWdzXHJcbiAgICBpZiAob3AudXBkYXRlZERpc3BsYXkgJiYgd2Via2l0KSB7XHJcbiAgICAgIGlmIChjbS5vcHRpb25zLmxpbmVXcmFwcGluZylcclxuICAgICAgICBjaGVja0ZvcldlYmtpdFdpZHRoQnVnKGNtLCBvcC5iYXJNZWFzdXJlKTsgLy8gKElzc3VlICMyNDIwKVxyXG4gICAgICBpZiAob3AuYmFyTWVhc3VyZS5zY3JvbGxXaWR0aCA+IG9wLmJhck1lYXN1cmUuY2xpZW50V2lkdGggJiZcclxuICAgICAgICAgIG9wLmJhck1lYXN1cmUuc2Nyb2xsV2lkdGggPCBvcC5iYXJNZWFzdXJlLmNsaWVudFdpZHRoICsgMSAmJlxyXG4gICAgICAgICAgIWhTY3JvbGxiYXJUYWtlc1NwYWNlKGNtKSlcclxuICAgICAgICB1cGRhdGVTY3JvbGxiYXJzKGNtKTsgLy8gKElzc3VlICMyNTYyKVxyXG4gICAgfVxyXG5cclxuICAgIC8vIEZpcmUgY2hhbmdlIGV2ZW50cywgYW5kIGRlbGF5ZWQgZXZlbnQgaGFuZGxlcnNcclxuICAgIGlmIChvcC5jaGFuZ2VPYmpzKVxyXG4gICAgICBzaWduYWwoY20sIFwiY2hhbmdlc1wiLCBjbSwgb3AuY2hhbmdlT2Jqcyk7XHJcbiAgfVxyXG5cclxuICAvLyBSdW4gdGhlIGdpdmVuIGZ1bmN0aW9uIGluIGFuIG9wZXJhdGlvblxyXG4gIGZ1bmN0aW9uIHJ1bkluT3AoY20sIGYpIHtcclxuICAgIGlmIChjbS5jdXJPcCkgcmV0dXJuIGYoKTtcclxuICAgIHN0YXJ0T3BlcmF0aW9uKGNtKTtcclxuICAgIHRyeSB7IHJldHVybiBmKCk7IH1cclxuICAgIGZpbmFsbHkgeyBlbmRPcGVyYXRpb24oY20pOyB9XHJcbiAgfVxyXG4gIC8vIFdyYXBzIGEgZnVuY3Rpb24gaW4gYW4gb3BlcmF0aW9uLiBSZXR1cm5zIHRoZSB3cmFwcGVkIGZ1bmN0aW9uLlxyXG4gIGZ1bmN0aW9uIG9wZXJhdGlvbihjbSwgZikge1xyXG4gICAgcmV0dXJuIGZ1bmN0aW9uKCkge1xyXG4gICAgICBpZiAoY20uY3VyT3ApIHJldHVybiBmLmFwcGx5KGNtLCBhcmd1bWVudHMpO1xyXG4gICAgICBzdGFydE9wZXJhdGlvbihjbSk7XHJcbiAgICAgIHRyeSB7IHJldHVybiBmLmFwcGx5KGNtLCBhcmd1bWVudHMpOyB9XHJcbiAgICAgIGZpbmFsbHkgeyBlbmRPcGVyYXRpb24oY20pOyB9XHJcbiAgICB9O1xyXG4gIH1cclxuICAvLyBVc2VkIHRvIGFkZCBtZXRob2RzIHRvIGVkaXRvciBhbmQgZG9jIGluc3RhbmNlcywgd3JhcHBpbmcgdGhlbSBpblxyXG4gIC8vIG9wZXJhdGlvbnMuXHJcbiAgZnVuY3Rpb24gbWV0aG9kT3AoZikge1xyXG4gICAgcmV0dXJuIGZ1bmN0aW9uKCkge1xyXG4gICAgICBpZiAodGhpcy5jdXJPcCkgcmV0dXJuIGYuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcclxuICAgICAgc3RhcnRPcGVyYXRpb24odGhpcyk7XHJcbiAgICAgIHRyeSB7IHJldHVybiBmLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7IH1cclxuICAgICAgZmluYWxseSB7IGVuZE9wZXJhdGlvbih0aGlzKTsgfVxyXG4gICAgfTtcclxuICB9XHJcbiAgZnVuY3Rpb24gZG9jTWV0aG9kT3AoZikge1xyXG4gICAgcmV0dXJuIGZ1bmN0aW9uKCkge1xyXG4gICAgICB2YXIgY20gPSB0aGlzLmNtO1xyXG4gICAgICBpZiAoIWNtIHx8IGNtLmN1ck9wKSByZXR1cm4gZi5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xyXG4gICAgICBzdGFydE9wZXJhdGlvbihjbSk7XHJcbiAgICAgIHRyeSB7IHJldHVybiBmLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7IH1cclxuICAgICAgZmluYWxseSB7IGVuZE9wZXJhdGlvbihjbSk7IH1cclxuICAgIH07XHJcbiAgfVxyXG5cclxuICAvLyBWSUVXIFRSQUNLSU5HXHJcblxyXG4gIC8vIFRoZXNlIG9iamVjdHMgYXJlIHVzZWQgdG8gcmVwcmVzZW50IHRoZSB2aXNpYmxlIChjdXJyZW50bHkgZHJhd24pXHJcbiAgLy8gcGFydCBvZiB0aGUgZG9jdW1lbnQuIEEgTGluZVZpZXcgbWF5IGNvcnJlc3BvbmQgdG8gbXVsdGlwbGVcclxuICAvLyBsb2dpY2FsIGxpbmVzLCBpZiB0aG9zZSBhcmUgY29ubmVjdGVkIGJ5IGNvbGxhcHNlZCByYW5nZXMuXHJcbiAgZnVuY3Rpb24gTGluZVZpZXcoZG9jLCBsaW5lLCBsaW5lTikge1xyXG4gICAgLy8gVGhlIHN0YXJ0aW5nIGxpbmVcclxuICAgIHRoaXMubGluZSA9IGxpbmU7XHJcbiAgICAvLyBDb250aW51aW5nIGxpbmVzLCBpZiBhbnlcclxuICAgIHRoaXMucmVzdCA9IHZpc3VhbExpbmVDb250aW51ZWQobGluZSk7XHJcbiAgICAvLyBOdW1iZXIgb2YgbG9naWNhbCBsaW5lcyBpbiB0aGlzIHZpc3VhbCBsaW5lXHJcbiAgICB0aGlzLnNpemUgPSB0aGlzLnJlc3QgPyBsaW5lTm8obHN0KHRoaXMucmVzdCkpIC0gbGluZU4gKyAxIDogMTtcclxuICAgIHRoaXMubm9kZSA9IHRoaXMudGV4dCA9IG51bGw7XHJcbiAgICB0aGlzLmhpZGRlbiA9IGxpbmVJc0hpZGRlbihkb2MsIGxpbmUpO1xyXG4gIH1cclxuXHJcbiAgLy8gQ3JlYXRlIGEgcmFuZ2Ugb2YgTGluZVZpZXcgb2JqZWN0cyBmb3IgdGhlIGdpdmVuIGxpbmVzLlxyXG4gIGZ1bmN0aW9uIGJ1aWxkVmlld0FycmF5KGNtLCBmcm9tLCB0bykge1xyXG4gICAgdmFyIGFycmF5ID0gW10sIG5leHRQb3M7XHJcbiAgICBmb3IgKHZhciBwb3MgPSBmcm9tOyBwb3MgPCB0bzsgcG9zID0gbmV4dFBvcykge1xyXG4gICAgICB2YXIgdmlldyA9IG5ldyBMaW5lVmlldyhjbS5kb2MsIGdldExpbmUoY20uZG9jLCBwb3MpLCBwb3MpO1xyXG4gICAgICBuZXh0UG9zID0gcG9zICsgdmlldy5zaXplO1xyXG4gICAgICBhcnJheS5wdXNoKHZpZXcpO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIGFycmF5O1xyXG4gIH1cclxuXHJcbiAgLy8gVXBkYXRlcyB0aGUgZGlzcGxheS52aWV3IGRhdGEgc3RydWN0dXJlIGZvciBhIGdpdmVuIGNoYW5nZSB0byB0aGVcclxuICAvLyBkb2N1bWVudC4gRnJvbSBhbmQgdG8gYXJlIGluIHByZS1jaGFuZ2UgY29vcmRpbmF0ZXMuIExlbmRpZmYgaXNcclxuICAvLyB0aGUgYW1vdW50IG9mIGxpbmVzIGFkZGVkIG9yIHN1YnRyYWN0ZWQgYnkgdGhlIGNoYW5nZS4gVGhpcyBpc1xyXG4gIC8vIHVzZWQgZm9yIGNoYW5nZXMgdGhhdCBzcGFuIG11bHRpcGxlIGxpbmVzLCBvciBjaGFuZ2UgdGhlIHdheVxyXG4gIC8vIGxpbmVzIGFyZSBkaXZpZGVkIGludG8gdmlzdWFsIGxpbmVzLiByZWdMaW5lQ2hhbmdlIChiZWxvdylcclxuICAvLyByZWdpc3RlcnMgc2luZ2xlLWxpbmUgY2hhbmdlcy5cclxuICBmdW5jdGlvbiByZWdDaGFuZ2UoY20sIGZyb20sIHRvLCBsZW5kaWZmKSB7XHJcbiAgICBpZiAoZnJvbSA9PSBudWxsKSBmcm9tID0gY20uZG9jLmZpcnN0O1xyXG4gICAgaWYgKHRvID09IG51bGwpIHRvID0gY20uZG9jLmZpcnN0ICsgY20uZG9jLnNpemU7XHJcbiAgICBpZiAoIWxlbmRpZmYpIGxlbmRpZmYgPSAwO1xyXG5cclxuICAgIHZhciBkaXNwbGF5ID0gY20uZGlzcGxheTtcclxuICAgIGlmIChsZW5kaWZmICYmIHRvIDwgZGlzcGxheS52aWV3VG8gJiZcclxuICAgICAgICAoZGlzcGxheS51cGRhdGVMaW5lTnVtYmVycyA9PSBudWxsIHx8IGRpc3BsYXkudXBkYXRlTGluZU51bWJlcnMgPiBmcm9tKSlcclxuICAgICAgZGlzcGxheS51cGRhdGVMaW5lTnVtYmVycyA9IGZyb207XHJcblxyXG4gICAgY20uY3VyT3Audmlld0NoYW5nZWQgPSB0cnVlO1xyXG5cclxuICAgIGlmIChmcm9tID49IGRpc3BsYXkudmlld1RvKSB7IC8vIENoYW5nZSBhZnRlclxyXG4gICAgICBpZiAoc2F3Q29sbGFwc2VkU3BhbnMgJiYgdmlzdWFsTGluZU5vKGNtLmRvYywgZnJvbSkgPCBkaXNwbGF5LnZpZXdUbylcclxuICAgICAgICByZXNldFZpZXcoY20pO1xyXG4gICAgfSBlbHNlIGlmICh0byA8PSBkaXNwbGF5LnZpZXdGcm9tKSB7IC8vIENoYW5nZSBiZWZvcmVcclxuICAgICAgaWYgKHNhd0NvbGxhcHNlZFNwYW5zICYmIHZpc3VhbExpbmVFbmRObyhjbS5kb2MsIHRvICsgbGVuZGlmZikgPiBkaXNwbGF5LnZpZXdGcm9tKSB7XHJcbiAgICAgICAgcmVzZXRWaWV3KGNtKTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICBkaXNwbGF5LnZpZXdGcm9tICs9IGxlbmRpZmY7XHJcbiAgICAgICAgZGlzcGxheS52aWV3VG8gKz0gbGVuZGlmZjtcclxuICAgICAgfVxyXG4gICAgfSBlbHNlIGlmIChmcm9tIDw9IGRpc3BsYXkudmlld0Zyb20gJiYgdG8gPj0gZGlzcGxheS52aWV3VG8pIHsgLy8gRnVsbCBvdmVybGFwXHJcbiAgICAgIHJlc2V0VmlldyhjbSk7XHJcbiAgICB9IGVsc2UgaWYgKGZyb20gPD0gZGlzcGxheS52aWV3RnJvbSkgeyAvLyBUb3Agb3ZlcmxhcFxyXG4gICAgICB2YXIgY3V0ID0gdmlld0N1dHRpbmdQb2ludChjbSwgdG8sIHRvICsgbGVuZGlmZiwgMSk7XHJcbiAgICAgIGlmIChjdXQpIHtcclxuICAgICAgICBkaXNwbGF5LnZpZXcgPSBkaXNwbGF5LnZpZXcuc2xpY2UoY3V0LmluZGV4KTtcclxuICAgICAgICBkaXNwbGF5LnZpZXdGcm9tID0gY3V0LmxpbmVOO1xyXG4gICAgICAgIGRpc3BsYXkudmlld1RvICs9IGxlbmRpZmY7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgcmVzZXRWaWV3KGNtKTtcclxuICAgICAgfVxyXG4gICAgfSBlbHNlIGlmICh0byA+PSBkaXNwbGF5LnZpZXdUbykgeyAvLyBCb3R0b20gb3ZlcmxhcFxyXG4gICAgICB2YXIgY3V0ID0gdmlld0N1dHRpbmdQb2ludChjbSwgZnJvbSwgZnJvbSwgLTEpO1xyXG4gICAgICBpZiAoY3V0KSB7XHJcbiAgICAgICAgZGlzcGxheS52aWV3ID0gZGlzcGxheS52aWV3LnNsaWNlKDAsIGN1dC5pbmRleCk7XHJcbiAgICAgICAgZGlzcGxheS52aWV3VG8gPSBjdXQubGluZU47XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgcmVzZXRWaWV3KGNtKTtcclxuICAgICAgfVxyXG4gICAgfSBlbHNlIHsgLy8gR2FwIGluIHRoZSBtaWRkbGVcclxuICAgICAgdmFyIGN1dFRvcCA9IHZpZXdDdXR0aW5nUG9pbnQoY20sIGZyb20sIGZyb20sIC0xKTtcclxuICAgICAgdmFyIGN1dEJvdCA9IHZpZXdDdXR0aW5nUG9pbnQoY20sIHRvLCB0byArIGxlbmRpZmYsIDEpO1xyXG4gICAgICBpZiAoY3V0VG9wICYmIGN1dEJvdCkge1xyXG4gICAgICAgIGRpc3BsYXkudmlldyA9IGRpc3BsYXkudmlldy5zbGljZSgwLCBjdXRUb3AuaW5kZXgpXHJcbiAgICAgICAgICAuY29uY2F0KGJ1aWxkVmlld0FycmF5KGNtLCBjdXRUb3AubGluZU4sIGN1dEJvdC5saW5lTikpXHJcbiAgICAgICAgICAuY29uY2F0KGRpc3BsYXkudmlldy5zbGljZShjdXRCb3QuaW5kZXgpKTtcclxuICAgICAgICBkaXNwbGF5LnZpZXdUbyArPSBsZW5kaWZmO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIHJlc2V0VmlldyhjbSk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICB2YXIgZXh0ID0gZGlzcGxheS5leHRlcm5hbE1lYXN1cmVkO1xyXG4gICAgaWYgKGV4dCkge1xyXG4gICAgICBpZiAodG8gPCBleHQubGluZU4pXHJcbiAgICAgICAgZXh0LmxpbmVOICs9IGxlbmRpZmY7XHJcbiAgICAgIGVsc2UgaWYgKGZyb20gPCBleHQubGluZU4gKyBleHQuc2l6ZSlcclxuICAgICAgICBkaXNwbGF5LmV4dGVybmFsTWVhc3VyZWQgPSBudWxsO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLy8gUmVnaXN0ZXIgYSBjaGFuZ2UgdG8gYSBzaW5nbGUgbGluZS4gVHlwZSBtdXN0IGJlIG9uZSBvZiBcInRleHRcIixcclxuICAvLyBcImd1dHRlclwiLCBcImNsYXNzXCIsIFwid2lkZ2V0XCJcclxuICBmdW5jdGlvbiByZWdMaW5lQ2hhbmdlKGNtLCBsaW5lLCB0eXBlKSB7XHJcbiAgICBjbS5jdXJPcC52aWV3Q2hhbmdlZCA9IHRydWU7XHJcbiAgICB2YXIgZGlzcGxheSA9IGNtLmRpc3BsYXksIGV4dCA9IGNtLmRpc3BsYXkuZXh0ZXJuYWxNZWFzdXJlZDtcclxuICAgIGlmIChleHQgJiYgbGluZSA+PSBleHQubGluZU4gJiYgbGluZSA8IGV4dC5saW5lTiArIGV4dC5zaXplKVxyXG4gICAgICBkaXNwbGF5LmV4dGVybmFsTWVhc3VyZWQgPSBudWxsO1xyXG5cclxuICAgIGlmIChsaW5lIDwgZGlzcGxheS52aWV3RnJvbSB8fCBsaW5lID49IGRpc3BsYXkudmlld1RvKSByZXR1cm47XHJcbiAgICB2YXIgbGluZVZpZXcgPSBkaXNwbGF5LnZpZXdbZmluZFZpZXdJbmRleChjbSwgbGluZSldO1xyXG4gICAgaWYgKGxpbmVWaWV3Lm5vZGUgPT0gbnVsbCkgcmV0dXJuO1xyXG4gICAgdmFyIGFyciA9IGxpbmVWaWV3LmNoYW5nZXMgfHwgKGxpbmVWaWV3LmNoYW5nZXMgPSBbXSk7XHJcbiAgICBpZiAoaW5kZXhPZihhcnIsIHR5cGUpID09IC0xKSBhcnIucHVzaCh0eXBlKTtcclxuICB9XHJcblxyXG4gIC8vIENsZWFyIHRoZSB2aWV3LlxyXG4gIGZ1bmN0aW9uIHJlc2V0VmlldyhjbSkge1xyXG4gICAgY20uZGlzcGxheS52aWV3RnJvbSA9IGNtLmRpc3BsYXkudmlld1RvID0gY20uZG9jLmZpcnN0O1xyXG4gICAgY20uZGlzcGxheS52aWV3ID0gW107XHJcbiAgICBjbS5kaXNwbGF5LnZpZXdPZmZzZXQgPSAwO1xyXG4gIH1cclxuXHJcbiAgLy8gRmluZCB0aGUgdmlldyBlbGVtZW50IGNvcnJlc3BvbmRpbmcgdG8gYSBnaXZlbiBsaW5lLiBSZXR1cm4gbnVsbFxyXG4gIC8vIHdoZW4gdGhlIGxpbmUgaXNuJ3QgdmlzaWJsZS5cclxuICBmdW5jdGlvbiBmaW5kVmlld0luZGV4KGNtLCBuKSB7XHJcbiAgICBpZiAobiA+PSBjbS5kaXNwbGF5LnZpZXdUbykgcmV0dXJuIG51bGw7XHJcbiAgICBuIC09IGNtLmRpc3BsYXkudmlld0Zyb207XHJcbiAgICBpZiAobiA8IDApIHJldHVybiBudWxsO1xyXG4gICAgdmFyIHZpZXcgPSBjbS5kaXNwbGF5LnZpZXc7XHJcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHZpZXcubGVuZ3RoOyBpKyspIHtcclxuICAgICAgbiAtPSB2aWV3W2ldLnNpemU7XHJcbiAgICAgIGlmIChuIDwgMCkgcmV0dXJuIGk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBmdW5jdGlvbiB2aWV3Q3V0dGluZ1BvaW50KGNtLCBvbGROLCBuZXdOLCBkaXIpIHtcclxuICAgIHZhciBpbmRleCA9IGZpbmRWaWV3SW5kZXgoY20sIG9sZE4pLCBkaWZmLCB2aWV3ID0gY20uZGlzcGxheS52aWV3O1xyXG4gICAgaWYgKCFzYXdDb2xsYXBzZWRTcGFucyB8fCBuZXdOID09IGNtLmRvYy5maXJzdCArIGNtLmRvYy5zaXplKVxyXG4gICAgICByZXR1cm4ge2luZGV4OiBpbmRleCwgbGluZU46IG5ld059O1xyXG4gICAgZm9yICh2YXIgaSA9IDAsIG4gPSBjbS5kaXNwbGF5LnZpZXdGcm9tOyBpIDwgaW5kZXg7IGkrKylcclxuICAgICAgbiArPSB2aWV3W2ldLnNpemU7XHJcbiAgICBpZiAobiAhPSBvbGROKSB7XHJcbiAgICAgIGlmIChkaXIgPiAwKSB7XHJcbiAgICAgICAgaWYgKGluZGV4ID09IHZpZXcubGVuZ3RoIC0gMSkgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgZGlmZiA9IChuICsgdmlld1tpbmRleF0uc2l6ZSkgLSBvbGROO1xyXG4gICAgICAgIGluZGV4Kys7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgZGlmZiA9IG4gLSBvbGROO1xyXG4gICAgICB9XHJcbiAgICAgIG9sZE4gKz0gZGlmZjsgbmV3TiArPSBkaWZmO1xyXG4gICAgfVxyXG4gICAgd2hpbGUgKHZpc3VhbExpbmVObyhjbS5kb2MsIG5ld04pICE9IG5ld04pIHtcclxuICAgICAgaWYgKGluZGV4ID09IChkaXIgPCAwID8gMCA6IHZpZXcubGVuZ3RoIC0gMSkpIHJldHVybiBudWxsO1xyXG4gICAgICBuZXdOICs9IGRpciAqIHZpZXdbaW5kZXggLSAoZGlyIDwgMCA/IDEgOiAwKV0uc2l6ZTtcclxuICAgICAgaW5kZXggKz0gZGlyO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIHtpbmRleDogaW5kZXgsIGxpbmVOOiBuZXdOfTtcclxuICB9XHJcblxyXG4gIC8vIEZvcmNlIHRoZSB2aWV3IHRvIGNvdmVyIGEgZ2l2ZW4gcmFuZ2UsIGFkZGluZyBlbXB0eSB2aWV3IGVsZW1lbnRcclxuICAvLyBvciBjbGlwcGluZyBvZmYgZXhpc3Rpbmcgb25lcyBhcyBuZWVkZWQuXHJcbiAgZnVuY3Rpb24gYWRqdXN0VmlldyhjbSwgZnJvbSwgdG8pIHtcclxuICAgIHZhciBkaXNwbGF5ID0gY20uZGlzcGxheSwgdmlldyA9IGRpc3BsYXkudmlldztcclxuICAgIGlmICh2aWV3Lmxlbmd0aCA9PSAwIHx8IGZyb20gPj0gZGlzcGxheS52aWV3VG8gfHwgdG8gPD0gZGlzcGxheS52aWV3RnJvbSkge1xyXG4gICAgICBkaXNwbGF5LnZpZXcgPSBidWlsZFZpZXdBcnJheShjbSwgZnJvbSwgdG8pO1xyXG4gICAgICBkaXNwbGF5LnZpZXdGcm9tID0gZnJvbTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIGlmIChkaXNwbGF5LnZpZXdGcm9tID4gZnJvbSlcclxuICAgICAgICBkaXNwbGF5LnZpZXcgPSBidWlsZFZpZXdBcnJheShjbSwgZnJvbSwgZGlzcGxheS52aWV3RnJvbSkuY29uY2F0KGRpc3BsYXkudmlldyk7XHJcbiAgICAgIGVsc2UgaWYgKGRpc3BsYXkudmlld0Zyb20gPCBmcm9tKVxyXG4gICAgICAgIGRpc3BsYXkudmlldyA9IGRpc3BsYXkudmlldy5zbGljZShmaW5kVmlld0luZGV4KGNtLCBmcm9tKSk7XHJcbiAgICAgIGRpc3BsYXkudmlld0Zyb20gPSBmcm9tO1xyXG4gICAgICBpZiAoZGlzcGxheS52aWV3VG8gPCB0bylcclxuICAgICAgICBkaXNwbGF5LnZpZXcgPSBkaXNwbGF5LnZpZXcuY29uY2F0KGJ1aWxkVmlld0FycmF5KGNtLCBkaXNwbGF5LnZpZXdUbywgdG8pKTtcclxuICAgICAgZWxzZSBpZiAoZGlzcGxheS52aWV3VG8gPiB0bylcclxuICAgICAgICBkaXNwbGF5LnZpZXcgPSBkaXNwbGF5LnZpZXcuc2xpY2UoMCwgZmluZFZpZXdJbmRleChjbSwgdG8pKTtcclxuICAgIH1cclxuICAgIGRpc3BsYXkudmlld1RvID0gdG87XHJcbiAgfVxyXG5cclxuICAvLyBDb3VudCB0aGUgbnVtYmVyIG9mIGxpbmVzIGluIHRoZSB2aWV3IHdob3NlIERPTSByZXByZXNlbnRhdGlvbiBpc1xyXG4gIC8vIG91dCBvZiBkYXRlIChvciBub25leGlzdGVudCkuXHJcbiAgZnVuY3Rpb24gY291bnREaXJ0eVZpZXcoY20pIHtcclxuICAgIHZhciB2aWV3ID0gY20uZGlzcGxheS52aWV3LCBkaXJ0eSA9IDA7XHJcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHZpZXcubGVuZ3RoOyBpKyspIHtcclxuICAgICAgdmFyIGxpbmVWaWV3ID0gdmlld1tpXTtcclxuICAgICAgaWYgKCFsaW5lVmlldy5oaWRkZW4gJiYgKCFsaW5lVmlldy5ub2RlIHx8IGxpbmVWaWV3LmNoYW5nZXMpKSArK2RpcnR5O1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIGRpcnR5O1xyXG4gIH1cclxuXHJcbiAgLy8gSU5QVVQgSEFORExJTkdcclxuXHJcbiAgLy8gUG9sbCBmb3IgaW5wdXQgY2hhbmdlcywgdXNpbmcgdGhlIG5vcm1hbCByYXRlIG9mIHBvbGxpbmcuIFRoaXNcclxuICAvLyBydW5zIGFzIGxvbmcgYXMgdGhlIGVkaXRvciBpcyBmb2N1c2VkLlxyXG4gIGZ1bmN0aW9uIHNsb3dQb2xsKGNtKSB7XHJcbiAgICBpZiAoY20uZGlzcGxheS5wb2xsaW5nRmFzdCkgcmV0dXJuO1xyXG4gICAgY20uZGlzcGxheS5wb2xsLnNldChjbS5vcHRpb25zLnBvbGxJbnRlcnZhbCwgZnVuY3Rpb24oKSB7XHJcbiAgICAgIHJlYWRJbnB1dChjbSk7XHJcbiAgICAgIGlmIChjbS5zdGF0ZS5mb2N1c2VkKSBzbG93UG9sbChjbSk7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIC8vIFdoZW4gYW4gZXZlbnQgaGFzIGp1c3QgY29tZSBpbiB0aGF0IGlzIGxpa2VseSB0byBhZGQgb3IgY2hhbmdlXHJcbiAgLy8gc29tZXRoaW5nIGluIHRoZSBpbnB1dCB0ZXh0YXJlYSwgd2UgcG9sbCBmYXN0ZXIsIHRvIGVuc3VyZSB0aGF0XHJcbiAgLy8gdGhlIGNoYW5nZSBhcHBlYXJzIG9uIHRoZSBzY3JlZW4gcXVpY2tseS5cclxuICBmdW5jdGlvbiBmYXN0UG9sbChjbSkge1xyXG4gICAgdmFyIG1pc3NlZCA9IGZhbHNlO1xyXG4gICAgY20uZGlzcGxheS5wb2xsaW5nRmFzdCA9IHRydWU7XHJcbiAgICBmdW5jdGlvbiBwKCkge1xyXG4gICAgICB2YXIgY2hhbmdlZCA9IHJlYWRJbnB1dChjbSk7XHJcbiAgICAgIGlmICghY2hhbmdlZCAmJiAhbWlzc2VkKSB7bWlzc2VkID0gdHJ1ZTsgY20uZGlzcGxheS5wb2xsLnNldCg2MCwgcCk7fVxyXG4gICAgICBlbHNlIHtjbS5kaXNwbGF5LnBvbGxpbmdGYXN0ID0gZmFsc2U7IHNsb3dQb2xsKGNtKTt9XHJcbiAgICB9XHJcbiAgICBjbS5kaXNwbGF5LnBvbGwuc2V0KDIwLCBwKTtcclxuICB9XHJcblxyXG4gIC8vIFRoaXMgd2lsbCBiZSBzZXQgdG8gYW4gYXJyYXkgb2Ygc3RyaW5ncyB3aGVuIGNvcHlpbmcsIHNvIHRoYXQsXHJcbiAgLy8gd2hlbiBwYXN0aW5nLCB3ZSBrbm93IHdoYXQga2luZCBvZiBzZWxlY3Rpb25zIHRoZSBjb3BpZWQgdGV4dFxyXG4gIC8vIHdhcyBtYWRlIG91dCBvZi5cclxuICB2YXIgbGFzdENvcGllZCA9IG51bGw7XHJcblxyXG4gIC8vIFJlYWQgaW5wdXQgZnJvbSB0aGUgdGV4dGFyZWEsIGFuZCB1cGRhdGUgdGhlIGRvY3VtZW50IHRvIG1hdGNoLlxyXG4gIC8vIFdoZW4gc29tZXRoaW5nIGlzIHNlbGVjdGVkLCBpdCBpcyBwcmVzZW50IGluIHRoZSB0ZXh0YXJlYSwgYW5kXHJcbiAgLy8gc2VsZWN0ZWQgKHVubGVzcyBpdCBpcyBodWdlLCBpbiB3aGljaCBjYXNlIGEgcGxhY2Vob2xkZXIgaXNcclxuICAvLyB1c2VkKS4gV2hlbiBub3RoaW5nIGlzIHNlbGVjdGVkLCB0aGUgY3Vyc29yIHNpdHMgYWZ0ZXIgcHJldmlvdXNseVxyXG4gIC8vIHNlZW4gdGV4dCAoY2FuIGJlIGVtcHR5KSwgd2hpY2ggaXMgc3RvcmVkIGluIHByZXZJbnB1dCAod2UgbXVzdFxyXG4gIC8vIG5vdCByZXNldCB0aGUgdGV4dGFyZWEgd2hlbiB0eXBpbmcsIGJlY2F1c2UgdGhhdCBicmVha3MgSU1FKS5cclxuICBmdW5jdGlvbiByZWFkSW5wdXQoY20pIHtcclxuICAgIHZhciBpbnB1dCA9IGNtLmRpc3BsYXkuaW5wdXQsIHByZXZJbnB1dCA9IGNtLmRpc3BsYXkucHJldklucHV0LCBkb2MgPSBjbS5kb2M7XHJcbiAgICAvLyBTaW5jZSB0aGlzIGlzIGNhbGxlZCBhICpsb3QqLCB0cnkgdG8gYmFpbCBvdXQgYXMgY2hlYXBseSBhc1xyXG4gICAgLy8gcG9zc2libGUgd2hlbiBpdCBpcyBjbGVhciB0aGF0IG5vdGhpbmcgaGFwcGVuZWQuIGhhc1NlbGVjdGlvblxyXG4gICAgLy8gd2lsbCBiZSB0aGUgY2FzZSB3aGVuIHRoZXJlIGlzIGEgbG90IG9mIHRleHQgaW4gdGhlIHRleHRhcmVhLFxyXG4gICAgLy8gaW4gd2hpY2ggY2FzZSByZWFkaW5nIGl0cyB2YWx1ZSB3b3VsZCBiZSBleHBlbnNpdmUuXHJcbiAgICBpZiAoIWNtLnN0YXRlLmZvY3VzZWQgfHwgKGhhc1NlbGVjdGlvbihpbnB1dCkgJiYgIXByZXZJbnB1dCkgfHwgaXNSZWFkT25seShjbSkgfHwgY20ub3B0aW9ucy5kaXNhYmxlSW5wdXQpXHJcbiAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIC8vIFNlZSBwYXN0ZSBoYW5kbGVyIGZvciBtb3JlIG9uIHRoZSBmYWtlZExhc3RDaGFyIGtsdWRnZVxyXG4gICAgaWYgKGNtLnN0YXRlLnBhc3RlSW5jb21pbmcgJiYgY20uc3RhdGUuZmFrZWRMYXN0Q2hhcikge1xyXG4gICAgICBpbnB1dC52YWx1ZSA9IGlucHV0LnZhbHVlLnN1YnN0cmluZygwLCBpbnB1dC52YWx1ZS5sZW5ndGggLSAxKTtcclxuICAgICAgY20uc3RhdGUuZmFrZWRMYXN0Q2hhciA9IGZhbHNlO1xyXG4gICAgfVxyXG4gICAgdmFyIHRleHQgPSBpbnB1dC52YWx1ZTtcclxuICAgIC8vIElmIG5vdGhpbmcgY2hhbmdlZCwgYmFpbC5cclxuICAgIGlmICh0ZXh0ID09IHByZXZJbnB1dCAmJiAhY20uc29tZXRoaW5nU2VsZWN0ZWQoKSkgcmV0dXJuIGZhbHNlO1xyXG4gICAgLy8gV29yayBhcm91bmQgbm9uc2Vuc2ljYWwgc2VsZWN0aW9uIHJlc2V0dGluZyBpbiBJRTkvMTAsIGFuZFxyXG4gICAgLy8gaW5leHBsaWNhYmxlIGFwcGVhcmFuY2Ugb2YgcHJpdmF0ZSBhcmVhIHVuaWNvZGUgY2hhcmFjdGVycyBvblxyXG4gICAgLy8gc29tZSBrZXkgY29tYm9zIGluIE1hYyAoIzI2ODkpLlxyXG4gICAgaWYgKGllICYmIGllX3ZlcnNpb24gPj0gOSAmJiBjbS5kaXNwbGF5LmlucHV0SGFzU2VsZWN0aW9uID09PSB0ZXh0IHx8XHJcbiAgICAgICAgbWFjICYmIC9bXFx1ZjcwMC1cXHVmN2ZmXS8udGVzdCh0ZXh0KSkge1xyXG4gICAgICByZXNldElucHV0KGNtKTtcclxuICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG5cclxuICAgIHZhciB3aXRoT3AgPSAhY20uY3VyT3A7XHJcbiAgICBpZiAod2l0aE9wKSBzdGFydE9wZXJhdGlvbihjbSk7XHJcbiAgICBjbS5kaXNwbGF5LnNoaWZ0ID0gZmFsc2U7XHJcblxyXG4gICAgaWYgKHRleHQuY2hhckNvZGVBdCgwKSA9PSAweDIwMGIgJiYgZG9jLnNlbCA9PSBjbS5kaXNwbGF5LnNlbEZvckNvbnRleHRNZW51ICYmICFwcmV2SW5wdXQpXHJcbiAgICAgIHByZXZJbnB1dCA9IFwiXFx1MjAwYlwiO1xyXG4gICAgLy8gRmluZCB0aGUgcGFydCBvZiB0aGUgaW5wdXQgdGhhdCBpcyBhY3R1YWxseSBuZXdcclxuICAgIHZhciBzYW1lID0gMCwgbCA9IE1hdGgubWluKHByZXZJbnB1dC5sZW5ndGgsIHRleHQubGVuZ3RoKTtcclxuICAgIHdoaWxlIChzYW1lIDwgbCAmJiBwcmV2SW5wdXQuY2hhckNvZGVBdChzYW1lKSA9PSB0ZXh0LmNoYXJDb2RlQXQoc2FtZSkpICsrc2FtZTtcclxuICAgIHZhciBpbnNlcnRlZCA9IHRleHQuc2xpY2Uoc2FtZSksIHRleHRMaW5lcyA9IHNwbGl0TGluZXMoaW5zZXJ0ZWQpO1xyXG5cclxuICAgIC8vIFdoZW4gcGFzaW5nIE4gbGluZXMgaW50byBOIHNlbGVjdGlvbnMsIGluc2VydCBvbmUgbGluZSBwZXIgc2VsZWN0aW9uXHJcbiAgICB2YXIgbXVsdGlQYXN0ZSA9IG51bGw7XHJcbiAgICBpZiAoY20uc3RhdGUucGFzdGVJbmNvbWluZyAmJiBkb2Muc2VsLnJhbmdlcy5sZW5ndGggPiAxKSB7XHJcbiAgICAgIGlmIChsYXN0Q29waWVkICYmIGxhc3RDb3BpZWQuam9pbihcIlxcblwiKSA9PSBpbnNlcnRlZClcclxuICAgICAgICBtdWx0aVBhc3RlID0gZG9jLnNlbC5yYW5nZXMubGVuZ3RoICUgbGFzdENvcGllZC5sZW5ndGggPT0gMCAmJiBtYXAobGFzdENvcGllZCwgc3BsaXRMaW5lcyk7XHJcbiAgICAgIGVsc2UgaWYgKHRleHRMaW5lcy5sZW5ndGggPT0gZG9jLnNlbC5yYW5nZXMubGVuZ3RoKVxyXG4gICAgICAgIG11bHRpUGFzdGUgPSBtYXAodGV4dExpbmVzLCBmdW5jdGlvbihsKSB7IHJldHVybiBbbF07IH0pO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIE5vcm1hbCBiZWhhdmlvciBpcyB0byBpbnNlcnQgdGhlIG5ldyB0ZXh0IGludG8gZXZlcnkgc2VsZWN0aW9uXHJcbiAgICBmb3IgKHZhciBpID0gZG9jLnNlbC5yYW5nZXMubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIHtcclxuICAgICAgdmFyIHJhbmdlID0gZG9jLnNlbC5yYW5nZXNbaV07XHJcbiAgICAgIHZhciBmcm9tID0gcmFuZ2UuZnJvbSgpLCB0byA9IHJhbmdlLnRvKCk7XHJcbiAgICAgIC8vIEhhbmRsZSBkZWxldGlvblxyXG4gICAgICBpZiAoc2FtZSA8IHByZXZJbnB1dC5sZW5ndGgpXHJcbiAgICAgICAgZnJvbSA9IFBvcyhmcm9tLmxpbmUsIGZyb20uY2ggLSAocHJldklucHV0Lmxlbmd0aCAtIHNhbWUpKTtcclxuICAgICAgLy8gSGFuZGxlIG92ZXJ3cml0ZVxyXG4gICAgICBlbHNlIGlmIChjbS5zdGF0ZS5vdmVyd3JpdGUgJiYgcmFuZ2UuZW1wdHkoKSAmJiAhY20uc3RhdGUucGFzdGVJbmNvbWluZylcclxuICAgICAgICB0byA9IFBvcyh0by5saW5lLCBNYXRoLm1pbihnZXRMaW5lKGRvYywgdG8ubGluZSkudGV4dC5sZW5ndGgsIHRvLmNoICsgbHN0KHRleHRMaW5lcykubGVuZ3RoKSk7XHJcbiAgICAgIHZhciB1cGRhdGVJbnB1dCA9IGNtLmN1ck9wLnVwZGF0ZUlucHV0O1xyXG4gICAgICB2YXIgY2hhbmdlRXZlbnQgPSB7ZnJvbTogZnJvbSwgdG86IHRvLCB0ZXh0OiBtdWx0aVBhc3RlID8gbXVsdGlQYXN0ZVtpICUgbXVsdGlQYXN0ZS5sZW5ndGhdIDogdGV4dExpbmVzLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgb3JpZ2luOiBjbS5zdGF0ZS5wYXN0ZUluY29taW5nID8gXCJwYXN0ZVwiIDogY20uc3RhdGUuY3V0SW5jb21pbmcgPyBcImN1dFwiIDogXCIraW5wdXRcIn07XHJcbiAgICAgIG1ha2VDaGFuZ2UoY20uZG9jLCBjaGFuZ2VFdmVudCk7XHJcbiAgICAgIHNpZ25hbExhdGVyKGNtLCBcImlucHV0UmVhZFwiLCBjbSwgY2hhbmdlRXZlbnQpO1xyXG4gICAgICAvLyBXaGVuIGFuICdlbGVjdHJpYycgY2hhcmFjdGVyIGlzIGluc2VydGVkLCBpbW1lZGlhdGVseSB0cmlnZ2VyIGEgcmVpbmRlbnRcclxuICAgICAgaWYgKGluc2VydGVkICYmICFjbS5zdGF0ZS5wYXN0ZUluY29taW5nICYmIGNtLm9wdGlvbnMuZWxlY3RyaWNDaGFycyAmJlxyXG4gICAgICAgICAgY20ub3B0aW9ucy5zbWFydEluZGVudCAmJiByYW5nZS5oZWFkLmNoIDwgMTAwICYmXHJcbiAgICAgICAgICAoIWkgfHwgZG9jLnNlbC5yYW5nZXNbaSAtIDFdLmhlYWQubGluZSAhPSByYW5nZS5oZWFkLmxpbmUpKSB7XHJcbiAgICAgICAgdmFyIG1vZGUgPSBjbS5nZXRNb2RlQXQocmFuZ2UuaGVhZCk7XHJcbiAgICAgICAgdmFyIGVuZCA9IGNoYW5nZUVuZChjaGFuZ2VFdmVudCk7XHJcbiAgICAgICAgaWYgKG1vZGUuZWxlY3RyaWNDaGFycykge1xyXG4gICAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCBtb2RlLmVsZWN0cmljQ2hhcnMubGVuZ3RoOyBqKyspXHJcbiAgICAgICAgICAgIGlmIChpbnNlcnRlZC5pbmRleE9mKG1vZGUuZWxlY3RyaWNDaGFycy5jaGFyQXQoaikpID4gLTEpIHtcclxuICAgICAgICAgICAgICBpbmRlbnRMaW5lKGNtLCBlbmQubGluZSwgXCJzbWFydFwiKTtcclxuICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0gZWxzZSBpZiAobW9kZS5lbGVjdHJpY0lucHV0KSB7XHJcbiAgICAgICAgICBpZiAobW9kZS5lbGVjdHJpY0lucHV0LnRlc3QoZ2V0TGluZShkb2MsIGVuZC5saW5lKS50ZXh0LnNsaWNlKDAsIGVuZC5jaCkpKVxyXG4gICAgICAgICAgICBpbmRlbnRMaW5lKGNtLCBlbmQubGluZSwgXCJzbWFydFwiKTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIGVuc3VyZUN1cnNvclZpc2libGUoY20pO1xyXG4gICAgY20uY3VyT3AudXBkYXRlSW5wdXQgPSB1cGRhdGVJbnB1dDtcclxuICAgIGNtLmN1ck9wLnR5cGluZyA9IHRydWU7XHJcblxyXG4gICAgLy8gRG9uJ3QgbGVhdmUgbG9uZyB0ZXh0IGluIHRoZSB0ZXh0YXJlYSwgc2luY2UgaXQgbWFrZXMgZnVydGhlciBwb2xsaW5nIHNsb3dcclxuICAgIGlmICh0ZXh0Lmxlbmd0aCA+IDEwMDAgfHwgdGV4dC5pbmRleE9mKFwiXFxuXCIpID4gLTEpIGlucHV0LnZhbHVlID0gY20uZGlzcGxheS5wcmV2SW5wdXQgPSBcIlwiO1xyXG4gICAgZWxzZSBjbS5kaXNwbGF5LnByZXZJbnB1dCA9IHRleHQ7XHJcbiAgICBpZiAod2l0aE9wKSBlbmRPcGVyYXRpb24oY20pO1xyXG4gICAgY20uc3RhdGUucGFzdGVJbmNvbWluZyA9IGNtLnN0YXRlLmN1dEluY29taW5nID0gZmFsc2U7XHJcbiAgICByZXR1cm4gdHJ1ZTtcclxuICB9XHJcblxyXG4gIC8vIFJlc2V0IHRoZSBpbnB1dCB0byBjb3JyZXNwb25kIHRvIHRoZSBzZWxlY3Rpb24gKG9yIHRvIGJlIGVtcHR5LFxyXG4gIC8vIHdoZW4gbm90IHR5cGluZyBhbmQgbm90aGluZyBpcyBzZWxlY3RlZClcclxuICBmdW5jdGlvbiByZXNldElucHV0KGNtLCB0eXBpbmcpIHtcclxuICAgIHZhciBtaW5pbWFsLCBzZWxlY3RlZCwgZG9jID0gY20uZG9jO1xyXG4gICAgaWYgKGNtLnNvbWV0aGluZ1NlbGVjdGVkKCkpIHtcclxuICAgICAgY20uZGlzcGxheS5wcmV2SW5wdXQgPSBcIlwiO1xyXG4gICAgICB2YXIgcmFuZ2UgPSBkb2Muc2VsLnByaW1hcnkoKTtcclxuICAgICAgbWluaW1hbCA9IGhhc0NvcHlFdmVudCAmJlxyXG4gICAgICAgIChyYW5nZS50bygpLmxpbmUgLSByYW5nZS5mcm9tKCkubGluZSA+IDEwMCB8fCAoc2VsZWN0ZWQgPSBjbS5nZXRTZWxlY3Rpb24oKSkubGVuZ3RoID4gMTAwMCk7XHJcbiAgICAgIHZhciBjb250ZW50ID0gbWluaW1hbCA/IFwiLVwiIDogc2VsZWN0ZWQgfHwgY20uZ2V0U2VsZWN0aW9uKCk7XHJcbiAgICAgIGNtLmRpc3BsYXkuaW5wdXQudmFsdWUgPSBjb250ZW50O1xyXG4gICAgICBpZiAoY20uc3RhdGUuZm9jdXNlZCkgc2VsZWN0SW5wdXQoY20uZGlzcGxheS5pbnB1dCk7XHJcbiAgICAgIGlmIChpZSAmJiBpZV92ZXJzaW9uID49IDkpIGNtLmRpc3BsYXkuaW5wdXRIYXNTZWxlY3Rpb24gPSBjb250ZW50O1xyXG4gICAgfSBlbHNlIGlmICghdHlwaW5nKSB7XHJcbiAgICAgIGNtLmRpc3BsYXkucHJldklucHV0ID0gY20uZGlzcGxheS5pbnB1dC52YWx1ZSA9IFwiXCI7XHJcbiAgICAgIGlmIChpZSAmJiBpZV92ZXJzaW9uID49IDkpIGNtLmRpc3BsYXkuaW5wdXRIYXNTZWxlY3Rpb24gPSBudWxsO1xyXG4gICAgfVxyXG4gICAgY20uZGlzcGxheS5pbmFjY3VyYXRlU2VsZWN0aW9uID0gbWluaW1hbDtcclxuICB9XHJcblxyXG4gIGZ1bmN0aW9uIGZvY3VzSW5wdXQoY20pIHtcclxuICAgIGlmIChjbS5vcHRpb25zLnJlYWRPbmx5ICE9IFwibm9jdXJzb3JcIiAmJiAoIW1vYmlsZSB8fCBhY3RpdmVFbHQoKSAhPSBjbS5kaXNwbGF5LmlucHV0KSlcclxuICAgICAgY20uZGlzcGxheS5pbnB1dC5mb2N1cygpO1xyXG4gIH1cclxuXHJcbiAgZnVuY3Rpb24gZW5zdXJlRm9jdXMoY20pIHtcclxuICAgIGlmICghY20uc3RhdGUuZm9jdXNlZCkgeyBmb2N1c0lucHV0KGNtKTsgb25Gb2N1cyhjbSk7IH1cclxuICB9XHJcblxyXG4gIGZ1bmN0aW9uIGlzUmVhZE9ubHkoY20pIHtcclxuICAgIHJldHVybiBjbS5vcHRpb25zLnJlYWRPbmx5IHx8IGNtLmRvYy5jYW50RWRpdDtcclxuICB9XHJcblxyXG4gIC8vIEVWRU5UIEhBTkRMRVJTXHJcblxyXG4gIC8vIEF0dGFjaCB0aGUgbmVjZXNzYXJ5IGV2ZW50IGhhbmRsZXJzIHdoZW4gaW5pdGlhbGl6aW5nIHRoZSBlZGl0b3JcclxuICBmdW5jdGlvbiByZWdpc3RlckV2ZW50SGFuZGxlcnMoY20pIHtcclxuICAgIHZhciBkID0gY20uZGlzcGxheTtcclxuICAgIG9uKGQuc2Nyb2xsZXIsIFwibW91c2Vkb3duXCIsIG9wZXJhdGlvbihjbSwgb25Nb3VzZURvd24pKTtcclxuICAgIC8vIE9sZGVyIElFJ3Mgd2lsbCBub3QgZmlyZSBhIHNlY29uZCBtb3VzZWRvd24gZm9yIGEgZG91YmxlIGNsaWNrXHJcbiAgICBpZiAoaWUgJiYgaWVfdmVyc2lvbiA8IDExKVxyXG4gICAgICBvbihkLnNjcm9sbGVyLCBcImRibGNsaWNrXCIsIG9wZXJhdGlvbihjbSwgZnVuY3Rpb24oZSkge1xyXG4gICAgICAgIGlmIChzaWduYWxET01FdmVudChjbSwgZSkpIHJldHVybjtcclxuICAgICAgICB2YXIgcG9zID0gcG9zRnJvbU1vdXNlKGNtLCBlKTtcclxuICAgICAgICBpZiAoIXBvcyB8fCBjbGlja0luR3V0dGVyKGNtLCBlKSB8fCBldmVudEluV2lkZ2V0KGNtLmRpc3BsYXksIGUpKSByZXR1cm47XHJcbiAgICAgICAgZV9wcmV2ZW50RGVmYXVsdChlKTtcclxuICAgICAgICB2YXIgd29yZCA9IGNtLmZpbmRXb3JkQXQocG9zKTtcclxuICAgICAgICBleHRlbmRTZWxlY3Rpb24oY20uZG9jLCB3b3JkLmFuY2hvciwgd29yZC5oZWFkKTtcclxuICAgICAgfSkpO1xyXG4gICAgZWxzZVxyXG4gICAgICBvbihkLnNjcm9sbGVyLCBcImRibGNsaWNrXCIsIGZ1bmN0aW9uKGUpIHsgc2lnbmFsRE9NRXZlbnQoY20sIGUpIHx8IGVfcHJldmVudERlZmF1bHQoZSk7IH0pO1xyXG4gICAgLy8gUHJldmVudCBub3JtYWwgc2VsZWN0aW9uIGluIHRoZSBlZGl0b3IgKHdlIGhhbmRsZSBvdXIgb3duKVxyXG4gICAgb24oZC5saW5lU3BhY2UsIFwic2VsZWN0c3RhcnRcIiwgZnVuY3Rpb24oZSkge1xyXG4gICAgICBpZiAoIWV2ZW50SW5XaWRnZXQoZCwgZSkpIGVfcHJldmVudERlZmF1bHQoZSk7XHJcbiAgICB9KTtcclxuICAgIC8vIFNvbWUgYnJvd3NlcnMgZmlyZSBjb250ZXh0bWVudSAqYWZ0ZXIqIG9wZW5pbmcgdGhlIG1lbnUsIGF0XHJcbiAgICAvLyB3aGljaCBwb2ludCB3ZSBjYW4ndCBtZXNzIHdpdGggaXQgYW55bW9yZS4gQ29udGV4dCBtZW51IGlzXHJcbiAgICAvLyBoYW5kbGVkIGluIG9uTW91c2VEb3duIGZvciB0aGVzZSBicm93c2Vycy5cclxuICAgIGlmICghY2FwdHVyZVJpZ2h0Q2xpY2spIG9uKGQuc2Nyb2xsZXIsIFwiY29udGV4dG1lbnVcIiwgZnVuY3Rpb24oZSkge29uQ29udGV4dE1lbnUoY20sIGUpO30pO1xyXG5cclxuICAgIC8vIFN5bmMgc2Nyb2xsaW5nIGJldHdlZW4gZmFrZSBzY3JvbGxiYXJzIGFuZCByZWFsIHNjcm9sbGFibGVcclxuICAgIC8vIGFyZWEsIGVuc3VyZSB2aWV3cG9ydCBpcyB1cGRhdGVkIHdoZW4gc2Nyb2xsaW5nLlxyXG4gICAgb24oZC5zY3JvbGxlciwgXCJzY3JvbGxcIiwgZnVuY3Rpb24oKSB7XHJcbiAgICAgIGlmIChkLnNjcm9sbGVyLmNsaWVudEhlaWdodCkge1xyXG4gICAgICAgIHNldFNjcm9sbFRvcChjbSwgZC5zY3JvbGxlci5zY3JvbGxUb3ApO1xyXG4gICAgICAgIHNldFNjcm9sbExlZnQoY20sIGQuc2Nyb2xsZXIuc2Nyb2xsTGVmdCwgdHJ1ZSk7XHJcbiAgICAgICAgc2lnbmFsKGNtLCBcInNjcm9sbFwiLCBjbSk7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG4gICAgb24oZC5zY3JvbGxiYXJWLCBcInNjcm9sbFwiLCBmdW5jdGlvbigpIHtcclxuICAgICAgaWYgKGQuc2Nyb2xsZXIuY2xpZW50SGVpZ2h0KSBzZXRTY3JvbGxUb3AoY20sIGQuc2Nyb2xsYmFyVi5zY3JvbGxUb3ApO1xyXG4gICAgfSk7XHJcbiAgICBvbihkLnNjcm9sbGJhckgsIFwic2Nyb2xsXCIsIGZ1bmN0aW9uKCkge1xyXG4gICAgICBpZiAoZC5zY3JvbGxlci5jbGllbnRIZWlnaHQpIHNldFNjcm9sbExlZnQoY20sIGQuc2Nyb2xsYmFySC5zY3JvbGxMZWZ0KTtcclxuICAgIH0pO1xyXG5cclxuICAgIC8vIExpc3RlbiB0byB3aGVlbCBldmVudHMgaW4gb3JkZXIgdG8gdHJ5IGFuZCB1cGRhdGUgdGhlIHZpZXdwb3J0IG9uIHRpbWUuXHJcbiAgICBvbihkLnNjcm9sbGVyLCBcIm1vdXNld2hlZWxcIiwgZnVuY3Rpb24oZSl7b25TY3JvbGxXaGVlbChjbSwgZSk7fSk7XHJcbiAgICBvbihkLnNjcm9sbGVyLCBcIkRPTU1vdXNlU2Nyb2xsXCIsIGZ1bmN0aW9uKGUpe29uU2Nyb2xsV2hlZWwoY20sIGUpO30pO1xyXG5cclxuICAgIC8vIFByZXZlbnQgY2xpY2tzIGluIHRoZSBzY3JvbGxiYXJzIGZyb20ga2lsbGluZyBmb2N1c1xyXG4gICAgZnVuY3Rpb24gcmVGb2N1cygpIHsgaWYgKGNtLnN0YXRlLmZvY3VzZWQpIHNldFRpbWVvdXQoYmluZChmb2N1c0lucHV0LCBjbSksIDApOyB9XHJcbiAgICBvbihkLnNjcm9sbGJhckgsIFwibW91c2Vkb3duXCIsIHJlRm9jdXMpO1xyXG4gICAgb24oZC5zY3JvbGxiYXJWLCBcIm1vdXNlZG93blwiLCByZUZvY3VzKTtcclxuICAgIC8vIFByZXZlbnQgd3JhcHBlciBmcm9tIGV2ZXIgc2Nyb2xsaW5nXHJcbiAgICBvbihkLndyYXBwZXIsIFwic2Nyb2xsXCIsIGZ1bmN0aW9uKCkgeyBkLndyYXBwZXIuc2Nyb2xsVG9wID0gZC53cmFwcGVyLnNjcm9sbExlZnQgPSAwOyB9KTtcclxuXHJcbiAgICBvbihkLmlucHV0LCBcImtleXVwXCIsIGZ1bmN0aW9uKGUpIHsgb25LZXlVcC5jYWxsKGNtLCBlKTsgfSk7XHJcbiAgICBvbihkLmlucHV0LCBcImlucHV0XCIsIGZ1bmN0aW9uKCkge1xyXG4gICAgICBpZiAoaWUgJiYgaWVfdmVyc2lvbiA+PSA5ICYmIGNtLmRpc3BsYXkuaW5wdXRIYXNTZWxlY3Rpb24pIGNtLmRpc3BsYXkuaW5wdXRIYXNTZWxlY3Rpb24gPSBudWxsO1xyXG4gICAgICBmYXN0UG9sbChjbSk7XHJcbiAgICB9KTtcclxuICAgIG9uKGQuaW5wdXQsIFwia2V5ZG93blwiLCBvcGVyYXRpb24oY20sIG9uS2V5RG93bikpO1xyXG4gICAgb24oZC5pbnB1dCwgXCJrZXlwcmVzc1wiLCBvcGVyYXRpb24oY20sIG9uS2V5UHJlc3MpKTtcclxuICAgIG9uKGQuaW5wdXQsIFwiZm9jdXNcIiwgYmluZChvbkZvY3VzLCBjbSkpO1xyXG4gICAgb24oZC5pbnB1dCwgXCJibHVyXCIsIGJpbmQob25CbHVyLCBjbSkpO1xyXG5cclxuICAgIGZ1bmN0aW9uIGRyYWdfKGUpIHtcclxuICAgICAgaWYgKCFzaWduYWxET01FdmVudChjbSwgZSkpIGVfc3RvcChlKTtcclxuICAgIH1cclxuICAgIGlmIChjbS5vcHRpb25zLmRyYWdEcm9wKSB7XHJcbiAgICAgIG9uKGQuc2Nyb2xsZXIsIFwiZHJhZ3N0YXJ0XCIsIGZ1bmN0aW9uKGUpe29uRHJhZ1N0YXJ0KGNtLCBlKTt9KTtcclxuICAgICAgb24oZC5zY3JvbGxlciwgXCJkcmFnZW50ZXJcIiwgZHJhZ18pO1xyXG4gICAgICBvbihkLnNjcm9sbGVyLCBcImRyYWdvdmVyXCIsIGRyYWdfKTtcclxuICAgICAgb24oZC5zY3JvbGxlciwgXCJkcm9wXCIsIG9wZXJhdGlvbihjbSwgb25Ecm9wKSk7XHJcbiAgICB9XHJcbiAgICBvbihkLnNjcm9sbGVyLCBcInBhc3RlXCIsIGZ1bmN0aW9uKGUpIHtcclxuICAgICAgaWYgKGV2ZW50SW5XaWRnZXQoZCwgZSkpIHJldHVybjtcclxuICAgICAgY20uc3RhdGUucGFzdGVJbmNvbWluZyA9IHRydWU7XHJcbiAgICAgIGZvY3VzSW5wdXQoY20pO1xyXG4gICAgICBmYXN0UG9sbChjbSk7XHJcbiAgICB9KTtcclxuICAgIG9uKGQuaW5wdXQsIFwicGFzdGVcIiwgZnVuY3Rpb24oKSB7XHJcbiAgICAgIC8vIFdvcmthcm91bmQgZm9yIHdlYmtpdCBidWcgaHR0cHM6Ly9idWdzLndlYmtpdC5vcmcvc2hvd19idWcuY2dpP2lkPTkwMjA2XHJcbiAgICAgIC8vIEFkZCBhIGNoYXIgdG8gdGhlIGVuZCBvZiB0ZXh0YXJlYSBiZWZvcmUgcGFzdGUgb2NjdXIgc28gdGhhdFxyXG4gICAgICAvLyBzZWxlY3Rpb24gZG9lc24ndCBzcGFuIHRvIHRoZSBlbmQgb2YgdGV4dGFyZWEuXHJcbiAgICAgIGlmICh3ZWJraXQgJiYgIWNtLnN0YXRlLmZha2VkTGFzdENoYXIgJiYgIShuZXcgRGF0ZSAtIGNtLnN0YXRlLmxhc3RNaWRkbGVEb3duIDwgMjAwKSkge1xyXG4gICAgICAgIHZhciBzdGFydCA9IGQuaW5wdXQuc2VsZWN0aW9uU3RhcnQsIGVuZCA9IGQuaW5wdXQuc2VsZWN0aW9uRW5kO1xyXG4gICAgICAgIGQuaW5wdXQudmFsdWUgKz0gXCIkXCI7XHJcbiAgICAgICAgLy8gVGhlIHNlbGVjdGlvbiBlbmQgbmVlZHMgdG8gYmUgc2V0IGJlZm9yZSB0aGUgc3RhcnQsIG90aGVyd2lzZSB0aGVyZVxyXG4gICAgICAgIC8vIGNhbiBiZSBhbiBpbnRlcm1lZGlhdGUgbm9uLWVtcHR5IHNlbGVjdGlvbiBiZXR3ZWVuIHRoZSB0d28sIHdoaWNoXHJcbiAgICAgICAgLy8gY2FuIG92ZXJyaWRlIHRoZSBtaWRkbGUtY2xpY2sgcGFzdGUgYnVmZmVyIG9uIGxpbnV4IGFuZCBjYXVzZSB0aGVcclxuICAgICAgICAvLyB3cm9uZyB0aGluZyB0byBnZXQgcGFzdGVkLlxyXG4gICAgICAgIGQuaW5wdXQuc2VsZWN0aW9uRW5kID0gZW5kO1xyXG4gICAgICAgIGQuaW5wdXQuc2VsZWN0aW9uU3RhcnQgPSBzdGFydDtcclxuICAgICAgICBjbS5zdGF0ZS5mYWtlZExhc3RDaGFyID0gdHJ1ZTtcclxuICAgICAgfVxyXG4gICAgICBjbS5zdGF0ZS5wYXN0ZUluY29taW5nID0gdHJ1ZTtcclxuICAgICAgZmFzdFBvbGwoY20pO1xyXG4gICAgfSk7XHJcblxyXG4gICAgZnVuY3Rpb24gcHJlcGFyZUNvcHlDdXQoZSkge1xyXG4gICAgICBpZiAoY20uc29tZXRoaW5nU2VsZWN0ZWQoKSkge1xyXG4gICAgICAgIGxhc3RDb3BpZWQgPSBjbS5nZXRTZWxlY3Rpb25zKCk7XHJcbiAgICAgICAgaWYgKGQuaW5hY2N1cmF0ZVNlbGVjdGlvbikge1xyXG4gICAgICAgICAgZC5wcmV2SW5wdXQgPSBcIlwiO1xyXG4gICAgICAgICAgZC5pbmFjY3VyYXRlU2VsZWN0aW9uID0gZmFsc2U7XHJcbiAgICAgICAgICBkLmlucHV0LnZhbHVlID0gbGFzdENvcGllZC5qb2luKFwiXFxuXCIpO1xyXG4gICAgICAgICAgc2VsZWN0SW5wdXQoZC5pbnB1dCk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIHZhciB0ZXh0ID0gW10sIHJhbmdlcyA9IFtdO1xyXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgY20uZG9jLnNlbC5yYW5nZXMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgIHZhciBsaW5lID0gY20uZG9jLnNlbC5yYW5nZXNbaV0uaGVhZC5saW5lO1xyXG4gICAgICAgICAgdmFyIGxpbmVSYW5nZSA9IHthbmNob3I6IFBvcyhsaW5lLCAwKSwgaGVhZDogUG9zKGxpbmUgKyAxLCAwKX07XHJcbiAgICAgICAgICByYW5nZXMucHVzaChsaW5lUmFuZ2UpO1xyXG4gICAgICAgICAgdGV4dC5wdXNoKGNtLmdldFJhbmdlKGxpbmVSYW5nZS5hbmNob3IsIGxpbmVSYW5nZS5oZWFkKSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChlLnR5cGUgPT0gXCJjdXRcIikge1xyXG4gICAgICAgICAgY20uc2V0U2VsZWN0aW9ucyhyYW5nZXMsIG51bGwsIHNlbF9kb250U2Nyb2xsKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgZC5wcmV2SW5wdXQgPSBcIlwiO1xyXG4gICAgICAgICAgZC5pbnB1dC52YWx1ZSA9IHRleHQuam9pbihcIlxcblwiKTtcclxuICAgICAgICAgIHNlbGVjdElucHV0KGQuaW5wdXQpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBsYXN0Q29waWVkID0gdGV4dDtcclxuICAgICAgfVxyXG4gICAgICBpZiAoZS50eXBlID09IFwiY3V0XCIpIGNtLnN0YXRlLmN1dEluY29taW5nID0gdHJ1ZTtcclxuICAgIH1cclxuICAgIG9uKGQuaW5wdXQsIFwiY3V0XCIsIHByZXBhcmVDb3B5Q3V0KTtcclxuICAgIG9uKGQuaW5wdXQsIFwiY29weVwiLCBwcmVwYXJlQ29weUN1dCk7XHJcblxyXG4gICAgLy8gTmVlZGVkIHRvIGhhbmRsZSBUYWIga2V5IGluIEtIVE1MXHJcbiAgICBpZiAoa2h0bWwpIG9uKGQuc2l6ZXIsIFwibW91c2V1cFwiLCBmdW5jdGlvbigpIHtcclxuICAgICAgaWYgKGFjdGl2ZUVsdCgpID09IGQuaW5wdXQpIGQuaW5wdXQuYmx1cigpO1xyXG4gICAgICBmb2N1c0lucHV0KGNtKTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgLy8gQ2FsbGVkIHdoZW4gdGhlIHdpbmRvdyByZXNpemVzXHJcbiAgZnVuY3Rpb24gb25SZXNpemUoY20pIHtcclxuICAgIC8vIE1pZ2h0IGJlIGEgdGV4dCBzY2FsaW5nIG9wZXJhdGlvbiwgY2xlYXIgc2l6ZSBjYWNoZXMuXHJcbiAgICB2YXIgZCA9IGNtLmRpc3BsYXk7XHJcbiAgICBkLmNhY2hlZENoYXJXaWR0aCA9IGQuY2FjaGVkVGV4dEhlaWdodCA9IGQuY2FjaGVkUGFkZGluZ0ggPSBudWxsO1xyXG4gICAgY20uc2V0U2l6ZSgpO1xyXG4gIH1cclxuXHJcbiAgLy8gTU9VU0UgRVZFTlRTXHJcblxyXG4gIC8vIFJldHVybiB0cnVlIHdoZW4gdGhlIGdpdmVuIG1vdXNlIGV2ZW50IGhhcHBlbmVkIGluIGEgd2lkZ2V0XHJcbiAgZnVuY3Rpb24gZXZlbnRJbldpZGdldChkaXNwbGF5LCBlKSB7XHJcbiAgICBmb3IgKHZhciBuID0gZV90YXJnZXQoZSk7IG4gIT0gZGlzcGxheS53cmFwcGVyOyBuID0gbi5wYXJlbnROb2RlKSB7XHJcbiAgICAgIGlmICghbiB8fCBuLmlnbm9yZUV2ZW50cyB8fCBuLnBhcmVudE5vZGUgPT0gZGlzcGxheS5zaXplciAmJiBuICE9IGRpc3BsYXkubW92ZXIpIHJldHVybiB0cnVlO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLy8gR2l2ZW4gYSBtb3VzZSBldmVudCwgZmluZCB0aGUgY29ycmVzcG9uZGluZyBwb3NpdGlvbi4gSWYgbGliZXJhbFxyXG4gIC8vIGlzIGZhbHNlLCBpdCBjaGVja3Mgd2hldGhlciBhIGd1dHRlciBvciBzY3JvbGxiYXIgd2FzIGNsaWNrZWQsXHJcbiAgLy8gYW5kIHJldHVybnMgbnVsbCBpZiBpdCB3YXMuIGZvclJlY3QgaXMgdXNlZCBieSByZWN0YW5ndWxhclxyXG4gIC8vIHNlbGVjdGlvbnMsIGFuZCB0cmllcyB0byBlc3RpbWF0ZSBhIGNoYXJhY3RlciBwb3NpdGlvbiBldmVuIGZvclxyXG4gIC8vIGNvb3JkaW5hdGVzIGJleW9uZCB0aGUgcmlnaHQgb2YgdGhlIHRleHQuXHJcbiAgZnVuY3Rpb24gcG9zRnJvbU1vdXNlKGNtLCBlLCBsaWJlcmFsLCBmb3JSZWN0KSB7XHJcbiAgICB2YXIgZGlzcGxheSA9IGNtLmRpc3BsYXk7XHJcbiAgICBpZiAoIWxpYmVyYWwpIHtcclxuICAgICAgdmFyIHRhcmdldCA9IGVfdGFyZ2V0KGUpO1xyXG4gICAgICBpZiAodGFyZ2V0ID09IGRpc3BsYXkuc2Nyb2xsYmFySCB8fCB0YXJnZXQgPT0gZGlzcGxheS5zY3JvbGxiYXJWIHx8XHJcbiAgICAgICAgICB0YXJnZXQgPT0gZGlzcGxheS5zY3JvbGxiYXJGaWxsZXIgfHwgdGFyZ2V0ID09IGRpc3BsYXkuZ3V0dGVyRmlsbGVyKSByZXR1cm4gbnVsbDtcclxuICAgIH1cclxuICAgIHZhciB4LCB5LCBzcGFjZSA9IGRpc3BsYXkubGluZVNwYWNlLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xyXG4gICAgLy8gRmFpbHMgdW5wcmVkaWN0YWJseSBvbiBJRVs2N10gd2hlbiBtb3VzZSBpcyBkcmFnZ2VkIGFyb3VuZCBxdWlja2x5LlxyXG4gICAgdHJ5IHsgeCA9IGUuY2xpZW50WCAtIHNwYWNlLmxlZnQ7IHkgPSBlLmNsaWVudFkgLSBzcGFjZS50b3A7IH1cclxuICAgIGNhdGNoIChlKSB7IHJldHVybiBudWxsOyB9XHJcbiAgICB2YXIgY29vcmRzID0gY29vcmRzQ2hhcihjbSwgeCwgeSksIGxpbmU7XHJcbiAgICBpZiAoZm9yUmVjdCAmJiBjb29yZHMueFJlbCA9PSAxICYmIChsaW5lID0gZ2V0TGluZShjbS5kb2MsIGNvb3Jkcy5saW5lKS50ZXh0KS5sZW5ndGggPT0gY29vcmRzLmNoKSB7XHJcbiAgICAgIHZhciBjb2xEaWZmID0gY291bnRDb2x1bW4obGluZSwgbGluZS5sZW5ndGgsIGNtLm9wdGlvbnMudGFiU2l6ZSkgLSBsaW5lLmxlbmd0aDtcclxuICAgICAgY29vcmRzID0gUG9zKGNvb3Jkcy5saW5lLCBNYXRoLm1heCgwLCBNYXRoLnJvdW5kKCh4IC0gcGFkZGluZ0goY20uZGlzcGxheSkubGVmdCkgLyBjaGFyV2lkdGgoY20uZGlzcGxheSkpIC0gY29sRGlmZikpO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIGNvb3JkcztcclxuICB9XHJcblxyXG4gIC8vIEEgbW91c2UgZG93biBjYW4gYmUgYSBzaW5nbGUgY2xpY2ssIGRvdWJsZSBjbGljaywgdHJpcGxlIGNsaWNrLFxyXG4gIC8vIHN0YXJ0IG9mIHNlbGVjdGlvbiBkcmFnLCBzdGFydCBvZiB0ZXh0IGRyYWcsIG5ldyBjdXJzb3JcclxuICAvLyAoY3RybC1jbGljayksIHJlY3RhbmdsZSBkcmFnIChhbHQtZHJhZyksIG9yIHh3aW5cclxuICAvLyBtaWRkbGUtY2xpY2stcGFzdGUuIE9yIGl0IG1pZ2h0IGJlIGEgY2xpY2sgb24gc29tZXRoaW5nIHdlIHNob3VsZFxyXG4gIC8vIG5vdCBpbnRlcmZlcmUgd2l0aCwgc3VjaCBhcyBhIHNjcm9sbGJhciBvciB3aWRnZXQuXHJcbiAgZnVuY3Rpb24gb25Nb3VzZURvd24oZSkge1xyXG4gICAgaWYgKHNpZ25hbERPTUV2ZW50KHRoaXMsIGUpKSByZXR1cm47XHJcbiAgICB2YXIgY20gPSB0aGlzLCBkaXNwbGF5ID0gY20uZGlzcGxheTtcclxuICAgIGRpc3BsYXkuc2hpZnQgPSBlLnNoaWZ0S2V5O1xyXG5cclxuICAgIGlmIChldmVudEluV2lkZ2V0KGRpc3BsYXksIGUpKSB7XHJcbiAgICAgIGlmICghd2Via2l0KSB7XHJcbiAgICAgICAgLy8gQnJpZWZseSB0dXJuIG9mZiBkcmFnZ2FiaWxpdHksIHRvIGFsbG93IHdpZGdldHMgdG8gZG9cclxuICAgICAgICAvLyBub3JtYWwgZHJhZ2dpbmcgdGhpbmdzLlxyXG4gICAgICAgIGRpc3BsYXkuc2Nyb2xsZXIuZHJhZ2dhYmxlID0gZmFsc2U7XHJcbiAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpe2Rpc3BsYXkuc2Nyb2xsZXIuZHJhZ2dhYmxlID0gdHJ1ZTt9LCAxMDApO1xyXG4gICAgICB9XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuICAgIGlmIChjbGlja0luR3V0dGVyKGNtLCBlKSkgcmV0dXJuO1xyXG4gICAgdmFyIHN0YXJ0ID0gcG9zRnJvbU1vdXNlKGNtLCBlKTtcclxuICAgIHdpbmRvdy5mb2N1cygpO1xyXG5cclxuICAgIHN3aXRjaCAoZV9idXR0b24oZSkpIHtcclxuICAgIGNhc2UgMTpcclxuICAgICAgaWYgKHN0YXJ0KVxyXG4gICAgICAgIGxlZnRCdXR0b25Eb3duKGNtLCBlLCBzdGFydCk7XHJcbiAgICAgIGVsc2UgaWYgKGVfdGFyZ2V0KGUpID09IGRpc3BsYXkuc2Nyb2xsZXIpXHJcbiAgICAgICAgZV9wcmV2ZW50RGVmYXVsdChlKTtcclxuICAgICAgYnJlYWs7XHJcbiAgICBjYXNlIDI6XHJcbiAgICAgIGlmICh3ZWJraXQpIGNtLnN0YXRlLmxhc3RNaWRkbGVEb3duID0gK25ldyBEYXRlO1xyXG4gICAgICBpZiAoc3RhcnQpIGV4dGVuZFNlbGVjdGlvbihjbS5kb2MsIHN0YXJ0KTtcclxuICAgICAgc2V0VGltZW91dChiaW5kKGZvY3VzSW5wdXQsIGNtKSwgMjApO1xyXG4gICAgICBlX3ByZXZlbnREZWZhdWx0KGUpO1xyXG4gICAgICBicmVhaztcclxuICAgIGNhc2UgMzpcclxuICAgICAgaWYgKGNhcHR1cmVSaWdodENsaWNrKSBvbkNvbnRleHRNZW51KGNtLCBlKTtcclxuICAgICAgYnJlYWs7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICB2YXIgbGFzdENsaWNrLCBsYXN0RG91YmxlQ2xpY2s7XHJcbiAgZnVuY3Rpb24gbGVmdEJ1dHRvbkRvd24oY20sIGUsIHN0YXJ0KSB7XHJcbiAgICBzZXRUaW1lb3V0KGJpbmQoZW5zdXJlRm9jdXMsIGNtKSwgMCk7XHJcblxyXG4gICAgdmFyIG5vdyA9ICtuZXcgRGF0ZSwgdHlwZTtcclxuICAgIGlmIChsYXN0RG91YmxlQ2xpY2sgJiYgbGFzdERvdWJsZUNsaWNrLnRpbWUgPiBub3cgLSA0MDAgJiYgY21wKGxhc3REb3VibGVDbGljay5wb3MsIHN0YXJ0KSA9PSAwKSB7XHJcbiAgICAgIHR5cGUgPSBcInRyaXBsZVwiO1xyXG4gICAgfSBlbHNlIGlmIChsYXN0Q2xpY2sgJiYgbGFzdENsaWNrLnRpbWUgPiBub3cgLSA0MDAgJiYgY21wKGxhc3RDbGljay5wb3MsIHN0YXJ0KSA9PSAwKSB7XHJcbiAgICAgIHR5cGUgPSBcImRvdWJsZVwiO1xyXG4gICAgICBsYXN0RG91YmxlQ2xpY2sgPSB7dGltZTogbm93LCBwb3M6IHN0YXJ0fTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHR5cGUgPSBcInNpbmdsZVwiO1xyXG4gICAgICBsYXN0Q2xpY2sgPSB7dGltZTogbm93LCBwb3M6IHN0YXJ0fTtcclxuICAgIH1cclxuXHJcbiAgICB2YXIgc2VsID0gY20uZG9jLnNlbCwgbW9kaWZpZXIgPSBtYWMgPyBlLm1ldGFLZXkgOiBlLmN0cmxLZXk7XHJcbiAgICBpZiAoY20ub3B0aW9ucy5kcmFnRHJvcCAmJiBkcmFnQW5kRHJvcCAmJiAhaXNSZWFkT25seShjbSkgJiZcclxuICAgICAgICB0eXBlID09IFwic2luZ2xlXCIgJiYgc2VsLmNvbnRhaW5zKHN0YXJ0KSA+IC0xICYmIHNlbC5zb21ldGhpbmdTZWxlY3RlZCgpKVxyXG4gICAgICBsZWZ0QnV0dG9uU3RhcnREcmFnKGNtLCBlLCBzdGFydCwgbW9kaWZpZXIpO1xyXG4gICAgZWxzZVxyXG4gICAgICBsZWZ0QnV0dG9uU2VsZWN0KGNtLCBlLCBzdGFydCwgdHlwZSwgbW9kaWZpZXIpO1xyXG4gIH1cclxuXHJcbiAgLy8gU3RhcnQgYSB0ZXh0IGRyYWcuIFdoZW4gaXQgZW5kcywgc2VlIGlmIGFueSBkcmFnZ2luZyBhY3R1YWxseVxyXG4gIC8vIGhhcHBlbiwgYW5kIHRyZWF0IGFzIGEgY2xpY2sgaWYgaXQgZGlkbid0LlxyXG4gIGZ1bmN0aW9uIGxlZnRCdXR0b25TdGFydERyYWcoY20sIGUsIHN0YXJ0LCBtb2RpZmllcikge1xyXG4gICAgdmFyIGRpc3BsYXkgPSBjbS5kaXNwbGF5O1xyXG4gICAgdmFyIGRyYWdFbmQgPSBvcGVyYXRpb24oY20sIGZ1bmN0aW9uKGUyKSB7XHJcbiAgICAgIGlmICh3ZWJraXQpIGRpc3BsYXkuc2Nyb2xsZXIuZHJhZ2dhYmxlID0gZmFsc2U7XHJcbiAgICAgIGNtLnN0YXRlLmRyYWdnaW5nVGV4dCA9IGZhbHNlO1xyXG4gICAgICBvZmYoZG9jdW1lbnQsIFwibW91c2V1cFwiLCBkcmFnRW5kKTtcclxuICAgICAgb2ZmKGRpc3BsYXkuc2Nyb2xsZXIsIFwiZHJvcFwiLCBkcmFnRW5kKTtcclxuICAgICAgaWYgKE1hdGguYWJzKGUuY2xpZW50WCAtIGUyLmNsaWVudFgpICsgTWF0aC5hYnMoZS5jbGllbnRZIC0gZTIuY2xpZW50WSkgPCAxMCkge1xyXG4gICAgICAgIGVfcHJldmVudERlZmF1bHQoZTIpO1xyXG4gICAgICAgIGlmICghbW9kaWZpZXIpXHJcbiAgICAgICAgICBleHRlbmRTZWxlY3Rpb24oY20uZG9jLCBzdGFydCk7XHJcbiAgICAgICAgZm9jdXNJbnB1dChjbSk7XHJcbiAgICAgICAgLy8gV29yayBhcm91bmQgdW5leHBsYWluYWJsZSBmb2N1cyBwcm9ibGVtIGluIElFOSAoIzIxMjcpXHJcbiAgICAgICAgaWYgKGllICYmIGllX3ZlcnNpb24gPT0gOSlcclxuICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7ZG9jdW1lbnQuYm9keS5mb2N1cygpOyBmb2N1c0lucHV0KGNtKTt9LCAyMCk7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG4gICAgLy8gTGV0IHRoZSBkcmFnIGhhbmRsZXIgaGFuZGxlIHRoaXMuXHJcbiAgICBpZiAod2Via2l0KSBkaXNwbGF5LnNjcm9sbGVyLmRyYWdnYWJsZSA9IHRydWU7XHJcbiAgICBjbS5zdGF0ZS5kcmFnZ2luZ1RleHQgPSBkcmFnRW5kO1xyXG4gICAgLy8gSUUncyBhcHByb2FjaCB0byBkcmFnZ2FibGVcclxuICAgIGlmIChkaXNwbGF5LnNjcm9sbGVyLmRyYWdEcm9wKSBkaXNwbGF5LnNjcm9sbGVyLmRyYWdEcm9wKCk7XHJcbiAgICBvbihkb2N1bWVudCwgXCJtb3VzZXVwXCIsIGRyYWdFbmQpO1xyXG4gICAgb24oZGlzcGxheS5zY3JvbGxlciwgXCJkcm9wXCIsIGRyYWdFbmQpO1xyXG4gIH1cclxuXHJcbiAgLy8gTm9ybWFsIHNlbGVjdGlvbiwgYXMgb3Bwb3NlZCB0byB0ZXh0IGRyYWdnaW5nLlxyXG4gIGZ1bmN0aW9uIGxlZnRCdXR0b25TZWxlY3QoY20sIGUsIHN0YXJ0LCB0eXBlLCBhZGROZXcpIHtcclxuICAgIHZhciBkaXNwbGF5ID0gY20uZGlzcGxheSwgZG9jID0gY20uZG9jO1xyXG4gICAgZV9wcmV2ZW50RGVmYXVsdChlKTtcclxuXHJcbiAgICB2YXIgb3VyUmFuZ2UsIG91ckluZGV4LCBzdGFydFNlbCA9IGRvYy5zZWw7XHJcbiAgICBpZiAoYWRkTmV3ICYmICFlLnNoaWZ0S2V5KSB7XHJcbiAgICAgIG91ckluZGV4ID0gZG9jLnNlbC5jb250YWlucyhzdGFydCk7XHJcbiAgICAgIGlmIChvdXJJbmRleCA+IC0xKVxyXG4gICAgICAgIG91clJhbmdlID0gZG9jLnNlbC5yYW5nZXNbb3VySW5kZXhdO1xyXG4gICAgICBlbHNlXHJcbiAgICAgICAgb3VyUmFuZ2UgPSBuZXcgUmFuZ2Uoc3RhcnQsIHN0YXJ0KTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIG91clJhbmdlID0gZG9jLnNlbC5wcmltYXJ5KCk7XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKGUuYWx0S2V5KSB7XHJcbiAgICAgIHR5cGUgPSBcInJlY3RcIjtcclxuICAgICAgaWYgKCFhZGROZXcpIG91clJhbmdlID0gbmV3IFJhbmdlKHN0YXJ0LCBzdGFydCk7XHJcbiAgICAgIHN0YXJ0ID0gcG9zRnJvbU1vdXNlKGNtLCBlLCB0cnVlLCB0cnVlKTtcclxuICAgICAgb3VySW5kZXggPSAtMTtcclxuICAgIH0gZWxzZSBpZiAodHlwZSA9PSBcImRvdWJsZVwiKSB7XHJcbiAgICAgIHZhciB3b3JkID0gY20uZmluZFdvcmRBdChzdGFydCk7XHJcbiAgICAgIGlmIChjbS5kaXNwbGF5LnNoaWZ0IHx8IGRvYy5leHRlbmQpXHJcbiAgICAgICAgb3VyUmFuZ2UgPSBleHRlbmRSYW5nZShkb2MsIG91clJhbmdlLCB3b3JkLmFuY2hvciwgd29yZC5oZWFkKTtcclxuICAgICAgZWxzZVxyXG4gICAgICAgIG91clJhbmdlID0gd29yZDtcclxuICAgIH0gZWxzZSBpZiAodHlwZSA9PSBcInRyaXBsZVwiKSB7XHJcbiAgICAgIHZhciBsaW5lID0gbmV3IFJhbmdlKFBvcyhzdGFydC5saW5lLCAwKSwgY2xpcFBvcyhkb2MsIFBvcyhzdGFydC5saW5lICsgMSwgMCkpKTtcclxuICAgICAgaWYgKGNtLmRpc3BsYXkuc2hpZnQgfHwgZG9jLmV4dGVuZClcclxuICAgICAgICBvdXJSYW5nZSA9IGV4dGVuZFJhbmdlKGRvYywgb3VyUmFuZ2UsIGxpbmUuYW5jaG9yLCBsaW5lLmhlYWQpO1xyXG4gICAgICBlbHNlXHJcbiAgICAgICAgb3VyUmFuZ2UgPSBsaW5lO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgb3VyUmFuZ2UgPSBleHRlbmRSYW5nZShkb2MsIG91clJhbmdlLCBzdGFydCk7XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKCFhZGROZXcpIHtcclxuICAgICAgb3VySW5kZXggPSAwO1xyXG4gICAgICBzZXRTZWxlY3Rpb24oZG9jLCBuZXcgU2VsZWN0aW9uKFtvdXJSYW5nZV0sIDApLCBzZWxfbW91c2UpO1xyXG4gICAgICBzdGFydFNlbCA9IGRvYy5zZWw7XHJcbiAgICB9IGVsc2UgaWYgKG91ckluZGV4ID4gLTEpIHtcclxuICAgICAgcmVwbGFjZU9uZVNlbGVjdGlvbihkb2MsIG91ckluZGV4LCBvdXJSYW5nZSwgc2VsX21vdXNlKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIG91ckluZGV4ID0gZG9jLnNlbC5yYW5nZXMubGVuZ3RoO1xyXG4gICAgICBzZXRTZWxlY3Rpb24oZG9jLCBub3JtYWxpemVTZWxlY3Rpb24oZG9jLnNlbC5yYW5nZXMuY29uY2F0KFtvdXJSYW5nZV0pLCBvdXJJbmRleCksXHJcbiAgICAgICAgICAgICAgICAgICB7c2Nyb2xsOiBmYWxzZSwgb3JpZ2luOiBcIiptb3VzZVwifSk7XHJcbiAgICB9XHJcblxyXG4gICAgdmFyIGxhc3RQb3MgPSBzdGFydDtcclxuICAgIGZ1bmN0aW9uIGV4dGVuZFRvKHBvcykge1xyXG4gICAgICBpZiAoY21wKGxhc3RQb3MsIHBvcykgPT0gMCkgcmV0dXJuO1xyXG4gICAgICBsYXN0UG9zID0gcG9zO1xyXG5cclxuICAgICAgaWYgKHR5cGUgPT0gXCJyZWN0XCIpIHtcclxuICAgICAgICB2YXIgcmFuZ2VzID0gW10sIHRhYlNpemUgPSBjbS5vcHRpb25zLnRhYlNpemU7XHJcbiAgICAgICAgdmFyIHN0YXJ0Q29sID0gY291bnRDb2x1bW4oZ2V0TGluZShkb2MsIHN0YXJ0LmxpbmUpLnRleHQsIHN0YXJ0LmNoLCB0YWJTaXplKTtcclxuICAgICAgICB2YXIgcG9zQ29sID0gY291bnRDb2x1bW4oZ2V0TGluZShkb2MsIHBvcy5saW5lKS50ZXh0LCBwb3MuY2gsIHRhYlNpemUpO1xyXG4gICAgICAgIHZhciBsZWZ0ID0gTWF0aC5taW4oc3RhcnRDb2wsIHBvc0NvbCksIHJpZ2h0ID0gTWF0aC5tYXgoc3RhcnRDb2wsIHBvc0NvbCk7XHJcbiAgICAgICAgZm9yICh2YXIgbGluZSA9IE1hdGgubWluKHN0YXJ0LmxpbmUsIHBvcy5saW5lKSwgZW5kID0gTWF0aC5taW4oY20ubGFzdExpbmUoKSwgTWF0aC5tYXgoc3RhcnQubGluZSwgcG9zLmxpbmUpKTtcclxuICAgICAgICAgICAgIGxpbmUgPD0gZW5kOyBsaW5lKyspIHtcclxuICAgICAgICAgIHZhciB0ZXh0ID0gZ2V0TGluZShkb2MsIGxpbmUpLnRleHQsIGxlZnRQb3MgPSBmaW5kQ29sdW1uKHRleHQsIGxlZnQsIHRhYlNpemUpO1xyXG4gICAgICAgICAgaWYgKGxlZnQgPT0gcmlnaHQpXHJcbiAgICAgICAgICAgIHJhbmdlcy5wdXNoKG5ldyBSYW5nZShQb3MobGluZSwgbGVmdFBvcyksIFBvcyhsaW5lLCBsZWZ0UG9zKSkpO1xyXG4gICAgICAgICAgZWxzZSBpZiAodGV4dC5sZW5ndGggPiBsZWZ0UG9zKVxyXG4gICAgICAgICAgICByYW5nZXMucHVzaChuZXcgUmFuZ2UoUG9zKGxpbmUsIGxlZnRQb3MpLCBQb3MobGluZSwgZmluZENvbHVtbih0ZXh0LCByaWdodCwgdGFiU2l6ZSkpKSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICghcmFuZ2VzLmxlbmd0aCkgcmFuZ2VzLnB1c2gobmV3IFJhbmdlKHN0YXJ0LCBzdGFydCkpO1xyXG4gICAgICAgIHNldFNlbGVjdGlvbihkb2MsIG5vcm1hbGl6ZVNlbGVjdGlvbihzdGFydFNlbC5yYW5nZXMuc2xpY2UoMCwgb3VySW5kZXgpLmNvbmNhdChyYW5nZXMpLCBvdXJJbmRleCksXHJcbiAgICAgICAgICAgICAgICAgICAgIHtvcmlnaW46IFwiKm1vdXNlXCIsIHNjcm9sbDogZmFsc2V9KTtcclxuICAgICAgICBjbS5zY3JvbGxJbnRvVmlldyhwb3MpO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIHZhciBvbGRSYW5nZSA9IG91clJhbmdlO1xyXG4gICAgICAgIHZhciBhbmNob3IgPSBvbGRSYW5nZS5hbmNob3IsIGhlYWQgPSBwb3M7XHJcbiAgICAgICAgaWYgKHR5cGUgIT0gXCJzaW5nbGVcIikge1xyXG4gICAgICAgICAgaWYgKHR5cGUgPT0gXCJkb3VibGVcIilcclxuICAgICAgICAgICAgdmFyIHJhbmdlID0gY20uZmluZFdvcmRBdChwb3MpO1xyXG4gICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICB2YXIgcmFuZ2UgPSBuZXcgUmFuZ2UoUG9zKHBvcy5saW5lLCAwKSwgY2xpcFBvcyhkb2MsIFBvcyhwb3MubGluZSArIDEsIDApKSk7XHJcbiAgICAgICAgICBpZiAoY21wKHJhbmdlLmFuY2hvciwgYW5jaG9yKSA+IDApIHtcclxuICAgICAgICAgICAgaGVhZCA9IHJhbmdlLmhlYWQ7XHJcbiAgICAgICAgICAgIGFuY2hvciA9IG1pblBvcyhvbGRSYW5nZS5mcm9tKCksIHJhbmdlLmFuY2hvcik7XHJcbiAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBoZWFkID0gcmFuZ2UuYW5jaG9yO1xyXG4gICAgICAgICAgICBhbmNob3IgPSBtYXhQb3Mob2xkUmFuZ2UudG8oKSwgcmFuZ2UuaGVhZCk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHZhciByYW5nZXMgPSBzdGFydFNlbC5yYW5nZXMuc2xpY2UoMCk7XHJcbiAgICAgICAgcmFuZ2VzW291ckluZGV4XSA9IG5ldyBSYW5nZShjbGlwUG9zKGRvYywgYW5jaG9yKSwgaGVhZCk7XHJcbiAgICAgICAgc2V0U2VsZWN0aW9uKGRvYywgbm9ybWFsaXplU2VsZWN0aW9uKHJhbmdlcywgb3VySW5kZXgpLCBzZWxfbW91c2UpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgdmFyIGVkaXRvclNpemUgPSBkaXNwbGF5LndyYXBwZXIuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XHJcbiAgICAvLyBVc2VkIHRvIGVuc3VyZSB0aW1lb3V0IHJlLXRyaWVzIGRvbid0IGZpcmUgd2hlbiBhbm90aGVyIGV4dGVuZFxyXG4gICAgLy8gaGFwcGVuZWQgaW4gdGhlIG1lYW50aW1lIChjbGVhclRpbWVvdXQgaXNuJ3QgcmVsaWFibGUgLS0gYXRcclxuICAgIC8vIGxlYXN0IG9uIENocm9tZSwgdGhlIHRpbWVvdXRzIHN0aWxsIGhhcHBlbiBldmVuIHdoZW4gY2xlYXJlZCxcclxuICAgIC8vIGlmIHRoZSBjbGVhciBoYXBwZW5zIGFmdGVyIHRoZWlyIHNjaGVkdWxlZCBmaXJpbmcgdGltZSkuXHJcbiAgICB2YXIgY291bnRlciA9IDA7XHJcblxyXG4gICAgZnVuY3Rpb24gZXh0ZW5kKGUpIHtcclxuICAgICAgdmFyIGN1ckNvdW50ID0gKytjb3VudGVyO1xyXG4gICAgICB2YXIgY3VyID0gcG9zRnJvbU1vdXNlKGNtLCBlLCB0cnVlLCB0eXBlID09IFwicmVjdFwiKTtcclxuICAgICAgaWYgKCFjdXIpIHJldHVybjtcclxuICAgICAgaWYgKGNtcChjdXIsIGxhc3RQb3MpICE9IDApIHtcclxuICAgICAgICBlbnN1cmVGb2N1cyhjbSk7XHJcbiAgICAgICAgZXh0ZW5kVG8oY3VyKTtcclxuICAgICAgICB2YXIgdmlzaWJsZSA9IHZpc2libGVMaW5lcyhkaXNwbGF5LCBkb2MpO1xyXG4gICAgICAgIGlmIChjdXIubGluZSA+PSB2aXNpYmxlLnRvIHx8IGN1ci5saW5lIDwgdmlzaWJsZS5mcm9tKVxyXG4gICAgICAgICAgc2V0VGltZW91dChvcGVyYXRpb24oY20sIGZ1bmN0aW9uKCl7aWYgKGNvdW50ZXIgPT0gY3VyQ291bnQpIGV4dGVuZChlKTt9KSwgMTUwKTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICB2YXIgb3V0c2lkZSA9IGUuY2xpZW50WSA8IGVkaXRvclNpemUudG9wID8gLTIwIDogZS5jbGllbnRZID4gZWRpdG9yU2l6ZS5ib3R0b20gPyAyMCA6IDA7XHJcbiAgICAgICAgaWYgKG91dHNpZGUpIHNldFRpbWVvdXQob3BlcmF0aW9uKGNtLCBmdW5jdGlvbigpIHtcclxuICAgICAgICAgIGlmIChjb3VudGVyICE9IGN1ckNvdW50KSByZXR1cm47XHJcbiAgICAgICAgICBkaXNwbGF5LnNjcm9sbGVyLnNjcm9sbFRvcCArPSBvdXRzaWRlO1xyXG4gICAgICAgICAgZXh0ZW5kKGUpO1xyXG4gICAgICAgIH0pLCA1MCk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBkb25lKGUpIHtcclxuICAgICAgY291bnRlciA9IEluZmluaXR5O1xyXG4gICAgICBlX3ByZXZlbnREZWZhdWx0KGUpO1xyXG4gICAgICBmb2N1c0lucHV0KGNtKTtcclxuICAgICAgb2ZmKGRvY3VtZW50LCBcIm1vdXNlbW92ZVwiLCBtb3ZlKTtcclxuICAgICAgb2ZmKGRvY3VtZW50LCBcIm1vdXNldXBcIiwgdXApO1xyXG4gICAgICBkb2MuaGlzdG9yeS5sYXN0U2VsT3JpZ2luID0gbnVsbDtcclxuICAgIH1cclxuXHJcbiAgICB2YXIgbW92ZSA9IG9wZXJhdGlvbihjbSwgZnVuY3Rpb24oZSkge1xyXG4gICAgICBpZiAoIWVfYnV0dG9uKGUpKSBkb25lKGUpO1xyXG4gICAgICBlbHNlIGV4dGVuZChlKTtcclxuICAgIH0pO1xyXG4gICAgdmFyIHVwID0gb3BlcmF0aW9uKGNtLCBkb25lKTtcclxuICAgIG9uKGRvY3VtZW50LCBcIm1vdXNlbW92ZVwiLCBtb3ZlKTtcclxuICAgIG9uKGRvY3VtZW50LCBcIm1vdXNldXBcIiwgdXApO1xyXG4gIH1cclxuXHJcbiAgLy8gRGV0ZXJtaW5lcyB3aGV0aGVyIGFuIGV2ZW50IGhhcHBlbmVkIGluIHRoZSBndXR0ZXIsIGFuZCBmaXJlcyB0aGVcclxuICAvLyBoYW5kbGVycyBmb3IgdGhlIGNvcnJlc3BvbmRpbmcgZXZlbnQuXHJcbiAgZnVuY3Rpb24gZ3V0dGVyRXZlbnQoY20sIGUsIHR5cGUsIHByZXZlbnQsIHNpZ25hbGZuKSB7XHJcbiAgICB0cnkgeyB2YXIgbVggPSBlLmNsaWVudFgsIG1ZID0gZS5jbGllbnRZOyB9XHJcbiAgICBjYXRjaChlKSB7IHJldHVybiBmYWxzZTsgfVxyXG4gICAgaWYgKG1YID49IE1hdGguZmxvb3IoY20uZGlzcGxheS5ndXR0ZXJzLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLnJpZ2h0KSkgcmV0dXJuIGZhbHNlO1xyXG4gICAgaWYgKHByZXZlbnQpIGVfcHJldmVudERlZmF1bHQoZSk7XHJcblxyXG4gICAgdmFyIGRpc3BsYXkgPSBjbS5kaXNwbGF5O1xyXG4gICAgdmFyIGxpbmVCb3ggPSBkaXNwbGF5LmxpbmVEaXYuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XHJcblxyXG4gICAgaWYgKG1ZID4gbGluZUJveC5ib3R0b20gfHwgIWhhc0hhbmRsZXIoY20sIHR5cGUpKSByZXR1cm4gZV9kZWZhdWx0UHJldmVudGVkKGUpO1xyXG4gICAgbVkgLT0gbGluZUJveC50b3AgLSBkaXNwbGF5LnZpZXdPZmZzZXQ7XHJcblxyXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBjbS5vcHRpb25zLmd1dHRlcnMubGVuZ3RoOyArK2kpIHtcclxuICAgICAgdmFyIGcgPSBkaXNwbGF5Lmd1dHRlcnMuY2hpbGROb2Rlc1tpXTtcclxuICAgICAgaWYgKGcgJiYgZy5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS5yaWdodCA+PSBtWCkge1xyXG4gICAgICAgIHZhciBsaW5lID0gbGluZUF0SGVpZ2h0KGNtLmRvYywgbVkpO1xyXG4gICAgICAgIHZhciBndXR0ZXIgPSBjbS5vcHRpb25zLmd1dHRlcnNbaV07XHJcbiAgICAgICAgc2lnbmFsZm4oY20sIHR5cGUsIGNtLCBsaW5lLCBndXR0ZXIsIGUpO1xyXG4gICAgICAgIHJldHVybiBlX2RlZmF1bHRQcmV2ZW50ZWQoZSk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9XHJcblxyXG4gIGZ1bmN0aW9uIGNsaWNrSW5HdXR0ZXIoY20sIGUpIHtcclxuICAgIHJldHVybiBndXR0ZXJFdmVudChjbSwgZSwgXCJndXR0ZXJDbGlja1wiLCB0cnVlLCBzaWduYWxMYXRlcik7XHJcbiAgfVxyXG5cclxuICAvLyBLbHVkZ2UgdG8gd29yayBhcm91bmQgc3RyYW5nZSBJRSBiZWhhdmlvciB3aGVyZSBpdCdsbCBzb21ldGltZXNcclxuICAvLyByZS1maXJlIGEgc2VyaWVzIG9mIGRyYWctcmVsYXRlZCBldmVudHMgcmlnaHQgYWZ0ZXIgdGhlIGRyb3AgKCMxNTUxKVxyXG4gIHZhciBsYXN0RHJvcCA9IDA7XHJcblxyXG4gIGZ1bmN0aW9uIG9uRHJvcChlKSB7XHJcbiAgICB2YXIgY20gPSB0aGlzO1xyXG4gICAgaWYgKHNpZ25hbERPTUV2ZW50KGNtLCBlKSB8fCBldmVudEluV2lkZ2V0KGNtLmRpc3BsYXksIGUpKVxyXG4gICAgICByZXR1cm47XHJcbiAgICBlX3ByZXZlbnREZWZhdWx0KGUpO1xyXG4gICAgaWYgKGllKSBsYXN0RHJvcCA9ICtuZXcgRGF0ZTtcclxuICAgIHZhciBwb3MgPSBwb3NGcm9tTW91c2UoY20sIGUsIHRydWUpLCBmaWxlcyA9IGUuZGF0YVRyYW5zZmVyLmZpbGVzO1xyXG4gICAgaWYgKCFwb3MgfHwgaXNSZWFkT25seShjbSkpIHJldHVybjtcclxuICAgIC8vIE1pZ2h0IGJlIGEgZmlsZSBkcm9wLCBpbiB3aGljaCBjYXNlIHdlIHNpbXBseSBleHRyYWN0IHRoZSB0ZXh0XHJcbiAgICAvLyBhbmQgaW5zZXJ0IGl0LlxyXG4gICAgaWYgKGZpbGVzICYmIGZpbGVzLmxlbmd0aCAmJiB3aW5kb3cuRmlsZVJlYWRlciAmJiB3aW5kb3cuRmlsZSkge1xyXG4gICAgICB2YXIgbiA9IGZpbGVzLmxlbmd0aCwgdGV4dCA9IEFycmF5KG4pLCByZWFkID0gMDtcclxuICAgICAgdmFyIGxvYWRGaWxlID0gZnVuY3Rpb24oZmlsZSwgaSkge1xyXG4gICAgICAgIHZhciByZWFkZXIgPSBuZXcgRmlsZVJlYWRlcjtcclxuICAgICAgICByZWFkZXIub25sb2FkID0gb3BlcmF0aW9uKGNtLCBmdW5jdGlvbigpIHtcclxuICAgICAgICAgIHRleHRbaV0gPSByZWFkZXIucmVzdWx0O1xyXG4gICAgICAgICAgaWYgKCsrcmVhZCA9PSBuKSB7XHJcbiAgICAgICAgICAgIHBvcyA9IGNsaXBQb3MoY20uZG9jLCBwb3MpO1xyXG4gICAgICAgICAgICB2YXIgY2hhbmdlID0ge2Zyb206IHBvcywgdG86IHBvcywgdGV4dDogc3BsaXRMaW5lcyh0ZXh0LmpvaW4oXCJcXG5cIikpLCBvcmlnaW46IFwicGFzdGVcIn07XHJcbiAgICAgICAgICAgIG1ha2VDaGFuZ2UoY20uZG9jLCBjaGFuZ2UpO1xyXG4gICAgICAgICAgICBzZXRTZWxlY3Rpb25SZXBsYWNlSGlzdG9yeShjbS5kb2MsIHNpbXBsZVNlbGVjdGlvbihwb3MsIGNoYW5nZUVuZChjaGFuZ2UpKSk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgcmVhZGVyLnJlYWRBc1RleHQoZmlsZSk7XHJcbiAgICAgIH07XHJcbiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbjsgKytpKSBsb2FkRmlsZShmaWxlc1tpXSwgaSk7XHJcbiAgICB9IGVsc2UgeyAvLyBOb3JtYWwgZHJvcFxyXG4gICAgICAvLyBEb24ndCBkbyBhIHJlcGxhY2UgaWYgdGhlIGRyb3AgaGFwcGVuZWQgaW5zaWRlIG9mIHRoZSBzZWxlY3RlZCB0ZXh0LlxyXG4gICAgICBpZiAoY20uc3RhdGUuZHJhZ2dpbmdUZXh0ICYmIGNtLmRvYy5zZWwuY29udGFpbnMocG9zKSA+IC0xKSB7XHJcbiAgICAgICAgY20uc3RhdGUuZHJhZ2dpbmdUZXh0KGUpO1xyXG4gICAgICAgIC8vIEVuc3VyZSB0aGUgZWRpdG9yIGlzIHJlLWZvY3VzZWRcclxuICAgICAgICBzZXRUaW1lb3V0KGJpbmQoZm9jdXNJbnB1dCwgY20pLCAyMCk7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgICB9XHJcbiAgICAgIHRyeSB7XHJcbiAgICAgICAgdmFyIHRleHQgPSBlLmRhdGFUcmFuc2Zlci5nZXREYXRhKFwiVGV4dFwiKTtcclxuICAgICAgICBpZiAodGV4dCkge1xyXG4gICAgICAgICAgaWYgKGNtLnN0YXRlLmRyYWdnaW5nVGV4dCAmJiAhKG1hYyA/IGUubWV0YUtleSA6IGUuY3RybEtleSkpXHJcbiAgICAgICAgICAgIHZhciBzZWxlY3RlZCA9IGNtLmxpc3RTZWxlY3Rpb25zKCk7XHJcbiAgICAgICAgICBzZXRTZWxlY3Rpb25Ob1VuZG8oY20uZG9jLCBzaW1wbGVTZWxlY3Rpb24ocG9zLCBwb3MpKTtcclxuICAgICAgICAgIGlmIChzZWxlY3RlZCkgZm9yICh2YXIgaSA9IDA7IGkgPCBzZWxlY3RlZC5sZW5ndGg7ICsraSlcclxuICAgICAgICAgICAgcmVwbGFjZVJhbmdlKGNtLmRvYywgXCJcIiwgc2VsZWN0ZWRbaV0uYW5jaG9yLCBzZWxlY3RlZFtpXS5oZWFkLCBcImRyYWdcIik7XHJcbiAgICAgICAgICBjbS5yZXBsYWNlU2VsZWN0aW9uKHRleHQsIFwiYXJvdW5kXCIsIFwicGFzdGVcIik7XHJcbiAgICAgICAgICBmb2N1c0lucHV0KGNtKTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgICAgY2F0Y2goZSl7fVxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgZnVuY3Rpb24gb25EcmFnU3RhcnQoY20sIGUpIHtcclxuICAgIGlmIChpZSAmJiAoIWNtLnN0YXRlLmRyYWdnaW5nVGV4dCB8fCArbmV3IERhdGUgLSBsYXN0RHJvcCA8IDEwMCkpIHsgZV9zdG9wKGUpOyByZXR1cm47IH1cclxuICAgIGlmIChzaWduYWxET01FdmVudChjbSwgZSkgfHwgZXZlbnRJbldpZGdldChjbS5kaXNwbGF5LCBlKSkgcmV0dXJuO1xyXG5cclxuICAgIGUuZGF0YVRyYW5zZmVyLnNldERhdGEoXCJUZXh0XCIsIGNtLmdldFNlbGVjdGlvbigpKTtcclxuXHJcbiAgICAvLyBVc2UgZHVtbXkgaW1hZ2UgaW5zdGVhZCBvZiBkZWZhdWx0IGJyb3dzZXJzIGltYWdlLlxyXG4gICAgLy8gUmVjZW50IFNhZmFyaSAofjYuMC4yKSBoYXZlIGEgdGVuZGVuY3kgdG8gc2VnZmF1bHQgd2hlbiB0aGlzIGhhcHBlbnMsIHNvIHdlIGRvbid0IGRvIGl0IHRoZXJlLlxyXG4gICAgaWYgKGUuZGF0YVRyYW5zZmVyLnNldERyYWdJbWFnZSAmJiAhc2FmYXJpKSB7XHJcbiAgICAgIHZhciBpbWcgPSBlbHQoXCJpbWdcIiwgbnVsbCwgbnVsbCwgXCJwb3NpdGlvbjogZml4ZWQ7IGxlZnQ6IDA7IHRvcDogMDtcIik7XHJcbiAgICAgIGltZy5zcmMgPSBcImRhdGE6aW1hZ2UvZ2lmO2Jhc2U2NCxSMGxHT0RsaEFRQUJBQUFBQUNINUJBRUtBQUVBTEFBQUFBQUJBQUVBQUFJQ1RBRUFPdz09XCI7XHJcbiAgICAgIGlmIChwcmVzdG8pIHtcclxuICAgICAgICBpbWcud2lkdGggPSBpbWcuaGVpZ2h0ID0gMTtcclxuICAgICAgICBjbS5kaXNwbGF5LndyYXBwZXIuYXBwZW5kQ2hpbGQoaW1nKTtcclxuICAgICAgICAvLyBGb3JjZSBhIHJlbGF5b3V0LCBvciBPcGVyYSB3b24ndCB1c2Ugb3VyIGltYWdlIGZvciBzb21lIG9ic2N1cmUgcmVhc29uXHJcbiAgICAgICAgaW1nLl90b3AgPSBpbWcub2Zmc2V0VG9wO1xyXG4gICAgICB9XHJcbiAgICAgIGUuZGF0YVRyYW5zZmVyLnNldERyYWdJbWFnZShpbWcsIDAsIDApO1xyXG4gICAgICBpZiAocHJlc3RvKSBpbWcucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChpbWcpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLy8gU0NST0xMIEVWRU5UU1xyXG5cclxuICAvLyBTeW5jIHRoZSBzY3JvbGxhYmxlIGFyZWEgYW5kIHNjcm9sbGJhcnMsIGVuc3VyZSB0aGUgdmlld3BvcnRcclxuICAvLyBjb3ZlcnMgdGhlIHZpc2libGUgYXJlYS5cclxuICBmdW5jdGlvbiBzZXRTY3JvbGxUb3AoY20sIHZhbCkge1xyXG4gICAgaWYgKE1hdGguYWJzKGNtLmRvYy5zY3JvbGxUb3AgLSB2YWwpIDwgMikgcmV0dXJuO1xyXG4gICAgY20uZG9jLnNjcm9sbFRvcCA9IHZhbDtcclxuICAgIGlmICghZ2Vja28pIHVwZGF0ZURpc3BsYXlTaW1wbGUoY20sIHt0b3A6IHZhbH0pO1xyXG4gICAgaWYgKGNtLmRpc3BsYXkuc2Nyb2xsZXIuc2Nyb2xsVG9wICE9IHZhbCkgY20uZGlzcGxheS5zY3JvbGxlci5zY3JvbGxUb3AgPSB2YWw7XHJcbiAgICBpZiAoY20uZGlzcGxheS5zY3JvbGxiYXJWLnNjcm9sbFRvcCAhPSB2YWwpIGNtLmRpc3BsYXkuc2Nyb2xsYmFyVi5zY3JvbGxUb3AgPSB2YWw7XHJcbiAgICBpZiAoZ2Vja28pIHVwZGF0ZURpc3BsYXlTaW1wbGUoY20pO1xyXG4gICAgc3RhcnRXb3JrZXIoY20sIDEwMCk7XHJcbiAgfVxyXG4gIC8vIFN5bmMgc2Nyb2xsZXIgYW5kIHNjcm9sbGJhciwgZW5zdXJlIHRoZSBndXR0ZXIgZWxlbWVudHMgYXJlXHJcbiAgLy8gYWxpZ25lZC5cclxuICBmdW5jdGlvbiBzZXRTY3JvbGxMZWZ0KGNtLCB2YWwsIGlzU2Nyb2xsZXIpIHtcclxuICAgIGlmIChpc1Njcm9sbGVyID8gdmFsID09IGNtLmRvYy5zY3JvbGxMZWZ0IDogTWF0aC5hYnMoY20uZG9jLnNjcm9sbExlZnQgLSB2YWwpIDwgMikgcmV0dXJuO1xyXG4gICAgdmFsID0gTWF0aC5taW4odmFsLCBjbS5kaXNwbGF5LnNjcm9sbGVyLnNjcm9sbFdpZHRoIC0gY20uZGlzcGxheS5zY3JvbGxlci5jbGllbnRXaWR0aCk7XHJcbiAgICBjbS5kb2Muc2Nyb2xsTGVmdCA9IHZhbDtcclxuICAgIGFsaWduSG9yaXpvbnRhbGx5KGNtKTtcclxuICAgIGlmIChjbS5kaXNwbGF5LnNjcm9sbGVyLnNjcm9sbExlZnQgIT0gdmFsKSBjbS5kaXNwbGF5LnNjcm9sbGVyLnNjcm9sbExlZnQgPSB2YWw7XHJcbiAgICBpZiAoY20uZGlzcGxheS5zY3JvbGxiYXJILnNjcm9sbExlZnQgIT0gdmFsKSBjbS5kaXNwbGF5LnNjcm9sbGJhckguc2Nyb2xsTGVmdCA9IHZhbDtcclxuICB9XHJcblxyXG4gIC8vIFNpbmNlIHRoZSBkZWx0YSB2YWx1ZXMgcmVwb3J0ZWQgb24gbW91c2Ugd2hlZWwgZXZlbnRzIGFyZVxyXG4gIC8vIHVuc3RhbmRhcmRpemVkIGJldHdlZW4gYnJvd3NlcnMgYW5kIGV2ZW4gYnJvd3NlciB2ZXJzaW9ucywgYW5kXHJcbiAgLy8gZ2VuZXJhbGx5IGhvcnJpYmx5IHVucHJlZGljdGFibGUsIHRoaXMgY29kZSBzdGFydHMgYnkgbWVhc3VyaW5nXHJcbiAgLy8gdGhlIHNjcm9sbCBlZmZlY3QgdGhhdCB0aGUgZmlyc3QgZmV3IG1vdXNlIHdoZWVsIGV2ZW50cyBoYXZlLFxyXG4gIC8vIGFuZCwgZnJvbSB0aGF0LCBkZXRlY3RzIHRoZSB3YXkgaXQgY2FuIGNvbnZlcnQgZGVsdGFzIHRvIHBpeGVsXHJcbiAgLy8gb2Zmc2V0cyBhZnRlcndhcmRzLlxyXG4gIC8vXHJcbiAgLy8gVGhlIHJlYXNvbiB3ZSB3YW50IHRvIGtub3cgdGhlIGFtb3VudCBhIHdoZWVsIGV2ZW50IHdpbGwgc2Nyb2xsXHJcbiAgLy8gaXMgdGhhdCBpdCBnaXZlcyB1cyBhIGNoYW5jZSB0byB1cGRhdGUgdGhlIGRpc3BsYXkgYmVmb3JlIHRoZVxyXG4gIC8vIGFjdHVhbCBzY3JvbGxpbmcgaGFwcGVucywgcmVkdWNpbmcgZmxpY2tlcmluZy5cclxuXHJcbiAgdmFyIHdoZWVsU2FtcGxlcyA9IDAsIHdoZWVsUGl4ZWxzUGVyVW5pdCA9IG51bGw7XHJcbiAgLy8gRmlsbCBpbiBhIGJyb3dzZXItZGV0ZWN0ZWQgc3RhcnRpbmcgdmFsdWUgb24gYnJvd3NlcnMgd2hlcmUgd2VcclxuICAvLyBrbm93IG9uZS4gVGhlc2UgZG9uJ3QgaGF2ZSB0byBiZSBhY2N1cmF0ZSAtLSB0aGUgcmVzdWx0IG9mIHRoZW1cclxuICAvLyBiZWluZyB3cm9uZyB3b3VsZCBqdXN0IGJlIGEgc2xpZ2h0IGZsaWNrZXIgb24gdGhlIGZpcnN0IHdoZWVsXHJcbiAgLy8gc2Nyb2xsIChpZiBpdCBpcyBsYXJnZSBlbm91Z2gpLlxyXG4gIGlmIChpZSkgd2hlZWxQaXhlbHNQZXJVbml0ID0gLS41MztcclxuICBlbHNlIGlmIChnZWNrbykgd2hlZWxQaXhlbHNQZXJVbml0ID0gMTU7XHJcbiAgZWxzZSBpZiAoY2hyb21lKSB3aGVlbFBpeGVsc1BlclVuaXQgPSAtLjc7XHJcbiAgZWxzZSBpZiAoc2FmYXJpKSB3aGVlbFBpeGVsc1BlclVuaXQgPSAtMS8zO1xyXG5cclxuICBmdW5jdGlvbiBvblNjcm9sbFdoZWVsKGNtLCBlKSB7XHJcbiAgICB2YXIgZHggPSBlLndoZWVsRGVsdGFYLCBkeSA9IGUud2hlZWxEZWx0YVk7XHJcbiAgICBpZiAoZHggPT0gbnVsbCAmJiBlLmRldGFpbCAmJiBlLmF4aXMgPT0gZS5IT1JJWk9OVEFMX0FYSVMpIGR4ID0gZS5kZXRhaWw7XHJcbiAgICBpZiAoZHkgPT0gbnVsbCAmJiBlLmRldGFpbCAmJiBlLmF4aXMgPT0gZS5WRVJUSUNBTF9BWElTKSBkeSA9IGUuZGV0YWlsO1xyXG4gICAgZWxzZSBpZiAoZHkgPT0gbnVsbCkgZHkgPSBlLndoZWVsRGVsdGE7XHJcblxyXG4gICAgdmFyIGRpc3BsYXkgPSBjbS5kaXNwbGF5LCBzY3JvbGwgPSBkaXNwbGF5LnNjcm9sbGVyO1xyXG4gICAgLy8gUXVpdCBpZiB0aGVyZSdzIG5vdGhpbmcgdG8gc2Nyb2xsIGhlcmVcclxuICAgIGlmICghKGR4ICYmIHNjcm9sbC5zY3JvbGxXaWR0aCA+IHNjcm9sbC5jbGllbnRXaWR0aCB8fFxyXG4gICAgICAgICAgZHkgJiYgc2Nyb2xsLnNjcm9sbEhlaWdodCA+IHNjcm9sbC5jbGllbnRIZWlnaHQpKSByZXR1cm47XHJcblxyXG4gICAgLy8gV2Via2l0IGJyb3dzZXJzIG9uIE9TIFggYWJvcnQgbW9tZW50dW0gc2Nyb2xscyB3aGVuIHRoZSB0YXJnZXRcclxuICAgIC8vIG9mIHRoZSBzY3JvbGwgZXZlbnQgaXMgcmVtb3ZlZCBmcm9tIHRoZSBzY3JvbGxhYmxlIGVsZW1lbnQuXHJcbiAgICAvLyBUaGlzIGhhY2sgKHNlZSByZWxhdGVkIGNvZGUgaW4gcGF0Y2hEaXNwbGF5KSBtYWtlcyBzdXJlIHRoZVxyXG4gICAgLy8gZWxlbWVudCBpcyBrZXB0IGFyb3VuZC5cclxuICAgIGlmIChkeSAmJiBtYWMgJiYgd2Via2l0KSB7XHJcbiAgICAgIG91dGVyOiBmb3IgKHZhciBjdXIgPSBlLnRhcmdldCwgdmlldyA9IGRpc3BsYXkudmlldzsgY3VyICE9IHNjcm9sbDsgY3VyID0gY3VyLnBhcmVudE5vZGUpIHtcclxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHZpZXcubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgIGlmICh2aWV3W2ldLm5vZGUgPT0gY3VyKSB7XHJcbiAgICAgICAgICAgIGNtLmRpc3BsYXkuY3VycmVudFdoZWVsVGFyZ2V0ID0gY3VyO1xyXG4gICAgICAgICAgICBicmVhayBvdXRlcjtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvLyBPbiBzb21lIGJyb3dzZXJzLCBob3Jpem9udGFsIHNjcm9sbGluZyB3aWxsIGNhdXNlIHJlZHJhd3MgdG9cclxuICAgIC8vIGhhcHBlbiBiZWZvcmUgdGhlIGd1dHRlciBoYXMgYmVlbiByZWFsaWduZWQsIGNhdXNpbmcgaXQgdG9cclxuICAgIC8vIHdyaWdnbGUgYXJvdW5kIGluIGEgbW9zdCB1bnNlZW1seSB3YXkuIFdoZW4gd2UgaGF2ZSBhblxyXG4gICAgLy8gZXN0aW1hdGVkIHBpeGVscy9kZWx0YSB2YWx1ZSwgd2UganVzdCBoYW5kbGUgaG9yaXpvbnRhbFxyXG4gICAgLy8gc2Nyb2xsaW5nIGVudGlyZWx5IGhlcmUuIEl0J2xsIGJlIHNsaWdodGx5IG9mZiBmcm9tIG5hdGl2ZSwgYnV0XHJcbiAgICAvLyBiZXR0ZXIgdGhhbiBnbGl0Y2hpbmcgb3V0LlxyXG4gICAgaWYgKGR4ICYmICFnZWNrbyAmJiAhcHJlc3RvICYmIHdoZWVsUGl4ZWxzUGVyVW5pdCAhPSBudWxsKSB7XHJcbiAgICAgIGlmIChkeSlcclxuICAgICAgICBzZXRTY3JvbGxUb3AoY20sIE1hdGgubWF4KDAsIE1hdGgubWluKHNjcm9sbC5zY3JvbGxUb3AgKyBkeSAqIHdoZWVsUGl4ZWxzUGVyVW5pdCwgc2Nyb2xsLnNjcm9sbEhlaWdodCAtIHNjcm9sbC5jbGllbnRIZWlnaHQpKSk7XHJcbiAgICAgIHNldFNjcm9sbExlZnQoY20sIE1hdGgubWF4KDAsIE1hdGgubWluKHNjcm9sbC5zY3JvbGxMZWZ0ICsgZHggKiB3aGVlbFBpeGVsc1BlclVuaXQsIHNjcm9sbC5zY3JvbGxXaWR0aCAtIHNjcm9sbC5jbGllbnRXaWR0aCkpKTtcclxuICAgICAgZV9wcmV2ZW50RGVmYXVsdChlKTtcclxuICAgICAgZGlzcGxheS53aGVlbFN0YXJ0WCA9IG51bGw7IC8vIEFib3J0IG1lYXN1cmVtZW50LCBpZiBpbiBwcm9ncmVzc1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcblxyXG4gICAgLy8gJ1Byb2plY3QnIHRoZSB2aXNpYmxlIHZpZXdwb3J0IHRvIGNvdmVyIHRoZSBhcmVhIHRoYXQgaXMgYmVpbmdcclxuICAgIC8vIHNjcm9sbGVkIGludG8gdmlldyAoaWYgd2Uga25vdyBlbm91Z2ggdG8gZXN0aW1hdGUgaXQpLlxyXG4gICAgaWYgKGR5ICYmIHdoZWVsUGl4ZWxzUGVyVW5pdCAhPSBudWxsKSB7XHJcbiAgICAgIHZhciBwaXhlbHMgPSBkeSAqIHdoZWVsUGl4ZWxzUGVyVW5pdDtcclxuICAgICAgdmFyIHRvcCA9IGNtLmRvYy5zY3JvbGxUb3AsIGJvdCA9IHRvcCArIGRpc3BsYXkud3JhcHBlci5jbGllbnRIZWlnaHQ7XHJcbiAgICAgIGlmIChwaXhlbHMgPCAwKSB0b3AgPSBNYXRoLm1heCgwLCB0b3AgKyBwaXhlbHMgLSA1MCk7XHJcbiAgICAgIGVsc2UgYm90ID0gTWF0aC5taW4oY20uZG9jLmhlaWdodCwgYm90ICsgcGl4ZWxzICsgNTApO1xyXG4gICAgICB1cGRhdGVEaXNwbGF5U2ltcGxlKGNtLCB7dG9wOiB0b3AsIGJvdHRvbTogYm90fSk7XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKHdoZWVsU2FtcGxlcyA8IDIwKSB7XHJcbiAgICAgIGlmIChkaXNwbGF5LndoZWVsU3RhcnRYID09IG51bGwpIHtcclxuICAgICAgICBkaXNwbGF5LndoZWVsU3RhcnRYID0gc2Nyb2xsLnNjcm9sbExlZnQ7IGRpc3BsYXkud2hlZWxTdGFydFkgPSBzY3JvbGwuc2Nyb2xsVG9wO1xyXG4gICAgICAgIGRpc3BsYXkud2hlZWxEWCA9IGR4OyBkaXNwbGF5LndoZWVsRFkgPSBkeTtcclxuICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgaWYgKGRpc3BsYXkud2hlZWxTdGFydFggPT0gbnVsbCkgcmV0dXJuO1xyXG4gICAgICAgICAgdmFyIG1vdmVkWCA9IHNjcm9sbC5zY3JvbGxMZWZ0IC0gZGlzcGxheS53aGVlbFN0YXJ0WDtcclxuICAgICAgICAgIHZhciBtb3ZlZFkgPSBzY3JvbGwuc2Nyb2xsVG9wIC0gZGlzcGxheS53aGVlbFN0YXJ0WTtcclxuICAgICAgICAgIHZhciBzYW1wbGUgPSAobW92ZWRZICYmIGRpc3BsYXkud2hlZWxEWSAmJiBtb3ZlZFkgLyBkaXNwbGF5LndoZWVsRFkpIHx8XHJcbiAgICAgICAgICAgIChtb3ZlZFggJiYgZGlzcGxheS53aGVlbERYICYmIG1vdmVkWCAvIGRpc3BsYXkud2hlZWxEWCk7XHJcbiAgICAgICAgICBkaXNwbGF5LndoZWVsU3RhcnRYID0gZGlzcGxheS53aGVlbFN0YXJ0WSA9IG51bGw7XHJcbiAgICAgICAgICBpZiAoIXNhbXBsZSkgcmV0dXJuO1xyXG4gICAgICAgICAgd2hlZWxQaXhlbHNQZXJVbml0ID0gKHdoZWVsUGl4ZWxzUGVyVW5pdCAqIHdoZWVsU2FtcGxlcyArIHNhbXBsZSkgLyAod2hlZWxTYW1wbGVzICsgMSk7XHJcbiAgICAgICAgICArK3doZWVsU2FtcGxlcztcclxuICAgICAgICB9LCAyMDApO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIGRpc3BsYXkud2hlZWxEWCArPSBkeDsgZGlzcGxheS53aGVlbERZICs9IGR5O1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvLyBLRVkgRVZFTlRTXHJcblxyXG4gIC8vIFJ1biBhIGhhbmRsZXIgdGhhdCB3YXMgYm91bmQgdG8gYSBrZXkuXHJcbiAgZnVuY3Rpb24gZG9IYW5kbGVCaW5kaW5nKGNtLCBib3VuZCwgZHJvcFNoaWZ0KSB7XHJcbiAgICBpZiAodHlwZW9mIGJvdW5kID09IFwic3RyaW5nXCIpIHtcclxuICAgICAgYm91bmQgPSBjb21tYW5kc1tib3VuZF07XHJcbiAgICAgIGlmICghYm91bmQpIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxuICAgIC8vIEVuc3VyZSBwcmV2aW91cyBpbnB1dCBoYXMgYmVlbiByZWFkLCBzbyB0aGF0IHRoZSBoYW5kbGVyIHNlZXMgYVxyXG4gICAgLy8gY29uc2lzdGVudCB2aWV3IG9mIHRoZSBkb2N1bWVudFxyXG4gICAgaWYgKGNtLmRpc3BsYXkucG9sbGluZ0Zhc3QgJiYgcmVhZElucHV0KGNtKSkgY20uZGlzcGxheS5wb2xsaW5nRmFzdCA9IGZhbHNlO1xyXG4gICAgdmFyIHByZXZTaGlmdCA9IGNtLmRpc3BsYXkuc2hpZnQsIGRvbmUgPSBmYWxzZTtcclxuICAgIHRyeSB7XHJcbiAgICAgIGlmIChpc1JlYWRPbmx5KGNtKSkgY20uc3RhdGUuc3VwcHJlc3NFZGl0cyA9IHRydWU7XHJcbiAgICAgIGlmIChkcm9wU2hpZnQpIGNtLmRpc3BsYXkuc2hpZnQgPSBmYWxzZTtcclxuICAgICAgZG9uZSA9IGJvdW5kKGNtKSAhPSBQYXNzO1xyXG4gICAgfSBmaW5hbGx5IHtcclxuICAgICAgY20uZGlzcGxheS5zaGlmdCA9IHByZXZTaGlmdDtcclxuICAgICAgY20uc3RhdGUuc3VwcHJlc3NFZGl0cyA9IGZhbHNlO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIGRvbmU7XHJcbiAgfVxyXG5cclxuICAvLyBDb2xsZWN0IHRoZSBjdXJyZW50bHkgYWN0aXZlIGtleW1hcHMuXHJcbiAgZnVuY3Rpb24gYWxsS2V5TWFwcyhjbSkge1xyXG4gICAgdmFyIG1hcHMgPSBjbS5zdGF0ZS5rZXlNYXBzLnNsaWNlKDApO1xyXG4gICAgaWYgKGNtLm9wdGlvbnMuZXh0cmFLZXlzKSBtYXBzLnB1c2goY20ub3B0aW9ucy5leHRyYUtleXMpO1xyXG4gICAgbWFwcy5wdXNoKGNtLm9wdGlvbnMua2V5TWFwKTtcclxuICAgIHJldHVybiBtYXBzO1xyXG4gIH1cclxuXHJcbiAgdmFyIG1heWJlVHJhbnNpdGlvbjtcclxuICAvLyBIYW5kbGUgYSBrZXkgZnJvbSB0aGUga2V5ZG93biBldmVudC5cclxuICBmdW5jdGlvbiBoYW5kbGVLZXlCaW5kaW5nKGNtLCBlKSB7XHJcbiAgICAvLyBIYW5kbGUgYXV0b21hdGljIGtleW1hcCB0cmFuc2l0aW9uc1xyXG4gICAgdmFyIHN0YXJ0TWFwID0gZ2V0S2V5TWFwKGNtLm9wdGlvbnMua2V5TWFwKSwgbmV4dCA9IHN0YXJ0TWFwLmF1dG87XHJcbiAgICBjbGVhclRpbWVvdXQobWF5YmVUcmFuc2l0aW9uKTtcclxuICAgIGlmIChuZXh0ICYmICFpc01vZGlmaWVyS2V5KGUpKSBtYXliZVRyYW5zaXRpb24gPSBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xyXG4gICAgICBpZiAoZ2V0S2V5TWFwKGNtLm9wdGlvbnMua2V5TWFwKSA9PSBzdGFydE1hcCkge1xyXG4gICAgICAgIGNtLm9wdGlvbnMua2V5TWFwID0gKG5leHQuY2FsbCA/IG5leHQuY2FsbChudWxsLCBjbSkgOiBuZXh0KTtcclxuICAgICAgICBrZXlNYXBDaGFuZ2VkKGNtKTtcclxuICAgICAgfVxyXG4gICAgfSwgNTApO1xyXG5cclxuICAgIHZhciBuYW1lID0ga2V5TmFtZShlLCB0cnVlKSwgaGFuZGxlZCA9IGZhbHNlO1xyXG4gICAgaWYgKCFuYW1lKSByZXR1cm4gZmFsc2U7XHJcbiAgICB2YXIga2V5bWFwcyA9IGFsbEtleU1hcHMoY20pO1xyXG5cclxuICAgIGlmIChlLnNoaWZ0S2V5KSB7XHJcbiAgICAgIC8vIEZpcnN0IHRyeSB0byByZXNvbHZlIGZ1bGwgbmFtZSAoaW5jbHVkaW5nICdTaGlmdC0nKS4gRmFpbGluZ1xyXG4gICAgICAvLyB0aGF0LCBzZWUgaWYgdGhlcmUgaXMgYSBjdXJzb3ItbW90aW9uIGNvbW1hbmQgKHN0YXJ0aW5nIHdpdGhcclxuICAgICAgLy8gJ2dvJykgYm91bmQgdG8gdGhlIGtleW5hbWUgd2l0aG91dCAnU2hpZnQtJy5cclxuICAgICAgaGFuZGxlZCA9IGxvb2t1cEtleShcIlNoaWZ0LVwiICsgbmFtZSwga2V5bWFwcywgZnVuY3Rpb24oYikge3JldHVybiBkb0hhbmRsZUJpbmRpbmcoY20sIGIsIHRydWUpO30pXHJcbiAgICAgICAgICAgICB8fCBsb29rdXBLZXkobmFtZSwga2V5bWFwcywgZnVuY3Rpb24oYikge1xyXG4gICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIGIgPT0gXCJzdHJpbmdcIiA/IC9eZ29bQS1aXS8udGVzdChiKSA6IGIubW90aW9uKVxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBkb0hhbmRsZUJpbmRpbmcoY20sIGIpO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBoYW5kbGVkID0gbG9va3VwS2V5KG5hbWUsIGtleW1hcHMsIGZ1bmN0aW9uKGIpIHsgcmV0dXJuIGRvSGFuZGxlQmluZGluZyhjbSwgYik7IH0pO1xyXG4gICAgfVxyXG5cclxuICAgIGlmIChoYW5kbGVkKSB7XHJcbiAgICAgIGVfcHJldmVudERlZmF1bHQoZSk7XHJcbiAgICAgIHJlc3RhcnRCbGluayhjbSk7XHJcbiAgICAgIHNpZ25hbExhdGVyKGNtLCBcImtleUhhbmRsZWRcIiwgY20sIG5hbWUsIGUpO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIGhhbmRsZWQ7XHJcbiAgfVxyXG5cclxuICAvLyBIYW5kbGUgYSBrZXkgZnJvbSB0aGUga2V5cHJlc3MgZXZlbnRcclxuICBmdW5jdGlvbiBoYW5kbGVDaGFyQmluZGluZyhjbSwgZSwgY2gpIHtcclxuICAgIHZhciBoYW5kbGVkID0gbG9va3VwS2V5KFwiJ1wiICsgY2ggKyBcIidcIiwgYWxsS2V5TWFwcyhjbSksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbihiKSB7IHJldHVybiBkb0hhbmRsZUJpbmRpbmcoY20sIGIsIHRydWUpOyB9KTtcclxuICAgIGlmIChoYW5kbGVkKSB7XHJcbiAgICAgIGVfcHJldmVudERlZmF1bHQoZSk7XHJcbiAgICAgIHJlc3RhcnRCbGluayhjbSk7XHJcbiAgICAgIHNpZ25hbExhdGVyKGNtLCBcImtleUhhbmRsZWRcIiwgY20sIFwiJ1wiICsgY2ggKyBcIidcIiwgZSk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gaGFuZGxlZDtcclxuICB9XHJcblxyXG4gIHZhciBsYXN0U3RvcHBlZEtleSA9IG51bGw7XHJcbiAgZnVuY3Rpb24gb25LZXlEb3duKGUpIHtcclxuICAgIHZhciBjbSA9IHRoaXM7XHJcbiAgICBlbnN1cmVGb2N1cyhjbSk7XHJcbiAgICBpZiAoc2lnbmFsRE9NRXZlbnQoY20sIGUpKSByZXR1cm47XHJcbiAgICAvLyBJRSBkb2VzIHN0cmFuZ2UgdGhpbmdzIHdpdGggZXNjYXBlLlxyXG4gICAgaWYgKGllICYmIGllX3ZlcnNpb24gPCAxMSAmJiBlLmtleUNvZGUgPT0gMjcpIGUucmV0dXJuVmFsdWUgPSBmYWxzZTtcclxuICAgIHZhciBjb2RlID0gZS5rZXlDb2RlO1xyXG4gICAgY20uZGlzcGxheS5zaGlmdCA9IGNvZGUgPT0gMTYgfHwgZS5zaGlmdEtleTtcclxuICAgIHZhciBoYW5kbGVkID0gaGFuZGxlS2V5QmluZGluZyhjbSwgZSk7XHJcbiAgICBpZiAocHJlc3RvKSB7XHJcbiAgICAgIGxhc3RTdG9wcGVkS2V5ID0gaGFuZGxlZCA/IGNvZGUgOiBudWxsO1xyXG4gICAgICAvLyBPcGVyYSBoYXMgbm8gY3V0IGV2ZW50Li4uIHdlIHRyeSB0byBhdCBsZWFzdCBjYXRjaCB0aGUga2V5IGNvbWJvXHJcbiAgICAgIGlmICghaGFuZGxlZCAmJiBjb2RlID09IDg4ICYmICFoYXNDb3B5RXZlbnQgJiYgKG1hYyA/IGUubWV0YUtleSA6IGUuY3RybEtleSkpXHJcbiAgICAgICAgY20ucmVwbGFjZVNlbGVjdGlvbihcIlwiLCBudWxsLCBcImN1dFwiKTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBUdXJuIG1vdXNlIGludG8gY3Jvc3NoYWlyIHdoZW4gQWx0IGlzIGhlbGQgb24gTWFjLlxyXG4gICAgaWYgKGNvZGUgPT0gMTggJiYgIS9cXGJDb2RlTWlycm9yLWNyb3NzaGFpclxcYi8udGVzdChjbS5kaXNwbGF5LmxpbmVEaXYuY2xhc3NOYW1lKSlcclxuICAgICAgc2hvd0Nyb3NzSGFpcihjbSk7XHJcbiAgfVxyXG5cclxuICBmdW5jdGlvbiBzaG93Q3Jvc3NIYWlyKGNtKSB7XHJcbiAgICB2YXIgbGluZURpdiA9IGNtLmRpc3BsYXkubGluZURpdjtcclxuICAgIGFkZENsYXNzKGxpbmVEaXYsIFwiQ29kZU1pcnJvci1jcm9zc2hhaXJcIik7XHJcblxyXG4gICAgZnVuY3Rpb24gdXAoZSkge1xyXG4gICAgICBpZiAoZS5rZXlDb2RlID09IDE4IHx8ICFlLmFsdEtleSkge1xyXG4gICAgICAgIHJtQ2xhc3MobGluZURpdiwgXCJDb2RlTWlycm9yLWNyb3NzaGFpclwiKTtcclxuICAgICAgICBvZmYoZG9jdW1lbnQsIFwia2V5dXBcIiwgdXApO1xyXG4gICAgICAgIG9mZihkb2N1bWVudCwgXCJtb3VzZW92ZXJcIiwgdXApO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICBvbihkb2N1bWVudCwgXCJrZXl1cFwiLCB1cCk7XHJcbiAgICBvbihkb2N1bWVudCwgXCJtb3VzZW92ZXJcIiwgdXApO1xyXG4gIH1cclxuXHJcbiAgZnVuY3Rpb24gb25LZXlVcChlKSB7XHJcbiAgICBpZiAoZS5rZXlDb2RlID09IDE2KSB0aGlzLmRvYy5zZWwuc2hpZnQgPSBmYWxzZTtcclxuICAgIHNpZ25hbERPTUV2ZW50KHRoaXMsIGUpO1xyXG4gIH1cclxuXHJcbiAgZnVuY3Rpb24gb25LZXlQcmVzcyhlKSB7XHJcbiAgICB2YXIgY20gPSB0aGlzO1xyXG4gICAgaWYgKHNpZ25hbERPTUV2ZW50KGNtLCBlKSB8fCBlLmN0cmxLZXkgJiYgIWUuYWx0S2V5IHx8IG1hYyAmJiBlLm1ldGFLZXkpIHJldHVybjtcclxuICAgIHZhciBrZXlDb2RlID0gZS5rZXlDb2RlLCBjaGFyQ29kZSA9IGUuY2hhckNvZGU7XHJcbiAgICBpZiAocHJlc3RvICYmIGtleUNvZGUgPT0gbGFzdFN0b3BwZWRLZXkpIHtsYXN0U3RvcHBlZEtleSA9IG51bGw7IGVfcHJldmVudERlZmF1bHQoZSk7IHJldHVybjt9XHJcbiAgICBpZiAoKChwcmVzdG8gJiYgKCFlLndoaWNoIHx8IGUud2hpY2ggPCAxMCkpIHx8IGtodG1sKSAmJiBoYW5kbGVLZXlCaW5kaW5nKGNtLCBlKSkgcmV0dXJuO1xyXG4gICAgdmFyIGNoID0gU3RyaW5nLmZyb21DaGFyQ29kZShjaGFyQ29kZSA9PSBudWxsID8ga2V5Q29kZSA6IGNoYXJDb2RlKTtcclxuICAgIGlmIChoYW5kbGVDaGFyQmluZGluZyhjbSwgZSwgY2gpKSByZXR1cm47XHJcbiAgICBpZiAoaWUgJiYgaWVfdmVyc2lvbiA+PSA5KSBjbS5kaXNwbGF5LmlucHV0SGFzU2VsZWN0aW9uID0gbnVsbDtcclxuICAgIGZhc3RQb2xsKGNtKTtcclxuICB9XHJcblxyXG4gIC8vIEZPQ1VTL0JMVVIgRVZFTlRTXHJcblxyXG4gIGZ1bmN0aW9uIG9uRm9jdXMoY20pIHtcclxuICAgIGlmIChjbS5vcHRpb25zLnJlYWRPbmx5ID09IFwibm9jdXJzb3JcIikgcmV0dXJuO1xyXG4gICAgaWYgKCFjbS5zdGF0ZS5mb2N1c2VkKSB7XHJcbiAgICAgIHNpZ25hbChjbSwgXCJmb2N1c1wiLCBjbSk7XHJcbiAgICAgIGNtLnN0YXRlLmZvY3VzZWQgPSB0cnVlO1xyXG4gICAgICBhZGRDbGFzcyhjbS5kaXNwbGF5LndyYXBwZXIsIFwiQ29kZU1pcnJvci1mb2N1c2VkXCIpO1xyXG4gICAgICAvLyBUaGUgcHJldklucHV0IHRlc3QgcHJldmVudHMgdGhpcyBmcm9tIGZpcmluZyB3aGVuIGEgY29udGV4dFxyXG4gICAgICAvLyBtZW51IGlzIGNsb3NlZCAoc2luY2UgdGhlIHJlc2V0SW5wdXQgd291bGQga2lsbCB0aGVcclxuICAgICAgLy8gc2VsZWN0LWFsbCBkZXRlY3Rpb24gaGFjaylcclxuICAgICAgaWYgKCFjbS5jdXJPcCAmJiBjbS5kaXNwbGF5LnNlbEZvckNvbnRleHRNZW51ICE9IGNtLmRvYy5zZWwpIHtcclxuICAgICAgICByZXNldElucHV0KGNtKTtcclxuICAgICAgICBpZiAod2Via2l0KSBzZXRUaW1lb3V0KGJpbmQocmVzZXRJbnB1dCwgY20sIHRydWUpLCAwKTsgLy8gSXNzdWUgIzE3MzBcclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgc2xvd1BvbGwoY20pO1xyXG4gICAgcmVzdGFydEJsaW5rKGNtKTtcclxuICB9XHJcbiAgZnVuY3Rpb24gb25CbHVyKGNtKSB7XHJcbiAgICBpZiAoY20uc3RhdGUuZm9jdXNlZCkge1xyXG4gICAgICBzaWduYWwoY20sIFwiYmx1clwiLCBjbSk7XHJcbiAgICAgIGNtLnN0YXRlLmZvY3VzZWQgPSBmYWxzZTtcclxuICAgICAgcm1DbGFzcyhjbS5kaXNwbGF5LndyYXBwZXIsIFwiQ29kZU1pcnJvci1mb2N1c2VkXCIpO1xyXG4gICAgfVxyXG4gICAgY2xlYXJJbnRlcnZhbChjbS5kaXNwbGF5LmJsaW5rZXIpO1xyXG4gICAgc2V0VGltZW91dChmdW5jdGlvbigpIHtpZiAoIWNtLnN0YXRlLmZvY3VzZWQpIGNtLmRpc3BsYXkuc2hpZnQgPSBmYWxzZTt9LCAxNTApO1xyXG4gIH1cclxuXHJcbiAgLy8gQ09OVEVYVCBNRU5VIEhBTkRMSU5HXHJcblxyXG4gIC8vIFRvIG1ha2UgdGhlIGNvbnRleHQgbWVudSB3b3JrLCB3ZSBuZWVkIHRvIGJyaWVmbHkgdW5oaWRlIHRoZVxyXG4gIC8vIHRleHRhcmVhIChtYWtpbmcgaXQgYXMgdW5vYnRydXNpdmUgYXMgcG9zc2libGUpIHRvIGxldCB0aGVcclxuICAvLyByaWdodC1jbGljayB0YWtlIGVmZmVjdCBvbiBpdC5cclxuICBmdW5jdGlvbiBvbkNvbnRleHRNZW51KGNtLCBlKSB7XHJcbiAgICBpZiAoc2lnbmFsRE9NRXZlbnQoY20sIGUsIFwiY29udGV4dG1lbnVcIikpIHJldHVybjtcclxuICAgIHZhciBkaXNwbGF5ID0gY20uZGlzcGxheTtcclxuICAgIGlmIChldmVudEluV2lkZ2V0KGRpc3BsYXksIGUpIHx8IGNvbnRleHRNZW51SW5HdXR0ZXIoY20sIGUpKSByZXR1cm47XHJcblxyXG4gICAgdmFyIHBvcyA9IHBvc0Zyb21Nb3VzZShjbSwgZSksIHNjcm9sbFBvcyA9IGRpc3BsYXkuc2Nyb2xsZXIuc2Nyb2xsVG9wO1xyXG4gICAgaWYgKCFwb3MgfHwgcHJlc3RvKSByZXR1cm47IC8vIE9wZXJhIGlzIGRpZmZpY3VsdC5cclxuXHJcbiAgICAvLyBSZXNldCB0aGUgY3VycmVudCB0ZXh0IHNlbGVjdGlvbiBvbmx5IGlmIHRoZSBjbGljayBpcyBkb25lIG91dHNpZGUgb2YgdGhlIHNlbGVjdGlvblxyXG4gICAgLy8gYW5kICdyZXNldFNlbGVjdGlvbk9uQ29udGV4dE1lbnUnIG9wdGlvbiBpcyB0cnVlLlxyXG4gICAgdmFyIHJlc2V0ID0gY20ub3B0aW9ucy5yZXNldFNlbGVjdGlvbk9uQ29udGV4dE1lbnU7XHJcbiAgICBpZiAocmVzZXQgJiYgY20uZG9jLnNlbC5jb250YWlucyhwb3MpID09IC0xKVxyXG4gICAgICBvcGVyYXRpb24oY20sIHNldFNlbGVjdGlvbikoY20uZG9jLCBzaW1wbGVTZWxlY3Rpb24ocG9zKSwgc2VsX2RvbnRTY3JvbGwpO1xyXG5cclxuICAgIHZhciBvbGRDU1MgPSBkaXNwbGF5LmlucHV0LnN0eWxlLmNzc1RleHQ7XHJcbiAgICBkaXNwbGF5LmlucHV0RGl2LnN0eWxlLnBvc2l0aW9uID0gXCJhYnNvbHV0ZVwiO1xyXG4gICAgZGlzcGxheS5pbnB1dC5zdHlsZS5jc3NUZXh0ID0gXCJwb3NpdGlvbjogZml4ZWQ7IHdpZHRoOiAzMHB4OyBoZWlnaHQ6IDMwcHg7IHRvcDogXCIgKyAoZS5jbGllbnRZIC0gNSkgK1xyXG4gICAgICBcInB4OyBsZWZ0OiBcIiArIChlLmNsaWVudFggLSA1KSArIFwicHg7IHotaW5kZXg6IDEwMDA7IGJhY2tncm91bmQ6IFwiICtcclxuICAgICAgKGllID8gXCJyZ2JhKDI1NSwgMjU1LCAyNTUsIC4wNSlcIiA6IFwidHJhbnNwYXJlbnRcIikgK1xyXG4gICAgICBcIjsgb3V0bGluZTogbm9uZTsgYm9yZGVyLXdpZHRoOiAwOyBvdXRsaW5lOiBub25lOyBvdmVyZmxvdzogaGlkZGVuOyBvcGFjaXR5OiAuMDU7IGZpbHRlcjogYWxwaGEob3BhY2l0eT01KTtcIjtcclxuICAgIGlmICh3ZWJraXQpIHZhciBvbGRTY3JvbGxZID0gd2luZG93LnNjcm9sbFk7IC8vIFdvcmsgYXJvdW5kIENocm9tZSBpc3N1ZSAoIzI3MTIpXHJcbiAgICBmb2N1c0lucHV0KGNtKTtcclxuICAgIGlmICh3ZWJraXQpIHdpbmRvdy5zY3JvbGxUbyhudWxsLCBvbGRTY3JvbGxZKTtcclxuICAgIHJlc2V0SW5wdXQoY20pO1xyXG4gICAgLy8gQWRkcyBcIlNlbGVjdCBhbGxcIiB0byBjb250ZXh0IG1lbnUgaW4gRkZcclxuICAgIGlmICghY20uc29tZXRoaW5nU2VsZWN0ZWQoKSkgZGlzcGxheS5pbnB1dC52YWx1ZSA9IGRpc3BsYXkucHJldklucHV0ID0gXCIgXCI7XHJcbiAgICBkaXNwbGF5LnNlbEZvckNvbnRleHRNZW51ID0gY20uZG9jLnNlbDtcclxuICAgIGNsZWFyVGltZW91dChkaXNwbGF5LmRldGVjdGluZ1NlbGVjdEFsbCk7XHJcblxyXG4gICAgLy8gU2VsZWN0LWFsbCB3aWxsIGJlIGdyZXllZCBvdXQgaWYgdGhlcmUncyBub3RoaW5nIHRvIHNlbGVjdCwgc29cclxuICAgIC8vIHRoaXMgYWRkcyBhIHplcm8td2lkdGggc3BhY2Ugc28gdGhhdCB3ZSBjYW4gbGF0ZXIgY2hlY2sgd2hldGhlclxyXG4gICAgLy8gaXQgZ290IHNlbGVjdGVkLlxyXG4gICAgZnVuY3Rpb24gcHJlcGFyZVNlbGVjdEFsbEhhY2soKSB7XHJcbiAgICAgIGlmIChkaXNwbGF5LmlucHV0LnNlbGVjdGlvblN0YXJ0ICE9IG51bGwpIHtcclxuICAgICAgICB2YXIgc2VsZWN0ZWQgPSBjbS5zb21ldGhpbmdTZWxlY3RlZCgpO1xyXG4gICAgICAgIHZhciBleHR2YWwgPSBkaXNwbGF5LmlucHV0LnZhbHVlID0gXCJcXHUyMDBiXCIgKyAoc2VsZWN0ZWQgPyBkaXNwbGF5LmlucHV0LnZhbHVlIDogXCJcIik7XHJcbiAgICAgICAgZGlzcGxheS5wcmV2SW5wdXQgPSBzZWxlY3RlZCA/IFwiXCIgOiBcIlxcdTIwMGJcIjtcclxuICAgICAgICBkaXNwbGF5LmlucHV0LnNlbGVjdGlvblN0YXJ0ID0gMTsgZGlzcGxheS5pbnB1dC5zZWxlY3Rpb25FbmQgPSBleHR2YWwubGVuZ3RoO1xyXG4gICAgICAgIC8vIFJlLXNldCB0aGlzLCBpbiBjYXNlIHNvbWUgb3RoZXIgaGFuZGxlciB0b3VjaGVkIHRoZVxyXG4gICAgICAgIC8vIHNlbGVjdGlvbiBpbiB0aGUgbWVhbnRpbWUuXHJcbiAgICAgICAgZGlzcGxheS5zZWxGb3JDb250ZXh0TWVudSA9IGNtLmRvYy5zZWw7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIGZ1bmN0aW9uIHJlaGlkZSgpIHtcclxuICAgICAgZGlzcGxheS5pbnB1dERpdi5zdHlsZS5wb3NpdGlvbiA9IFwicmVsYXRpdmVcIjtcclxuICAgICAgZGlzcGxheS5pbnB1dC5zdHlsZS5jc3NUZXh0ID0gb2xkQ1NTO1xyXG4gICAgICBpZiAoaWUgJiYgaWVfdmVyc2lvbiA8IDkpIGRpc3BsYXkuc2Nyb2xsYmFyVi5zY3JvbGxUb3AgPSBkaXNwbGF5LnNjcm9sbGVyLnNjcm9sbFRvcCA9IHNjcm9sbFBvcztcclxuICAgICAgc2xvd1BvbGwoY20pO1xyXG5cclxuICAgICAgLy8gVHJ5IHRvIGRldGVjdCB0aGUgdXNlciBjaG9vc2luZyBzZWxlY3QtYWxsXHJcbiAgICAgIGlmIChkaXNwbGF5LmlucHV0LnNlbGVjdGlvblN0YXJ0ICE9IG51bGwpIHtcclxuICAgICAgICBpZiAoIWllIHx8IChpZSAmJiBpZV92ZXJzaW9uIDwgOSkpIHByZXBhcmVTZWxlY3RBbGxIYWNrKCk7XHJcbiAgICAgICAgdmFyIGkgPSAwLCBwb2xsID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICBpZiAoZGlzcGxheS5zZWxGb3JDb250ZXh0TWVudSA9PSBjbS5kb2Muc2VsICYmIGRpc3BsYXkuaW5wdXQuc2VsZWN0aW9uU3RhcnQgPT0gMClcclxuICAgICAgICAgICAgb3BlcmF0aW9uKGNtLCBjb21tYW5kcy5zZWxlY3RBbGwpKGNtKTtcclxuICAgICAgICAgIGVsc2UgaWYgKGkrKyA8IDEwKSBkaXNwbGF5LmRldGVjdGluZ1NlbGVjdEFsbCA9IHNldFRpbWVvdXQocG9sbCwgNTAwKTtcclxuICAgICAgICAgIGVsc2UgcmVzZXRJbnB1dChjbSk7XHJcbiAgICAgICAgfTtcclxuICAgICAgICBkaXNwbGF5LmRldGVjdGluZ1NlbGVjdEFsbCA9IHNldFRpbWVvdXQocG9sbCwgMjAwKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGlmIChpZSAmJiBpZV92ZXJzaW9uID49IDkpIHByZXBhcmVTZWxlY3RBbGxIYWNrKCk7XHJcbiAgICBpZiAoY2FwdHVyZVJpZ2h0Q2xpY2spIHtcclxuICAgICAgZV9zdG9wKGUpO1xyXG4gICAgICB2YXIgbW91c2V1cCA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIG9mZih3aW5kb3csIFwibW91c2V1cFwiLCBtb3VzZXVwKTtcclxuICAgICAgICBzZXRUaW1lb3V0KHJlaGlkZSwgMjApO1xyXG4gICAgICB9O1xyXG4gICAgICBvbih3aW5kb3csIFwibW91c2V1cFwiLCBtb3VzZXVwKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHNldFRpbWVvdXQocmVoaWRlLCA1MCk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBmdW5jdGlvbiBjb250ZXh0TWVudUluR3V0dGVyKGNtLCBlKSB7XHJcbiAgICBpZiAoIWhhc0hhbmRsZXIoY20sIFwiZ3V0dGVyQ29udGV4dE1lbnVcIikpIHJldHVybiBmYWxzZTtcclxuICAgIHJldHVybiBndXR0ZXJFdmVudChjbSwgZSwgXCJndXR0ZXJDb250ZXh0TWVudVwiLCBmYWxzZSwgc2lnbmFsKTtcclxuICB9XHJcblxyXG4gIC8vIFVQREFUSU5HXHJcblxyXG4gIC8vIENvbXB1dGUgdGhlIHBvc2l0aW9uIG9mIHRoZSBlbmQgb2YgYSBjaGFuZ2UgKGl0cyAndG8nIHByb3BlcnR5XHJcbiAgLy8gcmVmZXJzIHRvIHRoZSBwcmUtY2hhbmdlIGVuZCkuXHJcbiAgdmFyIGNoYW5nZUVuZCA9IENvZGVNaXJyb3IuY2hhbmdlRW5kID0gZnVuY3Rpb24oY2hhbmdlKSB7XHJcbiAgICBpZiAoIWNoYW5nZS50ZXh0KSByZXR1cm4gY2hhbmdlLnRvO1xyXG4gICAgcmV0dXJuIFBvcyhjaGFuZ2UuZnJvbS5saW5lICsgY2hhbmdlLnRleHQubGVuZ3RoIC0gMSxcclxuICAgICAgICAgICAgICAgbHN0KGNoYW5nZS50ZXh0KS5sZW5ndGggKyAoY2hhbmdlLnRleHQubGVuZ3RoID09IDEgPyBjaGFuZ2UuZnJvbS5jaCA6IDApKTtcclxuICB9O1xyXG5cclxuICAvLyBBZGp1c3QgYSBwb3NpdGlvbiB0byByZWZlciB0byB0aGUgcG9zdC1jaGFuZ2UgcG9zaXRpb24gb2YgdGhlXHJcbiAgLy8gc2FtZSB0ZXh0LCBvciB0aGUgZW5kIG9mIHRoZSBjaGFuZ2UgaWYgdGhlIGNoYW5nZSBjb3ZlcnMgaXQuXHJcbiAgZnVuY3Rpb24gYWRqdXN0Rm9yQ2hhbmdlKHBvcywgY2hhbmdlKSB7XHJcbiAgICBpZiAoY21wKHBvcywgY2hhbmdlLmZyb20pIDwgMCkgcmV0dXJuIHBvcztcclxuICAgIGlmIChjbXAocG9zLCBjaGFuZ2UudG8pIDw9IDApIHJldHVybiBjaGFuZ2VFbmQoY2hhbmdlKTtcclxuXHJcbiAgICB2YXIgbGluZSA9IHBvcy5saW5lICsgY2hhbmdlLnRleHQubGVuZ3RoIC0gKGNoYW5nZS50by5saW5lIC0gY2hhbmdlLmZyb20ubGluZSkgLSAxLCBjaCA9IHBvcy5jaDtcclxuICAgIGlmIChwb3MubGluZSA9PSBjaGFuZ2UudG8ubGluZSkgY2ggKz0gY2hhbmdlRW5kKGNoYW5nZSkuY2ggLSBjaGFuZ2UudG8uY2g7XHJcbiAgICByZXR1cm4gUG9zKGxpbmUsIGNoKTtcclxuICB9XHJcblxyXG4gIGZ1bmN0aW9uIGNvbXB1dGVTZWxBZnRlckNoYW5nZShkb2MsIGNoYW5nZSkge1xyXG4gICAgdmFyIG91dCA9IFtdO1xyXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBkb2Muc2VsLnJhbmdlcy5sZW5ndGg7IGkrKykge1xyXG4gICAgICB2YXIgcmFuZ2UgPSBkb2Muc2VsLnJhbmdlc1tpXTtcclxuICAgICAgb3V0LnB1c2gobmV3IFJhbmdlKGFkanVzdEZvckNoYW5nZShyYW5nZS5hbmNob3IsIGNoYW5nZSksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICBhZGp1c3RGb3JDaGFuZ2UocmFuZ2UuaGVhZCwgY2hhbmdlKSkpO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIG5vcm1hbGl6ZVNlbGVjdGlvbihvdXQsIGRvYy5zZWwucHJpbUluZGV4KTtcclxuICB9XHJcblxyXG4gIGZ1bmN0aW9uIG9mZnNldFBvcyhwb3MsIG9sZCwgbncpIHtcclxuICAgIGlmIChwb3MubGluZSA9PSBvbGQubGluZSlcclxuICAgICAgcmV0dXJuIFBvcyhudy5saW5lLCBwb3MuY2ggLSBvbGQuY2ggKyBudy5jaCk7XHJcbiAgICBlbHNlXHJcbiAgICAgIHJldHVybiBQb3MobncubGluZSArIChwb3MubGluZSAtIG9sZC5saW5lKSwgcG9zLmNoKTtcclxuICB9XHJcblxyXG4gIC8vIFVzZWQgYnkgcmVwbGFjZVNlbGVjdGlvbnMgdG8gYWxsb3cgbW92aW5nIHRoZSBzZWxlY3Rpb24gdG8gdGhlXHJcbiAgLy8gc3RhcnQgb3IgYXJvdW5kIHRoZSByZXBsYWNlZCB0ZXN0LiBIaW50IG1heSBiZSBcInN0YXJ0XCIgb3IgXCJhcm91bmRcIi5cclxuICBmdW5jdGlvbiBjb21wdXRlUmVwbGFjZWRTZWwoZG9jLCBjaGFuZ2VzLCBoaW50KSB7XHJcbiAgICB2YXIgb3V0ID0gW107XHJcbiAgICB2YXIgb2xkUHJldiA9IFBvcyhkb2MuZmlyc3QsIDApLCBuZXdQcmV2ID0gb2xkUHJldjtcclxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgY2hhbmdlcy5sZW5ndGg7IGkrKykge1xyXG4gICAgICB2YXIgY2hhbmdlID0gY2hhbmdlc1tpXTtcclxuICAgICAgdmFyIGZyb20gPSBvZmZzZXRQb3MoY2hhbmdlLmZyb20sIG9sZFByZXYsIG5ld1ByZXYpO1xyXG4gICAgICB2YXIgdG8gPSBvZmZzZXRQb3MoY2hhbmdlRW5kKGNoYW5nZSksIG9sZFByZXYsIG5ld1ByZXYpO1xyXG4gICAgICBvbGRQcmV2ID0gY2hhbmdlLnRvO1xyXG4gICAgICBuZXdQcmV2ID0gdG87XHJcbiAgICAgIGlmIChoaW50ID09IFwiYXJvdW5kXCIpIHtcclxuICAgICAgICB2YXIgcmFuZ2UgPSBkb2Muc2VsLnJhbmdlc1tpXSwgaW52ID0gY21wKHJhbmdlLmhlYWQsIHJhbmdlLmFuY2hvcikgPCAwO1xyXG4gICAgICAgIG91dFtpXSA9IG5ldyBSYW5nZShpbnYgPyB0byA6IGZyb20sIGludiA/IGZyb20gOiB0byk7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgb3V0W2ldID0gbmV3IFJhbmdlKGZyb20sIGZyb20pO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4gbmV3IFNlbGVjdGlvbihvdXQsIGRvYy5zZWwucHJpbUluZGV4KTtcclxuICB9XHJcblxyXG4gIC8vIEFsbG93IFwiYmVmb3JlQ2hhbmdlXCIgZXZlbnQgaGFuZGxlcnMgdG8gaW5mbHVlbmNlIGEgY2hhbmdlXHJcbiAgZnVuY3Rpb24gZmlsdGVyQ2hhbmdlKGRvYywgY2hhbmdlLCB1cGRhdGUpIHtcclxuICAgIHZhciBvYmogPSB7XHJcbiAgICAgIGNhbmNlbGVkOiBmYWxzZSxcclxuICAgICAgZnJvbTogY2hhbmdlLmZyb20sXHJcbiAgICAgIHRvOiBjaGFuZ2UudG8sXHJcbiAgICAgIHRleHQ6IGNoYW5nZS50ZXh0LFxyXG4gICAgICBvcmlnaW46IGNoYW5nZS5vcmlnaW4sXHJcbiAgICAgIGNhbmNlbDogZnVuY3Rpb24oKSB7IHRoaXMuY2FuY2VsZWQgPSB0cnVlOyB9XHJcbiAgICB9O1xyXG4gICAgaWYgKHVwZGF0ZSkgb2JqLnVwZGF0ZSA9IGZ1bmN0aW9uKGZyb20sIHRvLCB0ZXh0LCBvcmlnaW4pIHtcclxuICAgICAgaWYgKGZyb20pIHRoaXMuZnJvbSA9IGNsaXBQb3MoZG9jLCBmcm9tKTtcclxuICAgICAgaWYgKHRvKSB0aGlzLnRvID0gY2xpcFBvcyhkb2MsIHRvKTtcclxuICAgICAgaWYgKHRleHQpIHRoaXMudGV4dCA9IHRleHQ7XHJcbiAgICAgIGlmIChvcmlnaW4gIT09IHVuZGVmaW5lZCkgdGhpcy5vcmlnaW4gPSBvcmlnaW47XHJcbiAgICB9O1xyXG4gICAgc2lnbmFsKGRvYywgXCJiZWZvcmVDaGFuZ2VcIiwgZG9jLCBvYmopO1xyXG4gICAgaWYgKGRvYy5jbSkgc2lnbmFsKGRvYy5jbSwgXCJiZWZvcmVDaGFuZ2VcIiwgZG9jLmNtLCBvYmopO1xyXG5cclxuICAgIGlmIChvYmouY2FuY2VsZWQpIHJldHVybiBudWxsO1xyXG4gICAgcmV0dXJuIHtmcm9tOiBvYmouZnJvbSwgdG86IG9iai50bywgdGV4dDogb2JqLnRleHQsIG9yaWdpbjogb2JqLm9yaWdpbn07XHJcbiAgfVxyXG5cclxuICAvLyBBcHBseSBhIGNoYW5nZSB0byBhIGRvY3VtZW50LCBhbmQgYWRkIGl0IHRvIHRoZSBkb2N1bWVudCdzXHJcbiAgLy8gaGlzdG9yeSwgYW5kIHByb3BhZ2F0aW5nIGl0IHRvIGFsbCBsaW5rZWQgZG9jdW1lbnRzLlxyXG4gIGZ1bmN0aW9uIG1ha2VDaGFuZ2UoZG9jLCBjaGFuZ2UsIGlnbm9yZVJlYWRPbmx5KSB7XHJcbiAgICBpZiAoZG9jLmNtKSB7XHJcbiAgICAgIGlmICghZG9jLmNtLmN1ck9wKSByZXR1cm4gb3BlcmF0aW9uKGRvYy5jbSwgbWFrZUNoYW5nZSkoZG9jLCBjaGFuZ2UsIGlnbm9yZVJlYWRPbmx5KTtcclxuICAgICAgaWYgKGRvYy5jbS5zdGF0ZS5zdXBwcmVzc0VkaXRzKSByZXR1cm47XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKGhhc0hhbmRsZXIoZG9jLCBcImJlZm9yZUNoYW5nZVwiKSB8fCBkb2MuY20gJiYgaGFzSGFuZGxlcihkb2MuY20sIFwiYmVmb3JlQ2hhbmdlXCIpKSB7XHJcbiAgICAgIGNoYW5nZSA9IGZpbHRlckNoYW5nZShkb2MsIGNoYW5nZSwgdHJ1ZSk7XHJcbiAgICAgIGlmICghY2hhbmdlKSByZXR1cm47XHJcbiAgICB9XHJcblxyXG4gICAgLy8gUG9zc2libHkgc3BsaXQgb3Igc3VwcHJlc3MgdGhlIHVwZGF0ZSBiYXNlZCBvbiB0aGUgcHJlc2VuY2VcclxuICAgIC8vIG9mIHJlYWQtb25seSBzcGFucyBpbiBpdHMgcmFuZ2UuXHJcbiAgICB2YXIgc3BsaXQgPSBzYXdSZWFkT25seVNwYW5zICYmICFpZ25vcmVSZWFkT25seSAmJiByZW1vdmVSZWFkT25seVJhbmdlcyhkb2MsIGNoYW5nZS5mcm9tLCBjaGFuZ2UudG8pO1xyXG4gICAgaWYgKHNwbGl0KSB7XHJcbiAgICAgIGZvciAodmFyIGkgPSBzcGxpdC5sZW5ndGggLSAxOyBpID49IDA7IC0taSlcclxuICAgICAgICBtYWtlQ2hhbmdlSW5uZXIoZG9jLCB7ZnJvbTogc3BsaXRbaV0uZnJvbSwgdG86IHNwbGl0W2ldLnRvLCB0ZXh0OiBpID8gW1wiXCJdIDogY2hhbmdlLnRleHR9KTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIG1ha2VDaGFuZ2VJbm5lcihkb2MsIGNoYW5nZSk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBmdW5jdGlvbiBtYWtlQ2hhbmdlSW5uZXIoZG9jLCBjaGFuZ2UpIHtcclxuICAgIGlmIChjaGFuZ2UudGV4dC5sZW5ndGggPT0gMSAmJiBjaGFuZ2UudGV4dFswXSA9PSBcIlwiICYmIGNtcChjaGFuZ2UuZnJvbSwgY2hhbmdlLnRvKSA9PSAwKSByZXR1cm47XHJcbiAgICB2YXIgc2VsQWZ0ZXIgPSBjb21wdXRlU2VsQWZ0ZXJDaGFuZ2UoZG9jLCBjaGFuZ2UpO1xyXG4gICAgYWRkQ2hhbmdlVG9IaXN0b3J5KGRvYywgY2hhbmdlLCBzZWxBZnRlciwgZG9jLmNtID8gZG9jLmNtLmN1ck9wLmlkIDogTmFOKTtcclxuXHJcbiAgICBtYWtlQ2hhbmdlU2luZ2xlRG9jKGRvYywgY2hhbmdlLCBzZWxBZnRlciwgc3RyZXRjaFNwYW5zT3ZlckNoYW5nZShkb2MsIGNoYW5nZSkpO1xyXG4gICAgdmFyIHJlYmFzZWQgPSBbXTtcclxuXHJcbiAgICBsaW5rZWREb2NzKGRvYywgZnVuY3Rpb24oZG9jLCBzaGFyZWRIaXN0KSB7XHJcbiAgICAgIGlmICghc2hhcmVkSGlzdCAmJiBpbmRleE9mKHJlYmFzZWQsIGRvYy5oaXN0b3J5KSA9PSAtMSkge1xyXG4gICAgICAgIHJlYmFzZUhpc3QoZG9jLmhpc3RvcnksIGNoYW5nZSk7XHJcbiAgICAgICAgcmViYXNlZC5wdXNoKGRvYy5oaXN0b3J5KTtcclxuICAgICAgfVxyXG4gICAgICBtYWtlQ2hhbmdlU2luZ2xlRG9jKGRvYywgY2hhbmdlLCBudWxsLCBzdHJldGNoU3BhbnNPdmVyQ2hhbmdlKGRvYywgY2hhbmdlKSk7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIC8vIFJldmVydCBhIGNoYW5nZSBzdG9yZWQgaW4gYSBkb2N1bWVudCdzIGhpc3RvcnkuXHJcbiAgZnVuY3Rpb24gbWFrZUNoYW5nZUZyb21IaXN0b3J5KGRvYywgdHlwZSwgYWxsb3dTZWxlY3Rpb25Pbmx5KSB7XHJcbiAgICBpZiAoZG9jLmNtICYmIGRvYy5jbS5zdGF0ZS5zdXBwcmVzc0VkaXRzKSByZXR1cm47XHJcblxyXG4gICAgdmFyIGhpc3QgPSBkb2MuaGlzdG9yeSwgZXZlbnQsIHNlbEFmdGVyID0gZG9jLnNlbDtcclxuICAgIHZhciBzb3VyY2UgPSB0eXBlID09IFwidW5kb1wiID8gaGlzdC5kb25lIDogaGlzdC51bmRvbmUsIGRlc3QgPSB0eXBlID09IFwidW5kb1wiID8gaGlzdC51bmRvbmUgOiBoaXN0LmRvbmU7XHJcblxyXG4gICAgLy8gVmVyaWZ5IHRoYXQgdGhlcmUgaXMgYSB1c2VhYmxlIGV2ZW50IChzbyB0aGF0IGN0cmwteiB3b24ndFxyXG4gICAgLy8gbmVlZGxlc3NseSBjbGVhciBzZWxlY3Rpb24gZXZlbnRzKVxyXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzb3VyY2UubGVuZ3RoOyBpKyspIHtcclxuICAgICAgZXZlbnQgPSBzb3VyY2VbaV07XHJcbiAgICAgIGlmIChhbGxvd1NlbGVjdGlvbk9ubHkgPyBldmVudC5yYW5nZXMgJiYgIWV2ZW50LmVxdWFscyhkb2Muc2VsKSA6ICFldmVudC5yYW5nZXMpXHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICB9XHJcbiAgICBpZiAoaSA9PSBzb3VyY2UubGVuZ3RoKSByZXR1cm47XHJcbiAgICBoaXN0Lmxhc3RPcmlnaW4gPSBoaXN0Lmxhc3RTZWxPcmlnaW4gPSBudWxsO1xyXG5cclxuICAgIGZvciAoOzspIHtcclxuICAgICAgZXZlbnQgPSBzb3VyY2UucG9wKCk7XHJcbiAgICAgIGlmIChldmVudC5yYW5nZXMpIHtcclxuICAgICAgICBwdXNoU2VsZWN0aW9uVG9IaXN0b3J5KGV2ZW50LCBkZXN0KTtcclxuICAgICAgICBpZiAoYWxsb3dTZWxlY3Rpb25Pbmx5ICYmICFldmVudC5lcXVhbHMoZG9jLnNlbCkpIHtcclxuICAgICAgICAgIHNldFNlbGVjdGlvbihkb2MsIGV2ZW50LCB7Y2xlYXJSZWRvOiBmYWxzZX0pO1xyXG4gICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICBzZWxBZnRlciA9IGV2ZW50O1xyXG4gICAgICB9XHJcbiAgICAgIGVsc2UgYnJlYWs7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gQnVpbGQgdXAgYSByZXZlcnNlIGNoYW5nZSBvYmplY3QgdG8gYWRkIHRvIHRoZSBvcHBvc2l0ZSBoaXN0b3J5XHJcbiAgICAvLyBzdGFjayAocmVkbyB3aGVuIHVuZG9pbmcsIGFuZCB2aWNlIHZlcnNhKS5cclxuICAgIHZhciBhbnRpQ2hhbmdlcyA9IFtdO1xyXG4gICAgcHVzaFNlbGVjdGlvblRvSGlzdG9yeShzZWxBZnRlciwgZGVzdCk7XHJcbiAgICBkZXN0LnB1c2goe2NoYW5nZXM6IGFudGlDaGFuZ2VzLCBnZW5lcmF0aW9uOiBoaXN0LmdlbmVyYXRpb259KTtcclxuICAgIGhpc3QuZ2VuZXJhdGlvbiA9IGV2ZW50LmdlbmVyYXRpb24gfHwgKytoaXN0Lm1heEdlbmVyYXRpb247XHJcblxyXG4gICAgdmFyIGZpbHRlciA9IGhhc0hhbmRsZXIoZG9jLCBcImJlZm9yZUNoYW5nZVwiKSB8fCBkb2MuY20gJiYgaGFzSGFuZGxlcihkb2MuY20sIFwiYmVmb3JlQ2hhbmdlXCIpO1xyXG5cclxuICAgIGZvciAodmFyIGkgPSBldmVudC5jaGFuZ2VzLmxlbmd0aCAtIDE7IGkgPj0gMDsgLS1pKSB7XHJcbiAgICAgIHZhciBjaGFuZ2UgPSBldmVudC5jaGFuZ2VzW2ldO1xyXG4gICAgICBjaGFuZ2Uub3JpZ2luID0gdHlwZTtcclxuICAgICAgaWYgKGZpbHRlciAmJiAhZmlsdGVyQ2hhbmdlKGRvYywgY2hhbmdlLCBmYWxzZSkpIHtcclxuICAgICAgICBzb3VyY2UubGVuZ3RoID0gMDtcclxuICAgICAgICByZXR1cm47XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGFudGlDaGFuZ2VzLnB1c2goaGlzdG9yeUNoYW5nZUZyb21DaGFuZ2UoZG9jLCBjaGFuZ2UpKTtcclxuXHJcbiAgICAgIHZhciBhZnRlciA9IGkgPyBjb21wdXRlU2VsQWZ0ZXJDaGFuZ2UoZG9jLCBjaGFuZ2UpIDogbHN0KHNvdXJjZSk7XHJcbiAgICAgIG1ha2VDaGFuZ2VTaW5nbGVEb2MoZG9jLCBjaGFuZ2UsIGFmdGVyLCBtZXJnZU9sZFNwYW5zKGRvYywgY2hhbmdlKSk7XHJcbiAgICAgIGlmICghaSAmJiBkb2MuY20pIGRvYy5jbS5zY3JvbGxJbnRvVmlldyh7ZnJvbTogY2hhbmdlLmZyb20sIHRvOiBjaGFuZ2VFbmQoY2hhbmdlKX0pO1xyXG4gICAgICB2YXIgcmViYXNlZCA9IFtdO1xyXG5cclxuICAgICAgLy8gUHJvcGFnYXRlIHRvIHRoZSBsaW5rZWQgZG9jdW1lbnRzXHJcbiAgICAgIGxpbmtlZERvY3MoZG9jLCBmdW5jdGlvbihkb2MsIHNoYXJlZEhpc3QpIHtcclxuICAgICAgICBpZiAoIXNoYXJlZEhpc3QgJiYgaW5kZXhPZihyZWJhc2VkLCBkb2MuaGlzdG9yeSkgPT0gLTEpIHtcclxuICAgICAgICAgIHJlYmFzZUhpc3QoZG9jLmhpc3RvcnksIGNoYW5nZSk7XHJcbiAgICAgICAgICByZWJhc2VkLnB1c2goZG9jLmhpc3RvcnkpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBtYWtlQ2hhbmdlU2luZ2xlRG9jKGRvYywgY2hhbmdlLCBudWxsLCBtZXJnZU9sZFNwYW5zKGRvYywgY2hhbmdlKSk7XHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLy8gU3ViLXZpZXdzIG5lZWQgdGhlaXIgbGluZSBudW1iZXJzIHNoaWZ0ZWQgd2hlbiB0ZXh0IGlzIGFkZGVkXHJcbiAgLy8gYWJvdmUgb3IgYmVsb3cgdGhlbSBpbiB0aGUgcGFyZW50IGRvY3VtZW50LlxyXG4gIGZ1bmN0aW9uIHNoaWZ0RG9jKGRvYywgZGlzdGFuY2UpIHtcclxuICAgIGlmIChkaXN0YW5jZSA9PSAwKSByZXR1cm47XHJcbiAgICBkb2MuZmlyc3QgKz0gZGlzdGFuY2U7XHJcbiAgICBkb2Muc2VsID0gbmV3IFNlbGVjdGlvbihtYXAoZG9jLnNlbC5yYW5nZXMsIGZ1bmN0aW9uKHJhbmdlKSB7XHJcbiAgICAgIHJldHVybiBuZXcgUmFuZ2UoUG9zKHJhbmdlLmFuY2hvci5saW5lICsgZGlzdGFuY2UsIHJhbmdlLmFuY2hvci5jaCksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgUG9zKHJhbmdlLmhlYWQubGluZSArIGRpc3RhbmNlLCByYW5nZS5oZWFkLmNoKSk7XHJcbiAgICB9KSwgZG9jLnNlbC5wcmltSW5kZXgpO1xyXG4gICAgaWYgKGRvYy5jbSkge1xyXG4gICAgICByZWdDaGFuZ2UoZG9jLmNtLCBkb2MuZmlyc3QsIGRvYy5maXJzdCAtIGRpc3RhbmNlLCBkaXN0YW5jZSk7XHJcbiAgICAgIGZvciAodmFyIGQgPSBkb2MuY20uZGlzcGxheSwgbCA9IGQudmlld0Zyb207IGwgPCBkLnZpZXdUbzsgbCsrKVxyXG4gICAgICAgIHJlZ0xpbmVDaGFuZ2UoZG9jLmNtLCBsLCBcImd1dHRlclwiKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8vIE1vcmUgbG93ZXItbGV2ZWwgY2hhbmdlIGZ1bmN0aW9uLCBoYW5kbGluZyBvbmx5IGEgc2luZ2xlIGRvY3VtZW50XHJcbiAgLy8gKG5vdCBsaW5rZWQgb25lcykuXHJcbiAgZnVuY3Rpb24gbWFrZUNoYW5nZVNpbmdsZURvYyhkb2MsIGNoYW5nZSwgc2VsQWZ0ZXIsIHNwYW5zKSB7XHJcbiAgICBpZiAoZG9jLmNtICYmICFkb2MuY20uY3VyT3ApXHJcbiAgICAgIHJldHVybiBvcGVyYXRpb24oZG9jLmNtLCBtYWtlQ2hhbmdlU2luZ2xlRG9jKShkb2MsIGNoYW5nZSwgc2VsQWZ0ZXIsIHNwYW5zKTtcclxuXHJcbiAgICBpZiAoY2hhbmdlLnRvLmxpbmUgPCBkb2MuZmlyc3QpIHtcclxuICAgICAgc2hpZnREb2MoZG9jLCBjaGFuZ2UudGV4dC5sZW5ndGggLSAxIC0gKGNoYW5nZS50by5saW5lIC0gY2hhbmdlLmZyb20ubGluZSkpO1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcbiAgICBpZiAoY2hhbmdlLmZyb20ubGluZSA+IGRvYy5sYXN0TGluZSgpKSByZXR1cm47XHJcblxyXG4gICAgLy8gQ2xpcCB0aGUgY2hhbmdlIHRvIHRoZSBzaXplIG9mIHRoaXMgZG9jXHJcbiAgICBpZiAoY2hhbmdlLmZyb20ubGluZSA8IGRvYy5maXJzdCkge1xyXG4gICAgICB2YXIgc2hpZnQgPSBjaGFuZ2UudGV4dC5sZW5ndGggLSAxIC0gKGRvYy5maXJzdCAtIGNoYW5nZS5mcm9tLmxpbmUpO1xyXG4gICAgICBzaGlmdERvYyhkb2MsIHNoaWZ0KTtcclxuICAgICAgY2hhbmdlID0ge2Zyb206IFBvcyhkb2MuZmlyc3QsIDApLCB0bzogUG9zKGNoYW5nZS50by5saW5lICsgc2hpZnQsIGNoYW5nZS50by5jaCksXHJcbiAgICAgICAgICAgICAgICB0ZXh0OiBbbHN0KGNoYW5nZS50ZXh0KV0sIG9yaWdpbjogY2hhbmdlLm9yaWdpbn07XHJcbiAgICB9XHJcbiAgICB2YXIgbGFzdCA9IGRvYy5sYXN0TGluZSgpO1xyXG4gICAgaWYgKGNoYW5nZS50by5saW5lID4gbGFzdCkge1xyXG4gICAgICBjaGFuZ2UgPSB7ZnJvbTogY2hhbmdlLmZyb20sIHRvOiBQb3MobGFzdCwgZ2V0TGluZShkb2MsIGxhc3QpLnRleHQubGVuZ3RoKSxcclxuICAgICAgICAgICAgICAgIHRleHQ6IFtjaGFuZ2UudGV4dFswXV0sIG9yaWdpbjogY2hhbmdlLm9yaWdpbn07XHJcbiAgICB9XHJcblxyXG4gICAgY2hhbmdlLnJlbW92ZWQgPSBnZXRCZXR3ZWVuKGRvYywgY2hhbmdlLmZyb20sIGNoYW5nZS50byk7XHJcblxyXG4gICAgaWYgKCFzZWxBZnRlcikgc2VsQWZ0ZXIgPSBjb21wdXRlU2VsQWZ0ZXJDaGFuZ2UoZG9jLCBjaGFuZ2UpO1xyXG4gICAgaWYgKGRvYy5jbSkgbWFrZUNoYW5nZVNpbmdsZURvY0luRWRpdG9yKGRvYy5jbSwgY2hhbmdlLCBzcGFucyk7XHJcbiAgICBlbHNlIHVwZGF0ZURvYyhkb2MsIGNoYW5nZSwgc3BhbnMpO1xyXG4gICAgc2V0U2VsZWN0aW9uTm9VbmRvKGRvYywgc2VsQWZ0ZXIsIHNlbF9kb250U2Nyb2xsKTtcclxuICB9XHJcblxyXG4gIC8vIEhhbmRsZSB0aGUgaW50ZXJhY3Rpb24gb2YgYSBjaGFuZ2UgdG8gYSBkb2N1bWVudCB3aXRoIHRoZSBlZGl0b3JcclxuICAvLyB0aGF0IHRoaXMgZG9jdW1lbnQgaXMgcGFydCBvZi5cclxuICBmdW5jdGlvbiBtYWtlQ2hhbmdlU2luZ2xlRG9jSW5FZGl0b3IoY20sIGNoYW5nZSwgc3BhbnMpIHtcclxuICAgIHZhciBkb2MgPSBjbS5kb2MsIGRpc3BsYXkgPSBjbS5kaXNwbGF5LCBmcm9tID0gY2hhbmdlLmZyb20sIHRvID0gY2hhbmdlLnRvO1xyXG5cclxuICAgIHZhciByZWNvbXB1dGVNYXhMZW5ndGggPSBmYWxzZSwgY2hlY2tXaWR0aFN0YXJ0ID0gZnJvbS5saW5lO1xyXG4gICAgaWYgKCFjbS5vcHRpb25zLmxpbmVXcmFwcGluZykge1xyXG4gICAgICBjaGVja1dpZHRoU3RhcnQgPSBsaW5lTm8odmlzdWFsTGluZShnZXRMaW5lKGRvYywgZnJvbS5saW5lKSkpO1xyXG4gICAgICBkb2MuaXRlcihjaGVja1dpZHRoU3RhcnQsIHRvLmxpbmUgKyAxLCBmdW5jdGlvbihsaW5lKSB7XHJcbiAgICAgICAgaWYgKGxpbmUgPT0gZGlzcGxheS5tYXhMaW5lKSB7XHJcbiAgICAgICAgICByZWNvbXB1dGVNYXhMZW5ndGggPSB0cnVlO1xyXG4gICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgfVxyXG4gICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBpZiAoZG9jLnNlbC5jb250YWlucyhjaGFuZ2UuZnJvbSwgY2hhbmdlLnRvKSA+IC0xKVxyXG4gICAgICBzaWduYWxDdXJzb3JBY3Rpdml0eShjbSk7XHJcblxyXG4gICAgdXBkYXRlRG9jKGRvYywgY2hhbmdlLCBzcGFucywgZXN0aW1hdGVIZWlnaHQoY20pKTtcclxuXHJcbiAgICBpZiAoIWNtLm9wdGlvbnMubGluZVdyYXBwaW5nKSB7XHJcbiAgICAgIGRvYy5pdGVyKGNoZWNrV2lkdGhTdGFydCwgZnJvbS5saW5lICsgY2hhbmdlLnRleHQubGVuZ3RoLCBmdW5jdGlvbihsaW5lKSB7XHJcbiAgICAgICAgdmFyIGxlbiA9IGxpbmVMZW5ndGgobGluZSk7XHJcbiAgICAgICAgaWYgKGxlbiA+IGRpc3BsYXkubWF4TGluZUxlbmd0aCkge1xyXG4gICAgICAgICAgZGlzcGxheS5tYXhMaW5lID0gbGluZTtcclxuICAgICAgICAgIGRpc3BsYXkubWF4TGluZUxlbmd0aCA9IGxlbjtcclxuICAgICAgICAgIGRpc3BsYXkubWF4TGluZUNoYW5nZWQgPSB0cnVlO1xyXG4gICAgICAgICAgcmVjb21wdXRlTWF4TGVuZ3RoID0gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgICB9KTtcclxuICAgICAgaWYgKHJlY29tcHV0ZU1heExlbmd0aCkgY20uY3VyT3AudXBkYXRlTWF4TGluZSA9IHRydWU7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gQWRqdXN0IGZyb250aWVyLCBzY2hlZHVsZSB3b3JrZXJcclxuICAgIGRvYy5mcm9udGllciA9IE1hdGgubWluKGRvYy5mcm9udGllciwgZnJvbS5saW5lKTtcclxuICAgIHN0YXJ0V29ya2VyKGNtLCA0MDApO1xyXG5cclxuICAgIHZhciBsZW5kaWZmID0gY2hhbmdlLnRleHQubGVuZ3RoIC0gKHRvLmxpbmUgLSBmcm9tLmxpbmUpIC0gMTtcclxuICAgIC8vIFJlbWVtYmVyIHRoYXQgdGhlc2UgbGluZXMgY2hhbmdlZCwgZm9yIHVwZGF0aW5nIHRoZSBkaXNwbGF5XHJcbiAgICBpZiAoZnJvbS5saW5lID09IHRvLmxpbmUgJiYgY2hhbmdlLnRleHQubGVuZ3RoID09IDEgJiYgIWlzV2hvbGVMaW5lVXBkYXRlKGNtLmRvYywgY2hhbmdlKSlcclxuICAgICAgcmVnTGluZUNoYW5nZShjbSwgZnJvbS5saW5lLCBcInRleHRcIik7XHJcbiAgICBlbHNlXHJcbiAgICAgIHJlZ0NoYW5nZShjbSwgZnJvbS5saW5lLCB0by5saW5lICsgMSwgbGVuZGlmZik7XHJcblxyXG4gICAgdmFyIGNoYW5nZXNIYW5kbGVyID0gaGFzSGFuZGxlcihjbSwgXCJjaGFuZ2VzXCIpLCBjaGFuZ2VIYW5kbGVyID0gaGFzSGFuZGxlcihjbSwgXCJjaGFuZ2VcIik7XHJcbiAgICBpZiAoY2hhbmdlSGFuZGxlciB8fCBjaGFuZ2VzSGFuZGxlcikge1xyXG4gICAgICB2YXIgb2JqID0ge1xyXG4gICAgICAgIGZyb206IGZyb20sIHRvOiB0byxcclxuICAgICAgICB0ZXh0OiBjaGFuZ2UudGV4dCxcclxuICAgICAgICByZW1vdmVkOiBjaGFuZ2UucmVtb3ZlZCxcclxuICAgICAgICBvcmlnaW46IGNoYW5nZS5vcmlnaW5cclxuICAgICAgfTtcclxuICAgICAgaWYgKGNoYW5nZUhhbmRsZXIpIHNpZ25hbExhdGVyKGNtLCBcImNoYW5nZVwiLCBjbSwgb2JqKTtcclxuICAgICAgaWYgKGNoYW5nZXNIYW5kbGVyKSAoY20uY3VyT3AuY2hhbmdlT2JqcyB8fCAoY20uY3VyT3AuY2hhbmdlT2JqcyA9IFtdKSkucHVzaChvYmopO1xyXG4gICAgfVxyXG4gICAgY20uZGlzcGxheS5zZWxGb3JDb250ZXh0TWVudSA9IG51bGw7XHJcbiAgfVxyXG5cclxuICBmdW5jdGlvbiByZXBsYWNlUmFuZ2UoZG9jLCBjb2RlLCBmcm9tLCB0bywgb3JpZ2luKSB7XHJcbiAgICBpZiAoIXRvKSB0byA9IGZyb207XHJcbiAgICBpZiAoY21wKHRvLCBmcm9tKSA8IDApIHsgdmFyIHRtcCA9IHRvOyB0byA9IGZyb207IGZyb20gPSB0bXA7IH1cclxuICAgIGlmICh0eXBlb2YgY29kZSA9PSBcInN0cmluZ1wiKSBjb2RlID0gc3BsaXRMaW5lcyhjb2RlKTtcclxuICAgIG1ha2VDaGFuZ2UoZG9jLCB7ZnJvbTogZnJvbSwgdG86IHRvLCB0ZXh0OiBjb2RlLCBvcmlnaW46IG9yaWdpbn0pO1xyXG4gIH1cclxuXHJcbiAgLy8gU0NST0xMSU5HIFRISU5HUyBJTlRPIFZJRVdcclxuXHJcbiAgLy8gSWYgYW4gZWRpdG9yIHNpdHMgb24gdGhlIHRvcCBvciBib3R0b20gb2YgdGhlIHdpbmRvdywgcGFydGlhbGx5XHJcbiAgLy8gc2Nyb2xsZWQgb3V0IG9mIHZpZXcsIHRoaXMgZW5zdXJlcyB0aGF0IHRoZSBjdXJzb3IgaXMgdmlzaWJsZS5cclxuICBmdW5jdGlvbiBtYXliZVNjcm9sbFdpbmRvdyhjbSwgY29vcmRzKSB7XHJcbiAgICB2YXIgZGlzcGxheSA9IGNtLmRpc3BsYXksIGJveCA9IGRpc3BsYXkuc2l6ZXIuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCksIGRvU2Nyb2xsID0gbnVsbDtcclxuICAgIGlmIChjb29yZHMudG9wICsgYm94LnRvcCA8IDApIGRvU2Nyb2xsID0gdHJ1ZTtcclxuICAgIGVsc2UgaWYgKGNvb3Jkcy5ib3R0b20gKyBib3gudG9wID4gKHdpbmRvdy5pbm5lckhlaWdodCB8fCBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuY2xpZW50SGVpZ2h0KSkgZG9TY3JvbGwgPSBmYWxzZTtcclxuICAgIGlmIChkb1Njcm9sbCAhPSBudWxsICYmICFwaGFudG9tKSB7XHJcbiAgICAgIHZhciBzY3JvbGxOb2RlID0gZWx0KFwiZGl2XCIsIFwiXFx1MjAwYlwiLCBudWxsLCBcInBvc2l0aW9uOiBhYnNvbHV0ZTsgdG9wOiBcIiArXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgIChjb29yZHMudG9wIC0gZGlzcGxheS52aWV3T2Zmc2V0IC0gcGFkZGluZ1RvcChjbS5kaXNwbGF5KSkgKyBcInB4OyBoZWlnaHQ6IFwiICtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgKGNvb3Jkcy5ib3R0b20gLSBjb29yZHMudG9wICsgc2Nyb2xsZXJDdXRPZmYpICsgXCJweDsgbGVmdDogXCIgK1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICBjb29yZHMubGVmdCArIFwicHg7IHdpZHRoOiAycHg7XCIpO1xyXG4gICAgICBjbS5kaXNwbGF5LmxpbmVTcGFjZS5hcHBlbmRDaGlsZChzY3JvbGxOb2RlKTtcclxuICAgICAgc2Nyb2xsTm9kZS5zY3JvbGxJbnRvVmlldyhkb1Njcm9sbCk7XHJcbiAgICAgIGNtLmRpc3BsYXkubGluZVNwYWNlLnJlbW92ZUNoaWxkKHNjcm9sbE5vZGUpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLy8gU2Nyb2xsIGEgZ2l2ZW4gcG9zaXRpb24gaW50byB2aWV3IChpbW1lZGlhdGVseSksIHZlcmlmeWluZyB0aGF0XHJcbiAgLy8gaXQgYWN0dWFsbHkgYmVjYW1lIHZpc2libGUgKGFzIGxpbmUgaGVpZ2h0cyBhcmUgYWNjdXJhdGVseVxyXG4gIC8vIG1lYXN1cmVkLCB0aGUgcG9zaXRpb24gb2Ygc29tZXRoaW5nIG1heSAnZHJpZnQnIGR1cmluZyBkcmF3aW5nKS5cclxuICBmdW5jdGlvbiBzY3JvbGxQb3NJbnRvVmlldyhjbSwgcG9zLCBlbmQsIG1hcmdpbikge1xyXG4gICAgaWYgKG1hcmdpbiA9PSBudWxsKSBtYXJnaW4gPSAwO1xyXG4gICAgZm9yICg7Oykge1xyXG4gICAgICB2YXIgY2hhbmdlZCA9IGZhbHNlLCBjb29yZHMgPSBjdXJzb3JDb29yZHMoY20sIHBvcyk7XHJcbiAgICAgIHZhciBlbmRDb29yZHMgPSAhZW5kIHx8IGVuZCA9PSBwb3MgPyBjb29yZHMgOiBjdXJzb3JDb29yZHMoY20sIGVuZCk7XHJcbiAgICAgIHZhciBzY3JvbGxQb3MgPSBjYWxjdWxhdGVTY3JvbGxQb3MoY20sIE1hdGgubWluKGNvb3Jkcy5sZWZ0LCBlbmRDb29yZHMubGVmdCksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgTWF0aC5taW4oY29vcmRzLnRvcCwgZW5kQ29vcmRzLnRvcCkgLSBtYXJnaW4sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgTWF0aC5tYXgoY29vcmRzLmxlZnQsIGVuZENvb3Jkcy5sZWZ0KSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBNYXRoLm1heChjb29yZHMuYm90dG9tLCBlbmRDb29yZHMuYm90dG9tKSArIG1hcmdpbik7XHJcbiAgICAgIHZhciBzdGFydFRvcCA9IGNtLmRvYy5zY3JvbGxUb3AsIHN0YXJ0TGVmdCA9IGNtLmRvYy5zY3JvbGxMZWZ0O1xyXG4gICAgICBpZiAoc2Nyb2xsUG9zLnNjcm9sbFRvcCAhPSBudWxsKSB7XHJcbiAgICAgICAgc2V0U2Nyb2xsVG9wKGNtLCBzY3JvbGxQb3Muc2Nyb2xsVG9wKTtcclxuICAgICAgICBpZiAoTWF0aC5hYnMoY20uZG9jLnNjcm9sbFRvcCAtIHN0YXJ0VG9wKSA+IDEpIGNoYW5nZWQgPSB0cnVlO1xyXG4gICAgICB9XHJcbiAgICAgIGlmIChzY3JvbGxQb3Muc2Nyb2xsTGVmdCAhPSBudWxsKSB7XHJcbiAgICAgICAgc2V0U2Nyb2xsTGVmdChjbSwgc2Nyb2xsUG9zLnNjcm9sbExlZnQpO1xyXG4gICAgICAgIGlmIChNYXRoLmFicyhjbS5kb2Muc2Nyb2xsTGVmdCAtIHN0YXJ0TGVmdCkgPiAxKSBjaGFuZ2VkID0gdHJ1ZTtcclxuICAgICAgfVxyXG4gICAgICBpZiAoIWNoYW5nZWQpIHJldHVybiBjb29yZHM7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvLyBTY3JvbGwgYSBnaXZlbiBzZXQgb2YgY29vcmRpbmF0ZXMgaW50byB2aWV3IChpbW1lZGlhdGVseSkuXHJcbiAgZnVuY3Rpb24gc2Nyb2xsSW50b1ZpZXcoY20sIHgxLCB5MSwgeDIsIHkyKSB7XHJcbiAgICB2YXIgc2Nyb2xsUG9zID0gY2FsY3VsYXRlU2Nyb2xsUG9zKGNtLCB4MSwgeTEsIHgyLCB5Mik7XHJcbiAgICBpZiAoc2Nyb2xsUG9zLnNjcm9sbFRvcCAhPSBudWxsKSBzZXRTY3JvbGxUb3AoY20sIHNjcm9sbFBvcy5zY3JvbGxUb3ApO1xyXG4gICAgaWYgKHNjcm9sbFBvcy5zY3JvbGxMZWZ0ICE9IG51bGwpIHNldFNjcm9sbExlZnQoY20sIHNjcm9sbFBvcy5zY3JvbGxMZWZ0KTtcclxuICB9XHJcblxyXG4gIC8vIENhbGN1bGF0ZSBhIG5ldyBzY3JvbGwgcG9zaXRpb24gbmVlZGVkIHRvIHNjcm9sbCB0aGUgZ2l2ZW5cclxuICAvLyByZWN0YW5nbGUgaW50byB2aWV3LiBSZXR1cm5zIGFuIG9iamVjdCB3aXRoIHNjcm9sbFRvcCBhbmRcclxuICAvLyBzY3JvbGxMZWZ0IHByb3BlcnRpZXMuIFdoZW4gdGhlc2UgYXJlIHVuZGVmaW5lZCwgdGhlXHJcbiAgLy8gdmVydGljYWwvaG9yaXpvbnRhbCBwb3NpdGlvbiBkb2VzIG5vdCBuZWVkIHRvIGJlIGFkanVzdGVkLlxyXG4gIGZ1bmN0aW9uIGNhbGN1bGF0ZVNjcm9sbFBvcyhjbSwgeDEsIHkxLCB4MiwgeTIpIHtcclxuICAgIHZhciBkaXNwbGF5ID0gY20uZGlzcGxheSwgc25hcE1hcmdpbiA9IHRleHRIZWlnaHQoY20uZGlzcGxheSk7XHJcbiAgICBpZiAoeTEgPCAwKSB5MSA9IDA7XHJcbiAgICB2YXIgc2NyZWVudG9wID0gY20uY3VyT3AgJiYgY20uY3VyT3Auc2Nyb2xsVG9wICE9IG51bGwgPyBjbS5jdXJPcC5zY3JvbGxUb3AgOiBkaXNwbGF5LnNjcm9sbGVyLnNjcm9sbFRvcDtcclxuICAgIHZhciBzY3JlZW4gPSBkaXNwbGF5LnNjcm9sbGVyLmNsaWVudEhlaWdodCAtIHNjcm9sbGVyQ3V0T2ZmLCByZXN1bHQgPSB7fTtcclxuICAgIGlmICh5MiAtIHkxID4gc2NyZWVuKSB5MiA9IHkxICsgc2NyZWVuO1xyXG4gICAgdmFyIGRvY0JvdHRvbSA9IGNtLmRvYy5oZWlnaHQgKyBwYWRkaW5nVmVydChkaXNwbGF5KTtcclxuICAgIHZhciBhdFRvcCA9IHkxIDwgc25hcE1hcmdpbiwgYXRCb3R0b20gPSB5MiA+IGRvY0JvdHRvbSAtIHNuYXBNYXJnaW47XHJcbiAgICBpZiAoeTEgPCBzY3JlZW50b3ApIHtcclxuICAgICAgcmVzdWx0LnNjcm9sbFRvcCA9IGF0VG9wID8gMCA6IHkxO1xyXG4gICAgfSBlbHNlIGlmICh5MiA+IHNjcmVlbnRvcCArIHNjcmVlbikge1xyXG4gICAgICB2YXIgbmV3VG9wID0gTWF0aC5taW4oeTEsIChhdEJvdHRvbSA/IGRvY0JvdHRvbSA6IHkyKSAtIHNjcmVlbik7XHJcbiAgICAgIGlmIChuZXdUb3AgIT0gc2NyZWVudG9wKSByZXN1bHQuc2Nyb2xsVG9wID0gbmV3VG9wO1xyXG4gICAgfVxyXG5cclxuICAgIHZhciBzY3JlZW5sZWZ0ID0gY20uY3VyT3AgJiYgY20uY3VyT3Auc2Nyb2xsTGVmdCAhPSBudWxsID8gY20uY3VyT3Auc2Nyb2xsTGVmdCA6IGRpc3BsYXkuc2Nyb2xsZXIuc2Nyb2xsTGVmdDtcclxuICAgIHZhciBzY3JlZW53ID0gZGlzcGxheS5zY3JvbGxlci5jbGllbnRXaWR0aCAtIHNjcm9sbGVyQ3V0T2ZmIC0gZGlzcGxheS5ndXR0ZXJzLm9mZnNldFdpZHRoO1xyXG4gICAgdmFyIHRvb1dpZGUgPSB4MiAtIHgxID4gc2NyZWVudztcclxuICAgIGlmICh0b29XaWRlKSB4MiA9IHkxICsgc2NyZWVuO1xyXG4gICAgaWYgKHgxIDwgMTApXHJcbiAgICAgIHJlc3VsdC5zY3JvbGxMZWZ0ID0gMDtcclxuICAgIGVsc2UgaWYgKHgxIDwgc2NyZWVubGVmdClcclxuICAgICAgcmVzdWx0LnNjcm9sbExlZnQgPSBNYXRoLm1heCgwLCB4MSAtICh0b29XaWRlID8gMCA6IDEwKSk7XHJcbiAgICBlbHNlIGlmICh4MiA+IHNjcmVlbncgKyBzY3JlZW5sZWZ0IC0gMylcclxuICAgICAgcmVzdWx0LnNjcm9sbExlZnQgPSB4MiArICh0b29XaWRlID8gMCA6IDEwKSAtIHNjcmVlbnc7XHJcblxyXG4gICAgcmV0dXJuIHJlc3VsdDtcclxuICB9XHJcblxyXG4gIC8vIFN0b3JlIGEgcmVsYXRpdmUgYWRqdXN0bWVudCB0byB0aGUgc2Nyb2xsIHBvc2l0aW9uIGluIHRoZSBjdXJyZW50XHJcbiAgLy8gb3BlcmF0aW9uICh0byBiZSBhcHBsaWVkIHdoZW4gdGhlIG9wZXJhdGlvbiBmaW5pc2hlcykuXHJcbiAgZnVuY3Rpb24gYWRkVG9TY3JvbGxQb3MoY20sIGxlZnQsIHRvcCkge1xyXG4gICAgaWYgKGxlZnQgIT0gbnVsbCB8fCB0b3AgIT0gbnVsbCkgcmVzb2x2ZVNjcm9sbFRvUG9zKGNtKTtcclxuICAgIGlmIChsZWZ0ICE9IG51bGwpXHJcbiAgICAgIGNtLmN1ck9wLnNjcm9sbExlZnQgPSAoY20uY3VyT3Auc2Nyb2xsTGVmdCA9PSBudWxsID8gY20uZG9jLnNjcm9sbExlZnQgOiBjbS5jdXJPcC5zY3JvbGxMZWZ0KSArIGxlZnQ7XHJcbiAgICBpZiAodG9wICE9IG51bGwpXHJcbiAgICAgIGNtLmN1ck9wLnNjcm9sbFRvcCA9IChjbS5jdXJPcC5zY3JvbGxUb3AgPT0gbnVsbCA/IGNtLmRvYy5zY3JvbGxUb3AgOiBjbS5jdXJPcC5zY3JvbGxUb3ApICsgdG9wO1xyXG4gIH1cclxuXHJcbiAgLy8gTWFrZSBzdXJlIHRoYXQgYXQgdGhlIGVuZCBvZiB0aGUgb3BlcmF0aW9uIHRoZSBjdXJyZW50IGN1cnNvciBpc1xyXG4gIC8vIHNob3duLlxyXG4gIGZ1bmN0aW9uIGVuc3VyZUN1cnNvclZpc2libGUoY20pIHtcclxuICAgIHJlc29sdmVTY3JvbGxUb1BvcyhjbSk7XHJcbiAgICB2YXIgY3VyID0gY20uZ2V0Q3Vyc29yKCksIGZyb20gPSBjdXIsIHRvID0gY3VyO1xyXG4gICAgaWYgKCFjbS5vcHRpb25zLmxpbmVXcmFwcGluZykge1xyXG4gICAgICBmcm9tID0gY3VyLmNoID8gUG9zKGN1ci5saW5lLCBjdXIuY2ggLSAxKSA6IGN1cjtcclxuICAgICAgdG8gPSBQb3MoY3VyLmxpbmUsIGN1ci5jaCArIDEpO1xyXG4gICAgfVxyXG4gICAgY20uY3VyT3Auc2Nyb2xsVG9Qb3MgPSB7ZnJvbTogZnJvbSwgdG86IHRvLCBtYXJnaW46IGNtLm9wdGlvbnMuY3Vyc29yU2Nyb2xsTWFyZ2luLCBpc0N1cnNvcjogdHJ1ZX07XHJcbiAgfVxyXG5cclxuICAvLyBXaGVuIGFuIG9wZXJhdGlvbiBoYXMgaXRzIHNjcm9sbFRvUG9zIHByb3BlcnR5IHNldCwgYW5kIGFub3RoZXJcclxuICAvLyBzY3JvbGwgYWN0aW9uIGlzIGFwcGxpZWQgYmVmb3JlIHRoZSBlbmQgb2YgdGhlIG9wZXJhdGlvbiwgdGhpc1xyXG4gIC8vICdzaW11bGF0ZXMnIHNjcm9sbGluZyB0aGF0IHBvc2l0aW9uIGludG8gdmlldyBpbiBhIGNoZWFwIHdheSwgc29cclxuICAvLyB0aGF0IHRoZSBlZmZlY3Qgb2YgaW50ZXJtZWRpYXRlIHNjcm9sbCBjb21tYW5kcyBpcyBub3QgaWdub3JlZC5cclxuICBmdW5jdGlvbiByZXNvbHZlU2Nyb2xsVG9Qb3MoY20pIHtcclxuICAgIHZhciByYW5nZSA9IGNtLmN1ck9wLnNjcm9sbFRvUG9zO1xyXG4gICAgaWYgKHJhbmdlKSB7XHJcbiAgICAgIGNtLmN1ck9wLnNjcm9sbFRvUG9zID0gbnVsbDtcclxuICAgICAgdmFyIGZyb20gPSBlc3RpbWF0ZUNvb3JkcyhjbSwgcmFuZ2UuZnJvbSksIHRvID0gZXN0aW1hdGVDb29yZHMoY20sIHJhbmdlLnRvKTtcclxuICAgICAgdmFyIHNQb3MgPSBjYWxjdWxhdGVTY3JvbGxQb3MoY20sIE1hdGgubWluKGZyb20ubGVmdCwgdG8ubGVmdCksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIE1hdGgubWluKGZyb20udG9wLCB0by50b3ApIC0gcmFuZ2UubWFyZ2luLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBNYXRoLm1heChmcm9tLnJpZ2h0LCB0by5yaWdodCksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIE1hdGgubWF4KGZyb20uYm90dG9tLCB0by5ib3R0b20pICsgcmFuZ2UubWFyZ2luKTtcclxuICAgICAgY20uc2Nyb2xsVG8oc1Bvcy5zY3JvbGxMZWZ0LCBzUG9zLnNjcm9sbFRvcCk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvLyBBUEkgVVRJTElUSUVTXHJcblxyXG4gIC8vIEluZGVudCB0aGUgZ2l2ZW4gbGluZS4gVGhlIGhvdyBwYXJhbWV0ZXIgY2FuIGJlIFwic21hcnRcIixcclxuICAvLyBcImFkZFwiL251bGwsIFwic3VidHJhY3RcIiwgb3IgXCJwcmV2XCIuIFdoZW4gYWdncmVzc2l2ZSBpcyBmYWxzZVxyXG4gIC8vICh0eXBpY2FsbHkgc2V0IHRvIHRydWUgZm9yIGZvcmNlZCBzaW5nbGUtbGluZSBpbmRlbnRzKSwgZW1wdHlcclxuICAvLyBsaW5lcyBhcmUgbm90IGluZGVudGVkLCBhbmQgcGxhY2VzIHdoZXJlIHRoZSBtb2RlIHJldHVybnMgUGFzc1xyXG4gIC8vIGFyZSBsZWZ0IGFsb25lLlxyXG4gIGZ1bmN0aW9uIGluZGVudExpbmUoY20sIG4sIGhvdywgYWdncmVzc2l2ZSkge1xyXG4gICAgdmFyIGRvYyA9IGNtLmRvYywgc3RhdGU7XHJcbiAgICBpZiAoaG93ID09IG51bGwpIGhvdyA9IFwiYWRkXCI7XHJcbiAgICBpZiAoaG93ID09IFwic21hcnRcIikge1xyXG4gICAgICAvLyBGYWxsIGJhY2sgdG8gXCJwcmV2XCIgd2hlbiB0aGUgbW9kZSBkb2Vzbid0IGhhdmUgYW4gaW5kZW50YXRpb25cclxuICAgICAgLy8gbWV0aG9kLlxyXG4gICAgICBpZiAoIWRvYy5tb2RlLmluZGVudCkgaG93ID0gXCJwcmV2XCI7XHJcbiAgICAgIGVsc2Ugc3RhdGUgPSBnZXRTdGF0ZUJlZm9yZShjbSwgbik7XHJcbiAgICB9XHJcblxyXG4gICAgdmFyIHRhYlNpemUgPSBjbS5vcHRpb25zLnRhYlNpemU7XHJcbiAgICB2YXIgbGluZSA9IGdldExpbmUoZG9jLCBuKSwgY3VyU3BhY2UgPSBjb3VudENvbHVtbihsaW5lLnRleHQsIG51bGwsIHRhYlNpemUpO1xyXG4gICAgaWYgKGxpbmUuc3RhdGVBZnRlcikgbGluZS5zdGF0ZUFmdGVyID0gbnVsbDtcclxuICAgIHZhciBjdXJTcGFjZVN0cmluZyA9IGxpbmUudGV4dC5tYXRjaCgvXlxccyovKVswXSwgaW5kZW50YXRpb247XHJcbiAgICBpZiAoIWFnZ3Jlc3NpdmUgJiYgIS9cXFMvLnRlc3QobGluZS50ZXh0KSkge1xyXG4gICAgICBpbmRlbnRhdGlvbiA9IDA7XHJcbiAgICAgIGhvdyA9IFwibm90XCI7XHJcbiAgICB9IGVsc2UgaWYgKGhvdyA9PSBcInNtYXJ0XCIpIHtcclxuICAgICAgaW5kZW50YXRpb24gPSBkb2MubW9kZS5pbmRlbnQoc3RhdGUsIGxpbmUudGV4dC5zbGljZShjdXJTcGFjZVN0cmluZy5sZW5ndGgpLCBsaW5lLnRleHQpO1xyXG4gICAgICBpZiAoaW5kZW50YXRpb24gPT0gUGFzcyB8fCBpbmRlbnRhdGlvbiA+IDE1MCkge1xyXG4gICAgICAgIGlmICghYWdncmVzc2l2ZSkgcmV0dXJuO1xyXG4gICAgICAgIGhvdyA9IFwicHJldlwiO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICBpZiAoaG93ID09IFwicHJldlwiKSB7XHJcbiAgICAgIGlmIChuID4gZG9jLmZpcnN0KSBpbmRlbnRhdGlvbiA9IGNvdW50Q29sdW1uKGdldExpbmUoZG9jLCBuLTEpLnRleHQsIG51bGwsIHRhYlNpemUpO1xyXG4gICAgICBlbHNlIGluZGVudGF0aW9uID0gMDtcclxuICAgIH0gZWxzZSBpZiAoaG93ID09IFwiYWRkXCIpIHtcclxuICAgICAgaW5kZW50YXRpb24gPSBjdXJTcGFjZSArIGNtLm9wdGlvbnMuaW5kZW50VW5pdDtcclxuICAgIH0gZWxzZSBpZiAoaG93ID09IFwic3VidHJhY3RcIikge1xyXG4gICAgICBpbmRlbnRhdGlvbiA9IGN1clNwYWNlIC0gY20ub3B0aW9ucy5pbmRlbnRVbml0O1xyXG4gICAgfSBlbHNlIGlmICh0eXBlb2YgaG93ID09IFwibnVtYmVyXCIpIHtcclxuICAgICAgaW5kZW50YXRpb24gPSBjdXJTcGFjZSArIGhvdztcclxuICAgIH1cclxuICAgIGluZGVudGF0aW9uID0gTWF0aC5tYXgoMCwgaW5kZW50YXRpb24pO1xyXG5cclxuICAgIHZhciBpbmRlbnRTdHJpbmcgPSBcIlwiLCBwb3MgPSAwO1xyXG4gICAgaWYgKGNtLm9wdGlvbnMuaW5kZW50V2l0aFRhYnMpXHJcbiAgICAgIGZvciAodmFyIGkgPSBNYXRoLmZsb29yKGluZGVudGF0aW9uIC8gdGFiU2l6ZSk7IGk7IC0taSkge3BvcyArPSB0YWJTaXplOyBpbmRlbnRTdHJpbmcgKz0gXCJcXHRcIjt9XHJcbiAgICBpZiAocG9zIDwgaW5kZW50YXRpb24pIGluZGVudFN0cmluZyArPSBzcGFjZVN0cihpbmRlbnRhdGlvbiAtIHBvcyk7XHJcblxyXG4gICAgaWYgKGluZGVudFN0cmluZyAhPSBjdXJTcGFjZVN0cmluZykge1xyXG4gICAgICByZXBsYWNlUmFuZ2UoZG9jLCBpbmRlbnRTdHJpbmcsIFBvcyhuLCAwKSwgUG9zKG4sIGN1clNwYWNlU3RyaW5nLmxlbmd0aCksIFwiK2lucHV0XCIpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgLy8gRW5zdXJlIHRoYXQsIGlmIHRoZSBjdXJzb3Igd2FzIGluIHRoZSB3aGl0ZXNwYWNlIGF0IHRoZSBzdGFydFxyXG4gICAgICAvLyBvZiB0aGUgbGluZSwgaXQgaXMgbW92ZWQgdG8gdGhlIGVuZCBvZiB0aGF0IHNwYWNlLlxyXG4gICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGRvYy5zZWwucmFuZ2VzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgdmFyIHJhbmdlID0gZG9jLnNlbC5yYW5nZXNbaV07XHJcbiAgICAgICAgaWYgKHJhbmdlLmhlYWQubGluZSA9PSBuICYmIHJhbmdlLmhlYWQuY2ggPCBjdXJTcGFjZVN0cmluZy5sZW5ndGgpIHtcclxuICAgICAgICAgIHZhciBwb3MgPSBQb3MobiwgY3VyU3BhY2VTdHJpbmcubGVuZ3RoKTtcclxuICAgICAgICAgIHJlcGxhY2VPbmVTZWxlY3Rpb24oZG9jLCBpLCBuZXcgUmFuZ2UocG9zLCBwb3MpKTtcclxuICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgbGluZS5zdGF0ZUFmdGVyID0gbnVsbDtcclxuICB9XHJcblxyXG4gIC8vIFV0aWxpdHkgZm9yIGFwcGx5aW5nIGEgY2hhbmdlIHRvIGEgbGluZSBieSBoYW5kbGUgb3IgbnVtYmVyLFxyXG4gIC8vIHJldHVybmluZyB0aGUgbnVtYmVyIGFuZCBvcHRpb25hbGx5IHJlZ2lzdGVyaW5nIHRoZSBsaW5lIGFzXHJcbiAgLy8gY2hhbmdlZC5cclxuICBmdW5jdGlvbiBjaGFuZ2VMaW5lKGRvYywgaGFuZGxlLCBjaGFuZ2VUeXBlLCBvcCkge1xyXG4gICAgdmFyIG5vID0gaGFuZGxlLCBsaW5lID0gaGFuZGxlO1xyXG4gICAgaWYgKHR5cGVvZiBoYW5kbGUgPT0gXCJudW1iZXJcIikgbGluZSA9IGdldExpbmUoZG9jLCBjbGlwTGluZShkb2MsIGhhbmRsZSkpO1xyXG4gICAgZWxzZSBubyA9IGxpbmVObyhoYW5kbGUpO1xyXG4gICAgaWYgKG5vID09IG51bGwpIHJldHVybiBudWxsO1xyXG4gICAgaWYgKG9wKGxpbmUsIG5vKSAmJiBkb2MuY20pIHJlZ0xpbmVDaGFuZ2UoZG9jLmNtLCBubywgY2hhbmdlVHlwZSk7XHJcbiAgICByZXR1cm4gbGluZTtcclxuICB9XHJcblxyXG4gIC8vIEhlbHBlciBmb3IgZGVsZXRpbmcgdGV4dCBuZWFyIHRoZSBzZWxlY3Rpb24ocyksIHVzZWQgdG8gaW1wbGVtZW50XHJcbiAgLy8gYmFja3NwYWNlLCBkZWxldGUsIGFuZCBzaW1pbGFyIGZ1bmN0aW9uYWxpdHkuXHJcbiAgZnVuY3Rpb24gZGVsZXRlTmVhclNlbGVjdGlvbihjbSwgY29tcHV0ZSkge1xyXG4gICAgdmFyIHJhbmdlcyA9IGNtLmRvYy5zZWwucmFuZ2VzLCBraWxsID0gW107XHJcbiAgICAvLyBCdWlsZCB1cCBhIHNldCBvZiByYW5nZXMgdG8ga2lsbCBmaXJzdCwgbWVyZ2luZyBvdmVybGFwcGluZ1xyXG4gICAgLy8gcmFuZ2VzLlxyXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCByYW5nZXMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgdmFyIHRvS2lsbCA9IGNvbXB1dGUocmFuZ2VzW2ldKTtcclxuICAgICAgd2hpbGUgKGtpbGwubGVuZ3RoICYmIGNtcCh0b0tpbGwuZnJvbSwgbHN0KGtpbGwpLnRvKSA8PSAwKSB7XHJcbiAgICAgICAgdmFyIHJlcGxhY2VkID0ga2lsbC5wb3AoKTtcclxuICAgICAgICBpZiAoY21wKHJlcGxhY2VkLmZyb20sIHRvS2lsbC5mcm9tKSA8IDApIHtcclxuICAgICAgICAgIHRvS2lsbC5mcm9tID0gcmVwbGFjZWQuZnJvbTtcclxuICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgICBraWxsLnB1c2godG9LaWxsKTtcclxuICAgIH1cclxuICAgIC8vIE5leHQsIHJlbW92ZSB0aG9zZSBhY3R1YWwgcmFuZ2VzLlxyXG4gICAgcnVuSW5PcChjbSwgZnVuY3Rpb24oKSB7XHJcbiAgICAgIGZvciAodmFyIGkgPSBraWxsLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKVxyXG4gICAgICAgIHJlcGxhY2VSYW5nZShjbS5kb2MsIFwiXCIsIGtpbGxbaV0uZnJvbSwga2lsbFtpXS50bywgXCIrZGVsZXRlXCIpO1xyXG4gICAgICBlbnN1cmVDdXJzb3JWaXNpYmxlKGNtKTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgLy8gVXNlZCBmb3IgaG9yaXpvbnRhbCByZWxhdGl2ZSBtb3Rpb24uIERpciBpcyAtMSBvciAxIChsZWZ0IG9yXHJcbiAgLy8gcmlnaHQpLCB1bml0IGNhbiBiZSBcImNoYXJcIiwgXCJjb2x1bW5cIiAobGlrZSBjaGFyLCBidXQgZG9lc24ndFxyXG4gIC8vIGNyb3NzIGxpbmUgYm91bmRhcmllcyksIFwid29yZFwiIChhY3Jvc3MgbmV4dCB3b3JkKSwgb3IgXCJncm91cFwiICh0b1xyXG4gIC8vIHRoZSBzdGFydCBvZiBuZXh0IGdyb3VwIG9mIHdvcmQgb3Igbm9uLXdvcmQtbm9uLXdoaXRlc3BhY2VcclxuICAvLyBjaGFycykuIFRoZSB2aXN1YWxseSBwYXJhbSBjb250cm9scyB3aGV0aGVyLCBpbiByaWdodC10by1sZWZ0XHJcbiAgLy8gdGV4dCwgZGlyZWN0aW9uIDEgbWVhbnMgdG8gbW92ZSB0b3dhcmRzIHRoZSBuZXh0IGluZGV4IGluIHRoZVxyXG4gIC8vIHN0cmluZywgb3IgdG93YXJkcyB0aGUgY2hhcmFjdGVyIHRvIHRoZSByaWdodCBvZiB0aGUgY3VycmVudFxyXG4gIC8vIHBvc2l0aW9uLiBUaGUgcmVzdWx0aW5nIHBvc2l0aW9uIHdpbGwgaGF2ZSBhIGhpdFNpZGU9dHJ1ZVxyXG4gIC8vIHByb3BlcnR5IGlmIGl0IHJlYWNoZWQgdGhlIGVuZCBvZiB0aGUgZG9jdW1lbnQuXHJcbiAgZnVuY3Rpb24gZmluZFBvc0goZG9jLCBwb3MsIGRpciwgdW5pdCwgdmlzdWFsbHkpIHtcclxuICAgIHZhciBsaW5lID0gcG9zLmxpbmUsIGNoID0gcG9zLmNoLCBvcmlnRGlyID0gZGlyO1xyXG4gICAgdmFyIGxpbmVPYmogPSBnZXRMaW5lKGRvYywgbGluZSk7XHJcbiAgICB2YXIgcG9zc2libGUgPSB0cnVlO1xyXG4gICAgZnVuY3Rpb24gZmluZE5leHRMaW5lKCkge1xyXG4gICAgICB2YXIgbCA9IGxpbmUgKyBkaXI7XHJcbiAgICAgIGlmIChsIDwgZG9jLmZpcnN0IHx8IGwgPj0gZG9jLmZpcnN0ICsgZG9jLnNpemUpIHJldHVybiAocG9zc2libGUgPSBmYWxzZSk7XHJcbiAgICAgIGxpbmUgPSBsO1xyXG4gICAgICByZXR1cm4gbGluZU9iaiA9IGdldExpbmUoZG9jLCBsKTtcclxuICAgIH1cclxuICAgIGZ1bmN0aW9uIG1vdmVPbmNlKGJvdW5kVG9MaW5lKSB7XHJcbiAgICAgIHZhciBuZXh0ID0gKHZpc3VhbGx5ID8gbW92ZVZpc3VhbGx5IDogbW92ZUxvZ2ljYWxseSkobGluZU9iaiwgY2gsIGRpciwgdHJ1ZSk7XHJcbiAgICAgIGlmIChuZXh0ID09IG51bGwpIHtcclxuICAgICAgICBpZiAoIWJvdW5kVG9MaW5lICYmIGZpbmROZXh0TGluZSgpKSB7XHJcbiAgICAgICAgICBpZiAodmlzdWFsbHkpIGNoID0gKGRpciA8IDAgPyBsaW5lUmlnaHQgOiBsaW5lTGVmdCkobGluZU9iaik7XHJcbiAgICAgICAgICBlbHNlIGNoID0gZGlyIDwgMCA/IGxpbmVPYmoudGV4dC5sZW5ndGggOiAwO1xyXG4gICAgICAgIH0gZWxzZSByZXR1cm4gKHBvc3NpYmxlID0gZmFsc2UpO1xyXG4gICAgICB9IGVsc2UgY2ggPSBuZXh0O1xyXG4gICAgICByZXR1cm4gdHJ1ZTtcclxuICAgIH1cclxuXHJcbiAgICBpZiAodW5pdCA9PSBcImNoYXJcIikgbW92ZU9uY2UoKTtcclxuICAgIGVsc2UgaWYgKHVuaXQgPT0gXCJjb2x1bW5cIikgbW92ZU9uY2UodHJ1ZSk7XHJcbiAgICBlbHNlIGlmICh1bml0ID09IFwid29yZFwiIHx8IHVuaXQgPT0gXCJncm91cFwiKSB7XHJcbiAgICAgIHZhciBzYXdUeXBlID0gbnVsbCwgZ3JvdXAgPSB1bml0ID09IFwiZ3JvdXBcIjtcclxuICAgICAgdmFyIGhlbHBlciA9IGRvYy5jbSAmJiBkb2MuY20uZ2V0SGVscGVyKHBvcywgXCJ3b3JkQ2hhcnNcIik7XHJcbiAgICAgIGZvciAodmFyIGZpcnN0ID0gdHJ1ZTs7IGZpcnN0ID0gZmFsc2UpIHtcclxuICAgICAgICBpZiAoZGlyIDwgMCAmJiAhbW92ZU9uY2UoIWZpcnN0KSkgYnJlYWs7XHJcbiAgICAgICAgdmFyIGN1ciA9IGxpbmVPYmoudGV4dC5jaGFyQXQoY2gpIHx8IFwiXFxuXCI7XHJcbiAgICAgICAgdmFyIHR5cGUgPSBpc1dvcmRDaGFyKGN1ciwgaGVscGVyKSA/IFwid1wiXHJcbiAgICAgICAgICA6IGdyb3VwICYmIGN1ciA9PSBcIlxcblwiID8gXCJuXCJcclxuICAgICAgICAgIDogIWdyb3VwIHx8IC9cXHMvLnRlc3QoY3VyKSA/IG51bGxcclxuICAgICAgICAgIDogXCJwXCI7XHJcbiAgICAgICAgaWYgKGdyb3VwICYmICFmaXJzdCAmJiAhdHlwZSkgdHlwZSA9IFwic1wiO1xyXG4gICAgICAgIGlmIChzYXdUeXBlICYmIHNhd1R5cGUgIT0gdHlwZSkge1xyXG4gICAgICAgICAgaWYgKGRpciA8IDApIHtkaXIgPSAxOyBtb3ZlT25jZSgpO31cclxuICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKHR5cGUpIHNhd1R5cGUgPSB0eXBlO1xyXG4gICAgICAgIGlmIChkaXIgPiAwICYmICFtb3ZlT25jZSghZmlyc3QpKSBicmVhaztcclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgdmFyIHJlc3VsdCA9IHNraXBBdG9taWMoZG9jLCBQb3MobGluZSwgY2gpLCBvcmlnRGlyLCB0cnVlKTtcclxuICAgIGlmICghcG9zc2libGUpIHJlc3VsdC5oaXRTaWRlID0gdHJ1ZTtcclxuICAgIHJldHVybiByZXN1bHQ7XHJcbiAgfVxyXG5cclxuICAvLyBGb3IgcmVsYXRpdmUgdmVydGljYWwgbW92ZW1lbnQuIERpciBtYXkgYmUgLTEgb3IgMS4gVW5pdCBjYW4gYmVcclxuICAvLyBcInBhZ2VcIiBvciBcImxpbmVcIi4gVGhlIHJlc3VsdGluZyBwb3NpdGlvbiB3aWxsIGhhdmUgYSBoaXRTaWRlPXRydWVcclxuICAvLyBwcm9wZXJ0eSBpZiBpdCByZWFjaGVkIHRoZSBlbmQgb2YgdGhlIGRvY3VtZW50LlxyXG4gIGZ1bmN0aW9uIGZpbmRQb3NWKGNtLCBwb3MsIGRpciwgdW5pdCkge1xyXG4gICAgdmFyIGRvYyA9IGNtLmRvYywgeCA9IHBvcy5sZWZ0LCB5O1xyXG4gICAgaWYgKHVuaXQgPT0gXCJwYWdlXCIpIHtcclxuICAgICAgdmFyIHBhZ2VTaXplID0gTWF0aC5taW4oY20uZGlzcGxheS53cmFwcGVyLmNsaWVudEhlaWdodCwgd2luZG93LmlubmVySGVpZ2h0IHx8IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5jbGllbnRIZWlnaHQpO1xyXG4gICAgICB5ID0gcG9zLnRvcCArIGRpciAqIChwYWdlU2l6ZSAtIChkaXIgPCAwID8gMS41IDogLjUpICogdGV4dEhlaWdodChjbS5kaXNwbGF5KSk7XHJcbiAgICB9IGVsc2UgaWYgKHVuaXQgPT0gXCJsaW5lXCIpIHtcclxuICAgICAgeSA9IGRpciA+IDAgPyBwb3MuYm90dG9tICsgMyA6IHBvcy50b3AgLSAzO1xyXG4gICAgfVxyXG4gICAgZm9yICg7Oykge1xyXG4gICAgICB2YXIgdGFyZ2V0ID0gY29vcmRzQ2hhcihjbSwgeCwgeSk7XHJcbiAgICAgIGlmICghdGFyZ2V0Lm91dHNpZGUpIGJyZWFrO1xyXG4gICAgICBpZiAoZGlyIDwgMCA/IHkgPD0gMCA6IHkgPj0gZG9jLmhlaWdodCkgeyB0YXJnZXQuaGl0U2lkZSA9IHRydWU7IGJyZWFrOyB9XHJcbiAgICAgIHkgKz0gZGlyICogNTtcclxuICAgIH1cclxuICAgIHJldHVybiB0YXJnZXQ7XHJcbiAgfVxyXG5cclxuICAvLyBFRElUT1IgTUVUSE9EU1xyXG5cclxuICAvLyBUaGUgcHVibGljbHkgdmlzaWJsZSBBUEkuIE5vdGUgdGhhdCBtZXRob2RPcChmKSBtZWFuc1xyXG4gIC8vICd3cmFwIGYgaW4gYW4gb3BlcmF0aW9uLCBwZXJmb3JtZWQgb24gaXRzIGB0aGlzYCBwYXJhbWV0ZXInLlxyXG5cclxuICAvLyBUaGlzIGlzIG5vdCB0aGUgY29tcGxldGUgc2V0IG9mIGVkaXRvciBtZXRob2RzLiBNb3N0IG9mIHRoZVxyXG4gIC8vIG1ldGhvZHMgZGVmaW5lZCBvbiB0aGUgRG9jIHR5cGUgYXJlIGFsc28gaW5qZWN0ZWQgaW50b1xyXG4gIC8vIENvZGVNaXJyb3IucHJvdG90eXBlLCBmb3IgYmFja3dhcmRzIGNvbXBhdGliaWxpdHkgYW5kXHJcbiAgLy8gY29udmVuaWVuY2UuXHJcblxyXG4gIENvZGVNaXJyb3IucHJvdG90eXBlID0ge1xyXG4gICAgY29uc3RydWN0b3I6IENvZGVNaXJyb3IsXHJcbiAgICBmb2N1czogZnVuY3Rpb24oKXt3aW5kb3cuZm9jdXMoKTsgZm9jdXNJbnB1dCh0aGlzKTsgZmFzdFBvbGwodGhpcyk7fSxcclxuXHJcbiAgICBzZXRPcHRpb246IGZ1bmN0aW9uKG9wdGlvbiwgdmFsdWUpIHtcclxuICAgICAgdmFyIG9wdGlvbnMgPSB0aGlzLm9wdGlvbnMsIG9sZCA9IG9wdGlvbnNbb3B0aW9uXTtcclxuICAgICAgaWYgKG9wdGlvbnNbb3B0aW9uXSA9PSB2YWx1ZSAmJiBvcHRpb24gIT0gXCJtb2RlXCIpIHJldHVybjtcclxuICAgICAgb3B0aW9uc1tvcHRpb25dID0gdmFsdWU7XHJcbiAgICAgIGlmIChvcHRpb25IYW5kbGVycy5oYXNPd25Qcm9wZXJ0eShvcHRpb24pKVxyXG4gICAgICAgIG9wZXJhdGlvbih0aGlzLCBvcHRpb25IYW5kbGVyc1tvcHRpb25dKSh0aGlzLCB2YWx1ZSwgb2xkKTtcclxuICAgIH0sXHJcblxyXG4gICAgZ2V0T3B0aW9uOiBmdW5jdGlvbihvcHRpb24pIHtyZXR1cm4gdGhpcy5vcHRpb25zW29wdGlvbl07fSxcclxuICAgIGdldERvYzogZnVuY3Rpb24oKSB7cmV0dXJuIHRoaXMuZG9jO30sXHJcblxyXG4gICAgYWRkS2V5TWFwOiBmdW5jdGlvbihtYXAsIGJvdHRvbSkge1xyXG4gICAgICB0aGlzLnN0YXRlLmtleU1hcHNbYm90dG9tID8gXCJwdXNoXCIgOiBcInVuc2hpZnRcIl0obWFwKTtcclxuICAgIH0sXHJcbiAgICByZW1vdmVLZXlNYXA6IGZ1bmN0aW9uKG1hcCkge1xyXG4gICAgICB2YXIgbWFwcyA9IHRoaXMuc3RhdGUua2V5TWFwcztcclxuICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBtYXBzLmxlbmd0aDsgKytpKVxyXG4gICAgICAgIGlmIChtYXBzW2ldID09IG1hcCB8fCAodHlwZW9mIG1hcHNbaV0gIT0gXCJzdHJpbmdcIiAmJiBtYXBzW2ldLm5hbWUgPT0gbWFwKSkge1xyXG4gICAgICAgICAgbWFwcy5zcGxpY2UoaSwgMSk7XHJcbiAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICB9XHJcbiAgICB9LFxyXG5cclxuICAgIGFkZE92ZXJsYXk6IG1ldGhvZE9wKGZ1bmN0aW9uKHNwZWMsIG9wdGlvbnMpIHtcclxuICAgICAgdmFyIG1vZGUgPSBzcGVjLnRva2VuID8gc3BlYyA6IENvZGVNaXJyb3IuZ2V0TW9kZSh0aGlzLm9wdGlvbnMsIHNwZWMpO1xyXG4gICAgICBpZiAobW9kZS5zdGFydFN0YXRlKSB0aHJvdyBuZXcgRXJyb3IoXCJPdmVybGF5cyBtYXkgbm90IGJlIHN0YXRlZnVsLlwiKTtcclxuICAgICAgdGhpcy5zdGF0ZS5vdmVybGF5cy5wdXNoKHttb2RlOiBtb2RlLCBtb2RlU3BlYzogc3BlYywgb3BhcXVlOiBvcHRpb25zICYmIG9wdGlvbnMub3BhcXVlfSk7XHJcbiAgICAgIHRoaXMuc3RhdGUubW9kZUdlbisrO1xyXG4gICAgICByZWdDaGFuZ2UodGhpcyk7XHJcbiAgICB9KSxcclxuICAgIHJlbW92ZU92ZXJsYXk6IG1ldGhvZE9wKGZ1bmN0aW9uKHNwZWMpIHtcclxuICAgICAgdmFyIG92ZXJsYXlzID0gdGhpcy5zdGF0ZS5vdmVybGF5cztcclxuICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBvdmVybGF5cy5sZW5ndGg7ICsraSkge1xyXG4gICAgICAgIHZhciBjdXIgPSBvdmVybGF5c1tpXS5tb2RlU3BlYztcclxuICAgICAgICBpZiAoY3VyID09IHNwZWMgfHwgdHlwZW9mIHNwZWMgPT0gXCJzdHJpbmdcIiAmJiBjdXIubmFtZSA9PSBzcGVjKSB7XHJcbiAgICAgICAgICBvdmVybGF5cy5zcGxpY2UoaSwgMSk7XHJcbiAgICAgICAgICB0aGlzLnN0YXRlLm1vZGVHZW4rKztcclxuICAgICAgICAgIHJlZ0NoYW5nZSh0aGlzKTtcclxuICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH0pLFxyXG5cclxuICAgIGluZGVudExpbmU6IG1ldGhvZE9wKGZ1bmN0aW9uKG4sIGRpciwgYWdncmVzc2l2ZSkge1xyXG4gICAgICBpZiAodHlwZW9mIGRpciAhPSBcInN0cmluZ1wiICYmIHR5cGVvZiBkaXIgIT0gXCJudW1iZXJcIikge1xyXG4gICAgICAgIGlmIChkaXIgPT0gbnVsbCkgZGlyID0gdGhpcy5vcHRpb25zLnNtYXJ0SW5kZW50ID8gXCJzbWFydFwiIDogXCJwcmV2XCI7XHJcbiAgICAgICAgZWxzZSBkaXIgPSBkaXIgPyBcImFkZFwiIDogXCJzdWJ0cmFjdFwiO1xyXG4gICAgICB9XHJcbiAgICAgIGlmIChpc0xpbmUodGhpcy5kb2MsIG4pKSBpbmRlbnRMaW5lKHRoaXMsIG4sIGRpciwgYWdncmVzc2l2ZSk7XHJcbiAgICB9KSxcclxuICAgIGluZGVudFNlbGVjdGlvbjogbWV0aG9kT3AoZnVuY3Rpb24oaG93KSB7XHJcbiAgICAgIHZhciByYW5nZXMgPSB0aGlzLmRvYy5zZWwucmFuZ2VzLCBlbmQgPSAtMTtcclxuICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCByYW5nZXMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICB2YXIgcmFuZ2UgPSByYW5nZXNbaV07XHJcbiAgICAgICAgaWYgKCFyYW5nZS5lbXB0eSgpKSB7XHJcbiAgICAgICAgICB2YXIgZnJvbSA9IHJhbmdlLmZyb20oKSwgdG8gPSByYW5nZS50bygpO1xyXG4gICAgICAgICAgdmFyIHN0YXJ0ID0gTWF0aC5tYXgoZW5kLCBmcm9tLmxpbmUpO1xyXG4gICAgICAgICAgZW5kID0gTWF0aC5taW4odGhpcy5sYXN0TGluZSgpLCB0by5saW5lIC0gKHRvLmNoID8gMCA6IDEpKSArIDE7XHJcbiAgICAgICAgICBmb3IgKHZhciBqID0gc3RhcnQ7IGogPCBlbmQ7ICsrailcclxuICAgICAgICAgICAgaW5kZW50TGluZSh0aGlzLCBqLCBob3cpO1xyXG4gICAgICAgICAgdmFyIG5ld1JhbmdlcyA9IHRoaXMuZG9jLnNlbC5yYW5nZXM7XHJcbiAgICAgICAgICBpZiAoZnJvbS5jaCA9PSAwICYmIHJhbmdlcy5sZW5ndGggPT0gbmV3UmFuZ2VzLmxlbmd0aCAmJiBuZXdSYW5nZXNbaV0uZnJvbSgpLmNoID4gMClcclxuICAgICAgICAgICAgcmVwbGFjZU9uZVNlbGVjdGlvbih0aGlzLmRvYywgaSwgbmV3IFJhbmdlKGZyb20sIG5ld1Jhbmdlc1tpXS50bygpKSwgc2VsX2RvbnRTY3JvbGwpO1xyXG4gICAgICAgIH0gZWxzZSBpZiAocmFuZ2UuaGVhZC5saW5lID4gZW5kKSB7XHJcbiAgICAgICAgICBpbmRlbnRMaW5lKHRoaXMsIHJhbmdlLmhlYWQubGluZSwgaG93LCB0cnVlKTtcclxuICAgICAgICAgIGVuZCA9IHJhbmdlLmhlYWQubGluZTtcclxuICAgICAgICAgIGlmIChpID09IHRoaXMuZG9jLnNlbC5wcmltSW5kZXgpIGVuc3VyZUN1cnNvclZpc2libGUodGhpcyk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9KSxcclxuXHJcbiAgICAvLyBGZXRjaCB0aGUgcGFyc2VyIHRva2VuIGZvciBhIGdpdmVuIGNoYXJhY3Rlci4gVXNlZnVsIGZvciBoYWNrc1xyXG4gICAgLy8gdGhhdCB3YW50IHRvIGluc3BlY3QgdGhlIG1vZGUgc3RhdGUgKHNheSwgZm9yIGNvbXBsZXRpb24pLlxyXG4gICAgZ2V0VG9rZW5BdDogZnVuY3Rpb24ocG9zLCBwcmVjaXNlKSB7XHJcbiAgICAgIHZhciBkb2MgPSB0aGlzLmRvYztcclxuICAgICAgcG9zID0gY2xpcFBvcyhkb2MsIHBvcyk7XHJcbiAgICAgIHZhciBzdGF0ZSA9IGdldFN0YXRlQmVmb3JlKHRoaXMsIHBvcy5saW5lLCBwcmVjaXNlKSwgbW9kZSA9IHRoaXMuZG9jLm1vZGU7XHJcbiAgICAgIHZhciBsaW5lID0gZ2V0TGluZShkb2MsIHBvcy5saW5lKTtcclxuICAgICAgdmFyIHN0cmVhbSA9IG5ldyBTdHJpbmdTdHJlYW0obGluZS50ZXh0LCB0aGlzLm9wdGlvbnMudGFiU2l6ZSk7XHJcbiAgICAgIHdoaWxlIChzdHJlYW0ucG9zIDwgcG9zLmNoICYmICFzdHJlYW0uZW9sKCkpIHtcclxuICAgICAgICBzdHJlYW0uc3RhcnQgPSBzdHJlYW0ucG9zO1xyXG4gICAgICAgIHZhciBzdHlsZSA9IHJlYWRUb2tlbihtb2RlLCBzdHJlYW0sIHN0YXRlKTtcclxuICAgICAgfVxyXG4gICAgICByZXR1cm4ge3N0YXJ0OiBzdHJlYW0uc3RhcnQsXHJcbiAgICAgICAgICAgICAgZW5kOiBzdHJlYW0ucG9zLFxyXG4gICAgICAgICAgICAgIHN0cmluZzogc3RyZWFtLmN1cnJlbnQoKSxcclxuICAgICAgICAgICAgICB0eXBlOiBzdHlsZSB8fCBudWxsLFxyXG4gICAgICAgICAgICAgIHN0YXRlOiBzdGF0ZX07XHJcbiAgICB9LFxyXG5cclxuICAgIGdldFRva2VuVHlwZUF0OiBmdW5jdGlvbihwb3MpIHtcclxuICAgICAgcG9zID0gY2xpcFBvcyh0aGlzLmRvYywgcG9zKTtcclxuICAgICAgdmFyIHN0eWxlcyA9IGdldExpbmVTdHlsZXModGhpcywgZ2V0TGluZSh0aGlzLmRvYywgcG9zLmxpbmUpKTtcclxuICAgICAgdmFyIGJlZm9yZSA9IDAsIGFmdGVyID0gKHN0eWxlcy5sZW5ndGggLSAxKSAvIDIsIGNoID0gcG9zLmNoO1xyXG4gICAgICB2YXIgdHlwZTtcclxuICAgICAgaWYgKGNoID09IDApIHR5cGUgPSBzdHlsZXNbMl07XHJcbiAgICAgIGVsc2UgZm9yICg7Oykge1xyXG4gICAgICAgIHZhciBtaWQgPSAoYmVmb3JlICsgYWZ0ZXIpID4+IDE7XHJcbiAgICAgICAgaWYgKChtaWQgPyBzdHlsZXNbbWlkICogMiAtIDFdIDogMCkgPj0gY2gpIGFmdGVyID0gbWlkO1xyXG4gICAgICAgIGVsc2UgaWYgKHN0eWxlc1ttaWQgKiAyICsgMV0gPCBjaCkgYmVmb3JlID0gbWlkICsgMTtcclxuICAgICAgICBlbHNlIHsgdHlwZSA9IHN0eWxlc1ttaWQgKiAyICsgMl07IGJyZWFrOyB9XHJcbiAgICAgIH1cclxuICAgICAgdmFyIGN1dCA9IHR5cGUgPyB0eXBlLmluZGV4T2YoXCJjbS1vdmVybGF5IFwiKSA6IC0xO1xyXG4gICAgICByZXR1cm4gY3V0IDwgMCA/IHR5cGUgOiBjdXQgPT0gMCA/IG51bGwgOiB0eXBlLnNsaWNlKDAsIGN1dCAtIDEpO1xyXG4gICAgfSxcclxuXHJcbiAgICBnZXRNb2RlQXQ6IGZ1bmN0aW9uKHBvcykge1xyXG4gICAgICB2YXIgbW9kZSA9IHRoaXMuZG9jLm1vZGU7XHJcbiAgICAgIGlmICghbW9kZS5pbm5lck1vZGUpIHJldHVybiBtb2RlO1xyXG4gICAgICByZXR1cm4gQ29kZU1pcnJvci5pbm5lck1vZGUobW9kZSwgdGhpcy5nZXRUb2tlbkF0KHBvcykuc3RhdGUpLm1vZGU7XHJcbiAgICB9LFxyXG5cclxuICAgIGdldEhlbHBlcjogZnVuY3Rpb24ocG9zLCB0eXBlKSB7XHJcbiAgICAgIHJldHVybiB0aGlzLmdldEhlbHBlcnMocG9zLCB0eXBlKVswXTtcclxuICAgIH0sXHJcblxyXG4gICAgZ2V0SGVscGVyczogZnVuY3Rpb24ocG9zLCB0eXBlKSB7XHJcbiAgICAgIHZhciBmb3VuZCA9IFtdO1xyXG4gICAgICBpZiAoIWhlbHBlcnMuaGFzT3duUHJvcGVydHkodHlwZSkpIHJldHVybiBoZWxwZXJzO1xyXG4gICAgICB2YXIgaGVscCA9IGhlbHBlcnNbdHlwZV0sIG1vZGUgPSB0aGlzLmdldE1vZGVBdChwb3MpO1xyXG4gICAgICBpZiAodHlwZW9mIG1vZGVbdHlwZV0gPT0gXCJzdHJpbmdcIikge1xyXG4gICAgICAgIGlmIChoZWxwW21vZGVbdHlwZV1dKSBmb3VuZC5wdXNoKGhlbHBbbW9kZVt0eXBlXV0pO1xyXG4gICAgICB9IGVsc2UgaWYgKG1vZGVbdHlwZV0pIHtcclxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IG1vZGVbdHlwZV0ubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgIHZhciB2YWwgPSBoZWxwW21vZGVbdHlwZV1baV1dO1xyXG4gICAgICAgICAgaWYgKHZhbCkgZm91bmQucHVzaCh2YWwpO1xyXG4gICAgICAgIH1cclxuICAgICAgfSBlbHNlIGlmIChtb2RlLmhlbHBlclR5cGUgJiYgaGVscFttb2RlLmhlbHBlclR5cGVdKSB7XHJcbiAgICAgICAgZm91bmQucHVzaChoZWxwW21vZGUuaGVscGVyVHlwZV0pO1xyXG4gICAgICB9IGVsc2UgaWYgKGhlbHBbbW9kZS5uYW1lXSkge1xyXG4gICAgICAgIGZvdW5kLnB1c2goaGVscFttb2RlLm5hbWVdKTtcclxuICAgICAgfVxyXG4gICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGhlbHAuX2dsb2JhbC5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgIHZhciBjdXIgPSBoZWxwLl9nbG9iYWxbaV07XHJcbiAgICAgICAgaWYgKGN1ci5wcmVkKG1vZGUsIHRoaXMpICYmIGluZGV4T2YoZm91bmQsIGN1ci52YWwpID09IC0xKVxyXG4gICAgICAgICAgZm91bmQucHVzaChjdXIudmFsKTtcclxuICAgICAgfVxyXG4gICAgICByZXR1cm4gZm91bmQ7XHJcbiAgICB9LFxyXG5cclxuICAgIGdldFN0YXRlQWZ0ZXI6IGZ1bmN0aW9uKGxpbmUsIHByZWNpc2UpIHtcclxuICAgICAgdmFyIGRvYyA9IHRoaXMuZG9jO1xyXG4gICAgICBsaW5lID0gY2xpcExpbmUoZG9jLCBsaW5lID09IG51bGwgPyBkb2MuZmlyc3QgKyBkb2Muc2l6ZSAtIDE6IGxpbmUpO1xyXG4gICAgICByZXR1cm4gZ2V0U3RhdGVCZWZvcmUodGhpcywgbGluZSArIDEsIHByZWNpc2UpO1xyXG4gICAgfSxcclxuXHJcbiAgICBjdXJzb3JDb29yZHM6IGZ1bmN0aW9uKHN0YXJ0LCBtb2RlKSB7XHJcbiAgICAgIHZhciBwb3MsIHJhbmdlID0gdGhpcy5kb2Muc2VsLnByaW1hcnkoKTtcclxuICAgICAgaWYgKHN0YXJ0ID09IG51bGwpIHBvcyA9IHJhbmdlLmhlYWQ7XHJcbiAgICAgIGVsc2UgaWYgKHR5cGVvZiBzdGFydCA9PSBcIm9iamVjdFwiKSBwb3MgPSBjbGlwUG9zKHRoaXMuZG9jLCBzdGFydCk7XHJcbiAgICAgIGVsc2UgcG9zID0gc3RhcnQgPyByYW5nZS5mcm9tKCkgOiByYW5nZS50bygpO1xyXG4gICAgICByZXR1cm4gY3Vyc29yQ29vcmRzKHRoaXMsIHBvcywgbW9kZSB8fCBcInBhZ2VcIik7XHJcbiAgICB9LFxyXG5cclxuICAgIGNoYXJDb29yZHM6IGZ1bmN0aW9uKHBvcywgbW9kZSkge1xyXG4gICAgICByZXR1cm4gY2hhckNvb3Jkcyh0aGlzLCBjbGlwUG9zKHRoaXMuZG9jLCBwb3MpLCBtb2RlIHx8IFwicGFnZVwiKTtcclxuICAgIH0sXHJcblxyXG4gICAgY29vcmRzQ2hhcjogZnVuY3Rpb24oY29vcmRzLCBtb2RlKSB7XHJcbiAgICAgIGNvb3JkcyA9IGZyb21Db29yZFN5c3RlbSh0aGlzLCBjb29yZHMsIG1vZGUgfHwgXCJwYWdlXCIpO1xyXG4gICAgICByZXR1cm4gY29vcmRzQ2hhcih0aGlzLCBjb29yZHMubGVmdCwgY29vcmRzLnRvcCk7XHJcbiAgICB9LFxyXG5cclxuICAgIGxpbmVBdEhlaWdodDogZnVuY3Rpb24oaGVpZ2h0LCBtb2RlKSB7XHJcbiAgICAgIGhlaWdodCA9IGZyb21Db29yZFN5c3RlbSh0aGlzLCB7dG9wOiBoZWlnaHQsIGxlZnQ6IDB9LCBtb2RlIHx8IFwicGFnZVwiKS50b3A7XHJcbiAgICAgIHJldHVybiBsaW5lQXRIZWlnaHQodGhpcy5kb2MsIGhlaWdodCArIHRoaXMuZGlzcGxheS52aWV3T2Zmc2V0KTtcclxuICAgIH0sXHJcbiAgICBoZWlnaHRBdExpbmU6IGZ1bmN0aW9uKGxpbmUsIG1vZGUpIHtcclxuICAgICAgdmFyIGVuZCA9IGZhbHNlLCBsYXN0ID0gdGhpcy5kb2MuZmlyc3QgKyB0aGlzLmRvYy5zaXplIC0gMTtcclxuICAgICAgaWYgKGxpbmUgPCB0aGlzLmRvYy5maXJzdCkgbGluZSA9IHRoaXMuZG9jLmZpcnN0O1xyXG4gICAgICBlbHNlIGlmIChsaW5lID4gbGFzdCkgeyBsaW5lID0gbGFzdDsgZW5kID0gdHJ1ZTsgfVxyXG4gICAgICB2YXIgbGluZU9iaiA9IGdldExpbmUodGhpcy5kb2MsIGxpbmUpO1xyXG4gICAgICByZXR1cm4gaW50b0Nvb3JkU3lzdGVtKHRoaXMsIGxpbmVPYmosIHt0b3A6IDAsIGxlZnQ6IDB9LCBtb2RlIHx8IFwicGFnZVwiKS50b3AgK1xyXG4gICAgICAgIChlbmQgPyB0aGlzLmRvYy5oZWlnaHQgLSBoZWlnaHRBdExpbmUobGluZU9iaikgOiAwKTtcclxuICAgIH0sXHJcblxyXG4gICAgZGVmYXVsdFRleHRIZWlnaHQ6IGZ1bmN0aW9uKCkgeyByZXR1cm4gdGV4dEhlaWdodCh0aGlzLmRpc3BsYXkpOyB9LFxyXG4gICAgZGVmYXVsdENoYXJXaWR0aDogZnVuY3Rpb24oKSB7IHJldHVybiBjaGFyV2lkdGgodGhpcy5kaXNwbGF5KTsgfSxcclxuXHJcbiAgICBzZXRHdXR0ZXJNYXJrZXI6IG1ldGhvZE9wKGZ1bmN0aW9uKGxpbmUsIGd1dHRlcklELCB2YWx1ZSkge1xyXG4gICAgICByZXR1cm4gY2hhbmdlTGluZSh0aGlzLmRvYywgbGluZSwgXCJndXR0ZXJcIiwgZnVuY3Rpb24obGluZSkge1xyXG4gICAgICAgIHZhciBtYXJrZXJzID0gbGluZS5ndXR0ZXJNYXJrZXJzIHx8IChsaW5lLmd1dHRlck1hcmtlcnMgPSB7fSk7XHJcbiAgICAgICAgbWFya2Vyc1tndXR0ZXJJRF0gPSB2YWx1ZTtcclxuICAgICAgICBpZiAoIXZhbHVlICYmIGlzRW1wdHkobWFya2VycykpIGxpbmUuZ3V0dGVyTWFya2VycyA9IG51bGw7XHJcbiAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgIH0pO1xyXG4gICAgfSksXHJcblxyXG4gICAgY2xlYXJHdXR0ZXI6IG1ldGhvZE9wKGZ1bmN0aW9uKGd1dHRlcklEKSB7XHJcbiAgICAgIHZhciBjbSA9IHRoaXMsIGRvYyA9IGNtLmRvYywgaSA9IGRvYy5maXJzdDtcclxuICAgICAgZG9jLml0ZXIoZnVuY3Rpb24obGluZSkge1xyXG4gICAgICAgIGlmIChsaW5lLmd1dHRlck1hcmtlcnMgJiYgbGluZS5ndXR0ZXJNYXJrZXJzW2d1dHRlcklEXSkge1xyXG4gICAgICAgICAgbGluZS5ndXR0ZXJNYXJrZXJzW2d1dHRlcklEXSA9IG51bGw7XHJcbiAgICAgICAgICByZWdMaW5lQ2hhbmdlKGNtLCBpLCBcImd1dHRlclwiKTtcclxuICAgICAgICAgIGlmIChpc0VtcHR5KGxpbmUuZ3V0dGVyTWFya2VycykpIGxpbmUuZ3V0dGVyTWFya2VycyA9IG51bGw7XHJcbiAgICAgICAgfVxyXG4gICAgICAgICsraTtcclxuICAgICAgfSk7XHJcbiAgICB9KSxcclxuXHJcbiAgICBhZGRMaW5lV2lkZ2V0OiBtZXRob2RPcChmdW5jdGlvbihoYW5kbGUsIG5vZGUsIG9wdGlvbnMpIHtcclxuICAgICAgcmV0dXJuIGFkZExpbmVXaWRnZXQodGhpcywgaGFuZGxlLCBub2RlLCBvcHRpb25zKTtcclxuICAgIH0pLFxyXG5cclxuICAgIHJlbW92ZUxpbmVXaWRnZXQ6IGZ1bmN0aW9uKHdpZGdldCkgeyB3aWRnZXQuY2xlYXIoKTsgfSxcclxuXHJcbiAgICBsaW5lSW5mbzogZnVuY3Rpb24obGluZSkge1xyXG4gICAgICBpZiAodHlwZW9mIGxpbmUgPT0gXCJudW1iZXJcIikge1xyXG4gICAgICAgIGlmICghaXNMaW5lKHRoaXMuZG9jLCBsaW5lKSkgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgdmFyIG4gPSBsaW5lO1xyXG4gICAgICAgIGxpbmUgPSBnZXRMaW5lKHRoaXMuZG9jLCBsaW5lKTtcclxuICAgICAgICBpZiAoIWxpbmUpIHJldHVybiBudWxsO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIHZhciBuID0gbGluZU5vKGxpbmUpO1xyXG4gICAgICAgIGlmIChuID09IG51bGwpIHJldHVybiBudWxsO1xyXG4gICAgICB9XHJcbiAgICAgIHJldHVybiB7bGluZTogbiwgaGFuZGxlOiBsaW5lLCB0ZXh0OiBsaW5lLnRleHQsIGd1dHRlck1hcmtlcnM6IGxpbmUuZ3V0dGVyTWFya2VycyxcclxuICAgICAgICAgICAgICB0ZXh0Q2xhc3M6IGxpbmUudGV4dENsYXNzLCBiZ0NsYXNzOiBsaW5lLmJnQ2xhc3MsIHdyYXBDbGFzczogbGluZS53cmFwQ2xhc3MsXHJcbiAgICAgICAgICAgICAgd2lkZ2V0czogbGluZS53aWRnZXRzfTtcclxuICAgIH0sXHJcblxyXG4gICAgZ2V0Vmlld3BvcnQ6IGZ1bmN0aW9uKCkgeyByZXR1cm4ge2Zyb206IHRoaXMuZGlzcGxheS52aWV3RnJvbSwgdG86IHRoaXMuZGlzcGxheS52aWV3VG99O30sXHJcblxyXG4gICAgYWRkV2lkZ2V0OiBmdW5jdGlvbihwb3MsIG5vZGUsIHNjcm9sbCwgdmVydCwgaG9yaXopIHtcclxuICAgICAgdmFyIGRpc3BsYXkgPSB0aGlzLmRpc3BsYXk7XHJcbiAgICAgIHBvcyA9IGN1cnNvckNvb3Jkcyh0aGlzLCBjbGlwUG9zKHRoaXMuZG9jLCBwb3MpKTtcclxuICAgICAgdmFyIHRvcCA9IHBvcy5ib3R0b20sIGxlZnQgPSBwb3MubGVmdDtcclxuICAgICAgbm9kZS5zdHlsZS5wb3NpdGlvbiA9IFwiYWJzb2x1dGVcIjtcclxuICAgICAgZGlzcGxheS5zaXplci5hcHBlbmRDaGlsZChub2RlKTtcclxuICAgICAgaWYgKHZlcnQgPT0gXCJvdmVyXCIpIHtcclxuICAgICAgICB0b3AgPSBwb3MudG9wO1xyXG4gICAgICB9IGVsc2UgaWYgKHZlcnQgPT0gXCJhYm92ZVwiIHx8IHZlcnQgPT0gXCJuZWFyXCIpIHtcclxuICAgICAgICB2YXIgdnNwYWNlID0gTWF0aC5tYXgoZGlzcGxheS53cmFwcGVyLmNsaWVudEhlaWdodCwgdGhpcy5kb2MuaGVpZ2h0KSxcclxuICAgICAgICBoc3BhY2UgPSBNYXRoLm1heChkaXNwbGF5LnNpemVyLmNsaWVudFdpZHRoLCBkaXNwbGF5LmxpbmVTcGFjZS5jbGllbnRXaWR0aCk7XHJcbiAgICAgICAgLy8gRGVmYXVsdCB0byBwb3NpdGlvbmluZyBhYm92ZSAoaWYgc3BlY2lmaWVkIGFuZCBwb3NzaWJsZSk7IG90aGVyd2lzZSBkZWZhdWx0IHRvIHBvc2l0aW9uaW5nIGJlbG93XHJcbiAgICAgICAgaWYgKCh2ZXJ0ID09ICdhYm92ZScgfHwgcG9zLmJvdHRvbSArIG5vZGUub2Zmc2V0SGVpZ2h0ID4gdnNwYWNlKSAmJiBwb3MudG9wID4gbm9kZS5vZmZzZXRIZWlnaHQpXHJcbiAgICAgICAgICB0b3AgPSBwb3MudG9wIC0gbm9kZS5vZmZzZXRIZWlnaHQ7XHJcbiAgICAgICAgZWxzZSBpZiAocG9zLmJvdHRvbSArIG5vZGUub2Zmc2V0SGVpZ2h0IDw9IHZzcGFjZSlcclxuICAgICAgICAgIHRvcCA9IHBvcy5ib3R0b207XHJcbiAgICAgICAgaWYgKGxlZnQgKyBub2RlLm9mZnNldFdpZHRoID4gaHNwYWNlKVxyXG4gICAgICAgICAgbGVmdCA9IGhzcGFjZSAtIG5vZGUub2Zmc2V0V2lkdGg7XHJcbiAgICAgIH1cclxuICAgICAgbm9kZS5zdHlsZS50b3AgPSB0b3AgKyBcInB4XCI7XHJcbiAgICAgIG5vZGUuc3R5bGUubGVmdCA9IG5vZGUuc3R5bGUucmlnaHQgPSBcIlwiO1xyXG4gICAgICBpZiAoaG9yaXogPT0gXCJyaWdodFwiKSB7XHJcbiAgICAgICAgbGVmdCA9IGRpc3BsYXkuc2l6ZXIuY2xpZW50V2lkdGggLSBub2RlLm9mZnNldFdpZHRoO1xyXG4gICAgICAgIG5vZGUuc3R5bGUucmlnaHQgPSBcIjBweFwiO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIGlmIChob3JpeiA9PSBcImxlZnRcIikgbGVmdCA9IDA7XHJcbiAgICAgICAgZWxzZSBpZiAoaG9yaXogPT0gXCJtaWRkbGVcIikgbGVmdCA9IChkaXNwbGF5LnNpemVyLmNsaWVudFdpZHRoIC0gbm9kZS5vZmZzZXRXaWR0aCkgLyAyO1xyXG4gICAgICAgIG5vZGUuc3R5bGUubGVmdCA9IGxlZnQgKyBcInB4XCI7XHJcbiAgICAgIH1cclxuICAgICAgaWYgKHNjcm9sbClcclxuICAgICAgICBzY3JvbGxJbnRvVmlldyh0aGlzLCBsZWZ0LCB0b3AsIGxlZnQgKyBub2RlLm9mZnNldFdpZHRoLCB0b3AgKyBub2RlLm9mZnNldEhlaWdodCk7XHJcbiAgICB9LFxyXG5cclxuICAgIHRyaWdnZXJPbktleURvd246IG1ldGhvZE9wKG9uS2V5RG93biksXHJcbiAgICB0cmlnZ2VyT25LZXlQcmVzczogbWV0aG9kT3Aob25LZXlQcmVzcyksXHJcbiAgICB0cmlnZ2VyT25LZXlVcDogb25LZXlVcCxcclxuXHJcbiAgICBleGVjQ29tbWFuZDogZnVuY3Rpb24oY21kKSB7XHJcbiAgICAgIGlmIChjb21tYW5kcy5oYXNPd25Qcm9wZXJ0eShjbWQpKVxyXG4gICAgICAgIHJldHVybiBjb21tYW5kc1tjbWRdKHRoaXMpO1xyXG4gICAgfSxcclxuXHJcbiAgICBmaW5kUG9zSDogZnVuY3Rpb24oZnJvbSwgYW1vdW50LCB1bml0LCB2aXN1YWxseSkge1xyXG4gICAgICB2YXIgZGlyID0gMTtcclxuICAgICAgaWYgKGFtb3VudCA8IDApIHsgZGlyID0gLTE7IGFtb3VudCA9IC1hbW91bnQ7IH1cclxuICAgICAgZm9yICh2YXIgaSA9IDAsIGN1ciA9IGNsaXBQb3ModGhpcy5kb2MsIGZyb20pOyBpIDwgYW1vdW50OyArK2kpIHtcclxuICAgICAgICBjdXIgPSBmaW5kUG9zSCh0aGlzLmRvYywgY3VyLCBkaXIsIHVuaXQsIHZpc3VhbGx5KTtcclxuICAgICAgICBpZiAoY3VyLmhpdFNpZGUpIGJyZWFrO1xyXG4gICAgICB9XHJcbiAgICAgIHJldHVybiBjdXI7XHJcbiAgICB9LFxyXG5cclxuICAgIG1vdmVIOiBtZXRob2RPcChmdW5jdGlvbihkaXIsIHVuaXQpIHtcclxuICAgICAgdmFyIGNtID0gdGhpcztcclxuICAgICAgY20uZXh0ZW5kU2VsZWN0aW9uc0J5KGZ1bmN0aW9uKHJhbmdlKSB7XHJcbiAgICAgICAgaWYgKGNtLmRpc3BsYXkuc2hpZnQgfHwgY20uZG9jLmV4dGVuZCB8fCByYW5nZS5lbXB0eSgpKVxyXG4gICAgICAgICAgcmV0dXJuIGZpbmRQb3NIKGNtLmRvYywgcmFuZ2UuaGVhZCwgZGlyLCB1bml0LCBjbS5vcHRpb25zLnJ0bE1vdmVWaXN1YWxseSk7XHJcbiAgICAgICAgZWxzZVxyXG4gICAgICAgICAgcmV0dXJuIGRpciA8IDAgPyByYW5nZS5mcm9tKCkgOiByYW5nZS50bygpO1xyXG4gICAgICB9LCBzZWxfbW92ZSk7XHJcbiAgICB9KSxcclxuXHJcbiAgICBkZWxldGVIOiBtZXRob2RPcChmdW5jdGlvbihkaXIsIHVuaXQpIHtcclxuICAgICAgdmFyIHNlbCA9IHRoaXMuZG9jLnNlbCwgZG9jID0gdGhpcy5kb2M7XHJcbiAgICAgIGlmIChzZWwuc29tZXRoaW5nU2VsZWN0ZWQoKSlcclxuICAgICAgICBkb2MucmVwbGFjZVNlbGVjdGlvbihcIlwiLCBudWxsLCBcIitkZWxldGVcIik7XHJcbiAgICAgIGVsc2VcclxuICAgICAgICBkZWxldGVOZWFyU2VsZWN0aW9uKHRoaXMsIGZ1bmN0aW9uKHJhbmdlKSB7XHJcbiAgICAgICAgICB2YXIgb3RoZXIgPSBmaW5kUG9zSChkb2MsIHJhbmdlLmhlYWQsIGRpciwgdW5pdCwgZmFsc2UpO1xyXG4gICAgICAgICAgcmV0dXJuIGRpciA8IDAgPyB7ZnJvbTogb3RoZXIsIHRvOiByYW5nZS5oZWFkfSA6IHtmcm9tOiByYW5nZS5oZWFkLCB0bzogb3RoZXJ9O1xyXG4gICAgICAgIH0pO1xyXG4gICAgfSksXHJcblxyXG4gICAgZmluZFBvc1Y6IGZ1bmN0aW9uKGZyb20sIGFtb3VudCwgdW5pdCwgZ29hbENvbHVtbikge1xyXG4gICAgICB2YXIgZGlyID0gMSwgeCA9IGdvYWxDb2x1bW47XHJcbiAgICAgIGlmIChhbW91bnQgPCAwKSB7IGRpciA9IC0xOyBhbW91bnQgPSAtYW1vdW50OyB9XHJcbiAgICAgIGZvciAodmFyIGkgPSAwLCBjdXIgPSBjbGlwUG9zKHRoaXMuZG9jLCBmcm9tKTsgaSA8IGFtb3VudDsgKytpKSB7XHJcbiAgICAgICAgdmFyIGNvb3JkcyA9IGN1cnNvckNvb3Jkcyh0aGlzLCBjdXIsIFwiZGl2XCIpO1xyXG4gICAgICAgIGlmICh4ID09IG51bGwpIHggPSBjb29yZHMubGVmdDtcclxuICAgICAgICBlbHNlIGNvb3Jkcy5sZWZ0ID0geDtcclxuICAgICAgICBjdXIgPSBmaW5kUG9zVih0aGlzLCBjb29yZHMsIGRpciwgdW5pdCk7XHJcbiAgICAgICAgaWYgKGN1ci5oaXRTaWRlKSBicmVhaztcclxuICAgICAgfVxyXG4gICAgICByZXR1cm4gY3VyO1xyXG4gICAgfSxcclxuXHJcbiAgICBtb3ZlVjogbWV0aG9kT3AoZnVuY3Rpb24oZGlyLCB1bml0KSB7XHJcbiAgICAgIHZhciBjbSA9IHRoaXMsIGRvYyA9IHRoaXMuZG9jLCBnb2FscyA9IFtdO1xyXG4gICAgICB2YXIgY29sbGFwc2UgPSAhY20uZGlzcGxheS5zaGlmdCAmJiAhZG9jLmV4dGVuZCAmJiBkb2Muc2VsLnNvbWV0aGluZ1NlbGVjdGVkKCk7XHJcbiAgICAgIGRvYy5leHRlbmRTZWxlY3Rpb25zQnkoZnVuY3Rpb24ocmFuZ2UpIHtcclxuICAgICAgICBpZiAoY29sbGFwc2UpXHJcbiAgICAgICAgICByZXR1cm4gZGlyIDwgMCA/IHJhbmdlLmZyb20oKSA6IHJhbmdlLnRvKCk7XHJcbiAgICAgICAgdmFyIGhlYWRQb3MgPSBjdXJzb3JDb29yZHMoY20sIHJhbmdlLmhlYWQsIFwiZGl2XCIpO1xyXG4gICAgICAgIGlmIChyYW5nZS5nb2FsQ29sdW1uICE9IG51bGwpIGhlYWRQb3MubGVmdCA9IHJhbmdlLmdvYWxDb2x1bW47XHJcbiAgICAgICAgZ29hbHMucHVzaChoZWFkUG9zLmxlZnQpO1xyXG4gICAgICAgIHZhciBwb3MgPSBmaW5kUG9zVihjbSwgaGVhZFBvcywgZGlyLCB1bml0KTtcclxuICAgICAgICBpZiAodW5pdCA9PSBcInBhZ2VcIiAmJiByYW5nZSA9PSBkb2Muc2VsLnByaW1hcnkoKSlcclxuICAgICAgICAgIGFkZFRvU2Nyb2xsUG9zKGNtLCBudWxsLCBjaGFyQ29vcmRzKGNtLCBwb3MsIFwiZGl2XCIpLnRvcCAtIGhlYWRQb3MudG9wKTtcclxuICAgICAgICByZXR1cm4gcG9zO1xyXG4gICAgICB9LCBzZWxfbW92ZSk7XHJcbiAgICAgIGlmIChnb2Fscy5sZW5ndGgpIGZvciAodmFyIGkgPSAwOyBpIDwgZG9jLnNlbC5yYW5nZXMubGVuZ3RoOyBpKyspXHJcbiAgICAgICAgZG9jLnNlbC5yYW5nZXNbaV0uZ29hbENvbHVtbiA9IGdvYWxzW2ldO1xyXG4gICAgfSksXHJcblxyXG4gICAgLy8gRmluZCB0aGUgd29yZCBhdCB0aGUgZ2l2ZW4gcG9zaXRpb24gKGFzIHJldHVybmVkIGJ5IGNvb3Jkc0NoYXIpLlxyXG4gICAgZmluZFdvcmRBdDogZnVuY3Rpb24ocG9zKSB7XHJcbiAgICAgIHZhciBkb2MgPSB0aGlzLmRvYywgbGluZSA9IGdldExpbmUoZG9jLCBwb3MubGluZSkudGV4dDtcclxuICAgICAgdmFyIHN0YXJ0ID0gcG9zLmNoLCBlbmQgPSBwb3MuY2g7XHJcbiAgICAgIGlmIChsaW5lKSB7XHJcbiAgICAgICAgdmFyIGhlbHBlciA9IHRoaXMuZ2V0SGVscGVyKHBvcywgXCJ3b3JkQ2hhcnNcIik7XHJcbiAgICAgICAgaWYgKChwb3MueFJlbCA8IDAgfHwgZW5kID09IGxpbmUubGVuZ3RoKSAmJiBzdGFydCkgLS1zdGFydDsgZWxzZSArK2VuZDtcclxuICAgICAgICB2YXIgc3RhcnRDaGFyID0gbGluZS5jaGFyQXQoc3RhcnQpO1xyXG4gICAgICAgIHZhciBjaGVjayA9IGlzV29yZENoYXIoc3RhcnRDaGFyLCBoZWxwZXIpXHJcbiAgICAgICAgICA/IGZ1bmN0aW9uKGNoKSB7IHJldHVybiBpc1dvcmRDaGFyKGNoLCBoZWxwZXIpOyB9XHJcbiAgICAgICAgICA6IC9cXHMvLnRlc3Qoc3RhcnRDaGFyKSA/IGZ1bmN0aW9uKGNoKSB7cmV0dXJuIC9cXHMvLnRlc3QoY2gpO31cclxuICAgICAgICAgIDogZnVuY3Rpb24oY2gpIHtyZXR1cm4gIS9cXHMvLnRlc3QoY2gpICYmICFpc1dvcmRDaGFyKGNoKTt9O1xyXG4gICAgICAgIHdoaWxlIChzdGFydCA+IDAgJiYgY2hlY2sobGluZS5jaGFyQXQoc3RhcnQgLSAxKSkpIC0tc3RhcnQ7XHJcbiAgICAgICAgd2hpbGUgKGVuZCA8IGxpbmUubGVuZ3RoICYmIGNoZWNrKGxpbmUuY2hhckF0KGVuZCkpKSArK2VuZDtcclxuICAgICAgfVxyXG4gICAgICByZXR1cm4gbmV3IFJhbmdlKFBvcyhwb3MubGluZSwgc3RhcnQpLCBQb3MocG9zLmxpbmUsIGVuZCkpO1xyXG4gICAgfSxcclxuXHJcbiAgICB0b2dnbGVPdmVyd3JpdGU6IGZ1bmN0aW9uKHZhbHVlKSB7XHJcbiAgICAgIGlmICh2YWx1ZSAhPSBudWxsICYmIHZhbHVlID09IHRoaXMuc3RhdGUub3ZlcndyaXRlKSByZXR1cm47XHJcbiAgICAgIGlmICh0aGlzLnN0YXRlLm92ZXJ3cml0ZSA9ICF0aGlzLnN0YXRlLm92ZXJ3cml0ZSlcclxuICAgICAgICBhZGRDbGFzcyh0aGlzLmRpc3BsYXkuY3Vyc29yRGl2LCBcIkNvZGVNaXJyb3Itb3ZlcndyaXRlXCIpO1xyXG4gICAgICBlbHNlXHJcbiAgICAgICAgcm1DbGFzcyh0aGlzLmRpc3BsYXkuY3Vyc29yRGl2LCBcIkNvZGVNaXJyb3Itb3ZlcndyaXRlXCIpO1xyXG5cclxuICAgICAgc2lnbmFsKHRoaXMsIFwib3ZlcndyaXRlVG9nZ2xlXCIsIHRoaXMsIHRoaXMuc3RhdGUub3ZlcndyaXRlKTtcclxuICAgIH0sXHJcbiAgICBoYXNGb2N1czogZnVuY3Rpb24oKSB7IHJldHVybiBhY3RpdmVFbHQoKSA9PSB0aGlzLmRpc3BsYXkuaW5wdXQ7IH0sXHJcblxyXG4gICAgc2Nyb2xsVG86IG1ldGhvZE9wKGZ1bmN0aW9uKHgsIHkpIHtcclxuICAgICAgaWYgKHggIT0gbnVsbCB8fCB5ICE9IG51bGwpIHJlc29sdmVTY3JvbGxUb1Bvcyh0aGlzKTtcclxuICAgICAgaWYgKHggIT0gbnVsbCkgdGhpcy5jdXJPcC5zY3JvbGxMZWZ0ID0geDtcclxuICAgICAgaWYgKHkgIT0gbnVsbCkgdGhpcy5jdXJPcC5zY3JvbGxUb3AgPSB5O1xyXG4gICAgfSksXHJcbiAgICBnZXRTY3JvbGxJbmZvOiBmdW5jdGlvbigpIHtcclxuICAgICAgdmFyIHNjcm9sbGVyID0gdGhpcy5kaXNwbGF5LnNjcm9sbGVyLCBjbyA9IHNjcm9sbGVyQ3V0T2ZmO1xyXG4gICAgICByZXR1cm4ge2xlZnQ6IHNjcm9sbGVyLnNjcm9sbExlZnQsIHRvcDogc2Nyb2xsZXIuc2Nyb2xsVG9wLFxyXG4gICAgICAgICAgICAgIGhlaWdodDogc2Nyb2xsZXIuc2Nyb2xsSGVpZ2h0IC0gY28sIHdpZHRoOiBzY3JvbGxlci5zY3JvbGxXaWR0aCAtIGNvLFxyXG4gICAgICAgICAgICAgIGNsaWVudEhlaWdodDogc2Nyb2xsZXIuY2xpZW50SGVpZ2h0IC0gY28sIGNsaWVudFdpZHRoOiBzY3JvbGxlci5jbGllbnRXaWR0aCAtIGNvfTtcclxuICAgIH0sXHJcblxyXG4gICAgc2Nyb2xsSW50b1ZpZXc6IG1ldGhvZE9wKGZ1bmN0aW9uKHJhbmdlLCBtYXJnaW4pIHtcclxuICAgICAgaWYgKHJhbmdlID09IG51bGwpIHtcclxuICAgICAgICByYW5nZSA9IHtmcm9tOiB0aGlzLmRvYy5zZWwucHJpbWFyeSgpLmhlYWQsIHRvOiBudWxsfTtcclxuICAgICAgICBpZiAobWFyZ2luID09IG51bGwpIG1hcmdpbiA9IHRoaXMub3B0aW9ucy5jdXJzb3JTY3JvbGxNYXJnaW47XHJcbiAgICAgIH0gZWxzZSBpZiAodHlwZW9mIHJhbmdlID09IFwibnVtYmVyXCIpIHtcclxuICAgICAgICByYW5nZSA9IHtmcm9tOiBQb3MocmFuZ2UsIDApLCB0bzogbnVsbH07XHJcbiAgICAgIH0gZWxzZSBpZiAocmFuZ2UuZnJvbSA9PSBudWxsKSB7XHJcbiAgICAgICAgcmFuZ2UgPSB7ZnJvbTogcmFuZ2UsIHRvOiBudWxsfTtcclxuICAgICAgfVxyXG4gICAgICBpZiAoIXJhbmdlLnRvKSByYW5nZS50byA9IHJhbmdlLmZyb207XHJcbiAgICAgIHJhbmdlLm1hcmdpbiA9IG1hcmdpbiB8fCAwO1xyXG5cclxuICAgICAgaWYgKHJhbmdlLmZyb20ubGluZSAhPSBudWxsKSB7XHJcbiAgICAgICAgcmVzb2x2ZVNjcm9sbFRvUG9zKHRoaXMpO1xyXG4gICAgICAgIHRoaXMuY3VyT3Auc2Nyb2xsVG9Qb3MgPSByYW5nZTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICB2YXIgc1BvcyA9IGNhbGN1bGF0ZVNjcm9sbFBvcyh0aGlzLCBNYXRoLm1pbihyYW5nZS5mcm9tLmxlZnQsIHJhbmdlLnRvLmxlZnQpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIE1hdGgubWluKHJhbmdlLmZyb20udG9wLCByYW5nZS50by50b3ApIC0gcmFuZ2UubWFyZ2luLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIE1hdGgubWF4KHJhbmdlLmZyb20ucmlnaHQsIHJhbmdlLnRvLnJpZ2h0KSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBNYXRoLm1heChyYW5nZS5mcm9tLmJvdHRvbSwgcmFuZ2UudG8uYm90dG9tKSArIHJhbmdlLm1hcmdpbik7XHJcbiAgICAgICAgdGhpcy5zY3JvbGxUbyhzUG9zLnNjcm9sbExlZnQsIHNQb3Muc2Nyb2xsVG9wKTtcclxuICAgICAgfVxyXG4gICAgfSksXHJcblxyXG4gICAgc2V0U2l6ZTogbWV0aG9kT3AoZnVuY3Rpb24od2lkdGgsIGhlaWdodCkge1xyXG4gICAgICB2YXIgY20gPSB0aGlzO1xyXG4gICAgICBmdW5jdGlvbiBpbnRlcnByZXQodmFsKSB7XHJcbiAgICAgICAgcmV0dXJuIHR5cGVvZiB2YWwgPT0gXCJudW1iZXJcIiB8fCAvXlxcZCskLy50ZXN0KFN0cmluZyh2YWwpKSA/IHZhbCArIFwicHhcIiA6IHZhbDtcclxuICAgICAgfVxyXG4gICAgICBpZiAod2lkdGggIT0gbnVsbCkgY20uZGlzcGxheS53cmFwcGVyLnN0eWxlLndpZHRoID0gaW50ZXJwcmV0KHdpZHRoKTtcclxuICAgICAgaWYgKGhlaWdodCAhPSBudWxsKSBjbS5kaXNwbGF5LndyYXBwZXIuc3R5bGUuaGVpZ2h0ID0gaW50ZXJwcmV0KGhlaWdodCk7XHJcbiAgICAgIGlmIChjbS5vcHRpb25zLmxpbmVXcmFwcGluZykgY2xlYXJMaW5lTWVhc3VyZW1lbnRDYWNoZSh0aGlzKTtcclxuICAgICAgdmFyIGxpbmVObyA9IGNtLmRpc3BsYXkudmlld0Zyb207XHJcbiAgICAgIGNtLmRvYy5pdGVyKGxpbmVObywgY20uZGlzcGxheS52aWV3VG8sIGZ1bmN0aW9uKGxpbmUpIHtcclxuICAgICAgICBpZiAobGluZS53aWRnZXRzKSBmb3IgKHZhciBpID0gMDsgaSA8IGxpbmUud2lkZ2V0cy5sZW5ndGg7IGkrKylcclxuICAgICAgICAgIGlmIChsaW5lLndpZGdldHNbaV0ubm9IU2Nyb2xsKSB7IHJlZ0xpbmVDaGFuZ2UoY20sIGxpbmVObywgXCJ3aWRnZXRcIik7IGJyZWFrOyB9XHJcbiAgICAgICAgKytsaW5lTm87XHJcbiAgICAgIH0pO1xyXG4gICAgICBjbS5jdXJPcC5mb3JjZVVwZGF0ZSA9IHRydWU7XHJcbiAgICAgIHNpZ25hbChjbSwgXCJyZWZyZXNoXCIsIHRoaXMpO1xyXG4gICAgfSksXHJcblxyXG4gICAgb3BlcmF0aW9uOiBmdW5jdGlvbihmKXtyZXR1cm4gcnVuSW5PcCh0aGlzLCBmKTt9LFxyXG5cclxuICAgIHJlZnJlc2g6IG1ldGhvZE9wKGZ1bmN0aW9uKCkge1xyXG4gICAgICB2YXIgb2xkSGVpZ2h0ID0gdGhpcy5kaXNwbGF5LmNhY2hlZFRleHRIZWlnaHQ7XHJcbiAgICAgIHJlZ0NoYW5nZSh0aGlzKTtcclxuICAgICAgdGhpcy5jdXJPcC5mb3JjZVVwZGF0ZSA9IHRydWU7XHJcbiAgICAgIGNsZWFyQ2FjaGVzKHRoaXMpO1xyXG4gICAgICB0aGlzLnNjcm9sbFRvKHRoaXMuZG9jLnNjcm9sbExlZnQsIHRoaXMuZG9jLnNjcm9sbFRvcCk7XHJcbiAgICAgIHVwZGF0ZUd1dHRlclNwYWNlKHRoaXMpO1xyXG4gICAgICBpZiAob2xkSGVpZ2h0ID09IG51bGwgfHwgTWF0aC5hYnMob2xkSGVpZ2h0IC0gdGV4dEhlaWdodCh0aGlzLmRpc3BsYXkpKSA+IC41KVxyXG4gICAgICAgIGVzdGltYXRlTGluZUhlaWdodHModGhpcyk7XHJcbiAgICAgIHNpZ25hbCh0aGlzLCBcInJlZnJlc2hcIiwgdGhpcyk7XHJcbiAgICB9KSxcclxuXHJcbiAgICBzd2FwRG9jOiBtZXRob2RPcChmdW5jdGlvbihkb2MpIHtcclxuICAgICAgdmFyIG9sZCA9IHRoaXMuZG9jO1xyXG4gICAgICBvbGQuY20gPSBudWxsO1xyXG4gICAgICBhdHRhY2hEb2ModGhpcywgZG9jKTtcclxuICAgICAgY2xlYXJDYWNoZXModGhpcyk7XHJcbiAgICAgIHJlc2V0SW5wdXQodGhpcyk7XHJcbiAgICAgIHRoaXMuc2Nyb2xsVG8oZG9jLnNjcm9sbExlZnQsIGRvYy5zY3JvbGxUb3ApO1xyXG4gICAgICB0aGlzLmN1ck9wLmZvcmNlU2Nyb2xsID0gdHJ1ZTtcclxuICAgICAgc2lnbmFsTGF0ZXIodGhpcywgXCJzd2FwRG9jXCIsIHRoaXMsIG9sZCk7XHJcbiAgICAgIHJldHVybiBvbGQ7XHJcbiAgICB9KSxcclxuXHJcbiAgICBnZXRJbnB1dEZpZWxkOiBmdW5jdGlvbigpe3JldHVybiB0aGlzLmRpc3BsYXkuaW5wdXQ7fSxcclxuICAgIGdldFdyYXBwZXJFbGVtZW50OiBmdW5jdGlvbigpe3JldHVybiB0aGlzLmRpc3BsYXkud3JhcHBlcjt9LFxyXG4gICAgZ2V0U2Nyb2xsZXJFbGVtZW50OiBmdW5jdGlvbigpe3JldHVybiB0aGlzLmRpc3BsYXkuc2Nyb2xsZXI7fSxcclxuICAgIGdldEd1dHRlckVsZW1lbnQ6IGZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZGlzcGxheS5ndXR0ZXJzO31cclxuICB9O1xyXG4gIGV2ZW50TWl4aW4oQ29kZU1pcnJvcik7XHJcblxyXG4gIC8vIE9QVElPTiBERUZBVUxUU1xyXG5cclxuICAvLyBUaGUgZGVmYXVsdCBjb25maWd1cmF0aW9uIG9wdGlvbnMuXHJcbiAgdmFyIGRlZmF1bHRzID0gQ29kZU1pcnJvci5kZWZhdWx0cyA9IHt9O1xyXG4gIC8vIEZ1bmN0aW9ucyB0byBydW4gd2hlbiBvcHRpb25zIGFyZSBjaGFuZ2VkLlxyXG4gIHZhciBvcHRpb25IYW5kbGVycyA9IENvZGVNaXJyb3Iub3B0aW9uSGFuZGxlcnMgPSB7fTtcclxuXHJcbiAgZnVuY3Rpb24gb3B0aW9uKG5hbWUsIGRlZmx0LCBoYW5kbGUsIG5vdE9uSW5pdCkge1xyXG4gICAgQ29kZU1pcnJvci5kZWZhdWx0c1tuYW1lXSA9IGRlZmx0O1xyXG4gICAgaWYgKGhhbmRsZSkgb3B0aW9uSGFuZGxlcnNbbmFtZV0gPVxyXG4gICAgICBub3RPbkluaXQgPyBmdW5jdGlvbihjbSwgdmFsLCBvbGQpIHtpZiAob2xkICE9IEluaXQpIGhhbmRsZShjbSwgdmFsLCBvbGQpO30gOiBoYW5kbGU7XHJcbiAgfVxyXG5cclxuICAvLyBQYXNzZWQgdG8gb3B0aW9uIGhhbmRsZXJzIHdoZW4gdGhlcmUgaXMgbm8gb2xkIHZhbHVlLlxyXG4gIHZhciBJbml0ID0gQ29kZU1pcnJvci5Jbml0ID0ge3RvU3RyaW5nOiBmdW5jdGlvbigpe3JldHVybiBcIkNvZGVNaXJyb3IuSW5pdFwiO319O1xyXG5cclxuICAvLyBUaGVzZSB0d28gYXJlLCBvbiBpbml0LCBjYWxsZWQgZnJvbSB0aGUgY29uc3RydWN0b3IgYmVjYXVzZSB0aGV5XHJcbiAgLy8gaGF2ZSB0byBiZSBpbml0aWFsaXplZCBiZWZvcmUgdGhlIGVkaXRvciBjYW4gc3RhcnQgYXQgYWxsLlxyXG4gIG9wdGlvbihcInZhbHVlXCIsIFwiXCIsIGZ1bmN0aW9uKGNtLCB2YWwpIHtcclxuICAgIGNtLnNldFZhbHVlKHZhbCk7XHJcbiAgfSwgdHJ1ZSk7XHJcbiAgb3B0aW9uKFwibW9kZVwiLCBudWxsLCBmdW5jdGlvbihjbSwgdmFsKSB7XHJcbiAgICBjbS5kb2MubW9kZU9wdGlvbiA9IHZhbDtcclxuICAgIGxvYWRNb2RlKGNtKTtcclxuICB9LCB0cnVlKTtcclxuXHJcbiAgb3B0aW9uKFwiaW5kZW50VW5pdFwiLCAyLCBsb2FkTW9kZSwgdHJ1ZSk7XHJcbiAgb3B0aW9uKFwiaW5kZW50V2l0aFRhYnNcIiwgZmFsc2UpO1xyXG4gIG9wdGlvbihcInNtYXJ0SW5kZW50XCIsIHRydWUpO1xyXG4gIG9wdGlvbihcInRhYlNpemVcIiwgNCwgZnVuY3Rpb24oY20pIHtcclxuICAgIHJlc2V0TW9kZVN0YXRlKGNtKTtcclxuICAgIGNsZWFyQ2FjaGVzKGNtKTtcclxuICAgIHJlZ0NoYW5nZShjbSk7XHJcbiAgfSwgdHJ1ZSk7XHJcbiAgb3B0aW9uKFwic3BlY2lhbENoYXJzXCIsIC9bXFx0XFx1MDAwMC1cXHUwMDE5XFx1MDBhZFxcdTIwMGItXFx1MjAwZlxcdTIwMjhcXHUyMDI5XFx1ZmVmZl0vZywgZnVuY3Rpb24oY20sIHZhbCkge1xyXG4gICAgY20ub3B0aW9ucy5zcGVjaWFsQ2hhcnMgPSBuZXcgUmVnRXhwKHZhbC5zb3VyY2UgKyAodmFsLnRlc3QoXCJcXHRcIikgPyBcIlwiIDogXCJ8XFx0XCIpLCBcImdcIik7XHJcbiAgICBjbS5yZWZyZXNoKCk7XHJcbiAgfSwgdHJ1ZSk7XHJcbiAgb3B0aW9uKFwic3BlY2lhbENoYXJQbGFjZWhvbGRlclwiLCBkZWZhdWx0U3BlY2lhbENoYXJQbGFjZWhvbGRlciwgZnVuY3Rpb24oY20pIHtjbS5yZWZyZXNoKCk7fSwgdHJ1ZSk7XHJcbiAgb3B0aW9uKFwiZWxlY3RyaWNDaGFyc1wiLCB0cnVlKTtcclxuICBvcHRpb24oXCJydGxNb3ZlVmlzdWFsbHlcIiwgIXdpbmRvd3MpO1xyXG4gIG9wdGlvbihcIndob2xlTGluZVVwZGF0ZUJlZm9yZVwiLCB0cnVlKTtcclxuXHJcbiAgb3B0aW9uKFwidGhlbWVcIiwgXCJkZWZhdWx0XCIsIGZ1bmN0aW9uKGNtKSB7XHJcbiAgICB0aGVtZUNoYW5nZWQoY20pO1xyXG4gICAgZ3V0dGVyc0NoYW5nZWQoY20pO1xyXG4gIH0sIHRydWUpO1xyXG4gIG9wdGlvbihcImtleU1hcFwiLCBcImRlZmF1bHRcIiwga2V5TWFwQ2hhbmdlZCk7XHJcbiAgb3B0aW9uKFwiZXh0cmFLZXlzXCIsIG51bGwpO1xyXG5cclxuICBvcHRpb24oXCJsaW5lV3JhcHBpbmdcIiwgZmFsc2UsIHdyYXBwaW5nQ2hhbmdlZCwgdHJ1ZSk7XHJcbiAgb3B0aW9uKFwiZ3V0dGVyc1wiLCBbXSwgZnVuY3Rpb24oY20pIHtcclxuICAgIHNldEd1dHRlcnNGb3JMaW5lTnVtYmVycyhjbS5vcHRpb25zKTtcclxuICAgIGd1dHRlcnNDaGFuZ2VkKGNtKTtcclxuICB9LCB0cnVlKTtcclxuICBvcHRpb24oXCJmaXhlZEd1dHRlclwiLCB0cnVlLCBmdW5jdGlvbihjbSwgdmFsKSB7XHJcbiAgICBjbS5kaXNwbGF5Lmd1dHRlcnMuc3R5bGUubGVmdCA9IHZhbCA/IGNvbXBlbnNhdGVGb3JIU2Nyb2xsKGNtLmRpc3BsYXkpICsgXCJweFwiIDogXCIwXCI7XHJcbiAgICBjbS5yZWZyZXNoKCk7XHJcbiAgfSwgdHJ1ZSk7XHJcbiAgb3B0aW9uKFwiY292ZXJHdXR0ZXJOZXh0VG9TY3JvbGxiYXJcIiwgZmFsc2UsIHVwZGF0ZVNjcm9sbGJhcnMsIHRydWUpO1xyXG4gIG9wdGlvbihcImxpbmVOdW1iZXJzXCIsIGZhbHNlLCBmdW5jdGlvbihjbSkge1xyXG4gICAgc2V0R3V0dGVyc0ZvckxpbmVOdW1iZXJzKGNtLm9wdGlvbnMpO1xyXG4gICAgZ3V0dGVyc0NoYW5nZWQoY20pO1xyXG4gIH0sIHRydWUpO1xyXG4gIG9wdGlvbihcImZpcnN0TGluZU51bWJlclwiLCAxLCBndXR0ZXJzQ2hhbmdlZCwgdHJ1ZSk7XHJcbiAgb3B0aW9uKFwibGluZU51bWJlckZvcm1hdHRlclwiLCBmdW5jdGlvbihpbnRlZ2VyKSB7cmV0dXJuIGludGVnZXI7fSwgZ3V0dGVyc0NoYW5nZWQsIHRydWUpO1xyXG4gIG9wdGlvbihcInNob3dDdXJzb3JXaGVuU2VsZWN0aW5nXCIsIGZhbHNlLCB1cGRhdGVTZWxlY3Rpb24sIHRydWUpO1xyXG5cclxuICBvcHRpb24oXCJyZXNldFNlbGVjdGlvbk9uQ29udGV4dE1lbnVcIiwgdHJ1ZSk7XHJcblxyXG4gIG9wdGlvbihcInJlYWRPbmx5XCIsIGZhbHNlLCBmdW5jdGlvbihjbSwgdmFsKSB7XHJcbiAgICBpZiAodmFsID09IFwibm9jdXJzb3JcIikge1xyXG4gICAgICBvbkJsdXIoY20pO1xyXG4gICAgICBjbS5kaXNwbGF5LmlucHV0LmJsdXIoKTtcclxuICAgICAgY20uZGlzcGxheS5kaXNhYmxlZCA9IHRydWU7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBjbS5kaXNwbGF5LmRpc2FibGVkID0gZmFsc2U7XHJcbiAgICAgIGlmICghdmFsKSByZXNldElucHV0KGNtKTtcclxuICAgIH1cclxuICB9KTtcclxuICBvcHRpb24oXCJkaXNhYmxlSW5wdXRcIiwgZmFsc2UsIGZ1bmN0aW9uKGNtLCB2YWwpIHtpZiAoIXZhbCkgcmVzZXRJbnB1dChjbSk7fSwgdHJ1ZSk7XHJcbiAgb3B0aW9uKFwiZHJhZ0Ryb3BcIiwgdHJ1ZSk7XHJcblxyXG4gIG9wdGlvbihcImN1cnNvckJsaW5rUmF0ZVwiLCA1MzApO1xyXG4gIG9wdGlvbihcImN1cnNvclNjcm9sbE1hcmdpblwiLCAwKTtcclxuICBvcHRpb24oXCJjdXJzb3JIZWlnaHRcIiwgMSwgdXBkYXRlU2VsZWN0aW9uLCB0cnVlKTtcclxuICBvcHRpb24oXCJzaW5nbGVDdXJzb3JIZWlnaHRQZXJMaW5lXCIsIHRydWUsIHVwZGF0ZVNlbGVjdGlvbiwgdHJ1ZSk7XHJcbiAgb3B0aW9uKFwid29ya1RpbWVcIiwgMTAwKTtcclxuICBvcHRpb24oXCJ3b3JrRGVsYXlcIiwgMTAwKTtcclxuICBvcHRpb24oXCJmbGF0dGVuU3BhbnNcIiwgdHJ1ZSwgcmVzZXRNb2RlU3RhdGUsIHRydWUpO1xyXG4gIG9wdGlvbihcImFkZE1vZGVDbGFzc1wiLCBmYWxzZSwgcmVzZXRNb2RlU3RhdGUsIHRydWUpO1xyXG4gIG9wdGlvbihcInBvbGxJbnRlcnZhbFwiLCAxMDApO1xyXG4gIG9wdGlvbihcInVuZG9EZXB0aFwiLCAyMDAsIGZ1bmN0aW9uKGNtLCB2YWwpe2NtLmRvYy5oaXN0b3J5LnVuZG9EZXB0aCA9IHZhbDt9KTtcclxuICBvcHRpb24oXCJoaXN0b3J5RXZlbnREZWxheVwiLCAxMjUwKTtcclxuICBvcHRpb24oXCJ2aWV3cG9ydE1hcmdpblwiLCAxMCwgZnVuY3Rpb24oY20pe2NtLnJlZnJlc2goKTt9LCB0cnVlKTtcclxuICBvcHRpb24oXCJtYXhIaWdobGlnaHRMZW5ndGhcIiwgMTAwMDAsIHJlc2V0TW9kZVN0YXRlLCB0cnVlKTtcclxuICBvcHRpb24oXCJtb3ZlSW5wdXRXaXRoQ3Vyc29yXCIsIHRydWUsIGZ1bmN0aW9uKGNtLCB2YWwpIHtcclxuICAgIGlmICghdmFsKSBjbS5kaXNwbGF5LmlucHV0RGl2LnN0eWxlLnRvcCA9IGNtLmRpc3BsYXkuaW5wdXREaXYuc3R5bGUubGVmdCA9IDA7XHJcbiAgfSk7XHJcblxyXG4gIG9wdGlvbihcInRhYmluZGV4XCIsIG51bGwsIGZ1bmN0aW9uKGNtLCB2YWwpIHtcclxuICAgIGNtLmRpc3BsYXkuaW5wdXQudGFiSW5kZXggPSB2YWwgfHwgXCJcIjtcclxuICB9KTtcclxuICBvcHRpb24oXCJhdXRvZm9jdXNcIiwgbnVsbCk7XHJcblxyXG4gIC8vIE1PREUgREVGSU5JVElPTiBBTkQgUVVFUllJTkdcclxuXHJcbiAgLy8gS25vd24gbW9kZXMsIGJ5IG5hbWUgYW5kIGJ5IE1JTUVcclxuICB2YXIgbW9kZXMgPSBDb2RlTWlycm9yLm1vZGVzID0ge30sIG1pbWVNb2RlcyA9IENvZGVNaXJyb3IubWltZU1vZGVzID0ge307XHJcblxyXG4gIC8vIEV4dHJhIGFyZ3VtZW50cyBhcmUgc3RvcmVkIGFzIHRoZSBtb2RlJ3MgZGVwZW5kZW5jaWVzLCB3aGljaCBpc1xyXG4gIC8vIHVzZWQgYnkgKGxlZ2FjeSkgbWVjaGFuaXNtcyBsaWtlIGxvYWRtb2RlLmpzIHRvIGF1dG9tYXRpY2FsbHlcclxuICAvLyBsb2FkIGEgbW9kZS4gKFByZWZlcnJlZCBtZWNoYW5pc20gaXMgdGhlIHJlcXVpcmUvZGVmaW5lIGNhbGxzLilcclxuICBDb2RlTWlycm9yLmRlZmluZU1vZGUgPSBmdW5jdGlvbihuYW1lLCBtb2RlKSB7XHJcbiAgICBpZiAoIUNvZGVNaXJyb3IuZGVmYXVsdHMubW9kZSAmJiBuYW1lICE9IFwibnVsbFwiKSBDb2RlTWlycm9yLmRlZmF1bHRzLm1vZGUgPSBuYW1lO1xyXG4gICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPiAyKSB7XHJcbiAgICAgIG1vZGUuZGVwZW5kZW5jaWVzID0gW107XHJcbiAgICAgIGZvciAodmFyIGkgPSAyOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgKytpKSBtb2RlLmRlcGVuZGVuY2llcy5wdXNoKGFyZ3VtZW50c1tpXSk7XHJcbiAgICB9XHJcbiAgICBtb2Rlc1tuYW1lXSA9IG1vZGU7XHJcbiAgfTtcclxuXHJcbiAgQ29kZU1pcnJvci5kZWZpbmVNSU1FID0gZnVuY3Rpb24obWltZSwgc3BlYykge1xyXG4gICAgbWltZU1vZGVzW21pbWVdID0gc3BlYztcclxuICB9O1xyXG5cclxuICAvLyBHaXZlbiBhIE1JTUUgdHlwZSwgYSB7bmFtZSwgLi4ub3B0aW9uc30gY29uZmlnIG9iamVjdCwgb3IgYSBuYW1lXHJcbiAgLy8gc3RyaW5nLCByZXR1cm4gYSBtb2RlIGNvbmZpZyBvYmplY3QuXHJcbiAgQ29kZU1pcnJvci5yZXNvbHZlTW9kZSA9IGZ1bmN0aW9uKHNwZWMpIHtcclxuICAgIGlmICh0eXBlb2Ygc3BlYyA9PSBcInN0cmluZ1wiICYmIG1pbWVNb2Rlcy5oYXNPd25Qcm9wZXJ0eShzcGVjKSkge1xyXG4gICAgICBzcGVjID0gbWltZU1vZGVzW3NwZWNdO1xyXG4gICAgfSBlbHNlIGlmIChzcGVjICYmIHR5cGVvZiBzcGVjLm5hbWUgPT0gXCJzdHJpbmdcIiAmJiBtaW1lTW9kZXMuaGFzT3duUHJvcGVydHkoc3BlYy5uYW1lKSkge1xyXG4gICAgICB2YXIgZm91bmQgPSBtaW1lTW9kZXNbc3BlYy5uYW1lXTtcclxuICAgICAgaWYgKHR5cGVvZiBmb3VuZCA9PSBcInN0cmluZ1wiKSBmb3VuZCA9IHtuYW1lOiBmb3VuZH07XHJcbiAgICAgIHNwZWMgPSBjcmVhdGVPYmooZm91bmQsIHNwZWMpO1xyXG4gICAgICBzcGVjLm5hbWUgPSBmb3VuZC5uYW1lO1xyXG4gICAgfSBlbHNlIGlmICh0eXBlb2Ygc3BlYyA9PSBcInN0cmluZ1wiICYmIC9eW1xcd1xcLV0rXFwvW1xcd1xcLV0rXFwreG1sJC8udGVzdChzcGVjKSkge1xyXG4gICAgICByZXR1cm4gQ29kZU1pcnJvci5yZXNvbHZlTW9kZShcImFwcGxpY2F0aW9uL3htbFwiKTtcclxuICAgIH1cclxuICAgIGlmICh0eXBlb2Ygc3BlYyA9PSBcInN0cmluZ1wiKSByZXR1cm4ge25hbWU6IHNwZWN9O1xyXG4gICAgZWxzZSByZXR1cm4gc3BlYyB8fCB7bmFtZTogXCJudWxsXCJ9O1xyXG4gIH07XHJcblxyXG4gIC8vIEdpdmVuIGEgbW9kZSBzcGVjIChhbnl0aGluZyB0aGF0IHJlc29sdmVNb2RlIGFjY2VwdHMpLCBmaW5kIGFuZFxyXG4gIC8vIGluaXRpYWxpemUgYW4gYWN0dWFsIG1vZGUgb2JqZWN0LlxyXG4gIENvZGVNaXJyb3IuZ2V0TW9kZSA9IGZ1bmN0aW9uKG9wdGlvbnMsIHNwZWMpIHtcclxuICAgIHZhciBzcGVjID0gQ29kZU1pcnJvci5yZXNvbHZlTW9kZShzcGVjKTtcclxuICAgIHZhciBtZmFjdG9yeSA9IG1vZGVzW3NwZWMubmFtZV07XHJcbiAgICBpZiAoIW1mYWN0b3J5KSByZXR1cm4gQ29kZU1pcnJvci5nZXRNb2RlKG9wdGlvbnMsIFwidGV4dC9wbGFpblwiKTtcclxuICAgIHZhciBtb2RlT2JqID0gbWZhY3Rvcnkob3B0aW9ucywgc3BlYyk7XHJcbiAgICBpZiAobW9kZUV4dGVuc2lvbnMuaGFzT3duUHJvcGVydHkoc3BlYy5uYW1lKSkge1xyXG4gICAgICB2YXIgZXh0cyA9IG1vZGVFeHRlbnNpb25zW3NwZWMubmFtZV07XHJcbiAgICAgIGZvciAodmFyIHByb3AgaW4gZXh0cykge1xyXG4gICAgICAgIGlmICghZXh0cy5oYXNPd25Qcm9wZXJ0eShwcm9wKSkgY29udGludWU7XHJcbiAgICAgICAgaWYgKG1vZGVPYmouaGFzT3duUHJvcGVydHkocHJvcCkpIG1vZGVPYmpbXCJfXCIgKyBwcm9wXSA9IG1vZGVPYmpbcHJvcF07XHJcbiAgICAgICAgbW9kZU9ialtwcm9wXSA9IGV4dHNbcHJvcF07XHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIG1vZGVPYmoubmFtZSA9IHNwZWMubmFtZTtcclxuICAgIGlmIChzcGVjLmhlbHBlclR5cGUpIG1vZGVPYmouaGVscGVyVHlwZSA9IHNwZWMuaGVscGVyVHlwZTtcclxuICAgIGlmIChzcGVjLm1vZGVQcm9wcykgZm9yICh2YXIgcHJvcCBpbiBzcGVjLm1vZGVQcm9wcylcclxuICAgICAgbW9kZU9ialtwcm9wXSA9IHNwZWMubW9kZVByb3BzW3Byb3BdO1xyXG5cclxuICAgIHJldHVybiBtb2RlT2JqO1xyXG4gIH07XHJcblxyXG4gIC8vIE1pbmltYWwgZGVmYXVsdCBtb2RlLlxyXG4gIENvZGVNaXJyb3IuZGVmaW5lTW9kZShcIm51bGxcIiwgZnVuY3Rpb24oKSB7XHJcbiAgICByZXR1cm4ge3Rva2VuOiBmdW5jdGlvbihzdHJlYW0pIHtzdHJlYW0uc2tpcFRvRW5kKCk7fX07XHJcbiAgfSk7XHJcbiAgQ29kZU1pcnJvci5kZWZpbmVNSU1FKFwidGV4dC9wbGFpblwiLCBcIm51bGxcIik7XHJcblxyXG4gIC8vIFRoaXMgY2FuIGJlIHVzZWQgdG8gYXR0YWNoIHByb3BlcnRpZXMgdG8gbW9kZSBvYmplY3RzIGZyb21cclxuICAvLyBvdXRzaWRlIHRoZSBhY3R1YWwgbW9kZSBkZWZpbml0aW9uLlxyXG4gIHZhciBtb2RlRXh0ZW5zaW9ucyA9IENvZGVNaXJyb3IubW9kZUV4dGVuc2lvbnMgPSB7fTtcclxuICBDb2RlTWlycm9yLmV4dGVuZE1vZGUgPSBmdW5jdGlvbihtb2RlLCBwcm9wZXJ0aWVzKSB7XHJcbiAgICB2YXIgZXh0cyA9IG1vZGVFeHRlbnNpb25zLmhhc093blByb3BlcnR5KG1vZGUpID8gbW9kZUV4dGVuc2lvbnNbbW9kZV0gOiAobW9kZUV4dGVuc2lvbnNbbW9kZV0gPSB7fSk7XHJcbiAgICBjb3B5T2JqKHByb3BlcnRpZXMsIGV4dHMpO1xyXG4gIH07XHJcblxyXG4gIC8vIEVYVEVOU0lPTlNcclxuXHJcbiAgQ29kZU1pcnJvci5kZWZpbmVFeHRlbnNpb24gPSBmdW5jdGlvbihuYW1lLCBmdW5jKSB7XHJcbiAgICBDb2RlTWlycm9yLnByb3RvdHlwZVtuYW1lXSA9IGZ1bmM7XHJcbiAgfTtcclxuICBDb2RlTWlycm9yLmRlZmluZURvY0V4dGVuc2lvbiA9IGZ1bmN0aW9uKG5hbWUsIGZ1bmMpIHtcclxuICAgIERvYy5wcm90b3R5cGVbbmFtZV0gPSBmdW5jO1xyXG4gIH07XHJcbiAgQ29kZU1pcnJvci5kZWZpbmVPcHRpb24gPSBvcHRpb247XHJcblxyXG4gIHZhciBpbml0SG9va3MgPSBbXTtcclxuICBDb2RlTWlycm9yLmRlZmluZUluaXRIb29rID0gZnVuY3Rpb24oZikge2luaXRIb29rcy5wdXNoKGYpO307XHJcblxyXG4gIHZhciBoZWxwZXJzID0gQ29kZU1pcnJvci5oZWxwZXJzID0ge307XHJcbiAgQ29kZU1pcnJvci5yZWdpc3RlckhlbHBlciA9IGZ1bmN0aW9uKHR5cGUsIG5hbWUsIHZhbHVlKSB7XHJcbiAgICBpZiAoIWhlbHBlcnMuaGFzT3duUHJvcGVydHkodHlwZSkpIGhlbHBlcnNbdHlwZV0gPSBDb2RlTWlycm9yW3R5cGVdID0ge19nbG9iYWw6IFtdfTtcclxuICAgIGhlbHBlcnNbdHlwZV1bbmFtZV0gPSB2YWx1ZTtcclxuICB9O1xyXG4gIENvZGVNaXJyb3IucmVnaXN0ZXJHbG9iYWxIZWxwZXIgPSBmdW5jdGlvbih0eXBlLCBuYW1lLCBwcmVkaWNhdGUsIHZhbHVlKSB7XHJcbiAgICBDb2RlTWlycm9yLnJlZ2lzdGVySGVscGVyKHR5cGUsIG5hbWUsIHZhbHVlKTtcclxuICAgIGhlbHBlcnNbdHlwZV0uX2dsb2JhbC5wdXNoKHtwcmVkOiBwcmVkaWNhdGUsIHZhbDogdmFsdWV9KTtcclxuICB9O1xyXG5cclxuICAvLyBNT0RFIFNUQVRFIEhBTkRMSU5HXHJcblxyXG4gIC8vIFV0aWxpdHkgZnVuY3Rpb25zIGZvciB3b3JraW5nIHdpdGggc3RhdGUuIEV4cG9ydGVkIGJlY2F1c2UgbmVzdGVkXHJcbiAgLy8gbW9kZXMgbmVlZCB0byBkbyB0aGlzIGZvciB0aGVpciBpbm5lciBtb2Rlcy5cclxuXHJcbiAgdmFyIGNvcHlTdGF0ZSA9IENvZGVNaXJyb3IuY29weVN0YXRlID0gZnVuY3Rpb24obW9kZSwgc3RhdGUpIHtcclxuICAgIGlmIChzdGF0ZSA9PT0gdHJ1ZSkgcmV0dXJuIHN0YXRlO1xyXG4gICAgaWYgKG1vZGUuY29weVN0YXRlKSByZXR1cm4gbW9kZS5jb3B5U3RhdGUoc3RhdGUpO1xyXG4gICAgdmFyIG5zdGF0ZSA9IHt9O1xyXG4gICAgZm9yICh2YXIgbiBpbiBzdGF0ZSkge1xyXG4gICAgICB2YXIgdmFsID0gc3RhdGVbbl07XHJcbiAgICAgIGlmICh2YWwgaW5zdGFuY2VvZiBBcnJheSkgdmFsID0gdmFsLmNvbmNhdChbXSk7XHJcbiAgICAgIG5zdGF0ZVtuXSA9IHZhbDtcclxuICAgIH1cclxuICAgIHJldHVybiBuc3RhdGU7XHJcbiAgfTtcclxuXHJcbiAgdmFyIHN0YXJ0U3RhdGUgPSBDb2RlTWlycm9yLnN0YXJ0U3RhdGUgPSBmdW5jdGlvbihtb2RlLCBhMSwgYTIpIHtcclxuICAgIHJldHVybiBtb2RlLnN0YXJ0U3RhdGUgPyBtb2RlLnN0YXJ0U3RhdGUoYTEsIGEyKSA6IHRydWU7XHJcbiAgfTtcclxuXHJcbiAgLy8gR2l2ZW4gYSBtb2RlIGFuZCBhIHN0YXRlIChmb3IgdGhhdCBtb2RlKSwgZmluZCB0aGUgaW5uZXIgbW9kZSBhbmRcclxuICAvLyBzdGF0ZSBhdCB0aGUgcG9zaXRpb24gdGhhdCB0aGUgc3RhdGUgcmVmZXJzIHRvLlxyXG4gIENvZGVNaXJyb3IuaW5uZXJNb2RlID0gZnVuY3Rpb24obW9kZSwgc3RhdGUpIHtcclxuICAgIHdoaWxlIChtb2RlLmlubmVyTW9kZSkge1xyXG4gICAgICB2YXIgaW5mbyA9IG1vZGUuaW5uZXJNb2RlKHN0YXRlKTtcclxuICAgICAgaWYgKCFpbmZvIHx8IGluZm8ubW9kZSA9PSBtb2RlKSBicmVhaztcclxuICAgICAgc3RhdGUgPSBpbmZvLnN0YXRlO1xyXG4gICAgICBtb2RlID0gaW5mby5tb2RlO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIGluZm8gfHwge21vZGU6IG1vZGUsIHN0YXRlOiBzdGF0ZX07XHJcbiAgfTtcclxuXHJcbiAgLy8gU1RBTkRBUkQgQ09NTUFORFNcclxuXHJcbiAgLy8gQ29tbWFuZHMgYXJlIHBhcmFtZXRlci1sZXNzIGFjdGlvbnMgdGhhdCBjYW4gYmUgcGVyZm9ybWVkIG9uIGFuXHJcbiAgLy8gZWRpdG9yLCBtb3N0bHkgdXNlZCBmb3Iga2V5YmluZGluZ3MuXHJcbiAgdmFyIGNvbW1hbmRzID0gQ29kZU1pcnJvci5jb21tYW5kcyA9IHtcclxuICAgIHNlbGVjdEFsbDogZnVuY3Rpb24oY20pIHtjbS5zZXRTZWxlY3Rpb24oUG9zKGNtLmZpcnN0TGluZSgpLCAwKSwgUG9zKGNtLmxhc3RMaW5lKCkpLCBzZWxfZG9udFNjcm9sbCk7fSxcclxuICAgIHNpbmdsZVNlbGVjdGlvbjogZnVuY3Rpb24oY20pIHtcclxuICAgICAgY20uc2V0U2VsZWN0aW9uKGNtLmdldEN1cnNvcihcImFuY2hvclwiKSwgY20uZ2V0Q3Vyc29yKFwiaGVhZFwiKSwgc2VsX2RvbnRTY3JvbGwpO1xyXG4gICAgfSxcclxuICAgIGtpbGxMaW5lOiBmdW5jdGlvbihjbSkge1xyXG4gICAgICBkZWxldGVOZWFyU2VsZWN0aW9uKGNtLCBmdW5jdGlvbihyYW5nZSkge1xyXG4gICAgICAgIGlmIChyYW5nZS5lbXB0eSgpKSB7XHJcbiAgICAgICAgICB2YXIgbGVuID0gZ2V0TGluZShjbS5kb2MsIHJhbmdlLmhlYWQubGluZSkudGV4dC5sZW5ndGg7XHJcbiAgICAgICAgICBpZiAocmFuZ2UuaGVhZC5jaCA9PSBsZW4gJiYgcmFuZ2UuaGVhZC5saW5lIDwgY20ubGFzdExpbmUoKSlcclxuICAgICAgICAgICAgcmV0dXJuIHtmcm9tOiByYW5nZS5oZWFkLCB0bzogUG9zKHJhbmdlLmhlYWQubGluZSArIDEsIDApfTtcclxuICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAgcmV0dXJuIHtmcm9tOiByYW5nZS5oZWFkLCB0bzogUG9zKHJhbmdlLmhlYWQubGluZSwgbGVuKX07XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIHJldHVybiB7ZnJvbTogcmFuZ2UuZnJvbSgpLCB0bzogcmFuZ2UudG8oKX07XHJcbiAgICAgICAgfVxyXG4gICAgICB9KTtcclxuICAgIH0sXHJcbiAgICBkZWxldGVMaW5lOiBmdW5jdGlvbihjbSkge1xyXG4gICAgICBkZWxldGVOZWFyU2VsZWN0aW9uKGNtLCBmdW5jdGlvbihyYW5nZSkge1xyXG4gICAgICAgIHJldHVybiB7ZnJvbTogUG9zKHJhbmdlLmZyb20oKS5saW5lLCAwKSxcclxuICAgICAgICAgICAgICAgIHRvOiBjbGlwUG9zKGNtLmRvYywgUG9zKHJhbmdlLnRvKCkubGluZSArIDEsIDApKX07XHJcbiAgICAgIH0pO1xyXG4gICAgfSxcclxuICAgIGRlbExpbmVMZWZ0OiBmdW5jdGlvbihjbSkge1xyXG4gICAgICBkZWxldGVOZWFyU2VsZWN0aW9uKGNtLCBmdW5jdGlvbihyYW5nZSkge1xyXG4gICAgICAgIHJldHVybiB7ZnJvbTogUG9zKHJhbmdlLmZyb20oKS5saW5lLCAwKSwgdG86IHJhbmdlLmZyb20oKX07XHJcbiAgICAgIH0pO1xyXG4gICAgfSxcclxuICAgIGRlbFdyYXBwZWRMaW5lTGVmdDogZnVuY3Rpb24oY20pIHtcclxuICAgICAgZGVsZXRlTmVhclNlbGVjdGlvbihjbSwgZnVuY3Rpb24ocmFuZ2UpIHtcclxuICAgICAgICB2YXIgdG9wID0gY20uY2hhckNvb3JkcyhyYW5nZS5oZWFkLCBcImRpdlwiKS50b3AgKyA1O1xyXG4gICAgICAgIHZhciBsZWZ0UG9zID0gY20uY29vcmRzQ2hhcih7bGVmdDogMCwgdG9wOiB0b3B9LCBcImRpdlwiKTtcclxuICAgICAgICByZXR1cm4ge2Zyb206IGxlZnRQb3MsIHRvOiByYW5nZS5mcm9tKCl9O1xyXG4gICAgICB9KTtcclxuICAgIH0sXHJcbiAgICBkZWxXcmFwcGVkTGluZVJpZ2h0OiBmdW5jdGlvbihjbSkge1xyXG4gICAgICBkZWxldGVOZWFyU2VsZWN0aW9uKGNtLCBmdW5jdGlvbihyYW5nZSkge1xyXG4gICAgICAgIHZhciB0b3AgPSBjbS5jaGFyQ29vcmRzKHJhbmdlLmhlYWQsIFwiZGl2XCIpLnRvcCArIDU7XHJcbiAgICAgICAgdmFyIHJpZ2h0UG9zID0gY20uY29vcmRzQ2hhcih7bGVmdDogY20uZGlzcGxheS5saW5lRGl2Lm9mZnNldFdpZHRoICsgMTAwLCB0b3A6IHRvcH0sIFwiZGl2XCIpO1xyXG4gICAgICAgIHJldHVybiB7ZnJvbTogcmFuZ2UuZnJvbSgpLCB0bzogcmlnaHRQb3MgfTtcclxuICAgICAgfSk7XHJcbiAgICB9LFxyXG4gICAgdW5kbzogZnVuY3Rpb24oY20pIHtjbS51bmRvKCk7fSxcclxuICAgIHJlZG86IGZ1bmN0aW9uKGNtKSB7Y20ucmVkbygpO30sXHJcbiAgICB1bmRvU2VsZWN0aW9uOiBmdW5jdGlvbihjbSkge2NtLnVuZG9TZWxlY3Rpb24oKTt9LFxyXG4gICAgcmVkb1NlbGVjdGlvbjogZnVuY3Rpb24oY20pIHtjbS5yZWRvU2VsZWN0aW9uKCk7fSxcclxuICAgIGdvRG9jU3RhcnQ6IGZ1bmN0aW9uKGNtKSB7Y20uZXh0ZW5kU2VsZWN0aW9uKFBvcyhjbS5maXJzdExpbmUoKSwgMCkpO30sXHJcbiAgICBnb0RvY0VuZDogZnVuY3Rpb24oY20pIHtjbS5leHRlbmRTZWxlY3Rpb24oUG9zKGNtLmxhc3RMaW5lKCkpKTt9LFxyXG4gICAgZ29MaW5lU3RhcnQ6IGZ1bmN0aW9uKGNtKSB7XHJcbiAgICAgIGNtLmV4dGVuZFNlbGVjdGlvbnNCeShmdW5jdGlvbihyYW5nZSkgeyByZXR1cm4gbGluZVN0YXJ0KGNtLCByYW5nZS5oZWFkLmxpbmUpOyB9LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge29yaWdpbjogXCIrbW92ZVwiLCBiaWFzOiAxfSk7XHJcbiAgICB9LFxyXG4gICAgZ29MaW5lU3RhcnRTbWFydDogZnVuY3Rpb24oY20pIHtcclxuICAgICAgY20uZXh0ZW5kU2VsZWN0aW9uc0J5KGZ1bmN0aW9uKHJhbmdlKSB7XHJcbiAgICAgICAgcmV0dXJuIGxpbmVTdGFydFNtYXJ0KGNtLCByYW5nZS5oZWFkKTtcclxuICAgICAgfSwge29yaWdpbjogXCIrbW92ZVwiLCBiaWFzOiAxfSk7XHJcbiAgICB9LFxyXG4gICAgZ29MaW5lRW5kOiBmdW5jdGlvbihjbSkge1xyXG4gICAgICBjbS5leHRlbmRTZWxlY3Rpb25zQnkoZnVuY3Rpb24ocmFuZ2UpIHsgcmV0dXJuIGxpbmVFbmQoY20sIHJhbmdlLmhlYWQubGluZSk7IH0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7b3JpZ2luOiBcIittb3ZlXCIsIGJpYXM6IC0xfSk7XHJcbiAgICB9LFxyXG4gICAgZ29MaW5lUmlnaHQ6IGZ1bmN0aW9uKGNtKSB7XHJcbiAgICAgIGNtLmV4dGVuZFNlbGVjdGlvbnNCeShmdW5jdGlvbihyYW5nZSkge1xyXG4gICAgICAgIHZhciB0b3AgPSBjbS5jaGFyQ29vcmRzKHJhbmdlLmhlYWQsIFwiZGl2XCIpLnRvcCArIDU7XHJcbiAgICAgICAgcmV0dXJuIGNtLmNvb3Jkc0NoYXIoe2xlZnQ6IGNtLmRpc3BsYXkubGluZURpdi5vZmZzZXRXaWR0aCArIDEwMCwgdG9wOiB0b3B9LCBcImRpdlwiKTtcclxuICAgICAgfSwgc2VsX21vdmUpO1xyXG4gICAgfSxcclxuICAgIGdvTGluZUxlZnQ6IGZ1bmN0aW9uKGNtKSB7XHJcbiAgICAgIGNtLmV4dGVuZFNlbGVjdGlvbnNCeShmdW5jdGlvbihyYW5nZSkge1xyXG4gICAgICAgIHZhciB0b3AgPSBjbS5jaGFyQ29vcmRzKHJhbmdlLmhlYWQsIFwiZGl2XCIpLnRvcCArIDU7XHJcbiAgICAgICAgcmV0dXJuIGNtLmNvb3Jkc0NoYXIoe2xlZnQ6IDAsIHRvcDogdG9wfSwgXCJkaXZcIik7XHJcbiAgICAgIH0sIHNlbF9tb3ZlKTtcclxuICAgIH0sXHJcbiAgICBnb0xpbmVMZWZ0U21hcnQ6IGZ1bmN0aW9uKGNtKSB7XHJcbiAgICAgIGNtLmV4dGVuZFNlbGVjdGlvbnNCeShmdW5jdGlvbihyYW5nZSkge1xyXG4gICAgICAgIHZhciB0b3AgPSBjbS5jaGFyQ29vcmRzKHJhbmdlLmhlYWQsIFwiZGl2XCIpLnRvcCArIDU7XHJcbiAgICAgICAgdmFyIHBvcyA9IGNtLmNvb3Jkc0NoYXIoe2xlZnQ6IDAsIHRvcDogdG9wfSwgXCJkaXZcIik7XHJcbiAgICAgICAgaWYgKHBvcy5jaCA8IGNtLmdldExpbmUocG9zLmxpbmUpLnNlYXJjaCgvXFxTLykpIHJldHVybiBsaW5lU3RhcnRTbWFydChjbSwgcmFuZ2UuaGVhZCk7XHJcbiAgICAgICAgcmV0dXJuIHBvcztcclxuICAgICAgfSwgc2VsX21vdmUpO1xyXG4gICAgfSxcclxuICAgIGdvTGluZVVwOiBmdW5jdGlvbihjbSkge2NtLm1vdmVWKC0xLCBcImxpbmVcIik7fSxcclxuICAgIGdvTGluZURvd246IGZ1bmN0aW9uKGNtKSB7Y20ubW92ZVYoMSwgXCJsaW5lXCIpO30sXHJcbiAgICBnb1BhZ2VVcDogZnVuY3Rpb24oY20pIHtjbS5tb3ZlVigtMSwgXCJwYWdlXCIpO30sXHJcbiAgICBnb1BhZ2VEb3duOiBmdW5jdGlvbihjbSkge2NtLm1vdmVWKDEsIFwicGFnZVwiKTt9LFxyXG4gICAgZ29DaGFyTGVmdDogZnVuY3Rpb24oY20pIHtjbS5tb3ZlSCgtMSwgXCJjaGFyXCIpO30sXHJcbiAgICBnb0NoYXJSaWdodDogZnVuY3Rpb24oY20pIHtjbS5tb3ZlSCgxLCBcImNoYXJcIik7fSxcclxuICAgIGdvQ29sdW1uTGVmdDogZnVuY3Rpb24oY20pIHtjbS5tb3ZlSCgtMSwgXCJjb2x1bW5cIik7fSxcclxuICAgIGdvQ29sdW1uUmlnaHQ6IGZ1bmN0aW9uKGNtKSB7Y20ubW92ZUgoMSwgXCJjb2x1bW5cIik7fSxcclxuICAgIGdvV29yZExlZnQ6IGZ1bmN0aW9uKGNtKSB7Y20ubW92ZUgoLTEsIFwid29yZFwiKTt9LFxyXG4gICAgZ29Hcm91cFJpZ2h0OiBmdW5jdGlvbihjbSkge2NtLm1vdmVIKDEsIFwiZ3JvdXBcIik7fSxcclxuICAgIGdvR3JvdXBMZWZ0OiBmdW5jdGlvbihjbSkge2NtLm1vdmVIKC0xLCBcImdyb3VwXCIpO30sXHJcbiAgICBnb1dvcmRSaWdodDogZnVuY3Rpb24oY20pIHtjbS5tb3ZlSCgxLCBcIndvcmRcIik7fSxcclxuICAgIGRlbENoYXJCZWZvcmU6IGZ1bmN0aW9uKGNtKSB7Y20uZGVsZXRlSCgtMSwgXCJjaGFyXCIpO30sXHJcbiAgICBkZWxDaGFyQWZ0ZXI6IGZ1bmN0aW9uKGNtKSB7Y20uZGVsZXRlSCgxLCBcImNoYXJcIik7fSxcclxuICAgIGRlbFdvcmRCZWZvcmU6IGZ1bmN0aW9uKGNtKSB7Y20uZGVsZXRlSCgtMSwgXCJ3b3JkXCIpO30sXHJcbiAgICBkZWxXb3JkQWZ0ZXI6IGZ1bmN0aW9uKGNtKSB7Y20uZGVsZXRlSCgxLCBcIndvcmRcIik7fSxcclxuICAgIGRlbEdyb3VwQmVmb3JlOiBmdW5jdGlvbihjbSkge2NtLmRlbGV0ZUgoLTEsIFwiZ3JvdXBcIik7fSxcclxuICAgIGRlbEdyb3VwQWZ0ZXI6IGZ1bmN0aW9uKGNtKSB7Y20uZGVsZXRlSCgxLCBcImdyb3VwXCIpO30sXHJcbiAgICBpbmRlbnRBdXRvOiBmdW5jdGlvbihjbSkge2NtLmluZGVudFNlbGVjdGlvbihcInNtYXJ0XCIpO30sXHJcbiAgICBpbmRlbnRNb3JlOiBmdW5jdGlvbihjbSkge2NtLmluZGVudFNlbGVjdGlvbihcImFkZFwiKTt9LFxyXG4gICAgaW5kZW50TGVzczogZnVuY3Rpb24oY20pIHtjbS5pbmRlbnRTZWxlY3Rpb24oXCJzdWJ0cmFjdFwiKTt9LFxyXG4gICAgaW5zZXJ0VGFiOiBmdW5jdGlvbihjbSkge2NtLnJlcGxhY2VTZWxlY3Rpb24oXCJcXHRcIik7fSxcclxuICAgIGluc2VydFNvZnRUYWI6IGZ1bmN0aW9uKGNtKSB7XHJcbiAgICAgIHZhciBzcGFjZXMgPSBbXSwgcmFuZ2VzID0gY20ubGlzdFNlbGVjdGlvbnMoKSwgdGFiU2l6ZSA9IGNtLm9wdGlvbnMudGFiU2l6ZTtcclxuICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCByYW5nZXMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICB2YXIgcG9zID0gcmFuZ2VzW2ldLmZyb20oKTtcclxuICAgICAgICB2YXIgY29sID0gY291bnRDb2x1bW4oY20uZ2V0TGluZShwb3MubGluZSksIHBvcy5jaCwgdGFiU2l6ZSk7XHJcbiAgICAgICAgc3BhY2VzLnB1c2gobmV3IEFycmF5KHRhYlNpemUgLSBjb2wgJSB0YWJTaXplICsgMSkuam9pbihcIiBcIikpO1xyXG4gICAgICB9XHJcbiAgICAgIGNtLnJlcGxhY2VTZWxlY3Rpb25zKHNwYWNlcyk7XHJcbiAgICB9LFxyXG4gICAgZGVmYXVsdFRhYjogZnVuY3Rpb24oY20pIHtcclxuICAgICAgaWYgKGNtLnNvbWV0aGluZ1NlbGVjdGVkKCkpIGNtLmluZGVudFNlbGVjdGlvbihcImFkZFwiKTtcclxuICAgICAgZWxzZSBjbS5leGVjQ29tbWFuZChcImluc2VydFRhYlwiKTtcclxuICAgIH0sXHJcbiAgICB0cmFuc3Bvc2VDaGFyczogZnVuY3Rpb24oY20pIHtcclxuICAgICAgcnVuSW5PcChjbSwgZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgdmFyIHJhbmdlcyA9IGNtLmxpc3RTZWxlY3Rpb25zKCksIG5ld1NlbCA9IFtdO1xyXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcmFuZ2VzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICB2YXIgY3VyID0gcmFuZ2VzW2ldLmhlYWQsIGxpbmUgPSBnZXRMaW5lKGNtLmRvYywgY3VyLmxpbmUpLnRleHQ7XHJcbiAgICAgICAgICBpZiAobGluZSkge1xyXG4gICAgICAgICAgICBpZiAoY3VyLmNoID09IGxpbmUubGVuZ3RoKSBjdXIgPSBuZXcgUG9zKGN1ci5saW5lLCBjdXIuY2ggLSAxKTtcclxuICAgICAgICAgICAgaWYgKGN1ci5jaCA+IDApIHtcclxuICAgICAgICAgICAgICBjdXIgPSBuZXcgUG9zKGN1ci5saW5lLCBjdXIuY2ggKyAxKTtcclxuICAgICAgICAgICAgICBjbS5yZXBsYWNlUmFuZ2UobGluZS5jaGFyQXQoY3VyLmNoIC0gMSkgKyBsaW5lLmNoYXJBdChjdXIuY2ggLSAyKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgUG9zKGN1ci5saW5lLCBjdXIuY2ggLSAyKSwgY3VyLCBcIit0cmFuc3Bvc2VcIik7XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoY3VyLmxpbmUgPiBjbS5kb2MuZmlyc3QpIHtcclxuICAgICAgICAgICAgICB2YXIgcHJldiA9IGdldExpbmUoY20uZG9jLCBjdXIubGluZSAtIDEpLnRleHQ7XHJcbiAgICAgICAgICAgICAgaWYgKHByZXYpXHJcbiAgICAgICAgICAgICAgICBjbS5yZXBsYWNlUmFuZ2UobGluZS5jaGFyQXQoMCkgKyBcIlxcblwiICsgcHJldi5jaGFyQXQocHJldi5sZW5ndGggLSAxKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBQb3MoY3VyLmxpbmUgLSAxLCBwcmV2Lmxlbmd0aCAtIDEpLCBQb3MoY3VyLmxpbmUsIDEpLCBcIit0cmFuc3Bvc2VcIik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH1cclxuICAgICAgICAgIG5ld1NlbC5wdXNoKG5ldyBSYW5nZShjdXIsIGN1cikpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjbS5zZXRTZWxlY3Rpb25zKG5ld1NlbCk7XHJcbiAgICAgIH0pO1xyXG4gICAgfSxcclxuICAgIG5ld2xpbmVBbmRJbmRlbnQ6IGZ1bmN0aW9uKGNtKSB7XHJcbiAgICAgIHJ1bkluT3AoY20sIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIHZhciBsZW4gPSBjbS5saXN0U2VsZWN0aW9ucygpLmxlbmd0aDtcclxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbjsgaSsrKSB7XHJcbiAgICAgICAgICB2YXIgcmFuZ2UgPSBjbS5saXN0U2VsZWN0aW9ucygpW2ldO1xyXG4gICAgICAgICAgY20ucmVwbGFjZVJhbmdlKFwiXFxuXCIsIHJhbmdlLmFuY2hvciwgcmFuZ2UuaGVhZCwgXCIraW5wdXRcIik7XHJcbiAgICAgICAgICBjbS5pbmRlbnRMaW5lKHJhbmdlLmZyb20oKS5saW5lICsgMSwgbnVsbCwgdHJ1ZSk7XHJcbiAgICAgICAgICBlbnN1cmVDdXJzb3JWaXNpYmxlKGNtKTtcclxuICAgICAgICB9XHJcbiAgICAgIH0pO1xyXG4gICAgfSxcclxuICAgIHRvZ2dsZU92ZXJ3cml0ZTogZnVuY3Rpb24oY20pIHtjbS50b2dnbGVPdmVyd3JpdGUoKTt9XHJcbiAgfTtcclxuXHJcbiAgLy8gU1RBTkRBUkQgS0VZTUFQU1xyXG5cclxuICB2YXIga2V5TWFwID0gQ29kZU1pcnJvci5rZXlNYXAgPSB7fTtcclxuICBrZXlNYXAuYmFzaWMgPSB7XHJcbiAgICBcIkxlZnRcIjogXCJnb0NoYXJMZWZ0XCIsIFwiUmlnaHRcIjogXCJnb0NoYXJSaWdodFwiLCBcIlVwXCI6IFwiZ29MaW5lVXBcIiwgXCJEb3duXCI6IFwiZ29MaW5lRG93blwiLFxyXG4gICAgXCJFbmRcIjogXCJnb0xpbmVFbmRcIiwgXCJIb21lXCI6IFwiZ29MaW5lU3RhcnRTbWFydFwiLCBcIlBhZ2VVcFwiOiBcImdvUGFnZVVwXCIsIFwiUGFnZURvd25cIjogXCJnb1BhZ2VEb3duXCIsXHJcbiAgICBcIkRlbGV0ZVwiOiBcImRlbENoYXJBZnRlclwiLCBcIkJhY2tzcGFjZVwiOiBcImRlbENoYXJCZWZvcmVcIiwgXCJTaGlmdC1CYWNrc3BhY2VcIjogXCJkZWxDaGFyQmVmb3JlXCIsXHJcbiAgICBcIlRhYlwiOiBcImRlZmF1bHRUYWJcIiwgXCJTaGlmdC1UYWJcIjogXCJpbmRlbnRBdXRvXCIsXHJcbiAgICBcIkVudGVyXCI6IFwibmV3bGluZUFuZEluZGVudFwiLCBcIkluc2VydFwiOiBcInRvZ2dsZU92ZXJ3cml0ZVwiLFxyXG4gICAgXCJFc2NcIjogXCJzaW5nbGVTZWxlY3Rpb25cIlxyXG4gIH07XHJcbiAgLy8gTm90ZSB0aGF0IHRoZSBzYXZlIGFuZCBmaW5kLXJlbGF0ZWQgY29tbWFuZHMgYXJlbid0IGRlZmluZWQgYnlcclxuICAvLyBkZWZhdWx0LiBVc2VyIGNvZGUgb3IgYWRkb25zIGNhbiBkZWZpbmUgdGhlbS4gVW5rbm93biBjb21tYW5kc1xyXG4gIC8vIGFyZSBzaW1wbHkgaWdub3JlZC5cclxuICBrZXlNYXAucGNEZWZhdWx0ID0ge1xyXG4gICAgXCJDdHJsLUFcIjogXCJzZWxlY3RBbGxcIiwgXCJDdHJsLURcIjogXCJkZWxldGVMaW5lXCIsIFwiQ3RybC1aXCI6IFwidW5kb1wiLCBcIlNoaWZ0LUN0cmwtWlwiOiBcInJlZG9cIiwgXCJDdHJsLVlcIjogXCJyZWRvXCIsXHJcbiAgICBcIkN0cmwtSG9tZVwiOiBcImdvRG9jU3RhcnRcIiwgXCJDdHJsLVVwXCI6IFwiZ29Eb2NTdGFydFwiLCBcIkN0cmwtRW5kXCI6IFwiZ29Eb2NFbmRcIiwgXCJDdHJsLURvd25cIjogXCJnb0RvY0VuZFwiLFxyXG4gICAgXCJDdHJsLUxlZnRcIjogXCJnb0dyb3VwTGVmdFwiLCBcIkN0cmwtUmlnaHRcIjogXCJnb0dyb3VwUmlnaHRcIiwgXCJBbHQtTGVmdFwiOiBcImdvTGluZVN0YXJ0XCIsIFwiQWx0LVJpZ2h0XCI6IFwiZ29MaW5lRW5kXCIsXHJcbiAgICBcIkN0cmwtQmFja3NwYWNlXCI6IFwiZGVsR3JvdXBCZWZvcmVcIiwgXCJDdHJsLURlbGV0ZVwiOiBcImRlbEdyb3VwQWZ0ZXJcIiwgXCJDdHJsLVNcIjogXCJzYXZlXCIsIFwiQ3RybC1GXCI6IFwiZmluZFwiLFxyXG4gICAgXCJDdHJsLUdcIjogXCJmaW5kTmV4dFwiLCBcIlNoaWZ0LUN0cmwtR1wiOiBcImZpbmRQcmV2XCIsIFwiU2hpZnQtQ3RybC1GXCI6IFwicmVwbGFjZVwiLCBcIlNoaWZ0LUN0cmwtUlwiOiBcInJlcGxhY2VBbGxcIixcclxuICAgIFwiQ3RybC1bXCI6IFwiaW5kZW50TGVzc1wiLCBcIkN0cmwtXVwiOiBcImluZGVudE1vcmVcIixcclxuICAgIFwiQ3RybC1VXCI6IFwidW5kb1NlbGVjdGlvblwiLCBcIlNoaWZ0LUN0cmwtVVwiOiBcInJlZG9TZWxlY3Rpb25cIiwgXCJBbHQtVVwiOiBcInJlZG9TZWxlY3Rpb25cIixcclxuICAgIGZhbGx0aHJvdWdoOiBcImJhc2ljXCJcclxuICB9O1xyXG4gIGtleU1hcC5tYWNEZWZhdWx0ID0ge1xyXG4gICAgXCJDbWQtQVwiOiBcInNlbGVjdEFsbFwiLCBcIkNtZC1EXCI6IFwiZGVsZXRlTGluZVwiLCBcIkNtZC1aXCI6IFwidW5kb1wiLCBcIlNoaWZ0LUNtZC1aXCI6IFwicmVkb1wiLCBcIkNtZC1ZXCI6IFwicmVkb1wiLFxyXG4gICAgXCJDbWQtSG9tZVwiOiBcImdvRG9jU3RhcnRcIiwgXCJDbWQtVXBcIjogXCJnb0RvY1N0YXJ0XCIsIFwiQ21kLUVuZFwiOiBcImdvRG9jRW5kXCIsIFwiQ21kLURvd25cIjogXCJnb0RvY0VuZFwiLCBcIkFsdC1MZWZ0XCI6IFwiZ29Hcm91cExlZnRcIixcclxuICAgIFwiQWx0LVJpZ2h0XCI6IFwiZ29Hcm91cFJpZ2h0XCIsIFwiQ21kLUxlZnRcIjogXCJnb0xpbmVMZWZ0XCIsIFwiQ21kLVJpZ2h0XCI6IFwiZ29MaW5lUmlnaHRcIiwgXCJBbHQtQmFja3NwYWNlXCI6IFwiZGVsR3JvdXBCZWZvcmVcIixcclxuICAgIFwiQ3RybC1BbHQtQmFja3NwYWNlXCI6IFwiZGVsR3JvdXBBZnRlclwiLCBcIkFsdC1EZWxldGVcIjogXCJkZWxHcm91cEFmdGVyXCIsIFwiQ21kLVNcIjogXCJzYXZlXCIsIFwiQ21kLUZcIjogXCJmaW5kXCIsXHJcbiAgICBcIkNtZC1HXCI6IFwiZmluZE5leHRcIiwgXCJTaGlmdC1DbWQtR1wiOiBcImZpbmRQcmV2XCIsIFwiQ21kLUFsdC1GXCI6IFwicmVwbGFjZVwiLCBcIlNoaWZ0LUNtZC1BbHQtRlwiOiBcInJlcGxhY2VBbGxcIixcclxuICAgIFwiQ21kLVtcIjogXCJpbmRlbnRMZXNzXCIsIFwiQ21kLV1cIjogXCJpbmRlbnRNb3JlXCIsIFwiQ21kLUJhY2tzcGFjZVwiOiBcImRlbFdyYXBwZWRMaW5lTGVmdFwiLCBcIkNtZC1EZWxldGVcIjogXCJkZWxXcmFwcGVkTGluZVJpZ2h0XCIsXHJcbiAgICBcIkNtZC1VXCI6IFwidW5kb1NlbGVjdGlvblwiLCBcIlNoaWZ0LUNtZC1VXCI6IFwicmVkb1NlbGVjdGlvblwiLFxyXG4gICAgZmFsbHRocm91Z2g6IFtcImJhc2ljXCIsIFwiZW1hY3N5XCJdXHJcbiAgfTtcclxuICAvLyBWZXJ5IGJhc2ljIHJlYWRsaW5lL2VtYWNzLXN0eWxlIGJpbmRpbmdzLCB3aGljaCBhcmUgc3RhbmRhcmQgb24gTWFjLlxyXG4gIGtleU1hcC5lbWFjc3kgPSB7XHJcbiAgICBcIkN0cmwtRlwiOiBcImdvQ2hhclJpZ2h0XCIsIFwiQ3RybC1CXCI6IFwiZ29DaGFyTGVmdFwiLCBcIkN0cmwtUFwiOiBcImdvTGluZVVwXCIsIFwiQ3RybC1OXCI6IFwiZ29MaW5lRG93blwiLFxyXG4gICAgXCJBbHQtRlwiOiBcImdvV29yZFJpZ2h0XCIsIFwiQWx0LUJcIjogXCJnb1dvcmRMZWZ0XCIsIFwiQ3RybC1BXCI6IFwiZ29MaW5lU3RhcnRcIiwgXCJDdHJsLUVcIjogXCJnb0xpbmVFbmRcIixcclxuICAgIFwiQ3RybC1WXCI6IFwiZ29QYWdlRG93blwiLCBcIlNoaWZ0LUN0cmwtVlwiOiBcImdvUGFnZVVwXCIsIFwiQ3RybC1EXCI6IFwiZGVsQ2hhckFmdGVyXCIsIFwiQ3RybC1IXCI6IFwiZGVsQ2hhckJlZm9yZVwiLFxyXG4gICAgXCJBbHQtRFwiOiBcImRlbFdvcmRBZnRlclwiLCBcIkFsdC1CYWNrc3BhY2VcIjogXCJkZWxXb3JkQmVmb3JlXCIsIFwiQ3RybC1LXCI6IFwia2lsbExpbmVcIiwgXCJDdHJsLVRcIjogXCJ0cmFuc3Bvc2VDaGFyc1wiXHJcbiAgfTtcclxuICBrZXlNYXBbXCJkZWZhdWx0XCJdID0gbWFjID8ga2V5TWFwLm1hY0RlZmF1bHQgOiBrZXlNYXAucGNEZWZhdWx0O1xyXG5cclxuICAvLyBLRVlNQVAgRElTUEFUQ0hcclxuXHJcbiAgZnVuY3Rpb24gZ2V0S2V5TWFwKHZhbCkge1xyXG4gICAgaWYgKHR5cGVvZiB2YWwgPT0gXCJzdHJpbmdcIikgcmV0dXJuIGtleU1hcFt2YWxdO1xyXG4gICAgZWxzZSByZXR1cm4gdmFsO1xyXG4gIH1cclxuXHJcbiAgLy8gR2l2ZW4gYW4gYXJyYXkgb2Yga2V5bWFwcyBhbmQgYSBrZXkgbmFtZSwgY2FsbCBoYW5kbGUgb24gYW55XHJcbiAgLy8gYmluZGluZ3MgZm91bmQsIHVudGlsIHRoYXQgcmV0dXJucyBhIHRydXRoeSB2YWx1ZSwgYXQgd2hpY2ggcG9pbnRcclxuICAvLyB3ZSBjb25zaWRlciB0aGUga2V5IGhhbmRsZWQuIEltcGxlbWVudHMgdGhpbmdzIGxpa2UgYmluZGluZyBhIGtleVxyXG4gIC8vIHRvIGZhbHNlIHN0b3BwaW5nIGZ1cnRoZXIgaGFuZGxpbmcgYW5kIGtleW1hcCBmYWxsdGhyb3VnaC5cclxuICB2YXIgbG9va3VwS2V5ID0gQ29kZU1pcnJvci5sb29rdXBLZXkgPSBmdW5jdGlvbihuYW1lLCBtYXBzLCBoYW5kbGUpIHtcclxuICAgIGZ1bmN0aW9uIGxvb2t1cChtYXApIHtcclxuICAgICAgbWFwID0gZ2V0S2V5TWFwKG1hcCk7XHJcbiAgICAgIHZhciBmb3VuZCA9IG1hcFtuYW1lXTtcclxuICAgICAgaWYgKGZvdW5kID09PSBmYWxzZSkgcmV0dXJuIFwic3RvcFwiO1xyXG4gICAgICBpZiAoZm91bmQgIT0gbnVsbCAmJiBoYW5kbGUoZm91bmQpKSByZXR1cm4gdHJ1ZTtcclxuICAgICAgaWYgKG1hcC5ub2ZhbGx0aHJvdWdoKSByZXR1cm4gXCJzdG9wXCI7XHJcblxyXG4gICAgICB2YXIgZmFsbHRocm91Z2ggPSBtYXAuZmFsbHRocm91Z2g7XHJcbiAgICAgIGlmIChmYWxsdGhyb3VnaCA9PSBudWxsKSByZXR1cm4gZmFsc2U7XHJcbiAgICAgIGlmIChPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwoZmFsbHRocm91Z2gpICE9IFwiW29iamVjdCBBcnJheV1cIilcclxuICAgICAgICByZXR1cm4gbG9va3VwKGZhbGx0aHJvdWdoKTtcclxuICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBmYWxsdGhyb3VnaC5sZW5ndGg7ICsraSkge1xyXG4gICAgICAgIHZhciBkb25lID0gbG9va3VwKGZhbGx0aHJvdWdoW2ldKTtcclxuICAgICAgICBpZiAoZG9uZSkgcmV0dXJuIGRvbmU7XHJcbiAgICAgIH1cclxuICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG5cclxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbWFwcy5sZW5ndGg7ICsraSkge1xyXG4gICAgICB2YXIgZG9uZSA9IGxvb2t1cChtYXBzW2ldKTtcclxuICAgICAgaWYgKGRvbmUpIHJldHVybiBkb25lICE9IFwic3RvcFwiO1xyXG4gICAgfVxyXG4gIH07XHJcblxyXG4gIC8vIE1vZGlmaWVyIGtleSBwcmVzc2VzIGRvbid0IGNvdW50IGFzICdyZWFsJyBrZXkgcHJlc3NlcyBmb3IgdGhlXHJcbiAgLy8gcHVycG9zZSBvZiBrZXltYXAgZmFsbHRocm91Z2guXHJcbiAgdmFyIGlzTW9kaWZpZXJLZXkgPSBDb2RlTWlycm9yLmlzTW9kaWZpZXJLZXkgPSBmdW5jdGlvbihldmVudCkge1xyXG4gICAgdmFyIG5hbWUgPSBrZXlOYW1lc1tldmVudC5rZXlDb2RlXTtcclxuICAgIHJldHVybiBuYW1lID09IFwiQ3RybFwiIHx8IG5hbWUgPT0gXCJBbHRcIiB8fCBuYW1lID09IFwiU2hpZnRcIiB8fCBuYW1lID09IFwiTW9kXCI7XHJcbiAgfTtcclxuXHJcbiAgLy8gTG9vayB1cCB0aGUgbmFtZSBvZiBhIGtleSBhcyBpbmRpY2F0ZWQgYnkgYW4gZXZlbnQgb2JqZWN0LlxyXG4gIHZhciBrZXlOYW1lID0gQ29kZU1pcnJvci5rZXlOYW1lID0gZnVuY3Rpb24oZXZlbnQsIG5vU2hpZnQpIHtcclxuICAgIGlmIChwcmVzdG8gJiYgZXZlbnQua2V5Q29kZSA9PSAzNCAmJiBldmVudFtcImNoYXJcIl0pIHJldHVybiBmYWxzZTtcclxuICAgIHZhciBuYW1lID0ga2V5TmFtZXNbZXZlbnQua2V5Q29kZV07XHJcbiAgICBpZiAobmFtZSA9PSBudWxsIHx8IGV2ZW50LmFsdEdyYXBoS2V5KSByZXR1cm4gZmFsc2U7XHJcbiAgICBpZiAoZXZlbnQuYWx0S2V5KSBuYW1lID0gXCJBbHQtXCIgKyBuYW1lO1xyXG4gICAgaWYgKGZsaXBDdHJsQ21kID8gZXZlbnQubWV0YUtleSA6IGV2ZW50LmN0cmxLZXkpIG5hbWUgPSBcIkN0cmwtXCIgKyBuYW1lO1xyXG4gICAgaWYgKGZsaXBDdHJsQ21kID8gZXZlbnQuY3RybEtleSA6IGV2ZW50Lm1ldGFLZXkpIG5hbWUgPSBcIkNtZC1cIiArIG5hbWU7XHJcbiAgICBpZiAoIW5vU2hpZnQgJiYgZXZlbnQuc2hpZnRLZXkpIG5hbWUgPSBcIlNoaWZ0LVwiICsgbmFtZTtcclxuICAgIHJldHVybiBuYW1lO1xyXG4gIH07XHJcblxyXG4gIC8vIEZST01URVhUQVJFQVxyXG5cclxuICBDb2RlTWlycm9yLmZyb21UZXh0QXJlYSA9IGZ1bmN0aW9uKHRleHRhcmVhLCBvcHRpb25zKSB7XHJcbiAgICBpZiAoIW9wdGlvbnMpIG9wdGlvbnMgPSB7fTtcclxuICAgIG9wdGlvbnMudmFsdWUgPSB0ZXh0YXJlYS52YWx1ZTtcclxuICAgIGlmICghb3B0aW9ucy50YWJpbmRleCAmJiB0ZXh0YXJlYS50YWJpbmRleClcclxuICAgICAgb3B0aW9ucy50YWJpbmRleCA9IHRleHRhcmVhLnRhYmluZGV4O1xyXG4gICAgaWYgKCFvcHRpb25zLnBsYWNlaG9sZGVyICYmIHRleHRhcmVhLnBsYWNlaG9sZGVyKVxyXG4gICAgICBvcHRpb25zLnBsYWNlaG9sZGVyID0gdGV4dGFyZWEucGxhY2Vob2xkZXI7XHJcbiAgICAvLyBTZXQgYXV0b2ZvY3VzIHRvIHRydWUgaWYgdGhpcyB0ZXh0YXJlYSBpcyBmb2N1c2VkLCBvciBpZiBpdCBoYXNcclxuICAgIC8vIGF1dG9mb2N1cyBhbmQgbm8gb3RoZXIgZWxlbWVudCBpcyBmb2N1c2VkLlxyXG4gICAgaWYgKG9wdGlvbnMuYXV0b2ZvY3VzID09IG51bGwpIHtcclxuICAgICAgdmFyIGhhc0ZvY3VzID0gYWN0aXZlRWx0KCk7XHJcbiAgICAgIG9wdGlvbnMuYXV0b2ZvY3VzID0gaGFzRm9jdXMgPT0gdGV4dGFyZWEgfHxcclxuICAgICAgICB0ZXh0YXJlYS5nZXRBdHRyaWJ1dGUoXCJhdXRvZm9jdXNcIikgIT0gbnVsbCAmJiBoYXNGb2N1cyA9PSBkb2N1bWVudC5ib2R5O1xyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIHNhdmUoKSB7dGV4dGFyZWEudmFsdWUgPSBjbS5nZXRWYWx1ZSgpO31cclxuICAgIGlmICh0ZXh0YXJlYS5mb3JtKSB7XHJcbiAgICAgIG9uKHRleHRhcmVhLmZvcm0sIFwic3VibWl0XCIsIHNhdmUpO1xyXG4gICAgICAvLyBEZXBsb3JhYmxlIGhhY2sgdG8gbWFrZSB0aGUgc3VibWl0IG1ldGhvZCBkbyB0aGUgcmlnaHQgdGhpbmcuXHJcbiAgICAgIGlmICghb3B0aW9ucy5sZWF2ZVN1Ym1pdE1ldGhvZEFsb25lKSB7XHJcbiAgICAgICAgdmFyIGZvcm0gPSB0ZXh0YXJlYS5mb3JtLCByZWFsU3VibWl0ID0gZm9ybS5zdWJtaXQ7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgIHZhciB3cmFwcGVkU3VibWl0ID0gZm9ybS5zdWJtaXQgPSBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgc2F2ZSgpO1xyXG4gICAgICAgICAgICBmb3JtLnN1Ym1pdCA9IHJlYWxTdWJtaXQ7XHJcbiAgICAgICAgICAgIGZvcm0uc3VibWl0KCk7XHJcbiAgICAgICAgICAgIGZvcm0uc3VibWl0ID0gd3JhcHBlZFN1Ym1pdDtcclxuICAgICAgICAgIH07XHJcbiAgICAgICAgfSBjYXRjaChlKSB7fVxyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgdGV4dGFyZWEuc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiO1xyXG4gICAgdmFyIGNtID0gQ29kZU1pcnJvcihmdW5jdGlvbihub2RlKSB7XHJcbiAgICAgIHRleHRhcmVhLnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKG5vZGUsIHRleHRhcmVhLm5leHRTaWJsaW5nKTtcclxuICAgIH0sIG9wdGlvbnMpO1xyXG4gICAgY20uc2F2ZSA9IHNhdmU7XHJcbiAgICBjbS5nZXRUZXh0QXJlYSA9IGZ1bmN0aW9uKCkgeyByZXR1cm4gdGV4dGFyZWE7IH07XHJcbiAgICBjbS50b1RleHRBcmVhID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgIHNhdmUoKTtcclxuICAgICAgdGV4dGFyZWEucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChjbS5nZXRXcmFwcGVyRWxlbWVudCgpKTtcclxuICAgICAgdGV4dGFyZWEuc3R5bGUuZGlzcGxheSA9IFwiXCI7XHJcbiAgICAgIGlmICh0ZXh0YXJlYS5mb3JtKSB7XHJcbiAgICAgICAgb2ZmKHRleHRhcmVhLmZvcm0sIFwic3VibWl0XCIsIHNhdmUpO1xyXG4gICAgICAgIGlmICh0eXBlb2YgdGV4dGFyZWEuZm9ybS5zdWJtaXQgPT0gXCJmdW5jdGlvblwiKVxyXG4gICAgICAgICAgdGV4dGFyZWEuZm9ybS5zdWJtaXQgPSByZWFsU3VibWl0O1xyXG4gICAgICB9XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIGNtO1xyXG4gIH07XHJcblxyXG4gIC8vIFNUUklORyBTVFJFQU1cclxuXHJcbiAgLy8gRmVkIHRvIHRoZSBtb2RlIHBhcnNlcnMsIHByb3ZpZGVzIGhlbHBlciBmdW5jdGlvbnMgdG8gbWFrZVxyXG4gIC8vIHBhcnNlcnMgbW9yZSBzdWNjaW5jdC5cclxuXHJcbiAgdmFyIFN0cmluZ1N0cmVhbSA9IENvZGVNaXJyb3IuU3RyaW5nU3RyZWFtID0gZnVuY3Rpb24oc3RyaW5nLCB0YWJTaXplKSB7XHJcbiAgICB0aGlzLnBvcyA9IHRoaXMuc3RhcnQgPSAwO1xyXG4gICAgdGhpcy5zdHJpbmcgPSBzdHJpbmc7XHJcbiAgICB0aGlzLnRhYlNpemUgPSB0YWJTaXplIHx8IDg7XHJcbiAgICB0aGlzLmxhc3RDb2x1bW5Qb3MgPSB0aGlzLmxhc3RDb2x1bW5WYWx1ZSA9IDA7XHJcbiAgICB0aGlzLmxpbmVTdGFydCA9IDA7XHJcbiAgfTtcclxuXHJcbiAgU3RyaW5nU3RyZWFtLnByb3RvdHlwZSA9IHtcclxuICAgIGVvbDogZnVuY3Rpb24oKSB7cmV0dXJuIHRoaXMucG9zID49IHRoaXMuc3RyaW5nLmxlbmd0aDt9LFxyXG4gICAgc29sOiBmdW5jdGlvbigpIHtyZXR1cm4gdGhpcy5wb3MgPT0gdGhpcy5saW5lU3RhcnQ7fSxcclxuICAgIHBlZWs6IGZ1bmN0aW9uKCkge3JldHVybiB0aGlzLnN0cmluZy5jaGFyQXQodGhpcy5wb3MpIHx8IHVuZGVmaW5lZDt9LFxyXG4gICAgbmV4dDogZnVuY3Rpb24oKSB7XHJcbiAgICAgIGlmICh0aGlzLnBvcyA8IHRoaXMuc3RyaW5nLmxlbmd0aClcclxuICAgICAgICByZXR1cm4gdGhpcy5zdHJpbmcuY2hhckF0KHRoaXMucG9zKyspO1xyXG4gICAgfSxcclxuICAgIGVhdDogZnVuY3Rpb24obWF0Y2gpIHtcclxuICAgICAgdmFyIGNoID0gdGhpcy5zdHJpbmcuY2hhckF0KHRoaXMucG9zKTtcclxuICAgICAgaWYgKHR5cGVvZiBtYXRjaCA9PSBcInN0cmluZ1wiKSB2YXIgb2sgPSBjaCA9PSBtYXRjaDtcclxuICAgICAgZWxzZSB2YXIgb2sgPSBjaCAmJiAobWF0Y2gudGVzdCA/IG1hdGNoLnRlc3QoY2gpIDogbWF0Y2goY2gpKTtcclxuICAgICAgaWYgKG9rKSB7Kyt0aGlzLnBvczsgcmV0dXJuIGNoO31cclxuICAgIH0sXHJcbiAgICBlYXRXaGlsZTogZnVuY3Rpb24obWF0Y2gpIHtcclxuICAgICAgdmFyIHN0YXJ0ID0gdGhpcy5wb3M7XHJcbiAgICAgIHdoaWxlICh0aGlzLmVhdChtYXRjaCkpe31cclxuICAgICAgcmV0dXJuIHRoaXMucG9zID4gc3RhcnQ7XHJcbiAgICB9LFxyXG4gICAgZWF0U3BhY2U6IGZ1bmN0aW9uKCkge1xyXG4gICAgICB2YXIgc3RhcnQgPSB0aGlzLnBvcztcclxuICAgICAgd2hpbGUgKC9bXFxzXFx1MDBhMF0vLnRlc3QodGhpcy5zdHJpbmcuY2hhckF0KHRoaXMucG9zKSkpICsrdGhpcy5wb3M7XHJcbiAgICAgIHJldHVybiB0aGlzLnBvcyA+IHN0YXJ0O1xyXG4gICAgfSxcclxuICAgIHNraXBUb0VuZDogZnVuY3Rpb24oKSB7dGhpcy5wb3MgPSB0aGlzLnN0cmluZy5sZW5ndGg7fSxcclxuICAgIHNraXBUbzogZnVuY3Rpb24oY2gpIHtcclxuICAgICAgdmFyIGZvdW5kID0gdGhpcy5zdHJpbmcuaW5kZXhPZihjaCwgdGhpcy5wb3MpO1xyXG4gICAgICBpZiAoZm91bmQgPiAtMSkge3RoaXMucG9zID0gZm91bmQ7IHJldHVybiB0cnVlO31cclxuICAgIH0sXHJcbiAgICBiYWNrVXA6IGZ1bmN0aW9uKG4pIHt0aGlzLnBvcyAtPSBuO30sXHJcbiAgICBjb2x1bW46IGZ1bmN0aW9uKCkge1xyXG4gICAgICBpZiAodGhpcy5sYXN0Q29sdW1uUG9zIDwgdGhpcy5zdGFydCkge1xyXG4gICAgICAgIHRoaXMubGFzdENvbHVtblZhbHVlID0gY291bnRDb2x1bW4odGhpcy5zdHJpbmcsIHRoaXMuc3RhcnQsIHRoaXMudGFiU2l6ZSwgdGhpcy5sYXN0Q29sdW1uUG9zLCB0aGlzLmxhc3RDb2x1bW5WYWx1ZSk7XHJcbiAgICAgICAgdGhpcy5sYXN0Q29sdW1uUG9zID0gdGhpcy5zdGFydDtcclxuICAgICAgfVxyXG4gICAgICByZXR1cm4gdGhpcy5sYXN0Q29sdW1uVmFsdWUgLSAodGhpcy5saW5lU3RhcnQgPyBjb3VudENvbHVtbih0aGlzLnN0cmluZywgdGhpcy5saW5lU3RhcnQsIHRoaXMudGFiU2l6ZSkgOiAwKTtcclxuICAgIH0sXHJcbiAgICBpbmRlbnRhdGlvbjogZnVuY3Rpb24oKSB7XHJcbiAgICAgIHJldHVybiBjb3VudENvbHVtbih0aGlzLnN0cmluZywgbnVsbCwgdGhpcy50YWJTaXplKSAtXHJcbiAgICAgICAgKHRoaXMubGluZVN0YXJ0ID8gY291bnRDb2x1bW4odGhpcy5zdHJpbmcsIHRoaXMubGluZVN0YXJ0LCB0aGlzLnRhYlNpemUpIDogMCk7XHJcbiAgICB9LFxyXG4gICAgbWF0Y2g6IGZ1bmN0aW9uKHBhdHRlcm4sIGNvbnN1bWUsIGNhc2VJbnNlbnNpdGl2ZSkge1xyXG4gICAgICBpZiAodHlwZW9mIHBhdHRlcm4gPT0gXCJzdHJpbmdcIikge1xyXG4gICAgICAgIHZhciBjYXNlZCA9IGZ1bmN0aW9uKHN0cikge3JldHVybiBjYXNlSW5zZW5zaXRpdmUgPyBzdHIudG9Mb3dlckNhc2UoKSA6IHN0cjt9O1xyXG4gICAgICAgIHZhciBzdWJzdHIgPSB0aGlzLnN0cmluZy5zdWJzdHIodGhpcy5wb3MsIHBhdHRlcm4ubGVuZ3RoKTtcclxuICAgICAgICBpZiAoY2FzZWQoc3Vic3RyKSA9PSBjYXNlZChwYXR0ZXJuKSkge1xyXG4gICAgICAgICAgaWYgKGNvbnN1bWUgIT09IGZhbHNlKSB0aGlzLnBvcyArPSBwYXR0ZXJuLmxlbmd0aDtcclxuICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgIH1cclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICB2YXIgbWF0Y2ggPSB0aGlzLnN0cmluZy5zbGljZSh0aGlzLnBvcykubWF0Y2gocGF0dGVybik7XHJcbiAgICAgICAgaWYgKG1hdGNoICYmIG1hdGNoLmluZGV4ID4gMCkgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgaWYgKG1hdGNoICYmIGNvbnN1bWUgIT09IGZhbHNlKSB0aGlzLnBvcyArPSBtYXRjaFswXS5sZW5ndGg7XHJcbiAgICAgICAgcmV0dXJuIG1hdGNoO1xyXG4gICAgICB9XHJcbiAgICB9LFxyXG4gICAgY3VycmVudDogZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5zdHJpbmcuc2xpY2UodGhpcy5zdGFydCwgdGhpcy5wb3MpO30sXHJcbiAgICBoaWRlRmlyc3RDaGFyczogZnVuY3Rpb24obiwgaW5uZXIpIHtcclxuICAgICAgdGhpcy5saW5lU3RhcnQgKz0gbjtcclxuICAgICAgdHJ5IHsgcmV0dXJuIGlubmVyKCk7IH1cclxuICAgICAgZmluYWxseSB7IHRoaXMubGluZVN0YXJ0IC09IG47IH1cclxuICAgIH1cclxuICB9O1xyXG5cclxuICAvLyBURVhUTUFSS0VSU1xyXG5cclxuICAvLyBDcmVhdGVkIHdpdGggbWFya1RleHQgYW5kIHNldEJvb2ttYXJrIG1ldGhvZHMuIEEgVGV4dE1hcmtlciBpcyBhXHJcbiAgLy8gaGFuZGxlIHRoYXQgY2FuIGJlIHVzZWQgdG8gY2xlYXIgb3IgZmluZCBhIG1hcmtlZCBwb3NpdGlvbiBpbiB0aGVcclxuICAvLyBkb2N1bWVudC4gTGluZSBvYmplY3RzIGhvbGQgYXJyYXlzIChtYXJrZWRTcGFucykgY29udGFpbmluZ1xyXG4gIC8vIHtmcm9tLCB0bywgbWFya2VyfSBvYmplY3QgcG9pbnRpbmcgdG8gc3VjaCBtYXJrZXIgb2JqZWN0cywgYW5kXHJcbiAgLy8gaW5kaWNhdGluZyB0aGF0IHN1Y2ggYSBtYXJrZXIgaXMgcHJlc2VudCBvbiB0aGF0IGxpbmUuIE11bHRpcGxlXHJcbiAgLy8gbGluZXMgbWF5IHBvaW50IHRvIHRoZSBzYW1lIG1hcmtlciB3aGVuIGl0IHNwYW5zIGFjcm9zcyBsaW5lcy5cclxuICAvLyBUaGUgc3BhbnMgd2lsbCBoYXZlIG51bGwgZm9yIHRoZWlyIGZyb20vdG8gcHJvcGVydGllcyB3aGVuIHRoZVxyXG4gIC8vIG1hcmtlciBjb250aW51ZXMgYmV5b25kIHRoZSBzdGFydC9lbmQgb2YgdGhlIGxpbmUuIE1hcmtlcnMgaGF2ZVxyXG4gIC8vIGxpbmtzIGJhY2sgdG8gdGhlIGxpbmVzIHRoZXkgY3VycmVudGx5IHRvdWNoLlxyXG5cclxuICB2YXIgVGV4dE1hcmtlciA9IENvZGVNaXJyb3IuVGV4dE1hcmtlciA9IGZ1bmN0aW9uKGRvYywgdHlwZSkge1xyXG4gICAgdGhpcy5saW5lcyA9IFtdO1xyXG4gICAgdGhpcy50eXBlID0gdHlwZTtcclxuICAgIHRoaXMuZG9jID0gZG9jO1xyXG4gIH07XHJcbiAgZXZlbnRNaXhpbihUZXh0TWFya2VyKTtcclxuXHJcbiAgLy8gQ2xlYXIgdGhlIG1hcmtlci5cclxuICBUZXh0TWFya2VyLnByb3RvdHlwZS5jbGVhciA9IGZ1bmN0aW9uKCkge1xyXG4gICAgaWYgKHRoaXMuZXhwbGljaXRseUNsZWFyZWQpIHJldHVybjtcclxuICAgIHZhciBjbSA9IHRoaXMuZG9jLmNtLCB3aXRoT3AgPSBjbSAmJiAhY20uY3VyT3A7XHJcbiAgICBpZiAod2l0aE9wKSBzdGFydE9wZXJhdGlvbihjbSk7XHJcbiAgICBpZiAoaGFzSGFuZGxlcih0aGlzLCBcImNsZWFyXCIpKSB7XHJcbiAgICAgIHZhciBmb3VuZCA9IHRoaXMuZmluZCgpO1xyXG4gICAgICBpZiAoZm91bmQpIHNpZ25hbExhdGVyKHRoaXMsIFwiY2xlYXJcIiwgZm91bmQuZnJvbSwgZm91bmQudG8pO1xyXG4gICAgfVxyXG4gICAgdmFyIG1pbiA9IG51bGwsIG1heCA9IG51bGw7XHJcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMubGluZXMubGVuZ3RoOyArK2kpIHtcclxuICAgICAgdmFyIGxpbmUgPSB0aGlzLmxpbmVzW2ldO1xyXG4gICAgICB2YXIgc3BhbiA9IGdldE1hcmtlZFNwYW5Gb3IobGluZS5tYXJrZWRTcGFucywgdGhpcyk7XHJcbiAgICAgIGlmIChjbSAmJiAhdGhpcy5jb2xsYXBzZWQpIHJlZ0xpbmVDaGFuZ2UoY20sIGxpbmVObyhsaW5lKSwgXCJ0ZXh0XCIpO1xyXG4gICAgICBlbHNlIGlmIChjbSkge1xyXG4gICAgICAgIGlmIChzcGFuLnRvICE9IG51bGwpIG1heCA9IGxpbmVObyhsaW5lKTtcclxuICAgICAgICBpZiAoc3Bhbi5mcm9tICE9IG51bGwpIG1pbiA9IGxpbmVObyhsaW5lKTtcclxuICAgICAgfVxyXG4gICAgICBsaW5lLm1hcmtlZFNwYW5zID0gcmVtb3ZlTWFya2VkU3BhbihsaW5lLm1hcmtlZFNwYW5zLCBzcGFuKTtcclxuICAgICAgaWYgKHNwYW4uZnJvbSA9PSBudWxsICYmIHRoaXMuY29sbGFwc2VkICYmICFsaW5lSXNIaWRkZW4odGhpcy5kb2MsIGxpbmUpICYmIGNtKVxyXG4gICAgICAgIHVwZGF0ZUxpbmVIZWlnaHQobGluZSwgdGV4dEhlaWdodChjbS5kaXNwbGF5KSk7XHJcbiAgICB9XHJcbiAgICBpZiAoY20gJiYgdGhpcy5jb2xsYXBzZWQgJiYgIWNtLm9wdGlvbnMubGluZVdyYXBwaW5nKSBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMubGluZXMubGVuZ3RoOyArK2kpIHtcclxuICAgICAgdmFyIHZpc3VhbCA9IHZpc3VhbExpbmUodGhpcy5saW5lc1tpXSksIGxlbiA9IGxpbmVMZW5ndGgodmlzdWFsKTtcclxuICAgICAgaWYgKGxlbiA+IGNtLmRpc3BsYXkubWF4TGluZUxlbmd0aCkge1xyXG4gICAgICAgIGNtLmRpc3BsYXkubWF4TGluZSA9IHZpc3VhbDtcclxuICAgICAgICBjbS5kaXNwbGF5Lm1heExpbmVMZW5ndGggPSBsZW47XHJcbiAgICAgICAgY20uZGlzcGxheS5tYXhMaW5lQ2hhbmdlZCA9IHRydWU7XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBpZiAobWluICE9IG51bGwgJiYgY20gJiYgdGhpcy5jb2xsYXBzZWQpIHJlZ0NoYW5nZShjbSwgbWluLCBtYXggKyAxKTtcclxuICAgIHRoaXMubGluZXMubGVuZ3RoID0gMDtcclxuICAgIHRoaXMuZXhwbGljaXRseUNsZWFyZWQgPSB0cnVlO1xyXG4gICAgaWYgKHRoaXMuYXRvbWljICYmIHRoaXMuZG9jLmNhbnRFZGl0KSB7XHJcbiAgICAgIHRoaXMuZG9jLmNhbnRFZGl0ID0gZmFsc2U7XHJcbiAgICAgIGlmIChjbSkgcmVDaGVja1NlbGVjdGlvbihjbS5kb2MpO1xyXG4gICAgfVxyXG4gICAgaWYgKGNtKSBzaWduYWxMYXRlcihjbSwgXCJtYXJrZXJDbGVhcmVkXCIsIGNtLCB0aGlzKTtcclxuICAgIGlmICh3aXRoT3ApIGVuZE9wZXJhdGlvbihjbSk7XHJcbiAgICBpZiAodGhpcy5wYXJlbnQpIHRoaXMucGFyZW50LmNsZWFyKCk7XHJcbiAgfTtcclxuXHJcbiAgLy8gRmluZCB0aGUgcG9zaXRpb24gb2YgdGhlIG1hcmtlciBpbiB0aGUgZG9jdW1lbnQuIFJldHVybnMgYSB7ZnJvbSxcclxuICAvLyB0b30gb2JqZWN0IGJ5IGRlZmF1bHQuIFNpZGUgY2FuIGJlIHBhc3NlZCB0byBnZXQgYSBzcGVjaWZpYyBzaWRlXHJcbiAgLy8gLS0gMCAoYm90aCksIC0xIChsZWZ0KSwgb3IgMSAocmlnaHQpLiBXaGVuIGxpbmVPYmogaXMgdHJ1ZSwgdGhlXHJcbiAgLy8gUG9zIG9iamVjdHMgcmV0dXJuZWQgY29udGFpbiBhIGxpbmUgb2JqZWN0LCByYXRoZXIgdGhhbiBhIGxpbmVcclxuICAvLyBudW1iZXIgKHVzZWQgdG8gcHJldmVudCBsb29raW5nIHVwIHRoZSBzYW1lIGxpbmUgdHdpY2UpLlxyXG4gIFRleHRNYXJrZXIucHJvdG90eXBlLmZpbmQgPSBmdW5jdGlvbihzaWRlLCBsaW5lT2JqKSB7XHJcbiAgICBpZiAoc2lkZSA9PSBudWxsICYmIHRoaXMudHlwZSA9PSBcImJvb2ttYXJrXCIpIHNpZGUgPSAxO1xyXG4gICAgdmFyIGZyb20sIHRvO1xyXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLmxpbmVzLmxlbmd0aDsgKytpKSB7XHJcbiAgICAgIHZhciBsaW5lID0gdGhpcy5saW5lc1tpXTtcclxuICAgICAgdmFyIHNwYW4gPSBnZXRNYXJrZWRTcGFuRm9yKGxpbmUubWFya2VkU3BhbnMsIHRoaXMpO1xyXG4gICAgICBpZiAoc3Bhbi5mcm9tICE9IG51bGwpIHtcclxuICAgICAgICBmcm9tID0gUG9zKGxpbmVPYmogPyBsaW5lIDogbGluZU5vKGxpbmUpLCBzcGFuLmZyb20pO1xyXG4gICAgICAgIGlmIChzaWRlID09IC0xKSByZXR1cm4gZnJvbTtcclxuICAgICAgfVxyXG4gICAgICBpZiAoc3Bhbi50byAhPSBudWxsKSB7XHJcbiAgICAgICAgdG8gPSBQb3MobGluZU9iaiA/IGxpbmUgOiBsaW5lTm8obGluZSksIHNwYW4udG8pO1xyXG4gICAgICAgIGlmIChzaWRlID09IDEpIHJldHVybiB0bztcclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIGZyb20gJiYge2Zyb206IGZyb20sIHRvOiB0b307XHJcbiAgfTtcclxuXHJcbiAgLy8gU2lnbmFscyB0aGF0IHRoZSBtYXJrZXIncyB3aWRnZXQgY2hhbmdlZCwgYW5kIHN1cnJvdW5kaW5nIGxheW91dFxyXG4gIC8vIHNob3VsZCBiZSByZWNvbXB1dGVkLlxyXG4gIFRleHRNYXJrZXIucHJvdG90eXBlLmNoYW5nZWQgPSBmdW5jdGlvbigpIHtcclxuICAgIHZhciBwb3MgPSB0aGlzLmZpbmQoLTEsIHRydWUpLCB3aWRnZXQgPSB0aGlzLCBjbSA9IHRoaXMuZG9jLmNtO1xyXG4gICAgaWYgKCFwb3MgfHwgIWNtKSByZXR1cm47XHJcbiAgICBydW5Jbk9wKGNtLCBmdW5jdGlvbigpIHtcclxuICAgICAgdmFyIGxpbmUgPSBwb3MubGluZSwgbGluZU4gPSBsaW5lTm8ocG9zLmxpbmUpO1xyXG4gICAgICB2YXIgdmlldyA9IGZpbmRWaWV3Rm9yTGluZShjbSwgbGluZU4pO1xyXG4gICAgICBpZiAodmlldykge1xyXG4gICAgICAgIGNsZWFyTGluZU1lYXN1cmVtZW50Q2FjaGVGb3Iodmlldyk7XHJcbiAgICAgICAgY20uY3VyT3Auc2VsZWN0aW9uQ2hhbmdlZCA9IGNtLmN1ck9wLmZvcmNlVXBkYXRlID0gdHJ1ZTtcclxuICAgICAgfVxyXG4gICAgICBjbS5jdXJPcC51cGRhdGVNYXhMaW5lID0gdHJ1ZTtcclxuICAgICAgaWYgKCFsaW5lSXNIaWRkZW4od2lkZ2V0LmRvYywgbGluZSkgJiYgd2lkZ2V0LmhlaWdodCAhPSBudWxsKSB7XHJcbiAgICAgICAgdmFyIG9sZEhlaWdodCA9IHdpZGdldC5oZWlnaHQ7XHJcbiAgICAgICAgd2lkZ2V0LmhlaWdodCA9IG51bGw7XHJcbiAgICAgICAgdmFyIGRIZWlnaHQgPSB3aWRnZXRIZWlnaHQod2lkZ2V0KSAtIG9sZEhlaWdodDtcclxuICAgICAgICBpZiAoZEhlaWdodClcclxuICAgICAgICAgIHVwZGF0ZUxpbmVIZWlnaHQobGluZSwgbGluZS5oZWlnaHQgKyBkSGVpZ2h0KTtcclxuICAgICAgfVxyXG4gICAgfSk7XHJcbiAgfTtcclxuXHJcbiAgVGV4dE1hcmtlci5wcm90b3R5cGUuYXR0YWNoTGluZSA9IGZ1bmN0aW9uKGxpbmUpIHtcclxuICAgIGlmICghdGhpcy5saW5lcy5sZW5ndGggJiYgdGhpcy5kb2MuY20pIHtcclxuICAgICAgdmFyIG9wID0gdGhpcy5kb2MuY20uY3VyT3A7XHJcbiAgICAgIGlmICghb3AubWF5YmVIaWRkZW5NYXJrZXJzIHx8IGluZGV4T2Yob3AubWF5YmVIaWRkZW5NYXJrZXJzLCB0aGlzKSA9PSAtMSlcclxuICAgICAgICAob3AubWF5YmVVbmhpZGRlbk1hcmtlcnMgfHwgKG9wLm1heWJlVW5oaWRkZW5NYXJrZXJzID0gW10pKS5wdXNoKHRoaXMpO1xyXG4gICAgfVxyXG4gICAgdGhpcy5saW5lcy5wdXNoKGxpbmUpO1xyXG4gIH07XHJcbiAgVGV4dE1hcmtlci5wcm90b3R5cGUuZGV0YWNoTGluZSA9IGZ1bmN0aW9uKGxpbmUpIHtcclxuICAgIHRoaXMubGluZXMuc3BsaWNlKGluZGV4T2YodGhpcy5saW5lcywgbGluZSksIDEpO1xyXG4gICAgaWYgKCF0aGlzLmxpbmVzLmxlbmd0aCAmJiB0aGlzLmRvYy5jbSkge1xyXG4gICAgICB2YXIgb3AgPSB0aGlzLmRvYy5jbS5jdXJPcDtcclxuICAgICAgKG9wLm1heWJlSGlkZGVuTWFya2VycyB8fCAob3AubWF5YmVIaWRkZW5NYXJrZXJzID0gW10pKS5wdXNoKHRoaXMpO1xyXG4gICAgfVxyXG4gIH07XHJcblxyXG4gIC8vIENvbGxhcHNlZCBtYXJrZXJzIGhhdmUgdW5pcXVlIGlkcywgaW4gb3JkZXIgdG8gYmUgYWJsZSB0byBvcmRlclxyXG4gIC8vIHRoZW0sIHdoaWNoIGlzIG5lZWRlZCBmb3IgdW5pcXVlbHkgZGV0ZXJtaW5pbmcgYW4gb3V0ZXIgbWFya2VyXHJcbiAgLy8gd2hlbiB0aGV5IG92ZXJsYXAgKHRoZXkgbWF5IG5lc3QsIGJ1dCBub3QgcGFydGlhbGx5IG92ZXJsYXApLlxyXG4gIHZhciBuZXh0TWFya2VySWQgPSAwO1xyXG5cclxuICAvLyBDcmVhdGUgYSBtYXJrZXIsIHdpcmUgaXQgdXAgdG8gdGhlIHJpZ2h0IGxpbmVzLCBhbmRcclxuICBmdW5jdGlvbiBtYXJrVGV4dChkb2MsIGZyb20sIHRvLCBvcHRpb25zLCB0eXBlKSB7XHJcbiAgICAvLyBTaGFyZWQgbWFya2VycyAoYWNyb3NzIGxpbmtlZCBkb2N1bWVudHMpIGFyZSBoYW5kbGVkIHNlcGFyYXRlbHlcclxuICAgIC8vIChtYXJrVGV4dFNoYXJlZCB3aWxsIGNhbGwgb3V0IHRvIHRoaXMgYWdhaW4sIG9uY2UgcGVyXHJcbiAgICAvLyBkb2N1bWVudCkuXHJcbiAgICBpZiAob3B0aW9ucyAmJiBvcHRpb25zLnNoYXJlZCkgcmV0dXJuIG1hcmtUZXh0U2hhcmVkKGRvYywgZnJvbSwgdG8sIG9wdGlvbnMsIHR5cGUpO1xyXG4gICAgLy8gRW5zdXJlIHdlIGFyZSBpbiBhbiBvcGVyYXRpb24uXHJcbiAgICBpZiAoZG9jLmNtICYmICFkb2MuY20uY3VyT3ApIHJldHVybiBvcGVyYXRpb24oZG9jLmNtLCBtYXJrVGV4dCkoZG9jLCBmcm9tLCB0bywgb3B0aW9ucywgdHlwZSk7XHJcblxyXG4gICAgdmFyIG1hcmtlciA9IG5ldyBUZXh0TWFya2VyKGRvYywgdHlwZSksIGRpZmYgPSBjbXAoZnJvbSwgdG8pO1xyXG4gICAgaWYgKG9wdGlvbnMpIGNvcHlPYmoob3B0aW9ucywgbWFya2VyLCBmYWxzZSk7XHJcbiAgICAvLyBEb24ndCBjb25uZWN0IGVtcHR5IG1hcmtlcnMgdW5sZXNzIGNsZWFyV2hlbkVtcHR5IGlzIGZhbHNlXHJcbiAgICBpZiAoZGlmZiA+IDAgfHwgZGlmZiA9PSAwICYmIG1hcmtlci5jbGVhcldoZW5FbXB0eSAhPT0gZmFsc2UpXHJcbiAgICAgIHJldHVybiBtYXJrZXI7XHJcbiAgICBpZiAobWFya2VyLnJlcGxhY2VkV2l0aCkge1xyXG4gICAgICAvLyBTaG93aW5nIHVwIGFzIGEgd2lkZ2V0IGltcGxpZXMgY29sbGFwc2VkICh3aWRnZXQgcmVwbGFjZXMgdGV4dClcclxuICAgICAgbWFya2VyLmNvbGxhcHNlZCA9IHRydWU7XHJcbiAgICAgIG1hcmtlci53aWRnZXROb2RlID0gZWx0KFwic3BhblwiLCBbbWFya2VyLnJlcGxhY2VkV2l0aF0sIFwiQ29kZU1pcnJvci13aWRnZXRcIik7XHJcbiAgICAgIGlmICghb3B0aW9ucy5oYW5kbGVNb3VzZUV2ZW50cykgbWFya2VyLndpZGdldE5vZGUuaWdub3JlRXZlbnRzID0gdHJ1ZTtcclxuICAgICAgaWYgKG9wdGlvbnMuaW5zZXJ0TGVmdCkgbWFya2VyLndpZGdldE5vZGUuaW5zZXJ0TGVmdCA9IHRydWU7XHJcbiAgICB9XHJcbiAgICBpZiAobWFya2VyLmNvbGxhcHNlZCkge1xyXG4gICAgICBpZiAoY29uZmxpY3RpbmdDb2xsYXBzZWRSYW5nZShkb2MsIGZyb20ubGluZSwgZnJvbSwgdG8sIG1hcmtlcikgfHxcclxuICAgICAgICAgIGZyb20ubGluZSAhPSB0by5saW5lICYmIGNvbmZsaWN0aW5nQ29sbGFwc2VkUmFuZ2UoZG9jLCB0by5saW5lLCBmcm9tLCB0bywgbWFya2VyKSlcclxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJJbnNlcnRpbmcgY29sbGFwc2VkIG1hcmtlciBwYXJ0aWFsbHkgb3ZlcmxhcHBpbmcgYW4gZXhpc3Rpbmcgb25lXCIpO1xyXG4gICAgICBzYXdDb2xsYXBzZWRTcGFucyA9IHRydWU7XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKG1hcmtlci5hZGRUb0hpc3RvcnkpXHJcbiAgICAgIGFkZENoYW5nZVRvSGlzdG9yeShkb2MsIHtmcm9tOiBmcm9tLCB0bzogdG8sIG9yaWdpbjogXCJtYXJrVGV4dFwifSwgZG9jLnNlbCwgTmFOKTtcclxuXHJcbiAgICB2YXIgY3VyTGluZSA9IGZyb20ubGluZSwgY20gPSBkb2MuY20sIHVwZGF0ZU1heExpbmU7XHJcbiAgICBkb2MuaXRlcihjdXJMaW5lLCB0by5saW5lICsgMSwgZnVuY3Rpb24obGluZSkge1xyXG4gICAgICBpZiAoY20gJiYgbWFya2VyLmNvbGxhcHNlZCAmJiAhY20ub3B0aW9ucy5saW5lV3JhcHBpbmcgJiYgdmlzdWFsTGluZShsaW5lKSA9PSBjbS5kaXNwbGF5Lm1heExpbmUpXHJcbiAgICAgICAgdXBkYXRlTWF4TGluZSA9IHRydWU7XHJcbiAgICAgIGlmIChtYXJrZXIuY29sbGFwc2VkICYmIGN1ckxpbmUgIT0gZnJvbS5saW5lKSB1cGRhdGVMaW5lSGVpZ2h0KGxpbmUsIDApO1xyXG4gICAgICBhZGRNYXJrZWRTcGFuKGxpbmUsIG5ldyBNYXJrZWRTcGFuKG1hcmtlcixcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJMaW5lID09IGZyb20ubGluZSA/IGZyb20uY2ggOiBudWxsLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1ckxpbmUgPT0gdG8ubGluZSA/IHRvLmNoIDogbnVsbCkpO1xyXG4gICAgICArK2N1ckxpbmU7XHJcbiAgICB9KTtcclxuICAgIC8vIGxpbmVJc0hpZGRlbiBkZXBlbmRzIG9uIHRoZSBwcmVzZW5jZSBvZiB0aGUgc3BhbnMsIHNvIG5lZWRzIGEgc2Vjb25kIHBhc3NcclxuICAgIGlmIChtYXJrZXIuY29sbGFwc2VkKSBkb2MuaXRlcihmcm9tLmxpbmUsIHRvLmxpbmUgKyAxLCBmdW5jdGlvbihsaW5lKSB7XHJcbiAgICAgIGlmIChsaW5lSXNIaWRkZW4oZG9jLCBsaW5lKSkgdXBkYXRlTGluZUhlaWdodChsaW5lLCAwKTtcclxuICAgIH0pO1xyXG5cclxuICAgIGlmIChtYXJrZXIuY2xlYXJPbkVudGVyKSBvbihtYXJrZXIsIFwiYmVmb3JlQ3Vyc29yRW50ZXJcIiwgZnVuY3Rpb24oKSB7IG1hcmtlci5jbGVhcigpOyB9KTtcclxuXHJcbiAgICBpZiAobWFya2VyLnJlYWRPbmx5KSB7XHJcbiAgICAgIHNhd1JlYWRPbmx5U3BhbnMgPSB0cnVlO1xyXG4gICAgICBpZiAoZG9jLmhpc3RvcnkuZG9uZS5sZW5ndGggfHwgZG9jLmhpc3RvcnkudW5kb25lLmxlbmd0aClcclxuICAgICAgICBkb2MuY2xlYXJIaXN0b3J5KCk7XHJcbiAgICB9XHJcbiAgICBpZiAobWFya2VyLmNvbGxhcHNlZCkge1xyXG4gICAgICBtYXJrZXIuaWQgPSArK25leHRNYXJrZXJJZDtcclxuICAgICAgbWFya2VyLmF0b21pYyA9IHRydWU7XHJcbiAgICB9XHJcbiAgICBpZiAoY20pIHtcclxuICAgICAgLy8gU3luYyBlZGl0b3Igc3RhdGVcclxuICAgICAgaWYgKHVwZGF0ZU1heExpbmUpIGNtLmN1ck9wLnVwZGF0ZU1heExpbmUgPSB0cnVlO1xyXG4gICAgICBpZiAobWFya2VyLmNvbGxhcHNlZClcclxuICAgICAgICByZWdDaGFuZ2UoY20sIGZyb20ubGluZSwgdG8ubGluZSArIDEpO1xyXG4gICAgICBlbHNlIGlmIChtYXJrZXIuY2xhc3NOYW1lIHx8IG1hcmtlci50aXRsZSB8fCBtYXJrZXIuc3RhcnRTdHlsZSB8fCBtYXJrZXIuZW5kU3R5bGUpXHJcbiAgICAgICAgZm9yICh2YXIgaSA9IGZyb20ubGluZTsgaSA8PSB0by5saW5lOyBpKyspIHJlZ0xpbmVDaGFuZ2UoY20sIGksIFwidGV4dFwiKTtcclxuICAgICAgaWYgKG1hcmtlci5hdG9taWMpIHJlQ2hlY2tTZWxlY3Rpb24oY20uZG9jKTtcclxuICAgICAgc2lnbmFsTGF0ZXIoY20sIFwibWFya2VyQWRkZWRcIiwgY20sIG1hcmtlcik7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gbWFya2VyO1xyXG4gIH1cclxuXHJcbiAgLy8gU0hBUkVEIFRFWFRNQVJLRVJTXHJcblxyXG4gIC8vIEEgc2hhcmVkIG1hcmtlciBzcGFucyBtdWx0aXBsZSBsaW5rZWQgZG9jdW1lbnRzLiBJdCBpc1xyXG4gIC8vIGltcGxlbWVudGVkIGFzIGEgbWV0YS1tYXJrZXItb2JqZWN0IGNvbnRyb2xsaW5nIG11bHRpcGxlIG5vcm1hbFxyXG4gIC8vIG1hcmtlcnMuXHJcbiAgdmFyIFNoYXJlZFRleHRNYXJrZXIgPSBDb2RlTWlycm9yLlNoYXJlZFRleHRNYXJrZXIgPSBmdW5jdGlvbihtYXJrZXJzLCBwcmltYXJ5KSB7XHJcbiAgICB0aGlzLm1hcmtlcnMgPSBtYXJrZXJzO1xyXG4gICAgdGhpcy5wcmltYXJ5ID0gcHJpbWFyeTtcclxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbWFya2Vycy5sZW5ndGg7ICsraSlcclxuICAgICAgbWFya2Vyc1tpXS5wYXJlbnQgPSB0aGlzO1xyXG4gIH07XHJcbiAgZXZlbnRNaXhpbihTaGFyZWRUZXh0TWFya2VyKTtcclxuXHJcbiAgU2hhcmVkVGV4dE1hcmtlci5wcm90b3R5cGUuY2xlYXIgPSBmdW5jdGlvbigpIHtcclxuICAgIGlmICh0aGlzLmV4cGxpY2l0bHlDbGVhcmVkKSByZXR1cm47XHJcbiAgICB0aGlzLmV4cGxpY2l0bHlDbGVhcmVkID0gdHJ1ZTtcclxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5tYXJrZXJzLmxlbmd0aDsgKytpKVxyXG4gICAgICB0aGlzLm1hcmtlcnNbaV0uY2xlYXIoKTtcclxuICAgIHNpZ25hbExhdGVyKHRoaXMsIFwiY2xlYXJcIik7XHJcbiAgfTtcclxuICBTaGFyZWRUZXh0TWFya2VyLnByb3RvdHlwZS5maW5kID0gZnVuY3Rpb24oc2lkZSwgbGluZU9iaikge1xyXG4gICAgcmV0dXJuIHRoaXMucHJpbWFyeS5maW5kKHNpZGUsIGxpbmVPYmopO1xyXG4gIH07XHJcblxyXG4gIGZ1bmN0aW9uIG1hcmtUZXh0U2hhcmVkKGRvYywgZnJvbSwgdG8sIG9wdGlvbnMsIHR5cGUpIHtcclxuICAgIG9wdGlvbnMgPSBjb3B5T2JqKG9wdGlvbnMpO1xyXG4gICAgb3B0aW9ucy5zaGFyZWQgPSBmYWxzZTtcclxuICAgIHZhciBtYXJrZXJzID0gW21hcmtUZXh0KGRvYywgZnJvbSwgdG8sIG9wdGlvbnMsIHR5cGUpXSwgcHJpbWFyeSA9IG1hcmtlcnNbMF07XHJcbiAgICB2YXIgd2lkZ2V0ID0gb3B0aW9ucy53aWRnZXROb2RlO1xyXG4gICAgbGlua2VkRG9jcyhkb2MsIGZ1bmN0aW9uKGRvYykge1xyXG4gICAgICBpZiAod2lkZ2V0KSBvcHRpb25zLndpZGdldE5vZGUgPSB3aWRnZXQuY2xvbmVOb2RlKHRydWUpO1xyXG4gICAgICBtYXJrZXJzLnB1c2gobWFya1RleHQoZG9jLCBjbGlwUG9zKGRvYywgZnJvbSksIGNsaXBQb3MoZG9jLCB0byksIG9wdGlvbnMsIHR5cGUpKTtcclxuICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBkb2MubGlua2VkLmxlbmd0aDsgKytpKVxyXG4gICAgICAgIGlmIChkb2MubGlua2VkW2ldLmlzUGFyZW50KSByZXR1cm47XHJcbiAgICAgIHByaW1hcnkgPSBsc3QobWFya2Vycyk7XHJcbiAgICB9KTtcclxuICAgIHJldHVybiBuZXcgU2hhcmVkVGV4dE1hcmtlcihtYXJrZXJzLCBwcmltYXJ5KTtcclxuICB9XHJcblxyXG4gIGZ1bmN0aW9uIGZpbmRTaGFyZWRNYXJrZXJzKGRvYykge1xyXG4gICAgcmV0dXJuIGRvYy5maW5kTWFya3MoUG9zKGRvYy5maXJzdCwgMCksIGRvYy5jbGlwUG9zKFBvcyhkb2MubGFzdExpbmUoKSkpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24obSkgeyByZXR1cm4gbS5wYXJlbnQ7IH0pO1xyXG4gIH1cclxuXHJcbiAgZnVuY3Rpb24gY29weVNoYXJlZE1hcmtlcnMoZG9jLCBtYXJrZXJzKSB7XHJcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IG1hcmtlcnMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgdmFyIG1hcmtlciA9IG1hcmtlcnNbaV0sIHBvcyA9IG1hcmtlci5maW5kKCk7XHJcbiAgICAgIHZhciBtRnJvbSA9IGRvYy5jbGlwUG9zKHBvcy5mcm9tKSwgbVRvID0gZG9jLmNsaXBQb3MocG9zLnRvKTtcclxuICAgICAgaWYgKGNtcChtRnJvbSwgbVRvKSkge1xyXG4gICAgICAgIHZhciBzdWJNYXJrID0gbWFya1RleHQoZG9jLCBtRnJvbSwgbVRvLCBtYXJrZXIucHJpbWFyeSwgbWFya2VyLnByaW1hcnkudHlwZSk7XHJcbiAgICAgICAgbWFya2VyLm1hcmtlcnMucHVzaChzdWJNYXJrKTtcclxuICAgICAgICBzdWJNYXJrLnBhcmVudCA9IG1hcmtlcjtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgZnVuY3Rpb24gZGV0YWNoU2hhcmVkTWFya2VycyhtYXJrZXJzKSB7XHJcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IG1hcmtlcnMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgdmFyIG1hcmtlciA9IG1hcmtlcnNbaV0sIGxpbmtlZCA9IFttYXJrZXIucHJpbWFyeS5kb2NdOztcclxuICAgICAgbGlua2VkRG9jcyhtYXJrZXIucHJpbWFyeS5kb2MsIGZ1bmN0aW9uKGQpIHsgbGlua2VkLnB1c2goZCk7IH0pO1xyXG4gICAgICBmb3IgKHZhciBqID0gMDsgaiA8IG1hcmtlci5tYXJrZXJzLmxlbmd0aDsgaisrKSB7XHJcbiAgICAgICAgdmFyIHN1Yk1hcmtlciA9IG1hcmtlci5tYXJrZXJzW2pdO1xyXG4gICAgICAgIGlmIChpbmRleE9mKGxpbmtlZCwgc3ViTWFya2VyLmRvYykgPT0gLTEpIHtcclxuICAgICAgICAgIHN1Yk1hcmtlci5wYXJlbnQgPSBudWxsO1xyXG4gICAgICAgICAgbWFya2VyLm1hcmtlcnMuc3BsaWNlKGotLSwgMSk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvLyBURVhUTUFSS0VSIFNQQU5TXHJcblxyXG4gIGZ1bmN0aW9uIE1hcmtlZFNwYW4obWFya2VyLCBmcm9tLCB0bykge1xyXG4gICAgdGhpcy5tYXJrZXIgPSBtYXJrZXI7XHJcbiAgICB0aGlzLmZyb20gPSBmcm9tOyB0aGlzLnRvID0gdG87XHJcbiAgfVxyXG5cclxuICAvLyBTZWFyY2ggYW4gYXJyYXkgb2Ygc3BhbnMgZm9yIGEgc3BhbiBtYXRjaGluZyB0aGUgZ2l2ZW4gbWFya2VyLlxyXG4gIGZ1bmN0aW9uIGdldE1hcmtlZFNwYW5Gb3Ioc3BhbnMsIG1hcmtlcikge1xyXG4gICAgaWYgKHNwYW5zKSBmb3IgKHZhciBpID0gMDsgaSA8IHNwYW5zLmxlbmd0aDsgKytpKSB7XHJcbiAgICAgIHZhciBzcGFuID0gc3BhbnNbaV07XHJcbiAgICAgIGlmIChzcGFuLm1hcmtlciA9PSBtYXJrZXIpIHJldHVybiBzcGFuO1xyXG4gICAgfVxyXG4gIH1cclxuICAvLyBSZW1vdmUgYSBzcGFuIGZyb20gYW4gYXJyYXksIHJldHVybmluZyB1bmRlZmluZWQgaWYgbm8gc3BhbnMgYXJlXHJcbiAgLy8gbGVmdCAod2UgZG9uJ3Qgc3RvcmUgYXJyYXlzIGZvciBsaW5lcyB3aXRob3V0IHNwYW5zKS5cclxuICBmdW5jdGlvbiByZW1vdmVNYXJrZWRTcGFuKHNwYW5zLCBzcGFuKSB7XHJcbiAgICBmb3IgKHZhciByLCBpID0gMDsgaSA8IHNwYW5zLmxlbmd0aDsgKytpKVxyXG4gICAgICBpZiAoc3BhbnNbaV0gIT0gc3BhbikgKHIgfHwgKHIgPSBbXSkpLnB1c2goc3BhbnNbaV0pO1xyXG4gICAgcmV0dXJuIHI7XHJcbiAgfVxyXG4gIC8vIEFkZCBhIHNwYW4gdG8gYSBsaW5lLlxyXG4gIGZ1bmN0aW9uIGFkZE1hcmtlZFNwYW4obGluZSwgc3Bhbikge1xyXG4gICAgbGluZS5tYXJrZWRTcGFucyA9IGxpbmUubWFya2VkU3BhbnMgPyBsaW5lLm1hcmtlZFNwYW5zLmNvbmNhdChbc3Bhbl0pIDogW3NwYW5dO1xyXG4gICAgc3Bhbi5tYXJrZXIuYXR0YWNoTGluZShsaW5lKTtcclxuICB9XHJcblxyXG4gIC8vIFVzZWQgZm9yIHRoZSBhbGdvcml0aG0gdGhhdCBhZGp1c3RzIG1hcmtlcnMgZm9yIGEgY2hhbmdlIGluIHRoZVxyXG4gIC8vIGRvY3VtZW50LiBUaGVzZSBmdW5jdGlvbnMgY3V0IGFuIGFycmF5IG9mIHNwYW5zIGF0IGEgZ2l2ZW5cclxuICAvLyBjaGFyYWN0ZXIgcG9zaXRpb24sIHJldHVybmluZyBhbiBhcnJheSBvZiByZW1haW5pbmcgY2h1bmtzIChvclxyXG4gIC8vIHVuZGVmaW5lZCBpZiBub3RoaW5nIHJlbWFpbnMpLlxyXG4gIGZ1bmN0aW9uIG1hcmtlZFNwYW5zQmVmb3JlKG9sZCwgc3RhcnRDaCwgaXNJbnNlcnQpIHtcclxuICAgIGlmIChvbGQpIGZvciAodmFyIGkgPSAwLCBudzsgaSA8IG9sZC5sZW5ndGg7ICsraSkge1xyXG4gICAgICB2YXIgc3BhbiA9IG9sZFtpXSwgbWFya2VyID0gc3Bhbi5tYXJrZXI7XHJcbiAgICAgIHZhciBzdGFydHNCZWZvcmUgPSBzcGFuLmZyb20gPT0gbnVsbCB8fCAobWFya2VyLmluY2x1c2l2ZUxlZnQgPyBzcGFuLmZyb20gPD0gc3RhcnRDaCA6IHNwYW4uZnJvbSA8IHN0YXJ0Q2gpO1xyXG4gICAgICBpZiAoc3RhcnRzQmVmb3JlIHx8IHNwYW4uZnJvbSA9PSBzdGFydENoICYmIG1hcmtlci50eXBlID09IFwiYm9va21hcmtcIiAmJiAoIWlzSW5zZXJ0IHx8ICFzcGFuLm1hcmtlci5pbnNlcnRMZWZ0KSkge1xyXG4gICAgICAgIHZhciBlbmRzQWZ0ZXIgPSBzcGFuLnRvID09IG51bGwgfHwgKG1hcmtlci5pbmNsdXNpdmVSaWdodCA/IHNwYW4udG8gPj0gc3RhcnRDaCA6IHNwYW4udG8gPiBzdGFydENoKTtcclxuICAgICAgICAobncgfHwgKG53ID0gW10pKS5wdXNoKG5ldyBNYXJrZWRTcGFuKG1hcmtlciwgc3Bhbi5mcm9tLCBlbmRzQWZ0ZXIgPyBudWxsIDogc3Bhbi50bykpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4gbnc7XHJcbiAgfVxyXG4gIGZ1bmN0aW9uIG1hcmtlZFNwYW5zQWZ0ZXIob2xkLCBlbmRDaCwgaXNJbnNlcnQpIHtcclxuICAgIGlmIChvbGQpIGZvciAodmFyIGkgPSAwLCBudzsgaSA8IG9sZC5sZW5ndGg7ICsraSkge1xyXG4gICAgICB2YXIgc3BhbiA9IG9sZFtpXSwgbWFya2VyID0gc3Bhbi5tYXJrZXI7XHJcbiAgICAgIHZhciBlbmRzQWZ0ZXIgPSBzcGFuLnRvID09IG51bGwgfHwgKG1hcmtlci5pbmNsdXNpdmVSaWdodCA/IHNwYW4udG8gPj0gZW5kQ2ggOiBzcGFuLnRvID4gZW5kQ2gpO1xyXG4gICAgICBpZiAoZW5kc0FmdGVyIHx8IHNwYW4uZnJvbSA9PSBlbmRDaCAmJiBtYXJrZXIudHlwZSA9PSBcImJvb2ttYXJrXCIgJiYgKCFpc0luc2VydCB8fCBzcGFuLm1hcmtlci5pbnNlcnRMZWZ0KSkge1xyXG4gICAgICAgIHZhciBzdGFydHNCZWZvcmUgPSBzcGFuLmZyb20gPT0gbnVsbCB8fCAobWFya2VyLmluY2x1c2l2ZUxlZnQgPyBzcGFuLmZyb20gPD0gZW5kQ2ggOiBzcGFuLmZyb20gPCBlbmRDaCk7XHJcbiAgICAgICAgKG53IHx8IChudyA9IFtdKSkucHVzaChuZXcgTWFya2VkU3BhbihtYXJrZXIsIHN0YXJ0c0JlZm9yZSA/IG51bGwgOiBzcGFuLmZyb20gLSBlbmRDaCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNwYW4udG8gPT0gbnVsbCA/IG51bGwgOiBzcGFuLnRvIC0gZW5kQ2gpKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIG53O1xyXG4gIH1cclxuXHJcbiAgLy8gR2l2ZW4gYSBjaGFuZ2Ugb2JqZWN0LCBjb21wdXRlIHRoZSBuZXcgc2V0IG9mIG1hcmtlciBzcGFucyB0aGF0XHJcbiAgLy8gY292ZXIgdGhlIGxpbmUgaW4gd2hpY2ggdGhlIGNoYW5nZSB0b29rIHBsYWNlLiBSZW1vdmVzIHNwYW5zXHJcbiAgLy8gZW50aXJlbHkgd2l0aGluIHRoZSBjaGFuZ2UsIHJlY29ubmVjdHMgc3BhbnMgYmVsb25naW5nIHRvIHRoZVxyXG4gIC8vIHNhbWUgbWFya2VyIHRoYXQgYXBwZWFyIG9uIGJvdGggc2lkZXMgb2YgdGhlIGNoYW5nZSwgYW5kIGN1dHMgb2ZmXHJcbiAgLy8gc3BhbnMgcGFydGlhbGx5IHdpdGhpbiB0aGUgY2hhbmdlLiBSZXR1cm5zIGFuIGFycmF5IG9mIHNwYW5cclxuICAvLyBhcnJheXMgd2l0aCBvbmUgZWxlbWVudCBmb3IgZWFjaCBsaW5lIGluIChhZnRlcikgdGhlIGNoYW5nZS5cclxuICBmdW5jdGlvbiBzdHJldGNoU3BhbnNPdmVyQ2hhbmdlKGRvYywgY2hhbmdlKSB7XHJcbiAgICB2YXIgb2xkRmlyc3QgPSBpc0xpbmUoZG9jLCBjaGFuZ2UuZnJvbS5saW5lKSAmJiBnZXRMaW5lKGRvYywgY2hhbmdlLmZyb20ubGluZSkubWFya2VkU3BhbnM7XHJcbiAgICB2YXIgb2xkTGFzdCA9IGlzTGluZShkb2MsIGNoYW5nZS50by5saW5lKSAmJiBnZXRMaW5lKGRvYywgY2hhbmdlLnRvLmxpbmUpLm1hcmtlZFNwYW5zO1xyXG4gICAgaWYgKCFvbGRGaXJzdCAmJiAhb2xkTGFzdCkgcmV0dXJuIG51bGw7XHJcblxyXG4gICAgdmFyIHN0YXJ0Q2ggPSBjaGFuZ2UuZnJvbS5jaCwgZW5kQ2ggPSBjaGFuZ2UudG8uY2gsIGlzSW5zZXJ0ID0gY21wKGNoYW5nZS5mcm9tLCBjaGFuZ2UudG8pID09IDA7XHJcbiAgICAvLyBHZXQgdGhlIHNwYW5zIHRoYXQgJ3N0aWNrIG91dCcgb24gYm90aCBzaWRlc1xyXG4gICAgdmFyIGZpcnN0ID0gbWFya2VkU3BhbnNCZWZvcmUob2xkRmlyc3QsIHN0YXJ0Q2gsIGlzSW5zZXJ0KTtcclxuICAgIHZhciBsYXN0ID0gbWFya2VkU3BhbnNBZnRlcihvbGRMYXN0LCBlbmRDaCwgaXNJbnNlcnQpO1xyXG5cclxuICAgIC8vIE5leHQsIG1lcmdlIHRob3NlIHR3byBlbmRzXHJcbiAgICB2YXIgc2FtZUxpbmUgPSBjaGFuZ2UudGV4dC5sZW5ndGggPT0gMSwgb2Zmc2V0ID0gbHN0KGNoYW5nZS50ZXh0KS5sZW5ndGggKyAoc2FtZUxpbmUgPyBzdGFydENoIDogMCk7XHJcbiAgICBpZiAoZmlyc3QpIHtcclxuICAgICAgLy8gRml4IHVwIC50byBwcm9wZXJ0aWVzIG9mIGZpcnN0XHJcbiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZmlyc3QubGVuZ3RoOyArK2kpIHtcclxuICAgICAgICB2YXIgc3BhbiA9IGZpcnN0W2ldO1xyXG4gICAgICAgIGlmIChzcGFuLnRvID09IG51bGwpIHtcclxuICAgICAgICAgIHZhciBmb3VuZCA9IGdldE1hcmtlZFNwYW5Gb3IobGFzdCwgc3Bhbi5tYXJrZXIpO1xyXG4gICAgICAgICAgaWYgKCFmb3VuZCkgc3Bhbi50byA9IHN0YXJ0Q2g7XHJcbiAgICAgICAgICBlbHNlIGlmIChzYW1lTGluZSkgc3Bhbi50byA9IGZvdW5kLnRvID09IG51bGwgPyBudWxsIDogZm91bmQudG8gKyBvZmZzZXQ7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICBpZiAobGFzdCkge1xyXG4gICAgICAvLyBGaXggdXAgLmZyb20gaW4gbGFzdCAob3IgbW92ZSB0aGVtIGludG8gZmlyc3QgaW4gY2FzZSBvZiBzYW1lTGluZSlcclxuICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsYXN0Lmxlbmd0aDsgKytpKSB7XHJcbiAgICAgICAgdmFyIHNwYW4gPSBsYXN0W2ldO1xyXG4gICAgICAgIGlmIChzcGFuLnRvICE9IG51bGwpIHNwYW4udG8gKz0gb2Zmc2V0O1xyXG4gICAgICAgIGlmIChzcGFuLmZyb20gPT0gbnVsbCkge1xyXG4gICAgICAgICAgdmFyIGZvdW5kID0gZ2V0TWFya2VkU3BhbkZvcihmaXJzdCwgc3Bhbi5tYXJrZXIpO1xyXG4gICAgICAgICAgaWYgKCFmb3VuZCkge1xyXG4gICAgICAgICAgICBzcGFuLmZyb20gPSBvZmZzZXQ7XHJcbiAgICAgICAgICAgIGlmIChzYW1lTGluZSkgKGZpcnN0IHx8IChmaXJzdCA9IFtdKSkucHVzaChzcGFuKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgc3Bhbi5mcm9tICs9IG9mZnNldDtcclxuICAgICAgICAgIGlmIChzYW1lTGluZSkgKGZpcnN0IHx8IChmaXJzdCA9IFtdKSkucHVzaChzcGFuKTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIC8vIE1ha2Ugc3VyZSB3ZSBkaWRuJ3QgY3JlYXRlIGFueSB6ZXJvLWxlbmd0aCBzcGFuc1xyXG4gICAgaWYgKGZpcnN0KSBmaXJzdCA9IGNsZWFyRW1wdHlTcGFucyhmaXJzdCk7XHJcbiAgICBpZiAobGFzdCAmJiBsYXN0ICE9IGZpcnN0KSBsYXN0ID0gY2xlYXJFbXB0eVNwYW5zKGxhc3QpO1xyXG5cclxuICAgIHZhciBuZXdNYXJrZXJzID0gW2ZpcnN0XTtcclxuICAgIGlmICghc2FtZUxpbmUpIHtcclxuICAgICAgLy8gRmlsbCBnYXAgd2l0aCB3aG9sZS1saW5lLXNwYW5zXHJcbiAgICAgIHZhciBnYXAgPSBjaGFuZ2UudGV4dC5sZW5ndGggLSAyLCBnYXBNYXJrZXJzO1xyXG4gICAgICBpZiAoZ2FwID4gMCAmJiBmaXJzdClcclxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGZpcnN0Lmxlbmd0aDsgKytpKVxyXG4gICAgICAgICAgaWYgKGZpcnN0W2ldLnRvID09IG51bGwpXHJcbiAgICAgICAgICAgIChnYXBNYXJrZXJzIHx8IChnYXBNYXJrZXJzID0gW10pKS5wdXNoKG5ldyBNYXJrZWRTcGFuKGZpcnN0W2ldLm1hcmtlciwgbnVsbCwgbnVsbCkpO1xyXG4gICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGdhcDsgKytpKVxyXG4gICAgICAgIG5ld01hcmtlcnMucHVzaChnYXBNYXJrZXJzKTtcclxuICAgICAgbmV3TWFya2Vycy5wdXNoKGxhc3QpO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIG5ld01hcmtlcnM7XHJcbiAgfVxyXG5cclxuICAvLyBSZW1vdmUgc3BhbnMgdGhhdCBhcmUgZW1wdHkgYW5kIGRvbid0IGhhdmUgYSBjbGVhcldoZW5FbXB0eVxyXG4gIC8vIG9wdGlvbiBvZiBmYWxzZS5cclxuICBmdW5jdGlvbiBjbGVhckVtcHR5U3BhbnMoc3BhbnMpIHtcclxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgc3BhbnMubGVuZ3RoOyArK2kpIHtcclxuICAgICAgdmFyIHNwYW4gPSBzcGFuc1tpXTtcclxuICAgICAgaWYgKHNwYW4uZnJvbSAhPSBudWxsICYmIHNwYW4uZnJvbSA9PSBzcGFuLnRvICYmIHNwYW4ubWFya2VyLmNsZWFyV2hlbkVtcHR5ICE9PSBmYWxzZSlcclxuICAgICAgICBzcGFucy5zcGxpY2UoaS0tLCAxKTtcclxuICAgIH1cclxuICAgIGlmICghc3BhbnMubGVuZ3RoKSByZXR1cm4gbnVsbDtcclxuICAgIHJldHVybiBzcGFucztcclxuICB9XHJcblxyXG4gIC8vIFVzZWQgZm9yIHVuL3JlLWRvaW5nIGNoYW5nZXMgZnJvbSB0aGUgaGlzdG9yeS4gQ29tYmluZXMgdGhlXHJcbiAgLy8gcmVzdWx0IG9mIGNvbXB1dGluZyB0aGUgZXhpc3Rpbmcgc3BhbnMgd2l0aCB0aGUgc2V0IG9mIHNwYW5zIHRoYXRcclxuICAvLyBleGlzdGVkIGluIHRoZSBoaXN0b3J5IChzbyB0aGF0IGRlbGV0aW5nIGFyb3VuZCBhIHNwYW4gYW5kIHRoZW5cclxuICAvLyB1bmRvaW5nIGJyaW5ncyBiYWNrIHRoZSBzcGFuKS5cclxuICBmdW5jdGlvbiBtZXJnZU9sZFNwYW5zKGRvYywgY2hhbmdlKSB7XHJcbiAgICB2YXIgb2xkID0gZ2V0T2xkU3BhbnMoZG9jLCBjaGFuZ2UpO1xyXG4gICAgdmFyIHN0cmV0Y2hlZCA9IHN0cmV0Y2hTcGFuc092ZXJDaGFuZ2UoZG9jLCBjaGFuZ2UpO1xyXG4gICAgaWYgKCFvbGQpIHJldHVybiBzdHJldGNoZWQ7XHJcbiAgICBpZiAoIXN0cmV0Y2hlZCkgcmV0dXJuIG9sZDtcclxuXHJcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IG9sZC5sZW5ndGg7ICsraSkge1xyXG4gICAgICB2YXIgb2xkQ3VyID0gb2xkW2ldLCBzdHJldGNoQ3VyID0gc3RyZXRjaGVkW2ldO1xyXG4gICAgICBpZiAob2xkQ3VyICYmIHN0cmV0Y2hDdXIpIHtcclxuICAgICAgICBzcGFuczogZm9yICh2YXIgaiA9IDA7IGogPCBzdHJldGNoQ3VyLmxlbmd0aDsgKytqKSB7XHJcbiAgICAgICAgICB2YXIgc3BhbiA9IHN0cmV0Y2hDdXJbal07XHJcbiAgICAgICAgICBmb3IgKHZhciBrID0gMDsgayA8IG9sZEN1ci5sZW5ndGg7ICsraylcclxuICAgICAgICAgICAgaWYgKG9sZEN1cltrXS5tYXJrZXIgPT0gc3Bhbi5tYXJrZXIpIGNvbnRpbnVlIHNwYW5zO1xyXG4gICAgICAgICAgb2xkQ3VyLnB1c2goc3Bhbik7XHJcbiAgICAgICAgfVxyXG4gICAgICB9IGVsc2UgaWYgKHN0cmV0Y2hDdXIpIHtcclxuICAgICAgICBvbGRbaV0gPSBzdHJldGNoQ3VyO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4gb2xkO1xyXG4gIH1cclxuXHJcbiAgLy8gVXNlZCB0byAnY2xpcCcgb3V0IHJlYWRPbmx5IHJhbmdlcyB3aGVuIG1ha2luZyBhIGNoYW5nZS5cclxuICBmdW5jdGlvbiByZW1vdmVSZWFkT25seVJhbmdlcyhkb2MsIGZyb20sIHRvKSB7XHJcbiAgICB2YXIgbWFya2VycyA9IG51bGw7XHJcbiAgICBkb2MuaXRlcihmcm9tLmxpbmUsIHRvLmxpbmUgKyAxLCBmdW5jdGlvbihsaW5lKSB7XHJcbiAgICAgIGlmIChsaW5lLm1hcmtlZFNwYW5zKSBmb3IgKHZhciBpID0gMDsgaSA8IGxpbmUubWFya2VkU3BhbnMubGVuZ3RoOyArK2kpIHtcclxuICAgICAgICB2YXIgbWFyayA9IGxpbmUubWFya2VkU3BhbnNbaV0ubWFya2VyO1xyXG4gICAgICAgIGlmIChtYXJrLnJlYWRPbmx5ICYmICghbWFya2VycyB8fCBpbmRleE9mKG1hcmtlcnMsIG1hcmspID09IC0xKSlcclxuICAgICAgICAgIChtYXJrZXJzIHx8IChtYXJrZXJzID0gW10pKS5wdXNoKG1hcmspO1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuICAgIGlmICghbWFya2VycykgcmV0dXJuIG51bGw7XHJcbiAgICB2YXIgcGFydHMgPSBbe2Zyb206IGZyb20sIHRvOiB0b31dO1xyXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBtYXJrZXJzLmxlbmd0aDsgKytpKSB7XHJcbiAgICAgIHZhciBtayA9IG1hcmtlcnNbaV0sIG0gPSBtay5maW5kKDApO1xyXG4gICAgICBmb3IgKHZhciBqID0gMDsgaiA8IHBhcnRzLmxlbmd0aDsgKytqKSB7XHJcbiAgICAgICAgdmFyIHAgPSBwYXJ0c1tqXTtcclxuICAgICAgICBpZiAoY21wKHAudG8sIG0uZnJvbSkgPCAwIHx8IGNtcChwLmZyb20sIG0udG8pID4gMCkgY29udGludWU7XHJcbiAgICAgICAgdmFyIG5ld1BhcnRzID0gW2osIDFdLCBkZnJvbSA9IGNtcChwLmZyb20sIG0uZnJvbSksIGR0byA9IGNtcChwLnRvLCBtLnRvKTtcclxuICAgICAgICBpZiAoZGZyb20gPCAwIHx8ICFtay5pbmNsdXNpdmVMZWZ0ICYmICFkZnJvbSlcclxuICAgICAgICAgIG5ld1BhcnRzLnB1c2goe2Zyb206IHAuZnJvbSwgdG86IG0uZnJvbX0pO1xyXG4gICAgICAgIGlmIChkdG8gPiAwIHx8ICFtay5pbmNsdXNpdmVSaWdodCAmJiAhZHRvKVxyXG4gICAgICAgICAgbmV3UGFydHMucHVzaCh7ZnJvbTogbS50bywgdG86IHAudG99KTtcclxuICAgICAgICBwYXJ0cy5zcGxpY2UuYXBwbHkocGFydHMsIG5ld1BhcnRzKTtcclxuICAgICAgICBqICs9IG5ld1BhcnRzLmxlbmd0aCAtIDE7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIHJldHVybiBwYXJ0cztcclxuICB9XHJcblxyXG4gIC8vIENvbm5lY3Qgb3IgZGlzY29ubmVjdCBzcGFucyBmcm9tIGEgbGluZS5cclxuICBmdW5jdGlvbiBkZXRhY2hNYXJrZWRTcGFucyhsaW5lKSB7XHJcbiAgICB2YXIgc3BhbnMgPSBsaW5lLm1hcmtlZFNwYW5zO1xyXG4gICAgaWYgKCFzcGFucykgcmV0dXJuO1xyXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzcGFucy5sZW5ndGg7ICsraSlcclxuICAgICAgc3BhbnNbaV0ubWFya2VyLmRldGFjaExpbmUobGluZSk7XHJcbiAgICBsaW5lLm1hcmtlZFNwYW5zID0gbnVsbDtcclxuICB9XHJcbiAgZnVuY3Rpb24gYXR0YWNoTWFya2VkU3BhbnMobGluZSwgc3BhbnMpIHtcclxuICAgIGlmICghc3BhbnMpIHJldHVybjtcclxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgc3BhbnMubGVuZ3RoOyArK2kpXHJcbiAgICAgIHNwYW5zW2ldLm1hcmtlci5hdHRhY2hMaW5lKGxpbmUpO1xyXG4gICAgbGluZS5tYXJrZWRTcGFucyA9IHNwYW5zO1xyXG4gIH1cclxuXHJcbiAgLy8gSGVscGVycyB1c2VkIHdoZW4gY29tcHV0aW5nIHdoaWNoIG92ZXJsYXBwaW5nIGNvbGxhcHNlZCBzcGFuXHJcbiAgLy8gY291bnRzIGFzIHRoZSBsYXJnZXIgb25lLlxyXG4gIGZ1bmN0aW9uIGV4dHJhTGVmdChtYXJrZXIpIHsgcmV0dXJuIG1hcmtlci5pbmNsdXNpdmVMZWZ0ID8gLTEgOiAwOyB9XHJcbiAgZnVuY3Rpb24gZXh0cmFSaWdodChtYXJrZXIpIHsgcmV0dXJuIG1hcmtlci5pbmNsdXNpdmVSaWdodCA/IDEgOiAwOyB9XHJcblxyXG4gIC8vIFJldHVybnMgYSBudW1iZXIgaW5kaWNhdGluZyB3aGljaCBvZiB0d28gb3ZlcmxhcHBpbmcgY29sbGFwc2VkXHJcbiAgLy8gc3BhbnMgaXMgbGFyZ2VyIChhbmQgdGh1cyBpbmNsdWRlcyB0aGUgb3RoZXIpLiBGYWxscyBiYWNrIHRvXHJcbiAgLy8gY29tcGFyaW5nIGlkcyB3aGVuIHRoZSBzcGFucyBjb3ZlciBleGFjdGx5IHRoZSBzYW1lIHJhbmdlLlxyXG4gIGZ1bmN0aW9uIGNvbXBhcmVDb2xsYXBzZWRNYXJrZXJzKGEsIGIpIHtcclxuICAgIHZhciBsZW5EaWZmID0gYS5saW5lcy5sZW5ndGggLSBiLmxpbmVzLmxlbmd0aDtcclxuICAgIGlmIChsZW5EaWZmICE9IDApIHJldHVybiBsZW5EaWZmO1xyXG4gICAgdmFyIGFQb3MgPSBhLmZpbmQoKSwgYlBvcyA9IGIuZmluZCgpO1xyXG4gICAgdmFyIGZyb21DbXAgPSBjbXAoYVBvcy5mcm9tLCBiUG9zLmZyb20pIHx8IGV4dHJhTGVmdChhKSAtIGV4dHJhTGVmdChiKTtcclxuICAgIGlmIChmcm9tQ21wKSByZXR1cm4gLWZyb21DbXA7XHJcbiAgICB2YXIgdG9DbXAgPSBjbXAoYVBvcy50bywgYlBvcy50bykgfHwgZXh0cmFSaWdodChhKSAtIGV4dHJhUmlnaHQoYik7XHJcbiAgICBpZiAodG9DbXApIHJldHVybiB0b0NtcDtcclxuICAgIHJldHVybiBiLmlkIC0gYS5pZDtcclxuICB9XHJcblxyXG4gIC8vIEZpbmQgb3V0IHdoZXRoZXIgYSBsaW5lIGVuZHMgb3Igc3RhcnRzIGluIGEgY29sbGFwc2VkIHNwYW4uIElmXHJcbiAgLy8gc28sIHJldHVybiB0aGUgbWFya2VyIGZvciB0aGF0IHNwYW4uXHJcbiAgZnVuY3Rpb24gY29sbGFwc2VkU3BhbkF0U2lkZShsaW5lLCBzdGFydCkge1xyXG4gICAgdmFyIHNwcyA9IHNhd0NvbGxhcHNlZFNwYW5zICYmIGxpbmUubWFya2VkU3BhbnMsIGZvdW5kO1xyXG4gICAgaWYgKHNwcykgZm9yICh2YXIgc3AsIGkgPSAwOyBpIDwgc3BzLmxlbmd0aDsgKytpKSB7XHJcbiAgICAgIHNwID0gc3BzW2ldO1xyXG4gICAgICBpZiAoc3AubWFya2VyLmNvbGxhcHNlZCAmJiAoc3RhcnQgPyBzcC5mcm9tIDogc3AudG8pID09IG51bGwgJiZcclxuICAgICAgICAgICghZm91bmQgfHwgY29tcGFyZUNvbGxhcHNlZE1hcmtlcnMoZm91bmQsIHNwLm1hcmtlcikgPCAwKSlcclxuICAgICAgICBmb3VuZCA9IHNwLm1hcmtlcjtcclxuICAgIH1cclxuICAgIHJldHVybiBmb3VuZDtcclxuICB9XHJcbiAgZnVuY3Rpb24gY29sbGFwc2VkU3BhbkF0U3RhcnQobGluZSkgeyByZXR1cm4gY29sbGFwc2VkU3BhbkF0U2lkZShsaW5lLCB0cnVlKTsgfVxyXG4gIGZ1bmN0aW9uIGNvbGxhcHNlZFNwYW5BdEVuZChsaW5lKSB7IHJldHVybiBjb2xsYXBzZWRTcGFuQXRTaWRlKGxpbmUsIGZhbHNlKTsgfVxyXG5cclxuICAvLyBUZXN0IHdoZXRoZXIgdGhlcmUgZXhpc3RzIGEgY29sbGFwc2VkIHNwYW4gdGhhdCBwYXJ0aWFsbHlcclxuICAvLyBvdmVybGFwcyAoY292ZXJzIHRoZSBzdGFydCBvciBlbmQsIGJ1dCBub3QgYm90aCkgb2YgYSBuZXcgc3Bhbi5cclxuICAvLyBTdWNoIG92ZXJsYXAgaXMgbm90IGFsbG93ZWQuXHJcbiAgZnVuY3Rpb24gY29uZmxpY3RpbmdDb2xsYXBzZWRSYW5nZShkb2MsIGxpbmVObywgZnJvbSwgdG8sIG1hcmtlcikge1xyXG4gICAgdmFyIGxpbmUgPSBnZXRMaW5lKGRvYywgbGluZU5vKTtcclxuICAgIHZhciBzcHMgPSBzYXdDb2xsYXBzZWRTcGFucyAmJiBsaW5lLm1hcmtlZFNwYW5zO1xyXG4gICAgaWYgKHNwcykgZm9yICh2YXIgaSA9IDA7IGkgPCBzcHMubGVuZ3RoOyArK2kpIHtcclxuICAgICAgdmFyIHNwID0gc3BzW2ldO1xyXG4gICAgICBpZiAoIXNwLm1hcmtlci5jb2xsYXBzZWQpIGNvbnRpbnVlO1xyXG4gICAgICB2YXIgZm91bmQgPSBzcC5tYXJrZXIuZmluZCgwKTtcclxuICAgICAgdmFyIGZyb21DbXAgPSBjbXAoZm91bmQuZnJvbSwgZnJvbSkgfHwgZXh0cmFMZWZ0KHNwLm1hcmtlcikgLSBleHRyYUxlZnQobWFya2VyKTtcclxuICAgICAgdmFyIHRvQ21wID0gY21wKGZvdW5kLnRvLCB0bykgfHwgZXh0cmFSaWdodChzcC5tYXJrZXIpIC0gZXh0cmFSaWdodChtYXJrZXIpO1xyXG4gICAgICBpZiAoZnJvbUNtcCA+PSAwICYmIHRvQ21wIDw9IDAgfHwgZnJvbUNtcCA8PSAwICYmIHRvQ21wID49IDApIGNvbnRpbnVlO1xyXG4gICAgICBpZiAoZnJvbUNtcCA8PSAwICYmIChjbXAoZm91bmQudG8sIGZyb20pID4gMCB8fCAoc3AubWFya2VyLmluY2x1c2l2ZVJpZ2h0ICYmIG1hcmtlci5pbmNsdXNpdmVMZWZ0KSkgfHxcclxuICAgICAgICAgIGZyb21DbXAgPj0gMCAmJiAoY21wKGZvdW5kLmZyb20sIHRvKSA8IDAgfHwgKHNwLm1hcmtlci5pbmNsdXNpdmVMZWZ0ICYmIG1hcmtlci5pbmNsdXNpdmVSaWdodCkpKVxyXG4gICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLy8gQSB2aXN1YWwgbGluZSBpcyBhIGxpbmUgYXMgZHJhd24gb24gdGhlIHNjcmVlbi4gRm9sZGluZywgZm9yXHJcbiAgLy8gZXhhbXBsZSwgY2FuIGNhdXNlIG11bHRpcGxlIGxvZ2ljYWwgbGluZXMgdG8gYXBwZWFyIG9uIHRoZSBzYW1lXHJcbiAgLy8gdmlzdWFsIGxpbmUuIFRoaXMgZmluZHMgdGhlIHN0YXJ0IG9mIHRoZSB2aXN1YWwgbGluZSB0aGF0IHRoZVxyXG4gIC8vIGdpdmVuIGxpbmUgaXMgcGFydCBvZiAodXN1YWxseSB0aGF0IGlzIHRoZSBsaW5lIGl0c2VsZikuXHJcbiAgZnVuY3Rpb24gdmlzdWFsTGluZShsaW5lKSB7XHJcbiAgICB2YXIgbWVyZ2VkO1xyXG4gICAgd2hpbGUgKG1lcmdlZCA9IGNvbGxhcHNlZFNwYW5BdFN0YXJ0KGxpbmUpKVxyXG4gICAgICBsaW5lID0gbWVyZ2VkLmZpbmQoLTEsIHRydWUpLmxpbmU7XHJcbiAgICByZXR1cm4gbGluZTtcclxuICB9XHJcblxyXG4gIC8vIFJldHVybnMgYW4gYXJyYXkgb2YgbG9naWNhbCBsaW5lcyB0aGF0IGNvbnRpbnVlIHRoZSB2aXN1YWwgbGluZVxyXG4gIC8vIHN0YXJ0ZWQgYnkgdGhlIGFyZ3VtZW50LCBvciB1bmRlZmluZWQgaWYgdGhlcmUgYXJlIG5vIHN1Y2ggbGluZXMuXHJcbiAgZnVuY3Rpb24gdmlzdWFsTGluZUNvbnRpbnVlZChsaW5lKSB7XHJcbiAgICB2YXIgbWVyZ2VkLCBsaW5lcztcclxuICAgIHdoaWxlIChtZXJnZWQgPSBjb2xsYXBzZWRTcGFuQXRFbmQobGluZSkpIHtcclxuICAgICAgbGluZSA9IG1lcmdlZC5maW5kKDEsIHRydWUpLmxpbmU7XHJcbiAgICAgIChsaW5lcyB8fCAobGluZXMgPSBbXSkpLnB1c2gobGluZSk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gbGluZXM7XHJcbiAgfVxyXG5cclxuICAvLyBHZXQgdGhlIGxpbmUgbnVtYmVyIG9mIHRoZSBzdGFydCBvZiB0aGUgdmlzdWFsIGxpbmUgdGhhdCB0aGVcclxuICAvLyBnaXZlbiBsaW5lIG51bWJlciBpcyBwYXJ0IG9mLlxyXG4gIGZ1bmN0aW9uIHZpc3VhbExpbmVObyhkb2MsIGxpbmVOKSB7XHJcbiAgICB2YXIgbGluZSA9IGdldExpbmUoZG9jLCBsaW5lTiksIHZpcyA9IHZpc3VhbExpbmUobGluZSk7XHJcbiAgICBpZiAobGluZSA9PSB2aXMpIHJldHVybiBsaW5lTjtcclxuICAgIHJldHVybiBsaW5lTm8odmlzKTtcclxuICB9XHJcbiAgLy8gR2V0IHRoZSBsaW5lIG51bWJlciBvZiB0aGUgc3RhcnQgb2YgdGhlIG5leHQgdmlzdWFsIGxpbmUgYWZ0ZXJcclxuICAvLyB0aGUgZ2l2ZW4gbGluZS5cclxuICBmdW5jdGlvbiB2aXN1YWxMaW5lRW5kTm8oZG9jLCBsaW5lTikge1xyXG4gICAgaWYgKGxpbmVOID4gZG9jLmxhc3RMaW5lKCkpIHJldHVybiBsaW5lTjtcclxuICAgIHZhciBsaW5lID0gZ2V0TGluZShkb2MsIGxpbmVOKSwgbWVyZ2VkO1xyXG4gICAgaWYgKCFsaW5lSXNIaWRkZW4oZG9jLCBsaW5lKSkgcmV0dXJuIGxpbmVOO1xyXG4gICAgd2hpbGUgKG1lcmdlZCA9IGNvbGxhcHNlZFNwYW5BdEVuZChsaW5lKSlcclxuICAgICAgbGluZSA9IG1lcmdlZC5maW5kKDEsIHRydWUpLmxpbmU7XHJcbiAgICByZXR1cm4gbGluZU5vKGxpbmUpICsgMTtcclxuICB9XHJcblxyXG4gIC8vIENvbXB1dGUgd2hldGhlciBhIGxpbmUgaXMgaGlkZGVuLiBMaW5lcyBjb3VudCBhcyBoaWRkZW4gd2hlbiB0aGV5XHJcbiAgLy8gYXJlIHBhcnQgb2YgYSB2aXN1YWwgbGluZSB0aGF0IHN0YXJ0cyB3aXRoIGFub3RoZXIgbGluZSwgb3Igd2hlblxyXG4gIC8vIHRoZXkgYXJlIGVudGlyZWx5IGNvdmVyZWQgYnkgY29sbGFwc2VkLCBub24td2lkZ2V0IHNwYW4uXHJcbiAgZnVuY3Rpb24gbGluZUlzSGlkZGVuKGRvYywgbGluZSkge1xyXG4gICAgdmFyIHNwcyA9IHNhd0NvbGxhcHNlZFNwYW5zICYmIGxpbmUubWFya2VkU3BhbnM7XHJcbiAgICBpZiAoc3BzKSBmb3IgKHZhciBzcCwgaSA9IDA7IGkgPCBzcHMubGVuZ3RoOyArK2kpIHtcclxuICAgICAgc3AgPSBzcHNbaV07XHJcbiAgICAgIGlmICghc3AubWFya2VyLmNvbGxhcHNlZCkgY29udGludWU7XHJcbiAgICAgIGlmIChzcC5mcm9tID09IG51bGwpIHJldHVybiB0cnVlO1xyXG4gICAgICBpZiAoc3AubWFya2VyLndpZGdldE5vZGUpIGNvbnRpbnVlO1xyXG4gICAgICBpZiAoc3AuZnJvbSA9PSAwICYmIHNwLm1hcmtlci5pbmNsdXNpdmVMZWZ0ICYmIGxpbmVJc0hpZGRlbklubmVyKGRvYywgbGluZSwgc3ApKVxyXG4gICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgfVxyXG4gIH1cclxuICBmdW5jdGlvbiBsaW5lSXNIaWRkZW5Jbm5lcihkb2MsIGxpbmUsIHNwYW4pIHtcclxuICAgIGlmIChzcGFuLnRvID09IG51bGwpIHtcclxuICAgICAgdmFyIGVuZCA9IHNwYW4ubWFya2VyLmZpbmQoMSwgdHJ1ZSk7XHJcbiAgICAgIHJldHVybiBsaW5lSXNIaWRkZW5Jbm5lcihkb2MsIGVuZC5saW5lLCBnZXRNYXJrZWRTcGFuRm9yKGVuZC5saW5lLm1hcmtlZFNwYW5zLCBzcGFuLm1hcmtlcikpO1xyXG4gICAgfVxyXG4gICAgaWYgKHNwYW4ubWFya2VyLmluY2x1c2l2ZVJpZ2h0ICYmIHNwYW4udG8gPT0gbGluZS50ZXh0Lmxlbmd0aClcclxuICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICBmb3IgKHZhciBzcCwgaSA9IDA7IGkgPCBsaW5lLm1hcmtlZFNwYW5zLmxlbmd0aDsgKytpKSB7XHJcbiAgICAgIHNwID0gbGluZS5tYXJrZWRTcGFuc1tpXTtcclxuICAgICAgaWYgKHNwLm1hcmtlci5jb2xsYXBzZWQgJiYgIXNwLm1hcmtlci53aWRnZXROb2RlICYmIHNwLmZyb20gPT0gc3Bhbi50byAmJlxyXG4gICAgICAgICAgKHNwLnRvID09IG51bGwgfHwgc3AudG8gIT0gc3Bhbi5mcm9tKSAmJlxyXG4gICAgICAgICAgKHNwLm1hcmtlci5pbmNsdXNpdmVMZWZ0IHx8IHNwYW4ubWFya2VyLmluY2x1c2l2ZVJpZ2h0KSAmJlxyXG4gICAgICAgICAgbGluZUlzSGlkZGVuSW5uZXIoZG9jLCBsaW5lLCBzcCkpIHJldHVybiB0cnVlO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLy8gTElORSBXSURHRVRTXHJcblxyXG4gIC8vIExpbmUgd2lkZ2V0cyBhcmUgYmxvY2sgZWxlbWVudHMgZGlzcGxheWVkIGFib3ZlIG9yIGJlbG93IGEgbGluZS5cclxuXHJcbiAgdmFyIExpbmVXaWRnZXQgPSBDb2RlTWlycm9yLkxpbmVXaWRnZXQgPSBmdW5jdGlvbihjbSwgbm9kZSwgb3B0aW9ucykge1xyXG4gICAgaWYgKG9wdGlvbnMpIGZvciAodmFyIG9wdCBpbiBvcHRpb25zKSBpZiAob3B0aW9ucy5oYXNPd25Qcm9wZXJ0eShvcHQpKVxyXG4gICAgICB0aGlzW29wdF0gPSBvcHRpb25zW29wdF07XHJcbiAgICB0aGlzLmNtID0gY207XHJcbiAgICB0aGlzLm5vZGUgPSBub2RlO1xyXG4gIH07XHJcbiAgZXZlbnRNaXhpbihMaW5lV2lkZ2V0KTtcclxuXHJcbiAgZnVuY3Rpb24gYWRqdXN0U2Nyb2xsV2hlbkFib3ZlVmlzaWJsZShjbSwgbGluZSwgZGlmZikge1xyXG4gICAgaWYgKGhlaWdodEF0TGluZShsaW5lKSA8ICgoY20uY3VyT3AgJiYgY20uY3VyT3Auc2Nyb2xsVG9wKSB8fCBjbS5kb2Muc2Nyb2xsVG9wKSlcclxuICAgICAgYWRkVG9TY3JvbGxQb3MoY20sIG51bGwsIGRpZmYpO1xyXG4gIH1cclxuXHJcbiAgTGluZVdpZGdldC5wcm90b3R5cGUuY2xlYXIgPSBmdW5jdGlvbigpIHtcclxuICAgIHZhciBjbSA9IHRoaXMuY20sIHdzID0gdGhpcy5saW5lLndpZGdldHMsIGxpbmUgPSB0aGlzLmxpbmUsIG5vID0gbGluZU5vKGxpbmUpO1xyXG4gICAgaWYgKG5vID09IG51bGwgfHwgIXdzKSByZXR1cm47XHJcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHdzLmxlbmd0aDsgKytpKSBpZiAod3NbaV0gPT0gdGhpcykgd3Muc3BsaWNlKGktLSwgMSk7XHJcbiAgICBpZiAoIXdzLmxlbmd0aCkgbGluZS53aWRnZXRzID0gbnVsbDtcclxuICAgIHZhciBoZWlnaHQgPSB3aWRnZXRIZWlnaHQodGhpcyk7XHJcbiAgICBydW5Jbk9wKGNtLCBmdW5jdGlvbigpIHtcclxuICAgICAgYWRqdXN0U2Nyb2xsV2hlbkFib3ZlVmlzaWJsZShjbSwgbGluZSwgLWhlaWdodCk7XHJcbiAgICAgIHJlZ0xpbmVDaGFuZ2UoY20sIG5vLCBcIndpZGdldFwiKTtcclxuICAgICAgdXBkYXRlTGluZUhlaWdodChsaW5lLCBNYXRoLm1heCgwLCBsaW5lLmhlaWdodCAtIGhlaWdodCkpO1xyXG4gICAgfSk7XHJcbiAgfTtcclxuICBMaW5lV2lkZ2V0LnByb3RvdHlwZS5jaGFuZ2VkID0gZnVuY3Rpb24oKSB7XHJcbiAgICB2YXIgb2xkSCA9IHRoaXMuaGVpZ2h0LCBjbSA9IHRoaXMuY20sIGxpbmUgPSB0aGlzLmxpbmU7XHJcbiAgICB0aGlzLmhlaWdodCA9IG51bGw7XHJcbiAgICB2YXIgZGlmZiA9IHdpZGdldEhlaWdodCh0aGlzKSAtIG9sZEg7XHJcbiAgICBpZiAoIWRpZmYpIHJldHVybjtcclxuICAgIHJ1bkluT3AoY20sIGZ1bmN0aW9uKCkge1xyXG4gICAgICBjbS5jdXJPcC5mb3JjZVVwZGF0ZSA9IHRydWU7XHJcbiAgICAgIGFkanVzdFNjcm9sbFdoZW5BYm92ZVZpc2libGUoY20sIGxpbmUsIGRpZmYpO1xyXG4gICAgICB1cGRhdGVMaW5lSGVpZ2h0KGxpbmUsIGxpbmUuaGVpZ2h0ICsgZGlmZik7XHJcbiAgICB9KTtcclxuICB9O1xyXG5cclxuICBmdW5jdGlvbiB3aWRnZXRIZWlnaHQod2lkZ2V0KSB7XHJcbiAgICBpZiAod2lkZ2V0LmhlaWdodCAhPSBudWxsKSByZXR1cm4gd2lkZ2V0LmhlaWdodDtcclxuICAgIGlmICghY29udGFpbnMoZG9jdW1lbnQuYm9keSwgd2lkZ2V0Lm5vZGUpKSB7XHJcbiAgICAgIHZhciBwYXJlbnRTdHlsZSA9IFwicG9zaXRpb246IHJlbGF0aXZlO1wiO1xyXG4gICAgICBpZiAod2lkZ2V0LmNvdmVyR3V0dGVyKVxyXG4gICAgICAgIHBhcmVudFN0eWxlICs9IFwibWFyZ2luLWxlZnQ6IC1cIiArIHdpZGdldC5jbS5nZXRHdXR0ZXJFbGVtZW50KCkub2Zmc2V0V2lkdGggKyBcInB4O1wiO1xyXG4gICAgICByZW1vdmVDaGlsZHJlbkFuZEFkZCh3aWRnZXQuY20uZGlzcGxheS5tZWFzdXJlLCBlbHQoXCJkaXZcIiwgW3dpZGdldC5ub2RlXSwgbnVsbCwgcGFyZW50U3R5bGUpKTtcclxuICAgIH1cclxuICAgIHJldHVybiB3aWRnZXQuaGVpZ2h0ID0gd2lkZ2V0Lm5vZGUub2Zmc2V0SGVpZ2h0O1xyXG4gIH1cclxuXHJcbiAgZnVuY3Rpb24gYWRkTGluZVdpZGdldChjbSwgaGFuZGxlLCBub2RlLCBvcHRpb25zKSB7XHJcbiAgICB2YXIgd2lkZ2V0ID0gbmV3IExpbmVXaWRnZXQoY20sIG5vZGUsIG9wdGlvbnMpO1xyXG4gICAgaWYgKHdpZGdldC5ub0hTY3JvbGwpIGNtLmRpc3BsYXkuYWxpZ25XaWRnZXRzID0gdHJ1ZTtcclxuICAgIGNoYW5nZUxpbmUoY20uZG9jLCBoYW5kbGUsIFwid2lkZ2V0XCIsIGZ1bmN0aW9uKGxpbmUpIHtcclxuICAgICAgdmFyIHdpZGdldHMgPSBsaW5lLndpZGdldHMgfHwgKGxpbmUud2lkZ2V0cyA9IFtdKTtcclxuICAgICAgaWYgKHdpZGdldC5pbnNlcnRBdCA9PSBudWxsKSB3aWRnZXRzLnB1c2god2lkZ2V0KTtcclxuICAgICAgZWxzZSB3aWRnZXRzLnNwbGljZShNYXRoLm1pbih3aWRnZXRzLmxlbmd0aCAtIDEsIE1hdGgubWF4KDAsIHdpZGdldC5pbnNlcnRBdCkpLCAwLCB3aWRnZXQpO1xyXG4gICAgICB3aWRnZXQubGluZSA9IGxpbmU7XHJcbiAgICAgIGlmICghbGluZUlzSGlkZGVuKGNtLmRvYywgbGluZSkpIHtcclxuICAgICAgICB2YXIgYWJvdmVWaXNpYmxlID0gaGVpZ2h0QXRMaW5lKGxpbmUpIDwgY20uZG9jLnNjcm9sbFRvcDtcclxuICAgICAgICB1cGRhdGVMaW5lSGVpZ2h0KGxpbmUsIGxpbmUuaGVpZ2h0ICsgd2lkZ2V0SGVpZ2h0KHdpZGdldCkpO1xyXG4gICAgICAgIGlmIChhYm92ZVZpc2libGUpIGFkZFRvU2Nyb2xsUG9zKGNtLCBudWxsLCB3aWRnZXQuaGVpZ2h0KTtcclxuICAgICAgICBjbS5jdXJPcC5mb3JjZVVwZGF0ZSA9IHRydWU7XHJcbiAgICAgIH1cclxuICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICB9KTtcclxuICAgIHJldHVybiB3aWRnZXQ7XHJcbiAgfVxyXG5cclxuICAvLyBMSU5FIERBVEEgU1RSVUNUVVJFXHJcblxyXG4gIC8vIExpbmUgb2JqZWN0cy4gVGhlc2UgaG9sZCBzdGF0ZSByZWxhdGVkIHRvIGEgbGluZSwgaW5jbHVkaW5nXHJcbiAgLy8gaGlnaGxpZ2h0aW5nIGluZm8gKHRoZSBzdHlsZXMgYXJyYXkpLlxyXG4gIHZhciBMaW5lID0gQ29kZU1pcnJvci5MaW5lID0gZnVuY3Rpb24odGV4dCwgbWFya2VkU3BhbnMsIGVzdGltYXRlSGVpZ2h0KSB7XHJcbiAgICB0aGlzLnRleHQgPSB0ZXh0O1xyXG4gICAgYXR0YWNoTWFya2VkU3BhbnModGhpcywgbWFya2VkU3BhbnMpO1xyXG4gICAgdGhpcy5oZWlnaHQgPSBlc3RpbWF0ZUhlaWdodCA/IGVzdGltYXRlSGVpZ2h0KHRoaXMpIDogMTtcclxuICB9O1xyXG4gIGV2ZW50TWl4aW4oTGluZSk7XHJcbiAgTGluZS5wcm90b3R5cGUubGluZU5vID0gZnVuY3Rpb24oKSB7IHJldHVybiBsaW5lTm8odGhpcyk7IH07XHJcblxyXG4gIC8vIENoYW5nZSB0aGUgY29udGVudCAodGV4dCwgbWFya2Vycykgb2YgYSBsaW5lLiBBdXRvbWF0aWNhbGx5XHJcbiAgLy8gaW52YWxpZGF0ZXMgY2FjaGVkIGluZm9ybWF0aW9uIGFuZCB0cmllcyB0byByZS1lc3RpbWF0ZSB0aGVcclxuICAvLyBsaW5lJ3MgaGVpZ2h0LlxyXG4gIGZ1bmN0aW9uIHVwZGF0ZUxpbmUobGluZSwgdGV4dCwgbWFya2VkU3BhbnMsIGVzdGltYXRlSGVpZ2h0KSB7XHJcbiAgICBsaW5lLnRleHQgPSB0ZXh0O1xyXG4gICAgaWYgKGxpbmUuc3RhdGVBZnRlcikgbGluZS5zdGF0ZUFmdGVyID0gbnVsbDtcclxuICAgIGlmIChsaW5lLnN0eWxlcykgbGluZS5zdHlsZXMgPSBudWxsO1xyXG4gICAgaWYgKGxpbmUub3JkZXIgIT0gbnVsbCkgbGluZS5vcmRlciA9IG51bGw7XHJcbiAgICBkZXRhY2hNYXJrZWRTcGFucyhsaW5lKTtcclxuICAgIGF0dGFjaE1hcmtlZFNwYW5zKGxpbmUsIG1hcmtlZFNwYW5zKTtcclxuICAgIHZhciBlc3RIZWlnaHQgPSBlc3RpbWF0ZUhlaWdodCA/IGVzdGltYXRlSGVpZ2h0KGxpbmUpIDogMTtcclxuICAgIGlmIChlc3RIZWlnaHQgIT0gbGluZS5oZWlnaHQpIHVwZGF0ZUxpbmVIZWlnaHQobGluZSwgZXN0SGVpZ2h0KTtcclxuICB9XHJcblxyXG4gIC8vIERldGFjaCBhIGxpbmUgZnJvbSB0aGUgZG9jdW1lbnQgdHJlZSBhbmQgaXRzIG1hcmtlcnMuXHJcbiAgZnVuY3Rpb24gY2xlYW5VcExpbmUobGluZSkge1xyXG4gICAgbGluZS5wYXJlbnQgPSBudWxsO1xyXG4gICAgZGV0YWNoTWFya2VkU3BhbnMobGluZSk7XHJcbiAgfVxyXG5cclxuICBmdW5jdGlvbiBleHRyYWN0TGluZUNsYXNzZXModHlwZSwgb3V0cHV0KSB7XHJcbiAgICBpZiAodHlwZSkgZm9yICg7Oykge1xyXG4gICAgICB2YXIgbGluZUNsYXNzID0gdHlwZS5tYXRjaCgvKD86XnxcXHMrKWxpbmUtKGJhY2tncm91bmQtKT8oXFxTKykvKTtcclxuICAgICAgaWYgKCFsaW5lQ2xhc3MpIGJyZWFrO1xyXG4gICAgICB0eXBlID0gdHlwZS5zbGljZSgwLCBsaW5lQ2xhc3MuaW5kZXgpICsgdHlwZS5zbGljZShsaW5lQ2xhc3MuaW5kZXggKyBsaW5lQ2xhc3NbMF0ubGVuZ3RoKTtcclxuICAgICAgdmFyIHByb3AgPSBsaW5lQ2xhc3NbMV0gPyBcImJnQ2xhc3NcIiA6IFwidGV4dENsYXNzXCI7XHJcbiAgICAgIGlmIChvdXRwdXRbcHJvcF0gPT0gbnVsbClcclxuICAgICAgICBvdXRwdXRbcHJvcF0gPSBsaW5lQ2xhc3NbMl07XHJcbiAgICAgIGVsc2UgaWYgKCEobmV3IFJlZ0V4cChcIig/Ol58XFxzKVwiICsgbGluZUNsYXNzWzJdICsgXCIoPzokfFxccylcIikpLnRlc3Qob3V0cHV0W3Byb3BdKSlcclxuICAgICAgICBvdXRwdXRbcHJvcF0gKz0gXCIgXCIgKyBsaW5lQ2xhc3NbMl07XHJcbiAgICB9XHJcbiAgICByZXR1cm4gdHlwZTtcclxuICB9XHJcblxyXG4gIGZ1bmN0aW9uIGNhbGxCbGFua0xpbmUobW9kZSwgc3RhdGUpIHtcclxuICAgIGlmIChtb2RlLmJsYW5rTGluZSkgcmV0dXJuIG1vZGUuYmxhbmtMaW5lKHN0YXRlKTtcclxuICAgIGlmICghbW9kZS5pbm5lck1vZGUpIHJldHVybjtcclxuICAgIHZhciBpbm5lciA9IENvZGVNaXJyb3IuaW5uZXJNb2RlKG1vZGUsIHN0YXRlKTtcclxuICAgIGlmIChpbm5lci5tb2RlLmJsYW5rTGluZSkgcmV0dXJuIGlubmVyLm1vZGUuYmxhbmtMaW5lKGlubmVyLnN0YXRlKTtcclxuICB9XHJcblxyXG4gIGZ1bmN0aW9uIHJlYWRUb2tlbihtb2RlLCBzdHJlYW0sIHN0YXRlKSB7XHJcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IDEwOyBpKyspIHtcclxuICAgICAgdmFyIHN0eWxlID0gbW9kZS50b2tlbihzdHJlYW0sIHN0YXRlKTtcclxuICAgICAgaWYgKHN0cmVhbS5wb3MgPiBzdHJlYW0uc3RhcnQpIHJldHVybiBzdHlsZTtcclxuICAgIH1cclxuICAgIHRocm93IG5ldyBFcnJvcihcIk1vZGUgXCIgKyBtb2RlLm5hbWUgKyBcIiBmYWlsZWQgdG8gYWR2YW5jZSBzdHJlYW0uXCIpO1xyXG4gIH1cclxuXHJcbiAgLy8gUnVuIHRoZSBnaXZlbiBtb2RlJ3MgcGFyc2VyIG92ZXIgYSBsaW5lLCBjYWxsaW5nIGYgZm9yIGVhY2ggdG9rZW4uXHJcbiAgZnVuY3Rpb24gcnVuTW9kZShjbSwgdGV4dCwgbW9kZSwgc3RhdGUsIGYsIGxpbmVDbGFzc2VzLCBmb3JjZVRvRW5kKSB7XHJcbiAgICB2YXIgZmxhdHRlblNwYW5zID0gbW9kZS5mbGF0dGVuU3BhbnM7XHJcbiAgICBpZiAoZmxhdHRlblNwYW5zID09IG51bGwpIGZsYXR0ZW5TcGFucyA9IGNtLm9wdGlvbnMuZmxhdHRlblNwYW5zO1xyXG4gICAgdmFyIGN1clN0YXJ0ID0gMCwgY3VyU3R5bGUgPSBudWxsO1xyXG4gICAgdmFyIHN0cmVhbSA9IG5ldyBTdHJpbmdTdHJlYW0odGV4dCwgY20ub3B0aW9ucy50YWJTaXplKSwgc3R5bGU7XHJcbiAgICBpZiAodGV4dCA9PSBcIlwiKSBleHRyYWN0TGluZUNsYXNzZXMoY2FsbEJsYW5rTGluZShtb2RlLCBzdGF0ZSksIGxpbmVDbGFzc2VzKTtcclxuICAgIHdoaWxlICghc3RyZWFtLmVvbCgpKSB7XHJcbiAgICAgIGlmIChzdHJlYW0ucG9zID4gY20ub3B0aW9ucy5tYXhIaWdobGlnaHRMZW5ndGgpIHtcclxuICAgICAgICBmbGF0dGVuU3BhbnMgPSBmYWxzZTtcclxuICAgICAgICBpZiAoZm9yY2VUb0VuZCkgcHJvY2Vzc0xpbmUoY20sIHRleHQsIHN0YXRlLCBzdHJlYW0ucG9zKTtcclxuICAgICAgICBzdHJlYW0ucG9zID0gdGV4dC5sZW5ndGg7XHJcbiAgICAgICAgc3R5bGUgPSBudWxsO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIHN0eWxlID0gZXh0cmFjdExpbmVDbGFzc2VzKHJlYWRUb2tlbihtb2RlLCBzdHJlYW0sIHN0YXRlKSwgbGluZUNsYXNzZXMpO1xyXG4gICAgICB9XHJcbiAgICAgIGlmIChjbS5vcHRpb25zLmFkZE1vZGVDbGFzcykge1xyXG4gICAgICAgIHZhciBtTmFtZSA9IENvZGVNaXJyb3IuaW5uZXJNb2RlKG1vZGUsIHN0YXRlKS5tb2RlLm5hbWU7XHJcbiAgICAgICAgaWYgKG1OYW1lKSBzdHlsZSA9IFwibS1cIiArIChzdHlsZSA/IG1OYW1lICsgXCIgXCIgKyBzdHlsZSA6IG1OYW1lKTtcclxuICAgICAgfVxyXG4gICAgICBpZiAoIWZsYXR0ZW5TcGFucyB8fCBjdXJTdHlsZSAhPSBzdHlsZSkge1xyXG4gICAgICAgIGlmIChjdXJTdGFydCA8IHN0cmVhbS5zdGFydCkgZihzdHJlYW0uc3RhcnQsIGN1clN0eWxlKTtcclxuICAgICAgICBjdXJTdGFydCA9IHN0cmVhbS5zdGFydDsgY3VyU3R5bGUgPSBzdHlsZTtcclxuICAgICAgfVxyXG4gICAgICBzdHJlYW0uc3RhcnQgPSBzdHJlYW0ucG9zO1xyXG4gICAgfVxyXG4gICAgd2hpbGUgKGN1clN0YXJ0IDwgc3RyZWFtLnBvcykge1xyXG4gICAgICAvLyBXZWJraXQgc2VlbXMgdG8gcmVmdXNlIHRvIHJlbmRlciB0ZXh0IG5vZGVzIGxvbmdlciB0aGFuIDU3NDQ0IGNoYXJhY3RlcnNcclxuICAgICAgdmFyIHBvcyA9IE1hdGgubWluKHN0cmVhbS5wb3MsIGN1clN0YXJ0ICsgNTAwMDApO1xyXG4gICAgICBmKHBvcywgY3VyU3R5bGUpO1xyXG4gICAgICBjdXJTdGFydCA9IHBvcztcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8vIENvbXB1dGUgYSBzdHlsZSBhcnJheSAoYW4gYXJyYXkgc3RhcnRpbmcgd2l0aCBhIG1vZGUgZ2VuZXJhdGlvblxyXG4gIC8vIC0tIGZvciBpbnZhbGlkYXRpb24gLS0gZm9sbG93ZWQgYnkgcGFpcnMgb2YgZW5kIHBvc2l0aW9ucyBhbmRcclxuICAvLyBzdHlsZSBzdHJpbmdzKSwgd2hpY2ggaXMgdXNlZCB0byBoaWdobGlnaHQgdGhlIHRva2VucyBvbiB0aGVcclxuICAvLyBsaW5lLlxyXG4gIGZ1bmN0aW9uIGhpZ2hsaWdodExpbmUoY20sIGxpbmUsIHN0YXRlLCBmb3JjZVRvRW5kKSB7XHJcbiAgICAvLyBBIHN0eWxlcyBhcnJheSBhbHdheXMgc3RhcnRzIHdpdGggYSBudW1iZXIgaWRlbnRpZnlpbmcgdGhlXHJcbiAgICAvLyBtb2RlL292ZXJsYXlzIHRoYXQgaXQgaXMgYmFzZWQgb24gKGZvciBlYXN5IGludmFsaWRhdGlvbikuXHJcbiAgICB2YXIgc3QgPSBbY20uc3RhdGUubW9kZUdlbl0sIGxpbmVDbGFzc2VzID0ge307XHJcbiAgICAvLyBDb21wdXRlIHRoZSBiYXNlIGFycmF5IG9mIHN0eWxlc1xyXG4gICAgcnVuTW9kZShjbSwgbGluZS50ZXh0LCBjbS5kb2MubW9kZSwgc3RhdGUsIGZ1bmN0aW9uKGVuZCwgc3R5bGUpIHtcclxuICAgICAgc3QucHVzaChlbmQsIHN0eWxlKTtcclxuICAgIH0sIGxpbmVDbGFzc2VzLCBmb3JjZVRvRW5kKTtcclxuXHJcbiAgICAvLyBSdW4gb3ZlcmxheXMsIGFkanVzdCBzdHlsZSBhcnJheS5cclxuICAgIGZvciAodmFyIG8gPSAwOyBvIDwgY20uc3RhdGUub3ZlcmxheXMubGVuZ3RoOyArK28pIHtcclxuICAgICAgdmFyIG92ZXJsYXkgPSBjbS5zdGF0ZS5vdmVybGF5c1tvXSwgaSA9IDEsIGF0ID0gMDtcclxuICAgICAgcnVuTW9kZShjbSwgbGluZS50ZXh0LCBvdmVybGF5Lm1vZGUsIHRydWUsIGZ1bmN0aW9uKGVuZCwgc3R5bGUpIHtcclxuICAgICAgICB2YXIgc3RhcnQgPSBpO1xyXG4gICAgICAgIC8vIEVuc3VyZSB0aGVyZSdzIGEgdG9rZW4gZW5kIGF0IHRoZSBjdXJyZW50IHBvc2l0aW9uLCBhbmQgdGhhdCBpIHBvaW50cyBhdCBpdFxyXG4gICAgICAgIHdoaWxlIChhdCA8IGVuZCkge1xyXG4gICAgICAgICAgdmFyIGlfZW5kID0gc3RbaV07XHJcbiAgICAgICAgICBpZiAoaV9lbmQgPiBlbmQpXHJcbiAgICAgICAgICAgIHN0LnNwbGljZShpLCAxLCBlbmQsIHN0W2krMV0sIGlfZW5kKTtcclxuICAgICAgICAgIGkgKz0gMjtcclxuICAgICAgICAgIGF0ID0gTWF0aC5taW4oZW5kLCBpX2VuZCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICghc3R5bGUpIHJldHVybjtcclxuICAgICAgICBpZiAob3ZlcmxheS5vcGFxdWUpIHtcclxuICAgICAgICAgIHN0LnNwbGljZShzdGFydCwgaSAtIHN0YXJ0LCBlbmQsIFwiY20tb3ZlcmxheSBcIiArIHN0eWxlKTtcclxuICAgICAgICAgIGkgPSBzdGFydCArIDI7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIGZvciAoOyBzdGFydCA8IGk7IHN0YXJ0ICs9IDIpIHtcclxuICAgICAgICAgICAgdmFyIGN1ciA9IHN0W3N0YXJ0KzFdO1xyXG4gICAgICAgICAgICBzdFtzdGFydCsxXSA9IChjdXIgPyBjdXIgKyBcIiBcIiA6IFwiXCIpICsgXCJjbS1vdmVybGF5IFwiICsgc3R5bGU7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICB9LCBsaW5lQ2xhc3Nlcyk7XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIHtzdHlsZXM6IHN0LCBjbGFzc2VzOiBsaW5lQ2xhc3Nlcy5iZ0NsYXNzIHx8IGxpbmVDbGFzc2VzLnRleHRDbGFzcyA/IGxpbmVDbGFzc2VzIDogbnVsbH07XHJcbiAgfVxyXG5cclxuICBmdW5jdGlvbiBnZXRMaW5lU3R5bGVzKGNtLCBsaW5lKSB7XHJcbiAgICBpZiAoIWxpbmUuc3R5bGVzIHx8IGxpbmUuc3R5bGVzWzBdICE9IGNtLnN0YXRlLm1vZGVHZW4pIHtcclxuICAgICAgdmFyIHJlc3VsdCA9IGhpZ2hsaWdodExpbmUoY20sIGxpbmUsIGxpbmUuc3RhdGVBZnRlciA9IGdldFN0YXRlQmVmb3JlKGNtLCBsaW5lTm8obGluZSkpKTtcclxuICAgICAgbGluZS5zdHlsZXMgPSByZXN1bHQuc3R5bGVzO1xyXG4gICAgICBpZiAocmVzdWx0LmNsYXNzZXMpIGxpbmUuc3R5bGVDbGFzc2VzID0gcmVzdWx0LmNsYXNzZXM7XHJcbiAgICAgIGVsc2UgaWYgKGxpbmUuc3R5bGVDbGFzc2VzKSBsaW5lLnN0eWxlQ2xhc3NlcyA9IG51bGw7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gbGluZS5zdHlsZXM7XHJcbiAgfVxyXG5cclxuICAvLyBMaWdodHdlaWdodCBmb3JtIG9mIGhpZ2hsaWdodCAtLSBwcm9jZWVkIG92ZXIgdGhpcyBsaW5lIGFuZFxyXG4gIC8vIHVwZGF0ZSBzdGF0ZSwgYnV0IGRvbid0IHNhdmUgYSBzdHlsZSBhcnJheS4gVXNlZCBmb3IgbGluZXMgdGhhdFxyXG4gIC8vIGFyZW4ndCBjdXJyZW50bHkgdmlzaWJsZS5cclxuICBmdW5jdGlvbiBwcm9jZXNzTGluZShjbSwgdGV4dCwgc3RhdGUsIHN0YXJ0QXQpIHtcclxuICAgIHZhciBtb2RlID0gY20uZG9jLm1vZGU7XHJcbiAgICB2YXIgc3RyZWFtID0gbmV3IFN0cmluZ1N0cmVhbSh0ZXh0LCBjbS5vcHRpb25zLnRhYlNpemUpO1xyXG4gICAgc3RyZWFtLnN0YXJ0ID0gc3RyZWFtLnBvcyA9IHN0YXJ0QXQgfHwgMDtcclxuICAgIGlmICh0ZXh0ID09IFwiXCIpIGNhbGxCbGFua0xpbmUobW9kZSwgc3RhdGUpO1xyXG4gICAgd2hpbGUgKCFzdHJlYW0uZW9sKCkgJiYgc3RyZWFtLnBvcyA8PSBjbS5vcHRpb25zLm1heEhpZ2hsaWdodExlbmd0aCkge1xyXG4gICAgICByZWFkVG9rZW4obW9kZSwgc3RyZWFtLCBzdGF0ZSk7XHJcbiAgICAgIHN0cmVhbS5zdGFydCA9IHN0cmVhbS5wb3M7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvLyBDb252ZXJ0IGEgc3R5bGUgYXMgcmV0dXJuZWQgYnkgYSBtb2RlIChlaXRoZXIgbnVsbCwgb3IgYSBzdHJpbmdcclxuICAvLyBjb250YWluaW5nIG9uZSBvciBtb3JlIHN0eWxlcykgdG8gYSBDU1Mgc3R5bGUuIFRoaXMgaXMgY2FjaGVkLFxyXG4gIC8vIGFuZCBhbHNvIGxvb2tzIGZvciBsaW5lLXdpZGUgc3R5bGVzLlxyXG4gIHZhciBzdHlsZVRvQ2xhc3NDYWNoZSA9IHt9LCBzdHlsZVRvQ2xhc3NDYWNoZVdpdGhNb2RlID0ge307XHJcbiAgZnVuY3Rpb24gaW50ZXJwcmV0VG9rZW5TdHlsZShzdHlsZSwgb3B0aW9ucykge1xyXG4gICAgaWYgKCFzdHlsZSB8fCAvXlxccyokLy50ZXN0KHN0eWxlKSkgcmV0dXJuIG51bGw7XHJcbiAgICB2YXIgY2FjaGUgPSBvcHRpb25zLmFkZE1vZGVDbGFzcyA/IHN0eWxlVG9DbGFzc0NhY2hlV2l0aE1vZGUgOiBzdHlsZVRvQ2xhc3NDYWNoZTtcclxuICAgIHJldHVybiBjYWNoZVtzdHlsZV0gfHxcclxuICAgICAgKGNhY2hlW3N0eWxlXSA9IHN0eWxlLnJlcGxhY2UoL1xcUysvZywgXCJjbS0kJlwiKSk7XHJcbiAgfVxyXG5cclxuICAvLyBSZW5kZXIgdGhlIERPTSByZXByZXNlbnRhdGlvbiBvZiB0aGUgdGV4dCBvZiBhIGxpbmUuIEFsc28gYnVpbGRzXHJcbiAgLy8gdXAgYSAnbGluZSBtYXAnLCB3aGljaCBwb2ludHMgYXQgdGhlIERPTSBub2RlcyB0aGF0IHJlcHJlc2VudFxyXG4gIC8vIHNwZWNpZmljIHN0cmV0Y2hlcyBvZiB0ZXh0LCBhbmQgaXMgdXNlZCBieSB0aGUgbWVhc3VyaW5nIGNvZGUuXHJcbiAgLy8gVGhlIHJldHVybmVkIG9iamVjdCBjb250YWlucyB0aGUgRE9NIG5vZGUsIHRoaXMgbWFwLCBhbmRcclxuICAvLyBpbmZvcm1hdGlvbiBhYm91dCBsaW5lLXdpZGUgc3R5bGVzIHRoYXQgd2VyZSBzZXQgYnkgdGhlIG1vZGUuXHJcbiAgZnVuY3Rpb24gYnVpbGRMaW5lQ29udGVudChjbSwgbGluZVZpZXcpIHtcclxuICAgIC8vIFRoZSBwYWRkaW5nLXJpZ2h0IGZvcmNlcyB0aGUgZWxlbWVudCB0byBoYXZlIGEgJ2JvcmRlcicsIHdoaWNoXHJcbiAgICAvLyBpcyBuZWVkZWQgb24gV2Via2l0IHRvIGJlIGFibGUgdG8gZ2V0IGxpbmUtbGV2ZWwgYm91bmRpbmdcclxuICAgIC8vIHJlY3RhbmdsZXMgZm9yIGl0IChpbiBtZWFzdXJlQ2hhcikuXHJcbiAgICB2YXIgY29udGVudCA9IGVsdChcInNwYW5cIiwgbnVsbCwgbnVsbCwgd2Via2l0ID8gXCJwYWRkaW5nLXJpZ2h0OiAuMXB4XCIgOiBudWxsKTtcclxuICAgIHZhciBidWlsZGVyID0ge3ByZTogZWx0KFwicHJlXCIsIFtjb250ZW50XSksIGNvbnRlbnQ6IGNvbnRlbnQsIGNvbDogMCwgcG9zOiAwLCBjbTogY219O1xyXG4gICAgbGluZVZpZXcubWVhc3VyZSA9IHt9O1xyXG5cclxuICAgIC8vIEl0ZXJhdGUgb3ZlciB0aGUgbG9naWNhbCBsaW5lcyB0aGF0IG1ha2UgdXAgdGhpcyB2aXN1YWwgbGluZS5cclxuICAgIGZvciAodmFyIGkgPSAwOyBpIDw9IChsaW5lVmlldy5yZXN0ID8gbGluZVZpZXcucmVzdC5sZW5ndGggOiAwKTsgaSsrKSB7XHJcbiAgICAgIHZhciBsaW5lID0gaSA/IGxpbmVWaWV3LnJlc3RbaSAtIDFdIDogbGluZVZpZXcubGluZSwgb3JkZXI7XHJcbiAgICAgIGJ1aWxkZXIucG9zID0gMDtcclxuICAgICAgYnVpbGRlci5hZGRUb2tlbiA9IGJ1aWxkVG9rZW47XHJcbiAgICAgIC8vIE9wdGlvbmFsbHkgd2lyZSBpbiBzb21lIGhhY2tzIGludG8gdGhlIHRva2VuLXJlbmRlcmluZ1xyXG4gICAgICAvLyBhbGdvcml0aG0sIHRvIGRlYWwgd2l0aCBicm93c2VyIHF1aXJrcy5cclxuICAgICAgaWYgKChpZSB8fCB3ZWJraXQpICYmIGNtLmdldE9wdGlvbihcImxpbmVXcmFwcGluZ1wiKSlcclxuICAgICAgICBidWlsZGVyLmFkZFRva2VuID0gYnVpbGRUb2tlblNwbGl0U3BhY2VzKGJ1aWxkZXIuYWRkVG9rZW4pO1xyXG4gICAgICBpZiAoaGFzQmFkQmlkaVJlY3RzKGNtLmRpc3BsYXkubWVhc3VyZSkgJiYgKG9yZGVyID0gZ2V0T3JkZXIobGluZSkpKVxyXG4gICAgICAgIGJ1aWxkZXIuYWRkVG9rZW4gPSBidWlsZFRva2VuQmFkQmlkaShidWlsZGVyLmFkZFRva2VuLCBvcmRlcik7XHJcbiAgICAgIGJ1aWxkZXIubWFwID0gW107XHJcbiAgICAgIGluc2VydExpbmVDb250ZW50KGxpbmUsIGJ1aWxkZXIsIGdldExpbmVTdHlsZXMoY20sIGxpbmUpKTtcclxuICAgICAgaWYgKGxpbmUuc3R5bGVDbGFzc2VzKSB7XHJcbiAgICAgICAgaWYgKGxpbmUuc3R5bGVDbGFzc2VzLmJnQ2xhc3MpXHJcbiAgICAgICAgICBidWlsZGVyLmJnQ2xhc3MgPSBqb2luQ2xhc3NlcyhsaW5lLnN0eWxlQ2xhc3Nlcy5iZ0NsYXNzLCBidWlsZGVyLmJnQ2xhc3MgfHwgXCJcIik7XHJcbiAgICAgICAgaWYgKGxpbmUuc3R5bGVDbGFzc2VzLnRleHRDbGFzcylcclxuICAgICAgICAgIGJ1aWxkZXIudGV4dENsYXNzID0gam9pbkNsYXNzZXMobGluZS5zdHlsZUNsYXNzZXMudGV4dENsYXNzLCBidWlsZGVyLnRleHRDbGFzcyB8fCBcIlwiKTtcclxuICAgICAgfVxyXG5cclxuICAgICAgLy8gRW5zdXJlIGF0IGxlYXN0IGEgc2luZ2xlIG5vZGUgaXMgcHJlc2VudCwgZm9yIG1lYXN1cmluZy5cclxuICAgICAgaWYgKGJ1aWxkZXIubWFwLmxlbmd0aCA9PSAwKVxyXG4gICAgICAgIGJ1aWxkZXIubWFwLnB1c2goMCwgMCwgYnVpbGRlci5jb250ZW50LmFwcGVuZENoaWxkKHplcm9XaWR0aEVsZW1lbnQoY20uZGlzcGxheS5tZWFzdXJlKSkpO1xyXG5cclxuICAgICAgLy8gU3RvcmUgdGhlIG1hcCBhbmQgYSBjYWNoZSBvYmplY3QgZm9yIHRoZSBjdXJyZW50IGxvZ2ljYWwgbGluZVxyXG4gICAgICBpZiAoaSA9PSAwKSB7XHJcbiAgICAgICAgbGluZVZpZXcubWVhc3VyZS5tYXAgPSBidWlsZGVyLm1hcDtcclxuICAgICAgICBsaW5lVmlldy5tZWFzdXJlLmNhY2hlID0ge307XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgKGxpbmVWaWV3Lm1lYXN1cmUubWFwcyB8fCAobGluZVZpZXcubWVhc3VyZS5tYXBzID0gW10pKS5wdXNoKGJ1aWxkZXIubWFwKTtcclxuICAgICAgICAobGluZVZpZXcubWVhc3VyZS5jYWNoZXMgfHwgKGxpbmVWaWV3Lm1lYXN1cmUuY2FjaGVzID0gW10pKS5wdXNoKHt9KTtcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHNpZ25hbChjbSwgXCJyZW5kZXJMaW5lXCIsIGNtLCBsaW5lVmlldy5saW5lLCBidWlsZGVyLnByZSk7XHJcbiAgICBpZiAoYnVpbGRlci5wcmUuY2xhc3NOYW1lKVxyXG4gICAgICBidWlsZGVyLnRleHRDbGFzcyA9IGpvaW5DbGFzc2VzKGJ1aWxkZXIucHJlLmNsYXNzTmFtZSwgYnVpbGRlci50ZXh0Q2xhc3MgfHwgXCJcIik7XHJcbiAgICByZXR1cm4gYnVpbGRlcjtcclxuICB9XHJcblxyXG4gIGZ1bmN0aW9uIGRlZmF1bHRTcGVjaWFsQ2hhclBsYWNlaG9sZGVyKGNoKSB7XHJcbiAgICB2YXIgdG9rZW4gPSBlbHQoXCJzcGFuXCIsIFwiXFx1MjAyMlwiLCBcImNtLWludmFsaWRjaGFyXCIpO1xyXG4gICAgdG9rZW4udGl0bGUgPSBcIlxcXFx1XCIgKyBjaC5jaGFyQ29kZUF0KDApLnRvU3RyaW5nKDE2KTtcclxuICAgIHJldHVybiB0b2tlbjtcclxuICB9XHJcblxyXG4gIC8vIEJ1aWxkIHVwIHRoZSBET00gcmVwcmVzZW50YXRpb24gZm9yIGEgc2luZ2xlIHRva2VuLCBhbmQgYWRkIGl0IHRvXHJcbiAgLy8gdGhlIGxpbmUgbWFwLiBUYWtlcyBjYXJlIHRvIHJlbmRlciBzcGVjaWFsIGNoYXJhY3RlcnMgc2VwYXJhdGVseS5cclxuICBmdW5jdGlvbiBidWlsZFRva2VuKGJ1aWxkZXIsIHRleHQsIHN0eWxlLCBzdGFydFN0eWxlLCBlbmRTdHlsZSwgdGl0bGUpIHtcclxuICAgIGlmICghdGV4dCkgcmV0dXJuO1xyXG4gICAgdmFyIHNwZWNpYWwgPSBidWlsZGVyLmNtLm9wdGlvbnMuc3BlY2lhbENoYXJzLCBtdXN0V3JhcCA9IGZhbHNlO1xyXG4gICAgaWYgKCFzcGVjaWFsLnRlc3QodGV4dCkpIHtcclxuICAgICAgYnVpbGRlci5jb2wgKz0gdGV4dC5sZW5ndGg7XHJcbiAgICAgIHZhciBjb250ZW50ID0gZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUodGV4dCk7XHJcbiAgICAgIGJ1aWxkZXIubWFwLnB1c2goYnVpbGRlci5wb3MsIGJ1aWxkZXIucG9zICsgdGV4dC5sZW5ndGgsIGNvbnRlbnQpO1xyXG4gICAgICBpZiAoaWUgJiYgaWVfdmVyc2lvbiA8IDkpIG11c3RXcmFwID0gdHJ1ZTtcclxuICAgICAgYnVpbGRlci5wb3MgKz0gdGV4dC5sZW5ndGg7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB2YXIgY29udGVudCA9IGRvY3VtZW50LmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKSwgcG9zID0gMDtcclxuICAgICAgd2hpbGUgKHRydWUpIHtcclxuICAgICAgICBzcGVjaWFsLmxhc3RJbmRleCA9IHBvcztcclxuICAgICAgICB2YXIgbSA9IHNwZWNpYWwuZXhlYyh0ZXh0KTtcclxuICAgICAgICB2YXIgc2tpcHBlZCA9IG0gPyBtLmluZGV4IC0gcG9zIDogdGV4dC5sZW5ndGggLSBwb3M7XHJcbiAgICAgICAgaWYgKHNraXBwZWQpIHtcclxuICAgICAgICAgIHZhciB0eHQgPSBkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZSh0ZXh0LnNsaWNlKHBvcywgcG9zICsgc2tpcHBlZCkpO1xyXG4gICAgICAgICAgaWYgKGllICYmIGllX3ZlcnNpb24gPCA5KSBjb250ZW50LmFwcGVuZENoaWxkKGVsdChcInNwYW5cIiwgW3R4dF0pKTtcclxuICAgICAgICAgIGVsc2UgY29udGVudC5hcHBlbmRDaGlsZCh0eHQpO1xyXG4gICAgICAgICAgYnVpbGRlci5tYXAucHVzaChidWlsZGVyLnBvcywgYnVpbGRlci5wb3MgKyBza2lwcGVkLCB0eHQpO1xyXG4gICAgICAgICAgYnVpbGRlci5jb2wgKz0gc2tpcHBlZDtcclxuICAgICAgICAgIGJ1aWxkZXIucG9zICs9IHNraXBwZWQ7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICghbSkgYnJlYWs7XHJcbiAgICAgICAgcG9zICs9IHNraXBwZWQgKyAxO1xyXG4gICAgICAgIGlmIChtWzBdID09IFwiXFx0XCIpIHtcclxuICAgICAgICAgIHZhciB0YWJTaXplID0gYnVpbGRlci5jbS5vcHRpb25zLnRhYlNpemUsIHRhYldpZHRoID0gdGFiU2l6ZSAtIGJ1aWxkZXIuY29sICUgdGFiU2l6ZTtcclxuICAgICAgICAgIHZhciB0eHQgPSBjb250ZW50LmFwcGVuZENoaWxkKGVsdChcInNwYW5cIiwgc3BhY2VTdHIodGFiV2lkdGgpLCBcImNtLXRhYlwiKSk7XHJcbiAgICAgICAgICBidWlsZGVyLmNvbCArPSB0YWJXaWR0aDtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgdmFyIHR4dCA9IGJ1aWxkZXIuY20ub3B0aW9ucy5zcGVjaWFsQ2hhclBsYWNlaG9sZGVyKG1bMF0pO1xyXG4gICAgICAgICAgaWYgKGllICYmIGllX3ZlcnNpb24gPCA5KSBjb250ZW50LmFwcGVuZENoaWxkKGVsdChcInNwYW5cIiwgW3R4dF0pKTtcclxuICAgICAgICAgIGVsc2UgY29udGVudC5hcHBlbmRDaGlsZCh0eHQpO1xyXG4gICAgICAgICAgYnVpbGRlci5jb2wgKz0gMTtcclxuICAgICAgICB9XHJcbiAgICAgICAgYnVpbGRlci5tYXAucHVzaChidWlsZGVyLnBvcywgYnVpbGRlci5wb3MgKyAxLCB0eHQpO1xyXG4gICAgICAgIGJ1aWxkZXIucG9zKys7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIGlmIChzdHlsZSB8fCBzdGFydFN0eWxlIHx8IGVuZFN0eWxlIHx8IG11c3RXcmFwKSB7XHJcbiAgICAgIHZhciBmdWxsU3R5bGUgPSBzdHlsZSB8fCBcIlwiO1xyXG4gICAgICBpZiAoc3RhcnRTdHlsZSkgZnVsbFN0eWxlICs9IHN0YXJ0U3R5bGU7XHJcbiAgICAgIGlmIChlbmRTdHlsZSkgZnVsbFN0eWxlICs9IGVuZFN0eWxlO1xyXG4gICAgICB2YXIgdG9rZW4gPSBlbHQoXCJzcGFuXCIsIFtjb250ZW50XSwgZnVsbFN0eWxlKTtcclxuICAgICAgaWYgKHRpdGxlKSB0b2tlbi50aXRsZSA9IHRpdGxlO1xyXG4gICAgICByZXR1cm4gYnVpbGRlci5jb250ZW50LmFwcGVuZENoaWxkKHRva2VuKTtcclxuICAgIH1cclxuICAgIGJ1aWxkZXIuY29udGVudC5hcHBlbmRDaGlsZChjb250ZW50KTtcclxuICB9XHJcblxyXG4gIGZ1bmN0aW9uIGJ1aWxkVG9rZW5TcGxpdFNwYWNlcyhpbm5lcikge1xyXG4gICAgZnVuY3Rpb24gc3BsaXQob2xkKSB7XHJcbiAgICAgIHZhciBvdXQgPSBcIiBcIjtcclxuICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBvbGQubGVuZ3RoIC0gMjsgKytpKSBvdXQgKz0gaSAlIDIgPyBcIiBcIiA6IFwiXFx1MDBhMFwiO1xyXG4gICAgICBvdXQgKz0gXCIgXCI7XHJcbiAgICAgIHJldHVybiBvdXQ7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gZnVuY3Rpb24oYnVpbGRlciwgdGV4dCwgc3R5bGUsIHN0YXJ0U3R5bGUsIGVuZFN0eWxlLCB0aXRsZSkge1xyXG4gICAgICBpbm5lcihidWlsZGVyLCB0ZXh0LnJlcGxhY2UoLyB7Myx9L2csIHNwbGl0KSwgc3R5bGUsIHN0YXJ0U3R5bGUsIGVuZFN0eWxlLCB0aXRsZSk7XHJcbiAgICB9O1xyXG4gIH1cclxuXHJcbiAgLy8gV29yayBhcm91bmQgbm9uc2Vuc2UgZGltZW5zaW9ucyBiZWluZyByZXBvcnRlZCBmb3Igc3RyZXRjaGVzIG9mXHJcbiAgLy8gcmlnaHQtdG8tbGVmdCB0ZXh0LlxyXG4gIGZ1bmN0aW9uIGJ1aWxkVG9rZW5CYWRCaWRpKGlubmVyLCBvcmRlcikge1xyXG4gICAgcmV0dXJuIGZ1bmN0aW9uKGJ1aWxkZXIsIHRleHQsIHN0eWxlLCBzdGFydFN0eWxlLCBlbmRTdHlsZSwgdGl0bGUpIHtcclxuICAgICAgc3R5bGUgPSBzdHlsZSA/IHN0eWxlICsgXCIgY20tZm9yY2UtYm9yZGVyXCIgOiBcImNtLWZvcmNlLWJvcmRlclwiO1xyXG4gICAgICB2YXIgc3RhcnQgPSBidWlsZGVyLnBvcywgZW5kID0gc3RhcnQgKyB0ZXh0Lmxlbmd0aDtcclxuICAgICAgZm9yICg7Oykge1xyXG4gICAgICAgIC8vIEZpbmQgdGhlIHBhcnQgdGhhdCBvdmVybGFwcyB3aXRoIHRoZSBzdGFydCBvZiB0aGlzIHRleHRcclxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IG9yZGVyLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICB2YXIgcGFydCA9IG9yZGVyW2ldO1xyXG4gICAgICAgICAgaWYgKHBhcnQudG8gPiBzdGFydCAmJiBwYXJ0LmZyb20gPD0gc3RhcnQpIGJyZWFrO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAocGFydC50byA+PSBlbmQpIHJldHVybiBpbm5lcihidWlsZGVyLCB0ZXh0LCBzdHlsZSwgc3RhcnRTdHlsZSwgZW5kU3R5bGUsIHRpdGxlKTtcclxuICAgICAgICBpbm5lcihidWlsZGVyLCB0ZXh0LnNsaWNlKDAsIHBhcnQudG8gLSBzdGFydCksIHN0eWxlLCBzdGFydFN0eWxlLCBudWxsLCB0aXRsZSk7XHJcbiAgICAgICAgc3RhcnRTdHlsZSA9IG51bGw7XHJcbiAgICAgICAgdGV4dCA9IHRleHQuc2xpY2UocGFydC50byAtIHN0YXJ0KTtcclxuICAgICAgICBzdGFydCA9IHBhcnQudG87XHJcbiAgICAgIH1cclxuICAgIH07XHJcbiAgfVxyXG5cclxuICBmdW5jdGlvbiBidWlsZENvbGxhcHNlZFNwYW4oYnVpbGRlciwgc2l6ZSwgbWFya2VyLCBpZ25vcmVXaWRnZXQpIHtcclxuICAgIHZhciB3aWRnZXQgPSAhaWdub3JlV2lkZ2V0ICYmIG1hcmtlci53aWRnZXROb2RlO1xyXG4gICAgaWYgKHdpZGdldCkge1xyXG4gICAgICBidWlsZGVyLm1hcC5wdXNoKGJ1aWxkZXIucG9zLCBidWlsZGVyLnBvcyArIHNpemUsIHdpZGdldCk7XHJcbiAgICAgIGJ1aWxkZXIuY29udGVudC5hcHBlbmRDaGlsZCh3aWRnZXQpO1xyXG4gICAgfVxyXG4gICAgYnVpbGRlci5wb3MgKz0gc2l6ZTtcclxuICB9XHJcblxyXG4gIC8vIE91dHB1dHMgYSBudW1iZXIgb2Ygc3BhbnMgdG8gbWFrZSB1cCBhIGxpbmUsIHRha2luZyBoaWdobGlnaHRpbmdcclxuICAvLyBhbmQgbWFya2VkIHRleHQgaW50byBhY2NvdW50LlxyXG4gIGZ1bmN0aW9uIGluc2VydExpbmVDb250ZW50KGxpbmUsIGJ1aWxkZXIsIHN0eWxlcykge1xyXG4gICAgdmFyIHNwYW5zID0gbGluZS5tYXJrZWRTcGFucywgYWxsVGV4dCA9IGxpbmUudGV4dCwgYXQgPSAwO1xyXG4gICAgaWYgKCFzcGFucykge1xyXG4gICAgICBmb3IgKHZhciBpID0gMTsgaSA8IHN0eWxlcy5sZW5ndGg7IGkrPTIpXHJcbiAgICAgICAgYnVpbGRlci5hZGRUb2tlbihidWlsZGVyLCBhbGxUZXh0LnNsaWNlKGF0LCBhdCA9IHN0eWxlc1tpXSksIGludGVycHJldFRva2VuU3R5bGUoc3R5bGVzW2krMV0sIGJ1aWxkZXIuY20ub3B0aW9ucykpO1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcblxyXG4gICAgdmFyIGxlbiA9IGFsbFRleHQubGVuZ3RoLCBwb3MgPSAwLCBpID0gMSwgdGV4dCA9IFwiXCIsIHN0eWxlO1xyXG4gICAgdmFyIG5leHRDaGFuZ2UgPSAwLCBzcGFuU3R5bGUsIHNwYW5FbmRTdHlsZSwgc3BhblN0YXJ0U3R5bGUsIHRpdGxlLCBjb2xsYXBzZWQ7XHJcbiAgICBmb3IgKDs7KSB7XHJcbiAgICAgIGlmIChuZXh0Q2hhbmdlID09IHBvcykgeyAvLyBVcGRhdGUgY3VycmVudCBtYXJrZXIgc2V0XHJcbiAgICAgICAgc3BhblN0eWxlID0gc3BhbkVuZFN0eWxlID0gc3BhblN0YXJ0U3R5bGUgPSB0aXRsZSA9IFwiXCI7XHJcbiAgICAgICAgY29sbGFwc2VkID0gbnVsbDsgbmV4dENoYW5nZSA9IEluZmluaXR5O1xyXG4gICAgICAgIHZhciBmb3VuZEJvb2ttYXJrcyA9IFtdO1xyXG4gICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgc3BhbnMubGVuZ3RoOyArK2opIHtcclxuICAgICAgICAgIHZhciBzcCA9IHNwYW5zW2pdLCBtID0gc3AubWFya2VyO1xyXG4gICAgICAgICAgaWYgKHNwLmZyb20gPD0gcG9zICYmIChzcC50byA9PSBudWxsIHx8IHNwLnRvID4gcG9zKSkge1xyXG4gICAgICAgICAgICBpZiAoc3AudG8gIT0gbnVsbCAmJiBuZXh0Q2hhbmdlID4gc3AudG8pIHsgbmV4dENoYW5nZSA9IHNwLnRvOyBzcGFuRW5kU3R5bGUgPSBcIlwiOyB9XHJcbiAgICAgICAgICAgIGlmIChtLmNsYXNzTmFtZSkgc3BhblN0eWxlICs9IFwiIFwiICsgbS5jbGFzc05hbWU7XHJcbiAgICAgICAgICAgIGlmIChtLnN0YXJ0U3R5bGUgJiYgc3AuZnJvbSA9PSBwb3MpIHNwYW5TdGFydFN0eWxlICs9IFwiIFwiICsgbS5zdGFydFN0eWxlO1xyXG4gICAgICAgICAgICBpZiAobS5lbmRTdHlsZSAmJiBzcC50byA9PSBuZXh0Q2hhbmdlKSBzcGFuRW5kU3R5bGUgKz0gXCIgXCIgKyBtLmVuZFN0eWxlO1xyXG4gICAgICAgICAgICBpZiAobS50aXRsZSAmJiAhdGl0bGUpIHRpdGxlID0gbS50aXRsZTtcclxuICAgICAgICAgICAgaWYgKG0uY29sbGFwc2VkICYmICghY29sbGFwc2VkIHx8IGNvbXBhcmVDb2xsYXBzZWRNYXJrZXJzKGNvbGxhcHNlZC5tYXJrZXIsIG0pIDwgMCkpXHJcbiAgICAgICAgICAgICAgY29sbGFwc2VkID0gc3A7XHJcbiAgICAgICAgICB9IGVsc2UgaWYgKHNwLmZyb20gPiBwb3MgJiYgbmV4dENoYW5nZSA+IHNwLmZyb20pIHtcclxuICAgICAgICAgICAgbmV4dENoYW5nZSA9IHNwLmZyb207XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICBpZiAobS50eXBlID09IFwiYm9va21hcmtcIiAmJiBzcC5mcm9tID09IHBvcyAmJiBtLndpZGdldE5vZGUpIGZvdW5kQm9va21hcmtzLnB1c2gobSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChjb2xsYXBzZWQgJiYgKGNvbGxhcHNlZC5mcm9tIHx8IDApID09IHBvcykge1xyXG4gICAgICAgICAgYnVpbGRDb2xsYXBzZWRTcGFuKGJ1aWxkZXIsIChjb2xsYXBzZWQudG8gPT0gbnVsbCA/IGxlbiArIDEgOiBjb2xsYXBzZWQudG8pIC0gcG9zLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbGxhcHNlZC5tYXJrZXIsIGNvbGxhcHNlZC5mcm9tID09IG51bGwpO1xyXG4gICAgICAgICAgaWYgKGNvbGxhcHNlZC50byA9PSBudWxsKSByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICghY29sbGFwc2VkICYmIGZvdW5kQm9va21hcmtzLmxlbmd0aCkgZm9yICh2YXIgaiA9IDA7IGogPCBmb3VuZEJvb2ttYXJrcy5sZW5ndGg7ICsrailcclxuICAgICAgICAgIGJ1aWxkQ29sbGFwc2VkU3BhbihidWlsZGVyLCAwLCBmb3VuZEJvb2ttYXJrc1tqXSk7XHJcbiAgICAgIH1cclxuICAgICAgaWYgKHBvcyA+PSBsZW4pIGJyZWFrO1xyXG5cclxuICAgICAgdmFyIHVwdG8gPSBNYXRoLm1pbihsZW4sIG5leHRDaGFuZ2UpO1xyXG4gICAgICB3aGlsZSAodHJ1ZSkge1xyXG4gICAgICAgIGlmICh0ZXh0KSB7XHJcbiAgICAgICAgICB2YXIgZW5kID0gcG9zICsgdGV4dC5sZW5ndGg7XHJcbiAgICAgICAgICBpZiAoIWNvbGxhcHNlZCkge1xyXG4gICAgICAgICAgICB2YXIgdG9rZW5UZXh0ID0gZW5kID4gdXB0byA/IHRleHQuc2xpY2UoMCwgdXB0byAtIHBvcykgOiB0ZXh0O1xyXG4gICAgICAgICAgICBidWlsZGVyLmFkZFRva2VuKGJ1aWxkZXIsIHRva2VuVGV4dCwgc3R5bGUgPyBzdHlsZSArIHNwYW5TdHlsZSA6IHNwYW5TdHlsZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzcGFuU3RhcnRTdHlsZSwgcG9zICsgdG9rZW5UZXh0Lmxlbmd0aCA9PSBuZXh0Q2hhbmdlID8gc3BhbkVuZFN0eWxlIDogXCJcIiwgdGl0bGUpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgaWYgKGVuZCA+PSB1cHRvKSB7dGV4dCA9IHRleHQuc2xpY2UodXB0byAtIHBvcyk7IHBvcyA9IHVwdG87IGJyZWFrO31cclxuICAgICAgICAgIHBvcyA9IGVuZDtcclxuICAgICAgICAgIHNwYW5TdGFydFN0eWxlID0gXCJcIjtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGV4dCA9IGFsbFRleHQuc2xpY2UoYXQsIGF0ID0gc3R5bGVzW2krK10pO1xyXG4gICAgICAgIHN0eWxlID0gaW50ZXJwcmV0VG9rZW5TdHlsZShzdHlsZXNbaSsrXSwgYnVpbGRlci5jbS5vcHRpb25zKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLy8gRE9DVU1FTlQgREFUQSBTVFJVQ1RVUkVcclxuXHJcbiAgLy8gQnkgZGVmYXVsdCwgdXBkYXRlcyB0aGF0IHN0YXJ0IGFuZCBlbmQgYXQgdGhlIGJlZ2lubmluZyBvZiBhIGxpbmVcclxuICAvLyBhcmUgdHJlYXRlZCBzcGVjaWFsbHksIGluIG9yZGVyIHRvIG1ha2UgdGhlIGFzc29jaWF0aW9uIG9mIGxpbmVcclxuICAvLyB3aWRnZXRzIGFuZCBtYXJrZXIgZWxlbWVudHMgd2l0aCB0aGUgdGV4dCBiZWhhdmUgbW9yZSBpbnR1aXRpdmUuXHJcbiAgZnVuY3Rpb24gaXNXaG9sZUxpbmVVcGRhdGUoZG9jLCBjaGFuZ2UpIHtcclxuICAgIHJldHVybiBjaGFuZ2UuZnJvbS5jaCA9PSAwICYmIGNoYW5nZS50by5jaCA9PSAwICYmIGxzdChjaGFuZ2UudGV4dCkgPT0gXCJcIiAmJlxyXG4gICAgICAoIWRvYy5jbSB8fCBkb2MuY20ub3B0aW9ucy53aG9sZUxpbmVVcGRhdGVCZWZvcmUpO1xyXG4gIH1cclxuXHJcbiAgLy8gUGVyZm9ybSBhIGNoYW5nZSBvbiB0aGUgZG9jdW1lbnQgZGF0YSBzdHJ1Y3R1cmUuXHJcbiAgZnVuY3Rpb24gdXBkYXRlRG9jKGRvYywgY2hhbmdlLCBtYXJrZWRTcGFucywgZXN0aW1hdGVIZWlnaHQpIHtcclxuICAgIGZ1bmN0aW9uIHNwYW5zRm9yKG4pIHtyZXR1cm4gbWFya2VkU3BhbnMgPyBtYXJrZWRTcGFuc1tuXSA6IG51bGw7fVxyXG4gICAgZnVuY3Rpb24gdXBkYXRlKGxpbmUsIHRleHQsIHNwYW5zKSB7XHJcbiAgICAgIHVwZGF0ZUxpbmUobGluZSwgdGV4dCwgc3BhbnMsIGVzdGltYXRlSGVpZ2h0KTtcclxuICAgICAgc2lnbmFsTGF0ZXIobGluZSwgXCJjaGFuZ2VcIiwgbGluZSwgY2hhbmdlKTtcclxuICAgIH1cclxuXHJcbiAgICB2YXIgZnJvbSA9IGNoYW5nZS5mcm9tLCB0byA9IGNoYW5nZS50bywgdGV4dCA9IGNoYW5nZS50ZXh0O1xyXG4gICAgdmFyIGZpcnN0TGluZSA9IGdldExpbmUoZG9jLCBmcm9tLmxpbmUpLCBsYXN0TGluZSA9IGdldExpbmUoZG9jLCB0by5saW5lKTtcclxuICAgIHZhciBsYXN0VGV4dCA9IGxzdCh0ZXh0KSwgbGFzdFNwYW5zID0gc3BhbnNGb3IodGV4dC5sZW5ndGggLSAxKSwgbmxpbmVzID0gdG8ubGluZSAtIGZyb20ubGluZTtcclxuXHJcbiAgICAvLyBBZGp1c3QgdGhlIGxpbmUgc3RydWN0dXJlXHJcbiAgICBpZiAoaXNXaG9sZUxpbmVVcGRhdGUoZG9jLCBjaGFuZ2UpKSB7XHJcbiAgICAgIC8vIFRoaXMgaXMgYSB3aG9sZS1saW5lIHJlcGxhY2UuIFRyZWF0ZWQgc3BlY2lhbGx5IHRvIG1ha2VcclxuICAgICAgLy8gc3VyZSBsaW5lIG9iamVjdHMgbW92ZSB0aGUgd2F5IHRoZXkgYXJlIHN1cHBvc2VkIHRvLlxyXG4gICAgICBmb3IgKHZhciBpID0gMCwgYWRkZWQgPSBbXTsgaSA8IHRleHQubGVuZ3RoIC0gMTsgKytpKVxyXG4gICAgICAgIGFkZGVkLnB1c2gobmV3IExpbmUodGV4dFtpXSwgc3BhbnNGb3IoaSksIGVzdGltYXRlSGVpZ2h0KSk7XHJcbiAgICAgIHVwZGF0ZShsYXN0TGluZSwgbGFzdExpbmUudGV4dCwgbGFzdFNwYW5zKTtcclxuICAgICAgaWYgKG5saW5lcykgZG9jLnJlbW92ZShmcm9tLmxpbmUsIG5saW5lcyk7XHJcbiAgICAgIGlmIChhZGRlZC5sZW5ndGgpIGRvYy5pbnNlcnQoZnJvbS5saW5lLCBhZGRlZCk7XHJcbiAgICB9IGVsc2UgaWYgKGZpcnN0TGluZSA9PSBsYXN0TGluZSkge1xyXG4gICAgICBpZiAodGV4dC5sZW5ndGggPT0gMSkge1xyXG4gICAgICAgIHVwZGF0ZShmaXJzdExpbmUsIGZpcnN0TGluZS50ZXh0LnNsaWNlKDAsIGZyb20uY2gpICsgbGFzdFRleHQgKyBmaXJzdExpbmUudGV4dC5zbGljZSh0by5jaCksIGxhc3RTcGFucyk7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgZm9yICh2YXIgYWRkZWQgPSBbXSwgaSA9IDE7IGkgPCB0ZXh0Lmxlbmd0aCAtIDE7ICsraSlcclxuICAgICAgICAgIGFkZGVkLnB1c2gobmV3IExpbmUodGV4dFtpXSwgc3BhbnNGb3IoaSksIGVzdGltYXRlSGVpZ2h0KSk7XHJcbiAgICAgICAgYWRkZWQucHVzaChuZXcgTGluZShsYXN0VGV4dCArIGZpcnN0TGluZS50ZXh0LnNsaWNlKHRvLmNoKSwgbGFzdFNwYW5zLCBlc3RpbWF0ZUhlaWdodCkpO1xyXG4gICAgICAgIHVwZGF0ZShmaXJzdExpbmUsIGZpcnN0TGluZS50ZXh0LnNsaWNlKDAsIGZyb20uY2gpICsgdGV4dFswXSwgc3BhbnNGb3IoMCkpO1xyXG4gICAgICAgIGRvYy5pbnNlcnQoZnJvbS5saW5lICsgMSwgYWRkZWQpO1xyXG4gICAgICB9XHJcbiAgICB9IGVsc2UgaWYgKHRleHQubGVuZ3RoID09IDEpIHtcclxuICAgICAgdXBkYXRlKGZpcnN0TGluZSwgZmlyc3RMaW5lLnRleHQuc2xpY2UoMCwgZnJvbS5jaCkgKyB0ZXh0WzBdICsgbGFzdExpbmUudGV4dC5zbGljZSh0by5jaCksIHNwYW5zRm9yKDApKTtcclxuICAgICAgZG9jLnJlbW92ZShmcm9tLmxpbmUgKyAxLCBubGluZXMpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdXBkYXRlKGZpcnN0TGluZSwgZmlyc3RMaW5lLnRleHQuc2xpY2UoMCwgZnJvbS5jaCkgKyB0ZXh0WzBdLCBzcGFuc0ZvcigwKSk7XHJcbiAgICAgIHVwZGF0ZShsYXN0TGluZSwgbGFzdFRleHQgKyBsYXN0TGluZS50ZXh0LnNsaWNlKHRvLmNoKSwgbGFzdFNwYW5zKTtcclxuICAgICAgZm9yICh2YXIgaSA9IDEsIGFkZGVkID0gW107IGkgPCB0ZXh0Lmxlbmd0aCAtIDE7ICsraSlcclxuICAgICAgICBhZGRlZC5wdXNoKG5ldyBMaW5lKHRleHRbaV0sIHNwYW5zRm9yKGkpLCBlc3RpbWF0ZUhlaWdodCkpO1xyXG4gICAgICBpZiAobmxpbmVzID4gMSkgZG9jLnJlbW92ZShmcm9tLmxpbmUgKyAxLCBubGluZXMgLSAxKTtcclxuICAgICAgZG9jLmluc2VydChmcm9tLmxpbmUgKyAxLCBhZGRlZCk7XHJcbiAgICB9XHJcblxyXG4gICAgc2lnbmFsTGF0ZXIoZG9jLCBcImNoYW5nZVwiLCBkb2MsIGNoYW5nZSk7XHJcbiAgfVxyXG5cclxuICAvLyBUaGUgZG9jdW1lbnQgaXMgcmVwcmVzZW50ZWQgYXMgYSBCVHJlZSBjb25zaXN0aW5nIG9mIGxlYXZlcywgd2l0aFxyXG4gIC8vIGNodW5rIG9mIGxpbmVzIGluIHRoZW0sIGFuZCBicmFuY2hlcywgd2l0aCB1cCB0byB0ZW4gbGVhdmVzIG9yXHJcbiAgLy8gb3RoZXIgYnJhbmNoIG5vZGVzIGJlbG93IHRoZW0uIFRoZSB0b3Agbm9kZSBpcyBhbHdheXMgYSBicmFuY2hcclxuICAvLyBub2RlLCBhbmQgaXMgdGhlIGRvY3VtZW50IG9iamVjdCBpdHNlbGYgKG1lYW5pbmcgaXQgaGFzXHJcbiAgLy8gYWRkaXRpb25hbCBtZXRob2RzIGFuZCBwcm9wZXJ0aWVzKS5cclxuICAvL1xyXG4gIC8vIEFsbCBub2RlcyBoYXZlIHBhcmVudCBsaW5rcy4gVGhlIHRyZWUgaXMgdXNlZCBib3RoIHRvIGdvIGZyb21cclxuICAvLyBsaW5lIG51bWJlcnMgdG8gbGluZSBvYmplY3RzLCBhbmQgdG8gZ28gZnJvbSBvYmplY3RzIHRvIG51bWJlcnMuXHJcbiAgLy8gSXQgYWxzbyBpbmRleGVzIGJ5IGhlaWdodCwgYW5kIGlzIHVzZWQgdG8gY29udmVydCBiZXR3ZWVuIGhlaWdodFxyXG4gIC8vIGFuZCBsaW5lIG9iamVjdCwgYW5kIHRvIGZpbmQgdGhlIHRvdGFsIGhlaWdodCBvZiB0aGUgZG9jdW1lbnQuXHJcbiAgLy9cclxuICAvLyBTZWUgYWxzbyBodHRwOi8vbWFyaWpuaGF2ZXJiZWtlLm5sL2Jsb2cvY29kZW1pcnJvci1saW5lLXRyZWUuaHRtbFxyXG5cclxuICBmdW5jdGlvbiBMZWFmQ2h1bmsobGluZXMpIHtcclxuICAgIHRoaXMubGluZXMgPSBsaW5lcztcclxuICAgIHRoaXMucGFyZW50ID0gbnVsbDtcclxuICAgIGZvciAodmFyIGkgPSAwLCBoZWlnaHQgPSAwOyBpIDwgbGluZXMubGVuZ3RoOyArK2kpIHtcclxuICAgICAgbGluZXNbaV0ucGFyZW50ID0gdGhpcztcclxuICAgICAgaGVpZ2h0ICs9IGxpbmVzW2ldLmhlaWdodDtcclxuICAgIH1cclxuICAgIHRoaXMuaGVpZ2h0ID0gaGVpZ2h0O1xyXG4gIH1cclxuXHJcbiAgTGVhZkNodW5rLnByb3RvdHlwZSA9IHtcclxuICAgIGNodW5rU2l6ZTogZnVuY3Rpb24oKSB7IHJldHVybiB0aGlzLmxpbmVzLmxlbmd0aDsgfSxcclxuICAgIC8vIFJlbW92ZSB0aGUgbiBsaW5lcyBhdCBvZmZzZXQgJ2F0Jy5cclxuICAgIHJlbW92ZUlubmVyOiBmdW5jdGlvbihhdCwgbikge1xyXG4gICAgICBmb3IgKHZhciBpID0gYXQsIGUgPSBhdCArIG47IGkgPCBlOyArK2kpIHtcclxuICAgICAgICB2YXIgbGluZSA9IHRoaXMubGluZXNbaV07XHJcbiAgICAgICAgdGhpcy5oZWlnaHQgLT0gbGluZS5oZWlnaHQ7XHJcbiAgICAgICAgY2xlYW5VcExpbmUobGluZSk7XHJcbiAgICAgICAgc2lnbmFsTGF0ZXIobGluZSwgXCJkZWxldGVcIik7XHJcbiAgICAgIH1cclxuICAgICAgdGhpcy5saW5lcy5zcGxpY2UoYXQsIG4pO1xyXG4gICAgfSxcclxuICAgIC8vIEhlbHBlciB1c2VkIHRvIGNvbGxhcHNlIGEgc21hbGwgYnJhbmNoIGludG8gYSBzaW5nbGUgbGVhZi5cclxuICAgIGNvbGxhcHNlOiBmdW5jdGlvbihsaW5lcykge1xyXG4gICAgICBsaW5lcy5wdXNoLmFwcGx5KGxpbmVzLCB0aGlzLmxpbmVzKTtcclxuICAgIH0sXHJcbiAgICAvLyBJbnNlcnQgdGhlIGdpdmVuIGFycmF5IG9mIGxpbmVzIGF0IG9mZnNldCAnYXQnLCBjb3VudCB0aGVtIGFzXHJcbiAgICAvLyBoYXZpbmcgdGhlIGdpdmVuIGhlaWdodC5cclxuICAgIGluc2VydElubmVyOiBmdW5jdGlvbihhdCwgbGluZXMsIGhlaWdodCkge1xyXG4gICAgICB0aGlzLmhlaWdodCArPSBoZWlnaHQ7XHJcbiAgICAgIHRoaXMubGluZXMgPSB0aGlzLmxpbmVzLnNsaWNlKDAsIGF0KS5jb25jYXQobGluZXMpLmNvbmNhdCh0aGlzLmxpbmVzLnNsaWNlKGF0KSk7XHJcbiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGluZXMubGVuZ3RoOyArK2kpIGxpbmVzW2ldLnBhcmVudCA9IHRoaXM7XHJcbiAgICB9LFxyXG4gICAgLy8gVXNlZCB0byBpdGVyYXRlIG92ZXIgYSBwYXJ0IG9mIHRoZSB0cmVlLlxyXG4gICAgaXRlck46IGZ1bmN0aW9uKGF0LCBuLCBvcCkge1xyXG4gICAgICBmb3IgKHZhciBlID0gYXQgKyBuOyBhdCA8IGU7ICsrYXQpXHJcbiAgICAgICAgaWYgKG9wKHRoaXMubGluZXNbYXRdKSkgcmV0dXJuIHRydWU7XHJcbiAgICB9XHJcbiAgfTtcclxuXHJcbiAgZnVuY3Rpb24gQnJhbmNoQ2h1bmsoY2hpbGRyZW4pIHtcclxuICAgIHRoaXMuY2hpbGRyZW4gPSBjaGlsZHJlbjtcclxuICAgIHZhciBzaXplID0gMCwgaGVpZ2h0ID0gMDtcclxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgY2hpbGRyZW4ubGVuZ3RoOyArK2kpIHtcclxuICAgICAgdmFyIGNoID0gY2hpbGRyZW5baV07XHJcbiAgICAgIHNpemUgKz0gY2guY2h1bmtTaXplKCk7IGhlaWdodCArPSBjaC5oZWlnaHQ7XHJcbiAgICAgIGNoLnBhcmVudCA9IHRoaXM7XHJcbiAgICB9XHJcbiAgICB0aGlzLnNpemUgPSBzaXplO1xyXG4gICAgdGhpcy5oZWlnaHQgPSBoZWlnaHQ7XHJcbiAgICB0aGlzLnBhcmVudCA9IG51bGw7XHJcbiAgfVxyXG5cclxuICBCcmFuY2hDaHVuay5wcm90b3R5cGUgPSB7XHJcbiAgICBjaHVua1NpemU6IGZ1bmN0aW9uKCkgeyByZXR1cm4gdGhpcy5zaXplOyB9LFxyXG4gICAgcmVtb3ZlSW5uZXI6IGZ1bmN0aW9uKGF0LCBuKSB7XHJcbiAgICAgIHRoaXMuc2l6ZSAtPSBuO1xyXG4gICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMuY2hpbGRyZW4ubGVuZ3RoOyArK2kpIHtcclxuICAgICAgICB2YXIgY2hpbGQgPSB0aGlzLmNoaWxkcmVuW2ldLCBzeiA9IGNoaWxkLmNodW5rU2l6ZSgpO1xyXG4gICAgICAgIGlmIChhdCA8IHN6KSB7XHJcbiAgICAgICAgICB2YXIgcm0gPSBNYXRoLm1pbihuLCBzeiAtIGF0KSwgb2xkSGVpZ2h0ID0gY2hpbGQuaGVpZ2h0O1xyXG4gICAgICAgICAgY2hpbGQucmVtb3ZlSW5uZXIoYXQsIHJtKTtcclxuICAgICAgICAgIHRoaXMuaGVpZ2h0IC09IG9sZEhlaWdodCAtIGNoaWxkLmhlaWdodDtcclxuICAgICAgICAgIGlmIChzeiA9PSBybSkgeyB0aGlzLmNoaWxkcmVuLnNwbGljZShpLS0sIDEpOyBjaGlsZC5wYXJlbnQgPSBudWxsOyB9XHJcbiAgICAgICAgICBpZiAoKG4gLT0gcm0pID09IDApIGJyZWFrO1xyXG4gICAgICAgICAgYXQgPSAwO1xyXG4gICAgICAgIH0gZWxzZSBhdCAtPSBzejtcclxuICAgICAgfVxyXG4gICAgICAvLyBJZiB0aGUgcmVzdWx0IGlzIHNtYWxsZXIgdGhhbiAyNSBsaW5lcywgZW5zdXJlIHRoYXQgaXQgaXMgYVxyXG4gICAgICAvLyBzaW5nbGUgbGVhZiBub2RlLlxyXG4gICAgICBpZiAodGhpcy5zaXplIC0gbiA8IDI1ICYmXHJcbiAgICAgICAgICAodGhpcy5jaGlsZHJlbi5sZW5ndGggPiAxIHx8ICEodGhpcy5jaGlsZHJlblswXSBpbnN0YW5jZW9mIExlYWZDaHVuaykpKSB7XHJcbiAgICAgICAgdmFyIGxpbmVzID0gW107XHJcbiAgICAgICAgdGhpcy5jb2xsYXBzZShsaW5lcyk7XHJcbiAgICAgICAgdGhpcy5jaGlsZHJlbiA9IFtuZXcgTGVhZkNodW5rKGxpbmVzKV07XHJcbiAgICAgICAgdGhpcy5jaGlsZHJlblswXS5wYXJlbnQgPSB0aGlzO1xyXG4gICAgICB9XHJcbiAgICB9LFxyXG4gICAgY29sbGFwc2U6IGZ1bmN0aW9uKGxpbmVzKSB7XHJcbiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5jaGlsZHJlbi5sZW5ndGg7ICsraSkgdGhpcy5jaGlsZHJlbltpXS5jb2xsYXBzZShsaW5lcyk7XHJcbiAgICB9LFxyXG4gICAgaW5zZXJ0SW5uZXI6IGZ1bmN0aW9uKGF0LCBsaW5lcywgaGVpZ2h0KSB7XHJcbiAgICAgIHRoaXMuc2l6ZSArPSBsaW5lcy5sZW5ndGg7XHJcbiAgICAgIHRoaXMuaGVpZ2h0ICs9IGhlaWdodDtcclxuICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLmNoaWxkcmVuLmxlbmd0aDsgKytpKSB7XHJcbiAgICAgICAgdmFyIGNoaWxkID0gdGhpcy5jaGlsZHJlbltpXSwgc3ogPSBjaGlsZC5jaHVua1NpemUoKTtcclxuICAgICAgICBpZiAoYXQgPD0gc3opIHtcclxuICAgICAgICAgIGNoaWxkLmluc2VydElubmVyKGF0LCBsaW5lcywgaGVpZ2h0KTtcclxuICAgICAgICAgIGlmIChjaGlsZC5saW5lcyAmJiBjaGlsZC5saW5lcy5sZW5ndGggPiA1MCkge1xyXG4gICAgICAgICAgICB3aGlsZSAoY2hpbGQubGluZXMubGVuZ3RoID4gNTApIHtcclxuICAgICAgICAgICAgICB2YXIgc3BpbGxlZCA9IGNoaWxkLmxpbmVzLnNwbGljZShjaGlsZC5saW5lcy5sZW5ndGggLSAyNSwgMjUpO1xyXG4gICAgICAgICAgICAgIHZhciBuZXdsZWFmID0gbmV3IExlYWZDaHVuayhzcGlsbGVkKTtcclxuICAgICAgICAgICAgICBjaGlsZC5oZWlnaHQgLT0gbmV3bGVhZi5oZWlnaHQ7XHJcbiAgICAgICAgICAgICAgdGhpcy5jaGlsZHJlbi5zcGxpY2UoaSArIDEsIDAsIG5ld2xlYWYpO1xyXG4gICAgICAgICAgICAgIG5ld2xlYWYucGFyZW50ID0gdGhpcztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB0aGlzLm1heWJlU3BpbGwoKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIH1cclxuICAgICAgICBhdCAtPSBzejtcclxuICAgICAgfVxyXG4gICAgfSxcclxuICAgIC8vIFdoZW4gYSBub2RlIGhhcyBncm93biwgY2hlY2sgd2hldGhlciBpdCBzaG91bGQgYmUgc3BsaXQuXHJcbiAgICBtYXliZVNwaWxsOiBmdW5jdGlvbigpIHtcclxuICAgICAgaWYgKHRoaXMuY2hpbGRyZW4ubGVuZ3RoIDw9IDEwKSByZXR1cm47XHJcbiAgICAgIHZhciBtZSA9IHRoaXM7XHJcbiAgICAgIGRvIHtcclxuICAgICAgICB2YXIgc3BpbGxlZCA9IG1lLmNoaWxkcmVuLnNwbGljZShtZS5jaGlsZHJlbi5sZW5ndGggLSA1LCA1KTtcclxuICAgICAgICB2YXIgc2libGluZyA9IG5ldyBCcmFuY2hDaHVuayhzcGlsbGVkKTtcclxuICAgICAgICBpZiAoIW1lLnBhcmVudCkgeyAvLyBCZWNvbWUgdGhlIHBhcmVudCBub2RlXHJcbiAgICAgICAgICB2YXIgY29weSA9IG5ldyBCcmFuY2hDaHVuayhtZS5jaGlsZHJlbik7XHJcbiAgICAgICAgICBjb3B5LnBhcmVudCA9IG1lO1xyXG4gICAgICAgICAgbWUuY2hpbGRyZW4gPSBbY29weSwgc2libGluZ107XHJcbiAgICAgICAgICBtZSA9IGNvcHk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIG1lLnNpemUgLT0gc2libGluZy5zaXplO1xyXG4gICAgICAgICAgbWUuaGVpZ2h0IC09IHNpYmxpbmcuaGVpZ2h0O1xyXG4gICAgICAgICAgdmFyIG15SW5kZXggPSBpbmRleE9mKG1lLnBhcmVudC5jaGlsZHJlbiwgbWUpO1xyXG4gICAgICAgICAgbWUucGFyZW50LmNoaWxkcmVuLnNwbGljZShteUluZGV4ICsgMSwgMCwgc2libGluZyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHNpYmxpbmcucGFyZW50ID0gbWUucGFyZW50O1xyXG4gICAgICB9IHdoaWxlIChtZS5jaGlsZHJlbi5sZW5ndGggPiAxMCk7XHJcbiAgICAgIG1lLnBhcmVudC5tYXliZVNwaWxsKCk7XHJcbiAgICB9LFxyXG4gICAgaXRlck46IGZ1bmN0aW9uKGF0LCBuLCBvcCkge1xyXG4gICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMuY2hpbGRyZW4ubGVuZ3RoOyArK2kpIHtcclxuICAgICAgICB2YXIgY2hpbGQgPSB0aGlzLmNoaWxkcmVuW2ldLCBzeiA9IGNoaWxkLmNodW5rU2l6ZSgpO1xyXG4gICAgICAgIGlmIChhdCA8IHN6KSB7XHJcbiAgICAgICAgICB2YXIgdXNlZCA9IE1hdGgubWluKG4sIHN6IC0gYXQpO1xyXG4gICAgICAgICAgaWYgKGNoaWxkLml0ZXJOKGF0LCB1c2VkLCBvcCkpIHJldHVybiB0cnVlO1xyXG4gICAgICAgICAgaWYgKChuIC09IHVzZWQpID09IDApIGJyZWFrO1xyXG4gICAgICAgICAgYXQgPSAwO1xyXG4gICAgICAgIH0gZWxzZSBhdCAtPSBzejtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH07XHJcblxyXG4gIHZhciBuZXh0RG9jSWQgPSAwO1xyXG4gIHZhciBEb2MgPSBDb2RlTWlycm9yLkRvYyA9IGZ1bmN0aW9uKHRleHQsIG1vZGUsIGZpcnN0TGluZSkge1xyXG4gICAgaWYgKCEodGhpcyBpbnN0YW5jZW9mIERvYykpIHJldHVybiBuZXcgRG9jKHRleHQsIG1vZGUsIGZpcnN0TGluZSk7XHJcbiAgICBpZiAoZmlyc3RMaW5lID09IG51bGwpIGZpcnN0TGluZSA9IDA7XHJcblxyXG4gICAgQnJhbmNoQ2h1bmsuY2FsbCh0aGlzLCBbbmV3IExlYWZDaHVuayhbbmV3IExpbmUoXCJcIiwgbnVsbCldKV0pO1xyXG4gICAgdGhpcy5maXJzdCA9IGZpcnN0TGluZTtcclxuICAgIHRoaXMuc2Nyb2xsVG9wID0gdGhpcy5zY3JvbGxMZWZ0ID0gMDtcclxuICAgIHRoaXMuY2FudEVkaXQgPSBmYWxzZTtcclxuICAgIHRoaXMuY2xlYW5HZW5lcmF0aW9uID0gMTtcclxuICAgIHRoaXMuZnJvbnRpZXIgPSBmaXJzdExpbmU7XHJcbiAgICB2YXIgc3RhcnQgPSBQb3MoZmlyc3RMaW5lLCAwKTtcclxuICAgIHRoaXMuc2VsID0gc2ltcGxlU2VsZWN0aW9uKHN0YXJ0KTtcclxuICAgIHRoaXMuaGlzdG9yeSA9IG5ldyBIaXN0b3J5KG51bGwpO1xyXG4gICAgdGhpcy5pZCA9ICsrbmV4dERvY0lkO1xyXG4gICAgdGhpcy5tb2RlT3B0aW9uID0gbW9kZTtcclxuXHJcbiAgICBpZiAodHlwZW9mIHRleHQgPT0gXCJzdHJpbmdcIikgdGV4dCA9IHNwbGl0TGluZXModGV4dCk7XHJcbiAgICB1cGRhdGVEb2ModGhpcywge2Zyb206IHN0YXJ0LCB0bzogc3RhcnQsIHRleHQ6IHRleHR9KTtcclxuICAgIHNldFNlbGVjdGlvbih0aGlzLCBzaW1wbGVTZWxlY3Rpb24oc3RhcnQpLCBzZWxfZG9udFNjcm9sbCk7XHJcbiAgfTtcclxuXHJcbiAgRG9jLnByb3RvdHlwZSA9IGNyZWF0ZU9iaihCcmFuY2hDaHVuay5wcm90b3R5cGUsIHtcclxuICAgIGNvbnN0cnVjdG9yOiBEb2MsXHJcbiAgICAvLyBJdGVyYXRlIG92ZXIgdGhlIGRvY3VtZW50LiBTdXBwb3J0cyB0d28gZm9ybXMgLS0gd2l0aCBvbmx5IG9uZVxyXG4gICAgLy8gYXJndW1lbnQsIGl0IGNhbGxzIHRoYXQgZm9yIGVhY2ggbGluZSBpbiB0aGUgZG9jdW1lbnQuIFdpdGhcclxuICAgIC8vIHRocmVlLCBpdCBpdGVyYXRlcyBvdmVyIHRoZSByYW5nZSBnaXZlbiBieSB0aGUgZmlyc3QgdHdvICh3aXRoXHJcbiAgICAvLyB0aGUgc2Vjb25kIGJlaW5nIG5vbi1pbmNsdXNpdmUpLlxyXG4gICAgaXRlcjogZnVuY3Rpb24oZnJvbSwgdG8sIG9wKSB7XHJcbiAgICAgIGlmIChvcCkgdGhpcy5pdGVyTihmcm9tIC0gdGhpcy5maXJzdCwgdG8gLSBmcm9tLCBvcCk7XHJcbiAgICAgIGVsc2UgdGhpcy5pdGVyTih0aGlzLmZpcnN0LCB0aGlzLmZpcnN0ICsgdGhpcy5zaXplLCBmcm9tKTtcclxuICAgIH0sXHJcblxyXG4gICAgLy8gTm9uLXB1YmxpYyBpbnRlcmZhY2UgZm9yIGFkZGluZyBhbmQgcmVtb3ZpbmcgbGluZXMuXHJcbiAgICBpbnNlcnQ6IGZ1bmN0aW9uKGF0LCBsaW5lcykge1xyXG4gICAgICB2YXIgaGVpZ2h0ID0gMDtcclxuICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsaW5lcy5sZW5ndGg7ICsraSkgaGVpZ2h0ICs9IGxpbmVzW2ldLmhlaWdodDtcclxuICAgICAgdGhpcy5pbnNlcnRJbm5lcihhdCAtIHRoaXMuZmlyc3QsIGxpbmVzLCBoZWlnaHQpO1xyXG4gICAgfSxcclxuICAgIHJlbW92ZTogZnVuY3Rpb24oYXQsIG4pIHsgdGhpcy5yZW1vdmVJbm5lcihhdCAtIHRoaXMuZmlyc3QsIG4pOyB9LFxyXG5cclxuICAgIC8vIEZyb20gaGVyZSwgdGhlIG1ldGhvZHMgYXJlIHBhcnQgb2YgdGhlIHB1YmxpYyBpbnRlcmZhY2UuIE1vc3RcclxuICAgIC8vIGFyZSBhbHNvIGF2YWlsYWJsZSBmcm9tIENvZGVNaXJyb3IgKGVkaXRvcikgaW5zdGFuY2VzLlxyXG5cclxuICAgIGdldFZhbHVlOiBmdW5jdGlvbihsaW5lU2VwKSB7XHJcbiAgICAgIHZhciBsaW5lcyA9IGdldExpbmVzKHRoaXMsIHRoaXMuZmlyc3QsIHRoaXMuZmlyc3QgKyB0aGlzLnNpemUpO1xyXG4gICAgICBpZiAobGluZVNlcCA9PT0gZmFsc2UpIHJldHVybiBsaW5lcztcclxuICAgICAgcmV0dXJuIGxpbmVzLmpvaW4obGluZVNlcCB8fCBcIlxcblwiKTtcclxuICAgIH0sXHJcbiAgICBzZXRWYWx1ZTogZG9jTWV0aG9kT3AoZnVuY3Rpb24oY29kZSkge1xyXG4gICAgICB2YXIgdG9wID0gUG9zKHRoaXMuZmlyc3QsIDApLCBsYXN0ID0gdGhpcy5maXJzdCArIHRoaXMuc2l6ZSAtIDE7XHJcbiAgICAgIG1ha2VDaGFuZ2UodGhpcywge2Zyb206IHRvcCwgdG86IFBvcyhsYXN0LCBnZXRMaW5lKHRoaXMsIGxhc3QpLnRleHQubGVuZ3RoKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGV4dDogc3BsaXRMaW5lcyhjb2RlKSwgb3JpZ2luOiBcInNldFZhbHVlXCJ9LCB0cnVlKTtcclxuICAgICAgc2V0U2VsZWN0aW9uKHRoaXMsIHNpbXBsZVNlbGVjdGlvbih0b3ApKTtcclxuICAgIH0pLFxyXG4gICAgcmVwbGFjZVJhbmdlOiBmdW5jdGlvbihjb2RlLCBmcm9tLCB0bywgb3JpZ2luKSB7XHJcbiAgICAgIGZyb20gPSBjbGlwUG9zKHRoaXMsIGZyb20pO1xyXG4gICAgICB0byA9IHRvID8gY2xpcFBvcyh0aGlzLCB0bykgOiBmcm9tO1xyXG4gICAgICByZXBsYWNlUmFuZ2UodGhpcywgY29kZSwgZnJvbSwgdG8sIG9yaWdpbik7XHJcbiAgICB9LFxyXG4gICAgZ2V0UmFuZ2U6IGZ1bmN0aW9uKGZyb20sIHRvLCBsaW5lU2VwKSB7XHJcbiAgICAgIHZhciBsaW5lcyA9IGdldEJldHdlZW4odGhpcywgY2xpcFBvcyh0aGlzLCBmcm9tKSwgY2xpcFBvcyh0aGlzLCB0bykpO1xyXG4gICAgICBpZiAobGluZVNlcCA9PT0gZmFsc2UpIHJldHVybiBsaW5lcztcclxuICAgICAgcmV0dXJuIGxpbmVzLmpvaW4obGluZVNlcCB8fCBcIlxcblwiKTtcclxuICAgIH0sXHJcblxyXG4gICAgZ2V0TGluZTogZnVuY3Rpb24obGluZSkge3ZhciBsID0gdGhpcy5nZXRMaW5lSGFuZGxlKGxpbmUpOyByZXR1cm4gbCAmJiBsLnRleHQ7fSxcclxuXHJcbiAgICBnZXRMaW5lSGFuZGxlOiBmdW5jdGlvbihsaW5lKSB7aWYgKGlzTGluZSh0aGlzLCBsaW5lKSkgcmV0dXJuIGdldExpbmUodGhpcywgbGluZSk7fSxcclxuICAgIGdldExpbmVOdW1iZXI6IGZ1bmN0aW9uKGxpbmUpIHtyZXR1cm4gbGluZU5vKGxpbmUpO30sXHJcblxyXG4gICAgZ2V0TGluZUhhbmRsZVZpc3VhbFN0YXJ0OiBmdW5jdGlvbihsaW5lKSB7XHJcbiAgICAgIGlmICh0eXBlb2YgbGluZSA9PSBcIm51bWJlclwiKSBsaW5lID0gZ2V0TGluZSh0aGlzLCBsaW5lKTtcclxuICAgICAgcmV0dXJuIHZpc3VhbExpbmUobGluZSk7XHJcbiAgICB9LFxyXG5cclxuICAgIGxpbmVDb3VudDogZnVuY3Rpb24oKSB7cmV0dXJuIHRoaXMuc2l6ZTt9LFxyXG4gICAgZmlyc3RMaW5lOiBmdW5jdGlvbigpIHtyZXR1cm4gdGhpcy5maXJzdDt9LFxyXG4gICAgbGFzdExpbmU6IGZ1bmN0aW9uKCkge3JldHVybiB0aGlzLmZpcnN0ICsgdGhpcy5zaXplIC0gMTt9LFxyXG5cclxuICAgIGNsaXBQb3M6IGZ1bmN0aW9uKHBvcykge3JldHVybiBjbGlwUG9zKHRoaXMsIHBvcyk7fSxcclxuXHJcbiAgICBnZXRDdXJzb3I6IGZ1bmN0aW9uKHN0YXJ0KSB7XHJcbiAgICAgIHZhciByYW5nZSA9IHRoaXMuc2VsLnByaW1hcnkoKSwgcG9zO1xyXG4gICAgICBpZiAoc3RhcnQgPT0gbnVsbCB8fCBzdGFydCA9PSBcImhlYWRcIikgcG9zID0gcmFuZ2UuaGVhZDtcclxuICAgICAgZWxzZSBpZiAoc3RhcnQgPT0gXCJhbmNob3JcIikgcG9zID0gcmFuZ2UuYW5jaG9yO1xyXG4gICAgICBlbHNlIGlmIChzdGFydCA9PSBcImVuZFwiIHx8IHN0YXJ0ID09IFwidG9cIiB8fCBzdGFydCA9PT0gZmFsc2UpIHBvcyA9IHJhbmdlLnRvKCk7XHJcbiAgICAgIGVsc2UgcG9zID0gcmFuZ2UuZnJvbSgpO1xyXG4gICAgICByZXR1cm4gcG9zO1xyXG4gICAgfSxcclxuICAgIGxpc3RTZWxlY3Rpb25zOiBmdW5jdGlvbigpIHsgcmV0dXJuIHRoaXMuc2VsLnJhbmdlczsgfSxcclxuICAgIHNvbWV0aGluZ1NlbGVjdGVkOiBmdW5jdGlvbigpIHtyZXR1cm4gdGhpcy5zZWwuc29tZXRoaW5nU2VsZWN0ZWQoKTt9LFxyXG5cclxuICAgIHNldEN1cnNvcjogZG9jTWV0aG9kT3AoZnVuY3Rpb24obGluZSwgY2gsIG9wdGlvbnMpIHtcclxuICAgICAgc2V0U2ltcGxlU2VsZWN0aW9uKHRoaXMsIGNsaXBQb3ModGhpcywgdHlwZW9mIGxpbmUgPT0gXCJudW1iZXJcIiA/IFBvcyhsaW5lLCBjaCB8fCAwKSA6IGxpbmUpLCBudWxsLCBvcHRpb25zKTtcclxuICAgIH0pLFxyXG4gICAgc2V0U2VsZWN0aW9uOiBkb2NNZXRob2RPcChmdW5jdGlvbihhbmNob3IsIGhlYWQsIG9wdGlvbnMpIHtcclxuICAgICAgc2V0U2ltcGxlU2VsZWN0aW9uKHRoaXMsIGNsaXBQb3ModGhpcywgYW5jaG9yKSwgY2xpcFBvcyh0aGlzLCBoZWFkIHx8IGFuY2hvciksIG9wdGlvbnMpO1xyXG4gICAgfSksXHJcbiAgICBleHRlbmRTZWxlY3Rpb246IGRvY01ldGhvZE9wKGZ1bmN0aW9uKGhlYWQsIG90aGVyLCBvcHRpb25zKSB7XHJcbiAgICAgIGV4dGVuZFNlbGVjdGlvbih0aGlzLCBjbGlwUG9zKHRoaXMsIGhlYWQpLCBvdGhlciAmJiBjbGlwUG9zKHRoaXMsIG90aGVyKSwgb3B0aW9ucyk7XHJcbiAgICB9KSxcclxuICAgIGV4dGVuZFNlbGVjdGlvbnM6IGRvY01ldGhvZE9wKGZ1bmN0aW9uKGhlYWRzLCBvcHRpb25zKSB7XHJcbiAgICAgIGV4dGVuZFNlbGVjdGlvbnModGhpcywgY2xpcFBvc0FycmF5KHRoaXMsIGhlYWRzLCBvcHRpb25zKSk7XHJcbiAgICB9KSxcclxuICAgIGV4dGVuZFNlbGVjdGlvbnNCeTogZG9jTWV0aG9kT3AoZnVuY3Rpb24oZiwgb3B0aW9ucykge1xyXG4gICAgICBleHRlbmRTZWxlY3Rpb25zKHRoaXMsIG1hcCh0aGlzLnNlbC5yYW5nZXMsIGYpLCBvcHRpb25zKTtcclxuICAgIH0pLFxyXG4gICAgc2V0U2VsZWN0aW9uczogZG9jTWV0aG9kT3AoZnVuY3Rpb24ocmFuZ2VzLCBwcmltYXJ5LCBvcHRpb25zKSB7XHJcbiAgICAgIGlmICghcmFuZ2VzLmxlbmd0aCkgcmV0dXJuO1xyXG4gICAgICBmb3IgKHZhciBpID0gMCwgb3V0ID0gW107IGkgPCByYW5nZXMubGVuZ3RoOyBpKyspXHJcbiAgICAgICAgb3V0W2ldID0gbmV3IFJhbmdlKGNsaXBQb3ModGhpcywgcmFuZ2VzW2ldLmFuY2hvciksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsaXBQb3ModGhpcywgcmFuZ2VzW2ldLmhlYWQpKTtcclxuICAgICAgaWYgKHByaW1hcnkgPT0gbnVsbCkgcHJpbWFyeSA9IE1hdGgubWluKHJhbmdlcy5sZW5ndGggLSAxLCB0aGlzLnNlbC5wcmltSW5kZXgpO1xyXG4gICAgICBzZXRTZWxlY3Rpb24odGhpcywgbm9ybWFsaXplU2VsZWN0aW9uKG91dCwgcHJpbWFyeSksIG9wdGlvbnMpO1xyXG4gICAgfSksXHJcbiAgICBhZGRTZWxlY3Rpb246IGRvY01ldGhvZE9wKGZ1bmN0aW9uKGFuY2hvciwgaGVhZCwgb3B0aW9ucykge1xyXG4gICAgICB2YXIgcmFuZ2VzID0gdGhpcy5zZWwucmFuZ2VzLnNsaWNlKDApO1xyXG4gICAgICByYW5nZXMucHVzaChuZXcgUmFuZ2UoY2xpcFBvcyh0aGlzLCBhbmNob3IpLCBjbGlwUG9zKHRoaXMsIGhlYWQgfHwgYW5jaG9yKSkpO1xyXG4gICAgICBzZXRTZWxlY3Rpb24odGhpcywgbm9ybWFsaXplU2VsZWN0aW9uKHJhbmdlcywgcmFuZ2VzLmxlbmd0aCAtIDEpLCBvcHRpb25zKTtcclxuICAgIH0pLFxyXG5cclxuICAgIGdldFNlbGVjdGlvbjogZnVuY3Rpb24obGluZVNlcCkge1xyXG4gICAgICB2YXIgcmFuZ2VzID0gdGhpcy5zZWwucmFuZ2VzLCBsaW5lcztcclxuICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCByYW5nZXMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICB2YXIgc2VsID0gZ2V0QmV0d2Vlbih0aGlzLCByYW5nZXNbaV0uZnJvbSgpLCByYW5nZXNbaV0udG8oKSk7XHJcbiAgICAgICAgbGluZXMgPSBsaW5lcyA/IGxpbmVzLmNvbmNhdChzZWwpIDogc2VsO1xyXG4gICAgICB9XHJcbiAgICAgIGlmIChsaW5lU2VwID09PSBmYWxzZSkgcmV0dXJuIGxpbmVzO1xyXG4gICAgICBlbHNlIHJldHVybiBsaW5lcy5qb2luKGxpbmVTZXAgfHwgXCJcXG5cIik7XHJcbiAgICB9LFxyXG4gICAgZ2V0U2VsZWN0aW9uczogZnVuY3Rpb24obGluZVNlcCkge1xyXG4gICAgICB2YXIgcGFydHMgPSBbXSwgcmFuZ2VzID0gdGhpcy5zZWwucmFuZ2VzO1xyXG4gICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHJhbmdlcy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgIHZhciBzZWwgPSBnZXRCZXR3ZWVuKHRoaXMsIHJhbmdlc1tpXS5mcm9tKCksIHJhbmdlc1tpXS50bygpKTtcclxuICAgICAgICBpZiAobGluZVNlcCAhPT0gZmFsc2UpIHNlbCA9IHNlbC5qb2luKGxpbmVTZXAgfHwgXCJcXG5cIik7XHJcbiAgICAgICAgcGFydHNbaV0gPSBzZWw7XHJcbiAgICAgIH1cclxuICAgICAgcmV0dXJuIHBhcnRzO1xyXG4gICAgfSxcclxuICAgIHJlcGxhY2VTZWxlY3Rpb246IGZ1bmN0aW9uKGNvZGUsIGNvbGxhcHNlLCBvcmlnaW4pIHtcclxuICAgICAgdmFyIGR1cCA9IFtdO1xyXG4gICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMuc2VsLnJhbmdlcy5sZW5ndGg7IGkrKylcclxuICAgICAgICBkdXBbaV0gPSBjb2RlO1xyXG4gICAgICB0aGlzLnJlcGxhY2VTZWxlY3Rpb25zKGR1cCwgY29sbGFwc2UsIG9yaWdpbiB8fCBcIitpbnB1dFwiKTtcclxuICAgIH0sXHJcbiAgICByZXBsYWNlU2VsZWN0aW9uczogZG9jTWV0aG9kT3AoZnVuY3Rpb24oY29kZSwgY29sbGFwc2UsIG9yaWdpbikge1xyXG4gICAgICB2YXIgY2hhbmdlcyA9IFtdLCBzZWwgPSB0aGlzLnNlbDtcclxuICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzZWwucmFuZ2VzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgdmFyIHJhbmdlID0gc2VsLnJhbmdlc1tpXTtcclxuICAgICAgICBjaGFuZ2VzW2ldID0ge2Zyb206IHJhbmdlLmZyb20oKSwgdG86IHJhbmdlLnRvKCksIHRleHQ6IHNwbGl0TGluZXMoY29kZVtpXSksIG9yaWdpbjogb3JpZ2lufTtcclxuICAgICAgfVxyXG4gICAgICB2YXIgbmV3U2VsID0gY29sbGFwc2UgJiYgY29sbGFwc2UgIT0gXCJlbmRcIiAmJiBjb21wdXRlUmVwbGFjZWRTZWwodGhpcywgY2hhbmdlcywgY29sbGFwc2UpO1xyXG4gICAgICBmb3IgKHZhciBpID0gY2hhbmdlcy5sZW5ndGggLSAxOyBpID49IDA7IGktLSlcclxuICAgICAgICBtYWtlQ2hhbmdlKHRoaXMsIGNoYW5nZXNbaV0pO1xyXG4gICAgICBpZiAobmV3U2VsKSBzZXRTZWxlY3Rpb25SZXBsYWNlSGlzdG9yeSh0aGlzLCBuZXdTZWwpO1xyXG4gICAgICBlbHNlIGlmICh0aGlzLmNtKSBlbnN1cmVDdXJzb3JWaXNpYmxlKHRoaXMuY20pO1xyXG4gICAgfSksXHJcbiAgICB1bmRvOiBkb2NNZXRob2RPcChmdW5jdGlvbigpIHttYWtlQ2hhbmdlRnJvbUhpc3RvcnkodGhpcywgXCJ1bmRvXCIpO30pLFxyXG4gICAgcmVkbzogZG9jTWV0aG9kT3AoZnVuY3Rpb24oKSB7bWFrZUNoYW5nZUZyb21IaXN0b3J5KHRoaXMsIFwicmVkb1wiKTt9KSxcclxuICAgIHVuZG9TZWxlY3Rpb246IGRvY01ldGhvZE9wKGZ1bmN0aW9uKCkge21ha2VDaGFuZ2VGcm9tSGlzdG9yeSh0aGlzLCBcInVuZG9cIiwgdHJ1ZSk7fSksXHJcbiAgICByZWRvU2VsZWN0aW9uOiBkb2NNZXRob2RPcChmdW5jdGlvbigpIHttYWtlQ2hhbmdlRnJvbUhpc3RvcnkodGhpcywgXCJyZWRvXCIsIHRydWUpO30pLFxyXG5cclxuICAgIHNldEV4dGVuZGluZzogZnVuY3Rpb24odmFsKSB7dGhpcy5leHRlbmQgPSB2YWw7fSxcclxuICAgIGdldEV4dGVuZGluZzogZnVuY3Rpb24oKSB7cmV0dXJuIHRoaXMuZXh0ZW5kO30sXHJcblxyXG4gICAgaGlzdG9yeVNpemU6IGZ1bmN0aW9uKCkge1xyXG4gICAgICB2YXIgaGlzdCA9IHRoaXMuaGlzdG9yeSwgZG9uZSA9IDAsIHVuZG9uZSA9IDA7XHJcbiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgaGlzdC5kb25lLmxlbmd0aDsgaSsrKSBpZiAoIWhpc3QuZG9uZVtpXS5yYW5nZXMpICsrZG9uZTtcclxuICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBoaXN0LnVuZG9uZS5sZW5ndGg7IGkrKykgaWYgKCFoaXN0LnVuZG9uZVtpXS5yYW5nZXMpICsrdW5kb25lO1xyXG4gICAgICByZXR1cm4ge3VuZG86IGRvbmUsIHJlZG86IHVuZG9uZX07XHJcbiAgICB9LFxyXG4gICAgY2xlYXJIaXN0b3J5OiBmdW5jdGlvbigpIHt0aGlzLmhpc3RvcnkgPSBuZXcgSGlzdG9yeSh0aGlzLmhpc3RvcnkubWF4R2VuZXJhdGlvbik7fSxcclxuXHJcbiAgICBtYXJrQ2xlYW46IGZ1bmN0aW9uKCkge1xyXG4gICAgICB0aGlzLmNsZWFuR2VuZXJhdGlvbiA9IHRoaXMuY2hhbmdlR2VuZXJhdGlvbih0cnVlKTtcclxuICAgIH0sXHJcbiAgICBjaGFuZ2VHZW5lcmF0aW9uOiBmdW5jdGlvbihmb3JjZVNwbGl0KSB7XHJcbiAgICAgIGlmIChmb3JjZVNwbGl0KVxyXG4gICAgICAgIHRoaXMuaGlzdG9yeS5sYXN0T3AgPSB0aGlzLmhpc3RvcnkubGFzdFNlbE9wID0gdGhpcy5oaXN0b3J5Lmxhc3RPcmlnaW4gPSBudWxsO1xyXG4gICAgICByZXR1cm4gdGhpcy5oaXN0b3J5LmdlbmVyYXRpb247XHJcbiAgICB9LFxyXG4gICAgaXNDbGVhbjogZnVuY3Rpb24gKGdlbikge1xyXG4gICAgICByZXR1cm4gdGhpcy5oaXN0b3J5LmdlbmVyYXRpb24gPT0gKGdlbiB8fCB0aGlzLmNsZWFuR2VuZXJhdGlvbik7XHJcbiAgICB9LFxyXG5cclxuICAgIGdldEhpc3Rvcnk6IGZ1bmN0aW9uKCkge1xyXG4gICAgICByZXR1cm4ge2RvbmU6IGNvcHlIaXN0b3J5QXJyYXkodGhpcy5oaXN0b3J5LmRvbmUpLFxyXG4gICAgICAgICAgICAgIHVuZG9uZTogY29weUhpc3RvcnlBcnJheSh0aGlzLmhpc3RvcnkudW5kb25lKX07XHJcbiAgICB9LFxyXG4gICAgc2V0SGlzdG9yeTogZnVuY3Rpb24oaGlzdERhdGEpIHtcclxuICAgICAgdmFyIGhpc3QgPSB0aGlzLmhpc3RvcnkgPSBuZXcgSGlzdG9yeSh0aGlzLmhpc3RvcnkubWF4R2VuZXJhdGlvbik7XHJcbiAgICAgIGhpc3QuZG9uZSA9IGNvcHlIaXN0b3J5QXJyYXkoaGlzdERhdGEuZG9uZS5zbGljZSgwKSwgbnVsbCwgdHJ1ZSk7XHJcbiAgICAgIGhpc3QudW5kb25lID0gY29weUhpc3RvcnlBcnJheShoaXN0RGF0YS51bmRvbmUuc2xpY2UoMCksIG51bGwsIHRydWUpO1xyXG4gICAgfSxcclxuXHJcbiAgICBhZGRMaW5lQ2xhc3M6IGRvY01ldGhvZE9wKGZ1bmN0aW9uKGhhbmRsZSwgd2hlcmUsIGNscykge1xyXG4gICAgICByZXR1cm4gY2hhbmdlTGluZSh0aGlzLCBoYW5kbGUsIFwiY2xhc3NcIiwgZnVuY3Rpb24obGluZSkge1xyXG4gICAgICAgIHZhciBwcm9wID0gd2hlcmUgPT0gXCJ0ZXh0XCIgPyBcInRleHRDbGFzc1wiIDogd2hlcmUgPT0gXCJiYWNrZ3JvdW5kXCIgPyBcImJnQ2xhc3NcIiA6IFwid3JhcENsYXNzXCI7XHJcbiAgICAgICAgaWYgKCFsaW5lW3Byb3BdKSBsaW5lW3Byb3BdID0gY2xzO1xyXG4gICAgICAgIGVsc2UgaWYgKG5ldyBSZWdFeHAoXCIoPzpefFxcXFxzKVwiICsgY2xzICsgXCIoPzokfFxcXFxzKVwiKS50ZXN0KGxpbmVbcHJvcF0pKSByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgZWxzZSBsaW5lW3Byb3BdICs9IFwiIFwiICsgY2xzO1xyXG4gICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICB9KTtcclxuICAgIH0pLFxyXG4gICAgcmVtb3ZlTGluZUNsYXNzOiBkb2NNZXRob2RPcChmdW5jdGlvbihoYW5kbGUsIHdoZXJlLCBjbHMpIHtcclxuICAgICAgcmV0dXJuIGNoYW5nZUxpbmUodGhpcywgaGFuZGxlLCBcImNsYXNzXCIsIGZ1bmN0aW9uKGxpbmUpIHtcclxuICAgICAgICB2YXIgcHJvcCA9IHdoZXJlID09IFwidGV4dFwiID8gXCJ0ZXh0Q2xhc3NcIiA6IHdoZXJlID09IFwiYmFja2dyb3VuZFwiID8gXCJiZ0NsYXNzXCIgOiBcIndyYXBDbGFzc1wiO1xyXG4gICAgICAgIHZhciBjdXIgPSBsaW5lW3Byb3BdO1xyXG4gICAgICAgIGlmICghY3VyKSByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgZWxzZSBpZiAoY2xzID09IG51bGwpIGxpbmVbcHJvcF0gPSBudWxsO1xyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgdmFyIGZvdW5kID0gY3VyLm1hdGNoKG5ldyBSZWdFeHAoXCIoPzpefFxcXFxzKylcIiArIGNscyArIFwiKD86JHxcXFxccyspXCIpKTtcclxuICAgICAgICAgIGlmICghZm91bmQpIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgIHZhciBlbmQgPSBmb3VuZC5pbmRleCArIGZvdW5kWzBdLmxlbmd0aDtcclxuICAgICAgICAgIGxpbmVbcHJvcF0gPSBjdXIuc2xpY2UoMCwgZm91bmQuaW5kZXgpICsgKCFmb3VuZC5pbmRleCB8fCBlbmQgPT0gY3VyLmxlbmd0aCA/IFwiXCIgOiBcIiBcIikgKyBjdXIuc2xpY2UoZW5kKSB8fCBudWxsO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgfSk7XHJcbiAgICB9KSxcclxuXHJcbiAgICBtYXJrVGV4dDogZnVuY3Rpb24oZnJvbSwgdG8sIG9wdGlvbnMpIHtcclxuICAgICAgcmV0dXJuIG1hcmtUZXh0KHRoaXMsIGNsaXBQb3ModGhpcywgZnJvbSksIGNsaXBQb3ModGhpcywgdG8pLCBvcHRpb25zLCBcInJhbmdlXCIpO1xyXG4gICAgfSxcclxuICAgIHNldEJvb2ttYXJrOiBmdW5jdGlvbihwb3MsIG9wdGlvbnMpIHtcclxuICAgICAgdmFyIHJlYWxPcHRzID0ge3JlcGxhY2VkV2l0aDogb3B0aW9ucyAmJiAob3B0aW9ucy5ub2RlVHlwZSA9PSBudWxsID8gb3B0aW9ucy53aWRnZXQgOiBvcHRpb25zKSxcclxuICAgICAgICAgICAgICAgICAgICAgIGluc2VydExlZnQ6IG9wdGlvbnMgJiYgb3B0aW9ucy5pbnNlcnRMZWZ0LFxyXG4gICAgICAgICAgICAgICAgICAgICAgY2xlYXJXaGVuRW1wdHk6IGZhbHNlLCBzaGFyZWQ6IG9wdGlvbnMgJiYgb3B0aW9ucy5zaGFyZWR9O1xyXG4gICAgICBwb3MgPSBjbGlwUG9zKHRoaXMsIHBvcyk7XHJcbiAgICAgIHJldHVybiBtYXJrVGV4dCh0aGlzLCBwb3MsIHBvcywgcmVhbE9wdHMsIFwiYm9va21hcmtcIik7XHJcbiAgICB9LFxyXG4gICAgZmluZE1hcmtzQXQ6IGZ1bmN0aW9uKHBvcykge1xyXG4gICAgICBwb3MgPSBjbGlwUG9zKHRoaXMsIHBvcyk7XHJcbiAgICAgIHZhciBtYXJrZXJzID0gW10sIHNwYW5zID0gZ2V0TGluZSh0aGlzLCBwb3MubGluZSkubWFya2VkU3BhbnM7XHJcbiAgICAgIGlmIChzcGFucykgZm9yICh2YXIgaSA9IDA7IGkgPCBzcGFucy5sZW5ndGg7ICsraSkge1xyXG4gICAgICAgIHZhciBzcGFuID0gc3BhbnNbaV07XHJcbiAgICAgICAgaWYgKChzcGFuLmZyb20gPT0gbnVsbCB8fCBzcGFuLmZyb20gPD0gcG9zLmNoKSAmJlxyXG4gICAgICAgICAgICAoc3Bhbi50byA9PSBudWxsIHx8IHNwYW4udG8gPj0gcG9zLmNoKSlcclxuICAgICAgICAgIG1hcmtlcnMucHVzaChzcGFuLm1hcmtlci5wYXJlbnQgfHwgc3Bhbi5tYXJrZXIpO1xyXG4gICAgICB9XHJcbiAgICAgIHJldHVybiBtYXJrZXJzO1xyXG4gICAgfSxcclxuICAgIGZpbmRNYXJrczogZnVuY3Rpb24oZnJvbSwgdG8sIGZpbHRlcikge1xyXG4gICAgICBmcm9tID0gY2xpcFBvcyh0aGlzLCBmcm9tKTsgdG8gPSBjbGlwUG9zKHRoaXMsIHRvKTtcclxuICAgICAgdmFyIGZvdW5kID0gW10sIGxpbmVObyA9IGZyb20ubGluZTtcclxuICAgICAgdGhpcy5pdGVyKGZyb20ubGluZSwgdG8ubGluZSArIDEsIGZ1bmN0aW9uKGxpbmUpIHtcclxuICAgICAgICB2YXIgc3BhbnMgPSBsaW5lLm1hcmtlZFNwYW5zO1xyXG4gICAgICAgIGlmIChzcGFucykgZm9yICh2YXIgaSA9IDA7IGkgPCBzcGFucy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgdmFyIHNwYW4gPSBzcGFuc1tpXTtcclxuICAgICAgICAgIGlmICghKGxpbmVObyA9PSBmcm9tLmxpbmUgJiYgZnJvbS5jaCA+IHNwYW4udG8gfHxcclxuICAgICAgICAgICAgICAgIHNwYW4uZnJvbSA9PSBudWxsICYmIGxpbmVObyAhPSBmcm9tLmxpbmV8fFxyXG4gICAgICAgICAgICAgICAgbGluZU5vID09IHRvLmxpbmUgJiYgc3Bhbi5mcm9tID4gdG8uY2gpICYmXHJcbiAgICAgICAgICAgICAgKCFmaWx0ZXIgfHwgZmlsdGVyKHNwYW4ubWFya2VyKSkpXHJcbiAgICAgICAgICAgIGZvdW5kLnB1c2goc3Bhbi5tYXJrZXIucGFyZW50IHx8IHNwYW4ubWFya2VyKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgKytsaW5lTm87XHJcbiAgICAgIH0pO1xyXG4gICAgICByZXR1cm4gZm91bmQ7XHJcbiAgICB9LFxyXG4gICAgZ2V0QWxsTWFya3M6IGZ1bmN0aW9uKCkge1xyXG4gICAgICB2YXIgbWFya2VycyA9IFtdO1xyXG4gICAgICB0aGlzLml0ZXIoZnVuY3Rpb24obGluZSkge1xyXG4gICAgICAgIHZhciBzcHMgPSBsaW5lLm1hcmtlZFNwYW5zO1xyXG4gICAgICAgIGlmIChzcHMpIGZvciAodmFyIGkgPSAwOyBpIDwgc3BzLmxlbmd0aDsgKytpKVxyXG4gICAgICAgICAgaWYgKHNwc1tpXS5mcm9tICE9IG51bGwpIG1hcmtlcnMucHVzaChzcHNbaV0ubWFya2VyKTtcclxuICAgICAgfSk7XHJcbiAgICAgIHJldHVybiBtYXJrZXJzO1xyXG4gICAgfSxcclxuXHJcbiAgICBwb3NGcm9tSW5kZXg6IGZ1bmN0aW9uKG9mZikge1xyXG4gICAgICB2YXIgY2gsIGxpbmVObyA9IHRoaXMuZmlyc3Q7XHJcbiAgICAgIHRoaXMuaXRlcihmdW5jdGlvbihsaW5lKSB7XHJcbiAgICAgICAgdmFyIHN6ID0gbGluZS50ZXh0Lmxlbmd0aCArIDE7XHJcbiAgICAgICAgaWYgKHN6ID4gb2ZmKSB7IGNoID0gb2ZmOyByZXR1cm4gdHJ1ZTsgfVxyXG4gICAgICAgIG9mZiAtPSBzejtcclxuICAgICAgICArK2xpbmVObztcclxuICAgICAgfSk7XHJcbiAgICAgIHJldHVybiBjbGlwUG9zKHRoaXMsIFBvcyhsaW5lTm8sIGNoKSk7XHJcbiAgICB9LFxyXG4gICAgaW5kZXhGcm9tUG9zOiBmdW5jdGlvbiAoY29vcmRzKSB7XHJcbiAgICAgIGNvb3JkcyA9IGNsaXBQb3ModGhpcywgY29vcmRzKTtcclxuICAgICAgdmFyIGluZGV4ID0gY29vcmRzLmNoO1xyXG4gICAgICBpZiAoY29vcmRzLmxpbmUgPCB0aGlzLmZpcnN0IHx8IGNvb3Jkcy5jaCA8IDApIHJldHVybiAwO1xyXG4gICAgICB0aGlzLml0ZXIodGhpcy5maXJzdCwgY29vcmRzLmxpbmUsIGZ1bmN0aW9uIChsaW5lKSB7XHJcbiAgICAgICAgaW5kZXggKz0gbGluZS50ZXh0Lmxlbmd0aCArIDE7XHJcbiAgICAgIH0pO1xyXG4gICAgICByZXR1cm4gaW5kZXg7XHJcbiAgICB9LFxyXG5cclxuICAgIGNvcHk6IGZ1bmN0aW9uKGNvcHlIaXN0b3J5KSB7XHJcbiAgICAgIHZhciBkb2MgPSBuZXcgRG9jKGdldExpbmVzKHRoaXMsIHRoaXMuZmlyc3QsIHRoaXMuZmlyc3QgKyB0aGlzLnNpemUpLCB0aGlzLm1vZGVPcHRpb24sIHRoaXMuZmlyc3QpO1xyXG4gICAgICBkb2Muc2Nyb2xsVG9wID0gdGhpcy5zY3JvbGxUb3A7IGRvYy5zY3JvbGxMZWZ0ID0gdGhpcy5zY3JvbGxMZWZ0O1xyXG4gICAgICBkb2Muc2VsID0gdGhpcy5zZWw7XHJcbiAgICAgIGRvYy5leHRlbmQgPSBmYWxzZTtcclxuICAgICAgaWYgKGNvcHlIaXN0b3J5KSB7XHJcbiAgICAgICAgZG9jLmhpc3RvcnkudW5kb0RlcHRoID0gdGhpcy5oaXN0b3J5LnVuZG9EZXB0aDtcclxuICAgICAgICBkb2Muc2V0SGlzdG9yeSh0aGlzLmdldEhpc3RvcnkoKSk7XHJcbiAgICAgIH1cclxuICAgICAgcmV0dXJuIGRvYztcclxuICAgIH0sXHJcblxyXG4gICAgbGlua2VkRG9jOiBmdW5jdGlvbihvcHRpb25zKSB7XHJcbiAgICAgIGlmICghb3B0aW9ucykgb3B0aW9ucyA9IHt9O1xyXG4gICAgICB2YXIgZnJvbSA9IHRoaXMuZmlyc3QsIHRvID0gdGhpcy5maXJzdCArIHRoaXMuc2l6ZTtcclxuICAgICAgaWYgKG9wdGlvbnMuZnJvbSAhPSBudWxsICYmIG9wdGlvbnMuZnJvbSA+IGZyb20pIGZyb20gPSBvcHRpb25zLmZyb207XHJcbiAgICAgIGlmIChvcHRpb25zLnRvICE9IG51bGwgJiYgb3B0aW9ucy50byA8IHRvKSB0byA9IG9wdGlvbnMudG87XHJcbiAgICAgIHZhciBjb3B5ID0gbmV3IERvYyhnZXRMaW5lcyh0aGlzLCBmcm9tLCB0byksIG9wdGlvbnMubW9kZSB8fCB0aGlzLm1vZGVPcHRpb24sIGZyb20pO1xyXG4gICAgICBpZiAob3B0aW9ucy5zaGFyZWRIaXN0KSBjb3B5Lmhpc3RvcnkgPSB0aGlzLmhpc3Rvcnk7XHJcbiAgICAgICh0aGlzLmxpbmtlZCB8fCAodGhpcy5saW5rZWQgPSBbXSkpLnB1c2goe2RvYzogY29weSwgc2hhcmVkSGlzdDogb3B0aW9ucy5zaGFyZWRIaXN0fSk7XHJcbiAgICAgIGNvcHkubGlua2VkID0gW3tkb2M6IHRoaXMsIGlzUGFyZW50OiB0cnVlLCBzaGFyZWRIaXN0OiBvcHRpb25zLnNoYXJlZEhpc3R9XTtcclxuICAgICAgY29weVNoYXJlZE1hcmtlcnMoY29weSwgZmluZFNoYXJlZE1hcmtlcnModGhpcykpO1xyXG4gICAgICByZXR1cm4gY29weTtcclxuICAgIH0sXHJcbiAgICB1bmxpbmtEb2M6IGZ1bmN0aW9uKG90aGVyKSB7XHJcbiAgICAgIGlmIChvdGhlciBpbnN0YW5jZW9mIENvZGVNaXJyb3IpIG90aGVyID0gb3RoZXIuZG9jO1xyXG4gICAgICBpZiAodGhpcy5saW5rZWQpIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5saW5rZWQubGVuZ3RoOyArK2kpIHtcclxuICAgICAgICB2YXIgbGluayA9IHRoaXMubGlua2VkW2ldO1xyXG4gICAgICAgIGlmIChsaW5rLmRvYyAhPSBvdGhlcikgY29udGludWU7XHJcbiAgICAgICAgdGhpcy5saW5rZWQuc3BsaWNlKGksIDEpO1xyXG4gICAgICAgIG90aGVyLnVubGlua0RvYyh0aGlzKTtcclxuICAgICAgICBkZXRhY2hTaGFyZWRNYXJrZXJzKGZpbmRTaGFyZWRNYXJrZXJzKHRoaXMpKTtcclxuICAgICAgICBicmVhaztcclxuICAgICAgfVxyXG4gICAgICAvLyBJZiB0aGUgaGlzdG9yaWVzIHdlcmUgc2hhcmVkLCBzcGxpdCB0aGVtIGFnYWluXHJcbiAgICAgIGlmIChvdGhlci5oaXN0b3J5ID09IHRoaXMuaGlzdG9yeSkge1xyXG4gICAgICAgIHZhciBzcGxpdElkcyA9IFtvdGhlci5pZF07XHJcbiAgICAgICAgbGlua2VkRG9jcyhvdGhlciwgZnVuY3Rpb24oZG9jKSB7c3BsaXRJZHMucHVzaChkb2MuaWQpO30sIHRydWUpO1xyXG4gICAgICAgIG90aGVyLmhpc3RvcnkgPSBuZXcgSGlzdG9yeShudWxsKTtcclxuICAgICAgICBvdGhlci5oaXN0b3J5LmRvbmUgPSBjb3B5SGlzdG9yeUFycmF5KHRoaXMuaGlzdG9yeS5kb25lLCBzcGxpdElkcyk7XHJcbiAgICAgICAgb3RoZXIuaGlzdG9yeS51bmRvbmUgPSBjb3B5SGlzdG9yeUFycmF5KHRoaXMuaGlzdG9yeS51bmRvbmUsIHNwbGl0SWRzKTtcclxuICAgICAgfVxyXG4gICAgfSxcclxuICAgIGl0ZXJMaW5rZWREb2NzOiBmdW5jdGlvbihmKSB7bGlua2VkRG9jcyh0aGlzLCBmKTt9LFxyXG5cclxuICAgIGdldE1vZGU6IGZ1bmN0aW9uKCkge3JldHVybiB0aGlzLm1vZGU7fSxcclxuICAgIGdldEVkaXRvcjogZnVuY3Rpb24oKSB7cmV0dXJuIHRoaXMuY207fVxyXG4gIH0pO1xyXG5cclxuICAvLyBQdWJsaWMgYWxpYXMuXHJcbiAgRG9jLnByb3RvdHlwZS5lYWNoTGluZSA9IERvYy5wcm90b3R5cGUuaXRlcjtcclxuXHJcbiAgLy8gU2V0IHVwIG1ldGhvZHMgb24gQ29kZU1pcnJvcidzIHByb3RvdHlwZSB0byByZWRpcmVjdCB0byB0aGUgZWRpdG9yJ3MgZG9jdW1lbnQuXHJcbiAgdmFyIGRvbnREZWxlZ2F0ZSA9IFwiaXRlciBpbnNlcnQgcmVtb3ZlIGNvcHkgZ2V0RWRpdG9yXCIuc3BsaXQoXCIgXCIpO1xyXG4gIGZvciAodmFyIHByb3AgaW4gRG9jLnByb3RvdHlwZSkgaWYgKERvYy5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkocHJvcCkgJiYgaW5kZXhPZihkb250RGVsZWdhdGUsIHByb3ApIDwgMClcclxuICAgIENvZGVNaXJyb3IucHJvdG90eXBlW3Byb3BdID0gKGZ1bmN0aW9uKG1ldGhvZCkge1xyXG4gICAgICByZXR1cm4gZnVuY3Rpb24oKSB7cmV0dXJuIG1ldGhvZC5hcHBseSh0aGlzLmRvYywgYXJndW1lbnRzKTt9O1xyXG4gICAgfSkoRG9jLnByb3RvdHlwZVtwcm9wXSk7XHJcblxyXG4gIGV2ZW50TWl4aW4oRG9jKTtcclxuXHJcbiAgLy8gQ2FsbCBmIGZvciBhbGwgbGlua2VkIGRvY3VtZW50cy5cclxuICBmdW5jdGlvbiBsaW5rZWREb2NzKGRvYywgZiwgc2hhcmVkSGlzdE9ubHkpIHtcclxuICAgIGZ1bmN0aW9uIHByb3BhZ2F0ZShkb2MsIHNraXAsIHNoYXJlZEhpc3QpIHtcclxuICAgICAgaWYgKGRvYy5saW5rZWQpIGZvciAodmFyIGkgPSAwOyBpIDwgZG9jLmxpbmtlZC5sZW5ndGg7ICsraSkge1xyXG4gICAgICAgIHZhciByZWwgPSBkb2MubGlua2VkW2ldO1xyXG4gICAgICAgIGlmIChyZWwuZG9jID09IHNraXApIGNvbnRpbnVlO1xyXG4gICAgICAgIHZhciBzaGFyZWQgPSBzaGFyZWRIaXN0ICYmIHJlbC5zaGFyZWRIaXN0O1xyXG4gICAgICAgIGlmIChzaGFyZWRIaXN0T25seSAmJiAhc2hhcmVkKSBjb250aW51ZTtcclxuICAgICAgICBmKHJlbC5kb2MsIHNoYXJlZCk7XHJcbiAgICAgICAgcHJvcGFnYXRlKHJlbC5kb2MsIGRvYywgc2hhcmVkKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgcHJvcGFnYXRlKGRvYywgbnVsbCwgdHJ1ZSk7XHJcbiAgfVxyXG5cclxuICAvLyBBdHRhY2ggYSBkb2N1bWVudCB0byBhbiBlZGl0b3IuXHJcbiAgZnVuY3Rpb24gYXR0YWNoRG9jKGNtLCBkb2MpIHtcclxuICAgIGlmIChkb2MuY20pIHRocm93IG5ldyBFcnJvcihcIlRoaXMgZG9jdW1lbnQgaXMgYWxyZWFkeSBpbiB1c2UuXCIpO1xyXG4gICAgY20uZG9jID0gZG9jO1xyXG4gICAgZG9jLmNtID0gY207XHJcbiAgICBlc3RpbWF0ZUxpbmVIZWlnaHRzKGNtKTtcclxuICAgIGxvYWRNb2RlKGNtKTtcclxuICAgIGlmICghY20ub3B0aW9ucy5saW5lV3JhcHBpbmcpIGZpbmRNYXhMaW5lKGNtKTtcclxuICAgIGNtLm9wdGlvbnMubW9kZSA9IGRvYy5tb2RlT3B0aW9uO1xyXG4gICAgcmVnQ2hhbmdlKGNtKTtcclxuICB9XHJcblxyXG4gIC8vIExJTkUgVVRJTElUSUVTXHJcblxyXG4gIC8vIEZpbmQgdGhlIGxpbmUgb2JqZWN0IGNvcnJlc3BvbmRpbmcgdG8gdGhlIGdpdmVuIGxpbmUgbnVtYmVyLlxyXG4gIGZ1bmN0aW9uIGdldExpbmUoZG9jLCBuKSB7XHJcbiAgICBuIC09IGRvYy5maXJzdDtcclxuICAgIGlmIChuIDwgMCB8fCBuID49IGRvYy5zaXplKSB0aHJvdyBuZXcgRXJyb3IoXCJUaGVyZSBpcyBubyBsaW5lIFwiICsgKG4gKyBkb2MuZmlyc3QpICsgXCIgaW4gdGhlIGRvY3VtZW50LlwiKTtcclxuICAgIGZvciAodmFyIGNodW5rID0gZG9jOyAhY2h1bmsubGluZXM7KSB7XHJcbiAgICAgIGZvciAodmFyIGkgPSAwOzsgKytpKSB7XHJcbiAgICAgICAgdmFyIGNoaWxkID0gY2h1bmsuY2hpbGRyZW5baV0sIHN6ID0gY2hpbGQuY2h1bmtTaXplKCk7XHJcbiAgICAgICAgaWYgKG4gPCBzeikgeyBjaHVuayA9IGNoaWxkOyBicmVhazsgfVxyXG4gICAgICAgIG4gLT0gc3o7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIHJldHVybiBjaHVuay5saW5lc1tuXTtcclxuICB9XHJcblxyXG4gIC8vIEdldCB0aGUgcGFydCBvZiBhIGRvY3VtZW50IGJldHdlZW4gdHdvIHBvc2l0aW9ucywgYXMgYW4gYXJyYXkgb2ZcclxuICAvLyBzdHJpbmdzLlxyXG4gIGZ1bmN0aW9uIGdldEJldHdlZW4oZG9jLCBzdGFydCwgZW5kKSB7XHJcbiAgICB2YXIgb3V0ID0gW10sIG4gPSBzdGFydC5saW5lO1xyXG4gICAgZG9jLml0ZXIoc3RhcnQubGluZSwgZW5kLmxpbmUgKyAxLCBmdW5jdGlvbihsaW5lKSB7XHJcbiAgICAgIHZhciB0ZXh0ID0gbGluZS50ZXh0O1xyXG4gICAgICBpZiAobiA9PSBlbmQubGluZSkgdGV4dCA9IHRleHQuc2xpY2UoMCwgZW5kLmNoKTtcclxuICAgICAgaWYgKG4gPT0gc3RhcnQubGluZSkgdGV4dCA9IHRleHQuc2xpY2Uoc3RhcnQuY2gpO1xyXG4gICAgICBvdXQucHVzaCh0ZXh0KTtcclxuICAgICAgKytuO1xyXG4gICAgfSk7XHJcbiAgICByZXR1cm4gb3V0O1xyXG4gIH1cclxuICAvLyBHZXQgdGhlIGxpbmVzIGJldHdlZW4gZnJvbSBhbmQgdG8sIGFzIGFycmF5IG9mIHN0cmluZ3MuXHJcbiAgZnVuY3Rpb24gZ2V0TGluZXMoZG9jLCBmcm9tLCB0bykge1xyXG4gICAgdmFyIG91dCA9IFtdO1xyXG4gICAgZG9jLml0ZXIoZnJvbSwgdG8sIGZ1bmN0aW9uKGxpbmUpIHsgb3V0LnB1c2gobGluZS50ZXh0KTsgfSk7XHJcbiAgICByZXR1cm4gb3V0O1xyXG4gIH1cclxuXHJcbiAgLy8gVXBkYXRlIHRoZSBoZWlnaHQgb2YgYSBsaW5lLCBwcm9wYWdhdGluZyB0aGUgaGVpZ2h0IGNoYW5nZVxyXG4gIC8vIHVwd2FyZHMgdG8gcGFyZW50IG5vZGVzLlxyXG4gIGZ1bmN0aW9uIHVwZGF0ZUxpbmVIZWlnaHQobGluZSwgaGVpZ2h0KSB7XHJcbiAgICB2YXIgZGlmZiA9IGhlaWdodCAtIGxpbmUuaGVpZ2h0O1xyXG4gICAgaWYgKGRpZmYpIGZvciAodmFyIG4gPSBsaW5lOyBuOyBuID0gbi5wYXJlbnQpIG4uaGVpZ2h0ICs9IGRpZmY7XHJcbiAgfVxyXG5cclxuICAvLyBHaXZlbiBhIGxpbmUgb2JqZWN0LCBmaW5kIGl0cyBsaW5lIG51bWJlciBieSB3YWxraW5nIHVwIHRocm91Z2hcclxuICAvLyBpdHMgcGFyZW50IGxpbmtzLlxyXG4gIGZ1bmN0aW9uIGxpbmVObyhsaW5lKSB7XHJcbiAgICBpZiAobGluZS5wYXJlbnQgPT0gbnVsbCkgcmV0dXJuIG51bGw7XHJcbiAgICB2YXIgY3VyID0gbGluZS5wYXJlbnQsIG5vID0gaW5kZXhPZihjdXIubGluZXMsIGxpbmUpO1xyXG4gICAgZm9yICh2YXIgY2h1bmsgPSBjdXIucGFyZW50OyBjaHVuazsgY3VyID0gY2h1bmssIGNodW5rID0gY2h1bmsucGFyZW50KSB7XHJcbiAgICAgIGZvciAodmFyIGkgPSAwOzsgKytpKSB7XHJcbiAgICAgICAgaWYgKGNodW5rLmNoaWxkcmVuW2ldID09IGN1cikgYnJlYWs7XHJcbiAgICAgICAgbm8gKz0gY2h1bmsuY2hpbGRyZW5baV0uY2h1bmtTaXplKCk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIHJldHVybiBubyArIGN1ci5maXJzdDtcclxuICB9XHJcblxyXG4gIC8vIEZpbmQgdGhlIGxpbmUgYXQgdGhlIGdpdmVuIHZlcnRpY2FsIHBvc2l0aW9uLCB1c2luZyB0aGUgaGVpZ2h0XHJcbiAgLy8gaW5mb3JtYXRpb24gaW4gdGhlIGRvY3VtZW50IHRyZWUuXHJcbiAgZnVuY3Rpb24gbGluZUF0SGVpZ2h0KGNodW5rLCBoKSB7XHJcbiAgICB2YXIgbiA9IGNodW5rLmZpcnN0O1xyXG4gICAgb3V0ZXI6IGRvIHtcclxuICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBjaHVuay5jaGlsZHJlbi5sZW5ndGg7ICsraSkge1xyXG4gICAgICAgIHZhciBjaGlsZCA9IGNodW5rLmNoaWxkcmVuW2ldLCBjaCA9IGNoaWxkLmhlaWdodDtcclxuICAgICAgICBpZiAoaCA8IGNoKSB7IGNodW5rID0gY2hpbGQ7IGNvbnRpbnVlIG91dGVyOyB9XHJcbiAgICAgICAgaCAtPSBjaDtcclxuICAgICAgICBuICs9IGNoaWxkLmNodW5rU2l6ZSgpO1xyXG4gICAgICB9XHJcbiAgICAgIHJldHVybiBuO1xyXG4gICAgfSB3aGlsZSAoIWNodW5rLmxpbmVzKTtcclxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgY2h1bmsubGluZXMubGVuZ3RoOyArK2kpIHtcclxuICAgICAgdmFyIGxpbmUgPSBjaHVuay5saW5lc1tpXSwgbGggPSBsaW5lLmhlaWdodDtcclxuICAgICAgaWYgKGggPCBsaCkgYnJlYWs7XHJcbiAgICAgIGggLT0gbGg7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gbiArIGk7XHJcbiAgfVxyXG5cclxuXHJcbiAgLy8gRmluZCB0aGUgaGVpZ2h0IGFib3ZlIHRoZSBnaXZlbiBsaW5lLlxyXG4gIGZ1bmN0aW9uIGhlaWdodEF0TGluZShsaW5lT2JqKSB7XHJcbiAgICBsaW5lT2JqID0gdmlzdWFsTGluZShsaW5lT2JqKTtcclxuXHJcbiAgICB2YXIgaCA9IDAsIGNodW5rID0gbGluZU9iai5wYXJlbnQ7XHJcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGNodW5rLmxpbmVzLmxlbmd0aDsgKytpKSB7XHJcbiAgICAgIHZhciBsaW5lID0gY2h1bmsubGluZXNbaV07XHJcbiAgICAgIGlmIChsaW5lID09IGxpbmVPYmopIGJyZWFrO1xyXG4gICAgICBlbHNlIGggKz0gbGluZS5oZWlnaHQ7XHJcbiAgICB9XHJcbiAgICBmb3IgKHZhciBwID0gY2h1bmsucGFyZW50OyBwOyBjaHVuayA9IHAsIHAgPSBjaHVuay5wYXJlbnQpIHtcclxuICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBwLmNoaWxkcmVuLmxlbmd0aDsgKytpKSB7XHJcbiAgICAgICAgdmFyIGN1ciA9IHAuY2hpbGRyZW5baV07XHJcbiAgICAgICAgaWYgKGN1ciA9PSBjaHVuaykgYnJlYWs7XHJcbiAgICAgICAgZWxzZSBoICs9IGN1ci5oZWlnaHQ7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIHJldHVybiBoO1xyXG4gIH1cclxuXHJcbiAgLy8gR2V0IHRoZSBiaWRpIG9yZGVyaW5nIGZvciB0aGUgZ2l2ZW4gbGluZSAoYW5kIGNhY2hlIGl0KS4gUmV0dXJuc1xyXG4gIC8vIGZhbHNlIGZvciBsaW5lcyB0aGF0IGFyZSBmdWxseSBsZWZ0LXRvLXJpZ2h0LCBhbmQgYW4gYXJyYXkgb2ZcclxuICAvLyBCaWRpU3BhbiBvYmplY3RzIG90aGVyd2lzZS5cclxuICBmdW5jdGlvbiBnZXRPcmRlcihsaW5lKSB7XHJcbiAgICB2YXIgb3JkZXIgPSBsaW5lLm9yZGVyO1xyXG4gICAgaWYgKG9yZGVyID09IG51bGwpIG9yZGVyID0gbGluZS5vcmRlciA9IGJpZGlPcmRlcmluZyhsaW5lLnRleHQpO1xyXG4gICAgcmV0dXJuIG9yZGVyO1xyXG4gIH1cclxuXHJcbiAgLy8gSElTVE9SWVxyXG5cclxuICBmdW5jdGlvbiBIaXN0b3J5KHN0YXJ0R2VuKSB7XHJcbiAgICAvLyBBcnJheXMgb2YgY2hhbmdlIGV2ZW50cyBhbmQgc2VsZWN0aW9ucy4gRG9pbmcgc29tZXRoaW5nIGFkZHMgYW5cclxuICAgIC8vIGV2ZW50IHRvIGRvbmUgYW5kIGNsZWFycyB1bmRvLiBVbmRvaW5nIG1vdmVzIGV2ZW50cyBmcm9tIGRvbmVcclxuICAgIC8vIHRvIHVuZG9uZSwgcmVkb2luZyBtb3ZlcyB0aGVtIGluIHRoZSBvdGhlciBkaXJlY3Rpb24uXHJcbiAgICB0aGlzLmRvbmUgPSBbXTsgdGhpcy51bmRvbmUgPSBbXTtcclxuICAgIHRoaXMudW5kb0RlcHRoID0gSW5maW5pdHk7XHJcbiAgICAvLyBVc2VkIHRvIHRyYWNrIHdoZW4gY2hhbmdlcyBjYW4gYmUgbWVyZ2VkIGludG8gYSBzaW5nbGUgdW5kb1xyXG4gICAgLy8gZXZlbnRcclxuICAgIHRoaXMubGFzdE1vZFRpbWUgPSB0aGlzLmxhc3RTZWxUaW1lID0gMDtcclxuICAgIHRoaXMubGFzdE9wID0gdGhpcy5sYXN0U2VsT3AgPSBudWxsO1xyXG4gICAgdGhpcy5sYXN0T3JpZ2luID0gdGhpcy5sYXN0U2VsT3JpZ2luID0gbnVsbDtcclxuICAgIC8vIFVzZWQgYnkgdGhlIGlzQ2xlYW4oKSBtZXRob2RcclxuICAgIHRoaXMuZ2VuZXJhdGlvbiA9IHRoaXMubWF4R2VuZXJhdGlvbiA9IHN0YXJ0R2VuIHx8IDE7XHJcbiAgfVxyXG5cclxuICAvLyBDcmVhdGUgYSBoaXN0b3J5IGNoYW5nZSBldmVudCBmcm9tIGFuIHVwZGF0ZURvYy1zdHlsZSBjaGFuZ2VcclxuICAvLyBvYmplY3QuXHJcbiAgZnVuY3Rpb24gaGlzdG9yeUNoYW5nZUZyb21DaGFuZ2UoZG9jLCBjaGFuZ2UpIHtcclxuICAgIHZhciBoaXN0Q2hhbmdlID0ge2Zyb206IGNvcHlQb3MoY2hhbmdlLmZyb20pLCB0bzogY2hhbmdlRW5kKGNoYW5nZSksIHRleHQ6IGdldEJldHdlZW4oZG9jLCBjaGFuZ2UuZnJvbSwgY2hhbmdlLnRvKX07XHJcbiAgICBhdHRhY2hMb2NhbFNwYW5zKGRvYywgaGlzdENoYW5nZSwgY2hhbmdlLmZyb20ubGluZSwgY2hhbmdlLnRvLmxpbmUgKyAxKTtcclxuICAgIGxpbmtlZERvY3MoZG9jLCBmdW5jdGlvbihkb2MpIHthdHRhY2hMb2NhbFNwYW5zKGRvYywgaGlzdENoYW5nZSwgY2hhbmdlLmZyb20ubGluZSwgY2hhbmdlLnRvLmxpbmUgKyAxKTt9LCB0cnVlKTtcclxuICAgIHJldHVybiBoaXN0Q2hhbmdlO1xyXG4gIH1cclxuXHJcbiAgLy8gUG9wIGFsbCBzZWxlY3Rpb24gZXZlbnRzIG9mZiB0aGUgZW5kIG9mIGEgaGlzdG9yeSBhcnJheS4gU3RvcCBhdFxyXG4gIC8vIGEgY2hhbmdlIGV2ZW50LlxyXG4gIGZ1bmN0aW9uIGNsZWFyU2VsZWN0aW9uRXZlbnRzKGFycmF5KSB7XHJcbiAgICB3aGlsZSAoYXJyYXkubGVuZ3RoKSB7XHJcbiAgICAgIHZhciBsYXN0ID0gbHN0KGFycmF5KTtcclxuICAgICAgaWYgKGxhc3QucmFuZ2VzKSBhcnJheS5wb3AoKTtcclxuICAgICAgZWxzZSBicmVhaztcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8vIEZpbmQgdGhlIHRvcCBjaGFuZ2UgZXZlbnQgaW4gdGhlIGhpc3RvcnkuIFBvcCBvZmYgc2VsZWN0aW9uXHJcbiAgLy8gZXZlbnRzIHRoYXQgYXJlIGluIHRoZSB3YXkuXHJcbiAgZnVuY3Rpb24gbGFzdENoYW5nZUV2ZW50KGhpc3QsIGZvcmNlKSB7XHJcbiAgICBpZiAoZm9yY2UpIHtcclxuICAgICAgY2xlYXJTZWxlY3Rpb25FdmVudHMoaGlzdC5kb25lKTtcclxuICAgICAgcmV0dXJuIGxzdChoaXN0LmRvbmUpO1xyXG4gICAgfSBlbHNlIGlmIChoaXN0LmRvbmUubGVuZ3RoICYmICFsc3QoaGlzdC5kb25lKS5yYW5nZXMpIHtcclxuICAgICAgcmV0dXJuIGxzdChoaXN0LmRvbmUpO1xyXG4gICAgfSBlbHNlIGlmIChoaXN0LmRvbmUubGVuZ3RoID4gMSAmJiAhaGlzdC5kb25lW2hpc3QuZG9uZS5sZW5ndGggLSAyXS5yYW5nZXMpIHtcclxuICAgICAgaGlzdC5kb25lLnBvcCgpO1xyXG4gICAgICByZXR1cm4gbHN0KGhpc3QuZG9uZSk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvLyBSZWdpc3RlciBhIGNoYW5nZSBpbiB0aGUgaGlzdG9yeS4gTWVyZ2VzIGNoYW5nZXMgdGhhdCBhcmUgd2l0aGluXHJcbiAgLy8gYSBzaW5nbGUgb3BlcmF0aW9uLCBvcmUgYXJlIGNsb3NlIHRvZ2V0aGVyIHdpdGggYW4gb3JpZ2luIHRoYXRcclxuICAvLyBhbGxvd3MgbWVyZ2luZyAoc3RhcnRpbmcgd2l0aCBcIitcIikgaW50byBhIHNpbmdsZSBldmVudC5cclxuICBmdW5jdGlvbiBhZGRDaGFuZ2VUb0hpc3RvcnkoZG9jLCBjaGFuZ2UsIHNlbEFmdGVyLCBvcElkKSB7XHJcbiAgICB2YXIgaGlzdCA9IGRvYy5oaXN0b3J5O1xyXG4gICAgaGlzdC51bmRvbmUubGVuZ3RoID0gMDtcclxuICAgIHZhciB0aW1lID0gK25ldyBEYXRlLCBjdXI7XHJcblxyXG4gICAgaWYgKChoaXN0Lmxhc3RPcCA9PSBvcElkIHx8XHJcbiAgICAgICAgIGhpc3QubGFzdE9yaWdpbiA9PSBjaGFuZ2Uub3JpZ2luICYmIGNoYW5nZS5vcmlnaW4gJiZcclxuICAgICAgICAgKChjaGFuZ2Uub3JpZ2luLmNoYXJBdCgwKSA9PSBcIitcIiAmJiBkb2MuY20gJiYgaGlzdC5sYXN0TW9kVGltZSA+IHRpbWUgLSBkb2MuY20ub3B0aW9ucy5oaXN0b3J5RXZlbnREZWxheSkgfHxcclxuICAgICAgICAgIGNoYW5nZS5vcmlnaW4uY2hhckF0KDApID09IFwiKlwiKSkgJiZcclxuICAgICAgICAoY3VyID0gbGFzdENoYW5nZUV2ZW50KGhpc3QsIGhpc3QubGFzdE9wID09IG9wSWQpKSkge1xyXG4gICAgICAvLyBNZXJnZSB0aGlzIGNoYW5nZSBpbnRvIHRoZSBsYXN0IGV2ZW50XHJcbiAgICAgIHZhciBsYXN0ID0gbHN0KGN1ci5jaGFuZ2VzKTtcclxuICAgICAgaWYgKGNtcChjaGFuZ2UuZnJvbSwgY2hhbmdlLnRvKSA9PSAwICYmIGNtcChjaGFuZ2UuZnJvbSwgbGFzdC50bykgPT0gMCkge1xyXG4gICAgICAgIC8vIE9wdGltaXplZCBjYXNlIGZvciBzaW1wbGUgaW5zZXJ0aW9uIC0tIGRvbid0IHdhbnQgdG8gYWRkXHJcbiAgICAgICAgLy8gbmV3IGNoYW5nZXNldHMgZm9yIGV2ZXJ5IGNoYXJhY3RlciB0eXBlZFxyXG4gICAgICAgIGxhc3QudG8gPSBjaGFuZ2VFbmQoY2hhbmdlKTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICAvLyBBZGQgbmV3IHN1Yi1ldmVudFxyXG4gICAgICAgIGN1ci5jaGFuZ2VzLnB1c2goaGlzdG9yeUNoYW5nZUZyb21DaGFuZ2UoZG9jLCBjaGFuZ2UpKTtcclxuICAgICAgfVxyXG4gICAgfSBlbHNlIHtcclxuICAgICAgLy8gQ2FuIG5vdCBiZSBtZXJnZWQsIHN0YXJ0IGEgbmV3IGV2ZW50LlxyXG4gICAgICB2YXIgYmVmb3JlID0gbHN0KGhpc3QuZG9uZSk7XHJcbiAgICAgIGlmICghYmVmb3JlIHx8ICFiZWZvcmUucmFuZ2VzKVxyXG4gICAgICAgIHB1c2hTZWxlY3Rpb25Ub0hpc3RvcnkoZG9jLnNlbCwgaGlzdC5kb25lKTtcclxuICAgICAgY3VyID0ge2NoYW5nZXM6IFtoaXN0b3J5Q2hhbmdlRnJvbUNoYW5nZShkb2MsIGNoYW5nZSldLFxyXG4gICAgICAgICAgICAgZ2VuZXJhdGlvbjogaGlzdC5nZW5lcmF0aW9ufTtcclxuICAgICAgaGlzdC5kb25lLnB1c2goY3VyKTtcclxuICAgICAgd2hpbGUgKGhpc3QuZG9uZS5sZW5ndGggPiBoaXN0LnVuZG9EZXB0aCkge1xyXG4gICAgICAgIGhpc3QuZG9uZS5zaGlmdCgpO1xyXG4gICAgICAgIGlmICghaGlzdC5kb25lWzBdLnJhbmdlcykgaGlzdC5kb25lLnNoaWZ0KCk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIGhpc3QuZG9uZS5wdXNoKHNlbEFmdGVyKTtcclxuICAgIGhpc3QuZ2VuZXJhdGlvbiA9ICsraGlzdC5tYXhHZW5lcmF0aW9uO1xyXG4gICAgaGlzdC5sYXN0TW9kVGltZSA9IGhpc3QubGFzdFNlbFRpbWUgPSB0aW1lO1xyXG4gICAgaGlzdC5sYXN0T3AgPSBoaXN0Lmxhc3RTZWxPcCA9IG9wSWQ7XHJcbiAgICBoaXN0Lmxhc3RPcmlnaW4gPSBoaXN0Lmxhc3RTZWxPcmlnaW4gPSBjaGFuZ2Uub3JpZ2luO1xyXG5cclxuICAgIGlmICghbGFzdCkgc2lnbmFsKGRvYywgXCJoaXN0b3J5QWRkZWRcIik7XHJcbiAgfVxyXG5cclxuICBmdW5jdGlvbiBzZWxlY3Rpb25FdmVudENhbkJlTWVyZ2VkKGRvYywgb3JpZ2luLCBwcmV2LCBzZWwpIHtcclxuICAgIHZhciBjaCA9IG9yaWdpbi5jaGFyQXQoMCk7XHJcbiAgICByZXR1cm4gY2ggPT0gXCIqXCIgfHxcclxuICAgICAgY2ggPT0gXCIrXCIgJiZcclxuICAgICAgcHJldi5yYW5nZXMubGVuZ3RoID09IHNlbC5yYW5nZXMubGVuZ3RoICYmXHJcbiAgICAgIHByZXYuc29tZXRoaW5nU2VsZWN0ZWQoKSA9PSBzZWwuc29tZXRoaW5nU2VsZWN0ZWQoKSAmJlxyXG4gICAgICBuZXcgRGF0ZSAtIGRvYy5oaXN0b3J5Lmxhc3RTZWxUaW1lIDw9IChkb2MuY20gPyBkb2MuY20ub3B0aW9ucy5oaXN0b3J5RXZlbnREZWxheSA6IDUwMCk7XHJcbiAgfVxyXG5cclxuICAvLyBDYWxsZWQgd2hlbmV2ZXIgdGhlIHNlbGVjdGlvbiBjaGFuZ2VzLCBzZXRzIHRoZSBuZXcgc2VsZWN0aW9uIGFzXHJcbiAgLy8gdGhlIHBlbmRpbmcgc2VsZWN0aW9uIGluIHRoZSBoaXN0b3J5LCBhbmQgcHVzaGVzIHRoZSBvbGQgcGVuZGluZ1xyXG4gIC8vIHNlbGVjdGlvbiBpbnRvIHRoZSAnZG9uZScgYXJyYXkgd2hlbiBpdCB3YXMgc2lnbmlmaWNhbnRseVxyXG4gIC8vIGRpZmZlcmVudCAoaW4gbnVtYmVyIG9mIHNlbGVjdGVkIHJhbmdlcywgZW1wdGluZXNzLCBvciB0aW1lKS5cclxuICBmdW5jdGlvbiBhZGRTZWxlY3Rpb25Ub0hpc3RvcnkoZG9jLCBzZWwsIG9wSWQsIG9wdGlvbnMpIHtcclxuICAgIHZhciBoaXN0ID0gZG9jLmhpc3RvcnksIG9yaWdpbiA9IG9wdGlvbnMgJiYgb3B0aW9ucy5vcmlnaW47XHJcblxyXG4gICAgLy8gQSBuZXcgZXZlbnQgaXMgc3RhcnRlZCB3aGVuIHRoZSBwcmV2aW91cyBvcmlnaW4gZG9lcyBub3QgbWF0Y2hcclxuICAgIC8vIHRoZSBjdXJyZW50LCBvciB0aGUgb3JpZ2lucyBkb24ndCBhbGxvdyBtYXRjaGluZy4gT3JpZ2luc1xyXG4gICAgLy8gc3RhcnRpbmcgd2l0aCAqIGFyZSBhbHdheXMgbWVyZ2VkLCB0aG9zZSBzdGFydGluZyB3aXRoICsgYXJlXHJcbiAgICAvLyBtZXJnZWQgd2hlbiBzaW1pbGFyIGFuZCBjbG9zZSB0b2dldGhlciBpbiB0aW1lLlxyXG4gICAgaWYgKG9wSWQgPT0gaGlzdC5sYXN0U2VsT3AgfHxcclxuICAgICAgICAob3JpZ2luICYmIGhpc3QubGFzdFNlbE9yaWdpbiA9PSBvcmlnaW4gJiZcclxuICAgICAgICAgKGhpc3QubGFzdE1vZFRpbWUgPT0gaGlzdC5sYXN0U2VsVGltZSAmJiBoaXN0Lmxhc3RPcmlnaW4gPT0gb3JpZ2luIHx8XHJcbiAgICAgICAgICBzZWxlY3Rpb25FdmVudENhbkJlTWVyZ2VkKGRvYywgb3JpZ2luLCBsc3QoaGlzdC5kb25lKSwgc2VsKSkpKVxyXG4gICAgICBoaXN0LmRvbmVbaGlzdC5kb25lLmxlbmd0aCAtIDFdID0gc2VsO1xyXG4gICAgZWxzZVxyXG4gICAgICBwdXNoU2VsZWN0aW9uVG9IaXN0b3J5KHNlbCwgaGlzdC5kb25lKTtcclxuXHJcbiAgICBoaXN0Lmxhc3RTZWxUaW1lID0gK25ldyBEYXRlO1xyXG4gICAgaGlzdC5sYXN0U2VsT3JpZ2luID0gb3JpZ2luO1xyXG4gICAgaGlzdC5sYXN0U2VsT3AgPSBvcElkO1xyXG4gICAgaWYgKG9wdGlvbnMgJiYgb3B0aW9ucy5jbGVhclJlZG8gIT09IGZhbHNlKVxyXG4gICAgICBjbGVhclNlbGVjdGlvbkV2ZW50cyhoaXN0LnVuZG9uZSk7XHJcbiAgfVxyXG5cclxuICBmdW5jdGlvbiBwdXNoU2VsZWN0aW9uVG9IaXN0b3J5KHNlbCwgZGVzdCkge1xyXG4gICAgdmFyIHRvcCA9IGxzdChkZXN0KTtcclxuICAgIGlmICghKHRvcCAmJiB0b3AucmFuZ2VzICYmIHRvcC5lcXVhbHMoc2VsKSkpXHJcbiAgICAgIGRlc3QucHVzaChzZWwpO1xyXG4gIH1cclxuXHJcbiAgLy8gVXNlZCB0byBzdG9yZSBtYXJrZWQgc3BhbiBpbmZvcm1hdGlvbiBpbiB0aGUgaGlzdG9yeS5cclxuICBmdW5jdGlvbiBhdHRhY2hMb2NhbFNwYW5zKGRvYywgY2hhbmdlLCBmcm9tLCB0bykge1xyXG4gICAgdmFyIGV4aXN0aW5nID0gY2hhbmdlW1wic3BhbnNfXCIgKyBkb2MuaWRdLCBuID0gMDtcclxuICAgIGRvYy5pdGVyKE1hdGgubWF4KGRvYy5maXJzdCwgZnJvbSksIE1hdGgubWluKGRvYy5maXJzdCArIGRvYy5zaXplLCB0byksIGZ1bmN0aW9uKGxpbmUpIHtcclxuICAgICAgaWYgKGxpbmUubWFya2VkU3BhbnMpXHJcbiAgICAgICAgKGV4aXN0aW5nIHx8IChleGlzdGluZyA9IGNoYW5nZVtcInNwYW5zX1wiICsgZG9jLmlkXSA9IHt9KSlbbl0gPSBsaW5lLm1hcmtlZFNwYW5zO1xyXG4gICAgICArK247XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIC8vIFdoZW4gdW4vcmUtZG9pbmcgcmVzdG9yZXMgdGV4dCBjb250YWluaW5nIG1hcmtlZCBzcGFucywgdGhvc2VcclxuICAvLyB0aGF0IGhhdmUgYmVlbiBleHBsaWNpdGx5IGNsZWFyZWQgc2hvdWxkIG5vdCBiZSByZXN0b3JlZC5cclxuICBmdW5jdGlvbiByZW1vdmVDbGVhcmVkU3BhbnMoc3BhbnMpIHtcclxuICAgIGlmICghc3BhbnMpIHJldHVybiBudWxsO1xyXG4gICAgZm9yICh2YXIgaSA9IDAsIG91dDsgaSA8IHNwYW5zLmxlbmd0aDsgKytpKSB7XHJcbiAgICAgIGlmIChzcGFuc1tpXS5tYXJrZXIuZXhwbGljaXRseUNsZWFyZWQpIHsgaWYgKCFvdXQpIG91dCA9IHNwYW5zLnNsaWNlKDAsIGkpOyB9XHJcbiAgICAgIGVsc2UgaWYgKG91dCkgb3V0LnB1c2goc3BhbnNbaV0pO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuICFvdXQgPyBzcGFucyA6IG91dC5sZW5ndGggPyBvdXQgOiBudWxsO1xyXG4gIH1cclxuXHJcbiAgLy8gUmV0cmlldmUgYW5kIGZpbHRlciB0aGUgb2xkIG1hcmtlZCBzcGFucyBzdG9yZWQgaW4gYSBjaGFuZ2UgZXZlbnQuXHJcbiAgZnVuY3Rpb24gZ2V0T2xkU3BhbnMoZG9jLCBjaGFuZ2UpIHtcclxuICAgIHZhciBmb3VuZCA9IGNoYW5nZVtcInNwYW5zX1wiICsgZG9jLmlkXTtcclxuICAgIGlmICghZm91bmQpIHJldHVybiBudWxsO1xyXG4gICAgZm9yICh2YXIgaSA9IDAsIG53ID0gW107IGkgPCBjaGFuZ2UudGV4dC5sZW5ndGg7ICsraSlcclxuICAgICAgbncucHVzaChyZW1vdmVDbGVhcmVkU3BhbnMoZm91bmRbaV0pKTtcclxuICAgIHJldHVybiBudztcclxuICB9XHJcblxyXG4gIC8vIFVzZWQgYm90aCB0byBwcm92aWRlIGEgSlNPTi1zYWZlIG9iamVjdCBpbiAuZ2V0SGlzdG9yeSwgYW5kLCB3aGVuXHJcbiAgLy8gZGV0YWNoaW5nIGEgZG9jdW1lbnQsIHRvIHNwbGl0IHRoZSBoaXN0b3J5IGluIHR3b1xyXG4gIGZ1bmN0aW9uIGNvcHlIaXN0b3J5QXJyYXkoZXZlbnRzLCBuZXdHcm91cCwgaW5zdGFudGlhdGVTZWwpIHtcclxuICAgIGZvciAodmFyIGkgPSAwLCBjb3B5ID0gW107IGkgPCBldmVudHMubGVuZ3RoOyArK2kpIHtcclxuICAgICAgdmFyIGV2ZW50ID0gZXZlbnRzW2ldO1xyXG4gICAgICBpZiAoZXZlbnQucmFuZ2VzKSB7XHJcbiAgICAgICAgY29weS5wdXNoKGluc3RhbnRpYXRlU2VsID8gU2VsZWN0aW9uLnByb3RvdHlwZS5kZWVwQ29weS5jYWxsKGV2ZW50KSA6IGV2ZW50KTtcclxuICAgICAgICBjb250aW51ZTtcclxuICAgICAgfVxyXG4gICAgICB2YXIgY2hhbmdlcyA9IGV2ZW50LmNoYW5nZXMsIG5ld0NoYW5nZXMgPSBbXTtcclxuICAgICAgY29weS5wdXNoKHtjaGFuZ2VzOiBuZXdDaGFuZ2VzfSk7XHJcbiAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgY2hhbmdlcy5sZW5ndGg7ICsraikge1xyXG4gICAgICAgIHZhciBjaGFuZ2UgPSBjaGFuZ2VzW2pdLCBtO1xyXG4gICAgICAgIG5ld0NoYW5nZXMucHVzaCh7ZnJvbTogY2hhbmdlLmZyb20sIHRvOiBjaGFuZ2UudG8sIHRleHQ6IGNoYW5nZS50ZXh0fSk7XHJcbiAgICAgICAgaWYgKG5ld0dyb3VwKSBmb3IgKHZhciBwcm9wIGluIGNoYW5nZSkgaWYgKG0gPSBwcm9wLm1hdGNoKC9ec3BhbnNfKFxcZCspJC8pKSB7XHJcbiAgICAgICAgICBpZiAoaW5kZXhPZihuZXdHcm91cCwgTnVtYmVyKG1bMV0pKSA+IC0xKSB7XHJcbiAgICAgICAgICAgIGxzdChuZXdDaGFuZ2VzKVtwcm9wXSA9IGNoYW5nZVtwcm9wXTtcclxuICAgICAgICAgICAgZGVsZXRlIGNoYW5nZVtwcm9wXTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIHJldHVybiBjb3B5O1xyXG4gIH1cclxuXHJcbiAgLy8gUmViYXNpbmcvcmVzZXR0aW5nIGhpc3RvcnkgdG8gZGVhbCB3aXRoIGV4dGVybmFsbHktc291cmNlZCBjaGFuZ2VzXHJcblxyXG4gIGZ1bmN0aW9uIHJlYmFzZUhpc3RTZWxTaW5nbGUocG9zLCBmcm9tLCB0bywgZGlmZikge1xyXG4gICAgaWYgKHRvIDwgcG9zLmxpbmUpIHtcclxuICAgICAgcG9zLmxpbmUgKz0gZGlmZjtcclxuICAgIH0gZWxzZSBpZiAoZnJvbSA8IHBvcy5saW5lKSB7XHJcbiAgICAgIHBvcy5saW5lID0gZnJvbTtcclxuICAgICAgcG9zLmNoID0gMDtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8vIFRyaWVzIHRvIHJlYmFzZSBhbiBhcnJheSBvZiBoaXN0b3J5IGV2ZW50cyBnaXZlbiBhIGNoYW5nZSBpbiB0aGVcclxuICAvLyBkb2N1bWVudC4gSWYgdGhlIGNoYW5nZSB0b3VjaGVzIHRoZSBzYW1lIGxpbmVzIGFzIHRoZSBldmVudCwgdGhlXHJcbiAgLy8gZXZlbnQsIGFuZCBldmVyeXRoaW5nICdiZWhpbmQnIGl0LCBpcyBkaXNjYXJkZWQuIElmIHRoZSBjaGFuZ2UgaXNcclxuICAvLyBiZWZvcmUgdGhlIGV2ZW50LCB0aGUgZXZlbnQncyBwb3NpdGlvbnMgYXJlIHVwZGF0ZWQuIFVzZXMgYVxyXG4gIC8vIGNvcHktb24td3JpdGUgc2NoZW1lIGZvciB0aGUgcG9zaXRpb25zLCB0byBhdm9pZCBoYXZpbmcgdG9cclxuICAvLyByZWFsbG9jYXRlIHRoZW0gYWxsIG9uIGV2ZXJ5IHJlYmFzZSwgYnV0IGFsc28gYXZvaWQgcHJvYmxlbXMgd2l0aFxyXG4gIC8vIHNoYXJlZCBwb3NpdGlvbiBvYmplY3RzIGJlaW5nIHVuc2FmZWx5IHVwZGF0ZWQuXHJcbiAgZnVuY3Rpb24gcmViYXNlSGlzdEFycmF5KGFycmF5LCBmcm9tLCB0bywgZGlmZikge1xyXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBhcnJheS5sZW5ndGg7ICsraSkge1xyXG4gICAgICB2YXIgc3ViID0gYXJyYXlbaV0sIG9rID0gdHJ1ZTtcclxuICAgICAgaWYgKHN1Yi5yYW5nZXMpIHtcclxuICAgICAgICBpZiAoIXN1Yi5jb3BpZWQpIHsgc3ViID0gYXJyYXlbaV0gPSBzdWIuZGVlcENvcHkoKTsgc3ViLmNvcGllZCA9IHRydWU7IH1cclxuICAgICAgICBmb3IgKHZhciBqID0gMDsgaiA8IHN1Yi5yYW5nZXMubGVuZ3RoOyBqKyspIHtcclxuICAgICAgICAgIHJlYmFzZUhpc3RTZWxTaW5nbGUoc3ViLnJhbmdlc1tqXS5hbmNob3IsIGZyb20sIHRvLCBkaWZmKTtcclxuICAgICAgICAgIHJlYmFzZUhpc3RTZWxTaW5nbGUoc3ViLnJhbmdlc1tqXS5oZWFkLCBmcm9tLCB0bywgZGlmZik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbnRpbnVlO1xyXG4gICAgICB9XHJcbiAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgc3ViLmNoYW5nZXMubGVuZ3RoOyArK2opIHtcclxuICAgICAgICB2YXIgY3VyID0gc3ViLmNoYW5nZXNbal07XHJcbiAgICAgICAgaWYgKHRvIDwgY3VyLmZyb20ubGluZSkge1xyXG4gICAgICAgICAgY3VyLmZyb20gPSBQb3MoY3VyLmZyb20ubGluZSArIGRpZmYsIGN1ci5mcm9tLmNoKTtcclxuICAgICAgICAgIGN1ci50byA9IFBvcyhjdXIudG8ubGluZSArIGRpZmYsIGN1ci50by5jaCk7XHJcbiAgICAgICAgfSBlbHNlIGlmIChmcm9tIDw9IGN1ci50by5saW5lKSB7XHJcbiAgICAgICAgICBvayA9IGZhbHNlO1xyXG4gICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICAgIGlmICghb2spIHtcclxuICAgICAgICBhcnJheS5zcGxpY2UoMCwgaSArIDEpO1xyXG4gICAgICAgIGkgPSAwO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBmdW5jdGlvbiByZWJhc2VIaXN0KGhpc3QsIGNoYW5nZSkge1xyXG4gICAgdmFyIGZyb20gPSBjaGFuZ2UuZnJvbS5saW5lLCB0byA9IGNoYW5nZS50by5saW5lLCBkaWZmID0gY2hhbmdlLnRleHQubGVuZ3RoIC0gKHRvIC0gZnJvbSkgLSAxO1xyXG4gICAgcmViYXNlSGlzdEFycmF5KGhpc3QuZG9uZSwgZnJvbSwgdG8sIGRpZmYpO1xyXG4gICAgcmViYXNlSGlzdEFycmF5KGhpc3QudW5kb25lLCBmcm9tLCB0bywgZGlmZik7XHJcbiAgfVxyXG5cclxuICAvLyBFVkVOVCBVVElMSVRJRVNcclxuXHJcbiAgLy8gRHVlIHRvIHRoZSBmYWN0IHRoYXQgd2Ugc3RpbGwgc3VwcG9ydCBqdXJhc3NpYyBJRSB2ZXJzaW9ucywgc29tZVxyXG4gIC8vIGNvbXBhdGliaWxpdHkgd3JhcHBlcnMgYXJlIG5lZWRlZC5cclxuXHJcbiAgdmFyIGVfcHJldmVudERlZmF1bHQgPSBDb2RlTWlycm9yLmVfcHJldmVudERlZmF1bHQgPSBmdW5jdGlvbihlKSB7XHJcbiAgICBpZiAoZS5wcmV2ZW50RGVmYXVsdCkgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgZWxzZSBlLnJldHVyblZhbHVlID0gZmFsc2U7XHJcbiAgfTtcclxuICB2YXIgZV9zdG9wUHJvcGFnYXRpb24gPSBDb2RlTWlycm9yLmVfc3RvcFByb3BhZ2F0aW9uID0gZnVuY3Rpb24oZSkge1xyXG4gICAgaWYgKGUuc3RvcFByb3BhZ2F0aW9uKSBlLnN0b3BQcm9wYWdhdGlvbigpO1xyXG4gICAgZWxzZSBlLmNhbmNlbEJ1YmJsZSA9IHRydWU7XHJcbiAgfTtcclxuICBmdW5jdGlvbiBlX2RlZmF1bHRQcmV2ZW50ZWQoZSkge1xyXG4gICAgcmV0dXJuIGUuZGVmYXVsdFByZXZlbnRlZCAhPSBudWxsID8gZS5kZWZhdWx0UHJldmVudGVkIDogZS5yZXR1cm5WYWx1ZSA9PSBmYWxzZTtcclxuICB9XHJcbiAgdmFyIGVfc3RvcCA9IENvZGVNaXJyb3IuZV9zdG9wID0gZnVuY3Rpb24oZSkge2VfcHJldmVudERlZmF1bHQoZSk7IGVfc3RvcFByb3BhZ2F0aW9uKGUpO307XHJcblxyXG4gIGZ1bmN0aW9uIGVfdGFyZ2V0KGUpIHtyZXR1cm4gZS50YXJnZXQgfHwgZS5zcmNFbGVtZW50O31cclxuICBmdW5jdGlvbiBlX2J1dHRvbihlKSB7XHJcbiAgICB2YXIgYiA9IGUud2hpY2g7XHJcbiAgICBpZiAoYiA9PSBudWxsKSB7XHJcbiAgICAgIGlmIChlLmJ1dHRvbiAmIDEpIGIgPSAxO1xyXG4gICAgICBlbHNlIGlmIChlLmJ1dHRvbiAmIDIpIGIgPSAzO1xyXG4gICAgICBlbHNlIGlmIChlLmJ1dHRvbiAmIDQpIGIgPSAyO1xyXG4gICAgfVxyXG4gICAgaWYgKG1hYyAmJiBlLmN0cmxLZXkgJiYgYiA9PSAxKSBiID0gMztcclxuICAgIHJldHVybiBiO1xyXG4gIH1cclxuXHJcbiAgLy8gRVZFTlQgSEFORExJTkdcclxuXHJcbiAgLy8gTGlnaHR3ZWlnaHQgZXZlbnQgZnJhbWV3b3JrLiBvbi9vZmYgYWxzbyB3b3JrIG9uIERPTSBub2RlcyxcclxuICAvLyByZWdpc3RlcmluZyBuYXRpdmUgRE9NIGhhbmRsZXJzLlxyXG5cclxuICB2YXIgb24gPSBDb2RlTWlycm9yLm9uID0gZnVuY3Rpb24oZW1pdHRlciwgdHlwZSwgZikge1xyXG4gICAgaWYgKGVtaXR0ZXIuYWRkRXZlbnRMaXN0ZW5lcilcclxuICAgICAgZW1pdHRlci5hZGRFdmVudExpc3RlbmVyKHR5cGUsIGYsIGZhbHNlKTtcclxuICAgIGVsc2UgaWYgKGVtaXR0ZXIuYXR0YWNoRXZlbnQpXHJcbiAgICAgIGVtaXR0ZXIuYXR0YWNoRXZlbnQoXCJvblwiICsgdHlwZSwgZik7XHJcbiAgICBlbHNlIHtcclxuICAgICAgdmFyIG1hcCA9IGVtaXR0ZXIuX2hhbmRsZXJzIHx8IChlbWl0dGVyLl9oYW5kbGVycyA9IHt9KTtcclxuICAgICAgdmFyIGFyciA9IG1hcFt0eXBlXSB8fCAobWFwW3R5cGVdID0gW10pO1xyXG4gICAgICBhcnIucHVzaChmKTtcclxuICAgIH1cclxuICB9O1xyXG5cclxuICB2YXIgb2ZmID0gQ29kZU1pcnJvci5vZmYgPSBmdW5jdGlvbihlbWl0dGVyLCB0eXBlLCBmKSB7XHJcbiAgICBpZiAoZW1pdHRlci5yZW1vdmVFdmVudExpc3RlbmVyKVxyXG4gICAgICBlbWl0dGVyLnJlbW92ZUV2ZW50TGlzdGVuZXIodHlwZSwgZiwgZmFsc2UpO1xyXG4gICAgZWxzZSBpZiAoZW1pdHRlci5kZXRhY2hFdmVudClcclxuICAgICAgZW1pdHRlci5kZXRhY2hFdmVudChcIm9uXCIgKyB0eXBlLCBmKTtcclxuICAgIGVsc2Uge1xyXG4gICAgICB2YXIgYXJyID0gZW1pdHRlci5faGFuZGxlcnMgJiYgZW1pdHRlci5faGFuZGxlcnNbdHlwZV07XHJcbiAgICAgIGlmICghYXJyKSByZXR1cm47XHJcbiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgYXJyLmxlbmd0aDsgKytpKVxyXG4gICAgICAgIGlmIChhcnJbaV0gPT0gZikgeyBhcnIuc3BsaWNlKGksIDEpOyBicmVhazsgfVxyXG4gICAgfVxyXG4gIH07XHJcblxyXG4gIHZhciBzaWduYWwgPSBDb2RlTWlycm9yLnNpZ25hbCA9IGZ1bmN0aW9uKGVtaXR0ZXIsIHR5cGUgLyosIHZhbHVlcy4uLiovKSB7XHJcbiAgICB2YXIgYXJyID0gZW1pdHRlci5faGFuZGxlcnMgJiYgZW1pdHRlci5faGFuZGxlcnNbdHlwZV07XHJcbiAgICBpZiAoIWFycikgcmV0dXJuO1xyXG4gICAgdmFyIGFyZ3MgPSBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMsIDIpO1xyXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBhcnIubGVuZ3RoOyArK2kpIGFycltpXS5hcHBseShudWxsLCBhcmdzKTtcclxuICB9O1xyXG5cclxuICB2YXIgb3JwaGFuRGVsYXllZENhbGxiYWNrcyA9IG51bGw7XHJcblxyXG4gIC8vIE9mdGVuLCB3ZSB3YW50IHRvIHNpZ25hbCBldmVudHMgYXQgYSBwb2ludCB3aGVyZSB3ZSBhcmUgaW4gdGhlXHJcbiAgLy8gbWlkZGxlIG9mIHNvbWUgd29yaywgYnV0IGRvbid0IHdhbnQgdGhlIGhhbmRsZXIgdG8gc3RhcnQgY2FsbGluZ1xyXG4gIC8vIG90aGVyIG1ldGhvZHMgb24gdGhlIGVkaXRvciwgd2hpY2ggbWlnaHQgYmUgaW4gYW4gaW5jb25zaXN0ZW50XHJcbiAgLy8gc3RhdGUgb3Igc2ltcGx5IG5vdCBleHBlY3QgYW55IG90aGVyIGV2ZW50cyB0byBoYXBwZW4uXHJcbiAgLy8gc2lnbmFsTGF0ZXIgbG9va3Mgd2hldGhlciB0aGVyZSBhcmUgYW55IGhhbmRsZXJzLCBhbmQgc2NoZWR1bGVzXHJcbiAgLy8gdGhlbSB0byBiZSBleGVjdXRlZCB3aGVuIHRoZSBsYXN0IG9wZXJhdGlvbiBlbmRzLCBvciwgaWYgbm9cclxuICAvLyBvcGVyYXRpb24gaXMgYWN0aXZlLCB3aGVuIGEgdGltZW91dCBmaXJlcy5cclxuICBmdW5jdGlvbiBzaWduYWxMYXRlcihlbWl0dGVyLCB0eXBlIC8qLCB2YWx1ZXMuLi4qLykge1xyXG4gICAgdmFyIGFyciA9IGVtaXR0ZXIuX2hhbmRsZXJzICYmIGVtaXR0ZXIuX2hhbmRsZXJzW3R5cGVdO1xyXG4gICAgaWYgKCFhcnIpIHJldHVybjtcclxuICAgIHZhciBhcmdzID0gQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzLCAyKSwgbGlzdDtcclxuICAgIGlmIChvcGVyYXRpb25Hcm91cCkge1xyXG4gICAgICBsaXN0ID0gb3BlcmF0aW9uR3JvdXAuZGVsYXllZENhbGxiYWNrcztcclxuICAgIH0gZWxzZSBpZiAob3JwaGFuRGVsYXllZENhbGxiYWNrcykge1xyXG4gICAgICBsaXN0ID0gb3JwaGFuRGVsYXllZENhbGxiYWNrcztcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIGxpc3QgPSBvcnBoYW5EZWxheWVkQ2FsbGJhY2tzID0gW107XHJcbiAgICAgIHNldFRpbWVvdXQoZmlyZU9ycGhhbkRlbGF5ZWQsIDApO1xyXG4gICAgfVxyXG4gICAgZnVuY3Rpb24gYm5kKGYpIHtyZXR1cm4gZnVuY3Rpb24oKXtmLmFwcGx5KG51bGwsIGFyZ3MpO307fTtcclxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgYXJyLmxlbmd0aDsgKytpKVxyXG4gICAgICBsaXN0LnB1c2goYm5kKGFycltpXSkpO1xyXG4gIH1cclxuXHJcbiAgZnVuY3Rpb24gZmlyZU9ycGhhbkRlbGF5ZWQoKSB7XHJcbiAgICB2YXIgZGVsYXllZCA9IG9ycGhhbkRlbGF5ZWRDYWxsYmFja3M7XHJcbiAgICBvcnBoYW5EZWxheWVkQ2FsbGJhY2tzID0gbnVsbDtcclxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZGVsYXllZC5sZW5ndGg7ICsraSkgZGVsYXllZFtpXSgpO1xyXG4gIH1cclxuXHJcbiAgLy8gVGhlIERPTSBldmVudHMgdGhhdCBDb2RlTWlycm9yIGhhbmRsZXMgY2FuIGJlIG92ZXJyaWRkZW4gYnlcclxuICAvLyByZWdpc3RlcmluZyBhIChub24tRE9NKSBoYW5kbGVyIG9uIHRoZSBlZGl0b3IgZm9yIHRoZSBldmVudCBuYW1lLFxyXG4gIC8vIGFuZCBwcmV2ZW50RGVmYXVsdC1pbmcgdGhlIGV2ZW50IGluIHRoYXQgaGFuZGxlci5cclxuICBmdW5jdGlvbiBzaWduYWxET01FdmVudChjbSwgZSwgb3ZlcnJpZGUpIHtcclxuICAgIHNpZ25hbChjbSwgb3ZlcnJpZGUgfHwgZS50eXBlLCBjbSwgZSk7XHJcbiAgICByZXR1cm4gZV9kZWZhdWx0UHJldmVudGVkKGUpIHx8IGUuY29kZW1pcnJvcklnbm9yZTtcclxuICB9XHJcblxyXG4gIGZ1bmN0aW9uIHNpZ25hbEN1cnNvckFjdGl2aXR5KGNtKSB7XHJcbiAgICB2YXIgYXJyID0gY20uX2hhbmRsZXJzICYmIGNtLl9oYW5kbGVycy5jdXJzb3JBY3Rpdml0eTtcclxuICAgIGlmICghYXJyKSByZXR1cm47XHJcbiAgICB2YXIgc2V0ID0gY20uY3VyT3AuY3Vyc29yQWN0aXZpdHlIYW5kbGVycyB8fCAoY20uY3VyT3AuY3Vyc29yQWN0aXZpdHlIYW5kbGVycyA9IFtdKTtcclxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgYXJyLmxlbmd0aDsgKytpKSBpZiAoaW5kZXhPZihzZXQsIGFycltpXSkgPT0gLTEpXHJcbiAgICAgIHNldC5wdXNoKGFycltpXSk7XHJcbiAgfVxyXG5cclxuICBmdW5jdGlvbiBoYXNIYW5kbGVyKGVtaXR0ZXIsIHR5cGUpIHtcclxuICAgIHZhciBhcnIgPSBlbWl0dGVyLl9oYW5kbGVycyAmJiBlbWl0dGVyLl9oYW5kbGVyc1t0eXBlXTtcclxuICAgIHJldHVybiBhcnIgJiYgYXJyLmxlbmd0aCA+IDA7XHJcbiAgfVxyXG5cclxuICAvLyBBZGQgb24gYW5kIG9mZiBtZXRob2RzIHRvIGEgY29uc3RydWN0b3IncyBwcm90b3R5cGUsIHRvIG1ha2VcclxuICAvLyByZWdpc3RlcmluZyBldmVudHMgb24gc3VjaCBvYmplY3RzIG1vcmUgY29udmVuaWVudC5cclxuICBmdW5jdGlvbiBldmVudE1peGluKGN0b3IpIHtcclxuICAgIGN0b3IucHJvdG90eXBlLm9uID0gZnVuY3Rpb24odHlwZSwgZikge29uKHRoaXMsIHR5cGUsIGYpO307XHJcbiAgICBjdG9yLnByb3RvdHlwZS5vZmYgPSBmdW5jdGlvbih0eXBlLCBmKSB7b2ZmKHRoaXMsIHR5cGUsIGYpO307XHJcbiAgfVxyXG5cclxuICAvLyBNSVNDIFVUSUxJVElFU1xyXG5cclxuICAvLyBOdW1iZXIgb2YgcGl4ZWxzIGFkZGVkIHRvIHNjcm9sbGVyIGFuZCBzaXplciB0byBoaWRlIHNjcm9sbGJhclxyXG4gIHZhciBzY3JvbGxlckN1dE9mZiA9IDMwO1xyXG5cclxuICAvLyBSZXR1cm5lZCBvciB0aHJvd24gYnkgdmFyaW91cyBwcm90b2NvbHMgdG8gc2lnbmFsICdJJ20gbm90XHJcbiAgLy8gaGFuZGxpbmcgdGhpcycuXHJcbiAgdmFyIFBhc3MgPSBDb2RlTWlycm9yLlBhc3MgPSB7dG9TdHJpbmc6IGZ1bmN0aW9uKCl7cmV0dXJuIFwiQ29kZU1pcnJvci5QYXNzXCI7fX07XHJcblxyXG4gIC8vIFJldXNlZCBvcHRpb24gb2JqZWN0cyBmb3Igc2V0U2VsZWN0aW9uICYgZnJpZW5kc1xyXG4gIHZhciBzZWxfZG9udFNjcm9sbCA9IHtzY3JvbGw6IGZhbHNlfSwgc2VsX21vdXNlID0ge29yaWdpbjogXCIqbW91c2VcIn0sIHNlbF9tb3ZlID0ge29yaWdpbjogXCIrbW92ZVwifTtcclxuXHJcbiAgZnVuY3Rpb24gRGVsYXllZCgpIHt0aGlzLmlkID0gbnVsbDt9XHJcbiAgRGVsYXllZC5wcm90b3R5cGUuc2V0ID0gZnVuY3Rpb24obXMsIGYpIHtcclxuICAgIGNsZWFyVGltZW91dCh0aGlzLmlkKTtcclxuICAgIHRoaXMuaWQgPSBzZXRUaW1lb3V0KGYsIG1zKTtcclxuICB9O1xyXG5cclxuICAvLyBDb3VudHMgdGhlIGNvbHVtbiBvZmZzZXQgaW4gYSBzdHJpbmcsIHRha2luZyB0YWJzIGludG8gYWNjb3VudC5cclxuICAvLyBVc2VkIG1vc3RseSB0byBmaW5kIGluZGVudGF0aW9uLlxyXG4gIHZhciBjb3VudENvbHVtbiA9IENvZGVNaXJyb3IuY291bnRDb2x1bW4gPSBmdW5jdGlvbihzdHJpbmcsIGVuZCwgdGFiU2l6ZSwgc3RhcnRJbmRleCwgc3RhcnRWYWx1ZSkge1xyXG4gICAgaWYgKGVuZCA9PSBudWxsKSB7XHJcbiAgICAgIGVuZCA9IHN0cmluZy5zZWFyY2goL1teXFxzXFx1MDBhMF0vKTtcclxuICAgICAgaWYgKGVuZCA9PSAtMSkgZW5kID0gc3RyaW5nLmxlbmd0aDtcclxuICAgIH1cclxuICAgIGZvciAodmFyIGkgPSBzdGFydEluZGV4IHx8IDAsIG4gPSBzdGFydFZhbHVlIHx8IDA7Oykge1xyXG4gICAgICB2YXIgbmV4dFRhYiA9IHN0cmluZy5pbmRleE9mKFwiXFx0XCIsIGkpO1xyXG4gICAgICBpZiAobmV4dFRhYiA8IDAgfHwgbmV4dFRhYiA+PSBlbmQpXHJcbiAgICAgICAgcmV0dXJuIG4gKyAoZW5kIC0gaSk7XHJcbiAgICAgIG4gKz0gbmV4dFRhYiAtIGk7XHJcbiAgICAgIG4gKz0gdGFiU2l6ZSAtIChuICUgdGFiU2l6ZSk7XHJcbiAgICAgIGkgPSBuZXh0VGFiICsgMTtcclxuICAgIH1cclxuICB9O1xyXG5cclxuICAvLyBUaGUgaW52ZXJzZSBvZiBjb3VudENvbHVtbiAtLSBmaW5kIHRoZSBvZmZzZXQgdGhhdCBjb3JyZXNwb25kcyB0b1xyXG4gIC8vIGEgcGFydGljdWxhciBjb2x1bW4uXHJcbiAgZnVuY3Rpb24gZmluZENvbHVtbihzdHJpbmcsIGdvYWwsIHRhYlNpemUpIHtcclxuICAgIGZvciAodmFyIHBvcyA9IDAsIGNvbCA9IDA7Oykge1xyXG4gICAgICB2YXIgbmV4dFRhYiA9IHN0cmluZy5pbmRleE9mKFwiXFx0XCIsIHBvcyk7XHJcbiAgICAgIGlmIChuZXh0VGFiID09IC0xKSBuZXh0VGFiID0gc3RyaW5nLmxlbmd0aDtcclxuICAgICAgdmFyIHNraXBwZWQgPSBuZXh0VGFiIC0gcG9zO1xyXG4gICAgICBpZiAobmV4dFRhYiA9PSBzdHJpbmcubGVuZ3RoIHx8IGNvbCArIHNraXBwZWQgPj0gZ29hbClcclxuICAgICAgICByZXR1cm4gcG9zICsgTWF0aC5taW4oc2tpcHBlZCwgZ29hbCAtIGNvbCk7XHJcbiAgICAgIGNvbCArPSBuZXh0VGFiIC0gcG9zO1xyXG4gICAgICBjb2wgKz0gdGFiU2l6ZSAtIChjb2wgJSB0YWJTaXplKTtcclxuICAgICAgcG9zID0gbmV4dFRhYiArIDE7XHJcbiAgICAgIGlmIChjb2wgPj0gZ29hbCkgcmV0dXJuIHBvcztcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHZhciBzcGFjZVN0cnMgPSBbXCJcIl07XHJcbiAgZnVuY3Rpb24gc3BhY2VTdHIobikge1xyXG4gICAgd2hpbGUgKHNwYWNlU3Rycy5sZW5ndGggPD0gbilcclxuICAgICAgc3BhY2VTdHJzLnB1c2gobHN0KHNwYWNlU3RycykgKyBcIiBcIik7XHJcbiAgICByZXR1cm4gc3BhY2VTdHJzW25dO1xyXG4gIH1cclxuXHJcbiAgZnVuY3Rpb24gbHN0KGFycikgeyByZXR1cm4gYXJyW2Fyci5sZW5ndGgtMV07IH1cclxuXHJcbiAgdmFyIHNlbGVjdElucHV0ID0gZnVuY3Rpb24obm9kZSkgeyBub2RlLnNlbGVjdCgpOyB9O1xyXG4gIGlmIChpb3MpIC8vIE1vYmlsZSBTYWZhcmkgYXBwYXJlbnRseSBoYXMgYSBidWcgd2hlcmUgc2VsZWN0KCkgaXMgYnJva2VuLlxyXG4gICAgc2VsZWN0SW5wdXQgPSBmdW5jdGlvbihub2RlKSB7IG5vZGUuc2VsZWN0aW9uU3RhcnQgPSAwOyBub2RlLnNlbGVjdGlvbkVuZCA9IG5vZGUudmFsdWUubGVuZ3RoOyB9O1xyXG4gIGVsc2UgaWYgKGllKSAvLyBTdXBwcmVzcyBteXN0ZXJpb3VzIElFMTAgZXJyb3JzXHJcbiAgICBzZWxlY3RJbnB1dCA9IGZ1bmN0aW9uKG5vZGUpIHsgdHJ5IHsgbm9kZS5zZWxlY3QoKTsgfSBjYXRjaChfZSkge30gfTtcclxuXHJcbiAgZnVuY3Rpb24gaW5kZXhPZihhcnJheSwgZWx0KSB7XHJcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGFycmF5Lmxlbmd0aDsgKytpKVxyXG4gICAgICBpZiAoYXJyYXlbaV0gPT0gZWx0KSByZXR1cm4gaTtcclxuICAgIHJldHVybiAtMTtcclxuICB9XHJcbiAgaWYgKFtdLmluZGV4T2YpIGluZGV4T2YgPSBmdW5jdGlvbihhcnJheSwgZWx0KSB7IHJldHVybiBhcnJheS5pbmRleE9mKGVsdCk7IH07XHJcbiAgZnVuY3Rpb24gbWFwKGFycmF5LCBmKSB7XHJcbiAgICB2YXIgb3V0ID0gW107XHJcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGFycmF5Lmxlbmd0aDsgaSsrKSBvdXRbaV0gPSBmKGFycmF5W2ldLCBpKTtcclxuICAgIHJldHVybiBvdXQ7XHJcbiAgfVxyXG4gIGlmIChbXS5tYXApIG1hcCA9IGZ1bmN0aW9uKGFycmF5LCBmKSB7IHJldHVybiBhcnJheS5tYXAoZik7IH07XHJcblxyXG4gIGZ1bmN0aW9uIGNyZWF0ZU9iaihiYXNlLCBwcm9wcykge1xyXG4gICAgdmFyIGluc3Q7XHJcbiAgICBpZiAoT2JqZWN0LmNyZWF0ZSkge1xyXG4gICAgICBpbnN0ID0gT2JqZWN0LmNyZWF0ZShiYXNlKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHZhciBjdG9yID0gZnVuY3Rpb24oKSB7fTtcclxuICAgICAgY3Rvci5wcm90b3R5cGUgPSBiYXNlO1xyXG4gICAgICBpbnN0ID0gbmV3IGN0b3IoKTtcclxuICAgIH1cclxuICAgIGlmIChwcm9wcykgY29weU9iaihwcm9wcywgaW5zdCk7XHJcbiAgICByZXR1cm4gaW5zdDtcclxuICB9O1xyXG5cclxuICBmdW5jdGlvbiBjb3B5T2JqKG9iaiwgdGFyZ2V0LCBvdmVyd3JpdGUpIHtcclxuICAgIGlmICghdGFyZ2V0KSB0YXJnZXQgPSB7fTtcclxuICAgIGZvciAodmFyIHByb3AgaW4gb2JqKVxyXG4gICAgICBpZiAob2JqLmhhc093blByb3BlcnR5KHByb3ApICYmIChvdmVyd3JpdGUgIT09IGZhbHNlIHx8ICF0YXJnZXQuaGFzT3duUHJvcGVydHkocHJvcCkpKVxyXG4gICAgICAgIHRhcmdldFtwcm9wXSA9IG9ialtwcm9wXTtcclxuICAgIHJldHVybiB0YXJnZXQ7XHJcbiAgfVxyXG5cclxuICBmdW5jdGlvbiBiaW5kKGYpIHtcclxuICAgIHZhciBhcmdzID0gQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzLCAxKTtcclxuICAgIHJldHVybiBmdW5jdGlvbigpe3JldHVybiBmLmFwcGx5KG51bGwsIGFyZ3MpO307XHJcbiAgfVxyXG5cclxuICB2YXIgbm9uQVNDSUlTaW5nbGVDYXNlV29yZENoYXIgPSAvW1xcdTAwZGZcXHUwNTkwLVxcdTA1ZjRcXHUwNjAwLVxcdTA2ZmZcXHUzMDQwLVxcdTMwOWZcXHUzMGEwLVxcdTMwZmZcXHUzNDAwLVxcdTRkYjVcXHU0ZTAwLVxcdTlmY2NcXHVhYzAwLVxcdWQ3YWZdLztcclxuICB2YXIgaXNXb3JkQ2hhckJhc2ljID0gQ29kZU1pcnJvci5pc1dvcmRDaGFyID0gZnVuY3Rpb24oY2gpIHtcclxuICAgIHJldHVybiAvXFx3Ly50ZXN0KGNoKSB8fCBjaCA+IFwiXFx4ODBcIiAmJlxyXG4gICAgICAoY2gudG9VcHBlckNhc2UoKSAhPSBjaC50b0xvd2VyQ2FzZSgpIHx8IG5vbkFTQ0lJU2luZ2xlQ2FzZVdvcmRDaGFyLnRlc3QoY2gpKTtcclxuICB9O1xyXG4gIGZ1bmN0aW9uIGlzV29yZENoYXIoY2gsIGhlbHBlcikge1xyXG4gICAgaWYgKCFoZWxwZXIpIHJldHVybiBpc1dvcmRDaGFyQmFzaWMoY2gpO1xyXG4gICAgaWYgKGhlbHBlci5zb3VyY2UuaW5kZXhPZihcIlxcXFx3XCIpID4gLTEgJiYgaXNXb3JkQ2hhckJhc2ljKGNoKSkgcmV0dXJuIHRydWU7XHJcbiAgICByZXR1cm4gaGVscGVyLnRlc3QoY2gpO1xyXG4gIH1cclxuXHJcbiAgZnVuY3Rpb24gaXNFbXB0eShvYmopIHtcclxuICAgIGZvciAodmFyIG4gaW4gb2JqKSBpZiAob2JqLmhhc093blByb3BlcnR5KG4pICYmIG9ialtuXSkgcmV0dXJuIGZhbHNlO1xyXG4gICAgcmV0dXJuIHRydWU7XHJcbiAgfVxyXG5cclxuICAvLyBFeHRlbmRpbmcgdW5pY29kZSBjaGFyYWN0ZXJzLiBBIHNlcmllcyBvZiBhIG5vbi1leHRlbmRpbmcgY2hhciArXHJcbiAgLy8gYW55IG51bWJlciBvZiBleHRlbmRpbmcgY2hhcnMgaXMgdHJlYXRlZCBhcyBhIHNpbmdsZSB1bml0IGFzIGZhclxyXG4gIC8vIGFzIGVkaXRpbmcgYW5kIG1lYXN1cmluZyBpcyBjb25jZXJuZWQuIFRoaXMgaXMgbm90IGZ1bGx5IGNvcnJlY3QsXHJcbiAgLy8gc2luY2Ugc29tZSBzY3JpcHRzL2ZvbnRzL2Jyb3dzZXJzIGFsc28gdHJlYXQgb3RoZXIgY29uZmlndXJhdGlvbnNcclxuICAvLyBvZiBjb2RlIHBvaW50cyBhcyBhIGdyb3VwLlxyXG4gIHZhciBleHRlbmRpbmdDaGFycyA9IC9bXFx1MDMwMC1cXHUwMzZmXFx1MDQ4My1cXHUwNDg5XFx1MDU5MS1cXHUwNWJkXFx1MDViZlxcdTA1YzFcXHUwNWMyXFx1MDVjNFxcdTA1YzVcXHUwNWM3XFx1MDYxMC1cXHUwNjFhXFx1MDY0Yi1cXHUwNjVlXFx1MDY3MFxcdTA2ZDYtXFx1MDZkY1xcdTA2ZGUtXFx1MDZlNFxcdTA2ZTdcXHUwNmU4XFx1MDZlYS1cXHUwNmVkXFx1MDcxMVxcdTA3MzAtXFx1MDc0YVxcdTA3YTYtXFx1MDdiMFxcdTA3ZWItXFx1MDdmM1xcdTA4MTYtXFx1MDgxOVxcdTA4MWItXFx1MDgyM1xcdTA4MjUtXFx1MDgyN1xcdTA4MjktXFx1MDgyZFxcdTA5MDAtXFx1MDkwMlxcdTA5M2NcXHUwOTQxLVxcdTA5NDhcXHUwOTRkXFx1MDk1MS1cXHUwOTU1XFx1MDk2MlxcdTA5NjNcXHUwOTgxXFx1MDliY1xcdTA5YmVcXHUwOWMxLVxcdTA5YzRcXHUwOWNkXFx1MDlkN1xcdTA5ZTJcXHUwOWUzXFx1MGEwMVxcdTBhMDJcXHUwYTNjXFx1MGE0MVxcdTBhNDJcXHUwYTQ3XFx1MGE0OFxcdTBhNGItXFx1MGE0ZFxcdTBhNTFcXHUwYTcwXFx1MGE3MVxcdTBhNzVcXHUwYTgxXFx1MGE4MlxcdTBhYmNcXHUwYWMxLVxcdTBhYzVcXHUwYWM3XFx1MGFjOFxcdTBhY2RcXHUwYWUyXFx1MGFlM1xcdTBiMDFcXHUwYjNjXFx1MGIzZVxcdTBiM2ZcXHUwYjQxLVxcdTBiNDRcXHUwYjRkXFx1MGI1NlxcdTBiNTdcXHUwYjYyXFx1MGI2M1xcdTBiODJcXHUwYmJlXFx1MGJjMFxcdTBiY2RcXHUwYmQ3XFx1MGMzZS1cXHUwYzQwXFx1MGM0Ni1cXHUwYzQ4XFx1MGM0YS1cXHUwYzRkXFx1MGM1NVxcdTBjNTZcXHUwYzYyXFx1MGM2M1xcdTBjYmNcXHUwY2JmXFx1MGNjMlxcdTBjYzZcXHUwY2NjXFx1MGNjZFxcdTBjZDVcXHUwY2Q2XFx1MGNlMlxcdTBjZTNcXHUwZDNlXFx1MGQ0MS1cXHUwZDQ0XFx1MGQ0ZFxcdTBkNTdcXHUwZDYyXFx1MGQ2M1xcdTBkY2FcXHUwZGNmXFx1MGRkMi1cXHUwZGQ0XFx1MGRkNlxcdTBkZGZcXHUwZTMxXFx1MGUzNC1cXHUwZTNhXFx1MGU0Ny1cXHUwZTRlXFx1MGViMVxcdTBlYjQtXFx1MGViOVxcdTBlYmJcXHUwZWJjXFx1MGVjOC1cXHUwZWNkXFx1MGYxOFxcdTBmMTlcXHUwZjM1XFx1MGYzN1xcdTBmMzlcXHUwZjcxLVxcdTBmN2VcXHUwZjgwLVxcdTBmODRcXHUwZjg2XFx1MGY4N1xcdTBmOTAtXFx1MGY5N1xcdTBmOTktXFx1MGZiY1xcdTBmYzZcXHUxMDJkLVxcdTEwMzBcXHUxMDMyLVxcdTEwMzdcXHUxMDM5XFx1MTAzYVxcdTEwM2RcXHUxMDNlXFx1MTA1OFxcdTEwNTlcXHUxMDVlLVxcdTEwNjBcXHUxMDcxLVxcdTEwNzRcXHUxMDgyXFx1MTA4NVxcdTEwODZcXHUxMDhkXFx1MTA5ZFxcdTEzNWZcXHUxNzEyLVxcdTE3MTRcXHUxNzMyLVxcdTE3MzRcXHUxNzUyXFx1MTc1M1xcdTE3NzJcXHUxNzczXFx1MTdiNy1cXHUxN2JkXFx1MTdjNlxcdTE3YzktXFx1MTdkM1xcdTE3ZGRcXHUxODBiLVxcdTE4MGRcXHUxOGE5XFx1MTkyMC1cXHUxOTIyXFx1MTkyN1xcdTE5MjhcXHUxOTMyXFx1MTkzOS1cXHUxOTNiXFx1MWExN1xcdTFhMThcXHUxYTU2XFx1MWE1OC1cXHUxYTVlXFx1MWE2MFxcdTFhNjJcXHUxYTY1LVxcdTFhNmNcXHUxYTczLVxcdTFhN2NcXHUxYTdmXFx1MWIwMC1cXHUxYjAzXFx1MWIzNFxcdTFiMzYtXFx1MWIzYVxcdTFiM2NcXHUxYjQyXFx1MWI2Yi1cXHUxYjczXFx1MWI4MFxcdTFiODFcXHUxYmEyLVxcdTFiYTVcXHUxYmE4XFx1MWJhOVxcdTFjMmMtXFx1MWMzM1xcdTFjMzZcXHUxYzM3XFx1MWNkMC1cXHUxY2QyXFx1MWNkNC1cXHUxY2UwXFx1MWNlMi1cXHUxY2U4XFx1MWNlZFxcdTFkYzAtXFx1MWRlNlxcdTFkZmQtXFx1MWRmZlxcdTIwMGNcXHUyMDBkXFx1MjBkMC1cXHUyMGYwXFx1MmNlZi1cXHUyY2YxXFx1MmRlMC1cXHUyZGZmXFx1MzAyYS1cXHUzMDJmXFx1MzA5OVxcdTMwOWFcXHVhNjZmLVxcdWE2NzJcXHVhNjdjXFx1YTY3ZFxcdWE2ZjBcXHVhNmYxXFx1YTgwMlxcdWE4MDZcXHVhODBiXFx1YTgyNVxcdWE4MjZcXHVhOGM0XFx1YThlMC1cXHVhOGYxXFx1YTkyNi1cXHVhOTJkXFx1YTk0Ny1cXHVhOTUxXFx1YTk4MC1cXHVhOTgyXFx1YTliM1xcdWE5YjYtXFx1YTliOVxcdWE5YmNcXHVhYTI5LVxcdWFhMmVcXHVhYTMxXFx1YWEzMlxcdWFhMzVcXHVhYTM2XFx1YWE0M1xcdWFhNGNcXHVhYWIwXFx1YWFiMi1cXHVhYWI0XFx1YWFiN1xcdWFhYjhcXHVhYWJlXFx1YWFiZlxcdWFhYzFcXHVhYmU1XFx1YWJlOFxcdWFiZWRcXHVkYzAwLVxcdWRmZmZcXHVmYjFlXFx1ZmUwMC1cXHVmZTBmXFx1ZmUyMC1cXHVmZTI2XFx1ZmY5ZVxcdWZmOWZdLztcclxuICBmdW5jdGlvbiBpc0V4dGVuZGluZ0NoYXIoY2gpIHsgcmV0dXJuIGNoLmNoYXJDb2RlQXQoMCkgPj0gNzY4ICYmIGV4dGVuZGluZ0NoYXJzLnRlc3QoY2gpOyB9XHJcblxyXG4gIC8vIERPTSBVVElMSVRJRVNcclxuXHJcbiAgZnVuY3Rpb24gZWx0KHRhZywgY29udGVudCwgY2xhc3NOYW1lLCBzdHlsZSkge1xyXG4gICAgdmFyIGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KHRhZyk7XHJcbiAgICBpZiAoY2xhc3NOYW1lKSBlLmNsYXNzTmFtZSA9IGNsYXNzTmFtZTtcclxuICAgIGlmIChzdHlsZSkgZS5zdHlsZS5jc3NUZXh0ID0gc3R5bGU7XHJcbiAgICBpZiAodHlwZW9mIGNvbnRlbnQgPT0gXCJzdHJpbmdcIikgZS5hcHBlbmRDaGlsZChkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShjb250ZW50KSk7XHJcbiAgICBlbHNlIGlmIChjb250ZW50KSBmb3IgKHZhciBpID0gMDsgaSA8IGNvbnRlbnQubGVuZ3RoOyArK2kpIGUuYXBwZW5kQ2hpbGQoY29udGVudFtpXSk7XHJcbiAgICByZXR1cm4gZTtcclxuICB9XHJcblxyXG4gIHZhciByYW5nZTtcclxuICBpZiAoZG9jdW1lbnQuY3JlYXRlUmFuZ2UpIHJhbmdlID0gZnVuY3Rpb24obm9kZSwgc3RhcnQsIGVuZCkge1xyXG4gICAgdmFyIHIgPSBkb2N1bWVudC5jcmVhdGVSYW5nZSgpO1xyXG4gICAgci5zZXRFbmQobm9kZSwgZW5kKTtcclxuICAgIHIuc2V0U3RhcnQobm9kZSwgc3RhcnQpO1xyXG4gICAgcmV0dXJuIHI7XHJcbiAgfTtcclxuICBlbHNlIHJhbmdlID0gZnVuY3Rpb24obm9kZSwgc3RhcnQsIGVuZCkge1xyXG4gICAgdmFyIHIgPSBkb2N1bWVudC5ib2R5LmNyZWF0ZVRleHRSYW5nZSgpO1xyXG4gICAgci5tb3ZlVG9FbGVtZW50VGV4dChub2RlLnBhcmVudE5vZGUpO1xyXG4gICAgci5jb2xsYXBzZSh0cnVlKTtcclxuICAgIHIubW92ZUVuZChcImNoYXJhY3RlclwiLCBlbmQpO1xyXG4gICAgci5tb3ZlU3RhcnQoXCJjaGFyYWN0ZXJcIiwgc3RhcnQpO1xyXG4gICAgcmV0dXJuIHI7XHJcbiAgfTtcclxuXHJcbiAgZnVuY3Rpb24gcmVtb3ZlQ2hpbGRyZW4oZSkge1xyXG4gICAgZm9yICh2YXIgY291bnQgPSBlLmNoaWxkTm9kZXMubGVuZ3RoOyBjb3VudCA+IDA7IC0tY291bnQpXHJcbiAgICAgIGUucmVtb3ZlQ2hpbGQoZS5maXJzdENoaWxkKTtcclxuICAgIHJldHVybiBlO1xyXG4gIH1cclxuXHJcbiAgZnVuY3Rpb24gcmVtb3ZlQ2hpbGRyZW5BbmRBZGQocGFyZW50LCBlKSB7XHJcbiAgICByZXR1cm4gcmVtb3ZlQ2hpbGRyZW4ocGFyZW50KS5hcHBlbmRDaGlsZChlKTtcclxuICB9XHJcblxyXG4gIGZ1bmN0aW9uIGNvbnRhaW5zKHBhcmVudCwgY2hpbGQpIHtcclxuICAgIGlmIChwYXJlbnQuY29udGFpbnMpXHJcbiAgICAgIHJldHVybiBwYXJlbnQuY29udGFpbnMoY2hpbGQpO1xyXG4gICAgd2hpbGUgKGNoaWxkID0gY2hpbGQucGFyZW50Tm9kZSlcclxuICAgICAgaWYgKGNoaWxkID09IHBhcmVudCkgcmV0dXJuIHRydWU7XHJcbiAgfVxyXG5cclxuICBmdW5jdGlvbiBhY3RpdmVFbHQoKSB7IHJldHVybiBkb2N1bWVudC5hY3RpdmVFbGVtZW50OyB9XHJcbiAgLy8gT2xkZXIgdmVyc2lvbnMgb2YgSUUgdGhyb3dzIHVuc3BlY2lmaWVkIGVycm9yIHdoZW4gdG91Y2hpbmdcclxuICAvLyBkb2N1bWVudC5hY3RpdmVFbGVtZW50IGluIHNvbWUgY2FzZXMgKGR1cmluZyBsb2FkaW5nLCBpbiBpZnJhbWUpXHJcbiAgaWYgKGllICYmIGllX3ZlcnNpb24gPCAxMSkgYWN0aXZlRWx0ID0gZnVuY3Rpb24oKSB7XHJcbiAgICB0cnkgeyByZXR1cm4gZG9jdW1lbnQuYWN0aXZlRWxlbWVudDsgfVxyXG4gICAgY2F0Y2goZSkgeyByZXR1cm4gZG9jdW1lbnQuYm9keTsgfVxyXG4gIH07XHJcblxyXG4gIGZ1bmN0aW9uIGNsYXNzVGVzdChjbHMpIHsgcmV0dXJuIG5ldyBSZWdFeHAoXCJcXFxcYlwiICsgY2xzICsgXCJcXFxcYlxcXFxzKlwiKTsgfVxyXG4gIGZ1bmN0aW9uIHJtQ2xhc3Mobm9kZSwgY2xzKSB7XHJcbiAgICB2YXIgdGVzdCA9IGNsYXNzVGVzdChjbHMpO1xyXG4gICAgaWYgKHRlc3QudGVzdChub2RlLmNsYXNzTmFtZSkpIG5vZGUuY2xhc3NOYW1lID0gbm9kZS5jbGFzc05hbWUucmVwbGFjZSh0ZXN0LCBcIlwiKTtcclxuICB9XHJcbiAgZnVuY3Rpb24gYWRkQ2xhc3Mobm9kZSwgY2xzKSB7XHJcbiAgICBpZiAoIWNsYXNzVGVzdChjbHMpLnRlc3Qobm9kZS5jbGFzc05hbWUpKSBub2RlLmNsYXNzTmFtZSArPSBcIiBcIiArIGNscztcclxuICB9XHJcbiAgZnVuY3Rpb24gam9pbkNsYXNzZXMoYSwgYikge1xyXG4gICAgdmFyIGFzID0gYS5zcGxpdChcIiBcIik7XHJcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGFzLmxlbmd0aDsgaSsrKVxyXG4gICAgICBpZiAoYXNbaV0gJiYgIWNsYXNzVGVzdChhc1tpXSkudGVzdChiKSkgYiArPSBcIiBcIiArIGFzW2ldO1xyXG4gICAgcmV0dXJuIGI7XHJcbiAgfVxyXG5cclxuICAvLyBXSU5ET1ctV0lERSBFVkVOVFNcclxuXHJcbiAgLy8gVGhlc2UgbXVzdCBiZSBoYW5kbGVkIGNhcmVmdWxseSwgYmVjYXVzZSBuYWl2ZWx5IHJlZ2lzdGVyaW5nIGFcclxuICAvLyBoYW5kbGVyIGZvciBlYWNoIGVkaXRvciB3aWxsIGNhdXNlIHRoZSBlZGl0b3JzIHRvIG5ldmVyIGJlXHJcbiAgLy8gZ2FyYmFnZSBjb2xsZWN0ZWQuXHJcblxyXG4gIGZ1bmN0aW9uIGZvckVhY2hDb2RlTWlycm9yKGYpIHtcclxuICAgIGlmICghZG9jdW1lbnQuYm9keS5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKSByZXR1cm47XHJcbiAgICB2YXIgYnlDbGFzcyA9IGRvY3VtZW50LmJvZHkuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZShcIkNvZGVNaXJyb3JcIik7XHJcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGJ5Q2xhc3MubGVuZ3RoOyBpKyspIHtcclxuICAgICAgdmFyIGNtID0gYnlDbGFzc1tpXS5Db2RlTWlycm9yO1xyXG4gICAgICBpZiAoY20pIGYoY20pO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgdmFyIGdsb2JhbHNSZWdpc3RlcmVkID0gZmFsc2U7XHJcbiAgZnVuY3Rpb24gZW5zdXJlR2xvYmFsSGFuZGxlcnMoKSB7XHJcbiAgICBpZiAoZ2xvYmFsc1JlZ2lzdGVyZWQpIHJldHVybjtcclxuICAgIHJlZ2lzdGVyR2xvYmFsSGFuZGxlcnMoKTtcclxuICAgIGdsb2JhbHNSZWdpc3RlcmVkID0gdHJ1ZTtcclxuICB9XHJcbiAgZnVuY3Rpb24gcmVnaXN0ZXJHbG9iYWxIYW5kbGVycygpIHtcclxuICAgIC8vIFdoZW4gdGhlIHdpbmRvdyByZXNpemVzLCB3ZSBuZWVkIHRvIHJlZnJlc2ggYWN0aXZlIGVkaXRvcnMuXHJcbiAgICB2YXIgcmVzaXplVGltZXI7XHJcbiAgICBvbih3aW5kb3csIFwicmVzaXplXCIsIGZ1bmN0aW9uKCkge1xyXG4gICAgICBpZiAocmVzaXplVGltZXIgPT0gbnVsbCkgcmVzaXplVGltZXIgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIHJlc2l6ZVRpbWVyID0gbnVsbDtcclxuICAgICAgICBrbm93blNjcm9sbGJhcldpZHRoID0gbnVsbDtcclxuICAgICAgICBmb3JFYWNoQ29kZU1pcnJvcihvblJlc2l6ZSk7XHJcbiAgICAgIH0sIDEwMCk7XHJcbiAgICB9KTtcclxuICAgIC8vIFdoZW4gdGhlIHdpbmRvdyBsb3NlcyBmb2N1cywgd2Ugd2FudCB0byBzaG93IHRoZSBlZGl0b3IgYXMgYmx1cnJlZFxyXG4gICAgb24od2luZG93LCBcImJsdXJcIiwgZnVuY3Rpb24oKSB7XHJcbiAgICAgIGZvckVhY2hDb2RlTWlycm9yKG9uQmx1cik7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIC8vIEZFQVRVUkUgREVURUNUSU9OXHJcblxyXG4gIC8vIERldGVjdCBkcmFnLWFuZC1kcm9wXHJcbiAgdmFyIGRyYWdBbmREcm9wID0gZnVuY3Rpb24oKSB7XHJcbiAgICAvLyBUaGVyZSBpcyAqc29tZSoga2luZCBvZiBkcmFnLWFuZC1kcm9wIHN1cHBvcnQgaW4gSUU2LTgsIGJ1dCBJXHJcbiAgICAvLyBjb3VsZG4ndCBnZXQgaXQgdG8gd29yayB5ZXQuXHJcbiAgICBpZiAoaWUgJiYgaWVfdmVyc2lvbiA8IDkpIHJldHVybiBmYWxzZTtcclxuICAgIHZhciBkaXYgPSBlbHQoJ2RpdicpO1xyXG4gICAgcmV0dXJuIFwiZHJhZ2dhYmxlXCIgaW4gZGl2IHx8IFwiZHJhZ0Ryb3BcIiBpbiBkaXY7XHJcbiAgfSgpO1xyXG5cclxuICB2YXIga25vd25TY3JvbGxiYXJXaWR0aDtcclxuICBmdW5jdGlvbiBzY3JvbGxiYXJXaWR0aChtZWFzdXJlKSB7XHJcbiAgICBpZiAoa25vd25TY3JvbGxiYXJXaWR0aCAhPSBudWxsKSByZXR1cm4ga25vd25TY3JvbGxiYXJXaWR0aDtcclxuICAgIHZhciB0ZXN0ID0gZWx0KFwiZGl2XCIsIG51bGwsIG51bGwsIFwid2lkdGg6IDUwcHg7IGhlaWdodDogNTBweDsgb3ZlcmZsb3cteDogc2Nyb2xsXCIpO1xyXG4gICAgcmVtb3ZlQ2hpbGRyZW5BbmRBZGQobWVhc3VyZSwgdGVzdCk7XHJcbiAgICBpZiAodGVzdC5vZmZzZXRXaWR0aClcclxuICAgICAga25vd25TY3JvbGxiYXJXaWR0aCA9IHRlc3Qub2Zmc2V0SGVpZ2h0IC0gdGVzdC5jbGllbnRIZWlnaHQ7XHJcbiAgICByZXR1cm4ga25vd25TY3JvbGxiYXJXaWR0aCB8fCAwO1xyXG4gIH1cclxuXHJcbiAgdmFyIHp3c3BTdXBwb3J0ZWQ7XHJcbiAgZnVuY3Rpb24gemVyb1dpZHRoRWxlbWVudChtZWFzdXJlKSB7XHJcbiAgICBpZiAoendzcFN1cHBvcnRlZCA9PSBudWxsKSB7XHJcbiAgICAgIHZhciB0ZXN0ID0gZWx0KFwic3BhblwiLCBcIlxcdTIwMGJcIik7XHJcbiAgICAgIHJlbW92ZUNoaWxkcmVuQW5kQWRkKG1lYXN1cmUsIGVsdChcInNwYW5cIiwgW3Rlc3QsIGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKFwieFwiKV0pKTtcclxuICAgICAgaWYgKG1lYXN1cmUuZmlyc3RDaGlsZC5vZmZzZXRIZWlnaHQgIT0gMClcclxuICAgICAgICB6d3NwU3VwcG9ydGVkID0gdGVzdC5vZmZzZXRXaWR0aCA8PSAxICYmIHRlc3Qub2Zmc2V0SGVpZ2h0ID4gMiAmJiAhKGllICYmIGllX3ZlcnNpb24gPCA4KTtcclxuICAgIH1cclxuICAgIGlmICh6d3NwU3VwcG9ydGVkKSByZXR1cm4gZWx0KFwic3BhblwiLCBcIlxcdTIwMGJcIik7XHJcbiAgICBlbHNlIHJldHVybiBlbHQoXCJzcGFuXCIsIFwiXFx1MDBhMFwiLCBudWxsLCBcImRpc3BsYXk6IGlubGluZS1ibG9jazsgd2lkdGg6IDFweDsgbWFyZ2luLXJpZ2h0OiAtMXB4XCIpO1xyXG4gIH1cclxuXHJcbiAgLy8gRmVhdHVyZS1kZXRlY3QgSUUncyBjcnVtbXkgY2xpZW50IHJlY3QgcmVwb3J0aW5nIGZvciBiaWRpIHRleHRcclxuICB2YXIgYmFkQmlkaVJlY3RzO1xyXG4gIGZ1bmN0aW9uIGhhc0JhZEJpZGlSZWN0cyhtZWFzdXJlKSB7XHJcbiAgICBpZiAoYmFkQmlkaVJlY3RzICE9IG51bGwpIHJldHVybiBiYWRCaWRpUmVjdHM7XHJcbiAgICB2YXIgdHh0ID0gcmVtb3ZlQ2hpbGRyZW5BbmRBZGQobWVhc3VyZSwgZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoXCJBXFx1MDYyZUFcIikpO1xyXG4gICAgdmFyIHIwID0gcmFuZ2UodHh0LCAwLCAxKS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcclxuICAgIGlmICghcjAgfHwgcjAubGVmdCA9PSByMC5yaWdodCkgcmV0dXJuIGZhbHNlOyAvLyBTYWZhcmkgcmV0dXJucyBudWxsIGluIHNvbWUgY2FzZXMgKCMyNzgwKVxyXG4gICAgdmFyIHIxID0gcmFuZ2UodHh0LCAxLCAyKS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcclxuICAgIHJldHVybiBiYWRCaWRpUmVjdHMgPSAocjEucmlnaHQgLSByMC5yaWdodCA8IDMpO1xyXG4gIH1cclxuXHJcbiAgLy8gU2VlIGlmIFwiXCIuc3BsaXQgaXMgdGhlIGJyb2tlbiBJRSB2ZXJzaW9uLCBpZiBzbywgcHJvdmlkZSBhblxyXG4gIC8vIGFsdGVybmF0aXZlIHdheSB0byBzcGxpdCBsaW5lcy5cclxuICB2YXIgc3BsaXRMaW5lcyA9IENvZGVNaXJyb3Iuc3BsaXRMaW5lcyA9IFwiXFxuXFxuYlwiLnNwbGl0KC9cXG4vKS5sZW5ndGggIT0gMyA/IGZ1bmN0aW9uKHN0cmluZykge1xyXG4gICAgdmFyIHBvcyA9IDAsIHJlc3VsdCA9IFtdLCBsID0gc3RyaW5nLmxlbmd0aDtcclxuICAgIHdoaWxlIChwb3MgPD0gbCkge1xyXG4gICAgICB2YXIgbmwgPSBzdHJpbmcuaW5kZXhPZihcIlxcblwiLCBwb3MpO1xyXG4gICAgICBpZiAobmwgPT0gLTEpIG5sID0gc3RyaW5nLmxlbmd0aDtcclxuICAgICAgdmFyIGxpbmUgPSBzdHJpbmcuc2xpY2UocG9zLCBzdHJpbmcuY2hhckF0KG5sIC0gMSkgPT0gXCJcXHJcIiA/IG5sIC0gMSA6IG5sKTtcclxuICAgICAgdmFyIHJ0ID0gbGluZS5pbmRleE9mKFwiXFxyXCIpO1xyXG4gICAgICBpZiAocnQgIT0gLTEpIHtcclxuICAgICAgICByZXN1bHQucHVzaChsaW5lLnNsaWNlKDAsIHJ0KSk7XHJcbiAgICAgICAgcG9zICs9IHJ0ICsgMTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICByZXN1bHQucHVzaChsaW5lKTtcclxuICAgICAgICBwb3MgPSBubCArIDE7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIHJldHVybiByZXN1bHQ7XHJcbiAgfSA6IGZ1bmN0aW9uKHN0cmluZyl7cmV0dXJuIHN0cmluZy5zcGxpdCgvXFxyXFxuP3xcXG4vKTt9O1xyXG5cclxuICB2YXIgaGFzU2VsZWN0aW9uID0gd2luZG93LmdldFNlbGVjdGlvbiA/IGZ1bmN0aW9uKHRlKSB7XHJcbiAgICB0cnkgeyByZXR1cm4gdGUuc2VsZWN0aW9uU3RhcnQgIT0gdGUuc2VsZWN0aW9uRW5kOyB9XHJcbiAgICBjYXRjaChlKSB7IHJldHVybiBmYWxzZTsgfVxyXG4gIH0gOiBmdW5jdGlvbih0ZSkge1xyXG4gICAgdHJ5IHt2YXIgcmFuZ2UgPSB0ZS5vd25lckRvY3VtZW50LnNlbGVjdGlvbi5jcmVhdGVSYW5nZSgpO31cclxuICAgIGNhdGNoKGUpIHt9XHJcbiAgICBpZiAoIXJhbmdlIHx8IHJhbmdlLnBhcmVudEVsZW1lbnQoKSAhPSB0ZSkgcmV0dXJuIGZhbHNlO1xyXG4gICAgcmV0dXJuIHJhbmdlLmNvbXBhcmVFbmRQb2ludHMoXCJTdGFydFRvRW5kXCIsIHJhbmdlKSAhPSAwO1xyXG4gIH07XHJcblxyXG4gIHZhciBoYXNDb3B5RXZlbnQgPSAoZnVuY3Rpb24oKSB7XHJcbiAgICB2YXIgZSA9IGVsdChcImRpdlwiKTtcclxuICAgIGlmIChcIm9uY29weVwiIGluIGUpIHJldHVybiB0cnVlO1xyXG4gICAgZS5zZXRBdHRyaWJ1dGUoXCJvbmNvcHlcIiwgXCJyZXR1cm47XCIpO1xyXG4gICAgcmV0dXJuIHR5cGVvZiBlLm9uY29weSA9PSBcImZ1bmN0aW9uXCI7XHJcbiAgfSkoKTtcclxuXHJcbiAgdmFyIGJhZFpvb21lZFJlY3RzID0gbnVsbDtcclxuICBmdW5jdGlvbiBoYXNCYWRab29tZWRSZWN0cyhtZWFzdXJlKSB7XHJcbiAgICBpZiAoYmFkWm9vbWVkUmVjdHMgIT0gbnVsbCkgcmV0dXJuIGJhZFpvb21lZFJlY3RzO1xyXG4gICAgdmFyIG5vZGUgPSByZW1vdmVDaGlsZHJlbkFuZEFkZChtZWFzdXJlLCBlbHQoXCJzcGFuXCIsIFwieFwiKSk7XHJcbiAgICB2YXIgbm9ybWFsID0gbm9kZS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcclxuICAgIHZhciBmcm9tUmFuZ2UgPSByYW5nZShub2RlLCAwLCAxKS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcclxuICAgIHJldHVybiBiYWRab29tZWRSZWN0cyA9IE1hdGguYWJzKG5vcm1hbC5sZWZ0IC0gZnJvbVJhbmdlLmxlZnQpID4gMTtcclxuICB9XHJcblxyXG4gIC8vIEtFWSBOQU1FU1xyXG5cclxuICB2YXIga2V5TmFtZXMgPSB7MzogXCJFbnRlclwiLCA4OiBcIkJhY2tzcGFjZVwiLCA5OiBcIlRhYlwiLCAxMzogXCJFbnRlclwiLCAxNjogXCJTaGlmdFwiLCAxNzogXCJDdHJsXCIsIDE4OiBcIkFsdFwiLFxyXG4gICAgICAgICAgICAgICAgICAxOTogXCJQYXVzZVwiLCAyMDogXCJDYXBzTG9ja1wiLCAyNzogXCJFc2NcIiwgMzI6IFwiU3BhY2VcIiwgMzM6IFwiUGFnZVVwXCIsIDM0OiBcIlBhZ2VEb3duXCIsIDM1OiBcIkVuZFwiLFxyXG4gICAgICAgICAgICAgICAgICAzNjogXCJIb21lXCIsIDM3OiBcIkxlZnRcIiwgMzg6IFwiVXBcIiwgMzk6IFwiUmlnaHRcIiwgNDA6IFwiRG93blwiLCA0NDogXCJQcmludFNjcm5cIiwgNDU6IFwiSW5zZXJ0XCIsXHJcbiAgICAgICAgICAgICAgICAgIDQ2OiBcIkRlbGV0ZVwiLCA1OTogXCI7XCIsIDYxOiBcIj1cIiwgOTE6IFwiTW9kXCIsIDkyOiBcIk1vZFwiLCA5MzogXCJNb2RcIiwgMTA3OiBcIj1cIiwgMTA5OiBcIi1cIiwgMTI3OiBcIkRlbGV0ZVwiLFxyXG4gICAgICAgICAgICAgICAgICAxNzM6IFwiLVwiLCAxODY6IFwiO1wiLCAxODc6IFwiPVwiLCAxODg6IFwiLFwiLCAxODk6IFwiLVwiLCAxOTA6IFwiLlwiLCAxOTE6IFwiL1wiLCAxOTI6IFwiYFwiLCAyMTk6IFwiW1wiLCAyMjA6IFwiXFxcXFwiLFxyXG4gICAgICAgICAgICAgICAgICAyMjE6IFwiXVwiLCAyMjI6IFwiJ1wiLCA2MzIzMjogXCJVcFwiLCA2MzIzMzogXCJEb3duXCIsIDYzMjM0OiBcIkxlZnRcIiwgNjMyMzU6IFwiUmlnaHRcIiwgNjMyNzI6IFwiRGVsZXRlXCIsXHJcbiAgICAgICAgICAgICAgICAgIDYzMjczOiBcIkhvbWVcIiwgNjMyNzU6IFwiRW5kXCIsIDYzMjc2OiBcIlBhZ2VVcFwiLCA2MzI3NzogXCJQYWdlRG93blwiLCA2MzMwMjogXCJJbnNlcnRcIn07XHJcbiAgQ29kZU1pcnJvci5rZXlOYW1lcyA9IGtleU5hbWVzO1xyXG4gIChmdW5jdGlvbigpIHtcclxuICAgIC8vIE51bWJlciBrZXlzXHJcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IDEwOyBpKyspIGtleU5hbWVzW2kgKyA0OF0gPSBrZXlOYW1lc1tpICsgOTZdID0gU3RyaW5nKGkpO1xyXG4gICAgLy8gQWxwaGFiZXRpYyBrZXlzXHJcbiAgICBmb3IgKHZhciBpID0gNjU7IGkgPD0gOTA7IGkrKykga2V5TmFtZXNbaV0gPSBTdHJpbmcuZnJvbUNoYXJDb2RlKGkpO1xyXG4gICAgLy8gRnVuY3Rpb24ga2V5c1xyXG4gICAgZm9yICh2YXIgaSA9IDE7IGkgPD0gMTI7IGkrKykga2V5TmFtZXNbaSArIDExMV0gPSBrZXlOYW1lc1tpICsgNjMyMzVdID0gXCJGXCIgKyBpO1xyXG4gIH0pKCk7XHJcblxyXG4gIC8vIEJJREkgSEVMUEVSU1xyXG5cclxuICBmdW5jdGlvbiBpdGVyYXRlQmlkaVNlY3Rpb25zKG9yZGVyLCBmcm9tLCB0bywgZikge1xyXG4gICAgaWYgKCFvcmRlcikgcmV0dXJuIGYoZnJvbSwgdG8sIFwibHRyXCIpO1xyXG4gICAgdmFyIGZvdW5kID0gZmFsc2U7XHJcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IG9yZGVyLmxlbmd0aDsgKytpKSB7XHJcbiAgICAgIHZhciBwYXJ0ID0gb3JkZXJbaV07XHJcbiAgICAgIGlmIChwYXJ0LmZyb20gPCB0byAmJiBwYXJ0LnRvID4gZnJvbSB8fCBmcm9tID09IHRvICYmIHBhcnQudG8gPT0gZnJvbSkge1xyXG4gICAgICAgIGYoTWF0aC5tYXgocGFydC5mcm9tLCBmcm9tKSwgTWF0aC5taW4ocGFydC50bywgdG8pLCBwYXJ0LmxldmVsID09IDEgPyBcInJ0bFwiIDogXCJsdHJcIik7XHJcbiAgICAgICAgZm91bmQgPSB0cnVlO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICBpZiAoIWZvdW5kKSBmKGZyb20sIHRvLCBcImx0clwiKTtcclxuICB9XHJcblxyXG4gIGZ1bmN0aW9uIGJpZGlMZWZ0KHBhcnQpIHsgcmV0dXJuIHBhcnQubGV2ZWwgJSAyID8gcGFydC50byA6IHBhcnQuZnJvbTsgfVxyXG4gIGZ1bmN0aW9uIGJpZGlSaWdodChwYXJ0KSB7IHJldHVybiBwYXJ0LmxldmVsICUgMiA/IHBhcnQuZnJvbSA6IHBhcnQudG87IH1cclxuXHJcbiAgZnVuY3Rpb24gbGluZUxlZnQobGluZSkgeyB2YXIgb3JkZXIgPSBnZXRPcmRlcihsaW5lKTsgcmV0dXJuIG9yZGVyID8gYmlkaUxlZnQob3JkZXJbMF0pIDogMDsgfVxyXG4gIGZ1bmN0aW9uIGxpbmVSaWdodChsaW5lKSB7XHJcbiAgICB2YXIgb3JkZXIgPSBnZXRPcmRlcihsaW5lKTtcclxuICAgIGlmICghb3JkZXIpIHJldHVybiBsaW5lLnRleHQubGVuZ3RoO1xyXG4gICAgcmV0dXJuIGJpZGlSaWdodChsc3Qob3JkZXIpKTtcclxuICB9XHJcblxyXG4gIGZ1bmN0aW9uIGxpbmVTdGFydChjbSwgbGluZU4pIHtcclxuICAgIHZhciBsaW5lID0gZ2V0TGluZShjbS5kb2MsIGxpbmVOKTtcclxuICAgIHZhciB2aXN1YWwgPSB2aXN1YWxMaW5lKGxpbmUpO1xyXG4gICAgaWYgKHZpc3VhbCAhPSBsaW5lKSBsaW5lTiA9IGxpbmVObyh2aXN1YWwpO1xyXG4gICAgdmFyIG9yZGVyID0gZ2V0T3JkZXIodmlzdWFsKTtcclxuICAgIHZhciBjaCA9ICFvcmRlciA/IDAgOiBvcmRlclswXS5sZXZlbCAlIDIgPyBsaW5lUmlnaHQodmlzdWFsKSA6IGxpbmVMZWZ0KHZpc3VhbCk7XHJcbiAgICByZXR1cm4gUG9zKGxpbmVOLCBjaCk7XHJcbiAgfVxyXG4gIGZ1bmN0aW9uIGxpbmVFbmQoY20sIGxpbmVOKSB7XHJcbiAgICB2YXIgbWVyZ2VkLCBsaW5lID0gZ2V0TGluZShjbS5kb2MsIGxpbmVOKTtcclxuICAgIHdoaWxlIChtZXJnZWQgPSBjb2xsYXBzZWRTcGFuQXRFbmQobGluZSkpIHtcclxuICAgICAgbGluZSA9IG1lcmdlZC5maW5kKDEsIHRydWUpLmxpbmU7XHJcbiAgICAgIGxpbmVOID0gbnVsbDtcclxuICAgIH1cclxuICAgIHZhciBvcmRlciA9IGdldE9yZGVyKGxpbmUpO1xyXG4gICAgdmFyIGNoID0gIW9yZGVyID8gbGluZS50ZXh0Lmxlbmd0aCA6IG9yZGVyWzBdLmxldmVsICUgMiA/IGxpbmVMZWZ0KGxpbmUpIDogbGluZVJpZ2h0KGxpbmUpO1xyXG4gICAgcmV0dXJuIFBvcyhsaW5lTiA9PSBudWxsID8gbGluZU5vKGxpbmUpIDogbGluZU4sIGNoKTtcclxuICB9XHJcbiAgZnVuY3Rpb24gbGluZVN0YXJ0U21hcnQoY20sIHBvcykge1xyXG4gICAgdmFyIHN0YXJ0ID0gbGluZVN0YXJ0KGNtLCBwb3MubGluZSk7XHJcbiAgICB2YXIgbGluZSA9IGdldExpbmUoY20uZG9jLCBzdGFydC5saW5lKTtcclxuICAgIHZhciBvcmRlciA9IGdldE9yZGVyKGxpbmUpO1xyXG4gICAgaWYgKCFvcmRlciB8fCBvcmRlclswXS5sZXZlbCA9PSAwKSB7XHJcbiAgICAgIHZhciBmaXJzdE5vbldTID0gTWF0aC5tYXgoMCwgbGluZS50ZXh0LnNlYXJjaCgvXFxTLykpO1xyXG4gICAgICB2YXIgaW5XUyA9IHBvcy5saW5lID09IHN0YXJ0LmxpbmUgJiYgcG9zLmNoIDw9IGZpcnN0Tm9uV1MgJiYgcG9zLmNoO1xyXG4gICAgICByZXR1cm4gUG9zKHN0YXJ0LmxpbmUsIGluV1MgPyAwIDogZmlyc3ROb25XUyk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gc3RhcnQ7XHJcbiAgfVxyXG5cclxuICBmdW5jdGlvbiBjb21wYXJlQmlkaUxldmVsKG9yZGVyLCBhLCBiKSB7XHJcbiAgICB2YXIgbGluZWRpciA9IG9yZGVyWzBdLmxldmVsO1xyXG4gICAgaWYgKGEgPT0gbGluZWRpcikgcmV0dXJuIHRydWU7XHJcbiAgICBpZiAoYiA9PSBsaW5lZGlyKSByZXR1cm4gZmFsc2U7XHJcbiAgICByZXR1cm4gYSA8IGI7XHJcbiAgfVxyXG4gIHZhciBiaWRpT3RoZXI7XHJcbiAgZnVuY3Rpb24gZ2V0QmlkaVBhcnRBdChvcmRlciwgcG9zKSB7XHJcbiAgICBiaWRpT3RoZXIgPSBudWxsO1xyXG4gICAgZm9yICh2YXIgaSA9IDAsIGZvdW5kOyBpIDwgb3JkZXIubGVuZ3RoOyArK2kpIHtcclxuICAgICAgdmFyIGN1ciA9IG9yZGVyW2ldO1xyXG4gICAgICBpZiAoY3VyLmZyb20gPCBwb3MgJiYgY3VyLnRvID4gcG9zKSByZXR1cm4gaTtcclxuICAgICAgaWYgKChjdXIuZnJvbSA9PSBwb3MgfHwgY3VyLnRvID09IHBvcykpIHtcclxuICAgICAgICBpZiAoZm91bmQgPT0gbnVsbCkge1xyXG4gICAgICAgICAgZm91bmQgPSBpO1xyXG4gICAgICAgIH0gZWxzZSBpZiAoY29tcGFyZUJpZGlMZXZlbChvcmRlciwgY3VyLmxldmVsLCBvcmRlcltmb3VuZF0ubGV2ZWwpKSB7XHJcbiAgICAgICAgICBpZiAoY3VyLmZyb20gIT0gY3VyLnRvKSBiaWRpT3RoZXIgPSBmb3VuZDtcclxuICAgICAgICAgIHJldHVybiBpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICBpZiAoY3VyLmZyb20gIT0gY3VyLnRvKSBiaWRpT3RoZXIgPSBpO1xyXG4gICAgICAgICAgcmV0dXJuIGZvdW5kO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIGZvdW5kO1xyXG4gIH1cclxuXHJcbiAgZnVuY3Rpb24gbW92ZUluTGluZShsaW5lLCBwb3MsIGRpciwgYnlVbml0KSB7XHJcbiAgICBpZiAoIWJ5VW5pdCkgcmV0dXJuIHBvcyArIGRpcjtcclxuICAgIGRvIHBvcyArPSBkaXI7XHJcbiAgICB3aGlsZSAocG9zID4gMCAmJiBpc0V4dGVuZGluZ0NoYXIobGluZS50ZXh0LmNoYXJBdChwb3MpKSk7XHJcbiAgICByZXR1cm4gcG9zO1xyXG4gIH1cclxuXHJcbiAgLy8gVGhpcyBpcyBuZWVkZWQgaW4gb3JkZXIgdG8gbW92ZSAndmlzdWFsbHknIHRocm91Z2ggYmktZGlyZWN0aW9uYWxcclxuICAvLyB0ZXh0IC0tIGkuZS4sIHByZXNzaW5nIGxlZnQgc2hvdWxkIG1ha2UgdGhlIGN1cnNvciBnbyBsZWZ0LCBldmVuXHJcbiAgLy8gd2hlbiBpbiBSVEwgdGV4dC4gVGhlIHRyaWNreSBwYXJ0IGlzIHRoZSAnanVtcHMnLCB3aGVyZSBSVEwgYW5kXHJcbiAgLy8gTFRSIHRleHQgdG91Y2ggZWFjaCBvdGhlci4gVGhpcyBvZnRlbiByZXF1aXJlcyB0aGUgY3Vyc29yIG9mZnNldFxyXG4gIC8vIHRvIG1vdmUgbW9yZSB0aGFuIG9uZSB1bml0LCBpbiBvcmRlciB0byB2aXN1YWxseSBtb3ZlIG9uZSB1bml0LlxyXG4gIGZ1bmN0aW9uIG1vdmVWaXN1YWxseShsaW5lLCBzdGFydCwgZGlyLCBieVVuaXQpIHtcclxuICAgIHZhciBiaWRpID0gZ2V0T3JkZXIobGluZSk7XHJcbiAgICBpZiAoIWJpZGkpIHJldHVybiBtb3ZlTG9naWNhbGx5KGxpbmUsIHN0YXJ0LCBkaXIsIGJ5VW5pdCk7XHJcbiAgICB2YXIgcG9zID0gZ2V0QmlkaVBhcnRBdChiaWRpLCBzdGFydCksIHBhcnQgPSBiaWRpW3Bvc107XHJcbiAgICB2YXIgdGFyZ2V0ID0gbW92ZUluTGluZShsaW5lLCBzdGFydCwgcGFydC5sZXZlbCAlIDIgPyAtZGlyIDogZGlyLCBieVVuaXQpO1xyXG5cclxuICAgIGZvciAoOzspIHtcclxuICAgICAgaWYgKHRhcmdldCA+IHBhcnQuZnJvbSAmJiB0YXJnZXQgPCBwYXJ0LnRvKSByZXR1cm4gdGFyZ2V0O1xyXG4gICAgICBpZiAodGFyZ2V0ID09IHBhcnQuZnJvbSB8fCB0YXJnZXQgPT0gcGFydC50bykge1xyXG4gICAgICAgIGlmIChnZXRCaWRpUGFydEF0KGJpZGksIHRhcmdldCkgPT0gcG9zKSByZXR1cm4gdGFyZ2V0O1xyXG4gICAgICAgIHBhcnQgPSBiaWRpW3BvcyArPSBkaXJdO1xyXG4gICAgICAgIHJldHVybiAoZGlyID4gMCkgPT0gcGFydC5sZXZlbCAlIDIgPyBwYXJ0LnRvIDogcGFydC5mcm9tO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIHBhcnQgPSBiaWRpW3BvcyArPSBkaXJdO1xyXG4gICAgICAgIGlmICghcGFydCkgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgaWYgKChkaXIgPiAwKSA9PSBwYXJ0LmxldmVsICUgMilcclxuICAgICAgICAgIHRhcmdldCA9IG1vdmVJbkxpbmUobGluZSwgcGFydC50bywgLTEsIGJ5VW5pdCk7XHJcbiAgICAgICAgZWxzZVxyXG4gICAgICAgICAgdGFyZ2V0ID0gbW92ZUluTGluZShsaW5lLCBwYXJ0LmZyb20sIDEsIGJ5VW5pdCk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9XHJcblxyXG4gIGZ1bmN0aW9uIG1vdmVMb2dpY2FsbHkobGluZSwgc3RhcnQsIGRpciwgYnlVbml0KSB7XHJcbiAgICB2YXIgdGFyZ2V0ID0gc3RhcnQgKyBkaXI7XHJcbiAgICBpZiAoYnlVbml0KSB3aGlsZSAodGFyZ2V0ID4gMCAmJiBpc0V4dGVuZGluZ0NoYXIobGluZS50ZXh0LmNoYXJBdCh0YXJnZXQpKSkgdGFyZ2V0ICs9IGRpcjtcclxuICAgIHJldHVybiB0YXJnZXQgPCAwIHx8IHRhcmdldCA+IGxpbmUudGV4dC5sZW5ndGggPyBudWxsIDogdGFyZ2V0O1xyXG4gIH1cclxuXHJcbiAgLy8gQmlkaXJlY3Rpb25hbCBvcmRlcmluZyBhbGdvcml0aG1cclxuICAvLyBTZWUgaHR0cDovL3VuaWNvZGUub3JnL3JlcG9ydHMvdHI5L3RyOS0xMy5odG1sIGZvciB0aGUgYWxnb3JpdGhtXHJcbiAgLy8gdGhhdCB0aGlzIChwYXJ0aWFsbHkpIGltcGxlbWVudHMuXHJcblxyXG4gIC8vIE9uZS1jaGFyIGNvZGVzIHVzZWQgZm9yIGNoYXJhY3RlciB0eXBlczpcclxuICAvLyBMIChMKTogICBMZWZ0LXRvLVJpZ2h0XHJcbiAgLy8gUiAoUik6ICAgUmlnaHQtdG8tTGVmdFxyXG4gIC8vIHIgKEFMKTogIFJpZ2h0LXRvLUxlZnQgQXJhYmljXHJcbiAgLy8gMSAoRU4pOiAgRXVyb3BlYW4gTnVtYmVyXHJcbiAgLy8gKyAoRVMpOiAgRXVyb3BlYW4gTnVtYmVyIFNlcGFyYXRvclxyXG4gIC8vICUgKEVUKTogIEV1cm9wZWFuIE51bWJlciBUZXJtaW5hdG9yXHJcbiAgLy8gbiAoQU4pOiAgQXJhYmljIE51bWJlclxyXG4gIC8vICwgKENTKTogIENvbW1vbiBOdW1iZXIgU2VwYXJhdG9yXHJcbiAgLy8gbSAoTlNNKTogTm9uLVNwYWNpbmcgTWFya1xyXG4gIC8vIGIgKEJOKTogIEJvdW5kYXJ5IE5ldXRyYWxcclxuICAvLyBzIChCKTogICBQYXJhZ3JhcGggU2VwYXJhdG9yXHJcbiAgLy8gdCAoUyk6ICAgU2VnbWVudCBTZXBhcmF0b3JcclxuICAvLyB3IChXUyk6ICBXaGl0ZXNwYWNlXHJcbiAgLy8gTiAoT04pOiAgT3RoZXIgTmV1dHJhbHNcclxuXHJcbiAgLy8gUmV0dXJucyBudWxsIGlmIGNoYXJhY3RlcnMgYXJlIG9yZGVyZWQgYXMgdGhleSBhcHBlYXJcclxuICAvLyAobGVmdC10by1yaWdodCksIG9yIGFuIGFycmF5IG9mIHNlY3Rpb25zICh7ZnJvbSwgdG8sIGxldmVsfVxyXG4gIC8vIG9iamVjdHMpIGluIHRoZSBvcmRlciBpbiB3aGljaCB0aGV5IG9jY3VyIHZpc3VhbGx5LlxyXG4gIHZhciBiaWRpT3JkZXJpbmcgPSAoZnVuY3Rpb24oKSB7XHJcbiAgICAvLyBDaGFyYWN0ZXIgdHlwZXMgZm9yIGNvZGVwb2ludHMgMCB0byAweGZmXHJcbiAgICB2YXIgbG93VHlwZXMgPSBcImJiYmJiYmJiYnRzdHdzYmJiYmJiYmJiYmJiYmJzc3N0d05OJSUlTk5OTk5OLE4sTjExMTExMTExMTFOTk5OTk5OTExMTExMTExMTExMTExMTExMTExMTExMTExOTk5OTk5MTExMTExMTExMTExMTExMTExMTExMTExMTE5OTk5iYmJiYmJzYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmIsTiUlJSVOTk5OTE5OTk5OJSUxMU5MTk5OMUxOTk5OTkxMTExMTExMTExMTExMTExMTExMTExMTkxMTExMTExMTExMTExMTExMTExMTExMTExMTExMTExOXCI7XHJcbiAgICAvLyBDaGFyYWN0ZXIgdHlwZXMgZm9yIGNvZGVwb2ludHMgMHg2MDAgdG8gMHg2ZmZcclxuICAgIHZhciBhcmFiaWNUeXBlcyA9IFwicnJycnJycnJycnJyLHJOTm1tbW1tbXJycnJycnJycnJycnJycnJycnJycnJycnJycnJycnJycnJycnJycnJycnJycnJycnJycnJybW1tbW1tbW1tbW1tbW1ycnJycnJybm5ubm5ubm5ubiVubnJycm1ycnJycnJycnJycnJycnJycnJycnJycnJycnJycnJycnJycnJycnJycnJycnJycnJycnJycnJycnJycnJycnJycnJycnJycnJycnJycnJycnJycnJycnJycnJycnJycnJycnJycm1tbW1tbW1tbW1tbW1tbW1tbW1ObW1tbVwiO1xyXG4gICAgZnVuY3Rpb24gY2hhclR5cGUoY29kZSkge1xyXG4gICAgICBpZiAoY29kZSA8PSAweGY3KSByZXR1cm4gbG93VHlwZXMuY2hhckF0KGNvZGUpO1xyXG4gICAgICBlbHNlIGlmICgweDU5MCA8PSBjb2RlICYmIGNvZGUgPD0gMHg1ZjQpIHJldHVybiBcIlJcIjtcclxuICAgICAgZWxzZSBpZiAoMHg2MDAgPD0gY29kZSAmJiBjb2RlIDw9IDB4NmVkKSByZXR1cm4gYXJhYmljVHlwZXMuY2hhckF0KGNvZGUgLSAweDYwMCk7XHJcbiAgICAgIGVsc2UgaWYgKDB4NmVlIDw9IGNvZGUgJiYgY29kZSA8PSAweDhhYykgcmV0dXJuIFwiclwiO1xyXG4gICAgICBlbHNlIGlmICgweDIwMDAgPD0gY29kZSAmJiBjb2RlIDw9IDB4MjAwYikgcmV0dXJuIFwid1wiO1xyXG4gICAgICBlbHNlIGlmIChjb2RlID09IDB4MjAwYykgcmV0dXJuIFwiYlwiO1xyXG4gICAgICBlbHNlIHJldHVybiBcIkxcIjtcclxuICAgIH1cclxuXHJcbiAgICB2YXIgYmlkaVJFID0gL1tcXHUwNTkwLVxcdTA1ZjRcXHUwNjAwLVxcdTA2ZmZcXHUwNzAwLVxcdTA4YWNdLztcclxuICAgIHZhciBpc05ldXRyYWwgPSAvW3N0d05dLywgaXNTdHJvbmcgPSAvW0xScl0vLCBjb3VudHNBc0xlZnQgPSAvW0xiMW5dLywgY291bnRzQXNOdW0gPSAvWzFuXS87XHJcbiAgICAvLyBCcm93c2VycyBzZWVtIHRvIGFsd2F5cyB0cmVhdCB0aGUgYm91bmRhcmllcyBvZiBibG9jayBlbGVtZW50cyBhcyBiZWluZyBMLlxyXG4gICAgdmFyIG91dGVyVHlwZSA9IFwiTFwiO1xyXG5cclxuICAgIGZ1bmN0aW9uIEJpZGlTcGFuKGxldmVsLCBmcm9tLCB0bykge1xyXG4gICAgICB0aGlzLmxldmVsID0gbGV2ZWw7XHJcbiAgICAgIHRoaXMuZnJvbSA9IGZyb207IHRoaXMudG8gPSB0bztcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gZnVuY3Rpb24oc3RyKSB7XHJcbiAgICAgIGlmICghYmlkaVJFLnRlc3Qoc3RyKSkgcmV0dXJuIGZhbHNlO1xyXG4gICAgICB2YXIgbGVuID0gc3RyLmxlbmd0aCwgdHlwZXMgPSBbXTtcclxuICAgICAgZm9yICh2YXIgaSA9IDAsIHR5cGU7IGkgPCBsZW47ICsraSlcclxuICAgICAgICB0eXBlcy5wdXNoKHR5cGUgPSBjaGFyVHlwZShzdHIuY2hhckNvZGVBdChpKSkpO1xyXG5cclxuICAgICAgLy8gVzEuIEV4YW1pbmUgZWFjaCBub24tc3BhY2luZyBtYXJrIChOU00pIGluIHRoZSBsZXZlbCBydW4sIGFuZFxyXG4gICAgICAvLyBjaGFuZ2UgdGhlIHR5cGUgb2YgdGhlIE5TTSB0byB0aGUgdHlwZSBvZiB0aGUgcHJldmlvdXNcclxuICAgICAgLy8gY2hhcmFjdGVyLiBJZiB0aGUgTlNNIGlzIGF0IHRoZSBzdGFydCBvZiB0aGUgbGV2ZWwgcnVuLCBpdCB3aWxsXHJcbiAgICAgIC8vIGdldCB0aGUgdHlwZSBvZiBzb3IuXHJcbiAgICAgIGZvciAodmFyIGkgPSAwLCBwcmV2ID0gb3V0ZXJUeXBlOyBpIDwgbGVuOyArK2kpIHtcclxuICAgICAgICB2YXIgdHlwZSA9IHR5cGVzW2ldO1xyXG4gICAgICAgIGlmICh0eXBlID09IFwibVwiKSB0eXBlc1tpXSA9IHByZXY7XHJcbiAgICAgICAgZWxzZSBwcmV2ID0gdHlwZTtcclxuICAgICAgfVxyXG5cclxuICAgICAgLy8gVzIuIFNlYXJjaCBiYWNrd2FyZHMgZnJvbSBlYWNoIGluc3RhbmNlIG9mIGEgRXVyb3BlYW4gbnVtYmVyXHJcbiAgICAgIC8vIHVudGlsIHRoZSBmaXJzdCBzdHJvbmcgdHlwZSAoUiwgTCwgQUwsIG9yIHNvcikgaXMgZm91bmQuIElmIGFuXHJcbiAgICAgIC8vIEFMIGlzIGZvdW5kLCBjaGFuZ2UgdGhlIHR5cGUgb2YgdGhlIEV1cm9wZWFuIG51bWJlciB0byBBcmFiaWNcclxuICAgICAgLy8gbnVtYmVyLlxyXG4gICAgICAvLyBXMy4gQ2hhbmdlIGFsbCBBTHMgdG8gUi5cclxuICAgICAgZm9yICh2YXIgaSA9IDAsIGN1ciA9IG91dGVyVHlwZTsgaSA8IGxlbjsgKytpKSB7XHJcbiAgICAgICAgdmFyIHR5cGUgPSB0eXBlc1tpXTtcclxuICAgICAgICBpZiAodHlwZSA9PSBcIjFcIiAmJiBjdXIgPT0gXCJyXCIpIHR5cGVzW2ldID0gXCJuXCI7XHJcbiAgICAgICAgZWxzZSBpZiAoaXNTdHJvbmcudGVzdCh0eXBlKSkgeyBjdXIgPSB0eXBlOyBpZiAodHlwZSA9PSBcInJcIikgdHlwZXNbaV0gPSBcIlJcIjsgfVxyXG4gICAgICB9XHJcblxyXG4gICAgICAvLyBXNC4gQSBzaW5nbGUgRXVyb3BlYW4gc2VwYXJhdG9yIGJldHdlZW4gdHdvIEV1cm9wZWFuIG51bWJlcnNcclxuICAgICAgLy8gY2hhbmdlcyB0byBhIEV1cm9wZWFuIG51bWJlci4gQSBzaW5nbGUgY29tbW9uIHNlcGFyYXRvciBiZXR3ZWVuXHJcbiAgICAgIC8vIHR3byBudW1iZXJzIG9mIHRoZSBzYW1lIHR5cGUgY2hhbmdlcyB0byB0aGF0IHR5cGUuXHJcbiAgICAgIGZvciAodmFyIGkgPSAxLCBwcmV2ID0gdHlwZXNbMF07IGkgPCBsZW4gLSAxOyArK2kpIHtcclxuICAgICAgICB2YXIgdHlwZSA9IHR5cGVzW2ldO1xyXG4gICAgICAgIGlmICh0eXBlID09IFwiK1wiICYmIHByZXYgPT0gXCIxXCIgJiYgdHlwZXNbaSsxXSA9PSBcIjFcIikgdHlwZXNbaV0gPSBcIjFcIjtcclxuICAgICAgICBlbHNlIGlmICh0eXBlID09IFwiLFwiICYmIHByZXYgPT0gdHlwZXNbaSsxXSAmJlxyXG4gICAgICAgICAgICAgICAgIChwcmV2ID09IFwiMVwiIHx8IHByZXYgPT0gXCJuXCIpKSB0eXBlc1tpXSA9IHByZXY7XHJcbiAgICAgICAgcHJldiA9IHR5cGU7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIC8vIFc1LiBBIHNlcXVlbmNlIG9mIEV1cm9wZWFuIHRlcm1pbmF0b3JzIGFkamFjZW50IHRvIEV1cm9wZWFuXHJcbiAgICAgIC8vIG51bWJlcnMgY2hhbmdlcyB0byBhbGwgRXVyb3BlYW4gbnVtYmVycy5cclxuICAgICAgLy8gVzYuIE90aGVyd2lzZSwgc2VwYXJhdG9ycyBhbmQgdGVybWluYXRvcnMgY2hhbmdlIHRvIE90aGVyXHJcbiAgICAgIC8vIE5ldXRyYWwuXHJcbiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuOyArK2kpIHtcclxuICAgICAgICB2YXIgdHlwZSA9IHR5cGVzW2ldO1xyXG4gICAgICAgIGlmICh0eXBlID09IFwiLFwiKSB0eXBlc1tpXSA9IFwiTlwiO1xyXG4gICAgICAgIGVsc2UgaWYgKHR5cGUgPT0gXCIlXCIpIHtcclxuICAgICAgICAgIGZvciAodmFyIGVuZCA9IGkgKyAxOyBlbmQgPCBsZW4gJiYgdHlwZXNbZW5kXSA9PSBcIiVcIjsgKytlbmQpIHt9XHJcbiAgICAgICAgICB2YXIgcmVwbGFjZSA9IChpICYmIHR5cGVzW2ktMV0gPT0gXCIhXCIpIHx8IChlbmQgPCBsZW4gJiYgdHlwZXNbZW5kXSA9PSBcIjFcIikgPyBcIjFcIiA6IFwiTlwiO1xyXG4gICAgICAgICAgZm9yICh2YXIgaiA9IGk7IGogPCBlbmQ7ICsraikgdHlwZXNbal0gPSByZXBsYWNlO1xyXG4gICAgICAgICAgaSA9IGVuZCAtIDE7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcblxyXG4gICAgICAvLyBXNy4gU2VhcmNoIGJhY2t3YXJkcyBmcm9tIGVhY2ggaW5zdGFuY2Ugb2YgYSBFdXJvcGVhbiBudW1iZXJcclxuICAgICAgLy8gdW50aWwgdGhlIGZpcnN0IHN0cm9uZyB0eXBlIChSLCBMLCBvciBzb3IpIGlzIGZvdW5kLiBJZiBhbiBMIGlzXHJcbiAgICAgIC8vIGZvdW5kLCB0aGVuIGNoYW5nZSB0aGUgdHlwZSBvZiB0aGUgRXVyb3BlYW4gbnVtYmVyIHRvIEwuXHJcbiAgICAgIGZvciAodmFyIGkgPSAwLCBjdXIgPSBvdXRlclR5cGU7IGkgPCBsZW47ICsraSkge1xyXG4gICAgICAgIHZhciB0eXBlID0gdHlwZXNbaV07XHJcbiAgICAgICAgaWYgKGN1ciA9PSBcIkxcIiAmJiB0eXBlID09IFwiMVwiKSB0eXBlc1tpXSA9IFwiTFwiO1xyXG4gICAgICAgIGVsc2UgaWYgKGlzU3Ryb25nLnRlc3QodHlwZSkpIGN1ciA9IHR5cGU7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIC8vIE4xLiBBIHNlcXVlbmNlIG9mIG5ldXRyYWxzIHRha2VzIHRoZSBkaXJlY3Rpb24gb2YgdGhlXHJcbiAgICAgIC8vIHN1cnJvdW5kaW5nIHN0cm9uZyB0ZXh0IGlmIHRoZSB0ZXh0IG9uIGJvdGggc2lkZXMgaGFzIHRoZSBzYW1lXHJcbiAgICAgIC8vIGRpcmVjdGlvbi4gRXVyb3BlYW4gYW5kIEFyYWJpYyBudW1iZXJzIGFjdCBhcyBpZiB0aGV5IHdlcmUgUiBpblxyXG4gICAgICAvLyB0ZXJtcyBvZiB0aGVpciBpbmZsdWVuY2Ugb24gbmV1dHJhbHMuIFN0YXJ0LW9mLWxldmVsLXJ1biAoc29yKVxyXG4gICAgICAvLyBhbmQgZW5kLW9mLWxldmVsLXJ1biAoZW9yKSBhcmUgdXNlZCBhdCBsZXZlbCBydW4gYm91bmRhcmllcy5cclxuICAgICAgLy8gTjIuIEFueSByZW1haW5pbmcgbmV1dHJhbHMgdGFrZSB0aGUgZW1iZWRkaW5nIGRpcmVjdGlvbi5cclxuICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW47ICsraSkge1xyXG4gICAgICAgIGlmIChpc05ldXRyYWwudGVzdCh0eXBlc1tpXSkpIHtcclxuICAgICAgICAgIGZvciAodmFyIGVuZCA9IGkgKyAxOyBlbmQgPCBsZW4gJiYgaXNOZXV0cmFsLnRlc3QodHlwZXNbZW5kXSk7ICsrZW5kKSB7fVxyXG4gICAgICAgICAgdmFyIGJlZm9yZSA9IChpID8gdHlwZXNbaS0xXSA6IG91dGVyVHlwZSkgPT0gXCJMXCI7XHJcbiAgICAgICAgICB2YXIgYWZ0ZXIgPSAoZW5kIDwgbGVuID8gdHlwZXNbZW5kXSA6IG91dGVyVHlwZSkgPT0gXCJMXCI7XHJcbiAgICAgICAgICB2YXIgcmVwbGFjZSA9IGJlZm9yZSB8fCBhZnRlciA/IFwiTFwiIDogXCJSXCI7XHJcbiAgICAgICAgICBmb3IgKHZhciBqID0gaTsgaiA8IGVuZDsgKytqKSB0eXBlc1tqXSA9IHJlcGxhY2U7XHJcbiAgICAgICAgICBpID0gZW5kIC0gMTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIC8vIEhlcmUgd2UgZGVwYXJ0IGZyb20gdGhlIGRvY3VtZW50ZWQgYWxnb3JpdGhtLCBpbiBvcmRlciB0byBhdm9pZFxyXG4gICAgICAvLyBidWlsZGluZyB1cCBhbiBhY3R1YWwgbGV2ZWxzIGFycmF5LiBTaW5jZSB0aGVyZSBhcmUgb25seSB0aHJlZVxyXG4gICAgICAvLyBsZXZlbHMgKDAsIDEsIDIpIGluIGFuIGltcGxlbWVudGF0aW9uIHRoYXQgZG9lc24ndCB0YWtlXHJcbiAgICAgIC8vIGV4cGxpY2l0IGVtYmVkZGluZyBpbnRvIGFjY291bnQsIHdlIGNhbiBidWlsZCB1cCB0aGUgb3JkZXIgb25cclxuICAgICAgLy8gdGhlIGZseSwgd2l0aG91dCBmb2xsb3dpbmcgdGhlIGxldmVsLWJhc2VkIGFsZ29yaXRobS5cclxuICAgICAgdmFyIG9yZGVyID0gW10sIG07XHJcbiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuOykge1xyXG4gICAgICAgIGlmIChjb3VudHNBc0xlZnQudGVzdCh0eXBlc1tpXSkpIHtcclxuICAgICAgICAgIHZhciBzdGFydCA9IGk7XHJcbiAgICAgICAgICBmb3IgKCsraTsgaSA8IGxlbiAmJiBjb3VudHNBc0xlZnQudGVzdCh0eXBlc1tpXSk7ICsraSkge31cclxuICAgICAgICAgIG9yZGVyLnB1c2gobmV3IEJpZGlTcGFuKDAsIHN0YXJ0LCBpKSk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIHZhciBwb3MgPSBpLCBhdCA9IG9yZGVyLmxlbmd0aDtcclxuICAgICAgICAgIGZvciAoKytpOyBpIDwgbGVuICYmIHR5cGVzW2ldICE9IFwiTFwiOyArK2kpIHt9XHJcbiAgICAgICAgICBmb3IgKHZhciBqID0gcG9zOyBqIDwgaTspIHtcclxuICAgICAgICAgICAgaWYgKGNvdW50c0FzTnVtLnRlc3QodHlwZXNbal0pKSB7XHJcbiAgICAgICAgICAgICAgaWYgKHBvcyA8IGopIG9yZGVyLnNwbGljZShhdCwgMCwgbmV3IEJpZGlTcGFuKDEsIHBvcywgaikpO1xyXG4gICAgICAgICAgICAgIHZhciBuc3RhcnQgPSBqO1xyXG4gICAgICAgICAgICAgIGZvciAoKytqOyBqIDwgaSAmJiBjb3VudHNBc051bS50ZXN0KHR5cGVzW2pdKTsgKytqKSB7fVxyXG4gICAgICAgICAgICAgIG9yZGVyLnNwbGljZShhdCwgMCwgbmV3IEJpZGlTcGFuKDIsIG5zdGFydCwgaikpO1xyXG4gICAgICAgICAgICAgIHBvcyA9IGo7XHJcbiAgICAgICAgICAgIH0gZWxzZSArK2o7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICBpZiAocG9zIDwgaSkgb3JkZXIuc3BsaWNlKGF0LCAwLCBuZXcgQmlkaVNwYW4oMSwgcG9zLCBpKSk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICAgIGlmIChvcmRlclswXS5sZXZlbCA9PSAxICYmIChtID0gc3RyLm1hdGNoKC9eXFxzKy8pKSkge1xyXG4gICAgICAgIG9yZGVyWzBdLmZyb20gPSBtWzBdLmxlbmd0aDtcclxuICAgICAgICBvcmRlci51bnNoaWZ0KG5ldyBCaWRpU3BhbigwLCAwLCBtWzBdLmxlbmd0aCkpO1xyXG4gICAgICB9XHJcbiAgICAgIGlmIChsc3Qob3JkZXIpLmxldmVsID09IDEgJiYgKG0gPSBzdHIubWF0Y2goL1xccyskLykpKSB7XHJcbiAgICAgICAgbHN0KG9yZGVyKS50byAtPSBtWzBdLmxlbmd0aDtcclxuICAgICAgICBvcmRlci5wdXNoKG5ldyBCaWRpU3BhbigwLCBsZW4gLSBtWzBdLmxlbmd0aCwgbGVuKSk7XHJcbiAgICAgIH1cclxuICAgICAgaWYgKG9yZGVyWzBdLmxldmVsICE9IGxzdChvcmRlcikubGV2ZWwpXHJcbiAgICAgICAgb3JkZXIucHVzaChuZXcgQmlkaVNwYW4ob3JkZXJbMF0ubGV2ZWwsIGxlbiwgbGVuKSk7XHJcblxyXG4gICAgICByZXR1cm4gb3JkZXI7XHJcbiAgICB9O1xyXG4gIH0pKCk7XHJcblxyXG4gIC8vIFRIRSBFTkRcclxuXHJcbiAgQ29kZU1pcnJvci52ZXJzaW9uID0gXCI0LjYuMFwiO1xyXG5cclxuICByZXR1cm4gQ29kZU1pcnJvcjtcclxufSk7XHJcbiIsIi8qIFxyXG4gKiAgRFNQLmpzIC0gYSBjb21wcmVoZW5zaXZlIGRpZ2l0YWwgc2lnbmFsIHByb2Nlc3NpbmcgIGxpYnJhcnkgZm9yIGphdmFzY3JpcHRcclxuICogXHJcbiAqICBDcmVhdGVkIGJ5IENvcmJhbiBCcm9vayA8Y29yYmFuYnJvb2tAZ21haWwuY29tPiBvbiAyMDEwLTAxLTAxLlxyXG4gKiAgQ29weXJpZ2h0IDIwMTAgQ29yYmFuIEJyb29rLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxyXG4gKlxyXG4gKi9cclxuXHJcbi8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXHJcbi8vICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIENPTlNUQU5UUyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vXHJcbi8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXHJcblxyXG4vKipcclxuICogRFNQIGlzIGFuIG9iamVjdCB3aGljaCBjb250YWlucyBnZW5lcmFsIHB1cnBvc2UgdXRpbGl0eSBmdW5jdGlvbnMgYW5kIGNvbnN0YW50c1xyXG4gKi9cclxudmFyIERTUCA9IHtcclxuICAvLyBDaGFubmVsc1xyXG4gIExFRlQ6ICAgICAgICAgICAwLFxyXG4gIFJJR0hUOiAgICAgICAgICAxLFxyXG4gIE1JWDogICAgICAgICAgICAyLFxyXG5cclxuICAvLyBXYXZlZm9ybXNcclxuICBTSU5FOiAgICAgICAgICAgMSxcclxuICBUUklBTkdMRTogICAgICAgMixcclxuICBTQVc6ICAgICAgICAgICAgMyxcclxuICBTUVVBUkU6ICAgICAgICAgNCxcclxuXHJcbiAgLy8gRmlsdGVyc1xyXG4gIExPV1BBU1M6ICAgICAgICAwLFxyXG4gIEhJR0hQQVNTOiAgICAgICAxLFxyXG4gIEJBTkRQQVNTOiAgICAgICAyLFxyXG4gIE5PVENIOiAgICAgICAgICAzLFxyXG5cclxuICAvLyBXaW5kb3cgZnVuY3Rpb25zXHJcbiAgQkFSVExFVFQ6ICAgICAgIDEsXHJcbiAgQkFSVExFVFRIQU5OOiAgIDIsXHJcbiAgQkxBQ0tNQU46ICAgICAgIDMsXHJcbiAgQ09TSU5FOiAgICAgICAgIDQsXHJcbiAgR0FVU1M6ICAgICAgICAgIDUsXHJcbiAgSEFNTUlORzogICAgICAgIDYsXHJcbiAgSEFOTjogICAgICAgICAgIDcsXHJcbiAgTEFOQ1pPUzogICAgICAgIDgsXHJcbiAgUkVDVEFOR1VMQVI6ICAgIDksXHJcbiAgVFJJQU5HVUxBUjogICAgIDEwLFxyXG5cclxuICAvLyBMb29wIG1vZGVzXHJcbiAgT0ZGOiAgICAgICAgICAgIDAsXHJcbiAgRlc6ICAgICAgICAgICAgIDEsXHJcbiAgQlc6ICAgICAgICAgICAgIDIsXHJcbiAgRldCVzogICAgICAgICAgIDMsXHJcblxyXG4gIC8vIE1hdGhcclxuICBUV09fUEk6ICAgICAgICAgMipNYXRoLlBJXHJcbn07XHJcblxyXG4vLyBTZXR1cCBhcnJheXMgZm9yIHBsYXRmb3JtcyB3aGljaCBkbyBub3Qgc3VwcG9ydCBieXRlIGFycmF5c1xyXG5mdW5jdGlvbiBzZXR1cFR5cGVkQXJyYXkobmFtZSwgZmFsbGJhY2spIHtcclxuICAvLyBjaGVjayBpZiBUeXBlZEFycmF5IGV4aXN0c1xyXG4gIC8vIHR5cGVvZiBvbiBNaW5lZmllbGQgYW5kIENocm9tZSByZXR1cm4gZnVuY3Rpb24sIHR5cGVvZiBvbiBXZWJraXQgcmV0dXJucyBvYmplY3QuXHJcbiAgaWYgKHR5cGVvZiB0aGlzW25hbWVdICE9PSBcImZ1bmN0aW9uXCIgJiYgdHlwZW9mIHRoaXNbbmFtZV0gIT09IFwib2JqZWN0XCIpIHtcclxuICAgIC8vIG5vcGUuLiBjaGVjayBpZiBXZWJHTEFycmF5IGV4aXN0c1xyXG4gICAgaWYgKHR5cGVvZiB0aGlzW2ZhbGxiYWNrXSA9PT0gXCJmdW5jdGlvblwiICYmIHR5cGVvZiB0aGlzW2ZhbGxiYWNrXSAhPT0gXCJvYmplY3RcIikge1xyXG4gICAgICB0aGlzW25hbWVdID0gdGhpc1tmYWxsYmFja107XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAvLyBub3BlLi4gc2V0IGFzIE5hdGl2ZSBKUyBhcnJheVxyXG4gICAgICB0aGlzW25hbWVdID0gZnVuY3Rpb24ob2JqKSB7XHJcbiAgICAgICAgaWYgKG9iaiBpbnN0YW5jZW9mIEFycmF5KSB7XHJcbiAgICAgICAgICByZXR1cm4gb2JqO1xyXG4gICAgICAgIH0gZWxzZSBpZiAodHlwZW9mIG9iaiA9PT0gXCJudW1iZXJcIikge1xyXG4gICAgICAgICAgcmV0dXJuIG5ldyBBcnJheShvYmopO1xyXG4gICAgICAgIH1cclxuICAgICAgfTtcclxuICAgIH1cclxuICB9XHJcbn1cclxuXHJcbnNldHVwVHlwZWRBcnJheShcIkZsb2F0MzJBcnJheVwiLCBcIldlYkdMRmxvYXRBcnJheVwiKTtcclxuc2V0dXBUeXBlZEFycmF5KFwiSW50MzJBcnJheVwiLCAgIFwiV2ViR0xJbnRBcnJheVwiKTtcclxuc2V0dXBUeXBlZEFycmF5KFwiVWludDE2QXJyYXlcIiwgIFwiV2ViR0xVbnNpZ25lZFNob3J0QXJyYXlcIik7XHJcbnNldHVwVHlwZWRBcnJheShcIlVpbnQ4QXJyYXlcIiwgICBcIldlYkdMVW5zaWduZWRCeXRlQXJyYXlcIik7XHJcblxyXG5cclxuLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cclxuLy8gICAgICAgICAgICAgICAgICAgICAgICAgICAgRFNQIFVUSUxJVFkgRlVOQ1RJT05TICAgICAgICAgICAgICAgICAgICAgICAgICAgLy9cclxuLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cclxuXHJcbi8qKlxyXG4gKiBJbnZlcnRzIHRoZSBwaGFzZSBvZiBhIHNpZ25hbFxyXG4gKlxyXG4gKiBAcGFyYW0ge0FycmF5fSBidWZmZXIgQSBzYW1wbGUgYnVmZmVyXHJcbiAqXHJcbiAqIEByZXR1cm5zIFRoZSBpbnZlcnRlZCBzYW1wbGUgYnVmZmVyXHJcbiAqL1xyXG5EU1AuaW52ZXJ0ID0gZnVuY3Rpb24oYnVmZmVyKSB7XHJcbiAgZm9yICh2YXIgaSA9IDAsIGxlbiA9IGJ1ZmZlci5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xyXG4gICAgYnVmZmVyW2ldICo9IC0xO1xyXG4gIH1cclxuXHJcbiAgcmV0dXJuIGJ1ZmZlcjtcclxufTtcclxuXHJcbi8qKlxyXG4gKiBDb252ZXJ0cyBzcGxpdC1zdGVyZW8gKGR1YWwgbW9ubykgc2FtcGxlIGJ1ZmZlcnMgaW50byBhIHN0ZXJlbyBpbnRlcmxlYXZlZCBzYW1wbGUgYnVmZmVyXHJcbiAqXHJcbiAqIEBwYXJhbSB7QXJyYXl9IGxlZnQgIEEgc2FtcGxlIGJ1ZmZlclxyXG4gKiBAcGFyYW0ge0FycmF5fSByaWdodCBBIHNhbXBsZSBidWZmZXJcclxuICpcclxuICogQHJldHVybnMgVGhlIHN0ZXJlbyBpbnRlcmxlYXZlZCBidWZmZXJcclxuICovXHJcbkRTUC5pbnRlcmxlYXZlID0gZnVuY3Rpb24obGVmdCwgcmlnaHQpIHtcclxuICBpZiAobGVmdC5sZW5ndGggIT09IHJpZ2h0Lmxlbmd0aCkge1xyXG4gICAgdGhyb3cgXCJDYW4gbm90IGludGVybGVhdmUuIENoYW5uZWwgbGVuZ3RocyBkaWZmZXIuXCI7XHJcbiAgfVxyXG4gXHJcbiAgdmFyIHN0ZXJlb0ludGVybGVhdmVkID0gbmV3IEZsb2F0MzJBcnJheShsZWZ0Lmxlbmd0aCAqIDIpO1xyXG4gXHJcbiAgZm9yICh2YXIgaSA9IDAsIGxlbiA9IGxlZnQubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcclxuICAgIHN0ZXJlb0ludGVybGVhdmVkWzIqaV0gICA9IGxlZnRbaV07XHJcbiAgICBzdGVyZW9JbnRlcmxlYXZlZFsyKmkrMV0gPSByaWdodFtpXTtcclxuICB9XHJcbiBcclxuICByZXR1cm4gc3RlcmVvSW50ZXJsZWF2ZWQ7XHJcbn07XHJcblxyXG4vKipcclxuICogQ29udmVydHMgYSBzdGVyZW8taW50ZXJsZWF2ZWQgc2FtcGxlIGJ1ZmZlciBpbnRvIHNwbGl0LXN0ZXJlbyAoZHVhbCBtb25vKSBzYW1wbGUgYnVmZmVyc1xyXG4gKlxyXG4gKiBAcGFyYW0ge0FycmF5fSBidWZmZXIgQSBzdGVyZW8taW50ZXJsZWF2ZWQgc2FtcGxlIGJ1ZmZlclxyXG4gKlxyXG4gKiBAcmV0dXJucyBhbiBBcnJheSBjb250YWluaW5nIGxlZnQgYW5kIHJpZ2h0IGNoYW5uZWxzXHJcbiAqL1xyXG5EU1AuZGVpbnRlcmxlYXZlID0gKGZ1bmN0aW9uKCkge1xyXG4gIHZhciBsZWZ0LCByaWdodCwgbWl4LCBkZWludGVybGVhdmVDaGFubmVsID0gW107IFxyXG5cclxuICBkZWludGVybGVhdmVDaGFubmVsW0RTUC5NSVhdID0gZnVuY3Rpb24oYnVmZmVyKSB7XHJcbiAgICBmb3IgKHZhciBpID0gMCwgbGVuID0gYnVmZmVyLmxlbmd0aC8yOyBpIDwgbGVuOyBpKyspIHtcclxuICAgICAgbWl4W2ldID0gKGJ1ZmZlclsyKmldICsgYnVmZmVyWzIqaSsxXSkgLyAyO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIG1peDtcclxuICB9O1xyXG5cclxuICBkZWludGVybGVhdmVDaGFubmVsW0RTUC5MRUZUXSA9IGZ1bmN0aW9uKGJ1ZmZlcikge1xyXG4gICAgZm9yICh2YXIgaSA9IDAsIGxlbiA9IGJ1ZmZlci5sZW5ndGgvMjsgaSA8IGxlbjsgaSsrKSB7XHJcbiAgICAgIGxlZnRbaV0gID0gYnVmZmVyWzIqaV07XHJcbiAgICB9XHJcbiAgICByZXR1cm4gbGVmdDtcclxuICB9O1xyXG5cclxuICBkZWludGVybGVhdmVDaGFubmVsW0RTUC5SSUdIVF0gPSBmdW5jdGlvbihidWZmZXIpIHtcclxuICAgIGZvciAodmFyIGkgPSAwLCBsZW4gPSBidWZmZXIubGVuZ3RoLzI7IGkgPCBsZW47IGkrKykge1xyXG4gICAgICByaWdodFtpXSAgPSBidWZmZXJbMippKzFdO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIHJpZ2h0O1xyXG4gIH07XHJcblxyXG4gIHJldHVybiBmdW5jdGlvbihjaGFubmVsLCBidWZmZXIpIHsgXHJcbiAgICBsZWZ0ICA9IGxlZnQgIHx8IG5ldyBGbG9hdDMyQXJyYXkoYnVmZmVyLmxlbmd0aC8yKTtcclxuICAgIHJpZ2h0ID0gcmlnaHQgfHwgbmV3IEZsb2F0MzJBcnJheShidWZmZXIubGVuZ3RoLzIpO1xyXG4gICAgbWl4ICAgPSBtaXggICB8fCBuZXcgRmxvYXQzMkFycmF5KGJ1ZmZlci5sZW5ndGgvMik7XHJcblxyXG4gICAgaWYgKGJ1ZmZlci5sZW5ndGgvMiAhPT0gbGVmdC5sZW5ndGgpIHtcclxuICAgICAgbGVmdCAgPSBuZXcgRmxvYXQzMkFycmF5KGJ1ZmZlci5sZW5ndGgvMik7XHJcbiAgICAgIHJpZ2h0ID0gbmV3IEZsb2F0MzJBcnJheShidWZmZXIubGVuZ3RoLzIpO1xyXG4gICAgICBtaXggICA9IG5ldyBGbG9hdDMyQXJyYXkoYnVmZmVyLmxlbmd0aC8yKTtcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gZGVpbnRlcmxlYXZlQ2hhbm5lbFtjaGFubmVsXShidWZmZXIpO1xyXG4gIH07XHJcbn0oKSk7XHJcblxyXG4vKipcclxuICogU2VwYXJhdGVzIGEgY2hhbm5lbCBmcm9tIGEgc3RlcmVvLWludGVybGVhdmVkIHNhbXBsZSBidWZmZXJcclxuICpcclxuICogQHBhcmFtIHtBcnJheX0gIGJ1ZmZlciBBIHN0ZXJlby1pbnRlcmxlYXZlZCBzYW1wbGUgYnVmZmVyXHJcbiAqIEBwYXJhbSB7TnVtYmVyfSBjaGFubmVsIEEgY2hhbm5lbCBjb25zdGFudCAoTEVGVCwgUklHSFQsIE1JWClcclxuICpcclxuICogQHJldHVybnMgYW4gQXJyYXkgY29udGFpbmluZyBhIHNpZ25hbCBtb25vIHNhbXBsZSBidWZmZXJcclxuICovXHJcbkRTUC5nZXRDaGFubmVsID0gRFNQLmRlaW50ZXJsZWF2ZTtcclxuXHJcbi8qKlxyXG4gKiBIZWxwZXIgbWV0aG9kIChmb3IgUmV2ZXJiKSB0byBtaXggdHdvIChpbnRlcmxlYXZlZCkgc2FtcGxlYnVmZmVycy4gSXQncyBwb3NzaWJsZVxyXG4gKiB0byBuZWdhdGUgdGhlIHNlY29uZCBidWZmZXIgd2hpbGUgbWl4aW5nIGFuZCB0byBwZXJmb3JtIGEgdm9sdW1lIGNvcnJlY3Rpb25cclxuICogb24gdGhlIGZpbmFsIHNpZ25hbC5cclxuICpcclxuICogQHBhcmFtIHtBcnJheX0gc2FtcGxlQnVmZmVyMSBBcnJheSBjb250YWluaW5nIEZsb2F0IHZhbHVlcyBvciBhIEZsb2F0MzJBcnJheVxyXG4gKiBAcGFyYW0ge0FycmF5fSBzYW1wbGVCdWZmZXIyIEFycmF5IGNvbnRhaW5pbmcgRmxvYXQgdmFsdWVzIG9yIGEgRmxvYXQzMkFycmF5XHJcbiAqIEBwYXJhbSB7Qm9vbGVhbn0gbmVnYXRlIFdoZW4gdHJ1ZSBpbnZlcnRzL2ZsaXBzIHRoZSBhdWRpbyBzaWduYWxcclxuICogQHBhcmFtIHtOdW1iZXJ9IHZvbHVtZUNvcnJlY3Rpb24gV2hlbiB5b3UgYWRkIG11bHRpcGxlIHNhbXBsZSBidWZmZXJzLCB1c2UgdGhpcyB0byB0YW1lIHlvdXIgc2lnbmFsIDspXHJcbiAqXHJcbiAqIEByZXR1cm5zIEEgbmV3IEZsb2F0MzJBcnJheSBpbnRlcmxlYXZlZCBidWZmZXIuXHJcbiAqL1xyXG5EU1AubWl4U2FtcGxlQnVmZmVycyA9IGZ1bmN0aW9uKHNhbXBsZUJ1ZmZlcjEsIHNhbXBsZUJ1ZmZlcjIsIG5lZ2F0ZSwgdm9sdW1lQ29ycmVjdGlvbil7XHJcbiAgdmFyIG91dHB1dFNhbXBsZXMgPSBuZXcgRmxvYXQzMkFycmF5KHNhbXBsZUJ1ZmZlcjEpO1xyXG5cclxuICBmb3IodmFyIGkgPSAwOyBpPHNhbXBsZUJ1ZmZlcjEubGVuZ3RoOyBpKyspe1xyXG4gICAgb3V0cHV0U2FtcGxlc1tpXSArPSAobmVnYXRlID8gLXNhbXBsZUJ1ZmZlcjJbaV0gOiBzYW1wbGVCdWZmZXIyW2ldKSAvIHZvbHVtZUNvcnJlY3Rpb247XHJcbiAgfVxyXG4gXHJcbiAgcmV0dXJuIG91dHB1dFNhbXBsZXM7XHJcbn07IFxyXG5cclxuLy8gQmlxdWFkIGZpbHRlciB0eXBlc1xyXG5EU1AuTFBGID0gMDsgICAgICAgICAgICAgICAgLy8gSChzKSA9IDEgLyAoc14yICsgcy9RICsgMSlcclxuRFNQLkhQRiA9IDE7ICAgICAgICAgICAgICAgIC8vIEgocykgPSBzXjIgLyAoc14yICsgcy9RICsgMSlcclxuRFNQLkJQRl9DT05TVEFOVF9TS0lSVCA9IDI7IC8vIEgocykgPSBzIC8gKHNeMiArIHMvUSArIDEpICAoY29uc3RhbnQgc2tpcnQgZ2FpbiwgcGVhayBnYWluID0gUSlcclxuRFNQLkJQRl9DT05TVEFOVF9QRUFLID0gMzsgIC8vIEgocykgPSAocy9RKSAvIChzXjIgKyBzL1EgKyAxKSAgICAgIChjb25zdGFudCAwIGRCIHBlYWsgZ2FpbilcclxuRFNQLk5PVENIID0gNDsgICAgICAgICAgICAgIC8vIEgocykgPSAoc14yICsgMSkgLyAoc14yICsgcy9RICsgMSlcclxuRFNQLkFQRiA9IDU7ICAgICAgICAgICAgICAgIC8vIEgocykgPSAoc14yIC0gcy9RICsgMSkgLyAoc14yICsgcy9RICsgMSlcclxuRFNQLlBFQUtJTkdfRVEgPSA2OyAgICAgICAgIC8vIEgocykgPSAoc14yICsgcyooQS9RKSArIDEpIC8gKHNeMiArIHMvKEEqUSkgKyAxKVxyXG5EU1AuTE9XX1NIRUxGID0gNzsgICAgICAgICAgLy8gSChzKSA9IEEgKiAoc14yICsgKHNxcnQoQSkvUSkqcyArIEEpLyhBKnNeMiArIChzcXJ0KEEpL1EpKnMgKyAxKVxyXG5EU1AuSElHSF9TSEVMRiA9IDg7ICAgICAgICAgLy8gSChzKSA9IEEgKiAoQSpzXjIgKyAoc3FydChBKS9RKSpzICsgMSkvKHNeMiArIChzcXJ0KEEpL1EpKnMgKyBBKVxyXG5cclxuLy8gQmlxdWFkIGZpbHRlciBwYXJhbWV0ZXIgdHlwZXNcclxuRFNQLlEgPSAxO1xyXG5EU1AuQlcgPSAyOyAvLyBTSEFSRUQgd2l0aCBCQUNLV0FSRFMgTE9PUCBNT0RFXHJcbkRTUC5TID0gMztcclxuXHJcbi8vIEZpbmQgUk1TIG9mIHNpZ25hbFxyXG5EU1AuUk1TID0gZnVuY3Rpb24oYnVmZmVyKSB7XHJcbiAgdmFyIHRvdGFsID0gMDtcclxuICBcclxuICBmb3IgKHZhciBpID0gMCwgbiA9IGJ1ZmZlci5sZW5ndGg7IGkgPCBuOyBpKyspIHtcclxuICAgIHRvdGFsICs9IGJ1ZmZlcltpXSAqIGJ1ZmZlcltpXTtcclxuICB9XHJcbiAgXHJcbiAgcmV0dXJuIE1hdGguc3FydCh0b3RhbCAvIG4pO1xyXG59O1xyXG5cclxuLy8gRmluZCBQZWFrIG9mIHNpZ25hbFxyXG5EU1AuUGVhayA9IGZ1bmN0aW9uKGJ1ZmZlcikge1xyXG4gIHZhciBwZWFrID0gMDtcclxuICBcclxuICBmb3IgKHZhciBpID0gMCwgbiA9IGJ1ZmZlci5sZW5ndGg7IGkgPCBuOyBpKyspIHtcclxuICAgIHBlYWsgPSAoTWF0aC5hYnMoYnVmZmVyW2ldKSA+IHBlYWspID8gTWF0aC5hYnMoYnVmZmVyW2ldKSA6IHBlYWs7IFxyXG4gIH1cclxuICBcclxuICByZXR1cm4gcGVhaztcclxufTtcclxuXHJcbi8vIEZvdXJpZXIgVHJhbnNmb3JtIE1vZHVsZSB1c2VkIGJ5IERGVCwgRkZULCBSRkZUXHJcbmZ1bmN0aW9uIEZvdXJpZXJUcmFuc2Zvcm0oYnVmZmVyU2l6ZSwgc2FtcGxlUmF0ZSkge1xyXG4gIHRoaXMuYnVmZmVyU2l6ZSA9IGJ1ZmZlclNpemU7XHJcbiAgdGhpcy5zYW1wbGVSYXRlID0gc2FtcGxlUmF0ZTtcclxuICB0aGlzLmJhbmR3aWR0aCAgPSAyIC8gYnVmZmVyU2l6ZSAqIHNhbXBsZVJhdGUgLyAyO1xyXG5cclxuICB0aGlzLnNwZWN0cnVtICAgPSBuZXcgRmxvYXQzMkFycmF5KGJ1ZmZlclNpemUvMik7XHJcbiAgdGhpcy5yZWFsICAgICAgID0gbmV3IEZsb2F0MzJBcnJheShidWZmZXJTaXplKTtcclxuICB0aGlzLmltYWcgICAgICAgPSBuZXcgRmxvYXQzMkFycmF5KGJ1ZmZlclNpemUpO1xyXG5cclxuICB0aGlzLnBlYWtCYW5kICAgPSAwO1xyXG4gIHRoaXMucGVhayAgICAgICA9IDA7XHJcblxyXG4gIC8qKlxyXG4gICAqIENhbGN1bGF0ZXMgdGhlICptaWRkbGUqIGZyZXF1ZW5jeSBvZiBhbiBGRlQgYmFuZC5cclxuICAgKlxyXG4gICAqIEBwYXJhbSB7TnVtYmVyfSBpbmRleCBUaGUgaW5kZXggb2YgdGhlIEZGVCBiYW5kLlxyXG4gICAqXHJcbiAgICogQHJldHVybnMgVGhlIG1pZGRsZSBmcmVxdWVuY3kgaW4gSHouXHJcbiAgICovXHJcbiAgdGhpcy5nZXRCYW5kRnJlcXVlbmN5ID0gZnVuY3Rpb24oaW5kZXgpIHtcclxuICAgIHJldHVybiB0aGlzLmJhbmR3aWR0aCAqIGluZGV4ICsgdGhpcy5iYW5kd2lkdGggLyAyO1xyXG4gIH07XHJcblxyXG4gIHRoaXMuY2FsY3VsYXRlU3BlY3RydW0gPSBmdW5jdGlvbigpIHtcclxuICAgIHZhciBzcGVjdHJ1bSAgPSB0aGlzLnNwZWN0cnVtLFxyXG4gICAgICAgIHJlYWwgICAgICA9IHRoaXMucmVhbCxcclxuICAgICAgICBpbWFnICAgICAgPSB0aGlzLmltYWcsXHJcbiAgICAgICAgYlNpICAgICAgID0gMiAvIHRoaXMuYnVmZmVyU2l6ZSxcclxuICAgICAgICBzcXJ0ICAgICAgPSBNYXRoLnNxcnQsXHJcbiAgICAgICAgcnZhbCwgXHJcbiAgICAgICAgaXZhbCxcclxuICAgICAgICBtYWc7XHJcblxyXG4gICAgZm9yICh2YXIgaSA9IDAsIE4gPSBidWZmZXJTaXplLzI7IGkgPCBOOyBpKyspIHtcclxuICAgICAgcnZhbCA9IHJlYWxbaV07XHJcbiAgICAgIGl2YWwgPSBpbWFnW2ldO1xyXG4gICAgICBtYWcgPSBiU2kgKiBzcXJ0KHJ2YWwgKiBydmFsICsgaXZhbCAqIGl2YWwpO1xyXG5cclxuICAgICAgaWYgKG1hZyA+IHRoaXMucGVhaykge1xyXG4gICAgICAgIHRoaXMucGVha0JhbmQgPSBpO1xyXG4gICAgICAgIHRoaXMucGVhayA9IG1hZztcclxuICAgICAgfVxyXG5cclxuICAgICAgc3BlY3RydW1baV0gPSBtYWc7XHJcbiAgICB9XHJcbiAgfTtcclxufVxyXG5cclxuLyoqXHJcbiAqIERGVCBpcyBhIGNsYXNzIGZvciBjYWxjdWxhdGluZyB0aGUgRGlzY3JldGUgRm91cmllciBUcmFuc2Zvcm0gb2YgYSBzaWduYWwuXHJcbiAqXHJcbiAqIEBwYXJhbSB7TnVtYmVyfSBidWZmZXJTaXplIFRoZSBzaXplIG9mIHRoZSBzYW1wbGUgYnVmZmVyIHRvIGJlIGNvbXB1dGVkXHJcbiAqIEBwYXJhbSB7TnVtYmVyfSBzYW1wbGVSYXRlIFRoZSBzYW1wbGVSYXRlIG9mIHRoZSBidWZmZXIgKGVnLiA0NDEwMClcclxuICpcclxuICogQGNvbnN0cnVjdG9yXHJcbiAqL1xyXG5mdW5jdGlvbiBERlQoYnVmZmVyU2l6ZSwgc2FtcGxlUmF0ZSkge1xyXG4gIEZvdXJpZXJUcmFuc2Zvcm0uY2FsbCh0aGlzLCBidWZmZXJTaXplLCBzYW1wbGVSYXRlKTtcclxuXHJcbiAgdmFyIE4gPSBidWZmZXJTaXplLzIgKiBidWZmZXJTaXplO1xyXG4gIHZhciBUV09fUEkgPSAyICogTWF0aC5QSTtcclxuXHJcbiAgdGhpcy5zaW5UYWJsZSA9IG5ldyBGbG9hdDMyQXJyYXkoTik7XHJcbiAgdGhpcy5jb3NUYWJsZSA9IG5ldyBGbG9hdDMyQXJyYXkoTik7XHJcblxyXG4gIGZvciAodmFyIGkgPSAwOyBpIDwgTjsgaSsrKSB7XHJcbiAgICB0aGlzLnNpblRhYmxlW2ldID0gTWF0aC5zaW4oaSAqIFRXT19QSSAvIGJ1ZmZlclNpemUpO1xyXG4gICAgdGhpcy5jb3NUYWJsZVtpXSA9IE1hdGguY29zKGkgKiBUV09fUEkgLyBidWZmZXJTaXplKTtcclxuICB9XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBQZXJmb3JtcyBhIGZvcndhcmQgdHJhbnNmb3JtIG9uIHRoZSBzYW1wbGUgYnVmZmVyLlxyXG4gKiBDb252ZXJ0cyBhIHRpbWUgZG9tYWluIHNpZ25hbCB0byBmcmVxdWVuY3kgZG9tYWluIHNwZWN0cmEuXHJcbiAqXHJcbiAqIEBwYXJhbSB7QXJyYXl9IGJ1ZmZlciBUaGUgc2FtcGxlIGJ1ZmZlclxyXG4gKlxyXG4gKiBAcmV0dXJucyBUaGUgZnJlcXVlbmN5IHNwZWN0cnVtIGFycmF5XHJcbiAqL1xyXG5ERlQucHJvdG90eXBlLmZvcndhcmQgPSBmdW5jdGlvbihidWZmZXIpIHtcclxuICB2YXIgcmVhbCA9IHRoaXMucmVhbCwgXHJcbiAgICAgIGltYWcgPSB0aGlzLmltYWcsXHJcbiAgICAgIHJ2YWwsXHJcbiAgICAgIGl2YWw7XHJcblxyXG4gIGZvciAodmFyIGsgPSAwOyBrIDwgdGhpcy5idWZmZXJTaXplLzI7IGsrKykge1xyXG4gICAgcnZhbCA9IDAuMDtcclxuICAgIGl2YWwgPSAwLjA7XHJcblxyXG4gICAgZm9yICh2YXIgbiA9IDA7IG4gPCBidWZmZXIubGVuZ3RoOyBuKyspIHtcclxuICAgICAgcnZhbCArPSB0aGlzLmNvc1RhYmxlW2sqbl0gKiBidWZmZXJbbl07XHJcbiAgICAgIGl2YWwgKz0gdGhpcy5zaW5UYWJsZVtrKm5dICogYnVmZmVyW25dO1xyXG4gICAgfVxyXG5cclxuICAgIHJlYWxba10gPSBydmFsO1xyXG4gICAgaW1hZ1trXSA9IGl2YWw7XHJcbiAgfVxyXG5cclxuICByZXR1cm4gdGhpcy5jYWxjdWxhdGVTcGVjdHJ1bSgpO1xyXG59O1xyXG5cclxuXHJcbi8qKlxyXG4gKiBGRlQgaXMgYSBjbGFzcyBmb3IgY2FsY3VsYXRpbmcgdGhlIERpc2NyZXRlIEZvdXJpZXIgVHJhbnNmb3JtIG9mIGEgc2lnbmFsXHJcbiAqIHdpdGggdGhlIEZhc3QgRm91cmllciBUcmFuc2Zvcm0gYWxnb3JpdGhtLlxyXG4gKlxyXG4gKiBAcGFyYW0ge051bWJlcn0gYnVmZmVyU2l6ZSBUaGUgc2l6ZSBvZiB0aGUgc2FtcGxlIGJ1ZmZlciB0byBiZSBjb21wdXRlZC4gTXVzdCBiZSBwb3dlciBvZiAyXHJcbiAqIEBwYXJhbSB7TnVtYmVyfSBzYW1wbGVSYXRlIFRoZSBzYW1wbGVSYXRlIG9mIHRoZSBidWZmZXIgKGVnLiA0NDEwMClcclxuICpcclxuICogQGNvbnN0cnVjdG9yXHJcbiAqL1xyXG5mdW5jdGlvbiBGRlQoYnVmZmVyU2l6ZSwgc2FtcGxlUmF0ZSkge1xyXG4gIEZvdXJpZXJUcmFuc2Zvcm0uY2FsbCh0aGlzLCBidWZmZXJTaXplLCBzYW1wbGVSYXRlKTtcclxuICAgXHJcbiAgdGhpcy5yZXZlcnNlVGFibGUgPSBuZXcgVWludDMyQXJyYXkoYnVmZmVyU2l6ZSk7XHJcblxyXG4gIHZhciBsaW1pdCA9IDE7XHJcbiAgdmFyIGJpdCA9IGJ1ZmZlclNpemUgPj4gMTtcclxuXHJcbiAgdmFyIGk7XHJcblxyXG4gIHdoaWxlIChsaW1pdCA8IGJ1ZmZlclNpemUpIHtcclxuICAgIGZvciAoaSA9IDA7IGkgPCBsaW1pdDsgaSsrKSB7XHJcbiAgICAgIHRoaXMucmV2ZXJzZVRhYmxlW2kgKyBsaW1pdF0gPSB0aGlzLnJldmVyc2VUYWJsZVtpXSArIGJpdDtcclxuICAgIH1cclxuXHJcbiAgICBsaW1pdCA9IGxpbWl0IDw8IDE7XHJcbiAgICBiaXQgPSBiaXQgPj4gMTtcclxuICB9XHJcblxyXG4gIHRoaXMuc2luVGFibGUgPSBuZXcgRmxvYXQzMkFycmF5KGJ1ZmZlclNpemUpO1xyXG4gIHRoaXMuY29zVGFibGUgPSBuZXcgRmxvYXQzMkFycmF5KGJ1ZmZlclNpemUpO1xyXG5cclxuICBmb3IgKGkgPSAwOyBpIDwgYnVmZmVyU2l6ZTsgaSsrKSB7XHJcbiAgICB0aGlzLnNpblRhYmxlW2ldID0gTWF0aC5zaW4oLU1hdGguUEkvaSk7XHJcbiAgICB0aGlzLmNvc1RhYmxlW2ldID0gTWF0aC5jb3MoLU1hdGguUEkvaSk7XHJcbiAgfVxyXG59XHJcblxyXG4vKipcclxuICogUGVyZm9ybXMgYSBmb3J3YXJkIHRyYW5zZm9ybSBvbiB0aGUgc2FtcGxlIGJ1ZmZlci5cclxuICogQ29udmVydHMgYSB0aW1lIGRvbWFpbiBzaWduYWwgdG8gZnJlcXVlbmN5IGRvbWFpbiBzcGVjdHJhLlxyXG4gKlxyXG4gKiBAcGFyYW0ge0FycmF5fSBidWZmZXIgVGhlIHNhbXBsZSBidWZmZXIuIEJ1ZmZlciBMZW5ndGggbXVzdCBiZSBwb3dlciBvZiAyXHJcbiAqXHJcbiAqIEByZXR1cm5zIFRoZSBmcmVxdWVuY3kgc3BlY3RydW0gYXJyYXlcclxuICovXHJcbkZGVC5wcm90b3R5cGUuZm9yd2FyZCA9IGZ1bmN0aW9uKGJ1ZmZlcikge1xyXG4gIC8vIExvY2FsbHkgc2NvcGUgdmFyaWFibGVzIGZvciBzcGVlZCB1cFxyXG4gIHZhciBidWZmZXJTaXplICAgICAgPSB0aGlzLmJ1ZmZlclNpemUsXHJcbiAgICAgIGNvc1RhYmxlICAgICAgICA9IHRoaXMuY29zVGFibGUsXHJcbiAgICAgIHNpblRhYmxlICAgICAgICA9IHRoaXMuc2luVGFibGUsXHJcbiAgICAgIHJldmVyc2VUYWJsZSAgICA9IHRoaXMucmV2ZXJzZVRhYmxlLFxyXG4gICAgICByZWFsICAgICAgICAgICAgPSB0aGlzLnJlYWwsXHJcbiAgICAgIGltYWcgICAgICAgICAgICA9IHRoaXMuaW1hZyxcclxuICAgICAgc3BlY3RydW0gICAgICAgID0gdGhpcy5zcGVjdHJ1bTtcclxuXHJcbiAgdmFyIGsgPSBNYXRoLmZsb29yKE1hdGgubG9nKGJ1ZmZlclNpemUpIC8gTWF0aC5MTjIpO1xyXG5cclxuICBpZiAoTWF0aC5wb3coMiwgaykgIT09IGJ1ZmZlclNpemUpIHsgdGhyb3cgXCJJbnZhbGlkIGJ1ZmZlciBzaXplLCBtdXN0IGJlIGEgcG93ZXIgb2YgMi5cIjsgfVxyXG4gIGlmIChidWZmZXJTaXplICE9PSBidWZmZXIubGVuZ3RoKSAgeyB0aHJvdyBcIlN1cHBsaWVkIGJ1ZmZlciBpcyBub3QgdGhlIHNhbWUgc2l6ZSBhcyBkZWZpbmVkIEZGVC4gRkZUIFNpemU6IFwiICsgYnVmZmVyU2l6ZSArIFwiIEJ1ZmZlciBTaXplOiBcIiArIGJ1ZmZlci5sZW5ndGg7IH1cclxuXHJcbiAgdmFyIGhhbGZTaXplID0gMSxcclxuICAgICAgcGhhc2VTaGlmdFN0ZXBSZWFsLFxyXG4gICAgICBwaGFzZVNoaWZ0U3RlcEltYWcsXHJcbiAgICAgIGN1cnJlbnRQaGFzZVNoaWZ0UmVhbCxcclxuICAgICAgY3VycmVudFBoYXNlU2hpZnRJbWFnLFxyXG4gICAgICBvZmYsXHJcbiAgICAgIHRyLFxyXG4gICAgICB0aSxcclxuICAgICAgdG1wUmVhbCxcclxuICAgICAgaTtcclxuXHJcbiAgZm9yIChpID0gMDsgaSA8IGJ1ZmZlclNpemU7IGkrKykge1xyXG4gICAgcmVhbFtpXSA9IGJ1ZmZlcltyZXZlcnNlVGFibGVbaV1dO1xyXG4gICAgaW1hZ1tpXSA9IDA7XHJcbiAgfVxyXG5cclxuICB3aGlsZSAoaGFsZlNpemUgPCBidWZmZXJTaXplKSB7XHJcbiAgICAvL3BoYXNlU2hpZnRTdGVwUmVhbCA9IE1hdGguY29zKC1NYXRoLlBJL2hhbGZTaXplKTtcclxuICAgIC8vcGhhc2VTaGlmdFN0ZXBJbWFnID0gTWF0aC5zaW4oLU1hdGguUEkvaGFsZlNpemUpO1xyXG4gICAgcGhhc2VTaGlmdFN0ZXBSZWFsID0gY29zVGFibGVbaGFsZlNpemVdO1xyXG4gICAgcGhhc2VTaGlmdFN0ZXBJbWFnID0gc2luVGFibGVbaGFsZlNpemVdO1xyXG4gICAgXHJcbiAgICBjdXJyZW50UGhhc2VTaGlmdFJlYWwgPSAxO1xyXG4gICAgY3VycmVudFBoYXNlU2hpZnRJbWFnID0gMDtcclxuXHJcbiAgICBmb3IgKHZhciBmZnRTdGVwID0gMDsgZmZ0U3RlcCA8IGhhbGZTaXplOyBmZnRTdGVwKyspIHtcclxuICAgICAgaSA9IGZmdFN0ZXA7XHJcblxyXG4gICAgICB3aGlsZSAoaSA8IGJ1ZmZlclNpemUpIHtcclxuICAgICAgICBvZmYgPSBpICsgaGFsZlNpemU7XHJcbiAgICAgICAgdHIgPSAoY3VycmVudFBoYXNlU2hpZnRSZWFsICogcmVhbFtvZmZdKSAtIChjdXJyZW50UGhhc2VTaGlmdEltYWcgKiBpbWFnW29mZl0pO1xyXG4gICAgICAgIHRpID0gKGN1cnJlbnRQaGFzZVNoaWZ0UmVhbCAqIGltYWdbb2ZmXSkgKyAoY3VycmVudFBoYXNlU2hpZnRJbWFnICogcmVhbFtvZmZdKTtcclxuXHJcbiAgICAgICAgcmVhbFtvZmZdID0gcmVhbFtpXSAtIHRyO1xyXG4gICAgICAgIGltYWdbb2ZmXSA9IGltYWdbaV0gLSB0aTtcclxuICAgICAgICByZWFsW2ldICs9IHRyO1xyXG4gICAgICAgIGltYWdbaV0gKz0gdGk7XHJcblxyXG4gICAgICAgIGkgKz0gaGFsZlNpemUgPDwgMTtcclxuICAgICAgfVxyXG5cclxuICAgICAgdG1wUmVhbCA9IGN1cnJlbnRQaGFzZVNoaWZ0UmVhbDtcclxuICAgICAgY3VycmVudFBoYXNlU2hpZnRSZWFsID0gKHRtcFJlYWwgKiBwaGFzZVNoaWZ0U3RlcFJlYWwpIC0gKGN1cnJlbnRQaGFzZVNoaWZ0SW1hZyAqIHBoYXNlU2hpZnRTdGVwSW1hZyk7XHJcbiAgICAgIGN1cnJlbnRQaGFzZVNoaWZ0SW1hZyA9ICh0bXBSZWFsICogcGhhc2VTaGlmdFN0ZXBJbWFnKSArIChjdXJyZW50UGhhc2VTaGlmdEltYWcgKiBwaGFzZVNoaWZ0U3RlcFJlYWwpO1xyXG4gICAgfVxyXG5cclxuICAgIGhhbGZTaXplID0gaGFsZlNpemUgPDwgMTtcclxuICB9XHJcblxyXG4gIHJldHVybiB0aGlzLmNhbGN1bGF0ZVNwZWN0cnVtKCk7XHJcbn07XHJcblxyXG5GRlQucHJvdG90eXBlLmludmVyc2UgPSBmdW5jdGlvbihyZWFsLCBpbWFnKSB7XHJcbiAgLy8gTG9jYWxseSBzY29wZSB2YXJpYWJsZXMgZm9yIHNwZWVkIHVwXHJcbiAgdmFyIGJ1ZmZlclNpemUgICAgICA9IHRoaXMuYnVmZmVyU2l6ZSxcclxuICAgICAgY29zVGFibGUgICAgICAgID0gdGhpcy5jb3NUYWJsZSxcclxuICAgICAgc2luVGFibGUgICAgICAgID0gdGhpcy5zaW5UYWJsZSxcclxuICAgICAgcmV2ZXJzZVRhYmxlICAgID0gdGhpcy5yZXZlcnNlVGFibGUsXHJcbiAgICAgIHNwZWN0cnVtICAgICAgICA9IHRoaXMuc3BlY3RydW07XHJcbiAgICAgXHJcbiAgICAgIHJlYWwgPSByZWFsIHx8IHRoaXMucmVhbDtcclxuICAgICAgaW1hZyA9IGltYWcgfHwgdGhpcy5pbWFnO1xyXG5cclxuICB2YXIgaGFsZlNpemUgPSAxLFxyXG4gICAgICBwaGFzZVNoaWZ0U3RlcFJlYWwsXHJcbiAgICAgIHBoYXNlU2hpZnRTdGVwSW1hZyxcclxuICAgICAgY3VycmVudFBoYXNlU2hpZnRSZWFsLFxyXG4gICAgICBjdXJyZW50UGhhc2VTaGlmdEltYWcsXHJcbiAgICAgIG9mZixcclxuICAgICAgdHIsXHJcbiAgICAgIHRpLFxyXG4gICAgICB0bXBSZWFsLFxyXG4gICAgICBpO1xyXG5cclxuICBmb3IgKGkgPSAwOyBpIDwgYnVmZmVyU2l6ZTsgaSsrKSB7XHJcbiAgICBpbWFnW2ldICo9IC0xO1xyXG4gIH1cclxuXHJcbiAgdmFyIHJldlJlYWwgPSBuZXcgRmxvYXQzMkFycmF5KGJ1ZmZlclNpemUpO1xyXG4gIHZhciByZXZJbWFnID0gbmV3IEZsb2F0MzJBcnJheShidWZmZXJTaXplKTtcclxuIFxyXG4gIGZvciAoaSA9IDA7IGkgPCByZWFsLmxlbmd0aDsgaSsrKSB7XHJcbiAgICByZXZSZWFsW2ldID0gcmVhbFtyZXZlcnNlVGFibGVbaV1dO1xyXG4gICAgcmV2SW1hZ1tpXSA9IGltYWdbcmV2ZXJzZVRhYmxlW2ldXTtcclxuICB9XHJcbiBcclxuICByZWFsID0gcmV2UmVhbDtcclxuICBpbWFnID0gcmV2SW1hZztcclxuXHJcbiAgd2hpbGUgKGhhbGZTaXplIDwgYnVmZmVyU2l6ZSkge1xyXG4gICAgcGhhc2VTaGlmdFN0ZXBSZWFsID0gY29zVGFibGVbaGFsZlNpemVdO1xyXG4gICAgcGhhc2VTaGlmdFN0ZXBJbWFnID0gc2luVGFibGVbaGFsZlNpemVdO1xyXG4gICAgY3VycmVudFBoYXNlU2hpZnRSZWFsID0gMTtcclxuICAgIGN1cnJlbnRQaGFzZVNoaWZ0SW1hZyA9IDA7XHJcblxyXG4gICAgZm9yICh2YXIgZmZ0U3RlcCA9IDA7IGZmdFN0ZXAgPCBoYWxmU2l6ZTsgZmZ0U3RlcCsrKSB7XHJcbiAgICAgIGkgPSBmZnRTdGVwO1xyXG5cclxuICAgICAgd2hpbGUgKGkgPCBidWZmZXJTaXplKSB7XHJcbiAgICAgICAgb2ZmID0gaSArIGhhbGZTaXplO1xyXG4gICAgICAgIHRyID0gKGN1cnJlbnRQaGFzZVNoaWZ0UmVhbCAqIHJlYWxbb2ZmXSkgLSAoY3VycmVudFBoYXNlU2hpZnRJbWFnICogaW1hZ1tvZmZdKTtcclxuICAgICAgICB0aSA9IChjdXJyZW50UGhhc2VTaGlmdFJlYWwgKiBpbWFnW29mZl0pICsgKGN1cnJlbnRQaGFzZVNoaWZ0SW1hZyAqIHJlYWxbb2ZmXSk7XHJcblxyXG4gICAgICAgIHJlYWxbb2ZmXSA9IHJlYWxbaV0gLSB0cjtcclxuICAgICAgICBpbWFnW29mZl0gPSBpbWFnW2ldIC0gdGk7XHJcbiAgICAgICAgcmVhbFtpXSArPSB0cjtcclxuICAgICAgICBpbWFnW2ldICs9IHRpO1xyXG5cclxuICAgICAgICBpICs9IGhhbGZTaXplIDw8IDE7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIHRtcFJlYWwgPSBjdXJyZW50UGhhc2VTaGlmdFJlYWw7XHJcbiAgICAgIGN1cnJlbnRQaGFzZVNoaWZ0UmVhbCA9ICh0bXBSZWFsICogcGhhc2VTaGlmdFN0ZXBSZWFsKSAtIChjdXJyZW50UGhhc2VTaGlmdEltYWcgKiBwaGFzZVNoaWZ0U3RlcEltYWcpO1xyXG4gICAgICBjdXJyZW50UGhhc2VTaGlmdEltYWcgPSAodG1wUmVhbCAqIHBoYXNlU2hpZnRTdGVwSW1hZykgKyAoY3VycmVudFBoYXNlU2hpZnRJbWFnICogcGhhc2VTaGlmdFN0ZXBSZWFsKTtcclxuICAgIH1cclxuXHJcbiAgICBoYWxmU2l6ZSA9IGhhbGZTaXplIDw8IDE7XHJcbiAgfVxyXG5cclxuICB2YXIgYnVmZmVyID0gbmV3IEZsb2F0MzJBcnJheShidWZmZXJTaXplKTsgLy8gdGhpcyBzaG91bGQgYmUgcmV1c2VkIGluc3RlYWRcclxuICBmb3IgKGkgPSAwOyBpIDwgYnVmZmVyU2l6ZTsgaSsrKSB7XHJcbiAgICBidWZmZXJbaV0gPSByZWFsW2ldIC8gYnVmZmVyU2l6ZTtcclxuICB9XHJcblxyXG4gIHJldHVybiBidWZmZXI7XHJcbn07XHJcblxyXG4vKipcclxuICogUkZGVCBpcyBhIGNsYXNzIGZvciBjYWxjdWxhdGluZyB0aGUgRGlzY3JldGUgRm91cmllciBUcmFuc2Zvcm0gb2YgYSBzaWduYWxcclxuICogd2l0aCB0aGUgRmFzdCBGb3VyaWVyIFRyYW5zZm9ybSBhbGdvcml0aG0uXHJcbiAqXHJcbiAqIFRoaXMgbWV0aG9kIGN1cnJlbnRseSBvbmx5IGNvbnRhaW5zIGEgZm9yd2FyZCB0cmFuc2Zvcm0gYnV0IGlzIGhpZ2hseSBvcHRpbWl6ZWQuXHJcbiAqXHJcbiAqIEBwYXJhbSB7TnVtYmVyfSBidWZmZXJTaXplIFRoZSBzaXplIG9mIHRoZSBzYW1wbGUgYnVmZmVyIHRvIGJlIGNvbXB1dGVkLiBNdXN0IGJlIHBvd2VyIG9mIDJcclxuICogQHBhcmFtIHtOdW1iZXJ9IHNhbXBsZVJhdGUgVGhlIHNhbXBsZVJhdGUgb2YgdGhlIGJ1ZmZlciAoZWcuIDQ0MTAwKVxyXG4gKlxyXG4gKiBAY29uc3RydWN0b3JcclxuICovXHJcblxyXG4vLyBsb29rdXAgdGFibGVzIGRvbid0IHJlYWxseSBnYWluIHVzIGFueSBzcGVlZCwgYnV0IHRoZXkgZG8gaW5jcmVhc2VcclxuLy8gY2FjaGUgZm9vdHByaW50LCBzbyBkb24ndCB1c2UgdGhlbSBpbiBoZXJlXHJcblxyXG4vLyBhbHNvIHdlIGRvbid0IHVzZSBzZXBlYXJhdGUgYXJyYXlzIGZvciByZWFsL2ltYWdpbmFyeSBwYXJ0c1xyXG5cclxuLy8gdGhpcyBvbmUgYSBsaXR0bGUgbW9yZSB0aGFuIHR3aWNlIGFzIGZhc3QgYXMgdGhlIG9uZSBpbiBGRlRcclxuLy8gaG93ZXZlciBJIG9ubHkgZGlkIHRoZSBmb3J3YXJkIHRyYW5zZm9ybVxyXG5cclxuLy8gdGhlIHJlc3Qgb2YgdGhpcyB3YXMgdHJhbnNsYXRlZCBmcm9tIEMsIHNlZSBodHRwOi8vd3d3Lmpqai5kZS9meHQvXHJcbi8vIHRoaXMgaXMgdGhlIHJlYWwgc3BsaXQgcmFkaXggRkZUXHJcblxyXG5mdW5jdGlvbiBSRkZUKGJ1ZmZlclNpemUsIHNhbXBsZVJhdGUpIHtcclxuICBGb3VyaWVyVHJhbnNmb3JtLmNhbGwodGhpcywgYnVmZmVyU2l6ZSwgc2FtcGxlUmF0ZSk7XHJcblxyXG4gIHRoaXMudHJhbnMgPSBuZXcgRmxvYXQzMkFycmF5KGJ1ZmZlclNpemUpO1xyXG5cclxuICB0aGlzLnJldmVyc2VUYWJsZSA9IG5ldyBVaW50MzJBcnJheShidWZmZXJTaXplKTtcclxuXHJcbiAgLy8gZG9uJ3QgdXNlIGEgbG9va3VwIHRhYmxlIHRvIGRvIHRoZSBwZXJtdXRlLCB1c2UgdGhpcyBpbnN0ZWFkXHJcbiAgdGhpcy5yZXZlcnNlQmluUGVybXV0ZSA9IGZ1bmN0aW9uIChkZXN0LCBzb3VyY2UpIHtcclxuICAgIHZhciBidWZmZXJTaXplICA9IHRoaXMuYnVmZmVyU2l6ZSwgXHJcbiAgICAgICAgaGFsZlNpemUgICAgPSBidWZmZXJTaXplID4+PiAxLCBcclxuICAgICAgICBubTEgICAgICAgICA9IGJ1ZmZlclNpemUgLSAxLCBcclxuICAgICAgICBpID0gMSwgciA9IDAsIGg7XHJcblxyXG4gICAgZGVzdFswXSA9IHNvdXJjZVswXTtcclxuXHJcbiAgICBkbyB7XHJcbiAgICAgIHIgKz0gaGFsZlNpemU7XHJcbiAgICAgIGRlc3RbaV0gPSBzb3VyY2Vbcl07XHJcbiAgICAgIGRlc3Rbcl0gPSBzb3VyY2VbaV07XHJcbiAgICAgIFxyXG4gICAgICBpKys7XHJcblxyXG4gICAgICBoID0gaGFsZlNpemUgPDwgMTtcclxuICAgICAgd2hpbGUgKGggPSBoID4+IDEsICEoKHIgXj0gaCkgJiBoKSk7XHJcblxyXG4gICAgICBpZiAociA+PSBpKSB7IFxyXG4gICAgICAgIGRlc3RbaV0gICAgID0gc291cmNlW3JdOyBcclxuICAgICAgICBkZXN0W3JdICAgICA9IHNvdXJjZVtpXTtcclxuXHJcbiAgICAgICAgZGVzdFtubTEtaV0gPSBzb3VyY2Vbbm0xLXJdOyBcclxuICAgICAgICBkZXN0W25tMS1yXSA9IHNvdXJjZVtubTEtaV07XHJcbiAgICAgIH1cclxuICAgICAgaSsrO1xyXG4gICAgfSB3aGlsZSAoaSA8IGhhbGZTaXplKTtcclxuICAgIGRlc3Rbbm0xXSA9IHNvdXJjZVtubTFdO1xyXG4gIH07XHJcblxyXG4gIHRoaXMuZ2VuZXJhdGVSZXZlcnNlVGFibGUgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICB2YXIgYnVmZmVyU2l6ZSAgPSB0aGlzLmJ1ZmZlclNpemUsIFxyXG4gICAgICAgIGhhbGZTaXplICAgID0gYnVmZmVyU2l6ZSA+Pj4gMSwgXHJcbiAgICAgICAgbm0xICAgICAgICAgPSBidWZmZXJTaXplIC0gMSwgXHJcbiAgICAgICAgaSA9IDEsIHIgPSAwLCBoO1xyXG5cclxuICAgIHRoaXMucmV2ZXJzZVRhYmxlWzBdID0gMDtcclxuXHJcbiAgICBkbyB7XHJcbiAgICAgIHIgKz0gaGFsZlNpemU7XHJcbiAgICAgIFxyXG4gICAgICB0aGlzLnJldmVyc2VUYWJsZVtpXSA9IHI7XHJcbiAgICAgIHRoaXMucmV2ZXJzZVRhYmxlW3JdID0gaTtcclxuXHJcbiAgICAgIGkrKztcclxuXHJcbiAgICAgIGggPSBoYWxmU2l6ZSA8PCAxO1xyXG4gICAgICB3aGlsZSAoaCA9IGggPj4gMSwgISgociBePSBoKSAmIGgpKTtcclxuXHJcbiAgICAgIGlmIChyID49IGkpIHsgXHJcbiAgICAgICAgdGhpcy5yZXZlcnNlVGFibGVbaV0gPSByO1xyXG4gICAgICAgIHRoaXMucmV2ZXJzZVRhYmxlW3JdID0gaTtcclxuXHJcbiAgICAgICAgdGhpcy5yZXZlcnNlVGFibGVbbm0xLWldID0gbm0xLXI7XHJcbiAgICAgICAgdGhpcy5yZXZlcnNlVGFibGVbbm0xLXJdID0gbm0xLWk7XHJcbiAgICAgIH1cclxuICAgICAgaSsrO1xyXG4gICAgfSB3aGlsZSAoaSA8IGhhbGZTaXplKTtcclxuXHJcbiAgICB0aGlzLnJldmVyc2VUYWJsZVtubTFdID0gbm0xO1xyXG4gIH07XHJcblxyXG4gIHRoaXMuZ2VuZXJhdGVSZXZlcnNlVGFibGUoKTtcclxufVxyXG5cclxuXHJcbi8vIE9yZGVyaW5nIG9mIG91dHB1dDpcclxuLy9cclxuLy8gdHJhbnNbMF0gICAgID0gcmVbMF0gKD09emVybyBmcmVxdWVuY3ksIHB1cmVseSByZWFsKVxyXG4vLyB0cmFuc1sxXSAgICAgPSByZVsxXVxyXG4vLyAgICAgICAgICAgICAuLi5cclxuLy8gdHJhbnNbbi8yLTFdID0gcmVbbi8yLTFdXHJcbi8vIHRyYW5zW24vMl0gICA9IHJlW24vMl0gICAgKD09bnlxdWlzdCBmcmVxdWVuY3ksIHB1cmVseSByZWFsKVxyXG4vL1xyXG4vLyB0cmFuc1tuLzIrMV0gPSBpbVtuLzItMV1cclxuLy8gdHJhbnNbbi8yKzJdID0gaW1bbi8yLTJdXHJcbi8vICAgICAgICAgICAgIC4uLlxyXG4vLyB0cmFuc1tuLTFdICAgPSBpbVsxXSBcclxuXHJcblJGRlQucHJvdG90eXBlLmZvcndhcmQgPSBmdW5jdGlvbihidWZmZXIpIHtcclxuICB2YXIgbiAgICAgICAgID0gdGhpcy5idWZmZXJTaXplLCBcclxuICAgICAgc3BlY3RydW0gID0gdGhpcy5zcGVjdHJ1bSxcclxuICAgICAgeCAgICAgICAgID0gdGhpcy50cmFucywgXHJcbiAgICAgIFRXT19QSSAgICA9IDIqTWF0aC5QSSxcclxuICAgICAgc3FydCAgICAgID0gTWF0aC5zcXJ0LFxyXG4gICAgICBpICAgICAgICAgPSBuID4+PiAxLFxyXG4gICAgICBiU2kgICAgICAgPSAyIC8gbixcclxuICAgICAgbjIsIG40LCBuOCwgbm4sIFxyXG4gICAgICB0MSwgdDIsIHQzLCB0NCwgXHJcbiAgICAgIGkxLCBpMiwgaTMsIGk0LCBpNSwgaTYsIGk3LCBpOCwgXHJcbiAgICAgIHN0MSwgY2MxLCBzczEsIGNjMywgc3MzLFxyXG4gICAgICBlLCBcclxuICAgICAgYSxcclxuICAgICAgcnZhbCwgaXZhbCwgbWFnOyBcclxuXHJcbiAgdGhpcy5yZXZlcnNlQmluUGVybXV0ZSh4LCBidWZmZXIpO1xyXG5cclxuICAvKlxyXG4gIHZhciByZXZlcnNlVGFibGUgPSB0aGlzLnJldmVyc2VUYWJsZTtcclxuXHJcbiAgZm9yICh2YXIgayA9IDAsIGxlbiA9IHJldmVyc2VUYWJsZS5sZW5ndGg7IGsgPCBsZW47IGsrKykge1xyXG4gICAgeFtrXSA9IGJ1ZmZlcltyZXZlcnNlVGFibGVba11dO1xyXG4gIH1cclxuICAqL1xyXG5cclxuICBmb3IgKHZhciBpeCA9IDAsIGlkID0gNDsgaXggPCBuOyBpZCAqPSA0KSB7XHJcbiAgICBmb3IgKHZhciBpMCA9IGl4OyBpMCA8IG47IGkwICs9IGlkKSB7XHJcbiAgICAgIC8vc3VtZGlmZih4W2kwXSwgeFtpMCsxXSk7IC8vIHthLCBifSAgPC0tfCB7YStiLCBhLWJ9XHJcbiAgICAgIHN0MSA9IHhbaTBdIC0geFtpMCsxXTtcclxuICAgICAgeFtpMF0gKz0geFtpMCsxXTtcclxuICAgICAgeFtpMCsxXSA9IHN0MTtcclxuICAgIH0gXHJcbiAgICBpeCA9IDIqKGlkLTEpO1xyXG4gIH1cclxuXHJcbiAgbjIgPSAyO1xyXG4gIG5uID0gbiA+Pj4gMTtcclxuXHJcbiAgd2hpbGUoKG5uID0gbm4gPj4+IDEpKSB7XHJcbiAgICBpeCA9IDA7XHJcbiAgICBuMiA9IG4yIDw8IDE7XHJcbiAgICBpZCA9IG4yIDw8IDE7XHJcbiAgICBuNCA9IG4yID4+PiAyO1xyXG4gICAgbjggPSBuMiA+Pj4gMztcclxuICAgIGRvIHtcclxuICAgICAgaWYobjQgIT09IDEpIHtcclxuICAgICAgICBmb3IoaTAgPSBpeDsgaTAgPCBuOyBpMCArPSBpZCkge1xyXG4gICAgICAgICAgaTEgPSBpMDtcclxuICAgICAgICAgIGkyID0gaTEgKyBuNDtcclxuICAgICAgICAgIGkzID0gaTIgKyBuNDtcclxuICAgICAgICAgIGk0ID0gaTMgKyBuNDtcclxuICAgICBcclxuICAgICAgICAgIC8vZGlmZnN1bTNfcih4W2kzXSwgeFtpNF0sIHQxKTsgLy8ge2EsIGIsIHN9IDwtLXwge2EsIGItYSwgYStifVxyXG4gICAgICAgICAgdDEgPSB4W2kzXSArIHhbaTRdO1xyXG4gICAgICAgICAgeFtpNF0gLT0geFtpM107XHJcbiAgICAgICAgICAvL3N1bWRpZmYzKHhbaTFdLCB0MSwgeFtpM10pOyAgIC8vIHthLCBiLCBkfSA8LS18IHthK2IsIGIsIGEtYn1cclxuICAgICAgICAgIHhbaTNdID0geFtpMV0gLSB0MTsgXHJcbiAgICAgICAgICB4W2kxXSArPSB0MTtcclxuICAgICBcclxuICAgICAgICAgIGkxICs9IG44O1xyXG4gICAgICAgICAgaTIgKz0gbjg7XHJcbiAgICAgICAgICBpMyArPSBuODtcclxuICAgICAgICAgIGk0ICs9IG44O1xyXG4gICAgICAgICBcclxuICAgICAgICAgIC8vc3VtZGlmZih4W2kzXSwgeFtpNF0sIHQxLCB0Mik7IC8vIHtzLCBkfSAgPC0tfCB7YStiLCBhLWJ9XHJcbiAgICAgICAgICB0MSA9IHhbaTNdICsgeFtpNF07XHJcbiAgICAgICAgICB0MiA9IHhbaTNdIC0geFtpNF07XHJcbiAgICAgICAgIFxyXG4gICAgICAgICAgdDEgPSAtdDEgKiBNYXRoLlNRUlQxXzI7XHJcbiAgICAgICAgICB0MiAqPSBNYXRoLlNRUlQxXzI7XHJcbiAgICAgXHJcbiAgICAgICAgICAvLyBzdW1kaWZmKHQxLCB4W2kyXSwgeFtpNF0sIHhbaTNdKTsgLy8ge3MsIGR9ICA8LS18IHthK2IsIGEtYn1cclxuICAgICAgICAgIHN0MSA9IHhbaTJdO1xyXG4gICAgICAgICAgeFtpNF0gPSB0MSArIHN0MTsgXHJcbiAgICAgICAgICB4W2kzXSA9IHQxIC0gc3QxO1xyXG4gICAgICAgICAgXHJcbiAgICAgICAgICAvL3N1bWRpZmYzKHhbaTFdLCB0MiwgeFtpMl0pOyAvLyB7YSwgYiwgZH0gPC0tfCB7YStiLCBiLCBhLWJ9XHJcbiAgICAgICAgICB4W2kyXSA9IHhbaTFdIC0gdDI7XHJcbiAgICAgICAgICB4W2kxXSArPSB0MjtcclxuICAgICAgICB9XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgZm9yKGkwID0gaXg7IGkwIDwgbjsgaTAgKz0gaWQpIHtcclxuICAgICAgICAgIGkxID0gaTA7XHJcbiAgICAgICAgICBpMiA9IGkxICsgbjQ7XHJcbiAgICAgICAgICBpMyA9IGkyICsgbjQ7XHJcbiAgICAgICAgICBpNCA9IGkzICsgbjQ7XHJcbiAgICAgXHJcbiAgICAgICAgICAvL2RpZmZzdW0zX3IoeFtpM10sIHhbaTRdLCB0MSk7IC8vIHthLCBiLCBzfSA8LS18IHthLCBiLWEsIGErYn1cclxuICAgICAgICAgIHQxID0geFtpM10gKyB4W2k0XTsgXHJcbiAgICAgICAgICB4W2k0XSAtPSB4W2kzXTtcclxuICAgICAgICAgIFxyXG4gICAgICAgICAgLy9zdW1kaWZmMyh4W2kxXSwgdDEsIHhbaTNdKTsgICAvLyB7YSwgYiwgZH0gPC0tfCB7YStiLCBiLCBhLWJ9XHJcbiAgICAgICAgICB4W2kzXSA9IHhbaTFdIC0gdDE7IFxyXG4gICAgICAgICAgeFtpMV0gKz0gdDE7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgIFxyXG4gICAgICBpeCA9IChpZCA8PCAxKSAtIG4yO1xyXG4gICAgICBpZCA9IGlkIDw8IDI7XHJcbiAgICB9IHdoaWxlIChpeCA8IG4pO1xyXG4gXHJcbiAgICBlID0gVFdPX1BJIC8gbjI7XHJcblxyXG4gICAgZm9yICh2YXIgaiA9IDE7IGogPCBuODsgaisrKSB7XHJcbiAgICAgIGEgPSBqICogZTtcclxuICAgICAgc3MxID0gTWF0aC5zaW4oYSk7XHJcbiAgICAgIGNjMSA9IE1hdGguY29zKGEpO1xyXG5cclxuICAgICAgLy9zczMgPSBzaW4oMyphKTsgY2MzID0gY29zKDMqYSk7XHJcbiAgICAgIGNjMyA9IDQqY2MxKihjYzEqY2MxLTAuNzUpO1xyXG4gICAgICBzczMgPSA0KnNzMSooMC43NS1zczEqc3MxKTtcclxuICAgXHJcbiAgICAgIGl4ID0gMDsgaWQgPSBuMiA8PCAxO1xyXG4gICAgICBkbyB7XHJcbiAgICAgICAgZm9yIChpMCA9IGl4OyBpMCA8IG47IGkwICs9IGlkKSB7XHJcbiAgICAgICAgICBpMSA9IGkwICsgajtcclxuICAgICAgICAgIGkyID0gaTEgKyBuNDtcclxuICAgICAgICAgIGkzID0gaTIgKyBuNDtcclxuICAgICAgICAgIGk0ID0gaTMgKyBuNDtcclxuICAgICAgIFxyXG4gICAgICAgICAgaTUgPSBpMCArIG40IC0gajtcclxuICAgICAgICAgIGk2ID0gaTUgKyBuNDtcclxuICAgICAgICAgIGk3ID0gaTYgKyBuNDtcclxuICAgICAgICAgIGk4ID0gaTcgKyBuNDtcclxuICAgICAgIFxyXG4gICAgICAgICAgLy9jbXVsdChjLCBzLCB4LCB5LCAmdSwgJnYpXHJcbiAgICAgICAgICAvL2NtdWx0KGNjMSwgc3MxLCB4W2k3XSwgeFtpM10sIHQyLCB0MSk7IC8vIHt1LHZ9IDwtLXwge3gqYy15KnMsIHgqcyt5KmN9XHJcbiAgICAgICAgICB0MiA9IHhbaTddKmNjMSAtIHhbaTNdKnNzMTsgXHJcbiAgICAgICAgICB0MSA9IHhbaTddKnNzMSArIHhbaTNdKmNjMTtcclxuICAgICAgICAgIFxyXG4gICAgICAgICAgLy9jbXVsdChjYzMsIHNzMywgeFtpOF0sIHhbaTRdLCB0NCwgdDMpO1xyXG4gICAgICAgICAgdDQgPSB4W2k4XSpjYzMgLSB4W2k0XSpzczM7IFxyXG4gICAgICAgICAgdDMgPSB4W2k4XSpzczMgKyB4W2k0XSpjYzM7XHJcbiAgICAgICBcclxuICAgICAgICAgIC8vc3VtZGlmZih0MiwgdDQpOyAgIC8vIHthLCBifSA8LS18IHthK2IsIGEtYn1cclxuICAgICAgICAgIHN0MSA9IHQyIC0gdDQ7XHJcbiAgICAgICAgICB0MiArPSB0NDtcclxuICAgICAgICAgIHQ0ID0gc3QxO1xyXG4gICAgICAgICAgXHJcbiAgICAgICAgICAvL3N1bWRpZmYodDIsIHhbaTZdLCB4W2k4XSwgeFtpM10pOyAvLyB7cywgZH0gIDwtLXwge2ErYiwgYS1ifVxyXG4gICAgICAgICAgLy9zdDEgPSB4W2k2XTsgeFtpOF0gPSB0MiArIHN0MTsgeFtpM10gPSB0MiAtIHN0MTtcclxuICAgICAgICAgIHhbaThdID0gdDIgKyB4W2k2XTsgXHJcbiAgICAgICAgICB4W2kzXSA9IHQyIC0geFtpNl07XHJcbiAgICAgICAgIFxyXG4gICAgICAgICAgLy9zdW1kaWZmX3IodDEsIHQzKTsgLy8ge2EsIGJ9IDwtLXwge2ErYiwgYi1hfVxyXG4gICAgICAgICAgc3QxID0gdDMgLSB0MTtcclxuICAgICAgICAgIHQxICs9IHQzO1xyXG4gICAgICAgICAgdDMgPSBzdDE7XHJcbiAgICAgICAgICBcclxuICAgICAgICAgIC8vc3VtZGlmZih0MywgeFtpMl0sIHhbaTRdLCB4W2k3XSk7IC8vIHtzLCBkfSAgPC0tfCB7YStiLCBhLWJ9XHJcbiAgICAgICAgICAvL3N0MSA9IHhbaTJdOyB4W2k0XSA9IHQzICsgc3QxOyB4W2k3XSA9IHQzIC0gc3QxO1xyXG4gICAgICAgICAgeFtpNF0gPSB0MyArIHhbaTJdOyBcclxuICAgICAgICAgIHhbaTddID0gdDMgLSB4W2kyXTtcclxuICAgICAgICAgXHJcbiAgICAgICAgICAvL3N1bWRpZmYzKHhbaTFdLCB0MSwgeFtpNl0pOyAgIC8vIHthLCBiLCBkfSA8LS18IHthK2IsIGIsIGEtYn1cclxuICAgICAgICAgIHhbaTZdID0geFtpMV0gLSB0MTsgXHJcbiAgICAgICAgICB4W2kxXSArPSB0MTtcclxuICAgICAgICAgIFxyXG4gICAgICAgICAgLy9kaWZmc3VtM19yKHQ0LCB4W2k1XSwgeFtpMl0pOyAvLyB7YSwgYiwgc30gPC0tfCB7YSwgYi1hLCBhK2J9XHJcbiAgICAgICAgICB4W2kyXSA9IHQ0ICsgeFtpNV07IFxyXG4gICAgICAgICAgeFtpNV0gLT0gdDQ7XHJcbiAgICAgICAgfVxyXG4gICAgIFxyXG4gICAgICAgIGl4ID0gKGlkIDw8IDEpIC0gbjI7XHJcbiAgICAgICAgaWQgPSBpZCA8PCAyO1xyXG4gICBcclxuICAgICAgfSB3aGlsZSAoaXggPCBuKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHdoaWxlICgtLWkpIHtcclxuICAgIHJ2YWwgPSB4W2ldO1xyXG4gICAgaXZhbCA9IHhbbi1pLTFdO1xyXG4gICAgbWFnID0gYlNpICogc3FydChydmFsICogcnZhbCArIGl2YWwgKiBpdmFsKTtcclxuXHJcbiAgICBpZiAobWFnID4gdGhpcy5wZWFrKSB7XHJcbiAgICAgIHRoaXMucGVha0JhbmQgPSBpO1xyXG4gICAgICB0aGlzLnBlYWsgPSBtYWc7XHJcbiAgICB9XHJcblxyXG4gICAgc3BlY3RydW1baV0gPSBtYWc7XHJcbiAgfVxyXG5cclxuICBzcGVjdHJ1bVswXSA9IGJTaSAqIHhbMF07XHJcblxyXG4gIHJldHVybiBzcGVjdHJ1bTtcclxufTtcclxuXHJcbmZ1bmN0aW9uIFNhbXBsZXIoZmlsZSwgYnVmZmVyU2l6ZSwgc2FtcGxlUmF0ZSwgcGxheVN0YXJ0LCBwbGF5RW5kLCBsb29wU3RhcnQsIGxvb3BFbmQsIGxvb3BNb2RlKSB7XHJcbiAgdGhpcy5maWxlID0gZmlsZTtcclxuICB0aGlzLmJ1ZmZlclNpemUgPSBidWZmZXJTaXplO1xyXG4gIHRoaXMuc2FtcGxlUmF0ZSA9IHNhbXBsZVJhdGU7XHJcbiAgdGhpcy5wbGF5U3RhcnQgID0gcGxheVN0YXJ0IHx8IDA7IC8vIDAlXHJcbiAgdGhpcy5wbGF5RW5kICAgID0gcGxheUVuZCAgIHx8IDE7IC8vIDEwMCVcclxuICB0aGlzLmxvb3BTdGFydCAgPSBsb29wU3RhcnQgfHwgMDtcclxuICB0aGlzLmxvb3BFbmQgICAgPSBsb29wRW5kICAgfHwgMTtcclxuICB0aGlzLmxvb3BNb2RlICAgPSBsb29wTW9kZSAgfHwgRFNQLk9GRjtcclxuICB0aGlzLmxvYWRlZCAgICAgPSBmYWxzZTtcclxuICB0aGlzLnNhbXBsZXMgICAgPSBbXTtcclxuICB0aGlzLnNpZ25hbCAgICAgPSBuZXcgRmxvYXQzMkFycmF5KGJ1ZmZlclNpemUpO1xyXG4gIHRoaXMuZnJhbWVDb3VudCA9IDA7XHJcbiAgdGhpcy5lbnZlbG9wZSAgID0gbnVsbDtcclxuICB0aGlzLmFtcGxpdHVkZSAgPSAxO1xyXG4gIHRoaXMucm9vdEZyZXF1ZW5jeSA9IDExMDsgLy8gQTIgMTEwXHJcbiAgdGhpcy5mcmVxdWVuY3kgID0gNTUwO1xyXG4gIHRoaXMuc3RlcCAgICAgICA9IHRoaXMuZnJlcXVlbmN5IC8gdGhpcy5yb290RnJlcXVlbmN5O1xyXG4gIHRoaXMuZHVyYXRpb24gICA9IDA7XHJcbiAgdGhpcy5zYW1wbGVzUHJvY2Vzc2VkID0gMDtcclxuICB0aGlzLnBsYXloZWFkICAgPSAwO1xyXG4gXHJcbiAgdmFyIGF1ZGlvID0gLyogbmV3IEF1ZGlvKCk7Ki8gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcIkFVRElPXCIpO1xyXG4gIHZhciBzZWxmID0gdGhpcztcclxuIFxyXG4gIHRoaXMubG9hZFNhbXBsZXMgPSBmdW5jdGlvbihldmVudCkge1xyXG4gICAgdmFyIGJ1ZmZlciA9IERTUC5nZXRDaGFubmVsKERTUC5NSVgsIGV2ZW50LmZyYW1lQnVmZmVyKTtcclxuICAgIGZvciAoIHZhciBpID0gMDsgaSA8IGJ1ZmZlci5sZW5ndGg7IGkrKykge1xyXG4gICAgICBzZWxmLnNhbXBsZXMucHVzaChidWZmZXJbaV0pO1xyXG4gICAgfVxyXG4gIH07XHJcbiBcclxuICB0aGlzLmxvYWRDb21wbGV0ZSA9IGZ1bmN0aW9uKCkge1xyXG4gICAgLy8gY29udmVydCBmbGV4aWJsZSBqcyBhcnJheSBpbnRvIGEgZmFzdCB0eXBlZCBhcnJheVxyXG4gICAgc2VsZi5zYW1wbGVzID0gbmV3IEZsb2F0MzJBcnJheShzZWxmLnNhbXBsZXMpO1xyXG4gICAgc2VsZi5sb2FkZWQgPSB0cnVlO1xyXG4gIH07XHJcbiBcclxuICB0aGlzLmxvYWRNZXRhRGF0YSA9IGZ1bmN0aW9uKCkge1xyXG4gICAgc2VsZi5kdXJhdGlvbiA9IGF1ZGlvLmR1cmF0aW9uO1xyXG4gIH07XHJcbiBcclxuICBhdWRpby5hZGRFdmVudExpc3RlbmVyKFwiTW96QXVkaW9BdmFpbGFibGVcIiwgdGhpcy5sb2FkU2FtcGxlcywgZmFsc2UpO1xyXG4gIGF1ZGlvLmFkZEV2ZW50TGlzdGVuZXIoXCJsb2FkZWRtZXRhZGF0YVwiLCB0aGlzLmxvYWRNZXRhRGF0YSwgZmFsc2UpO1xyXG4gIGF1ZGlvLmFkZEV2ZW50TGlzdGVuZXIoXCJlbmRlZFwiLCB0aGlzLmxvYWRDb21wbGV0ZSwgZmFsc2UpO1xyXG4gIGF1ZGlvLm11dGVkID0gdHJ1ZTtcclxuICBhdWRpby5zcmMgPSBmaWxlO1xyXG4gIGF1ZGlvLnBsYXkoKTtcclxufVxyXG5cclxuU2FtcGxlci5wcm90b3R5cGUuYXBwbHlFbnZlbG9wZSA9IGZ1bmN0aW9uKCkge1xyXG4gIHRoaXMuZW52ZWxvcGUucHJvY2Vzcyh0aGlzLnNpZ25hbCk7XHJcbiAgcmV0dXJuIHRoaXMuc2lnbmFsO1xyXG59O1xyXG5cclxuU2FtcGxlci5wcm90b3R5cGUuZ2VuZXJhdGUgPSBmdW5jdGlvbigpIHtcclxuICB2YXIgZnJhbWVPZmZzZXQgPSB0aGlzLmZyYW1lQ291bnQgKiB0aGlzLmJ1ZmZlclNpemU7XHJcbiBcclxuICB2YXIgbG9vcFdpZHRoID0gdGhpcy5wbGF5RW5kICogdGhpcy5zYW1wbGVzLmxlbmd0aCAtIHRoaXMucGxheVN0YXJ0ICogdGhpcy5zYW1wbGVzLmxlbmd0aDtcclxuICB2YXIgcGxheVN0YXJ0U2FtcGxlcyA9IHRoaXMucGxheVN0YXJ0ICogdGhpcy5zYW1wbGVzLmxlbmd0aDsgLy8gaWUgMC41IC0+IDUwJSBvZiB0aGUgbGVuZ3RoXHJcbiAgdmFyIHBsYXlFbmRTYW1wbGVzID0gdGhpcy5wbGF5RW5kICogdGhpcy5zYW1wbGVzLmxlbmd0aDsgLy8gaWUgMC41IC0+IDUwJSBvZiB0aGUgbGVuZ3RoXHJcbiAgdmFyIG9mZnNldDtcclxuXHJcbiAgZm9yICggdmFyIGkgPSAwOyBpIDwgdGhpcy5idWZmZXJTaXplOyBpKysgKSB7XHJcbiAgICBzd2l0Y2ggKHRoaXMubG9vcE1vZGUpIHtcclxuICAgICAgY2FzZSBEU1AuT0ZGOlxyXG4gICAgICAgIHRoaXMucGxheWhlYWQgPSBNYXRoLnJvdW5kKHRoaXMuc2FtcGxlc1Byb2Nlc3NlZCAqIHRoaXMuc3RlcCArIHBsYXlTdGFydFNhbXBsZXMpO1xyXG4gICAgICAgIGlmICh0aGlzLnBsYXloZWFkIDwgKHRoaXMucGxheUVuZCAqIHRoaXMuc2FtcGxlcy5sZW5ndGgpICkge1xyXG4gICAgICAgICAgdGhpcy5zaWduYWxbaV0gPSB0aGlzLnNhbXBsZXNbdGhpcy5wbGF5aGVhZF0gKiB0aGlzLmFtcGxpdHVkZTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgdGhpcy5zaWduYWxbaV0gPSAwO1xyXG4gICAgICAgIH1cclxuICAgICAgICBicmVhaztcclxuICAgICBcclxuICAgICAgY2FzZSBEU1AuRlc6XHJcbiAgICAgICAgdGhpcy5wbGF5aGVhZCA9IE1hdGgucm91bmQoKHRoaXMuc2FtcGxlc1Byb2Nlc3NlZCAqIHRoaXMuc3RlcCkgJSBsb29wV2lkdGggKyBwbGF5U3RhcnRTYW1wbGVzKTtcclxuICAgICAgICBpZiAodGhpcy5wbGF5aGVhZCA8ICh0aGlzLnBsYXlFbmQgKiB0aGlzLnNhbXBsZXMubGVuZ3RoKSApIHtcclxuICAgICAgICAgIHRoaXMuc2lnbmFsW2ldID0gdGhpcy5zYW1wbGVzW3RoaXMucGxheWhlYWRdICogdGhpcy5hbXBsaXR1ZGU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGJyZWFrO1xyXG4gICAgICAgXHJcbiAgICAgIGNhc2UgRFNQLkJXOlxyXG4gICAgICAgIHRoaXMucGxheWhlYWQgPSBwbGF5RW5kU2FtcGxlcyAtIE1hdGgucm91bmQoKHRoaXMuc2FtcGxlc1Byb2Nlc3NlZCAqIHRoaXMuc3RlcCkgJSBsb29wV2lkdGgpO1xyXG4gICAgICAgIGlmICh0aGlzLnBsYXloZWFkIDwgKHRoaXMucGxheUVuZCAqIHRoaXMuc2FtcGxlcy5sZW5ndGgpICkge1xyXG4gICAgICAgICAgdGhpcy5zaWduYWxbaV0gPSB0aGlzLnNhbXBsZXNbdGhpcy5wbGF5aGVhZF0gKiB0aGlzLmFtcGxpdHVkZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICAgICBcclxuICAgICAgY2FzZSBEU1AuRldCVzpcclxuICAgICAgICBpZiAoIE1hdGguZmxvb3IodGhpcy5zYW1wbGVzUHJvY2Vzc2VkICogdGhpcy5zdGVwIC8gbG9vcFdpZHRoKSAlIDIgPT09IDAgKSB7XHJcbiAgICAgICAgICB0aGlzLnBsYXloZWFkID0gTWF0aC5yb3VuZCgodGhpcy5zYW1wbGVzUHJvY2Vzc2VkICogdGhpcy5zdGVwKSAlIGxvb3BXaWR0aCArIHBsYXlTdGFydFNhbXBsZXMpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICB0aGlzLnBsYXloZWFkID0gcGxheUVuZFNhbXBsZXMgLSBNYXRoLnJvdW5kKCh0aGlzLnNhbXBsZXNQcm9jZXNzZWQgKiB0aGlzLnN0ZXApICUgbG9vcFdpZHRoKTtcclxuICAgICAgICB9ICBcclxuICAgICAgICBpZiAodGhpcy5wbGF5aGVhZCA8ICh0aGlzLnBsYXlFbmQgKiB0aGlzLnNhbXBsZXMubGVuZ3RoKSApIHtcclxuICAgICAgICAgIHRoaXMuc2lnbmFsW2ldID0gdGhpcy5zYW1wbGVzW3RoaXMucGxheWhlYWRdICogdGhpcy5hbXBsaXR1ZGU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGJyZWFrO1xyXG4gICAgfVxyXG4gICAgdGhpcy5zYW1wbGVzUHJvY2Vzc2VkKys7XHJcbiAgfVxyXG5cclxuICB0aGlzLmZyYW1lQ291bnQrKztcclxuXHJcbiAgcmV0dXJuIHRoaXMuc2lnbmFsO1xyXG59O1xyXG5cclxuU2FtcGxlci5wcm90b3R5cGUuc2V0RnJlcSA9IGZ1bmN0aW9uKGZyZXF1ZW5jeSkge1xyXG4gICAgdmFyIHRvdGFsUHJvY2Vzc2VkID0gdGhpcy5zYW1wbGVzUHJvY2Vzc2VkICogdGhpcy5zdGVwO1xyXG4gICAgdGhpcy5mcmVxdWVuY3kgPSBmcmVxdWVuY3k7XHJcbiAgICB0aGlzLnN0ZXAgPSB0aGlzLmZyZXF1ZW5jeSAvIHRoaXMucm9vdEZyZXF1ZW5jeTtcclxuICAgIHRoaXMuc2FtcGxlc1Byb2Nlc3NlZCA9IE1hdGgucm91bmQodG90YWxQcm9jZXNzZWQvdGhpcy5zdGVwKTtcclxufTtcclxuXHJcblNhbXBsZXIucHJvdG90eXBlLnJlc2V0ID0gZnVuY3Rpb24oKSB7XHJcbiAgdGhpcy5zYW1wbGVzUHJvY2Vzc2VkID0gMDtcclxuICB0aGlzLnBsYXloZWFkID0gMDtcclxufTtcclxuXHJcbi8qKlxyXG4gKiBPc2NpbGxhdG9yIGNsYXNzIGZvciBnZW5lcmF0aW5nIGFuZCBtb2RpZnlpbmcgc2lnbmFsc1xyXG4gKlxyXG4gKiBAcGFyYW0ge051bWJlcn0gdHlwZSAgICAgICBBIHdhdmVmb3JtIGNvbnN0YW50IChlZy4gRFNQLlNJTkUpXHJcbiAqIEBwYXJhbSB7TnVtYmVyfSBmcmVxdWVuY3kgIEluaXRpYWwgZnJlcXVlbmN5IG9mIHRoZSBzaWduYWxcclxuICogQHBhcmFtIHtOdW1iZXJ9IGFtcGxpdHVkZSAgSW5pdGlhbCBhbXBsaXR1ZGUgb2YgdGhlIHNpZ25hbFxyXG4gKiBAcGFyYW0ge051bWJlcn0gYnVmZmVyU2l6ZSBTaXplIG9mIHRoZSBzYW1wbGUgYnVmZmVyIHRvIGdlbmVyYXRlXHJcbiAqIEBwYXJhbSB7TnVtYmVyfSBzYW1wbGVSYXRlIFRoZSBzYW1wbGUgcmF0ZSBvZiB0aGUgc2lnbmFsXHJcbiAqXHJcbiAqIEBjb250cnVjdG9yXHJcbiAqL1xyXG5mdW5jdGlvbiBPc2NpbGxhdG9yKHR5cGUsIGZyZXF1ZW5jeSwgYW1wbGl0dWRlLCBidWZmZXJTaXplLCBzYW1wbGVSYXRlKSB7XHJcbiAgdGhpcy5mcmVxdWVuY3kgID0gZnJlcXVlbmN5O1xyXG4gIHRoaXMuYW1wbGl0dWRlICA9IGFtcGxpdHVkZTtcclxuICB0aGlzLmJ1ZmZlclNpemUgPSBidWZmZXJTaXplO1xyXG4gIHRoaXMuc2FtcGxlUmF0ZSA9IHNhbXBsZVJhdGU7XHJcbiAgLy90aGlzLnB1bHNlV2lkdGggPSBwdWxzZVdpZHRoO1xyXG4gIHRoaXMuZnJhbWVDb3VudCA9IDA7XHJcbiBcclxuICB0aGlzLndhdmVUYWJsZUxlbmd0aCA9IDIwNDg7XHJcblxyXG4gIHRoaXMuY3ljbGVzUGVyU2FtcGxlID0gZnJlcXVlbmN5IC8gc2FtcGxlUmF0ZTtcclxuXHJcbiAgdGhpcy5zaWduYWwgPSBuZXcgRmxvYXQzMkFycmF5KGJ1ZmZlclNpemUpO1xyXG4gIHRoaXMuZW52ZWxvcGUgPSBudWxsO1xyXG5cclxuICBzd2l0Y2gocGFyc2VJbnQodHlwZSwgMTApKSB7XHJcbiAgICBjYXNlIERTUC5UUklBTkdMRTpcclxuICAgICAgdGhpcy5mdW5jID0gT3NjaWxsYXRvci5UcmlhbmdsZTtcclxuICAgICAgYnJlYWs7XHJcblxyXG4gICAgY2FzZSBEU1AuU0FXOlxyXG4gICAgICB0aGlzLmZ1bmMgPSBPc2NpbGxhdG9yLlNhdztcclxuICAgICAgYnJlYWs7XHJcblxyXG4gICAgY2FzZSBEU1AuU1FVQVJFOlxyXG4gICAgICB0aGlzLmZ1bmMgPSBPc2NpbGxhdG9yLlNxdWFyZTtcclxuICAgICAgYnJlYWs7XHJcblxyXG4gICAgZGVmYXVsdDpcclxuICAgIGNhc2UgRFNQLlNJTkU6XHJcbiAgICAgIHRoaXMuZnVuYyA9IE9zY2lsbGF0b3IuU2luZTtcclxuICAgICAgYnJlYWs7XHJcbiAgfVxyXG5cclxuICB0aGlzLmdlbmVyYXRlV2F2ZVRhYmxlID0gZnVuY3Rpb24oKSB7XHJcbiAgICBPc2NpbGxhdG9yLndhdmVUYWJsZVt0aGlzLmZ1bmNdID0gbmV3IEZsb2F0MzJBcnJheSgyMDQ4KTtcclxuICAgIHZhciB3YXZlVGFibGVUaW1lID0gdGhpcy53YXZlVGFibGVMZW5ndGggLyB0aGlzLnNhbXBsZVJhdGU7XHJcbiAgICB2YXIgd2F2ZVRhYmxlSHogPSAxIC8gd2F2ZVRhYmxlVGltZTtcclxuXHJcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMud2F2ZVRhYmxlTGVuZ3RoOyBpKyspIHtcclxuICAgICAgT3NjaWxsYXRvci53YXZlVGFibGVbdGhpcy5mdW5jXVtpXSA9IHRoaXMuZnVuYyhpICogd2F2ZVRhYmxlSHovdGhpcy5zYW1wbGVSYXRlKTtcclxuICAgIH1cclxuICB9O1xyXG5cclxuICBpZiAoIHR5cGVvZiBPc2NpbGxhdG9yLndhdmVUYWJsZSA9PT0gJ3VuZGVmaW5lZCcgKSB7XHJcbiAgICBPc2NpbGxhdG9yLndhdmVUYWJsZSA9IHt9O1xyXG4gIH1cclxuXHJcbiAgaWYgKCB0eXBlb2YgT3NjaWxsYXRvci53YXZlVGFibGVbdGhpcy5mdW5jXSA9PT0gJ3VuZGVmaW5lZCcgKSB7XHJcbiAgICB0aGlzLmdlbmVyYXRlV2F2ZVRhYmxlKCk7XHJcbiAgfVxyXG4gXHJcbiAgdGhpcy53YXZlVGFibGUgPSBPc2NpbGxhdG9yLndhdmVUYWJsZVt0aGlzLmZ1bmNdO1xyXG59XHJcblxyXG4vKipcclxuICogU2V0IHRoZSBhbXBsaXR1ZGUgb2YgdGhlIHNpZ25hbFxyXG4gKlxyXG4gKiBAcGFyYW0ge051bWJlcn0gYW1wbGl0dWRlIFRoZSBhbXBsaXR1ZGUgb2YgdGhlIHNpZ25hbCAoYmV0d2VlbiAwIGFuZCAxKVxyXG4gKi9cclxuT3NjaWxsYXRvci5wcm90b3R5cGUuc2V0QW1wID0gZnVuY3Rpb24oYW1wbGl0dWRlKSB7XHJcbiAgaWYgKGFtcGxpdHVkZSA+PSAwICYmIGFtcGxpdHVkZSA8PSAxKSB7XHJcbiAgICB0aGlzLmFtcGxpdHVkZSA9IGFtcGxpdHVkZTtcclxuICB9IGVsc2Uge1xyXG4gICAgdGhyb3cgXCJBbXBsaXR1ZGUgb3V0IG9mIHJhbmdlICgwLi4xKS5cIjtcclxuICB9XHJcbn07XHJcbiAgXHJcbi8qKlxyXG4gKiBTZXQgdGhlIGZyZXF1ZW5jeSBvZiB0aGUgc2lnbmFsXHJcbiAqXHJcbiAqIEBwYXJhbSB7TnVtYmVyfSBmcmVxdWVuY3kgVGhlIGZyZXF1ZW5jeSBvZiB0aGUgc2lnbmFsXHJcbiAqLyAgXHJcbk9zY2lsbGF0b3IucHJvdG90eXBlLnNldEZyZXEgPSBmdW5jdGlvbihmcmVxdWVuY3kpIHtcclxuICB0aGlzLmZyZXF1ZW5jeSA9IGZyZXF1ZW5jeTtcclxuICB0aGlzLmN5Y2xlc1BlclNhbXBsZSA9IGZyZXF1ZW5jeSAvIHRoaXMuc2FtcGxlUmF0ZTtcclxufTtcclxuICAgICBcclxuLy8gQWRkIGFuIG9zY2lsbGF0b3JcclxuT3NjaWxsYXRvci5wcm90b3R5cGUuYWRkID0gZnVuY3Rpb24ob3NjaWxsYXRvcikge1xyXG4gIGZvciAoIHZhciBpID0gMDsgaSA8IHRoaXMuYnVmZmVyU2l6ZTsgaSsrICkge1xyXG4gICAgLy90aGlzLnNpZ25hbFtpXSArPSBvc2NpbGxhdG9yLnZhbHVlQXQoaSk7XHJcbiAgICB0aGlzLnNpZ25hbFtpXSArPSBvc2NpbGxhdG9yLnNpZ25hbFtpXTtcclxuICB9XHJcbiBcclxuICByZXR1cm4gdGhpcy5zaWduYWw7XHJcbn07XHJcbiAgICAgXHJcbi8vIEFkZCBhIHNpZ25hbCB0byB0aGUgY3VycmVudCBnZW5lcmF0ZWQgb3NjIHNpZ25hbFxyXG5Pc2NpbGxhdG9yLnByb3RvdHlwZS5hZGRTaWduYWwgPSBmdW5jdGlvbihzaWduYWwpIHtcclxuICBmb3IgKCB2YXIgaSA9IDA7IGkgPCBzaWduYWwubGVuZ3RoOyBpKysgKSB7XHJcbiAgICBpZiAoIGkgPj0gdGhpcy5idWZmZXJTaXplICkge1xyXG4gICAgICBicmVhaztcclxuICAgIH1cclxuICAgIHRoaXMuc2lnbmFsW2ldICs9IHNpZ25hbFtpXTtcclxuICAgXHJcbiAgICAvKlxyXG4gICAgLy8gQ29uc3RyYWluIGFtcGxpdHVkZVxyXG4gICAgaWYgKCB0aGlzLnNpZ25hbFtpXSA+IDEgKSB7XHJcbiAgICAgIHRoaXMuc2lnbmFsW2ldID0gMTtcclxuICAgIH0gZWxzZSBpZiAoIHRoaXMuc2lnbmFsW2ldIDwgLTEgKSB7XHJcbiAgICAgIHRoaXMuc2lnbmFsW2ldID0gLTE7XHJcbiAgICB9XHJcbiAgICAqL1xyXG4gIH1cclxuICByZXR1cm4gdGhpcy5zaWduYWw7XHJcbn07XHJcbiAgICAgXHJcbi8vIEFkZCBhbiBlbnZlbG9wZSB0byB0aGUgb3NjaWxsYXRvclxyXG5Pc2NpbGxhdG9yLnByb3RvdHlwZS5hZGRFbnZlbG9wZSA9IGZ1bmN0aW9uKGVudmVsb3BlKSB7XHJcbiAgdGhpcy5lbnZlbG9wZSA9IGVudmVsb3BlO1xyXG59O1xyXG5cclxuT3NjaWxsYXRvci5wcm90b3R5cGUuYXBwbHlFbnZlbG9wZSA9IGZ1bmN0aW9uKCkge1xyXG4gIHRoaXMuZW52ZWxvcGUucHJvY2Vzcyh0aGlzLnNpZ25hbCk7XHJcbn07XHJcbiAgICAgXHJcbk9zY2lsbGF0b3IucHJvdG90eXBlLnZhbHVlQXQgPSBmdW5jdGlvbihvZmZzZXQpIHtcclxuICByZXR1cm4gdGhpcy53YXZlVGFibGVbb2Zmc2V0ICUgdGhpcy53YXZlVGFibGVMZW5ndGhdO1xyXG59O1xyXG4gICAgIFxyXG5Pc2NpbGxhdG9yLnByb3RvdHlwZS5nZW5lcmF0ZSA9IGZ1bmN0aW9uKCkge1xyXG4gIHZhciBmcmFtZU9mZnNldCA9IHRoaXMuZnJhbWVDb3VudCAqIHRoaXMuYnVmZmVyU2l6ZTtcclxuICB2YXIgc3RlcCA9IHRoaXMud2F2ZVRhYmxlTGVuZ3RoICogdGhpcy5mcmVxdWVuY3kgLyB0aGlzLnNhbXBsZVJhdGU7XHJcbiAgdmFyIG9mZnNldDtcclxuXHJcbiAgZm9yICggdmFyIGkgPSAwOyBpIDwgdGhpcy5idWZmZXJTaXplOyBpKysgKSB7XHJcbiAgICAvL3ZhciBzdGVwID0gKGZyYW1lT2Zmc2V0ICsgaSkgKiB0aGlzLmN5Y2xlc1BlclNhbXBsZSAlIDE7XHJcbiAgICAvL3RoaXMuc2lnbmFsW2ldID0gdGhpcy5mdW5jKHN0ZXApICogdGhpcy5hbXBsaXR1ZGU7XHJcbiAgICAvL3RoaXMuc2lnbmFsW2ldID0gdGhpcy52YWx1ZUF0KE1hdGgucm91bmQoKGZyYW1lT2Zmc2V0ICsgaSkgKiBzdGVwKSkgKiB0aGlzLmFtcGxpdHVkZTtcclxuICAgIG9mZnNldCA9IE1hdGgucm91bmQoKGZyYW1lT2Zmc2V0ICsgaSkgKiBzdGVwKTtcclxuICAgIHRoaXMuc2lnbmFsW2ldID0gdGhpcy53YXZlVGFibGVbb2Zmc2V0ICUgdGhpcy53YXZlVGFibGVMZW5ndGhdICogdGhpcy5hbXBsaXR1ZGU7XHJcbiAgfVxyXG5cclxuICB0aGlzLmZyYW1lQ291bnQrKztcclxuXHJcbiAgcmV0dXJuIHRoaXMuc2lnbmFsO1xyXG59O1xyXG5cclxuT3NjaWxsYXRvci5TaW5lID0gZnVuY3Rpb24oc3RlcCkge1xyXG4gIHJldHVybiBNYXRoLnNpbihEU1AuVFdPX1BJICogc3RlcCk7XHJcbn07XHJcblxyXG5Pc2NpbGxhdG9yLlNxdWFyZSA9IGZ1bmN0aW9uKHN0ZXApIHtcclxuICByZXR1cm4gc3RlcCA8IDAuNSA/IDEgOiAtMTtcclxufTtcclxuXHJcbk9zY2lsbGF0b3IuU2F3ID0gZnVuY3Rpb24oc3RlcCkge1xyXG4gIHJldHVybiAyICogKHN0ZXAgLSBNYXRoLnJvdW5kKHN0ZXApKTtcclxufTtcclxuXHJcbk9zY2lsbGF0b3IuVHJpYW5nbGUgPSBmdW5jdGlvbihzdGVwKSB7XHJcbiAgcmV0dXJuIDEgLSA0ICogTWF0aC5hYnMoTWF0aC5yb3VuZChzdGVwKSAtIHN0ZXApO1xyXG59O1xyXG5cclxuT3NjaWxsYXRvci5QdWxzZSA9IGZ1bmN0aW9uKHN0ZXApIHtcclxuICAvLyBzdHViXHJcbn07XHJcbiBcclxuZnVuY3Rpb24gQURTUihhdHRhY2tMZW5ndGgsIGRlY2F5TGVuZ3RoLCBzdXN0YWluTGV2ZWwsIHN1c3RhaW5MZW5ndGgsIHJlbGVhc2VMZW5ndGgsIHNhbXBsZVJhdGUpIHtcclxuICB0aGlzLnNhbXBsZVJhdGUgPSBzYW1wbGVSYXRlO1xyXG4gIC8vIExlbmd0aCBpbiBzZWNvbmRzXHJcbiAgdGhpcy5hdHRhY2tMZW5ndGggID0gYXR0YWNrTGVuZ3RoO1xyXG4gIHRoaXMuZGVjYXlMZW5ndGggICA9IGRlY2F5TGVuZ3RoO1xyXG4gIHRoaXMuc3VzdGFpbkxldmVsICA9IHN1c3RhaW5MZXZlbDtcclxuICB0aGlzLnN1c3RhaW5MZW5ndGggPSBzdXN0YWluTGVuZ3RoO1xyXG4gIHRoaXMucmVsZWFzZUxlbmd0aCA9IHJlbGVhc2VMZW5ndGg7XHJcbiAgdGhpcy5zYW1wbGVSYXRlICAgID0gc2FtcGxlUmF0ZTtcclxuIFxyXG4gIC8vIExlbmd0aCBpbiBzYW1wbGVzXHJcbiAgdGhpcy5hdHRhY2tTYW1wbGVzICA9IGF0dGFja0xlbmd0aCAgKiBzYW1wbGVSYXRlO1xyXG4gIHRoaXMuZGVjYXlTYW1wbGVzICAgPSBkZWNheUxlbmd0aCAgICogc2FtcGxlUmF0ZTtcclxuICB0aGlzLnN1c3RhaW5TYW1wbGVzID0gc3VzdGFpbkxlbmd0aCAqIHNhbXBsZVJhdGU7XHJcbiAgdGhpcy5yZWxlYXNlU2FtcGxlcyA9IHJlbGVhc2VMZW5ndGggKiBzYW1wbGVSYXRlO1xyXG4gXHJcbiAgLy8gVXBkYXRlcyB0aGUgZW52ZWxvcGUgc2FtcGxlIHBvc2l0aW9uc1xyXG4gIHRoaXMudXBkYXRlID0gZnVuY3Rpb24oKSB7XHJcbiAgICB0aGlzLmF0dGFjayAgICAgICAgID0gICAgICAgICAgICAgICAgdGhpcy5hdHRhY2tTYW1wbGVzO1xyXG4gICAgdGhpcy5kZWNheSAgICAgICAgICA9IHRoaXMuYXR0YWNrICArIHRoaXMuZGVjYXlTYW1wbGVzO1xyXG4gICAgdGhpcy5zdXN0YWluICAgICAgICA9IHRoaXMuZGVjYXkgICArIHRoaXMuc3VzdGFpblNhbXBsZXM7XHJcbiAgICB0aGlzLnJlbGVhc2UgICAgICAgID0gdGhpcy5zdXN0YWluICsgdGhpcy5yZWxlYXNlU2FtcGxlcztcclxuICB9O1xyXG4gXHJcbiAgdGhpcy51cGRhdGUoKTtcclxuIFxyXG4gIHRoaXMuc2FtcGxlc1Byb2Nlc3NlZCA9IDA7XHJcbn1cclxuXHJcbkFEU1IucHJvdG90eXBlLm5vdGVPbiA9IGZ1bmN0aW9uKCkge1xyXG4gIHRoaXMuc2FtcGxlc1Byb2Nlc3NlZCA9IDA7XHJcbiAgdGhpcy5zdXN0YWluU2FtcGxlcyA9IHRoaXMuc3VzdGFpbkxlbmd0aCAqIHRoaXMuc2FtcGxlUmF0ZTtcclxuICB0aGlzLnVwZGF0ZSgpO1xyXG59O1xyXG5cclxuLy8gU2VuZCBhIG5vdGUgb2ZmIHdoZW4gdXNpbmcgYSBzdXN0YWluIG9mIGluZmluaXR5IHRvIGxldCB0aGUgZW52ZWxvcGUgZW50ZXIgdGhlIHJlbGVhc2UgcGhhc2VcclxuQURTUi5wcm90b3R5cGUubm90ZU9mZiA9IGZ1bmN0aW9uKCkge1xyXG4gIHRoaXMuc3VzdGFpblNhbXBsZXMgPSB0aGlzLnNhbXBsZXNQcm9jZXNzZWQgLSB0aGlzLmRlY2F5U2FtcGxlcztcclxuICB0aGlzLnVwZGF0ZSgpO1xyXG59O1xyXG5cclxuQURTUi5wcm90b3R5cGUucHJvY2Vzc1NhbXBsZSA9IGZ1bmN0aW9uKHNhbXBsZSkge1xyXG4gIHZhciBhbXBsaXR1ZGUgPSAwO1xyXG5cclxuICBpZiAoIHRoaXMuc2FtcGxlc1Byb2Nlc3NlZCA8PSB0aGlzLmF0dGFjayApIHtcclxuICAgIGFtcGxpdHVkZSA9IDAgKyAoMSAtIDApICogKCh0aGlzLnNhbXBsZXNQcm9jZXNzZWQgLSAwKSAvICh0aGlzLmF0dGFjayAtIDApKTtcclxuICB9IGVsc2UgaWYgKCB0aGlzLnNhbXBsZXNQcm9jZXNzZWQgPiB0aGlzLmF0dGFjayAmJiB0aGlzLnNhbXBsZXNQcm9jZXNzZWQgPD0gdGhpcy5kZWNheSApIHtcclxuICAgIGFtcGxpdHVkZSA9IDEgKyAodGhpcy5zdXN0YWluTGV2ZWwgLSAxKSAqICgodGhpcy5zYW1wbGVzUHJvY2Vzc2VkIC0gdGhpcy5hdHRhY2spIC8gKHRoaXMuZGVjYXkgLSB0aGlzLmF0dGFjaykpO1xyXG4gIH0gZWxzZSBpZiAoIHRoaXMuc2FtcGxlc1Byb2Nlc3NlZCA+IHRoaXMuZGVjYXkgJiYgdGhpcy5zYW1wbGVzUHJvY2Vzc2VkIDw9IHRoaXMuc3VzdGFpbiApIHtcclxuICAgIGFtcGxpdHVkZSA9IHRoaXMuc3VzdGFpbkxldmVsO1xyXG4gIH0gZWxzZSBpZiAoIHRoaXMuc2FtcGxlc1Byb2Nlc3NlZCA+IHRoaXMuc3VzdGFpbiAmJiB0aGlzLnNhbXBsZXNQcm9jZXNzZWQgPD0gdGhpcy5yZWxlYXNlICkge1xyXG4gICAgYW1wbGl0dWRlID0gdGhpcy5zdXN0YWluTGV2ZWwgKyAoMCAtIHRoaXMuc3VzdGFpbkxldmVsKSAqICgodGhpcy5zYW1wbGVzUHJvY2Vzc2VkIC0gdGhpcy5zdXN0YWluKSAvICh0aGlzLnJlbGVhc2UgLSB0aGlzLnN1c3RhaW4pKTtcclxuICB9XHJcbiBcclxuICByZXR1cm4gc2FtcGxlICogYW1wbGl0dWRlO1xyXG59O1xyXG5cclxuQURTUi5wcm90b3R5cGUudmFsdWUgPSBmdW5jdGlvbigpIHtcclxuICB2YXIgYW1wbGl0dWRlID0gMDtcclxuXHJcbiAgaWYgKCB0aGlzLnNhbXBsZXNQcm9jZXNzZWQgPD0gdGhpcy5hdHRhY2sgKSB7XHJcbiAgICBhbXBsaXR1ZGUgPSAwICsgKDEgLSAwKSAqICgodGhpcy5zYW1wbGVzUHJvY2Vzc2VkIC0gMCkgLyAodGhpcy5hdHRhY2sgLSAwKSk7XHJcbiAgfSBlbHNlIGlmICggdGhpcy5zYW1wbGVzUHJvY2Vzc2VkID4gdGhpcy5hdHRhY2sgJiYgdGhpcy5zYW1wbGVzUHJvY2Vzc2VkIDw9IHRoaXMuZGVjYXkgKSB7XHJcbiAgICBhbXBsaXR1ZGUgPSAxICsgKHRoaXMuc3VzdGFpbkxldmVsIC0gMSkgKiAoKHRoaXMuc2FtcGxlc1Byb2Nlc3NlZCAtIHRoaXMuYXR0YWNrKSAvICh0aGlzLmRlY2F5IC0gdGhpcy5hdHRhY2spKTtcclxuICB9IGVsc2UgaWYgKCB0aGlzLnNhbXBsZXNQcm9jZXNzZWQgPiB0aGlzLmRlY2F5ICYmIHRoaXMuc2FtcGxlc1Byb2Nlc3NlZCA8PSB0aGlzLnN1c3RhaW4gKSB7XHJcbiAgICBhbXBsaXR1ZGUgPSB0aGlzLnN1c3RhaW5MZXZlbDtcclxuICB9IGVsc2UgaWYgKCB0aGlzLnNhbXBsZXNQcm9jZXNzZWQgPiB0aGlzLnN1c3RhaW4gJiYgdGhpcy5zYW1wbGVzUHJvY2Vzc2VkIDw9IHRoaXMucmVsZWFzZSApIHtcclxuICAgIGFtcGxpdHVkZSA9IHRoaXMuc3VzdGFpbkxldmVsICsgKDAgLSB0aGlzLnN1c3RhaW5MZXZlbCkgKiAoKHRoaXMuc2FtcGxlc1Byb2Nlc3NlZCAtIHRoaXMuc3VzdGFpbikgLyAodGhpcy5yZWxlYXNlIC0gdGhpcy5zdXN0YWluKSk7XHJcbiAgfVxyXG4gXHJcbiAgcmV0dXJuIGFtcGxpdHVkZTtcclxufTtcclxuICAgICBcclxuQURTUi5wcm90b3R5cGUucHJvY2VzcyA9IGZ1bmN0aW9uKGJ1ZmZlcikge1xyXG4gIGZvciAoIHZhciBpID0gMDsgaSA8IGJ1ZmZlci5sZW5ndGg7IGkrKyApIHtcclxuICAgIGJ1ZmZlcltpXSAqPSB0aGlzLnZhbHVlKCk7XHJcblxyXG4gICAgdGhpcy5zYW1wbGVzUHJvY2Vzc2VkKys7XHJcbiAgfVxyXG4gXHJcbiAgcmV0dXJuIGJ1ZmZlcjtcclxufTtcclxuICAgICBcclxuICAgICBcclxuQURTUi5wcm90b3R5cGUuaXNBY3RpdmUgPSBmdW5jdGlvbigpIHtcclxuICBpZiAoIHRoaXMuc2FtcGxlc1Byb2Nlc3NlZCA+IHRoaXMucmVsZWFzZSB8fCB0aGlzLnNhbXBsZXNQcm9jZXNzZWQgPT09IC0xICkge1xyXG4gICAgcmV0dXJuIGZhbHNlO1xyXG4gIH0gZWxzZSB7XHJcbiAgICByZXR1cm4gdHJ1ZTtcclxuICB9XHJcbn07XHJcblxyXG5BRFNSLnByb3RvdHlwZS5kaXNhYmxlID0gZnVuY3Rpb24oKSB7XHJcbiAgdGhpcy5zYW1wbGVzUHJvY2Vzc2VkID0gLTE7XHJcbn07XHJcbiBcclxuZnVuY3Rpb24gSUlSRmlsdGVyKHR5cGUsIGN1dG9mZiwgcmVzb25hbmNlLCBzYW1wbGVSYXRlKSB7XHJcbiAgdGhpcy5zYW1wbGVSYXRlID0gc2FtcGxlUmF0ZTtcclxuXHJcbiAgc3dpdGNoKHR5cGUpIHtcclxuICAgIGNhc2UgRFNQLkxPV1BBU1M6XHJcbiAgICBjYXNlIERTUC5MUDEyOlxyXG4gICAgICB0aGlzLmZ1bmMgPSBuZXcgSUlSRmlsdGVyLkxQMTIoY3V0b2ZmLCByZXNvbmFuY2UsIHNhbXBsZVJhdGUpO1xyXG4gICAgICBicmVhaztcclxuICB9XHJcbn1cclxuXHJcbklJUkZpbHRlci5wcm90b3R5cGUuX19kZWZpbmVHZXR0ZXJfXygnY3V0b2ZmJyxcclxuICBmdW5jdGlvbigpIHtcclxuICAgIHJldHVybiB0aGlzLmZ1bmMuY3V0b2ZmO1xyXG4gIH1cclxuKTtcclxuXHJcbklJUkZpbHRlci5wcm90b3R5cGUuX19kZWZpbmVHZXR0ZXJfXygncmVzb25hbmNlJyxcclxuICBmdW5jdGlvbigpIHtcclxuICAgIHJldHVybiB0aGlzLmZ1bmMucmVzb25hbmNlO1xyXG4gIH1cclxuKTtcclxuXHJcbklJUkZpbHRlci5wcm90b3R5cGUuc2V0ID0gZnVuY3Rpb24oY3V0b2ZmLCByZXNvbmFuY2UpIHtcclxuICB0aGlzLmZ1bmMuY2FsY0NvZWZmKGN1dG9mZiwgcmVzb25hbmNlKTtcclxufTtcclxuXHJcbklJUkZpbHRlci5wcm90b3R5cGUucHJvY2VzcyA9IGZ1bmN0aW9uKGJ1ZmZlcikge1xyXG4gIHRoaXMuZnVuYy5wcm9jZXNzKGJ1ZmZlcik7XHJcbn07XHJcblxyXG4vLyBBZGQgYW4gZW52ZWxvcGUgdG8gdGhlIGZpbHRlclxyXG5JSVJGaWx0ZXIucHJvdG90eXBlLmFkZEVudmVsb3BlID0gZnVuY3Rpb24oZW52ZWxvcGUpIHtcclxuICBpZiAoIGVudmVsb3BlIGluc3RhbmNlb2YgQURTUiApIHtcclxuICAgIHRoaXMuZnVuYy5hZGRFbnZlbG9wZShlbnZlbG9wZSk7XHJcbiAgfSBlbHNlIHtcclxuICAgIHRocm93IFwiTm90IGFuIGVudmVsb3BlLlwiO1xyXG4gIH1cclxufTtcclxuXHJcbklJUkZpbHRlci5MUDEyID0gZnVuY3Rpb24oY3V0b2ZmLCByZXNvbmFuY2UsIHNhbXBsZVJhdGUpIHtcclxuICB0aGlzLnNhbXBsZVJhdGUgPSBzYW1wbGVSYXRlO1xyXG4gIHRoaXMudmlicmFQb3MgICA9IDA7XHJcbiAgdGhpcy52aWJyYVNwZWVkID0gMDtcclxuICB0aGlzLmVudmVsb3BlID0gZmFsc2U7XHJcbiBcclxuICB0aGlzLmNhbGNDb2VmZiA9IGZ1bmN0aW9uKGN1dG9mZiwgcmVzb25hbmNlKSB7XHJcbiAgICB0aGlzLncgPSAyLjAgKiBNYXRoLlBJICogY3V0b2ZmIC8gdGhpcy5zYW1wbGVSYXRlO1xyXG4gICAgdGhpcy5xID0gMS4wIC0gdGhpcy53IC8gKDIuMCAqIChyZXNvbmFuY2UgKyAwLjUgLyAoMS4wICsgdGhpcy53KSkgKyB0aGlzLncgLSAyLjApO1xyXG4gICAgdGhpcy5yID0gdGhpcy5xICogdGhpcy5xO1xyXG4gICAgdGhpcy5jID0gdGhpcy5yICsgMS4wIC0gMi4wICogTWF0aC5jb3ModGhpcy53KSAqIHRoaXMucTtcclxuICAgXHJcbiAgICB0aGlzLmN1dG9mZiA9IGN1dG9mZjtcclxuICAgIHRoaXMucmVzb25hbmNlID0gcmVzb25hbmNlO1xyXG4gIH07XHJcblxyXG4gIHRoaXMuY2FsY0NvZWZmKGN1dG9mZiwgcmVzb25hbmNlKTtcclxuXHJcbiAgdGhpcy5wcm9jZXNzID0gZnVuY3Rpb24oYnVmZmVyKSB7XHJcbiAgICBmb3IgKCB2YXIgaSA9IDA7IGkgPCBidWZmZXIubGVuZ3RoOyBpKysgKSB7XHJcbiAgICAgIHRoaXMudmlicmFTcGVlZCArPSAoYnVmZmVyW2ldIC0gdGhpcy52aWJyYVBvcykgKiB0aGlzLmM7XHJcbiAgICAgIHRoaXMudmlicmFQb3MgICArPSB0aGlzLnZpYnJhU3BlZWQ7XHJcbiAgICAgIHRoaXMudmlicmFTcGVlZCAqPSB0aGlzLnI7XHJcbiAgIFxyXG4gICAgICAvKlxyXG4gICAgICB2YXIgdGVtcCA9IHRoaXMudmlicmFQb3M7XHJcbiAgICAgXHJcbiAgICAgIGlmICggdGVtcCA+IDEuMCApIHtcclxuICAgICAgICB0ZW1wID0gMS4wO1xyXG4gICAgICB9IGVsc2UgaWYgKCB0ZW1wIDwgLTEuMCApIHtcclxuICAgICAgICB0ZW1wID0gLTEuMDtcclxuICAgICAgfSBlbHNlIGlmICggdGVtcCAhPSB0ZW1wICkge1xyXG4gICAgICAgIHRlbXAgPSAxO1xyXG4gICAgICB9XHJcbiAgICAgXHJcbiAgICAgIGJ1ZmZlcltpXSA9IHRlbXA7XHJcbiAgICAgICovXHJcblxyXG4gICAgICBpZiAodGhpcy5lbnZlbG9wZSkge1xyXG4gICAgICAgIGJ1ZmZlcltpXSA9IChidWZmZXJbaV0gKiAoMSAtIHRoaXMuZW52ZWxvcGUudmFsdWUoKSkpICsgKHRoaXMudmlicmFQb3MgKiB0aGlzLmVudmVsb3BlLnZhbHVlKCkpO1xyXG4gICAgICAgIHRoaXMuZW52ZWxvcGUuc2FtcGxlc1Byb2Nlc3NlZCsrO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIGJ1ZmZlcltpXSA9IHRoaXMudmlicmFQb3M7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9O1xyXG59OyBcclxuXHJcbklJUkZpbHRlci5MUDEyLnByb3RvdHlwZS5hZGRFbnZlbG9wZSA9IGZ1bmN0aW9uKGVudmVsb3BlKSB7XHJcbiAgdGhpcy5lbnZlbG9wZSA9IGVudmVsb3BlO1xyXG59O1xyXG5cclxuZnVuY3Rpb24gSUlSRmlsdGVyMih0eXBlLCBjdXRvZmYsIHJlc29uYW5jZSwgc2FtcGxlUmF0ZSkge1xyXG4gIHRoaXMudHlwZSA9IHR5cGU7XHJcbiAgdGhpcy5jdXRvZmYgPSBjdXRvZmY7XHJcbiAgdGhpcy5yZXNvbmFuY2UgPSByZXNvbmFuY2U7XHJcbiAgdGhpcy5zYW1wbGVSYXRlID0gc2FtcGxlUmF0ZTtcclxuXHJcbiAgdGhpcy5mID0gRmxvYXQzMkFycmF5KDQpO1xyXG4gIHRoaXMuZlswXSA9IDAuMDsgLy8gbHBcclxuICB0aGlzLmZbMV0gPSAwLjA7IC8vIGhwXHJcbiAgdGhpcy5mWzJdID0gMC4wOyAvLyBicFxyXG4gIHRoaXMuZlszXSA9IDAuMDsgLy8gYnIgXHJcbiBcclxuICB0aGlzLmNhbGNDb2VmZiA9IGZ1bmN0aW9uKGN1dG9mZiwgcmVzb25hbmNlKSB7XHJcbiAgICB0aGlzLmZyZXEgPSAyICogTWF0aC5zaW4oTWF0aC5QSSAqIE1hdGgubWluKDAuMjUsIGN1dG9mZi8odGhpcy5zYW1wbGVSYXRlKjIpKSk7ICBcclxuICAgIHRoaXMuZGFtcCA9IE1hdGgubWluKDIgKiAoMSAtIE1hdGgucG93KHJlc29uYW5jZSwgMC4yNSkpLCBNYXRoLm1pbigyLCAyL3RoaXMuZnJlcSAtIHRoaXMuZnJlcSAqIDAuNSkpO1xyXG4gIH07XHJcblxyXG4gIHRoaXMuY2FsY0NvZWZmKGN1dG9mZiwgcmVzb25hbmNlKTtcclxufVxyXG5cclxuSUlSRmlsdGVyMi5wcm90b3R5cGUucHJvY2VzcyA9IGZ1bmN0aW9uKGJ1ZmZlcikge1xyXG4gIHZhciBpbnB1dCwgb3V0cHV0O1xyXG4gIHZhciBmID0gdGhpcy5mO1xyXG5cclxuICBmb3IgKCB2YXIgaSA9IDA7IGkgPCBidWZmZXIubGVuZ3RoOyBpKysgKSB7XHJcbiAgICBpbnB1dCA9IGJ1ZmZlcltpXTtcclxuXHJcbiAgICAvLyBmaXJzdCBwYXNzXHJcbiAgICBmWzNdID0gaW5wdXQgLSB0aGlzLmRhbXAgKiBmWzJdO1xyXG4gICAgZlswXSA9IGZbMF0gKyB0aGlzLmZyZXEgKiBmWzJdO1xyXG4gICAgZlsxXSA9IGZbM10gLSBmWzBdO1xyXG4gICAgZlsyXSA9IHRoaXMuZnJlcSAqIGZbMV0gKyBmWzJdO1xyXG4gICAgb3V0cHV0ID0gMC41ICogZlt0aGlzLnR5cGVdO1xyXG5cclxuICAgIC8vIHNlY29uZCBwYXNzXHJcbiAgICBmWzNdID0gaW5wdXQgLSB0aGlzLmRhbXAgKiBmWzJdO1xyXG4gICAgZlswXSA9IGZbMF0gKyB0aGlzLmZyZXEgKiBmWzJdO1xyXG4gICAgZlsxXSA9IGZbM10gLSBmWzBdO1xyXG4gICAgZlsyXSA9IHRoaXMuZnJlcSAqIGZbMV0gKyBmWzJdO1xyXG4gICAgb3V0cHV0ICs9IDAuNSAqIGZbdGhpcy50eXBlXTtcclxuXHJcbiAgICBpZiAodGhpcy5lbnZlbG9wZSkge1xyXG4gICAgICBidWZmZXJbaV0gPSAoYnVmZmVyW2ldICogKDEgLSB0aGlzLmVudmVsb3BlLnZhbHVlKCkpKSArIChvdXRwdXQgKiB0aGlzLmVudmVsb3BlLnZhbHVlKCkpO1xyXG4gICAgICB0aGlzLmVudmVsb3BlLnNhbXBsZXNQcm9jZXNzZWQrKztcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIGJ1ZmZlcltpXSA9IG91dHB1dDtcclxuICAgIH1cclxuICB9XHJcbn07XHJcblxyXG5JSVJGaWx0ZXIyLnByb3RvdHlwZS5hZGRFbnZlbG9wZSA9IGZ1bmN0aW9uKGVudmVsb3BlKSB7XHJcbiAgaWYgKCBlbnZlbG9wZSBpbnN0YW5jZW9mIEFEU1IgKSB7XHJcbiAgICB0aGlzLmVudmVsb3BlID0gZW52ZWxvcGU7XHJcbiAgfSBlbHNlIHtcclxuICAgIHRocm93IFwiVGhpcyBpcyBub3QgYW4gZW52ZWxvcGUuXCI7XHJcbiAgfVxyXG59O1xyXG5cclxuSUlSRmlsdGVyMi5wcm90b3R5cGUuc2V0ID0gZnVuY3Rpb24oY3V0b2ZmLCByZXNvbmFuY2UpIHtcclxuICB0aGlzLmNhbGNDb2VmZihjdXRvZmYsIHJlc29uYW5jZSk7XHJcbn07XHJcblxyXG5cclxuXHJcbmZ1bmN0aW9uIFdpbmRvd0Z1bmN0aW9uKHR5cGUsIGFscGhhKSB7XHJcbiAgdGhpcy5hbHBoYSA9IGFscGhhO1xyXG4gXHJcbiAgc3dpdGNoKHR5cGUpIHtcclxuICAgIGNhc2UgRFNQLkJBUlRMRVRUOlxyXG4gICAgICB0aGlzLmZ1bmMgPSBXaW5kb3dGdW5jdGlvbi5CYXJ0bGV0dDtcclxuICAgICAgYnJlYWs7XHJcbiAgICAgXHJcbiAgICBjYXNlIERTUC5CQVJUTEVUVEhBTk46XHJcbiAgICAgIHRoaXMuZnVuYyA9IFdpbmRvd0Z1bmN0aW9uLkJhcnRsZXR0SGFubjtcclxuICAgICAgYnJlYWs7XHJcbiAgICAgXHJcbiAgICBjYXNlIERTUC5CTEFDS01BTjpcclxuICAgICAgdGhpcy5mdW5jID0gV2luZG93RnVuY3Rpb24uQmxhY2ttYW47XHJcbiAgICAgIHRoaXMuYWxwaGEgPSB0aGlzLmFscGhhIHx8IDAuMTY7XHJcbiAgICAgIGJyZWFrO1xyXG4gICBcclxuICAgIGNhc2UgRFNQLkNPU0lORTpcclxuICAgICAgdGhpcy5mdW5jID0gV2luZG93RnVuY3Rpb24uQ29zaW5lO1xyXG4gICAgICBicmVhaztcclxuICAgICBcclxuICAgIGNhc2UgRFNQLkdBVVNTOlxyXG4gICAgICB0aGlzLmZ1bmMgPSBXaW5kb3dGdW5jdGlvbi5HYXVzcztcclxuICAgICAgdGhpcy5hbHBoYSA9IHRoaXMuYWxwaGEgfHwgMC4yNTtcclxuICAgICAgYnJlYWs7XHJcbiAgICAgXHJcbiAgICBjYXNlIERTUC5IQU1NSU5HOlxyXG4gICAgICB0aGlzLmZ1bmMgPSBXaW5kb3dGdW5jdGlvbi5IYW1taW5nO1xyXG4gICAgICBicmVhaztcclxuICAgICBcclxuICAgIGNhc2UgRFNQLkhBTk46XHJcbiAgICAgIHRoaXMuZnVuYyA9IFdpbmRvd0Z1bmN0aW9uLkhhbm47XHJcbiAgICAgIGJyZWFrO1xyXG4gICBcclxuICAgIGNhc2UgRFNQLkxBTkNaT1M6XHJcbiAgICAgIHRoaXMuZnVuYyA9IFdpbmRvd0Z1bmN0aW9uLkxhbmN6b3o7XHJcbiAgICAgIGJyZWFrO1xyXG4gICAgIFxyXG4gICAgY2FzZSBEU1AuUkVDVEFOR1VMQVI6XHJcbiAgICAgIHRoaXMuZnVuYyA9IFdpbmRvd0Z1bmN0aW9uLlJlY3Rhbmd1bGFyO1xyXG4gICAgICBicmVhaztcclxuICAgICBcclxuICAgIGNhc2UgRFNQLlRSSUFOR1VMQVI6XHJcbiAgICAgIHRoaXMuZnVuYyA9IFdpbmRvd0Z1bmN0aW9uLlRyaWFuZ3VsYXI7XHJcbiAgICAgIGJyZWFrO1xyXG4gIH1cclxufVxyXG5cclxuV2luZG93RnVuY3Rpb24ucHJvdG90eXBlLnByb2Nlc3MgPSBmdW5jdGlvbihidWZmZXIpIHtcclxuICB2YXIgbGVuZ3RoID0gYnVmZmVyLmxlbmd0aDtcclxuICBmb3IgKCB2YXIgaSA9IDA7IGkgPCBsZW5ndGg7IGkrKyApIHtcclxuICAgIGJ1ZmZlcltpXSAqPSB0aGlzLmZ1bmMobGVuZ3RoLCBpLCB0aGlzLmFscGhhKTtcclxuICB9XHJcbiAgcmV0dXJuIGJ1ZmZlcjtcclxufTtcclxuXHJcbldpbmRvd0Z1bmN0aW9uLkJhcnRsZXR0ID0gZnVuY3Rpb24obGVuZ3RoLCBpbmRleCkge1xyXG4gIHJldHVybiAyIC8gKGxlbmd0aCAtIDEpICogKChsZW5ndGggLSAxKSAvIDIgLSBNYXRoLmFicyhpbmRleCAtIChsZW5ndGggLSAxKSAvIDIpKTtcclxufTtcclxuXHJcbldpbmRvd0Z1bmN0aW9uLkJhcnRsZXR0SGFubiA9IGZ1bmN0aW9uKGxlbmd0aCwgaW5kZXgpIHtcclxuICByZXR1cm4gMC42MiAtIDAuNDggKiBNYXRoLmFicyhpbmRleCAvIChsZW5ndGggLSAxKSAtIDAuNSkgLSAwLjM4ICogTWF0aC5jb3MoRFNQLlRXT19QSSAqIGluZGV4IC8gKGxlbmd0aCAtIDEpKTtcclxufTtcclxuXHJcbldpbmRvd0Z1bmN0aW9uLkJsYWNrbWFuID0gZnVuY3Rpb24obGVuZ3RoLCBpbmRleCwgYWxwaGEpIHtcclxuICB2YXIgYTAgPSAoMSAtIGFscGhhKSAvIDI7XHJcbiAgdmFyIGExID0gMC41O1xyXG4gIHZhciBhMiA9IGFscGhhIC8gMjtcclxuXHJcbiAgcmV0dXJuIGEwIC0gYTEgKiBNYXRoLmNvcyhEU1AuVFdPX1BJICogaW5kZXggLyAobGVuZ3RoIC0gMSkpICsgYTIgKiBNYXRoLmNvcyg0ICogTWF0aC5QSSAqIGluZGV4IC8gKGxlbmd0aCAtIDEpKTtcclxufTtcclxuXHJcbldpbmRvd0Z1bmN0aW9uLkNvc2luZSA9IGZ1bmN0aW9uKGxlbmd0aCwgaW5kZXgpIHtcclxuICByZXR1cm4gTWF0aC5jb3MoTWF0aC5QSSAqIGluZGV4IC8gKGxlbmd0aCAtIDEpIC0gTWF0aC5QSSAvIDIpO1xyXG59O1xyXG5cclxuV2luZG93RnVuY3Rpb24uR2F1c3MgPSBmdW5jdGlvbihsZW5ndGgsIGluZGV4LCBhbHBoYSkge1xyXG4gIHJldHVybiBNYXRoLnBvdyhNYXRoLkUsIC0wLjUgKiBNYXRoLnBvdygoaW5kZXggLSAobGVuZ3RoIC0gMSkgLyAyKSAvIChhbHBoYSAqIChsZW5ndGggLSAxKSAvIDIpLCAyKSk7XHJcbn07XHJcblxyXG5XaW5kb3dGdW5jdGlvbi5IYW1taW5nID0gZnVuY3Rpb24obGVuZ3RoLCBpbmRleCkge1xyXG4gIHJldHVybiAwLjU0IC0gMC40NiAqIE1hdGguY29zKERTUC5UV09fUEkgKiBpbmRleCAvIChsZW5ndGggLSAxKSk7XHJcbn07XHJcblxyXG5XaW5kb3dGdW5jdGlvbi5IYW5uID0gZnVuY3Rpb24obGVuZ3RoLCBpbmRleCkge1xyXG4gIHJldHVybiAwLjUgKiAoMSAtIE1hdGguY29zKERTUC5UV09fUEkgKiBpbmRleCAvIChsZW5ndGggLSAxKSkpO1xyXG59O1xyXG5cclxuV2luZG93RnVuY3Rpb24uTGFuY3pvcyA9IGZ1bmN0aW9uKGxlbmd0aCwgaW5kZXgpIHtcclxuICB2YXIgeCA9IDIgKiBpbmRleCAvIChsZW5ndGggLSAxKSAtIDE7XHJcbiAgcmV0dXJuIE1hdGguc2luKE1hdGguUEkgKiB4KSAvIChNYXRoLlBJICogeCk7XHJcbn07XHJcblxyXG5XaW5kb3dGdW5jdGlvbi5SZWN0YW5ndWxhciA9IGZ1bmN0aW9uKGxlbmd0aCwgaW5kZXgpIHtcclxuICByZXR1cm4gMTtcclxufTtcclxuXHJcbldpbmRvd0Z1bmN0aW9uLlRyaWFuZ3VsYXIgPSBmdW5jdGlvbihsZW5ndGgsIGluZGV4KSB7XHJcbiAgcmV0dXJuIDIgLyBsZW5ndGggKiAobGVuZ3RoIC8gMiAtIE1hdGguYWJzKGluZGV4IC0gKGxlbmd0aCAtIDEpIC8gMikpO1xyXG59O1xyXG5cclxuZnVuY3Rpb24gc2luaCAoYXJnKSB7XHJcbiAgLy8gUmV0dXJucyB0aGUgaHlwZXJib2xpYyBzaW5lIG9mIHRoZSBudW1iZXIsIGRlZmluZWQgYXMgKGV4cChudW1iZXIpIC0gZXhwKC1udW1iZXIpKS8yIFxyXG4gIC8vXHJcbiAgLy8gdmVyc2lvbjogMTAwNC4yMzE0XHJcbiAgLy8gZGlzY3VzcyBhdDogaHR0cDovL3BocGpzLm9yZy9mdW5jdGlvbnMvc2luaCAgICAvLyArICAgb3JpZ2luYWwgYnk6IE9ubm8gTWFyc21hblxyXG4gIC8vICogICAgIGV4YW1wbGUgMTogc2luaCgtMC45ODM0MzMwMzQ4ODI1OTA5KTtcclxuICAvLyAqICAgICByZXR1cm5zIDE6IC0xLjE0OTc5NzE0MDI2MzY1MDJcclxuICByZXR1cm4gKE1hdGguZXhwKGFyZykgLSBNYXRoLmV4cCgtYXJnKSkvMjtcclxufVxyXG5cclxuLyogXHJcbiAqICBCaXF1YWQgZmlsdGVyXHJcbiAqIFxyXG4gKiAgQ3JlYXRlZCBieSBSaWNhcmQgTWFyeGVyIDxlbWFpbEByaWNhcmRtYXJ4ZXIuY29tPiBvbiAyMDEwLTA1LTIzLlxyXG4gKiAgQ29weXJpZ2h0IDIwMTAgUmljYXJkIE1hcnhlci4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cclxuICpcclxuICovXHJcbi8vIEltcGxlbWVudGF0aW9uIGJhc2VkIG9uOlxyXG4vLyBodHRwOi8vd3d3Lm11c2ljZHNwLm9yZy9maWxlcy9BdWRpby1FUS1Db29rYm9vay50eHRcclxuZnVuY3Rpb24gQmlxdWFkKHR5cGUsIHNhbXBsZVJhdGUpIHtcclxuICB0aGlzLkZzID0gc2FtcGxlUmF0ZTtcclxuICB0aGlzLnR5cGUgPSB0eXBlOyAgLy8gdHlwZSBvZiB0aGUgZmlsdGVyXHJcbiAgdGhpcy5wYXJhbWV0ZXJUeXBlID0gRFNQLlE7IC8vIHR5cGUgb2YgdGhlIHBhcmFtZXRlclxyXG5cclxuICB0aGlzLnhfMV9sID0gMDtcclxuICB0aGlzLnhfMl9sID0gMDtcclxuICB0aGlzLnlfMV9sID0gMDtcclxuICB0aGlzLnlfMl9sID0gMDtcclxuXHJcbiAgdGhpcy54XzFfciA9IDA7XHJcbiAgdGhpcy54XzJfciA9IDA7XHJcbiAgdGhpcy55XzFfciA9IDA7XHJcbiAgdGhpcy55XzJfciA9IDA7XHJcblxyXG4gIHRoaXMuYjAgPSAxO1xyXG4gIHRoaXMuYTAgPSAxO1xyXG5cclxuICB0aGlzLmIxID0gMDtcclxuICB0aGlzLmExID0gMDtcclxuXHJcbiAgdGhpcy5iMiA9IDA7XHJcbiAgdGhpcy5hMiA9IDA7XHJcblxyXG4gIHRoaXMuYjBhMCA9IHRoaXMuYjAgLyB0aGlzLmEwO1xyXG4gIHRoaXMuYjFhMCA9IHRoaXMuYjEgLyB0aGlzLmEwO1xyXG4gIHRoaXMuYjJhMCA9IHRoaXMuYjIgLyB0aGlzLmEwO1xyXG4gIHRoaXMuYTFhMCA9IHRoaXMuYTEgLyB0aGlzLmEwO1xyXG4gIHRoaXMuYTJhMCA9IHRoaXMuYTIgLyB0aGlzLmEwO1xyXG5cclxuICB0aGlzLmYwID0gMzAwMDsgICAvLyBcIndoZXJldmVyIGl0J3MgaGFwcGVuaW4nLCBtYW4uXCIgIENlbnRlciBGcmVxdWVuY3kgb3JcclxuICAgICAgICAgICAgICAgICAgICAvLyBDb3JuZXIgRnJlcXVlbmN5LCBvciBzaGVsZiBtaWRwb2ludCBmcmVxdWVuY3ksIGRlcGVuZGluZ1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIG9uIHdoaWNoIGZpbHRlciB0eXBlLiAgVGhlIFwic2lnbmlmaWNhbnQgZnJlcXVlbmN5XCIuXHJcblxyXG4gIHRoaXMuZEJnYWluID0gMTI7IC8vIHVzZWQgb25seSBmb3IgcGVha2luZyBhbmQgc2hlbHZpbmcgZmlsdGVyc1xyXG5cclxuICB0aGlzLlEgPSAxOyAgICAgICAvLyB0aGUgRUUga2luZCBvZiBkZWZpbml0aW9uLCBleGNlcHQgZm9yIHBlYWtpbmdFUSBpbiB3aGljaCBBKlEgaXNcclxuICAgICAgICAgICAgICAgICAgICAvLyB0aGUgY2xhc3NpYyBFRSBRLiAgVGhhdCBhZGp1c3RtZW50IGluIGRlZmluaXRpb24gd2FzIG1hZGUgc28gdGhhdFxyXG4gICAgICAgICAgICAgICAgICAgIC8vIGEgYm9vc3Qgb2YgTiBkQiBmb2xsb3dlZCBieSBhIGN1dCBvZiBOIGRCIGZvciBpZGVudGljYWwgUSBhbmRcclxuICAgICAgICAgICAgICAgICAgICAvLyBmMC9GcyByZXN1bHRzIGluIGEgcHJlY2lzZWx5IGZsYXQgdW5pdHkgZ2FpbiBmaWx0ZXIgb3IgXCJ3aXJlXCIuXHJcblxyXG4gIHRoaXMuQlcgPSAtMzsgICAgIC8vIHRoZSBiYW5kd2lkdGggaW4gb2N0YXZlcyAoYmV0d2VlbiAtMyBkQiBmcmVxdWVuY2llcyBmb3IgQlBGXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gYW5kIG5vdGNoIG9yIGJldHdlZW4gbWlkcG9pbnQgKGRCZ2Fpbi8yKSBnYWluIGZyZXF1ZW5jaWVzIGZvclxyXG4gICAgICAgICAgICAgICAgICAgIC8vIHBlYWtpbmcgRVFcclxuXHJcbiAgdGhpcy5TID0gMTsgICAgICAgLy8gYSBcInNoZWxmIHNsb3BlXCIgcGFyYW1ldGVyIChmb3Igc2hlbHZpbmcgRVEgb25seSkuICBXaGVuIFMgPSAxLFxyXG4gICAgICAgICAgICAgICAgICAgIC8vIHRoZSBzaGVsZiBzbG9wZSBpcyBhcyBzdGVlcCBhcyBpdCBjYW4gYmUgYW5kIHJlbWFpbiBtb25vdG9uaWNhbGx5XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gaW5jcmVhc2luZyBvciBkZWNyZWFzaW5nIGdhaW4gd2l0aCBmcmVxdWVuY3kuICBUaGUgc2hlbGYgc2xvcGUsIGluXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gZEIvb2N0YXZlLCByZW1haW5zIHByb3BvcnRpb25hbCB0byBTIGZvciBhbGwgb3RoZXIgdmFsdWVzIGZvciBhXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gZml4ZWQgZjAvRnMgYW5kIGRCZ2Fpbi5cclxuXHJcbiAgdGhpcy5jb2VmZmljaWVudHMgPSBmdW5jdGlvbigpIHtcclxuICAgIHZhciBiID0gW3RoaXMuYjAsIHRoaXMuYjEsIHRoaXMuYjJdO1xyXG4gICAgdmFyIGEgPSBbdGhpcy5hMCwgdGhpcy5hMSwgdGhpcy5hMl07XHJcbiAgICByZXR1cm4ge2I6IGIsIGE6YX07XHJcbiAgfTtcclxuXHJcbiAgdGhpcy5zZXRGaWx0ZXJUeXBlID0gZnVuY3Rpb24odHlwZSkge1xyXG4gICAgdGhpcy50eXBlID0gdHlwZTtcclxuICAgIHRoaXMucmVjYWxjdWxhdGVDb2VmZmljaWVudHMoKTtcclxuICB9O1xyXG5cclxuICB0aGlzLnNldFNhbXBsZVJhdGUgPSBmdW5jdGlvbihyYXRlKSB7XHJcbiAgICB0aGlzLkZzID0gcmF0ZTtcclxuICAgIHRoaXMucmVjYWxjdWxhdGVDb2VmZmljaWVudHMoKTtcclxuICB9O1xyXG5cclxuICB0aGlzLnNldFEgPSBmdW5jdGlvbihxKSB7XHJcbiAgICB0aGlzLnBhcmFtZXRlclR5cGUgPSBEU1AuUTtcclxuICAgIHRoaXMuUSA9IE1hdGgubWF4KE1hdGgubWluKHEsIDExNS4wKSwgMC4wMDEpO1xyXG4gICAgdGhpcy5yZWNhbGN1bGF0ZUNvZWZmaWNpZW50cygpO1xyXG4gIH07XHJcblxyXG4gIHRoaXMuc2V0QlcgPSBmdW5jdGlvbihidykge1xyXG4gICAgdGhpcy5wYXJhbWV0ZXJUeXBlID0gRFNQLkJXO1xyXG4gICAgdGhpcy5CVyA9IGJ3O1xyXG4gICAgdGhpcy5yZWNhbGN1bGF0ZUNvZWZmaWNpZW50cygpO1xyXG4gIH07XHJcblxyXG4gIHRoaXMuc2V0UyA9IGZ1bmN0aW9uKHMpIHtcclxuICAgIHRoaXMucGFyYW1ldGVyVHlwZSA9IERTUC5TO1xyXG4gICAgdGhpcy5TID0gTWF0aC5tYXgoTWF0aC5taW4ocywgNS4wKSwgMC4wMDAxKTtcclxuICAgIHRoaXMucmVjYWxjdWxhdGVDb2VmZmljaWVudHMoKTtcclxuICB9O1xyXG5cclxuICB0aGlzLnNldEYwID0gZnVuY3Rpb24oZnJlcSkge1xyXG4gICAgdGhpcy5mMCA9IGZyZXE7XHJcbiAgICB0aGlzLnJlY2FsY3VsYXRlQ29lZmZpY2llbnRzKCk7XHJcbiAgfTsgXHJcbiBcclxuICB0aGlzLnNldERiR2FpbiA9IGZ1bmN0aW9uKGcpIHtcclxuICAgIHRoaXMuZEJnYWluID0gZztcclxuICAgIHRoaXMucmVjYWxjdWxhdGVDb2VmZmljaWVudHMoKTtcclxuICB9O1xyXG5cclxuICB0aGlzLnJlY2FsY3VsYXRlQ29lZmZpY2llbnRzID0gZnVuY3Rpb24oKSB7XHJcbiAgICB2YXIgQTtcclxuICAgIGlmICh0eXBlID09PSBEU1AuUEVBS0lOR19FUSB8fCB0eXBlID09PSBEU1AuTE9XX1NIRUxGIHx8IHR5cGUgPT09IERTUC5ISUdIX1NIRUxGICkge1xyXG4gICAgICBBID0gTWF0aC5wb3coMTAsICh0aGlzLmRCZ2Fpbi80MCkpOyAgLy8gZm9yIHBlYWtpbmcgYW5kIHNoZWx2aW5nIEVRIGZpbHRlcnMgb25seVxyXG4gICAgfSBlbHNlIHtcclxuICAgICAgQSAgPSBNYXRoLnNxcnQoIE1hdGgucG93KDEwLCAodGhpcy5kQmdhaW4vMjApKSApOyAgIFxyXG4gICAgfVxyXG5cclxuICAgIHZhciB3MCA9IERTUC5UV09fUEkgKiB0aGlzLmYwIC8gdGhpcy5GcztcclxuXHJcbiAgICB2YXIgY29zdzAgPSBNYXRoLmNvcyh3MCk7XHJcbiAgICB2YXIgc2ludzAgPSBNYXRoLnNpbih3MCk7XHJcblxyXG4gICAgdmFyIGFscGhhID0gMDtcclxuICAgXHJcbiAgICBzd2l0Y2ggKHRoaXMucGFyYW1ldGVyVHlwZSkge1xyXG4gICAgICBjYXNlIERTUC5ROlxyXG4gICAgICAgIGFscGhhID0gc2ludzAvKDIqdGhpcy5RKTtcclxuICAgICAgICBicmVhaztcclxuICAgICAgICAgICBcclxuICAgICAgY2FzZSBEU1AuQlc6XHJcbiAgICAgICAgYWxwaGEgPSBzaW53MCAqIHNpbmgoIE1hdGguTE4yLzIgKiB0aGlzLkJXICogdzAvc2ludzAgKTtcclxuICAgICAgICBicmVhaztcclxuXHJcbiAgICAgIGNhc2UgRFNQLlM6XHJcbiAgICAgICAgYWxwaGEgPSBzaW53MC8yICogTWF0aC5zcXJ0KCAoQSArIDEvQSkqKDEvdGhpcy5TIC0gMSkgKyAyICk7XHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgICAgRllJOiBUaGUgcmVsYXRpb25zaGlwIGJldHdlZW4gYmFuZHdpZHRoIGFuZCBRIGlzXHJcbiAgICAgICAgICAgICAxL1EgPSAyKnNpbmgobG4oMikvMipCVyp3MC9zaW4odzApKSAgICAgKGRpZ2l0YWwgZmlsdGVyIHcgQkxUKVxyXG4gICAgICAgIG9yICAgMS9RID0gMipzaW5oKGxuKDIpLzIqQlcpICAgICAgICAgICAgIChhbmFsb2cgZmlsdGVyIHByb3RvdHlwZSlcclxuXHJcbiAgICAgICAgVGhlIHJlbGF0aW9uc2hpcCBiZXR3ZWVuIHNoZWxmIHNsb3BlIGFuZCBRIGlzXHJcbiAgICAgICAgICAgICAxL1EgPSBzcXJ0KChBICsgMS9BKSooMS9TIC0gMSkgKyAyKVxyXG4gICAgKi9cclxuXHJcbiAgICB2YXIgY29lZmY7XHJcblxyXG4gICAgc3dpdGNoICh0aGlzLnR5cGUpIHtcclxuICAgICAgY2FzZSBEU1AuTFBGOiAgICAgICAvLyBIKHMpID0gMSAvIChzXjIgKyBzL1EgKyAxKVxyXG4gICAgICAgIHRoaXMuYjAgPSAgKDEgLSBjb3N3MCkvMjtcclxuICAgICAgICB0aGlzLmIxID0gICAxIC0gY29zdzA7XHJcbiAgICAgICAgdGhpcy5iMiA9ICAoMSAtIGNvc3cwKS8yO1xyXG4gICAgICAgIHRoaXMuYTAgPSAgIDEgKyBhbHBoYTtcclxuICAgICAgICB0aGlzLmExID0gIC0yICogY29zdzA7XHJcbiAgICAgICAgdGhpcy5hMiA9ICAgMSAtIGFscGhhO1xyXG4gICAgICAgIGJyZWFrO1xyXG5cclxuICAgICAgY2FzZSBEU1AuSFBGOiAgICAgICAvLyBIKHMpID0gc14yIC8gKHNeMiArIHMvUSArIDEpXHJcbiAgICAgICAgdGhpcy5iMCA9ICAoMSArIGNvc3cwKS8yO1xyXG4gICAgICAgIHRoaXMuYjEgPSAtKDEgKyBjb3N3MCk7XHJcbiAgICAgICAgdGhpcy5iMiA9ICAoMSArIGNvc3cwKS8yO1xyXG4gICAgICAgIHRoaXMuYTAgPSAgIDEgKyBhbHBoYTtcclxuICAgICAgICB0aGlzLmExID0gIC0yICogY29zdzA7XHJcbiAgICAgICAgdGhpcy5hMiA9ICAgMSAtIGFscGhhO1xyXG4gICAgICAgIGJyZWFrO1xyXG5cclxuICAgICAgY2FzZSBEU1AuQlBGX0NPTlNUQU5UX1NLSVJUOiAgICAgICAvLyBIKHMpID0gcyAvIChzXjIgKyBzL1EgKyAxKSAgKGNvbnN0YW50IHNraXJ0IGdhaW4sIHBlYWsgZ2FpbiA9IFEpXHJcbiAgICAgICAgdGhpcy5iMCA9ICAgc2ludzAvMjtcclxuICAgICAgICB0aGlzLmIxID0gICAwO1xyXG4gICAgICAgIHRoaXMuYjIgPSAgLXNpbncwLzI7XHJcbiAgICAgICAgdGhpcy5hMCA9ICAgMSArIGFscGhhO1xyXG4gICAgICAgIHRoaXMuYTEgPSAgLTIqY29zdzA7XHJcbiAgICAgICAgdGhpcy5hMiA9ICAgMSAtIGFscGhhO1xyXG4gICAgICAgIGJyZWFrO1xyXG5cclxuICAgICAgY2FzZSBEU1AuQlBGX0NPTlNUQU5UX1BFQUs6ICAgICAgIC8vIEgocykgPSAocy9RKSAvIChzXjIgKyBzL1EgKyAxKSAgICAgIChjb25zdGFudCAwIGRCIHBlYWsgZ2FpbilcclxuICAgICAgICB0aGlzLmIwID0gICBhbHBoYTtcclxuICAgICAgICB0aGlzLmIxID0gICAwO1xyXG4gICAgICAgIHRoaXMuYjIgPSAgLWFscGhhO1xyXG4gICAgICAgIHRoaXMuYTAgPSAgIDEgKyBhbHBoYTtcclxuICAgICAgICB0aGlzLmExID0gIC0yKmNvc3cwO1xyXG4gICAgICAgIHRoaXMuYTIgPSAgIDEgLSBhbHBoYTtcclxuICAgICAgICBicmVhaztcclxuXHJcbiAgICAgIGNhc2UgRFNQLk5PVENIOiAgICAgLy8gSChzKSA9IChzXjIgKyAxKSAvIChzXjIgKyBzL1EgKyAxKVxyXG4gICAgICAgIHRoaXMuYjAgPSAgIDE7XHJcbiAgICAgICAgdGhpcy5iMSA9ICAtMipjb3N3MDtcclxuICAgICAgICB0aGlzLmIyID0gICAxO1xyXG4gICAgICAgIHRoaXMuYTAgPSAgIDEgKyBhbHBoYTtcclxuICAgICAgICB0aGlzLmExID0gIC0yKmNvc3cwO1xyXG4gICAgICAgIHRoaXMuYTIgPSAgIDEgLSBhbHBoYTtcclxuICAgICAgICBicmVhaztcclxuXHJcbiAgICAgIGNhc2UgRFNQLkFQRjogICAgICAgLy8gSChzKSA9IChzXjIgLSBzL1EgKyAxKSAvIChzXjIgKyBzL1EgKyAxKVxyXG4gICAgICAgIHRoaXMuYjAgPSAgIDEgLSBhbHBoYTtcclxuICAgICAgICB0aGlzLmIxID0gIC0yKmNvc3cwO1xyXG4gICAgICAgIHRoaXMuYjIgPSAgIDEgKyBhbHBoYTtcclxuICAgICAgICB0aGlzLmEwID0gICAxICsgYWxwaGE7XHJcbiAgICAgICAgdGhpcy5hMSA9ICAtMipjb3N3MDtcclxuICAgICAgICB0aGlzLmEyID0gICAxIC0gYWxwaGE7XHJcbiAgICAgICAgYnJlYWs7XHJcblxyXG4gICAgICBjYXNlIERTUC5QRUFLSU5HX0VROiAgLy8gSChzKSA9IChzXjIgKyBzKihBL1EpICsgMSkgLyAoc14yICsgcy8oQSpRKSArIDEpXHJcbiAgICAgICAgdGhpcy5iMCA9ICAgMSArIGFscGhhKkE7XHJcbiAgICAgICAgdGhpcy5iMSA9ICAtMipjb3N3MDtcclxuICAgICAgICB0aGlzLmIyID0gICAxIC0gYWxwaGEqQTtcclxuICAgICAgICB0aGlzLmEwID0gICAxICsgYWxwaGEvQTtcclxuICAgICAgICB0aGlzLmExID0gIC0yKmNvc3cwO1xyXG4gICAgICAgIHRoaXMuYTIgPSAgIDEgLSBhbHBoYS9BO1xyXG4gICAgICAgIGJyZWFrO1xyXG5cclxuICAgICAgY2FzZSBEU1AuTE9XX1NIRUxGOiAgIC8vIEgocykgPSBBICogKHNeMiArIChzcXJ0KEEpL1EpKnMgKyBBKS8oQSpzXjIgKyAoc3FydChBKS9RKSpzICsgMSlcclxuICAgICAgICBjb2VmZiA9IHNpbncwICogTWF0aC5zcXJ0KCAoQV4yICsgMSkqKDEvdGhpcy5TIC0gMSkgKyAyKkEgKTtcclxuICAgICAgICB0aGlzLmIwID0gICAgQSooKEErMSkgLSAoQS0xKSpjb3N3MCArIGNvZWZmKTtcclxuICAgICAgICB0aGlzLmIxID0gIDIqQSooKEEtMSkgLSAoQSsxKSpjb3N3MCk7XHJcbiAgICAgICAgdGhpcy5iMiA9ICAgIEEqKChBKzEpIC0gKEEtMSkqY29zdzAgLSBjb2VmZik7XHJcbiAgICAgICAgdGhpcy5hMCA9ICAgICAgIChBKzEpICsgKEEtMSkqY29zdzAgKyBjb2VmZjtcclxuICAgICAgICB0aGlzLmExID0gICAtMiooKEEtMSkgKyAoQSsxKSpjb3N3MCk7XHJcbiAgICAgICAgdGhpcy5hMiA9ICAgICAgIChBKzEpICsgKEEtMSkqY29zdzAgLSBjb2VmZjtcclxuICAgICAgICBicmVhaztcclxuXHJcbiAgICAgIGNhc2UgRFNQLkhJR0hfU0hFTEY6ICAgLy8gSChzKSA9IEEgKiAoQSpzXjIgKyAoc3FydChBKS9RKSpzICsgMSkvKHNeMiArIChzcXJ0KEEpL1EpKnMgKyBBKVxyXG4gICAgICAgIGNvZWZmID0gc2ludzAgKiBNYXRoLnNxcnQoIChBXjIgKyAxKSooMS90aGlzLlMgLSAxKSArIDIqQSApO1xyXG4gICAgICAgIHRoaXMuYjAgPSAgICBBKigoQSsxKSArIChBLTEpKmNvc3cwICsgY29lZmYpO1xyXG4gICAgICAgIHRoaXMuYjEgPSAtMipBKigoQS0xKSArIChBKzEpKmNvc3cwKTtcclxuICAgICAgICB0aGlzLmIyID0gICAgQSooKEErMSkgKyAoQS0xKSpjb3N3MCAtIGNvZWZmKTtcclxuICAgICAgICB0aGlzLmEwID0gICAgICAgKEErMSkgLSAoQS0xKSpjb3N3MCArIGNvZWZmO1xyXG4gICAgICAgIHRoaXMuYTEgPSAgICAyKigoQS0xKSAtIChBKzEpKmNvc3cwKTtcclxuICAgICAgICB0aGlzLmEyID0gICAgICAgKEErMSkgLSAoQS0xKSpjb3N3MCAtIGNvZWZmO1xyXG4gICAgICAgIGJyZWFrO1xyXG4gICAgfVxyXG4gICBcclxuICAgIHRoaXMuYjBhMCA9IHRoaXMuYjAvdGhpcy5hMDtcclxuICAgIHRoaXMuYjFhMCA9IHRoaXMuYjEvdGhpcy5hMDtcclxuICAgIHRoaXMuYjJhMCA9IHRoaXMuYjIvdGhpcy5hMDtcclxuICAgIHRoaXMuYTFhMCA9IHRoaXMuYTEvdGhpcy5hMDtcclxuICAgIHRoaXMuYTJhMCA9IHRoaXMuYTIvdGhpcy5hMDtcclxuICB9O1xyXG5cclxuICB0aGlzLnByb2Nlc3MgPSBmdW5jdGlvbihidWZmZXIpIHtcclxuICAgICAgLy95W25dID0gKGIwL2EwKSp4W25dICsgKGIxL2EwKSp4W24tMV0gKyAoYjIvYTApKnhbbi0yXVxyXG4gICAgICAvLyAgICAgICAtIChhMS9hMCkqeVtuLTFdIC0gKGEyL2EwKSp5W24tMl1cclxuXHJcbiAgICAgIHZhciBsZW4gPSBidWZmZXIubGVuZ3RoO1xyXG4gICAgICB2YXIgb3V0cHV0ID0gbmV3IEZsb2F0MzJBcnJheShsZW4pO1xyXG5cclxuICAgICAgZm9yICggdmFyIGk9MDsgaTxidWZmZXIubGVuZ3RoOyBpKysgKSB7XHJcbiAgICAgICAgb3V0cHV0W2ldID0gdGhpcy5iMGEwKmJ1ZmZlcltpXSArIHRoaXMuYjFhMCp0aGlzLnhfMV9sICsgdGhpcy5iMmEwKnRoaXMueF8yX2wgLSB0aGlzLmExYTAqdGhpcy55XzFfbCAtIHRoaXMuYTJhMCp0aGlzLnlfMl9sO1xyXG4gICAgICAgIHRoaXMueV8yX2wgPSB0aGlzLnlfMV9sO1xyXG4gICAgICAgIHRoaXMueV8xX2wgPSBvdXRwdXRbaV07XHJcbiAgICAgICAgdGhpcy54XzJfbCA9IHRoaXMueF8xX2w7XHJcbiAgICAgICAgdGhpcy54XzFfbCA9IGJ1ZmZlcltpXTtcclxuICAgICAgfVxyXG5cclxuICAgICAgcmV0dXJuIG91dHB1dDtcclxuICB9O1xyXG5cclxuICB0aGlzLnByb2Nlc3NTdGVyZW8gPSBmdW5jdGlvbihidWZmZXIpIHtcclxuICAgICAgLy95W25dID0gKGIwL2EwKSp4W25dICsgKGIxL2EwKSp4W24tMV0gKyAoYjIvYTApKnhbbi0yXVxyXG4gICAgICAvLyAgICAgICAtIChhMS9hMCkqeVtuLTFdIC0gKGEyL2EwKSp5W24tMl1cclxuXHJcbiAgICAgIHZhciBsZW4gPSBidWZmZXIubGVuZ3RoO1xyXG4gICAgICB2YXIgb3V0cHV0ID0gbmV3IEZsb2F0MzJBcnJheShsZW4pO1xyXG4gICAgIFxyXG4gICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbi8yOyBpKyspIHtcclxuICAgICAgICBvdXRwdXRbMippXSA9IHRoaXMuYjBhMCpidWZmZXJbMippXSArIHRoaXMuYjFhMCp0aGlzLnhfMV9sICsgdGhpcy5iMmEwKnRoaXMueF8yX2wgLSB0aGlzLmExYTAqdGhpcy55XzFfbCAtIHRoaXMuYTJhMCp0aGlzLnlfMl9sO1xyXG4gICAgICAgIHRoaXMueV8yX2wgPSB0aGlzLnlfMV9sO1xyXG4gICAgICAgIHRoaXMueV8xX2wgPSBvdXRwdXRbMippXTtcclxuICAgICAgICB0aGlzLnhfMl9sID0gdGhpcy54XzFfbDtcclxuICAgICAgICB0aGlzLnhfMV9sID0gYnVmZmVyWzIqaV07XHJcblxyXG4gICAgICAgIG91dHB1dFsyKmkrMV0gPSB0aGlzLmIwYTAqYnVmZmVyWzIqaSsxXSArIHRoaXMuYjFhMCp0aGlzLnhfMV9yICsgdGhpcy5iMmEwKnRoaXMueF8yX3IgLSB0aGlzLmExYTAqdGhpcy55XzFfciAtIHRoaXMuYTJhMCp0aGlzLnlfMl9yO1xyXG4gICAgICAgIHRoaXMueV8yX3IgPSB0aGlzLnlfMV9yO1xyXG4gICAgICAgIHRoaXMueV8xX3IgPSBvdXRwdXRbMippKzFdO1xyXG4gICAgICAgIHRoaXMueF8yX3IgPSB0aGlzLnhfMV9yO1xyXG4gICAgICAgIHRoaXMueF8xX3IgPSBidWZmZXJbMippKzFdO1xyXG4gICAgICB9XHJcblxyXG4gICAgICByZXR1cm4gb3V0cHV0O1xyXG4gIH07XHJcbn1cclxuXHJcbi8qIFxyXG4gKiAgTWFnbml0dWRlIHRvIGRlY2liZWxzXHJcbiAqIFxyXG4gKiAgQ3JlYXRlZCBieSBSaWNhcmQgTWFyeGVyIDxlbWFpbEByaWNhcmRtYXJ4ZXIuY29tPiBvbiAyMDEwLTA1LTIzLlxyXG4gKiAgQ29weXJpZ2h0IDIwMTAgUmljYXJkIE1hcnhlci4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cclxuICpcclxuICogIEBidWZmZXIgYXJyYXkgb2YgbWFnbml0dWRlcyB0byBjb252ZXJ0IHRvIGRlY2liZWxzXHJcbiAqXHJcbiAqICBAcmV0dXJucyB0aGUgYXJyYXkgaW4gZGVjaWJlbHNcclxuICpcclxuICovXHJcbkRTUC5tYWcyZGIgPSBmdW5jdGlvbihidWZmZXIpIHtcclxuICB2YXIgbWluRGIgPSAtMTIwO1xyXG4gIHZhciBtaW5NYWcgPSBNYXRoLnBvdygxMC4wLCBtaW5EYiAvIDIwLjApO1xyXG5cclxuICB2YXIgbG9nID0gTWF0aC5sb2c7XHJcbiAgdmFyIG1heCA9IE1hdGgubWF4O1xyXG4gXHJcbiAgdmFyIHJlc3VsdCA9IEZsb2F0MzJBcnJheShidWZmZXIubGVuZ3RoKTtcclxuICBmb3IgKHZhciBpPTA7IGk8YnVmZmVyLmxlbmd0aDsgaSsrKSB7XHJcbiAgICByZXN1bHRbaV0gPSAyMC4wKmxvZyhtYXgoYnVmZmVyW2ldLCBtaW5NYWcpKTtcclxuICB9XHJcblxyXG4gIHJldHVybiByZXN1bHQ7XHJcbn07XHJcblxyXG4vKiBcclxuICogIEZyZXF1ZW5jeSByZXNwb25zZVxyXG4gKiBcclxuICogIENyZWF0ZWQgYnkgUmljYXJkIE1hcnhlciA8ZW1haWxAcmljYXJkbWFyeGVyLmNvbT4gb24gMjAxMC0wNS0yMy5cclxuICogIENvcHlyaWdodCAyMDEwIFJpY2FyZCBNYXJ4ZXIuIEFsbCByaWdodHMgcmVzZXJ2ZWQuXHJcbiAqXHJcbiAqICBDYWxjdWxhdGVzIHRoZSBmcmVxdWVuY3kgcmVzcG9uc2UgYXQgdGhlIGdpdmVuIHBvaW50cy5cclxuICpcclxuICogIEBiIGIgY29lZmZpY2llbnRzIG9mIHRoZSBmaWx0ZXJcclxuICogIEBhIGEgY29lZmZpY2llbnRzIG9mIHRoZSBmaWx0ZXJcclxuICogIEB3IHcgcG9pbnRzIChub3JtYWxseSBiZXR3ZWVuIC1QSSBhbmQgUEkpIHdoZXJlIHRvIGNhbGN1bGF0ZSB0aGUgZnJlcXVlbmN5IHJlc3BvbnNlXHJcbiAqXHJcbiAqICBAcmV0dXJucyB0aGUgZnJlcXVlbmN5IHJlc3BvbnNlIGluIG1hZ25pdHVkZVxyXG4gKlxyXG4gKi9cclxuRFNQLmZyZXF6ID0gZnVuY3Rpb24oYiwgYSwgdykge1xyXG4gIHZhciBpLCBqO1xyXG5cclxuICBpZiAoIXcpIHtcclxuICAgIHcgPSBGbG9hdDMyQXJyYXkoMjAwKTtcclxuICAgIGZvciAoaT0wO2k8dy5sZW5ndGg7IGkrKykge1xyXG4gICAgICB3W2ldID0gRFNQLlRXT19QSS93Lmxlbmd0aCAqIGkgLSBNYXRoLlBJO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgdmFyIHJlc3VsdCA9IEZsb2F0MzJBcnJheSh3Lmxlbmd0aCk7XHJcbiBcclxuICB2YXIgc3FydCA9IE1hdGguc3FydDtcclxuICB2YXIgY29zID0gTWF0aC5jb3M7XHJcbiAgdmFyIHNpbiA9IE1hdGguc2luO1xyXG4gXHJcbiAgZm9yIChpPTA7IGk8dy5sZW5ndGg7IGkrKykge1xyXG4gICAgdmFyIG51bWVyYXRvciA9IHtyZWFsOjAuMCwgaW1hZzowLjB9O1xyXG4gICAgZm9yIChqPTA7IGo8Yi5sZW5ndGg7IGorKykge1xyXG4gICAgICBudW1lcmF0b3IucmVhbCArPSBiW2pdICogY29zKC1qKndbaV0pO1xyXG4gICAgICBudW1lcmF0b3IuaW1hZyArPSBiW2pdICogc2luKC1qKndbaV0pO1xyXG4gICAgfVxyXG5cclxuICAgIHZhciBkZW5vbWluYXRvciA9IHtyZWFsOjAuMCwgaW1hZzowLjB9O1xyXG4gICAgZm9yIChqPTA7IGo8YS5sZW5ndGg7IGorKykge1xyXG4gICAgICBkZW5vbWluYXRvci5yZWFsICs9IGFbal0gKiBjb3MoLWoqd1tpXSk7XHJcbiAgICAgIGRlbm9taW5hdG9yLmltYWcgKz0gYVtqXSAqIHNpbigtaip3W2ldKTtcclxuICAgIH1cclxuIFxyXG4gICAgcmVzdWx0W2ldID0gIHNxcnQobnVtZXJhdG9yLnJlYWwqbnVtZXJhdG9yLnJlYWwgKyBudW1lcmF0b3IuaW1hZypudW1lcmF0b3IuaW1hZykgLyBzcXJ0KGRlbm9taW5hdG9yLnJlYWwqZGVub21pbmF0b3IucmVhbCArIGRlbm9taW5hdG9yLmltYWcqZGVub21pbmF0b3IuaW1hZyk7XHJcbiAgfVxyXG5cclxuICByZXR1cm4gcmVzdWx0O1xyXG59O1xyXG5cclxuLyogXHJcbiAqICBHcmFwaGljYWwgRXF1YWxpemVyXHJcbiAqXHJcbiAqICBJbXBsZW1lbnRhdGlvbiBvZiBhIGdyYXBoaWMgZXF1YWxpemVyIHdpdGggYSBjb25maWd1cmFibGUgYmFuZHMtcGVyLW9jdGF2ZVxyXG4gKiAgYW5kIG1pbmltdW0gYW5kIG1heGltdW0gZnJlcXVlbmNpZXNcclxuICogXHJcbiAqICBDcmVhdGVkIGJ5IFJpY2FyZCBNYXJ4ZXIgPGVtYWlsQHJpY2FyZG1hcnhlci5jb20+IG9uIDIwMTAtMDUtMjMuXHJcbiAqICBDb3B5cmlnaHQgMjAxMCBSaWNhcmQgTWFyeGVyLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxyXG4gKlxyXG4gKi9cclxuZnVuY3Rpb24gR3JhcGhpY2FsRXEoc2FtcGxlUmF0ZSkge1xyXG4gIHRoaXMuRlMgPSBzYW1wbGVSYXRlO1xyXG4gIHRoaXMubWluRnJlcSA9IDQwLjA7XHJcbiAgdGhpcy5tYXhGcmVxID0gMTYwMDAuMDtcclxuXHJcbiAgdGhpcy5iYW5kc1Blck9jdGF2ZSA9IDEuMDtcclxuXHJcbiAgdGhpcy5maWx0ZXJzID0gW107XHJcbiAgdGhpcy5mcmVxenMgPSBbXTtcclxuXHJcbiAgdGhpcy5jYWxjdWxhdGVGcmVxenMgPSB0cnVlO1xyXG5cclxuICB0aGlzLnJlY2FsY3VsYXRlRmlsdGVycyA9IGZ1bmN0aW9uKCkge1xyXG4gICAgdmFyIGJhbmRDb3VudCA9IE1hdGgucm91bmQoTWF0aC5sb2codGhpcy5tYXhGcmVxL3RoaXMubWluRnJlcSkgKiB0aGlzLmJhbmRzUGVyT2N0YXZlLyBNYXRoLkxOMik7XHJcblxyXG4gICAgdGhpcy5maWx0ZXJzID0gW107XHJcbiAgICBmb3IgKHZhciBpPTA7IGk8YmFuZENvdW50OyBpKyspIHtcclxuICAgICAgdmFyIGZyZXEgPSB0aGlzLm1pbkZyZXEqKE1hdGgucG93KDIsIGkvdGhpcy5iYW5kc1Blck9jdGF2ZSkpO1xyXG4gICAgICB2YXIgbmV3RmlsdGVyID0gbmV3IEJpcXVhZChEU1AuUEVBS0lOR19FUSwgdGhpcy5GUyk7XHJcbiAgICAgIG5ld0ZpbHRlci5zZXREYkdhaW4oMCk7XHJcbiAgICAgIG5ld0ZpbHRlci5zZXRCVygxL3RoaXMuYmFuZHNQZXJPY3RhdmUpO1xyXG4gICAgICBuZXdGaWx0ZXIuc2V0RjAoZnJlcSk7XHJcbiAgICAgIHRoaXMuZmlsdGVyc1tpXSA9IG5ld0ZpbHRlcjtcclxuICAgICAgdGhpcy5yZWNhbGN1bGF0ZUZyZXF6KGkpO1xyXG4gICAgfVxyXG4gIH07XHJcblxyXG4gIHRoaXMuc2V0TWluaW11bUZyZXF1ZW5jeSA9IGZ1bmN0aW9uKGZyZXEpIHtcclxuICAgIHRoaXMubWluRnJlcSA9IGZyZXE7XHJcbiAgICB0aGlzLnJlY2FsY3VsYXRlRmlsdGVycygpO1xyXG4gIH07XHJcblxyXG4gIHRoaXMuc2V0TWF4aW11bUZyZXF1ZW5jeSA9IGZ1bmN0aW9uKGZyZXEpIHtcclxuICAgIHRoaXMubWF4RnJlcSA9IGZyZXE7XHJcbiAgICB0aGlzLnJlY2FsY3VsYXRlRmlsdGVycygpO1xyXG4gIH07XHJcblxyXG4gIHRoaXMuc2V0QmFuZHNQZXJPY3RhdmUgPSBmdW5jdGlvbihiYW5kcykge1xyXG4gICAgdGhpcy5iYW5kc1Blck9jdGF2ZSA9IGJhbmRzO1xyXG4gICAgdGhpcy5yZWNhbGN1bGF0ZUZpbHRlcnMoKTtcclxuICB9O1xyXG5cclxuICB0aGlzLnNldEJhbmRHYWluID0gZnVuY3Rpb24oYmFuZEluZGV4LCBnYWluKSB7XHJcbiAgICBpZiAoYmFuZEluZGV4IDwgMCB8fCBiYW5kSW5kZXggPiAodGhpcy5maWx0ZXJzLmxlbmd0aC0xKSkge1xyXG4gICAgICB0aHJvdyBcIlRoZSBiYW5kIGluZGV4IG9mIHRoZSBncmFwaGljYWwgZXF1YWxpemVyIGlzIG91dCBvZiBib3VuZHMuXCI7XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKCFnYWluKSB7XHJcbiAgICAgIHRocm93IFwiQSBnYWluIG11c3QgYmUgcGFzc2VkLlwiO1xyXG4gICAgfVxyXG4gICBcclxuICAgIHRoaXMuZmlsdGVyc1tiYW5kSW5kZXhdLnNldERiR2FpbihnYWluKTtcclxuICAgIHRoaXMucmVjYWxjdWxhdGVGcmVxeihiYW5kSW5kZXgpO1xyXG4gIH07XHJcbiBcclxuICB0aGlzLnJlY2FsY3VsYXRlRnJlcXogPSBmdW5jdGlvbihiYW5kSW5kZXgpIHtcclxuICAgIGlmICghdGhpcy5jYWxjdWxhdGVGcmVxenMpIHtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG5cclxuICAgIGlmIChiYW5kSW5kZXggPCAwIHx8IGJhbmRJbmRleCA+ICh0aGlzLmZpbHRlcnMubGVuZ3RoLTEpKSB7XHJcbiAgICAgIHRocm93IFwiVGhlIGJhbmQgaW5kZXggb2YgdGhlIGdyYXBoaWNhbCBlcXVhbGl6ZXIgaXMgb3V0IG9mIGJvdW5kcy4gXCIgKyBiYW5kSW5kZXggKyBcIiBpcyBvdXQgb2YgW1wiICsgMCArIFwiLCBcIiArIHRoaXMuZmlsdGVycy5sZW5ndGgtMSArIFwiXVwiO1xyXG4gICAgfVxyXG4gICAgICAgXHJcbiAgICBpZiAoIXRoaXMudykge1xyXG4gICAgICB0aGlzLncgPSBGbG9hdDMyQXJyYXkoNDAwKTtcclxuICAgICAgZm9yICh2YXIgaT0wOyBpPHRoaXMudy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICB0aGlzLndbaV0gPSBNYXRoLlBJL3RoaXMudy5sZW5ndGggKiBpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgIFxyXG4gICAgdmFyIGIgPSBbdGhpcy5maWx0ZXJzW2JhbmRJbmRleF0uYjAsIHRoaXMuZmlsdGVyc1tiYW5kSW5kZXhdLmIxLCB0aGlzLmZpbHRlcnNbYmFuZEluZGV4XS5iMl07XHJcbiAgICB2YXIgYSA9IFt0aGlzLmZpbHRlcnNbYmFuZEluZGV4XS5hMCwgdGhpcy5maWx0ZXJzW2JhbmRJbmRleF0uYTEsIHRoaXMuZmlsdGVyc1tiYW5kSW5kZXhdLmEyXTtcclxuXHJcbiAgICB0aGlzLmZyZXF6c1tiYW5kSW5kZXhdID0gRFNQLm1hZzJkYihEU1AuZnJlcXooYiwgYSwgdGhpcy53KSk7XHJcbiAgfTtcclxuXHJcbiAgdGhpcy5wcm9jZXNzID0gZnVuY3Rpb24oYnVmZmVyKSB7XHJcbiAgICB2YXIgb3V0cHV0ID0gYnVmZmVyO1xyXG5cclxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5maWx0ZXJzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgIG91dHB1dCA9IHRoaXMuZmlsdGVyc1tpXS5wcm9jZXNzKG91dHB1dCk7XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIG91dHB1dDtcclxuICB9O1xyXG5cclxuICB0aGlzLnByb2Nlc3NTdGVyZW8gPSBmdW5jdGlvbihidWZmZXIpIHtcclxuICAgIHZhciBvdXRwdXQgPSBidWZmZXI7XHJcblxyXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLmZpbHRlcnMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgb3V0cHV0ID0gdGhpcy5maWx0ZXJzW2ldLnByb2Nlc3NTdGVyZW8ob3V0cHV0KTtcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gb3V0cHV0O1xyXG4gIH07XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBNdWx0aURlbGF5IGVmZmVjdCBieSBBbG1lciBUaGllIChodHRwOi8vY29kZS5hbG1lcm9zLmNvbSkuXHJcbiAqIENvcHlyaWdodCAyMDEwIEFsbWVyIFRoaWUuIEFsbCByaWdodHMgcmVzZXJ2ZWQuXHJcbiAqIEV4YW1wbGU6IGh0dHA6Ly9jb2RlLmFsbWVyb3MuY29tL2NvZGUtZXhhbXBsZXMvZGVsYXktZmlyZWZveC1hdWRpby1hcGkvXHJcbiAqXHJcbiAqIFRoaXMgaXMgYSBkZWxheSB0aGF0IGZlZWRzIGl0J3Mgb3duIGRlbGF5ZWQgc2lnbmFsIGJhY2sgaW50byBpdHMgY2lyY3VsYXJcclxuICogYnVmZmVyLiBBbHNvIGtub3duIGFzIGEgQ29tYkZpbHRlci5cclxuICpcclxuICogQ29tcGF0aWJsZSB3aXRoIGludGVybGVhdmVkIHN0ZXJlbyAob3IgbW9yZSBjaGFubmVsKSBidWZmZXJzIGFuZFxyXG4gKiBub24taW50ZXJsZWF2ZWQgbW9ubyBidWZmZXJzLlxyXG4gKlxyXG4gKiBAcGFyYW0ge051bWJlcn0gbWF4RGVsYXlJblNhbXBsZXNTaXplIE1heGltdW0gcG9zc2libGUgZGVsYXkgaW4gc2FtcGxlcyAoc2l6ZSBvZiBjaXJjdWxhciBidWZmZXIpXHJcbiAqIEBwYXJhbSB7TnVtYmVyfSBkZWxheUluU2FtcGxlcyBJbml0aWFsIGRlbGF5IGluIHNhbXBsZXNcclxuICogQHBhcmFtIHtOdW1iZXJ9IG1hc3RlclZvbHVtZSBJbml0aWFsIG1hc3RlciB2b2x1bWUuIEZsb2F0IHZhbHVlOiAwLjAgKHNpbGVuY2UpLCAxLjAgKG5vcm1hbCksID4xLjAgKGFtcGxpZnkpXHJcbiAqIEBwYXJhbSB7TnVtYmVyfSBkZWxheVZvbHVtZSBJbml0aWFsIGZlZWRiYWNrIGRlbGF5IHZvbHVtZS4gRmxvYXQgdmFsdWU6IDAuMCAoc2lsZW5jZSksIDEuMCAobm9ybWFsKSwgPjEuMCAoYW1wbGlmeSlcclxuICpcclxuICogQGNvbnN0cnVjdG9yXHJcbiAqL1xyXG5mdW5jdGlvbiBNdWx0aURlbGF5KG1heERlbGF5SW5TYW1wbGVzU2l6ZSwgZGVsYXlJblNhbXBsZXMsIG1hc3RlclZvbHVtZSwgZGVsYXlWb2x1bWUpIHtcclxuICB0aGlzLmRlbGF5QnVmZmVyU2FtcGxlcyAgID0gbmV3IEZsb2F0MzJBcnJheShtYXhEZWxheUluU2FtcGxlc1NpemUpOyAvLyBUaGUgbWF4aW11bSBzaXplIG9mIGRlbGF5XHJcbiAgdGhpcy5kZWxheUlucHV0UG9pbnRlciAgICAgPSBkZWxheUluU2FtcGxlcztcclxuICB0aGlzLmRlbGF5T3V0cHV0UG9pbnRlciAgID0gMDtcclxuIFxyXG4gIHRoaXMuZGVsYXlJblNhbXBsZXMgICA9IGRlbGF5SW5TYW1wbGVzO1xyXG4gIHRoaXMubWFzdGVyVm9sdW1lICAgICA9IG1hc3RlclZvbHVtZTtcclxuICB0aGlzLmRlbGF5Vm9sdW1lICAgICA9IGRlbGF5Vm9sdW1lO1xyXG59XHJcblxyXG4vKipcclxuICogQ2hhbmdlIHRoZSBkZWxheSB0aW1lIGluIHNhbXBsZXMuXHJcbiAqXHJcbiAqIEBwYXJhbSB7TnVtYmVyfSBkZWxheUluU2FtcGxlcyBEZWxheSBpbiBzYW1wbGVzXHJcbiAqL1xyXG5NdWx0aURlbGF5LnByb3RvdHlwZS5zZXREZWxheUluU2FtcGxlcyA9IGZ1bmN0aW9uIChkZWxheUluU2FtcGxlcykge1xyXG4gIHRoaXMuZGVsYXlJblNhbXBsZXMgPSBkZWxheUluU2FtcGxlcztcclxuIFxyXG4gIHRoaXMuZGVsYXlJbnB1dFBvaW50ZXIgPSB0aGlzLmRlbGF5T3V0cHV0UG9pbnRlciArIGRlbGF5SW5TYW1wbGVzO1xyXG5cclxuICBpZiAodGhpcy5kZWxheUlucHV0UG9pbnRlciA+PSB0aGlzLmRlbGF5QnVmZmVyU2FtcGxlcy5sZW5ndGgtMSkge1xyXG4gICAgdGhpcy5kZWxheUlucHV0UG9pbnRlciA9IHRoaXMuZGVsYXlJbnB1dFBvaW50ZXIgLSB0aGlzLmRlbGF5QnVmZmVyU2FtcGxlcy5sZW5ndGg7IFxyXG4gIH1cclxufTtcclxuXHJcbi8qKlxyXG4gKiBDaGFuZ2UgdGhlIG1hc3RlciB2b2x1bWUuXHJcbiAqXHJcbiAqIEBwYXJhbSB7TnVtYmVyfSBtYXN0ZXJWb2x1bWUgRmxvYXQgdmFsdWU6IDAuMCAoc2lsZW5jZSksIDEuMCAobm9ybWFsKSwgPjEuMCAoYW1wbGlmeSlcclxuICovXHJcbk11bHRpRGVsYXkucHJvdG90eXBlLnNldE1hc3RlclZvbHVtZSA9IGZ1bmN0aW9uKG1hc3RlclZvbHVtZSkge1xyXG4gIHRoaXMubWFzdGVyVm9sdW1lID0gbWFzdGVyVm9sdW1lO1xyXG59O1xyXG5cclxuLyoqXHJcbiAqIENoYW5nZSB0aGUgZGVsYXkgZmVlZGJhY2sgdm9sdW1lLlxyXG4gKlxyXG4gKiBAcGFyYW0ge051bWJlcn0gZGVsYXlWb2x1bWUgRmxvYXQgdmFsdWU6IDAuMCAoc2lsZW5jZSksIDEuMCAobm9ybWFsKSwgPjEuMCAoYW1wbGlmeSlcclxuICovXHJcbk11bHRpRGVsYXkucHJvdG90eXBlLnNldERlbGF5Vm9sdW1lID0gZnVuY3Rpb24oZGVsYXlWb2x1bWUpIHtcclxuICB0aGlzLmRlbGF5Vm9sdW1lID0gZGVsYXlWb2x1bWU7XHJcbn07XHJcblxyXG4vKipcclxuICogUHJvY2VzcyBhIGdpdmVuIGludGVybGVhdmVkIG9yIG1vbm8gbm9uLWludGVybGVhdmVkIGZsb2F0IHZhbHVlIEFycmF5IGFuZCBhZGRzIHRoZSBkZWxheWVkIGF1ZGlvLlxyXG4gKlxyXG4gKiBAcGFyYW0ge0FycmF5fSBzYW1wbGVzIEFycmF5IGNvbnRhaW5pbmcgRmxvYXQgdmFsdWVzIG9yIGEgRmxvYXQzMkFycmF5XHJcbiAqXHJcbiAqIEByZXR1cm5zIEEgbmV3IEZsb2F0MzJBcnJheSBpbnRlcmxlYXZlZCBvciBtb25vIG5vbi1pbnRlcmxlYXZlZCBhcyB3YXMgZmVkIHRvIHRoaXMgZnVuY3Rpb24uXHJcbiAqL1xyXG5NdWx0aURlbGF5LnByb3RvdHlwZS5wcm9jZXNzID0gZnVuY3Rpb24oc2FtcGxlcykge1xyXG4gIC8vIE5CLiBNYWtlIGEgY29weSB0byBwdXQgaW4gdGhlIG91dHB1dCBzYW1wbGVzIHRvIHJldHVybi5cclxuICB2YXIgb3V0cHV0U2FtcGxlcyA9IG5ldyBGbG9hdDMyQXJyYXkoc2FtcGxlcy5sZW5ndGgpO1xyXG5cclxuICBmb3IgKHZhciBpPTA7IGk8c2FtcGxlcy5sZW5ndGg7IGkrKykge1xyXG4gICAgLy8gZGVsYXlCdWZmZXJTYW1wbGVzIGNvdWxkIGNvbnRhaW4gaW5pdGlhbCBOVUxMJ3MsIHJldHVybiBzaWxlbmNlIGluIHRoYXQgY2FzZVxyXG4gICAgdmFyIGRlbGF5U2FtcGxlID0gKHRoaXMuZGVsYXlCdWZmZXJTYW1wbGVzW3RoaXMuZGVsYXlPdXRwdXRQb2ludGVyXSA9PT0gbnVsbCA/IDAuMCA6IHRoaXMuZGVsYXlCdWZmZXJTYW1wbGVzW3RoaXMuZGVsYXlPdXRwdXRQb2ludGVyXSk7XHJcbiAgIFxyXG4gICAgLy8gTWl4IG5vcm1hbCBhdWRpbyBkYXRhIHdpdGggZGVsYXllZCBhdWRpb1xyXG4gICAgdmFyIHNhbXBsZSA9IChkZWxheVNhbXBsZSAqIHRoaXMuZGVsYXlWb2x1bWUpICsgc2FtcGxlc1tpXTtcclxuICAgXHJcbiAgICAvLyBBZGQgYXVkaW8gZGF0YSB3aXRoIHRoZSBkZWxheSBpbiB0aGUgZGVsYXkgYnVmZmVyXHJcbiAgICB0aGlzLmRlbGF5QnVmZmVyU2FtcGxlc1t0aGlzLmRlbGF5SW5wdXRQb2ludGVyXSA9IHNhbXBsZTtcclxuICAgXHJcbiAgICAvLyBSZXR1cm4gdGhlIGF1ZGlvIHdpdGggZGVsYXkgbWl4XHJcbiAgICBvdXRwdXRTYW1wbGVzW2ldID0gc2FtcGxlICogdGhpcy5tYXN0ZXJWb2x1bWU7XHJcbiAgIFxyXG4gICAgLy8gTWFuYWdlIGNpcmN1bGFpciBkZWxheSBidWZmZXIgcG9pbnRlcnNcclxuICAgIHRoaXMuZGVsYXlJbnB1dFBvaW50ZXIrKztcclxuICAgIGlmICh0aGlzLmRlbGF5SW5wdXRQb2ludGVyID49IHRoaXMuZGVsYXlCdWZmZXJTYW1wbGVzLmxlbmd0aC0xKSB7XHJcbiAgICAgIHRoaXMuZGVsYXlJbnB1dFBvaW50ZXIgPSAwO1xyXG4gICAgfVxyXG4gICAgIFxyXG4gICAgdGhpcy5kZWxheU91dHB1dFBvaW50ZXIrKztcclxuICAgIGlmICh0aGlzLmRlbGF5T3V0cHV0UG9pbnRlciA+PSB0aGlzLmRlbGF5QnVmZmVyU2FtcGxlcy5sZW5ndGgtMSkge1xyXG4gICAgICB0aGlzLmRlbGF5T3V0cHV0UG9pbnRlciA9IDA7IFxyXG4gICAgfSBcclxuICB9XHJcbiBcclxuICByZXR1cm4gb3V0cHV0U2FtcGxlcztcclxufTtcclxuXHJcbi8qKlxyXG4gKiBTaW5nbGVEZWxheSBlZmZlY3QgYnkgQWxtZXIgVGhpZSAoaHR0cDovL2NvZGUuYWxtZXJvcy5jb20pLlxyXG4gKiBDb3B5cmlnaHQgMjAxMCBBbG1lciBUaGllLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxyXG4gKiBFeGFtcGxlOiBTZWUgdXNhZ2UgaW4gUmV2ZXJiIGNsYXNzXHJcbiAqXHJcbiAqIFRoaXMgaXMgYSBkZWxheSB0aGF0IGRvZXMgTk9UIGZlZWRzIGl0J3Mgb3duIGRlbGF5ZWQgc2lnbmFsIGJhY2sgaW50byBpdHMgXHJcbiAqIGNpcmN1bGFyIGJ1ZmZlciwgbmVpdGhlciBkb2VzIGl0IHJldHVybiB0aGUgb3JpZ2luYWwgc2lnbmFsLiBBbHNvIGtub3duIGFzXHJcbiAqIGFuIEFsbFBhc3NGaWx0ZXIoPykuXHJcbiAqXHJcbiAqIENvbXBhdGlibGUgd2l0aCBpbnRlcmxlYXZlZCBzdGVyZW8gKG9yIG1vcmUgY2hhbm5lbCkgYnVmZmVycyBhbmRcclxuICogbm9uLWludGVybGVhdmVkIG1vbm8gYnVmZmVycy5cclxuICpcclxuICogQHBhcmFtIHtOdW1iZXJ9IG1heERlbGF5SW5TYW1wbGVzU2l6ZSBNYXhpbXVtIHBvc3NpYmxlIGRlbGF5IGluIHNhbXBsZXMgKHNpemUgb2YgY2lyY3VsYXIgYnVmZmVyKVxyXG4gKiBAcGFyYW0ge051bWJlcn0gZGVsYXlJblNhbXBsZXMgSW5pdGlhbCBkZWxheSBpbiBzYW1wbGVzXHJcbiAqIEBwYXJhbSB7TnVtYmVyfSBkZWxheVZvbHVtZSBJbml0aWFsIGZlZWRiYWNrIGRlbGF5IHZvbHVtZS4gRmxvYXQgdmFsdWU6IDAuMCAoc2lsZW5jZSksIDEuMCAobm9ybWFsKSwgPjEuMCAoYW1wbGlmeSlcclxuICpcclxuICogQGNvbnN0cnVjdG9yXHJcbiAqL1xyXG5cclxuZnVuY3Rpb24gU2luZ2xlRGVsYXkobWF4RGVsYXlJblNhbXBsZXNTaXplLCBkZWxheUluU2FtcGxlcywgZGVsYXlWb2x1bWUpIHtcclxuICB0aGlzLmRlbGF5QnVmZmVyU2FtcGxlcyA9IG5ldyBGbG9hdDMyQXJyYXkobWF4RGVsYXlJblNhbXBsZXNTaXplKTsgLy8gVGhlIG1heGltdW0gc2l6ZSBvZiBkZWxheVxyXG4gIHRoaXMuZGVsYXlJbnB1dFBvaW50ZXIgID0gZGVsYXlJblNhbXBsZXM7XHJcbiAgdGhpcy5kZWxheU91dHB1dFBvaW50ZXIgPSAwO1xyXG4gXHJcbiAgdGhpcy5kZWxheUluU2FtcGxlcyAgICAgPSBkZWxheUluU2FtcGxlcztcclxuICB0aGlzLmRlbGF5Vm9sdW1lICAgICAgICA9IGRlbGF5Vm9sdW1lO1xyXG59XHJcblxyXG4vKipcclxuICogQ2hhbmdlIHRoZSBkZWxheSB0aW1lIGluIHNhbXBsZXMuXHJcbiAqXHJcbiAqIEBwYXJhbSB7TnVtYmVyfSBkZWxheUluU2FtcGxlcyBEZWxheSBpbiBzYW1wbGVzXHJcbiAqL1xyXG5TaW5nbGVEZWxheS5wcm90b3R5cGUuc2V0RGVsYXlJblNhbXBsZXMgPSBmdW5jdGlvbihkZWxheUluU2FtcGxlcykge1xyXG4gIHRoaXMuZGVsYXlJblNhbXBsZXMgPSBkZWxheUluU2FtcGxlcztcclxuICB0aGlzLmRlbGF5SW5wdXRQb2ludGVyID0gdGhpcy5kZWxheU91dHB1dFBvaW50ZXIgKyBkZWxheUluU2FtcGxlcztcclxuXHJcbiAgaWYgKHRoaXMuZGVsYXlJbnB1dFBvaW50ZXIgPj0gdGhpcy5kZWxheUJ1ZmZlclNhbXBsZXMubGVuZ3RoLTEpIHtcclxuICAgIHRoaXMuZGVsYXlJbnB1dFBvaW50ZXIgPSB0aGlzLmRlbGF5SW5wdXRQb2ludGVyIC0gdGhpcy5kZWxheUJ1ZmZlclNhbXBsZXMubGVuZ3RoOyBcclxuICB9XHJcbn07XHJcblxyXG4vKipcclxuICogQ2hhbmdlIHRoZSByZXR1cm4gc2lnbmFsIHZvbHVtZS5cclxuICpcclxuICogQHBhcmFtIHtOdW1iZXJ9IGRlbGF5Vm9sdW1lIEZsb2F0IHZhbHVlOiAwLjAgKHNpbGVuY2UpLCAxLjAgKG5vcm1hbCksID4xLjAgKGFtcGxpZnkpXHJcbiAqL1xyXG5TaW5nbGVEZWxheS5wcm90b3R5cGUuc2V0RGVsYXlWb2x1bWUgPSBmdW5jdGlvbihkZWxheVZvbHVtZSkge1xyXG4gIHRoaXMuZGVsYXlWb2x1bWUgPSBkZWxheVZvbHVtZTtcclxufTtcclxuXHJcbi8qKlxyXG4gKiBQcm9jZXNzIGEgZ2l2ZW4gaW50ZXJsZWF2ZWQgb3IgbW9ubyBub24taW50ZXJsZWF2ZWQgZmxvYXQgdmFsdWUgQXJyYXkgYW5kXHJcbiAqIHJldHVybnMgdGhlIGRlbGF5ZWQgYXVkaW8uXHJcbiAqXHJcbiAqIEBwYXJhbSB7QXJyYXl9IHNhbXBsZXMgQXJyYXkgY29udGFpbmluZyBGbG9hdCB2YWx1ZXMgb3IgYSBGbG9hdDMyQXJyYXlcclxuICpcclxuICogQHJldHVybnMgQSBuZXcgRmxvYXQzMkFycmF5IGludGVybGVhdmVkIG9yIG1vbm8gbm9uLWludGVybGVhdmVkIGFzIHdhcyBmZWQgdG8gdGhpcyBmdW5jdGlvbi5cclxuICovXHJcblNpbmdsZURlbGF5LnByb3RvdHlwZS5wcm9jZXNzID0gZnVuY3Rpb24oc2FtcGxlcykge1xyXG4gIC8vIE5CLiBNYWtlIGEgY29weSB0byBwdXQgaW4gdGhlIG91dHB1dCBzYW1wbGVzIHRvIHJldHVybi5cclxuICB2YXIgb3V0cHV0U2FtcGxlcyA9IG5ldyBGbG9hdDMyQXJyYXkoc2FtcGxlcy5sZW5ndGgpO1xyXG5cclxuICBmb3IgKHZhciBpPTA7IGk8c2FtcGxlcy5sZW5ndGg7IGkrKykge1xyXG5cclxuICAgIC8vIEFkZCBhdWRpbyBkYXRhIHdpdGggdGhlIGRlbGF5IGluIHRoZSBkZWxheSBidWZmZXJcclxuICAgIHRoaXMuZGVsYXlCdWZmZXJTYW1wbGVzW3RoaXMuZGVsYXlJbnB1dFBvaW50ZXJdID0gc2FtcGxlc1tpXTtcclxuICAgXHJcbiAgICAvLyBkZWxheUJ1ZmZlclNhbXBsZXMgY291bGQgY29udGFpbiBpbml0aWFsIE5VTEwncywgcmV0dXJuIHNpbGVuY2UgaW4gdGhhdCBjYXNlXHJcbiAgICB2YXIgZGVsYXlTYW1wbGUgPSB0aGlzLmRlbGF5QnVmZmVyU2FtcGxlc1t0aGlzLmRlbGF5T3V0cHV0UG9pbnRlcl07XHJcblxyXG4gICAgLy8gUmV0dXJuIHRoZSBhdWRpbyB3aXRoIGRlbGF5IG1peFxyXG4gICAgb3V0cHV0U2FtcGxlc1tpXSA9IGRlbGF5U2FtcGxlICogdGhpcy5kZWxheVZvbHVtZTtcclxuXHJcbiAgICAvLyBNYW5hZ2UgY2lyY3VsYWlyIGRlbGF5IGJ1ZmZlciBwb2ludGVyc1xyXG4gICAgdGhpcy5kZWxheUlucHV0UG9pbnRlcisrO1xyXG5cclxuICAgIGlmICh0aGlzLmRlbGF5SW5wdXRQb2ludGVyID49IHRoaXMuZGVsYXlCdWZmZXJTYW1wbGVzLmxlbmd0aC0xKSB7XHJcbiAgICAgIHRoaXMuZGVsYXlJbnB1dFBvaW50ZXIgPSAwO1xyXG4gICAgfVxyXG4gICAgIFxyXG4gICAgdGhpcy5kZWxheU91dHB1dFBvaW50ZXIrKztcclxuXHJcbiAgICBpZiAodGhpcy5kZWxheU91dHB1dFBvaW50ZXIgPj0gdGhpcy5kZWxheUJ1ZmZlclNhbXBsZXMubGVuZ3RoLTEpIHtcclxuICAgICAgdGhpcy5kZWxheU91dHB1dFBvaW50ZXIgPSAwOyBcclxuICAgIH0gXHJcbiAgfVxyXG4gXHJcbiAgcmV0dXJuIG91dHB1dFNhbXBsZXM7XHJcbn07XHJcblxyXG4vKipcclxuICogUmV2ZXJiIGVmZmVjdCBieSBBbG1lciBUaGllIChodHRwOi8vY29kZS5hbG1lcm9zLmNvbSkuXHJcbiAqIENvcHlyaWdodCAyMDEwIEFsbWVyIFRoaWUuIEFsbCByaWdodHMgcmVzZXJ2ZWQuXHJcbiAqIEV4YW1wbGU6IGh0dHA6Ly9jb2RlLmFsbWVyb3MuY29tL2NvZGUtZXhhbXBsZXMvcmV2ZXJiLWZpcmVmb3gtYXVkaW8tYXBpL1xyXG4gKlxyXG4gKiBUaGlzIHJldmVyYiBjb25zaXN0cyBvZiA2IFNpbmdsZURlbGF5cywgNiBNdWx0aURlbGF5cyBhbmQgYW4gSUlSRmlsdGVyMlxyXG4gKiBmb3IgZWFjaCBvZiB0aGUgdHdvIHN0ZXJlbyBjaGFubmVscy5cclxuICpcclxuICogQ29tcGF0aWJsZSB3aXRoIGludGVybGVhdmVkIHN0ZXJlbyBidWZmZXJzIG9ubHkhXHJcbiAqXHJcbiAqIEBwYXJhbSB7TnVtYmVyfSBtYXhEZWxheUluU2FtcGxlc1NpemUgTWF4aW11bSBwb3NzaWJsZSBkZWxheSBpbiBzYW1wbGVzIChzaXplIG9mIGNpcmN1bGFyIGJ1ZmZlcnMpXHJcbiAqIEBwYXJhbSB7TnVtYmVyfSBkZWxheUluU2FtcGxlcyBJbml0aWFsIGRlbGF5IGluIHNhbXBsZXMgZm9yIGludGVybmFsIChTaW5nbGUvTXVsdGkpZGVsYXlzXHJcbiAqIEBwYXJhbSB7TnVtYmVyfSBtYXN0ZXJWb2x1bWUgSW5pdGlhbCBtYXN0ZXIgdm9sdW1lLiBGbG9hdCB2YWx1ZTogMC4wIChzaWxlbmNlKSwgMS4wIChub3JtYWwpLCA+MS4wIChhbXBsaWZ5KVxyXG4gKiBAcGFyYW0ge051bWJlcn0gbWl4Vm9sdW1lIEluaXRpYWwgcmV2ZXJiIHNpZ25hbCBtaXggdm9sdW1lLiBGbG9hdCB2YWx1ZTogMC4wIChzaWxlbmNlKSwgMS4wIChub3JtYWwpLCA+MS4wIChhbXBsaWZ5KVxyXG4gKiBAcGFyYW0ge051bWJlcn0gZGVsYXlWb2x1bWUgSW5pdGlhbCBmZWVkYmFjayBkZWxheSB2b2x1bWUgZm9yIGludGVybmFsIChTaW5nbGUvTXVsdGkpZGVsYXlzLiBGbG9hdCB2YWx1ZTogMC4wIChzaWxlbmNlKSwgMS4wIChub3JtYWwpLCA+MS4wIChhbXBsaWZ5KVxyXG4gKiBAcGFyYW0ge051bWJlcn0gZGFtcEZyZXF1ZW5jeSBJbml0aWFsIGxvdyBwYXNzIGZpbHRlciBmcmVxdWVuY3kuIDAgdG8gNDQxMDAgKGRlcGVuZGluZyBvbiB5b3VyIG1heGltdW0gc2FtcGxpbmcgZnJlcXVlbmN5KVxyXG4gKlxyXG4gKiBAY29uc3RydWN0b3JcclxuICovXHJcbmZ1bmN0aW9uIFJldmVyYihtYXhEZWxheUluU2FtcGxlc1NpemUsIGRlbGF5SW5TYW1wbGVzLCBtYXN0ZXJWb2x1bWUsIG1peFZvbHVtZSwgZGVsYXlWb2x1bWUsIGRhbXBGcmVxdWVuY3kpIHtcclxuICB0aGlzLmRlbGF5SW5TYW1wbGVzICAgPSBkZWxheUluU2FtcGxlcztcclxuICB0aGlzLm1hc3RlclZvbHVtZSAgICAgPSBtYXN0ZXJWb2x1bWU7XHJcbiAgdGhpcy5taXhWb2x1bWUgICAgICAgPSBtaXhWb2x1bWU7XHJcbiAgdGhpcy5kZWxheVZvbHVtZSAgICAgPSBkZWxheVZvbHVtZTtcclxuICB0aGlzLmRhbXBGcmVxdWVuY3kgICAgID0gZGFtcEZyZXF1ZW5jeTtcclxuIFxyXG4gIHRoaXMuTlJfT0ZfTVVMVElERUxBWVMgPSA2O1xyXG4gIHRoaXMuTlJfT0ZfU0lOR0xFREVMQVlTID0gNjtcclxuIFxyXG4gIHRoaXMuTE9XUEFTU0wgPSBuZXcgSUlSRmlsdGVyMihEU1AuTE9XUEFTUywgZGFtcEZyZXF1ZW5jeSwgMCwgNDQxMDApO1xyXG4gIHRoaXMuTE9XUEFTU1IgPSBuZXcgSUlSRmlsdGVyMihEU1AuTE9XUEFTUywgZGFtcEZyZXF1ZW5jeSwgMCwgNDQxMDApO1xyXG4gXHJcbiAgdGhpcy5zaW5nbGVEZWxheXMgPSBbXTtcclxuICBcclxuICB2YXIgaSwgZGVsYXlNdWx0aXBseTtcclxuXHJcbiAgZm9yIChpID0gMDsgaSA8IHRoaXMuTlJfT0ZfU0lOR0xFREVMQVlTOyBpKyspIHtcclxuICAgIGRlbGF5TXVsdGlwbHkgPSAxLjAgKyAoaS83LjApOyAvLyAxLjAsIDEuMSwgMS4yLi4uXHJcbiAgICB0aGlzLnNpbmdsZURlbGF5c1tpXSA9IG5ldyBTaW5nbGVEZWxheShtYXhEZWxheUluU2FtcGxlc1NpemUsIE1hdGgucm91bmQodGhpcy5kZWxheUluU2FtcGxlcyAqIGRlbGF5TXVsdGlwbHkpLCB0aGlzLmRlbGF5Vm9sdW1lKTtcclxuICB9XHJcbiBcclxuICB0aGlzLm11bHRpRGVsYXlzID0gW107XHJcblxyXG4gIGZvciAoaSA9IDA7IGkgPCB0aGlzLk5SX09GX01VTFRJREVMQVlTOyBpKyspIHtcclxuICAgIGRlbGF5TXVsdGlwbHkgPSAxLjAgKyAoaS8xMC4wKTsgLy8gMS4wLCAxLjEsIDEuMi4uLiBcclxuICAgIHRoaXMubXVsdGlEZWxheXNbaV0gPSBuZXcgTXVsdGlEZWxheShtYXhEZWxheUluU2FtcGxlc1NpemUsIE1hdGgucm91bmQodGhpcy5kZWxheUluU2FtcGxlcyAqIGRlbGF5TXVsdGlwbHkpLCB0aGlzLm1hc3RlclZvbHVtZSwgdGhpcy5kZWxheVZvbHVtZSk7XHJcbiAgfVxyXG59XHJcblxyXG4vKipcclxuICogQ2hhbmdlIHRoZSBkZWxheSB0aW1lIGluIHNhbXBsZXMgYXMgYSBiYXNlIGZvciBhbGwgZGVsYXlzLlxyXG4gKlxyXG4gKiBAcGFyYW0ge051bWJlcn0gZGVsYXlJblNhbXBsZXMgRGVsYXkgaW4gc2FtcGxlc1xyXG4gKi9cclxuUmV2ZXJiLnByb3RvdHlwZS5zZXREZWxheUluU2FtcGxlcyA9IGZ1bmN0aW9uIChkZWxheUluU2FtcGxlcyl7XHJcbiAgdGhpcy5kZWxheUluU2FtcGxlcyA9IGRlbGF5SW5TYW1wbGVzO1xyXG5cclxuICB2YXIgaSwgZGVsYXlNdWx0aXBseTtcclxuIFxyXG4gIGZvciAoaSA9IDA7IGkgPCB0aGlzLk5SX09GX1NJTkdMRURFTEFZUzsgaSsrKSB7XHJcbiAgICBkZWxheU11bHRpcGx5ID0gMS4wICsgKGkvNy4wKTsgLy8gMS4wLCAxLjEsIDEuMi4uLlxyXG4gICAgdGhpcy5zaW5nbGVEZWxheXNbaV0uc2V0RGVsYXlJblNhbXBsZXMoIE1hdGgucm91bmQodGhpcy5kZWxheUluU2FtcGxlcyAqIGRlbGF5TXVsdGlwbHkpICk7XHJcbiAgfVxyXG4gICBcclxuICBmb3IgKGkgPSAwOyBpIDwgdGhpcy5OUl9PRl9NVUxUSURFTEFZUzsgaSsrKSB7XHJcbiAgICBkZWxheU11bHRpcGx5ID0gMS4wICsgKGkvMTAuMCk7IC8vIDEuMCwgMS4xLCAxLjIuLi5cclxuICAgIHRoaXMubXVsdGlEZWxheXNbaV0uc2V0RGVsYXlJblNhbXBsZXMoIE1hdGgucm91bmQodGhpcy5kZWxheUluU2FtcGxlcyAqIGRlbGF5TXVsdGlwbHkpICk7XHJcbiAgfVxyXG59O1xyXG5cclxuLyoqXHJcbiAqIENoYW5nZSB0aGUgbWFzdGVyIHZvbHVtZS5cclxuICpcclxuICogQHBhcmFtIHtOdW1iZXJ9IG1hc3RlclZvbHVtZSBGbG9hdCB2YWx1ZTogMC4wIChzaWxlbmNlKSwgMS4wIChub3JtYWwpLCA+MS4wIChhbXBsaWZ5KVxyXG4gKi9cclxuUmV2ZXJiLnByb3RvdHlwZS5zZXRNYXN0ZXJWb2x1bWUgPSBmdW5jdGlvbiAobWFzdGVyVm9sdW1lKXtcclxuICB0aGlzLm1hc3RlclZvbHVtZSA9IG1hc3RlclZvbHVtZTtcclxufTtcclxuXHJcbi8qKlxyXG4gKiBDaGFuZ2UgdGhlIHJldmVyYiBzaWduYWwgbWl4IGxldmVsLlxyXG4gKlxyXG4gKiBAcGFyYW0ge051bWJlcn0gbWl4Vm9sdW1lIEZsb2F0IHZhbHVlOiAwLjAgKHNpbGVuY2UpLCAxLjAgKG5vcm1hbCksID4xLjAgKGFtcGxpZnkpXHJcbiAqL1xyXG5SZXZlcmIucHJvdG90eXBlLnNldE1peFZvbHVtZSA9IGZ1bmN0aW9uIChtaXhWb2x1bWUpe1xyXG4gIHRoaXMubWl4Vm9sdW1lID0gbWl4Vm9sdW1lO1xyXG59O1xyXG5cclxuLyoqXHJcbiAqIENoYW5nZSBhbGwgZGVsYXlzIGZlZWRiYWNrIHZvbHVtZS5cclxuICpcclxuICogQHBhcmFtIHtOdW1iZXJ9IGRlbGF5Vm9sdW1lIEZsb2F0IHZhbHVlOiAwLjAgKHNpbGVuY2UpLCAxLjAgKG5vcm1hbCksID4xLjAgKGFtcGxpZnkpXHJcbiAqL1xyXG5SZXZlcmIucHJvdG90eXBlLnNldERlbGF5Vm9sdW1lID0gZnVuY3Rpb24gKGRlbGF5Vm9sdW1lKXtcclxuICB0aGlzLmRlbGF5Vm9sdW1lID0gZGVsYXlWb2x1bWU7XHJcbiBcclxuICB2YXIgaTtcclxuXHJcbiAgZm9yIChpID0gMDsgaTx0aGlzLk5SX09GX1NJTkdMRURFTEFZUzsgaSsrKSB7XHJcbiAgICB0aGlzLnNpbmdsZURlbGF5c1tpXS5zZXREZWxheVZvbHVtZSh0aGlzLmRlbGF5Vm9sdW1lKTtcclxuICB9IFxyXG4gXHJcbiAgZm9yIChpID0gMDsgaTx0aGlzLk5SX09GX01VTFRJREVMQVlTOyBpKyspIHtcclxuICAgIHRoaXMubXVsdGlEZWxheXNbaV0uc2V0RGVsYXlWb2x1bWUodGhpcy5kZWxheVZvbHVtZSk7XHJcbiAgfSBcclxufTtcclxuXHJcbi8qKlxyXG4gKiBDaGFuZ2UgdGhlIExvdyBQYXNzIGZpbHRlciBmcmVxdWVuY3kuXHJcbiAqXHJcbiAqIEBwYXJhbSB7TnVtYmVyfSBkYW1wRnJlcXVlbmN5IGxvdyBwYXNzIGZpbHRlciBmcmVxdWVuY3kuIDAgdG8gNDQxMDAgKGRlcGVuZGluZyBvbiB5b3VyIG1heGltdW0gc2FtcGxpbmcgZnJlcXVlbmN5KVxyXG4gKi9cclxuUmV2ZXJiLnByb3RvdHlwZS5zZXREYW1wRnJlcXVlbmN5ID0gZnVuY3Rpb24gKGRhbXBGcmVxdWVuY3kpe1xyXG4gIHRoaXMuZGFtcEZyZXF1ZW5jeSA9IGRhbXBGcmVxdWVuY3k7XHJcbiBcclxuICB0aGlzLkxPV1BBU1NMLnNldChkYW1wRnJlcXVlbmN5LCAwKTtcclxuICB0aGlzLkxPV1BBU1NSLnNldChkYW1wRnJlcXVlbmN5LCAwKTsgXHJcbn07XHJcblxyXG4vKipcclxuICogUHJvY2VzcyBhIGdpdmVuIGludGVybGVhdmVkIGZsb2F0IHZhbHVlIEFycmF5IGFuZCBjb3BpZXMgYW5kIGFkZHMgdGhlIHJldmVyYiBzaWduYWwuXHJcbiAqXHJcbiAqIEBwYXJhbSB7QXJyYXl9IHNhbXBsZXMgQXJyYXkgY29udGFpbmluZyBGbG9hdCB2YWx1ZXMgb3IgYSBGbG9hdDMyQXJyYXlcclxuICpcclxuICogQHJldHVybnMgQSBuZXcgRmxvYXQzMkFycmF5IGludGVybGVhdmVkIGJ1ZmZlci5cclxuICovXHJcblJldmVyYi5wcm90b3R5cGUucHJvY2VzcyA9IGZ1bmN0aW9uIChpbnRlcmxlYXZlZFNhbXBsZXMpeyBcclxuICAvLyBOQi4gTWFrZSBhIGNvcHkgdG8gcHV0IGluIHRoZSBvdXRwdXQgc2FtcGxlcyB0byByZXR1cm4uXHJcbiAgdmFyIG91dHB1dFNhbXBsZXMgPSBuZXcgRmxvYXQzMkFycmF5KGludGVybGVhdmVkU2FtcGxlcy5sZW5ndGgpO1xyXG4gXHJcbiAgLy8gUGVyZm9ybSBsb3cgcGFzcyBvbiB0aGUgaW5wdXQgc2FtcGxlcyB0byBtaW1pY2sgZGFtcFxyXG4gIHZhciBsZWZ0UmlnaHRNaXggPSBEU1AuZGVpbnRlcmxlYXZlKGludGVybGVhdmVkU2FtcGxlcyk7XHJcbiAgdGhpcy5MT1dQQVNTTC5wcm9jZXNzKCBsZWZ0UmlnaHRNaXhbRFNQLkxFRlRdICk7XHJcbiAgdGhpcy5MT1dQQVNTUi5wcm9jZXNzKCBsZWZ0UmlnaHRNaXhbRFNQLlJJR0hUXSApOyBcclxuICB2YXIgZmlsdGVyZWRTYW1wbGVzID0gRFNQLmludGVybGVhdmUobGVmdFJpZ2h0TWl4W0RTUC5MRUZUXSwgbGVmdFJpZ2h0TWl4W0RTUC5SSUdIVF0pO1xyXG5cclxuICB2YXIgaTtcclxuXHJcbiAgLy8gUHJvY2VzcyBNdWx0aURlbGF5cyBpbiBwYXJhbGxlbFxyXG4gIGZvciAoaSA9IDA7IGk8dGhpcy5OUl9PRl9NVUxUSURFTEFZUzsgaSsrKSB7XHJcbiAgICAvLyBJbnZlcnQgdGhlIHNpZ25hbCBvZiBldmVyeSBldmVuIG11bHRpRGVsYXlcclxuICAgIG91dHB1dFNhbXBsZXMgPSBEU1AubWl4U2FtcGxlQnVmZmVycyhvdXRwdXRTYW1wbGVzLCB0aGlzLm11bHRpRGVsYXlzW2ldLnByb2Nlc3MoZmlsdGVyZWRTYW1wbGVzKSwgMiVpID09PSAwLCB0aGlzLk5SX09GX01VTFRJREVMQVlTKTtcclxuICB9XHJcbiBcclxuICAvLyBQcm9jZXNzIFNpbmdsZURlbGF5cyBpbiBzZXJpZXNcclxuICB2YXIgc2luZ2xlRGVsYXlTYW1wbGVzID0gbmV3IEZsb2F0MzJBcnJheShvdXRwdXRTYW1wbGVzLmxlbmd0aCk7XHJcbiAgZm9yIChpID0gMDsgaTx0aGlzLk5SX09GX1NJTkdMRURFTEFZUzsgaSsrKSB7XHJcbiAgICAvLyBJbnZlcnQgdGhlIHNpZ25hbCBvZiBldmVyeSBldmVuIHNpbmdsZURlbGF5XHJcbiAgICBzaW5nbGVEZWxheVNhbXBsZXMgPSBEU1AubWl4U2FtcGxlQnVmZmVycyhzaW5nbGVEZWxheVNhbXBsZXMsIHRoaXMuc2luZ2xlRGVsYXlzW2ldLnByb2Nlc3Mob3V0cHV0U2FtcGxlcyksIDIlaSA9PT0gMCwgMSk7XHJcbiAgfVxyXG5cclxuICAvLyBBcHBseSB0aGUgdm9sdW1lIG9mIHRoZSByZXZlcmIgc2lnbmFsXHJcbiAgZm9yIChpID0gMDsgaTxzaW5nbGVEZWxheVNhbXBsZXMubGVuZ3RoOyBpKyspIHtcclxuICAgIHNpbmdsZURlbGF5U2FtcGxlc1tpXSAqPSB0aGlzLm1peFZvbHVtZTtcclxuICB9XHJcbiBcclxuICAvLyBNaXggdGhlIG9yaWdpbmFsIHNpZ25hbCB3aXRoIHRoZSByZXZlcmIgc2lnbmFsXHJcbiAgb3V0cHV0U2FtcGxlcyA9IERTUC5taXhTYW1wbGVCdWZmZXJzKHNpbmdsZURlbGF5U2FtcGxlcywgaW50ZXJsZWF2ZWRTYW1wbGVzLCAwLCAxKTtcclxuXHJcbiAgLy8gQXBwbHkgdGhlIG1hc3RlciB2b2x1bWUgdG8gdGhlIGNvbXBsZXRlIHNpZ25hbFxyXG4gIGZvciAoaSA9IDA7IGk8b3V0cHV0U2FtcGxlcy5sZW5ndGg7IGkrKykge1xyXG4gICAgb3V0cHV0U2FtcGxlc1tpXSAqPSB0aGlzLm1hc3RlclZvbHVtZTtcclxuICB9XHJcbiAgIFxyXG4gIHJldHVybiBvdXRwdXRTYW1wbGVzO1xyXG59O1xyXG5cclxuIiwiLyohXHJcbiAqIEV2ZW50RW1pdHRlciB2NC4yLjExIC0gZ2l0LmlvL2VlXHJcbiAqIFVubGljZW5zZSAtIGh0dHA6Ly91bmxpY2Vuc2Uub3JnL1xyXG4gKiBPbGl2ZXIgQ2FsZHdlbGwgLSBodHRwOi8vb2xpLm1lLnVrL1xyXG4gKiBAcHJlc2VydmVcclxuICovXHJcbihmdW5jdGlvbigpe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIHQoKXt9ZnVuY3Rpb24gaSh0LG4pe2Zvcih2YXIgZT10Lmxlbmd0aDtlLS07KWlmKHRbZV0ubGlzdGVuZXI9PT1uKXJldHVybiBlO3JldHVybi0xfWZ1bmN0aW9uIG4oZSl7cmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuIHRoaXNbZV0uYXBwbHkodGhpcyxhcmd1bWVudHMpfX12YXIgZT10LnByb3RvdHlwZSxyPXRoaXMscz1yLkV2ZW50RW1pdHRlcjtlLmdldExpc3RlbmVycz1mdW5jdGlvbihuKXt2YXIgcixlLHQ9dGhpcy5fZ2V0RXZlbnRzKCk7aWYobiBpbnN0YW5jZW9mIFJlZ0V4cCl7cj17fTtmb3IoZSBpbiB0KXQuaGFzT3duUHJvcGVydHkoZSkmJm4udGVzdChlKSYmKHJbZV09dFtlXSl9ZWxzZSByPXRbbl18fCh0W25dPVtdKTtyZXR1cm4gcn0sZS5mbGF0dGVuTGlzdGVuZXJzPWZ1bmN0aW9uKHQpe3ZhciBlLG49W107Zm9yKGU9MDtlPHQubGVuZ3RoO2UrPTEpbi5wdXNoKHRbZV0ubGlzdGVuZXIpO3JldHVybiBufSxlLmdldExpc3RlbmVyc0FzT2JqZWN0PWZ1bmN0aW9uKG4pe3ZhciBlLHQ9dGhpcy5nZXRMaXN0ZW5lcnMobik7cmV0dXJuIHQgaW5zdGFuY2VvZiBBcnJheSYmKGU9e30sZVtuXT10KSxlfHx0fSxlLmFkZExpc3RlbmVyPWZ1bmN0aW9uKHIsZSl7dmFyIHQsbj10aGlzLmdldExpc3RlbmVyc0FzT2JqZWN0KHIpLHM9XCJvYmplY3RcIj09dHlwZW9mIGU7Zm9yKHQgaW4gbiluLmhhc093blByb3BlcnR5KHQpJiYtMT09PWkoblt0XSxlKSYmblt0XS5wdXNoKHM/ZTp7bGlzdGVuZXI6ZSxvbmNlOiExfSk7cmV0dXJuIHRoaXN9LGUub249bihcImFkZExpc3RlbmVyXCIpLGUuYWRkT25jZUxpc3RlbmVyPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIHRoaXMuYWRkTGlzdGVuZXIoZSx7bGlzdGVuZXI6dCxvbmNlOiEwfSl9LGUub25jZT1uKFwiYWRkT25jZUxpc3RlbmVyXCIpLGUuZGVmaW5lRXZlbnQ9ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuZ2V0TGlzdGVuZXJzKGUpLHRoaXN9LGUuZGVmaW5lRXZlbnRzPWZ1bmN0aW9uKHQpe2Zvcih2YXIgZT0wO2U8dC5sZW5ndGg7ZSs9MSl0aGlzLmRlZmluZUV2ZW50KHRbZV0pO3JldHVybiB0aGlzfSxlLnJlbW92ZUxpc3RlbmVyPWZ1bmN0aW9uKHIscyl7dmFyIG4sZSx0PXRoaXMuZ2V0TGlzdGVuZXJzQXNPYmplY3Qocik7Zm9yKGUgaW4gdCl0Lmhhc093blByb3BlcnR5KGUpJiYobj1pKHRbZV0scyksLTEhPT1uJiZ0W2VdLnNwbGljZShuLDEpKTtyZXR1cm4gdGhpc30sZS5vZmY9bihcInJlbW92ZUxpc3RlbmVyXCIpLGUuYWRkTGlzdGVuZXJzPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIHRoaXMubWFuaXB1bGF0ZUxpc3RlbmVycyghMSxlLHQpfSxlLnJlbW92ZUxpc3RlbmVycz1mdW5jdGlvbihlLHQpe3JldHVybiB0aGlzLm1hbmlwdWxhdGVMaXN0ZW5lcnMoITAsZSx0KX0sZS5tYW5pcHVsYXRlTGlzdGVuZXJzPWZ1bmN0aW9uKHIsdCxpKXt2YXIgZSxuLHM9cj90aGlzLnJlbW92ZUxpc3RlbmVyOnRoaXMuYWRkTGlzdGVuZXIsbz1yP3RoaXMucmVtb3ZlTGlzdGVuZXJzOnRoaXMuYWRkTGlzdGVuZXJzO2lmKFwib2JqZWN0XCIhPXR5cGVvZiB0fHx0IGluc3RhbmNlb2YgUmVnRXhwKWZvcihlPWkubGVuZ3RoO2UtLTspcy5jYWxsKHRoaXMsdCxpW2VdKTtlbHNlIGZvcihlIGluIHQpdC5oYXNPd25Qcm9wZXJ0eShlKSYmKG49dFtlXSkmJihcImZ1bmN0aW9uXCI9PXR5cGVvZiBuP3MuY2FsbCh0aGlzLGUsbik6by5jYWxsKHRoaXMsZSxuKSk7cmV0dXJuIHRoaXN9LGUucmVtb3ZlRXZlbnQ9ZnVuY3Rpb24oZSl7dmFyIHQscj10eXBlb2YgZSxuPXRoaXMuX2dldEV2ZW50cygpO2lmKFwic3RyaW5nXCI9PT1yKWRlbGV0ZSBuW2VdO2Vsc2UgaWYoZSBpbnN0YW5jZW9mIFJlZ0V4cClmb3IodCBpbiBuKW4uaGFzT3duUHJvcGVydHkodCkmJmUudGVzdCh0KSYmZGVsZXRlIG5bdF07ZWxzZSBkZWxldGUgdGhpcy5fZXZlbnRzO3JldHVybiB0aGlzfSxlLnJlbW92ZUFsbExpc3RlbmVycz1uKFwicmVtb3ZlRXZlbnRcIiksZS5lbWl0RXZlbnQ9ZnVuY3Rpb24odCx1KXt2YXIgbixlLHIsaSxvLHM9dGhpcy5nZXRMaXN0ZW5lcnNBc09iamVjdCh0KTtmb3IoaSBpbiBzKWlmKHMuaGFzT3duUHJvcGVydHkoaSkpZm9yKG49c1tpXS5zbGljZSgwKSxyPW4ubGVuZ3RoO3ItLTspZT1uW3JdLGUub25jZT09PSEwJiZ0aGlzLnJlbW92ZUxpc3RlbmVyKHQsZS5saXN0ZW5lciksbz1lLmxpc3RlbmVyLmFwcGx5KHRoaXMsdXx8W10pLG89PT10aGlzLl9nZXRPbmNlUmV0dXJuVmFsdWUoKSYmdGhpcy5yZW1vdmVMaXN0ZW5lcih0LGUubGlzdGVuZXIpO3JldHVybiB0aGlzfSxlLnRyaWdnZXI9bihcImVtaXRFdmVudFwiKSxlLmVtaXQ9ZnVuY3Rpb24oZSl7dmFyIHQ9QXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzLDEpO3JldHVybiB0aGlzLmVtaXRFdmVudChlLHQpfSxlLnNldE9uY2VSZXR1cm5WYWx1ZT1mdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5fb25jZVJldHVyblZhbHVlPWUsdGhpc30sZS5fZ2V0T25jZVJldHVyblZhbHVlPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuaGFzT3duUHJvcGVydHkoXCJfb25jZVJldHVyblZhbHVlXCIpP3RoaXMuX29uY2VSZXR1cm5WYWx1ZTohMH0sZS5fZ2V0RXZlbnRzPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2V2ZW50c3x8KHRoaXMuX2V2ZW50cz17fSl9LHQubm9Db25mbGljdD1mdW5jdGlvbigpe3JldHVybiByLkV2ZW50RW1pdHRlcj1zLHR9LFwiZnVuY3Rpb25cIj09dHlwZW9mIGRlZmluZSYmZGVmaW5lLmFtZD9kZWZpbmUoZnVuY3Rpb24oKXtyZXR1cm4gdH0pOlwib2JqZWN0XCI9PXR5cGVvZiBtb2R1bGUmJm1vZHVsZS5leHBvcnRzP21vZHVsZS5leHBvcnRzPXQ6ci5FdmVudEVtaXR0ZXI9dH0pLmNhbGwodGhpcyk7IiwiKGZ1bmN0aW9uKHJvb3QsIGZhY3RvcnkpIHtcclxuXHRpZiAodHlwZW9mIGRlZmluZSA9PT0gJ2Z1bmN0aW9uJyAmJiBkZWZpbmUuYW1kKSB7XHJcblx0XHRkZWZpbmUoZmFjdG9yeSk7XHJcblx0fSBlbHNlIGlmICh0eXBlb2YgZXhwb3J0cyA9PT0gJ29iamVjdCcpIHtcclxuXHRcdG1vZHVsZS5leHBvcnRzID0gZmFjdG9yeShyZXF1aXJlLCBleHBvcnRzLCBtb2R1bGUpO1xyXG5cdH0gZWxzZSB7XHJcblx0XHRyb290LmZuID0gZmFjdG9yeSgpO1xyXG5cdH1cclxufSh0aGlzLCBmdW5jdGlvbihyZXF1aXJlLCBleHBvcnRzLCBtb2R1bGUpIHtcclxuJ3VzZSBzdHJpY3QnO1xyXG5cclxudmFyIGZuID0geyB9O1xyXG5cclxuZm4udG9BcnJheSA9IGZ1bmN0aW9uIChjb2xsZWN0aW9uKSB7XHJcblx0cmV0dXJuIEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGNvbGxlY3Rpb24pO1xyXG59O1xyXG5cclxuZm4uY2xvbmVBcnJheSA9IGZuLnRvQXJyYXk7XHJcblxyXG5mbi5vcCA9IHtcclxuXHQnKyc6IGZ1bmN0aW9uICh2YWx1ZTEsIHZhbHVlMikge1xyXG5cdFx0cmV0dXJuIHZhbHVlMSArIHZhbHVlMjtcclxuXHR9LFxyXG5cdCctJzogZnVuY3Rpb24gKHZhbHVlMSwgdmFsdWUyKSB7XHJcblx0XHRyZXR1cm4gdmFsdWUxIC0gdmFsdWUyO1xyXG5cdH0sXHJcblx0JyonOiBmdW5jdGlvbiAodmFsdWUxLCB2YWx1ZTIpIHtcclxuXHRcdHJldHVybiB2YWx1ZTEgKiB2YWx1ZTI7XHJcblx0fSxcclxuXHQnLyc6IGZ1bmN0aW9uICh2YWx1ZTEsIHZhbHVlMikge1xyXG5cdFx0cmV0dXJuIHZhbHVlMSAvIHZhbHVlMjtcclxuXHR9LFxyXG5cdCc9PSc6IGZ1bmN0aW9uICh2YWx1ZTEsIHZhbHVlMikge1xyXG5cdFx0Lyplc2xpbnQtZGlzYWJsZSBlcWVxZXEgKi9cclxuXHRcdHJldHVybiB2YWx1ZTEgPT0gdmFsdWUyO1xyXG5cdFx0Lyplc2xpbnQtZW5hYmxlIGVxZXFlcSAqL1xyXG5cdH0sXHJcblx0Jz09PSc6IGZ1bmN0aW9uICh2YWx1ZTEsIHZhbHVlMikge1xyXG5cdFx0cmV0dXJuIHZhbHVlMSA9PT0gdmFsdWUyO1xyXG5cdH1cclxufTtcclxuXHJcbmZuLnR5cGUgPSBmdW5jdGlvbiAodmFsdWUpIHtcclxuXHQvLyBJZiB0aGUgdmFsdWUgaXMgbnVsbCBvciB1bmRlZmluZWQsIHJldHVybiB0aGUgc3RyaW5naWZpZWQgbmFtZSxcclxuXHQvLyBvdGhlcndpc2UgZ2V0IHRoZSBbW0NsYXNzXV0gYW5kIGNvbXBhcmUgdG8gdGhlIHJlbGV2YW50IHBhcnQgb2YgdGhlIHZhbHVlXHJcblx0cmV0dXJuIHZhbHVlID09IG51bGwgP1xyXG5cdFx0JycgKyB2YWx1ZSA6XHJcblx0XHRPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwodmFsdWUpLnNsaWNlKDgsIC0xKS50b0xvd2VyQ2FzZSgpO1xyXG59O1xyXG5cclxuZm4uaXMgPSBmdW5jdGlvbiAodHlwZSwgdmFsdWUpIHtcclxuXHRyZXR1cm4gdHlwZSA9PT0gZm4udHlwZSh2YWx1ZSk7XHJcbn07XHJcblxyXG5mbi5hcHBseSA9IGZ1bmN0aW9uIChoYW5kbGVyLCBhcmdzKSB7XHJcblx0cmV0dXJuIGhhbmRsZXIuYXBwbHkobnVsbCwgYXJncyk7XHJcbn07XHJcblxyXG5mbi5jb25jYXQgPSBmdW5jdGlvbiAoKSB7XHJcblx0dmFyIGFyZ3MgPSBmbi50b0FycmF5KGFyZ3VtZW50cyk7XHJcblx0dmFyIGZpcnN0ID0gYXJnc1sgMCBdO1xyXG5cclxuXHRpZiAoIWZuLmlzKCdhcnJheScsIGZpcnN0KSAmJiAhZm4uaXMoJ3N0cmluZycsIGZpcnN0KSkge1xyXG5cdFx0Zmlyc3QgPSBhcmdzLmxlbmd0aCA/IFsgZmlyc3QgXSA6IFsgXTtcclxuXHR9XHJcblxyXG5cdHJldHVybiBmaXJzdC5jb25jYXQuYXBwbHkoZmlyc3QsIGFyZ3Muc2xpY2UoMSkpO1xyXG59O1xyXG5cclxuZm4ucGFydGlhbCA9IGZ1bmN0aW9uICgpIHtcclxuXHR2YXIgYXJncyA9IGZuLnRvQXJyYXkoYXJndW1lbnRzKTtcclxuXHR2YXIgaGFuZGxlciA9IGFyZ3NbIDAgXTtcclxuXHR2YXIgcGFydGlhbEFyZ3MgPSBhcmdzLnNsaWNlKDEpO1xyXG5cclxuXHRyZXR1cm4gZnVuY3Rpb24gKCkge1xyXG5cdFx0cmV0dXJuIGZuLmFwcGx5KGhhbmRsZXIsIGZuLmNvbmNhdChwYXJ0aWFsQXJncywgZm4udG9BcnJheShhcmd1bWVudHMpKSApO1xyXG5cdH07XHJcbn07XHJcblxyXG5mbi5pZGVudGl0eSA9IGZ1bmN0aW9uIChhcmcpIHtcclxuXHRyZXR1cm4gYXJnO1xyXG59O1xyXG5cclxudmFyIGN1cnJpZXIgPSBmdW5jdGlvbiBtYWtlQ3VycnkocmlnaHR3YXJkKSB7XHJcblx0cmV0dXJuIGZ1bmN0aW9uIChoYW5kbGVyLCBhcml0eSkge1xyXG5cdFx0aWYgKGhhbmRsZXIuY3VycmllZCkge1xyXG5cdFx0XHRyZXR1cm4gaGFuZGxlcjtcclxuXHRcdH1cclxuXHJcblx0XHRhcml0eSA9IGFyaXR5IHx8IGhhbmRsZXIubGVuZ3RoO1xyXG5cclxuXHRcdHZhciBjdXJyeSA9IGZ1bmN0aW9uIGN1cnJ5KCkge1xyXG5cdFx0XHR2YXIgYXJncyA9IGZuLnRvQXJyYXkoYXJndW1lbnRzKTtcclxuXHJcblx0XHRcdGlmIChhcmdzLmxlbmd0aCA+PSBhcml0eSkge1xyXG5cdFx0XHRcdHZhciB0cmFuc2Zvcm0gPSByaWdodHdhcmQgPyAncmV2ZXJzZScgOiAnaWRlbnRpdHknO1xyXG5cdFx0XHRcdHJldHVybiBmbi5hcHBseShoYW5kbGVyLCBmblsgdHJhbnNmb3JtIF0oYXJncykpO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHR2YXIgaW5uZXIgPSBmdW5jdGlvbiAoKSB7XHJcblx0XHRcdFx0cmV0dXJuIGZuLmFwcGx5KGN1cnJ5LCBhcmdzLmNvbmNhdChmbi50b0FycmF5KGFyZ3VtZW50cykpKTtcclxuXHRcdFx0fTtcclxuXHJcblx0XHRcdGlubmVyLmN1cnJpZWQgPSB0cnVlO1xyXG5cclxuXHRcdFx0cmV0dXJuIGlubmVyO1xyXG5cdFx0fTtcclxuXHJcblx0XHRjdXJyeS5jdXJyaWVkID0gdHJ1ZTtcclxuXHJcblx0XHRyZXR1cm4gY3Vycnk7XHJcblx0fTtcclxufTtcclxuXHJcbmZuLmN1cnJ5ID0gY3VycmllcihmYWxzZSk7XHJcblxyXG5mbi5jdXJyeVJpZ2h0ID0gY3Vycmllcih0cnVlKTtcclxuXHJcbmZuLnByb3BlcnRpZXMgPSBmdW5jdGlvbiAob2JqZWN0KSB7XHJcblx0dmFyIGFjY3VtdWxhdG9yID0gWyBdO1xyXG5cclxuXHRmb3IgKHZhciBwcm9wZXJ0eSBpbiBvYmplY3QpIHtcclxuXHRcdGlmIChvYmplY3QuaGFzT3duUHJvcGVydHkocHJvcGVydHkpKSB7XHJcblx0XHRcdGFjY3VtdWxhdG9yLnB1c2gocHJvcGVydHkpO1xyXG5cdFx0fVxyXG5cdH1cclxuXHJcblx0cmV0dXJuIGFjY3VtdWxhdG9yO1xyXG59O1xyXG5cclxuZm4uZWFjaCA9IGZ1bmN0aW9uIChoYW5kbGVyLCBjb2xsZWN0aW9uLCBwYXJhbXMpIHtcclxuXHRmb3IgKHZhciBpbmRleCA9IDAsIGNvbGxlY3Rpb25MZW5ndGggPSBjb2xsZWN0aW9uLmxlbmd0aDsgaW5kZXggPCBjb2xsZWN0aW9uTGVuZ3RoOyBpbmRleCsrKSB7XHJcblx0XHRmbi5hcHBseShoYW5kbGVyLCBmbi5jb25jYXQoWyBjb2xsZWN0aW9uWyBpbmRleCBdLCBpbmRleCwgY29sbGVjdGlvbiBdLCBwYXJhbXMpKTtcclxuXHR9XHJcbn07XHJcblxyXG5mbi5yZWR1Y2UgPSBmdW5jdGlvbiAoaGFuZGxlciwgYWNjdW11bGF0b3IsIGNvbGxlY3Rpb24sIHBhcmFtcykge1xyXG5cdGZuLmVhY2goZnVuY3Rpb24gKHZhbHVlLCBpbmRleCkge1xyXG5cdFx0YWNjdW11bGF0b3IgPSBmbi5hcHBseShoYW5kbGVyLCBmbi5jb25jYXQoWyBhY2N1bXVsYXRvciwgdmFsdWUsIGluZGV4IF0sIHBhcmFtcykpO1xyXG5cdH0sIGNvbGxlY3Rpb24pO1xyXG5cclxuXHRyZXR1cm4gYWNjdW11bGF0b3I7XHJcbn07XHJcblxyXG5mbi5maWx0ZXIgPSBmdW5jdGlvbiAoZXhwcmVzc2lvbiwgY29sbGVjdGlvbikge1xyXG5cdHJldHVybiBmbi5yZWR1Y2UoZnVuY3Rpb24gKGFjY3VtdWxhdG9yLCBpdGVtLCBpbmRleCkge1xyXG5cdFx0ZXhwcmVzc2lvbihpdGVtLCBpbmRleCkgJiYgYWNjdW11bGF0b3IucHVzaChpdGVtKTtcclxuXHRcdHJldHVybiBhY2N1bXVsYXRvcjtcclxuXHR9LCBbIF0sIGNvbGxlY3Rpb24pO1xyXG59O1xyXG5cclxuZm4ub3BbICcrKycgXSA9IGZuLnBhcnRpYWwoZm4ub3BbICcrJyBdLCAxKTtcclxuZm4ub3BbICctLScgXSA9IGZuLnBhcnRpYWwoZm4ub3BbICcrJyBdLCAtMSk7XHJcblxyXG5mbi5tYXAgPSBmdW5jdGlvbiAoaGFuZGxlciwgY29sbGVjdGlvbiwgcGFyYW1zKSB7XHJcblx0cmV0dXJuIGZuLnJlZHVjZShmdW5jdGlvbiAoYWNjdW11bGF0b3IsIHZhbHVlLCBpbmRleCkge1xyXG5cdFx0YWNjdW11bGF0b3IucHVzaCggZm4uYXBwbHkoaGFuZGxlciwgZm4uY29uY2F0KFsgdmFsdWUsIGluZGV4LCBjb2xsZWN0aW9uIF0sIHBhcmFtcykpICk7XHJcblx0XHRyZXR1cm4gYWNjdW11bGF0b3I7XHJcblx0fSwgWyBdLCBjb2xsZWN0aW9uKTtcclxufTtcclxuXHJcbmZuLnJldmVyc2UgPSBmdW5jdGlvbiAoY29sbGVjdGlvbikge1xyXG5cdHJldHVybiBmbi5jbG9uZUFycmF5KGNvbGxlY3Rpb24pLnJldmVyc2UoKTtcclxufTtcclxuXHJcbmZuLnBpcGVsaW5lID0gZnVuY3Rpb24gKCkge1xyXG5cdHZhciBmdW5jdGlvbnMgPSBmbi50b0FycmF5KGFyZ3VtZW50cyk7XHJcblxyXG5cdHJldHVybiBmdW5jdGlvbiAoKSB7XHJcblx0XHRyZXR1cm4gZm4ucmVkdWNlKGZ1bmN0aW9uIChhcmdzLCBmdW5jKSB7XHJcblx0XHRcdHJldHVybiBbIGZuLmFwcGx5KGZ1bmMsIGFyZ3MpIF07XHJcblx0XHR9LCBmbi50b0FycmF5KGFyZ3VtZW50cyksIGZ1bmN0aW9ucylbIDAgXTtcclxuXHR9O1xyXG59O1xyXG5cclxuZm4uY29tcG9zZSA9IGZ1bmN0aW9uICgpIHtcclxuXHRyZXR1cm4gZm4uYXBwbHkoZm4ucGlwZWxpbmUsIGZuLnJldmVyc2UoYXJndW1lbnRzKSk7XHJcbn07XHJcblxyXG5mbi5wcm9wID0gZm4uY3VycnkoZnVuY3Rpb24gKG5hbWUsIG9iamVjdCkge1xyXG5cdHJldHVybiBvYmplY3RbIG5hbWUgXTtcclxufSk7XHJcblxyXG5mbi5tZXJnZSA9IGZ1bmN0aW9uICgpIHtcclxuXHRyZXR1cm4gZm4ucmVkdWNlKGZ1bmN0aW9uIChhY2N1bXVsYXRvciwgdmFsdWUpIHtcclxuXHRcdGZuLmVhY2goZnVuY3Rpb24gKHByb3BlcnR5KSB7XHJcblx0XHRcdGFjY3VtdWxhdG9yWyBwcm9wZXJ0eSBdID0gdmFsdWVbIHByb3BlcnR5IF07XHJcblx0XHR9LCBmbi5wcm9wZXJ0aWVzKHZhbHVlKSk7XHJcblxyXG5cdFx0cmV0dXJuIGFjY3VtdWxhdG9yO1xyXG5cdH0sIHsgfSwgZm4udG9BcnJheShhcmd1bWVudHMpKTtcclxufTtcclxuXHJcbmZuLm1lbW9pemUgPSBmdW5jdGlvbiBtZW1vaXplKGhhbmRsZXIsIHNlcmlhbGl6ZXIpIHtcclxuXHR2YXIgY2FjaGUgPSB7IH07XHJcblxyXG5cdHJldHVybiBmdW5jdGlvbiAoKSB7XHJcblx0XHR2YXIgYXJncyA9IGZuLnRvQXJyYXkoYXJndW1lbnRzKTtcclxuXHRcdHZhciBrZXkgPSBzZXJpYWxpemVyID8gc2VyaWFsaXplcihhcmdzKSA6IG1lbW9pemUuc2VyaWFsaXplKGFyZ3MpO1xyXG5cclxuXHRcdHJldHVybiBrZXkgaW4gY2FjaGUgP1xyXG5cdFx0XHRjYWNoZVsga2V5IF0gOlxyXG5cdFx0XHRjYWNoZVsga2V5IF0gPSBmbi5hcHBseShoYW5kbGVyLCBhcmdzKTtcclxuXHR9O1xyXG59O1xyXG5cclxuZm4ubWVtb2l6ZS5zZXJpYWxpemUgPSBmdW5jdGlvbiAodmFsdWVzKSB7XHJcblx0cmV0dXJuIGZuLnR5cGUodmFsdWVzWyAwIF0pICsgJ3wnICsgSlNPTi5zdHJpbmdpZnkodmFsdWVzWyAwIF0pO1xyXG59O1xyXG5cclxuZm4uZmxpcCA9IGZ1bmN0aW9uIChoYW5kbGVyKSB7XHJcblx0cmV0dXJuIGZ1bmN0aW9uICgpIHtcclxuXHRcdHJldHVybiBmbi5hcHBseShoYW5kbGVyLCBmbi5yZXZlcnNlKGFyZ3VtZW50cykpO1xyXG5cdH07XHJcbn07XHJcblxyXG5mbi5kZWxheSA9IGZ1bmN0aW9uIChoYW5kbGVyLCBtc0RlbGF5KSB7XHJcblx0cmV0dXJuIHNldFRpbWVvdXQoaGFuZGxlciwgbXNEZWxheSk7XHJcbn07XHJcblxyXG5mbi5kZWxheUZvciA9IGZuLmZsaXAoZm4uZGVsYXkpO1xyXG5cclxuZm4uZGVsYXllZCA9IGZ1bmN0aW9uIChoYW5kbGVyLCBtc0RlbGF5KSB7XHJcblx0cmV0dXJuIGZ1bmN0aW9uICgpIHtcclxuXHRcdHJldHVybiBmbi5kZWxheShmbi5wYXJ0aWFsKGhhbmRsZXIsIGZuLnRvQXJyYXkoYXJndW1lbnRzKSksIG1zRGVsYXkpO1xyXG5cdH07XHJcbn07XHJcblxyXG5mbi5kZWxheWVkRm9yID0gZm4uZmxpcChmbi5kZWxheWVkKTtcclxuXHJcbmZuLmFzeW5jID0gZm4uY29tcG9zZShmbi5wYXJ0aWFsKGZuLmRlbGF5ZWRGb3IsIDApKTtcclxuXHJcbmZuLnRocm90dGxlID0gZnVuY3Rpb24gKGhhbmRsZXIsIG1zRGVsYXkpIHtcclxuXHR2YXIgdGhyb3R0bGluZztcclxuXHJcblx0cmV0dXJuIGZ1bmN0aW9uICgpIHtcclxuXHRcdHZhciBhcmdzID0gZm4udG9BcnJheShhcmd1bWVudHMpO1xyXG5cclxuXHRcdGlmICh0aHJvdHRsaW5nKSB7XHJcblx0XHRcdHJldHVybjtcclxuXHRcdH1cclxuXHJcblx0XHR0aHJvdHRsaW5nID0gZm4uZGVsYXkoZnVuY3Rpb24gKCkge1xyXG5cdFx0XHR0aHJvdHRsaW5nID0gZmFsc2U7XHJcblxyXG5cdFx0XHRmbi5hcHBseShoYW5kbGVyLCBhcmdzKTtcclxuXHRcdH0sIG1zRGVsYXkpO1xyXG5cdH07XHJcbn07XHJcblxyXG5mbi5kZWJvdW5jZSA9IGZ1bmN0aW9uIChoYW5kbGVyLCBtc0RlbGF5KSB7XHJcblx0dmFyIGRlYm91bmNpbmc7XHJcblxyXG5cdHJldHVybiBmdW5jdGlvbiAoKSB7XHJcblx0XHR2YXIgYXJncyA9IGZuLnRvQXJyYXkoYXJndW1lbnRzKTtcclxuXHJcblx0XHRpZiAoZGVib3VuY2luZykge1xyXG5cdFx0XHRjbGVhclRpbWVvdXQoZGVib3VuY2luZyk7XHJcblx0XHR9XHJcblxyXG5cdFx0ZGVib3VuY2luZyA9IGZuLmRlbGF5KGZ1bmN0aW9uICgpIHtcclxuXHRcdFx0ZGVib3VuY2luZyA9IGZhbHNlO1xyXG5cclxuXHRcdFx0Zm4uYXBwbHkoaGFuZGxlciwgYXJncyk7XHJcblx0XHR9LCBtc0RlbGF5KTtcclxuXHR9O1xyXG59O1xyXG5cclxuZm4uY29udGFpbnMgPSBmdW5jdGlvbiAoaGF5c3RhY2ssIG5lZWRsZSkge1xyXG5cdHJldHVybiBoYXlzdGFjay5pbmRleE9mKG5lZWRsZSkgIT09IC0xO1xyXG59O1xyXG5yZXR1cm4gZm47XHJcbn0pKTsiLCIvKiEgalF1ZXJ5IHYxLjExLjIgfCAoYykgMjAwNSwgMjAxNCBqUXVlcnkgRm91bmRhdGlvbiwgSW5jLiB8IGpxdWVyeS5vcmcvbGljZW5zZSAqL1xyXG4hZnVuY3Rpb24oYSxiKXtcIm9iamVjdFwiPT10eXBlb2YgbW9kdWxlJiZcIm9iamVjdFwiPT10eXBlb2YgbW9kdWxlLmV4cG9ydHM/bW9kdWxlLmV4cG9ydHM9YS5kb2N1bWVudD9iKGEsITApOmZ1bmN0aW9uKGEpe2lmKCFhLmRvY3VtZW50KXRocm93IG5ldyBFcnJvcihcImpRdWVyeSByZXF1aXJlcyBhIHdpbmRvdyB3aXRoIGEgZG9jdW1lbnRcIik7cmV0dXJuIGIoYSl9OmIoYSl9KFwidW5kZWZpbmVkXCIhPXR5cGVvZiB3aW5kb3c/d2luZG93OnRoaXMsZnVuY3Rpb24oYSxiKXt2YXIgYz1bXSxkPWMuc2xpY2UsZT1jLmNvbmNhdCxmPWMucHVzaCxnPWMuaW5kZXhPZixoPXt9LGk9aC50b1N0cmluZyxqPWguaGFzT3duUHJvcGVydHksaz17fSxsPVwiMS4xMS4yXCIsbT1mdW5jdGlvbihhLGIpe3JldHVybiBuZXcgbS5mbi5pbml0KGEsYil9LG49L15bXFxzXFx1RkVGRlxceEEwXSt8W1xcc1xcdUZFRkZcXHhBMF0rJC9nLG89L14tbXMtLyxwPS8tKFtcXGRhLXpdKS9naSxxPWZ1bmN0aW9uKGEsYil7cmV0dXJuIGIudG9VcHBlckNhc2UoKX07bS5mbj1tLnByb3RvdHlwZT17anF1ZXJ5OmwsY29uc3RydWN0b3I6bSxzZWxlY3RvcjpcIlwiLGxlbmd0aDowLHRvQXJyYXk6ZnVuY3Rpb24oKXtyZXR1cm4gZC5jYWxsKHRoaXMpfSxnZXQ6ZnVuY3Rpb24oYSl7cmV0dXJuIG51bGwhPWE/MD5hP3RoaXNbYSt0aGlzLmxlbmd0aF06dGhpc1thXTpkLmNhbGwodGhpcyl9LHB1c2hTdGFjazpmdW5jdGlvbihhKXt2YXIgYj1tLm1lcmdlKHRoaXMuY29uc3RydWN0b3IoKSxhKTtyZXR1cm4gYi5wcmV2T2JqZWN0PXRoaXMsYi5jb250ZXh0PXRoaXMuY29udGV4dCxifSxlYWNoOmZ1bmN0aW9uKGEsYil7cmV0dXJuIG0uZWFjaCh0aGlzLGEsYil9LG1hcDpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5wdXNoU3RhY2sobS5tYXAodGhpcyxmdW5jdGlvbihiLGMpe3JldHVybiBhLmNhbGwoYixjLGIpfSkpfSxzbGljZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLnB1c2hTdGFjayhkLmFwcGx5KHRoaXMsYXJndW1lbnRzKSl9LGZpcnN0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZXEoMCl9LGxhc3Q6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5lcSgtMSl9LGVxOmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMubGVuZ3RoLGM9K2ErKDA+YT9iOjApO3JldHVybiB0aGlzLnB1c2hTdGFjayhjPj0wJiZiPmM/W3RoaXNbY11dOltdKX0sZW5kOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMucHJldk9iamVjdHx8dGhpcy5jb25zdHJ1Y3RvcihudWxsKX0scHVzaDpmLHNvcnQ6Yy5zb3J0LHNwbGljZTpjLnNwbGljZX0sbS5leHRlbmQ9bS5mbi5leHRlbmQ9ZnVuY3Rpb24oKXt2YXIgYSxiLGMsZCxlLGYsZz1hcmd1bWVudHNbMF18fHt9LGg9MSxpPWFyZ3VtZW50cy5sZW5ndGgsaj0hMTtmb3IoXCJib29sZWFuXCI9PXR5cGVvZiBnJiYoaj1nLGc9YXJndW1lbnRzW2hdfHx7fSxoKyspLFwib2JqZWN0XCI9PXR5cGVvZiBnfHxtLmlzRnVuY3Rpb24oZyl8fChnPXt9KSxoPT09aSYmKGc9dGhpcyxoLS0pO2k+aDtoKyspaWYobnVsbCE9KGU9YXJndW1lbnRzW2hdKSlmb3IoZCBpbiBlKWE9Z1tkXSxjPWVbZF0sZyE9PWMmJihqJiZjJiYobS5pc1BsYWluT2JqZWN0KGMpfHwoYj1tLmlzQXJyYXkoYykpKT8oYj8oYj0hMSxmPWEmJm0uaXNBcnJheShhKT9hOltdKTpmPWEmJm0uaXNQbGFpbk9iamVjdChhKT9hOnt9LGdbZF09bS5leHRlbmQoaixmLGMpKTp2b2lkIDAhPT1jJiYoZ1tkXT1jKSk7cmV0dXJuIGd9LG0uZXh0ZW5kKHtleHBhbmRvOlwialF1ZXJ5XCIrKGwrTWF0aC5yYW5kb20oKSkucmVwbGFjZSgvXFxEL2csXCJcIiksaXNSZWFkeTohMCxlcnJvcjpmdW5jdGlvbihhKXt0aHJvdyBuZXcgRXJyb3IoYSl9LG5vb3A6ZnVuY3Rpb24oKXt9LGlzRnVuY3Rpb246ZnVuY3Rpb24oYSl7cmV0dXJuXCJmdW5jdGlvblwiPT09bS50eXBlKGEpfSxpc0FycmF5OkFycmF5LmlzQXJyYXl8fGZ1bmN0aW9uKGEpe3JldHVyblwiYXJyYXlcIj09PW0udHlwZShhKX0saXNXaW5kb3c6ZnVuY3Rpb24oYSl7cmV0dXJuIG51bGwhPWEmJmE9PWEud2luZG93fSxpc051bWVyaWM6ZnVuY3Rpb24oYSl7cmV0dXJuIW0uaXNBcnJheShhKSYmYS1wYXJzZUZsb2F0KGEpKzE+PTB9LGlzRW1wdHlPYmplY3Q6ZnVuY3Rpb24oYSl7dmFyIGI7Zm9yKGIgaW4gYSlyZXR1cm4hMTtyZXR1cm4hMH0saXNQbGFpbk9iamVjdDpmdW5jdGlvbihhKXt2YXIgYjtpZighYXx8XCJvYmplY3RcIiE9PW0udHlwZShhKXx8YS5ub2RlVHlwZXx8bS5pc1dpbmRvdyhhKSlyZXR1cm4hMTt0cnl7aWYoYS5jb25zdHJ1Y3RvciYmIWouY2FsbChhLFwiY29uc3RydWN0b3JcIikmJiFqLmNhbGwoYS5jb25zdHJ1Y3Rvci5wcm90b3R5cGUsXCJpc1Byb3RvdHlwZU9mXCIpKXJldHVybiExfWNhdGNoKGMpe3JldHVybiExfWlmKGsub3duTGFzdClmb3IoYiBpbiBhKXJldHVybiBqLmNhbGwoYSxiKTtmb3IoYiBpbiBhKTtyZXR1cm4gdm9pZCAwPT09Ynx8ai5jYWxsKGEsYil9LHR5cGU6ZnVuY3Rpb24oYSl7cmV0dXJuIG51bGw9PWE/YStcIlwiOlwib2JqZWN0XCI9PXR5cGVvZiBhfHxcImZ1bmN0aW9uXCI9PXR5cGVvZiBhP2hbaS5jYWxsKGEpXXx8XCJvYmplY3RcIjp0eXBlb2YgYX0sZ2xvYmFsRXZhbDpmdW5jdGlvbihiKXtiJiZtLnRyaW0oYikmJihhLmV4ZWNTY3JpcHR8fGZ1bmN0aW9uKGIpe2EuZXZhbC5jYWxsKGEsYil9KShiKX0sY2FtZWxDYXNlOmZ1bmN0aW9uKGEpe3JldHVybiBhLnJlcGxhY2UobyxcIm1zLVwiKS5yZXBsYWNlKHAscSl9LG5vZGVOYW1lOmZ1bmN0aW9uKGEsYil7cmV0dXJuIGEubm9kZU5hbWUmJmEubm9kZU5hbWUudG9Mb3dlckNhc2UoKT09PWIudG9Mb3dlckNhc2UoKX0sZWFjaDpmdW5jdGlvbihhLGIsYyl7dmFyIGQsZT0wLGY9YS5sZW5ndGgsZz1yKGEpO2lmKGMpe2lmKGcpe2Zvcig7Zj5lO2UrKylpZihkPWIuYXBwbHkoYVtlXSxjKSxkPT09ITEpYnJlYWt9ZWxzZSBmb3IoZSBpbiBhKWlmKGQ9Yi5hcHBseShhW2VdLGMpLGQ9PT0hMSlicmVha31lbHNlIGlmKGcpe2Zvcig7Zj5lO2UrKylpZihkPWIuY2FsbChhW2VdLGUsYVtlXSksZD09PSExKWJyZWFrfWVsc2UgZm9yKGUgaW4gYSlpZihkPWIuY2FsbChhW2VdLGUsYVtlXSksZD09PSExKWJyZWFrO3JldHVybiBhfSx0cmltOmZ1bmN0aW9uKGEpe3JldHVybiBudWxsPT1hP1wiXCI6KGErXCJcIikucmVwbGFjZShuLFwiXCIpfSxtYWtlQXJyYXk6ZnVuY3Rpb24oYSxiKXt2YXIgYz1ifHxbXTtyZXR1cm4gbnVsbCE9YSYmKHIoT2JqZWN0KGEpKT9tLm1lcmdlKGMsXCJzdHJpbmdcIj09dHlwZW9mIGE/W2FdOmEpOmYuY2FsbChjLGEpKSxjfSxpbkFycmF5OmZ1bmN0aW9uKGEsYixjKXt2YXIgZDtpZihiKXtpZihnKXJldHVybiBnLmNhbGwoYixhLGMpO2ZvcihkPWIubGVuZ3RoLGM9Yz8wPmM/TWF0aC5tYXgoMCxkK2MpOmM6MDtkPmM7YysrKWlmKGMgaW4gYiYmYltjXT09PWEpcmV0dXJuIGN9cmV0dXJuLTF9LG1lcmdlOmZ1bmN0aW9uKGEsYil7dmFyIGM9K2IubGVuZ3RoLGQ9MCxlPWEubGVuZ3RoO3doaWxlKGM+ZClhW2UrK109YltkKytdO2lmKGMhPT1jKXdoaWxlKHZvaWQgMCE9PWJbZF0pYVtlKytdPWJbZCsrXTtyZXR1cm4gYS5sZW5ndGg9ZSxhfSxncmVwOmZ1bmN0aW9uKGEsYixjKXtmb3IodmFyIGQsZT1bXSxmPTAsZz1hLmxlbmd0aCxoPSFjO2c+ZjtmKyspZD0hYihhW2ZdLGYpLGQhPT1oJiZlLnB1c2goYVtmXSk7cmV0dXJuIGV9LG1hcDpmdW5jdGlvbihhLGIsYyl7dmFyIGQsZj0wLGc9YS5sZW5ndGgsaD1yKGEpLGk9W107aWYoaClmb3IoO2c+ZjtmKyspZD1iKGFbZl0sZixjKSxudWxsIT1kJiZpLnB1c2goZCk7ZWxzZSBmb3IoZiBpbiBhKWQ9YihhW2ZdLGYsYyksbnVsbCE9ZCYmaS5wdXNoKGQpO3JldHVybiBlLmFwcGx5KFtdLGkpfSxndWlkOjEscHJveHk6ZnVuY3Rpb24oYSxiKXt2YXIgYyxlLGY7cmV0dXJuXCJzdHJpbmdcIj09dHlwZW9mIGImJihmPWFbYl0sYj1hLGE9ZiksbS5pc0Z1bmN0aW9uKGEpPyhjPWQuY2FsbChhcmd1bWVudHMsMiksZT1mdW5jdGlvbigpe3JldHVybiBhLmFwcGx5KGJ8fHRoaXMsYy5jb25jYXQoZC5jYWxsKGFyZ3VtZW50cykpKX0sZS5ndWlkPWEuZ3VpZD1hLmd1aWR8fG0uZ3VpZCsrLGUpOnZvaWQgMH0sbm93OmZ1bmN0aW9uKCl7cmV0dXJuK25ldyBEYXRlfSxzdXBwb3J0Omt9KSxtLmVhY2goXCJCb29sZWFuIE51bWJlciBTdHJpbmcgRnVuY3Rpb24gQXJyYXkgRGF0ZSBSZWdFeHAgT2JqZWN0IEVycm9yXCIuc3BsaXQoXCIgXCIpLGZ1bmN0aW9uKGEsYil7aFtcIltvYmplY3QgXCIrYitcIl1cIl09Yi50b0xvd2VyQ2FzZSgpfSk7ZnVuY3Rpb24gcihhKXt2YXIgYj1hLmxlbmd0aCxjPW0udHlwZShhKTtyZXR1cm5cImZ1bmN0aW9uXCI9PT1jfHxtLmlzV2luZG93KGEpPyExOjE9PT1hLm5vZGVUeXBlJiZiPyEwOlwiYXJyYXlcIj09PWN8fDA9PT1ifHxcIm51bWJlclwiPT10eXBlb2YgYiYmYj4wJiZiLTEgaW4gYX12YXIgcz1mdW5jdGlvbihhKXt2YXIgYixjLGQsZSxmLGcsaCxpLGosayxsLG0sbixvLHAscSxyLHMsdCx1PVwic2l6emxlXCIrMSpuZXcgRGF0ZSx2PWEuZG9jdW1lbnQsdz0wLHg9MCx5PWhiKCksej1oYigpLEE9aGIoKSxCPWZ1bmN0aW9uKGEsYil7cmV0dXJuIGE9PT1iJiYobD0hMCksMH0sQz0xPDwzMSxEPXt9Lmhhc093blByb3BlcnR5LEU9W10sRj1FLnBvcCxHPUUucHVzaCxIPUUucHVzaCxJPUUuc2xpY2UsSj1mdW5jdGlvbihhLGIpe2Zvcih2YXIgYz0wLGQ9YS5sZW5ndGg7ZD5jO2MrKylpZihhW2NdPT09YilyZXR1cm4gYztyZXR1cm4tMX0sSz1cImNoZWNrZWR8c2VsZWN0ZWR8YXN5bmN8YXV0b2ZvY3VzfGF1dG9wbGF5fGNvbnRyb2xzfGRlZmVyfGRpc2FibGVkfGhpZGRlbnxpc21hcHxsb29wfG11bHRpcGxlfG9wZW58cmVhZG9ubHl8cmVxdWlyZWR8c2NvcGVkXCIsTD1cIltcXFxceDIwXFxcXHRcXFxcclxcXFxuXFxcXGZdXCIsTT1cIig/OlxcXFxcXFxcLnxbXFxcXHctXXxbXlxcXFx4MDAtXFxcXHhhMF0pK1wiLE49TS5yZXBsYWNlKFwid1wiLFwidyNcIiksTz1cIlxcXFxbXCIrTCtcIiooXCIrTStcIikoPzpcIitMK1wiKihbKl4kfCF+XT89KVwiK0wrXCIqKD86JygoPzpcXFxcXFxcXC58W15cXFxcXFxcXCddKSopJ3xcXFwiKCg/OlxcXFxcXFxcLnxbXlxcXFxcXFxcXFxcIl0pKilcXFwifChcIitOK1wiKSl8KVwiK0wrXCIqXFxcXF1cIixQPVwiOihcIitNK1wiKSg/OlxcXFwoKCgnKCg/OlxcXFxcXFxcLnxbXlxcXFxcXFxcJ10pKiknfFxcXCIoKD86XFxcXFxcXFwufFteXFxcXFxcXFxcXFwiXSkqKVxcXCIpfCgoPzpcXFxcXFxcXC58W15cXFxcXFxcXCgpW1xcXFxdXXxcIitPK1wiKSopfC4qKVxcXFwpfClcIixRPW5ldyBSZWdFeHAoTCtcIitcIixcImdcIiksUj1uZXcgUmVnRXhwKFwiXlwiK0wrXCIrfCgoPzpefFteXFxcXFxcXFxdKSg/OlxcXFxcXFxcLikqKVwiK0wrXCIrJFwiLFwiZ1wiKSxTPW5ldyBSZWdFeHAoXCJeXCIrTCtcIiosXCIrTCtcIipcIiksVD1uZXcgUmVnRXhwKFwiXlwiK0wrXCIqKFs+K35dfFwiK0wrXCIpXCIrTCtcIipcIiksVT1uZXcgUmVnRXhwKFwiPVwiK0wrXCIqKFteXFxcXF0nXFxcIl0qPylcIitMK1wiKlxcXFxdXCIsXCJnXCIpLFY9bmV3IFJlZ0V4cChQKSxXPW5ldyBSZWdFeHAoXCJeXCIrTitcIiRcIiksWD17SUQ6bmV3IFJlZ0V4cChcIl4jKFwiK00rXCIpXCIpLENMQVNTOm5ldyBSZWdFeHAoXCJeXFxcXC4oXCIrTStcIilcIiksVEFHOm5ldyBSZWdFeHAoXCJeKFwiK00ucmVwbGFjZShcIndcIixcIncqXCIpK1wiKVwiKSxBVFRSOm5ldyBSZWdFeHAoXCJeXCIrTyksUFNFVURPOm5ldyBSZWdFeHAoXCJeXCIrUCksQ0hJTEQ6bmV3IFJlZ0V4cChcIl46KG9ubHl8Zmlyc3R8bGFzdHxudGh8bnRoLWxhc3QpLShjaGlsZHxvZi10eXBlKSg/OlxcXFwoXCIrTCtcIiooZXZlbnxvZGR8KChbKy1dfCkoXFxcXGQqKW58KVwiK0wrXCIqKD86KFsrLV18KVwiK0wrXCIqKFxcXFxkKyl8KSlcIitMK1wiKlxcXFwpfClcIixcImlcIiksYm9vbDpuZXcgUmVnRXhwKFwiXig/OlwiK0srXCIpJFwiLFwiaVwiKSxuZWVkc0NvbnRleHQ6bmV3IFJlZ0V4cChcIl5cIitMK1wiKls+K35dfDooZXZlbnxvZGR8ZXF8Z3R8bHR8bnRofGZpcnN0fGxhc3QpKD86XFxcXChcIitMK1wiKigoPzotXFxcXGQpP1xcXFxkKilcIitMK1wiKlxcXFwpfCkoPz1bXi1dfCQpXCIsXCJpXCIpfSxZPS9eKD86aW5wdXR8c2VsZWN0fHRleHRhcmVhfGJ1dHRvbikkL2ksWj0vXmhcXGQkL2ksJD0vXltee10rXFx7XFxzKlxcW25hdGl2ZSBcXHcvLF89L14oPzojKFtcXHctXSspfChcXHcrKXxcXC4oW1xcdy1dKykpJC8sYWI9L1srfl0vLGJiPS8nfFxcXFwvZyxjYj1uZXcgUmVnRXhwKFwiXFxcXFxcXFwoW1xcXFxkYS1mXXsxLDZ9XCIrTCtcIj98KFwiK0wrXCIpfC4pXCIsXCJpZ1wiKSxkYj1mdW5jdGlvbihhLGIsYyl7dmFyIGQ9XCIweFwiK2ItNjU1MzY7cmV0dXJuIGQhPT1kfHxjP2I6MD5kP1N0cmluZy5mcm9tQ2hhckNvZGUoZCs2NTUzNik6U3RyaW5nLmZyb21DaGFyQ29kZShkPj4xMHw1NTI5NiwxMDIzJmR8NTYzMjApfSxlYj1mdW5jdGlvbigpe20oKX07dHJ5e0guYXBwbHkoRT1JLmNhbGwodi5jaGlsZE5vZGVzKSx2LmNoaWxkTm9kZXMpLEVbdi5jaGlsZE5vZGVzLmxlbmd0aF0ubm9kZVR5cGV9Y2F0Y2goZmIpe0g9e2FwcGx5OkUubGVuZ3RoP2Z1bmN0aW9uKGEsYil7Ry5hcHBseShhLEkuY2FsbChiKSl9OmZ1bmN0aW9uKGEsYil7dmFyIGM9YS5sZW5ndGgsZD0wO3doaWxlKGFbYysrXT1iW2QrK10pO2EubGVuZ3RoPWMtMX19fWZ1bmN0aW9uIGdiKGEsYixkLGUpe3ZhciBmLGgsaixrLGwsbyxyLHMsdyx4O2lmKChiP2Iub3duZXJEb2N1bWVudHx8Yjp2KSE9PW4mJm0oYiksYj1ifHxuLGQ9ZHx8W10saz1iLm5vZGVUeXBlLFwic3RyaW5nXCIhPXR5cGVvZiBhfHwhYXx8MSE9PWsmJjkhPT1rJiYxMSE9PWspcmV0dXJuIGQ7aWYoIWUmJnApe2lmKDExIT09ayYmKGY9Xy5leGVjKGEpKSlpZihqPWZbMV0pe2lmKDk9PT1rKXtpZihoPWIuZ2V0RWxlbWVudEJ5SWQoaiksIWh8fCFoLnBhcmVudE5vZGUpcmV0dXJuIGQ7aWYoaC5pZD09PWopcmV0dXJuIGQucHVzaChoKSxkfWVsc2UgaWYoYi5vd25lckRvY3VtZW50JiYoaD1iLm93bmVyRG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoaikpJiZ0KGIsaCkmJmguaWQ9PT1qKXJldHVybiBkLnB1c2goaCksZH1lbHNle2lmKGZbMl0pcmV0dXJuIEguYXBwbHkoZCxiLmdldEVsZW1lbnRzQnlUYWdOYW1lKGEpKSxkO2lmKChqPWZbM10pJiZjLmdldEVsZW1lbnRzQnlDbGFzc05hbWUpcmV0dXJuIEguYXBwbHkoZCxiLmdldEVsZW1lbnRzQnlDbGFzc05hbWUoaikpLGR9aWYoYy5xc2EmJighcXx8IXEudGVzdChhKSkpe2lmKHM9cj11LHc9Yix4PTEhPT1rJiZhLDE9PT1rJiZcIm9iamVjdFwiIT09Yi5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpKXtvPWcoYSksKHI9Yi5nZXRBdHRyaWJ1dGUoXCJpZFwiKSk/cz1yLnJlcGxhY2UoYmIsXCJcXFxcJCZcIik6Yi5zZXRBdHRyaWJ1dGUoXCJpZFwiLHMpLHM9XCJbaWQ9J1wiK3MrXCInXSBcIixsPW8ubGVuZ3RoO3doaWxlKGwtLSlvW2xdPXMrcmIob1tsXSk7dz1hYi50ZXN0KGEpJiZwYihiLnBhcmVudE5vZGUpfHxiLHg9by5qb2luKFwiLFwiKX1pZih4KXRyeXtyZXR1cm4gSC5hcHBseShkLHcucXVlcnlTZWxlY3RvckFsbCh4KSksZH1jYXRjaCh5KXt9ZmluYWxseXtyfHxiLnJlbW92ZUF0dHJpYnV0ZShcImlkXCIpfX19cmV0dXJuIGkoYS5yZXBsYWNlKFIsXCIkMVwiKSxiLGQsZSl9ZnVuY3Rpb24gaGIoKXt2YXIgYT1bXTtmdW5jdGlvbiBiKGMsZSl7cmV0dXJuIGEucHVzaChjK1wiIFwiKT5kLmNhY2hlTGVuZ3RoJiZkZWxldGUgYlthLnNoaWZ0KCldLGJbYytcIiBcIl09ZX1yZXR1cm4gYn1mdW5jdGlvbiBpYihhKXtyZXR1cm4gYVt1XT0hMCxhfWZ1bmN0aW9uIGpiKGEpe3ZhciBiPW4uY3JlYXRlRWxlbWVudChcImRpdlwiKTt0cnl7cmV0dXJuISFhKGIpfWNhdGNoKGMpe3JldHVybiExfWZpbmFsbHl7Yi5wYXJlbnROb2RlJiZiLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoYiksYj1udWxsfX1mdW5jdGlvbiBrYihhLGIpe3ZhciBjPWEuc3BsaXQoXCJ8XCIpLGU9YS5sZW5ndGg7d2hpbGUoZS0tKWQuYXR0ckhhbmRsZVtjW2VdXT1ifWZ1bmN0aW9uIGxiKGEsYil7dmFyIGM9YiYmYSxkPWMmJjE9PT1hLm5vZGVUeXBlJiYxPT09Yi5ub2RlVHlwZSYmKH5iLnNvdXJjZUluZGV4fHxDKS0ofmEuc291cmNlSW5kZXh8fEMpO2lmKGQpcmV0dXJuIGQ7aWYoYyl3aGlsZShjPWMubmV4dFNpYmxpbmcpaWYoYz09PWIpcmV0dXJuLTE7cmV0dXJuIGE/MTotMX1mdW5jdGlvbiBtYihhKXtyZXR1cm4gZnVuY3Rpb24oYil7dmFyIGM9Yi5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpO3JldHVyblwiaW5wdXRcIj09PWMmJmIudHlwZT09PWF9fWZ1bmN0aW9uIG5iKGEpe3JldHVybiBmdW5jdGlvbihiKXt2YXIgYz1iLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCk7cmV0dXJuKFwiaW5wdXRcIj09PWN8fFwiYnV0dG9uXCI9PT1jKSYmYi50eXBlPT09YX19ZnVuY3Rpb24gb2IoYSl7cmV0dXJuIGliKGZ1bmN0aW9uKGIpe3JldHVybiBiPStiLGliKGZ1bmN0aW9uKGMsZCl7dmFyIGUsZj1hKFtdLGMubGVuZ3RoLGIpLGc9Zi5sZW5ndGg7d2hpbGUoZy0tKWNbZT1mW2ddXSYmKGNbZV09IShkW2VdPWNbZV0pKX0pfSl9ZnVuY3Rpb24gcGIoYSl7cmV0dXJuIGEmJlwidW5kZWZpbmVkXCIhPXR5cGVvZiBhLmdldEVsZW1lbnRzQnlUYWdOYW1lJiZhfWM9Z2Iuc3VwcG9ydD17fSxmPWdiLmlzWE1MPWZ1bmN0aW9uKGEpe3ZhciBiPWEmJihhLm93bmVyRG9jdW1lbnR8fGEpLmRvY3VtZW50RWxlbWVudDtyZXR1cm4gYj9cIkhUTUxcIiE9PWIubm9kZU5hbWU6ITF9LG09Z2Iuc2V0RG9jdW1lbnQ9ZnVuY3Rpb24oYSl7dmFyIGIsZSxnPWE/YS5vd25lckRvY3VtZW50fHxhOnY7cmV0dXJuIGchPT1uJiY5PT09Zy5ub2RlVHlwZSYmZy5kb2N1bWVudEVsZW1lbnQ/KG49ZyxvPWcuZG9jdW1lbnRFbGVtZW50LGU9Zy5kZWZhdWx0VmlldyxlJiZlIT09ZS50b3AmJihlLmFkZEV2ZW50TGlzdGVuZXI/ZS5hZGRFdmVudExpc3RlbmVyKFwidW5sb2FkXCIsZWIsITEpOmUuYXR0YWNoRXZlbnQmJmUuYXR0YWNoRXZlbnQoXCJvbnVubG9hZFwiLGViKSkscD0hZihnKSxjLmF0dHJpYnV0ZXM9amIoZnVuY3Rpb24oYSl7cmV0dXJuIGEuY2xhc3NOYW1lPVwiaVwiLCFhLmdldEF0dHJpYnV0ZShcImNsYXNzTmFtZVwiKX0pLGMuZ2V0RWxlbWVudHNCeVRhZ05hbWU9amIoZnVuY3Rpb24oYSl7cmV0dXJuIGEuYXBwZW5kQ2hpbGQoZy5jcmVhdGVDb21tZW50KFwiXCIpKSwhYS5nZXRFbGVtZW50c0J5VGFnTmFtZShcIipcIikubGVuZ3RofSksYy5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lPSQudGVzdChnLmdldEVsZW1lbnRzQnlDbGFzc05hbWUpLGMuZ2V0QnlJZD1qYihmdW5jdGlvbihhKXtyZXR1cm4gby5hcHBlbmRDaGlsZChhKS5pZD11LCFnLmdldEVsZW1lbnRzQnlOYW1lfHwhZy5nZXRFbGVtZW50c0J5TmFtZSh1KS5sZW5ndGh9KSxjLmdldEJ5SWQ/KGQuZmluZC5JRD1mdW5jdGlvbihhLGIpe2lmKFwidW5kZWZpbmVkXCIhPXR5cGVvZiBiLmdldEVsZW1lbnRCeUlkJiZwKXt2YXIgYz1iLmdldEVsZW1lbnRCeUlkKGEpO3JldHVybiBjJiZjLnBhcmVudE5vZGU/W2NdOltdfX0sZC5maWx0ZXIuSUQ9ZnVuY3Rpb24oYSl7dmFyIGI9YS5yZXBsYWNlKGNiLGRiKTtyZXR1cm4gZnVuY3Rpb24oYSl7cmV0dXJuIGEuZ2V0QXR0cmlidXRlKFwiaWRcIik9PT1ifX0pOihkZWxldGUgZC5maW5kLklELGQuZmlsdGVyLklEPWZ1bmN0aW9uKGEpe3ZhciBiPWEucmVwbGFjZShjYixkYik7cmV0dXJuIGZ1bmN0aW9uKGEpe3ZhciBjPVwidW5kZWZpbmVkXCIhPXR5cGVvZiBhLmdldEF0dHJpYnV0ZU5vZGUmJmEuZ2V0QXR0cmlidXRlTm9kZShcImlkXCIpO3JldHVybiBjJiZjLnZhbHVlPT09Yn19KSxkLmZpbmQuVEFHPWMuZ2V0RWxlbWVudHNCeVRhZ05hbWU/ZnVuY3Rpb24oYSxiKXtyZXR1cm5cInVuZGVmaW5lZFwiIT10eXBlb2YgYi5nZXRFbGVtZW50c0J5VGFnTmFtZT9iLmdldEVsZW1lbnRzQnlUYWdOYW1lKGEpOmMucXNhP2IucXVlcnlTZWxlY3RvckFsbChhKTp2b2lkIDB9OmZ1bmN0aW9uKGEsYil7dmFyIGMsZD1bXSxlPTAsZj1iLmdldEVsZW1lbnRzQnlUYWdOYW1lKGEpO2lmKFwiKlwiPT09YSl7d2hpbGUoYz1mW2UrK10pMT09PWMubm9kZVR5cGUmJmQucHVzaChjKTtyZXR1cm4gZH1yZXR1cm4gZn0sZC5maW5kLkNMQVNTPWMuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSYmZnVuY3Rpb24oYSxiKXtyZXR1cm4gcD9iLmdldEVsZW1lbnRzQnlDbGFzc05hbWUoYSk6dm9pZCAwfSxyPVtdLHE9W10sKGMucXNhPSQudGVzdChnLnF1ZXJ5U2VsZWN0b3JBbGwpKSYmKGpiKGZ1bmN0aW9uKGEpe28uYXBwZW5kQ2hpbGQoYSkuaW5uZXJIVE1MPVwiPGEgaWQ9J1wiK3UrXCInPjwvYT48c2VsZWN0IGlkPSdcIit1K1wiLVxcZl0nIG1zYWxsb3djYXB0dXJlPScnPjxvcHRpb24gc2VsZWN0ZWQ9Jyc+PC9vcHRpb24+PC9zZWxlY3Q+XCIsYS5xdWVyeVNlbGVjdG9yQWxsKFwiW21zYWxsb3djYXB0dXJlXj0nJ11cIikubGVuZ3RoJiZxLnB1c2goXCJbKl4kXT1cIitMK1wiKig/OicnfFxcXCJcXFwiKVwiKSxhLnF1ZXJ5U2VsZWN0b3JBbGwoXCJbc2VsZWN0ZWRdXCIpLmxlbmd0aHx8cS5wdXNoKFwiXFxcXFtcIitMK1wiKig/OnZhbHVlfFwiK0srXCIpXCIpLGEucXVlcnlTZWxlY3RvckFsbChcIltpZH49XCIrdStcIi1dXCIpLmxlbmd0aHx8cS5wdXNoKFwifj1cIiksYS5xdWVyeVNlbGVjdG9yQWxsKFwiOmNoZWNrZWRcIikubGVuZ3RofHxxLnB1c2goXCI6Y2hlY2tlZFwiKSxhLnF1ZXJ5U2VsZWN0b3JBbGwoXCJhI1wiK3UrXCIrKlwiKS5sZW5ndGh8fHEucHVzaChcIi4jLitbK35dXCIpfSksamIoZnVuY3Rpb24oYSl7dmFyIGI9Zy5jcmVhdGVFbGVtZW50KFwiaW5wdXRcIik7Yi5zZXRBdHRyaWJ1dGUoXCJ0eXBlXCIsXCJoaWRkZW5cIiksYS5hcHBlbmRDaGlsZChiKS5zZXRBdHRyaWJ1dGUoXCJuYW1lXCIsXCJEXCIpLGEucXVlcnlTZWxlY3RvckFsbChcIltuYW1lPWRdXCIpLmxlbmd0aCYmcS5wdXNoKFwibmFtZVwiK0wrXCIqWypeJHwhfl0/PVwiKSxhLnF1ZXJ5U2VsZWN0b3JBbGwoXCI6ZW5hYmxlZFwiKS5sZW5ndGh8fHEucHVzaChcIjplbmFibGVkXCIsXCI6ZGlzYWJsZWRcIiksYS5xdWVyeVNlbGVjdG9yQWxsKFwiKiw6eFwiKSxxLnB1c2goXCIsLio6XCIpfSkpLChjLm1hdGNoZXNTZWxlY3Rvcj0kLnRlc3Qocz1vLm1hdGNoZXN8fG8ud2Via2l0TWF0Y2hlc1NlbGVjdG9yfHxvLm1vek1hdGNoZXNTZWxlY3Rvcnx8by5vTWF0Y2hlc1NlbGVjdG9yfHxvLm1zTWF0Y2hlc1NlbGVjdG9yKSkmJmpiKGZ1bmN0aW9uKGEpe2MuZGlzY29ubmVjdGVkTWF0Y2g9cy5jYWxsKGEsXCJkaXZcIikscy5jYWxsKGEsXCJbcyE9JyddOnhcIiksci5wdXNoKFwiIT1cIixQKX0pLHE9cS5sZW5ndGgmJm5ldyBSZWdFeHAocS5qb2luKFwifFwiKSkscj1yLmxlbmd0aCYmbmV3IFJlZ0V4cChyLmpvaW4oXCJ8XCIpKSxiPSQudGVzdChvLmNvbXBhcmVEb2N1bWVudFBvc2l0aW9uKSx0PWJ8fCQudGVzdChvLmNvbnRhaW5zKT9mdW5jdGlvbihhLGIpe3ZhciBjPTk9PT1hLm5vZGVUeXBlP2EuZG9jdW1lbnRFbGVtZW50OmEsZD1iJiZiLnBhcmVudE5vZGU7cmV0dXJuIGE9PT1kfHwhKCFkfHwxIT09ZC5ub2RlVHlwZXx8IShjLmNvbnRhaW5zP2MuY29udGFpbnMoZCk6YS5jb21wYXJlRG9jdW1lbnRQb3NpdGlvbiYmMTYmYS5jb21wYXJlRG9jdW1lbnRQb3NpdGlvbihkKSkpfTpmdW5jdGlvbihhLGIpe2lmKGIpd2hpbGUoYj1iLnBhcmVudE5vZGUpaWYoYj09PWEpcmV0dXJuITA7cmV0dXJuITF9LEI9Yj9mdW5jdGlvbihhLGIpe2lmKGE9PT1iKXJldHVybiBsPSEwLDA7dmFyIGQ9IWEuY29tcGFyZURvY3VtZW50UG9zaXRpb24tIWIuY29tcGFyZURvY3VtZW50UG9zaXRpb247cmV0dXJuIGQ/ZDooZD0oYS5vd25lckRvY3VtZW50fHxhKT09PShiLm93bmVyRG9jdW1lbnR8fGIpP2EuY29tcGFyZURvY3VtZW50UG9zaXRpb24oYik6MSwxJmR8fCFjLnNvcnREZXRhY2hlZCYmYi5jb21wYXJlRG9jdW1lbnRQb3NpdGlvbihhKT09PWQ/YT09PWd8fGEub3duZXJEb2N1bWVudD09PXYmJnQodixhKT8tMTpiPT09Z3x8Yi5vd25lckRvY3VtZW50PT09diYmdCh2LGIpPzE6az9KKGssYSktSihrLGIpOjA6NCZkPy0xOjEpfTpmdW5jdGlvbihhLGIpe2lmKGE9PT1iKXJldHVybiBsPSEwLDA7dmFyIGMsZD0wLGU9YS5wYXJlbnROb2RlLGY9Yi5wYXJlbnROb2RlLGg9W2FdLGk9W2JdO2lmKCFlfHwhZilyZXR1cm4gYT09PWc/LTE6Yj09PWc/MTplPy0xOmY/MTprP0ooayxhKS1KKGssYik6MDtpZihlPT09ZilyZXR1cm4gbGIoYSxiKTtjPWE7d2hpbGUoYz1jLnBhcmVudE5vZGUpaC51bnNoaWZ0KGMpO2M9Yjt3aGlsZShjPWMucGFyZW50Tm9kZSlpLnVuc2hpZnQoYyk7d2hpbGUoaFtkXT09PWlbZF0pZCsrO3JldHVybiBkP2xiKGhbZF0saVtkXSk6aFtkXT09PXY/LTE6aVtkXT09PXY/MTowfSxnKTpufSxnYi5tYXRjaGVzPWZ1bmN0aW9uKGEsYil7cmV0dXJuIGdiKGEsbnVsbCxudWxsLGIpfSxnYi5tYXRjaGVzU2VsZWN0b3I9ZnVuY3Rpb24oYSxiKXtpZigoYS5vd25lckRvY3VtZW50fHxhKSE9PW4mJm0oYSksYj1iLnJlcGxhY2UoVSxcIj0nJDEnXVwiKSwhKCFjLm1hdGNoZXNTZWxlY3Rvcnx8IXB8fHImJnIudGVzdChiKXx8cSYmcS50ZXN0KGIpKSl0cnl7dmFyIGQ9cy5jYWxsKGEsYik7aWYoZHx8Yy5kaXNjb25uZWN0ZWRNYXRjaHx8YS5kb2N1bWVudCYmMTEhPT1hLmRvY3VtZW50Lm5vZGVUeXBlKXJldHVybiBkfWNhdGNoKGUpe31yZXR1cm4gZ2IoYixuLG51bGwsW2FdKS5sZW5ndGg+MH0sZ2IuY29udGFpbnM9ZnVuY3Rpb24oYSxiKXtyZXR1cm4oYS5vd25lckRvY3VtZW50fHxhKSE9PW4mJm0oYSksdChhLGIpfSxnYi5hdHRyPWZ1bmN0aW9uKGEsYil7KGEub3duZXJEb2N1bWVudHx8YSkhPT1uJiZtKGEpO3ZhciBlPWQuYXR0ckhhbmRsZVtiLnRvTG93ZXJDYXNlKCldLGY9ZSYmRC5jYWxsKGQuYXR0ckhhbmRsZSxiLnRvTG93ZXJDYXNlKCkpP2UoYSxiLCFwKTp2b2lkIDA7cmV0dXJuIHZvaWQgMCE9PWY/ZjpjLmF0dHJpYnV0ZXN8fCFwP2EuZ2V0QXR0cmlidXRlKGIpOihmPWEuZ2V0QXR0cmlidXRlTm9kZShiKSkmJmYuc3BlY2lmaWVkP2YudmFsdWU6bnVsbH0sZ2IuZXJyb3I9ZnVuY3Rpb24oYSl7dGhyb3cgbmV3IEVycm9yKFwiU3ludGF4IGVycm9yLCB1bnJlY29nbml6ZWQgZXhwcmVzc2lvbjogXCIrYSl9LGdiLnVuaXF1ZVNvcnQ9ZnVuY3Rpb24oYSl7dmFyIGIsZD1bXSxlPTAsZj0wO2lmKGw9IWMuZGV0ZWN0RHVwbGljYXRlcyxrPSFjLnNvcnRTdGFibGUmJmEuc2xpY2UoMCksYS5zb3J0KEIpLGwpe3doaWxlKGI9YVtmKytdKWI9PT1hW2ZdJiYoZT1kLnB1c2goZikpO3doaWxlKGUtLSlhLnNwbGljZShkW2VdLDEpfXJldHVybiBrPW51bGwsYX0sZT1nYi5nZXRUZXh0PWZ1bmN0aW9uKGEpe3ZhciBiLGM9XCJcIixkPTAsZj1hLm5vZGVUeXBlO2lmKGYpe2lmKDE9PT1mfHw5PT09Znx8MTE9PT1mKXtpZihcInN0cmluZ1wiPT10eXBlb2YgYS50ZXh0Q29udGVudClyZXR1cm4gYS50ZXh0Q29udGVudDtmb3IoYT1hLmZpcnN0Q2hpbGQ7YTthPWEubmV4dFNpYmxpbmcpYys9ZShhKX1lbHNlIGlmKDM9PT1mfHw0PT09ZilyZXR1cm4gYS5ub2RlVmFsdWV9ZWxzZSB3aGlsZShiPWFbZCsrXSljKz1lKGIpO3JldHVybiBjfSxkPWdiLnNlbGVjdG9ycz17Y2FjaGVMZW5ndGg6NTAsY3JlYXRlUHNldWRvOmliLG1hdGNoOlgsYXR0ckhhbmRsZTp7fSxmaW5kOnt9LHJlbGF0aXZlOntcIj5cIjp7ZGlyOlwicGFyZW50Tm9kZVwiLGZpcnN0OiEwfSxcIiBcIjp7ZGlyOlwicGFyZW50Tm9kZVwifSxcIitcIjp7ZGlyOlwicHJldmlvdXNTaWJsaW5nXCIsZmlyc3Q6ITB9LFwiflwiOntkaXI6XCJwcmV2aW91c1NpYmxpbmdcIn19LHByZUZpbHRlcjp7QVRUUjpmdW5jdGlvbihhKXtyZXR1cm4gYVsxXT1hWzFdLnJlcGxhY2UoY2IsZGIpLGFbM109KGFbM118fGFbNF18fGFbNV18fFwiXCIpLnJlcGxhY2UoY2IsZGIpLFwifj1cIj09PWFbMl0mJihhWzNdPVwiIFwiK2FbM10rXCIgXCIpLGEuc2xpY2UoMCw0KX0sQ0hJTEQ6ZnVuY3Rpb24oYSl7cmV0dXJuIGFbMV09YVsxXS50b0xvd2VyQ2FzZSgpLFwibnRoXCI9PT1hWzFdLnNsaWNlKDAsMyk/KGFbM118fGdiLmVycm9yKGFbMF0pLGFbNF09KyhhWzRdP2FbNV0rKGFbNl18fDEpOjIqKFwiZXZlblwiPT09YVszXXx8XCJvZGRcIj09PWFbM10pKSxhWzVdPSsoYVs3XSthWzhdfHxcIm9kZFwiPT09YVszXSkpOmFbM10mJmdiLmVycm9yKGFbMF0pLGF9LFBTRVVETzpmdW5jdGlvbihhKXt2YXIgYixjPSFhWzZdJiZhWzJdO3JldHVybiBYLkNISUxELnRlc3QoYVswXSk/bnVsbDooYVszXT9hWzJdPWFbNF18fGFbNV18fFwiXCI6YyYmVi50ZXN0KGMpJiYoYj1nKGMsITApKSYmKGI9Yy5pbmRleE9mKFwiKVwiLGMubGVuZ3RoLWIpLWMubGVuZ3RoKSYmKGFbMF09YVswXS5zbGljZSgwLGIpLGFbMl09Yy5zbGljZSgwLGIpKSxhLnNsaWNlKDAsMykpfX0sZmlsdGVyOntUQUc6ZnVuY3Rpb24oYSl7dmFyIGI9YS5yZXBsYWNlKGNiLGRiKS50b0xvd2VyQ2FzZSgpO3JldHVyblwiKlwiPT09YT9mdW5jdGlvbigpe3JldHVybiEwfTpmdW5jdGlvbihhKXtyZXR1cm4gYS5ub2RlTmFtZSYmYS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpPT09Yn19LENMQVNTOmZ1bmN0aW9uKGEpe3ZhciBiPXlbYStcIiBcIl07cmV0dXJuIGJ8fChiPW5ldyBSZWdFeHAoXCIoXnxcIitMK1wiKVwiK2ErXCIoXCIrTCtcInwkKVwiKSkmJnkoYSxmdW5jdGlvbihhKXtyZXR1cm4gYi50ZXN0KFwic3RyaW5nXCI9PXR5cGVvZiBhLmNsYXNzTmFtZSYmYS5jbGFzc05hbWV8fFwidW5kZWZpbmVkXCIhPXR5cGVvZiBhLmdldEF0dHJpYnV0ZSYmYS5nZXRBdHRyaWJ1dGUoXCJjbGFzc1wiKXx8XCJcIil9KX0sQVRUUjpmdW5jdGlvbihhLGIsYyl7cmV0dXJuIGZ1bmN0aW9uKGQpe3ZhciBlPWdiLmF0dHIoZCxhKTtyZXR1cm4gbnVsbD09ZT9cIiE9XCI9PT1iOmI/KGUrPVwiXCIsXCI9XCI9PT1iP2U9PT1jOlwiIT1cIj09PWI/ZSE9PWM6XCJePVwiPT09Yj9jJiYwPT09ZS5pbmRleE9mKGMpOlwiKj1cIj09PWI/YyYmZS5pbmRleE9mKGMpPi0xOlwiJD1cIj09PWI/YyYmZS5zbGljZSgtYy5sZW5ndGgpPT09YzpcIn49XCI9PT1iPyhcIiBcIitlLnJlcGxhY2UoUSxcIiBcIikrXCIgXCIpLmluZGV4T2YoYyk+LTE6XCJ8PVwiPT09Yj9lPT09Y3x8ZS5zbGljZSgwLGMubGVuZ3RoKzEpPT09YytcIi1cIjohMSk6ITB9fSxDSElMRDpmdW5jdGlvbihhLGIsYyxkLGUpe3ZhciBmPVwibnRoXCIhPT1hLnNsaWNlKDAsMyksZz1cImxhc3RcIiE9PWEuc2xpY2UoLTQpLGg9XCJvZi10eXBlXCI9PT1iO3JldHVybiAxPT09ZCYmMD09PWU/ZnVuY3Rpb24oYSl7cmV0dXJuISFhLnBhcmVudE5vZGV9OmZ1bmN0aW9uKGIsYyxpKXt2YXIgaixrLGwsbSxuLG8scD1mIT09Zz9cIm5leHRTaWJsaW5nXCI6XCJwcmV2aW91c1NpYmxpbmdcIixxPWIucGFyZW50Tm9kZSxyPWgmJmIubm9kZU5hbWUudG9Mb3dlckNhc2UoKSxzPSFpJiYhaDtpZihxKXtpZihmKXt3aGlsZShwKXtsPWI7d2hpbGUobD1sW3BdKWlmKGg/bC5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpPT09cjoxPT09bC5ub2RlVHlwZSlyZXR1cm4hMTtvPXA9XCJvbmx5XCI9PT1hJiYhbyYmXCJuZXh0U2libGluZ1wifXJldHVybiEwfWlmKG89W2c/cS5maXJzdENoaWxkOnEubGFzdENoaWxkXSxnJiZzKXtrPXFbdV18fChxW3VdPXt9KSxqPWtbYV18fFtdLG49alswXT09PXcmJmpbMV0sbT1qWzBdPT09dyYmalsyXSxsPW4mJnEuY2hpbGROb2Rlc1tuXTt3aGlsZShsPSsrbiYmbCYmbFtwXXx8KG09bj0wKXx8by5wb3AoKSlpZigxPT09bC5ub2RlVHlwZSYmKyttJiZsPT09Yil7a1thXT1bdyxuLG1dO2JyZWFrfX1lbHNlIGlmKHMmJihqPShiW3VdfHwoYlt1XT17fSkpW2FdKSYmalswXT09PXcpbT1qWzFdO2Vsc2Ugd2hpbGUobD0rK24mJmwmJmxbcF18fChtPW49MCl8fG8ucG9wKCkpaWYoKGg/bC5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpPT09cjoxPT09bC5ub2RlVHlwZSkmJisrbSYmKHMmJigobFt1XXx8KGxbdV09e30pKVthXT1bdyxtXSksbD09PWIpKWJyZWFrO3JldHVybiBtLT1lLG09PT1kfHxtJWQ9PT0wJiZtL2Q+PTB9fX0sUFNFVURPOmZ1bmN0aW9uKGEsYil7dmFyIGMsZT1kLnBzZXVkb3NbYV18fGQuc2V0RmlsdGVyc1thLnRvTG93ZXJDYXNlKCldfHxnYi5lcnJvcihcInVuc3VwcG9ydGVkIHBzZXVkbzogXCIrYSk7cmV0dXJuIGVbdV0/ZShiKTplLmxlbmd0aD4xPyhjPVthLGEsXCJcIixiXSxkLnNldEZpbHRlcnMuaGFzT3duUHJvcGVydHkoYS50b0xvd2VyQ2FzZSgpKT9pYihmdW5jdGlvbihhLGMpe3ZhciBkLGY9ZShhLGIpLGc9Zi5sZW5ndGg7d2hpbGUoZy0tKWQ9SihhLGZbZ10pLGFbZF09IShjW2RdPWZbZ10pfSk6ZnVuY3Rpb24oYSl7cmV0dXJuIGUoYSwwLGMpfSk6ZX19LHBzZXVkb3M6e25vdDppYihmdW5jdGlvbihhKXt2YXIgYj1bXSxjPVtdLGQ9aChhLnJlcGxhY2UoUixcIiQxXCIpKTtyZXR1cm4gZFt1XT9pYihmdW5jdGlvbihhLGIsYyxlKXt2YXIgZixnPWQoYSxudWxsLGUsW10pLGg9YS5sZW5ndGg7d2hpbGUoaC0tKShmPWdbaF0pJiYoYVtoXT0hKGJbaF09ZikpfSk6ZnVuY3Rpb24oYSxlLGYpe3JldHVybiBiWzBdPWEsZChiLG51bGwsZixjKSxiWzBdPW51bGwsIWMucG9wKCl9fSksaGFzOmliKGZ1bmN0aW9uKGEpe3JldHVybiBmdW5jdGlvbihiKXtyZXR1cm4gZ2IoYSxiKS5sZW5ndGg+MH19KSxjb250YWluczppYihmdW5jdGlvbihhKXtyZXR1cm4gYT1hLnJlcGxhY2UoY2IsZGIpLGZ1bmN0aW9uKGIpe3JldHVybihiLnRleHRDb250ZW50fHxiLmlubmVyVGV4dHx8ZShiKSkuaW5kZXhPZihhKT4tMX19KSxsYW5nOmliKGZ1bmN0aW9uKGEpe3JldHVybiBXLnRlc3QoYXx8XCJcIil8fGdiLmVycm9yKFwidW5zdXBwb3J0ZWQgbGFuZzogXCIrYSksYT1hLnJlcGxhY2UoY2IsZGIpLnRvTG93ZXJDYXNlKCksZnVuY3Rpb24oYil7dmFyIGM7ZG8gaWYoYz1wP2IubGFuZzpiLmdldEF0dHJpYnV0ZShcInhtbDpsYW5nXCIpfHxiLmdldEF0dHJpYnV0ZShcImxhbmdcIikpcmV0dXJuIGM9Yy50b0xvd2VyQ2FzZSgpLGM9PT1hfHwwPT09Yy5pbmRleE9mKGErXCItXCIpO3doaWxlKChiPWIucGFyZW50Tm9kZSkmJjE9PT1iLm5vZGVUeXBlKTtyZXR1cm4hMX19KSx0YXJnZXQ6ZnVuY3Rpb24oYil7dmFyIGM9YS5sb2NhdGlvbiYmYS5sb2NhdGlvbi5oYXNoO3JldHVybiBjJiZjLnNsaWNlKDEpPT09Yi5pZH0scm9vdDpmdW5jdGlvbihhKXtyZXR1cm4gYT09PW99LGZvY3VzOmZ1bmN0aW9uKGEpe3JldHVybiBhPT09bi5hY3RpdmVFbGVtZW50JiYoIW4uaGFzRm9jdXN8fG4uaGFzRm9jdXMoKSkmJiEhKGEudHlwZXx8YS5ocmVmfHx+YS50YWJJbmRleCl9LGVuYWJsZWQ6ZnVuY3Rpb24oYSl7cmV0dXJuIGEuZGlzYWJsZWQ9PT0hMX0sZGlzYWJsZWQ6ZnVuY3Rpb24oYSl7cmV0dXJuIGEuZGlzYWJsZWQ9PT0hMH0sY2hlY2tlZDpmdW5jdGlvbihhKXt2YXIgYj1hLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCk7cmV0dXJuXCJpbnB1dFwiPT09YiYmISFhLmNoZWNrZWR8fFwib3B0aW9uXCI9PT1iJiYhIWEuc2VsZWN0ZWR9LHNlbGVjdGVkOmZ1bmN0aW9uKGEpe3JldHVybiBhLnBhcmVudE5vZGUmJmEucGFyZW50Tm9kZS5zZWxlY3RlZEluZGV4LGEuc2VsZWN0ZWQ9PT0hMH0sZW1wdHk6ZnVuY3Rpb24oYSl7Zm9yKGE9YS5maXJzdENoaWxkO2E7YT1hLm5leHRTaWJsaW5nKWlmKGEubm9kZVR5cGU8NilyZXR1cm4hMTtyZXR1cm4hMH0scGFyZW50OmZ1bmN0aW9uKGEpe3JldHVybiFkLnBzZXVkb3MuZW1wdHkoYSl9LGhlYWRlcjpmdW5jdGlvbihhKXtyZXR1cm4gWi50ZXN0KGEubm9kZU5hbWUpfSxpbnB1dDpmdW5jdGlvbihhKXtyZXR1cm4gWS50ZXN0KGEubm9kZU5hbWUpfSxidXR0b246ZnVuY3Rpb24oYSl7dmFyIGI9YS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpO3JldHVyblwiaW5wdXRcIj09PWImJlwiYnV0dG9uXCI9PT1hLnR5cGV8fFwiYnV0dG9uXCI9PT1ifSx0ZXh0OmZ1bmN0aW9uKGEpe3ZhciBiO3JldHVyblwiaW5wdXRcIj09PWEubm9kZU5hbWUudG9Mb3dlckNhc2UoKSYmXCJ0ZXh0XCI9PT1hLnR5cGUmJihudWxsPT0oYj1hLmdldEF0dHJpYnV0ZShcInR5cGVcIikpfHxcInRleHRcIj09PWIudG9Mb3dlckNhc2UoKSl9LGZpcnN0Om9iKGZ1bmN0aW9uKCl7cmV0dXJuWzBdfSksbGFzdDpvYihmdW5jdGlvbihhLGIpe3JldHVybltiLTFdfSksZXE6b2IoZnVuY3Rpb24oYSxiLGMpe3JldHVyblswPmM/YytiOmNdfSksZXZlbjpvYihmdW5jdGlvbihhLGIpe2Zvcih2YXIgYz0wO2I+YztjKz0yKWEucHVzaChjKTtyZXR1cm4gYX0pLG9kZDpvYihmdW5jdGlvbihhLGIpe2Zvcih2YXIgYz0xO2I+YztjKz0yKWEucHVzaChjKTtyZXR1cm4gYX0pLGx0Om9iKGZ1bmN0aW9uKGEsYixjKXtmb3IodmFyIGQ9MD5jP2MrYjpjOy0tZD49MDspYS5wdXNoKGQpO3JldHVybiBhfSksZ3Q6b2IoZnVuY3Rpb24oYSxiLGMpe2Zvcih2YXIgZD0wPmM/YytiOmM7KytkPGI7KWEucHVzaChkKTtyZXR1cm4gYX0pfX0sZC5wc2V1ZG9zLm50aD1kLnBzZXVkb3MuZXE7Zm9yKGIgaW57cmFkaW86ITAsY2hlY2tib3g6ITAsZmlsZTohMCxwYXNzd29yZDohMCxpbWFnZTohMH0pZC5wc2V1ZG9zW2JdPW1iKGIpO2ZvcihiIGlue3N1Ym1pdDohMCxyZXNldDohMH0pZC5wc2V1ZG9zW2JdPW5iKGIpO2Z1bmN0aW9uIHFiKCl7fXFiLnByb3RvdHlwZT1kLmZpbHRlcnM9ZC5wc2V1ZG9zLGQuc2V0RmlsdGVycz1uZXcgcWIsZz1nYi50b2tlbml6ZT1mdW5jdGlvbihhLGIpe3ZhciBjLGUsZixnLGgsaSxqLGs9elthK1wiIFwiXTtpZihrKXJldHVybiBiPzA6ay5zbGljZSgwKTtoPWEsaT1bXSxqPWQucHJlRmlsdGVyO3doaWxlKGgpeyghY3x8KGU9Uy5leGVjKGgpKSkmJihlJiYoaD1oLnNsaWNlKGVbMF0ubGVuZ3RoKXx8aCksaS5wdXNoKGY9W10pKSxjPSExLChlPVQuZXhlYyhoKSkmJihjPWUuc2hpZnQoKSxmLnB1c2goe3ZhbHVlOmMsdHlwZTplWzBdLnJlcGxhY2UoUixcIiBcIil9KSxoPWguc2xpY2UoYy5sZW5ndGgpKTtmb3IoZyBpbiBkLmZpbHRlcikhKGU9WFtnXS5leGVjKGgpKXx8altnXSYmIShlPWpbZ10oZSkpfHwoYz1lLnNoaWZ0KCksZi5wdXNoKHt2YWx1ZTpjLHR5cGU6ZyxtYXRjaGVzOmV9KSxoPWguc2xpY2UoYy5sZW5ndGgpKTtpZighYylicmVha31yZXR1cm4gYj9oLmxlbmd0aDpoP2diLmVycm9yKGEpOnooYSxpKS5zbGljZSgwKX07ZnVuY3Rpb24gcmIoYSl7Zm9yKHZhciBiPTAsYz1hLmxlbmd0aCxkPVwiXCI7Yz5iO2IrKylkKz1hW2JdLnZhbHVlO3JldHVybiBkfWZ1bmN0aW9uIHNiKGEsYixjKXt2YXIgZD1iLmRpcixlPWMmJlwicGFyZW50Tm9kZVwiPT09ZCxmPXgrKztyZXR1cm4gYi5maXJzdD9mdW5jdGlvbihiLGMsZil7d2hpbGUoYj1iW2RdKWlmKDE9PT1iLm5vZGVUeXBlfHxlKXJldHVybiBhKGIsYyxmKX06ZnVuY3Rpb24oYixjLGcpe3ZhciBoLGksaj1bdyxmXTtpZihnKXt3aGlsZShiPWJbZF0paWYoKDE9PT1iLm5vZGVUeXBlfHxlKSYmYShiLGMsZykpcmV0dXJuITB9ZWxzZSB3aGlsZShiPWJbZF0paWYoMT09PWIubm9kZVR5cGV8fGUpe2lmKGk9Ylt1XXx8KGJbdV09e30pLChoPWlbZF0pJiZoWzBdPT09dyYmaFsxXT09PWYpcmV0dXJuIGpbMl09aFsyXTtpZihpW2RdPWosalsyXT1hKGIsYyxnKSlyZXR1cm4hMH19fWZ1bmN0aW9uIHRiKGEpe3JldHVybiBhLmxlbmd0aD4xP2Z1bmN0aW9uKGIsYyxkKXt2YXIgZT1hLmxlbmd0aDt3aGlsZShlLS0paWYoIWFbZV0oYixjLGQpKXJldHVybiExO3JldHVybiEwfTphWzBdfWZ1bmN0aW9uIHViKGEsYixjKXtmb3IodmFyIGQ9MCxlPWIubGVuZ3RoO2U+ZDtkKyspZ2IoYSxiW2RdLGMpO3JldHVybiBjfWZ1bmN0aW9uIHZiKGEsYixjLGQsZSl7Zm9yKHZhciBmLGc9W10saD0wLGk9YS5sZW5ndGgsaj1udWxsIT1iO2k+aDtoKyspKGY9YVtoXSkmJighY3x8YyhmLGQsZSkpJiYoZy5wdXNoKGYpLGomJmIucHVzaChoKSk7cmV0dXJuIGd9ZnVuY3Rpb24gd2IoYSxiLGMsZCxlLGYpe3JldHVybiBkJiYhZFt1XSYmKGQ9d2IoZCkpLGUmJiFlW3VdJiYoZT13YihlLGYpKSxpYihmdW5jdGlvbihmLGcsaCxpKXt2YXIgaixrLGwsbT1bXSxuPVtdLG89Zy5sZW5ndGgscD1mfHx1YihifHxcIipcIixoLm5vZGVUeXBlP1toXTpoLFtdKSxxPSFhfHwhZiYmYj9wOnZiKHAsbSxhLGgsaSkscj1jP2V8fChmP2E6b3x8ZCk/W106ZzpxO2lmKGMmJmMocSxyLGgsaSksZCl7aj12YihyLG4pLGQoaixbXSxoLGkpLGs9ai5sZW5ndGg7d2hpbGUoay0tKShsPWpba10pJiYocltuW2tdXT0hKHFbbltrXV09bCkpfWlmKGYpe2lmKGV8fGEpe2lmKGUpe2o9W10saz1yLmxlbmd0aDt3aGlsZShrLS0pKGw9cltrXSkmJmoucHVzaChxW2tdPWwpO2UobnVsbCxyPVtdLGosaSl9az1yLmxlbmd0aDt3aGlsZShrLS0pKGw9cltrXSkmJihqPWU/SihmLGwpOm1ba10pPi0xJiYoZltqXT0hKGdbal09bCkpfX1lbHNlIHI9dmIocj09PWc/ci5zcGxpY2UobyxyLmxlbmd0aCk6ciksZT9lKG51bGwsZyxyLGkpOkguYXBwbHkoZyxyKX0pfWZ1bmN0aW9uIHhiKGEpe2Zvcih2YXIgYixjLGUsZj1hLmxlbmd0aCxnPWQucmVsYXRpdmVbYVswXS50eXBlXSxoPWd8fGQucmVsYXRpdmVbXCIgXCJdLGk9Zz8xOjAsaz1zYihmdW5jdGlvbihhKXtyZXR1cm4gYT09PWJ9LGgsITApLGw9c2IoZnVuY3Rpb24oYSl7cmV0dXJuIEooYixhKT4tMX0saCwhMCksbT1bZnVuY3Rpb24oYSxjLGQpe3ZhciBlPSFnJiYoZHx8YyE9PWopfHwoKGI9Yykubm9kZVR5cGU/ayhhLGMsZCk6bChhLGMsZCkpO3JldHVybiBiPW51bGwsZX1dO2Y+aTtpKyspaWYoYz1kLnJlbGF0aXZlW2FbaV0udHlwZV0pbT1bc2IodGIobSksYyldO2Vsc2V7aWYoYz1kLmZpbHRlclthW2ldLnR5cGVdLmFwcGx5KG51bGwsYVtpXS5tYXRjaGVzKSxjW3VdKXtmb3IoZT0rK2k7Zj5lO2UrKylpZihkLnJlbGF0aXZlW2FbZV0udHlwZV0pYnJlYWs7cmV0dXJuIHdiKGk+MSYmdGIobSksaT4xJiZyYihhLnNsaWNlKDAsaS0xKS5jb25jYXQoe3ZhbHVlOlwiIFwiPT09YVtpLTJdLnR5cGU/XCIqXCI6XCJcIn0pKS5yZXBsYWNlKFIsXCIkMVwiKSxjLGU+aSYmeGIoYS5zbGljZShpLGUpKSxmPmUmJnhiKGE9YS5zbGljZShlKSksZj5lJiZyYihhKSl9bS5wdXNoKGMpfXJldHVybiB0YihtKX1mdW5jdGlvbiB5YihhLGIpe3ZhciBjPWIubGVuZ3RoPjAsZT1hLmxlbmd0aD4wLGY9ZnVuY3Rpb24oZixnLGgsaSxrKXt2YXIgbCxtLG8scD0wLHE9XCIwXCIscj1mJiZbXSxzPVtdLHQ9aix1PWZ8fGUmJmQuZmluZC5UQUcoXCIqXCIsayksdj13Kz1udWxsPT10PzE6TWF0aC5yYW5kb20oKXx8LjEseD11Lmxlbmd0aDtmb3IoayYmKGo9ZyE9PW4mJmcpO3EhPT14JiZudWxsIT0obD11W3FdKTtxKyspe2lmKGUmJmwpe209MDt3aGlsZShvPWFbbSsrXSlpZihvKGwsZyxoKSl7aS5wdXNoKGwpO2JyZWFrfWsmJih3PXYpfWMmJigobD0hbyYmbCkmJnAtLSxmJiZyLnB1c2gobCkpfWlmKHArPXEsYyYmcSE9PXApe209MDt3aGlsZShvPWJbbSsrXSlvKHIscyxnLGgpO2lmKGYpe2lmKHA+MCl3aGlsZShxLS0pcltxXXx8c1txXXx8KHNbcV09Ri5jYWxsKGkpKTtzPXZiKHMpfUguYXBwbHkoaSxzKSxrJiYhZiYmcy5sZW5ndGg+MCYmcCtiLmxlbmd0aD4xJiZnYi51bmlxdWVTb3J0KGkpfXJldHVybiBrJiYodz12LGo9dCkscn07cmV0dXJuIGM/aWIoZik6Zn1yZXR1cm4gaD1nYi5jb21waWxlPWZ1bmN0aW9uKGEsYil7dmFyIGMsZD1bXSxlPVtdLGY9QVthK1wiIFwiXTtpZighZil7Ynx8KGI9ZyhhKSksYz1iLmxlbmd0aDt3aGlsZShjLS0pZj14YihiW2NdKSxmW3VdP2QucHVzaChmKTplLnB1c2goZik7Zj1BKGEseWIoZSxkKSksZi5zZWxlY3Rvcj1hfXJldHVybiBmfSxpPWdiLnNlbGVjdD1mdW5jdGlvbihhLGIsZSxmKXt2YXIgaSxqLGssbCxtLG49XCJmdW5jdGlvblwiPT10eXBlb2YgYSYmYSxvPSFmJiZnKGE9bi5zZWxlY3Rvcnx8YSk7aWYoZT1lfHxbXSwxPT09by5sZW5ndGgpe2lmKGo9b1swXT1vWzBdLnNsaWNlKDApLGoubGVuZ3RoPjImJlwiSURcIj09PShrPWpbMF0pLnR5cGUmJmMuZ2V0QnlJZCYmOT09PWIubm9kZVR5cGUmJnAmJmQucmVsYXRpdmVbalsxXS50eXBlXSl7aWYoYj0oZC5maW5kLklEKGsubWF0Y2hlc1swXS5yZXBsYWNlKGNiLGRiKSxiKXx8W10pWzBdLCFiKXJldHVybiBlO24mJihiPWIucGFyZW50Tm9kZSksYT1hLnNsaWNlKGouc2hpZnQoKS52YWx1ZS5sZW5ndGgpfWk9WC5uZWVkc0NvbnRleHQudGVzdChhKT8wOmoubGVuZ3RoO3doaWxlKGktLSl7aWYoaz1qW2ldLGQucmVsYXRpdmVbbD1rLnR5cGVdKWJyZWFrO2lmKChtPWQuZmluZFtsXSkmJihmPW0oay5tYXRjaGVzWzBdLnJlcGxhY2UoY2IsZGIpLGFiLnRlc3QoalswXS50eXBlKSYmcGIoYi5wYXJlbnROb2RlKXx8YikpKXtpZihqLnNwbGljZShpLDEpLGE9Zi5sZW5ndGgmJnJiKGopLCFhKXJldHVybiBILmFwcGx5KGUsZiksZTticmVha319fXJldHVybihufHxoKGEsbykpKGYsYiwhcCxlLGFiLnRlc3QoYSkmJnBiKGIucGFyZW50Tm9kZSl8fGIpLGV9LGMuc29ydFN0YWJsZT11LnNwbGl0KFwiXCIpLnNvcnQoQikuam9pbihcIlwiKT09PXUsYy5kZXRlY3REdXBsaWNhdGVzPSEhbCxtKCksYy5zb3J0RGV0YWNoZWQ9amIoZnVuY3Rpb24oYSl7cmV0dXJuIDEmYS5jb21wYXJlRG9jdW1lbnRQb3NpdGlvbihuLmNyZWF0ZUVsZW1lbnQoXCJkaXZcIikpfSksamIoZnVuY3Rpb24oYSl7cmV0dXJuIGEuaW5uZXJIVE1MPVwiPGEgaHJlZj0nIyc+PC9hPlwiLFwiI1wiPT09YS5maXJzdENoaWxkLmdldEF0dHJpYnV0ZShcImhyZWZcIil9KXx8a2IoXCJ0eXBlfGhyZWZ8aGVpZ2h0fHdpZHRoXCIsZnVuY3Rpb24oYSxiLGMpe3JldHVybiBjP3ZvaWQgMDphLmdldEF0dHJpYnV0ZShiLFwidHlwZVwiPT09Yi50b0xvd2VyQ2FzZSgpPzE6Mil9KSxjLmF0dHJpYnV0ZXMmJmpiKGZ1bmN0aW9uKGEpe3JldHVybiBhLmlubmVySFRNTD1cIjxpbnB1dC8+XCIsYS5maXJzdENoaWxkLnNldEF0dHJpYnV0ZShcInZhbHVlXCIsXCJcIiksXCJcIj09PWEuZmlyc3RDaGlsZC5nZXRBdHRyaWJ1dGUoXCJ2YWx1ZVwiKX0pfHxrYihcInZhbHVlXCIsZnVuY3Rpb24oYSxiLGMpe3JldHVybiBjfHxcImlucHV0XCIhPT1hLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCk/dm9pZCAwOmEuZGVmYXVsdFZhbHVlfSksamIoZnVuY3Rpb24oYSl7cmV0dXJuIG51bGw9PWEuZ2V0QXR0cmlidXRlKFwiZGlzYWJsZWRcIil9KXx8a2IoSyxmdW5jdGlvbihhLGIsYyl7dmFyIGQ7cmV0dXJuIGM/dm9pZCAwOmFbYl09PT0hMD9iLnRvTG93ZXJDYXNlKCk6KGQ9YS5nZXRBdHRyaWJ1dGVOb2RlKGIpKSYmZC5zcGVjaWZpZWQ/ZC52YWx1ZTpudWxsfSksZ2J9KGEpO20uZmluZD1zLG0uZXhwcj1zLnNlbGVjdG9ycyxtLmV4cHJbXCI6XCJdPW0uZXhwci5wc2V1ZG9zLG0udW5pcXVlPXMudW5pcXVlU29ydCxtLnRleHQ9cy5nZXRUZXh0LG0uaXNYTUxEb2M9cy5pc1hNTCxtLmNvbnRhaW5zPXMuY29udGFpbnM7dmFyIHQ9bS5leHByLm1hdGNoLm5lZWRzQ29udGV4dCx1PS9ePChcXHcrKVxccypcXC8/Pig/OjxcXC9cXDE+fCkkLyx2PS9eLlteOiNcXFtcXC4sXSokLztmdW5jdGlvbiB3KGEsYixjKXtpZihtLmlzRnVuY3Rpb24oYikpcmV0dXJuIG0uZ3JlcChhLGZ1bmN0aW9uKGEsZCl7cmV0dXJuISFiLmNhbGwoYSxkLGEpIT09Y30pO2lmKGIubm9kZVR5cGUpcmV0dXJuIG0uZ3JlcChhLGZ1bmN0aW9uKGEpe3JldHVybiBhPT09YiE9PWN9KTtpZihcInN0cmluZ1wiPT10eXBlb2YgYil7aWYodi50ZXN0KGIpKXJldHVybiBtLmZpbHRlcihiLGEsYyk7Yj1tLmZpbHRlcihiLGEpfXJldHVybiBtLmdyZXAoYSxmdW5jdGlvbihhKXtyZXR1cm4gbS5pbkFycmF5KGEsYik+PTAhPT1jfSl9bS5maWx0ZXI9ZnVuY3Rpb24oYSxiLGMpe3ZhciBkPWJbMF07cmV0dXJuIGMmJihhPVwiOm5vdChcIithK1wiKVwiKSwxPT09Yi5sZW5ndGgmJjE9PT1kLm5vZGVUeXBlP20uZmluZC5tYXRjaGVzU2VsZWN0b3IoZCxhKT9bZF06W106bS5maW5kLm1hdGNoZXMoYSxtLmdyZXAoYixmdW5jdGlvbihhKXtyZXR1cm4gMT09PWEubm9kZVR5cGV9KSl9LG0uZm4uZXh0ZW5kKHtmaW5kOmZ1bmN0aW9uKGEpe3ZhciBiLGM9W10sZD10aGlzLGU9ZC5sZW5ndGg7aWYoXCJzdHJpbmdcIiE9dHlwZW9mIGEpcmV0dXJuIHRoaXMucHVzaFN0YWNrKG0oYSkuZmlsdGVyKGZ1bmN0aW9uKCl7Zm9yKGI9MDtlPmI7YisrKWlmKG0uY29udGFpbnMoZFtiXSx0aGlzKSlyZXR1cm4hMH0pKTtmb3IoYj0wO2U+YjtiKyspbS5maW5kKGEsZFtiXSxjKTtyZXR1cm4gYz10aGlzLnB1c2hTdGFjayhlPjE/bS51bmlxdWUoYyk6YyksYy5zZWxlY3Rvcj10aGlzLnNlbGVjdG9yP3RoaXMuc2VsZWN0b3IrXCIgXCIrYTphLGN9LGZpbHRlcjpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5wdXNoU3RhY2sodyh0aGlzLGF8fFtdLCExKSl9LG5vdDpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5wdXNoU3RhY2sodyh0aGlzLGF8fFtdLCEwKSl9LGlzOmZ1bmN0aW9uKGEpe3JldHVybiEhdyh0aGlzLFwic3RyaW5nXCI9PXR5cGVvZiBhJiZ0LnRlc3QoYSk/bShhKTphfHxbXSwhMSkubGVuZ3RofX0pO3ZhciB4LHk9YS5kb2N1bWVudCx6PS9eKD86XFxzKig8W1xcd1xcV10rPilbXj5dKnwjKFtcXHctXSopKSQvLEE9bS5mbi5pbml0PWZ1bmN0aW9uKGEsYil7dmFyIGMsZDtpZighYSlyZXR1cm4gdGhpcztpZihcInN0cmluZ1wiPT10eXBlb2YgYSl7aWYoYz1cIjxcIj09PWEuY2hhckF0KDApJiZcIj5cIj09PWEuY2hhckF0KGEubGVuZ3RoLTEpJiZhLmxlbmd0aD49Mz9bbnVsbCxhLG51bGxdOnouZXhlYyhhKSwhY3x8IWNbMV0mJmIpcmV0dXJuIWJ8fGIuanF1ZXJ5PyhifHx4KS5maW5kKGEpOnRoaXMuY29uc3RydWN0b3IoYikuZmluZChhKTtpZihjWzFdKXtpZihiPWIgaW5zdGFuY2VvZiBtP2JbMF06YixtLm1lcmdlKHRoaXMsbS5wYXJzZUhUTUwoY1sxXSxiJiZiLm5vZGVUeXBlP2Iub3duZXJEb2N1bWVudHx8Yjp5LCEwKSksdS50ZXN0KGNbMV0pJiZtLmlzUGxhaW5PYmplY3QoYikpZm9yKGMgaW4gYiltLmlzRnVuY3Rpb24odGhpc1tjXSk/dGhpc1tjXShiW2NdKTp0aGlzLmF0dHIoYyxiW2NdKTtyZXR1cm4gdGhpc31pZihkPXkuZ2V0RWxlbWVudEJ5SWQoY1syXSksZCYmZC5wYXJlbnROb2RlKXtpZihkLmlkIT09Y1syXSlyZXR1cm4geC5maW5kKGEpO3RoaXMubGVuZ3RoPTEsdGhpc1swXT1kfXJldHVybiB0aGlzLmNvbnRleHQ9eSx0aGlzLnNlbGVjdG9yPWEsdGhpc31yZXR1cm4gYS5ub2RlVHlwZT8odGhpcy5jb250ZXh0PXRoaXNbMF09YSx0aGlzLmxlbmd0aD0xLHRoaXMpOm0uaXNGdW5jdGlvbihhKT9cInVuZGVmaW5lZFwiIT10eXBlb2YgeC5yZWFkeT94LnJlYWR5KGEpOmEobSk6KHZvaWQgMCE9PWEuc2VsZWN0b3ImJih0aGlzLnNlbGVjdG9yPWEuc2VsZWN0b3IsdGhpcy5jb250ZXh0PWEuY29udGV4dCksbS5tYWtlQXJyYXkoYSx0aGlzKSl9O0EucHJvdG90eXBlPW0uZm4seD1tKHkpO3ZhciBCPS9eKD86cGFyZW50c3xwcmV2KD86VW50aWx8QWxsKSkvLEM9e2NoaWxkcmVuOiEwLGNvbnRlbnRzOiEwLG5leHQ6ITAscHJldjohMH07bS5leHRlbmQoe2RpcjpmdW5jdGlvbihhLGIsYyl7dmFyIGQ9W10sZT1hW2JdO3doaWxlKGUmJjkhPT1lLm5vZGVUeXBlJiYodm9pZCAwPT09Y3x8MSE9PWUubm9kZVR5cGV8fCFtKGUpLmlzKGMpKSkxPT09ZS5ub2RlVHlwZSYmZC5wdXNoKGUpLGU9ZVtiXTtyZXR1cm4gZH0sc2libGluZzpmdW5jdGlvbihhLGIpe2Zvcih2YXIgYz1bXTthO2E9YS5uZXh0U2libGluZykxPT09YS5ub2RlVHlwZSYmYSE9PWImJmMucHVzaChhKTtyZXR1cm4gY319KSxtLmZuLmV4dGVuZCh7aGFzOmZ1bmN0aW9uKGEpe3ZhciBiLGM9bShhLHRoaXMpLGQ9Yy5sZW5ndGg7cmV0dXJuIHRoaXMuZmlsdGVyKGZ1bmN0aW9uKCl7Zm9yKGI9MDtkPmI7YisrKWlmKG0uY29udGFpbnModGhpcyxjW2JdKSlyZXR1cm4hMH0pfSxjbG9zZXN0OmZ1bmN0aW9uKGEsYil7Zm9yKHZhciBjLGQ9MCxlPXRoaXMubGVuZ3RoLGY9W10sZz10LnRlc3QoYSl8fFwic3RyaW5nXCIhPXR5cGVvZiBhP20oYSxifHx0aGlzLmNvbnRleHQpOjA7ZT5kO2QrKylmb3IoYz10aGlzW2RdO2MmJmMhPT1iO2M9Yy5wYXJlbnROb2RlKWlmKGMubm9kZVR5cGU8MTEmJihnP2cuaW5kZXgoYyk+LTE6MT09PWMubm9kZVR5cGUmJm0uZmluZC5tYXRjaGVzU2VsZWN0b3IoYyxhKSkpe2YucHVzaChjKTticmVha31yZXR1cm4gdGhpcy5wdXNoU3RhY2soZi5sZW5ndGg+MT9tLnVuaXF1ZShmKTpmKX0saW5kZXg6ZnVuY3Rpb24oYSl7cmV0dXJuIGE/XCJzdHJpbmdcIj09dHlwZW9mIGE/bS5pbkFycmF5KHRoaXNbMF0sbShhKSk6bS5pbkFycmF5KGEuanF1ZXJ5P2FbMF06YSx0aGlzKTp0aGlzWzBdJiZ0aGlzWzBdLnBhcmVudE5vZGU/dGhpcy5maXJzdCgpLnByZXZBbGwoKS5sZW5ndGg6LTF9LGFkZDpmdW5jdGlvbihhLGIpe3JldHVybiB0aGlzLnB1c2hTdGFjayhtLnVuaXF1ZShtLm1lcmdlKHRoaXMuZ2V0KCksbShhLGIpKSkpfSxhZGRCYWNrOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLmFkZChudWxsPT1hP3RoaXMucHJldk9iamVjdDp0aGlzLnByZXZPYmplY3QuZmlsdGVyKGEpKX19KTtmdW5jdGlvbiBEKGEsYil7ZG8gYT1hW2JdO3doaWxlKGEmJjEhPT1hLm5vZGVUeXBlKTtyZXR1cm4gYX1tLmVhY2goe3BhcmVudDpmdW5jdGlvbihhKXt2YXIgYj1hLnBhcmVudE5vZGU7cmV0dXJuIGImJjExIT09Yi5ub2RlVHlwZT9iOm51bGx9LHBhcmVudHM6ZnVuY3Rpb24oYSl7cmV0dXJuIG0uZGlyKGEsXCJwYXJlbnROb2RlXCIpfSxwYXJlbnRzVW50aWw6ZnVuY3Rpb24oYSxiLGMpe3JldHVybiBtLmRpcihhLFwicGFyZW50Tm9kZVwiLGMpfSxuZXh0OmZ1bmN0aW9uKGEpe3JldHVybiBEKGEsXCJuZXh0U2libGluZ1wiKX0scHJldjpmdW5jdGlvbihhKXtyZXR1cm4gRChhLFwicHJldmlvdXNTaWJsaW5nXCIpfSxuZXh0QWxsOmZ1bmN0aW9uKGEpe3JldHVybiBtLmRpcihhLFwibmV4dFNpYmxpbmdcIil9LHByZXZBbGw6ZnVuY3Rpb24oYSl7cmV0dXJuIG0uZGlyKGEsXCJwcmV2aW91c1NpYmxpbmdcIil9LG5leHRVbnRpbDpmdW5jdGlvbihhLGIsYyl7cmV0dXJuIG0uZGlyKGEsXCJuZXh0U2libGluZ1wiLGMpfSxwcmV2VW50aWw6ZnVuY3Rpb24oYSxiLGMpe3JldHVybiBtLmRpcihhLFwicHJldmlvdXNTaWJsaW5nXCIsYyl9LHNpYmxpbmdzOmZ1bmN0aW9uKGEpe3JldHVybiBtLnNpYmxpbmcoKGEucGFyZW50Tm9kZXx8e30pLmZpcnN0Q2hpbGQsYSl9LGNoaWxkcmVuOmZ1bmN0aW9uKGEpe3JldHVybiBtLnNpYmxpbmcoYS5maXJzdENoaWxkKX0sY29udGVudHM6ZnVuY3Rpb24oYSl7cmV0dXJuIG0ubm9kZU5hbWUoYSxcImlmcmFtZVwiKT9hLmNvbnRlbnREb2N1bWVudHx8YS5jb250ZW50V2luZG93LmRvY3VtZW50Om0ubWVyZ2UoW10sYS5jaGlsZE5vZGVzKX19LGZ1bmN0aW9uKGEsYil7bS5mblthXT1mdW5jdGlvbihjLGQpe3ZhciBlPW0ubWFwKHRoaXMsYixjKTtyZXR1cm5cIlVudGlsXCIhPT1hLnNsaWNlKC01KSYmKGQ9YyksZCYmXCJzdHJpbmdcIj09dHlwZW9mIGQmJihlPW0uZmlsdGVyKGQsZSkpLHRoaXMubGVuZ3RoPjEmJihDW2FdfHwoZT1tLnVuaXF1ZShlKSksQi50ZXN0KGEpJiYoZT1lLnJldmVyc2UoKSkpLHRoaXMucHVzaFN0YWNrKGUpfX0pO3ZhciBFPS9cXFMrL2csRj17fTtmdW5jdGlvbiBHKGEpe3ZhciBiPUZbYV09e307cmV0dXJuIG0uZWFjaChhLm1hdGNoKEUpfHxbXSxmdW5jdGlvbihhLGMpe2JbY109ITB9KSxifW0uQ2FsbGJhY2tzPWZ1bmN0aW9uKGEpe2E9XCJzdHJpbmdcIj09dHlwZW9mIGE/RlthXXx8RyhhKTptLmV4dGVuZCh7fSxhKTt2YXIgYixjLGQsZSxmLGcsaD1bXSxpPSFhLm9uY2UmJltdLGo9ZnVuY3Rpb24obCl7Zm9yKGM9YS5tZW1vcnkmJmwsZD0hMCxmPWd8fDAsZz0wLGU9aC5sZW5ndGgsYj0hMDtoJiZlPmY7ZisrKWlmKGhbZl0uYXBwbHkobFswXSxsWzFdKT09PSExJiZhLnN0b3BPbkZhbHNlKXtjPSExO2JyZWFrfWI9ITEsaCYmKGk/aS5sZW5ndGgmJmooaS5zaGlmdCgpKTpjP2g9W106ay5kaXNhYmxlKCkpfSxrPXthZGQ6ZnVuY3Rpb24oKXtpZihoKXt2YXIgZD1oLmxlbmd0aDshZnVuY3Rpb24gZihiKXttLmVhY2goYixmdW5jdGlvbihiLGMpe3ZhciBkPW0udHlwZShjKTtcImZ1bmN0aW9uXCI9PT1kP2EudW5pcXVlJiZrLmhhcyhjKXx8aC5wdXNoKGMpOmMmJmMubGVuZ3RoJiZcInN0cmluZ1wiIT09ZCYmZihjKX0pfShhcmd1bWVudHMpLGI/ZT1oLmxlbmd0aDpjJiYoZz1kLGooYykpfXJldHVybiB0aGlzfSxyZW1vdmU6ZnVuY3Rpb24oKXtyZXR1cm4gaCYmbS5lYWNoKGFyZ3VtZW50cyxmdW5jdGlvbihhLGMpe3ZhciBkO3doaWxlKChkPW0uaW5BcnJheShjLGgsZCkpPi0xKWguc3BsaWNlKGQsMSksYiYmKGU+PWQmJmUtLSxmPj1kJiZmLS0pfSksdGhpc30saGFzOmZ1bmN0aW9uKGEpe3JldHVybiBhP20uaW5BcnJheShhLGgpPi0xOiEoIWh8fCFoLmxlbmd0aCl9LGVtcHR5OmZ1bmN0aW9uKCl7cmV0dXJuIGg9W10sZT0wLHRoaXN9LGRpc2FibGU6ZnVuY3Rpb24oKXtyZXR1cm4gaD1pPWM9dm9pZCAwLHRoaXN9LGRpc2FibGVkOmZ1bmN0aW9uKCl7cmV0dXJuIWh9LGxvY2s6ZnVuY3Rpb24oKXtyZXR1cm4gaT12b2lkIDAsY3x8ay5kaXNhYmxlKCksdGhpc30sbG9ja2VkOmZ1bmN0aW9uKCl7cmV0dXJuIWl9LGZpcmVXaXRoOmZ1bmN0aW9uKGEsYyl7cmV0dXJuIWh8fGQmJiFpfHwoYz1jfHxbXSxjPVthLGMuc2xpY2U/Yy5zbGljZSgpOmNdLGI/aS5wdXNoKGMpOmooYykpLHRoaXN9LGZpcmU6ZnVuY3Rpb24oKXtyZXR1cm4gay5maXJlV2l0aCh0aGlzLGFyZ3VtZW50cyksdGhpc30sZmlyZWQ6ZnVuY3Rpb24oKXtyZXR1cm4hIWR9fTtyZXR1cm4ga30sbS5leHRlbmQoe0RlZmVycmVkOmZ1bmN0aW9uKGEpe3ZhciBiPVtbXCJyZXNvbHZlXCIsXCJkb25lXCIsbS5DYWxsYmFja3MoXCJvbmNlIG1lbW9yeVwiKSxcInJlc29sdmVkXCJdLFtcInJlamVjdFwiLFwiZmFpbFwiLG0uQ2FsbGJhY2tzKFwib25jZSBtZW1vcnlcIiksXCJyZWplY3RlZFwiXSxbXCJub3RpZnlcIixcInByb2dyZXNzXCIsbS5DYWxsYmFja3MoXCJtZW1vcnlcIildXSxjPVwicGVuZGluZ1wiLGQ9e3N0YXRlOmZ1bmN0aW9uKCl7cmV0dXJuIGN9LGFsd2F5czpmdW5jdGlvbigpe3JldHVybiBlLmRvbmUoYXJndW1lbnRzKS5mYWlsKGFyZ3VtZW50cyksdGhpc30sdGhlbjpmdW5jdGlvbigpe3ZhciBhPWFyZ3VtZW50cztyZXR1cm4gbS5EZWZlcnJlZChmdW5jdGlvbihjKXttLmVhY2goYixmdW5jdGlvbihiLGYpe3ZhciBnPW0uaXNGdW5jdGlvbihhW2JdKSYmYVtiXTtlW2ZbMV1dKGZ1bmN0aW9uKCl7dmFyIGE9ZyYmZy5hcHBseSh0aGlzLGFyZ3VtZW50cyk7YSYmbS5pc0Z1bmN0aW9uKGEucHJvbWlzZSk/YS5wcm9taXNlKCkuZG9uZShjLnJlc29sdmUpLmZhaWwoYy5yZWplY3QpLnByb2dyZXNzKGMubm90aWZ5KTpjW2ZbMF0rXCJXaXRoXCJdKHRoaXM9PT1kP2MucHJvbWlzZSgpOnRoaXMsZz9bYV06YXJndW1lbnRzKX0pfSksYT1udWxsfSkucHJvbWlzZSgpfSxwcm9taXNlOmZ1bmN0aW9uKGEpe3JldHVybiBudWxsIT1hP20uZXh0ZW5kKGEsZCk6ZH19LGU9e307cmV0dXJuIGQucGlwZT1kLnRoZW4sbS5lYWNoKGIsZnVuY3Rpb24oYSxmKXt2YXIgZz1mWzJdLGg9ZlszXTtkW2ZbMV1dPWcuYWRkLGgmJmcuYWRkKGZ1bmN0aW9uKCl7Yz1ofSxiWzFeYV1bMl0uZGlzYWJsZSxiWzJdWzJdLmxvY2spLGVbZlswXV09ZnVuY3Rpb24oKXtyZXR1cm4gZVtmWzBdK1wiV2l0aFwiXSh0aGlzPT09ZT9kOnRoaXMsYXJndW1lbnRzKSx0aGlzfSxlW2ZbMF0rXCJXaXRoXCJdPWcuZmlyZVdpdGh9KSxkLnByb21pc2UoZSksYSYmYS5jYWxsKGUsZSksZX0sd2hlbjpmdW5jdGlvbihhKXt2YXIgYj0wLGM9ZC5jYWxsKGFyZ3VtZW50cyksZT1jLmxlbmd0aCxmPTEhPT1lfHxhJiZtLmlzRnVuY3Rpb24oYS5wcm9taXNlKT9lOjAsZz0xPT09Zj9hOm0uRGVmZXJyZWQoKSxoPWZ1bmN0aW9uKGEsYixjKXtyZXR1cm4gZnVuY3Rpb24oZSl7YlthXT10aGlzLGNbYV09YXJndW1lbnRzLmxlbmd0aD4xP2QuY2FsbChhcmd1bWVudHMpOmUsYz09PWk/Zy5ub3RpZnlXaXRoKGIsYyk6LS1mfHxnLnJlc29sdmVXaXRoKGIsYyl9fSxpLGosaztpZihlPjEpZm9yKGk9bmV3IEFycmF5KGUpLGo9bmV3IEFycmF5KGUpLGs9bmV3IEFycmF5KGUpO2U+YjtiKyspY1tiXSYmbS5pc0Z1bmN0aW9uKGNbYl0ucHJvbWlzZSk/Y1tiXS5wcm9taXNlKCkuZG9uZShoKGIsayxjKSkuZmFpbChnLnJlamVjdCkucHJvZ3Jlc3MoaChiLGosaSkpOi0tZjtyZXR1cm4gZnx8Zy5yZXNvbHZlV2l0aChrLGMpLGcucHJvbWlzZSgpfX0pO3ZhciBIO20uZm4ucmVhZHk9ZnVuY3Rpb24oYSl7cmV0dXJuIG0ucmVhZHkucHJvbWlzZSgpLmRvbmUoYSksdGhpc30sbS5leHRlbmQoe2lzUmVhZHk6ITEscmVhZHlXYWl0OjEsaG9sZFJlYWR5OmZ1bmN0aW9uKGEpe2E/bS5yZWFkeVdhaXQrKzptLnJlYWR5KCEwKX0scmVhZHk6ZnVuY3Rpb24oYSl7aWYoYT09PSEwPyEtLW0ucmVhZHlXYWl0OiFtLmlzUmVhZHkpe2lmKCF5LmJvZHkpcmV0dXJuIHNldFRpbWVvdXQobS5yZWFkeSk7bS5pc1JlYWR5PSEwLGEhPT0hMCYmLS1tLnJlYWR5V2FpdD4wfHwoSC5yZXNvbHZlV2l0aCh5LFttXSksbS5mbi50cmlnZ2VySGFuZGxlciYmKG0oeSkudHJpZ2dlckhhbmRsZXIoXCJyZWFkeVwiKSxtKHkpLm9mZihcInJlYWR5XCIpKSl9fX0pO2Z1bmN0aW9uIEkoKXt5LmFkZEV2ZW50TGlzdGVuZXI/KHkucmVtb3ZlRXZlbnRMaXN0ZW5lcihcIkRPTUNvbnRlbnRMb2FkZWRcIixKLCExKSxhLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJsb2FkXCIsSiwhMSkpOih5LmRldGFjaEV2ZW50KFwib25yZWFkeXN0YXRlY2hhbmdlXCIsSiksYS5kZXRhY2hFdmVudChcIm9ubG9hZFwiLEopKX1mdW5jdGlvbiBKKCl7KHkuYWRkRXZlbnRMaXN0ZW5lcnx8XCJsb2FkXCI9PT1ldmVudC50eXBlfHxcImNvbXBsZXRlXCI9PT15LnJlYWR5U3RhdGUpJiYoSSgpLG0ucmVhZHkoKSl9bS5yZWFkeS5wcm9taXNlPWZ1bmN0aW9uKGIpe2lmKCFIKWlmKEg9bS5EZWZlcnJlZCgpLFwiY29tcGxldGVcIj09PXkucmVhZHlTdGF0ZSlzZXRUaW1lb3V0KG0ucmVhZHkpO2Vsc2UgaWYoeS5hZGRFdmVudExpc3RlbmVyKXkuYWRkRXZlbnRMaXN0ZW5lcihcIkRPTUNvbnRlbnRMb2FkZWRcIixKLCExKSxhLmFkZEV2ZW50TGlzdGVuZXIoXCJsb2FkXCIsSiwhMSk7ZWxzZXt5LmF0dGFjaEV2ZW50KFwib25yZWFkeXN0YXRlY2hhbmdlXCIsSiksYS5hdHRhY2hFdmVudChcIm9ubG9hZFwiLEopO3ZhciBjPSExO3RyeXtjPW51bGw9PWEuZnJhbWVFbGVtZW50JiZ5LmRvY3VtZW50RWxlbWVudH1jYXRjaChkKXt9YyYmYy5kb1Njcm9sbCYmIWZ1bmN0aW9uIGUoKXtpZighbS5pc1JlYWR5KXt0cnl7Yy5kb1Njcm9sbChcImxlZnRcIil9Y2F0Y2goYSl7cmV0dXJuIHNldFRpbWVvdXQoZSw1MCl9SSgpLG0ucmVhZHkoKX19KCl9cmV0dXJuIEgucHJvbWlzZShiKX07dmFyIEs9XCJ1bmRlZmluZWRcIixMO2ZvcihMIGluIG0oaykpYnJlYWs7ay5vd25MYXN0PVwiMFwiIT09TCxrLmlubGluZUJsb2NrTmVlZHNMYXlvdXQ9ITEsbShmdW5jdGlvbigpe3ZhciBhLGIsYyxkO2M9eS5nZXRFbGVtZW50c0J5VGFnTmFtZShcImJvZHlcIilbMF0sYyYmYy5zdHlsZSYmKGI9eS5jcmVhdGVFbGVtZW50KFwiZGl2XCIpLGQ9eS5jcmVhdGVFbGVtZW50KFwiZGl2XCIpLGQuc3R5bGUuY3NzVGV4dD1cInBvc2l0aW9uOmFic29sdXRlO2JvcmRlcjowO3dpZHRoOjA7aGVpZ2h0OjA7dG9wOjA7bGVmdDotOTk5OXB4XCIsYy5hcHBlbmRDaGlsZChkKS5hcHBlbmRDaGlsZChiKSx0eXBlb2YgYi5zdHlsZS56b29tIT09SyYmKGIuc3R5bGUuY3NzVGV4dD1cImRpc3BsYXk6aW5saW5lO21hcmdpbjowO2JvcmRlcjowO3BhZGRpbmc6MXB4O3dpZHRoOjFweDt6b29tOjFcIixrLmlubGluZUJsb2NrTmVlZHNMYXlvdXQ9YT0zPT09Yi5vZmZzZXRXaWR0aCxhJiYoYy5zdHlsZS56b29tPTEpKSxjLnJlbW92ZUNoaWxkKGQpKX0pLGZ1bmN0aW9uKCl7dmFyIGE9eS5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO2lmKG51bGw9PWsuZGVsZXRlRXhwYW5kbyl7ay5kZWxldGVFeHBhbmRvPSEwO3RyeXtkZWxldGUgYS50ZXN0fWNhdGNoKGIpe2suZGVsZXRlRXhwYW5kbz0hMX19YT1udWxsfSgpLG0uYWNjZXB0RGF0YT1mdW5jdGlvbihhKXt2YXIgYj1tLm5vRGF0YVsoYS5ub2RlTmFtZStcIiBcIikudG9Mb3dlckNhc2UoKV0sYz0rYS5ub2RlVHlwZXx8MTtyZXR1cm4gMSE9PWMmJjkhPT1jPyExOiFifHxiIT09ITAmJmEuZ2V0QXR0cmlidXRlKFwiY2xhc3NpZFwiKT09PWJ9O3ZhciBNPS9eKD86XFx7W1xcd1xcV10qXFx9fFxcW1tcXHdcXFddKlxcXSkkLyxOPS8oW0EtWl0pL2c7ZnVuY3Rpb24gTyhhLGIsYyl7aWYodm9pZCAwPT09YyYmMT09PWEubm9kZVR5cGUpe3ZhciBkPVwiZGF0YS1cIitiLnJlcGxhY2UoTixcIi0kMVwiKS50b0xvd2VyQ2FzZSgpO2lmKGM9YS5nZXRBdHRyaWJ1dGUoZCksXCJzdHJpbmdcIj09dHlwZW9mIGMpe3RyeXtjPVwidHJ1ZVwiPT09Yz8hMDpcImZhbHNlXCI9PT1jPyExOlwibnVsbFwiPT09Yz9udWxsOitjK1wiXCI9PT1jPytjOk0udGVzdChjKT9tLnBhcnNlSlNPTihjKTpjfWNhdGNoKGUpe31tLmRhdGEoYSxiLGMpfWVsc2UgYz12b2lkIDB9cmV0dXJuIGN9ZnVuY3Rpb24gUChhKXt2YXIgYjtmb3IoYiBpbiBhKWlmKChcImRhdGFcIiE9PWJ8fCFtLmlzRW1wdHlPYmplY3QoYVtiXSkpJiZcInRvSlNPTlwiIT09YilyZXR1cm4hMTtcclxucmV0dXJuITB9ZnVuY3Rpb24gUShhLGIsZCxlKXtpZihtLmFjY2VwdERhdGEoYSkpe3ZhciBmLGcsaD1tLmV4cGFuZG8saT1hLm5vZGVUeXBlLGo9aT9tLmNhY2hlOmEsaz1pP2FbaF06YVtoXSYmaDtpZihrJiZqW2tdJiYoZXx8altrXS5kYXRhKXx8dm9pZCAwIT09ZHx8XCJzdHJpbmdcIiE9dHlwZW9mIGIpcmV0dXJuIGt8fChrPWk/YVtoXT1jLnBvcCgpfHxtLmd1aWQrKzpoKSxqW2tdfHwoaltrXT1pP3t9Ont0b0pTT046bS5ub29wfSksKFwib2JqZWN0XCI9PXR5cGVvZiBifHxcImZ1bmN0aW9uXCI9PXR5cGVvZiBiKSYmKGU/altrXT1tLmV4dGVuZChqW2tdLGIpOmpba10uZGF0YT1tLmV4dGVuZChqW2tdLmRhdGEsYikpLGc9altrXSxlfHwoZy5kYXRhfHwoZy5kYXRhPXt9KSxnPWcuZGF0YSksdm9pZCAwIT09ZCYmKGdbbS5jYW1lbENhc2UoYildPWQpLFwic3RyaW5nXCI9PXR5cGVvZiBiPyhmPWdbYl0sbnVsbD09ZiYmKGY9Z1ttLmNhbWVsQ2FzZShiKV0pKTpmPWcsZn19ZnVuY3Rpb24gUihhLGIsYyl7aWYobS5hY2NlcHREYXRhKGEpKXt2YXIgZCxlLGY9YS5ub2RlVHlwZSxnPWY/bS5jYWNoZTphLGg9Zj9hW20uZXhwYW5kb106bS5leHBhbmRvO2lmKGdbaF0pe2lmKGImJihkPWM/Z1toXTpnW2hdLmRhdGEpKXttLmlzQXJyYXkoYik/Yj1iLmNvbmNhdChtLm1hcChiLG0uY2FtZWxDYXNlKSk6YiBpbiBkP2I9W2JdOihiPW0uY2FtZWxDYXNlKGIpLGI9YiBpbiBkP1tiXTpiLnNwbGl0KFwiIFwiKSksZT1iLmxlbmd0aDt3aGlsZShlLS0pZGVsZXRlIGRbYltlXV07aWYoYz8hUChkKTohbS5pc0VtcHR5T2JqZWN0KGQpKXJldHVybn0oY3x8KGRlbGV0ZSBnW2hdLmRhdGEsUChnW2hdKSkpJiYoZj9tLmNsZWFuRGF0YShbYV0sITApOmsuZGVsZXRlRXhwYW5kb3x8ZyE9Zy53aW5kb3c/ZGVsZXRlIGdbaF06Z1toXT1udWxsKX19fW0uZXh0ZW5kKHtjYWNoZTp7fSxub0RhdGE6e1wiYXBwbGV0IFwiOiEwLFwiZW1iZWQgXCI6ITAsXCJvYmplY3QgXCI6XCJjbHNpZDpEMjdDREI2RS1BRTZELTExY2YtOTZCOC00NDQ1NTM1NDAwMDBcIn0saGFzRGF0YTpmdW5jdGlvbihhKXtyZXR1cm4gYT1hLm5vZGVUeXBlP20uY2FjaGVbYVttLmV4cGFuZG9dXTphW20uZXhwYW5kb10sISFhJiYhUChhKX0sZGF0YTpmdW5jdGlvbihhLGIsYyl7cmV0dXJuIFEoYSxiLGMpfSxyZW1vdmVEYXRhOmZ1bmN0aW9uKGEsYil7cmV0dXJuIFIoYSxiKX0sX2RhdGE6ZnVuY3Rpb24oYSxiLGMpe3JldHVybiBRKGEsYixjLCEwKX0sX3JlbW92ZURhdGE6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gUihhLGIsITApfX0pLG0uZm4uZXh0ZW5kKHtkYXRhOmZ1bmN0aW9uKGEsYil7dmFyIGMsZCxlLGY9dGhpc1swXSxnPWYmJmYuYXR0cmlidXRlcztpZih2b2lkIDA9PT1hKXtpZih0aGlzLmxlbmd0aCYmKGU9bS5kYXRhKGYpLDE9PT1mLm5vZGVUeXBlJiYhbS5fZGF0YShmLFwicGFyc2VkQXR0cnNcIikpKXtjPWcubGVuZ3RoO3doaWxlKGMtLSlnW2NdJiYoZD1nW2NdLm5hbWUsMD09PWQuaW5kZXhPZihcImRhdGEtXCIpJiYoZD1tLmNhbWVsQ2FzZShkLnNsaWNlKDUpKSxPKGYsZCxlW2RdKSkpO20uX2RhdGEoZixcInBhcnNlZEF0dHJzXCIsITApfXJldHVybiBlfXJldHVyblwib2JqZWN0XCI9PXR5cGVvZiBhP3RoaXMuZWFjaChmdW5jdGlvbigpe20uZGF0YSh0aGlzLGEpfSk6YXJndW1lbnRzLmxlbmd0aD4xP3RoaXMuZWFjaChmdW5jdGlvbigpe20uZGF0YSh0aGlzLGEsYil9KTpmP08oZixhLG0uZGF0YShmLGEpKTp2b2lkIDB9LHJlbW92ZURhdGE6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbigpe20ucmVtb3ZlRGF0YSh0aGlzLGEpfSl9fSksbS5leHRlbmQoe3F1ZXVlOmZ1bmN0aW9uKGEsYixjKXt2YXIgZDtyZXR1cm4gYT8oYj0oYnx8XCJmeFwiKStcInF1ZXVlXCIsZD1tLl9kYXRhKGEsYiksYyYmKCFkfHxtLmlzQXJyYXkoYyk/ZD1tLl9kYXRhKGEsYixtLm1ha2VBcnJheShjKSk6ZC5wdXNoKGMpKSxkfHxbXSk6dm9pZCAwfSxkZXF1ZXVlOmZ1bmN0aW9uKGEsYil7Yj1ifHxcImZ4XCI7dmFyIGM9bS5xdWV1ZShhLGIpLGQ9Yy5sZW5ndGgsZT1jLnNoaWZ0KCksZj1tLl9xdWV1ZUhvb2tzKGEsYiksZz1mdW5jdGlvbigpe20uZGVxdWV1ZShhLGIpfTtcImlucHJvZ3Jlc3NcIj09PWUmJihlPWMuc2hpZnQoKSxkLS0pLGUmJihcImZ4XCI9PT1iJiZjLnVuc2hpZnQoXCJpbnByb2dyZXNzXCIpLGRlbGV0ZSBmLnN0b3AsZS5jYWxsKGEsZyxmKSksIWQmJmYmJmYuZW1wdHkuZmlyZSgpfSxfcXVldWVIb29rczpmdW5jdGlvbihhLGIpe3ZhciBjPWIrXCJxdWV1ZUhvb2tzXCI7cmV0dXJuIG0uX2RhdGEoYSxjKXx8bS5fZGF0YShhLGMse2VtcHR5Om0uQ2FsbGJhY2tzKFwib25jZSBtZW1vcnlcIikuYWRkKGZ1bmN0aW9uKCl7bS5fcmVtb3ZlRGF0YShhLGIrXCJxdWV1ZVwiKSxtLl9yZW1vdmVEYXRhKGEsYyl9KX0pfX0pLG0uZm4uZXh0ZW5kKHtxdWV1ZTpmdW5jdGlvbihhLGIpe3ZhciBjPTI7cmV0dXJuXCJzdHJpbmdcIiE9dHlwZW9mIGEmJihiPWEsYT1cImZ4XCIsYy0tKSxhcmd1bWVudHMubGVuZ3RoPGM/bS5xdWV1ZSh0aGlzWzBdLGEpOnZvaWQgMD09PWI/dGhpczp0aGlzLmVhY2goZnVuY3Rpb24oKXt2YXIgYz1tLnF1ZXVlKHRoaXMsYSxiKTttLl9xdWV1ZUhvb2tzKHRoaXMsYSksXCJmeFwiPT09YSYmXCJpbnByb2dyZXNzXCIhPT1jWzBdJiZtLmRlcXVldWUodGhpcyxhKX0pfSxkZXF1ZXVlOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oKXttLmRlcXVldWUodGhpcyxhKX0pfSxjbGVhclF1ZXVlOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLnF1ZXVlKGF8fFwiZnhcIixbXSl9LHByb21pc2U6ZnVuY3Rpb24oYSxiKXt2YXIgYyxkPTEsZT1tLkRlZmVycmVkKCksZj10aGlzLGc9dGhpcy5sZW5ndGgsaD1mdW5jdGlvbigpey0tZHx8ZS5yZXNvbHZlV2l0aChmLFtmXSl9O1wic3RyaW5nXCIhPXR5cGVvZiBhJiYoYj1hLGE9dm9pZCAwKSxhPWF8fFwiZnhcIjt3aGlsZShnLS0pYz1tLl9kYXRhKGZbZ10sYStcInF1ZXVlSG9va3NcIiksYyYmYy5lbXB0eSYmKGQrKyxjLmVtcHR5LmFkZChoKSk7cmV0dXJuIGgoKSxlLnByb21pc2UoYil9fSk7dmFyIFM9L1srLV0/KD86XFxkKlxcLnwpXFxkKyg/OltlRV1bKy1dP1xcZCt8KS8uc291cmNlLFQ9W1wiVG9wXCIsXCJSaWdodFwiLFwiQm90dG9tXCIsXCJMZWZ0XCJdLFU9ZnVuY3Rpb24oYSxiKXtyZXR1cm4gYT1ifHxhLFwibm9uZVwiPT09bS5jc3MoYSxcImRpc3BsYXlcIil8fCFtLmNvbnRhaW5zKGEub3duZXJEb2N1bWVudCxhKX0sVj1tLmFjY2Vzcz1mdW5jdGlvbihhLGIsYyxkLGUsZixnKXt2YXIgaD0wLGk9YS5sZW5ndGgsaj1udWxsPT1jO2lmKFwib2JqZWN0XCI9PT1tLnR5cGUoYykpe2U9ITA7Zm9yKGggaW4gYyltLmFjY2VzcyhhLGIsaCxjW2hdLCEwLGYsZyl9ZWxzZSBpZih2b2lkIDAhPT1kJiYoZT0hMCxtLmlzRnVuY3Rpb24oZCl8fChnPSEwKSxqJiYoZz8oYi5jYWxsKGEsZCksYj1udWxsKTooaj1iLGI9ZnVuY3Rpb24oYSxiLGMpe3JldHVybiBqLmNhbGwobShhKSxjKX0pKSxiKSlmb3IoO2k+aDtoKyspYihhW2hdLGMsZz9kOmQuY2FsbChhW2hdLGgsYihhW2hdLGMpKSk7cmV0dXJuIGU/YTpqP2IuY2FsbChhKTppP2IoYVswXSxjKTpmfSxXPS9eKD86Y2hlY2tib3h8cmFkaW8pJC9pOyFmdW5jdGlvbigpe3ZhciBhPXkuY3JlYXRlRWxlbWVudChcImlucHV0XCIpLGI9eS5jcmVhdGVFbGVtZW50KFwiZGl2XCIpLGM9eS5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCk7aWYoYi5pbm5lckhUTUw9XCIgIDxsaW5rLz48dGFibGU+PC90YWJsZT48YSBocmVmPScvYSc+YTwvYT48aW5wdXQgdHlwZT0nY2hlY2tib3gnLz5cIixrLmxlYWRpbmdXaGl0ZXNwYWNlPTM9PT1iLmZpcnN0Q2hpbGQubm9kZVR5cGUsay50Ym9keT0hYi5nZXRFbGVtZW50c0J5VGFnTmFtZShcInRib2R5XCIpLmxlbmd0aCxrLmh0bWxTZXJpYWxpemU9ISFiLmdldEVsZW1lbnRzQnlUYWdOYW1lKFwibGlua1wiKS5sZW5ndGgsay5odG1sNUNsb25lPVwiPDpuYXY+PC86bmF2PlwiIT09eS5jcmVhdGVFbGVtZW50KFwibmF2XCIpLmNsb25lTm9kZSghMCkub3V0ZXJIVE1MLGEudHlwZT1cImNoZWNrYm94XCIsYS5jaGVja2VkPSEwLGMuYXBwZW5kQ2hpbGQoYSksay5hcHBlbmRDaGVja2VkPWEuY2hlY2tlZCxiLmlubmVySFRNTD1cIjx0ZXh0YXJlYT54PC90ZXh0YXJlYT5cIixrLm5vQ2xvbmVDaGVja2VkPSEhYi5jbG9uZU5vZGUoITApLmxhc3RDaGlsZC5kZWZhdWx0VmFsdWUsYy5hcHBlbmRDaGlsZChiKSxiLmlubmVySFRNTD1cIjxpbnB1dCB0eXBlPSdyYWRpbycgY2hlY2tlZD0nY2hlY2tlZCcgbmFtZT0ndCcvPlwiLGsuY2hlY2tDbG9uZT1iLmNsb25lTm9kZSghMCkuY2xvbmVOb2RlKCEwKS5sYXN0Q2hpbGQuY2hlY2tlZCxrLm5vQ2xvbmVFdmVudD0hMCxiLmF0dGFjaEV2ZW50JiYoYi5hdHRhY2hFdmVudChcIm9uY2xpY2tcIixmdW5jdGlvbigpe2subm9DbG9uZUV2ZW50PSExfSksYi5jbG9uZU5vZGUoITApLmNsaWNrKCkpLG51bGw9PWsuZGVsZXRlRXhwYW5kbyl7ay5kZWxldGVFeHBhbmRvPSEwO3RyeXtkZWxldGUgYi50ZXN0fWNhdGNoKGQpe2suZGVsZXRlRXhwYW5kbz0hMX19fSgpLGZ1bmN0aW9uKCl7dmFyIGIsYyxkPXkuY3JlYXRlRWxlbWVudChcImRpdlwiKTtmb3IoYiBpbntzdWJtaXQ6ITAsY2hhbmdlOiEwLGZvY3VzaW46ITB9KWM9XCJvblwiK2IsKGtbYitcIkJ1YmJsZXNcIl09YyBpbiBhKXx8KGQuc2V0QXR0cmlidXRlKGMsXCJ0XCIpLGtbYitcIkJ1YmJsZXNcIl09ZC5hdHRyaWJ1dGVzW2NdLmV4cGFuZG89PT0hMSk7ZD1udWxsfSgpO3ZhciBYPS9eKD86aW5wdXR8c2VsZWN0fHRleHRhcmVhKSQvaSxZPS9ea2V5LyxaPS9eKD86bW91c2V8cG9pbnRlcnxjb250ZXh0bWVudSl8Y2xpY2svLCQ9L14oPzpmb2N1c2luZm9jdXN8Zm9jdXNvdXRibHVyKSQvLF89L14oW14uXSopKD86XFwuKC4rKXwpJC87ZnVuY3Rpb24gYWIoKXtyZXR1cm4hMH1mdW5jdGlvbiBiYigpe3JldHVybiExfWZ1bmN0aW9uIGNiKCl7dHJ5e3JldHVybiB5LmFjdGl2ZUVsZW1lbnR9Y2F0Y2goYSl7fX1tLmV2ZW50PXtnbG9iYWw6e30sYWRkOmZ1bmN0aW9uKGEsYixjLGQsZSl7dmFyIGYsZyxoLGksaixrLGwsbixvLHAscSxyPW0uX2RhdGEoYSk7aWYocil7Yy5oYW5kbGVyJiYoaT1jLGM9aS5oYW5kbGVyLGU9aS5zZWxlY3RvciksYy5ndWlkfHwoYy5ndWlkPW0uZ3VpZCsrKSwoZz1yLmV2ZW50cyl8fChnPXIuZXZlbnRzPXt9KSwoaz1yLmhhbmRsZSl8fChrPXIuaGFuZGxlPWZ1bmN0aW9uKGEpe3JldHVybiB0eXBlb2YgbT09PUt8fGEmJm0uZXZlbnQudHJpZ2dlcmVkPT09YS50eXBlP3ZvaWQgMDptLmV2ZW50LmRpc3BhdGNoLmFwcGx5KGsuZWxlbSxhcmd1bWVudHMpfSxrLmVsZW09YSksYj0oYnx8XCJcIikubWF0Y2goRSl8fFtcIlwiXSxoPWIubGVuZ3RoO3doaWxlKGgtLSlmPV8uZXhlYyhiW2hdKXx8W10sbz1xPWZbMV0scD0oZlsyXXx8XCJcIikuc3BsaXQoXCIuXCIpLnNvcnQoKSxvJiYoaj1tLmV2ZW50LnNwZWNpYWxbb118fHt9LG89KGU/ai5kZWxlZ2F0ZVR5cGU6ai5iaW5kVHlwZSl8fG8saj1tLmV2ZW50LnNwZWNpYWxbb118fHt9LGw9bS5leHRlbmQoe3R5cGU6byxvcmlnVHlwZTpxLGRhdGE6ZCxoYW5kbGVyOmMsZ3VpZDpjLmd1aWQsc2VsZWN0b3I6ZSxuZWVkc0NvbnRleHQ6ZSYmbS5leHByLm1hdGNoLm5lZWRzQ29udGV4dC50ZXN0KGUpLG5hbWVzcGFjZTpwLmpvaW4oXCIuXCIpfSxpKSwobj1nW29dKXx8KG49Z1tvXT1bXSxuLmRlbGVnYXRlQ291bnQ9MCxqLnNldHVwJiZqLnNldHVwLmNhbGwoYSxkLHAsaykhPT0hMXx8KGEuYWRkRXZlbnRMaXN0ZW5lcj9hLmFkZEV2ZW50TGlzdGVuZXIobyxrLCExKTphLmF0dGFjaEV2ZW50JiZhLmF0dGFjaEV2ZW50KFwib25cIitvLGspKSksai5hZGQmJihqLmFkZC5jYWxsKGEsbCksbC5oYW5kbGVyLmd1aWR8fChsLmhhbmRsZXIuZ3VpZD1jLmd1aWQpKSxlP24uc3BsaWNlKG4uZGVsZWdhdGVDb3VudCsrLDAsbCk6bi5wdXNoKGwpLG0uZXZlbnQuZ2xvYmFsW29dPSEwKTthPW51bGx9fSxyZW1vdmU6ZnVuY3Rpb24oYSxiLGMsZCxlKXt2YXIgZixnLGgsaSxqLGssbCxuLG8scCxxLHI9bS5oYXNEYXRhKGEpJiZtLl9kYXRhKGEpO2lmKHImJihrPXIuZXZlbnRzKSl7Yj0oYnx8XCJcIikubWF0Y2goRSl8fFtcIlwiXSxqPWIubGVuZ3RoO3doaWxlKGotLSlpZihoPV8uZXhlYyhiW2pdKXx8W10sbz1xPWhbMV0scD0oaFsyXXx8XCJcIikuc3BsaXQoXCIuXCIpLnNvcnQoKSxvKXtsPW0uZXZlbnQuc3BlY2lhbFtvXXx8e30sbz0oZD9sLmRlbGVnYXRlVHlwZTpsLmJpbmRUeXBlKXx8byxuPWtbb118fFtdLGg9aFsyXSYmbmV3IFJlZ0V4cChcIihefFxcXFwuKVwiK3Auam9pbihcIlxcXFwuKD86LipcXFxcLnwpXCIpK1wiKFxcXFwufCQpXCIpLGk9Zj1uLmxlbmd0aDt3aGlsZShmLS0pZz1uW2ZdLCFlJiZxIT09Zy5vcmlnVHlwZXx8YyYmYy5ndWlkIT09Zy5ndWlkfHxoJiYhaC50ZXN0KGcubmFtZXNwYWNlKXx8ZCYmZCE9PWcuc2VsZWN0b3ImJihcIioqXCIhPT1kfHwhZy5zZWxlY3Rvcil8fChuLnNwbGljZShmLDEpLGcuc2VsZWN0b3ImJm4uZGVsZWdhdGVDb3VudC0tLGwucmVtb3ZlJiZsLnJlbW92ZS5jYWxsKGEsZykpO2kmJiFuLmxlbmd0aCYmKGwudGVhcmRvd24mJmwudGVhcmRvd24uY2FsbChhLHAsci5oYW5kbGUpIT09ITF8fG0ucmVtb3ZlRXZlbnQoYSxvLHIuaGFuZGxlKSxkZWxldGUga1tvXSl9ZWxzZSBmb3IobyBpbiBrKW0uZXZlbnQucmVtb3ZlKGEsbytiW2pdLGMsZCwhMCk7bS5pc0VtcHR5T2JqZWN0KGspJiYoZGVsZXRlIHIuaGFuZGxlLG0uX3JlbW92ZURhdGEoYSxcImV2ZW50c1wiKSl9fSx0cmlnZ2VyOmZ1bmN0aW9uKGIsYyxkLGUpe3ZhciBmLGcsaCxpLGssbCxuLG89W2R8fHldLHA9ai5jYWxsKGIsXCJ0eXBlXCIpP2IudHlwZTpiLHE9ai5jYWxsKGIsXCJuYW1lc3BhY2VcIik/Yi5uYW1lc3BhY2Uuc3BsaXQoXCIuXCIpOltdO2lmKGg9bD1kPWR8fHksMyE9PWQubm9kZVR5cGUmJjghPT1kLm5vZGVUeXBlJiYhJC50ZXN0KHArbS5ldmVudC50cmlnZ2VyZWQpJiYocC5pbmRleE9mKFwiLlwiKT49MCYmKHE9cC5zcGxpdChcIi5cIikscD1xLnNoaWZ0KCkscS5zb3J0KCkpLGc9cC5pbmRleE9mKFwiOlwiKTwwJiZcIm9uXCIrcCxiPWJbbS5leHBhbmRvXT9iOm5ldyBtLkV2ZW50KHAsXCJvYmplY3RcIj09dHlwZW9mIGImJmIpLGIuaXNUcmlnZ2VyPWU/MjozLGIubmFtZXNwYWNlPXEuam9pbihcIi5cIiksYi5uYW1lc3BhY2VfcmU9Yi5uYW1lc3BhY2U/bmV3IFJlZ0V4cChcIihefFxcXFwuKVwiK3Euam9pbihcIlxcXFwuKD86LipcXFxcLnwpXCIpK1wiKFxcXFwufCQpXCIpOm51bGwsYi5yZXN1bHQ9dm9pZCAwLGIudGFyZ2V0fHwoYi50YXJnZXQ9ZCksYz1udWxsPT1jP1tiXTptLm1ha2VBcnJheShjLFtiXSksaz1tLmV2ZW50LnNwZWNpYWxbcF18fHt9LGV8fCFrLnRyaWdnZXJ8fGsudHJpZ2dlci5hcHBseShkLGMpIT09ITEpKXtpZighZSYmIWsubm9CdWJibGUmJiFtLmlzV2luZG93KGQpKXtmb3IoaT1rLmRlbGVnYXRlVHlwZXx8cCwkLnRlc3QoaStwKXx8KGg9aC5wYXJlbnROb2RlKTtoO2g9aC5wYXJlbnROb2RlKW8ucHVzaChoKSxsPWg7bD09PShkLm93bmVyRG9jdW1lbnR8fHkpJiZvLnB1c2gobC5kZWZhdWx0Vmlld3x8bC5wYXJlbnRXaW5kb3d8fGEpfW49MDt3aGlsZSgoaD1vW24rK10pJiYhYi5pc1Byb3BhZ2F0aW9uU3RvcHBlZCgpKWIudHlwZT1uPjE/aTprLmJpbmRUeXBlfHxwLGY9KG0uX2RhdGEoaCxcImV2ZW50c1wiKXx8e30pW2IudHlwZV0mJm0uX2RhdGEoaCxcImhhbmRsZVwiKSxmJiZmLmFwcGx5KGgsYyksZj1nJiZoW2ddLGYmJmYuYXBwbHkmJm0uYWNjZXB0RGF0YShoKSYmKGIucmVzdWx0PWYuYXBwbHkoaCxjKSxiLnJlc3VsdD09PSExJiZiLnByZXZlbnREZWZhdWx0KCkpO2lmKGIudHlwZT1wLCFlJiYhYi5pc0RlZmF1bHRQcmV2ZW50ZWQoKSYmKCFrLl9kZWZhdWx0fHxrLl9kZWZhdWx0LmFwcGx5KG8ucG9wKCksYyk9PT0hMSkmJm0uYWNjZXB0RGF0YShkKSYmZyYmZFtwXSYmIW0uaXNXaW5kb3coZCkpe2w9ZFtnXSxsJiYoZFtnXT1udWxsKSxtLmV2ZW50LnRyaWdnZXJlZD1wO3RyeXtkW3BdKCl9Y2F0Y2gocil7fW0uZXZlbnQudHJpZ2dlcmVkPXZvaWQgMCxsJiYoZFtnXT1sKX1yZXR1cm4gYi5yZXN1bHR9fSxkaXNwYXRjaDpmdW5jdGlvbihhKXthPW0uZXZlbnQuZml4KGEpO3ZhciBiLGMsZSxmLGcsaD1bXSxpPWQuY2FsbChhcmd1bWVudHMpLGo9KG0uX2RhdGEodGhpcyxcImV2ZW50c1wiKXx8e30pW2EudHlwZV18fFtdLGs9bS5ldmVudC5zcGVjaWFsW2EudHlwZV18fHt9O2lmKGlbMF09YSxhLmRlbGVnYXRlVGFyZ2V0PXRoaXMsIWsucHJlRGlzcGF0Y2h8fGsucHJlRGlzcGF0Y2guY2FsbCh0aGlzLGEpIT09ITEpe2g9bS5ldmVudC5oYW5kbGVycy5jYWxsKHRoaXMsYSxqKSxiPTA7d2hpbGUoKGY9aFtiKytdKSYmIWEuaXNQcm9wYWdhdGlvblN0b3BwZWQoKSl7YS5jdXJyZW50VGFyZ2V0PWYuZWxlbSxnPTA7d2hpbGUoKGU9Zi5oYW5kbGVyc1tnKytdKSYmIWEuaXNJbW1lZGlhdGVQcm9wYWdhdGlvblN0b3BwZWQoKSkoIWEubmFtZXNwYWNlX3JlfHxhLm5hbWVzcGFjZV9yZS50ZXN0KGUubmFtZXNwYWNlKSkmJihhLmhhbmRsZU9iaj1lLGEuZGF0YT1lLmRhdGEsYz0oKG0uZXZlbnQuc3BlY2lhbFtlLm9yaWdUeXBlXXx8e30pLmhhbmRsZXx8ZS5oYW5kbGVyKS5hcHBseShmLmVsZW0saSksdm9pZCAwIT09YyYmKGEucmVzdWx0PWMpPT09ITEmJihhLnByZXZlbnREZWZhdWx0KCksYS5zdG9wUHJvcGFnYXRpb24oKSkpfXJldHVybiBrLnBvc3REaXNwYXRjaCYmay5wb3N0RGlzcGF0Y2guY2FsbCh0aGlzLGEpLGEucmVzdWx0fX0saGFuZGxlcnM6ZnVuY3Rpb24oYSxiKXt2YXIgYyxkLGUsZixnPVtdLGg9Yi5kZWxlZ2F0ZUNvdW50LGk9YS50YXJnZXQ7aWYoaCYmaS5ub2RlVHlwZSYmKCFhLmJ1dHRvbnx8XCJjbGlja1wiIT09YS50eXBlKSlmb3IoO2khPXRoaXM7aT1pLnBhcmVudE5vZGV8fHRoaXMpaWYoMT09PWkubm9kZVR5cGUmJihpLmRpc2FibGVkIT09ITB8fFwiY2xpY2tcIiE9PWEudHlwZSkpe2ZvcihlPVtdLGY9MDtoPmY7ZisrKWQ9YltmXSxjPWQuc2VsZWN0b3IrXCIgXCIsdm9pZCAwPT09ZVtjXSYmKGVbY109ZC5uZWVkc0NvbnRleHQ/bShjLHRoaXMpLmluZGV4KGkpPj0wOm0uZmluZChjLHRoaXMsbnVsbCxbaV0pLmxlbmd0aCksZVtjXSYmZS5wdXNoKGQpO2UubGVuZ3RoJiZnLnB1c2goe2VsZW06aSxoYW5kbGVyczplfSl9cmV0dXJuIGg8Yi5sZW5ndGgmJmcucHVzaCh7ZWxlbTp0aGlzLGhhbmRsZXJzOmIuc2xpY2UoaCl9KSxnfSxmaXg6ZnVuY3Rpb24oYSl7aWYoYVttLmV4cGFuZG9dKXJldHVybiBhO3ZhciBiLGMsZCxlPWEudHlwZSxmPWEsZz10aGlzLmZpeEhvb2tzW2VdO2d8fCh0aGlzLmZpeEhvb2tzW2VdPWc9Wi50ZXN0KGUpP3RoaXMubW91c2VIb29rczpZLnRlc3QoZSk/dGhpcy5rZXlIb29rczp7fSksZD1nLnByb3BzP3RoaXMucHJvcHMuY29uY2F0KGcucHJvcHMpOnRoaXMucHJvcHMsYT1uZXcgbS5FdmVudChmKSxiPWQubGVuZ3RoO3doaWxlKGItLSljPWRbYl0sYVtjXT1mW2NdO3JldHVybiBhLnRhcmdldHx8KGEudGFyZ2V0PWYuc3JjRWxlbWVudHx8eSksMz09PWEudGFyZ2V0Lm5vZGVUeXBlJiYoYS50YXJnZXQ9YS50YXJnZXQucGFyZW50Tm9kZSksYS5tZXRhS2V5PSEhYS5tZXRhS2V5LGcuZmlsdGVyP2cuZmlsdGVyKGEsZik6YX0scHJvcHM6XCJhbHRLZXkgYnViYmxlcyBjYW5jZWxhYmxlIGN0cmxLZXkgY3VycmVudFRhcmdldCBldmVudFBoYXNlIG1ldGFLZXkgcmVsYXRlZFRhcmdldCBzaGlmdEtleSB0YXJnZXQgdGltZVN0YW1wIHZpZXcgd2hpY2hcIi5zcGxpdChcIiBcIiksZml4SG9va3M6e30sa2V5SG9va3M6e3Byb3BzOlwiY2hhciBjaGFyQ29kZSBrZXkga2V5Q29kZVwiLnNwbGl0KFwiIFwiKSxmaWx0ZXI6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gbnVsbD09YS53aGljaCYmKGEud2hpY2g9bnVsbCE9Yi5jaGFyQ29kZT9iLmNoYXJDb2RlOmIua2V5Q29kZSksYX19LG1vdXNlSG9va3M6e3Byb3BzOlwiYnV0dG9uIGJ1dHRvbnMgY2xpZW50WCBjbGllbnRZIGZyb21FbGVtZW50IG9mZnNldFggb2Zmc2V0WSBwYWdlWCBwYWdlWSBzY3JlZW5YIHNjcmVlblkgdG9FbGVtZW50XCIuc3BsaXQoXCIgXCIpLGZpbHRlcjpmdW5jdGlvbihhLGIpe3ZhciBjLGQsZSxmPWIuYnV0dG9uLGc9Yi5mcm9tRWxlbWVudDtyZXR1cm4gbnVsbD09YS5wYWdlWCYmbnVsbCE9Yi5jbGllbnRYJiYoZD1hLnRhcmdldC5vd25lckRvY3VtZW50fHx5LGU9ZC5kb2N1bWVudEVsZW1lbnQsYz1kLmJvZHksYS5wYWdlWD1iLmNsaWVudFgrKGUmJmUuc2Nyb2xsTGVmdHx8YyYmYy5zY3JvbGxMZWZ0fHwwKS0oZSYmZS5jbGllbnRMZWZ0fHxjJiZjLmNsaWVudExlZnR8fDApLGEucGFnZVk9Yi5jbGllbnRZKyhlJiZlLnNjcm9sbFRvcHx8YyYmYy5zY3JvbGxUb3B8fDApLShlJiZlLmNsaWVudFRvcHx8YyYmYy5jbGllbnRUb3B8fDApKSwhYS5yZWxhdGVkVGFyZ2V0JiZnJiYoYS5yZWxhdGVkVGFyZ2V0PWc9PT1hLnRhcmdldD9iLnRvRWxlbWVudDpnKSxhLndoaWNofHx2b2lkIDA9PT1mfHwoYS53aGljaD0xJmY/MToyJmY/Mzo0JmY/MjowKSxhfX0sc3BlY2lhbDp7bG9hZDp7bm9CdWJibGU6ITB9LGZvY3VzOnt0cmlnZ2VyOmZ1bmN0aW9uKCl7aWYodGhpcyE9PWNiKCkmJnRoaXMuZm9jdXMpdHJ5e3JldHVybiB0aGlzLmZvY3VzKCksITF9Y2F0Y2goYSl7fX0sZGVsZWdhdGVUeXBlOlwiZm9jdXNpblwifSxibHVyOnt0cmlnZ2VyOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXM9PT1jYigpJiZ0aGlzLmJsdXI/KHRoaXMuYmx1cigpLCExKTp2b2lkIDB9LGRlbGVnYXRlVHlwZTpcImZvY3Vzb3V0XCJ9LGNsaWNrOnt0cmlnZ2VyOmZ1bmN0aW9uKCl7cmV0dXJuIG0ubm9kZU5hbWUodGhpcyxcImlucHV0XCIpJiZcImNoZWNrYm94XCI9PT10aGlzLnR5cGUmJnRoaXMuY2xpY2s/KHRoaXMuY2xpY2soKSwhMSk6dm9pZCAwfSxfZGVmYXVsdDpmdW5jdGlvbihhKXtyZXR1cm4gbS5ub2RlTmFtZShhLnRhcmdldCxcImFcIil9fSxiZWZvcmV1bmxvYWQ6e3Bvc3REaXNwYXRjaDpmdW5jdGlvbihhKXt2b2lkIDAhPT1hLnJlc3VsdCYmYS5vcmlnaW5hbEV2ZW50JiYoYS5vcmlnaW5hbEV2ZW50LnJldHVyblZhbHVlPWEucmVzdWx0KX19fSxzaW11bGF0ZTpmdW5jdGlvbihhLGIsYyxkKXt2YXIgZT1tLmV4dGVuZChuZXcgbS5FdmVudCxjLHt0eXBlOmEsaXNTaW11bGF0ZWQ6ITAsb3JpZ2luYWxFdmVudDp7fX0pO2Q/bS5ldmVudC50cmlnZ2VyKGUsbnVsbCxiKTptLmV2ZW50LmRpc3BhdGNoLmNhbGwoYixlKSxlLmlzRGVmYXVsdFByZXZlbnRlZCgpJiZjLnByZXZlbnREZWZhdWx0KCl9fSxtLnJlbW92ZUV2ZW50PXkucmVtb3ZlRXZlbnRMaXN0ZW5lcj9mdW5jdGlvbihhLGIsYyl7YS5yZW1vdmVFdmVudExpc3RlbmVyJiZhLnJlbW92ZUV2ZW50TGlzdGVuZXIoYixjLCExKX06ZnVuY3Rpb24oYSxiLGMpe3ZhciBkPVwib25cIitiO2EuZGV0YWNoRXZlbnQmJih0eXBlb2YgYVtkXT09PUsmJihhW2RdPW51bGwpLGEuZGV0YWNoRXZlbnQoZCxjKSl9LG0uRXZlbnQ9ZnVuY3Rpb24oYSxiKXtyZXR1cm4gdGhpcyBpbnN0YW5jZW9mIG0uRXZlbnQ/KGEmJmEudHlwZT8odGhpcy5vcmlnaW5hbEV2ZW50PWEsdGhpcy50eXBlPWEudHlwZSx0aGlzLmlzRGVmYXVsdFByZXZlbnRlZD1hLmRlZmF1bHRQcmV2ZW50ZWR8fHZvaWQgMD09PWEuZGVmYXVsdFByZXZlbnRlZCYmYS5yZXR1cm5WYWx1ZT09PSExP2FiOmJiKTp0aGlzLnR5cGU9YSxiJiZtLmV4dGVuZCh0aGlzLGIpLHRoaXMudGltZVN0YW1wPWEmJmEudGltZVN0YW1wfHxtLm5vdygpLHZvaWQodGhpc1ttLmV4cGFuZG9dPSEwKSk6bmV3IG0uRXZlbnQoYSxiKX0sbS5FdmVudC5wcm90b3R5cGU9e2lzRGVmYXVsdFByZXZlbnRlZDpiYixpc1Byb3BhZ2F0aW9uU3RvcHBlZDpiYixpc0ltbWVkaWF0ZVByb3BhZ2F0aW9uU3RvcHBlZDpiYixwcmV2ZW50RGVmYXVsdDpmdW5jdGlvbigpe3ZhciBhPXRoaXMub3JpZ2luYWxFdmVudDt0aGlzLmlzRGVmYXVsdFByZXZlbnRlZD1hYixhJiYoYS5wcmV2ZW50RGVmYXVsdD9hLnByZXZlbnREZWZhdWx0KCk6YS5yZXR1cm5WYWx1ZT0hMSl9LHN0b3BQcm9wYWdhdGlvbjpmdW5jdGlvbigpe3ZhciBhPXRoaXMub3JpZ2luYWxFdmVudDt0aGlzLmlzUHJvcGFnYXRpb25TdG9wcGVkPWFiLGEmJihhLnN0b3BQcm9wYWdhdGlvbiYmYS5zdG9wUHJvcGFnYXRpb24oKSxhLmNhbmNlbEJ1YmJsZT0hMCl9LHN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbjpmdW5jdGlvbigpe3ZhciBhPXRoaXMub3JpZ2luYWxFdmVudDt0aGlzLmlzSW1tZWRpYXRlUHJvcGFnYXRpb25TdG9wcGVkPWFiLGEmJmEuc3RvcEltbWVkaWF0ZVByb3BhZ2F0aW9uJiZhLnN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbigpLHRoaXMuc3RvcFByb3BhZ2F0aW9uKCl9fSxtLmVhY2goe21vdXNlZW50ZXI6XCJtb3VzZW92ZXJcIixtb3VzZWxlYXZlOlwibW91c2VvdXRcIixwb2ludGVyZW50ZXI6XCJwb2ludGVyb3ZlclwiLHBvaW50ZXJsZWF2ZTpcInBvaW50ZXJvdXRcIn0sZnVuY3Rpb24oYSxiKXttLmV2ZW50LnNwZWNpYWxbYV09e2RlbGVnYXRlVHlwZTpiLGJpbmRUeXBlOmIsaGFuZGxlOmZ1bmN0aW9uKGEpe3ZhciBjLGQ9dGhpcyxlPWEucmVsYXRlZFRhcmdldCxmPWEuaGFuZGxlT2JqO3JldHVybighZXx8ZSE9PWQmJiFtLmNvbnRhaW5zKGQsZSkpJiYoYS50eXBlPWYub3JpZ1R5cGUsYz1mLmhhbmRsZXIuYXBwbHkodGhpcyxhcmd1bWVudHMpLGEudHlwZT1iKSxjfX19KSxrLnN1Ym1pdEJ1YmJsZXN8fChtLmV2ZW50LnNwZWNpYWwuc3VibWl0PXtzZXR1cDpmdW5jdGlvbigpe3JldHVybiBtLm5vZGVOYW1lKHRoaXMsXCJmb3JtXCIpPyExOnZvaWQgbS5ldmVudC5hZGQodGhpcyxcImNsaWNrLl9zdWJtaXQga2V5cHJlc3MuX3N1Ym1pdFwiLGZ1bmN0aW9uKGEpe3ZhciBiPWEudGFyZ2V0LGM9bS5ub2RlTmFtZShiLFwiaW5wdXRcIil8fG0ubm9kZU5hbWUoYixcImJ1dHRvblwiKT9iLmZvcm06dm9pZCAwO2MmJiFtLl9kYXRhKGMsXCJzdWJtaXRCdWJibGVzXCIpJiYobS5ldmVudC5hZGQoYyxcInN1Ym1pdC5fc3VibWl0XCIsZnVuY3Rpb24oYSl7YS5fc3VibWl0X2J1YmJsZT0hMH0pLG0uX2RhdGEoYyxcInN1Ym1pdEJ1YmJsZXNcIiwhMCkpfSl9LHBvc3REaXNwYXRjaDpmdW5jdGlvbihhKXthLl9zdWJtaXRfYnViYmxlJiYoZGVsZXRlIGEuX3N1Ym1pdF9idWJibGUsdGhpcy5wYXJlbnROb2RlJiYhYS5pc1RyaWdnZXImJm0uZXZlbnQuc2ltdWxhdGUoXCJzdWJtaXRcIix0aGlzLnBhcmVudE5vZGUsYSwhMCkpfSx0ZWFyZG93bjpmdW5jdGlvbigpe3JldHVybiBtLm5vZGVOYW1lKHRoaXMsXCJmb3JtXCIpPyExOnZvaWQgbS5ldmVudC5yZW1vdmUodGhpcyxcIi5fc3VibWl0XCIpfX0pLGsuY2hhbmdlQnViYmxlc3x8KG0uZXZlbnQuc3BlY2lhbC5jaGFuZ2U9e3NldHVwOmZ1bmN0aW9uKCl7cmV0dXJuIFgudGVzdCh0aGlzLm5vZGVOYW1lKT8oKFwiY2hlY2tib3hcIj09PXRoaXMudHlwZXx8XCJyYWRpb1wiPT09dGhpcy50eXBlKSYmKG0uZXZlbnQuYWRkKHRoaXMsXCJwcm9wZXJ0eWNoYW5nZS5fY2hhbmdlXCIsZnVuY3Rpb24oYSl7XCJjaGVja2VkXCI9PT1hLm9yaWdpbmFsRXZlbnQucHJvcGVydHlOYW1lJiYodGhpcy5fanVzdF9jaGFuZ2VkPSEwKX0pLG0uZXZlbnQuYWRkKHRoaXMsXCJjbGljay5fY2hhbmdlXCIsZnVuY3Rpb24oYSl7dGhpcy5fanVzdF9jaGFuZ2VkJiYhYS5pc1RyaWdnZXImJih0aGlzLl9qdXN0X2NoYW5nZWQ9ITEpLG0uZXZlbnQuc2ltdWxhdGUoXCJjaGFuZ2VcIix0aGlzLGEsITApfSkpLCExKTp2b2lkIG0uZXZlbnQuYWRkKHRoaXMsXCJiZWZvcmVhY3RpdmF0ZS5fY2hhbmdlXCIsZnVuY3Rpb24oYSl7dmFyIGI9YS50YXJnZXQ7WC50ZXN0KGIubm9kZU5hbWUpJiYhbS5fZGF0YShiLFwiY2hhbmdlQnViYmxlc1wiKSYmKG0uZXZlbnQuYWRkKGIsXCJjaGFuZ2UuX2NoYW5nZVwiLGZ1bmN0aW9uKGEpeyF0aGlzLnBhcmVudE5vZGV8fGEuaXNTaW11bGF0ZWR8fGEuaXNUcmlnZ2VyfHxtLmV2ZW50LnNpbXVsYXRlKFwiY2hhbmdlXCIsdGhpcy5wYXJlbnROb2RlLGEsITApfSksbS5fZGF0YShiLFwiY2hhbmdlQnViYmxlc1wiLCEwKSl9KX0saGFuZGxlOmZ1bmN0aW9uKGEpe3ZhciBiPWEudGFyZ2V0O3JldHVybiB0aGlzIT09Ynx8YS5pc1NpbXVsYXRlZHx8YS5pc1RyaWdnZXJ8fFwicmFkaW9cIiE9PWIudHlwZSYmXCJjaGVja2JveFwiIT09Yi50eXBlP2EuaGFuZGxlT2JqLmhhbmRsZXIuYXBwbHkodGhpcyxhcmd1bWVudHMpOnZvaWQgMH0sdGVhcmRvd246ZnVuY3Rpb24oKXtyZXR1cm4gbS5ldmVudC5yZW1vdmUodGhpcyxcIi5fY2hhbmdlXCIpLCFYLnRlc3QodGhpcy5ub2RlTmFtZSl9fSksay5mb2N1c2luQnViYmxlc3x8bS5lYWNoKHtmb2N1czpcImZvY3VzaW5cIixibHVyOlwiZm9jdXNvdXRcIn0sZnVuY3Rpb24oYSxiKXt2YXIgYz1mdW5jdGlvbihhKXttLmV2ZW50LnNpbXVsYXRlKGIsYS50YXJnZXQsbS5ldmVudC5maXgoYSksITApfTttLmV2ZW50LnNwZWNpYWxbYl09e3NldHVwOmZ1bmN0aW9uKCl7dmFyIGQ9dGhpcy5vd25lckRvY3VtZW50fHx0aGlzLGU9bS5fZGF0YShkLGIpO2V8fGQuYWRkRXZlbnRMaXN0ZW5lcihhLGMsITApLG0uX2RhdGEoZCxiLChlfHwwKSsxKX0sdGVhcmRvd246ZnVuY3Rpb24oKXt2YXIgZD10aGlzLm93bmVyRG9jdW1lbnR8fHRoaXMsZT1tLl9kYXRhKGQsYiktMTtlP20uX2RhdGEoZCxiLGUpOihkLnJlbW92ZUV2ZW50TGlzdGVuZXIoYSxjLCEwKSxtLl9yZW1vdmVEYXRhKGQsYikpfX19KSxtLmZuLmV4dGVuZCh7b246ZnVuY3Rpb24oYSxiLGMsZCxlKXt2YXIgZixnO2lmKFwib2JqZWN0XCI9PXR5cGVvZiBhKXtcInN0cmluZ1wiIT10eXBlb2YgYiYmKGM9Y3x8YixiPXZvaWQgMCk7Zm9yKGYgaW4gYSl0aGlzLm9uKGYsYixjLGFbZl0sZSk7cmV0dXJuIHRoaXN9aWYobnVsbD09YyYmbnVsbD09ZD8oZD1iLGM9Yj12b2lkIDApOm51bGw9PWQmJihcInN0cmluZ1wiPT10eXBlb2YgYj8oZD1jLGM9dm9pZCAwKTooZD1jLGM9YixiPXZvaWQgMCkpLGQ9PT0hMSlkPWJiO2Vsc2UgaWYoIWQpcmV0dXJuIHRoaXM7cmV0dXJuIDE9PT1lJiYoZz1kLGQ9ZnVuY3Rpb24oYSl7cmV0dXJuIG0oKS5vZmYoYSksZy5hcHBseSh0aGlzLGFyZ3VtZW50cyl9LGQuZ3VpZD1nLmd1aWR8fChnLmd1aWQ9bS5ndWlkKyspKSx0aGlzLmVhY2goZnVuY3Rpb24oKXttLmV2ZW50LmFkZCh0aGlzLGEsZCxjLGIpfSl9LG9uZTpmdW5jdGlvbihhLGIsYyxkKXtyZXR1cm4gdGhpcy5vbihhLGIsYyxkLDEpfSxvZmY6ZnVuY3Rpb24oYSxiLGMpe3ZhciBkLGU7aWYoYSYmYS5wcmV2ZW50RGVmYXVsdCYmYS5oYW5kbGVPYmopcmV0dXJuIGQ9YS5oYW5kbGVPYmosbShhLmRlbGVnYXRlVGFyZ2V0KS5vZmYoZC5uYW1lc3BhY2U/ZC5vcmlnVHlwZStcIi5cIitkLm5hbWVzcGFjZTpkLm9yaWdUeXBlLGQuc2VsZWN0b3IsZC5oYW5kbGVyKSx0aGlzO2lmKFwib2JqZWN0XCI9PXR5cGVvZiBhKXtmb3IoZSBpbiBhKXRoaXMub2ZmKGUsYixhW2VdKTtyZXR1cm4gdGhpc31yZXR1cm4oYj09PSExfHxcImZ1bmN0aW9uXCI9PXR5cGVvZiBiKSYmKGM9YixiPXZvaWQgMCksYz09PSExJiYoYz1iYiksdGhpcy5lYWNoKGZ1bmN0aW9uKCl7bS5ldmVudC5yZW1vdmUodGhpcyxhLGMsYil9KX0sdHJpZ2dlcjpmdW5jdGlvbihhLGIpe3JldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oKXttLmV2ZW50LnRyaWdnZXIoYSxiLHRoaXMpfSl9LHRyaWdnZXJIYW5kbGVyOmZ1bmN0aW9uKGEsYil7dmFyIGM9dGhpc1swXTtyZXR1cm4gYz9tLmV2ZW50LnRyaWdnZXIoYSxiLGMsITApOnZvaWQgMH19KTtmdW5jdGlvbiBkYihhKXt2YXIgYj1lYi5zcGxpdChcInxcIiksYz1hLmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKTtpZihjLmNyZWF0ZUVsZW1lbnQpd2hpbGUoYi5sZW5ndGgpYy5jcmVhdGVFbGVtZW50KGIucG9wKCkpO3JldHVybiBjfXZhciBlYj1cImFiYnJ8YXJ0aWNsZXxhc2lkZXxhdWRpb3xiZGl8Y2FudmFzfGRhdGF8ZGF0YWxpc3R8ZGV0YWlsc3xmaWdjYXB0aW9ufGZpZ3VyZXxmb290ZXJ8aGVhZGVyfGhncm91cHxtYXJrfG1ldGVyfG5hdnxvdXRwdXR8cHJvZ3Jlc3N8c2VjdGlvbnxzdW1tYXJ5fHRpbWV8dmlkZW9cIixmYj0vIGpRdWVyeVxcZCs9XCIoPzpudWxsfFxcZCspXCIvZyxnYj1uZXcgUmVnRXhwKFwiPCg/OlwiK2ViK1wiKVtcXFxccy8+XVwiLFwiaVwiKSxoYj0vXlxccysvLGliPS88KD8hYXJlYXxicnxjb2x8ZW1iZWR8aHJ8aW1nfGlucHV0fGxpbmt8bWV0YXxwYXJhbSkoKFtcXHc6XSspW14+XSopXFwvPi9naSxqYj0vPChbXFx3Ol0rKS8sa2I9Lzx0Ym9keS9pLGxiPS88fCYjP1xcdys7LyxtYj0vPCg/OnNjcmlwdHxzdHlsZXxsaW5rKS9pLG5iPS9jaGVja2VkXFxzKig/OltePV18PVxccyouY2hlY2tlZC4pL2ksb2I9L14kfFxcLyg/OmphdmF8ZWNtYSlzY3JpcHQvaSxwYj0vXnRydWVcXC8oLiopLyxxYj0vXlxccyo8ISg/OlxcW0NEQVRBXFxbfC0tKXwoPzpcXF1cXF18LS0pPlxccyokL2cscmI9e29wdGlvbjpbMSxcIjxzZWxlY3QgbXVsdGlwbGU9J211bHRpcGxlJz5cIixcIjwvc2VsZWN0PlwiXSxsZWdlbmQ6WzEsXCI8ZmllbGRzZXQ+XCIsXCI8L2ZpZWxkc2V0PlwiXSxhcmVhOlsxLFwiPG1hcD5cIixcIjwvbWFwPlwiXSxwYXJhbTpbMSxcIjxvYmplY3Q+XCIsXCI8L29iamVjdD5cIl0sdGhlYWQ6WzEsXCI8dGFibGU+XCIsXCI8L3RhYmxlPlwiXSx0cjpbMixcIjx0YWJsZT48dGJvZHk+XCIsXCI8L3Rib2R5PjwvdGFibGU+XCJdLGNvbDpbMixcIjx0YWJsZT48dGJvZHk+PC90Ym9keT48Y29sZ3JvdXA+XCIsXCI8L2NvbGdyb3VwPjwvdGFibGU+XCJdLHRkOlszLFwiPHRhYmxlPjx0Ym9keT48dHI+XCIsXCI8L3RyPjwvdGJvZHk+PC90YWJsZT5cIl0sX2RlZmF1bHQ6ay5odG1sU2VyaWFsaXplP1swLFwiXCIsXCJcIl06WzEsXCJYPGRpdj5cIixcIjwvZGl2PlwiXX0sc2I9ZGIoeSksdGI9c2IuYXBwZW5kQ2hpbGQoeS5jcmVhdGVFbGVtZW50KFwiZGl2XCIpKTtyYi5vcHRncm91cD1yYi5vcHRpb24scmIudGJvZHk9cmIudGZvb3Q9cmIuY29sZ3JvdXA9cmIuY2FwdGlvbj1yYi50aGVhZCxyYi50aD1yYi50ZDtmdW5jdGlvbiB1YihhLGIpe3ZhciBjLGQsZT0wLGY9dHlwZW9mIGEuZ2V0RWxlbWVudHNCeVRhZ05hbWUhPT1LP2EuZ2V0RWxlbWVudHNCeVRhZ05hbWUoYnx8XCIqXCIpOnR5cGVvZiBhLnF1ZXJ5U2VsZWN0b3JBbGwhPT1LP2EucXVlcnlTZWxlY3RvckFsbChifHxcIipcIik6dm9pZCAwO2lmKCFmKWZvcihmPVtdLGM9YS5jaGlsZE5vZGVzfHxhO251bGwhPShkPWNbZV0pO2UrKykhYnx8bS5ub2RlTmFtZShkLGIpP2YucHVzaChkKTptLm1lcmdlKGYsdWIoZCxiKSk7cmV0dXJuIHZvaWQgMD09PWJ8fGImJm0ubm9kZU5hbWUoYSxiKT9tLm1lcmdlKFthXSxmKTpmfWZ1bmN0aW9uIHZiKGEpe1cudGVzdChhLnR5cGUpJiYoYS5kZWZhdWx0Q2hlY2tlZD1hLmNoZWNrZWQpfWZ1bmN0aW9uIHdiKGEsYil7cmV0dXJuIG0ubm9kZU5hbWUoYSxcInRhYmxlXCIpJiZtLm5vZGVOYW1lKDExIT09Yi5ub2RlVHlwZT9iOmIuZmlyc3RDaGlsZCxcInRyXCIpP2EuZ2V0RWxlbWVudHNCeVRhZ05hbWUoXCJ0Ym9keVwiKVswXXx8YS5hcHBlbmRDaGlsZChhLm93bmVyRG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInRib2R5XCIpKTphfWZ1bmN0aW9uIHhiKGEpe3JldHVybiBhLnR5cGU9KG51bGwhPT1tLmZpbmQuYXR0cihhLFwidHlwZVwiKSkrXCIvXCIrYS50eXBlLGF9ZnVuY3Rpb24geWIoYSl7dmFyIGI9cGIuZXhlYyhhLnR5cGUpO3JldHVybiBiP2EudHlwZT1iWzFdOmEucmVtb3ZlQXR0cmlidXRlKFwidHlwZVwiKSxhfWZ1bmN0aW9uIHpiKGEsYil7Zm9yKHZhciBjLGQ9MDtudWxsIT0oYz1hW2RdKTtkKyspbS5fZGF0YShjLFwiZ2xvYmFsRXZhbFwiLCFifHxtLl9kYXRhKGJbZF0sXCJnbG9iYWxFdmFsXCIpKX1mdW5jdGlvbiBBYihhLGIpe2lmKDE9PT1iLm5vZGVUeXBlJiZtLmhhc0RhdGEoYSkpe3ZhciBjLGQsZSxmPW0uX2RhdGEoYSksZz1tLl9kYXRhKGIsZiksaD1mLmV2ZW50cztpZihoKXtkZWxldGUgZy5oYW5kbGUsZy5ldmVudHM9e307Zm9yKGMgaW4gaClmb3IoZD0wLGU9aFtjXS5sZW5ndGg7ZT5kO2QrKyltLmV2ZW50LmFkZChiLGMsaFtjXVtkXSl9Zy5kYXRhJiYoZy5kYXRhPW0uZXh0ZW5kKHt9LGcuZGF0YSkpfX1mdW5jdGlvbiBCYihhLGIpe3ZhciBjLGQsZTtpZigxPT09Yi5ub2RlVHlwZSl7aWYoYz1iLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCksIWsubm9DbG9uZUV2ZW50JiZiW20uZXhwYW5kb10pe2U9bS5fZGF0YShiKTtmb3IoZCBpbiBlLmV2ZW50cyltLnJlbW92ZUV2ZW50KGIsZCxlLmhhbmRsZSk7Yi5yZW1vdmVBdHRyaWJ1dGUobS5leHBhbmRvKX1cInNjcmlwdFwiPT09YyYmYi50ZXh0IT09YS50ZXh0Pyh4YihiKS50ZXh0PWEudGV4dCx5YihiKSk6XCJvYmplY3RcIj09PWM/KGIucGFyZW50Tm9kZSYmKGIub3V0ZXJIVE1MPWEub3V0ZXJIVE1MKSxrLmh0bWw1Q2xvbmUmJmEuaW5uZXJIVE1MJiYhbS50cmltKGIuaW5uZXJIVE1MKSYmKGIuaW5uZXJIVE1MPWEuaW5uZXJIVE1MKSk6XCJpbnB1dFwiPT09YyYmVy50ZXN0KGEudHlwZSk/KGIuZGVmYXVsdENoZWNrZWQ9Yi5jaGVja2VkPWEuY2hlY2tlZCxiLnZhbHVlIT09YS52YWx1ZSYmKGIudmFsdWU9YS52YWx1ZSkpOlwib3B0aW9uXCI9PT1jP2IuZGVmYXVsdFNlbGVjdGVkPWIuc2VsZWN0ZWQ9YS5kZWZhdWx0U2VsZWN0ZWQ6KFwiaW5wdXRcIj09PWN8fFwidGV4dGFyZWFcIj09PWMpJiYoYi5kZWZhdWx0VmFsdWU9YS5kZWZhdWx0VmFsdWUpfX1tLmV4dGVuZCh7Y2xvbmU6ZnVuY3Rpb24oYSxiLGMpe3ZhciBkLGUsZixnLGgsaT1tLmNvbnRhaW5zKGEub3duZXJEb2N1bWVudCxhKTtpZihrLmh0bWw1Q2xvbmV8fG0uaXNYTUxEb2MoYSl8fCFnYi50ZXN0KFwiPFwiK2Eubm9kZU5hbWUrXCI+XCIpP2Y9YS5jbG9uZU5vZGUoITApOih0Yi5pbm5lckhUTUw9YS5vdXRlckhUTUwsdGIucmVtb3ZlQ2hpbGQoZj10Yi5maXJzdENoaWxkKSksIShrLm5vQ2xvbmVFdmVudCYmay5ub0Nsb25lQ2hlY2tlZHx8MSE9PWEubm9kZVR5cGUmJjExIT09YS5ub2RlVHlwZXx8bS5pc1hNTERvYyhhKSkpZm9yKGQ9dWIoZiksaD11YihhKSxnPTA7bnVsbCE9KGU9aFtnXSk7KytnKWRbZ10mJkJiKGUsZFtnXSk7aWYoYilpZihjKWZvcihoPWh8fHViKGEpLGQ9ZHx8dWIoZiksZz0wO251bGwhPShlPWhbZ10pO2crKylBYihlLGRbZ10pO2Vsc2UgQWIoYSxmKTtyZXR1cm4gZD11YihmLFwic2NyaXB0XCIpLGQubGVuZ3RoPjAmJnpiKGQsIWkmJnViKGEsXCJzY3JpcHRcIikpLGQ9aD1lPW51bGwsZn0sYnVpbGRGcmFnbWVudDpmdW5jdGlvbihhLGIsYyxkKXtmb3IodmFyIGUsZixnLGgsaSxqLGwsbj1hLmxlbmd0aCxvPWRiKGIpLHA9W10scT0wO24+cTtxKyspaWYoZj1hW3FdLGZ8fDA9PT1mKWlmKFwib2JqZWN0XCI9PT1tLnR5cGUoZikpbS5tZXJnZShwLGYubm9kZVR5cGU/W2ZdOmYpO2Vsc2UgaWYobGIudGVzdChmKSl7aD1ofHxvLmFwcGVuZENoaWxkKGIuY3JlYXRlRWxlbWVudChcImRpdlwiKSksaT0oamIuZXhlYyhmKXx8W1wiXCIsXCJcIl0pWzFdLnRvTG93ZXJDYXNlKCksbD1yYltpXXx8cmIuX2RlZmF1bHQsaC5pbm5lckhUTUw9bFsxXStmLnJlcGxhY2UoaWIsXCI8JDE+PC8kMj5cIikrbFsyXSxlPWxbMF07d2hpbGUoZS0tKWg9aC5sYXN0Q2hpbGQ7aWYoIWsubGVhZGluZ1doaXRlc3BhY2UmJmhiLnRlc3QoZikmJnAucHVzaChiLmNyZWF0ZVRleHROb2RlKGhiLmV4ZWMoZilbMF0pKSwhay50Ym9keSl7Zj1cInRhYmxlXCIhPT1pfHxrYi50ZXN0KGYpP1wiPHRhYmxlPlwiIT09bFsxXXx8a2IudGVzdChmKT8wOmg6aC5maXJzdENoaWxkLGU9ZiYmZi5jaGlsZE5vZGVzLmxlbmd0aDt3aGlsZShlLS0pbS5ub2RlTmFtZShqPWYuY2hpbGROb2Rlc1tlXSxcInRib2R5XCIpJiYhai5jaGlsZE5vZGVzLmxlbmd0aCYmZi5yZW1vdmVDaGlsZChqKX1tLm1lcmdlKHAsaC5jaGlsZE5vZGVzKSxoLnRleHRDb250ZW50PVwiXCI7d2hpbGUoaC5maXJzdENoaWxkKWgucmVtb3ZlQ2hpbGQoaC5maXJzdENoaWxkKTtoPW8ubGFzdENoaWxkfWVsc2UgcC5wdXNoKGIuY3JlYXRlVGV4dE5vZGUoZikpO2gmJm8ucmVtb3ZlQ2hpbGQoaCksay5hcHBlbmRDaGVja2VkfHxtLmdyZXAodWIocCxcImlucHV0XCIpLHZiKSxxPTA7d2hpbGUoZj1wW3ErK10paWYoKCFkfHwtMT09PW0uaW5BcnJheShmLGQpKSYmKGc9bS5jb250YWlucyhmLm93bmVyRG9jdW1lbnQsZiksaD11YihvLmFwcGVuZENoaWxkKGYpLFwic2NyaXB0XCIpLGcmJnpiKGgpLGMpKXtlPTA7d2hpbGUoZj1oW2UrK10pb2IudGVzdChmLnR5cGV8fFwiXCIpJiZjLnB1c2goZil9cmV0dXJuIGg9bnVsbCxvfSxjbGVhbkRhdGE6ZnVuY3Rpb24oYSxiKXtmb3IodmFyIGQsZSxmLGcsaD0wLGk9bS5leHBhbmRvLGo9bS5jYWNoZSxsPWsuZGVsZXRlRXhwYW5kbyxuPW0uZXZlbnQuc3BlY2lhbDtudWxsIT0oZD1hW2hdKTtoKyspaWYoKGJ8fG0uYWNjZXB0RGF0YShkKSkmJihmPWRbaV0sZz1mJiZqW2ZdKSl7aWYoZy5ldmVudHMpZm9yKGUgaW4gZy5ldmVudHMpbltlXT9tLmV2ZW50LnJlbW92ZShkLGUpOm0ucmVtb3ZlRXZlbnQoZCxlLGcuaGFuZGxlKTtqW2ZdJiYoZGVsZXRlIGpbZl0sbD9kZWxldGUgZFtpXTp0eXBlb2YgZC5yZW1vdmVBdHRyaWJ1dGUhPT1LP2QucmVtb3ZlQXR0cmlidXRlKGkpOmRbaV09bnVsbCxjLnB1c2goZikpfX19KSxtLmZuLmV4dGVuZCh7dGV4dDpmdW5jdGlvbihhKXtyZXR1cm4gVih0aGlzLGZ1bmN0aW9uKGEpe3JldHVybiB2b2lkIDA9PT1hP20udGV4dCh0aGlzKTp0aGlzLmVtcHR5KCkuYXBwZW5kKCh0aGlzWzBdJiZ0aGlzWzBdLm93bmVyRG9jdW1lbnR8fHkpLmNyZWF0ZVRleHROb2RlKGEpKX0sbnVsbCxhLGFyZ3VtZW50cy5sZW5ndGgpfSxhcHBlbmQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5kb21NYW5pcChhcmd1bWVudHMsZnVuY3Rpb24oYSl7aWYoMT09PXRoaXMubm9kZVR5cGV8fDExPT09dGhpcy5ub2RlVHlwZXx8OT09PXRoaXMubm9kZVR5cGUpe3ZhciBiPXdiKHRoaXMsYSk7Yi5hcHBlbmRDaGlsZChhKX19KX0scHJlcGVuZDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmRvbU1hbmlwKGFyZ3VtZW50cyxmdW5jdGlvbihhKXtpZigxPT09dGhpcy5ub2RlVHlwZXx8MTE9PT10aGlzLm5vZGVUeXBlfHw5PT09dGhpcy5ub2RlVHlwZSl7dmFyIGI9d2IodGhpcyxhKTtiLmluc2VydEJlZm9yZShhLGIuZmlyc3RDaGlsZCl9fSl9LGJlZm9yZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLmRvbU1hbmlwKGFyZ3VtZW50cyxmdW5jdGlvbihhKXt0aGlzLnBhcmVudE5vZGUmJnRoaXMucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUoYSx0aGlzKX0pfSxhZnRlcjpmdW5jdGlvbigpe3JldHVybiB0aGlzLmRvbU1hbmlwKGFyZ3VtZW50cyxmdW5jdGlvbihhKXt0aGlzLnBhcmVudE5vZGUmJnRoaXMucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUoYSx0aGlzLm5leHRTaWJsaW5nKX0pfSxyZW1vdmU6ZnVuY3Rpb24oYSxiKXtmb3IodmFyIGMsZD1hP20uZmlsdGVyKGEsdGhpcyk6dGhpcyxlPTA7bnVsbCE9KGM9ZFtlXSk7ZSsrKWJ8fDEhPT1jLm5vZGVUeXBlfHxtLmNsZWFuRGF0YSh1YihjKSksYy5wYXJlbnROb2RlJiYoYiYmbS5jb250YWlucyhjLm93bmVyRG9jdW1lbnQsYykmJnpiKHViKGMsXCJzY3JpcHRcIikpLGMucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChjKSk7cmV0dXJuIHRoaXN9LGVtcHR5OmZ1bmN0aW9uKCl7Zm9yKHZhciBhLGI9MDtudWxsIT0oYT10aGlzW2JdKTtiKyspezE9PT1hLm5vZGVUeXBlJiZtLmNsZWFuRGF0YSh1YihhLCExKSk7d2hpbGUoYS5maXJzdENoaWxkKWEucmVtb3ZlQ2hpbGQoYS5maXJzdENoaWxkKTthLm9wdGlvbnMmJm0ubm9kZU5hbWUoYSxcInNlbGVjdFwiKSYmKGEub3B0aW9ucy5sZW5ndGg9MCl9cmV0dXJuIHRoaXN9LGNsb25lOmZ1bmN0aW9uKGEsYil7cmV0dXJuIGE9bnVsbD09YT8hMTphLGI9bnVsbD09Yj9hOmIsdGhpcy5tYXAoZnVuY3Rpb24oKXtyZXR1cm4gbS5jbG9uZSh0aGlzLGEsYil9KX0saHRtbDpmdW5jdGlvbihhKXtyZXR1cm4gVih0aGlzLGZ1bmN0aW9uKGEpe3ZhciBiPXRoaXNbMF18fHt9LGM9MCxkPXRoaXMubGVuZ3RoO2lmKHZvaWQgMD09PWEpcmV0dXJuIDE9PT1iLm5vZGVUeXBlP2IuaW5uZXJIVE1MLnJlcGxhY2UoZmIsXCJcIik6dm9pZCAwO2lmKCEoXCJzdHJpbmdcIiE9dHlwZW9mIGF8fG1iLnRlc3QoYSl8fCFrLmh0bWxTZXJpYWxpemUmJmdiLnRlc3QoYSl8fCFrLmxlYWRpbmdXaGl0ZXNwYWNlJiZoYi50ZXN0KGEpfHxyYlsoamIuZXhlYyhhKXx8W1wiXCIsXCJcIl0pWzFdLnRvTG93ZXJDYXNlKCldKSl7YT1hLnJlcGxhY2UoaWIsXCI8JDE+PC8kMj5cIik7dHJ5e2Zvcig7ZD5jO2MrKyliPXRoaXNbY118fHt9LDE9PT1iLm5vZGVUeXBlJiYobS5jbGVhbkRhdGEodWIoYiwhMSkpLGIuaW5uZXJIVE1MPWEpO2I9MH1jYXRjaChlKXt9fWImJnRoaXMuZW1wdHkoKS5hcHBlbmQoYSl9LG51bGwsYSxhcmd1bWVudHMubGVuZ3RoKX0scmVwbGFjZVdpdGg6ZnVuY3Rpb24oKXt2YXIgYT1hcmd1bWVudHNbMF07cmV0dXJuIHRoaXMuZG9tTWFuaXAoYXJndW1lbnRzLGZ1bmN0aW9uKGIpe2E9dGhpcy5wYXJlbnROb2RlLG0uY2xlYW5EYXRhKHViKHRoaXMpKSxhJiZhLnJlcGxhY2VDaGlsZChiLHRoaXMpfSksYSYmKGEubGVuZ3RofHxhLm5vZGVUeXBlKT90aGlzOnRoaXMucmVtb3ZlKCl9LGRldGFjaDpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5yZW1vdmUoYSwhMCl9LGRvbU1hbmlwOmZ1bmN0aW9uKGEsYil7YT1lLmFwcGx5KFtdLGEpO3ZhciBjLGQsZixnLGgsaSxqPTAsbD10aGlzLmxlbmd0aCxuPXRoaXMsbz1sLTEscD1hWzBdLHE9bS5pc0Z1bmN0aW9uKHApO2lmKHF8fGw+MSYmXCJzdHJpbmdcIj09dHlwZW9mIHAmJiFrLmNoZWNrQ2xvbmUmJm5iLnRlc3QocCkpcmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbihjKXt2YXIgZD1uLmVxKGMpO3EmJihhWzBdPXAuY2FsbCh0aGlzLGMsZC5odG1sKCkpKSxkLmRvbU1hbmlwKGEsYil9KTtpZihsJiYoaT1tLmJ1aWxkRnJhZ21lbnQoYSx0aGlzWzBdLm93bmVyRG9jdW1lbnQsITEsdGhpcyksYz1pLmZpcnN0Q2hpbGQsMT09PWkuY2hpbGROb2Rlcy5sZW5ndGgmJihpPWMpLGMpKXtmb3IoZz1tLm1hcCh1YihpLFwic2NyaXB0XCIpLHhiKSxmPWcubGVuZ3RoO2w+ajtqKyspZD1pLGohPT1vJiYoZD1tLmNsb25lKGQsITAsITApLGYmJm0ubWVyZ2UoZyx1YihkLFwic2NyaXB0XCIpKSksYi5jYWxsKHRoaXNbal0sZCxqKTtpZihmKWZvcihoPWdbZy5sZW5ndGgtMV0ub3duZXJEb2N1bWVudCxtLm1hcChnLHliKSxqPTA7Zj5qO2orKylkPWdbal0sb2IudGVzdChkLnR5cGV8fFwiXCIpJiYhbS5fZGF0YShkLFwiZ2xvYmFsRXZhbFwiKSYmbS5jb250YWlucyhoLGQpJiYoZC5zcmM/bS5fZXZhbFVybCYmbS5fZXZhbFVybChkLnNyYyk6bS5nbG9iYWxFdmFsKChkLnRleHR8fGQudGV4dENvbnRlbnR8fGQuaW5uZXJIVE1MfHxcIlwiKS5yZXBsYWNlKHFiLFwiXCIpKSk7aT1jPW51bGx9cmV0dXJuIHRoaXN9fSksbS5lYWNoKHthcHBlbmRUbzpcImFwcGVuZFwiLHByZXBlbmRUbzpcInByZXBlbmRcIixpbnNlcnRCZWZvcmU6XCJiZWZvcmVcIixpbnNlcnRBZnRlcjpcImFmdGVyXCIscmVwbGFjZUFsbDpcInJlcGxhY2VXaXRoXCJ9LGZ1bmN0aW9uKGEsYil7bS5mblthXT1mdW5jdGlvbihhKXtmb3IodmFyIGMsZD0wLGU9W10sZz1tKGEpLGg9Zy5sZW5ndGgtMTtoPj1kO2QrKyljPWQ9PT1oP3RoaXM6dGhpcy5jbG9uZSghMCksbShnW2RdKVtiXShjKSxmLmFwcGx5KGUsYy5nZXQoKSk7cmV0dXJuIHRoaXMucHVzaFN0YWNrKGUpfX0pO3ZhciBDYixEYj17fTtmdW5jdGlvbiBFYihiLGMpe3ZhciBkLGU9bShjLmNyZWF0ZUVsZW1lbnQoYikpLmFwcGVuZFRvKGMuYm9keSksZj1hLmdldERlZmF1bHRDb21wdXRlZFN0eWxlJiYoZD1hLmdldERlZmF1bHRDb21wdXRlZFN0eWxlKGVbMF0pKT9kLmRpc3BsYXk6bS5jc3MoZVswXSxcImRpc3BsYXlcIik7cmV0dXJuIGUuZGV0YWNoKCksZn1mdW5jdGlvbiBGYihhKXt2YXIgYj15LGM9RGJbYV07cmV0dXJuIGN8fChjPUViKGEsYiksXCJub25lXCIhPT1jJiZjfHwoQ2I9KENifHxtKFwiPGlmcmFtZSBmcmFtZWJvcmRlcj0nMCcgd2lkdGg9JzAnIGhlaWdodD0nMCcvPlwiKSkuYXBwZW5kVG8oYi5kb2N1bWVudEVsZW1lbnQpLGI9KENiWzBdLmNvbnRlbnRXaW5kb3d8fENiWzBdLmNvbnRlbnREb2N1bWVudCkuZG9jdW1lbnQsYi53cml0ZSgpLGIuY2xvc2UoKSxjPUViKGEsYiksQ2IuZGV0YWNoKCkpLERiW2FdPWMpLGN9IWZ1bmN0aW9uKCl7dmFyIGE7ay5zaHJpbmtXcmFwQmxvY2tzPWZ1bmN0aW9uKCl7aWYobnVsbCE9YSlyZXR1cm4gYTthPSExO3ZhciBiLGMsZDtyZXR1cm4gYz15LmdldEVsZW1lbnRzQnlUYWdOYW1lKFwiYm9keVwiKVswXSxjJiZjLnN0eWxlPyhiPXkuY3JlYXRlRWxlbWVudChcImRpdlwiKSxkPXkuY3JlYXRlRWxlbWVudChcImRpdlwiKSxkLnN0eWxlLmNzc1RleHQ9XCJwb3NpdGlvbjphYnNvbHV0ZTtib3JkZXI6MDt3aWR0aDowO2hlaWdodDowO3RvcDowO2xlZnQ6LTk5OTlweFwiLGMuYXBwZW5kQ2hpbGQoZCkuYXBwZW5kQ2hpbGQoYiksdHlwZW9mIGIuc3R5bGUuem9vbSE9PUsmJihiLnN0eWxlLmNzc1RleHQ9XCItd2Via2l0LWJveC1zaXppbmc6Y29udGVudC1ib3g7LW1vei1ib3gtc2l6aW5nOmNvbnRlbnQtYm94O2JveC1zaXppbmc6Y29udGVudC1ib3g7ZGlzcGxheTpibG9jazttYXJnaW46MDtib3JkZXI6MDtwYWRkaW5nOjFweDt3aWR0aDoxcHg7em9vbToxXCIsYi5hcHBlbmRDaGlsZCh5LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIikpLnN0eWxlLndpZHRoPVwiNXB4XCIsYT0zIT09Yi5vZmZzZXRXaWR0aCksYy5yZW1vdmVDaGlsZChkKSxhKTp2b2lkIDB9fSgpO3ZhciBHYj0vXm1hcmdpbi8sSGI9bmV3IFJlZ0V4cChcIl4oXCIrUytcIikoPyFweClbYS16JV0rJFwiLFwiaVwiKSxJYixKYixLYj0vXih0b3B8cmlnaHR8Ym90dG9tfGxlZnQpJC87YS5nZXRDb21wdXRlZFN0eWxlPyhJYj1mdW5jdGlvbihiKXtyZXR1cm4gYi5vd25lckRvY3VtZW50LmRlZmF1bHRWaWV3Lm9wZW5lcj9iLm93bmVyRG9jdW1lbnQuZGVmYXVsdFZpZXcuZ2V0Q29tcHV0ZWRTdHlsZShiLG51bGwpOmEuZ2V0Q29tcHV0ZWRTdHlsZShiLG51bGwpfSxKYj1mdW5jdGlvbihhLGIsYyl7dmFyIGQsZSxmLGcsaD1hLnN0eWxlO3JldHVybiBjPWN8fEliKGEpLGc9Yz9jLmdldFByb3BlcnR5VmFsdWUoYil8fGNbYl06dm9pZCAwLGMmJihcIlwiIT09Z3x8bS5jb250YWlucyhhLm93bmVyRG9jdW1lbnQsYSl8fChnPW0uc3R5bGUoYSxiKSksSGIudGVzdChnKSYmR2IudGVzdChiKSYmKGQ9aC53aWR0aCxlPWgubWluV2lkdGgsZj1oLm1heFdpZHRoLGgubWluV2lkdGg9aC5tYXhXaWR0aD1oLndpZHRoPWcsZz1jLndpZHRoLGgud2lkdGg9ZCxoLm1pbldpZHRoPWUsaC5tYXhXaWR0aD1mKSksdm9pZCAwPT09Zz9nOmcrXCJcIn0pOnkuZG9jdW1lbnRFbGVtZW50LmN1cnJlbnRTdHlsZSYmKEliPWZ1bmN0aW9uKGEpe3JldHVybiBhLmN1cnJlbnRTdHlsZX0sSmI9ZnVuY3Rpb24oYSxiLGMpe3ZhciBkLGUsZixnLGg9YS5zdHlsZTtyZXR1cm4gYz1jfHxJYihhKSxnPWM/Y1tiXTp2b2lkIDAsbnVsbD09ZyYmaCYmaFtiXSYmKGc9aFtiXSksSGIudGVzdChnKSYmIUtiLnRlc3QoYikmJihkPWgubGVmdCxlPWEucnVudGltZVN0eWxlLGY9ZSYmZS5sZWZ0LGYmJihlLmxlZnQ9YS5jdXJyZW50U3R5bGUubGVmdCksaC5sZWZ0PVwiZm9udFNpemVcIj09PWI/XCIxZW1cIjpnLGc9aC5waXhlbExlZnQrXCJweFwiLGgubGVmdD1kLGYmJihlLmxlZnQ9ZikpLHZvaWQgMD09PWc/ZzpnK1wiXCJ8fFwiYXV0b1wifSk7ZnVuY3Rpb24gTGIoYSxiKXtyZXR1cm57Z2V0OmZ1bmN0aW9uKCl7dmFyIGM9YSgpO2lmKG51bGwhPWMpcmV0dXJuIGM/dm9pZCBkZWxldGUgdGhpcy5nZXQ6KHRoaXMuZ2V0PWIpLmFwcGx5KHRoaXMsYXJndW1lbnRzKX19fSFmdW5jdGlvbigpe3ZhciBiLGMsZCxlLGYsZyxoO2lmKGI9eS5jcmVhdGVFbGVtZW50KFwiZGl2XCIpLGIuaW5uZXJIVE1MPVwiICA8bGluay8+PHRhYmxlPjwvdGFibGU+PGEgaHJlZj0nL2EnPmE8L2E+PGlucHV0IHR5cGU9J2NoZWNrYm94Jy8+XCIsZD1iLmdldEVsZW1lbnRzQnlUYWdOYW1lKFwiYVwiKVswXSxjPWQmJmQuc3R5bGUpe2MuY3NzVGV4dD1cImZsb2F0OmxlZnQ7b3BhY2l0eTouNVwiLGsub3BhY2l0eT1cIjAuNVwiPT09Yy5vcGFjaXR5LGsuY3NzRmxvYXQ9ISFjLmNzc0Zsb2F0LGIuc3R5bGUuYmFja2dyb3VuZENsaXA9XCJjb250ZW50LWJveFwiLGIuY2xvbmVOb2RlKCEwKS5zdHlsZS5iYWNrZ3JvdW5kQ2xpcD1cIlwiLGsuY2xlYXJDbG9uZVN0eWxlPVwiY29udGVudC1ib3hcIj09PWIuc3R5bGUuYmFja2dyb3VuZENsaXAsay5ib3hTaXppbmc9XCJcIj09PWMuYm94U2l6aW5nfHxcIlwiPT09Yy5Nb3pCb3hTaXppbmd8fFwiXCI9PT1jLldlYmtpdEJveFNpemluZyxtLmV4dGVuZChrLHtyZWxpYWJsZUhpZGRlbk9mZnNldHM6ZnVuY3Rpb24oKXtyZXR1cm4gbnVsbD09ZyYmaSgpLGd9LGJveFNpemluZ1JlbGlhYmxlOmZ1bmN0aW9uKCl7cmV0dXJuIG51bGw9PWYmJmkoKSxmfSxwaXhlbFBvc2l0aW9uOmZ1bmN0aW9uKCl7cmV0dXJuIG51bGw9PWUmJmkoKSxlfSxyZWxpYWJsZU1hcmdpblJpZ2h0OmZ1bmN0aW9uKCl7cmV0dXJuIG51bGw9PWgmJmkoKSxofX0pO2Z1bmN0aW9uIGkoKXt2YXIgYixjLGQsaTtjPXkuZ2V0RWxlbWVudHNCeVRhZ05hbWUoXCJib2R5XCIpWzBdLGMmJmMuc3R5bGUmJihiPXkuY3JlYXRlRWxlbWVudChcImRpdlwiKSxkPXkuY3JlYXRlRWxlbWVudChcImRpdlwiKSxkLnN0eWxlLmNzc1RleHQ9XCJwb3NpdGlvbjphYnNvbHV0ZTtib3JkZXI6MDt3aWR0aDowO2hlaWdodDowO3RvcDowO2xlZnQ6LTk5OTlweFwiLGMuYXBwZW5kQ2hpbGQoZCkuYXBwZW5kQ2hpbGQoYiksYi5zdHlsZS5jc3NUZXh0PVwiLXdlYmtpdC1ib3gtc2l6aW5nOmJvcmRlci1ib3g7LW1vei1ib3gtc2l6aW5nOmJvcmRlci1ib3g7Ym94LXNpemluZzpib3JkZXItYm94O2Rpc3BsYXk6YmxvY2s7bWFyZ2luLXRvcDoxJTt0b3A6MSU7Ym9yZGVyOjFweDtwYWRkaW5nOjFweDt3aWR0aDo0cHg7cG9zaXRpb246YWJzb2x1dGVcIixlPWY9ITEsaD0hMCxhLmdldENvbXB1dGVkU3R5bGUmJihlPVwiMSVcIiE9PShhLmdldENvbXB1dGVkU3R5bGUoYixudWxsKXx8e30pLnRvcCxmPVwiNHB4XCI9PT0oYS5nZXRDb21wdXRlZFN0eWxlKGIsbnVsbCl8fHt3aWR0aDpcIjRweFwifSkud2lkdGgsaT1iLmFwcGVuZENoaWxkKHkuY3JlYXRlRWxlbWVudChcImRpdlwiKSksaS5zdHlsZS5jc3NUZXh0PWIuc3R5bGUuY3NzVGV4dD1cIi13ZWJraXQtYm94LXNpemluZzpjb250ZW50LWJveDstbW96LWJveC1zaXppbmc6Y29udGVudC1ib3g7Ym94LXNpemluZzpjb250ZW50LWJveDtkaXNwbGF5OmJsb2NrO21hcmdpbjowO2JvcmRlcjowO3BhZGRpbmc6MFwiLGkuc3R5bGUubWFyZ2luUmlnaHQ9aS5zdHlsZS53aWR0aD1cIjBcIixiLnN0eWxlLndpZHRoPVwiMXB4XCIsaD0hcGFyc2VGbG9hdCgoYS5nZXRDb21wdXRlZFN0eWxlKGksbnVsbCl8fHt9KS5tYXJnaW5SaWdodCksYi5yZW1vdmVDaGlsZChpKSksYi5pbm5lckhUTUw9XCI8dGFibGU+PHRyPjx0ZD48L3RkPjx0ZD50PC90ZD48L3RyPjwvdGFibGU+XCIsaT1iLmdldEVsZW1lbnRzQnlUYWdOYW1lKFwidGRcIiksaVswXS5zdHlsZS5jc3NUZXh0PVwibWFyZ2luOjA7Ym9yZGVyOjA7cGFkZGluZzowO2Rpc3BsYXk6bm9uZVwiLGc9MD09PWlbMF0ub2Zmc2V0SGVpZ2h0LGcmJihpWzBdLnN0eWxlLmRpc3BsYXk9XCJcIixpWzFdLnN0eWxlLmRpc3BsYXk9XCJub25lXCIsZz0wPT09aVswXS5vZmZzZXRIZWlnaHQpLGMucmVtb3ZlQ2hpbGQoZCkpfX19KCksbS5zd2FwPWZ1bmN0aW9uKGEsYixjLGQpe3ZhciBlLGYsZz17fTtmb3IoZiBpbiBiKWdbZl09YS5zdHlsZVtmXSxhLnN0eWxlW2ZdPWJbZl07ZT1jLmFwcGx5KGEsZHx8W10pO2ZvcihmIGluIGIpYS5zdHlsZVtmXT1nW2ZdO3JldHVybiBlfTt2YXIgTWI9L2FscGhhXFwoW14pXSpcXCkvaSxOYj0vb3BhY2l0eVxccyo9XFxzKihbXildKikvLE9iPS9eKG5vbmV8dGFibGUoPyEtY1tlYV0pLispLyxQYj1uZXcgUmVnRXhwKFwiXihcIitTK1wiKSguKikkXCIsXCJpXCIpLFFiPW5ldyBSZWdFeHAoXCJeKFsrLV0pPShcIitTK1wiKVwiLFwiaVwiKSxSYj17cG9zaXRpb246XCJhYnNvbHV0ZVwiLHZpc2liaWxpdHk6XCJoaWRkZW5cIixkaXNwbGF5OlwiYmxvY2tcIn0sU2I9e2xldHRlclNwYWNpbmc6XCIwXCIsZm9udFdlaWdodDpcIjQwMFwifSxUYj1bXCJXZWJraXRcIixcIk9cIixcIk1velwiLFwibXNcIl07ZnVuY3Rpb24gVWIoYSxiKXtpZihiIGluIGEpcmV0dXJuIGI7dmFyIGM9Yi5jaGFyQXQoMCkudG9VcHBlckNhc2UoKStiLnNsaWNlKDEpLGQ9YixlPVRiLmxlbmd0aDt3aGlsZShlLS0paWYoYj1UYltlXStjLGIgaW4gYSlyZXR1cm4gYjtyZXR1cm4gZH1mdW5jdGlvbiBWYihhLGIpe2Zvcih2YXIgYyxkLGUsZj1bXSxnPTAsaD1hLmxlbmd0aDtoPmc7ZysrKWQ9YVtnXSxkLnN0eWxlJiYoZltnXT1tLl9kYXRhKGQsXCJvbGRkaXNwbGF5XCIpLGM9ZC5zdHlsZS5kaXNwbGF5LGI/KGZbZ118fFwibm9uZVwiIT09Y3x8KGQuc3R5bGUuZGlzcGxheT1cIlwiKSxcIlwiPT09ZC5zdHlsZS5kaXNwbGF5JiZVKGQpJiYoZltnXT1tLl9kYXRhKGQsXCJvbGRkaXNwbGF5XCIsRmIoZC5ub2RlTmFtZSkpKSk6KGU9VShkKSwoYyYmXCJub25lXCIhPT1jfHwhZSkmJm0uX2RhdGEoZCxcIm9sZGRpc3BsYXlcIixlP2M6bS5jc3MoZCxcImRpc3BsYXlcIikpKSk7Zm9yKGc9MDtoPmc7ZysrKWQ9YVtnXSxkLnN0eWxlJiYoYiYmXCJub25lXCIhPT1kLnN0eWxlLmRpc3BsYXkmJlwiXCIhPT1kLnN0eWxlLmRpc3BsYXl8fChkLnN0eWxlLmRpc3BsYXk9Yj9mW2ddfHxcIlwiOlwibm9uZVwiKSk7cmV0dXJuIGF9ZnVuY3Rpb24gV2IoYSxiLGMpe3ZhciBkPVBiLmV4ZWMoYik7cmV0dXJuIGQ/TWF0aC5tYXgoMCxkWzFdLShjfHwwKSkrKGRbMl18fFwicHhcIik6Yn1mdW5jdGlvbiBYYihhLGIsYyxkLGUpe2Zvcih2YXIgZj1jPT09KGQ/XCJib3JkZXJcIjpcImNvbnRlbnRcIik/NDpcIndpZHRoXCI9PT1iPzE6MCxnPTA7ND5mO2YrPTIpXCJtYXJnaW5cIj09PWMmJihnKz1tLmNzcyhhLGMrVFtmXSwhMCxlKSksZD8oXCJjb250ZW50XCI9PT1jJiYoZy09bS5jc3MoYSxcInBhZGRpbmdcIitUW2ZdLCEwLGUpKSxcIm1hcmdpblwiIT09YyYmKGctPW0uY3NzKGEsXCJib3JkZXJcIitUW2ZdK1wiV2lkdGhcIiwhMCxlKSkpOihnKz1tLmNzcyhhLFwicGFkZGluZ1wiK1RbZl0sITAsZSksXCJwYWRkaW5nXCIhPT1jJiYoZys9bS5jc3MoYSxcImJvcmRlclwiK1RbZl0rXCJXaWR0aFwiLCEwLGUpKSk7cmV0dXJuIGd9ZnVuY3Rpb24gWWIoYSxiLGMpe3ZhciBkPSEwLGU9XCJ3aWR0aFwiPT09Yj9hLm9mZnNldFdpZHRoOmEub2Zmc2V0SGVpZ2h0LGY9SWIoYSksZz1rLmJveFNpemluZyYmXCJib3JkZXItYm94XCI9PT1tLmNzcyhhLFwiYm94U2l6aW5nXCIsITEsZik7aWYoMD49ZXx8bnVsbD09ZSl7aWYoZT1KYihhLGIsZiksKDA+ZXx8bnVsbD09ZSkmJihlPWEuc3R5bGVbYl0pLEhiLnRlc3QoZSkpcmV0dXJuIGU7ZD1nJiYoay5ib3hTaXppbmdSZWxpYWJsZSgpfHxlPT09YS5zdHlsZVtiXSksZT1wYXJzZUZsb2F0KGUpfHwwfXJldHVybiBlK1hiKGEsYixjfHwoZz9cImJvcmRlclwiOlwiY29udGVudFwiKSxkLGYpK1wicHhcIn1tLmV4dGVuZCh7Y3NzSG9va3M6e29wYWNpdHk6e2dldDpmdW5jdGlvbihhLGIpe2lmKGIpe3ZhciBjPUpiKGEsXCJvcGFjaXR5XCIpO3JldHVyblwiXCI9PT1jP1wiMVwiOmN9fX19LGNzc051bWJlcjp7Y29sdW1uQ291bnQ6ITAsZmlsbE9wYWNpdHk6ITAsZmxleEdyb3c6ITAsZmxleFNocmluazohMCxmb250V2VpZ2h0OiEwLGxpbmVIZWlnaHQ6ITAsb3BhY2l0eTohMCxvcmRlcjohMCxvcnBoYW5zOiEwLHdpZG93czohMCx6SW5kZXg6ITAsem9vbTohMH0sY3NzUHJvcHM6e1wiZmxvYXRcIjprLmNzc0Zsb2F0P1wiY3NzRmxvYXRcIjpcInN0eWxlRmxvYXRcIn0sc3R5bGU6ZnVuY3Rpb24oYSxiLGMsZCl7aWYoYSYmMyE9PWEubm9kZVR5cGUmJjghPT1hLm5vZGVUeXBlJiZhLnN0eWxlKXt2YXIgZSxmLGcsaD1tLmNhbWVsQ2FzZShiKSxpPWEuc3R5bGU7aWYoYj1tLmNzc1Byb3BzW2hdfHwobS5jc3NQcm9wc1toXT1VYihpLGgpKSxnPW0uY3NzSG9va3NbYl18fG0uY3NzSG9va3NbaF0sdm9pZCAwPT09YylyZXR1cm4gZyYmXCJnZXRcImluIGcmJnZvaWQgMCE9PShlPWcuZ2V0KGEsITEsZCkpP2U6aVtiXTtpZihmPXR5cGVvZiBjLFwic3RyaW5nXCI9PT1mJiYoZT1RYi5leGVjKGMpKSYmKGM9KGVbMV0rMSkqZVsyXStwYXJzZUZsb2F0KG0uY3NzKGEsYikpLGY9XCJudW1iZXJcIiksbnVsbCE9YyYmYz09PWMmJihcIm51bWJlclwiIT09Znx8bS5jc3NOdW1iZXJbaF18fChjKz1cInB4XCIpLGsuY2xlYXJDbG9uZVN0eWxlfHxcIlwiIT09Y3x8MCE9PWIuaW5kZXhPZihcImJhY2tncm91bmRcIil8fChpW2JdPVwiaW5oZXJpdFwiKSwhKGcmJlwic2V0XCJpbiBnJiZ2b2lkIDA9PT0oYz1nLnNldChhLGMsZCkpKSkpdHJ5e2lbYl09Y31jYXRjaChqKXt9fX0sY3NzOmZ1bmN0aW9uKGEsYixjLGQpe3ZhciBlLGYsZyxoPW0uY2FtZWxDYXNlKGIpO3JldHVybiBiPW0uY3NzUHJvcHNbaF18fChtLmNzc1Byb3BzW2hdPVViKGEuc3R5bGUsaCkpLGc9bS5jc3NIb29rc1tiXXx8bS5jc3NIb29rc1toXSxnJiZcImdldFwiaW4gZyYmKGY9Zy5nZXQoYSwhMCxjKSksdm9pZCAwPT09ZiYmKGY9SmIoYSxiLGQpKSxcIm5vcm1hbFwiPT09ZiYmYiBpbiBTYiYmKGY9U2JbYl0pLFwiXCI9PT1jfHxjPyhlPXBhcnNlRmxvYXQoZiksYz09PSEwfHxtLmlzTnVtZXJpYyhlKT9lfHwwOmYpOmZ9fSksbS5lYWNoKFtcImhlaWdodFwiLFwid2lkdGhcIl0sZnVuY3Rpb24oYSxiKXttLmNzc0hvb2tzW2JdPXtnZXQ6ZnVuY3Rpb24oYSxjLGQpe3JldHVybiBjP09iLnRlc3QobS5jc3MoYSxcImRpc3BsYXlcIikpJiYwPT09YS5vZmZzZXRXaWR0aD9tLnN3YXAoYSxSYixmdW5jdGlvbigpe3JldHVybiBZYihhLGIsZCl9KTpZYihhLGIsZCk6dm9pZCAwfSxzZXQ6ZnVuY3Rpb24oYSxjLGQpe3ZhciBlPWQmJkliKGEpO3JldHVybiBXYihhLGMsZD9YYihhLGIsZCxrLmJveFNpemluZyYmXCJib3JkZXItYm94XCI9PT1tLmNzcyhhLFwiYm94U2l6aW5nXCIsITEsZSksZSk6MCl9fX0pLGsub3BhY2l0eXx8KG0uY3NzSG9va3Mub3BhY2l0eT17Z2V0OmZ1bmN0aW9uKGEsYil7cmV0dXJuIE5iLnRlc3QoKGImJmEuY3VycmVudFN0eWxlP2EuY3VycmVudFN0eWxlLmZpbHRlcjphLnN0eWxlLmZpbHRlcil8fFwiXCIpPy4wMSpwYXJzZUZsb2F0KFJlZ0V4cC4kMSkrXCJcIjpiP1wiMVwiOlwiXCJ9LHNldDpmdW5jdGlvbihhLGIpe3ZhciBjPWEuc3R5bGUsZD1hLmN1cnJlbnRTdHlsZSxlPW0uaXNOdW1lcmljKGIpP1wiYWxwaGEob3BhY2l0eT1cIisxMDAqYitcIilcIjpcIlwiLGY9ZCYmZC5maWx0ZXJ8fGMuZmlsdGVyfHxcIlwiO2Muem9vbT0xLChiPj0xfHxcIlwiPT09YikmJlwiXCI9PT1tLnRyaW0oZi5yZXBsYWNlKE1iLFwiXCIpKSYmYy5yZW1vdmVBdHRyaWJ1dGUmJihjLnJlbW92ZUF0dHJpYnV0ZShcImZpbHRlclwiKSxcIlwiPT09Ynx8ZCYmIWQuZmlsdGVyKXx8KGMuZmlsdGVyPU1iLnRlc3QoZik/Zi5yZXBsYWNlKE1iLGUpOmYrXCIgXCIrZSl9fSksbS5jc3NIb29rcy5tYXJnaW5SaWdodD1MYihrLnJlbGlhYmxlTWFyZ2luUmlnaHQsZnVuY3Rpb24oYSxiKXtyZXR1cm4gYj9tLnN3YXAoYSx7ZGlzcGxheTpcImlubGluZS1ibG9ja1wifSxKYixbYSxcIm1hcmdpblJpZ2h0XCJdKTp2b2lkIDB9KSxtLmVhY2goe21hcmdpbjpcIlwiLHBhZGRpbmc6XCJcIixib3JkZXI6XCJXaWR0aFwifSxmdW5jdGlvbihhLGIpe20uY3NzSG9va3NbYStiXT17ZXhwYW5kOmZ1bmN0aW9uKGMpe2Zvcih2YXIgZD0wLGU9e30sZj1cInN0cmluZ1wiPT10eXBlb2YgYz9jLnNwbGl0KFwiIFwiKTpbY107ND5kO2QrKyllW2ErVFtkXStiXT1mW2RdfHxmW2QtMl18fGZbMF07cmV0dXJuIGV9fSxHYi50ZXN0KGEpfHwobS5jc3NIb29rc1thK2JdLnNldD1XYil9KSxtLmZuLmV4dGVuZCh7Y3NzOmZ1bmN0aW9uKGEsYil7cmV0dXJuIFYodGhpcyxmdW5jdGlvbihhLGIsYyl7dmFyIGQsZSxmPXt9LGc9MDtpZihtLmlzQXJyYXkoYikpe2ZvcihkPUliKGEpLGU9Yi5sZW5ndGg7ZT5nO2crKylmW2JbZ11dPW0uY3NzKGEsYltnXSwhMSxkKTtyZXR1cm4gZn1yZXR1cm4gdm9pZCAwIT09Yz9tLnN0eWxlKGEsYixjKTptLmNzcyhhLGIpfSxhLGIsYXJndW1lbnRzLmxlbmd0aD4xKX0sc2hvdzpmdW5jdGlvbigpe3JldHVybiBWYih0aGlzLCEwKX0saGlkZTpmdW5jdGlvbigpe3JldHVybiBWYih0aGlzKX0sdG9nZ2xlOmZ1bmN0aW9uKGEpe3JldHVyblwiYm9vbGVhblwiPT10eXBlb2YgYT9hP3RoaXMuc2hvdygpOnRoaXMuaGlkZSgpOnRoaXMuZWFjaChmdW5jdGlvbigpe1UodGhpcyk/bSh0aGlzKS5zaG93KCk6bSh0aGlzKS5oaWRlKCl9KX19KTtmdW5jdGlvbiBaYihhLGIsYyxkLGUpe3JldHVybiBuZXcgWmIucHJvdG90eXBlLmluaXQoYSxiLGMsZCxlKVxyXG59bS5Ud2Vlbj1aYixaYi5wcm90b3R5cGU9e2NvbnN0cnVjdG9yOlpiLGluaXQ6ZnVuY3Rpb24oYSxiLGMsZCxlLGYpe3RoaXMuZWxlbT1hLHRoaXMucHJvcD1jLHRoaXMuZWFzaW5nPWV8fFwic3dpbmdcIix0aGlzLm9wdGlvbnM9Yix0aGlzLnN0YXJ0PXRoaXMubm93PXRoaXMuY3VyKCksdGhpcy5lbmQ9ZCx0aGlzLnVuaXQ9Znx8KG0uY3NzTnVtYmVyW2NdP1wiXCI6XCJweFwiKX0sY3VyOmZ1bmN0aW9uKCl7dmFyIGE9WmIucHJvcEhvb2tzW3RoaXMucHJvcF07cmV0dXJuIGEmJmEuZ2V0P2EuZ2V0KHRoaXMpOlpiLnByb3BIb29rcy5fZGVmYXVsdC5nZXQodGhpcyl9LHJ1bjpmdW5jdGlvbihhKXt2YXIgYixjPVpiLnByb3BIb29rc1t0aGlzLnByb3BdO3JldHVybiB0aGlzLnBvcz1iPXRoaXMub3B0aW9ucy5kdXJhdGlvbj9tLmVhc2luZ1t0aGlzLmVhc2luZ10oYSx0aGlzLm9wdGlvbnMuZHVyYXRpb24qYSwwLDEsdGhpcy5vcHRpb25zLmR1cmF0aW9uKTphLHRoaXMubm93PSh0aGlzLmVuZC10aGlzLnN0YXJ0KSpiK3RoaXMuc3RhcnQsdGhpcy5vcHRpb25zLnN0ZXAmJnRoaXMub3B0aW9ucy5zdGVwLmNhbGwodGhpcy5lbGVtLHRoaXMubm93LHRoaXMpLGMmJmMuc2V0P2Muc2V0KHRoaXMpOlpiLnByb3BIb29rcy5fZGVmYXVsdC5zZXQodGhpcyksdGhpc319LFpiLnByb3RvdHlwZS5pbml0LnByb3RvdHlwZT1aYi5wcm90b3R5cGUsWmIucHJvcEhvb2tzPXtfZGVmYXVsdDp7Z2V0OmZ1bmN0aW9uKGEpe3ZhciBiO3JldHVybiBudWxsPT1hLmVsZW1bYS5wcm9wXXx8YS5lbGVtLnN0eWxlJiZudWxsIT1hLmVsZW0uc3R5bGVbYS5wcm9wXT8oYj1tLmNzcyhhLmVsZW0sYS5wcm9wLFwiXCIpLGImJlwiYXV0b1wiIT09Yj9iOjApOmEuZWxlbVthLnByb3BdfSxzZXQ6ZnVuY3Rpb24oYSl7bS5meC5zdGVwW2EucHJvcF0/bS5meC5zdGVwW2EucHJvcF0oYSk6YS5lbGVtLnN0eWxlJiYobnVsbCE9YS5lbGVtLnN0eWxlW20uY3NzUHJvcHNbYS5wcm9wXV18fG0uY3NzSG9va3NbYS5wcm9wXSk/bS5zdHlsZShhLmVsZW0sYS5wcm9wLGEubm93K2EudW5pdCk6YS5lbGVtW2EucHJvcF09YS5ub3d9fX0sWmIucHJvcEhvb2tzLnNjcm9sbFRvcD1aYi5wcm9wSG9va3Muc2Nyb2xsTGVmdD17c2V0OmZ1bmN0aW9uKGEpe2EuZWxlbS5ub2RlVHlwZSYmYS5lbGVtLnBhcmVudE5vZGUmJihhLmVsZW1bYS5wcm9wXT1hLm5vdyl9fSxtLmVhc2luZz17bGluZWFyOmZ1bmN0aW9uKGEpe3JldHVybiBhfSxzd2luZzpmdW5jdGlvbihhKXtyZXR1cm4uNS1NYXRoLmNvcyhhKk1hdGguUEkpLzJ9fSxtLmZ4PVpiLnByb3RvdHlwZS5pbml0LG0uZnguc3RlcD17fTt2YXIgJGIsX2IsYWM9L14oPzp0b2dnbGV8c2hvd3xoaWRlKSQvLGJjPW5ldyBSZWdFeHAoXCJeKD86KFsrLV0pPXwpKFwiK1MrXCIpKFthLXolXSopJFwiLFwiaVwiKSxjYz0vcXVldWVIb29rcyQvLGRjPVtpY10sZWM9e1wiKlwiOltmdW5jdGlvbihhLGIpe3ZhciBjPXRoaXMuY3JlYXRlVHdlZW4oYSxiKSxkPWMuY3VyKCksZT1iYy5leGVjKGIpLGY9ZSYmZVszXXx8KG0uY3NzTnVtYmVyW2FdP1wiXCI6XCJweFwiKSxnPShtLmNzc051bWJlclthXXx8XCJweFwiIT09ZiYmK2QpJiZiYy5leGVjKG0uY3NzKGMuZWxlbSxhKSksaD0xLGk9MjA7aWYoZyYmZ1szXSE9PWYpe2Y9Znx8Z1szXSxlPWV8fFtdLGc9K2R8fDE7ZG8gaD1ofHxcIi41XCIsZy89aCxtLnN0eWxlKGMuZWxlbSxhLGcrZik7d2hpbGUoaCE9PShoPWMuY3VyKCkvZCkmJjEhPT1oJiYtLWkpfXJldHVybiBlJiYoZz1jLnN0YXJ0PStnfHwrZHx8MCxjLnVuaXQ9ZixjLmVuZD1lWzFdP2crKGVbMV0rMSkqZVsyXTorZVsyXSksY31dfTtmdW5jdGlvbiBmYygpe3JldHVybiBzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7JGI9dm9pZCAwfSksJGI9bS5ub3coKX1mdW5jdGlvbiBnYyhhLGIpe3ZhciBjLGQ9e2hlaWdodDphfSxlPTA7Zm9yKGI9Yj8xOjA7ND5lO2UrPTItYiljPVRbZV0sZFtcIm1hcmdpblwiK2NdPWRbXCJwYWRkaW5nXCIrY109YTtyZXR1cm4gYiYmKGQub3BhY2l0eT1kLndpZHRoPWEpLGR9ZnVuY3Rpb24gaGMoYSxiLGMpe2Zvcih2YXIgZCxlPShlY1tiXXx8W10pLmNvbmNhdChlY1tcIipcIl0pLGY9MCxnPWUubGVuZ3RoO2c+ZjtmKyspaWYoZD1lW2ZdLmNhbGwoYyxiLGEpKXJldHVybiBkfWZ1bmN0aW9uIGljKGEsYixjKXt2YXIgZCxlLGYsZyxoLGksaixsLG49dGhpcyxvPXt9LHA9YS5zdHlsZSxxPWEubm9kZVR5cGUmJlUoYSkscj1tLl9kYXRhKGEsXCJmeHNob3dcIik7Yy5xdWV1ZXx8KGg9bS5fcXVldWVIb29rcyhhLFwiZnhcIiksbnVsbD09aC51bnF1ZXVlZCYmKGgudW5xdWV1ZWQ9MCxpPWguZW1wdHkuZmlyZSxoLmVtcHR5LmZpcmU9ZnVuY3Rpb24oKXtoLnVucXVldWVkfHxpKCl9KSxoLnVucXVldWVkKyssbi5hbHdheXMoZnVuY3Rpb24oKXtuLmFsd2F5cyhmdW5jdGlvbigpe2gudW5xdWV1ZWQtLSxtLnF1ZXVlKGEsXCJmeFwiKS5sZW5ndGh8fGguZW1wdHkuZmlyZSgpfSl9KSksMT09PWEubm9kZVR5cGUmJihcImhlaWdodFwiaW4gYnx8XCJ3aWR0aFwiaW4gYikmJihjLm92ZXJmbG93PVtwLm92ZXJmbG93LHAub3ZlcmZsb3dYLHAub3ZlcmZsb3dZXSxqPW0uY3NzKGEsXCJkaXNwbGF5XCIpLGw9XCJub25lXCI9PT1qP20uX2RhdGEoYSxcIm9sZGRpc3BsYXlcIil8fEZiKGEubm9kZU5hbWUpOmosXCJpbmxpbmVcIj09PWwmJlwibm9uZVwiPT09bS5jc3MoYSxcImZsb2F0XCIpJiYoay5pbmxpbmVCbG9ja05lZWRzTGF5b3V0JiZcImlubGluZVwiIT09RmIoYS5ub2RlTmFtZSk/cC56b29tPTE6cC5kaXNwbGF5PVwiaW5saW5lLWJsb2NrXCIpKSxjLm92ZXJmbG93JiYocC5vdmVyZmxvdz1cImhpZGRlblwiLGsuc2hyaW5rV3JhcEJsb2NrcygpfHxuLmFsd2F5cyhmdW5jdGlvbigpe3Aub3ZlcmZsb3c9Yy5vdmVyZmxvd1swXSxwLm92ZXJmbG93WD1jLm92ZXJmbG93WzFdLHAub3ZlcmZsb3dZPWMub3ZlcmZsb3dbMl19KSk7Zm9yKGQgaW4gYilpZihlPWJbZF0sYWMuZXhlYyhlKSl7aWYoZGVsZXRlIGJbZF0sZj1mfHxcInRvZ2dsZVwiPT09ZSxlPT09KHE/XCJoaWRlXCI6XCJzaG93XCIpKXtpZihcInNob3dcIiE9PWV8fCFyfHx2b2lkIDA9PT1yW2RdKWNvbnRpbnVlO3E9ITB9b1tkXT1yJiZyW2RdfHxtLnN0eWxlKGEsZCl9ZWxzZSBqPXZvaWQgMDtpZihtLmlzRW1wdHlPYmplY3QobykpXCJpbmxpbmVcIj09PShcIm5vbmVcIj09PWo/RmIoYS5ub2RlTmFtZSk6aikmJihwLmRpc3BsYXk9aik7ZWxzZXtyP1wiaGlkZGVuXCJpbiByJiYocT1yLmhpZGRlbik6cj1tLl9kYXRhKGEsXCJmeHNob3dcIix7fSksZiYmKHIuaGlkZGVuPSFxKSxxP20oYSkuc2hvdygpOm4uZG9uZShmdW5jdGlvbigpe20oYSkuaGlkZSgpfSksbi5kb25lKGZ1bmN0aW9uKCl7dmFyIGI7bS5fcmVtb3ZlRGF0YShhLFwiZnhzaG93XCIpO2ZvcihiIGluIG8pbS5zdHlsZShhLGIsb1tiXSl9KTtmb3IoZCBpbiBvKWc9aGMocT9yW2RdOjAsZCxuKSxkIGluIHJ8fChyW2RdPWcuc3RhcnQscSYmKGcuZW5kPWcuc3RhcnQsZy5zdGFydD1cIndpZHRoXCI9PT1kfHxcImhlaWdodFwiPT09ZD8xOjApKX19ZnVuY3Rpb24gamMoYSxiKXt2YXIgYyxkLGUsZixnO2ZvcihjIGluIGEpaWYoZD1tLmNhbWVsQ2FzZShjKSxlPWJbZF0sZj1hW2NdLG0uaXNBcnJheShmKSYmKGU9ZlsxXSxmPWFbY109ZlswXSksYyE9PWQmJihhW2RdPWYsZGVsZXRlIGFbY10pLGc9bS5jc3NIb29rc1tkXSxnJiZcImV4cGFuZFwiaW4gZyl7Zj1nLmV4cGFuZChmKSxkZWxldGUgYVtkXTtmb3IoYyBpbiBmKWMgaW4gYXx8KGFbY109ZltjXSxiW2NdPWUpfWVsc2UgYltkXT1lfWZ1bmN0aW9uIGtjKGEsYixjKXt2YXIgZCxlLGY9MCxnPWRjLmxlbmd0aCxoPW0uRGVmZXJyZWQoKS5hbHdheXMoZnVuY3Rpb24oKXtkZWxldGUgaS5lbGVtfSksaT1mdW5jdGlvbigpe2lmKGUpcmV0dXJuITE7Zm9yKHZhciBiPSRifHxmYygpLGM9TWF0aC5tYXgoMCxqLnN0YXJ0VGltZStqLmR1cmF0aW9uLWIpLGQ9Yy9qLmR1cmF0aW9ufHwwLGY9MS1kLGc9MCxpPWoudHdlZW5zLmxlbmd0aDtpPmc7ZysrKWoudHdlZW5zW2ddLnJ1bihmKTtyZXR1cm4gaC5ub3RpZnlXaXRoKGEsW2osZixjXSksMT5mJiZpP2M6KGgucmVzb2x2ZVdpdGgoYSxbal0pLCExKX0saj1oLnByb21pc2Uoe2VsZW06YSxwcm9wczptLmV4dGVuZCh7fSxiKSxvcHRzOm0uZXh0ZW5kKCEwLHtzcGVjaWFsRWFzaW5nOnt9fSxjKSxvcmlnaW5hbFByb3BlcnRpZXM6YixvcmlnaW5hbE9wdGlvbnM6YyxzdGFydFRpbWU6JGJ8fGZjKCksZHVyYXRpb246Yy5kdXJhdGlvbix0d2VlbnM6W10sY3JlYXRlVHdlZW46ZnVuY3Rpb24oYixjKXt2YXIgZD1tLlR3ZWVuKGEsai5vcHRzLGIsYyxqLm9wdHMuc3BlY2lhbEVhc2luZ1tiXXx8ai5vcHRzLmVhc2luZyk7cmV0dXJuIGoudHdlZW5zLnB1c2goZCksZH0sc3RvcDpmdW5jdGlvbihiKXt2YXIgYz0wLGQ9Yj9qLnR3ZWVucy5sZW5ndGg6MDtpZihlKXJldHVybiB0aGlzO2ZvcihlPSEwO2Q+YztjKyspai50d2VlbnNbY10ucnVuKDEpO3JldHVybiBiP2gucmVzb2x2ZVdpdGgoYSxbaixiXSk6aC5yZWplY3RXaXRoKGEsW2osYl0pLHRoaXN9fSksaz1qLnByb3BzO2ZvcihqYyhrLGoub3B0cy5zcGVjaWFsRWFzaW5nKTtnPmY7ZisrKWlmKGQ9ZGNbZl0uY2FsbChqLGEsayxqLm9wdHMpKXJldHVybiBkO3JldHVybiBtLm1hcChrLGhjLGopLG0uaXNGdW5jdGlvbihqLm9wdHMuc3RhcnQpJiZqLm9wdHMuc3RhcnQuY2FsbChhLGopLG0uZngudGltZXIobS5leHRlbmQoaSx7ZWxlbTphLGFuaW06aixxdWV1ZTpqLm9wdHMucXVldWV9KSksai5wcm9ncmVzcyhqLm9wdHMucHJvZ3Jlc3MpLmRvbmUoai5vcHRzLmRvbmUsai5vcHRzLmNvbXBsZXRlKS5mYWlsKGoub3B0cy5mYWlsKS5hbHdheXMoai5vcHRzLmFsd2F5cyl9bS5BbmltYXRpb249bS5leHRlbmQoa2Mse3R3ZWVuZXI6ZnVuY3Rpb24oYSxiKXttLmlzRnVuY3Rpb24oYSk/KGI9YSxhPVtcIipcIl0pOmE9YS5zcGxpdChcIiBcIik7Zm9yKHZhciBjLGQ9MCxlPWEubGVuZ3RoO2U+ZDtkKyspYz1hW2RdLGVjW2NdPWVjW2NdfHxbXSxlY1tjXS51bnNoaWZ0KGIpfSxwcmVmaWx0ZXI6ZnVuY3Rpb24oYSxiKXtiP2RjLnVuc2hpZnQoYSk6ZGMucHVzaChhKX19KSxtLnNwZWVkPWZ1bmN0aW9uKGEsYixjKXt2YXIgZD1hJiZcIm9iamVjdFwiPT10eXBlb2YgYT9tLmV4dGVuZCh7fSxhKTp7Y29tcGxldGU6Y3x8IWMmJmJ8fG0uaXNGdW5jdGlvbihhKSYmYSxkdXJhdGlvbjphLGVhc2luZzpjJiZifHxiJiYhbS5pc0Z1bmN0aW9uKGIpJiZifTtyZXR1cm4gZC5kdXJhdGlvbj1tLmZ4Lm9mZj8wOlwibnVtYmVyXCI9PXR5cGVvZiBkLmR1cmF0aW9uP2QuZHVyYXRpb246ZC5kdXJhdGlvbiBpbiBtLmZ4LnNwZWVkcz9tLmZ4LnNwZWVkc1tkLmR1cmF0aW9uXTptLmZ4LnNwZWVkcy5fZGVmYXVsdCwobnVsbD09ZC5xdWV1ZXx8ZC5xdWV1ZT09PSEwKSYmKGQucXVldWU9XCJmeFwiKSxkLm9sZD1kLmNvbXBsZXRlLGQuY29tcGxldGU9ZnVuY3Rpb24oKXttLmlzRnVuY3Rpb24oZC5vbGQpJiZkLm9sZC5jYWxsKHRoaXMpLGQucXVldWUmJm0uZGVxdWV1ZSh0aGlzLGQucXVldWUpfSxkfSxtLmZuLmV4dGVuZCh7ZmFkZVRvOmZ1bmN0aW9uKGEsYixjLGQpe3JldHVybiB0aGlzLmZpbHRlcihVKS5jc3MoXCJvcGFjaXR5XCIsMCkuc2hvdygpLmVuZCgpLmFuaW1hdGUoe29wYWNpdHk6Yn0sYSxjLGQpfSxhbmltYXRlOmZ1bmN0aW9uKGEsYixjLGQpe3ZhciBlPW0uaXNFbXB0eU9iamVjdChhKSxmPW0uc3BlZWQoYixjLGQpLGc9ZnVuY3Rpb24oKXt2YXIgYj1rYyh0aGlzLG0uZXh0ZW5kKHt9LGEpLGYpOyhlfHxtLl9kYXRhKHRoaXMsXCJmaW5pc2hcIikpJiZiLnN0b3AoITApfTtyZXR1cm4gZy5maW5pc2g9ZyxlfHxmLnF1ZXVlPT09ITE/dGhpcy5lYWNoKGcpOnRoaXMucXVldWUoZi5xdWV1ZSxnKX0sc3RvcDpmdW5jdGlvbihhLGIsYyl7dmFyIGQ9ZnVuY3Rpb24oYSl7dmFyIGI9YS5zdG9wO2RlbGV0ZSBhLnN0b3AsYihjKX07cmV0dXJuXCJzdHJpbmdcIiE9dHlwZW9mIGEmJihjPWIsYj1hLGE9dm9pZCAwKSxiJiZhIT09ITEmJnRoaXMucXVldWUoYXx8XCJmeFwiLFtdKSx0aGlzLmVhY2goZnVuY3Rpb24oKXt2YXIgYj0hMCxlPW51bGwhPWEmJmErXCJxdWV1ZUhvb2tzXCIsZj1tLnRpbWVycyxnPW0uX2RhdGEodGhpcyk7aWYoZSlnW2VdJiZnW2VdLnN0b3AmJmQoZ1tlXSk7ZWxzZSBmb3IoZSBpbiBnKWdbZV0mJmdbZV0uc3RvcCYmY2MudGVzdChlKSYmZChnW2VdKTtmb3IoZT1mLmxlbmd0aDtlLS07KWZbZV0uZWxlbSE9PXRoaXN8fG51bGwhPWEmJmZbZV0ucXVldWUhPT1hfHwoZltlXS5hbmltLnN0b3AoYyksYj0hMSxmLnNwbGljZShlLDEpKTsoYnx8IWMpJiZtLmRlcXVldWUodGhpcyxhKX0pfSxmaW5pc2g6ZnVuY3Rpb24oYSl7cmV0dXJuIGEhPT0hMSYmKGE9YXx8XCJmeFwiKSx0aGlzLmVhY2goZnVuY3Rpb24oKXt2YXIgYixjPW0uX2RhdGEodGhpcyksZD1jW2ErXCJxdWV1ZVwiXSxlPWNbYStcInF1ZXVlSG9va3NcIl0sZj1tLnRpbWVycyxnPWQ/ZC5sZW5ndGg6MDtmb3IoYy5maW5pc2g9ITAsbS5xdWV1ZSh0aGlzLGEsW10pLGUmJmUuc3RvcCYmZS5zdG9wLmNhbGwodGhpcywhMCksYj1mLmxlbmd0aDtiLS07KWZbYl0uZWxlbT09PXRoaXMmJmZbYl0ucXVldWU9PT1hJiYoZltiXS5hbmltLnN0b3AoITApLGYuc3BsaWNlKGIsMSkpO2ZvcihiPTA7Zz5iO2IrKylkW2JdJiZkW2JdLmZpbmlzaCYmZFtiXS5maW5pc2guY2FsbCh0aGlzKTtkZWxldGUgYy5maW5pc2h9KX19KSxtLmVhY2goW1widG9nZ2xlXCIsXCJzaG93XCIsXCJoaWRlXCJdLGZ1bmN0aW9uKGEsYil7dmFyIGM9bS5mbltiXTttLmZuW2JdPWZ1bmN0aW9uKGEsZCxlKXtyZXR1cm4gbnVsbD09YXx8XCJib29sZWFuXCI9PXR5cGVvZiBhP2MuYXBwbHkodGhpcyxhcmd1bWVudHMpOnRoaXMuYW5pbWF0ZShnYyhiLCEwKSxhLGQsZSl9fSksbS5lYWNoKHtzbGlkZURvd246Z2MoXCJzaG93XCIpLHNsaWRlVXA6Z2MoXCJoaWRlXCIpLHNsaWRlVG9nZ2xlOmdjKFwidG9nZ2xlXCIpLGZhZGVJbjp7b3BhY2l0eTpcInNob3dcIn0sZmFkZU91dDp7b3BhY2l0eTpcImhpZGVcIn0sZmFkZVRvZ2dsZTp7b3BhY2l0eTpcInRvZ2dsZVwifX0sZnVuY3Rpb24oYSxiKXttLmZuW2FdPWZ1bmN0aW9uKGEsYyxkKXtyZXR1cm4gdGhpcy5hbmltYXRlKGIsYSxjLGQpfX0pLG0udGltZXJzPVtdLG0uZngudGljaz1mdW5jdGlvbigpe3ZhciBhLGI9bS50aW1lcnMsYz0wO2ZvcigkYj1tLm5vdygpO2M8Yi5sZW5ndGg7YysrKWE9YltjXSxhKCl8fGJbY10hPT1hfHxiLnNwbGljZShjLS0sMSk7Yi5sZW5ndGh8fG0uZnguc3RvcCgpLCRiPXZvaWQgMH0sbS5meC50aW1lcj1mdW5jdGlvbihhKXttLnRpbWVycy5wdXNoKGEpLGEoKT9tLmZ4LnN0YXJ0KCk6bS50aW1lcnMucG9wKCl9LG0uZnguaW50ZXJ2YWw9MTMsbS5meC5zdGFydD1mdW5jdGlvbigpe19ifHwoX2I9c2V0SW50ZXJ2YWwobS5meC50aWNrLG0uZnguaW50ZXJ2YWwpKX0sbS5meC5zdG9wPWZ1bmN0aW9uKCl7Y2xlYXJJbnRlcnZhbChfYiksX2I9bnVsbH0sbS5meC5zcGVlZHM9e3Nsb3c6NjAwLGZhc3Q6MjAwLF9kZWZhdWx0OjQwMH0sbS5mbi5kZWxheT1mdW5jdGlvbihhLGIpe3JldHVybiBhPW0uZng/bS5meC5zcGVlZHNbYV18fGE6YSxiPWJ8fFwiZnhcIix0aGlzLnF1ZXVlKGIsZnVuY3Rpb24oYixjKXt2YXIgZD1zZXRUaW1lb3V0KGIsYSk7Yy5zdG9wPWZ1bmN0aW9uKCl7Y2xlYXJUaW1lb3V0KGQpfX0pfSxmdW5jdGlvbigpe3ZhciBhLGIsYyxkLGU7Yj15LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiksYi5zZXRBdHRyaWJ1dGUoXCJjbGFzc05hbWVcIixcInRcIiksYi5pbm5lckhUTUw9XCIgIDxsaW5rLz48dGFibGU+PC90YWJsZT48YSBocmVmPScvYSc+YTwvYT48aW5wdXQgdHlwZT0nY2hlY2tib3gnLz5cIixkPWIuZ2V0RWxlbWVudHNCeVRhZ05hbWUoXCJhXCIpWzBdLGM9eS5jcmVhdGVFbGVtZW50KFwic2VsZWN0XCIpLGU9Yy5hcHBlbmRDaGlsZCh5LmNyZWF0ZUVsZW1lbnQoXCJvcHRpb25cIikpLGE9Yi5nZXRFbGVtZW50c0J5VGFnTmFtZShcImlucHV0XCIpWzBdLGQuc3R5bGUuY3NzVGV4dD1cInRvcDoxcHhcIixrLmdldFNldEF0dHJpYnV0ZT1cInRcIiE9PWIuY2xhc3NOYW1lLGsuc3R5bGU9L3RvcC8udGVzdChkLmdldEF0dHJpYnV0ZShcInN0eWxlXCIpKSxrLmhyZWZOb3JtYWxpemVkPVwiL2FcIj09PWQuZ2V0QXR0cmlidXRlKFwiaHJlZlwiKSxrLmNoZWNrT249ISFhLnZhbHVlLGsub3B0U2VsZWN0ZWQ9ZS5zZWxlY3RlZCxrLmVuY3R5cGU9ISF5LmNyZWF0ZUVsZW1lbnQoXCJmb3JtXCIpLmVuY3R5cGUsYy5kaXNhYmxlZD0hMCxrLm9wdERpc2FibGVkPSFlLmRpc2FibGVkLGE9eS5jcmVhdGVFbGVtZW50KFwiaW5wdXRcIiksYS5zZXRBdHRyaWJ1dGUoXCJ2YWx1ZVwiLFwiXCIpLGsuaW5wdXQ9XCJcIj09PWEuZ2V0QXR0cmlidXRlKFwidmFsdWVcIiksYS52YWx1ZT1cInRcIixhLnNldEF0dHJpYnV0ZShcInR5cGVcIixcInJhZGlvXCIpLGsucmFkaW9WYWx1ZT1cInRcIj09PWEudmFsdWV9KCk7dmFyIGxjPS9cXHIvZzttLmZuLmV4dGVuZCh7dmFsOmZ1bmN0aW9uKGEpe3ZhciBiLGMsZCxlPXRoaXNbMF07e2lmKGFyZ3VtZW50cy5sZW5ndGgpcmV0dXJuIGQ9bS5pc0Z1bmN0aW9uKGEpLHRoaXMuZWFjaChmdW5jdGlvbihjKXt2YXIgZTsxPT09dGhpcy5ub2RlVHlwZSYmKGU9ZD9hLmNhbGwodGhpcyxjLG0odGhpcykudmFsKCkpOmEsbnVsbD09ZT9lPVwiXCI6XCJudW1iZXJcIj09dHlwZW9mIGU/ZSs9XCJcIjptLmlzQXJyYXkoZSkmJihlPW0ubWFwKGUsZnVuY3Rpb24oYSl7cmV0dXJuIG51bGw9PWE/XCJcIjphK1wiXCJ9KSksYj1tLnZhbEhvb2tzW3RoaXMudHlwZV18fG0udmFsSG9va3NbdGhpcy5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpXSxiJiZcInNldFwiaW4gYiYmdm9pZCAwIT09Yi5zZXQodGhpcyxlLFwidmFsdWVcIil8fCh0aGlzLnZhbHVlPWUpKX0pO2lmKGUpcmV0dXJuIGI9bS52YWxIb29rc1tlLnR5cGVdfHxtLnZhbEhvb2tzW2Uubm9kZU5hbWUudG9Mb3dlckNhc2UoKV0sYiYmXCJnZXRcImluIGImJnZvaWQgMCE9PShjPWIuZ2V0KGUsXCJ2YWx1ZVwiKSk/YzooYz1lLnZhbHVlLFwic3RyaW5nXCI9PXR5cGVvZiBjP2MucmVwbGFjZShsYyxcIlwiKTpudWxsPT1jP1wiXCI6Yyl9fX0pLG0uZXh0ZW5kKHt2YWxIb29rczp7b3B0aW9uOntnZXQ6ZnVuY3Rpb24oYSl7dmFyIGI9bS5maW5kLmF0dHIoYSxcInZhbHVlXCIpO3JldHVybiBudWxsIT1iP2I6bS50cmltKG0udGV4dChhKSl9fSxzZWxlY3Q6e2dldDpmdW5jdGlvbihhKXtmb3IodmFyIGIsYyxkPWEub3B0aW9ucyxlPWEuc2VsZWN0ZWRJbmRleCxmPVwic2VsZWN0LW9uZVwiPT09YS50eXBlfHwwPmUsZz1mP251bGw6W10saD1mP2UrMTpkLmxlbmd0aCxpPTA+ZT9oOmY/ZTowO2g+aTtpKyspaWYoYz1kW2ldLCEoIWMuc2VsZWN0ZWQmJmkhPT1lfHwoay5vcHREaXNhYmxlZD9jLmRpc2FibGVkOm51bGwhPT1jLmdldEF0dHJpYnV0ZShcImRpc2FibGVkXCIpKXx8Yy5wYXJlbnROb2RlLmRpc2FibGVkJiZtLm5vZGVOYW1lKGMucGFyZW50Tm9kZSxcIm9wdGdyb3VwXCIpKSl7aWYoYj1tKGMpLnZhbCgpLGYpcmV0dXJuIGI7Zy5wdXNoKGIpfXJldHVybiBnfSxzZXQ6ZnVuY3Rpb24oYSxiKXt2YXIgYyxkLGU9YS5vcHRpb25zLGY9bS5tYWtlQXJyYXkoYiksZz1lLmxlbmd0aDt3aGlsZShnLS0paWYoZD1lW2ddLG0uaW5BcnJheShtLnZhbEhvb2tzLm9wdGlvbi5nZXQoZCksZik+PTApdHJ5e2Quc2VsZWN0ZWQ9Yz0hMH1jYXRjaChoKXtkLnNjcm9sbEhlaWdodH1lbHNlIGQuc2VsZWN0ZWQ9ITE7cmV0dXJuIGN8fChhLnNlbGVjdGVkSW5kZXg9LTEpLGV9fX19KSxtLmVhY2goW1wicmFkaW9cIixcImNoZWNrYm94XCJdLGZ1bmN0aW9uKCl7bS52YWxIb29rc1t0aGlzXT17c2V0OmZ1bmN0aW9uKGEsYil7cmV0dXJuIG0uaXNBcnJheShiKT9hLmNoZWNrZWQ9bS5pbkFycmF5KG0oYSkudmFsKCksYik+PTA6dm9pZCAwfX0say5jaGVja09ufHwobS52YWxIb29rc1t0aGlzXS5nZXQ9ZnVuY3Rpb24oYSl7cmV0dXJuIG51bGw9PT1hLmdldEF0dHJpYnV0ZShcInZhbHVlXCIpP1wib25cIjphLnZhbHVlfSl9KTt2YXIgbWMsbmMsb2M9bS5leHByLmF0dHJIYW5kbGUscGM9L14oPzpjaGVja2VkfHNlbGVjdGVkKSQvaSxxYz1rLmdldFNldEF0dHJpYnV0ZSxyYz1rLmlucHV0O20uZm4uZXh0ZW5kKHthdHRyOmZ1bmN0aW9uKGEsYil7cmV0dXJuIFYodGhpcyxtLmF0dHIsYSxiLGFyZ3VtZW50cy5sZW5ndGg+MSl9LHJlbW92ZUF0dHI6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbigpe20ucmVtb3ZlQXR0cih0aGlzLGEpfSl9fSksbS5leHRlbmQoe2F0dHI6ZnVuY3Rpb24oYSxiLGMpe3ZhciBkLGUsZj1hLm5vZGVUeXBlO2lmKGEmJjMhPT1mJiY4IT09ZiYmMiE9PWYpcmV0dXJuIHR5cGVvZiBhLmdldEF0dHJpYnV0ZT09PUs/bS5wcm9wKGEsYixjKTooMT09PWYmJm0uaXNYTUxEb2MoYSl8fChiPWIudG9Mb3dlckNhc2UoKSxkPW0uYXR0ckhvb2tzW2JdfHwobS5leHByLm1hdGNoLmJvb2wudGVzdChiKT9uYzptYykpLHZvaWQgMD09PWM/ZCYmXCJnZXRcImluIGQmJm51bGwhPT0oZT1kLmdldChhLGIpKT9lOihlPW0uZmluZC5hdHRyKGEsYiksbnVsbD09ZT92b2lkIDA6ZSk6bnVsbCE9PWM/ZCYmXCJzZXRcImluIGQmJnZvaWQgMCE9PShlPWQuc2V0KGEsYyxiKSk/ZTooYS5zZXRBdHRyaWJ1dGUoYixjK1wiXCIpLGMpOnZvaWQgbS5yZW1vdmVBdHRyKGEsYikpfSxyZW1vdmVBdHRyOmZ1bmN0aW9uKGEsYil7dmFyIGMsZCxlPTAsZj1iJiZiLm1hdGNoKEUpO2lmKGYmJjE9PT1hLm5vZGVUeXBlKXdoaWxlKGM9ZltlKytdKWQ9bS5wcm9wRml4W2NdfHxjLG0uZXhwci5tYXRjaC5ib29sLnRlc3QoYyk/cmMmJnFjfHwhcGMudGVzdChjKT9hW2RdPSExOmFbbS5jYW1lbENhc2UoXCJkZWZhdWx0LVwiK2MpXT1hW2RdPSExOm0uYXR0cihhLGMsXCJcIiksYS5yZW1vdmVBdHRyaWJ1dGUocWM/YzpkKX0sYXR0ckhvb2tzOnt0eXBlOntzZXQ6ZnVuY3Rpb24oYSxiKXtpZighay5yYWRpb1ZhbHVlJiZcInJhZGlvXCI9PT1iJiZtLm5vZGVOYW1lKGEsXCJpbnB1dFwiKSl7dmFyIGM9YS52YWx1ZTtyZXR1cm4gYS5zZXRBdHRyaWJ1dGUoXCJ0eXBlXCIsYiksYyYmKGEudmFsdWU9YyksYn19fX19KSxuYz17c2V0OmZ1bmN0aW9uKGEsYixjKXtyZXR1cm4gYj09PSExP20ucmVtb3ZlQXR0cihhLGMpOnJjJiZxY3x8IXBjLnRlc3QoYyk/YS5zZXRBdHRyaWJ1dGUoIXFjJiZtLnByb3BGaXhbY118fGMsYyk6YVttLmNhbWVsQ2FzZShcImRlZmF1bHQtXCIrYyldPWFbY109ITAsY319LG0uZWFjaChtLmV4cHIubWF0Y2guYm9vbC5zb3VyY2UubWF0Y2goL1xcdysvZyksZnVuY3Rpb24oYSxiKXt2YXIgYz1vY1tiXXx8bS5maW5kLmF0dHI7b2NbYl09cmMmJnFjfHwhcGMudGVzdChiKT9mdW5jdGlvbihhLGIsZCl7dmFyIGUsZjtyZXR1cm4gZHx8KGY9b2NbYl0sb2NbYl09ZSxlPW51bGwhPWMoYSxiLGQpP2IudG9Mb3dlckNhc2UoKTpudWxsLG9jW2JdPWYpLGV9OmZ1bmN0aW9uKGEsYixjKXtyZXR1cm4gYz92b2lkIDA6YVttLmNhbWVsQ2FzZShcImRlZmF1bHQtXCIrYildP2IudG9Mb3dlckNhc2UoKTpudWxsfX0pLHJjJiZxY3x8KG0uYXR0ckhvb2tzLnZhbHVlPXtzZXQ6ZnVuY3Rpb24oYSxiLGMpe3JldHVybiBtLm5vZGVOYW1lKGEsXCJpbnB1dFwiKT92b2lkKGEuZGVmYXVsdFZhbHVlPWIpOm1jJiZtYy5zZXQoYSxiLGMpfX0pLHFjfHwobWM9e3NldDpmdW5jdGlvbihhLGIsYyl7dmFyIGQ9YS5nZXRBdHRyaWJ1dGVOb2RlKGMpO3JldHVybiBkfHxhLnNldEF0dHJpYnV0ZU5vZGUoZD1hLm93bmVyRG9jdW1lbnQuY3JlYXRlQXR0cmlidXRlKGMpKSxkLnZhbHVlPWIrPVwiXCIsXCJ2YWx1ZVwiPT09Y3x8Yj09PWEuZ2V0QXR0cmlidXRlKGMpP2I6dm9pZCAwfX0sb2MuaWQ9b2MubmFtZT1vYy5jb29yZHM9ZnVuY3Rpb24oYSxiLGMpe3ZhciBkO3JldHVybiBjP3ZvaWQgMDooZD1hLmdldEF0dHJpYnV0ZU5vZGUoYikpJiZcIlwiIT09ZC52YWx1ZT9kLnZhbHVlOm51bGx9LG0udmFsSG9va3MuYnV0dG9uPXtnZXQ6ZnVuY3Rpb24oYSxiKXt2YXIgYz1hLmdldEF0dHJpYnV0ZU5vZGUoYik7cmV0dXJuIGMmJmMuc3BlY2lmaWVkP2MudmFsdWU6dm9pZCAwfSxzZXQ6bWMuc2V0fSxtLmF0dHJIb29rcy5jb250ZW50ZWRpdGFibGU9e3NldDpmdW5jdGlvbihhLGIsYyl7bWMuc2V0KGEsXCJcIj09PWI/ITE6YixjKX19LG0uZWFjaChbXCJ3aWR0aFwiLFwiaGVpZ2h0XCJdLGZ1bmN0aW9uKGEsYil7bS5hdHRySG9va3NbYl09e3NldDpmdW5jdGlvbihhLGMpe3JldHVyblwiXCI9PT1jPyhhLnNldEF0dHJpYnV0ZShiLFwiYXV0b1wiKSxjKTp2b2lkIDB9fX0pKSxrLnN0eWxlfHwobS5hdHRySG9va3Muc3R5bGU9e2dldDpmdW5jdGlvbihhKXtyZXR1cm4gYS5zdHlsZS5jc3NUZXh0fHx2b2lkIDB9LHNldDpmdW5jdGlvbihhLGIpe3JldHVybiBhLnN0eWxlLmNzc1RleHQ9YitcIlwifX0pO3ZhciBzYz0vXig/OmlucHV0fHNlbGVjdHx0ZXh0YXJlYXxidXR0b258b2JqZWN0KSQvaSx0Yz0vXig/OmF8YXJlYSkkL2k7bS5mbi5leHRlbmQoe3Byb3A6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gVih0aGlzLG0ucHJvcCxhLGIsYXJndW1lbnRzLmxlbmd0aD4xKX0scmVtb3ZlUHJvcDpmdW5jdGlvbihhKXtyZXR1cm4gYT1tLnByb3BGaXhbYV18fGEsdGhpcy5lYWNoKGZ1bmN0aW9uKCl7dHJ5e3RoaXNbYV09dm9pZCAwLGRlbGV0ZSB0aGlzW2FdfWNhdGNoKGIpe319KX19KSxtLmV4dGVuZCh7cHJvcEZpeDp7XCJmb3JcIjpcImh0bWxGb3JcIixcImNsYXNzXCI6XCJjbGFzc05hbWVcIn0scHJvcDpmdW5jdGlvbihhLGIsYyl7dmFyIGQsZSxmLGc9YS5ub2RlVHlwZTtpZihhJiYzIT09ZyYmOCE9PWcmJjIhPT1nKXJldHVybiBmPTEhPT1nfHwhbS5pc1hNTERvYyhhKSxmJiYoYj1tLnByb3BGaXhbYl18fGIsZT1tLnByb3BIb29rc1tiXSksdm9pZCAwIT09Yz9lJiZcInNldFwiaW4gZSYmdm9pZCAwIT09KGQ9ZS5zZXQoYSxjLGIpKT9kOmFbYl09YzplJiZcImdldFwiaW4gZSYmbnVsbCE9PShkPWUuZ2V0KGEsYikpP2Q6YVtiXX0scHJvcEhvb2tzOnt0YWJJbmRleDp7Z2V0OmZ1bmN0aW9uKGEpe3ZhciBiPW0uZmluZC5hdHRyKGEsXCJ0YWJpbmRleFwiKTtyZXR1cm4gYj9wYXJzZUludChiLDEwKTpzYy50ZXN0KGEubm9kZU5hbWUpfHx0Yy50ZXN0KGEubm9kZU5hbWUpJiZhLmhyZWY/MDotMX19fX0pLGsuaHJlZk5vcm1hbGl6ZWR8fG0uZWFjaChbXCJocmVmXCIsXCJzcmNcIl0sZnVuY3Rpb24oYSxiKXttLnByb3BIb29rc1tiXT17Z2V0OmZ1bmN0aW9uKGEpe3JldHVybiBhLmdldEF0dHJpYnV0ZShiLDQpfX19KSxrLm9wdFNlbGVjdGVkfHwobS5wcm9wSG9va3Muc2VsZWN0ZWQ9e2dldDpmdW5jdGlvbihhKXt2YXIgYj1hLnBhcmVudE5vZGU7cmV0dXJuIGImJihiLnNlbGVjdGVkSW5kZXgsYi5wYXJlbnROb2RlJiZiLnBhcmVudE5vZGUuc2VsZWN0ZWRJbmRleCksbnVsbH19KSxtLmVhY2goW1widGFiSW5kZXhcIixcInJlYWRPbmx5XCIsXCJtYXhMZW5ndGhcIixcImNlbGxTcGFjaW5nXCIsXCJjZWxsUGFkZGluZ1wiLFwicm93U3BhblwiLFwiY29sU3BhblwiLFwidXNlTWFwXCIsXCJmcmFtZUJvcmRlclwiLFwiY29udGVudEVkaXRhYmxlXCJdLGZ1bmN0aW9uKCl7bS5wcm9wRml4W3RoaXMudG9Mb3dlckNhc2UoKV09dGhpc30pLGsuZW5jdHlwZXx8KG0ucHJvcEZpeC5lbmN0eXBlPVwiZW5jb2RpbmdcIik7dmFyIHVjPS9bXFx0XFxyXFxuXFxmXS9nO20uZm4uZXh0ZW5kKHthZGRDbGFzczpmdW5jdGlvbihhKXt2YXIgYixjLGQsZSxmLGcsaD0wLGk9dGhpcy5sZW5ndGgsaj1cInN0cmluZ1wiPT10eXBlb2YgYSYmYTtpZihtLmlzRnVuY3Rpb24oYSkpcmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbihiKXttKHRoaXMpLmFkZENsYXNzKGEuY2FsbCh0aGlzLGIsdGhpcy5jbGFzc05hbWUpKX0pO2lmKGopZm9yKGI9KGF8fFwiXCIpLm1hdGNoKEUpfHxbXTtpPmg7aCsrKWlmKGM9dGhpc1toXSxkPTE9PT1jLm5vZGVUeXBlJiYoYy5jbGFzc05hbWU/KFwiIFwiK2MuY2xhc3NOYW1lK1wiIFwiKS5yZXBsYWNlKHVjLFwiIFwiKTpcIiBcIikpe2Y9MDt3aGlsZShlPWJbZisrXSlkLmluZGV4T2YoXCIgXCIrZStcIiBcIik8MCYmKGQrPWUrXCIgXCIpO2c9bS50cmltKGQpLGMuY2xhc3NOYW1lIT09ZyYmKGMuY2xhc3NOYW1lPWcpfXJldHVybiB0aGlzfSxyZW1vdmVDbGFzczpmdW5jdGlvbihhKXt2YXIgYixjLGQsZSxmLGcsaD0wLGk9dGhpcy5sZW5ndGgsaj0wPT09YXJndW1lbnRzLmxlbmd0aHx8XCJzdHJpbmdcIj09dHlwZW9mIGEmJmE7aWYobS5pc0Z1bmN0aW9uKGEpKXJldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oYil7bSh0aGlzKS5yZW1vdmVDbGFzcyhhLmNhbGwodGhpcyxiLHRoaXMuY2xhc3NOYW1lKSl9KTtpZihqKWZvcihiPShhfHxcIlwiKS5tYXRjaChFKXx8W107aT5oO2grKylpZihjPXRoaXNbaF0sZD0xPT09Yy5ub2RlVHlwZSYmKGMuY2xhc3NOYW1lPyhcIiBcIitjLmNsYXNzTmFtZStcIiBcIikucmVwbGFjZSh1YyxcIiBcIik6XCJcIikpe2Y9MDt3aGlsZShlPWJbZisrXSl3aGlsZShkLmluZGV4T2YoXCIgXCIrZStcIiBcIik+PTApZD1kLnJlcGxhY2UoXCIgXCIrZStcIiBcIixcIiBcIik7Zz1hP20udHJpbShkKTpcIlwiLGMuY2xhc3NOYW1lIT09ZyYmKGMuY2xhc3NOYW1lPWcpfXJldHVybiB0aGlzfSx0b2dnbGVDbGFzczpmdW5jdGlvbihhLGIpe3ZhciBjPXR5cGVvZiBhO3JldHVyblwiYm9vbGVhblwiPT10eXBlb2YgYiYmXCJzdHJpbmdcIj09PWM/Yj90aGlzLmFkZENsYXNzKGEpOnRoaXMucmVtb3ZlQ2xhc3MoYSk6dGhpcy5lYWNoKG0uaXNGdW5jdGlvbihhKT9mdW5jdGlvbihjKXttKHRoaXMpLnRvZ2dsZUNsYXNzKGEuY2FsbCh0aGlzLGMsdGhpcy5jbGFzc05hbWUsYiksYil9OmZ1bmN0aW9uKCl7aWYoXCJzdHJpbmdcIj09PWMpe3ZhciBiLGQ9MCxlPW0odGhpcyksZj1hLm1hdGNoKEUpfHxbXTt3aGlsZShiPWZbZCsrXSllLmhhc0NsYXNzKGIpP2UucmVtb3ZlQ2xhc3MoYik6ZS5hZGRDbGFzcyhiKX1lbHNlKGM9PT1LfHxcImJvb2xlYW5cIj09PWMpJiYodGhpcy5jbGFzc05hbWUmJm0uX2RhdGEodGhpcyxcIl9fY2xhc3NOYW1lX19cIix0aGlzLmNsYXNzTmFtZSksdGhpcy5jbGFzc05hbWU9dGhpcy5jbGFzc05hbWV8fGE9PT0hMT9cIlwiOm0uX2RhdGEodGhpcyxcIl9fY2xhc3NOYW1lX19cIil8fFwiXCIpfSl9LGhhc0NsYXNzOmZ1bmN0aW9uKGEpe2Zvcih2YXIgYj1cIiBcIithK1wiIFwiLGM9MCxkPXRoaXMubGVuZ3RoO2Q+YztjKyspaWYoMT09PXRoaXNbY10ubm9kZVR5cGUmJihcIiBcIit0aGlzW2NdLmNsYXNzTmFtZStcIiBcIikucmVwbGFjZSh1YyxcIiBcIikuaW5kZXhPZihiKT49MClyZXR1cm4hMDtyZXR1cm4hMX19KSxtLmVhY2goXCJibHVyIGZvY3VzIGZvY3VzaW4gZm9jdXNvdXQgbG9hZCByZXNpemUgc2Nyb2xsIHVubG9hZCBjbGljayBkYmxjbGljayBtb3VzZWRvd24gbW91c2V1cCBtb3VzZW1vdmUgbW91c2VvdmVyIG1vdXNlb3V0IG1vdXNlZW50ZXIgbW91c2VsZWF2ZSBjaGFuZ2Ugc2VsZWN0IHN1Ym1pdCBrZXlkb3duIGtleXByZXNzIGtleXVwIGVycm9yIGNvbnRleHRtZW51XCIuc3BsaXQoXCIgXCIpLGZ1bmN0aW9uKGEsYil7bS5mbltiXT1mdW5jdGlvbihhLGMpe3JldHVybiBhcmd1bWVudHMubGVuZ3RoPjA/dGhpcy5vbihiLG51bGwsYSxjKTp0aGlzLnRyaWdnZXIoYil9fSksbS5mbi5leHRlbmQoe2hvdmVyOmZ1bmN0aW9uKGEsYil7cmV0dXJuIHRoaXMubW91c2VlbnRlcihhKS5tb3VzZWxlYXZlKGJ8fGEpfSxiaW5kOmZ1bmN0aW9uKGEsYixjKXtyZXR1cm4gdGhpcy5vbihhLG51bGwsYixjKX0sdW5iaW5kOmZ1bmN0aW9uKGEsYil7cmV0dXJuIHRoaXMub2ZmKGEsbnVsbCxiKX0sZGVsZWdhdGU6ZnVuY3Rpb24oYSxiLGMsZCl7cmV0dXJuIHRoaXMub24oYixhLGMsZCl9LHVuZGVsZWdhdGU6ZnVuY3Rpb24oYSxiLGMpe3JldHVybiAxPT09YXJndW1lbnRzLmxlbmd0aD90aGlzLm9mZihhLFwiKipcIik6dGhpcy5vZmYoYixhfHxcIioqXCIsYyl9fSk7dmFyIHZjPW0ubm93KCksd2M9L1xcPy8seGM9LygsKXwoXFxbfHspfCh9fF0pfFwiKD86W15cIlxcXFxcXHJcXG5dfFxcXFxbXCJcXFxcXFwvYmZucnRdfFxcXFx1W1xcZGEtZkEtRl17NH0pKlwiXFxzKjo/fHRydWV8ZmFsc2V8bnVsbHwtPyg/ITBcXGQpXFxkKyg/OlxcLlxcZCt8KSg/OltlRV1bKy1dP1xcZCt8KS9nO20ucGFyc2VKU09OPWZ1bmN0aW9uKGIpe2lmKGEuSlNPTiYmYS5KU09OLnBhcnNlKXJldHVybiBhLkpTT04ucGFyc2UoYitcIlwiKTt2YXIgYyxkPW51bGwsZT1tLnRyaW0oYitcIlwiKTtyZXR1cm4gZSYmIW0udHJpbShlLnJlcGxhY2UoeGMsZnVuY3Rpb24oYSxiLGUsZil7cmV0dXJuIGMmJmImJihkPTApLDA9PT1kP2E6KGM9ZXx8YixkKz0hZi0hZSxcIlwiKX0pKT9GdW5jdGlvbihcInJldHVybiBcIitlKSgpOm0uZXJyb3IoXCJJbnZhbGlkIEpTT046IFwiK2IpfSxtLnBhcnNlWE1MPWZ1bmN0aW9uKGIpe3ZhciBjLGQ7aWYoIWJ8fFwic3RyaW5nXCIhPXR5cGVvZiBiKXJldHVybiBudWxsO3RyeXthLkRPTVBhcnNlcj8oZD1uZXcgRE9NUGFyc2VyLGM9ZC5wYXJzZUZyb21TdHJpbmcoYixcInRleHQveG1sXCIpKTooYz1uZXcgQWN0aXZlWE9iamVjdChcIk1pY3Jvc29mdC5YTUxET01cIiksYy5hc3luYz1cImZhbHNlXCIsYy5sb2FkWE1MKGIpKX1jYXRjaChlKXtjPXZvaWQgMH1yZXR1cm4gYyYmYy5kb2N1bWVudEVsZW1lbnQmJiFjLmdldEVsZW1lbnRzQnlUYWdOYW1lKFwicGFyc2VyZXJyb3JcIikubGVuZ3RofHxtLmVycm9yKFwiSW52YWxpZCBYTUw6IFwiK2IpLGN9O3ZhciB5Yyx6YyxBYz0vIy4qJC8sQmM9LyhbPyZdKV89W14mXSovLENjPS9eKC4qPyk6WyBcXHRdKihbXlxcclxcbl0qKVxccj8kL2dtLERjPS9eKD86YWJvdXR8YXBwfGFwcC1zdG9yYWdlfC4rLWV4dGVuc2lvbnxmaWxlfHJlc3x3aWRnZXQpOiQvLEVjPS9eKD86R0VUfEhFQUQpJC8sRmM9L15cXC9cXC8vLEdjPS9eKFtcXHcuKy1dKzopKD86XFwvXFwvKD86W15cXC8/I10qQHwpKFteXFwvPyM6XSopKD86OihcXGQrKXwpfCkvLEhjPXt9LEljPXt9LEpjPVwiKi9cIi5jb25jYXQoXCIqXCIpO3RyeXt6Yz1sb2NhdGlvbi5ocmVmfWNhdGNoKEtjKXt6Yz15LmNyZWF0ZUVsZW1lbnQoXCJhXCIpLHpjLmhyZWY9XCJcIix6Yz16Yy5ocmVmfXljPUdjLmV4ZWMoemMudG9Mb3dlckNhc2UoKSl8fFtdO2Z1bmN0aW9uIExjKGEpe3JldHVybiBmdW5jdGlvbihiLGMpe1wic3RyaW5nXCIhPXR5cGVvZiBiJiYoYz1iLGI9XCIqXCIpO3ZhciBkLGU9MCxmPWIudG9Mb3dlckNhc2UoKS5tYXRjaChFKXx8W107aWYobS5pc0Z1bmN0aW9uKGMpKXdoaWxlKGQ9ZltlKytdKVwiK1wiPT09ZC5jaGFyQXQoMCk/KGQ9ZC5zbGljZSgxKXx8XCIqXCIsKGFbZF09YVtkXXx8W10pLnVuc2hpZnQoYykpOihhW2RdPWFbZF18fFtdKS5wdXNoKGMpfX1mdW5jdGlvbiBNYyhhLGIsYyxkKXt2YXIgZT17fSxmPWE9PT1JYztmdW5jdGlvbiBnKGgpe3ZhciBpO3JldHVybiBlW2hdPSEwLG0uZWFjaChhW2hdfHxbXSxmdW5jdGlvbihhLGgpe3ZhciBqPWgoYixjLGQpO3JldHVyblwic3RyaW5nXCIhPXR5cGVvZiBqfHxmfHxlW2pdP2Y/IShpPWopOnZvaWQgMDooYi5kYXRhVHlwZXMudW5zaGlmdChqKSxnKGopLCExKX0pLGl9cmV0dXJuIGcoYi5kYXRhVHlwZXNbMF0pfHwhZVtcIipcIl0mJmcoXCIqXCIpfWZ1bmN0aW9uIE5jKGEsYil7dmFyIGMsZCxlPW0uYWpheFNldHRpbmdzLmZsYXRPcHRpb25zfHx7fTtmb3IoZCBpbiBiKXZvaWQgMCE9PWJbZF0mJigoZVtkXT9hOmN8fChjPXt9KSlbZF09YltkXSk7cmV0dXJuIGMmJm0uZXh0ZW5kKCEwLGEsYyksYX1mdW5jdGlvbiBPYyhhLGIsYyl7dmFyIGQsZSxmLGcsaD1hLmNvbnRlbnRzLGk9YS5kYXRhVHlwZXM7d2hpbGUoXCIqXCI9PT1pWzBdKWkuc2hpZnQoKSx2b2lkIDA9PT1lJiYoZT1hLm1pbWVUeXBlfHxiLmdldFJlc3BvbnNlSGVhZGVyKFwiQ29udGVudC1UeXBlXCIpKTtpZihlKWZvcihnIGluIGgpaWYoaFtnXSYmaFtnXS50ZXN0KGUpKXtpLnVuc2hpZnQoZyk7YnJlYWt9aWYoaVswXWluIGMpZj1pWzBdO2Vsc2V7Zm9yKGcgaW4gYyl7aWYoIWlbMF18fGEuY29udmVydGVyc1tnK1wiIFwiK2lbMF1dKXtmPWc7YnJlYWt9ZHx8KGQ9Zyl9Zj1mfHxkfXJldHVybiBmPyhmIT09aVswXSYmaS51bnNoaWZ0KGYpLGNbZl0pOnZvaWQgMH1mdW5jdGlvbiBQYyhhLGIsYyxkKXt2YXIgZSxmLGcsaCxpLGo9e30saz1hLmRhdGFUeXBlcy5zbGljZSgpO2lmKGtbMV0pZm9yKGcgaW4gYS5jb252ZXJ0ZXJzKWpbZy50b0xvd2VyQ2FzZSgpXT1hLmNvbnZlcnRlcnNbZ107Zj1rLnNoaWZ0KCk7d2hpbGUoZilpZihhLnJlc3BvbnNlRmllbGRzW2ZdJiYoY1thLnJlc3BvbnNlRmllbGRzW2ZdXT1iKSwhaSYmZCYmYS5kYXRhRmlsdGVyJiYoYj1hLmRhdGFGaWx0ZXIoYixhLmRhdGFUeXBlKSksaT1mLGY9ay5zaGlmdCgpKWlmKFwiKlwiPT09ZilmPWk7ZWxzZSBpZihcIipcIiE9PWkmJmkhPT1mKXtpZihnPWpbaStcIiBcIitmXXx8altcIiogXCIrZl0sIWcpZm9yKGUgaW4gailpZihoPWUuc3BsaXQoXCIgXCIpLGhbMV09PT1mJiYoZz1qW2krXCIgXCIraFswXV18fGpbXCIqIFwiK2hbMF1dKSl7Zz09PSEwP2c9altlXTpqW2VdIT09ITAmJihmPWhbMF0say51bnNoaWZ0KGhbMV0pKTticmVha31pZihnIT09ITApaWYoZyYmYVtcInRocm93c1wiXSliPWcoYik7ZWxzZSB0cnl7Yj1nKGIpfWNhdGNoKGwpe3JldHVybntzdGF0ZTpcInBhcnNlcmVycm9yXCIsZXJyb3I6Zz9sOlwiTm8gY29udmVyc2lvbiBmcm9tIFwiK2krXCIgdG8gXCIrZn19fXJldHVybntzdGF0ZTpcInN1Y2Nlc3NcIixkYXRhOmJ9fW0uZXh0ZW5kKHthY3RpdmU6MCxsYXN0TW9kaWZpZWQ6e30sZXRhZzp7fSxhamF4U2V0dGluZ3M6e3VybDp6Yyx0eXBlOlwiR0VUXCIsaXNMb2NhbDpEYy50ZXN0KHljWzFdKSxnbG9iYWw6ITAscHJvY2Vzc0RhdGE6ITAsYXN5bmM6ITAsY29udGVudFR5cGU6XCJhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWQ7IGNoYXJzZXQ9VVRGLThcIixhY2NlcHRzOntcIipcIjpKYyx0ZXh0OlwidGV4dC9wbGFpblwiLGh0bWw6XCJ0ZXh0L2h0bWxcIix4bWw6XCJhcHBsaWNhdGlvbi94bWwsIHRleHQveG1sXCIsanNvbjpcImFwcGxpY2F0aW9uL2pzb24sIHRleHQvamF2YXNjcmlwdFwifSxjb250ZW50czp7eG1sOi94bWwvLGh0bWw6L2h0bWwvLGpzb246L2pzb24vfSxyZXNwb25zZUZpZWxkczp7eG1sOlwicmVzcG9uc2VYTUxcIix0ZXh0OlwicmVzcG9uc2VUZXh0XCIsanNvbjpcInJlc3BvbnNlSlNPTlwifSxjb252ZXJ0ZXJzOntcIiogdGV4dFwiOlN0cmluZyxcInRleHQgaHRtbFwiOiEwLFwidGV4dCBqc29uXCI6bS5wYXJzZUpTT04sXCJ0ZXh0IHhtbFwiOm0ucGFyc2VYTUx9LGZsYXRPcHRpb25zOnt1cmw6ITAsY29udGV4dDohMH19LGFqYXhTZXR1cDpmdW5jdGlvbihhLGIpe3JldHVybiBiP05jKE5jKGEsbS5hamF4U2V0dGluZ3MpLGIpOk5jKG0uYWpheFNldHRpbmdzLGEpfSxhamF4UHJlZmlsdGVyOkxjKEhjKSxhamF4VHJhbnNwb3J0OkxjKEljKSxhamF4OmZ1bmN0aW9uKGEsYil7XCJvYmplY3RcIj09dHlwZW9mIGEmJihiPWEsYT12b2lkIDApLGI9Ynx8e307dmFyIGMsZCxlLGYsZyxoLGksaixrPW0uYWpheFNldHVwKHt9LGIpLGw9ay5jb250ZXh0fHxrLG49ay5jb250ZXh0JiYobC5ub2RlVHlwZXx8bC5qcXVlcnkpP20obCk6bS5ldmVudCxvPW0uRGVmZXJyZWQoKSxwPW0uQ2FsbGJhY2tzKFwib25jZSBtZW1vcnlcIikscT1rLnN0YXR1c0NvZGV8fHt9LHI9e30scz17fSx0PTAsdT1cImNhbmNlbGVkXCIsdj17cmVhZHlTdGF0ZTowLGdldFJlc3BvbnNlSGVhZGVyOmZ1bmN0aW9uKGEpe3ZhciBiO2lmKDI9PT10KXtpZighail7aj17fTt3aGlsZShiPUNjLmV4ZWMoZikpaltiWzFdLnRvTG93ZXJDYXNlKCldPWJbMl19Yj1qW2EudG9Mb3dlckNhc2UoKV19cmV0dXJuIG51bGw9PWI/bnVsbDpifSxnZXRBbGxSZXNwb25zZUhlYWRlcnM6ZnVuY3Rpb24oKXtyZXR1cm4gMj09PXQ/ZjpudWxsfSxzZXRSZXF1ZXN0SGVhZGVyOmZ1bmN0aW9uKGEsYil7dmFyIGM9YS50b0xvd2VyQ2FzZSgpO3JldHVybiB0fHwoYT1zW2NdPXNbY118fGEsclthXT1iKSx0aGlzfSxvdmVycmlkZU1pbWVUeXBlOmZ1bmN0aW9uKGEpe3JldHVybiB0fHwoay5taW1lVHlwZT1hKSx0aGlzfSxzdGF0dXNDb2RlOmZ1bmN0aW9uKGEpe3ZhciBiO2lmKGEpaWYoMj50KWZvcihiIGluIGEpcVtiXT1bcVtiXSxhW2JdXTtlbHNlIHYuYWx3YXlzKGFbdi5zdGF0dXNdKTtyZXR1cm4gdGhpc30sYWJvcnQ6ZnVuY3Rpb24oYSl7dmFyIGI9YXx8dTtyZXR1cm4gaSYmaS5hYm9ydChiKSx4KDAsYiksdGhpc319O2lmKG8ucHJvbWlzZSh2KS5jb21wbGV0ZT1wLmFkZCx2LnN1Y2Nlc3M9di5kb25lLHYuZXJyb3I9di5mYWlsLGsudXJsPSgoYXx8ay51cmx8fHpjKStcIlwiKS5yZXBsYWNlKEFjLFwiXCIpLnJlcGxhY2UoRmMseWNbMV0rXCIvL1wiKSxrLnR5cGU9Yi5tZXRob2R8fGIudHlwZXx8ay5tZXRob2R8fGsudHlwZSxrLmRhdGFUeXBlcz1tLnRyaW0oay5kYXRhVHlwZXx8XCIqXCIpLnRvTG93ZXJDYXNlKCkubWF0Y2goRSl8fFtcIlwiXSxudWxsPT1rLmNyb3NzRG9tYWluJiYoYz1HYy5leGVjKGsudXJsLnRvTG93ZXJDYXNlKCkpLGsuY3Jvc3NEb21haW49ISghY3x8Y1sxXT09PXljWzFdJiZjWzJdPT09eWNbMl0mJihjWzNdfHwoXCJodHRwOlwiPT09Y1sxXT9cIjgwXCI6XCI0NDNcIikpPT09KHljWzNdfHwoXCJodHRwOlwiPT09eWNbMV0/XCI4MFwiOlwiNDQzXCIpKSkpLGsuZGF0YSYmay5wcm9jZXNzRGF0YSYmXCJzdHJpbmdcIiE9dHlwZW9mIGsuZGF0YSYmKGsuZGF0YT1tLnBhcmFtKGsuZGF0YSxrLnRyYWRpdGlvbmFsKSksTWMoSGMsayxiLHYpLDI9PT10KXJldHVybiB2O2g9bS5ldmVudCYmay5nbG9iYWwsaCYmMD09PW0uYWN0aXZlKysmJm0uZXZlbnQudHJpZ2dlcihcImFqYXhTdGFydFwiKSxrLnR5cGU9ay50eXBlLnRvVXBwZXJDYXNlKCksay5oYXNDb250ZW50PSFFYy50ZXN0KGsudHlwZSksZT1rLnVybCxrLmhhc0NvbnRlbnR8fChrLmRhdGEmJihlPWsudXJsKz0od2MudGVzdChlKT9cIiZcIjpcIj9cIikray5kYXRhLGRlbGV0ZSBrLmRhdGEpLGsuY2FjaGU9PT0hMSYmKGsudXJsPUJjLnRlc3QoZSk/ZS5yZXBsYWNlKEJjLFwiJDFfPVwiK3ZjKyspOmUrKHdjLnRlc3QoZSk/XCImXCI6XCI/XCIpK1wiXz1cIit2YysrKSksay5pZk1vZGlmaWVkJiYobS5sYXN0TW9kaWZpZWRbZV0mJnYuc2V0UmVxdWVzdEhlYWRlcihcIklmLU1vZGlmaWVkLVNpbmNlXCIsbS5sYXN0TW9kaWZpZWRbZV0pLG0uZXRhZ1tlXSYmdi5zZXRSZXF1ZXN0SGVhZGVyKFwiSWYtTm9uZS1NYXRjaFwiLG0uZXRhZ1tlXSkpLChrLmRhdGEmJmsuaGFzQ29udGVudCYmay5jb250ZW50VHlwZSE9PSExfHxiLmNvbnRlbnRUeXBlKSYmdi5zZXRSZXF1ZXN0SGVhZGVyKFwiQ29udGVudC1UeXBlXCIsay5jb250ZW50VHlwZSksdi5zZXRSZXF1ZXN0SGVhZGVyKFwiQWNjZXB0XCIsay5kYXRhVHlwZXNbMF0mJmsuYWNjZXB0c1trLmRhdGFUeXBlc1swXV0/ay5hY2NlcHRzW2suZGF0YVR5cGVzWzBdXSsoXCIqXCIhPT1rLmRhdGFUeXBlc1swXT9cIiwgXCIrSmMrXCI7IHE9MC4wMVwiOlwiXCIpOmsuYWNjZXB0c1tcIipcIl0pO2ZvcihkIGluIGsuaGVhZGVycyl2LnNldFJlcXVlc3RIZWFkZXIoZCxrLmhlYWRlcnNbZF0pO2lmKGsuYmVmb3JlU2VuZCYmKGsuYmVmb3JlU2VuZC5jYWxsKGwsdixrKT09PSExfHwyPT09dCkpcmV0dXJuIHYuYWJvcnQoKTt1PVwiYWJvcnRcIjtmb3IoZCBpbntzdWNjZXNzOjEsZXJyb3I6MSxjb21wbGV0ZToxfSl2W2RdKGtbZF0pO2lmKGk9TWMoSWMsayxiLHYpKXt2LnJlYWR5U3RhdGU9MSxoJiZuLnRyaWdnZXIoXCJhamF4U2VuZFwiLFt2LGtdKSxrLmFzeW5jJiZrLnRpbWVvdXQ+MCYmKGc9c2V0VGltZW91dChmdW5jdGlvbigpe3YuYWJvcnQoXCJ0aW1lb3V0XCIpfSxrLnRpbWVvdXQpKTt0cnl7dD0xLGkuc2VuZChyLHgpfWNhdGNoKHcpe2lmKCEoMj50KSl0aHJvdyB3O3goLTEsdyl9fWVsc2UgeCgtMSxcIk5vIFRyYW5zcG9ydFwiKTtmdW5jdGlvbiB4KGEsYixjLGQpe3ZhciBqLHIscyx1LHcseD1iOzIhPT10JiYodD0yLGcmJmNsZWFyVGltZW91dChnKSxpPXZvaWQgMCxmPWR8fFwiXCIsdi5yZWFkeVN0YXRlPWE+MD80OjAsaj1hPj0yMDAmJjMwMD5hfHwzMDQ9PT1hLGMmJih1PU9jKGssdixjKSksdT1QYyhrLHUsdixqKSxqPyhrLmlmTW9kaWZpZWQmJih3PXYuZ2V0UmVzcG9uc2VIZWFkZXIoXCJMYXN0LU1vZGlmaWVkXCIpLHcmJihtLmxhc3RNb2RpZmllZFtlXT13KSx3PXYuZ2V0UmVzcG9uc2VIZWFkZXIoXCJldGFnXCIpLHcmJihtLmV0YWdbZV09dykpLDIwND09PWF8fFwiSEVBRFwiPT09ay50eXBlP3g9XCJub2NvbnRlbnRcIjozMDQ9PT1hP3g9XCJub3Rtb2RpZmllZFwiOih4PXUuc3RhdGUscj11LmRhdGEscz11LmVycm9yLGo9IXMpKToocz14LChhfHwheCkmJih4PVwiZXJyb3JcIiwwPmEmJihhPTApKSksdi5zdGF0dXM9YSx2LnN0YXR1c1RleHQ9KGJ8fHgpK1wiXCIsaj9vLnJlc29sdmVXaXRoKGwsW3IseCx2XSk6by5yZWplY3RXaXRoKGwsW3YseCxzXSksdi5zdGF0dXNDb2RlKHEpLHE9dm9pZCAwLGgmJm4udHJpZ2dlcihqP1wiYWpheFN1Y2Nlc3NcIjpcImFqYXhFcnJvclwiLFt2LGssaj9yOnNdKSxwLmZpcmVXaXRoKGwsW3YseF0pLGgmJihuLnRyaWdnZXIoXCJhamF4Q29tcGxldGVcIixbdixrXSksLS1tLmFjdGl2ZXx8bS5ldmVudC50cmlnZ2VyKFwiYWpheFN0b3BcIikpKX1yZXR1cm4gdn0sZ2V0SlNPTjpmdW5jdGlvbihhLGIsYyl7cmV0dXJuIG0uZ2V0KGEsYixjLFwianNvblwiKX0sZ2V0U2NyaXB0OmZ1bmN0aW9uKGEsYil7cmV0dXJuIG0uZ2V0KGEsdm9pZCAwLGIsXCJzY3JpcHRcIil9fSksbS5lYWNoKFtcImdldFwiLFwicG9zdFwiXSxmdW5jdGlvbihhLGIpe21bYl09ZnVuY3Rpb24oYSxjLGQsZSl7cmV0dXJuIG0uaXNGdW5jdGlvbihjKSYmKGU9ZXx8ZCxkPWMsYz12b2lkIDApLG0uYWpheCh7dXJsOmEsdHlwZTpiLGRhdGFUeXBlOmUsZGF0YTpjLHN1Y2Nlc3M6ZH0pfX0pLG0uX2V2YWxVcmw9ZnVuY3Rpb24oYSl7cmV0dXJuIG0uYWpheCh7dXJsOmEsdHlwZTpcIkdFVFwiLGRhdGFUeXBlOlwic2NyaXB0XCIsYXN5bmM6ITEsZ2xvYmFsOiExLFwidGhyb3dzXCI6ITB9KX0sbS5mbi5leHRlbmQoe3dyYXBBbGw6ZnVuY3Rpb24oYSl7aWYobS5pc0Z1bmN0aW9uKGEpKXJldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oYil7bSh0aGlzKS53cmFwQWxsKGEuY2FsbCh0aGlzLGIpKX0pO2lmKHRoaXNbMF0pe3ZhciBiPW0oYSx0aGlzWzBdLm93bmVyRG9jdW1lbnQpLmVxKDApLmNsb25lKCEwKTt0aGlzWzBdLnBhcmVudE5vZGUmJmIuaW5zZXJ0QmVmb3JlKHRoaXNbMF0pLGIubWFwKGZ1bmN0aW9uKCl7dmFyIGE9dGhpczt3aGlsZShhLmZpcnN0Q2hpbGQmJjE9PT1hLmZpcnN0Q2hpbGQubm9kZVR5cGUpYT1hLmZpcnN0Q2hpbGQ7cmV0dXJuIGF9KS5hcHBlbmQodGhpcyl9cmV0dXJuIHRoaXN9LHdyYXBJbm5lcjpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5lYWNoKG0uaXNGdW5jdGlvbihhKT9mdW5jdGlvbihiKXttKHRoaXMpLndyYXBJbm5lcihhLmNhbGwodGhpcyxiKSl9OmZ1bmN0aW9uKCl7dmFyIGI9bSh0aGlzKSxjPWIuY29udGVudHMoKTtjLmxlbmd0aD9jLndyYXBBbGwoYSk6Yi5hcHBlbmQoYSl9KX0sd3JhcDpmdW5jdGlvbihhKXt2YXIgYj1tLmlzRnVuY3Rpb24oYSk7cmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbihjKXttKHRoaXMpLndyYXBBbGwoYj9hLmNhbGwodGhpcyxjKTphKX0pfSx1bndyYXA6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5wYXJlbnQoKS5lYWNoKGZ1bmN0aW9uKCl7bS5ub2RlTmFtZSh0aGlzLFwiYm9keVwiKXx8bSh0aGlzKS5yZXBsYWNlV2l0aCh0aGlzLmNoaWxkTm9kZXMpfSkuZW5kKCl9fSksbS5leHByLmZpbHRlcnMuaGlkZGVuPWZ1bmN0aW9uKGEpe3JldHVybiBhLm9mZnNldFdpZHRoPD0wJiZhLm9mZnNldEhlaWdodDw9MHx8IWsucmVsaWFibGVIaWRkZW5PZmZzZXRzKCkmJlwibm9uZVwiPT09KGEuc3R5bGUmJmEuc3R5bGUuZGlzcGxheXx8bS5jc3MoYSxcImRpc3BsYXlcIikpfSxtLmV4cHIuZmlsdGVycy52aXNpYmxlPWZ1bmN0aW9uKGEpe3JldHVybiFtLmV4cHIuZmlsdGVycy5oaWRkZW4oYSl9O3ZhciBRYz0vJTIwL2csUmM9L1xcW1xcXSQvLFNjPS9cXHI/XFxuL2csVGM9L14oPzpzdWJtaXR8YnV0dG9ufGltYWdlfHJlc2V0fGZpbGUpJC9pLFVjPS9eKD86aW5wdXR8c2VsZWN0fHRleHRhcmVhfGtleWdlbikvaTtmdW5jdGlvbiBWYyhhLGIsYyxkKXt2YXIgZTtpZihtLmlzQXJyYXkoYikpbS5lYWNoKGIsZnVuY3Rpb24oYixlKXtjfHxSYy50ZXN0KGEpP2QoYSxlKTpWYyhhK1wiW1wiKyhcIm9iamVjdFwiPT10eXBlb2YgZT9iOlwiXCIpK1wiXVwiLGUsYyxkKX0pO2Vsc2UgaWYoY3x8XCJvYmplY3RcIiE9PW0udHlwZShiKSlkKGEsYik7ZWxzZSBmb3IoZSBpbiBiKVZjKGErXCJbXCIrZStcIl1cIixiW2VdLGMsZCl9bS5wYXJhbT1mdW5jdGlvbihhLGIpe3ZhciBjLGQ9W10sZT1mdW5jdGlvbihhLGIpe2I9bS5pc0Z1bmN0aW9uKGIpP2IoKTpudWxsPT1iP1wiXCI6YixkW2QubGVuZ3RoXT1lbmNvZGVVUklDb21wb25lbnQoYSkrXCI9XCIrZW5jb2RlVVJJQ29tcG9uZW50KGIpfTtpZih2b2lkIDA9PT1iJiYoYj1tLmFqYXhTZXR0aW5ncyYmbS5hamF4U2V0dGluZ3MudHJhZGl0aW9uYWwpLG0uaXNBcnJheShhKXx8YS5qcXVlcnkmJiFtLmlzUGxhaW5PYmplY3QoYSkpbS5lYWNoKGEsZnVuY3Rpb24oKXtlKHRoaXMubmFtZSx0aGlzLnZhbHVlKX0pO2Vsc2UgZm9yKGMgaW4gYSlWYyhjLGFbY10sYixlKTtyZXR1cm4gZC5qb2luKFwiJlwiKS5yZXBsYWNlKFFjLFwiK1wiKX0sbS5mbi5leHRlbmQoe3NlcmlhbGl6ZTpmdW5jdGlvbigpe3JldHVybiBtLnBhcmFtKHRoaXMuc2VyaWFsaXplQXJyYXkoKSl9LHNlcmlhbGl6ZUFycmF5OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMubWFwKGZ1bmN0aW9uKCl7dmFyIGE9bS5wcm9wKHRoaXMsXCJlbGVtZW50c1wiKTtyZXR1cm4gYT9tLm1ha2VBcnJheShhKTp0aGlzfSkuZmlsdGVyKGZ1bmN0aW9uKCl7dmFyIGE9dGhpcy50eXBlO3JldHVybiB0aGlzLm5hbWUmJiFtKHRoaXMpLmlzKFwiOmRpc2FibGVkXCIpJiZVYy50ZXN0KHRoaXMubm9kZU5hbWUpJiYhVGMudGVzdChhKSYmKHRoaXMuY2hlY2tlZHx8IVcudGVzdChhKSl9KS5tYXAoZnVuY3Rpb24oYSxiKXt2YXIgYz1tKHRoaXMpLnZhbCgpO3JldHVybiBudWxsPT1jP251bGw6bS5pc0FycmF5KGMpP20ubWFwKGMsZnVuY3Rpb24oYSl7cmV0dXJue25hbWU6Yi5uYW1lLHZhbHVlOmEucmVwbGFjZShTYyxcIlxcclxcblwiKX19KTp7bmFtZTpiLm5hbWUsdmFsdWU6Yy5yZXBsYWNlKFNjLFwiXFxyXFxuXCIpfX0pLmdldCgpfX0pLG0uYWpheFNldHRpbmdzLnhocj12b2lkIDAhPT1hLkFjdGl2ZVhPYmplY3Q/ZnVuY3Rpb24oKXtyZXR1cm4hdGhpcy5pc0xvY2FsJiYvXihnZXR8cG9zdHxoZWFkfHB1dHxkZWxldGV8b3B0aW9ucykkL2kudGVzdCh0aGlzLnR5cGUpJiZaYygpfHwkYygpfTpaYzt2YXIgV2M9MCxYYz17fSxZYz1tLmFqYXhTZXR0aW5ncy54aHIoKTthLmF0dGFjaEV2ZW50JiZhLmF0dGFjaEV2ZW50KFwib251bmxvYWRcIixmdW5jdGlvbigpe2Zvcih2YXIgYSBpbiBYYylYY1thXSh2b2lkIDAsITApfSksay5jb3JzPSEhWWMmJlwid2l0aENyZWRlbnRpYWxzXCJpbiBZYyxZYz1rLmFqYXg9ISFZYyxZYyYmbS5hamF4VHJhbnNwb3J0KGZ1bmN0aW9uKGEpe2lmKCFhLmNyb3NzRG9tYWlufHxrLmNvcnMpe3ZhciBiO3JldHVybntzZW5kOmZ1bmN0aW9uKGMsZCl7dmFyIGUsZj1hLnhocigpLGc9KytXYztpZihmLm9wZW4oYS50eXBlLGEudXJsLGEuYXN5bmMsYS51c2VybmFtZSxhLnBhc3N3b3JkKSxhLnhockZpZWxkcylmb3IoZSBpbiBhLnhockZpZWxkcylmW2VdPWEueGhyRmllbGRzW2VdO2EubWltZVR5cGUmJmYub3ZlcnJpZGVNaW1lVHlwZSYmZi5vdmVycmlkZU1pbWVUeXBlKGEubWltZVR5cGUpLGEuY3Jvc3NEb21haW58fGNbXCJYLVJlcXVlc3RlZC1XaXRoXCJdfHwoY1tcIlgtUmVxdWVzdGVkLVdpdGhcIl09XCJYTUxIdHRwUmVxdWVzdFwiKTtmb3IoZSBpbiBjKXZvaWQgMCE9PWNbZV0mJmYuc2V0UmVxdWVzdEhlYWRlcihlLGNbZV0rXCJcIik7Zi5zZW5kKGEuaGFzQ29udGVudCYmYS5kYXRhfHxudWxsKSxiPWZ1bmN0aW9uKGMsZSl7dmFyIGgsaSxqO2lmKGImJihlfHw0PT09Zi5yZWFkeVN0YXRlKSlpZihkZWxldGUgWGNbZ10sYj12b2lkIDAsZi5vbnJlYWR5c3RhdGVjaGFuZ2U9bS5ub29wLGUpNCE9PWYucmVhZHlTdGF0ZSYmZi5hYm9ydCgpO2Vsc2V7aj17fSxoPWYuc3RhdHVzLFwic3RyaW5nXCI9PXR5cGVvZiBmLnJlc3BvbnNlVGV4dCYmKGoudGV4dD1mLnJlc3BvbnNlVGV4dCk7dHJ5e2k9Zi5zdGF0dXNUZXh0fWNhdGNoKGspe2k9XCJcIn1ofHwhYS5pc0xvY2FsfHxhLmNyb3NzRG9tYWluPzEyMjM9PT1oJiYoaD0yMDQpOmg9ai50ZXh0PzIwMDo0MDR9aiYmZChoLGksaixmLmdldEFsbFJlc3BvbnNlSGVhZGVycygpKX0sYS5hc3luYz80PT09Zi5yZWFkeVN0YXRlP3NldFRpbWVvdXQoYik6Zi5vbnJlYWR5c3RhdGVjaGFuZ2U9WGNbZ109YjpiKCl9LGFib3J0OmZ1bmN0aW9uKCl7YiYmYih2b2lkIDAsITApfX19fSk7ZnVuY3Rpb24gWmMoKXt0cnl7cmV0dXJuIG5ldyBhLlhNTEh0dHBSZXF1ZXN0fWNhdGNoKGIpe319ZnVuY3Rpb24gJGMoKXt0cnl7cmV0dXJuIG5ldyBhLkFjdGl2ZVhPYmplY3QoXCJNaWNyb3NvZnQuWE1MSFRUUFwiKX1jYXRjaChiKXt9fW0uYWpheFNldHVwKHthY2NlcHRzOntzY3JpcHQ6XCJ0ZXh0L2phdmFzY3JpcHQsIGFwcGxpY2F0aW9uL2phdmFzY3JpcHQsIGFwcGxpY2F0aW9uL2VjbWFzY3JpcHQsIGFwcGxpY2F0aW9uL3gtZWNtYXNjcmlwdFwifSxjb250ZW50czp7c2NyaXB0Oi8oPzpqYXZhfGVjbWEpc2NyaXB0L30sY29udmVydGVyczp7XCJ0ZXh0IHNjcmlwdFwiOmZ1bmN0aW9uKGEpe3JldHVybiBtLmdsb2JhbEV2YWwoYSksYX19fSksbS5hamF4UHJlZmlsdGVyKFwic2NyaXB0XCIsZnVuY3Rpb24oYSl7dm9pZCAwPT09YS5jYWNoZSYmKGEuY2FjaGU9ITEpLGEuY3Jvc3NEb21haW4mJihhLnR5cGU9XCJHRVRcIixhLmdsb2JhbD0hMSl9KSxtLmFqYXhUcmFuc3BvcnQoXCJzY3JpcHRcIixmdW5jdGlvbihhKXtpZihhLmNyb3NzRG9tYWluKXt2YXIgYixjPXkuaGVhZHx8bShcImhlYWRcIilbMF18fHkuZG9jdW1lbnRFbGVtZW50O3JldHVybntzZW5kOmZ1bmN0aW9uKGQsZSl7Yj15LmNyZWF0ZUVsZW1lbnQoXCJzY3JpcHRcIiksYi5hc3luYz0hMCxhLnNjcmlwdENoYXJzZXQmJihiLmNoYXJzZXQ9YS5zY3JpcHRDaGFyc2V0KSxiLnNyYz1hLnVybCxiLm9ubG9hZD1iLm9ucmVhZHlzdGF0ZWNoYW5nZT1mdW5jdGlvbihhLGMpeyhjfHwhYi5yZWFkeVN0YXRlfHwvbG9hZGVkfGNvbXBsZXRlLy50ZXN0KGIucmVhZHlTdGF0ZSkpJiYoYi5vbmxvYWQ9Yi5vbnJlYWR5c3RhdGVjaGFuZ2U9bnVsbCxiLnBhcmVudE5vZGUmJmIucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChiKSxiPW51bGwsY3x8ZSgyMDAsXCJzdWNjZXNzXCIpKX0sYy5pbnNlcnRCZWZvcmUoYixjLmZpcnN0Q2hpbGQpfSxhYm9ydDpmdW5jdGlvbigpe2ImJmIub25sb2FkKHZvaWQgMCwhMCl9fX19KTt2YXIgX2M9W10sYWQ9Lyg9KVxcPyg/PSZ8JCl8XFw/XFw/LzttLmFqYXhTZXR1cCh7anNvbnA6XCJjYWxsYmFja1wiLGpzb25wQ2FsbGJhY2s6ZnVuY3Rpb24oKXt2YXIgYT1fYy5wb3AoKXx8bS5leHBhbmRvK1wiX1wiK3ZjKys7cmV0dXJuIHRoaXNbYV09ITAsYX19KSxtLmFqYXhQcmVmaWx0ZXIoXCJqc29uIGpzb25wXCIsZnVuY3Rpb24oYixjLGQpe3ZhciBlLGYsZyxoPWIuanNvbnAhPT0hMSYmKGFkLnRlc3QoYi51cmwpP1widXJsXCI6XCJzdHJpbmdcIj09dHlwZW9mIGIuZGF0YSYmIShiLmNvbnRlbnRUeXBlfHxcIlwiKS5pbmRleE9mKFwiYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkXCIpJiZhZC50ZXN0KGIuZGF0YSkmJlwiZGF0YVwiKTtyZXR1cm4gaHx8XCJqc29ucFwiPT09Yi5kYXRhVHlwZXNbMF0/KGU9Yi5qc29ucENhbGxiYWNrPW0uaXNGdW5jdGlvbihiLmpzb25wQ2FsbGJhY2spP2IuanNvbnBDYWxsYmFjaygpOmIuanNvbnBDYWxsYmFjayxoP2JbaF09YltoXS5yZXBsYWNlKGFkLFwiJDFcIitlKTpiLmpzb25wIT09ITEmJihiLnVybCs9KHdjLnRlc3QoYi51cmwpP1wiJlwiOlwiP1wiKStiLmpzb25wK1wiPVwiK2UpLGIuY29udmVydGVyc1tcInNjcmlwdCBqc29uXCJdPWZ1bmN0aW9uKCl7cmV0dXJuIGd8fG0uZXJyb3IoZStcIiB3YXMgbm90IGNhbGxlZFwiKSxnWzBdfSxiLmRhdGFUeXBlc1swXT1cImpzb25cIixmPWFbZV0sYVtlXT1mdW5jdGlvbigpe2c9YXJndW1lbnRzfSxkLmFsd2F5cyhmdW5jdGlvbigpe2FbZV09ZixiW2VdJiYoYi5qc29ucENhbGxiYWNrPWMuanNvbnBDYWxsYmFjayxfYy5wdXNoKGUpKSxnJiZtLmlzRnVuY3Rpb24oZikmJmYoZ1swXSksZz1mPXZvaWQgMH0pLFwic2NyaXB0XCIpOnZvaWQgMH0pLG0ucGFyc2VIVE1MPWZ1bmN0aW9uKGEsYixjKXtpZighYXx8XCJzdHJpbmdcIiE9dHlwZW9mIGEpcmV0dXJuIG51bGw7XCJib29sZWFuXCI9PXR5cGVvZiBiJiYoYz1iLGI9ITEpLGI9Ynx8eTt2YXIgZD11LmV4ZWMoYSksZT0hYyYmW107cmV0dXJuIGQ/W2IuY3JlYXRlRWxlbWVudChkWzFdKV06KGQ9bS5idWlsZEZyYWdtZW50KFthXSxiLGUpLGUmJmUubGVuZ3RoJiZtKGUpLnJlbW92ZSgpLG0ubWVyZ2UoW10sZC5jaGlsZE5vZGVzKSl9O3ZhciBiZD1tLmZuLmxvYWQ7bS5mbi5sb2FkPWZ1bmN0aW9uKGEsYixjKXtpZihcInN0cmluZ1wiIT10eXBlb2YgYSYmYmQpcmV0dXJuIGJkLmFwcGx5KHRoaXMsYXJndW1lbnRzKTt2YXIgZCxlLGYsZz10aGlzLGg9YS5pbmRleE9mKFwiIFwiKTtyZXR1cm4gaD49MCYmKGQ9bS50cmltKGEuc2xpY2UoaCxhLmxlbmd0aCkpLGE9YS5zbGljZSgwLGgpKSxtLmlzRnVuY3Rpb24oYik/KGM9YixiPXZvaWQgMCk6YiYmXCJvYmplY3RcIj09dHlwZW9mIGImJihmPVwiUE9TVFwiKSxnLmxlbmd0aD4wJiZtLmFqYXgoe3VybDphLHR5cGU6ZixkYXRhVHlwZTpcImh0bWxcIixkYXRhOmJ9KS5kb25lKGZ1bmN0aW9uKGEpe2U9YXJndW1lbnRzLGcuaHRtbChkP20oXCI8ZGl2PlwiKS5hcHBlbmQobS5wYXJzZUhUTUwoYSkpLmZpbmQoZCk6YSl9KS5jb21wbGV0ZShjJiZmdW5jdGlvbihhLGIpe2cuZWFjaChjLGV8fFthLnJlc3BvbnNlVGV4dCxiLGFdKX0pLHRoaXN9LG0uZWFjaChbXCJhamF4U3RhcnRcIixcImFqYXhTdG9wXCIsXCJhamF4Q29tcGxldGVcIixcImFqYXhFcnJvclwiLFwiYWpheFN1Y2Nlc3NcIixcImFqYXhTZW5kXCJdLGZ1bmN0aW9uKGEsYil7bS5mbltiXT1mdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5vbihiLGEpfX0pLG0uZXhwci5maWx0ZXJzLmFuaW1hdGVkPWZ1bmN0aW9uKGEpe3JldHVybiBtLmdyZXAobS50aW1lcnMsZnVuY3Rpb24oYil7cmV0dXJuIGE9PT1iLmVsZW19KS5sZW5ndGh9O3ZhciBjZD1hLmRvY3VtZW50LmRvY3VtZW50RWxlbWVudDtmdW5jdGlvbiBkZChhKXtyZXR1cm4gbS5pc1dpbmRvdyhhKT9hOjk9PT1hLm5vZGVUeXBlP2EuZGVmYXVsdFZpZXd8fGEucGFyZW50V2luZG93OiExfW0ub2Zmc2V0PXtzZXRPZmZzZXQ6ZnVuY3Rpb24oYSxiLGMpe3ZhciBkLGUsZixnLGgsaSxqLGs9bS5jc3MoYSxcInBvc2l0aW9uXCIpLGw9bShhKSxuPXt9O1wic3RhdGljXCI9PT1rJiYoYS5zdHlsZS5wb3NpdGlvbj1cInJlbGF0aXZlXCIpLGg9bC5vZmZzZXQoKSxmPW0uY3NzKGEsXCJ0b3BcIiksaT1tLmNzcyhhLFwibGVmdFwiKSxqPShcImFic29sdXRlXCI9PT1rfHxcImZpeGVkXCI9PT1rKSYmbS5pbkFycmF5KFwiYXV0b1wiLFtmLGldKT4tMSxqPyhkPWwucG9zaXRpb24oKSxnPWQudG9wLGU9ZC5sZWZ0KTooZz1wYXJzZUZsb2F0KGYpfHwwLGU9cGFyc2VGbG9hdChpKXx8MCksbS5pc0Z1bmN0aW9uKGIpJiYoYj1iLmNhbGwoYSxjLGgpKSxudWxsIT1iLnRvcCYmKG4udG9wPWIudG9wLWgudG9wK2cpLG51bGwhPWIubGVmdCYmKG4ubGVmdD1iLmxlZnQtaC5sZWZ0K2UpLFwidXNpbmdcImluIGI/Yi51c2luZy5jYWxsKGEsbik6bC5jc3Mobil9fSxtLmZuLmV4dGVuZCh7b2Zmc2V0OmZ1bmN0aW9uKGEpe2lmKGFyZ3VtZW50cy5sZW5ndGgpcmV0dXJuIHZvaWQgMD09PWE/dGhpczp0aGlzLmVhY2goZnVuY3Rpb24oYil7bS5vZmZzZXQuc2V0T2Zmc2V0KHRoaXMsYSxiKX0pO3ZhciBiLGMsZD17dG9wOjAsbGVmdDowfSxlPXRoaXNbMF0sZj1lJiZlLm93bmVyRG9jdW1lbnQ7aWYoZilyZXR1cm4gYj1mLmRvY3VtZW50RWxlbWVudCxtLmNvbnRhaW5zKGIsZSk/KHR5cGVvZiBlLmdldEJvdW5kaW5nQ2xpZW50UmVjdCE9PUsmJihkPWUuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkpLGM9ZGQoZikse3RvcDpkLnRvcCsoYy5wYWdlWU9mZnNldHx8Yi5zY3JvbGxUb3ApLShiLmNsaWVudFRvcHx8MCksbGVmdDpkLmxlZnQrKGMucGFnZVhPZmZzZXR8fGIuc2Nyb2xsTGVmdCktKGIuY2xpZW50TGVmdHx8MCl9KTpkfSxwb3NpdGlvbjpmdW5jdGlvbigpe2lmKHRoaXNbMF0pe3ZhciBhLGIsYz17dG9wOjAsbGVmdDowfSxkPXRoaXNbMF07cmV0dXJuXCJmaXhlZFwiPT09bS5jc3MoZCxcInBvc2l0aW9uXCIpP2I9ZC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTooYT10aGlzLm9mZnNldFBhcmVudCgpLGI9dGhpcy5vZmZzZXQoKSxtLm5vZGVOYW1lKGFbMF0sXCJodG1sXCIpfHwoYz1hLm9mZnNldCgpKSxjLnRvcCs9bS5jc3MoYVswXSxcImJvcmRlclRvcFdpZHRoXCIsITApLGMubGVmdCs9bS5jc3MoYVswXSxcImJvcmRlckxlZnRXaWR0aFwiLCEwKSkse3RvcDpiLnRvcC1jLnRvcC1tLmNzcyhkLFwibWFyZ2luVG9wXCIsITApLGxlZnQ6Yi5sZWZ0LWMubGVmdC1tLmNzcyhkLFwibWFyZ2luTGVmdFwiLCEwKX19fSxvZmZzZXRQYXJlbnQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5tYXAoZnVuY3Rpb24oKXt2YXIgYT10aGlzLm9mZnNldFBhcmVudHx8Y2Q7d2hpbGUoYSYmIW0ubm9kZU5hbWUoYSxcImh0bWxcIikmJlwic3RhdGljXCI9PT1tLmNzcyhhLFwicG9zaXRpb25cIikpYT1hLm9mZnNldFBhcmVudDtyZXR1cm4gYXx8Y2R9KX19KSxtLmVhY2goe3Njcm9sbExlZnQ6XCJwYWdlWE9mZnNldFwiLHNjcm9sbFRvcDpcInBhZ2VZT2Zmc2V0XCJ9LGZ1bmN0aW9uKGEsYil7dmFyIGM9L1kvLnRlc3QoYik7bS5mblthXT1mdW5jdGlvbihkKXtyZXR1cm4gVih0aGlzLGZ1bmN0aW9uKGEsZCxlKXt2YXIgZj1kZChhKTtyZXR1cm4gdm9pZCAwPT09ZT9mP2IgaW4gZj9mW2JdOmYuZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50W2RdOmFbZF06dm9pZChmP2Yuc2Nyb2xsVG8oYz9tKGYpLnNjcm9sbExlZnQoKTplLGM/ZTptKGYpLnNjcm9sbFRvcCgpKTphW2RdPWUpfSxhLGQsYXJndW1lbnRzLmxlbmd0aCxudWxsKX19KSxtLmVhY2goW1widG9wXCIsXCJsZWZ0XCJdLGZ1bmN0aW9uKGEsYil7bS5jc3NIb29rc1tiXT1MYihrLnBpeGVsUG9zaXRpb24sZnVuY3Rpb24oYSxjKXtyZXR1cm4gYz8oYz1KYihhLGIpLEhiLnRlc3QoYyk/bShhKS5wb3NpdGlvbigpW2JdK1wicHhcIjpjKTp2b2lkIDB9KX0pLG0uZWFjaCh7SGVpZ2h0OlwiaGVpZ2h0XCIsV2lkdGg6XCJ3aWR0aFwifSxmdW5jdGlvbihhLGIpe20uZWFjaCh7cGFkZGluZzpcImlubmVyXCIrYSxjb250ZW50OmIsXCJcIjpcIm91dGVyXCIrYX0sZnVuY3Rpb24oYyxkKXttLmZuW2RdPWZ1bmN0aW9uKGQsZSl7dmFyIGY9YXJndW1lbnRzLmxlbmd0aCYmKGN8fFwiYm9vbGVhblwiIT10eXBlb2YgZCksZz1jfHwoZD09PSEwfHxlPT09ITA/XCJtYXJnaW5cIjpcImJvcmRlclwiKTtyZXR1cm4gVih0aGlzLGZ1bmN0aW9uKGIsYyxkKXt2YXIgZTtyZXR1cm4gbS5pc1dpbmRvdyhiKT9iLmRvY3VtZW50LmRvY3VtZW50RWxlbWVudFtcImNsaWVudFwiK2FdOjk9PT1iLm5vZGVUeXBlPyhlPWIuZG9jdW1lbnRFbGVtZW50LE1hdGgubWF4KGIuYm9keVtcInNjcm9sbFwiK2FdLGVbXCJzY3JvbGxcIithXSxiLmJvZHlbXCJvZmZzZXRcIithXSxlW1wib2Zmc2V0XCIrYV0sZVtcImNsaWVudFwiK2FdKSk6dm9pZCAwPT09ZD9tLmNzcyhiLGMsZyk6bS5zdHlsZShiLGMsZCxnKX0sYixmP2Q6dm9pZCAwLGYsbnVsbCl9fSl9KSxtLmZuLnNpemU9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5sZW5ndGh9LG0uZm4uYW5kU2VsZj1tLmZuLmFkZEJhY2ssXCJmdW5jdGlvblwiPT10eXBlb2YgZGVmaW5lJiZkZWZpbmUuYW1kJiZkZWZpbmUoXCJqcXVlcnlcIixbXSxmdW5jdGlvbigpe3JldHVybiBtfSk7dmFyIGVkPWEualF1ZXJ5LGZkPWEuJDtyZXR1cm4gbS5ub0NvbmZsaWN0PWZ1bmN0aW9uKGIpe3JldHVybiBhLiQ9PT1tJiYoYS4kPWZkKSxiJiZhLmpRdWVyeT09PW0mJihhLmpRdWVyeT1lZCksbX0sdHlwZW9mIGI9PT1LJiYoYS5qUXVlcnk9YS4kPW0pLG19KTtcclxuIiwiLyohXHJcbiAgICBsb2NhbEZvcmFnZSAtLSBPZmZsaW5lIFN0b3JhZ2UsIEltcHJvdmVkXHJcbiAgICBWZXJzaW9uIDEuNC4zXHJcbiAgICBodHRwczovL21vemlsbGEuZ2l0aHViLmlvL2xvY2FsRm9yYWdlXHJcbiAgICAoYykgMjAxMy0yMDE2IE1vemlsbGEsIEFwYWNoZSBMaWNlbnNlIDIuMFxyXG4qL1xyXG4hZnVuY3Rpb24oYSl7aWYoXCJvYmplY3RcIj09dHlwZW9mIGV4cG9ydHMmJlwidW5kZWZpbmVkXCIhPXR5cGVvZiBtb2R1bGUpbW9kdWxlLmV4cG9ydHM9YSgpO2Vsc2UgaWYoXCJmdW5jdGlvblwiPT10eXBlb2YgZGVmaW5lJiZkZWZpbmUuYW1kKWRlZmluZShbXSxhKTtlbHNle3ZhciBiO2I9XCJ1bmRlZmluZWRcIiE9dHlwZW9mIHdpbmRvdz93aW5kb3c6XCJ1bmRlZmluZWRcIiE9dHlwZW9mIGdsb2JhbD9nbG9iYWw6XCJ1bmRlZmluZWRcIiE9dHlwZW9mIHNlbGY/c2VsZjp0aGlzLGIubG9jYWxmb3JhZ2U9YSgpfX0oZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24gYShiLGMsZCl7ZnVuY3Rpb24gZShnLGgpe2lmKCFjW2ddKXtpZighYltnXSl7dmFyIGk9XCJmdW5jdGlvblwiPT10eXBlb2YgcmVxdWlyZSYmcmVxdWlyZTtpZighaCYmaSlyZXR1cm4gaShnLCEwKTtpZihmKXJldHVybiBmKGcsITApO3ZhciBqPW5ldyBFcnJvcihcIkNhbm5vdCBmaW5kIG1vZHVsZSAnXCIrZytcIidcIik7dGhyb3cgai5jb2RlPVwiTU9EVUxFX05PVF9GT1VORFwiLGp9dmFyIGs9Y1tnXT17ZXhwb3J0czp7fX07YltnXVswXS5jYWxsKGsuZXhwb3J0cyxmdW5jdGlvbihhKXt2YXIgYz1iW2ddWzFdW2FdO3JldHVybiBlKGM/YzphKX0sayxrLmV4cG9ydHMsYSxiLGMsZCl9cmV0dXJuIGNbZ10uZXhwb3J0c31mb3IodmFyIGY9XCJmdW5jdGlvblwiPT10eXBlb2YgcmVxdWlyZSYmcmVxdWlyZSxnPTA7ZzxkLmxlbmd0aDtnKyspZShkW2ddKTtyZXR1cm4gZX0oezE6W2Z1bmN0aW9uKGEsYixjKXsoZnVuY3Rpb24oYSl7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gYygpe2s9ITA7Zm9yKHZhciBhLGIsYz1sLmxlbmd0aDtjOyl7Zm9yKGI9bCxsPVtdLGE9LTE7KythPGM7KWJbYV0oKTtjPWwubGVuZ3RofWs9ITF9ZnVuY3Rpb24gZChhKXsxIT09bC5wdXNoKGEpfHxrfHxlKCl9dmFyIGUsZj1hLk11dGF0aW9uT2JzZXJ2ZXJ8fGEuV2ViS2l0TXV0YXRpb25PYnNlcnZlcjtpZihmKXt2YXIgZz0wLGg9bmV3IGYoYyksaT1hLmRvY3VtZW50LmNyZWF0ZVRleHROb2RlKFwiXCIpO2gub2JzZXJ2ZShpLHtjaGFyYWN0ZXJEYXRhOiEwfSksZT1mdW5jdGlvbigpe2kuZGF0YT1nPSsrZyUyfX1lbHNlIGlmKGEuc2V0SW1tZWRpYXRlfHxcInVuZGVmaW5lZFwiPT10eXBlb2YgYS5NZXNzYWdlQ2hhbm5lbCllPVwiZG9jdW1lbnRcImluIGEmJlwib25yZWFkeXN0YXRlY2hhbmdlXCJpbiBhLmRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJzY3JpcHRcIik/ZnVuY3Rpb24oKXt2YXIgYj1hLmRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJzY3JpcHRcIik7Yi5vbnJlYWR5c3RhdGVjaGFuZ2U9ZnVuY3Rpb24oKXtjKCksYi5vbnJlYWR5c3RhdGVjaGFuZ2U9bnVsbCxiLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoYiksYj1udWxsfSxhLmRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5hcHBlbmRDaGlsZChiKX06ZnVuY3Rpb24oKXtzZXRUaW1lb3V0KGMsMCl9O2Vsc2V7dmFyIGo9bmV3IGEuTWVzc2FnZUNoYW5uZWw7ai5wb3J0MS5vbm1lc3NhZ2U9YyxlPWZ1bmN0aW9uKCl7ai5wb3J0Mi5wb3N0TWVzc2FnZSgwKX19dmFyIGssbD1bXTtiLmV4cG9ydHM9ZH0pLmNhbGwodGhpcyxcInVuZGVmaW5lZFwiIT10eXBlb2YgZ2xvYmFsP2dsb2JhbDpcInVuZGVmaW5lZFwiIT10eXBlb2Ygc2VsZj9zZWxmOlwidW5kZWZpbmVkXCIhPXR5cGVvZiB3aW5kb3c/d2luZG93Ont9KX0se31dLDI6W2Z1bmN0aW9uKGEsYixjKXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiBkKCl7fWZ1bmN0aW9uIGUoYSl7aWYoXCJmdW5jdGlvblwiIT10eXBlb2YgYSl0aHJvdyBuZXcgVHlwZUVycm9yKFwicmVzb2x2ZXIgbXVzdCBiZSBhIGZ1bmN0aW9uXCIpO3RoaXMuc3RhdGU9cyx0aGlzLnF1ZXVlPVtdLHRoaXMub3V0Y29tZT12b2lkIDAsYSE9PWQmJmkodGhpcyxhKX1mdW5jdGlvbiBmKGEsYixjKXt0aGlzLnByb21pc2U9YSxcImZ1bmN0aW9uXCI9PXR5cGVvZiBiJiYodGhpcy5vbkZ1bGZpbGxlZD1iLHRoaXMuY2FsbEZ1bGZpbGxlZD10aGlzLm90aGVyQ2FsbEZ1bGZpbGxlZCksXCJmdW5jdGlvblwiPT10eXBlb2YgYyYmKHRoaXMub25SZWplY3RlZD1jLHRoaXMuY2FsbFJlamVjdGVkPXRoaXMub3RoZXJDYWxsUmVqZWN0ZWQpfWZ1bmN0aW9uIGcoYSxiLGMpe28oZnVuY3Rpb24oKXt2YXIgZDt0cnl7ZD1iKGMpfWNhdGNoKGIpe3JldHVybiBwLnJlamVjdChhLGIpfWQ9PT1hP3AucmVqZWN0KGEsbmV3IFR5cGVFcnJvcihcIkNhbm5vdCByZXNvbHZlIHByb21pc2Ugd2l0aCBpdHNlbGZcIikpOnAucmVzb2x2ZShhLGQpfSl9ZnVuY3Rpb24gaChhKXt2YXIgYj1hJiZhLnRoZW47aWYoYSYmXCJvYmplY3RcIj09dHlwZW9mIGEmJlwiZnVuY3Rpb25cIj09dHlwZW9mIGIpcmV0dXJuIGZ1bmN0aW9uKCl7Yi5hcHBseShhLGFyZ3VtZW50cyl9fWZ1bmN0aW9uIGkoYSxiKXtmdW5jdGlvbiBjKGIpe2Z8fChmPSEwLHAucmVqZWN0KGEsYikpfWZ1bmN0aW9uIGQoYil7Znx8KGY9ITAscC5yZXNvbHZlKGEsYikpfWZ1bmN0aW9uIGUoKXtiKGQsYyl9dmFyIGY9ITEsZz1qKGUpO1wiZXJyb3JcIj09PWcuc3RhdHVzJiZjKGcudmFsdWUpfWZ1bmN0aW9uIGooYSxiKXt2YXIgYz17fTt0cnl7Yy52YWx1ZT1hKGIpLGMuc3RhdHVzPVwic3VjY2Vzc1wifWNhdGNoKGEpe2Muc3RhdHVzPVwiZXJyb3JcIixjLnZhbHVlPWF9cmV0dXJuIGN9ZnVuY3Rpb24gayhhKXtyZXR1cm4gYSBpbnN0YW5jZW9mIHRoaXM/YTpwLnJlc29sdmUobmV3IHRoaXMoZCksYSl9ZnVuY3Rpb24gbChhKXt2YXIgYj1uZXcgdGhpcyhkKTtyZXR1cm4gcC5yZWplY3QoYixhKX1mdW5jdGlvbiBtKGEpe2Z1bmN0aW9uIGIoYSxiKXtmdW5jdGlvbiBkKGEpe2dbYl09YSwrK2ghPT1lfHxmfHwoZj0hMCxwLnJlc29sdmUoaixnKSl9Yy5yZXNvbHZlKGEpLnRoZW4oZCxmdW5jdGlvbihhKXtmfHwoZj0hMCxwLnJlamVjdChqLGEpKX0pfXZhciBjPXRoaXM7aWYoXCJbb2JqZWN0IEFycmF5XVwiIT09T2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKGEpKXJldHVybiB0aGlzLnJlamVjdChuZXcgVHlwZUVycm9yKFwibXVzdCBiZSBhbiBhcnJheVwiKSk7dmFyIGU9YS5sZW5ndGgsZj0hMTtpZighZSlyZXR1cm4gdGhpcy5yZXNvbHZlKFtdKTtmb3IodmFyIGc9bmV3IEFycmF5KGUpLGg9MCxpPS0xLGo9bmV3IHRoaXMoZCk7KytpPGU7KWIoYVtpXSxpKTtyZXR1cm4gan1mdW5jdGlvbiBuKGEpe2Z1bmN0aW9uIGIoYSl7Yy5yZXNvbHZlKGEpLnRoZW4oZnVuY3Rpb24oYSl7Znx8KGY9ITAscC5yZXNvbHZlKGgsYSkpfSxmdW5jdGlvbihhKXtmfHwoZj0hMCxwLnJlamVjdChoLGEpKX0pfXZhciBjPXRoaXM7aWYoXCJbb2JqZWN0IEFycmF5XVwiIT09T2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKGEpKXJldHVybiB0aGlzLnJlamVjdChuZXcgVHlwZUVycm9yKFwibXVzdCBiZSBhbiBhcnJheVwiKSk7dmFyIGU9YS5sZW5ndGgsZj0hMTtpZighZSlyZXR1cm4gdGhpcy5yZXNvbHZlKFtdKTtmb3IodmFyIGc9LTEsaD1uZXcgdGhpcyhkKTsrK2c8ZTspYihhW2ddKTtyZXR1cm4gaH12YXIgbz1hKDEpLHA9e30scT1bXCJSRUpFQ1RFRFwiXSxyPVtcIkZVTEZJTExFRFwiXSxzPVtcIlBFTkRJTkdcIl07Yi5leHBvcnRzPWM9ZSxlLnByb3RvdHlwZS5jYXRjaD1mdW5jdGlvbihhKXtyZXR1cm4gdGhpcy50aGVuKG51bGwsYSl9LGUucHJvdG90eXBlLnRoZW49ZnVuY3Rpb24oYSxiKXtpZihcImZ1bmN0aW9uXCIhPXR5cGVvZiBhJiZ0aGlzLnN0YXRlPT09cnx8XCJmdW5jdGlvblwiIT10eXBlb2YgYiYmdGhpcy5zdGF0ZT09PXEpcmV0dXJuIHRoaXM7dmFyIGM9bmV3IHRoaXMuY29uc3RydWN0b3IoZCk7aWYodGhpcy5zdGF0ZSE9PXMpe3ZhciBlPXRoaXMuc3RhdGU9PT1yP2E6YjtnKGMsZSx0aGlzLm91dGNvbWUpfWVsc2UgdGhpcy5xdWV1ZS5wdXNoKG5ldyBmKGMsYSxiKSk7cmV0dXJuIGN9LGYucHJvdG90eXBlLmNhbGxGdWxmaWxsZWQ9ZnVuY3Rpb24oYSl7cC5yZXNvbHZlKHRoaXMucHJvbWlzZSxhKX0sZi5wcm90b3R5cGUub3RoZXJDYWxsRnVsZmlsbGVkPWZ1bmN0aW9uKGEpe2codGhpcy5wcm9taXNlLHRoaXMub25GdWxmaWxsZWQsYSl9LGYucHJvdG90eXBlLmNhbGxSZWplY3RlZD1mdW5jdGlvbihhKXtwLnJlamVjdCh0aGlzLnByb21pc2UsYSl9LGYucHJvdG90eXBlLm90aGVyQ2FsbFJlamVjdGVkPWZ1bmN0aW9uKGEpe2codGhpcy5wcm9taXNlLHRoaXMub25SZWplY3RlZCxhKX0scC5yZXNvbHZlPWZ1bmN0aW9uKGEsYil7dmFyIGM9aihoLGIpO2lmKFwiZXJyb3JcIj09PWMuc3RhdHVzKXJldHVybiBwLnJlamVjdChhLGMudmFsdWUpO3ZhciBkPWMudmFsdWU7aWYoZClpKGEsZCk7ZWxzZXthLnN0YXRlPXIsYS5vdXRjb21lPWI7Zm9yKHZhciBlPS0xLGY9YS5xdWV1ZS5sZW5ndGg7KytlPGY7KWEucXVldWVbZV0uY2FsbEZ1bGZpbGxlZChiKX1yZXR1cm4gYX0scC5yZWplY3Q9ZnVuY3Rpb24oYSxiKXthLnN0YXRlPXEsYS5vdXRjb21lPWI7Zm9yKHZhciBjPS0xLGQ9YS5xdWV1ZS5sZW5ndGg7KytjPGQ7KWEucXVldWVbY10uY2FsbFJlamVjdGVkKGIpO3JldHVybiBhfSxjLnJlc29sdmU9ayxjLnJlamVjdD1sLGMuYWxsPW0sYy5yYWNlPW59LHsxOjF9XSwzOltmdW5jdGlvbihhLGIsYyl7KGZ1bmN0aW9uKGIpe1widXNlIHN0cmljdFwiO1wiZnVuY3Rpb25cIiE9dHlwZW9mIGIuUHJvbWlzZSYmKGIuUHJvbWlzZT1hKDIpKX0pLmNhbGwodGhpcyxcInVuZGVmaW5lZFwiIT10eXBlb2YgZ2xvYmFsP2dsb2JhbDpcInVuZGVmaW5lZFwiIT10eXBlb2Ygc2VsZj9zZWxmOlwidW5kZWZpbmVkXCIhPXR5cGVvZiB3aW5kb3c/d2luZG93Ont9KX0sezI6Mn1dLDQ6W2Z1bmN0aW9uKGEsYixjKXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiBkKGEsYil7aWYoIShhIGluc3RhbmNlb2YgYikpdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKX1mdW5jdGlvbiBlKCl7dHJ5e2lmKFwidW5kZWZpbmVkXCIhPXR5cGVvZiBpbmRleGVkREIpcmV0dXJuIGluZGV4ZWREQjtpZihcInVuZGVmaW5lZFwiIT10eXBlb2Ygd2Via2l0SW5kZXhlZERCKXJldHVybiB3ZWJraXRJbmRleGVkREI7aWYoXCJ1bmRlZmluZWRcIiE9dHlwZW9mIG1vekluZGV4ZWREQilyZXR1cm4gbW96SW5kZXhlZERCO2lmKFwidW5kZWZpbmVkXCIhPXR5cGVvZiBPSW5kZXhlZERCKXJldHVybiBPSW5kZXhlZERCO2lmKFwidW5kZWZpbmVkXCIhPXR5cGVvZiBtc0luZGV4ZWREQilyZXR1cm4gbXNJbmRleGVkREJ9Y2F0Y2goYSl7fX1mdW5jdGlvbiBmKCl7dHJ5e3JldHVybiEhZmEmJighKFwidW5kZWZpbmVkXCIhPXR5cGVvZiBvcGVuRGF0YWJhc2UmJlwidW5kZWZpbmVkXCIhPXR5cGVvZiBuYXZpZ2F0b3ImJm5hdmlnYXRvci51c2VyQWdlbnQmJi9TYWZhcmkvLnRlc3QobmF2aWdhdG9yLnVzZXJBZ2VudCkmJiEvQ2hyb21lLy50ZXN0KG5hdmlnYXRvci51c2VyQWdlbnQpKSYmKGZhJiZcImZ1bmN0aW9uXCI9PXR5cGVvZiBmYS5vcGVuJiZcInVuZGVmaW5lZFwiIT10eXBlb2YgSURCS2V5UmFuZ2UpKX1jYXRjaChhKXtyZXR1cm4hMX19ZnVuY3Rpb24gZygpe3JldHVyblwiZnVuY3Rpb25cIj09dHlwZW9mIG9wZW5EYXRhYmFzZX1mdW5jdGlvbiBoKCl7dHJ5e3JldHVyblwidW5kZWZpbmVkXCIhPXR5cGVvZiBsb2NhbFN0b3JhZ2UmJlwic2V0SXRlbVwiaW4gbG9jYWxTdG9yYWdlJiZsb2NhbFN0b3JhZ2Uuc2V0SXRlbX1jYXRjaChhKXtyZXR1cm4hMX19ZnVuY3Rpb24gaShhLGIpe2E9YXx8W10sYj1ifHx7fTt0cnl7cmV0dXJuIG5ldyBCbG9iKGEsYil9Y2F0Y2goZil7aWYoXCJUeXBlRXJyb3JcIiE9PWYubmFtZSl0aHJvdyBmO2Zvcih2YXIgYz1cInVuZGVmaW5lZFwiIT10eXBlb2YgQmxvYkJ1aWxkZXI/QmxvYkJ1aWxkZXI6XCJ1bmRlZmluZWRcIiE9dHlwZW9mIE1TQmxvYkJ1aWxkZXI/TVNCbG9iQnVpbGRlcjpcInVuZGVmaW5lZFwiIT10eXBlb2YgTW96QmxvYkJ1aWxkZXI/TW96QmxvYkJ1aWxkZXI6V2ViS2l0QmxvYkJ1aWxkZXIsZD1uZXcgYyxlPTA7ZTxhLmxlbmd0aDtlKz0xKWQuYXBwZW5kKGFbZV0pO3JldHVybiBkLmdldEJsb2IoYi50eXBlKX19ZnVuY3Rpb24gaihhLGIpe2ImJmEudGhlbihmdW5jdGlvbihhKXtiKG51bGwsYSl9LGZ1bmN0aW9uKGEpe2IoYSl9KX1mdW5jdGlvbiBrKGEsYixjKXtcImZ1bmN0aW9uXCI9PXR5cGVvZiBiJiZhLnRoZW4oYiksXCJmdW5jdGlvblwiPT10eXBlb2YgYyYmYS5jYXRjaChjKX1mdW5jdGlvbiBsKGEpe2Zvcih2YXIgYj1hLmxlbmd0aCxjPW5ldyBBcnJheUJ1ZmZlcihiKSxkPW5ldyBVaW50OEFycmF5KGMpLGU9MDtlPGI7ZSsrKWRbZV09YS5jaGFyQ29kZUF0KGUpO3JldHVybiBjfWZ1bmN0aW9uIG0oYSl7cmV0dXJuIG5ldyBpYShmdW5jdGlvbihiKXt2YXIgYz1pKFtcIlwiXSk7YS5vYmplY3RTdG9yZShqYSkucHV0KGMsXCJrZXlcIiksYS5vbmFib3J0PWZ1bmN0aW9uKGEpe2EucHJldmVudERlZmF1bHQoKSxhLnN0b3BQcm9wYWdhdGlvbigpLGIoITEpfSxhLm9uY29tcGxldGU9ZnVuY3Rpb24oKXt2YXIgYT1uYXZpZ2F0b3IudXNlckFnZW50Lm1hdGNoKC9DaHJvbWVcXC8oXFxkKykvKSxjPW5hdmlnYXRvci51c2VyQWdlbnQubWF0Y2goL0VkZ2VcXC8vKTtiKGN8fCFhfHxwYXJzZUludChhWzFdLDEwKT49NDMpfX0pLmNhdGNoKGZ1bmN0aW9uKCl7cmV0dXJuITF9KX1mdW5jdGlvbiBuKGEpe3JldHVyblwiYm9vbGVhblwiPT10eXBlb2YgZ2E/aWEucmVzb2x2ZShnYSk6bShhKS50aGVuKGZ1bmN0aW9uKGEpe3JldHVybiBnYT1hfSl9ZnVuY3Rpb24gbyhhKXt2YXIgYj1oYVthLm5hbWVdLGM9e307Yy5wcm9taXNlPW5ldyBpYShmdW5jdGlvbihhKXtjLnJlc29sdmU9YX0pLGIuZGVmZXJyZWRPcGVyYXRpb25zLnB1c2goYyksYi5kYlJlYWR5P2IuZGJSZWFkeT1iLmRiUmVhZHkudGhlbihmdW5jdGlvbigpe3JldHVybiBjLnByb21pc2V9KTpiLmRiUmVhZHk9Yy5wcm9taXNlfWZ1bmN0aW9uIHAoYSl7dmFyIGI9aGFbYS5uYW1lXSxjPWIuZGVmZXJyZWRPcGVyYXRpb25zLnBvcCgpO2MmJmMucmVzb2x2ZSgpfWZ1bmN0aW9uIHEoYSxiKXtyZXR1cm4gbmV3IGlhKGZ1bmN0aW9uKGMsZCl7aWYoYS5kYil7aWYoIWIpcmV0dXJuIGMoYS5kYik7byhhKSxhLmRiLmNsb3NlKCl9dmFyIGU9W2EubmFtZV07YiYmZS5wdXNoKGEudmVyc2lvbik7dmFyIGY9ZmEub3Blbi5hcHBseShmYSxlKTtiJiYoZi5vbnVwZ3JhZGVuZWVkZWQ9ZnVuY3Rpb24oYil7dmFyIGM9Zi5yZXN1bHQ7dHJ5e2MuY3JlYXRlT2JqZWN0U3RvcmUoYS5zdG9yZU5hbWUpLGIub2xkVmVyc2lvbjw9MSYmYy5jcmVhdGVPYmplY3RTdG9yZShqYSl9Y2F0Y2goYyl7aWYoXCJDb25zdHJhaW50RXJyb3JcIiE9PWMubmFtZSl0aHJvdyBjO2NvbnNvbGUud2FybignVGhlIGRhdGFiYXNlIFwiJythLm5hbWUrJ1wiIGhhcyBiZWVuIHVwZ3JhZGVkIGZyb20gdmVyc2lvbiAnK2Iub2xkVmVyc2lvbitcIiB0byB2ZXJzaW9uIFwiK2IubmV3VmVyc2lvbisnLCBidXQgdGhlIHN0b3JhZ2UgXCInK2Euc3RvcmVOYW1lKydcIiBhbHJlYWR5IGV4aXN0cy4nKX19KSxmLm9uZXJyb3I9ZnVuY3Rpb24oKXtkKGYuZXJyb3IpfSxmLm9uc3VjY2Vzcz1mdW5jdGlvbigpe2MoZi5yZXN1bHQpLHAoYSl9fSl9ZnVuY3Rpb24gcihhKXtyZXR1cm4gcShhLCExKX1mdW5jdGlvbiBzKGEpe3JldHVybiBxKGEsITApfWZ1bmN0aW9uIHQoYSxiKXtpZighYS5kYilyZXR1cm4hMDt2YXIgYz0hYS5kYi5vYmplY3RTdG9yZU5hbWVzLmNvbnRhaW5zKGEuc3RvcmVOYW1lKSxkPWEudmVyc2lvbjxhLmRiLnZlcnNpb24sZT1hLnZlcnNpb24+YS5kYi52ZXJzaW9uO2lmKGQmJihhLnZlcnNpb24hPT1iJiZjb25zb2xlLndhcm4oJ1RoZSBkYXRhYmFzZSBcIicrYS5uYW1lK1wiXFxcIiBjYW4ndCBiZSBkb3duZ3JhZGVkIGZyb20gdmVyc2lvbiBcIithLmRiLnZlcnNpb24rXCIgdG8gdmVyc2lvbiBcIithLnZlcnNpb24rXCIuXCIpLGEudmVyc2lvbj1hLmRiLnZlcnNpb24pLGV8fGMpe2lmKGMpe3ZhciBmPWEuZGIudmVyc2lvbisxO2Y+YS52ZXJzaW9uJiYoYS52ZXJzaW9uPWYpfXJldHVybiEwfXJldHVybiExfWZ1bmN0aW9uIHUoYSl7cmV0dXJuIG5ldyBpYShmdW5jdGlvbihiLGMpe3ZhciBkPW5ldyBGaWxlUmVhZGVyO2Qub25lcnJvcj1jLGQub25sb2FkZW5kPWZ1bmN0aW9uKGMpe3ZhciBkPWJ0b2EoYy50YXJnZXQucmVzdWx0fHxcIlwiKTtiKHtfX2xvY2FsX2ZvcmFnZV9lbmNvZGVkX2Jsb2I6ITAsZGF0YTpkLHR5cGU6YS50eXBlfSl9LGQucmVhZEFzQmluYXJ5U3RyaW5nKGEpfSl9ZnVuY3Rpb24gdihhKXt2YXIgYj1sKGF0b2IoYS5kYXRhKSk7cmV0dXJuIGkoW2JdLHt0eXBlOmEudHlwZX0pfWZ1bmN0aW9uIHcoYSl7cmV0dXJuIGEmJmEuX19sb2NhbF9mb3JhZ2VfZW5jb2RlZF9ibG9ifWZ1bmN0aW9uIHgoYSl7dmFyIGI9dGhpcyxjPWIuX2luaXRSZWFkeSgpLnRoZW4oZnVuY3Rpb24oKXt2YXIgYT1oYVtiLl9kYkluZm8ubmFtZV07aWYoYSYmYS5kYlJlYWR5KXJldHVybiBhLmRiUmVhZHl9KTtyZXR1cm4gayhjLGEsYSksY31mdW5jdGlvbiB5KGEpe2Z1bmN0aW9uIGIoKXtyZXR1cm4gaWEucmVzb2x2ZSgpfXZhciBjPXRoaXMsZD17ZGI6bnVsbH07aWYoYSlmb3IodmFyIGUgaW4gYSlkW2VdPWFbZV07aGF8fChoYT17fSk7dmFyIGY9aGFbZC5uYW1lXTtmfHwoZj17Zm9yYWdlczpbXSxkYjpudWxsLGRiUmVhZHk6bnVsbCxkZWZlcnJlZE9wZXJhdGlvbnM6W119LGhhW2QubmFtZV09ZiksZi5mb3JhZ2VzLnB1c2goYyksYy5faW5pdFJlYWR5fHwoYy5faW5pdFJlYWR5PWMucmVhZHksYy5yZWFkeT14KTtmb3IodmFyIGc9W10saD0wO2g8Zi5mb3JhZ2VzLmxlbmd0aDtoKyspe3ZhciBpPWYuZm9yYWdlc1toXTtpIT09YyYmZy5wdXNoKGkuX2luaXRSZWFkeSgpLmNhdGNoKGIpKX12YXIgaj1mLmZvcmFnZXMuc2xpY2UoMCk7cmV0dXJuIGlhLmFsbChnKS50aGVuKGZ1bmN0aW9uKCl7cmV0dXJuIGQuZGI9Zi5kYixyKGQpfSkudGhlbihmdW5jdGlvbihhKXtyZXR1cm4gZC5kYj1hLHQoZCxjLl9kZWZhdWx0Q29uZmlnLnZlcnNpb24pP3MoZCk6YX0pLnRoZW4oZnVuY3Rpb24oYSl7ZC5kYj1mLmRiPWEsYy5fZGJJbmZvPWQ7Zm9yKHZhciBiPTA7YjxqLmxlbmd0aDtiKyspe3ZhciBlPWpbYl07ZSE9PWMmJihlLl9kYkluZm8uZGI9ZC5kYixlLl9kYkluZm8udmVyc2lvbj1kLnZlcnNpb24pfX0pfWZ1bmN0aW9uIHooYSxiKXt2YXIgYz10aGlzO1wic3RyaW5nXCIhPXR5cGVvZiBhJiYoY29uc29sZS53YXJuKGErXCIgdXNlZCBhcyBhIGtleSwgYnV0IGl0IGlzIG5vdCBhIHN0cmluZy5cIiksYT1TdHJpbmcoYSkpO3ZhciBkPW5ldyBpYShmdW5jdGlvbihiLGQpe2MucmVhZHkoKS50aGVuKGZ1bmN0aW9uKCl7dmFyIGU9Yy5fZGJJbmZvLGY9ZS5kYi50cmFuc2FjdGlvbihlLnN0b3JlTmFtZSxcInJlYWRvbmx5XCIpLm9iamVjdFN0b3JlKGUuc3RvcmVOYW1lKSxnPWYuZ2V0KGEpO2cub25zdWNjZXNzPWZ1bmN0aW9uKCl7dmFyIGE9Zy5yZXN1bHQ7dm9pZCAwPT09YSYmKGE9bnVsbCksdyhhKSYmKGE9dihhKSksYihhKX0sZy5vbmVycm9yPWZ1bmN0aW9uKCl7ZChnLmVycm9yKX19KS5jYXRjaChkKX0pO3JldHVybiBqKGQsYiksZH1mdW5jdGlvbiBBKGEsYil7dmFyIGM9dGhpcyxkPW5ldyBpYShmdW5jdGlvbihiLGQpe2MucmVhZHkoKS50aGVuKGZ1bmN0aW9uKCl7dmFyIGU9Yy5fZGJJbmZvLGY9ZS5kYi50cmFuc2FjdGlvbihlLnN0b3JlTmFtZSxcInJlYWRvbmx5XCIpLm9iamVjdFN0b3JlKGUuc3RvcmVOYW1lKSxnPWYub3BlbkN1cnNvcigpLGg9MTtnLm9uc3VjY2Vzcz1mdW5jdGlvbigpe3ZhciBjPWcucmVzdWx0O2lmKGMpe3ZhciBkPWMudmFsdWU7dyhkKSYmKGQ9dihkKSk7dmFyIGU9YShkLGMua2V5LGgrKyk7dm9pZCAwIT09ZT9iKGUpOmMuY29udGludWUoKX1lbHNlIGIoKX0sZy5vbmVycm9yPWZ1bmN0aW9uKCl7ZChnLmVycm9yKX19KS5jYXRjaChkKX0pO3JldHVybiBqKGQsYiksZH1mdW5jdGlvbiBCKGEsYixjKXt2YXIgZD10aGlzO1wic3RyaW5nXCIhPXR5cGVvZiBhJiYoY29uc29sZS53YXJuKGErXCIgdXNlZCBhcyBhIGtleSwgYnV0IGl0IGlzIG5vdCBhIHN0cmluZy5cIiksYT1TdHJpbmcoYSkpO3ZhciBlPW5ldyBpYShmdW5jdGlvbihjLGUpe3ZhciBmO2QucmVhZHkoKS50aGVuKGZ1bmN0aW9uKCl7cmV0dXJuIGY9ZC5fZGJJbmZvLFwiW29iamVjdCBCbG9iXVwiPT09a2EuY2FsbChiKT9uKGYuZGIpLnRoZW4oZnVuY3Rpb24oYSl7cmV0dXJuIGE/Yjp1KGIpfSk6Yn0pLnRoZW4oZnVuY3Rpb24oYil7dmFyIGQ9Zi5kYi50cmFuc2FjdGlvbihmLnN0b3JlTmFtZSxcInJlYWR3cml0ZVwiKSxnPWQub2JqZWN0U3RvcmUoZi5zdG9yZU5hbWUpLGg9Zy5wdXQoYixhKTtudWxsPT09YiYmKGI9dm9pZCAwKSxkLm9uY29tcGxldGU9ZnVuY3Rpb24oKXt2b2lkIDA9PT1iJiYoYj1udWxsKSxjKGIpfSxkLm9uYWJvcnQ9ZC5vbmVycm9yPWZ1bmN0aW9uKCl7dmFyIGE9aC5lcnJvcj9oLmVycm9yOmgudHJhbnNhY3Rpb24uZXJyb3I7ZShhKX19KS5jYXRjaChlKX0pO3JldHVybiBqKGUsYyksZX1mdW5jdGlvbiBDKGEsYil7dmFyIGM9dGhpcztcInN0cmluZ1wiIT10eXBlb2YgYSYmKGNvbnNvbGUud2FybihhK1wiIHVzZWQgYXMgYSBrZXksIGJ1dCBpdCBpcyBub3QgYSBzdHJpbmcuXCIpLGE9U3RyaW5nKGEpKTt2YXIgZD1uZXcgaWEoZnVuY3Rpb24oYixkKXtjLnJlYWR5KCkudGhlbihmdW5jdGlvbigpe3ZhciBlPWMuX2RiSW5mbyxmPWUuZGIudHJhbnNhY3Rpb24oZS5zdG9yZU5hbWUsXCJyZWFkd3JpdGVcIiksZz1mLm9iamVjdFN0b3JlKGUuc3RvcmVOYW1lKSxoPWcuZGVsZXRlKGEpO2Yub25jb21wbGV0ZT1mdW5jdGlvbigpe2IoKX0sZi5vbmVycm9yPWZ1bmN0aW9uKCl7ZChoLmVycm9yKX0sZi5vbmFib3J0PWZ1bmN0aW9uKCl7dmFyIGE9aC5lcnJvcj9oLmVycm9yOmgudHJhbnNhY3Rpb24uZXJyb3I7ZChhKX19KS5jYXRjaChkKX0pO3JldHVybiBqKGQsYiksZH1mdW5jdGlvbiBEKGEpe3ZhciBiPXRoaXMsYz1uZXcgaWEoZnVuY3Rpb24oYSxjKXtiLnJlYWR5KCkudGhlbihmdW5jdGlvbigpe3ZhciBkPWIuX2RiSW5mbyxlPWQuZGIudHJhbnNhY3Rpb24oZC5zdG9yZU5hbWUsXCJyZWFkd3JpdGVcIiksZj1lLm9iamVjdFN0b3JlKGQuc3RvcmVOYW1lKSxnPWYuY2xlYXIoKTtlLm9uY29tcGxldGU9ZnVuY3Rpb24oKXthKCl9LGUub25hYm9ydD1lLm9uZXJyb3I9ZnVuY3Rpb24oKXt2YXIgYT1nLmVycm9yP2cuZXJyb3I6Zy50cmFuc2FjdGlvbi5lcnJvcjtjKGEpfX0pLmNhdGNoKGMpfSk7cmV0dXJuIGooYyxhKSxjfWZ1bmN0aW9uIEUoYSl7dmFyIGI9dGhpcyxjPW5ldyBpYShmdW5jdGlvbihhLGMpe2IucmVhZHkoKS50aGVuKGZ1bmN0aW9uKCl7dmFyIGQ9Yi5fZGJJbmZvLGU9ZC5kYi50cmFuc2FjdGlvbihkLnN0b3JlTmFtZSxcInJlYWRvbmx5XCIpLm9iamVjdFN0b3JlKGQuc3RvcmVOYW1lKSxmPWUuY291bnQoKTtmLm9uc3VjY2Vzcz1mdW5jdGlvbigpe2EoZi5yZXN1bHQpfSxmLm9uZXJyb3I9ZnVuY3Rpb24oKXtjKGYuZXJyb3IpfX0pLmNhdGNoKGMpfSk7cmV0dXJuIGooYyxhKSxjfWZ1bmN0aW9uIEYoYSxiKXt2YXIgYz10aGlzLGQ9bmV3IGlhKGZ1bmN0aW9uKGIsZCl7cmV0dXJuIGE8MD92b2lkIGIobnVsbCk6dm9pZCBjLnJlYWR5KCkudGhlbihmdW5jdGlvbigpe3ZhciBlPWMuX2RiSW5mbyxmPWUuZGIudHJhbnNhY3Rpb24oZS5zdG9yZU5hbWUsXCJyZWFkb25seVwiKS5vYmplY3RTdG9yZShlLnN0b3JlTmFtZSksZz0hMSxoPWYub3BlbkN1cnNvcigpO2gub25zdWNjZXNzPWZ1bmN0aW9uKCl7dmFyIGM9aC5yZXN1bHQ7cmV0dXJuIGM/dm9pZCgwPT09YT9iKGMua2V5KTpnP2IoYy5rZXkpOihnPSEwLGMuYWR2YW5jZShhKSkpOnZvaWQgYihudWxsKX0saC5vbmVycm9yPWZ1bmN0aW9uKCl7ZChoLmVycm9yKX19KS5jYXRjaChkKX0pO3JldHVybiBqKGQsYiksZH1mdW5jdGlvbiBHKGEpe3ZhciBiPXRoaXMsYz1uZXcgaWEoZnVuY3Rpb24oYSxjKXtiLnJlYWR5KCkudGhlbihmdW5jdGlvbigpe3ZhciBkPWIuX2RiSW5mbyxlPWQuZGIudHJhbnNhY3Rpb24oZC5zdG9yZU5hbWUsXCJyZWFkb25seVwiKS5vYmplY3RTdG9yZShkLnN0b3JlTmFtZSksZj1lLm9wZW5DdXJzb3IoKSxnPVtdO2Yub25zdWNjZXNzPWZ1bmN0aW9uKCl7dmFyIGI9Zi5yZXN1bHQ7cmV0dXJuIGI/KGcucHVzaChiLmtleSksdm9pZCBiLmNvbnRpbnVlKCkpOnZvaWQgYShnKX0sZi5vbmVycm9yPWZ1bmN0aW9uKCl7YyhmLmVycm9yKX19KS5jYXRjaChjKX0pO3JldHVybiBqKGMsYSksY31mdW5jdGlvbiBIKGEpe3ZhciBiLGMsZCxlLGYsZz0uNzUqYS5sZW5ndGgsaD1hLmxlbmd0aCxpPTA7XCI9XCI9PT1hW2EubGVuZ3RoLTFdJiYoZy0tLFwiPVwiPT09YVthLmxlbmd0aC0yXSYmZy0tKTt2YXIgaj1uZXcgQXJyYXlCdWZmZXIoZyksaz1uZXcgVWludDhBcnJheShqKTtmb3IoYj0wO2I8aDtiKz00KWM9bWEuaW5kZXhPZihhW2JdKSxkPW1hLmluZGV4T2YoYVtiKzFdKSxlPW1hLmluZGV4T2YoYVtiKzJdKSxmPW1hLmluZGV4T2YoYVtiKzNdKSxrW2krK109Yzw8MnxkPj40LGtbaSsrXT0oMTUmZCk8PDR8ZT4+MixrW2krK109KDMmZSk8PDZ8NjMmZjtyZXR1cm4gan1mdW5jdGlvbiBJKGEpe3ZhciBiLGM9bmV3IFVpbnQ4QXJyYXkoYSksZD1cIlwiO2ZvcihiPTA7YjxjLmxlbmd0aDtiKz0zKWQrPW1hW2NbYl0+PjJdLGQrPW1hWygzJmNbYl0pPDw0fGNbYisxXT4+NF0sZCs9bWFbKDE1JmNbYisxXSk8PDJ8Y1tiKzJdPj42XSxkKz1tYVs2MyZjW2IrMl1dO3JldHVybiBjLmxlbmd0aCUzPT09Mj9kPWQuc3Vic3RyaW5nKDAsZC5sZW5ndGgtMSkrXCI9XCI6Yy5sZW5ndGglMz09PTEmJihkPWQuc3Vic3RyaW5nKDAsZC5sZW5ndGgtMikrXCI9PVwiKSxkfWZ1bmN0aW9uIEooYSxiKXt2YXIgYz1cIlwiO2lmKGEmJihjPURhLmNhbGwoYSkpLGEmJihcIltvYmplY3QgQXJyYXlCdWZmZXJdXCI9PT1jfHxhLmJ1ZmZlciYmXCJbb2JqZWN0IEFycmF5QnVmZmVyXVwiPT09RGEuY2FsbChhLmJ1ZmZlcikpKXt2YXIgZCxlPXBhO2EgaW5zdGFuY2VvZiBBcnJheUJ1ZmZlcj8oZD1hLGUrPXJhKTooZD1hLmJ1ZmZlcixcIltvYmplY3QgSW50OEFycmF5XVwiPT09Yz9lKz10YTpcIltvYmplY3QgVWludDhBcnJheV1cIj09PWM/ZSs9dWE6XCJbb2JqZWN0IFVpbnQ4Q2xhbXBlZEFycmF5XVwiPT09Yz9lKz12YTpcIltvYmplY3QgSW50MTZBcnJheV1cIj09PWM/ZSs9d2E6XCJbb2JqZWN0IFVpbnQxNkFycmF5XVwiPT09Yz9lKz15YTpcIltvYmplY3QgSW50MzJBcnJheV1cIj09PWM/ZSs9eGE6XCJbb2JqZWN0IFVpbnQzMkFycmF5XVwiPT09Yz9lKz16YTpcIltvYmplY3QgRmxvYXQzMkFycmF5XVwiPT09Yz9lKz1BYTpcIltvYmplY3QgRmxvYXQ2NEFycmF5XVwiPT09Yz9lKz1CYTpiKG5ldyBFcnJvcihcIkZhaWxlZCB0byBnZXQgdHlwZSBmb3IgQmluYXJ5QXJyYXlcIikpKSxiKGUrSShkKSl9ZWxzZSBpZihcIltvYmplY3QgQmxvYl1cIj09PWMpe3ZhciBmPW5ldyBGaWxlUmVhZGVyO2Yub25sb2FkPWZ1bmN0aW9uKCl7dmFyIGM9bmErYS50eXBlK1wiflwiK0kodGhpcy5yZXN1bHQpO2IocGErc2ErYyl9LGYucmVhZEFzQXJyYXlCdWZmZXIoYSl9ZWxzZSB0cnl7YihKU09OLnN0cmluZ2lmeShhKSl9Y2F0Y2goYyl7Y29uc29sZS5lcnJvcihcIkNvdWxkbid0IGNvbnZlcnQgdmFsdWUgaW50byBhIEpTT04gc3RyaW5nOiBcIixhKSxiKG51bGwsYyl9fWZ1bmN0aW9uIEsoYSl7aWYoYS5zdWJzdHJpbmcoMCxxYSkhPT1wYSlyZXR1cm4gSlNPTi5wYXJzZShhKTt2YXIgYixjPWEuc3Vic3RyaW5nKENhKSxkPWEuc3Vic3RyaW5nKHFhLENhKTtpZihkPT09c2EmJm9hLnRlc3QoYykpe3ZhciBlPWMubWF0Y2gob2EpO2I9ZVsxXSxjPWMuc3Vic3RyaW5nKGVbMF0ubGVuZ3RoKX12YXIgZj1IKGMpO3N3aXRjaChkKXtjYXNlIHJhOnJldHVybiBmO2Nhc2Ugc2E6cmV0dXJuIGkoW2ZdLHt0eXBlOmJ9KTtjYXNlIHRhOnJldHVybiBuZXcgSW50OEFycmF5KGYpO2Nhc2UgdWE6cmV0dXJuIG5ldyBVaW50OEFycmF5KGYpO2Nhc2UgdmE6cmV0dXJuIG5ldyBVaW50OENsYW1wZWRBcnJheShmKTtjYXNlIHdhOnJldHVybiBuZXcgSW50MTZBcnJheShmKTtjYXNlIHlhOnJldHVybiBuZXcgVWludDE2QXJyYXkoZik7Y2FzZSB4YTpyZXR1cm4gbmV3IEludDMyQXJyYXkoZik7Y2FzZSB6YTpyZXR1cm4gbmV3IFVpbnQzMkFycmF5KGYpO2Nhc2UgQWE6cmV0dXJuIG5ldyBGbG9hdDMyQXJyYXkoZik7Y2FzZSBCYTpyZXR1cm4gbmV3IEZsb2F0NjRBcnJheShmKTtkZWZhdWx0OnRocm93IG5ldyBFcnJvcihcIlVua293biB0eXBlOiBcIitkKX19ZnVuY3Rpb24gTChhKXt2YXIgYj10aGlzLGM9e2RiOm51bGx9O2lmKGEpZm9yKHZhciBkIGluIGEpY1tkXT1cInN0cmluZ1wiIT10eXBlb2YgYVtkXT9hW2RdLnRvU3RyaW5nKCk6YVtkXTt2YXIgZT1uZXcgaWEoZnVuY3Rpb24oYSxkKXt0cnl7Yy5kYj1vcGVuRGF0YWJhc2UoYy5uYW1lLFN0cmluZyhjLnZlcnNpb24pLGMuZGVzY3JpcHRpb24sYy5zaXplKX1jYXRjaChhKXtyZXR1cm4gZChhKX1jLmRiLnRyYW5zYWN0aW9uKGZ1bmN0aW9uKGUpe2UuZXhlY3V0ZVNxbChcIkNSRUFURSBUQUJMRSBJRiBOT1QgRVhJU1RTIFwiK2Muc3RvcmVOYW1lK1wiIChpZCBJTlRFR0VSIFBSSU1BUlkgS0VZLCBrZXkgdW5pcXVlLCB2YWx1ZSlcIixbXSxmdW5jdGlvbigpe2IuX2RiSW5mbz1jLGEoKX0sZnVuY3Rpb24oYSxiKXtkKGIpfSl9KX0pO3JldHVybiBjLnNlcmlhbGl6ZXI9RWEsZX1mdW5jdGlvbiBNKGEsYil7dmFyIGM9dGhpcztcInN0cmluZ1wiIT10eXBlb2YgYSYmKGNvbnNvbGUud2FybihhK1wiIHVzZWQgYXMgYSBrZXksIGJ1dCBpdCBpcyBub3QgYSBzdHJpbmcuXCIpLGE9U3RyaW5nKGEpKTt2YXIgZD1uZXcgaWEoZnVuY3Rpb24oYixkKXtjLnJlYWR5KCkudGhlbihmdW5jdGlvbigpe3ZhciBlPWMuX2RiSW5mbztlLmRiLnRyYW5zYWN0aW9uKGZ1bmN0aW9uKGMpe2MuZXhlY3V0ZVNxbChcIlNFTEVDVCAqIEZST00gXCIrZS5zdG9yZU5hbWUrXCIgV0hFUkUga2V5ID0gPyBMSU1JVCAxXCIsW2FdLGZ1bmN0aW9uKGEsYyl7dmFyIGQ9Yy5yb3dzLmxlbmd0aD9jLnJvd3MuaXRlbSgwKS52YWx1ZTpudWxsO2QmJihkPWUuc2VyaWFsaXplci5kZXNlcmlhbGl6ZShkKSksYihkKX0sZnVuY3Rpb24oYSxiKXtkKGIpfSl9KX0pLmNhdGNoKGQpfSk7cmV0dXJuIGooZCxiKSxkfWZ1bmN0aW9uIE4oYSxiKXt2YXIgYz10aGlzLGQ9bmV3IGlhKGZ1bmN0aW9uKGIsZCl7Yy5yZWFkeSgpLnRoZW4oZnVuY3Rpb24oKXt2YXIgZT1jLl9kYkluZm87ZS5kYi50cmFuc2FjdGlvbihmdW5jdGlvbihjKXtjLmV4ZWN1dGVTcWwoXCJTRUxFQ1QgKiBGUk9NIFwiK2Uuc3RvcmVOYW1lLFtdLGZ1bmN0aW9uKGMsZCl7Zm9yKHZhciBmPWQucm93cyxnPWYubGVuZ3RoLGg9MDtoPGc7aCsrKXt2YXIgaT1mLml0ZW0oaCksaj1pLnZhbHVlO2lmKGomJihqPWUuc2VyaWFsaXplci5kZXNlcmlhbGl6ZShqKSksaj1hKGosaS5rZXksaCsxKSx2b2lkIDAhPT1qKXJldHVybiB2b2lkIGIoail9YigpfSxmdW5jdGlvbihhLGIpe2QoYil9KX0pfSkuY2F0Y2goZCl9KTtyZXR1cm4gaihkLGIpLGR9ZnVuY3Rpb24gTyhhLGIsYyl7dmFyIGQ9dGhpcztcInN0cmluZ1wiIT10eXBlb2YgYSYmKGNvbnNvbGUud2FybihhK1wiIHVzZWQgYXMgYSBrZXksIGJ1dCBpdCBpcyBub3QgYSBzdHJpbmcuXCIpLGE9U3RyaW5nKGEpKTt2YXIgZT1uZXcgaWEoZnVuY3Rpb24oYyxlKXtkLnJlYWR5KCkudGhlbihmdW5jdGlvbigpe3ZvaWQgMD09PWImJihiPW51bGwpO3ZhciBmPWIsZz1kLl9kYkluZm87Zy5zZXJpYWxpemVyLnNlcmlhbGl6ZShiLGZ1bmN0aW9uKGIsZCl7ZD9lKGQpOmcuZGIudHJhbnNhY3Rpb24oZnVuY3Rpb24oZCl7ZC5leGVjdXRlU3FsKFwiSU5TRVJUIE9SIFJFUExBQ0UgSU5UTyBcIitnLnN0b3JlTmFtZStcIiAoa2V5LCB2YWx1ZSkgVkFMVUVTICg/LCA/KVwiLFthLGJdLGZ1bmN0aW9uKCl7YyhmKX0sZnVuY3Rpb24oYSxiKXtlKGIpfSl9LGZ1bmN0aW9uKGEpe2EuY29kZT09PWEuUVVPVEFfRVJSJiZlKGEpfSl9KX0pLmNhdGNoKGUpfSk7cmV0dXJuIGooZSxjKSxlfWZ1bmN0aW9uIFAoYSxiKXt2YXIgYz10aGlzO1wic3RyaW5nXCIhPXR5cGVvZiBhJiYoY29uc29sZS53YXJuKGErXCIgdXNlZCBhcyBhIGtleSwgYnV0IGl0IGlzIG5vdCBhIHN0cmluZy5cIiksYT1TdHJpbmcoYSkpO3ZhciBkPW5ldyBpYShmdW5jdGlvbihiLGQpe2MucmVhZHkoKS50aGVuKGZ1bmN0aW9uKCl7dmFyIGU9Yy5fZGJJbmZvO2UuZGIudHJhbnNhY3Rpb24oZnVuY3Rpb24oYyl7Yy5leGVjdXRlU3FsKFwiREVMRVRFIEZST00gXCIrZS5zdG9yZU5hbWUrXCIgV0hFUkUga2V5ID0gP1wiLFthXSxmdW5jdGlvbigpe2IoKX0sZnVuY3Rpb24oYSxiKXtkKGIpfSl9KX0pLmNhdGNoKGQpfSk7cmV0dXJuIGooZCxiKSxkfWZ1bmN0aW9uIFEoYSl7dmFyIGI9dGhpcyxjPW5ldyBpYShmdW5jdGlvbihhLGMpe2IucmVhZHkoKS50aGVuKGZ1bmN0aW9uKCl7dmFyIGQ9Yi5fZGJJbmZvO2QuZGIudHJhbnNhY3Rpb24oZnVuY3Rpb24oYil7Yi5leGVjdXRlU3FsKFwiREVMRVRFIEZST00gXCIrZC5zdG9yZU5hbWUsW10sZnVuY3Rpb24oKXthKCl9LGZ1bmN0aW9uKGEsYil7YyhiKX0pfSl9KS5jYXRjaChjKX0pO3JldHVybiBqKGMsYSksY31mdW5jdGlvbiBSKGEpe3ZhciBiPXRoaXMsYz1uZXcgaWEoZnVuY3Rpb24oYSxjKXtiLnJlYWR5KCkudGhlbihmdW5jdGlvbigpe3ZhciBkPWIuX2RiSW5mbztkLmRiLnRyYW5zYWN0aW9uKGZ1bmN0aW9uKGIpe2IuZXhlY3V0ZVNxbChcIlNFTEVDVCBDT1VOVChrZXkpIGFzIGMgRlJPTSBcIitkLnN0b3JlTmFtZSxbXSxmdW5jdGlvbihiLGMpe3ZhciBkPWMucm93cy5pdGVtKDApLmM7YShkKX0sZnVuY3Rpb24oYSxiKXtjKGIpfSl9KX0pLmNhdGNoKGMpfSk7cmV0dXJuIGooYyxhKSxjfWZ1bmN0aW9uIFMoYSxiKXt2YXIgYz10aGlzLGQ9bmV3IGlhKGZ1bmN0aW9uKGIsZCl7Yy5yZWFkeSgpLnRoZW4oZnVuY3Rpb24oKXt2YXIgZT1jLl9kYkluZm87ZS5kYi50cmFuc2FjdGlvbihmdW5jdGlvbihjKXtjLmV4ZWN1dGVTcWwoXCJTRUxFQ1Qga2V5IEZST00gXCIrZS5zdG9yZU5hbWUrXCIgV0hFUkUgaWQgPSA/IExJTUlUIDFcIixbYSsxXSxmdW5jdGlvbihhLGMpe3ZhciBkPWMucm93cy5sZW5ndGg/Yy5yb3dzLml0ZW0oMCkua2V5Om51bGw7YihkKX0sZnVuY3Rpb24oYSxiKXtkKGIpfSl9KX0pLmNhdGNoKGQpfSk7cmV0dXJuIGooZCxiKSxkfWZ1bmN0aW9uIFQoYSl7dmFyIGI9dGhpcyxjPW5ldyBpYShmdW5jdGlvbihhLGMpe2IucmVhZHkoKS50aGVuKGZ1bmN0aW9uKCl7dmFyIGQ9Yi5fZGJJbmZvO2QuZGIudHJhbnNhY3Rpb24oZnVuY3Rpb24oYil7Yi5leGVjdXRlU3FsKFwiU0VMRUNUIGtleSBGUk9NIFwiK2Quc3RvcmVOYW1lLFtdLGZ1bmN0aW9uKGIsYyl7Zm9yKHZhciBkPVtdLGU9MDtlPGMucm93cy5sZW5ndGg7ZSsrKWQucHVzaChjLnJvd3MuaXRlbShlKS5rZXkpO2EoZCl9LGZ1bmN0aW9uKGEsYil7YyhiKX0pfSl9KS5jYXRjaChjKX0pO3JldHVybiBqKGMsYSksY31mdW5jdGlvbiBVKGEpe3ZhciBiPXRoaXMsYz17fTtpZihhKWZvcih2YXIgZCBpbiBhKWNbZF09YVtkXTtyZXR1cm4gYy5rZXlQcmVmaXg9Yy5uYW1lK1wiL1wiLGMuc3RvcmVOYW1lIT09Yi5fZGVmYXVsdENvbmZpZy5zdG9yZU5hbWUmJihjLmtleVByZWZpeCs9Yy5zdG9yZU5hbWUrXCIvXCIpLGIuX2RiSW5mbz1jLGMuc2VyaWFsaXplcj1FYSxpYS5yZXNvbHZlKCl9ZnVuY3Rpb24gVihhKXt2YXIgYj10aGlzLGM9Yi5yZWFkeSgpLnRoZW4oZnVuY3Rpb24oKXtmb3IodmFyIGE9Yi5fZGJJbmZvLmtleVByZWZpeCxjPWxvY2FsU3RvcmFnZS5sZW5ndGgtMTtjPj0wO2MtLSl7dmFyIGQ9bG9jYWxTdG9yYWdlLmtleShjKTswPT09ZC5pbmRleE9mKGEpJiZsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbShkKX19KTtyZXR1cm4gaihjLGEpLGN9ZnVuY3Rpb24gVyhhLGIpe3ZhciBjPXRoaXM7XCJzdHJpbmdcIiE9dHlwZW9mIGEmJihjb25zb2xlLndhcm4oYStcIiB1c2VkIGFzIGEga2V5LCBidXQgaXQgaXMgbm90IGEgc3RyaW5nLlwiKSxhPVN0cmluZyhhKSk7dmFyIGQ9Yy5yZWFkeSgpLnRoZW4oZnVuY3Rpb24oKXt2YXIgYj1jLl9kYkluZm8sZD1sb2NhbFN0b3JhZ2UuZ2V0SXRlbShiLmtleVByZWZpeCthKTtyZXR1cm4gZCYmKGQ9Yi5zZXJpYWxpemVyLmRlc2VyaWFsaXplKGQpKSxkfSk7cmV0dXJuIGooZCxiKSxkfWZ1bmN0aW9uIFgoYSxiKXt2YXIgYz10aGlzLGQ9Yy5yZWFkeSgpLnRoZW4oZnVuY3Rpb24oKXtmb3IodmFyIGI9Yy5fZGJJbmZvLGQ9Yi5rZXlQcmVmaXgsZT1kLmxlbmd0aCxmPWxvY2FsU3RvcmFnZS5sZW5ndGgsZz0xLGg9MDtoPGY7aCsrKXt2YXIgaT1sb2NhbFN0b3JhZ2Uua2V5KGgpO2lmKDA9PT1pLmluZGV4T2YoZCkpe3ZhciBqPWxvY2FsU3RvcmFnZS5nZXRJdGVtKGkpO2lmKGomJihqPWIuc2VyaWFsaXplci5kZXNlcmlhbGl6ZShqKSksaj1hKGosaS5zdWJzdHJpbmcoZSksZysrKSx2b2lkIDAhPT1qKXJldHVybiBqfX19KTtyZXR1cm4gaihkLGIpLGR9ZnVuY3Rpb24gWShhLGIpe3ZhciBjPXRoaXMsZD1jLnJlYWR5KCkudGhlbihmdW5jdGlvbigpe3ZhciBiLGQ9Yy5fZGJJbmZvO3RyeXtiPWxvY2FsU3RvcmFnZS5rZXkoYSl9Y2F0Y2goYSl7Yj1udWxsfXJldHVybiBiJiYoYj1iLnN1YnN0cmluZyhkLmtleVByZWZpeC5sZW5ndGgpKSxifSk7cmV0dXJuIGooZCxiKSxkfWZ1bmN0aW9uIFooYSl7dmFyIGI9dGhpcyxjPWIucmVhZHkoKS50aGVuKGZ1bmN0aW9uKCl7Zm9yKHZhciBhPWIuX2RiSW5mbyxjPWxvY2FsU3RvcmFnZS5sZW5ndGgsZD1bXSxlPTA7ZTxjO2UrKykwPT09bG9jYWxTdG9yYWdlLmtleShlKS5pbmRleE9mKGEua2V5UHJlZml4KSYmZC5wdXNoKGxvY2FsU3RvcmFnZS5rZXkoZSkuc3Vic3RyaW5nKGEua2V5UHJlZml4Lmxlbmd0aCkpO3JldHVybiBkfSk7cmV0dXJuIGooYyxhKSxjfWZ1bmN0aW9uICQoYSl7dmFyIGI9dGhpcyxjPWIua2V5cygpLnRoZW4oZnVuY3Rpb24oYSl7cmV0dXJuIGEubGVuZ3RofSk7cmV0dXJuIGooYyxhKSxjfWZ1bmN0aW9uIF8oYSxiKXt2YXIgYz10aGlzO1wic3RyaW5nXCIhPXR5cGVvZiBhJiYoY29uc29sZS53YXJuKGErXCIgdXNlZCBhcyBhIGtleSwgYnV0IGl0IGlzIG5vdCBhIHN0cmluZy5cIiksYT1TdHJpbmcoYSkpO3ZhciBkPWMucmVhZHkoKS50aGVuKGZ1bmN0aW9uKCl7dmFyIGI9Yy5fZGJJbmZvO2xvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKGIua2V5UHJlZml4K2EpfSk7cmV0dXJuIGooZCxiKSxkfWZ1bmN0aW9uIGFhKGEsYixjKXt2YXIgZD10aGlzO1wic3RyaW5nXCIhPXR5cGVvZiBhJiYoY29uc29sZS53YXJuKGErXCIgdXNlZCBhcyBhIGtleSwgYnV0IGl0IGlzIG5vdCBhIHN0cmluZy5cIiksYT1TdHJpbmcoYSkpO3ZhciBlPWQucmVhZHkoKS50aGVuKGZ1bmN0aW9uKCl7dm9pZCAwPT09YiYmKGI9bnVsbCk7dmFyIGM9YjtyZXR1cm4gbmV3IGlhKGZ1bmN0aW9uKGUsZil7dmFyIGc9ZC5fZGJJbmZvO2cuc2VyaWFsaXplci5zZXJpYWxpemUoYixmdW5jdGlvbihiLGQpe2lmKGQpZihkKTtlbHNlIHRyeXtsb2NhbFN0b3JhZ2Uuc2V0SXRlbShnLmtleVByZWZpeCthLGIpLGUoYyl9Y2F0Y2goYSl7XCJRdW90YUV4Y2VlZGVkRXJyb3JcIiE9PWEubmFtZSYmXCJOU19FUlJPUl9ET01fUVVPVEFfUkVBQ0hFRFwiIT09YS5uYW1lfHxmKGEpLGYoYSl9fSl9KX0pO3JldHVybiBqKGUsYyksZX1mdW5jdGlvbiBiYShhLGIpe2FbYl09ZnVuY3Rpb24oKXt2YXIgYz1hcmd1bWVudHM7cmV0dXJuIGEucmVhZHkoKS50aGVuKGZ1bmN0aW9uKCl7cmV0dXJuIGFbYl0uYXBwbHkoYSxjKX0pfX1mdW5jdGlvbiBjYSgpe2Zvcih2YXIgYT0xO2E8YXJndW1lbnRzLmxlbmd0aDthKyspe3ZhciBiPWFyZ3VtZW50c1thXTtpZihiKWZvcih2YXIgYyBpbiBiKWIuaGFzT3duUHJvcGVydHkoYykmJihOYShiW2NdKT9hcmd1bWVudHNbMF1bY109YltjXS5zbGljZSgpOmFyZ3VtZW50c1swXVtjXT1iW2NdKX1yZXR1cm4gYXJndW1lbnRzWzBdfWZ1bmN0aW9uIGRhKGEpe2Zvcih2YXIgYiBpbiBJYSlpZihJYS5oYXNPd25Qcm9wZXJ0eShiKSYmSWFbYl09PT1hKXJldHVybiEwO3JldHVybiExfXZhciBlYT1cImZ1bmN0aW9uXCI9PXR5cGVvZiBTeW1ib2wmJlwic3ltYm9sXCI9PXR5cGVvZiBTeW1ib2wuaXRlcmF0b3I/ZnVuY3Rpb24oYSl7cmV0dXJuIHR5cGVvZiBhfTpmdW5jdGlvbihhKXtyZXR1cm4gYSYmXCJmdW5jdGlvblwiPT10eXBlb2YgU3ltYm9sJiZhLmNvbnN0cnVjdG9yPT09U3ltYm9sJiZhIT09U3ltYm9sLnByb3RvdHlwZT9cInN5bWJvbFwiOnR5cGVvZiBhfSxmYT1lKCk7XCJ1bmRlZmluZWRcIj09dHlwZW9mIFByb21pc2UmJlwidW5kZWZpbmVkXCIhPXR5cGVvZiBhJiZhKDMpO3ZhciBnYSxoYSxpYT1Qcm9taXNlLGphPVwibG9jYWwtZm9yYWdlLWRldGVjdC1ibG9iLXN1cHBvcnRcIixrYT1PYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLGxhPXtfZHJpdmVyOlwiYXN5bmNTdG9yYWdlXCIsX2luaXRTdG9yYWdlOnksaXRlcmF0ZTpBLGdldEl0ZW06eixzZXRJdGVtOkIscmVtb3ZlSXRlbTpDLGNsZWFyOkQsbGVuZ3RoOkUsa2V5OkYsa2V5czpHfSxtYT1cIkFCQ0RFRkdISUpLTE1OT1BRUlNUVVZXWFlaYWJjZGVmZ2hpamtsbW5vcHFyc3R1dnd4eXowMTIzNDU2Nzg5Ky9cIixuYT1cIn5+bG9jYWxfZm9yYWdlX3R5cGV+XCIsb2E9L15+fmxvY2FsX2ZvcmFnZV90eXBlfihbXn5dKyl+LyxwYT1cIl9fbGZzY19fOlwiLHFhPXBhLmxlbmd0aCxyYT1cImFyYmZcIixzYT1cImJsb2JcIix0YT1cInNpMDhcIix1YT1cInVpMDhcIix2YT1cInVpYzhcIix3YT1cInNpMTZcIix4YT1cInNpMzJcIix5YT1cInVyMTZcIix6YT1cInVpMzJcIixBYT1cImZsMzJcIixCYT1cImZsNjRcIixDYT1xYStyYS5sZW5ndGgsRGE9T2JqZWN0LnByb3RvdHlwZS50b1N0cmluZyxFYT17c2VyaWFsaXplOkosZGVzZXJpYWxpemU6SyxzdHJpbmdUb0J1ZmZlcjpILGJ1ZmZlclRvU3RyaW5nOkl9LEZhPXtfZHJpdmVyOlwid2ViU1FMU3RvcmFnZVwiLF9pbml0U3RvcmFnZTpMLGl0ZXJhdGU6TixnZXRJdGVtOk0sc2V0SXRlbTpPLHJlbW92ZUl0ZW06UCxjbGVhcjpRLGxlbmd0aDpSLGtleTpTLGtleXM6VH0sR2E9e19kcml2ZXI6XCJsb2NhbFN0b3JhZ2VXcmFwcGVyXCIsX2luaXRTdG9yYWdlOlUsaXRlcmF0ZTpYLGdldEl0ZW06VyxzZXRJdGVtOmFhLHJlbW92ZUl0ZW06XyxjbGVhcjpWLGxlbmd0aDokLGtleTpZLGtleXM6Wn0sSGE9e30sSWE9e0lOREVYRUREQjpcImFzeW5jU3RvcmFnZVwiLExPQ0FMU1RPUkFHRTpcImxvY2FsU3RvcmFnZVdyYXBwZXJcIixXRUJTUUw6XCJ3ZWJTUUxTdG9yYWdlXCJ9LEphPVtJYS5JTkRFWEVEREIsSWEuV0VCU1FMLElhLkxPQ0FMU1RPUkFHRV0sS2E9W1wiY2xlYXJcIixcImdldEl0ZW1cIixcIml0ZXJhdGVcIixcImtleVwiLFwia2V5c1wiLFwibGVuZ3RoXCIsXCJyZW1vdmVJdGVtXCIsXCJzZXRJdGVtXCJdLExhPXtkZXNjcmlwdGlvbjpcIlwiLGRyaXZlcjpKYS5zbGljZSgpLG5hbWU6XCJsb2NhbGZvcmFnZVwiLHNpemU6NDk4MDczNixzdG9yZU5hbWU6XCJrZXl2YWx1ZXBhaXJzXCIsdmVyc2lvbjoxfSxNYT17fTtNYVtJYS5JTkRFWEVEREJdPWYoKSxNYVtJYS5XRUJTUUxdPWcoKSxNYVtJYS5MT0NBTFNUT1JBR0VdPWgoKTt2YXIgTmE9QXJyYXkuaXNBcnJheXx8ZnVuY3Rpb24oYSl7cmV0dXJuXCJbb2JqZWN0IEFycmF5XVwiPT09T2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKGEpfSxPYT1mdW5jdGlvbigpe2Z1bmN0aW9uIGEoYil7ZCh0aGlzLGEpLHRoaXMuSU5ERVhFRERCPUlhLklOREVYRUREQix0aGlzLkxPQ0FMU1RPUkFHRT1JYS5MT0NBTFNUT1JBR0UsdGhpcy5XRUJTUUw9SWEuV0VCU1FMLHRoaXMuX2RlZmF1bHRDb25maWc9Y2Eoe30sTGEpLHRoaXMuX2NvbmZpZz1jYSh7fSx0aGlzLl9kZWZhdWx0Q29uZmlnLGIpLHRoaXMuX2RyaXZlclNldD1udWxsLHRoaXMuX2luaXREcml2ZXI9bnVsbCx0aGlzLl9yZWFkeT0hMSx0aGlzLl9kYkluZm89bnVsbCx0aGlzLl93cmFwTGlicmFyeU1ldGhvZHNXaXRoUmVhZHkoKSx0aGlzLnNldERyaXZlcih0aGlzLl9jb25maWcuZHJpdmVyKS5jYXRjaChmdW5jdGlvbigpe30pfXJldHVybiBhLnByb3RvdHlwZS5jb25maWc9ZnVuY3Rpb24oYSl7aWYoXCJvYmplY3RcIj09PShcInVuZGVmaW5lZFwiPT10eXBlb2YgYT9cInVuZGVmaW5lZFwiOmVhKGEpKSl7aWYodGhpcy5fcmVhZHkpcmV0dXJuIG5ldyBFcnJvcihcIkNhbid0IGNhbGwgY29uZmlnKCkgYWZ0ZXIgbG9jYWxmb3JhZ2UgaGFzIGJlZW4gdXNlZC5cIik7Zm9yKHZhciBiIGluIGEpe2lmKFwic3RvcmVOYW1lXCI9PT1iJiYoYVtiXT1hW2JdLnJlcGxhY2UoL1xcVy9nLFwiX1wiKSksXCJ2ZXJzaW9uXCI9PT1iJiZcIm51bWJlclwiIT10eXBlb2YgYVtiXSlyZXR1cm4gbmV3IEVycm9yKFwiRGF0YWJhc2UgdmVyc2lvbiBtdXN0IGJlIGEgbnVtYmVyLlwiKTt0aGlzLl9jb25maWdbYl09YVtiXX1yZXR1cm4hKFwiZHJpdmVyXCJpbiBhJiZhLmRyaXZlcil8fHRoaXMuc2V0RHJpdmVyKHRoaXMuX2NvbmZpZy5kcml2ZXIpfXJldHVyblwic3RyaW5nXCI9PXR5cGVvZiBhP3RoaXMuX2NvbmZpZ1thXTp0aGlzLl9jb25maWd9LGEucHJvdG90eXBlLmRlZmluZURyaXZlcj1mdW5jdGlvbihhLGIsYyl7dmFyIGQ9bmV3IGlhKGZ1bmN0aW9uKGIsYyl7dHJ5e3ZhciBkPWEuX2RyaXZlcixlPW5ldyBFcnJvcihcIkN1c3RvbSBkcml2ZXIgbm90IGNvbXBsaWFudDsgc2VlIGh0dHBzOi8vbW96aWxsYS5naXRodWIuaW8vbG9jYWxGb3JhZ2UvI2RlZmluZWRyaXZlclwiKSxmPW5ldyBFcnJvcihcIkN1c3RvbSBkcml2ZXIgbmFtZSBhbHJlYWR5IGluIHVzZTogXCIrYS5fZHJpdmVyKTtpZighYS5fZHJpdmVyKXJldHVybiB2b2lkIGMoZSk7aWYoZGEoYS5fZHJpdmVyKSlyZXR1cm4gdm9pZCBjKGYpO2Zvcih2YXIgZz1LYS5jb25jYXQoXCJfaW5pdFN0b3JhZ2VcIiksaD0wO2g8Zy5sZW5ndGg7aCsrKXt2YXIgaT1nW2hdO2lmKCFpfHwhYVtpXXx8XCJmdW5jdGlvblwiIT10eXBlb2YgYVtpXSlyZXR1cm4gdm9pZCBjKGUpfXZhciBqPWlhLnJlc29sdmUoITApO1wiX3N1cHBvcnRcImluIGEmJihqPWEuX3N1cHBvcnQmJlwiZnVuY3Rpb25cIj09dHlwZW9mIGEuX3N1cHBvcnQ/YS5fc3VwcG9ydCgpOmlhLnJlc29sdmUoISFhLl9zdXBwb3J0KSksai50aGVuKGZ1bmN0aW9uKGMpe01hW2RdPWMsSGFbZF09YSxiKCl9LGMpfWNhdGNoKGEpe2MoYSl9fSk7cmV0dXJuIGsoZCxiLGMpLGR9LGEucHJvdG90eXBlLmRyaXZlcj1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9kcml2ZXJ8fG51bGx9LGEucHJvdG90eXBlLmdldERyaXZlcj1mdW5jdGlvbihhLGIsYyl7dmFyIGQ9dGhpcyxlPWlhLnJlc29sdmUoKS50aGVuKGZ1bmN0aW9uKCl7aWYoIWRhKGEpKXtpZihIYVthXSlyZXR1cm4gSGFbYV07dGhyb3cgbmV3IEVycm9yKFwiRHJpdmVyIG5vdCBmb3VuZC5cIil9c3dpdGNoKGEpe2Nhc2UgZC5JTkRFWEVEREI6cmV0dXJuIGxhO2Nhc2UgZC5MT0NBTFNUT1JBR0U6cmV0dXJuIEdhO2Nhc2UgZC5XRUJTUUw6cmV0dXJuIEZhfX0pO3JldHVybiBrKGUsYixjKSxlfSxhLnByb3RvdHlwZS5nZXRTZXJpYWxpemVyPWZ1bmN0aW9uKGEpe3ZhciBiPWlhLnJlc29sdmUoRWEpO3JldHVybiBrKGIsYSksYn0sYS5wcm90b3R5cGUucmVhZHk9ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcyxjPWIuX2RyaXZlclNldC50aGVuKGZ1bmN0aW9uKCl7cmV0dXJuIG51bGw9PT1iLl9yZWFkeSYmKGIuX3JlYWR5PWIuX2luaXREcml2ZXIoKSksYi5fcmVhZHl9KTtyZXR1cm4gayhjLGEsYSksY30sYS5wcm90b3R5cGUuc2V0RHJpdmVyPWZ1bmN0aW9uKGEsYixjKXtmdW5jdGlvbiBkKCl7Zy5fY29uZmlnLmRyaXZlcj1nLmRyaXZlcigpfWZ1bmN0aW9uIGUoYSl7cmV0dXJuIGcuX2V4dGVuZChhKSxkKCksZy5fcmVhZHk9Zy5faW5pdFN0b3JhZ2UoZy5fY29uZmlnKSxnLl9yZWFkeX1mdW5jdGlvbiBmKGEpe3JldHVybiBmdW5jdGlvbigpe2Z1bmN0aW9uIGIoKXtmb3IoO2M8YS5sZW5ndGg7KXt2YXIgZj1hW2NdO3JldHVybiBjKyssZy5fZGJJbmZvPW51bGwsZy5fcmVhZHk9bnVsbCxnLmdldERyaXZlcihmKS50aGVuKGUpLmNhdGNoKGIpfWQoKTt2YXIgaD1uZXcgRXJyb3IoXCJObyBhdmFpbGFibGUgc3RvcmFnZSBtZXRob2QgZm91bmQuXCIpO3JldHVybiBnLl9kcml2ZXJTZXQ9aWEucmVqZWN0KGgpLGcuX2RyaXZlclNldH12YXIgYz0wO3JldHVybiBiKCl9fXZhciBnPXRoaXM7TmEoYSl8fChhPVthXSk7dmFyIGg9dGhpcy5fZ2V0U3VwcG9ydGVkRHJpdmVycyhhKSxpPW51bGwhPT10aGlzLl9kcml2ZXJTZXQ/dGhpcy5fZHJpdmVyU2V0LmNhdGNoKGZ1bmN0aW9uKCl7cmV0dXJuIGlhLnJlc29sdmUoKX0pOmlhLnJlc29sdmUoKTtyZXR1cm4gdGhpcy5fZHJpdmVyU2V0PWkudGhlbihmdW5jdGlvbigpe3ZhciBhPWhbMF07cmV0dXJuIGcuX2RiSW5mbz1udWxsLGcuX3JlYWR5PW51bGwsZy5nZXREcml2ZXIoYSkudGhlbihmdW5jdGlvbihhKXtnLl9kcml2ZXI9YS5fZHJpdmVyLGQoKSxnLl93cmFwTGlicmFyeU1ldGhvZHNXaXRoUmVhZHkoKSxnLl9pbml0RHJpdmVyPWYoaCl9KX0pLmNhdGNoKGZ1bmN0aW9uKCl7ZCgpO3ZhciBhPW5ldyBFcnJvcihcIk5vIGF2YWlsYWJsZSBzdG9yYWdlIG1ldGhvZCBmb3VuZC5cIik7cmV0dXJuIGcuX2RyaXZlclNldD1pYS5yZWplY3QoYSksZy5fZHJpdmVyU2V0fSksayh0aGlzLl9kcml2ZXJTZXQsYixjKSx0aGlzLl9kcml2ZXJTZXR9LGEucHJvdG90eXBlLnN1cHBvcnRzPWZ1bmN0aW9uKGEpe3JldHVybiEhTWFbYV19LGEucHJvdG90eXBlLl9leHRlbmQ9ZnVuY3Rpb24oYSl7Y2EodGhpcyxhKX0sYS5wcm90b3R5cGUuX2dldFN1cHBvcnRlZERyaXZlcnM9ZnVuY3Rpb24oYSl7Zm9yKHZhciBiPVtdLGM9MCxkPWEubGVuZ3RoO2M8ZDtjKyspe3ZhciBlPWFbY107dGhpcy5zdXBwb3J0cyhlKSYmYi5wdXNoKGUpfXJldHVybiBifSxhLnByb3RvdHlwZS5fd3JhcExpYnJhcnlNZXRob2RzV2l0aFJlYWR5PWZ1bmN0aW9uKCl7Zm9yKHZhciBhPTA7YTxLYS5sZW5ndGg7YSsrKWJhKHRoaXMsS2FbYV0pfSxhLnByb3RvdHlwZS5jcmVhdGVJbnN0YW5jZT1mdW5jdGlvbihiKXtyZXR1cm4gbmV3IGEoYil9LGF9KCksUGE9bmV3IE9hO2IuZXhwb3J0cz1QYX0sezM6M31dfSx7fSxbNF0pKDQpfSk7IiwiLypcclxuIEEgSmF2YVNjcmlwdCBpbXBsZW1lbnRhdGlvbiBvZiB0aGUgU0hBIGZhbWlseSBvZiBoYXNoZXMsIGFzXHJcbiBkZWZpbmVkIGluIEZJUFMgUFVCIDE4MC00IGFuZCBGSVBTIFBVQiAyMDIsIGFzIHdlbGwgYXMgdGhlIGNvcnJlc3BvbmRpbmdcclxuIEhNQUMgaW1wbGVtZW50YXRpb24gYXMgZGVmaW5lZCBpbiBGSVBTIFBVQiAxOThhXHJcblxyXG4gQ29weXJpZ2h0IEJyaWFuIFR1cmVrIDIwMDgtMjAxNlxyXG4gRGlzdHJpYnV0ZWQgdW5kZXIgdGhlIEJTRCBMaWNlbnNlXHJcbiBTZWUgaHR0cDovL2NhbGlnYXRpby5naXRodWIuY29tL2pzU0hBLyBmb3IgbW9yZSBpbmZvcm1hdGlvblxyXG5cclxuIFNldmVyYWwgZnVuY3Rpb25zIHRha2VuIGZyb20gUGF1bCBKb2huc3RvblxyXG4qL1xyXG4ndXNlIHN0cmljdCc7KGZ1bmN0aW9uKFgpe2Z1bmN0aW9uIEMoZixiLGMpe3ZhciBkPTAsYT1bXSxrPTAsZyxlLG4saCxtLHIsdCxxLHY9ITEsdT1bXSx3PVtdLHgseT0hMSx6PSExO2M9Y3x8e307Zz1jLmVuY29kaW5nfHxcIlVURjhcIjt4PWMubnVtUm91bmRzfHwxO249SihiLGcpO2lmKHghPT1wYXJzZUludCh4LDEwKXx8MT54KXRocm93IEVycm9yKFwibnVtUm91bmRzIG11c3QgYSBpbnRlZ2VyID49IDFcIik7aWYoXCJTSEEtMVwiPT09ZiltPTUxMixyPUssdD1ZLGg9MTYwLHE9ZnVuY3Rpb24oYil7cmV0dXJuIGIuc2xpY2UoKX07ZWxzZSBpZigwPT09Zi5sYXN0SW5kZXhPZihcIlNIQS1cIiwwKSlpZihyPWZ1bmN0aW9uKGIsZCl7cmV0dXJuIEwoYixkLGYpfSx0PWZ1bmN0aW9uKGIsZCxjLGEpe3ZhciBsLGs7aWYoXCJTSEEtMjI0XCI9PT1mfHxcIlNIQS0yNTZcIj09PWYpbD0oZCs2NT4+Pjk8PDQpKzE1LGs9MTY7ZWxzZSBpZihcIlNIQS0zODRcIj09PWZ8fFwiU0hBLTUxMlwiPT09ZilsPShkKzEyOT4+PlxyXG4xMDw8NSkrMzEsaz0zMjtlbHNlIHRocm93IEVycm9yKFwiVW5leHBlY3RlZCBlcnJvciBpbiBTSEEtMiBpbXBsZW1lbnRhdGlvblwiKTtmb3IoO2IubGVuZ3RoPD1sOyliLnB1c2goMCk7YltkPj4+NV18PTEyODw8MjQtZCUzMjtkPWQrYztiW2xdPWQmNDI5NDk2NzI5NTtiW2wtMV09ZC80Mjk0OTY3Mjk2fDA7Yz1iLmxlbmd0aDtmb3IoZD0wO2Q8YztkKz1rKWE9TChiLnNsaWNlKGQsZCtrKSxhLGYpO2lmKFwiU0hBLTIyNFwiPT09ZiliPVthWzBdLGFbMV0sYVsyXSxhWzNdLGFbNF0sYVs1XSxhWzZdXTtlbHNlIGlmKFwiU0hBLTI1NlwiPT09ZiliPWE7ZWxzZSBpZihcIlNIQS0zODRcIj09PWYpYj1bYVswXS5hLGFbMF0uYixhWzFdLmEsYVsxXS5iLGFbMl0uYSxhWzJdLmIsYVszXS5hLGFbM10uYixhWzRdLmEsYVs0XS5iLGFbNV0uYSxhWzVdLmJdO2Vsc2UgaWYoXCJTSEEtNTEyXCI9PT1mKWI9W2FbMF0uYSxhWzBdLmIsYVsxXS5hLGFbMV0uYixhWzJdLmEsYVsyXS5iLGFbM10uYSxhWzNdLmIsYVs0XS5hLFxyXG5hWzRdLmIsYVs1XS5hLGFbNV0uYixhWzZdLmEsYVs2XS5iLGFbN10uYSxhWzddLmJdO2Vsc2UgdGhyb3cgRXJyb3IoXCJVbmV4cGVjdGVkIGVycm9yIGluIFNIQS0yIGltcGxlbWVudGF0aW9uXCIpO3JldHVybiBifSxxPWZ1bmN0aW9uKGIpe3JldHVybiBiLnNsaWNlKCl9LFwiU0hBLTIyNFwiPT09ZiltPTUxMixoPTIyNDtlbHNlIGlmKFwiU0hBLTI1NlwiPT09ZiltPTUxMixoPTI1NjtlbHNlIGlmKFwiU0hBLTM4NFwiPT09ZiltPTEwMjQsaD0zODQ7ZWxzZSBpZihcIlNIQS01MTJcIj09PWYpbT0xMDI0LGg9NTEyO2Vsc2UgdGhyb3cgRXJyb3IoXCJDaG9zZW4gU0hBIHZhcmlhbnQgaXMgbm90IHN1cHBvcnRlZFwiKTtlbHNlIGlmKDA9PT1mLmxhc3RJbmRleE9mKFwiU0hBMy1cIiwwKXx8MD09PWYubGFzdEluZGV4T2YoXCJTSEFLRVwiLDApKXt2YXIgRj02O3I9RDtxPWZ1bmN0aW9uKGIpe3ZhciBmPVtdLGE7Zm9yKGE9MDs1PmE7YSs9MSlmW2FdPWJbYV0uc2xpY2UoKTtyZXR1cm4gZn07aWYoXCJTSEEzLTIyNFwiPT09XHJcbmYpbT0xMTUyLGg9MjI0O2Vsc2UgaWYoXCJTSEEzLTI1NlwiPT09ZiltPTEwODgsaD0yNTY7ZWxzZSBpZihcIlNIQTMtMzg0XCI9PT1mKW09ODMyLGg9Mzg0O2Vsc2UgaWYoXCJTSEEzLTUxMlwiPT09ZiltPTU3NixoPTUxMjtlbHNlIGlmKFwiU0hBS0UxMjhcIj09PWYpbT0xMzQ0LGg9LTEsRj0zMSx6PSEwO2Vsc2UgaWYoXCJTSEFLRTI1NlwiPT09ZiltPTEwODgsaD0tMSxGPTMxLHo9ITA7ZWxzZSB0aHJvdyBFcnJvcihcIkNob3NlbiBTSEEgdmFyaWFudCBpcyBub3Qgc3VwcG9ydGVkXCIpO3Q9ZnVuY3Rpb24oYixmLGEsZCxjKXthPW07dmFyIGw9RixrLGc9W10sZT1hPj4+NSxoPTAscD1mPj4+NTtmb3Ioaz0wO2s8cCYmZj49YTtrKz1lKWQ9RChiLnNsaWNlKGssaytlKSxkKSxmLT1hO2I9Yi5zbGljZShrKTtmb3IoZiU9YTtiLmxlbmd0aDxlOyliLnB1c2goMCk7az1mPj4+MztiW2s+PjJdXj1sPDwyNC1rJTQqODtiW2UtMV1ePTEyODtmb3IoZD1EKGIsZCk7MzIqZy5sZW5ndGg8Yzspe2I9ZFtoJTVdW2gvXHJcbjV8MF07Zy5wdXNoKChiLmImMjU1KTw8MjR8KGIuYiY2NTI4MCk8PDh8KGIuYiYxNjcxMTY4MCk+Pjh8Yi5iPj4+MjQpO2lmKDMyKmcubGVuZ3RoPj1jKWJyZWFrO2cucHVzaCgoYi5hJjI1NSk8PDI0fChiLmEmNjUyODApPDw4fChiLmEmMTY3MTE2ODApPj44fGIuYT4+PjI0KTtoKz0xOzA9PT02NCpoJWEmJkQobnVsbCxkKX1yZXR1cm4gZ319ZWxzZSB0aHJvdyBFcnJvcihcIkNob3NlbiBTSEEgdmFyaWFudCBpcyBub3Qgc3VwcG9ydGVkXCIpO2U9QihmKTt0aGlzLnNldEhNQUNLZXk9ZnVuY3Rpb24oYixhLGMpe3ZhciBsO2lmKCEwPT09dil0aHJvdyBFcnJvcihcIkhNQUMga2V5IGFscmVhZHkgc2V0XCIpO2lmKCEwPT09eSl0aHJvdyBFcnJvcihcIkNhbm5vdCBzZXQgSE1BQyBrZXkgYWZ0ZXIgY2FsbGluZyB1cGRhdGVcIik7aWYoITA9PT16KXRocm93IEVycm9yKFwiU0hBS0UgaXMgbm90IHN1cHBvcnRlZCBmb3IgSE1BQ1wiKTtnPShjfHx7fSkuZW5jb2Rpbmd8fFwiVVRGOFwiO2E9SihhLGcpKGIpO1xyXG5iPWEuYmluTGVuO2E9YS52YWx1ZTtsPW0+Pj4zO2M9bC80LTE7aWYobDxiLzgpe2ZvcihhPXQoYSxiLDAsQihmKSxoKTthLmxlbmd0aDw9YzspYS5wdXNoKDApO2FbY10mPTQyOTQ5NjcwNDB9ZWxzZSBpZihsPmIvOCl7Zm9yKDthLmxlbmd0aDw9YzspYS5wdXNoKDApO2FbY10mPTQyOTQ5NjcwNDB9Zm9yKGI9MDtiPD1jO2IrPTEpdVtiXT1hW2JdXjkwOTUyMjQ4Nix3W2JdPWFbYl1eMTU0OTU1NjgyODtlPXIodSxlKTtkPW07dj0hMH07dGhpcy51cGRhdGU9ZnVuY3Rpb24oYil7dmFyIGYsYyxnLGg9MCxxPW0+Pj41O2Y9bihiLGEsayk7Yj1mLmJpbkxlbjtjPWYudmFsdWU7Zj1iPj4+NTtmb3IoZz0wO2c8ZjtnKz1xKWgrbTw9YiYmKGU9cihjLnNsaWNlKGcsZytxKSxlKSxoKz1tKTtkKz1oO2E9Yy5zbGljZShoPj4+NSk7az1iJW07eT0hMH07dGhpcy5nZXRIYXNoPWZ1bmN0aW9uKGIsYyl7dmFyIGcsbSxuLHI7aWYoITA9PT12KXRocm93IEVycm9yKFwiQ2Fubm90IGNhbGwgZ2V0SGFzaCBhZnRlciBzZXR0aW5nIEhNQUMga2V5XCIpO1xyXG5uPU0oYyk7aWYoITA9PT16KXtpZigtMT09PW4uc2hha2VMZW4pdGhyb3cgRXJyb3IoXCJzaGFrZUxlbiBtdXN0IGJlIHNwZWNpZmllZCBpbiBvcHRpb25zXCIpO2g9bi5zaGFrZUxlbn1zd2l0Y2goYil7Y2FzZSBcIkhFWFwiOmc9ZnVuY3Rpb24oYil7cmV0dXJuIE4oYixoLG4pfTticmVhaztjYXNlIFwiQjY0XCI6Zz1mdW5jdGlvbihiKXtyZXR1cm4gTyhiLGgsbil9O2JyZWFrO2Nhc2UgXCJCWVRFU1wiOmc9ZnVuY3Rpb24oYil7cmV0dXJuIFAoYixoKX07YnJlYWs7Y2FzZSBcIkFSUkFZQlVGRkVSXCI6dHJ5e209bmV3IEFycmF5QnVmZmVyKDApfWNhdGNoKHNhKXt0aHJvdyBFcnJvcihcIkFSUkFZQlVGRkVSIG5vdCBzdXBwb3J0ZWQgYnkgdGhpcyBlbnZpcm9ubWVudFwiKTt9Zz1mdW5jdGlvbihiKXtyZXR1cm4gUShiLGgpfTticmVhaztkZWZhdWx0OnRocm93IEVycm9yKFwiZm9ybWF0IG11c3QgYmUgSEVYLCBCNjQsIEJZVEVTLCBvciBBUlJBWUJVRkZFUlwiKTt9cj10KGEuc2xpY2UoKSxrLGQscShlKSxcclxuaCk7Zm9yKG09MTttPHg7bSs9MSkhMD09PXomJjAhPT1oJTMyJiYocltyLmxlbmd0aC0xXSY9NDI5NDk2NzA0MDw8MjQtaCUzMikscj10KHIsaCwwLEIoZiksaCk7cmV0dXJuIGcocil9O3RoaXMuZ2V0SE1BQz1mdW5jdGlvbihiLGMpe3ZhciBnLG4sdSx4O2lmKCExPT09dil0aHJvdyBFcnJvcihcIkNhbm5vdCBjYWxsIGdldEhNQUMgd2l0aG91dCBmaXJzdCBzZXR0aW5nIEhNQUMga2V5XCIpO3U9TShjKTtzd2l0Y2goYil7Y2FzZSBcIkhFWFwiOmc9ZnVuY3Rpb24oYil7cmV0dXJuIE4oYixoLHUpfTticmVhaztjYXNlIFwiQjY0XCI6Zz1mdW5jdGlvbihiKXtyZXR1cm4gTyhiLGgsdSl9O2JyZWFrO2Nhc2UgXCJCWVRFU1wiOmc9ZnVuY3Rpb24oYil7cmV0dXJuIFAoYixoKX07YnJlYWs7Y2FzZSBcIkFSUkFZQlVGRkVSXCI6dHJ5e2c9bmV3IEFycmF5QnVmZmVyKDApfWNhdGNoKHope3Rocm93IEVycm9yKFwiQVJSQVlCVUZGRVIgbm90IHN1cHBvcnRlZCBieSB0aGlzIGVudmlyb25tZW50XCIpO31nPWZ1bmN0aW9uKGIpe3JldHVybiBRKGIsXHJcbmgpfTticmVhaztkZWZhdWx0OnRocm93IEVycm9yKFwib3V0cHV0Rm9ybWF0IG11c3QgYmUgSEVYLCBCNjQsIEJZVEVTLCBvciBBUlJBWUJVRkZFUlwiKTt9bj10KGEuc2xpY2UoKSxrLGQscShlKSxoKTt4PXIodyxCKGYpKTt4PXQobixoLG0seCxoKTtyZXR1cm4gZyh4KX19ZnVuY3Rpb24gYShmLGIpe3RoaXMuYT1mO3RoaXMuYj1ifWZ1bmN0aW9uIFooZixiLGEpe3ZhciBkPWYubGVuZ3RoLGwsayxnLGUsbjtiPWJ8fFswXTthPWF8fDA7bj1hPj4+MztpZigwIT09ZCUyKXRocm93IEVycm9yKFwiU3RyaW5nIG9mIEhFWCB0eXBlIG11c3QgYmUgaW4gYnl0ZSBpbmNyZW1lbnRzXCIpO2ZvcihsPTA7bDxkO2wrPTIpe2s9cGFyc2VJbnQoZi5zdWJzdHIobCwyKSwxNik7aWYoaXNOYU4oaykpdGhyb3cgRXJyb3IoXCJTdHJpbmcgb2YgSEVYIHR5cGUgY29udGFpbnMgaW52YWxpZCBjaGFyYWN0ZXJzXCIpO2U9KGw+Pj4xKStuO2ZvcihnPWU+Pj4yO2IubGVuZ3RoPD1nOyliLnB1c2goMCk7YltnXXw9azw8XHJcbjgqKDMtZSU0KX1yZXR1cm57dmFsdWU6YixiaW5MZW46NCpkK2F9fWZ1bmN0aW9uIGFhKGYsYixhKXt2YXIgZD1bXSxsLGssZyxlLGQ9Ynx8WzBdO2E9YXx8MDtrPWE+Pj4zO2ZvcihsPTA7bDxmLmxlbmd0aDtsKz0xKWI9Zi5jaGFyQ29kZUF0KGwpLGU9bCtrLGc9ZT4+PjIsZC5sZW5ndGg8PWcmJmQucHVzaCgwKSxkW2ddfD1iPDw4KigzLWUlNCk7cmV0dXJue3ZhbHVlOmQsYmluTGVuOjgqZi5sZW5ndGgrYX19ZnVuY3Rpb24gYmEoZixiLGEpe3ZhciBkPVtdLGw9MCxrLGcsZSxuLGgsbSxkPWJ8fFswXTthPWF8fDA7Yj1hPj4+MztpZigtMT09PWYuc2VhcmNoKC9eW2EtekEtWjAtOT0rXFwvXSskLykpdGhyb3cgRXJyb3IoXCJJbnZhbGlkIGNoYXJhY3RlciBpbiBiYXNlLTY0IHN0cmluZ1wiKTtnPWYuaW5kZXhPZihcIj1cIik7Zj1mLnJlcGxhY2UoL1xcPS9nLFwiXCIpO2lmKC0xIT09ZyYmZzxmLmxlbmd0aCl0aHJvdyBFcnJvcihcIkludmFsaWQgJz0nIGZvdW5kIGluIGJhc2UtNjQgc3RyaW5nXCIpO1xyXG5mb3IoZz0wO2c8Zi5sZW5ndGg7Zys9NCl7aD1mLnN1YnN0cihnLDQpO2ZvcihlPW49MDtlPGgubGVuZ3RoO2UrPTEpaz1cIkFCQ0RFRkdISUpLTE1OT1BRUlNUVVZXWFlaYWJjZGVmZ2hpamtsbW5vcHFyc3R1dnd4eXowMTIzNDU2Nzg5Ky9cIi5pbmRleE9mKGhbZV0pLG58PWs8PDE4LTYqZTtmb3IoZT0wO2U8aC5sZW5ndGgtMTtlKz0xKXttPWwrYjtmb3Ioaz1tPj4+MjtkLmxlbmd0aDw9azspZC5wdXNoKDApO2Rba118PShuPj4+MTYtOCplJjI1NSk8PDgqKDMtbSU0KTtsKz0xfX1yZXR1cm57dmFsdWU6ZCxiaW5MZW46OCpsK2F9fWZ1bmN0aW9uIGNhKGEsYixjKXt2YXIgZD1bXSxsLGssZyxkPWJ8fFswXTtjPWN8fDA7bD1jPj4+Mztmb3IoYj0wO2I8YS5ieXRlTGVuZ3RoO2IrPTEpZz1iK2wsaz1nPj4+MixkLmxlbmd0aDw9ayYmZC5wdXNoKDApLGRba118PWFbYl08PDgqKDMtZyU0KTtyZXR1cm57dmFsdWU6ZCxiaW5MZW46OCphLmJ5dGVMZW5ndGgrY319ZnVuY3Rpb24gTihhLGIsYyl7dmFyIGQ9XHJcblwiXCI7Yi89ODt2YXIgbCxrO2ZvcihsPTA7bDxiO2wrPTEpaz1hW2w+Pj4yXT4+PjgqKDMtbCU0KSxkKz1cIjAxMjM0NTY3ODlhYmNkZWZcIi5jaGFyQXQoaz4+PjQmMTUpK1wiMDEyMzQ1Njc4OWFiY2RlZlwiLmNoYXJBdChrJjE1KTtyZXR1cm4gYy5vdXRwdXRVcHBlcj9kLnRvVXBwZXJDYXNlKCk6ZH1mdW5jdGlvbiBPKGEsYixjKXt2YXIgZD1cIlwiLGw9Yi84LGssZyxlO2ZvcihrPTA7azxsO2srPTMpZm9yKGc9aysxPGw/YVtrKzE+Pj4yXTowLGU9aysyPGw/YVtrKzI+Pj4yXTowLGU9KGFbaz4+PjJdPj4+OCooMy1rJTQpJjI1NSk8PDE2fChnPj4+OCooMy0oaysxKSU0KSYyNTUpPDw4fGU+Pj44KigzLShrKzIpJTQpJjI1NSxnPTA7ND5nO2crPTEpOCprKzYqZzw9Yj9kKz1cIkFCQ0RFRkdISUpLTE1OT1BRUlNUVVZXWFlaYWJjZGVmZ2hpamtsbW5vcHFyc3R1dnd4eXowMTIzNDU2Nzg5Ky9cIi5jaGFyQXQoZT4+PjYqKDMtZykmNjMpOmQrPWMuYjY0UGFkO3JldHVybiBkfWZ1bmN0aW9uIFAoYSxcclxuYil7dmFyIGM9XCJcIixkPWIvOCxsLGs7Zm9yKGw9MDtsPGQ7bCs9MSlrPWFbbD4+PjJdPj4+OCooMy1sJTQpJjI1NSxjKz1TdHJpbmcuZnJvbUNoYXJDb2RlKGspO3JldHVybiBjfWZ1bmN0aW9uIFEoYSxiKXt2YXIgYz1iLzgsZCxsPW5ldyBBcnJheUJ1ZmZlcihjKTtmb3IoZD0wO2Q8YztkKz0xKWxbZF09YVtkPj4+Ml0+Pj44KigzLWQlNCkmMjU1O3JldHVybiBsfWZ1bmN0aW9uIE0oYSl7dmFyIGI9e291dHB1dFVwcGVyOiExLGI2NFBhZDpcIj1cIixzaGFrZUxlbjotMX07YT1hfHx7fTtiLm91dHB1dFVwcGVyPWEub3V0cHV0VXBwZXJ8fCExOyEwPT09YS5oYXNPd25Qcm9wZXJ0eShcImI2NFBhZFwiKSYmKGIuYjY0UGFkPWEuYjY0UGFkKTtpZighMD09PWEuaGFzT3duUHJvcGVydHkoXCJzaGFrZUxlblwiKSl7aWYoMCE9PWEuc2hha2VMZW4lOCl0aHJvdyBFcnJvcihcInNoYWtlTGVuIG11c3QgYmUgYSBtdWx0aXBsZSBvZiA4XCIpO2Iuc2hha2VMZW49YS5zaGFrZUxlbn1pZihcImJvb2xlYW5cIiE9PVxyXG50eXBlb2YgYi5vdXRwdXRVcHBlcil0aHJvdyBFcnJvcihcIkludmFsaWQgb3V0cHV0VXBwZXIgZm9ybWF0dGluZyBvcHRpb25cIik7aWYoXCJzdHJpbmdcIiE9PXR5cGVvZiBiLmI2NFBhZCl0aHJvdyBFcnJvcihcIkludmFsaWQgYjY0UGFkIGZvcm1hdHRpbmcgb3B0aW9uXCIpO3JldHVybiBifWZ1bmN0aW9uIEooYSxiKXt2YXIgYztzd2l0Y2goYil7Y2FzZSBcIlVURjhcIjpjYXNlIFwiVVRGMTZCRVwiOmNhc2UgXCJVVEYxNkxFXCI6YnJlYWs7ZGVmYXVsdDp0aHJvdyBFcnJvcihcImVuY29kaW5nIG11c3QgYmUgVVRGOCwgVVRGMTZCRSwgb3IgVVRGMTZMRVwiKTt9c3dpdGNoKGEpe2Nhc2UgXCJIRVhcIjpjPVo7YnJlYWs7Y2FzZSBcIlRFWFRcIjpjPWZ1bmN0aW9uKGEsZixjKXt2YXIgZT1bXSxwPVtdLG49MCxoLG0scix0LHEsZT1mfHxbMF07Zj1jfHwwO3I9Zj4+PjM7aWYoXCJVVEY4XCI9PT1iKWZvcihoPTA7aDxhLmxlbmd0aDtoKz0xKWZvcihjPWEuY2hhckNvZGVBdChoKSxwPVtdLDEyOD5jP3AucHVzaChjKTpcclxuMjA0OD5jPyhwLnB1c2goMTkyfGM+Pj42KSxwLnB1c2goMTI4fGMmNjMpKTo1NTI5Nj5jfHw1NzM0NDw9Yz9wLnB1c2goMjI0fGM+Pj4xMiwxMjh8Yz4+PjYmNjMsMTI4fGMmNjMpOihoKz0xLGM9NjU1MzYrKChjJjEwMjMpPDwxMHxhLmNoYXJDb2RlQXQoaCkmMTAyMykscC5wdXNoKDI0MHxjPj4+MTgsMTI4fGM+Pj4xMiY2MywxMjh8Yz4+PjYmNjMsMTI4fGMmNjMpKSxtPTA7bTxwLmxlbmd0aDttKz0xKXtxPW4rcjtmb3IodD1xPj4+MjtlLmxlbmd0aDw9dDspZS5wdXNoKDApO2VbdF18PXBbbV08PDgqKDMtcSU0KTtuKz0xfWVsc2UgaWYoXCJVVEYxNkJFXCI9PT1ifHxcIlVURjE2TEVcIj09PWIpZm9yKGg9MDtoPGEubGVuZ3RoO2grPTEpe2M9YS5jaGFyQ29kZUF0KGgpO1wiVVRGMTZMRVwiPT09YiYmKG09YyYyNTUsYz1tPDw4fGM+Pj44KTtxPW4rcjtmb3IodD1xPj4+MjtlLmxlbmd0aDw9dDspZS5wdXNoKDApO2VbdF18PWM8PDgqKDItcSU0KTtuKz0yfXJldHVybnt2YWx1ZTplLGJpbkxlbjo4KlxyXG5uK2Z9fTticmVhaztjYXNlIFwiQjY0XCI6Yz1iYTticmVhaztjYXNlIFwiQllURVNcIjpjPWFhO2JyZWFrO2Nhc2UgXCJBUlJBWUJVRkZFUlwiOnRyeXtjPW5ldyBBcnJheUJ1ZmZlcigwKX1jYXRjaChkKXt0aHJvdyBFcnJvcihcIkFSUkFZQlVGRkVSIG5vdCBzdXBwb3J0ZWQgYnkgdGhpcyBlbnZpcm9ubWVudFwiKTt9Yz1jYTticmVhaztkZWZhdWx0OnRocm93IEVycm9yKFwiZm9ybWF0IG11c3QgYmUgSEVYLCBURVhULCBCNjQsIEJZVEVTLCBvciBBUlJBWUJVRkZFUlwiKTt9cmV0dXJuIGN9ZnVuY3Rpb24geShhLGIpe3JldHVybiBhPDxifGE+Pj4zMi1ifWZ1bmN0aW9uIFIoZixiKXtyZXR1cm4gMzI8Yj8oYj1iLTMyLG5ldyBhKGYuYjw8YnxmLmE+Pj4zMi1iLGYuYTw8YnxmLmI+Pj4zMi1iKSk6MCE9PWI/bmV3IGEoZi5hPDxifGYuYj4+PjMyLWIsZi5iPDxifGYuYT4+PjMyLWIpOmZ9ZnVuY3Rpb24gdihhLGIpe3JldHVybiBhPj4+YnxhPDwzMi1ifWZ1bmN0aW9uIHcoZixiKXt2YXIgYz1udWxsLFxyXG5jPW5ldyBhKGYuYSxmLmIpO3JldHVybiBjPTMyPj1iP25ldyBhKGMuYT4+PmJ8Yy5iPDwzMi1iJjQyOTQ5NjcyOTUsYy5iPj4+YnxjLmE8PDMyLWImNDI5NDk2NzI5NSk6bmV3IGEoYy5iPj4+Yi0zMnxjLmE8PDY0LWImNDI5NDk2NzI5NSxjLmE+Pj5iLTMyfGMuYjw8NjQtYiY0Mjk0OTY3Mjk1KX1mdW5jdGlvbiBTKGYsYil7dmFyIGM9bnVsbDtyZXR1cm4gYz0zMj49Yj9uZXcgYShmLmE+Pj5iLGYuYj4+PmJ8Zi5hPDwzMi1iJjQyOTQ5NjcyOTUpOm5ldyBhKDAsZi5hPj4+Yi0zMil9ZnVuY3Rpb24gZGEoYSxiLGMpe3JldHVybiBhJmJefmEmY31mdW5jdGlvbiBlYShmLGIsYyl7cmV0dXJuIG5ldyBhKGYuYSZiLmFefmYuYSZjLmEsZi5iJmIuYl5+Zi5iJmMuYil9ZnVuY3Rpb24gVChhLGIsYyl7cmV0dXJuIGEmYl5hJmNeYiZjfWZ1bmN0aW9uIGZhKGYsYixjKXtyZXR1cm4gbmV3IGEoZi5hJmIuYV5mLmEmYy5hXmIuYSZjLmEsZi5iJmIuYl5mLmImYy5iXmIuYiZjLmIpfWZ1bmN0aW9uIGdhKGEpe3JldHVybiB2KGEsXHJcbjIpXnYoYSwxMyledihhLDIyKX1mdW5jdGlvbiBoYShmKXt2YXIgYj13KGYsMjgpLGM9dyhmLDM0KTtmPXcoZiwzOSk7cmV0dXJuIG5ldyBhKGIuYV5jLmFeZi5hLGIuYl5jLmJeZi5iKX1mdW5jdGlvbiBpYShhKXtyZXR1cm4gdihhLDYpXnYoYSwxMSledihhLDI1KX1mdW5jdGlvbiBqYShmKXt2YXIgYj13KGYsMTQpLGM9dyhmLDE4KTtmPXcoZiw0MSk7cmV0dXJuIG5ldyBhKGIuYV5jLmFeZi5hLGIuYl5jLmJeZi5iKX1mdW5jdGlvbiBrYShhKXtyZXR1cm4gdihhLDcpXnYoYSwxOCleYT4+PjN9ZnVuY3Rpb24gbGEoZil7dmFyIGI9dyhmLDEpLGM9dyhmLDgpO2Y9UyhmLDcpO3JldHVybiBuZXcgYShiLmFeYy5hXmYuYSxiLmJeYy5iXmYuYil9ZnVuY3Rpb24gbWEoYSl7cmV0dXJuIHYoYSwxNyledihhLDE5KV5hPj4+MTB9ZnVuY3Rpb24gbmEoZil7dmFyIGI9dyhmLDE5KSxjPXcoZiw2MSk7Zj1TKGYsNik7cmV0dXJuIG5ldyBhKGIuYV5jLmFeZi5hLGIuYl5jLmJeZi5iKX1mdW5jdGlvbiBHKGEsXHJcbmIpe3ZhciBjPShhJjY1NTM1KSsoYiY2NTUzNSk7cmV0dXJuKChhPj4+MTYpKyhiPj4+MTYpKyhjPj4+MTYpJjY1NTM1KTw8MTZ8YyY2NTUzNX1mdW5jdGlvbiBvYShhLGIsYyxkKXt2YXIgbD0oYSY2NTUzNSkrKGImNjU1MzUpKyhjJjY1NTM1KSsoZCY2NTUzNSk7cmV0dXJuKChhPj4+MTYpKyhiPj4+MTYpKyhjPj4+MTYpKyhkPj4+MTYpKyhsPj4+MTYpJjY1NTM1KTw8MTZ8bCY2NTUzNX1mdW5jdGlvbiBIKGEsYixjLGQsbCl7dmFyIGU9KGEmNjU1MzUpKyhiJjY1NTM1KSsoYyY2NTUzNSkrKGQmNjU1MzUpKyhsJjY1NTM1KTtyZXR1cm4oKGE+Pj4xNikrKGI+Pj4xNikrKGM+Pj4xNikrKGQ+Pj4xNikrKGw+Pj4xNikrKGU+Pj4xNikmNjU1MzUpPDwxNnxlJjY1NTM1fWZ1bmN0aW9uIHBhKGYsYil7dmFyIGMsZCxsO2M9KGYuYiY2NTUzNSkrKGIuYiY2NTUzNSk7ZD0oZi5iPj4+MTYpKyhiLmI+Pj4xNikrKGM+Pj4xNik7bD0oZCY2NTUzNSk8PDE2fGMmNjU1MzU7Yz0oZi5hJjY1NTM1KStcclxuKGIuYSY2NTUzNSkrKGQ+Pj4xNik7ZD0oZi5hPj4+MTYpKyhiLmE+Pj4xNikrKGM+Pj4xNik7cmV0dXJuIG5ldyBhKChkJjY1NTM1KTw8MTZ8YyY2NTUzNSxsKX1mdW5jdGlvbiBxYShmLGIsYyxkKXt2YXIgbCxlLGc7bD0oZi5iJjY1NTM1KSsoYi5iJjY1NTM1KSsoYy5iJjY1NTM1KSsoZC5iJjY1NTM1KTtlPShmLmI+Pj4xNikrKGIuYj4+PjE2KSsoYy5iPj4+MTYpKyhkLmI+Pj4xNikrKGw+Pj4xNik7Zz0oZSY2NTUzNSk8PDE2fGwmNjU1MzU7bD0oZi5hJjY1NTM1KSsoYi5hJjY1NTM1KSsoYy5hJjY1NTM1KSsoZC5hJjY1NTM1KSsoZT4+PjE2KTtlPShmLmE+Pj4xNikrKGIuYT4+PjE2KSsoYy5hPj4+MTYpKyhkLmE+Pj4xNikrKGw+Pj4xNik7cmV0dXJuIG5ldyBhKChlJjY1NTM1KTw8MTZ8bCY2NTUzNSxnKX1mdW5jdGlvbiByYShmLGIsYyxkLGwpe3ZhciBlLGcscDtlPShmLmImNjU1MzUpKyhiLmImNjU1MzUpKyhjLmImNjU1MzUpKyhkLmImNjU1MzUpKyhsLmImNjU1MzUpO2c9XHJcbihmLmI+Pj4xNikrKGIuYj4+PjE2KSsoYy5iPj4+MTYpKyhkLmI+Pj4xNikrKGwuYj4+PjE2KSsoZT4+PjE2KTtwPShnJjY1NTM1KTw8MTZ8ZSY2NTUzNTtlPShmLmEmNjU1MzUpKyhiLmEmNjU1MzUpKyhjLmEmNjU1MzUpKyhkLmEmNjU1MzUpKyhsLmEmNjU1MzUpKyhnPj4+MTYpO2c9KGYuYT4+PjE2KSsoYi5hPj4+MTYpKyhjLmE+Pj4xNikrKGQuYT4+PjE2KSsobC5hPj4+MTYpKyhlPj4+MTYpO3JldHVybiBuZXcgYSgoZyY2NTUzNSk8PDE2fGUmNjU1MzUscCl9ZnVuY3Rpb24gQShmKXt2YXIgYj0wLGM9MCxkO2ZvcihkPTA7ZDxhcmd1bWVudHMubGVuZ3RoO2QrPTEpYl49YXJndW1lbnRzW2RdLmIsY149YXJndW1lbnRzW2RdLmE7cmV0dXJuIG5ldyBhKGMsYil9ZnVuY3Rpb24gQihmKXt2YXIgYj1bXSxjO2lmKFwiU0hBLTFcIj09PWYpYj1bMTczMjU4NDE5Myw0MDIzMjMzNDE3LDI1NjIzODMxMDIsMjcxNzMzODc4LDMyODUzNzc1MjBdO2Vsc2UgaWYoMD09PWYubGFzdEluZGV4T2YoXCJTSEEtXCIsXHJcbjApKXN3aXRjaChiPVszMjM4MzcxMDMyLDkxNDE1MDY2Myw4MTI3MDI5OTksNDE0NDkxMjY5Nyw0MjkwNzc1ODU3LDE3NTA2MDMwMjUsMTY5NDA3NjgzOSwzMjA0MDc1NDI4XSxjPVsxNzc5MDMzNzAzLDMxNDQxMzQyNzcsMTAxMzkwNDI0MiwyNzczNDgwNzYyLDEzNTk4OTMxMTksMjYwMDgyMjkyNCw1Mjg3MzQ2MzUsMTU0MTQ1OTIyNV0sZil7Y2FzZSBcIlNIQS0yMjRcIjpicmVhaztjYXNlIFwiU0hBLTI1NlwiOmI9YzticmVhaztjYXNlIFwiU0hBLTM4NFwiOmI9W25ldyBhKDM0MTgwNzAzNjUsYlswXSksbmV3IGEoMTY1NDI3MDI1MCxiWzFdKSxuZXcgYSgyNDM4NTI5MzcwLGJbMl0pLG5ldyBhKDM1NTQ2MjM2MCxiWzNdKSxuZXcgYSgxNzMxNDA1NDE1LGJbNF0pLG5ldyBhKDQxMDQ4ODg1ODk1LGJbNV0pLG5ldyBhKDM2NzUwMDg1MjUsYls2XSksbmV3IGEoMTIwMzA2MjgxMyxiWzddKV07YnJlYWs7Y2FzZSBcIlNIQS01MTJcIjpiPVtuZXcgYShjWzBdLDQwODkyMzU3MjApLG5ldyBhKGNbMV0sXHJcbjIyMjc4NzM1OTUpLG5ldyBhKGNbMl0sNDI3MTE3NTcyMyksbmV3IGEoY1szXSwxNTk1NzUwMTI5KSxuZXcgYShjWzRdLDI5MTc1NjUxMzcpLG5ldyBhKGNbNV0sNzI1NTExMTk5KSxuZXcgYShjWzZdLDQyMTUzODk1NDcpLG5ldyBhKGNbN10sMzI3MDMzMjA5KV07YnJlYWs7ZGVmYXVsdDp0aHJvdyBFcnJvcihcIlVua25vd24gU0hBIHZhcmlhbnRcIik7fWVsc2UgaWYoMD09PWYubGFzdEluZGV4T2YoXCJTSEEzLVwiLDApfHwwPT09Zi5sYXN0SW5kZXhPZihcIlNIQUtFXCIsMCkpZm9yKGY9MDs1PmY7Zis9MSliW2ZdPVtuZXcgYSgwLDApLG5ldyBhKDAsMCksbmV3IGEoMCwwKSxuZXcgYSgwLDApLG5ldyBhKDAsMCldO2Vsc2UgdGhyb3cgRXJyb3IoXCJObyBTSEEgdmFyaWFudHMgc3VwcG9ydGVkXCIpO3JldHVybiBifWZ1bmN0aW9uIEsoYSxiKXt2YXIgYz1bXSxkLGUsayxnLHAsbixoO2Q9YlswXTtlPWJbMV07az1iWzJdO2c9YlszXTtwPWJbNF07Zm9yKGg9MDs4MD5oO2grPTEpY1toXT0xNj5oP1xyXG5hW2hdOnkoY1toLTNdXmNbaC04XV5jW2gtMTRdXmNbaC0xNl0sMSksbj0yMD5oP0goeShkLDUpLGUma15+ZSZnLHAsMTUxODUwMDI0OSxjW2hdKTo0MD5oP0goeShkLDUpLGVea15nLHAsMTg1OTc3NTM5MyxjW2hdKTo2MD5oP0goeShkLDUpLFQoZSxrLGcpLHAsMjQwMDk1OTcwOCxjW2hdKTpIKHkoZCw1KSxlXmteZyxwLDMzOTU0Njk3ODIsY1toXSkscD1nLGc9ayxrPXkoZSwzMCksZT1kLGQ9bjtiWzBdPUcoZCxiWzBdKTtiWzFdPUcoZSxiWzFdKTtiWzJdPUcoayxiWzJdKTtiWzNdPUcoZyxiWzNdKTtiWzRdPUcocCxiWzRdKTtyZXR1cm4gYn1mdW5jdGlvbiBZKGEsYixjLGQpe3ZhciBlO2ZvcihlPShiKzY1Pj4+OTw8NCkrMTU7YS5sZW5ndGg8PWU7KWEucHVzaCgwKTthW2I+Pj41XXw9MTI4PDwyNC1iJTMyO2IrPWM7YVtlXT1iJjQyOTQ5NjcyOTU7YVtlLTFdPWIvNDI5NDk2NzI5NnwwO2I9YS5sZW5ndGg7Zm9yKGU9MDtlPGI7ZSs9MTYpZD1LKGEuc2xpY2UoZSxlKzE2KSxkKTtcclxucmV0dXJuIGR9ZnVuY3Rpb24gTChmLGIsYyl7dmFyIGQsbCxrLGcscCxuLGgsbSxyLHQscSx2LHUsdyx4LHkseixGLEEsQixDLEQsRT1bXSxJO2lmKFwiU0hBLTIyNFwiPT09Y3x8XCJTSEEtMjU2XCI9PT1jKXQ9NjQsdj0xLEQ9TnVtYmVyLHU9Ryx3PW9hLHg9SCx5PWthLHo9bWEsRj1nYSxBPWlhLEM9VCxCPWRhLEk9ZTtlbHNlIGlmKFwiU0hBLTM4NFwiPT09Y3x8XCJTSEEtNTEyXCI9PT1jKXQ9ODAsdj0yLEQ9YSx1PXBhLHc9cWEseD1yYSx5PWxhLHo9bmEsRj1oYSxBPWphLEM9ZmEsQj1lYSxJPVU7ZWxzZSB0aHJvdyBFcnJvcihcIlVuZXhwZWN0ZWQgZXJyb3IgaW4gU0hBLTIgaW1wbGVtZW50YXRpb25cIik7Yz1iWzBdO2Q9YlsxXTtsPWJbMl07az1iWzNdO2c9Yls0XTtwPWJbNV07bj1iWzZdO2g9Yls3XTtmb3IocT0wO3E8dDtxKz0xKTE2PnE/KHI9cSp2LG09Zi5sZW5ndGg8PXI/MDpmW3JdLHI9Zi5sZW5ndGg8PXIrMT8wOmZbcisxXSxFW3FdPW5ldyBEKG0scikpOkVbcV09dyh6KEVbcS0yXSksXHJcbkVbcS03XSx5KEVbcS0xNV0pLEVbcS0xNl0pLG09eChoLEEoZyksQihnLHAsbiksSVtxXSxFW3FdKSxyPXUoRihjKSxDKGMsZCxsKSksaD1uLG49cCxwPWcsZz11KGssbSksaz1sLGw9ZCxkPWMsYz11KG0scik7YlswXT11KGMsYlswXSk7YlsxXT11KGQsYlsxXSk7YlsyXT11KGwsYlsyXSk7YlszXT11KGssYlszXSk7Yls0XT11KGcsYls0XSk7Yls1XT11KHAsYls1XSk7Yls2XT11KG4sYls2XSk7Yls3XT11KGgsYls3XSk7cmV0dXJuIGJ9ZnVuY3Rpb24gRChmLGIpe3ZhciBjLGQsZSxrLGc9W10scD1bXTtpZihudWxsIT09Zilmb3IoZD0wO2Q8Zi5sZW5ndGg7ZCs9MiliWyhkPj4+MSklNV1bKGQ+Pj4xKS81fDBdPUEoYlsoZD4+PjEpJTVdWyhkPj4+MSkvNXwwXSxuZXcgYSgoZltkKzFdJjI1NSk8PDI0fChmW2QrMV0mNjUyODApPDw4fChmW2QrMV0mMTY3MTE2ODApPj4+OHxmW2QrMV0+Pj4yNCwoZltkXSYyNTUpPDwyNHwoZltkXSY2NTI4MCk8PDh8KGZbZF0mMTY3MTE2ODApPj4+OHxcclxuZltkXT4+PjI0KSk7Zm9yKGM9MDsyND5jO2MrPTEpe2s9QihcIlNIQTMtXCIpO2ZvcihkPTA7NT5kO2QrPTEpZ1tkXT1BKGJbZF1bMF0sYltkXVsxXSxiW2RdWzJdLGJbZF1bM10sYltkXVs0XSk7Zm9yKGQ9MDs1PmQ7ZCs9MSlwW2RdPUEoZ1soZCs0KSU1XSxSKGdbKGQrMSklNV0sMSkpO2ZvcihkPTA7NT5kO2QrPTEpZm9yKGU9MDs1PmU7ZSs9MSliW2RdW2VdPUEoYltkXVtlXSxwW2RdKTtmb3IoZD0wOzU+ZDtkKz0xKWZvcihlPTA7NT5lO2UrPTEpa1tlXVsoMipkKzMqZSklNV09UihiW2RdW2VdLFZbZF1bZV0pO2ZvcihkPTA7NT5kO2QrPTEpZm9yKGU9MDs1PmU7ZSs9MSliW2RdW2VdPUEoa1tkXVtlXSxuZXcgYSh+a1soZCsxKSU1XVtlXS5hJmtbKGQrMiklNV1bZV0uYSx+a1soZCsxKSU1XVtlXS5iJmtbKGQrMiklNV1bZV0uYikpO2JbMF1bMF09QShiWzBdWzBdLFdbY10pfXJldHVybiBifXZhciBlLFUsVixXO2U9WzExMTYzNTI0MDgsMTg5OTQ0NzQ0MSwzMDQ5MzIzNDcxLDM5MjEwMDk1NzMsXHJcbjk2MTk4NzE2MywxNTA4OTcwOTkzLDI0NTM2MzU3NDgsMjg3MDc2MzIyMSwzNjI0MzgxMDgwLDMxMDU5ODQwMSw2MDcyMjUyNzgsMTQyNjg4MTk4NywxOTI1MDc4Mzg4LDIxNjIwNzgyMDYsMjYxNDg4ODEwMywzMjQ4MjIyNTgwLDM4MzUzOTA0MDEsNDAyMjIyNDc3NCwyNjQzNDcwNzgsNjA0ODA3NjI4LDc3MDI1NTk4MywxMjQ5MTUwMTIyLDE1NTUwODE2OTIsMTk5NjA2NDk4NiwyNTU0MjIwODgyLDI4MjE4MzQzNDksMjk1Mjk5NjgwOCwzMjEwMzEzNjcxLDMzMzY1NzE4OTEsMzU4NDUyODcxMSwxMTM5MjY5OTMsMzM4MjQxODk1LDY2NjMwNzIwNSw3NzM1Mjk5MTIsMTI5NDc1NzM3MiwxMzk2MTgyMjkxLDE2OTUxODM3MDAsMTk4NjY2MTA1MSwyMTc3MDI2MzUwLDI0NTY5NTYwMzcsMjczMDQ4NTkyMSwyODIwMzAyNDExLDMyNTk3MzA4MDAsMzM0NTc2NDc3MSwzNTE2MDY1ODE3LDM2MDAzNTI4MDQsNDA5NDU3MTkwOSwyNzU0MjMzNDQsNDMwMjI3NzM0LDUwNjk0ODYxNiw2NTkwNjA1NTYsXHJcbjg4Mzk5Nzg3Nyw5NTgxMzk1NzEsMTMyMjgyMjIxOCwxNTM3MDAyMDYzLDE3NDc4NzM3NzksMTk1NTU2MjIyMiwyMDI0MTA0ODE1LDIyMjc3MzA0NTIsMjM2MTg1MjQyNCwyNDI4NDM2NDc0LDI3NTY3MzQxODcsMzIwNDAzMTQ3OSwzMzI5MzI1Mjk4XTtVPVtuZXcgYShlWzBdLDM2MDk3Njc0NTgpLG5ldyBhKGVbMV0sNjAyODkxNzI1KSxuZXcgYShlWzJdLDM5NjQ0ODQzOTkpLG5ldyBhKGVbM10sMjE3MzI5NTU0OCksbmV3IGEoZVs0XSw0MDgxNjI4NDcyKSxuZXcgYShlWzVdLDMwNTM4MzQyNjUpLG5ldyBhKGVbNl0sMjkzNzY3MTU3OSksbmV3IGEoZVs3XSwzNjY0NjA5NTYwKSxuZXcgYShlWzhdLDI3MzQ4ODMzOTQpLG5ldyBhKGVbOV0sMTE2NDk5NjU0MiksbmV3IGEoZVsxMF0sMTMyMzYxMDc2NCksbmV3IGEoZVsxMV0sMzU5MDMwNDk5NCksbmV3IGEoZVsxMl0sNDA2ODE4MjM4MyksbmV3IGEoZVsxM10sOTkxMzM2MTEzKSxuZXcgYShlWzE0XSw2MzM4MDMzMTcpLG5ldyBhKGVbMTVdLFxyXG4zNDc5Nzc0ODY4KSxuZXcgYShlWzE2XSwyNjY2NjEzNDU4KSxuZXcgYShlWzE3XSw5NDQ3MTExMzkpLG5ldyBhKGVbMThdLDIzNDEyNjI3NzMpLG5ldyBhKGVbMTldLDIwMDc4MDA5MzMpLG5ldyBhKGVbMjBdLDE0OTU5OTA5MDEpLG5ldyBhKGVbMjFdLDE4NTY0MzEyMzUpLG5ldyBhKGVbMjJdLDMxNzUyMTgxMzIpLG5ldyBhKGVbMjNdLDIxOTg5NTA4MzcpLG5ldyBhKGVbMjRdLDM5OTk3MTkzMzkpLG5ldyBhKGVbMjVdLDc2Njc4NDAxNiksbmV3IGEoZVsyNl0sMjU2NjU5NDg3OSksbmV3IGEoZVsyN10sMzIwMzMzNzk1NiksbmV3IGEoZVsyOF0sMTAzNDQ1NzAyNiksbmV3IGEoZVsyOV0sMjQ2Njk0ODkwMSksbmV3IGEoZVszMF0sMzc1ODMyNjM4MyksbmV3IGEoZVszMV0sMTY4NzE3OTM2KSxuZXcgYShlWzMyXSwxMTg4MTc5OTY0KSxuZXcgYShlWzMzXSwxNTQ2MDQ1NzM0KSxuZXcgYShlWzM0XSwxNTIyODA1NDg1KSxuZXcgYShlWzM1XSwyNjQzODMzODIzKSxuZXcgYShlWzM2XSxcclxuMjM0MzUyNzM5MCksbmV3IGEoZVszN10sMTAxNDQ3NzQ4MCksbmV3IGEoZVszOF0sMTIwNjc1OTE0MiksbmV3IGEoZVszOV0sMzQ0MDc3NjI3KSxuZXcgYShlWzQwXSwxMjkwODYzNDYwKSxuZXcgYShlWzQxXSwzMTU4NDU0MjczKSxuZXcgYShlWzQyXSwzNTA1OTUyNjU3KSxuZXcgYShlWzQzXSwxMDYyMTcwMDgpLG5ldyBhKGVbNDRdLDM2MDYwMDgzNDQpLG5ldyBhKGVbNDVdLDE0MzI3MjU3NzYpLG5ldyBhKGVbNDZdLDE0NjcwMzE1OTQpLG5ldyBhKGVbNDddLDg1MTE2OTcyMCksbmV3IGEoZVs0OF0sMzEwMDgyMzc1MiksbmV3IGEoZVs0OV0sMTM2MzI1ODE5NSksbmV3IGEoZVs1MF0sMzc1MDY4NTU5MyksbmV3IGEoZVs1MV0sMzc4NTA1MDI4MCksbmV3IGEoZVs1Ml0sMzMxODMwNzQyNyksbmV3IGEoZVs1M10sMzgxMjcyMzQwMyksbmV3IGEoZVs1NF0sMjAwMzAzNDk5NSksbmV3IGEoZVs1NV0sMzYwMjAzNjg5OSksbmV3IGEoZVs1Nl0sMTU3NTk5MDAxMiksbmV3IGEoZVs1N10sXHJcbjExMjU1OTI5MjgpLG5ldyBhKGVbNThdLDI3MTY5MDQzMDYpLG5ldyBhKGVbNTldLDQ0Mjc3NjA0NCksbmV3IGEoZVs2MF0sNTkzNjk4MzQ0KSxuZXcgYShlWzYxXSwzNzMzMTEwMjQ5KSxuZXcgYShlWzYyXSwyOTk5MzUxNTczKSxuZXcgYShlWzYzXSwzODE1OTIwNDI3KSxuZXcgYSgzMzkxNTY5NjE0LDM5MjgzODM5MDApLG5ldyBhKDM1MTUyNjcyNzEsNTY2MjgwNzExKSxuZXcgYSgzOTQwMTg3NjA2LDM0NTQwNjk1MzQpLG5ldyBhKDQxMTg2MzAyNzEsNDAwMDIzOTk5MiksbmV3IGEoMTE2NDE4NDc0LDE5MTQxMzg1NTQpLG5ldyBhKDE3NDI5MjQyMSwyNzMxMDU1MjcwKSxuZXcgYSgyODkzODAzNTYsMzIwMzk5MzAwNiksbmV3IGEoNDYwMzkzMjY5LDMyMDYyMDMxNSksbmV3IGEoNjg1NDcxNzMzLDU4NzQ5NjgzNiksbmV3IGEoODUyMTQyOTcxLDEwODY3OTI4NTEpLG5ldyBhKDEwMTcwMzYyOTgsMzY1NTQzMTAwKSxuZXcgYSgxMTI2MDAwNTgwLDI2MTgyOTc2NzYpLG5ldyBhKDEyODgwMzM0NzAsXHJcbjM0MDk4NTUxNTgpLG5ldyBhKDE1MDE1MDU5NDgsNDIzNDUwOTg2NiksbmV3IGEoMTYwNzE2NzkxNSw5ODcxNjc0NjgpLG5ldyBhKDE4MTY0MDIzMTYsMTI0NjE4OTU5MSldO1c9W25ldyBhKDAsMSksbmV3IGEoMCwzMjg5OCksbmV3IGEoMjE0NzQ4MzY0OCwzMjkwNiksbmV3IGEoMjE0NzQ4MzY0OCwyMTQ3NTE2NDE2KSxuZXcgYSgwLDMyOTA3KSxuZXcgYSgwLDIxNDc0ODM2NDkpLG5ldyBhKDIxNDc0ODM2NDgsMjE0NzUxNjU0NSksbmV3IGEoMjE0NzQ4MzY0OCwzMjc3NyksbmV3IGEoMCwxMzgpLG5ldyBhKDAsMTM2KSxuZXcgYSgwLDIxNDc1MTY0MjUpLG5ldyBhKDAsMjE0NzQ4MzY1OCksbmV3IGEoMCwyMTQ3NTE2NTU1KSxuZXcgYSgyMTQ3NDgzNjQ4LDEzOSksbmV3IGEoMjE0NzQ4MzY0OCwzMjkwNSksbmV3IGEoMjE0NzQ4MzY0OCwzMjc3MSksbmV3IGEoMjE0NzQ4MzY0OCwzMjc3MCksbmV3IGEoMjE0NzQ4MzY0OCwxMjgpLG5ldyBhKDAsMzI3NzgpLG5ldyBhKDIxNDc0ODM2NDgsXHJcbjIxNDc0ODM2NTgpLG5ldyBhKDIxNDc0ODM2NDgsMjE0NzUxNjU0NSksbmV3IGEoMjE0NzQ4MzY0OCwzMjg5NiksbmV3IGEoMCwyMTQ3NDgzNjQ5KSxuZXcgYSgyMTQ3NDgzNjQ4LDIxNDc1MTY0MjQpXTtWPVtbMCwzNiwzLDQxLDE4XSxbMSw0NCwxMCw0NSwyXSxbNjIsNiw0MywxNSw2MV0sWzI4LDU1LDI1LDIxLDU2XSxbMjcsMjAsMzksOCwxNF1dO1wiZnVuY3Rpb25cIj09PXR5cGVvZiBkZWZpbmUmJmRlZmluZS5hbWQ/ZGVmaW5lKGZ1bmN0aW9uKCl7cmV0dXJuIEN9KTpcInVuZGVmaW5lZFwiIT09dHlwZW9mIGV4cG9ydHM/KFwidW5kZWZpbmVkXCIhPT10eXBlb2YgbW9kdWxlJiZtb2R1bGUuZXhwb3J0cyYmKG1vZHVsZS5leHBvcnRzPUMpLGV4cG9ydHM9Qyk6WC5qc1NIQT1DfSkodGhpcyk7XHJcbiIsIi8qXHJcbiBBbmd1bGFySlMgdjEuNS4wXHJcbiAoYykgMjAxMC0yMDE2IEdvb2dsZSwgSW5jLiBodHRwOi8vYW5ndWxhcmpzLm9yZ1xyXG4gTGljZW5zZTogTUlUXHJcbiovXHJcbihmdW5jdGlvbihwLGMsbil7J3VzZSBzdHJpY3QnO2Z1bmN0aW9uIGwoYixhLGcpe3ZhciBkPWcuYmFzZUhyZWYoKSxrPWJbMF07cmV0dXJuIGZ1bmN0aW9uKGIsZSxmKXt2YXIgZyxoO2Y9Znx8e307aD1mLmV4cGlyZXM7Zz1jLmlzRGVmaW5lZChmLnBhdGgpP2YucGF0aDpkO2MuaXNVbmRlZmluZWQoZSkmJihoPVwiVGh1LCAwMSBKYW4gMTk3MCAwMDowMDowMCBHTVRcIixlPVwiXCIpO2MuaXNTdHJpbmcoaCkmJihoPW5ldyBEYXRlKGgpKTtlPWVuY29kZVVSSUNvbXBvbmVudChiKStcIj1cIitlbmNvZGVVUklDb21wb25lbnQoZSk7ZT1lKyhnP1wiO3BhdGg9XCIrZzpcIlwiKSsoZi5kb21haW4/XCI7ZG9tYWluPVwiK2YuZG9tYWluOlwiXCIpO2UrPWg/XCI7ZXhwaXJlcz1cIitoLnRvVVRDU3RyaW5nKCk6XCJcIjtlKz1mLnNlY3VyZT9cIjtzZWN1cmVcIjpcIlwiO2Y9ZS5sZW5ndGgrMTs0MDk2PGYmJmEud2FybihcIkNvb2tpZSAnXCIrYitcIicgcG9zc2libHkgbm90IHNldCBvciBvdmVyZmxvd2VkIGJlY2F1c2UgaXQgd2FzIHRvbyBsYXJnZSAoXCIrXHJcbmYrXCIgPiA0MDk2IGJ5dGVzKSFcIik7ay5jb29raWU9ZX19Yy5tb2R1bGUoXCJuZ0Nvb2tpZXNcIixbXCJuZ1wiXSkucHJvdmlkZXIoXCIkY29va2llc1wiLFtmdW5jdGlvbigpe3ZhciBiPXRoaXMuZGVmYXVsdHM9e307dGhpcy4kZ2V0PVtcIiQkY29va2llUmVhZGVyXCIsXCIkJGNvb2tpZVdyaXRlclwiLGZ1bmN0aW9uKGEsZyl7cmV0dXJue2dldDpmdW5jdGlvbihkKXtyZXR1cm4gYSgpW2RdfSxnZXRPYmplY3Q6ZnVuY3Rpb24oZCl7cmV0dXJuKGQ9dGhpcy5nZXQoZCkpP2MuZnJvbUpzb24oZCk6ZH0sZ2V0QWxsOmZ1bmN0aW9uKCl7cmV0dXJuIGEoKX0scHV0OmZ1bmN0aW9uKGQsYSxtKXtnKGQsYSxtP2MuZXh0ZW5kKHt9LGIsbSk6Yil9LHB1dE9iamVjdDpmdW5jdGlvbihkLGIsYSl7dGhpcy5wdXQoZCxjLnRvSnNvbihiKSxhKX0scmVtb3ZlOmZ1bmN0aW9uKGEsayl7ZyhhLG4saz9jLmV4dGVuZCh7fSxiLGspOmIpfX19XX1dKTtjLm1vZHVsZShcIm5nQ29va2llc1wiKS5mYWN0b3J5KFwiJGNvb2tpZVN0b3JlXCIsXHJcbltcIiRjb29raWVzXCIsZnVuY3Rpb24oYil7cmV0dXJue2dldDpmdW5jdGlvbihhKXtyZXR1cm4gYi5nZXRPYmplY3QoYSl9LHB1dDpmdW5jdGlvbihhLGMpe2IucHV0T2JqZWN0KGEsYyl9LHJlbW92ZTpmdW5jdGlvbihhKXtiLnJlbW92ZShhKX19fV0pO2wuJGluamVjdD1bXCIkZG9jdW1lbnRcIixcIiRsb2dcIixcIiRicm93c2VyXCJdO2MubW9kdWxlKFwibmdDb29raWVzXCIpLnByb3ZpZGVyKFwiJCRjb29raWVXcml0ZXJcIixmdW5jdGlvbigpe3RoaXMuJGdldD1sfSl9KSh3aW5kb3csd2luZG93LmFuZ3VsYXIpO1xyXG4vLyMgc291cmNlTWFwcGluZ1VSTD1hbmd1bGFyLWNvb2tpZXMubWluLmpzLm1hcFxyXG4iLCIvKipcclxuICogQGxpY2Vuc2UgQW5ndWxhckpTIHYxLjMuMFxyXG4gKiAoYykgMjAxMC0yMDE0IEdvb2dsZSwgSW5jLiBodHRwOi8vYW5ndWxhcmpzLm9yZ1xyXG4gKiBMaWNlbnNlOiBNSVRcclxuICovXHJcbihmdW5jdGlvbih3aW5kb3csIGFuZ3VsYXIsIHVuZGVmaW5lZCkgeyd1c2Ugc3RyaWN0JztcclxuXHJcbi8qKlxyXG4gKiBAbmdkb2MgbW9kdWxlXHJcbiAqIEBuYW1lIG5nUm91dGVcclxuICogQGRlc2NyaXB0aW9uXHJcbiAqXHJcbiAqICMgbmdSb3V0ZVxyXG4gKlxyXG4gKiBUaGUgYG5nUm91dGVgIG1vZHVsZSBwcm92aWRlcyByb3V0aW5nIGFuZCBkZWVwbGlua2luZyBzZXJ2aWNlcyBhbmQgZGlyZWN0aXZlcyBmb3IgYW5ndWxhciBhcHBzLlxyXG4gKlxyXG4gKiAjIyBFeGFtcGxlXHJcbiAqIFNlZSB7QGxpbmsgbmdSb3V0ZS4kcm91dGUjZXhhbXBsZSAkcm91dGV9IGZvciBhbiBleGFtcGxlIG9mIGNvbmZpZ3VyaW5nIGFuZCB1c2luZyBgbmdSb3V0ZWAuXHJcbiAqXHJcbiAqXHJcbiAqIDxkaXYgZG9jLW1vZHVsZS1jb21wb25lbnRzPVwibmdSb3V0ZVwiPjwvZGl2PlxyXG4gKi9cclxuIC8qIGdsb2JhbCAtbmdSb3V0ZU1vZHVsZSAqL1xyXG52YXIgbmdSb3V0ZU1vZHVsZSA9IGFuZ3VsYXIubW9kdWxlKCduZ1JvdXRlJywgWyduZyddKS5cclxuICAgICAgICAgICAgICAgICAgICAgICAgcHJvdmlkZXIoJyRyb3V0ZScsICRSb3V0ZVByb3ZpZGVyKSxcclxuICAgICRyb3V0ZU1pbkVyciA9IGFuZ3VsYXIuJCRtaW5FcnIoJ25nUm91dGUnKTtcclxuXHJcbi8qKlxyXG4gKiBAbmdkb2MgcHJvdmlkZXJcclxuICogQG5hbWUgJHJvdXRlUHJvdmlkZXJcclxuICpcclxuICogQGRlc2NyaXB0aW9uXHJcbiAqXHJcbiAqIFVzZWQgZm9yIGNvbmZpZ3VyaW5nIHJvdXRlcy5cclxuICpcclxuICogIyMgRXhhbXBsZVxyXG4gKiBTZWUge0BsaW5rIG5nUm91dGUuJHJvdXRlI2V4YW1wbGUgJHJvdXRlfSBmb3IgYW4gZXhhbXBsZSBvZiBjb25maWd1cmluZyBhbmQgdXNpbmcgYG5nUm91dGVgLlxyXG4gKlxyXG4gKiAjIyBEZXBlbmRlbmNpZXNcclxuICogUmVxdWlyZXMgdGhlIHtAbGluayBuZ1JvdXRlIGBuZ1JvdXRlYH0gbW9kdWxlIHRvIGJlIGluc3RhbGxlZC5cclxuICovXHJcbmZ1bmN0aW9uICRSb3V0ZVByb3ZpZGVyKCl7XHJcbiAgZnVuY3Rpb24gaW5oZXJpdChwYXJlbnQsIGV4dHJhKSB7XHJcbiAgICByZXR1cm4gYW5ndWxhci5leHRlbmQobmV3IChhbmd1bGFyLmV4dGVuZChmdW5jdGlvbigpIHt9LCB7cHJvdG90eXBlOnBhcmVudH0pKSgpLCBleHRyYSk7XHJcbiAgfVxyXG5cclxuICB2YXIgcm91dGVzID0ge307XHJcblxyXG4gIC8qKlxyXG4gICAqIEBuZ2RvYyBtZXRob2RcclxuICAgKiBAbmFtZSAkcm91dGVQcm92aWRlciN3aGVuXHJcbiAgICpcclxuICAgKiBAcGFyYW0ge3N0cmluZ30gcGF0aCBSb3V0ZSBwYXRoIChtYXRjaGVkIGFnYWluc3QgYCRsb2NhdGlvbi5wYXRoYCkuIElmIGAkbG9jYXRpb24ucGF0aGBcclxuICAgKiAgICBjb250YWlucyByZWR1bmRhbnQgdHJhaWxpbmcgc2xhc2ggb3IgaXMgbWlzc2luZyBvbmUsIHRoZSByb3V0ZSB3aWxsIHN0aWxsIG1hdGNoIGFuZCB0aGVcclxuICAgKiAgICBgJGxvY2F0aW9uLnBhdGhgIHdpbGwgYmUgdXBkYXRlZCB0byBhZGQgb3IgZHJvcCB0aGUgdHJhaWxpbmcgc2xhc2ggdG8gZXhhY3RseSBtYXRjaCB0aGVcclxuICAgKiAgICByb3V0ZSBkZWZpbml0aW9uLlxyXG4gICAqXHJcbiAgICogICAgKiBgcGF0aGAgY2FuIGNvbnRhaW4gbmFtZWQgZ3JvdXBzIHN0YXJ0aW5nIHdpdGggYSBjb2xvbjogZS5nLiBgOm5hbWVgLiBBbGwgY2hhcmFjdGVycyB1cFxyXG4gICAqICAgICAgICB0byB0aGUgbmV4dCBzbGFzaCBhcmUgbWF0Y2hlZCBhbmQgc3RvcmVkIGluIGAkcm91dGVQYXJhbXNgIHVuZGVyIHRoZSBnaXZlbiBgbmFtZWBcclxuICAgKiAgICAgICAgd2hlbiB0aGUgcm91dGUgbWF0Y2hlcy5cclxuICAgKiAgICAqIGBwYXRoYCBjYW4gY29udGFpbiBuYW1lZCBncm91cHMgc3RhcnRpbmcgd2l0aCBhIGNvbG9uIGFuZCBlbmRpbmcgd2l0aCBhIHN0YXI6XHJcbiAgICogICAgICAgIGUuZy5gOm5hbWUqYC4gQWxsIGNoYXJhY3RlcnMgYXJlIGVhZ2VybHkgc3RvcmVkIGluIGAkcm91dGVQYXJhbXNgIHVuZGVyIHRoZSBnaXZlbiBgbmFtZWBcclxuICAgKiAgICAgICAgd2hlbiB0aGUgcm91dGUgbWF0Y2hlcy5cclxuICAgKiAgICAqIGBwYXRoYCBjYW4gY29udGFpbiBvcHRpb25hbCBuYW1lZCBncm91cHMgd2l0aCBhIHF1ZXN0aW9uIG1hcms6IGUuZy5gOm5hbWU/YC5cclxuICAgKlxyXG4gICAqICAgIEZvciBleGFtcGxlLCByb3V0ZXMgbGlrZSBgL2NvbG9yLzpjb2xvci9sYXJnZWNvZGUvOmxhcmdlY29kZSpcXC9lZGl0YCB3aWxsIG1hdGNoXHJcbiAgICogICAgYC9jb2xvci9icm93bi9sYXJnZWNvZGUvY29kZS93aXRoL3NsYXNoZXMvZWRpdGAgYW5kIGV4dHJhY3Q6XHJcbiAgICpcclxuICAgKiAgICAqIGBjb2xvcjogYnJvd25gXHJcbiAgICogICAgKiBgbGFyZ2Vjb2RlOiBjb2RlL3dpdGgvc2xhc2hlc2AuXHJcbiAgICpcclxuICAgKlxyXG4gICAqIEBwYXJhbSB7T2JqZWN0fSByb3V0ZSBNYXBwaW5nIGluZm9ybWF0aW9uIHRvIGJlIGFzc2lnbmVkIHRvIGAkcm91dGUuY3VycmVudGAgb24gcm91dGVcclxuICAgKiAgICBtYXRjaC5cclxuICAgKlxyXG4gICAqICAgIE9iamVjdCBwcm9wZXJ0aWVzOlxyXG4gICAqXHJcbiAgICogICAgLSBgY29udHJvbGxlcmAg4oCTIGB7KHN0cmluZ3xmdW5jdGlvbigpPX1gIOKAkyBDb250cm9sbGVyIGZuIHRoYXQgc2hvdWxkIGJlIGFzc29jaWF0ZWQgd2l0aFxyXG4gICAqICAgICAgbmV3bHkgY3JlYXRlZCBzY29wZSBvciB0aGUgbmFtZSBvZiBhIHtAbGluayBhbmd1bGFyLk1vZHVsZSNjb250cm9sbGVyIHJlZ2lzdGVyZWRcclxuICAgKiAgICAgIGNvbnRyb2xsZXJ9IGlmIHBhc3NlZCBhcyBhIHN0cmluZy5cclxuICAgKiAgICAtIGBjb250cm9sbGVyQXNgIOKAkyBge3N0cmluZz19YCDigJMgQSBjb250cm9sbGVyIGFsaWFzIG5hbWUuIElmIHByZXNlbnQgdGhlIGNvbnRyb2xsZXIgd2lsbCBiZVxyXG4gICAqICAgICAgcHVibGlzaGVkIHRvIHNjb3BlIHVuZGVyIHRoZSBgY29udHJvbGxlckFzYCBuYW1lLlxyXG4gICAqICAgIC0gYHRlbXBsYXRlYCDigJMgYHtzdHJpbmc9fGZ1bmN0aW9uKCk9fWAg4oCTIGh0bWwgdGVtcGxhdGUgYXMgYSBzdHJpbmcgb3IgYSBmdW5jdGlvbiB0aGF0XHJcbiAgICogICAgICByZXR1cm5zIGFuIGh0bWwgdGVtcGxhdGUgYXMgYSBzdHJpbmcgd2hpY2ggc2hvdWxkIGJlIHVzZWQgYnkge0BsaW5rXHJcbiAgICogICAgICBuZ1JvdXRlLmRpcmVjdGl2ZTpuZ1ZpZXcgbmdWaWV3fSBvciB7QGxpbmsgbmcuZGlyZWN0aXZlOm5nSW5jbHVkZSBuZ0luY2x1ZGV9IGRpcmVjdGl2ZXMuXHJcbiAgICogICAgICBUaGlzIHByb3BlcnR5IHRha2VzIHByZWNlZGVuY2Ugb3ZlciBgdGVtcGxhdGVVcmxgLlxyXG4gICAqXHJcbiAgICogICAgICBJZiBgdGVtcGxhdGVgIGlzIGEgZnVuY3Rpb24sIGl0IHdpbGwgYmUgY2FsbGVkIHdpdGggdGhlIGZvbGxvd2luZyBwYXJhbWV0ZXJzOlxyXG4gICAqXHJcbiAgICogICAgICAtIGB7QXJyYXkuPE9iamVjdD59YCAtIHJvdXRlIHBhcmFtZXRlcnMgZXh0cmFjdGVkIGZyb20gdGhlIGN1cnJlbnRcclxuICAgKiAgICAgICAgYCRsb2NhdGlvbi5wYXRoKClgIGJ5IGFwcGx5aW5nIHRoZSBjdXJyZW50IHJvdXRlXHJcbiAgICpcclxuICAgKiAgICAtIGB0ZW1wbGF0ZVVybGAg4oCTIGB7c3RyaW5nPXxmdW5jdGlvbigpPX1gIOKAkyBwYXRoIG9yIGZ1bmN0aW9uIHRoYXQgcmV0dXJucyBhIHBhdGggdG8gYW4gaHRtbFxyXG4gICAqICAgICAgdGVtcGxhdGUgdGhhdCBzaG91bGQgYmUgdXNlZCBieSB7QGxpbmsgbmdSb3V0ZS5kaXJlY3RpdmU6bmdWaWV3IG5nVmlld30uXHJcbiAgICpcclxuICAgKiAgICAgIElmIGB0ZW1wbGF0ZVVybGAgaXMgYSBmdW5jdGlvbiwgaXQgd2lsbCBiZSBjYWxsZWQgd2l0aCB0aGUgZm9sbG93aW5nIHBhcmFtZXRlcnM6XHJcbiAgICpcclxuICAgKiAgICAgIC0gYHtBcnJheS48T2JqZWN0Pn1gIC0gcm91dGUgcGFyYW1ldGVycyBleHRyYWN0ZWQgZnJvbSB0aGUgY3VycmVudFxyXG4gICAqICAgICAgICBgJGxvY2F0aW9uLnBhdGgoKWAgYnkgYXBwbHlpbmcgdGhlIGN1cnJlbnQgcm91dGVcclxuICAgKlxyXG4gICAqICAgIC0gYHJlc29sdmVgIC0gYHtPYmplY3QuPHN0cmluZywgZnVuY3Rpb24+PX1gIC0gQW4gb3B0aW9uYWwgbWFwIG9mIGRlcGVuZGVuY2llcyB3aGljaCBzaG91bGRcclxuICAgKiAgICAgIGJlIGluamVjdGVkIGludG8gdGhlIGNvbnRyb2xsZXIuIElmIGFueSBvZiB0aGVzZSBkZXBlbmRlbmNpZXMgYXJlIHByb21pc2VzLCB0aGUgcm91dGVyXHJcbiAgICogICAgICB3aWxsIHdhaXQgZm9yIHRoZW0gYWxsIHRvIGJlIHJlc29sdmVkIG9yIG9uZSB0byBiZSByZWplY3RlZCBiZWZvcmUgdGhlIGNvbnRyb2xsZXIgaXNcclxuICAgKiAgICAgIGluc3RhbnRpYXRlZC5cclxuICAgKiAgICAgIElmIGFsbCB0aGUgcHJvbWlzZXMgYXJlIHJlc29sdmVkIHN1Y2Nlc3NmdWxseSwgdGhlIHZhbHVlcyBvZiB0aGUgcmVzb2x2ZWQgcHJvbWlzZXMgYXJlXHJcbiAgICogICAgICBpbmplY3RlZCBhbmQge0BsaW5rIG5nUm91dGUuJHJvdXRlIyRyb3V0ZUNoYW5nZVN1Y2Nlc3MgJHJvdXRlQ2hhbmdlU3VjY2Vzc30gZXZlbnQgaXNcclxuICAgKiAgICAgIGZpcmVkLiBJZiBhbnkgb2YgdGhlIHByb21pc2VzIGFyZSByZWplY3RlZCB0aGVcclxuICAgKiAgICAgIHtAbGluayBuZ1JvdXRlLiRyb3V0ZSMkcm91dGVDaGFuZ2VFcnJvciAkcm91dGVDaGFuZ2VFcnJvcn0gZXZlbnQgaXMgZmlyZWQuIFRoZSBtYXAgb2JqZWN0XHJcbiAgICogICAgICBpczpcclxuICAgKlxyXG4gICAqICAgICAgLSBga2V5YCDigJMgYHtzdHJpbmd9YDogYSBuYW1lIG9mIGEgZGVwZW5kZW5jeSB0byBiZSBpbmplY3RlZCBpbnRvIHRoZSBjb250cm9sbGVyLlxyXG4gICAqICAgICAgLSBgZmFjdG9yeWAgLSBge3N0cmluZ3xmdW5jdGlvbn1gOiBJZiBgc3RyaW5nYCB0aGVuIGl0IGlzIGFuIGFsaWFzIGZvciBhIHNlcnZpY2UuXHJcbiAgICogICAgICAgIE90aGVyd2lzZSBpZiBmdW5jdGlvbiwgdGhlbiBpdCBpcyB7QGxpbmsgYXV0by4kaW5qZWN0b3IjaW52b2tlIGluamVjdGVkfVxyXG4gICAqICAgICAgICBhbmQgdGhlIHJldHVybiB2YWx1ZSBpcyB0cmVhdGVkIGFzIHRoZSBkZXBlbmRlbmN5LiBJZiB0aGUgcmVzdWx0IGlzIGEgcHJvbWlzZSwgaXQgaXNcclxuICAgKiAgICAgICAgcmVzb2x2ZWQgYmVmb3JlIGl0cyB2YWx1ZSBpcyBpbmplY3RlZCBpbnRvIHRoZSBjb250cm9sbGVyLiBCZSBhd2FyZSB0aGF0XHJcbiAgICogICAgICAgIGBuZ1JvdXRlLiRyb3V0ZVBhcmFtc2Agd2lsbCBzdGlsbCByZWZlciB0byB0aGUgcHJldmlvdXMgcm91dGUgd2l0aGluIHRoZXNlIHJlc29sdmVcclxuICAgKiAgICAgICAgZnVuY3Rpb25zLiAgVXNlIGAkcm91dGUuY3VycmVudC5wYXJhbXNgIHRvIGFjY2VzcyB0aGUgbmV3IHJvdXRlIHBhcmFtZXRlcnMsIGluc3RlYWQuXHJcbiAgICpcclxuICAgKiAgICAtIGByZWRpcmVjdFRvYCDigJMgeyhzdHJpbmd8ZnVuY3Rpb24oKSk9fSDigJMgdmFsdWUgdG8gdXBkYXRlXHJcbiAgICogICAgICB7QGxpbmsgbmcuJGxvY2F0aW9uICRsb2NhdGlvbn0gcGF0aCB3aXRoIGFuZCB0cmlnZ2VyIHJvdXRlIHJlZGlyZWN0aW9uLlxyXG4gICAqXHJcbiAgICogICAgICBJZiBgcmVkaXJlY3RUb2AgaXMgYSBmdW5jdGlvbiwgaXQgd2lsbCBiZSBjYWxsZWQgd2l0aCB0aGUgZm9sbG93aW5nIHBhcmFtZXRlcnM6XHJcbiAgICpcclxuICAgKiAgICAgIC0gYHtPYmplY3QuPHN0cmluZz59YCAtIHJvdXRlIHBhcmFtZXRlcnMgZXh0cmFjdGVkIGZyb20gdGhlIGN1cnJlbnRcclxuICAgKiAgICAgICAgYCRsb2NhdGlvbi5wYXRoKClgIGJ5IGFwcGx5aW5nIHRoZSBjdXJyZW50IHJvdXRlIHRlbXBsYXRlVXJsLlxyXG4gICAqICAgICAgLSBge3N0cmluZ31gIC0gY3VycmVudCBgJGxvY2F0aW9uLnBhdGgoKWBcclxuICAgKiAgICAgIC0gYHtPYmplY3R9YCAtIGN1cnJlbnQgYCRsb2NhdGlvbi5zZWFyY2goKWBcclxuICAgKlxyXG4gICAqICAgICAgVGhlIGN1c3RvbSBgcmVkaXJlY3RUb2AgZnVuY3Rpb24gaXMgZXhwZWN0ZWQgdG8gcmV0dXJuIGEgc3RyaW5nIHdoaWNoIHdpbGwgYmUgdXNlZFxyXG4gICAqICAgICAgdG8gdXBkYXRlIGAkbG9jYXRpb24ucGF0aCgpYCBhbmQgYCRsb2NhdGlvbi5zZWFyY2goKWAuXHJcbiAgICpcclxuICAgKiAgICAtIGBbcmVsb2FkT25TZWFyY2g9dHJ1ZV1gIC0ge2Jvb2xlYW49fSAtIHJlbG9hZCByb3V0ZSB3aGVuIG9ubHkgYCRsb2NhdGlvbi5zZWFyY2goKWBcclxuICAgKiAgICAgIG9yIGAkbG9jYXRpb24uaGFzaCgpYCBjaGFuZ2VzLlxyXG4gICAqXHJcbiAgICogICAgICBJZiB0aGUgb3B0aW9uIGlzIHNldCB0byBgZmFsc2VgIGFuZCB1cmwgaW4gdGhlIGJyb3dzZXIgY2hhbmdlcywgdGhlblxyXG4gICAqICAgICAgYCRyb3V0ZVVwZGF0ZWAgZXZlbnQgaXMgYnJvYWRjYXN0ZWQgb24gdGhlIHJvb3Qgc2NvcGUuXHJcbiAgICpcclxuICAgKiAgICAtIGBbY2FzZUluc2Vuc2l0aXZlTWF0Y2g9ZmFsc2VdYCAtIHtib29sZWFuPX0gLSBtYXRjaCByb3V0ZXMgd2l0aG91dCBiZWluZyBjYXNlIHNlbnNpdGl2ZVxyXG4gICAqXHJcbiAgICogICAgICBJZiB0aGUgb3B0aW9uIGlzIHNldCB0byBgdHJ1ZWAsIHRoZW4gdGhlIHBhcnRpY3VsYXIgcm91dGUgY2FuIGJlIG1hdGNoZWQgd2l0aG91dCBiZWluZ1xyXG4gICAqICAgICAgY2FzZSBzZW5zaXRpdmVcclxuICAgKlxyXG4gICAqIEByZXR1cm5zIHtPYmplY3R9IHNlbGZcclxuICAgKlxyXG4gICAqIEBkZXNjcmlwdGlvblxyXG4gICAqIEFkZHMgYSBuZXcgcm91dGUgZGVmaW5pdGlvbiB0byB0aGUgYCRyb3V0ZWAgc2VydmljZS5cclxuICAgKi9cclxuICB0aGlzLndoZW4gPSBmdW5jdGlvbihwYXRoLCByb3V0ZSkge1xyXG4gICAgcm91dGVzW3BhdGhdID0gYW5ndWxhci5leHRlbmQoXHJcbiAgICAgIHtyZWxvYWRPblNlYXJjaDogdHJ1ZX0sXHJcbiAgICAgIHJvdXRlLFxyXG4gICAgICBwYXRoICYmIHBhdGhSZWdFeHAocGF0aCwgcm91dGUpXHJcbiAgICApO1xyXG5cclxuICAgIC8vIGNyZWF0ZSByZWRpcmVjdGlvbiBmb3IgdHJhaWxpbmcgc2xhc2hlc1xyXG4gICAgaWYgKHBhdGgpIHtcclxuICAgICAgdmFyIHJlZGlyZWN0UGF0aCA9IChwYXRoW3BhdGgubGVuZ3RoLTFdID09ICcvJylcclxuICAgICAgICAgICAgPyBwYXRoLnN1YnN0cigwLCBwYXRoLmxlbmd0aC0xKVxyXG4gICAgICAgICAgICA6IHBhdGggKycvJztcclxuXHJcbiAgICAgIHJvdXRlc1tyZWRpcmVjdFBhdGhdID0gYW5ndWxhci5leHRlbmQoXHJcbiAgICAgICAge3JlZGlyZWN0VG86IHBhdGh9LFxyXG4gICAgICAgIHBhdGhSZWdFeHAocmVkaXJlY3RQYXRoLCByb3V0ZSlcclxuICAgICAgKTtcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gdGhpcztcclxuICB9O1xyXG5cclxuICAgLyoqXHJcbiAgICAqIEBwYXJhbSBwYXRoIHtzdHJpbmd9IHBhdGhcclxuICAgICogQHBhcmFtIG9wdHMge09iamVjdH0gb3B0aW9uc1xyXG4gICAgKiBAcmV0dXJuIHs/T2JqZWN0fVxyXG4gICAgKlxyXG4gICAgKiBAZGVzY3JpcHRpb25cclxuICAgICogTm9ybWFsaXplcyB0aGUgZ2l2ZW4gcGF0aCwgcmV0dXJuaW5nIGEgcmVndWxhciBleHByZXNzaW9uXHJcbiAgICAqIGFuZCB0aGUgb3JpZ2luYWwgcGF0aC5cclxuICAgICpcclxuICAgICogSW5zcGlyZWQgYnkgcGF0aFJleHAgaW4gdmlzaW9ubWVkaWEvZXhwcmVzcy9saWIvdXRpbHMuanMuXHJcbiAgICAqL1xyXG4gIGZ1bmN0aW9uIHBhdGhSZWdFeHAocGF0aCwgb3B0cykge1xyXG4gICAgdmFyIGluc2Vuc2l0aXZlID0gb3B0cy5jYXNlSW5zZW5zaXRpdmVNYXRjaCxcclxuICAgICAgICByZXQgPSB7XHJcbiAgICAgICAgICBvcmlnaW5hbFBhdGg6IHBhdGgsXHJcbiAgICAgICAgICByZWdleHA6IHBhdGhcclxuICAgICAgICB9LFxyXG4gICAgICAgIGtleXMgPSByZXQua2V5cyA9IFtdO1xyXG5cclxuICAgIHBhdGggPSBwYXRoXHJcbiAgICAgIC5yZXBsYWNlKC8oWygpLl0pL2csICdcXFxcJDEnKVxyXG4gICAgICAucmVwbGFjZSgvKFxcLyk/OihcXHcrKShbXFw/XFwqXSk/L2csIGZ1bmN0aW9uKF8sIHNsYXNoLCBrZXksIG9wdGlvbil7XHJcbiAgICAgICAgdmFyIG9wdGlvbmFsID0gb3B0aW9uID09PSAnPycgPyBvcHRpb24gOiBudWxsO1xyXG4gICAgICAgIHZhciBzdGFyID0gb3B0aW9uID09PSAnKicgPyBvcHRpb24gOiBudWxsO1xyXG4gICAgICAgIGtleXMucHVzaCh7IG5hbWU6IGtleSwgb3B0aW9uYWw6ICEhb3B0aW9uYWwgfSk7XHJcbiAgICAgICAgc2xhc2ggPSBzbGFzaCB8fCAnJztcclxuICAgICAgICByZXR1cm4gJydcclxuICAgICAgICAgICsgKG9wdGlvbmFsID8gJycgOiBzbGFzaClcclxuICAgICAgICAgICsgJyg/OidcclxuICAgICAgICAgICsgKG9wdGlvbmFsID8gc2xhc2ggOiAnJylcclxuICAgICAgICAgICsgKHN0YXIgJiYgJyguKz8pJyB8fCAnKFteL10rKScpXHJcbiAgICAgICAgICArIChvcHRpb25hbCB8fCAnJylcclxuICAgICAgICAgICsgJyknXHJcbiAgICAgICAgICArIChvcHRpb25hbCB8fCAnJyk7XHJcbiAgICAgIH0pXHJcbiAgICAgIC5yZXBsYWNlKC8oW1xcLyRcXCpdKS9nLCAnXFxcXCQxJyk7XHJcblxyXG4gICAgcmV0LnJlZ2V4cCA9IG5ldyBSZWdFeHAoJ14nICsgcGF0aCArICckJywgaW5zZW5zaXRpdmUgPyAnaScgOiAnJyk7XHJcbiAgICByZXR1cm4gcmV0O1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogQG5nZG9jIG1ldGhvZFxyXG4gICAqIEBuYW1lICRyb3V0ZVByb3ZpZGVyI290aGVyd2lzZVxyXG4gICAqXHJcbiAgICogQGRlc2NyaXB0aW9uXHJcbiAgICogU2V0cyByb3V0ZSBkZWZpbml0aW9uIHRoYXQgd2lsbCBiZSB1c2VkIG9uIHJvdXRlIGNoYW5nZSB3aGVuIG5vIG90aGVyIHJvdXRlIGRlZmluaXRpb25cclxuICAgKiBpcyBtYXRjaGVkLlxyXG4gICAqXHJcbiAgICogQHBhcmFtIHtPYmplY3R8c3RyaW5nfSBwYXJhbXMgTWFwcGluZyBpbmZvcm1hdGlvbiB0byBiZSBhc3NpZ25lZCB0byBgJHJvdXRlLmN1cnJlbnRgLlxyXG4gICAqIElmIGNhbGxlZCB3aXRoIGEgc3RyaW5nLCB0aGUgdmFsdWUgbWFwcyB0byBgcmVkaXJlY3RUb2AuXHJcbiAgICogQHJldHVybnMge09iamVjdH0gc2VsZlxyXG4gICAqL1xyXG4gIHRoaXMub3RoZXJ3aXNlID0gZnVuY3Rpb24ocGFyYW1zKSB7XHJcbiAgICBpZiAodHlwZW9mIHBhcmFtcyA9PT0gJ3N0cmluZycpIHtcclxuICAgICAgcGFyYW1zID0ge3JlZGlyZWN0VG86IHBhcmFtc307XHJcbiAgICB9XHJcbiAgICB0aGlzLndoZW4obnVsbCwgcGFyYW1zKTtcclxuICAgIHJldHVybiB0aGlzO1xyXG4gIH07XHJcblxyXG5cclxuICB0aGlzLiRnZXQgPSBbJyRyb290U2NvcGUnLFxyXG4gICAgICAgICAgICAgICAnJGxvY2F0aW9uJyxcclxuICAgICAgICAgICAgICAgJyRyb3V0ZVBhcmFtcycsXHJcbiAgICAgICAgICAgICAgICckcScsXHJcbiAgICAgICAgICAgICAgICckaW5qZWN0b3InLFxyXG4gICAgICAgICAgICAgICAnJHRlbXBsYXRlUmVxdWVzdCcsXHJcbiAgICAgICAgICAgICAgICckc2NlJyxcclxuICAgICAgZnVuY3Rpb24oJHJvb3RTY29wZSwgJGxvY2F0aW9uLCAkcm91dGVQYXJhbXMsICRxLCAkaW5qZWN0b3IsICR0ZW1wbGF0ZVJlcXVlc3QsICRzY2UpIHtcclxuXHJcbiAgICAvKipcclxuICAgICAqIEBuZ2RvYyBzZXJ2aWNlXHJcbiAgICAgKiBAbmFtZSAkcm91dGVcclxuICAgICAqIEByZXF1aXJlcyAkbG9jYXRpb25cclxuICAgICAqIEByZXF1aXJlcyAkcm91dGVQYXJhbXNcclxuICAgICAqXHJcbiAgICAgKiBAcHJvcGVydHkge09iamVjdH0gY3VycmVudCBSZWZlcmVuY2UgdG8gdGhlIGN1cnJlbnQgcm91dGUgZGVmaW5pdGlvbi5cclxuICAgICAqIFRoZSByb3V0ZSBkZWZpbml0aW9uIGNvbnRhaW5zOlxyXG4gICAgICpcclxuICAgICAqICAgLSBgY29udHJvbGxlcmA6IFRoZSBjb250cm9sbGVyIGNvbnN0cnVjdG9yIGFzIGRlZmluZSBpbiByb3V0ZSBkZWZpbml0aW9uLlxyXG4gICAgICogICAtIGBsb2NhbHNgOiBBIG1hcCBvZiBsb2NhbHMgd2hpY2ggaXMgdXNlZCBieSB7QGxpbmsgbmcuJGNvbnRyb2xsZXIgJGNvbnRyb2xsZXJ9IHNlcnZpY2UgZm9yXHJcbiAgICAgKiAgICAgY29udHJvbGxlciBpbnN0YW50aWF0aW9uLiBUaGUgYGxvY2Fsc2AgY29udGFpblxyXG4gICAgICogICAgIHRoZSByZXNvbHZlZCB2YWx1ZXMgb2YgdGhlIGByZXNvbHZlYCBtYXAuIEFkZGl0aW9uYWxseSB0aGUgYGxvY2Fsc2AgYWxzbyBjb250YWluOlxyXG4gICAgICpcclxuICAgICAqICAgICAtIGAkc2NvcGVgIC0gVGhlIGN1cnJlbnQgcm91dGUgc2NvcGUuXHJcbiAgICAgKiAgICAgLSBgJHRlbXBsYXRlYCAtIFRoZSBjdXJyZW50IHJvdXRlIHRlbXBsYXRlIEhUTUwuXHJcbiAgICAgKlxyXG4gICAgICogQHByb3BlcnR5IHtPYmplY3R9IHJvdXRlcyBPYmplY3Qgd2l0aCBhbGwgcm91dGUgY29uZmlndXJhdGlvbiBPYmplY3RzIGFzIGl0cyBwcm9wZXJ0aWVzLlxyXG4gICAgICpcclxuICAgICAqIEBkZXNjcmlwdGlvblxyXG4gICAgICogYCRyb3V0ZWAgaXMgdXNlZCBmb3IgZGVlcC1saW5raW5nIFVSTHMgdG8gY29udHJvbGxlcnMgYW5kIHZpZXdzIChIVE1MIHBhcnRpYWxzKS5cclxuICAgICAqIEl0IHdhdGNoZXMgYCRsb2NhdGlvbi51cmwoKWAgYW5kIHRyaWVzIHRvIG1hcCB0aGUgcGF0aCB0byBhbiBleGlzdGluZyByb3V0ZSBkZWZpbml0aW9uLlxyXG4gICAgICpcclxuICAgICAqIFJlcXVpcmVzIHRoZSB7QGxpbmsgbmdSb3V0ZSBgbmdSb3V0ZWB9IG1vZHVsZSB0byBiZSBpbnN0YWxsZWQuXHJcbiAgICAgKlxyXG4gICAgICogWW91IGNhbiBkZWZpbmUgcm91dGVzIHRocm91Z2gge0BsaW5rIG5nUm91dGUuJHJvdXRlUHJvdmlkZXIgJHJvdXRlUHJvdmlkZXJ9J3MgQVBJLlxyXG4gICAgICpcclxuICAgICAqIFRoZSBgJHJvdXRlYCBzZXJ2aWNlIGlzIHR5cGljYWxseSB1c2VkIGluIGNvbmp1bmN0aW9uIHdpdGggdGhlXHJcbiAgICAgKiB7QGxpbmsgbmdSb3V0ZS5kaXJlY3RpdmU6bmdWaWV3IGBuZ1ZpZXdgfSBkaXJlY3RpdmUgYW5kIHRoZVxyXG4gICAgICoge0BsaW5rIG5nUm91dGUuJHJvdXRlUGFyYW1zIGAkcm91dGVQYXJhbXNgfSBzZXJ2aWNlLlxyXG4gICAgICpcclxuICAgICAqIEBleGFtcGxlXHJcbiAgICAgKiBUaGlzIGV4YW1wbGUgc2hvd3MgaG93IGNoYW5naW5nIHRoZSBVUkwgaGFzaCBjYXVzZXMgdGhlIGAkcm91dGVgIHRvIG1hdGNoIGEgcm91dGUgYWdhaW5zdCB0aGVcclxuICAgICAqIFVSTCwgYW5kIHRoZSBgbmdWaWV3YCBwdWxscyBpbiB0aGUgcGFydGlhbC5cclxuICAgICAqXHJcbiAgICAgKiA8ZXhhbXBsZSBuYW1lPVwiJHJvdXRlLXNlcnZpY2VcIiBtb2R1bGU9XCJuZ1JvdXRlRXhhbXBsZVwiXHJcbiAgICAgKiAgICAgICAgICBkZXBzPVwiYW5ndWxhci1yb3V0ZS5qc1wiIGZpeEJhc2U9XCJ0cnVlXCI+XHJcbiAgICAgKiAgIDxmaWxlIG5hbWU9XCJpbmRleC5odG1sXCI+XHJcbiAgICAgKiAgICAgPGRpdiBuZy1jb250cm9sbGVyPVwiTWFpbkNvbnRyb2xsZXJcIj5cclxuICAgICAqICAgICAgIENob29zZTpcclxuICAgICAqICAgICAgIDxhIGhyZWY9XCJCb29rL01vYnlcIj5Nb2J5PC9hPiB8XHJcbiAgICAgKiAgICAgICA8YSBocmVmPVwiQm9vay9Nb2J5L2NoLzFcIj5Nb2J5OiBDaDE8L2E+IHxcclxuICAgICAqICAgICAgIDxhIGhyZWY9XCJCb29rL0dhdHNieVwiPkdhdHNieTwvYT4gfFxyXG4gICAgICogICAgICAgPGEgaHJlZj1cIkJvb2svR2F0c2J5L2NoLzQ/a2V5PXZhbHVlXCI+R2F0c2J5OiBDaDQ8L2E+IHxcclxuICAgICAqICAgICAgIDxhIGhyZWY9XCJCb29rL1NjYXJsZXRcIj5TY2FybGV0IExldHRlcjwvYT48YnIvPlxyXG4gICAgICpcclxuICAgICAqICAgICAgIDxkaXYgbmctdmlldz48L2Rpdj5cclxuICAgICAqXHJcbiAgICAgKiAgICAgICA8aHIgLz5cclxuICAgICAqXHJcbiAgICAgKiAgICAgICA8cHJlPiRsb2NhdGlvbi5wYXRoKCkgPSB7eyRsb2NhdGlvbi5wYXRoKCl9fTwvcHJlPlxyXG4gICAgICogICAgICAgPHByZT4kcm91dGUuY3VycmVudC50ZW1wbGF0ZVVybCA9IHt7JHJvdXRlLmN1cnJlbnQudGVtcGxhdGVVcmx9fTwvcHJlPlxyXG4gICAgICogICAgICAgPHByZT4kcm91dGUuY3VycmVudC5wYXJhbXMgPSB7eyRyb3V0ZS5jdXJyZW50LnBhcmFtc319PC9wcmU+XHJcbiAgICAgKiAgICAgICA8cHJlPiRyb3V0ZS5jdXJyZW50LnNjb3BlLm5hbWUgPSB7eyRyb3V0ZS5jdXJyZW50LnNjb3BlLm5hbWV9fTwvcHJlPlxyXG4gICAgICogICAgICAgPHByZT4kcm91dGVQYXJhbXMgPSB7eyRyb3V0ZVBhcmFtc319PC9wcmU+XHJcbiAgICAgKiAgICAgPC9kaXY+XHJcbiAgICAgKiAgIDwvZmlsZT5cclxuICAgICAqXHJcbiAgICAgKiAgIDxmaWxlIG5hbWU9XCJib29rLmh0bWxcIj5cclxuICAgICAqICAgICBjb250cm9sbGVyOiB7e25hbWV9fTxiciAvPlxyXG4gICAgICogICAgIEJvb2sgSWQ6IHt7cGFyYW1zLmJvb2tJZH19PGJyIC8+XHJcbiAgICAgKiAgIDwvZmlsZT5cclxuICAgICAqXHJcbiAgICAgKiAgIDxmaWxlIG5hbWU9XCJjaGFwdGVyLmh0bWxcIj5cclxuICAgICAqICAgICBjb250cm9sbGVyOiB7e25hbWV9fTxiciAvPlxyXG4gICAgICogICAgIEJvb2sgSWQ6IHt7cGFyYW1zLmJvb2tJZH19PGJyIC8+XHJcbiAgICAgKiAgICAgQ2hhcHRlciBJZDoge3twYXJhbXMuY2hhcHRlcklkfX1cclxuICAgICAqICAgPC9maWxlPlxyXG4gICAgICpcclxuICAgICAqICAgPGZpbGUgbmFtZT1cInNjcmlwdC5qc1wiPlxyXG4gICAgICogICAgIGFuZ3VsYXIubW9kdWxlKCduZ1JvdXRlRXhhbXBsZScsIFsnbmdSb3V0ZSddKVxyXG4gICAgICpcclxuICAgICAqICAgICAgLmNvbnRyb2xsZXIoJ01haW5Db250cm9sbGVyJywgZnVuY3Rpb24oJHNjb3BlLCAkcm91dGUsICRyb3V0ZVBhcmFtcywgJGxvY2F0aW9uKSB7XHJcbiAgICAgKiAgICAgICAgICAkc2NvcGUuJHJvdXRlID0gJHJvdXRlO1xyXG4gICAgICogICAgICAgICAgJHNjb3BlLiRsb2NhdGlvbiA9ICRsb2NhdGlvbjtcclxuICAgICAqICAgICAgICAgICRzY29wZS4kcm91dGVQYXJhbXMgPSAkcm91dGVQYXJhbXM7XHJcbiAgICAgKiAgICAgIH0pXHJcbiAgICAgKlxyXG4gICAgICogICAgICAuY29udHJvbGxlcignQm9va0NvbnRyb2xsZXInLCBmdW5jdGlvbigkc2NvcGUsICRyb3V0ZVBhcmFtcykge1xyXG4gICAgICogICAgICAgICAgJHNjb3BlLm5hbWUgPSBcIkJvb2tDb250cm9sbGVyXCI7XHJcbiAgICAgKiAgICAgICAgICAkc2NvcGUucGFyYW1zID0gJHJvdXRlUGFyYW1zO1xyXG4gICAgICogICAgICB9KVxyXG4gICAgICpcclxuICAgICAqICAgICAgLmNvbnRyb2xsZXIoJ0NoYXB0ZXJDb250cm9sbGVyJywgZnVuY3Rpb24oJHNjb3BlLCAkcm91dGVQYXJhbXMpIHtcclxuICAgICAqICAgICAgICAgICRzY29wZS5uYW1lID0gXCJDaGFwdGVyQ29udHJvbGxlclwiO1xyXG4gICAgICogICAgICAgICAgJHNjb3BlLnBhcmFtcyA9ICRyb3V0ZVBhcmFtcztcclxuICAgICAqICAgICAgfSlcclxuICAgICAqXHJcbiAgICAgKiAgICAgLmNvbmZpZyhmdW5jdGlvbigkcm91dGVQcm92aWRlciwgJGxvY2F0aW9uUHJvdmlkZXIpIHtcclxuICAgICAqICAgICAgICRyb3V0ZVByb3ZpZGVyXHJcbiAgICAgKiAgICAgICAgLndoZW4oJy9Cb29rLzpib29rSWQnLCB7XHJcbiAgICAgKiAgICAgICAgIHRlbXBsYXRlVXJsOiAnYm9vay5odG1sJyxcclxuICAgICAqICAgICAgICAgY29udHJvbGxlcjogJ0Jvb2tDb250cm9sbGVyJyxcclxuICAgICAqICAgICAgICAgcmVzb2x2ZToge1xyXG4gICAgICogICAgICAgICAgIC8vIEkgd2lsbCBjYXVzZSBhIDEgc2Vjb25kIGRlbGF5XHJcbiAgICAgKiAgICAgICAgICAgZGVsYXk6IGZ1bmN0aW9uKCRxLCAkdGltZW91dCkge1xyXG4gICAgICogICAgICAgICAgICAgdmFyIGRlbGF5ID0gJHEuZGVmZXIoKTtcclxuICAgICAqICAgICAgICAgICAgICR0aW1lb3V0KGRlbGF5LnJlc29sdmUsIDEwMDApO1xyXG4gICAgICogICAgICAgICAgICAgcmV0dXJuIGRlbGF5LnByb21pc2U7XHJcbiAgICAgKiAgICAgICAgICAgfVxyXG4gICAgICogICAgICAgICB9XHJcbiAgICAgKiAgICAgICB9KVxyXG4gICAgICogICAgICAgLndoZW4oJy9Cb29rLzpib29rSWQvY2gvOmNoYXB0ZXJJZCcsIHtcclxuICAgICAqICAgICAgICAgdGVtcGxhdGVVcmw6ICdjaGFwdGVyLmh0bWwnLFxyXG4gICAgICogICAgICAgICBjb250cm9sbGVyOiAnQ2hhcHRlckNvbnRyb2xsZXInXHJcbiAgICAgKiAgICAgICB9KTtcclxuICAgICAqXHJcbiAgICAgKiAgICAgICAvLyBjb25maWd1cmUgaHRtbDUgdG8gZ2V0IGxpbmtzIHdvcmtpbmcgb24ganNmaWRkbGVcclxuICAgICAqICAgICAgICRsb2NhdGlvblByb3ZpZGVyLmh0bWw1TW9kZSh0cnVlKTtcclxuICAgICAqICAgICB9KTtcclxuICAgICAqXHJcbiAgICAgKiAgIDwvZmlsZT5cclxuICAgICAqXHJcbiAgICAgKiAgIDxmaWxlIG5hbWU9XCJwcm90cmFjdG9yLmpzXCIgdHlwZT1cInByb3RyYWN0b3JcIj5cclxuICAgICAqICAgICBpdCgnc2hvdWxkIGxvYWQgYW5kIGNvbXBpbGUgY29ycmVjdCB0ZW1wbGF0ZScsIGZ1bmN0aW9uKCkge1xyXG4gICAgICogICAgICAgZWxlbWVudChieS5saW5rVGV4dCgnTW9ieTogQ2gxJykpLmNsaWNrKCk7XHJcbiAgICAgKiAgICAgICB2YXIgY29udGVudCA9IGVsZW1lbnQoYnkuY3NzKCdbbmctdmlld10nKSkuZ2V0VGV4dCgpO1xyXG4gICAgICogICAgICAgZXhwZWN0KGNvbnRlbnQpLnRvTWF0Y2goL2NvbnRyb2xsZXJcXDogQ2hhcHRlckNvbnRyb2xsZXIvKTtcclxuICAgICAqICAgICAgIGV4cGVjdChjb250ZW50KS50b01hdGNoKC9Cb29rIElkXFw6IE1vYnkvKTtcclxuICAgICAqICAgICAgIGV4cGVjdChjb250ZW50KS50b01hdGNoKC9DaGFwdGVyIElkXFw6IDEvKTtcclxuICAgICAqXHJcbiAgICAgKiAgICAgICBlbGVtZW50KGJ5LnBhcnRpYWxMaW5rVGV4dCgnU2NhcmxldCcpKS5jbGljaygpO1xyXG4gICAgICpcclxuICAgICAqICAgICAgIGNvbnRlbnQgPSBlbGVtZW50KGJ5LmNzcygnW25nLXZpZXddJykpLmdldFRleHQoKTtcclxuICAgICAqICAgICAgIGV4cGVjdChjb250ZW50KS50b01hdGNoKC9jb250cm9sbGVyXFw6IEJvb2tDb250cm9sbGVyLyk7XHJcbiAgICAgKiAgICAgICBleHBlY3QoY29udGVudCkudG9NYXRjaCgvQm9vayBJZFxcOiBTY2FybGV0Lyk7XHJcbiAgICAgKiAgICAgfSk7XHJcbiAgICAgKiAgIDwvZmlsZT5cclxuICAgICAqIDwvZXhhbXBsZT5cclxuICAgICAqL1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogQG5nZG9jIGV2ZW50XHJcbiAgICAgKiBAbmFtZSAkcm91dGUjJHJvdXRlQ2hhbmdlU3RhcnRcclxuICAgICAqIEBldmVudFR5cGUgYnJvYWRjYXN0IG9uIHJvb3Qgc2NvcGVcclxuICAgICAqIEBkZXNjcmlwdGlvblxyXG4gICAgICogQnJvYWRjYXN0ZWQgYmVmb3JlIGEgcm91dGUgY2hhbmdlLiBBdCB0aGlzICBwb2ludCB0aGUgcm91dGUgc2VydmljZXMgc3RhcnRzXHJcbiAgICAgKiByZXNvbHZpbmcgYWxsIG9mIHRoZSBkZXBlbmRlbmNpZXMgbmVlZGVkIGZvciB0aGUgcm91dGUgY2hhbmdlIHRvIG9jY3VyLlxyXG4gICAgICogVHlwaWNhbGx5IHRoaXMgaW52b2x2ZXMgZmV0Y2hpbmcgdGhlIHZpZXcgdGVtcGxhdGUgYXMgd2VsbCBhcyBhbnkgZGVwZW5kZW5jaWVzXHJcbiAgICAgKiBkZWZpbmVkIGluIGByZXNvbHZlYCByb3V0ZSBwcm9wZXJ0eS4gT25jZSAgYWxsIG9mIHRoZSBkZXBlbmRlbmNpZXMgYXJlIHJlc29sdmVkXHJcbiAgICAgKiBgJHJvdXRlQ2hhbmdlU3VjY2Vzc2AgaXMgZmlyZWQuXHJcbiAgICAgKlxyXG4gICAgICogVGhlIHJvdXRlIGNoYW5nZSAoYW5kIHRoZSBgJGxvY2F0aW9uYCBjaGFuZ2UgdGhhdCB0cmlnZ2VyZWQgaXQpIGNhbiBiZSBwcmV2ZW50ZWRcclxuICAgICAqIGJ5IGNhbGxpbmcgYHByZXZlbnREZWZhdWx0YCBtZXRob2Qgb2YgdGhlIGV2ZW50LiBTZWUge0BsaW5rIG5nLiRyb290U2NvcGUuU2NvcGUjJG9ufVxyXG4gICAgICogZm9yIG1vcmUgZGV0YWlscyBhYm91dCBldmVudCBvYmplY3QuXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIHtPYmplY3R9IGFuZ3VsYXJFdmVudCBTeW50aGV0aWMgZXZlbnQgb2JqZWN0LlxyXG4gICAgICogQHBhcmFtIHtSb3V0ZX0gbmV4dCBGdXR1cmUgcm91dGUgaW5mb3JtYXRpb24uXHJcbiAgICAgKiBAcGFyYW0ge1JvdXRlfSBjdXJyZW50IEN1cnJlbnQgcm91dGUgaW5mb3JtYXRpb24uXHJcbiAgICAgKi9cclxuXHJcbiAgICAvKipcclxuICAgICAqIEBuZ2RvYyBldmVudFxyXG4gICAgICogQG5hbWUgJHJvdXRlIyRyb3V0ZUNoYW5nZVN1Y2Nlc3NcclxuICAgICAqIEBldmVudFR5cGUgYnJvYWRjYXN0IG9uIHJvb3Qgc2NvcGVcclxuICAgICAqIEBkZXNjcmlwdGlvblxyXG4gICAgICogQnJvYWRjYXN0ZWQgYWZ0ZXIgYSByb3V0ZSBkZXBlbmRlbmNpZXMgYXJlIHJlc29sdmVkLlxyXG4gICAgICoge0BsaW5rIG5nUm91dGUuZGlyZWN0aXZlOm5nVmlldyBuZ1ZpZXd9IGxpc3RlbnMgZm9yIHRoZSBkaXJlY3RpdmVcclxuICAgICAqIHRvIGluc3RhbnRpYXRlIHRoZSBjb250cm9sbGVyIGFuZCByZW5kZXIgdGhlIHZpZXcuXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIHtPYmplY3R9IGFuZ3VsYXJFdmVudCBTeW50aGV0aWMgZXZlbnQgb2JqZWN0LlxyXG4gICAgICogQHBhcmFtIHtSb3V0ZX0gY3VycmVudCBDdXJyZW50IHJvdXRlIGluZm9ybWF0aW9uLlxyXG4gICAgICogQHBhcmFtIHtSb3V0ZXxVbmRlZmluZWR9IHByZXZpb3VzIFByZXZpb3VzIHJvdXRlIGluZm9ybWF0aW9uLCBvciB1bmRlZmluZWQgaWYgY3VycmVudCBpc1xyXG4gICAgICogZmlyc3Qgcm91dGUgZW50ZXJlZC5cclxuICAgICAqL1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogQG5nZG9jIGV2ZW50XHJcbiAgICAgKiBAbmFtZSAkcm91dGUjJHJvdXRlQ2hhbmdlRXJyb3JcclxuICAgICAqIEBldmVudFR5cGUgYnJvYWRjYXN0IG9uIHJvb3Qgc2NvcGVcclxuICAgICAqIEBkZXNjcmlwdGlvblxyXG4gICAgICogQnJvYWRjYXN0ZWQgaWYgYW55IG9mIHRoZSByZXNvbHZlIHByb21pc2VzIGFyZSByZWplY3RlZC5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gYW5ndWxhckV2ZW50IFN5bnRoZXRpYyBldmVudCBvYmplY3RcclxuICAgICAqIEBwYXJhbSB7Um91dGV9IGN1cnJlbnQgQ3VycmVudCByb3V0ZSBpbmZvcm1hdGlvbi5cclxuICAgICAqIEBwYXJhbSB7Um91dGV9IHByZXZpb3VzIFByZXZpb3VzIHJvdXRlIGluZm9ybWF0aW9uLlxyXG4gICAgICogQHBhcmFtIHtSb3V0ZX0gcmVqZWN0aW9uIFJlamVjdGlvbiBvZiB0aGUgcHJvbWlzZS4gVXN1YWxseSB0aGUgZXJyb3Igb2YgdGhlIGZhaWxlZCBwcm9taXNlLlxyXG4gICAgICovXHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAbmdkb2MgZXZlbnRcclxuICAgICAqIEBuYW1lICRyb3V0ZSMkcm91dGVVcGRhdGVcclxuICAgICAqIEBldmVudFR5cGUgYnJvYWRjYXN0IG9uIHJvb3Qgc2NvcGVcclxuICAgICAqIEBkZXNjcmlwdGlvblxyXG4gICAgICpcclxuICAgICAqIFRoZSBgcmVsb2FkT25TZWFyY2hgIHByb3BlcnR5IGhhcyBiZWVuIHNldCB0byBmYWxzZSwgYW5kIHdlIGFyZSByZXVzaW5nIHRoZSBzYW1lXHJcbiAgICAgKiBpbnN0YW5jZSBvZiB0aGUgQ29udHJvbGxlci5cclxuICAgICAqL1xyXG5cclxuICAgIHZhciBmb3JjZVJlbG9hZCA9IGZhbHNlLFxyXG4gICAgICAgIHByZXBhcmVkUm91dGUsXHJcbiAgICAgICAgcHJlcGFyZWRSb3V0ZUlzVXBkYXRlT25seSxcclxuICAgICAgICAkcm91dGUgPSB7XHJcbiAgICAgICAgICByb3V0ZXM6IHJvdXRlcyxcclxuXHJcbiAgICAgICAgICAvKipcclxuICAgICAgICAgICAqIEBuZ2RvYyBtZXRob2RcclxuICAgICAgICAgICAqIEBuYW1lICRyb3V0ZSNyZWxvYWRcclxuICAgICAgICAgICAqXHJcbiAgICAgICAgICAgKiBAZGVzY3JpcHRpb25cclxuICAgICAgICAgICAqIENhdXNlcyBgJHJvdXRlYCBzZXJ2aWNlIHRvIHJlbG9hZCB0aGUgY3VycmVudCByb3V0ZSBldmVuIGlmXHJcbiAgICAgICAgICAgKiB7QGxpbmsgbmcuJGxvY2F0aW9uICRsb2NhdGlvbn0gaGFzbid0IGNoYW5nZWQuXHJcbiAgICAgICAgICAgKlxyXG4gICAgICAgICAgICogQXMgYSByZXN1bHQgb2YgdGhhdCwge0BsaW5rIG5nUm91dGUuZGlyZWN0aXZlOm5nVmlldyBuZ1ZpZXd9XHJcbiAgICAgICAgICAgKiBjcmVhdGVzIG5ldyBzY29wZSwgcmVpbnN0YW50aWF0ZXMgdGhlIGNvbnRyb2xsZXIuXHJcbiAgICAgICAgICAgKi9cclxuICAgICAgICAgIHJlbG9hZDogZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgIGZvcmNlUmVsb2FkID0gdHJ1ZTtcclxuICAgICAgICAgICAgJHJvb3RTY29wZS4kZXZhbEFzeW5jKGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgIC8vIERvbid0IHN1cHBvcnQgY2FuY2VsbGF0aW9uIG9mIGEgcmVsb2FkIGZvciBub3cuLi5cclxuICAgICAgICAgICAgICBwcmVwYXJlUm91dGUoKTtcclxuICAgICAgICAgICAgICBjb21taXRSb3V0ZSgpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgIH0sXHJcblxyXG4gICAgICAgICAgLyoqXHJcbiAgICAgICAgICAgKiBAbmdkb2MgbWV0aG9kXHJcbiAgICAgICAgICAgKiBAbmFtZSAkcm91dGUjdXBkYXRlUGFyYW1zXHJcbiAgICAgICAgICAgKlxyXG4gICAgICAgICAgICogQGRlc2NyaXB0aW9uXHJcbiAgICAgICAgICAgKiBDYXVzZXMgYCRyb3V0ZWAgc2VydmljZSB0byB1cGRhdGUgdGhlIGN1cnJlbnQgVVJMLCByZXBsYWNpbmdcclxuICAgICAgICAgICAqIGN1cnJlbnQgcm91dGUgcGFyYW1ldGVycyB3aXRoIHRob3NlIHNwZWNpZmllZCBpbiBgbmV3UGFyYW1zYC5cclxuICAgICAgICAgICAqIFByb3ZpZGVkIHByb3BlcnR5IG5hbWVzIHRoYXQgbWF0Y2ggdGhlIHJvdXRlJ3MgcGF0aCBzZWdtZW50XHJcbiAgICAgICAgICAgKiBkZWZpbml0aW9ucyB3aWxsIGJlIGludGVycG9sYXRlZCBpbnRvIHRoZSBsb2NhdGlvbidzIHBhdGgsIHdoaWxlXHJcbiAgICAgICAgICAgKiByZW1haW5pbmcgcHJvcGVydGllcyB3aWxsIGJlIHRyZWF0ZWQgYXMgcXVlcnkgcGFyYW1zLlxyXG4gICAgICAgICAgICpcclxuICAgICAgICAgICAqIEBwYXJhbSB7T2JqZWN0fSBuZXdQYXJhbXMgbWFwcGluZyBvZiBVUkwgcGFyYW1ldGVyIG5hbWVzIHRvIHZhbHVlc1xyXG4gICAgICAgICAgICovXHJcbiAgICAgICAgICB1cGRhdGVQYXJhbXM6IGZ1bmN0aW9uKG5ld1BhcmFtcykge1xyXG4gICAgICAgICAgICBpZiAodGhpcy5jdXJyZW50ICYmIHRoaXMuY3VycmVudC4kJHJvdXRlKSB7XHJcbiAgICAgICAgICAgICAgdmFyIHNlYXJjaFBhcmFtcyA9IHt9LCBzZWxmPXRoaXM7XHJcblxyXG4gICAgICAgICAgICAgIGFuZ3VsYXIuZm9yRWFjaChPYmplY3Qua2V5cyhuZXdQYXJhbXMpLCBmdW5jdGlvbihrZXkpIHtcclxuICAgICAgICAgICAgICAgIGlmICghc2VsZi5jdXJyZW50LnBhdGhQYXJhbXNba2V5XSkgc2VhcmNoUGFyYW1zW2tleV0gPSBuZXdQYXJhbXNba2V5XTtcclxuICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgICAgbmV3UGFyYW1zID0gYW5ndWxhci5leHRlbmQoe30sIHRoaXMuY3VycmVudC5wYXJhbXMsIG5ld1BhcmFtcyk7XHJcbiAgICAgICAgICAgICAgJGxvY2F0aW9uLnBhdGgoaW50ZXJwb2xhdGUodGhpcy5jdXJyZW50LiQkcm91dGUub3JpZ2luYWxQYXRoLCBuZXdQYXJhbXMpKTtcclxuICAgICAgICAgICAgICAkbG9jYXRpb24uc2VhcmNoKGFuZ3VsYXIuZXh0ZW5kKHt9LCAkbG9jYXRpb24uc2VhcmNoKCksIHNlYXJjaFBhcmFtcykpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgIHRocm93ICRyb3V0ZU1pbkVycignbm9yb3V0JywgJ1RyaWVkIHVwZGF0aW5nIHJvdXRlIHdoZW4gd2l0aCBubyBjdXJyZW50IHJvdXRlJyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG5cclxuICAgICRyb290U2NvcGUuJG9uKCckbG9jYXRpb25DaGFuZ2VTdGFydCcsIHByZXBhcmVSb3V0ZSk7XHJcbiAgICAkcm9vdFNjb3BlLiRvbignJGxvY2F0aW9uQ2hhbmdlU3VjY2VzcycsIGNvbW1pdFJvdXRlKTtcclxuXHJcbiAgICByZXR1cm4gJHJvdXRlO1xyXG5cclxuICAgIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAcGFyYW0gb24ge3N0cmluZ30gY3VycmVudCB1cmxcclxuICAgICAqIEBwYXJhbSByb3V0ZSB7T2JqZWN0fSByb3V0ZSByZWdleHAgdG8gbWF0Y2ggdGhlIHVybCBhZ2FpbnN0XHJcbiAgICAgKiBAcmV0dXJuIHs/T2JqZWN0fVxyXG4gICAgICpcclxuICAgICAqIEBkZXNjcmlwdGlvblxyXG4gICAgICogQ2hlY2sgaWYgdGhlIHJvdXRlIG1hdGNoZXMgdGhlIGN1cnJlbnQgdXJsLlxyXG4gICAgICpcclxuICAgICAqIEluc3BpcmVkIGJ5IG1hdGNoIGluXHJcbiAgICAgKiB2aXNpb25tZWRpYS9leHByZXNzL2xpYi9yb3V0ZXIvcm91dGVyLmpzLlxyXG4gICAgICovXHJcbiAgICBmdW5jdGlvbiBzd2l0Y2hSb3V0ZU1hdGNoZXIob24sIHJvdXRlKSB7XHJcbiAgICAgIHZhciBrZXlzID0gcm91dGUua2V5cyxcclxuICAgICAgICAgIHBhcmFtcyA9IHt9O1xyXG5cclxuICAgICAgaWYgKCFyb3V0ZS5yZWdleHApIHJldHVybiBudWxsO1xyXG5cclxuICAgICAgdmFyIG0gPSByb3V0ZS5yZWdleHAuZXhlYyhvbik7XHJcbiAgICAgIGlmICghbSkgcmV0dXJuIG51bGw7XHJcblxyXG4gICAgICBmb3IgKHZhciBpID0gMSwgbGVuID0gbS5sZW5ndGg7IGkgPCBsZW47ICsraSkge1xyXG4gICAgICAgIHZhciBrZXkgPSBrZXlzW2kgLSAxXTtcclxuXHJcbiAgICAgICAgdmFyIHZhbCA9IG1baV07XHJcblxyXG4gICAgICAgIGlmIChrZXkgJiYgdmFsKSB7XHJcbiAgICAgICAgICBwYXJhbXNba2V5Lm5hbWVdID0gdmFsO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgICByZXR1cm4gcGFyYW1zO1xyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIHByZXBhcmVSb3V0ZSgkbG9jYXRpb25FdmVudCkge1xyXG4gICAgICB2YXIgbGFzdFJvdXRlID0gJHJvdXRlLmN1cnJlbnQ7XHJcblxyXG4gICAgICBwcmVwYXJlZFJvdXRlID0gcGFyc2VSb3V0ZSgpO1xyXG4gICAgICBwcmVwYXJlZFJvdXRlSXNVcGRhdGVPbmx5ID0gcHJlcGFyZWRSb3V0ZSAmJiBsYXN0Um91dGUgJiYgcHJlcGFyZWRSb3V0ZS4kJHJvdXRlID09PSBsYXN0Um91dGUuJCRyb3V0ZVxyXG4gICAgICAgICAgJiYgYW5ndWxhci5lcXVhbHMocHJlcGFyZWRSb3V0ZS5wYXRoUGFyYW1zLCBsYXN0Um91dGUucGF0aFBhcmFtcylcclxuICAgICAgICAgICYmICFwcmVwYXJlZFJvdXRlLnJlbG9hZE9uU2VhcmNoICYmICFmb3JjZVJlbG9hZDtcclxuXHJcbiAgICAgIGlmICghcHJlcGFyZWRSb3V0ZUlzVXBkYXRlT25seSAmJiAobGFzdFJvdXRlIHx8IHByZXBhcmVkUm91dGUpKSB7XHJcbiAgICAgICAgaWYgKCRyb290U2NvcGUuJGJyb2FkY2FzdCgnJHJvdXRlQ2hhbmdlU3RhcnQnLCBwcmVwYXJlZFJvdXRlLCBsYXN0Um91dGUpLmRlZmF1bHRQcmV2ZW50ZWQpIHtcclxuICAgICAgICAgIGlmICgkbG9jYXRpb25FdmVudCkge1xyXG4gICAgICAgICAgICAkbG9jYXRpb25FdmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIGNvbW1pdFJvdXRlKCkge1xyXG4gICAgICB2YXIgbGFzdFJvdXRlID0gJHJvdXRlLmN1cnJlbnQ7XHJcbiAgICAgIHZhciBuZXh0Um91dGUgPSBwcmVwYXJlZFJvdXRlO1xyXG5cclxuICAgICAgaWYgKHByZXBhcmVkUm91dGVJc1VwZGF0ZU9ubHkpIHtcclxuICAgICAgICBsYXN0Um91dGUucGFyYW1zID0gbmV4dFJvdXRlLnBhcmFtcztcclxuICAgICAgICBhbmd1bGFyLmNvcHkobGFzdFJvdXRlLnBhcmFtcywgJHJvdXRlUGFyYW1zKTtcclxuICAgICAgICAkcm9vdFNjb3BlLiRicm9hZGNhc3QoJyRyb3V0ZVVwZGF0ZScsIGxhc3RSb3V0ZSk7XHJcbiAgICAgIH0gZWxzZSBpZiAobmV4dFJvdXRlIHx8IGxhc3RSb3V0ZSkge1xyXG4gICAgICAgIGZvcmNlUmVsb2FkID0gZmFsc2U7XHJcbiAgICAgICAgJHJvdXRlLmN1cnJlbnQgPSBuZXh0Um91dGU7XHJcbiAgICAgICAgaWYgKG5leHRSb3V0ZSkge1xyXG4gICAgICAgICAgaWYgKG5leHRSb3V0ZS5yZWRpcmVjdFRvKSB7XHJcbiAgICAgICAgICAgIGlmIChhbmd1bGFyLmlzU3RyaW5nKG5leHRSb3V0ZS5yZWRpcmVjdFRvKSkge1xyXG4gICAgICAgICAgICAgICRsb2NhdGlvbi5wYXRoKGludGVycG9sYXRlKG5leHRSb3V0ZS5yZWRpcmVjdFRvLCBuZXh0Um91dGUucGFyYW1zKSkuc2VhcmNoKG5leHRSb3V0ZS5wYXJhbXMpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgLnJlcGxhY2UoKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAkbG9jYXRpb24udXJsKG5leHRSb3V0ZS5yZWRpcmVjdFRvKG5leHRSb3V0ZS5wYXRoUGFyYW1zLCAkbG9jYXRpb24ucGF0aCgpLCAkbG9jYXRpb24uc2VhcmNoKCkpKVxyXG4gICAgICAgICAgICAgICAgICAgICAgIC5yZXBsYWNlKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgICRxLndoZW4obmV4dFJvdXRlKS5cclxuICAgICAgICAgIHRoZW4oZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgIGlmIChuZXh0Um91dGUpIHtcclxuICAgICAgICAgICAgICB2YXIgbG9jYWxzID0gYW5ndWxhci5leHRlbmQoe30sIG5leHRSb3V0ZS5yZXNvbHZlKSxcclxuICAgICAgICAgICAgICAgICAgdGVtcGxhdGUsIHRlbXBsYXRlVXJsO1xyXG5cclxuICAgICAgICAgICAgICBhbmd1bGFyLmZvckVhY2gobG9jYWxzLCBmdW5jdGlvbih2YWx1ZSwga2V5KSB7XHJcbiAgICAgICAgICAgICAgICBsb2NhbHNba2V5XSA9IGFuZ3VsYXIuaXNTdHJpbmcodmFsdWUpID9cclxuICAgICAgICAgICAgICAgICAgICAkaW5qZWN0b3IuZ2V0KHZhbHVlKSA6ICRpbmplY3Rvci5pbnZva2UodmFsdWUsIG51bGwsIG51bGwsIGtleSk7XHJcbiAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAgIGlmIChhbmd1bGFyLmlzRGVmaW5lZCh0ZW1wbGF0ZSA9IG5leHRSb3V0ZS50ZW1wbGF0ZSkpIHtcclxuICAgICAgICAgICAgICAgIGlmIChhbmd1bGFyLmlzRnVuY3Rpb24odGVtcGxhdGUpKSB7XHJcbiAgICAgICAgICAgICAgICAgIHRlbXBsYXRlID0gdGVtcGxhdGUobmV4dFJvdXRlLnBhcmFtcyk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgfSBlbHNlIGlmIChhbmd1bGFyLmlzRGVmaW5lZCh0ZW1wbGF0ZVVybCA9IG5leHRSb3V0ZS50ZW1wbGF0ZVVybCkpIHtcclxuICAgICAgICAgICAgICAgIGlmIChhbmd1bGFyLmlzRnVuY3Rpb24odGVtcGxhdGVVcmwpKSB7XHJcbiAgICAgICAgICAgICAgICAgIHRlbXBsYXRlVXJsID0gdGVtcGxhdGVVcmwobmV4dFJvdXRlLnBhcmFtcyk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB0ZW1wbGF0ZVVybCA9ICRzY2UuZ2V0VHJ1c3RlZFJlc291cmNlVXJsKHRlbXBsYXRlVXJsKTtcclxuICAgICAgICAgICAgICAgIGlmIChhbmd1bGFyLmlzRGVmaW5lZCh0ZW1wbGF0ZVVybCkpIHtcclxuICAgICAgICAgICAgICAgICAgbmV4dFJvdXRlLmxvYWRlZFRlbXBsYXRlVXJsID0gdGVtcGxhdGVVcmw7XHJcbiAgICAgICAgICAgICAgICAgIHRlbXBsYXRlID0gJHRlbXBsYXRlUmVxdWVzdCh0ZW1wbGF0ZVVybCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgIGlmIChhbmd1bGFyLmlzRGVmaW5lZCh0ZW1wbGF0ZSkpIHtcclxuICAgICAgICAgICAgICAgIGxvY2Fsc1snJHRlbXBsYXRlJ10gPSB0ZW1wbGF0ZTtcclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgcmV0dXJuICRxLmFsbChsb2NhbHMpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9KS5cclxuICAgICAgICAgIC8vIGFmdGVyIHJvdXRlIGNoYW5nZVxyXG4gICAgICAgICAgdGhlbihmdW5jdGlvbihsb2NhbHMpIHtcclxuICAgICAgICAgICAgaWYgKG5leHRSb3V0ZSA9PSAkcm91dGUuY3VycmVudCkge1xyXG4gICAgICAgICAgICAgIGlmIChuZXh0Um91dGUpIHtcclxuICAgICAgICAgICAgICAgIG5leHRSb3V0ZS5sb2NhbHMgPSBsb2NhbHM7XHJcbiAgICAgICAgICAgICAgICBhbmd1bGFyLmNvcHkobmV4dFJvdXRlLnBhcmFtcywgJHJvdXRlUGFyYW1zKTtcclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgJHJvb3RTY29wZS4kYnJvYWRjYXN0KCckcm91dGVDaGFuZ2VTdWNjZXNzJywgbmV4dFJvdXRlLCBsYXN0Um91dGUpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9LCBmdW5jdGlvbihlcnJvcikge1xyXG4gICAgICAgICAgICBpZiAobmV4dFJvdXRlID09ICRyb3V0ZS5jdXJyZW50KSB7XHJcbiAgICAgICAgICAgICAgJHJvb3RTY29wZS4kYnJvYWRjYXN0KCckcm91dGVDaGFuZ2VFcnJvcicsIG5leHRSb3V0ZSwgbGFzdFJvdXRlLCBlcnJvcik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH0pO1xyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQHJldHVybnMge09iamVjdH0gdGhlIGN1cnJlbnQgYWN0aXZlIHJvdXRlLCBieSBtYXRjaGluZyBpdCBhZ2FpbnN0IHRoZSBVUkxcclxuICAgICAqL1xyXG4gICAgZnVuY3Rpb24gcGFyc2VSb3V0ZSgpIHtcclxuICAgICAgLy8gTWF0Y2ggYSByb3V0ZVxyXG4gICAgICB2YXIgcGFyYW1zLCBtYXRjaDtcclxuICAgICAgYW5ndWxhci5mb3JFYWNoKHJvdXRlcywgZnVuY3Rpb24ocm91dGUsIHBhdGgpIHtcclxuICAgICAgICBpZiAoIW1hdGNoICYmIChwYXJhbXMgPSBzd2l0Y2hSb3V0ZU1hdGNoZXIoJGxvY2F0aW9uLnBhdGgoKSwgcm91dGUpKSkge1xyXG4gICAgICAgICAgbWF0Y2ggPSBpbmhlcml0KHJvdXRlLCB7XHJcbiAgICAgICAgICAgIHBhcmFtczogYW5ndWxhci5leHRlbmQoe30sICRsb2NhdGlvbi5zZWFyY2goKSwgcGFyYW1zKSxcclxuICAgICAgICAgICAgcGF0aFBhcmFtczogcGFyYW1zfSk7XHJcbiAgICAgICAgICBtYXRjaC4kJHJvdXRlID0gcm91dGU7XHJcbiAgICAgICAgfVxyXG4gICAgICB9KTtcclxuICAgICAgLy8gTm8gcm91dGUgbWF0Y2hlZDsgZmFsbGJhY2sgdG8gXCJvdGhlcndpc2VcIiByb3V0ZVxyXG4gICAgICByZXR1cm4gbWF0Y2ggfHwgcm91dGVzW251bGxdICYmIGluaGVyaXQocm91dGVzW251bGxdLCB7cGFyYW1zOiB7fSwgcGF0aFBhcmFtczp7fX0pO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQHJldHVybnMge3N0cmluZ30gaW50ZXJwb2xhdGlvbiBvZiB0aGUgcmVkaXJlY3QgcGF0aCB3aXRoIHRoZSBwYXJhbWV0ZXJzXHJcbiAgICAgKi9cclxuICAgIGZ1bmN0aW9uIGludGVycG9sYXRlKHN0cmluZywgcGFyYW1zKSB7XHJcbiAgICAgIHZhciByZXN1bHQgPSBbXTtcclxuICAgICAgYW5ndWxhci5mb3JFYWNoKChzdHJpbmd8fCcnKS5zcGxpdCgnOicpLCBmdW5jdGlvbihzZWdtZW50LCBpKSB7XHJcbiAgICAgICAgaWYgKGkgPT09IDApIHtcclxuICAgICAgICAgIHJlc3VsdC5wdXNoKHNlZ21lbnQpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICB2YXIgc2VnbWVudE1hdGNoID0gc2VnbWVudC5tYXRjaCgvKFxcdyspKC4qKS8pO1xyXG4gICAgICAgICAgdmFyIGtleSA9IHNlZ21lbnRNYXRjaFsxXTtcclxuICAgICAgICAgIHJlc3VsdC5wdXNoKHBhcmFtc1trZXldKTtcclxuICAgICAgICAgIHJlc3VsdC5wdXNoKHNlZ21lbnRNYXRjaFsyXSB8fCAnJyk7XHJcbiAgICAgICAgICBkZWxldGUgcGFyYW1zW2tleV07XHJcbiAgICAgICAgfVxyXG4gICAgICB9KTtcclxuICAgICAgcmV0dXJuIHJlc3VsdC5qb2luKCcnKTtcclxuICAgIH1cclxuICB9XTtcclxufVxyXG5cclxubmdSb3V0ZU1vZHVsZS5wcm92aWRlcignJHJvdXRlUGFyYW1zJywgJFJvdXRlUGFyYW1zUHJvdmlkZXIpO1xyXG5cclxuXHJcbi8qKlxyXG4gKiBAbmdkb2Mgc2VydmljZVxyXG4gKiBAbmFtZSAkcm91dGVQYXJhbXNcclxuICogQHJlcXVpcmVzICRyb3V0ZVxyXG4gKlxyXG4gKiBAZGVzY3JpcHRpb25cclxuICogVGhlIGAkcm91dGVQYXJhbXNgIHNlcnZpY2UgYWxsb3dzIHlvdSB0byByZXRyaWV2ZSB0aGUgY3VycmVudCBzZXQgb2Ygcm91dGUgcGFyYW1ldGVycy5cclxuICpcclxuICogUmVxdWlyZXMgdGhlIHtAbGluayBuZ1JvdXRlIGBuZ1JvdXRlYH0gbW9kdWxlIHRvIGJlIGluc3RhbGxlZC5cclxuICpcclxuICogVGhlIHJvdXRlIHBhcmFtZXRlcnMgYXJlIGEgY29tYmluYXRpb24gb2Yge0BsaW5rIG5nLiRsb2NhdGlvbiBgJGxvY2F0aW9uYH0nc1xyXG4gKiB7QGxpbmsgbmcuJGxvY2F0aW9uI3NlYXJjaCBgc2VhcmNoKClgfSBhbmQge0BsaW5rIG5nLiRsb2NhdGlvbiNwYXRoIGBwYXRoKClgfS5cclxuICogVGhlIGBwYXRoYCBwYXJhbWV0ZXJzIGFyZSBleHRyYWN0ZWQgd2hlbiB0aGUge0BsaW5rIG5nUm91dGUuJHJvdXRlIGAkcm91dGVgfSBwYXRoIGlzIG1hdGNoZWQuXHJcbiAqXHJcbiAqIEluIGNhc2Ugb2YgcGFyYW1ldGVyIG5hbWUgY29sbGlzaW9uLCBgcGF0aGAgcGFyYW1zIHRha2UgcHJlY2VkZW5jZSBvdmVyIGBzZWFyY2hgIHBhcmFtcy5cclxuICpcclxuICogVGhlIHNlcnZpY2UgZ3VhcmFudGVlcyB0aGF0IHRoZSBpZGVudGl0eSBvZiB0aGUgYCRyb3V0ZVBhcmFtc2Agb2JqZWN0IHdpbGwgcmVtYWluIHVuY2hhbmdlZFxyXG4gKiAoYnV0IGl0cyBwcm9wZXJ0aWVzIHdpbGwgbGlrZWx5IGNoYW5nZSkgZXZlbiB3aGVuIGEgcm91dGUgY2hhbmdlIG9jY3Vycy5cclxuICpcclxuICogTm90ZSB0aGF0IHRoZSBgJHJvdXRlUGFyYW1zYCBhcmUgb25seSB1cGRhdGVkICphZnRlciogYSByb3V0ZSBjaGFuZ2UgY29tcGxldGVzIHN1Y2Nlc3NmdWxseS5cclxuICogVGhpcyBtZWFucyB0aGF0IHlvdSBjYW5ub3QgcmVseSBvbiBgJHJvdXRlUGFyYW1zYCBiZWluZyBjb3JyZWN0IGluIHJvdXRlIHJlc29sdmUgZnVuY3Rpb25zLlxyXG4gKiBJbnN0ZWFkIHlvdSBjYW4gdXNlIGAkcm91dGUuY3VycmVudC5wYXJhbXNgIHRvIGFjY2VzcyB0aGUgbmV3IHJvdXRlJ3MgcGFyYW1ldGVycy5cclxuICpcclxuICogQGV4YW1wbGVcclxuICogYGBganNcclxuICogIC8vIEdpdmVuOlxyXG4gKiAgLy8gVVJMOiBodHRwOi8vc2VydmVyLmNvbS9pbmRleC5odG1sIy9DaGFwdGVyLzEvU2VjdGlvbi8yP3NlYXJjaD1tb2J5XHJcbiAqICAvLyBSb3V0ZTogL0NoYXB0ZXIvOmNoYXB0ZXJJZC9TZWN0aW9uLzpzZWN0aW9uSWRcclxuICogIC8vXHJcbiAqICAvLyBUaGVuXHJcbiAqICAkcm91dGVQYXJhbXMgPT0+IHtjaGFwdGVySWQ6JzEnLCBzZWN0aW9uSWQ6JzInLCBzZWFyY2g6J21vYnknfVxyXG4gKiBgYGBcclxuICovXHJcbmZ1bmN0aW9uICRSb3V0ZVBhcmFtc1Byb3ZpZGVyKCkge1xyXG4gIHRoaXMuJGdldCA9IGZ1bmN0aW9uKCkgeyByZXR1cm4ge307IH07XHJcbn1cclxuXHJcbm5nUm91dGVNb2R1bGUuZGlyZWN0aXZlKCduZ1ZpZXcnLCBuZ1ZpZXdGYWN0b3J5KTtcclxubmdSb3V0ZU1vZHVsZS5kaXJlY3RpdmUoJ25nVmlldycsIG5nVmlld0ZpbGxDb250ZW50RmFjdG9yeSk7XHJcblxyXG5cclxuLyoqXHJcbiAqIEBuZ2RvYyBkaXJlY3RpdmVcclxuICogQG5hbWUgbmdWaWV3XHJcbiAqIEByZXN0cmljdCBFQ0FcclxuICpcclxuICogQGRlc2NyaXB0aW9uXHJcbiAqICMgT3ZlcnZpZXdcclxuICogYG5nVmlld2AgaXMgYSBkaXJlY3RpdmUgdGhhdCBjb21wbGVtZW50cyB0aGUge0BsaW5rIG5nUm91dGUuJHJvdXRlICRyb3V0ZX0gc2VydmljZSBieVxyXG4gKiBpbmNsdWRpbmcgdGhlIHJlbmRlcmVkIHRlbXBsYXRlIG9mIHRoZSBjdXJyZW50IHJvdXRlIGludG8gdGhlIG1haW4gbGF5b3V0IChgaW5kZXguaHRtbGApIGZpbGUuXHJcbiAqIEV2ZXJ5IHRpbWUgdGhlIGN1cnJlbnQgcm91dGUgY2hhbmdlcywgdGhlIGluY2x1ZGVkIHZpZXcgY2hhbmdlcyB3aXRoIGl0IGFjY29yZGluZyB0byB0aGVcclxuICogY29uZmlndXJhdGlvbiBvZiB0aGUgYCRyb3V0ZWAgc2VydmljZS5cclxuICpcclxuICogUmVxdWlyZXMgdGhlIHtAbGluayBuZ1JvdXRlIGBuZ1JvdXRlYH0gbW9kdWxlIHRvIGJlIGluc3RhbGxlZC5cclxuICpcclxuICogQGFuaW1hdGlvbnNcclxuICogZW50ZXIgLSBhbmltYXRpb24gaXMgdXNlZCB0byBicmluZyBuZXcgY29udGVudCBpbnRvIHRoZSBicm93c2VyLlxyXG4gKiBsZWF2ZSAtIGFuaW1hdGlvbiBpcyB1c2VkIHRvIGFuaW1hdGUgZXhpc3RpbmcgY29udGVudCBhd2F5LlxyXG4gKlxyXG4gKiBUaGUgZW50ZXIgYW5kIGxlYXZlIGFuaW1hdGlvbiBvY2N1ciBjb25jdXJyZW50bHkuXHJcbiAqXHJcbiAqIEBzY29wZVxyXG4gKiBAcHJpb3JpdHkgNDAwXHJcbiAqIEBwYXJhbSB7c3RyaW5nPX0gb25sb2FkIEV4cHJlc3Npb24gdG8gZXZhbHVhdGUgd2hlbmV2ZXIgdGhlIHZpZXcgdXBkYXRlcy5cclxuICpcclxuICogQHBhcmFtIHtzdHJpbmc9fSBhdXRvc2Nyb2xsIFdoZXRoZXIgYG5nVmlld2Agc2hvdWxkIGNhbGwge0BsaW5rIG5nLiRhbmNob3JTY3JvbGxcclxuICogICAgICAgICAgICAgICAgICAkYW5jaG9yU2Nyb2xsfSB0byBzY3JvbGwgdGhlIHZpZXdwb3J0IGFmdGVyIHRoZSB2aWV3IGlzIHVwZGF0ZWQuXHJcbiAqXHJcbiAqICAgICAgICAgICAgICAgICAgLSBJZiB0aGUgYXR0cmlidXRlIGlzIG5vdCBzZXQsIGRpc2FibGUgc2Nyb2xsaW5nLlxyXG4gKiAgICAgICAgICAgICAgICAgIC0gSWYgdGhlIGF0dHJpYnV0ZSBpcyBzZXQgd2l0aG91dCB2YWx1ZSwgZW5hYmxlIHNjcm9sbGluZy5cclxuICogICAgICAgICAgICAgICAgICAtIE90aGVyd2lzZSBlbmFibGUgc2Nyb2xsaW5nIG9ubHkgaWYgdGhlIGBhdXRvc2Nyb2xsYCBhdHRyaWJ1dGUgdmFsdWUgZXZhbHVhdGVkXHJcbiAqICAgICAgICAgICAgICAgICAgICBhcyBhbiBleHByZXNzaW9uIHlpZWxkcyBhIHRydXRoeSB2YWx1ZS5cclxuICogQGV4YW1wbGVcclxuICAgIDxleGFtcGxlIG5hbWU9XCJuZ1ZpZXctZGlyZWN0aXZlXCIgbW9kdWxlPVwibmdWaWV3RXhhbXBsZVwiXHJcbiAgICAgICAgICAgICBkZXBzPVwiYW5ndWxhci1yb3V0ZS5qczthbmd1bGFyLWFuaW1hdGUuanNcIlxyXG4gICAgICAgICAgICAgYW5pbWF0aW9ucz1cInRydWVcIiBmaXhCYXNlPVwidHJ1ZVwiPlxyXG4gICAgICA8ZmlsZSBuYW1lPVwiaW5kZXguaHRtbFwiPlxyXG4gICAgICAgIDxkaXYgbmctY29udHJvbGxlcj1cIk1haW5DdHJsIGFzIG1haW5cIj5cclxuICAgICAgICAgIENob29zZTpcclxuICAgICAgICAgIDxhIGhyZWY9XCJCb29rL01vYnlcIj5Nb2J5PC9hPiB8XHJcbiAgICAgICAgICA8YSBocmVmPVwiQm9vay9Nb2J5L2NoLzFcIj5Nb2J5OiBDaDE8L2E+IHxcclxuICAgICAgICAgIDxhIGhyZWY9XCJCb29rL0dhdHNieVwiPkdhdHNieTwvYT4gfFxyXG4gICAgICAgICAgPGEgaHJlZj1cIkJvb2svR2F0c2J5L2NoLzQ/a2V5PXZhbHVlXCI+R2F0c2J5OiBDaDQ8L2E+IHxcclxuICAgICAgICAgIDxhIGhyZWY9XCJCb29rL1NjYXJsZXRcIj5TY2FybGV0IExldHRlcjwvYT48YnIvPlxyXG5cclxuICAgICAgICAgIDxkaXYgY2xhc3M9XCJ2aWV3LWFuaW1hdGUtY29udGFpbmVyXCI+XHJcbiAgICAgICAgICAgIDxkaXYgbmctdmlldyBjbGFzcz1cInZpZXctYW5pbWF0ZVwiPjwvZGl2PlxyXG4gICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICA8aHIgLz5cclxuXHJcbiAgICAgICAgICA8cHJlPiRsb2NhdGlvbi5wYXRoKCkgPSB7e21haW4uJGxvY2F0aW9uLnBhdGgoKX19PC9wcmU+XHJcbiAgICAgICAgICA8cHJlPiRyb3V0ZS5jdXJyZW50LnRlbXBsYXRlVXJsID0ge3ttYWluLiRyb3V0ZS5jdXJyZW50LnRlbXBsYXRlVXJsfX08L3ByZT5cclxuICAgICAgICAgIDxwcmU+JHJvdXRlLmN1cnJlbnQucGFyYW1zID0ge3ttYWluLiRyb3V0ZS5jdXJyZW50LnBhcmFtc319PC9wcmU+XHJcbiAgICAgICAgICA8cHJlPiRyb3V0ZVBhcmFtcyA9IHt7bWFpbi4kcm91dGVQYXJhbXN9fTwvcHJlPlxyXG4gICAgICAgIDwvZGl2PlxyXG4gICAgICA8L2ZpbGU+XHJcblxyXG4gICAgICA8ZmlsZSBuYW1lPVwiYm9vay5odG1sXCI+XHJcbiAgICAgICAgPGRpdj5cclxuICAgICAgICAgIGNvbnRyb2xsZXI6IHt7Ym9vay5uYW1lfX08YnIgLz5cclxuICAgICAgICAgIEJvb2sgSWQ6IHt7Ym9vay5wYXJhbXMuYm9va0lkfX08YnIgLz5cclxuICAgICAgICA8L2Rpdj5cclxuICAgICAgPC9maWxlPlxyXG5cclxuICAgICAgPGZpbGUgbmFtZT1cImNoYXB0ZXIuaHRtbFwiPlxyXG4gICAgICAgIDxkaXY+XHJcbiAgICAgICAgICBjb250cm9sbGVyOiB7e2NoYXB0ZXIubmFtZX19PGJyIC8+XHJcbiAgICAgICAgICBCb29rIElkOiB7e2NoYXB0ZXIucGFyYW1zLmJvb2tJZH19PGJyIC8+XHJcbiAgICAgICAgICBDaGFwdGVyIElkOiB7e2NoYXB0ZXIucGFyYW1zLmNoYXB0ZXJJZH19XHJcbiAgICAgICAgPC9kaXY+XHJcbiAgICAgIDwvZmlsZT5cclxuXHJcbiAgICAgIDxmaWxlIG5hbWU9XCJhbmltYXRpb25zLmNzc1wiPlxyXG4gICAgICAgIC52aWV3LWFuaW1hdGUtY29udGFpbmVyIHtcclxuICAgICAgICAgIHBvc2l0aW9uOnJlbGF0aXZlO1xyXG4gICAgICAgICAgaGVpZ2h0OjEwMHB4IWltcG9ydGFudDtcclxuICAgICAgICAgIHBvc2l0aW9uOnJlbGF0aXZlO1xyXG4gICAgICAgICAgYmFja2dyb3VuZDp3aGl0ZTtcclxuICAgICAgICAgIGJvcmRlcjoxcHggc29saWQgYmxhY2s7XHJcbiAgICAgICAgICBoZWlnaHQ6NDBweDtcclxuICAgICAgICAgIG92ZXJmbG93OmhpZGRlbjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC52aWV3LWFuaW1hdGUge1xyXG4gICAgICAgICAgcGFkZGluZzoxMHB4O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLnZpZXctYW5pbWF0ZS5uZy1lbnRlciwgLnZpZXctYW5pbWF0ZS5uZy1sZWF2ZSB7XHJcbiAgICAgICAgICAtd2Via2l0LXRyYW5zaXRpb246YWxsIGN1YmljLWJlemllcigwLjI1MCwgMC40NjAsIDAuNDUwLCAwLjk0MCkgMS41cztcclxuICAgICAgICAgIHRyYW5zaXRpb246YWxsIGN1YmljLWJlemllcigwLjI1MCwgMC40NjAsIDAuNDUwLCAwLjk0MCkgMS41cztcclxuXHJcbiAgICAgICAgICBkaXNwbGF5OmJsb2NrO1xyXG4gICAgICAgICAgd2lkdGg6MTAwJTtcclxuICAgICAgICAgIGJvcmRlci1sZWZ0OjFweCBzb2xpZCBibGFjaztcclxuXHJcbiAgICAgICAgICBwb3NpdGlvbjphYnNvbHV0ZTtcclxuICAgICAgICAgIHRvcDowO1xyXG4gICAgICAgICAgbGVmdDowO1xyXG4gICAgICAgICAgcmlnaHQ6MDtcclxuICAgICAgICAgIGJvdHRvbTowO1xyXG4gICAgICAgICAgcGFkZGluZzoxMHB4O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLnZpZXctYW5pbWF0ZS5uZy1lbnRlciB7XHJcbiAgICAgICAgICBsZWZ0OjEwMCU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC52aWV3LWFuaW1hdGUubmctZW50ZXIubmctZW50ZXItYWN0aXZlIHtcclxuICAgICAgICAgIGxlZnQ6MDtcclxuICAgICAgICB9XHJcbiAgICAgICAgLnZpZXctYW5pbWF0ZS5uZy1sZWF2ZS5uZy1sZWF2ZS1hY3RpdmUge1xyXG4gICAgICAgICAgbGVmdDotMTAwJTtcclxuICAgICAgICB9XHJcbiAgICAgIDwvZmlsZT5cclxuXHJcbiAgICAgIDxmaWxlIG5hbWU9XCJzY3JpcHQuanNcIj5cclxuICAgICAgICBhbmd1bGFyLm1vZHVsZSgnbmdWaWV3RXhhbXBsZScsIFsnbmdSb3V0ZScsICduZ0FuaW1hdGUnXSlcclxuICAgICAgICAgIC5jb25maWcoWyckcm91dGVQcm92aWRlcicsICckbG9jYXRpb25Qcm92aWRlcicsXHJcbiAgICAgICAgICAgIGZ1bmN0aW9uKCRyb3V0ZVByb3ZpZGVyLCAkbG9jYXRpb25Qcm92aWRlcikge1xyXG4gICAgICAgICAgICAgICRyb3V0ZVByb3ZpZGVyXHJcbiAgICAgICAgICAgICAgICAud2hlbignL0Jvb2svOmJvb2tJZCcsIHtcclxuICAgICAgICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICdib29rLmh0bWwnLFxyXG4gICAgICAgICAgICAgICAgICBjb250cm9sbGVyOiAnQm9va0N0cmwnLFxyXG4gICAgICAgICAgICAgICAgICBjb250cm9sbGVyQXM6ICdib29rJ1xyXG4gICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgIC53aGVuKCcvQm9vay86Ym9va0lkL2NoLzpjaGFwdGVySWQnLCB7XHJcbiAgICAgICAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAnY2hhcHRlci5odG1sJyxcclxuICAgICAgICAgICAgICAgICAgY29udHJvbGxlcjogJ0NoYXB0ZXJDdHJsJyxcclxuICAgICAgICAgICAgICAgICAgY29udHJvbGxlckFzOiAnY2hhcHRlcidcclxuICAgICAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgICAkbG9jYXRpb25Qcm92aWRlci5odG1sNU1vZGUodHJ1ZSk7XHJcbiAgICAgICAgICB9XSlcclxuICAgICAgICAgIC5jb250cm9sbGVyKCdNYWluQ3RybCcsIFsnJHJvdXRlJywgJyRyb3V0ZVBhcmFtcycsICckbG9jYXRpb24nLFxyXG4gICAgICAgICAgICBmdW5jdGlvbigkcm91dGUsICRyb3V0ZVBhcmFtcywgJGxvY2F0aW9uKSB7XHJcbiAgICAgICAgICAgICAgdGhpcy4kcm91dGUgPSAkcm91dGU7XHJcbiAgICAgICAgICAgICAgdGhpcy4kbG9jYXRpb24gPSAkbG9jYXRpb247XHJcbiAgICAgICAgICAgICAgdGhpcy4kcm91dGVQYXJhbXMgPSAkcm91dGVQYXJhbXM7XHJcbiAgICAgICAgICB9XSlcclxuICAgICAgICAgIC5jb250cm9sbGVyKCdCb29rQ3RybCcsIFsnJHJvdXRlUGFyYW1zJywgZnVuY3Rpb24oJHJvdXRlUGFyYW1zKSB7XHJcbiAgICAgICAgICAgIHRoaXMubmFtZSA9IFwiQm9va0N0cmxcIjtcclxuICAgICAgICAgICAgdGhpcy5wYXJhbXMgPSAkcm91dGVQYXJhbXM7XHJcbiAgICAgICAgICB9XSlcclxuICAgICAgICAgIC5jb250cm9sbGVyKCdDaGFwdGVyQ3RybCcsIFsnJHJvdXRlUGFyYW1zJywgZnVuY3Rpb24oJHJvdXRlUGFyYW1zKSB7XHJcbiAgICAgICAgICAgIHRoaXMubmFtZSA9IFwiQ2hhcHRlckN0cmxcIjtcclxuICAgICAgICAgICAgdGhpcy5wYXJhbXMgPSAkcm91dGVQYXJhbXM7XHJcbiAgICAgICAgICB9XSk7XHJcblxyXG4gICAgICA8L2ZpbGU+XHJcblxyXG4gICAgICA8ZmlsZSBuYW1lPVwicHJvdHJhY3Rvci5qc1wiIHR5cGU9XCJwcm90cmFjdG9yXCI+XHJcbiAgICAgICAgaXQoJ3Nob3VsZCBsb2FkIGFuZCBjb21waWxlIGNvcnJlY3QgdGVtcGxhdGUnLCBmdW5jdGlvbigpIHtcclxuICAgICAgICAgIGVsZW1lbnQoYnkubGlua1RleHQoJ01vYnk6IENoMScpKS5jbGljaygpO1xyXG4gICAgICAgICAgdmFyIGNvbnRlbnQgPSBlbGVtZW50KGJ5LmNzcygnW25nLXZpZXddJykpLmdldFRleHQoKTtcclxuICAgICAgICAgIGV4cGVjdChjb250ZW50KS50b01hdGNoKC9jb250cm9sbGVyXFw6IENoYXB0ZXJDdHJsLyk7XHJcbiAgICAgICAgICBleHBlY3QoY29udGVudCkudG9NYXRjaCgvQm9vayBJZFxcOiBNb2J5Lyk7XHJcbiAgICAgICAgICBleHBlY3QoY29udGVudCkudG9NYXRjaCgvQ2hhcHRlciBJZFxcOiAxLyk7XHJcblxyXG4gICAgICAgICAgZWxlbWVudChieS5wYXJ0aWFsTGlua1RleHQoJ1NjYXJsZXQnKSkuY2xpY2soKTtcclxuXHJcbiAgICAgICAgICBjb250ZW50ID0gZWxlbWVudChieS5jc3MoJ1tuZy12aWV3XScpKS5nZXRUZXh0KCk7XHJcbiAgICAgICAgICBleHBlY3QoY29udGVudCkudG9NYXRjaCgvY29udHJvbGxlclxcOiBCb29rQ3RybC8pO1xyXG4gICAgICAgICAgZXhwZWN0KGNvbnRlbnQpLnRvTWF0Y2goL0Jvb2sgSWRcXDogU2NhcmxldC8pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICA8L2ZpbGU+XHJcbiAgICA8L2V4YW1wbGU+XHJcbiAqL1xyXG5cclxuXHJcbi8qKlxyXG4gKiBAbmdkb2MgZXZlbnRcclxuICogQG5hbWUgbmdWaWV3IyR2aWV3Q29udGVudExvYWRlZFxyXG4gKiBAZXZlbnRUeXBlIGVtaXQgb24gdGhlIGN1cnJlbnQgbmdWaWV3IHNjb3BlXHJcbiAqIEBkZXNjcmlwdGlvblxyXG4gKiBFbWl0dGVkIGV2ZXJ5IHRpbWUgdGhlIG5nVmlldyBjb250ZW50IGlzIHJlbG9hZGVkLlxyXG4gKi9cclxubmdWaWV3RmFjdG9yeS4kaW5qZWN0ID0gWyckcm91dGUnLCAnJGFuY2hvclNjcm9sbCcsICckYW5pbWF0ZSddO1xyXG5mdW5jdGlvbiBuZ1ZpZXdGYWN0b3J5KCAgICRyb3V0ZSwgICAkYW5jaG9yU2Nyb2xsLCAgICRhbmltYXRlKSB7XHJcbiAgcmV0dXJuIHtcclxuICAgIHJlc3RyaWN0OiAnRUNBJyxcclxuICAgIHRlcm1pbmFsOiB0cnVlLFxyXG4gICAgcHJpb3JpdHk6IDQwMCxcclxuICAgIHRyYW5zY2x1ZGU6ICdlbGVtZW50JyxcclxuICAgIGxpbms6IGZ1bmN0aW9uKHNjb3BlLCAkZWxlbWVudCwgYXR0ciwgY3RybCwgJHRyYW5zY2x1ZGUpIHtcclxuICAgICAgICB2YXIgY3VycmVudFNjb3BlLFxyXG4gICAgICAgICAgICBjdXJyZW50RWxlbWVudCxcclxuICAgICAgICAgICAgcHJldmlvdXNMZWF2ZUFuaW1hdGlvbixcclxuICAgICAgICAgICAgYXV0b1Njcm9sbEV4cCA9IGF0dHIuYXV0b3Njcm9sbCxcclxuICAgICAgICAgICAgb25sb2FkRXhwID0gYXR0ci5vbmxvYWQgfHwgJyc7XHJcblxyXG4gICAgICAgIHNjb3BlLiRvbignJHJvdXRlQ2hhbmdlU3VjY2VzcycsIHVwZGF0ZSk7XHJcbiAgICAgICAgdXBkYXRlKCk7XHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIGNsZWFudXBMYXN0VmlldygpIHtcclxuICAgICAgICAgIGlmKHByZXZpb3VzTGVhdmVBbmltYXRpb24pIHtcclxuICAgICAgICAgICAgJGFuaW1hdGUuY2FuY2VsKHByZXZpb3VzTGVhdmVBbmltYXRpb24pO1xyXG4gICAgICAgICAgICBwcmV2aW91c0xlYXZlQW5pbWF0aW9uID0gbnVsbDtcclxuICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICBpZihjdXJyZW50U2NvcGUpIHtcclxuICAgICAgICAgICAgY3VycmVudFNjb3BlLiRkZXN0cm95KCk7XHJcbiAgICAgICAgICAgIGN1cnJlbnRTY29wZSA9IG51bGw7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICBpZihjdXJyZW50RWxlbWVudCkge1xyXG4gICAgICAgICAgICBwcmV2aW91c0xlYXZlQW5pbWF0aW9uID0gJGFuaW1hdGUubGVhdmUoY3VycmVudEVsZW1lbnQpO1xyXG4gICAgICAgICAgICBwcmV2aW91c0xlYXZlQW5pbWF0aW9uLnRoZW4oZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgcHJldmlvdXNMZWF2ZUFuaW1hdGlvbiA9IG51bGw7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICBjdXJyZW50RWxlbWVudCA9IG51bGw7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBmdW5jdGlvbiB1cGRhdGUoKSB7XHJcbiAgICAgICAgICB2YXIgbG9jYWxzID0gJHJvdXRlLmN1cnJlbnQgJiYgJHJvdXRlLmN1cnJlbnQubG9jYWxzLFxyXG4gICAgICAgICAgICAgIHRlbXBsYXRlID0gbG9jYWxzICYmIGxvY2Fscy4kdGVtcGxhdGU7XHJcblxyXG4gICAgICAgICAgaWYgKGFuZ3VsYXIuaXNEZWZpbmVkKHRlbXBsYXRlKSkge1xyXG4gICAgICAgICAgICB2YXIgbmV3U2NvcGUgPSBzY29wZS4kbmV3KCk7XHJcbiAgICAgICAgICAgIHZhciBjdXJyZW50ID0gJHJvdXRlLmN1cnJlbnQ7XHJcblxyXG4gICAgICAgICAgICAvLyBOb3RlOiBUaGlzIHdpbGwgYWxzbyBsaW5rIGFsbCBjaGlsZHJlbiBvZiBuZy12aWV3IHRoYXQgd2VyZSBjb250YWluZWQgaW4gdGhlIG9yaWdpbmFsXHJcbiAgICAgICAgICAgIC8vIGh0bWwuIElmIHRoYXQgY29udGVudCBjb250YWlucyBjb250cm9sbGVycywgLi4uIHRoZXkgY291bGQgcG9sbHV0ZS9jaGFuZ2UgdGhlIHNjb3BlLlxyXG4gICAgICAgICAgICAvLyBIb3dldmVyLCB1c2luZyBuZy12aWV3IG9uIGFuIGVsZW1lbnQgd2l0aCBhZGRpdGlvbmFsIGNvbnRlbnQgZG9lcyBub3QgbWFrZSBzZW5zZS4uLlxyXG4gICAgICAgICAgICAvLyBOb3RlOiBXZSBjYW4ndCByZW1vdmUgdGhlbSBpbiB0aGUgY2xvbmVBdHRjaEZuIG9mICR0cmFuc2NsdWRlIGFzIHRoYXRcclxuICAgICAgICAgICAgLy8gZnVuY3Rpb24gaXMgY2FsbGVkIGJlZm9yZSBsaW5raW5nIHRoZSBjb250ZW50LCB3aGljaCB3b3VsZCBhcHBseSBjaGlsZFxyXG4gICAgICAgICAgICAvLyBkaXJlY3RpdmVzIHRvIG5vbiBleGlzdGluZyBlbGVtZW50cy5cclxuICAgICAgICAgICAgdmFyIGNsb25lID0gJHRyYW5zY2x1ZGUobmV3U2NvcGUsIGZ1bmN0aW9uKGNsb25lKSB7XHJcbiAgICAgICAgICAgICAgJGFuaW1hdGUuZW50ZXIoY2xvbmUsIG51bGwsIGN1cnJlbnRFbGVtZW50IHx8ICRlbGVtZW50KS50aGVuKGZ1bmN0aW9uIG9uTmdWaWV3RW50ZXIgKCkge1xyXG4gICAgICAgICAgICAgICAgaWYgKGFuZ3VsYXIuaXNEZWZpbmVkKGF1dG9TY3JvbGxFeHApXHJcbiAgICAgICAgICAgICAgICAgICYmICghYXV0b1Njcm9sbEV4cCB8fCBzY29wZS4kZXZhbChhdXRvU2Nyb2xsRXhwKSkpIHtcclxuICAgICAgICAgICAgICAgICAgJGFuY2hvclNjcm9sbCgpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgIGNsZWFudXBMYXN0VmlldygpO1xyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIGN1cnJlbnRFbGVtZW50ID0gY2xvbmU7XHJcbiAgICAgICAgICAgIGN1cnJlbnRTY29wZSA9IGN1cnJlbnQuc2NvcGUgPSBuZXdTY29wZTtcclxuICAgICAgICAgICAgY3VycmVudFNjb3BlLiRlbWl0KCckdmlld0NvbnRlbnRMb2FkZWQnKTtcclxuICAgICAgICAgICAgY3VycmVudFNjb3BlLiRldmFsKG9ubG9hZEV4cCk7XHJcbiAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBjbGVhbnVwTGFzdFZpZXcoKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgfTtcclxufVxyXG5cclxuLy8gVGhpcyBkaXJlY3RpdmUgaXMgY2FsbGVkIGR1cmluZyB0aGUgJHRyYW5zY2x1ZGUgY2FsbCBvZiB0aGUgZmlyc3QgYG5nVmlld2AgZGlyZWN0aXZlLlxyXG4vLyBJdCB3aWxsIHJlcGxhY2UgYW5kIGNvbXBpbGUgdGhlIGNvbnRlbnQgb2YgdGhlIGVsZW1lbnQgd2l0aCB0aGUgbG9hZGVkIHRlbXBsYXRlLlxyXG4vLyBXZSBuZWVkIHRoaXMgZGlyZWN0aXZlIHNvIHRoYXQgdGhlIGVsZW1lbnQgY29udGVudCBpcyBhbHJlYWR5IGZpbGxlZCB3aGVuXHJcbi8vIHRoZSBsaW5rIGZ1bmN0aW9uIG9mIGFub3RoZXIgZGlyZWN0aXZlIG9uIHRoZSBzYW1lIGVsZW1lbnQgYXMgbmdWaWV3XHJcbi8vIGlzIGNhbGxlZC5cclxubmdWaWV3RmlsbENvbnRlbnRGYWN0b3J5LiRpbmplY3QgPSBbJyRjb21waWxlJywgJyRjb250cm9sbGVyJywgJyRyb3V0ZSddO1xyXG5mdW5jdGlvbiBuZ1ZpZXdGaWxsQ29udGVudEZhY3RvcnkoJGNvbXBpbGUsICRjb250cm9sbGVyLCAkcm91dGUpIHtcclxuICByZXR1cm4ge1xyXG4gICAgcmVzdHJpY3Q6ICdFQ0EnLFxyXG4gICAgcHJpb3JpdHk6IC00MDAsXHJcbiAgICBsaW5rOiBmdW5jdGlvbihzY29wZSwgJGVsZW1lbnQpIHtcclxuICAgICAgdmFyIGN1cnJlbnQgPSAkcm91dGUuY3VycmVudCxcclxuICAgICAgICAgIGxvY2FscyA9IGN1cnJlbnQubG9jYWxzO1xyXG5cclxuICAgICAgJGVsZW1lbnQuaHRtbChsb2NhbHMuJHRlbXBsYXRlKTtcclxuXHJcbiAgICAgIHZhciBsaW5rID0gJGNvbXBpbGUoJGVsZW1lbnQuY29udGVudHMoKSk7XHJcblxyXG4gICAgICBpZiAoY3VycmVudC5jb250cm9sbGVyKSB7XHJcbiAgICAgICAgbG9jYWxzLiRzY29wZSA9IHNjb3BlO1xyXG4gICAgICAgIHZhciBjb250cm9sbGVyID0gJGNvbnRyb2xsZXIoY3VycmVudC5jb250cm9sbGVyLCBsb2NhbHMpO1xyXG4gICAgICAgIGlmIChjdXJyZW50LmNvbnRyb2xsZXJBcykge1xyXG4gICAgICAgICAgc2NvcGVbY3VycmVudC5jb250cm9sbGVyQXNdID0gY29udHJvbGxlcjtcclxuICAgICAgICB9XHJcbiAgICAgICAgJGVsZW1lbnQuZGF0YSgnJG5nQ29udHJvbGxlckNvbnRyb2xsZXInLCBjb250cm9sbGVyKTtcclxuICAgICAgICAkZWxlbWVudC5jaGlsZHJlbigpLmRhdGEoJyRuZ0NvbnRyb2xsZXJDb250cm9sbGVyJywgY29udHJvbGxlcik7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGxpbmsoc2NvcGUpO1xyXG4gICAgfVxyXG4gIH07XHJcbn1cclxuXHJcblxyXG59KSh3aW5kb3csIHdpbmRvdy5hbmd1bGFyKTtcclxuIiwiLyohXHJcbiAqIGFuZ3VsYXItdHJhbnNsYXRlIC0gdjIuMTMuMCAtIDIwMTYtMTAtMzBcclxuICogXHJcbiAqIENvcHlyaWdodCAoYykgMjAxNiBUaGUgYW5ndWxhci10cmFuc2xhdGUgdGVhbSwgUGFzY2FsIFByZWNodDsgTGljZW5zZWQgTUlUXHJcbiAqL1xyXG4hZnVuY3Rpb24oYSxiKXtcImZ1bmN0aW9uXCI9PXR5cGVvZiBkZWZpbmUmJmRlZmluZS5hbWQ/ZGVmaW5lKFtdLGZ1bmN0aW9uKCl7cmV0dXJuIGIoKX0pOlwib2JqZWN0XCI9PXR5cGVvZiBleHBvcnRzP21vZHVsZS5leHBvcnRzPWIoKTpiKCl9KHRoaXMsZnVuY3Rpb24oKXtmdW5jdGlvbiBhKGEpe1widXNlIHN0cmljdFwiO3ZhciBiPWEuc3RvcmFnZUtleSgpLGM9YS5zdG9yYWdlKCksZD1mdW5jdGlvbigpe3ZhciBkPWEucHJlZmVycmVkTGFuZ3VhZ2UoKTthbmd1bGFyLmlzU3RyaW5nKGQpP2EudXNlKGQpOmMucHV0KGIsYS51c2UoKSl9O2QuZGlzcGxheU5hbWU9XCJmYWxsYmFja0Zyb21JbmNvcnJlY3RTdG9yYWdlVmFsdWVcIixjP2MuZ2V0KGIpP2EudXNlKGMuZ2V0KGIpKS5jYXRjaChkKTpkKCk6YW5ndWxhci5pc1N0cmluZyhhLnByZWZlcnJlZExhbmd1YWdlKCkpJiZhLnVzZShhLnByZWZlcnJlZExhbmd1YWdlKCkpfWZ1bmN0aW9uIGIoKXtcInVzZSBzdHJpY3RcIjt2YXIgYSxiLGMsZD1udWxsLGU9ITEsZj0hMTtjPXtzYW5pdGl6ZTpmdW5jdGlvbihhLGIpe3JldHVyblwidGV4dFwiPT09YiYmKGE9aChhKSksYX0sZXNjYXBlOmZ1bmN0aW9uKGEsYil7cmV0dXJuXCJ0ZXh0XCI9PT1iJiYoYT1nKGEpKSxhfSxzYW5pdGl6ZVBhcmFtZXRlcnM6ZnVuY3Rpb24oYSxiKXtyZXR1cm5cInBhcmFtc1wiPT09YiYmKGE9aihhLGgpKSxhfSxlc2NhcGVQYXJhbWV0ZXJzOmZ1bmN0aW9uKGEsYil7cmV0dXJuXCJwYXJhbXNcIj09PWImJihhPWooYSxnKSksYX0sc2NlOmZ1bmN0aW9uKGEsYixjKXtyZXR1cm5cInRleHRcIj09PWI/YT1pKGEpOlwicGFyYW1zXCI9PT1iJiZcImZpbHRlclwiIT09YyYmKGE9aihhLGcpKSxhfSxzY2VQYXJhbWV0ZXJzOmZ1bmN0aW9uKGEsYil7cmV0dXJuXCJwYXJhbXNcIj09PWImJihhPWooYSxpKSksYX19LGMuZXNjYXBlZD1jLmVzY2FwZVBhcmFtZXRlcnMsdGhpcy5hZGRTdHJhdGVneT1mdW5jdGlvbihhLGIpe3JldHVybiBjW2FdPWIsdGhpc30sdGhpcy5yZW1vdmVTdHJhdGVneT1mdW5jdGlvbihhKXtyZXR1cm4gZGVsZXRlIGNbYV0sdGhpc30sdGhpcy51c2VTdHJhdGVneT1mdW5jdGlvbihhKXtyZXR1cm4gZT0hMCxkPWEsdGhpc30sdGhpcy4kZ2V0PVtcIiRpbmplY3RvclwiLFwiJGxvZ1wiLGZ1bmN0aW9uKGcsaCl7dmFyIGk9e30saj1mdW5jdGlvbihhLGIsZCxlKXtyZXR1cm4gYW5ndWxhci5mb3JFYWNoKGUsZnVuY3Rpb24oZSl7aWYoYW5ndWxhci5pc0Z1bmN0aW9uKGUpKWE9ZShhLGIsZCk7ZWxzZSBpZihhbmd1bGFyLmlzRnVuY3Rpb24oY1tlXSkpYT1jW2VdKGEsYixkKTtlbHNle2lmKCFhbmd1bGFyLmlzU3RyaW5nKGNbZV0pKXRocm93IG5ldyBFcnJvcihcInBhc2NhbHByZWNodC50cmFuc2xhdGUuJHRyYW5zbGF0ZVNhbml0aXphdGlvbjogVW5rbm93biBzYW5pdGl6YXRpb24gc3RyYXRlZ3k6ICdcIitlK1wiJ1wiKTtpZighaVtjW2VdXSl0cnl7aVtjW2VdXT1nLmdldChjW2VdKX1jYXRjaChhKXt0aHJvdyBpW2NbZV1dPWZ1bmN0aW9uKCl7fSxuZXcgRXJyb3IoXCJwYXNjYWxwcmVjaHQudHJhbnNsYXRlLiR0cmFuc2xhdGVTYW5pdGl6YXRpb246IFVua25vd24gc2FuaXRpemF0aW9uIHN0cmF0ZWd5OiAnXCIrZStcIidcIil9YT1pW2NbZV1dKGEsYixkKX19KSxhfSxrPWZ1bmN0aW9uKCl7ZXx8Znx8KGgud2FybihcInBhc2NhbHByZWNodC50cmFuc2xhdGUuJHRyYW5zbGF0ZVNhbml0aXphdGlvbjogTm8gc2FuaXRpemF0aW9uIHN0cmF0ZWd5IGhhcyBiZWVuIGNvbmZpZ3VyZWQuIFRoaXMgY2FuIGhhdmUgc2VyaW91cyBzZWN1cml0eSBpbXBsaWNhdGlvbnMuIFNlZSBodHRwOi8vYW5ndWxhci10cmFuc2xhdGUuZ2l0aHViLmlvL2RvY3MvIy9ndWlkZS8xOV9zZWN1cml0eSBmb3IgZGV0YWlscy5cIiksZj0hMCl9O3JldHVybiBnLmhhcyhcIiRzYW5pdGl6ZVwiKSYmKGE9Zy5nZXQoXCIkc2FuaXRpemVcIikpLGcuaGFzKFwiJHNjZVwiKSYmKGI9Zy5nZXQoXCIkc2NlXCIpKSx7dXNlU3RyYXRlZ3k6ZnVuY3Rpb24oYSl7cmV0dXJuIGZ1bmN0aW9uKGIpe2EudXNlU3RyYXRlZ3koYil9fSh0aGlzKSxzYW5pdGl6ZTpmdW5jdGlvbihhLGIsYyxlKXtpZihkfHxrKCksY3x8bnVsbD09PWN8fChjPWQpLCFjKXJldHVybiBhO2V8fChlPVwic2VydmljZVwiKTt2YXIgZj1hbmd1bGFyLmlzQXJyYXkoYyk/YzpbY107cmV0dXJuIGooYSxiLGUsZil9fX1dO3ZhciBnPWZ1bmN0aW9uKGEpe3ZhciBiPWFuZ3VsYXIuZWxlbWVudChcIjxkaXY+PC9kaXY+XCIpO3JldHVybiBiLnRleHQoYSksYi5odG1sKCl9LGg9ZnVuY3Rpb24oYil7aWYoIWEpdGhyb3cgbmV3IEVycm9yKFwicGFzY2FscHJlY2h0LnRyYW5zbGF0ZS4kdHJhbnNsYXRlU2FuaXRpemF0aW9uOiBFcnJvciBjYW5ub3QgZmluZCAkc2FuaXRpemUgc2VydmljZS4gRWl0aGVyIGluY2x1ZGUgdGhlIG5nU2FuaXRpemUgbW9kdWxlIChodHRwczovL2RvY3MuYW5ndWxhcmpzLm9yZy9hcGkvbmdTYW5pdGl6ZSkgb3IgdXNlIGEgc2FuaXRpemF0aW9uIHN0cmF0ZWd5IHdoaWNoIGRvZXMgbm90IGRlcGVuZCBvbiAkc2FuaXRpemUsIHN1Y2ggYXMgJ2VzY2FwZScuXCIpO3JldHVybiBhKGIpfSxpPWZ1bmN0aW9uKGEpe2lmKCFiKXRocm93IG5ldyBFcnJvcihcInBhc2NhbHByZWNodC50cmFuc2xhdGUuJHRyYW5zbGF0ZVNhbml0aXphdGlvbjogRXJyb3IgY2Fubm90IGZpbmQgJHNjZSBzZXJ2aWNlLlwiKTtyZXR1cm4gYi50cnVzdEFzSHRtbChhKX0saj1mdW5jdGlvbihhLGIsYyl7aWYoYW5ndWxhci5pc0RhdGUoYSkpcmV0dXJuIGE7aWYoYW5ndWxhci5pc09iamVjdChhKSl7dmFyIGQ9YW5ndWxhci5pc0FycmF5KGEpP1tdOnt9O2lmKGMpe2lmKGMuaW5kZXhPZihhKT4tMSl0aHJvdyBuZXcgRXJyb3IoXCJwYXNjYWxwcmVjaHQudHJhbnNsYXRlLiR0cmFuc2xhdGVTYW5pdGl6YXRpb246IEVycm9yIGNhbm5vdCBpbnRlcnBvbGF0ZSBwYXJhbWV0ZXIgZHVlIHJlY3Vyc2l2ZSBvYmplY3RcIil9ZWxzZSBjPVtdO3JldHVybiBjLnB1c2goYSksYW5ndWxhci5mb3JFYWNoKGEsZnVuY3Rpb24oYSxlKXthbmd1bGFyLmlzRnVuY3Rpb24oYSl8fChkW2VdPWooYSxiLGMpKX0pLGMuc3BsaWNlKC0xLDEpLGR9cmV0dXJuIGFuZ3VsYXIuaXNOdW1iZXIoYSk/YTpiKGEpfX1mdW5jdGlvbiBjKGEsYixjLGQpe1widXNlIHN0cmljdFwiO3ZhciBlLGYsZyxoLGksaixrLGwsbSxuLG8scCxxLHIscyx0LHU9e30sdj1bXSx3PWEseD1bXSx5PVwidHJhbnNsYXRlLWNsb2FrXCIsej0hMSxBPSExLEI9XCIuXCIsQz0hMSxEPSExLEU9MCxGPSEwLEc9XCJkZWZhdWx0XCIsSD17ZGVmYXVsdDpmdW5jdGlvbihhKXtyZXR1cm4oYXx8XCJcIikuc3BsaXQoXCItXCIpLmpvaW4oXCJfXCIpfSxqYXZhOmZ1bmN0aW9uKGEpe3ZhciBiPShhfHxcIlwiKS5zcGxpdChcIi1cIikuam9pbihcIl9cIiksYz1iLnNwbGl0KFwiX1wiKTtyZXR1cm4gYy5sZW5ndGg+MT9jWzBdLnRvTG93ZXJDYXNlKCkrXCJfXCIrY1sxXS50b1VwcGVyQ2FzZSgpOmJ9LGJjcDQ3OmZ1bmN0aW9uKGEpe3ZhciBiPShhfHxcIlwiKS5zcGxpdChcIl9cIikuam9pbihcIi1cIiksYz1iLnNwbGl0KFwiLVwiKTtyZXR1cm4gYy5sZW5ndGg+MT9jWzBdLnRvTG93ZXJDYXNlKCkrXCItXCIrY1sxXS50b1VwcGVyQ2FzZSgpOmJ9LFwiaXNvNjM5LTFcIjpmdW5jdGlvbihhKXt2YXIgYj0oYXx8XCJcIikuc3BsaXQoXCJfXCIpLmpvaW4oXCItXCIpLGM9Yi5zcGxpdChcIi1cIik7cmV0dXJuIGNbMF0udG9Mb3dlckNhc2UoKX19LEk9XCIyLjEzLjBcIixKPWZ1bmN0aW9uKCl7aWYoYW5ndWxhci5pc0Z1bmN0aW9uKGQuZ2V0TG9jYWxlKSlyZXR1cm4gZC5nZXRMb2NhbGUoKTt2YXIgYSxjLGU9Yi4kZ2V0KCkubmF2aWdhdG9yLGY9W1wibGFuZ3VhZ2VcIixcImJyb3dzZXJMYW5ndWFnZVwiLFwic3lzdGVtTGFuZ3VhZ2VcIixcInVzZXJMYW5ndWFnZVwiXTtpZihhbmd1bGFyLmlzQXJyYXkoZS5sYW5ndWFnZXMpKWZvcihhPTA7YTxlLmxhbmd1YWdlcy5sZW5ndGg7YSsrKWlmKGM9ZS5sYW5ndWFnZXNbYV0sYyYmYy5sZW5ndGgpcmV0dXJuIGM7Zm9yKGE9MDthPGYubGVuZ3RoO2ErKylpZihjPWVbZlthXV0sYyYmYy5sZW5ndGgpcmV0dXJuIGM7cmV0dXJuIG51bGx9O0ouZGlzcGxheU5hbWU9XCJhbmd1bGFyLXRyYW5zbGF0ZS9zZXJ2aWNlOiBnZXRGaXJzdEJyb3dzZXJMYW5ndWFnZVwiO3ZhciBLPWZ1bmN0aW9uKCl7dmFyIGE9SigpfHxcIlwiO3JldHVybiBIW0ddJiYoYT1IW0ddKGEpKSxhfTtLLmRpc3BsYXlOYW1lPVwiYW5ndWxhci10cmFuc2xhdGUvc2VydmljZTogZ2V0TG9jYWxlXCI7dmFyIEw9ZnVuY3Rpb24oYSxiKXtmb3IodmFyIGM9MCxkPWEubGVuZ3RoO2M8ZDtjKyspaWYoYVtjXT09PWIpcmV0dXJuIGM7cmV0dXJuLTF9LE09ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy50b1N0cmluZygpLnJlcGxhY2UoL15cXHMrfFxccyskL2csXCJcIil9LE49ZnVuY3Rpb24oYSl7aWYoYSl7Zm9yKHZhciBiPVtdLGM9YW5ndWxhci5sb3dlcmNhc2UoYSksZD0wLGU9di5sZW5ndGg7ZDxlO2QrKyliLnB1c2goYW5ndWxhci5sb3dlcmNhc2UodltkXSkpO2lmKEwoYixjKT4tMSlyZXR1cm4gYTtpZihmKXt2YXIgZztmb3IodmFyIGggaW4gZilpZihmLmhhc093blByb3BlcnR5KGgpKXt2YXIgaT0hMSxqPU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChmLGgpJiZhbmd1bGFyLmxvd2VyY2FzZShoKT09PWFuZ3VsYXIubG93ZXJjYXNlKGEpO2lmKFwiKlwiPT09aC5zbGljZSgtMSkmJihpPWguc2xpY2UoMCwtMSk9PT1hLnNsaWNlKDAsaC5sZW5ndGgtMSkpLChqfHxpKSYmKGc9ZltoXSxMKGIsYW5ndWxhci5sb3dlcmNhc2UoZykpPi0xKSlyZXR1cm4gZ319dmFyIGs9YS5zcGxpdChcIl9cIik7cmV0dXJuIGsubGVuZ3RoPjEmJkwoYixhbmd1bGFyLmxvd2VyY2FzZShrWzBdKSk+LTE/a1swXTp2b2lkIDB9fSxPPWZ1bmN0aW9uKGEsYil7aWYoIWEmJiFiKXJldHVybiB1O2lmKGEmJiFiKXtpZihhbmd1bGFyLmlzU3RyaW5nKGEpKXJldHVybiB1W2FdfWVsc2UgYW5ndWxhci5pc09iamVjdCh1W2FdKXx8KHVbYV09e30pLGFuZ3VsYXIuZXh0ZW5kKHVbYV0sUChiKSk7cmV0dXJuIHRoaXN9O3RoaXMudHJhbnNsYXRpb25zPU8sdGhpcy5jbG9ha0NsYXNzTmFtZT1mdW5jdGlvbihhKXtyZXR1cm4gYT8oeT1hLHRoaXMpOnl9LHRoaXMubmVzdGVkT2JqZWN0RGVsaW1ldGVyPWZ1bmN0aW9uKGEpe3JldHVybiBhPyhCPWEsdGhpcyk6Qn07dmFyIFA9ZnVuY3Rpb24oYSxiLGMsZCl7dmFyIGUsZixnLGg7Ynx8KGI9W10pLGN8fChjPXt9KTtmb3IoZSBpbiBhKU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChhLGUpJiYoaD1hW2VdLGFuZ3VsYXIuaXNPYmplY3QoaCk/UChoLGIuY29uY2F0KGUpLGMsZSk6KGY9Yi5sZW5ndGg/XCJcIitiLmpvaW4oQikrQitlOmUsYi5sZW5ndGgmJmU9PT1kJiYoZz1cIlwiK2Iuam9pbihCKSxjW2ddPVwiQDpcIitmKSxjW2ZdPWgpKTtyZXR1cm4gY307UC5kaXNwbGF5TmFtZT1cImZsYXRPYmplY3RcIix0aGlzLmFkZEludGVycG9sYXRpb249ZnVuY3Rpb24oYSl7cmV0dXJuIHgucHVzaChhKSx0aGlzfSx0aGlzLnVzZU1lc3NhZ2VGb3JtYXRJbnRlcnBvbGF0aW9uPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudXNlSW50ZXJwb2xhdGlvbihcIiR0cmFuc2xhdGVNZXNzYWdlRm9ybWF0SW50ZXJwb2xhdGlvblwiKX0sdGhpcy51c2VJbnRlcnBvbGF0aW9uPWZ1bmN0aW9uKGEpe3JldHVybiBuPWEsdGhpc30sdGhpcy51c2VTYW5pdGl6ZVZhbHVlU3RyYXRlZ3k9ZnVuY3Rpb24oYSl7cmV0dXJuIGMudXNlU3RyYXRlZ3koYSksdGhpc30sdGhpcy5wcmVmZXJyZWRMYW5ndWFnZT1mdW5jdGlvbihhKXtyZXR1cm4gYT8oUShhKSx0aGlzKTplfTt2YXIgUT1mdW5jdGlvbihhKXtyZXR1cm4gYSYmKGU9YSksZX07dGhpcy50cmFuc2xhdGlvbk5vdEZvdW5kSW5kaWNhdG9yPWZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLnRyYW5zbGF0aW9uTm90Rm91bmRJbmRpY2F0b3JMZWZ0KGEpLHRoaXMudHJhbnNsYXRpb25Ob3RGb3VuZEluZGljYXRvclJpZ2h0KGEpLHRoaXN9LHRoaXMudHJhbnNsYXRpb25Ob3RGb3VuZEluZGljYXRvckxlZnQ9ZnVuY3Rpb24oYSl7cmV0dXJuIGE/KHE9YSx0aGlzKTpxfSx0aGlzLnRyYW5zbGF0aW9uTm90Rm91bmRJbmRpY2F0b3JSaWdodD1mdW5jdGlvbihhKXtyZXR1cm4gYT8ocj1hLHRoaXMpOnJ9LHRoaXMuZmFsbGJhY2tMYW5ndWFnZT1mdW5jdGlvbihhKXtyZXR1cm4gUihhKSx0aGlzfTt2YXIgUj1mdW5jdGlvbihhKXtyZXR1cm4gYT8oYW5ndWxhci5pc1N0cmluZyhhKT8oaD0hMCxnPVthXSk6YW5ndWxhci5pc0FycmF5KGEpJiYoaD0hMSxnPWEpLGFuZ3VsYXIuaXNTdHJpbmcoZSkmJkwoZyxlKTwwJiZnLnB1c2goZSksdGhpcyk6aD9nWzBdOmd9O3RoaXMudXNlPWZ1bmN0aW9uKGEpe2lmKGEpe2lmKCF1W2FdJiYhbyl0aHJvdyBuZXcgRXJyb3IoXCIkdHJhbnNsYXRlUHJvdmlkZXIgY291bGRuJ3QgZmluZCB0cmFuc2xhdGlvblRhYmxlIGZvciBsYW5nS2V5OiAnXCIrYStcIidcIik7cmV0dXJuIGk9YSx0aGlzfXJldHVybiBpfSx0aGlzLnJlc29sdmVDbGllbnRMb2NhbGU9ZnVuY3Rpb24oKXtyZXR1cm4gSygpfTt2YXIgUz1mdW5jdGlvbihhKXtyZXR1cm4gYT8odz1hLHRoaXMpOmw/bCt3Ond9O3RoaXMuc3RvcmFnZUtleT1TLHRoaXMudXNlVXJsTG9hZGVyPWZ1bmN0aW9uKGEsYil7cmV0dXJuIHRoaXMudXNlTG9hZGVyKFwiJHRyYW5zbGF0ZVVybExvYWRlclwiLGFuZ3VsYXIuZXh0ZW5kKHt1cmw6YX0sYikpfSx0aGlzLnVzZVN0YXRpY0ZpbGVzTG9hZGVyPWZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLnVzZUxvYWRlcihcIiR0cmFuc2xhdGVTdGF0aWNGaWxlc0xvYWRlclwiLGEpfSx0aGlzLnVzZUxvYWRlcj1mdW5jdGlvbihhLGIpe3JldHVybiBvPWEscD1ifHx7fSx0aGlzfSx0aGlzLnVzZUxvY2FsU3RvcmFnZT1mdW5jdGlvbigpe3JldHVybiB0aGlzLnVzZVN0b3JhZ2UoXCIkdHJhbnNsYXRlTG9jYWxTdG9yYWdlXCIpfSx0aGlzLnVzZUNvb2tpZVN0b3JhZ2U9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy51c2VTdG9yYWdlKFwiJHRyYW5zbGF0ZUNvb2tpZVN0b3JhZ2VcIil9LHRoaXMudXNlU3RvcmFnZT1mdW5jdGlvbihhKXtyZXR1cm4gaz1hLHRoaXN9LHRoaXMuc3RvcmFnZVByZWZpeD1mdW5jdGlvbihhKXtyZXR1cm4gYT8obD1hLHRoaXMpOmF9LHRoaXMudXNlTWlzc2luZ1RyYW5zbGF0aW9uSGFuZGxlckxvZz1mdW5jdGlvbigpe3JldHVybiB0aGlzLnVzZU1pc3NpbmdUcmFuc2xhdGlvbkhhbmRsZXIoXCIkdHJhbnNsYXRlTWlzc2luZ1RyYW5zbGF0aW9uSGFuZGxlckxvZ1wiKX0sdGhpcy51c2VNaXNzaW5nVHJhbnNsYXRpb25IYW5kbGVyPWZ1bmN0aW9uKGEpe3JldHVybiBtPWEsdGhpc30sdGhpcy51c2VQb3N0Q29tcGlsaW5nPWZ1bmN0aW9uKGEpe3JldHVybiB6PSEhYSx0aGlzfSx0aGlzLmZvcmNlQXN5bmNSZWxvYWQ9ZnVuY3Rpb24oYSl7cmV0dXJuIEE9ISFhLHRoaXN9LHRoaXMudW5pZm9ybUxhbmd1YWdlVGFnPWZ1bmN0aW9uKGEpe3JldHVybiBhP2FuZ3VsYXIuaXNTdHJpbmcoYSkmJihhPXtzdGFuZGFyZDphfSk6YT17fSxHPWEuc3RhbmRhcmQsdGhpc30sdGhpcy5kZXRlcm1pbmVQcmVmZXJyZWRMYW5ndWFnZT1mdW5jdGlvbihhKXt2YXIgYj1hJiZhbmd1bGFyLmlzRnVuY3Rpb24oYSk/YSgpOksoKTtyZXR1cm4gZT12Lmxlbmd0aD9OKGIpfHxiOmIsdGhpc30sdGhpcy5yZWdpc3RlckF2YWlsYWJsZUxhbmd1YWdlS2V5cz1mdW5jdGlvbihhLGIpe3JldHVybiBhPyh2PWEsYiYmKGY9YiksdGhpcyk6dn0sdGhpcy51c2VMb2FkZXJDYWNoZT1mdW5jdGlvbihhKXtyZXR1cm4gYT09PSExP3M9dm9pZCAwOmE9PT0hMD9zPSEwOlwidW5kZWZpbmVkXCI9PXR5cGVvZiBhP3M9XCIkdHJhbnNsYXRpb25DYWNoZVwiOmEmJihzPWEpLHRoaXN9LHRoaXMuZGlyZWN0aXZlUHJpb3JpdHk9ZnVuY3Rpb24oYSl7cmV0dXJuIHZvaWQgMD09PWE/RTooRT1hLHRoaXMpfSx0aGlzLnN0YXRlZnVsRmlsdGVyPWZ1bmN0aW9uKGEpe3JldHVybiB2b2lkIDA9PT1hP0Y6KEY9YSx0aGlzKX0sdGhpcy5wb3N0UHJvY2Vzcz1mdW5jdGlvbihhKXtyZXR1cm4gdD1hP2E6dm9pZCAwLHRoaXN9LHRoaXMua2VlcENvbnRlbnQ9ZnVuY3Rpb24oYSl7cmV0dXJuIEQ9ISFhLHRoaXN9LHRoaXMuJGdldD1bXCIkbG9nXCIsXCIkaW5qZWN0b3JcIixcIiRyb290U2NvcGVcIixcIiRxXCIsZnVuY3Rpb24oYSxiLGMsZCl7dmFyIGYsbCxHLEg9Yi5nZXQobnx8XCIkdHJhbnNsYXRlRGVmYXVsdEludGVycG9sYXRpb25cIiksSj0hMSxUPXt9LFU9e30sVj1mdW5jdGlvbihhLGIsYyxoLGopeyFpJiZlJiYoaT1lKTt2YXIgbT1qJiZqIT09aT9OKGopfHxqOmk7aWYoaiYma2EoaiksYW5ndWxhci5pc0FycmF5KGEpKXt2YXIgbj1mdW5jdGlvbihhKXtmb3IodmFyIGU9e30sZj1bXSxnPWZ1bmN0aW9uKGEpe3ZhciBmPWQuZGVmZXIoKSxnPWZ1bmN0aW9uKGIpe2VbYV09YixmLnJlc29sdmUoW2EsYl0pfTtyZXR1cm4gVihhLGIsYyxoLGopLnRoZW4oZyxnKSxmLnByb21pc2V9LGk9MCxrPWEubGVuZ3RoO2k8aztpKyspZi5wdXNoKGcoYVtpXSkpO3JldHVybiBkLmFsbChmKS50aGVuKGZ1bmN0aW9uKCl7cmV0dXJuIGV9KX07cmV0dXJuIG4oYSl9dmFyIG89ZC5kZWZlcigpO2EmJihhPU0uYXBwbHkoYSkpO3ZhciBwPWZ1bmN0aW9uKCl7dmFyIGE9ZT9VW2VdOlVbbV07aWYobD0wLGsmJiFhKXt2YXIgYj1mLmdldCh3KTtpZihhPVVbYl0sZyYmZy5sZW5ndGgpe3ZhciBjPUwoZyxiKTtsPTA9PT1jPzE6MCxMKGcsZSk8MCYmZy5wdXNoKGUpfX1yZXR1cm4gYX0oKTtpZihwKXt2YXIgcT1mdW5jdGlvbigpe2p8fChtPWkpLGdhKGEsYixjLGgsbSkudGhlbihvLnJlc29sdmUsby5yZWplY3QpfTtxLmRpc3BsYXlOYW1lPVwicHJvbWlzZVJlc29sdmVkXCIscC5maW5hbGx5KHEpfWVsc2UgZ2EoYSxiLGMsaCxtKS50aGVuKG8ucmVzb2x2ZSxvLnJlamVjdCk7cmV0dXJuIG8ucHJvbWlzZX0sVz1mdW5jdGlvbihhKXtyZXR1cm4gcSYmKGE9W3EsYV0uam9pbihcIiBcIikpLHImJihhPVthLHJdLmpvaW4oXCIgXCIpKSxhfSxYPWZ1bmN0aW9uKGEpe2k9YSxrJiZmLnB1dChWLnN0b3JhZ2VLZXkoKSxpKSxjLiRlbWl0KFwiJHRyYW5zbGF0ZUNoYW5nZVN1Y2Nlc3NcIix7bGFuZ3VhZ2U6YX0pLEguc2V0TG9jYWxlKGkpO3ZhciBiPWZ1bmN0aW9uKGEsYil7VFtiXS5zZXRMb2NhbGUoaSl9O2IuZGlzcGxheU5hbWU9XCJlYWNoSW50ZXJwb2xhdG9yTG9jYWxlU2V0dGVyXCIsYW5ndWxhci5mb3JFYWNoKFQsYiksYy4kZW1pdChcIiR0cmFuc2xhdGVDaGFuZ2VFbmRcIix7bGFuZ3VhZ2U6YX0pfSxZPWZ1bmN0aW9uKGEpe2lmKCFhKXRocm93XCJObyBsYW5ndWFnZSBrZXkgc3BlY2lmaWVkIGZvciBsb2FkaW5nLlwiO3ZhciBlPWQuZGVmZXIoKTtjLiRlbWl0KFwiJHRyYW5zbGF0ZUxvYWRpbmdTdGFydFwiLHtsYW5ndWFnZTphfSksSj0hMDt2YXIgZj1zO1wic3RyaW5nXCI9PXR5cGVvZiBmJiYoZj1iLmdldChmKSk7dmFyIGc9YW5ndWxhci5leHRlbmQoe30scCx7a2V5OmEsJGh0dHA6YW5ndWxhci5leHRlbmQoe30se2NhY2hlOmZ9LHAuJGh0dHApfSksaD1mdW5jdGlvbihiKXt2YXIgZD17fTtjLiRlbWl0KFwiJHRyYW5zbGF0ZUxvYWRpbmdTdWNjZXNzXCIse2xhbmd1YWdlOmF9KSxhbmd1bGFyLmlzQXJyYXkoYik/YW5ndWxhci5mb3JFYWNoKGIsZnVuY3Rpb24oYSl7YW5ndWxhci5leHRlbmQoZCxQKGEpKX0pOmFuZ3VsYXIuZXh0ZW5kKGQsUChiKSksSj0hMSxlLnJlc29sdmUoe2tleTphLHRhYmxlOmR9KSxjLiRlbWl0KFwiJHRyYW5zbGF0ZUxvYWRpbmdFbmRcIix7bGFuZ3VhZ2U6YX0pfTtoLmRpc3BsYXlOYW1lPVwib25Mb2FkZXJTdWNjZXNzXCI7dmFyIGk9ZnVuY3Rpb24oYSl7Yy4kZW1pdChcIiR0cmFuc2xhdGVMb2FkaW5nRXJyb3JcIix7bGFuZ3VhZ2U6YX0pLGUucmVqZWN0KGEpLGMuJGVtaXQoXCIkdHJhbnNsYXRlTG9hZGluZ0VuZFwiLHtsYW5ndWFnZTphfSl9O3JldHVybiBpLmRpc3BsYXlOYW1lPVwib25Mb2FkZXJFcnJvclwiLGIuZ2V0KG8pKGcpLnRoZW4oaCxpKSxlLnByb21pc2V9O2lmKGsmJihmPWIuZ2V0KGspLCFmLmdldHx8IWYucHV0KSl0aHJvdyBuZXcgRXJyb3IoXCJDb3VsZG4ndCB1c2Ugc3RvcmFnZSAnXCIraytcIicsIG1pc3NpbmcgZ2V0KCkgb3IgcHV0KCkgbWV0aG9kIVwiKTtpZih4Lmxlbmd0aCl7dmFyIFo9ZnVuY3Rpb24oYSl7dmFyIGM9Yi5nZXQoYSk7Yy5zZXRMb2NhbGUoZXx8aSksVFtjLmdldEludGVycG9sYXRpb25JZGVudGlmaWVyKCldPWN9O1ouZGlzcGxheU5hbWU9XCJpbnRlcnBvbGF0aW9uRmFjdG9yeUFkZGVyXCIsYW5ndWxhci5mb3JFYWNoKHgsWil9dmFyICQ9ZnVuY3Rpb24oYSl7dmFyIGI9ZC5kZWZlcigpO2lmKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbCh1LGEpKWIucmVzb2x2ZSh1W2FdKTtlbHNlIGlmKFVbYV0pe3ZhciBjPWZ1bmN0aW9uKGEpe08oYS5rZXksYS50YWJsZSksYi5yZXNvbHZlKGEudGFibGUpfTtjLmRpc3BsYXlOYW1lPVwidHJhbnNsYXRpb25UYWJsZVJlc29sdmVyXCIsVVthXS50aGVuKGMsYi5yZWplY3QpfWVsc2UgYi5yZWplY3QoKTtyZXR1cm4gYi5wcm9taXNlfSxfPWZ1bmN0aW9uKGEsYixjLGUpe3ZhciBmPWQuZGVmZXIoKSxnPWZ1bmN0aW9uKGQpe2lmKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChkLGIpKXtlLnNldExvY2FsZShhKTt2YXIgZz1kW2JdO2lmKFwiQDpcIj09PWcuc3Vic3RyKDAsMikpXyhhLGcuc3Vic3RyKDIpLGMsZSkudGhlbihmLnJlc29sdmUsZi5yZWplY3QpO2Vsc2V7dmFyIGg9ZS5pbnRlcnBvbGF0ZShkW2JdLGMsXCJzZXJ2aWNlXCIpO2g9amEoYixkW2JdLGgsYyxhKSxmLnJlc29sdmUoaCl9ZS5zZXRMb2NhbGUoaSl9ZWxzZSBmLnJlamVjdCgpfTtyZXR1cm4gZy5kaXNwbGF5TmFtZT1cImZhbGxiYWNrVHJhbnNsYXRpb25SZXNvbHZlclwiLCQoYSkudGhlbihnLGYucmVqZWN0KSxmLnByb21pc2V9LGFhPWZ1bmN0aW9uKGEsYixjLGQsZSl7dmFyIGYsZz11W2FdO2lmKGcmJk9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChnLGIpKXtpZihkLnNldExvY2FsZShhKSxmPWQuaW50ZXJwb2xhdGUoZ1tiXSxjLFwiZmlsdGVyXCIsZSksZj1qYShiLGdbYl0sZixjLGEsZSksIWFuZ3VsYXIuaXNTdHJpbmcoZikmJmFuZ3VsYXIuaXNGdW5jdGlvbihmLiQkdW53cmFwVHJ1c3RlZFZhbHVlKSl7dmFyIGg9Zi4kJHVud3JhcFRydXN0ZWRWYWx1ZSgpO2lmKFwiQDpcIj09PWguc3Vic3RyKDAsMikpcmV0dXJuIGFhKGEsaC5zdWJzdHIoMiksYyxkLGUpfWVsc2UgaWYoXCJAOlwiPT09Zi5zdWJzdHIoMCwyKSlyZXR1cm4gYWEoYSxmLnN1YnN0cigyKSxjLGQsZSk7ZC5zZXRMb2NhbGUoaSl9cmV0dXJuIGZ9LGJhPWZ1bmN0aW9uKGEsYyxkLGUpe3JldHVybiBtP2IuZ2V0KG0pKGEsaSxjLGQsZSk6YX0sY2E9ZnVuY3Rpb24oYSxiLGMsZSxmKXt2YXIgaD1kLmRlZmVyKCk7aWYoYTxnLmxlbmd0aCl7dmFyIGk9Z1thXTtfKGksYixjLGUpLnRoZW4oZnVuY3Rpb24oYSl7aC5yZXNvbHZlKGEpfSxmdW5jdGlvbigpe3JldHVybiBjYShhKzEsYixjLGUsZikudGhlbihoLnJlc29sdmUsaC5yZWplY3QpfSl9ZWxzZSBpZihmKWgucmVzb2x2ZShmKTtlbHNle3ZhciBqPWJhKGIsYyxmKTttJiZqP2gucmVzb2x2ZShqKTpoLnJlamVjdChXKGIpKX1yZXR1cm4gaC5wcm9taXNlfSxkYT1mdW5jdGlvbihhLGIsYyxkLGUpe3ZhciBmO2lmKGE8Zy5sZW5ndGgpe3ZhciBoPWdbYV07Zj1hYShoLGIsYyxkLGUpLGZ8fFwiXCI9PT1mfHwoZj1kYShhKzEsYixjLGQpKX1yZXR1cm4gZn0sZWE9ZnVuY3Rpb24oYSxiLGMsZCl7cmV0dXJuIGNhKEc+MD9HOmwsYSxiLGMsZCl9LGZhPWZ1bmN0aW9uKGEsYixjLGQpe3JldHVybiBkYShHPjA/RzpsLGEsYixjLGQpfSxnYT1mdW5jdGlvbihhLGIsYyxlLGYpe3ZhciBoPWQuZGVmZXIoKSxpPWY/dVtmXTp1LGo9Yz9UW2NdOkg7aWYoaSYmT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGksYSkpe3ZhciBrPWlbYV07aWYoXCJAOlwiPT09ay5zdWJzdHIoMCwyKSlWKGsuc3Vic3RyKDIpLGIsYyxlLGYpLnRoZW4oaC5yZXNvbHZlLGgucmVqZWN0KTtlbHNle3ZhciBsPWouaW50ZXJwb2xhdGUoayxiLFwic2VydmljZVwiKTtsPWphKGEsayxsLGIsZiksaC5yZXNvbHZlKGwpfX1lbHNle3ZhciBuO20mJiFKJiYobj1iYShhLGIsZSkpLGYmJmcmJmcubGVuZ3RoP2VhKGEsYixqLGUpLnRoZW4oZnVuY3Rpb24oYSl7aC5yZXNvbHZlKGEpfSxmdW5jdGlvbihhKXtoLnJlamVjdChXKGEpKX0pOm0mJiFKJiZuP2U/aC5yZXNvbHZlKGUpOmgucmVzb2x2ZShuKTplP2gucmVzb2x2ZShlKTpoLnJlamVjdChXKGEpKX1yZXR1cm4gaC5wcm9taXNlfSxoYT1mdW5jdGlvbihhLGIsYyxkLGUpe3ZhciBmLGg9ZD91W2RdOnUsaT1IO2lmKFQmJk9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChULGMpJiYoaT1UW2NdKSxoJiZPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoaCxhKSl7dmFyIGo9aFthXTtcIkA6XCI9PT1qLnN1YnN0cigwLDIpP2Y9aGEoai5zdWJzdHIoMiksYixjLGQsZSk6KGY9aS5pbnRlcnBvbGF0ZShqLGIsXCJmaWx0ZXJcIixlKSxmPWphKGEsaixmLGIsZCxlKSl9ZWxzZXt2YXIgazttJiYhSiYmKGs9YmEoYSxiLGUpKSxkJiZnJiZnLmxlbmd0aD8obD0wLGY9ZmEoYSxiLGksZSkpOmY9bSYmIUomJms/azpXKGEpfXJldHVybiBmfSxpYT1mdW5jdGlvbihhKXtqPT09YSYmKGo9dm9pZCAwKSxVW2FdPXZvaWQgMH0samE9ZnVuY3Rpb24oYSxjLGQsZSxmLGcpe3ZhciBoPXQ7cmV0dXJuIGgmJihcInN0cmluZ1wiPT10eXBlb2YgaCYmKGg9Yi5nZXQoaCkpLGgpP2goYSxjLGQsZSxmLGcpOmR9LGthPWZ1bmN0aW9uKGEpe3VbYV18fCFvfHxVW2FdfHwoVVthXT1ZKGEpLnRoZW4oZnVuY3Rpb24oYSl7cmV0dXJuIE8oYS5rZXksYS50YWJsZSksYX0pKX07Vi5wcmVmZXJyZWRMYW5ndWFnZT1mdW5jdGlvbihhKXtyZXR1cm4gYSYmUShhKSxlfSxWLmNsb2FrQ2xhc3NOYW1lPWZ1bmN0aW9uKCl7cmV0dXJuIHl9LFYubmVzdGVkT2JqZWN0RGVsaW1ldGVyPWZ1bmN0aW9uKCl7cmV0dXJuIEJ9LFYuZmFsbGJhY2tMYW5ndWFnZT1mdW5jdGlvbihhKXtpZih2b2lkIDAhPT1hJiZudWxsIT09YSl7aWYoUihhKSxvJiZnJiZnLmxlbmd0aClmb3IodmFyIGI9MCxjPWcubGVuZ3RoO2I8YztiKyspVVtnW2JdXXx8KFVbZ1tiXV09WShnW2JdKSk7Vi51c2UoVi51c2UoKSl9cmV0dXJuIGg/Z1swXTpnfSxWLnVzZUZhbGxiYWNrTGFuZ3VhZ2U9ZnVuY3Rpb24oYSl7aWYodm9pZCAwIT09YSYmbnVsbCE9PWEpaWYoYSl7dmFyIGI9TChnLGEpO2I+LTEmJihHPWIpfWVsc2UgRz0wfSxWLnByb3Bvc2VkTGFuZ3VhZ2U9ZnVuY3Rpb24oKXtyZXR1cm4gan0sVi5zdG9yYWdlPWZ1bmN0aW9uKCl7cmV0dXJuIGZ9LFYubmVnb3RpYXRlTG9jYWxlPU4sVi51c2U9ZnVuY3Rpb24oYSl7aWYoIWEpcmV0dXJuIGk7dmFyIGI9ZC5kZWZlcigpO2MuJGVtaXQoXCIkdHJhbnNsYXRlQ2hhbmdlU3RhcnRcIix7bGFuZ3VhZ2U6YX0pO3ZhciBlPU4oYSk7cmV0dXJuIHYubGVuZ3RoPjAmJiFlP2QucmVqZWN0KGEpOihlJiYoYT1lKSxqPWEsIUEmJnVbYV18fCFvfHxVW2FdP1VbYV0/VVthXS50aGVuKGZ1bmN0aW9uKGEpe3JldHVybiBqPT09YS5rZXkmJlgoYS5rZXkpLGIucmVzb2x2ZShhLmtleSksYX0sZnVuY3Rpb24oYSl7cmV0dXJuIWkmJmcmJmcubGVuZ3RoPjAmJmdbMF0hPT1hP1YudXNlKGdbMF0pLnRoZW4oYi5yZXNvbHZlLGIucmVqZWN0KTpiLnJlamVjdChhKX0pOihiLnJlc29sdmUoYSksWChhKSk6KFVbYV09WShhKS50aGVuKGZ1bmN0aW9uKGMpe3JldHVybiBPKGMua2V5LGMudGFibGUpLGIucmVzb2x2ZShjLmtleSksaj09PWEmJlgoYy5rZXkpLGN9LGZ1bmN0aW9uKGEpe3JldHVybiBjLiRlbWl0KFwiJHRyYW5zbGF0ZUNoYW5nZUVycm9yXCIse2xhbmd1YWdlOmF9KSxiLnJlamVjdChhKSxjLiRlbWl0KFwiJHRyYW5zbGF0ZUNoYW5nZUVuZFwiLHtsYW5ndWFnZTphfSksZC5yZWplY3QoYSl9KSxVW2FdLmZpbmFsbHkoZnVuY3Rpb24oKXtpYShhKX0pKSxiLnByb21pc2UpfSxWLnJlc29sdmVDbGllbnRMb2NhbGU9ZnVuY3Rpb24oKXtyZXR1cm4gSygpfSxWLnN0b3JhZ2VLZXk9ZnVuY3Rpb24oKXtyZXR1cm4gUygpfSxWLmlzUG9zdENvbXBpbGluZ0VuYWJsZWQ9ZnVuY3Rpb24oKXtyZXR1cm4gen0sVi5pc0ZvcmNlQXN5bmNSZWxvYWRFbmFibGVkPWZ1bmN0aW9uKCl7cmV0dXJuIEF9LFYuaXNLZWVwQ29udGVudD1mdW5jdGlvbigpe3JldHVybiBEfSxWLnJlZnJlc2g9ZnVuY3Rpb24oYSl7ZnVuY3Rpb24gYigpe2YucmVzb2x2ZSgpLGMuJGVtaXQoXCIkdHJhbnNsYXRlUmVmcmVzaEVuZFwiLHtsYW5ndWFnZTphfSl9ZnVuY3Rpb24gZSgpe2YucmVqZWN0KCksYy4kZW1pdChcIiR0cmFuc2xhdGVSZWZyZXNoRW5kXCIse2xhbmd1YWdlOmF9KX1pZighbyl0aHJvdyBuZXcgRXJyb3IoXCJDb3VsZG4ndCByZWZyZXNoIHRyYW5zbGF0aW9uIHRhYmxlLCBubyBsb2FkZXIgcmVnaXN0ZXJlZCFcIik7dmFyIGY9ZC5kZWZlcigpO2lmKGMuJGVtaXQoXCIkdHJhbnNsYXRlUmVmcmVzaFN0YXJ0XCIse2xhbmd1YWdlOmF9KSxhKWlmKHVbYV0pe3ZhciBoPWZ1bmN0aW9uKGMpe3JldHVybiBPKGMua2V5LGMudGFibGUpLGE9PT1pJiZYKGkpLGIoKSxjfTtoLmRpc3BsYXlOYW1lPVwicmVmcmVzaFBvc3RQcm9jZXNzb3JcIixZKGEpLnRoZW4oaCxlKX1lbHNlIGUoKTtlbHNle3ZhciBqPVtdLGs9e307aWYoZyYmZy5sZW5ndGgpZm9yKHZhciBsPTAsbT1nLmxlbmd0aDtsPG07bCsrKWoucHVzaChZKGdbbF0pKSxrW2dbbF1dPSEwO2kmJiFrW2ldJiZqLnB1c2goWShpKSk7dmFyIG49ZnVuY3Rpb24oYSl7dT17fSxhbmd1bGFyLmZvckVhY2goYSxmdW5jdGlvbihhKXtPKGEua2V5LGEudGFibGUpfSksaSYmWChpKSxiKCl9O24uZGlzcGxheU5hbWU9XCJyZWZyZXNoUG9zdFByb2Nlc3NvclwiLGQuYWxsKGopLnRoZW4obixlKX1yZXR1cm4gZi5wcm9taXNlfSxWLmluc3RhbnQ9ZnVuY3Rpb24oYSxiLGMsZCxmKXt2YXIgaD1kJiZkIT09aT9OKGQpfHxkOmk7aWYobnVsbD09PWF8fGFuZ3VsYXIuaXNVbmRlZmluZWQoYSkpcmV0dXJuIGE7aWYoZCYma2EoZCksYW5ndWxhci5pc0FycmF5KGEpKXtmb3IodmFyIGo9e30saz0wLGw9YS5sZW5ndGg7azxsO2srKylqW2Fba11dPVYuaW5zdGFudChhW2tdLGIsYyxkLGYpO3JldHVybiBqfWlmKGFuZ3VsYXIuaXNTdHJpbmcoYSkmJmEubGVuZ3RoPDEpcmV0dXJuIGE7YSYmKGE9TS5hcHBseShhKSk7dmFyIG4sbz1bXTtlJiZvLnB1c2goZSksaCYmby5wdXNoKGgpLGcmJmcubGVuZ3RoJiYobz1vLmNvbmNhdChnKSk7Zm9yKHZhciBwPTAscz1vLmxlbmd0aDtwPHM7cCsrKXt2YXIgdD1vW3BdO2lmKHVbdF0mJlwidW5kZWZpbmVkXCIhPXR5cGVvZiB1W3RdW2FdJiYobj1oYShhLGIsYyxoLGYpKSxcInVuZGVmaW5lZFwiIT10eXBlb2YgbilicmVha31pZighbiYmXCJcIiE9PW4paWYocXx8ciluPVcoYSk7ZWxzZXtuPUguaW50ZXJwb2xhdGUoYSxiLFwiZmlsdGVyXCIsZik7dmFyIHY7bSYmIUomJih2PWJhKGEsYixmKSksbSYmIUomJnYmJihuPXYpfXJldHVybiBufSxWLnZlcnNpb25JbmZvPWZ1bmN0aW9uKCl7cmV0dXJuIEl9LFYubG9hZGVyQ2FjaGU9ZnVuY3Rpb24oKXtyZXR1cm4gc30sVi5kaXJlY3RpdmVQcmlvcml0eT1mdW5jdGlvbigpe3JldHVybiBFfSxWLnN0YXRlZnVsRmlsdGVyPWZ1bmN0aW9uKCl7cmV0dXJuIEZ9LFYuaXNSZWFkeT1mdW5jdGlvbigpe3JldHVybiBDfTt2YXIgbGE9ZC5kZWZlcigpO2xhLnByb21pc2UudGhlbihmdW5jdGlvbigpe0M9ITB9KSxWLm9uUmVhZHk9ZnVuY3Rpb24oYSl7dmFyIGI9ZC5kZWZlcigpO3JldHVybiBhbmd1bGFyLmlzRnVuY3Rpb24oYSkmJmIucHJvbWlzZS50aGVuKGEpLEM/Yi5yZXNvbHZlKCk6bGEucHJvbWlzZS50aGVuKGIucmVzb2x2ZSksYi5wcm9taXNlfSxWLmdldEF2YWlsYWJsZUxhbmd1YWdlS2V5cz1mdW5jdGlvbigpe3JldHVybiB2Lmxlbmd0aD4wP3Y6bnVsbH0sVi5nZXRUcmFuc2xhdGlvblRhYmxlPWZ1bmN0aW9uKGEpe3JldHVybiBhPWF8fFYudXNlKCksYSYmdVthXT9hbmd1bGFyLmNvcHkodVthXSk6bnVsbH07dmFyIG1hPWMuJG9uKFwiJHRyYW5zbGF0ZVJlYWR5XCIsZnVuY3Rpb24oKXtsYS5yZXNvbHZlKCksbWEoKSxtYT1udWxsfSksbmE9Yy4kb24oXCIkdHJhbnNsYXRlQ2hhbmdlRW5kXCIsZnVuY3Rpb24oKXtsYS5yZXNvbHZlKCksbmEoKSxuYT1udWxsfSk7aWYobyl7aWYoYW5ndWxhci5lcXVhbHModSx7fSkmJlYudXNlKCkmJlYudXNlKFYudXNlKCkpLGcmJmcubGVuZ3RoKWZvcih2YXIgb2E9ZnVuY3Rpb24oYSl7cmV0dXJuIE8oYS5rZXksYS50YWJsZSksYy4kZW1pdChcIiR0cmFuc2xhdGVDaGFuZ2VFbmRcIix7bGFuZ3VhZ2U6YS5rZXl9KSxhfSxwYT0wLHFhPWcubGVuZ3RoO3BhPHFhO3BhKyspe3ZhciByYT1nW3BhXTshQSYmdVtyYV18fChVW3JhXT1ZKHJhKS50aGVuKG9hKSl9fWVsc2UgYy4kZW1pdChcIiR0cmFuc2xhdGVSZWFkeVwiLHtsYW5ndWFnZTpWLnVzZSgpfSk7cmV0dXJuIFZ9XX1mdW5jdGlvbiBkKGEsYil7XCJ1c2Ugc3RyaWN0XCI7dmFyIGMsZD17fSxlPVwiZGVmYXVsdFwiO3JldHVybiBkLnNldExvY2FsZT1mdW5jdGlvbihhKXtjPWF9LGQuZ2V0SW50ZXJwb2xhdGlvbklkZW50aWZpZXI9ZnVuY3Rpb24oKXtyZXR1cm4gZX0sZC51c2VTYW5pdGl6ZVZhbHVlU3RyYXRlZ3k9ZnVuY3Rpb24oYSl7cmV0dXJuIGIudXNlU3RyYXRlZ3koYSksdGhpc30sZC5pbnRlcnBvbGF0ZT1mdW5jdGlvbihjLGQsZSxmKXtkPWR8fHt9LGQ9Yi5zYW5pdGl6ZShkLFwicGFyYW1zXCIsZixlKTt2YXIgZztyZXR1cm4gYW5ndWxhci5pc051bWJlcihjKT9nPVwiXCIrYzphbmd1bGFyLmlzU3RyaW5nKGMpPyhnPWEoYykoZCksZz1iLnNhbml0aXplKGcsXCJ0ZXh0XCIsZixlKSk6Zz1cIlwiLGd9LGR9ZnVuY3Rpb24gZShhLGIsYyxkLGUpe1widXNlIHN0cmljdFwiO3ZhciBnPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudG9TdHJpbmcoKS5yZXBsYWNlKC9eXFxzK3xcXHMrJC9nLFwiXCIpfTtyZXR1cm57cmVzdHJpY3Q6XCJBRVwiLHNjb3BlOiEwLHByaW9yaXR5OmEuZGlyZWN0aXZlUHJpb3JpdHkoKSxjb21waWxlOmZ1bmN0aW9uKGgsaSl7dmFyIGo9aS50cmFuc2xhdGVWYWx1ZXM/aS50cmFuc2xhdGVWYWx1ZXM6dm9pZCAwLGs9aS50cmFuc2xhdGVJbnRlcnBvbGF0aW9uP2kudHJhbnNsYXRlSW50ZXJwb2xhdGlvbjp2b2lkIDAsbD1oWzBdLm91dGVySFRNTC5tYXRjaCgvdHJhbnNsYXRlLXZhbHVlLSsvaSksbT1cIl4oLiopKFwiK2Iuc3RhcnRTeW1ib2woKStcIi4qXCIrYi5lbmRTeW1ib2woKStcIikoLiopXCIsbj1cIl4oLiopXCIrYi5zdGFydFN5bWJvbCgpK1wiKC4qKVwiK2IuZW5kU3ltYm9sKCkrXCIoLiopXCI7cmV0dXJuIGZ1bmN0aW9uKGgsbyxwKXtoLmludGVycG9sYXRlUGFyYW1zPXt9LGgucHJlVGV4dD1cIlwiLGgucG9zdFRleHQ9XCJcIixoLnRyYW5zbGF0ZU5hbWVzcGFjZT1mKGgpO3ZhciBxPXt9LHI9ZnVuY3Rpb24oYSxiLGMpe2lmKGIudHJhbnNsYXRlVmFsdWVzJiZhbmd1bGFyLmV4dGVuZChhLGQoYi50cmFuc2xhdGVWYWx1ZXMpKGguJHBhcmVudCkpLGwpZm9yKHZhciBlIGluIGMpaWYoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGIsZSkmJlwidHJhbnNsYXRlVmFsdWVcIj09PWUuc3Vic3RyKDAsMTQpJiZcInRyYW5zbGF0ZVZhbHVlc1wiIT09ZSl7dmFyIGY9YW5ndWxhci5sb3dlcmNhc2UoZS5zdWJzdHIoMTQsMSkpK2Uuc3Vic3RyKDE1KTthW2ZdPWNbZV19fSxzPWZ1bmN0aW9uKGEpe2lmKGFuZ3VsYXIuaXNGdW5jdGlvbihzLl91bndhdGNoT2xkKSYmKHMuX3Vud2F0Y2hPbGQoKSxzLl91bndhdGNoT2xkPXZvaWQgMCksYW5ndWxhci5lcXVhbHMoYSxcIlwiKXx8IWFuZ3VsYXIuaXNEZWZpbmVkKGEpKXt2YXIgYz1nLmFwcGx5KG8udGV4dCgpKSxkPWMubWF0Y2gobSk7aWYoYW5ndWxhci5pc0FycmF5KGQpKXtoLnByZVRleHQ9ZFsxXSxoLnBvc3RUZXh0PWRbM10scS50cmFuc2xhdGU9YihkWzJdKShoLiRwYXJlbnQpO3ZhciBlPWMubWF0Y2gobik7YW5ndWxhci5pc0FycmF5KGUpJiZlWzJdJiZlWzJdLmxlbmd0aCYmKHMuX3Vud2F0Y2hPbGQ9aC4kd2F0Y2goZVsyXSxmdW5jdGlvbihhKXtxLnRyYW5zbGF0ZT1hLHkoKX0pKX1lbHNlIHEudHJhbnNsYXRlPWM/Yzp2b2lkIDB9ZWxzZSBxLnRyYW5zbGF0ZT1hO3koKX0sdD1mdW5jdGlvbihhKXtwLiRvYnNlcnZlKGEsZnVuY3Rpb24oYil7cVthXT1iLHkoKX0pfTtyKGguaW50ZXJwb2xhdGVQYXJhbXMscCxpKTt2YXIgdT0hMDtwLiRvYnNlcnZlKFwidHJhbnNsYXRlXCIsZnVuY3Rpb24oYSl7XCJ1bmRlZmluZWRcIj09dHlwZW9mIGE/cyhcIlwiKTpcIlwiPT09YSYmdXx8KHEudHJhbnNsYXRlPWEseSgpKSx1PSExfSk7Zm9yKHZhciB2IGluIHApcC5oYXNPd25Qcm9wZXJ0eSh2KSYmXCJ0cmFuc2xhdGVBdHRyXCI9PT12LnN1YnN0cigwLDEzKSYmdi5sZW5ndGg+MTMmJnQodik7aWYocC4kb2JzZXJ2ZShcInRyYW5zbGF0ZURlZmF1bHRcIixmdW5jdGlvbihhKXtoLmRlZmF1bHRUZXh0PWEseSgpfSksaiYmcC4kb2JzZXJ2ZShcInRyYW5zbGF0ZVZhbHVlc1wiLGZ1bmN0aW9uKGEpe2EmJmguJHBhcmVudC4kd2F0Y2goZnVuY3Rpb24oKXthbmd1bGFyLmV4dGVuZChoLmludGVycG9sYXRlUGFyYW1zLGQoYSkoaC4kcGFyZW50KSl9KX0pLGwpe3ZhciB3PWZ1bmN0aW9uKGEpe3AuJG9ic2VydmUoYSxmdW5jdGlvbihiKXt2YXIgYz1hbmd1bGFyLmxvd2VyY2FzZShhLnN1YnN0cigxNCwxKSkrYS5zdWJzdHIoMTUpO2guaW50ZXJwb2xhdGVQYXJhbXNbY109Yn0pfTtmb3IodmFyIHggaW4gcClPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwocCx4KSYmXCJ0cmFuc2xhdGVWYWx1ZVwiPT09eC5zdWJzdHIoMCwxNCkmJlwidHJhbnNsYXRlVmFsdWVzXCIhPT14JiZ3KHgpfXZhciB5PWZ1bmN0aW9uKCl7Zm9yKHZhciBhIGluIHEpcS5oYXNPd25Qcm9wZXJ0eShhKSYmdm9pZCAwIT09cVthXSYmeihhLHFbYV0saCxoLmludGVycG9sYXRlUGFyYW1zLGguZGVmYXVsdFRleHQsaC50cmFuc2xhdGVOYW1lc3BhY2UpfSx6PWZ1bmN0aW9uKGIsYyxkLGUsZixnKXtjPyhnJiZcIi5cIj09PWMuY2hhckF0KDApJiYoYz1nK2MpLGEoYyxlLGssZixkLnRyYW5zbGF0ZUxhbmd1YWdlKS50aGVuKGZ1bmN0aW9uKGEpe0EoYSxkLCEwLGIpfSxmdW5jdGlvbihhKXtBKGEsZCwhMSxiKX0pKTpBKGMsZCwhMSxiKX0sQT1mdW5jdGlvbihiLGQsZSxmKXtpZihlfHxcInVuZGVmaW5lZFwiIT10eXBlb2YgZC5kZWZhdWx0VGV4dCYmKGI9ZC5kZWZhdWx0VGV4dCksXCJ0cmFuc2xhdGVcIj09PWYpeyhlfHwhZSYmIWEuaXNLZWVwQ29udGVudCgpJiZcInVuZGVmaW5lZFwiPT10eXBlb2YgcC50cmFuc2xhdGVLZWVwQ29udGVudCkmJm8uZW1wdHkoKS5hcHBlbmQoZC5wcmVUZXh0K2IrZC5wb3N0VGV4dCk7dmFyIGc9YS5pc1Bvc3RDb21waWxpbmdFbmFibGVkKCksaD1cInVuZGVmaW5lZFwiIT10eXBlb2YgaS50cmFuc2xhdGVDb21waWxlLGo9aCYmXCJmYWxzZVwiIT09aS50cmFuc2xhdGVDb21waWxlOyhnJiYhaHx8aikmJmMoby5jb250ZW50cygpKShkKX1lbHNle3ZhciBrPXAuJGF0dHJbZl07XCJkYXRhLVwiPT09ay5zdWJzdHIoMCw1KSYmKGs9ay5zdWJzdHIoNSkpLGs9ay5zdWJzdHIoMTUpLG8uYXR0cihrLGIpfX07KGp8fGx8fHAudHJhbnNsYXRlRGVmYXVsdCkmJmguJHdhdGNoKFwiaW50ZXJwb2xhdGVQYXJhbXNcIix5LCEwKSxoLiRvbihcInRyYW5zbGF0ZUxhbmd1YWdlQ2hhbmdlZFwiLHkpO3ZhciBCPWUuJG9uKFwiJHRyYW5zbGF0ZUNoYW5nZVN1Y2Nlc3NcIix5KTtvLnRleHQoKS5sZW5ndGg/cyhwLnRyYW5zbGF0ZT9wLnRyYW5zbGF0ZTpcIlwiKTpwLnRyYW5zbGF0ZSYmcyhwLnRyYW5zbGF0ZSkseSgpLGguJG9uKFwiJGRlc3Ryb3lcIixCKX19fX1mdW5jdGlvbiBmKGEpe1widXNlIHN0cmljdFwiO3JldHVybiBhLnRyYW5zbGF0ZU5hbWVzcGFjZT9hLnRyYW5zbGF0ZU5hbWVzcGFjZTphLiRwYXJlbnQ/ZihhLiRwYXJlbnQpOnZvaWQgMH1mdW5jdGlvbiBnKGEsYil7XCJ1c2Ugc3RyaWN0XCI7cmV0dXJue3Jlc3RyaWN0OlwiQVwiLHByaW9yaXR5OmEuZGlyZWN0aXZlUHJpb3JpdHkoKSxsaW5rOmZ1bmN0aW9uKGMsZCxlKXt2YXIgZixnLGk9e30saj1mdW5jdGlvbigpe2FuZ3VsYXIuZm9yRWFjaChmLGZ1bmN0aW9uKGIsZil7YiYmKGlbZl09ITAsYy50cmFuc2xhdGVOYW1lc3BhY2UmJlwiLlwiPT09Yi5jaGFyQXQoMCkmJihiPWMudHJhbnNsYXRlTmFtZXNwYWNlK2IpLGEoYixnLGUudHJhbnNsYXRlSW50ZXJwb2xhdGlvbix2b2lkIDAsYy50cmFuc2xhdGVMYW5ndWFnZSkudGhlbihmdW5jdGlvbihhKXtkLmF0dHIoZixhKX0sZnVuY3Rpb24oYSl7ZC5hdHRyKGYsYSl9KSl9KSxhbmd1bGFyLmZvckVhY2goaSxmdW5jdGlvbihhLGIpe2ZbYl18fChkLnJlbW92ZUF0dHIoYiksZGVsZXRlIGlbYl0pfSl9O2goYyxlLnRyYW5zbGF0ZUF0dHIsZnVuY3Rpb24oYSl7Zj1hfSxqKSxoKGMsZS50cmFuc2xhdGVWYWx1ZXMsZnVuY3Rpb24oYSl7Zz1hfSxqKSxlLnRyYW5zbGF0ZVZhbHVlcyYmYy4kd2F0Y2goZS50cmFuc2xhdGVWYWx1ZXMsaiwhMCksYy4kb24oXCJ0cmFuc2xhdGVMYW5ndWFnZUNoYW5nZWRcIixqKTt2YXIgaz1iLiRvbihcIiR0cmFuc2xhdGVDaGFuZ2VTdWNjZXNzXCIsaik7aigpLGMuJG9uKFwiJGRlc3Ryb3lcIixrKX19fWZ1bmN0aW9uIGgoYSxiLGMsZCl7XCJ1c2Ugc3RyaWN0XCI7YiYmKFwiOjpcIj09PWIuc3Vic3RyKDAsMik/Yj1iLnN1YnN0cigyKTphLiR3YXRjaChiLGZ1bmN0aW9uKGEpe2MoYSksZCgpfSwhMCksYyhhLiRldmFsKGIpKSl9ZnVuY3Rpb24gaShhLGIpe1widXNlIHN0cmljdFwiO3JldHVybntjb21waWxlOmZ1bmN0aW9uKGMpe3ZhciBkPWZ1bmN0aW9uKCl7Yy5hZGRDbGFzcyhhLmNsb2FrQ2xhc3NOYW1lKCkpfSxlPWZ1bmN0aW9uKCl7Yy5yZW1vdmVDbGFzcyhhLmNsb2FrQ2xhc3NOYW1lKCkpfTtyZXR1cm4gYS5vblJlYWR5KGZ1bmN0aW9uKCl7ZSgpfSksZCgpLGZ1bmN0aW9uKGMsZixnKXtnLnRyYW5zbGF0ZUNsb2FrJiZnLnRyYW5zbGF0ZUNsb2FrLmxlbmd0aCYmKGcuJG9ic2VydmUoXCJ0cmFuc2xhdGVDbG9ha1wiLGZ1bmN0aW9uKGIpe2EoYikudGhlbihlLGQpfSksYi4kb24oXCIkdHJhbnNsYXRlQ2hhbmdlU3VjY2Vzc1wiLGZ1bmN0aW9uKCl7YShnLnRyYW5zbGF0ZUNsb2FrKS50aGVuKGUsZCl9KSl9fX19ZnVuY3Rpb24gaigpe1widXNlIHN0cmljdFwiO3JldHVybntyZXN0cmljdDpcIkFcIixzY29wZTohMCxjb21waWxlOmZ1bmN0aW9uKCl7cmV0dXJue3ByZTpmdW5jdGlvbihhLGIsYyl7YS50cmFuc2xhdGVOYW1lc3BhY2U9ZihhKSxhLnRyYW5zbGF0ZU5hbWVzcGFjZSYmXCIuXCI9PT1jLnRyYW5zbGF0ZU5hbWVzcGFjZS5jaGFyQXQoMCk/YS50cmFuc2xhdGVOYW1lc3BhY2UrPWMudHJhbnNsYXRlTmFtZXNwYWNlOmEudHJhbnNsYXRlTmFtZXNwYWNlPWMudHJhbnNsYXRlTmFtZXNwYWNlfX19fX1mdW5jdGlvbiBmKGEpe1widXNlIHN0cmljdFwiO3JldHVybiBhLnRyYW5zbGF0ZU5hbWVzcGFjZT9hLnRyYW5zbGF0ZU5hbWVzcGFjZTphLiRwYXJlbnQ/ZihhLiRwYXJlbnQpOnZvaWQgMH1mdW5jdGlvbiBrKCl7XCJ1c2Ugc3RyaWN0XCI7cmV0dXJue3Jlc3RyaWN0OlwiQVwiLHNjb3BlOiEwLGNvbXBpbGU6ZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24oYSxiLGMpe2MuJG9ic2VydmUoXCJ0cmFuc2xhdGVMYW5ndWFnZVwiLGZ1bmN0aW9uKGIpe2EudHJhbnNsYXRlTGFuZ3VhZ2U9Yn0pLGEuJHdhdGNoKFwidHJhbnNsYXRlTGFuZ3VhZ2VcIixmdW5jdGlvbigpe2EuJGJyb2FkY2FzdChcInRyYW5zbGF0ZUxhbmd1YWdlQ2hhbmdlZFwiKX0pfX19fWZ1bmN0aW9uIGwoYSxiKXtcInVzZSBzdHJpY3RcIjt2YXIgYz1mdW5jdGlvbihjLGQsZSxmKXtyZXR1cm4gYW5ndWxhci5pc09iamVjdChkKXx8KGQ9YShkKSh0aGlzKSksYi5pbnN0YW50KGMsZCxlLGYpfTtyZXR1cm4gYi5zdGF0ZWZ1bEZpbHRlcigpJiYoYy4kc3RhdGVmdWw9ITApLGN9ZnVuY3Rpb24gbShhKXtcInVzZSBzdHJpY3RcIjtyZXR1cm4gYShcInRyYW5zbGF0aW9uc1wiKX1yZXR1cm4gYS4kaW5qZWN0PVtcIiR0cmFuc2xhdGVcIl0sYy4kaW5qZWN0PVtcIiRTVE9SQUdFX0tFWVwiLFwiJHdpbmRvd1Byb3ZpZGVyXCIsXCIkdHJhbnNsYXRlU2FuaXRpemF0aW9uUHJvdmlkZXJcIixcInBhc2NhbHByZWNodFRyYW5zbGF0ZU92ZXJyaWRlclwiXSxkLiRpbmplY3Q9W1wiJGludGVycG9sYXRlXCIsXCIkdHJhbnNsYXRlU2FuaXRpemF0aW9uXCJdLGUuJGluamVjdD1bXCIkdHJhbnNsYXRlXCIsXCIkaW50ZXJwb2xhdGVcIixcIiRjb21waWxlXCIsXCIkcGFyc2VcIixcIiRyb290U2NvcGVcIl0sZy4kaW5qZWN0PVtcIiR0cmFuc2xhdGVcIixcIiRyb290U2NvcGVcIl0saS4kaW5qZWN0PVtcIiR0cmFuc2xhdGVcIixcIiRyb290U2NvcGVcIl0sbC4kaW5qZWN0PVtcIiRwYXJzZVwiLFwiJHRyYW5zbGF0ZVwiXSxtLiRpbmplY3Q9W1wiJGNhY2hlRmFjdG9yeVwiXSxhbmd1bGFyLm1vZHVsZShcInBhc2NhbHByZWNodC50cmFuc2xhdGVcIixbXCJuZ1wiXSkucnVuKGEpLGEuZGlzcGxheU5hbWU9XCJydW5UcmFuc2xhdGVcIixhbmd1bGFyLm1vZHVsZShcInBhc2NhbHByZWNodC50cmFuc2xhdGVcIikucHJvdmlkZXIoXCIkdHJhbnNsYXRlU2FuaXRpemF0aW9uXCIsYiksYW5ndWxhci5tb2R1bGUoXCJwYXNjYWxwcmVjaHQudHJhbnNsYXRlXCIpLmNvbnN0YW50KFwicGFzY2FscHJlY2h0VHJhbnNsYXRlT3ZlcnJpZGVyXCIse30pLnByb3ZpZGVyKFwiJHRyYW5zbGF0ZVwiLGMpLGMuZGlzcGxheU5hbWU9XCJkaXNwbGF5TmFtZVwiLGFuZ3VsYXIubW9kdWxlKFwicGFzY2FscHJlY2h0LnRyYW5zbGF0ZVwiKS5mYWN0b3J5KFwiJHRyYW5zbGF0ZURlZmF1bHRJbnRlcnBvbGF0aW9uXCIsZCksZC5kaXNwbGF5TmFtZT1cIiR0cmFuc2xhdGVEZWZhdWx0SW50ZXJwb2xhdGlvblwiLGFuZ3VsYXIubW9kdWxlKFwicGFzY2FscHJlY2h0LnRyYW5zbGF0ZVwiKS5jb25zdGFudChcIiRTVE9SQUdFX0tFWVwiLFwiTkdfVFJBTlNMQVRFX0xBTkdfS0VZXCIpLGFuZ3VsYXIubW9kdWxlKFwicGFzY2FscHJlY2h0LnRyYW5zbGF0ZVwiKS5kaXJlY3RpdmUoXCJ0cmFuc2xhdGVcIixlKSxlLmRpc3BsYXlOYW1lPVwidHJhbnNsYXRlRGlyZWN0aXZlXCIsYW5ndWxhci5tb2R1bGUoXCJwYXNjYWxwcmVjaHQudHJhbnNsYXRlXCIpLmRpcmVjdGl2ZShcInRyYW5zbGF0ZUF0dHJcIixnKSxnLmRpc3BsYXlOYW1lPVwidHJhbnNsYXRlQXR0ckRpcmVjdGl2ZVwiLGFuZ3VsYXIubW9kdWxlKFwicGFzY2FscHJlY2h0LnRyYW5zbGF0ZVwiKS5kaXJlY3RpdmUoXCJ0cmFuc2xhdGVDbG9ha1wiLGkpLGkuZGlzcGxheU5hbWU9XCJ0cmFuc2xhdGVDbG9ha0RpcmVjdGl2ZVwiLGFuZ3VsYXIubW9kdWxlKFwicGFzY2FscHJlY2h0LnRyYW5zbGF0ZVwiKS5kaXJlY3RpdmUoXCJ0cmFuc2xhdGVOYW1lc3BhY2VcIixqKSxqLmRpc3BsYXlOYW1lPVwidHJhbnNsYXRlTmFtZXNwYWNlRGlyZWN0aXZlXCIsYW5ndWxhci5tb2R1bGUoXCJwYXNjYWxwcmVjaHQudHJhbnNsYXRlXCIpLmRpcmVjdGl2ZShcInRyYW5zbGF0ZUxhbmd1YWdlXCIsayksay5kaXNwbGF5TmFtZT1cInRyYW5zbGF0ZUxhbmd1YWdlRGlyZWN0aXZlXCIsYW5ndWxhci5tb2R1bGUoXCJwYXNjYWxwcmVjaHQudHJhbnNsYXRlXCIpLmZpbHRlcihcInRyYW5zbGF0ZVwiLGwpLGwuZGlzcGxheU5hbWU9XCJ0cmFuc2xhdGVGaWx0ZXJGYWN0b3J5XCIsYW5ndWxhci5tb2R1bGUoXCJwYXNjYWxwcmVjaHQudHJhbnNsYXRlXCIpLmZhY3RvcnkoXCIkdHJhbnNsYXRpb25DYWNoZVwiLG0pLG0uZGlzcGxheU5hbWU9XCIkdHJhbnNsYXRpb25DYWNoZVwiLFwicGFzY2FscHJlY2h0LnRyYW5zbGF0ZVwifSk7IiwiLypcclxuICpcclxuICogaHR0cHM6Ly9naXRodWIuY29tL2ZhdGxpbmVzb2Zjb2RlL25nRHJhZ2dhYmxlXHJcbiAqL1xyXG5hbmd1bGFyLm1vZHVsZShcIm5nRHJhZ2dhYmxlXCIsIFtdKVxyXG4gICAgLnNlcnZpY2UoJ25nRHJhZ2dhYmxlJywgW2Z1bmN0aW9uKCkge1xyXG5cclxuXHJcbiAgICAgICAgdmFyIHNjb3BlID0gdGhpcztcclxuICAgICAgICBzY29wZS5pbnB1dEV2ZW50ID0gZnVuY3Rpb24oZXZlbnQpIHtcclxuICAgICAgICAgICAgaWYgKGFuZ3VsYXIuaXNEZWZpbmVkKGV2ZW50LnRvdWNoZXMpKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZXZlbnQudG91Y2hlc1swXTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAvL0NoZWNraW5nIGJvdGggaXMgbm90IHJlZHVuZGVudC4gSWYgb25seSBjaGVjayBpZiB0b3VjaGVzIGlzRGVmaW5lZCwgYW5ndWxhcmpzIGlzRGVmbmllZCB3aWxsIHJldHVybiBlcnJvciBhbmQgc3RvcCB0aGUgcmVtYWluaW5nIHNjcmlwdHkgaWYgZXZlbnQub3JpZ2luYWxFdmVudCBpcyBub3QgZGVmaW5lZC5cclxuICAgICAgICAgICAgZWxzZSBpZiAoYW5ndWxhci5pc0RlZmluZWQoZXZlbnQub3JpZ2luYWxFdmVudCkgJiYgYW5ndWxhci5pc0RlZmluZWQoZXZlbnQub3JpZ2luYWxFdmVudC50b3VjaGVzKSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGV2ZW50Lm9yaWdpbmFsRXZlbnQudG91Y2hlc1swXTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gZXZlbnQ7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICB9XSlcclxuICAgIC5kaXJlY3RpdmUoJ25nRHJhZycsIFsnJHJvb3RTY29wZScsICckcGFyc2UnLCAnJGRvY3VtZW50JywgJyR3aW5kb3cnLCAnbmdEcmFnZ2FibGUnLCBmdW5jdGlvbiAoJHJvb3RTY29wZSwgJHBhcnNlLCAkZG9jdW1lbnQsICR3aW5kb3csIG5nRHJhZ2dhYmxlKSB7XHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgcmVzdHJpY3Q6ICdBJyxcclxuICAgICAgICAgICAgbGluazogZnVuY3Rpb24gKHNjb3BlLCBlbGVtZW50LCBhdHRycykge1xyXG4gICAgICAgICAgICAgICAgc2NvcGUudmFsdWUgPSBhdHRycy5uZ0RyYWc7XHJcbiAgICAgICAgICAgICAgICB2YXIgb2Zmc2V0LF9jZW50ZXJBbmNob3I9ZmFsc2UsX214LF9teSxfdHgsX3R5LF9tcngsX21yeTtcclxuICAgICAgICAgICAgICAgIHZhciBfaGFzVG91Y2ggPSAoJ29udG91Y2hzdGFydCcgaW4gd2luZG93KSB8fCB3aW5kb3cuRG9jdW1lbnRUb3VjaCAmJiBkb2N1bWVudCBpbnN0YW5jZW9mIERvY3VtZW50VG91Y2g7XHJcbiAgICAgICAgICAgICAgICB2YXIgX3ByZXNzRXZlbnRzID0gJ3RvdWNoc3RhcnQgbW91c2Vkb3duJztcclxuICAgICAgICAgICAgICAgIHZhciBfbW92ZUV2ZW50cyA9ICd0b3VjaG1vdmUgbW91c2Vtb3ZlJztcclxuICAgICAgICAgICAgICAgIHZhciBfcmVsZWFzZUV2ZW50cyA9ICd0b3VjaGVuZCBtb3VzZXVwJztcclxuICAgICAgICAgICAgICAgIHZhciBfZHJhZ0hhbmRsZTtcclxuXHJcbiAgICAgICAgICAgICAgICAvLyB0byBpZGVudGlmeSB0aGUgZWxlbWVudCBpbiBvcmRlciB0byBwcmV2ZW50IGdldHRpbmcgc3VwZXJmbG91cyBldmVudHMgd2hlbiBhIHNpbmdsZSBlbGVtZW50IGhhcyBib3RoIGRyYWcgYW5kIGRyb3AgZGlyZWN0aXZlcyBvbiBpdC5cclxuICAgICAgICAgICAgICAgIHZhciBfbXlpZCA9IHNjb3BlLiRpZDtcclxuICAgICAgICAgICAgICAgIHZhciBfZGF0YSA9IG51bGw7XHJcblxyXG4gICAgICAgICAgICAgICAgdmFyIF9kcmFnT2Zmc2V0ID0gbnVsbDtcclxuXHJcbiAgICAgICAgICAgICAgICB2YXIgX2RyYWdFbmFibGVkID0gZmFsc2U7XHJcblxyXG4gICAgICAgICAgICAgICAgdmFyIF9wcmVzc1RpbWVyID0gbnVsbDtcclxuXHJcbiAgICAgICAgICAgICAgICB2YXIgb25EcmFnU3RhcnRDYWxsYmFjayA9ICRwYXJzZShhdHRycy5uZ0RyYWdTdGFydCkgfHwgbnVsbDtcclxuICAgICAgICAgICAgICAgIHZhciBvbkRyYWdTdG9wQ2FsbGJhY2sgPSAkcGFyc2UoYXR0cnMubmdEcmFnU3RvcCkgfHwgbnVsbDtcclxuICAgICAgICAgICAgICAgIHZhciBvbkRyYWdTdWNjZXNzQ2FsbGJhY2sgPSAkcGFyc2UoYXR0cnMubmdEcmFnU3VjY2VzcykgfHwgbnVsbDtcclxuICAgICAgICAgICAgICAgIHZhciBhbGxvd1RyYW5zZm9ybSA9IGFuZ3VsYXIuaXNEZWZpbmVkKGF0dHJzLmFsbG93VHJhbnNmb3JtKSA/IHNjb3BlLiRldmFsKGF0dHJzLmFsbG93VHJhbnNmb3JtKSA6IHRydWU7XHJcblxyXG4gICAgICAgICAgICAgICAgdmFyIGdldERyYWdEYXRhID0gJHBhcnNlKGF0dHJzLm5nRHJhZ0RhdGEpO1xyXG5cclxuICAgICAgICAgICAgICAgIC8vIGRlcmVnaXN0cmF0aW9uIGZ1bmN0aW9uIGZvciBtb3VzZSBtb3ZlIGV2ZW50cyBpbiAkcm9vdFNjb3BlIHRyaWdnZXJlZCBieSBqcUxpdGUgdHJpZ2dlciBoYW5kbGVyXHJcbiAgICAgICAgICAgICAgICB2YXIgX2RlcmVnaXN0ZXJSb290TW92ZUxpc3RlbmVyID0gYW5ndWxhci5ub29wO1xyXG5cclxuICAgICAgICAgICAgICAgIHZhciBpbml0aWFsaXplID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGVsZW1lbnQuYXR0cignZHJhZ2dhYmxlJywgJ2ZhbHNlJyk7IC8vIHByZXZlbnQgbmF0aXZlIGRyYWdcclxuICAgICAgICAgICAgICAgICAgICAvLyBjaGVjayB0byBzZWUgaWYgZHJhZyBoYW5kbGUocykgd2FzIHNwZWNpZmllZFxyXG4gICAgICAgICAgICAgICAgICAgIC8vIGlmIHF1ZXJ5U2VsZWN0b3JBbGwgaXMgYXZhaWxhYmxlLCB3ZSB1c2UgdGhpcyBpbnN0ZWFkIG9mIGZpbmRcclxuICAgICAgICAgICAgICAgICAgICAvLyBhcyBKUUxpdGUgZmluZCBpcyBsaW1pdGVkIHRvIHRhZ25hbWVzXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGVsZW1lbnRbMF0ucXVlcnlTZWxlY3RvckFsbCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgZHJhZ0hhbmRsZXMgPSBhbmd1bGFyLmVsZW1lbnQoZWxlbWVudFswXS5xdWVyeVNlbGVjdG9yQWxsKCdbbmctZHJhZy1oYW5kbGVdJykpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBkcmFnSGFuZGxlcyA9IGVsZW1lbnQuZmluZCgnW25nLWRyYWctaGFuZGxlXScpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBpZiAoZHJhZ0hhbmRsZXMubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9kcmFnSGFuZGxlID0gZHJhZ0hhbmRsZXM7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIHRvZ2dsZUxpc3RlbmVycyh0cnVlKTtcclxuICAgICAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICAgICAgdmFyIHRvZ2dsZUxpc3RlbmVycyA9IGZ1bmN0aW9uIChlbmFibGUpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoIWVuYWJsZSlyZXR1cm47XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gYWRkIGxpc3RlbmVycy5cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgc2NvcGUuJG9uKCckZGVzdHJveScsIG9uRGVzdHJveSk7XHJcbiAgICAgICAgICAgICAgICAgICAgc2NvcGUuJHdhdGNoKGF0dHJzLm5nRHJhZywgb25FbmFibGVDaGFuZ2UpO1xyXG4gICAgICAgICAgICAgICAgICAgIHNjb3BlLiR3YXRjaChhdHRycy5uZ0NlbnRlckFuY2hvciwgb25DZW50ZXJBbmNob3IpO1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIHdpcmUgdXAgdG91Y2ggZXZlbnRzXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKF9kcmFnSGFuZGxlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGhhbmRsZShzKSBzcGVjaWZpZWQsIHVzZSB0aG9zZSB0byBpbml0aWF0ZSBkcmFnXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9kcmFnSGFuZGxlLm9uKF9wcmVzc0V2ZW50cywgb25wcmVzcyk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gbm8gaGFuZGxlKHMpIHNwZWNpZmllZCwgdXNlIHRoZSBlbGVtZW50IGFzIHRoZSBoYW5kbGVcclxuICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudC5vbihfcHJlc3NFdmVudHMsIG9ucHJlc3MpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBpZighIF9oYXNUb3VjaCAmJiBlbGVtZW50WzBdLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCkgPT0gXCJpbWdcIil7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnQub24oJ21vdXNlZG93bicsIGZ1bmN0aW9uKCl7IHJldHVybiBmYWxzZTt9KTsgLy8gcHJldmVudCBuYXRpdmUgZHJhZyBmb3IgaW1hZ2VzXHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgIHZhciBvbkRlc3Ryb3kgPSBmdW5jdGlvbiAoZW5hYmxlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdG9nZ2xlTGlzdGVuZXJzKGZhbHNlKTtcclxuICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICB2YXIgb25FbmFibGVDaGFuZ2UgPSBmdW5jdGlvbiAobmV3VmFsLCBvbGRWYWwpIHtcclxuICAgICAgICAgICAgICAgICAgICBfZHJhZ0VuYWJsZWQgPSAobmV3VmFsKTtcclxuICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICB2YXIgb25DZW50ZXJBbmNob3IgPSBmdW5jdGlvbiAobmV3VmFsLCBvbGRWYWwpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZihhbmd1bGFyLmlzRGVmaW5lZChuZXdWYWwpKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBfY2VudGVyQW5jaG9yID0gKG5ld1ZhbCB8fCAndHJ1ZScpO1xyXG4gICAgICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgICAgICB2YXIgaXNDbGlja2FibGVFbGVtZW50ID0gZnVuY3Rpb24gKGV2dCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGFuZ3VsYXIuaXNEZWZpbmVkKGFuZ3VsYXIuZWxlbWVudChldnQudGFyZ2V0KS5hdHRyKFwibmctY2FuY2VsLWRyYWdcIikpXHJcbiAgICAgICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICAvKlxyXG4gICAgICAgICAgICAgICAgICogV2hlbiB0aGUgZWxlbWVudCBpcyBjbGlja2VkIHN0YXJ0IHRoZSBkcmFnIGJlaGF2aW91clxyXG4gICAgICAgICAgICAgICAgICogT24gdG91Y2ggZGV2aWNlcyBhcyBhIHNtYWxsIGRlbGF5IHNvIGFzIG5vdCB0byBwcmV2ZW50IG5hdGl2ZSB3aW5kb3cgc2Nyb2xsaW5nXHJcbiAgICAgICAgICAgICAgICAgKi9cclxuICAgICAgICAgICAgICAgIHZhciBvbnByZXNzID0gZnVuY3Rpb24oZXZ0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYoISBfZHJhZ0VuYWJsZWQpcmV0dXJuO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAoaXNDbGlja2FibGVFbGVtZW50KGV2dCkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGV2dC50eXBlID09IFwibW91c2Vkb3duXCIgJiYgZXZ0LmJ1dHRvbiAhPSAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIERvIG5vdCBzdGFydCBkcmFnZ2luZyBvbiByaWdodC1jbGlja1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZihfaGFzVG91Y2gpe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjYW5jZWxQcmVzcygpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBfcHJlc3NUaW1lciA9IHNldFRpbWVvdXQoZnVuY3Rpb24oKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhbmNlbFByZXNzKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbmxvbmdwcmVzcyhldnQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9LDEwMCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICRkb2N1bWVudC5vbihfbW92ZUV2ZW50cywgY2FuY2VsUHJlc3MpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAkZG9jdW1lbnQub24oX3JlbGVhc2VFdmVudHMsIGNhbmNlbFByZXNzKTtcclxuICAgICAgICAgICAgICAgICAgICB9ZWxzZXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgb25sb25ncHJlc3MoZXZ0KTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgICAgICB2YXIgY2FuY2VsUHJlc3MgPSBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgICAgICBjbGVhclRpbWVvdXQoX3ByZXNzVGltZXIpO1xyXG4gICAgICAgICAgICAgICAgICAgICRkb2N1bWVudC5vZmYoX21vdmVFdmVudHMsIGNhbmNlbFByZXNzKTtcclxuICAgICAgICAgICAgICAgICAgICAkZG9jdW1lbnQub2ZmKF9yZWxlYXNlRXZlbnRzLCBjYW5jZWxQcmVzcyk7XHJcbiAgICAgICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgICAgIHZhciBvbmxvbmdwcmVzcyA9IGZ1bmN0aW9uKGV2dCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmKCEgX2RyYWdFbmFibGVkKXJldHVybjtcclxuICAgICAgICAgICAgICAgICAgICBldnQucHJldmVudERlZmF1bHQoKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgb2Zmc2V0ID0gZWxlbWVudFswXS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcclxuICAgICAgICAgICAgICAgICAgICBpZihhbGxvd1RyYW5zZm9ybSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgX2RyYWdPZmZzZXQgPSBvZmZzZXQ7XHJcbiAgICAgICAgICAgICAgICAgICAgZWxzZXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgX2RyYWdPZmZzZXQgPSB7bGVmdDpkb2N1bWVudC5ib2R5LnNjcm9sbExlZnQsIHRvcDpkb2N1bWVudC5ib2R5LnNjcm9sbFRvcH07XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgZWxlbWVudC5jZW50ZXJYID0gZWxlbWVudFswXS5vZmZzZXRXaWR0aCAvIDI7XHJcbiAgICAgICAgICAgICAgICAgICAgZWxlbWVudC5jZW50ZXJZID0gZWxlbWVudFswXS5vZmZzZXRIZWlnaHQgLyAyO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBfbXggPSBuZ0RyYWdnYWJsZS5pbnB1dEV2ZW50KGV2dCkucGFnZVg7Ly9uZ0RyYWdnYWJsZS5nZXRFdmVudFByb3AoZXZ0LCAncGFnZVgnKTtcclxuICAgICAgICAgICAgICAgICAgICBfbXkgPSBuZ0RyYWdnYWJsZS5pbnB1dEV2ZW50KGV2dCkucGFnZVk7Ly9uZ0RyYWdnYWJsZS5nZXRFdmVudFByb3AoZXZ0LCAncGFnZVknKTtcclxuICAgICAgICAgICAgICAgICAgICBfbXJ4ID0gX214IC0gb2Zmc2V0LmxlZnQ7XHJcbiAgICAgICAgICAgICAgICAgICAgX21yeSA9IF9teSAtIG9mZnNldC50b3A7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKF9jZW50ZXJBbmNob3IpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgX3R4ID0gX214IC0gZWxlbWVudC5jZW50ZXJYIC0gJHdpbmRvdy5wYWdlWE9mZnNldDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgX3R5ID0gX215IC0gZWxlbWVudC5jZW50ZXJZIC0gJHdpbmRvdy5wYWdlWU9mZnNldDtcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBfdHggPSBfbXggLSBfbXJ4IC0gJHdpbmRvdy5wYWdlWE9mZnNldDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgX3R5ID0gX215IC0gX21yeSAtICR3aW5kb3cucGFnZVlPZmZzZXQ7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAkZG9jdW1lbnQub24oX21vdmVFdmVudHMsIG9ubW92ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgJGRvY3VtZW50Lm9uKF9yZWxlYXNlRXZlbnRzLCBvbnJlbGVhc2UpO1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIFRoaXMgZXZlbnQgaXMgdXNlZCB0byByZWNlaXZlIG1hbnVhbGx5IHRyaWdnZXJlZCBtb3VzZSBtb3ZlIGV2ZW50c1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIGpxTGl0ZSB1bmZvcnR1bmF0ZWx5IG9ubHkgc3VwcG9ydHMgdHJpZ2dlckhhbmRsZXIoLi4uKVxyXG4gICAgICAgICAgICAgICAgICAgIC8vIFNlZSBodHRwOi8vYXBpLmpxdWVyeS5jb20vdHJpZ2dlckhhbmRsZXIvXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gX2RlcmVnaXN0ZXJSb290TW92ZUxpc3RlbmVyID0gJHJvb3RTY29wZS4kb24oJ2RyYWdnYWJsZTpfdHJpZ2dlckhhbmRsZXJNb3ZlJywgb25tb3ZlKTtcclxuICAgICAgICAgICAgICAgICAgICBfZGVyZWdpc3RlclJvb3RNb3ZlTGlzdGVuZXIgPSAkcm9vdFNjb3BlLiRvbignZHJhZ2dhYmxlOl90cmlnZ2VySGFuZGxlck1vdmUnLCBmdW5jdGlvbihldmVudCwgb3JpZ0V2ZW50KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG9ubW92ZShvcmlnRXZlbnQpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgICAgICB2YXIgb25tb3ZlID0gZnVuY3Rpb24gKGV2dCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICghX2RyYWdFbmFibGVkKXJldHVybjtcclxuICAgICAgICAgICAgICAgICAgICBldnQucHJldmVudERlZmF1bHQoKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFlbGVtZW50Lmhhc0NsYXNzKCdkcmFnZ2luZycpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9kYXRhID0gZ2V0RHJhZ0RhdGEoc2NvcGUpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50LmFkZENsYXNzKCdkcmFnZ2luZycpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAkcm9vdFNjb3BlLiRicm9hZGNhc3QoJ2RyYWdnYWJsZTpzdGFydCcsIHt4Ol9teCwgeTpfbXksIHR4Ol90eCwgdHk6X3R5LCBldmVudDpldnQsIGVsZW1lbnQ6ZWxlbWVudCwgZGF0YTpfZGF0YX0pO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG9uRHJhZ1N0YXJ0Q2FsbGJhY2sgKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNjb3BlLiRhcHBseShmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25EcmFnU3RhcnRDYWxsYmFjayhzY29wZSwgeyRkYXRhOiBfZGF0YSwgJGV2ZW50OiBldnR9KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICBfbXggPSBuZ0RyYWdnYWJsZS5pbnB1dEV2ZW50KGV2dCkucGFnZVg7Ly9uZ0RyYWdnYWJsZS5nZXRFdmVudFByb3AoZXZ0LCAncGFnZVgnKTtcclxuICAgICAgICAgICAgICAgICAgICBfbXkgPSBuZ0RyYWdnYWJsZS5pbnB1dEV2ZW50KGV2dCkucGFnZVk7Ly9uZ0RyYWdnYWJsZS5nZXRFdmVudFByb3AoZXZ0LCAncGFnZVknKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKF9jZW50ZXJBbmNob3IpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgX3R4ID0gX214IC0gZWxlbWVudC5jZW50ZXJYIC0gX2RyYWdPZmZzZXQubGVmdDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgX3R5ID0gX215IC0gZWxlbWVudC5jZW50ZXJZIC0gX2RyYWdPZmZzZXQudG9wO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF90eCA9IF9teCAtIF9tcnggLSBfZHJhZ09mZnNldC5sZWZ0O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBfdHkgPSBfbXkgLSBfbXJ5IC0gX2RyYWdPZmZzZXQudG9wO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgbW92ZUVsZW1lbnQoX3R4LCBfdHkpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAkcm9vdFNjb3BlLiRicm9hZGNhc3QoJ2RyYWdnYWJsZTptb3ZlJywgeyB4OiBfbXgsIHk6IF9teSwgdHg6IF90eCwgdHk6IF90eSwgZXZlbnQ6IGV2dCwgZWxlbWVudDogZWxlbWVudCwgZGF0YTogX2RhdGEsIHVpZDogX215aWQsIGRyYWdPZmZzZXQ6IF9kcmFnT2Zmc2V0IH0pO1xyXG4gICAgICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgICAgICB2YXIgb25yZWxlYXNlID0gZnVuY3Rpb24oZXZ0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFfZHJhZ0VuYWJsZWQpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICAgICAgICBldnQucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAgICAgICAgICAgICAkcm9vdFNjb3BlLiRicm9hZGNhc3QoJ2RyYWdnYWJsZTplbmQnLCB7eDpfbXgsIHk6X215LCB0eDpfdHgsIHR5Ol90eSwgZXZlbnQ6ZXZ0LCBlbGVtZW50OmVsZW1lbnQsIGRhdGE6X2RhdGEsIGNhbGxiYWNrOm9uRHJhZ0NvbXBsZXRlLCB1aWQ6IF9teWlkfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgZWxlbWVudC5yZW1vdmVDbGFzcygnZHJhZ2dpbmcnKTtcclxuICAgICAgICAgICAgICAgICAgICBlbGVtZW50LnBhcmVudCgpLmZpbmQoJy5kcmFnLWVudGVyJykucmVtb3ZlQ2xhc3MoJ2RyYWctZW50ZXInKTtcclxuICAgICAgICAgICAgICAgICAgICByZXNldCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICRkb2N1bWVudC5vZmYoX21vdmVFdmVudHMsIG9ubW92ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgJGRvY3VtZW50Lm9mZihfcmVsZWFzZUV2ZW50cywgb25yZWxlYXNlKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKG9uRHJhZ1N0b3BDYWxsYmFjayApe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzY29wZS4kYXBwbHkoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb25EcmFnU3RvcENhbGxiYWNrKHNjb3BlLCB7JGRhdGE6IF9kYXRhLCAkZXZlbnQ6IGV2dH0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIF9kZXJlZ2lzdGVyUm9vdE1vdmVMaXN0ZW5lcigpO1xyXG4gICAgICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgICAgICB2YXIgb25EcmFnQ29tcGxldGUgPSBmdW5jdGlvbihldnQpIHtcclxuXHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmICghb25EcmFnU3VjY2Vzc0NhbGxiYWNrIClyZXR1cm47XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHNjb3BlLiRhcHBseShmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG9uRHJhZ1N1Y2Nlc3NDYWxsYmFjayhzY29wZSwgeyRkYXRhOiBfZGF0YSwgJGV2ZW50OiBldnR9KTtcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICAgICAgdmFyIHJlc2V0ID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYoYWxsb3dUcmFuc2Zvcm0pXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnQuY3NzKHt0cmFuc2Zvcm06JycsICd6LWluZGV4JzonJywgJy13ZWJraXQtdHJhbnNmb3JtJzonJywgJy1tcy10cmFuc2Zvcm0nOicnfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50LmNzcyh7J3Bvc2l0aW9uJzonJyx0b3A6JycsbGVmdDonJ30pO1xyXG4gICAgICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgICAgICB2YXIgbW92ZUVsZW1lbnQgPSBmdW5jdGlvbiAoeCwgeSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmKGFsbG93VHJhbnNmb3JtKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnQuY3NzKHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRyYW5zZm9ybTogJ21hdHJpeDNkKDEsIDAsIDAsIDAsIDAsIDEsIDAsIDAsIDAsIDAsIDEsIDAsICcgKyB4ICsgJywgJyArIHkgKyAnLCAwLCAxKScsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnei1pbmRleCc6IDk5OTk5LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJy13ZWJraXQtdHJhbnNmb3JtJzogJ21hdHJpeDNkKDEsIDAsIDAsIDAsIDAsIDEsIDAsIDAsIDAsIDAsIDEsIDAsICcgKyB4ICsgJywgJyArIHkgKyAnLCAwLCAxKScsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnLW1zLXRyYW5zZm9ybSc6ICdtYXRyaXgoMSwgMCwgMCwgMSwgJyArIHggKyAnLCAnICsgeSArICcpJ1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICB9ZWxzZXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudC5jc3MoeydsZWZ0Jzp4KydweCcsJ3RvcCc6eSsncHgnLCAncG9zaXRpb24nOidmaXhlZCd9KTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgaW5pdGlhbGl6ZSgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuICAgIH1dKVxyXG5cclxuICAgIC5kaXJlY3RpdmUoJ25nRHJvcCcsIFsnJHBhcnNlJywgJyR0aW1lb3V0JywgJyR3aW5kb3cnLCAnJGRvY3VtZW50JywgJ25nRHJhZ2dhYmxlJywgZnVuY3Rpb24gKCRwYXJzZSwgJHRpbWVvdXQsICR3aW5kb3csICRkb2N1bWVudCwgbmdEcmFnZ2FibGUpIHtcclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICByZXN0cmljdDogJ0EnLFxyXG4gICAgICAgICAgICBsaW5rOiBmdW5jdGlvbiAoc2NvcGUsIGVsZW1lbnQsIGF0dHJzKSB7XHJcbiAgICAgICAgICAgICAgICBzY29wZS52YWx1ZSA9IGF0dHJzLm5nRHJvcDtcclxuICAgICAgICAgICAgICAgIHNjb3BlLmlzVG91Y2hpbmcgPSBmYWxzZTtcclxuXHJcbiAgICAgICAgICAgICAgICB2YXIgX2xhc3REcm9wVG91Y2g9bnVsbDtcclxuXHJcbiAgICAgICAgICAgICAgICB2YXIgX215aWQgPSBzY29wZS4kaWQ7XHJcblxyXG4gICAgICAgICAgICAgICAgdmFyIF9kcm9wRW5hYmxlZD1mYWxzZTtcclxuXHJcbiAgICAgICAgICAgICAgICB2YXIgb25Ecm9wQ2FsbGJhY2sgPSAkcGFyc2UoYXR0cnMubmdEcm9wU3VjY2Vzcyk7Ly8gfHwgZnVuY3Rpb24oKXt9O1xyXG5cclxuICAgICAgICAgICAgICAgIHZhciBvbkRyYWdTdGFydENhbGxiYWNrID0gJHBhcnNlKGF0dHJzLm5nRHJhZ1N0YXJ0KTtcclxuICAgICAgICAgICAgICAgIHZhciBvbkRyYWdTdG9wQ2FsbGJhY2sgPSAkcGFyc2UoYXR0cnMubmdEcmFnU3RvcCk7XHJcbiAgICAgICAgICAgICAgICB2YXIgb25EcmFnTW92ZUNhbGxiYWNrID0gJHBhcnNlKGF0dHJzLm5nRHJhZ01vdmUpO1xyXG5cclxuICAgICAgICAgICAgICAgIHZhciBpbml0aWFsaXplID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRvZ2dsZUxpc3RlbmVycyh0cnVlKTtcclxuICAgICAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICAgICAgdmFyIHRvZ2dsZUxpc3RlbmVycyA9IGZ1bmN0aW9uIChlbmFibGUpIHtcclxuICAgICAgICAgICAgICAgICAgICAvLyByZW1vdmUgbGlzdGVuZXJzXHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmICghZW5hYmxlKXJldHVybjtcclxuICAgICAgICAgICAgICAgICAgICAvLyBhZGQgbGlzdGVuZXJzLlxyXG4gICAgICAgICAgICAgICAgICAgIHNjb3BlLiR3YXRjaChhdHRycy5uZ0Ryb3AsIG9uRW5hYmxlQ2hhbmdlKTtcclxuICAgICAgICAgICAgICAgICAgICBzY29wZS4kb24oJyRkZXN0cm95Jywgb25EZXN0cm95KTtcclxuICAgICAgICAgICAgICAgICAgICBzY29wZS4kb24oJ2RyYWdnYWJsZTpzdGFydCcsIG9uRHJhZ1N0YXJ0KTtcclxuICAgICAgICAgICAgICAgICAgICBzY29wZS4kb24oJ2RyYWdnYWJsZTptb3ZlJywgb25EcmFnTW92ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgc2NvcGUuJG9uKCdkcmFnZ2FibGU6ZW5kJywgb25EcmFnRW5kKTtcclxuICAgICAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICAgICAgdmFyIG9uRGVzdHJveSA9IGZ1bmN0aW9uIChlbmFibGUpIHtcclxuICAgICAgICAgICAgICAgICAgICB0b2dnbGVMaXN0ZW5lcnMoZmFsc2UpO1xyXG4gICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgIHZhciBvbkVuYWJsZUNoYW5nZSA9IGZ1bmN0aW9uIChuZXdWYWwsIG9sZFZhbCkge1xyXG4gICAgICAgICAgICAgICAgICAgIF9kcm9wRW5hYmxlZD1uZXdWYWw7XHJcbiAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgdmFyIG9uRHJhZ1N0YXJ0ID0gZnVuY3Rpb24oZXZ0LCBvYmopIHtcclxuICAgICAgICAgICAgICAgICAgICBpZighIF9kcm9wRW5hYmxlZClyZXR1cm47XHJcbiAgICAgICAgICAgICAgICAgICAgaXNUb3VjaGluZyhvYmoueCxvYmoueSxvYmouZWxlbWVudCk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChhdHRycy5uZ0RyYWdTdGFydCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAkdGltZW91dChmdW5jdGlvbigpe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb25EcmFnU3RhcnRDYWxsYmFjayhzY29wZSwgeyRkYXRhOiBvYmouZGF0YSwgJGV2ZW50OiBvYmp9KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgIHZhciBvbkRyYWdNb3ZlID0gZnVuY3Rpb24oZXZ0LCBvYmopIHtcclxuICAgICAgICAgICAgICAgICAgICBpZighIF9kcm9wRW5hYmxlZClyZXR1cm47XHJcbiAgICAgICAgICAgICAgICAgICAgaXNUb3VjaGluZyhvYmoueCxvYmoueSxvYmouZWxlbWVudCk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChhdHRycy5uZ0RyYWdNb3ZlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICR0aW1lb3V0KGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkRyYWdNb3ZlQ2FsbGJhY2soc2NvcGUsIHskZGF0YTogb2JqLmRhdGEsICRldmVudDogb2JqfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICAgICAgdmFyIG9uRHJhZ0VuZCA9IGZ1bmN0aW9uIChldnQsIG9iaikge1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAvLyBkb24ndCBsaXN0ZW4gdG8gZHJvcCBldmVudHMgaWYgdGhpcyBpcyB0aGUgZWxlbWVudCBiZWluZyBkcmFnZ2VkXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gb25seSB1cGRhdGUgdGhlIHN0eWxlcyBhbmQgcmV0dXJuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFfZHJvcEVuYWJsZWQgfHwgX215aWQgPT09IG9iai51aWQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdXBkYXRlRHJhZ1N0eWxlcyhmYWxzZSwgb2JqLmVsZW1lbnQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChpc1RvdWNoaW5nKG9iai54LCBvYmoueSwgb2JqLmVsZW1lbnQpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGNhbGwgdGhlIG5nRHJhZ2dhYmxlIG5nRHJhZ1N1Y2Nlc3MgZWxlbWVudCBjYWxsYmFja1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZihvYmouY2FsbGJhY2spe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb2JqLmNhbGxiYWNrKG9iaik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChhdHRycy5uZ0Ryb3BTdWNjZXNzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkdGltZW91dChmdW5jdGlvbigpe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uRHJvcENhbGxiYWNrKHNjb3BlLCB7JGRhdGE6IG9iai5kYXRhLCAkZXZlbnQ6IG9iaiwgJHRhcmdldDogc2NvcGUuJGV2YWwoc2NvcGUudmFsdWUpfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGF0dHJzLm5nRHJhZ1N0b3ApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJHRpbWVvdXQoZnVuY3Rpb24oKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uRHJhZ1N0b3BDYWxsYmFjayhzY29wZSwgeyRkYXRhOiBvYmouZGF0YSwgJGV2ZW50OiBvYmp9KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICB1cGRhdGVEcmFnU3R5bGVzKGZhbHNlLCBvYmouZWxlbWVudCk7XHJcbiAgICAgICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgICAgIHZhciBpc1RvdWNoaW5nID0gZnVuY3Rpb24obW91c2VYLCBtb3VzZVksIGRyYWdFbGVtZW50KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHRvdWNoaW5nPSBoaXRUZXN0KG1vdXNlWCwgbW91c2VZKTtcclxuICAgICAgICAgICAgICAgICAgICBzY29wZS5pc1RvdWNoaW5nID0gdG91Y2hpbmc7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYodG91Y2hpbmcpe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBfbGFzdERyb3BUb3VjaCA9IGVsZW1lbnQ7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIHVwZGF0ZURyYWdTdHlsZXModG91Y2hpbmcsIGRyYWdFbGVtZW50KTtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdG91Y2hpbmc7XHJcbiAgICAgICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgICAgIHZhciB1cGRhdGVEcmFnU3R5bGVzID0gZnVuY3Rpb24odG91Y2hpbmcsIGRyYWdFbGVtZW50KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYodG91Y2hpbmcpe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50LmFkZENsYXNzKCdkcmFnLWVudGVyJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRyYWdFbGVtZW50LmFkZENsYXNzKCdkcmFnLW92ZXInKTtcclxuICAgICAgICAgICAgICAgICAgICB9ZWxzZSBpZihfbGFzdERyb3BUb3VjaCA9PSBlbGVtZW50KXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgX2xhc3REcm9wVG91Y2g9bnVsbDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudC5yZW1vdmVDbGFzcygnZHJhZy1lbnRlcicpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBkcmFnRWxlbWVudC5yZW1vdmVDbGFzcygnZHJhZy1vdmVyJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgICAgICB2YXIgaGl0VGVzdCA9IGZ1bmN0aW9uKHgsIHkpIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgYm91bmRzID0gZWxlbWVudFswXS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTsvLyBuZ0RyYWdnYWJsZS5nZXRQcml2T2Zmc2V0KGVsZW1lbnQpO1xyXG4gICAgICAgICAgICAgICAgICAgIHggLT0gJGRvY3VtZW50WzBdLmJvZHkuc2Nyb2xsTGVmdCArICRkb2N1bWVudFswXS5kb2N1bWVudEVsZW1lbnQuc2Nyb2xsTGVmdDtcclxuICAgICAgICAgICAgICAgICAgICB5IC09ICRkb2N1bWVudFswXS5ib2R5LnNjcm9sbFRvcCArICRkb2N1bWVudFswXS5kb2N1bWVudEVsZW1lbnQuc2Nyb2xsVG9wO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAgeCA+PSBib3VuZHMubGVmdFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAmJiB4IDw9IGJvdW5kcy5yaWdodFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAmJiB5IDw9IGJvdW5kcy5ib3R0b21cclxuICAgICAgICAgICAgICAgICAgICAgICAgJiYgeSA+PSBib3VuZHMudG9wO1xyXG4gICAgICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgICAgICBpbml0aWFsaXplKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG4gICAgfV0pXHJcbiAgICAuZGlyZWN0aXZlKCduZ0RyYWdDbG9uZScsIFsnJHBhcnNlJywgJyR0aW1lb3V0JywgJ25nRHJhZ2dhYmxlJywgZnVuY3Rpb24gKCRwYXJzZSwgJHRpbWVvdXQsIG5nRHJhZ2dhYmxlKSB7XHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgcmVzdHJpY3Q6ICdBJyxcclxuICAgICAgICAgICAgbGluazogZnVuY3Rpb24gKHNjb3BlLCBlbGVtZW50LCBhdHRycykge1xyXG4gICAgICAgICAgICAgICAgdmFyIGltZywgX2FsbG93Q2xvbmU9dHJ1ZTtcclxuICAgICAgICAgICAgICAgIHZhciBfZHJhZ09mZnNldCA9IG51bGw7XHJcbiAgICAgICAgICAgICAgICBzY29wZS5jbG9uZWREYXRhID0ge307XHJcbiAgICAgICAgICAgICAgICB2YXIgaW5pdGlhbGl6ZSA9IGZ1bmN0aW9uICgpIHtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaW1nID0gZWxlbWVudC5maW5kKCdpbWcnKTtcclxuICAgICAgICAgICAgICAgICAgICBlbGVtZW50LmF0dHIoJ2RyYWdnYWJsZScsICdmYWxzZScpO1xyXG4gICAgICAgICAgICAgICAgICAgIGltZy5hdHRyKCdkcmFnZ2FibGUnLCAnZmFsc2UnKTtcclxuICAgICAgICAgICAgICAgICAgICByZXNldCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIHRvZ2dsZUxpc3RlbmVycyh0cnVlKTtcclxuICAgICAgICAgICAgICAgIH07XHJcblxyXG5cclxuICAgICAgICAgICAgICAgIHZhciB0b2dnbGVMaXN0ZW5lcnMgPSBmdW5jdGlvbiAoZW5hYmxlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gcmVtb3ZlIGxpc3RlbmVyc1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAoIWVuYWJsZSlyZXR1cm47XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gYWRkIGxpc3RlbmVycy5cclxuICAgICAgICAgICAgICAgICAgICBzY29wZS4kb24oJ2RyYWdnYWJsZTpzdGFydCcsIG9uRHJhZ1N0YXJ0KTtcclxuICAgICAgICAgICAgICAgICAgICBzY29wZS4kb24oJ2RyYWdnYWJsZTptb3ZlJywgb25EcmFnTW92ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgc2NvcGUuJG9uKCdkcmFnZ2FibGU6ZW5kJywgb25EcmFnRW5kKTtcclxuICAgICAgICAgICAgICAgICAgICBwcmV2ZW50Q29udGV4dE1lbnUoKTtcclxuXHJcbiAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgdmFyIHByZXZlbnRDb250ZXh0TWVudSA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vICBlbGVtZW50Lm9mZignbW91c2Vkb3duIHRvdWNoc3RhcnQgdG91Y2htb3ZlIHRvdWNoZW5kIHRvdWNoY2FuY2VsJywgYWJzb3JiRXZlbnRfKTtcclxuICAgICAgICAgICAgICAgICAgICBpbWcub2ZmKCdtb3VzZWRvd24gdG91Y2hzdGFydCB0b3VjaG1vdmUgdG91Y2hlbmQgdG91Y2hjYW5jZWwnLCBhYnNvcmJFdmVudF8pO1xyXG4gICAgICAgICAgICAgICAgICAgIC8vICBlbGVtZW50Lm9uKCdtb3VzZWRvd24gdG91Y2hzdGFydCB0b3VjaG1vdmUgdG91Y2hlbmQgdG91Y2hjYW5jZWwnLCBhYnNvcmJFdmVudF8pO1xyXG4gICAgICAgICAgICAgICAgICAgIGltZy5vbignbW91c2Vkb3duIHRvdWNoc3RhcnQgdG91Y2htb3ZlIHRvdWNoZW5kIHRvdWNoY2FuY2VsJywgYWJzb3JiRXZlbnRfKTtcclxuICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICB2YXIgb25EcmFnU3RhcnQgPSBmdW5jdGlvbihldnQsIG9iaiwgZWxtKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgX2FsbG93Q2xvbmU9dHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICBpZihhbmd1bGFyLmlzRGVmaW5lZChvYmouZGF0YS5hbGxvd0Nsb25lKSl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9hbGxvd0Nsb25lPW9iai5kYXRhLmFsbG93Q2xvbmU7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGlmKF9hbGxvd0Nsb25lKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNjb3BlLiRhcHBseShmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzY29wZS5jbG9uZWREYXRhID0gb2JqLmRhdGE7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50LmNzcygnd2lkdGgnLCBvYmouZWxlbWVudFswXS5vZmZzZXRXaWR0aCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnQuY3NzKCdoZWlnaHQnLCBvYmouZWxlbWVudFswXS5vZmZzZXRIZWlnaHQpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgbW92ZUVsZW1lbnQob2JqLnR4LCBvYmoudHkpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgdmFyIG9uRHJhZ01vdmUgPSBmdW5jdGlvbihldnQsIG9iaikge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmKF9hbGxvd0Nsb25lKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBfdHggPSBvYmoudHggKyBvYmouZHJhZ09mZnNldC5sZWZ0O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBfdHkgPSBvYmoudHkgKyBvYmouZHJhZ09mZnNldC50b3A7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBtb3ZlRWxlbWVudChfdHgsIF90eSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgIHZhciBvbkRyYWdFbmQgPSBmdW5jdGlvbihldnQsIG9iaikge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vbW92ZUVsZW1lbnQob2JqLnR4LG9iai50eSk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYoX2FsbG93Q2xvbmUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVzZXQoKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgICAgIHZhciByZXNldCA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGVsZW1lbnQuY3NzKHtsZWZ0OjAsdG9wOjAsIHBvc2l0aW9uOidmaXhlZCcsICd6LWluZGV4JzotMSwgdmlzaWJpbGl0eTonaGlkZGVuJ30pO1xyXG4gICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgIHZhciBtb3ZlRWxlbWVudCA9IGZ1bmN0aW9uKHgseSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGVsZW1lbnQuY3NzKHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdHJhbnNmb3JtOiAnbWF0cml4M2QoMSwgMCwgMCwgMCwgMCwgMSwgMCwgMCwgMCwgMCwgMSwgMCwgJyt4KycsICcreSsnLCAwLCAxKScsICd6LWluZGV4JzogOTk5OTksICd2aXNpYmlsaXR5JzogJ3Zpc2libGUnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAnLXdlYmtpdC10cmFuc2Zvcm0nOiAnbWF0cml4M2QoMSwgMCwgMCwgMCwgMCwgMSwgMCwgMCwgMCwgMCwgMSwgMCwgJyt4KycsICcreSsnLCAwLCAxKScsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICctbXMtdHJhbnNmb3JtJzogJ21hdHJpeCgxLCAwLCAwLCAxLCAnK3grJywgJyt5KycpJ1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyxtYXJnaW46ICcwJyAgZG9uJ3QgbW9ua2V5IHdpdGggdGhlIG1hcmdpbixcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICAgICAgdmFyIGFic29yYkV2ZW50XyA9IGZ1bmN0aW9uIChldmVudCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBlID0gZXZlbnQ7Ly8ub3JpZ2luYWxFdmVudDtcclxuICAgICAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0ICYmIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAgICAgICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbiAmJiBlLnN0b3BQcm9wYWdhdGlvbigpO1xyXG4gICAgICAgICAgICAgICAgICAgIGUuY2FuY2VsQnViYmxlID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICBlLnJldHVyblZhbHVlID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgICAgICBpbml0aWFsaXplKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG4gICAgfV0pXHJcbiAgICAuZGlyZWN0aXZlKCduZ1ByZXZlbnREcmFnJywgWyckcGFyc2UnLCAnJHRpbWVvdXQnLCBmdW5jdGlvbiAoJHBhcnNlLCAkdGltZW91dCkge1xyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIHJlc3RyaWN0OiAnQScsXHJcbiAgICAgICAgICAgIGxpbms6IGZ1bmN0aW9uIChzY29wZSwgZWxlbWVudCwgYXR0cnMpIHtcclxuICAgICAgICAgICAgICAgIHZhciBpbml0aWFsaXplID0gZnVuY3Rpb24gKCkge1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBlbGVtZW50LmF0dHIoJ2RyYWdnYWJsZScsICdmYWxzZScpO1xyXG4gICAgICAgICAgICAgICAgICAgIHRvZ2dsZUxpc3RlbmVycyh0cnVlKTtcclxuICAgICAgICAgICAgICAgIH07XHJcblxyXG5cclxuICAgICAgICAgICAgICAgIHZhciB0b2dnbGVMaXN0ZW5lcnMgPSBmdW5jdGlvbiAoZW5hYmxlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gcmVtb3ZlIGxpc3RlbmVyc1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAoIWVuYWJsZSlyZXR1cm47XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gYWRkIGxpc3RlbmVycy5cclxuICAgICAgICAgICAgICAgICAgICBlbGVtZW50Lm9uKCdtb3VzZWRvd24gdG91Y2hzdGFydCB0b3VjaG1vdmUgdG91Y2hlbmQgdG91Y2hjYW5jZWwnLCBhYnNvcmJFdmVudF8pO1xyXG4gICAgICAgICAgICAgICAgfTtcclxuXHJcblxyXG4gICAgICAgICAgICAgICAgdmFyIGFic29yYkV2ZW50XyA9IGZ1bmN0aW9uIChldmVudCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBlID0gZXZlbnQub3JpZ2luYWxFdmVudDtcclxuICAgICAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0ICYmIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAgICAgICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbiAmJiBlLnN0b3BQcm9wYWdhdGlvbigpO1xyXG4gICAgICAgICAgICAgICAgICAgIGUuY2FuY2VsQnViYmxlID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICBlLnJldHVyblZhbHVlID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgICAgICBpbml0aWFsaXplKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG4gICAgfV0pXHJcbiAgICAuZGlyZWN0aXZlKCduZ0NhbmNlbERyYWcnLCBbZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIHJlc3RyaWN0OiAnQScsXHJcbiAgICAgICAgICAgIGxpbms6IGZ1bmN0aW9uIChzY29wZSwgZWxlbWVudCwgYXR0cnMpIHtcclxuICAgICAgICAgICAgICAgIGVsZW1lbnQuZmluZCgnKicpLmF0dHIoJ25nLWNhbmNlbC1kcmFnJywgJ25nLWNhbmNlbC1kcmFnJyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG4gICAgfV0pXHJcbiAgICAuZGlyZWN0aXZlKCduZ0RyYWdTY3JvbGwnLCBbJyR3aW5kb3cnLCAnJGludGVydmFsJywgJyR0aW1lb3V0JywgJyRkb2N1bWVudCcsICckcm9vdFNjb3BlJywgZnVuY3Rpb24oJHdpbmRvdywgJGludGVydmFsLCAkdGltZW91dCwgJGRvY3VtZW50LCAkcm9vdFNjb3BlKSB7XHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgcmVzdHJpY3Q6ICdBJyxcclxuICAgICAgICAgICAgbGluazogZnVuY3Rpb24oc2NvcGUsIGVsZW1lbnQsIGF0dHJzKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgaW50ZXJ2YWxQcm9taXNlID0gbnVsbDtcclxuICAgICAgICAgICAgICAgIHZhciBsYXN0TW91c2VFdmVudCA9IG51bGw7XHJcblxyXG4gICAgICAgICAgICAgICAgdmFyIGNvbmZpZyA9IHtcclxuICAgICAgICAgICAgICAgICAgICB2ZXJ0aWNhbFNjcm9sbDogYXR0cnMudmVydGljYWxTY3JvbGwgfHwgdHJ1ZSxcclxuICAgICAgICAgICAgICAgICAgICBob3Jpem9udGFsU2Nyb2xsOiBhdHRycy5ob3Jpem9udGFsU2Nyb2xsIHx8IHRydWUsXHJcbiAgICAgICAgICAgICAgICAgICAgYWN0aXZhdGlvbkRpc3RhbmNlOiBhdHRycy5hY3RpdmF0aW9uRGlzdGFuY2UgfHwgNzUsXHJcbiAgICAgICAgICAgICAgICAgICAgc2Nyb2xsRGlzdGFuY2U6IGF0dHJzLnNjcm9sbERpc3RhbmNlIHx8IDE1XHJcbiAgICAgICAgICAgICAgICB9O1xyXG5cclxuXHJcbiAgICAgICAgICAgICAgICB2YXIgcmVxQW5pbUZyYW1lID0gKGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB3aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lIHx8XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHdpbmRvdy53ZWJraXRSZXF1ZXN0QW5pbWF0aW9uRnJhbWUgfHxcclxuICAgICAgICAgICAgICAgICAgICAgICAgd2luZG93Lm1velJlcXVlc3RBbmltYXRpb25GcmFtZSB8fFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB3aW5kb3cub1JlcXVlc3RBbmltYXRpb25GcmFtZSB8fFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB3aW5kb3cubXNSZXF1ZXN0QW5pbWF0aW9uRnJhbWUgfHxcclxuICAgICAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24oIC8qIGZ1bmN0aW9uIEZyYW1lUmVxdWVzdENhbGxiYWNrICovIGNhbGxiYWNrLCAvKiBET01FbGVtZW50IEVsZW1lbnQgKi8gZWxlbWVudCApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpbmRvdy5zZXRUaW1lb3V0KGNhbGxiYWNrLCAxMDAwIC8gNjApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgfSkoKTtcclxuXHJcbiAgICAgICAgICAgICAgICB2YXIgYW5pbWF0aW9uSXNPbiA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgdmFyIGNyZWF0ZUludGVydmFsID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgYW5pbWF0aW9uSXNPbiA9IHRydWU7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIG5leHRGcmFtZShjYWxsYmFjaykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgYXJncyA9IEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKGFuaW1hdGlvbklzT24pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlcUFuaW1GcmFtZShmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJHJvb3RTY29wZS4kYXBwbHkoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYWxsYmFjay5hcHBseShudWxsLCBhcmdzKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV4dEZyYW1lKGNhbGxiYWNrKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIG5leHRGcmFtZShmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFsYXN0TW91c2VFdmVudCkgcmV0dXJuO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHZpZXdwb3J0V2lkdGggPSBNYXRoLm1heChkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuY2xpZW50V2lkdGgsIHdpbmRvdy5pbm5lcldpZHRoIHx8IDApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgdmlld3BvcnRIZWlnaHQgPSBNYXRoLm1heChkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuY2xpZW50SGVpZ2h0LCB3aW5kb3cuaW5uZXJIZWlnaHQgfHwgMCk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgc2Nyb2xsWCA9IDA7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBzY3JvbGxZID0gMDtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjb25maWcuaG9yaXpvbnRhbFNjcm9sbCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gSWYgaG9yaXpvbnRhbCBzY3JvbGxpbmcgaXMgYWN0aXZlLlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGxhc3RNb3VzZUV2ZW50LmNsaWVudFggPCBjb25maWcuYWN0aXZhdGlvbkRpc3RhbmNlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gSWYgdGhlIG1vdXNlIGlzIG9uIHRoZSBsZWZ0IG9mIHRoZSB2aWV3cG9ydCB3aXRoaW4gdGhlIGFjdGl2YXRpb24gZGlzdGFuY2UuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2Nyb2xsWCA9IC1jb25maWcuc2Nyb2xsRGlzdGFuY2U7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIGlmIChsYXN0TW91c2VFdmVudC5jbGllbnRYID4gdmlld3BvcnRXaWR0aCAtIGNvbmZpZy5hY3RpdmF0aW9uRGlzdGFuY2UpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBJZiB0aGUgbW91c2UgaXMgb24gdGhlIHJpZ2h0IG9mIHRoZSB2aWV3cG9ydCB3aXRoaW4gdGhlIGFjdGl2YXRpb24gZGlzdGFuY2UuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2Nyb2xsWCA9IGNvbmZpZy5zY3JvbGxEaXN0YW5jZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNvbmZpZy52ZXJ0aWNhbFNjcm9sbCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gSWYgdmVydGljYWwgc2Nyb2xsaW5nIGlzIGFjdGl2ZS5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChsYXN0TW91c2VFdmVudC5jbGllbnRZIDwgY29uZmlnLmFjdGl2YXRpb25EaXN0YW5jZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIElmIHRoZSBtb3VzZSBpcyBvbiB0aGUgdG9wIG9mIHRoZSB2aWV3cG9ydCB3aXRoaW4gdGhlIGFjdGl2YXRpb24gZGlzdGFuY2UuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2Nyb2xsWSA9IC1jb25maWcuc2Nyb2xsRGlzdGFuY2U7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIGlmIChsYXN0TW91c2VFdmVudC5jbGllbnRZID4gdmlld3BvcnRIZWlnaHQgLSBjb25maWcuYWN0aXZhdGlvbkRpc3RhbmNlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gSWYgdGhlIG1vdXNlIGlzIG9uIHRoZSBib3R0b20gb2YgdGhlIHZpZXdwb3J0IHdpdGhpbiB0aGUgYWN0aXZhdGlvbiBkaXN0YW5jZS5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzY3JvbGxZID0gY29uZmlnLnNjcm9sbERpc3RhbmNlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG5cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzY3JvbGxYICE9PSAwIHx8IHNjcm9sbFkgIT09IDApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFJlY29yZCB0aGUgY3VycmVudCBzY3JvbGwgcG9zaXRpb24uXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgY3VycmVudFNjcm9sbExlZnQgPSAoJHdpbmRvdy5wYWdlWE9mZnNldCB8fCAkZG9jdW1lbnRbMF0uZG9jdW1lbnRFbGVtZW50LnNjcm9sbExlZnQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGN1cnJlbnRTY3JvbGxUb3AgPSAoJHdpbmRvdy5wYWdlWU9mZnNldCB8fCAkZG9jdW1lbnRbMF0uZG9jdW1lbnRFbGVtZW50LnNjcm9sbFRvcCk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gUmVtb3ZlIHRoZSB0cmFuc2Zvcm1hdGlvbiBmcm9tIHRoZSBlbGVtZW50LCBzY3JvbGwgdGhlIHdpbmRvdyBieSB0aGUgc2Nyb2xsIGRpc3RhbmNlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyByZWNvcmQgaG93IGZhciB3ZSBzY3JvbGxlZCwgdGhlbiByZWFwcGx5IHRoZSBlbGVtZW50IHRyYW5zZm9ybWF0aW9uLlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGVsZW1lbnRUcmFuc2Zvcm0gPSBlbGVtZW50LmNzcygndHJhbnNmb3JtJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50LmNzcygndHJhbnNmb3JtJywgJ2luaXRpYWwnKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkd2luZG93LnNjcm9sbEJ5KHNjcm9sbFgsIHNjcm9sbFkpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBob3Jpem9udGFsU2Nyb2xsQW1vdW50ID0gKCR3aW5kb3cucGFnZVhPZmZzZXQgfHwgJGRvY3VtZW50WzBdLmRvY3VtZW50RWxlbWVudC5zY3JvbGxMZWZ0KSAtIGN1cnJlbnRTY3JvbGxMZWZ0O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHZlcnRpY2FsU2Nyb2xsQW1vdW50ID0gICgkd2luZG93LnBhZ2VZT2Zmc2V0IHx8ICRkb2N1bWVudFswXS5kb2N1bWVudEVsZW1lbnQuc2Nyb2xsVG9wKSAtIGN1cnJlbnRTY3JvbGxUb3A7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudC5jc3MoJ3RyYW5zZm9ybScsIGVsZW1lbnRUcmFuc2Zvcm0pO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxhc3RNb3VzZUV2ZW50LnBhZ2VYICs9IGhvcml6b250YWxTY3JvbGxBbW91bnQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsYXN0TW91c2VFdmVudC5wYWdlWSArPSB2ZXJ0aWNhbFNjcm9sbEFtb3VudDtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkcm9vdFNjb3BlLiRlbWl0KCdkcmFnZ2FibGU6X3RyaWdnZXJIYW5kbGVyTW92ZScsIGxhc3RNb3VzZUV2ZW50KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICAgICAgdmFyIGNsZWFySW50ZXJ2YWwgPSBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgICAgICBhbmltYXRpb25Jc09uID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgICAgIHNjb3BlLiRvbignZHJhZ2dhYmxlOnN0YXJ0JywgZnVuY3Rpb24oZXZlbnQsIG9iaikge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIElnbm9yZSB0aGlzIGV2ZW50IGlmIGl0J3Mgbm90IGZvciB0aGlzIGVsZW1lbnQuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKG9iai5lbGVtZW50WzBdICE9PSBlbGVtZW50WzBdKSByZXR1cm47XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmICghYW5pbWF0aW9uSXNPbikgY3JlYXRlSW50ZXJ2YWwoKTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgICAgIHNjb3BlLiRvbignZHJhZ2dhYmxlOmVuZCcsIGZ1bmN0aW9uKGV2ZW50LCBvYmopIHtcclxuICAgICAgICAgICAgICAgICAgICAvLyBJZ25vcmUgdGhpcyBldmVudCBpZiBpdCdzIG5vdCBmb3IgdGhpcyBlbGVtZW50LlxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChvYmouZWxlbWVudFswXSAhPT0gZWxlbWVudFswXSkgcmV0dXJuO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAoYW5pbWF0aW9uSXNPbikgY2xlYXJJbnRlcnZhbCgpO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAgICAgc2NvcGUuJG9uKCdkcmFnZ2FibGU6bW92ZScsIGZ1bmN0aW9uKGV2ZW50LCBvYmopIHtcclxuICAgICAgICAgICAgICAgICAgICAvLyBJZ25vcmUgdGhpcyBldmVudCBpZiBpdCdzIG5vdCBmb3IgdGhpcyBlbGVtZW50LlxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChvYmouZWxlbWVudFswXSAhPT0gZWxlbWVudFswXSkgcmV0dXJuO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBsYXN0TW91c2VFdmVudCA9IG9iai5ldmVudDtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuICAgIH1dKTtcclxuIiwiLypcclxuKiBhbmd1bGFyLXVpLWJvb3RzdHJhcFxyXG4qIGh0dHA6Ly9hbmd1bGFyLXVpLmdpdGh1Yi5pby9ib290c3RyYXAvXHJcblxyXG4qIFZlcnNpb246IDEuMC4zIC0gMjAxNi0wMS0xMVxyXG4qIExpY2Vuc2U6IE1JVFxyXG4qL2FuZ3VsYXIubW9kdWxlKFwidWkuYm9vdHN0cmFwXCIsW1widWkuYm9vdHN0cmFwLnRwbHNcIixcInVpLmJvb3RzdHJhcC5tb2RhbFwiLFwidWkuYm9vdHN0cmFwLnN0YWNrZWRNYXBcIl0pLGFuZ3VsYXIubW9kdWxlKFwidWkuYm9vdHN0cmFwLnRwbHNcIixbXCJ1aWIvdGVtcGxhdGUvbW9kYWwvYmFja2Ryb3AuaHRtbFwiLFwidWliL3RlbXBsYXRlL21vZGFsL3dpbmRvdy5odG1sXCJdKSxhbmd1bGFyLm1vZHVsZShcInVpLmJvb3RzdHJhcC5tb2RhbFwiLFtcInVpLmJvb3RzdHJhcC5zdGFja2VkTWFwXCJdKS5mYWN0b3J5KFwiJCRtdWx0aU1hcFwiLGZ1bmN0aW9uKCl7cmV0dXJue2NyZWF0ZU5ldzpmdW5jdGlvbigpe3ZhciBlPXt9O3JldHVybntlbnRyaWVzOmZ1bmN0aW9uKCl7cmV0dXJuIE9iamVjdC5rZXlzKGUpLm1hcChmdW5jdGlvbihuKXtyZXR1cm57a2V5Om4sdmFsdWU6ZVtuXX19KX0sZ2V0OmZ1bmN0aW9uKG4pe3JldHVybiBlW25dfSxoYXNLZXk6ZnVuY3Rpb24obil7cmV0dXJuISFlW25dfSxrZXlzOmZ1bmN0aW9uKCl7cmV0dXJuIE9iamVjdC5rZXlzKGUpfSxwdXQ6ZnVuY3Rpb24obix0KXtlW25dfHwoZVtuXT1bXSksZVtuXS5wdXNoKHQpfSxyZW1vdmU6ZnVuY3Rpb24obix0KXt2YXIgbz1lW25dO2lmKG8pe3ZhciBhPW8uaW5kZXhPZih0KTstMSE9PWEmJm8uc3BsaWNlKGEsMSksby5sZW5ndGh8fGRlbGV0ZSBlW25dfX19fX19KS5wcm92aWRlcihcIiR1aWJSZXNvbHZlXCIsZnVuY3Rpb24oKXt2YXIgZT10aGlzO3RoaXMucmVzb2x2ZXI9bnVsbCx0aGlzLnNldFJlc29sdmVyPWZ1bmN0aW9uKGUpe3RoaXMucmVzb2x2ZXI9ZX0sdGhpcy4kZ2V0PVtcIiRpbmplY3RvclwiLFwiJHFcIixmdW5jdGlvbihuLHQpe3ZhciBvPWUucmVzb2x2ZXI/bi5nZXQoZS5yZXNvbHZlcik6bnVsbDtyZXR1cm57cmVzb2x2ZTpmdW5jdGlvbihlLGEscixsKXtpZihvKXJldHVybiBvLnJlc29sdmUoZSxhLHIsbCk7dmFyIGk9W107cmV0dXJuIGFuZ3VsYXIuZm9yRWFjaChlLGZ1bmN0aW9uKGUpe2kucHVzaChhbmd1bGFyLmlzRnVuY3Rpb24oZSl8fGFuZ3VsYXIuaXNBcnJheShlKT90LnJlc29sdmUobi5pbnZva2UoZSkpOmFuZ3VsYXIuaXNTdHJpbmcoZSk/dC5yZXNvbHZlKG4uZ2V0KGUpKTp0LnJlc29sdmUoZSkpfSksdC5hbGwoaSkudGhlbihmdW5jdGlvbihuKXt2YXIgdD17fSxvPTA7cmV0dXJuIGFuZ3VsYXIuZm9yRWFjaChlLGZ1bmN0aW9uKGUsYSl7dFthXT1uW28rK119KSx0fSl9fX1dfSkuZGlyZWN0aXZlKFwidWliTW9kYWxCYWNrZHJvcFwiLFtcIiRhbmltYXRlQ3NzXCIsXCIkaW5qZWN0b3JcIixcIiR1aWJNb2RhbFN0YWNrXCIsZnVuY3Rpb24oZSxuLHQpe2Z1bmN0aW9uIG8obixvLGEpe2EubW9kYWxJbkNsYXNzJiYoZShvLHthZGRDbGFzczphLm1vZGFsSW5DbGFzc30pLnN0YXJ0KCksbi4kb24odC5OT1dfQ0xPU0lOR19FVkVOVCxmdW5jdGlvbih0LHIpe3ZhciBsPXIoKTtuLm1vZGFsT3B0aW9ucy5hbmltYXRpb24/ZShvLHtyZW1vdmVDbGFzczphLm1vZGFsSW5DbGFzc30pLnN0YXJ0KCkudGhlbihsKTpsKCl9KSl9cmV0dXJue3JlcGxhY2U6ITAsdGVtcGxhdGVVcmw6XCJ1aWIvdGVtcGxhdGUvbW9kYWwvYmFja2Ryb3AuaHRtbFwiLGNvbXBpbGU6ZnVuY3Rpb24oZSxuKXtyZXR1cm4gZS5hZGRDbGFzcyhuLmJhY2tkcm9wQ2xhc3MpLG99fX1dKS5kaXJlY3RpdmUoXCJ1aWJNb2RhbFdpbmRvd1wiLFtcIiR1aWJNb2RhbFN0YWNrXCIsXCIkcVwiLFwiJGFuaW1hdGVcIixcIiRhbmltYXRlQ3NzXCIsXCIkZG9jdW1lbnRcIixmdW5jdGlvbihlLG4sdCxvLGEpe3JldHVybntzY29wZTp7aW5kZXg6XCJAXCJ9LHJlcGxhY2U6ITAsdHJhbnNjbHVkZTohMCx0ZW1wbGF0ZVVybDpmdW5jdGlvbihlLG4pe3JldHVybiBuLnRlbXBsYXRlVXJsfHxcInVpYi90ZW1wbGF0ZS9tb2RhbC93aW5kb3cuaHRtbFwifSxsaW5rOmZ1bmN0aW9uKHIsbCxpKXtsLmFkZENsYXNzKGkud2luZG93Q2xhc3N8fFwiXCIpLGwuYWRkQ2xhc3MoaS53aW5kb3dUb3BDbGFzc3x8XCJcIiksci5zaXplPWkuc2l6ZSxyLmNsb3NlPWZ1bmN0aW9uKG4pe3ZhciB0PWUuZ2V0VG9wKCk7dCYmdC52YWx1ZS5iYWNrZHJvcCYmXCJzdGF0aWNcIiE9PXQudmFsdWUuYmFja2Ryb3AmJm4udGFyZ2V0PT09bi5jdXJyZW50VGFyZ2V0JiYobi5wcmV2ZW50RGVmYXVsdCgpLG4uc3RvcFByb3BhZ2F0aW9uKCksZS5kaXNtaXNzKHQua2V5LFwiYmFja2Ryb3AgY2xpY2tcIikpfSxsLm9uKFwiY2xpY2tcIixyLmNsb3NlKSxyLiRpc1JlbmRlcmVkPSEwO3ZhciBzPW4uZGVmZXIoKTtpLiRvYnNlcnZlKFwibW9kYWxSZW5kZXJcIixmdW5jdGlvbihlKXtcInRydWVcIj09PWUmJnMucmVzb2x2ZSgpfSkscy5wcm9taXNlLnRoZW4oZnVuY3Rpb24oKXt2YXIgcz1udWxsO2kubW9kYWxJbkNsYXNzJiYocz1vKGwse2FkZENsYXNzOmkubW9kYWxJbkNsYXNzfSkuc3RhcnQoKSxyLiRvbihlLk5PV19DTE9TSU5HX0VWRU5ULGZ1bmN0aW9uKGUsbil7dmFyIGE9bigpO28/byhsLHtyZW1vdmVDbGFzczppLm1vZGFsSW5DbGFzc30pLnN0YXJ0KCkudGhlbihhKTp0LnJlbW92ZUNsYXNzKGwsaS5tb2RhbEluQ2xhc3MpLnRoZW4oYSl9KSksbi53aGVuKHMpLnRoZW4oZnVuY3Rpb24oKXtpZighYVswXS5hY3RpdmVFbGVtZW50fHwhbFswXS5jb250YWlucyhhWzBdLmFjdGl2ZUVsZW1lbnQpKXt2YXIgZT1sWzBdLnF1ZXJ5U2VsZWN0b3IoXCJbYXV0b2ZvY3VzXVwiKTtlP2UuZm9jdXMoKTpsWzBdLmZvY3VzKCl9fSk7dmFyIHU9ZS5nZXRUb3AoKTt1JiZlLm1vZGFsUmVuZGVyZWQodS5rZXkpfSl9fX1dKS5kaXJlY3RpdmUoXCJ1aWJNb2RhbEFuaW1hdGlvbkNsYXNzXCIsZnVuY3Rpb24oKXtyZXR1cm57Y29tcGlsZTpmdW5jdGlvbihlLG4pe24ubW9kYWxBbmltYXRpb24mJmUuYWRkQ2xhc3Mobi51aWJNb2RhbEFuaW1hdGlvbkNsYXNzKX19fSkuZGlyZWN0aXZlKFwidWliTW9kYWxUcmFuc2NsdWRlXCIsZnVuY3Rpb24oKXtyZXR1cm57bGluazpmdW5jdGlvbihlLG4sdCxvLGEpe2EoZS4kcGFyZW50LGZ1bmN0aW9uKGUpe24uZW1wdHkoKSxuLmFwcGVuZChlKX0pfX19KS5mYWN0b3J5KFwiJHVpYk1vZGFsU3RhY2tcIixbXCIkYW5pbWF0ZVwiLFwiJGFuaW1hdGVDc3NcIixcIiRkb2N1bWVudFwiLFwiJGNvbXBpbGVcIixcIiRyb290U2NvcGVcIixcIiRxXCIsXCIkJG11bHRpTWFwXCIsXCIkJHN0YWNrZWRNYXBcIixmdW5jdGlvbihlLG4sdCxvLGEscixsLGkpe2Z1bmN0aW9uIHMoKXtmb3IodmFyIGU9LTEsbj1nLmtleXMoKSx0PTA7dDxuLmxlbmd0aDt0KyspZy5nZXQoblt0XSkudmFsdWUuYmFja2Ryb3AmJihlPXQpO3JldHVybiBlfWZ1bmN0aW9uIHUoZSxuKXt2YXIgdD1nLmdldChlKS52YWx1ZSxvPXQuYXBwZW5kVG87Zy5yZW1vdmUoZSkscCh0Lm1vZGFsRG9tRWwsdC5tb2RhbFNjb3BlLGZ1bmN0aW9uKCl7dmFyIG49dC5vcGVuZWRDbGFzc3x8JDtrLnJlbW92ZShuLGUpLG8udG9nZ2xlQ2xhc3MobixrLmhhc0tleShuKSksZCghMCl9KSxjKCksbiYmbi5mb2N1cz9uLmZvY3VzKCk6by5mb2N1cyYmby5mb2N1cygpfWZ1bmN0aW9uIGQoZSl7dmFyIG47Zy5sZW5ndGgoKT4wJiYobj1nLnRvcCgpLnZhbHVlLG4ubW9kYWxEb21FbC50b2dnbGVDbGFzcyhuLndpbmRvd1RvcENsYXNzfHxcIlwiLGUpKX1mdW5jdGlvbiBjKCl7aWYodiYmLTE9PT1zKCkpe3ZhciBlPWI7cCh2LGIsZnVuY3Rpb24oKXtlPW51bGx9KSx2PXZvaWQgMCxiPXZvaWQgMH19ZnVuY3Rpb24gcChlLHQsbyxhKXtmdW5jdGlvbiBsKCl7bC5kb25lfHwobC5kb25lPSEwLG4oZSx7ZXZlbnQ6XCJsZWF2ZVwifSkuc3RhcnQoKS50aGVuKGZ1bmN0aW9uKCl7ZS5yZW1vdmUoKSxhJiZhLnJlc29sdmUoKX0pLHQuJGRlc3Ryb3koKSxvJiZvKCkpfXZhciBpLHM9bnVsbCx1PWZ1bmN0aW9uKCl7cmV0dXJuIGl8fChpPXIuZGVmZXIoKSxzPWkucHJvbWlzZSksZnVuY3Rpb24oKXtpLnJlc29sdmUoKX19O3JldHVybiB0LiRicm9hZGNhc3Qody5OT1dfQ0xPU0lOR19FVkVOVCx1KSxyLndoZW4ocykudGhlbihsKX1mdW5jdGlvbiBtKGUpe2lmKGUuaXNEZWZhdWx0UHJldmVudGVkKCkpcmV0dXJuIGU7dmFyIG49Zy50b3AoKTtpZihuKXN3aXRjaChlLndoaWNoKXtjYXNlIDI3Om4udmFsdWUua2V5Ym9hcmQmJihlLnByZXZlbnREZWZhdWx0KCksYS4kYXBwbHkoZnVuY3Rpb24oKXt3LmRpc21pc3Mobi5rZXksXCJlc2NhcGUga2V5IHByZXNzXCIpfSkpO2JyZWFrO2Nhc2UgOTp3LmxvYWRGb2N1c0VsZW1lbnRMaXN0KG4pO3ZhciB0PSExO2Uuc2hpZnRLZXk/dy5pc0ZvY3VzSW5GaXJzdEl0ZW0oZSkmJih0PXcuZm9jdXNMYXN0Rm9jdXNhYmxlRWxlbWVudCgpKTp3LmlzRm9jdXNJbkxhc3RJdGVtKGUpJiYodD13LmZvY3VzRmlyc3RGb2N1c2FibGVFbGVtZW50KCkpLHQmJihlLnByZXZlbnREZWZhdWx0KCksZS5zdG9wUHJvcGFnYXRpb24oKSl9fWZ1bmN0aW9uIGYoZSxuLHQpe3JldHVybiFlLnZhbHVlLm1vZGFsU2NvcGUuJGJyb2FkY2FzdChcIm1vZGFsLmNsb3NpbmdcIixuLHQpLmRlZmF1bHRQcmV2ZW50ZWR9dmFyIHYsYixoLCQ9XCJtb2RhbC1vcGVuXCIsZz1pLmNyZWF0ZU5ldygpLGs9bC5jcmVhdGVOZXcoKSx3PXtOT1dfQ0xPU0lOR19FVkVOVDpcIm1vZGFsLnN0YWNrLm5vdy1jbG9zaW5nXCJ9LEM9MCx5PVwiYVtocmVmXSwgYXJlYVtocmVmXSwgaW5wdXQ6bm90KFtkaXNhYmxlZF0pLCBidXR0b246bm90KFtkaXNhYmxlZF0pLHNlbGVjdDpub3QoW2Rpc2FibGVkXSksIHRleHRhcmVhOm5vdChbZGlzYWJsZWRdKSwgaWZyYW1lLCBvYmplY3QsIGVtYmVkLCAqW3RhYmluZGV4XSwgKltjb250ZW50ZWRpdGFibGU9dHJ1ZV1cIjtyZXR1cm4gYS4kd2F0Y2gocyxmdW5jdGlvbihlKXtiJiYoYi5pbmRleD1lKX0pLHQub24oXCJrZXlkb3duXCIsbSksYS4kb24oXCIkZGVzdHJveVwiLGZ1bmN0aW9uKCl7dC5vZmYoXCJrZXlkb3duXCIsbSl9KSx3Lm9wZW49ZnVuY3Rpb24obixyKXt2YXIgbD10WzBdLmFjdGl2ZUVsZW1lbnQsaT1yLm9wZW5lZENsYXNzfHwkO2QoITEpLGcuYWRkKG4se2RlZmVycmVkOnIuZGVmZXJyZWQscmVuZGVyRGVmZXJyZWQ6ci5yZW5kZXJEZWZlcnJlZCxjbG9zZWREZWZlcnJlZDpyLmNsb3NlZERlZmVycmVkLG1vZGFsU2NvcGU6ci5zY29wZSxiYWNrZHJvcDpyLmJhY2tkcm9wLGtleWJvYXJkOnIua2V5Ym9hcmQsb3BlbmVkQ2xhc3M6ci5vcGVuZWRDbGFzcyx3aW5kb3dUb3BDbGFzczpyLndpbmRvd1RvcENsYXNzLGFuaW1hdGlvbjpyLmFuaW1hdGlvbixhcHBlbmRUbzpyLmFwcGVuZFRvfSksay5wdXQoaSxuKTt2YXIgdT1yLmFwcGVuZFRvLGM9cygpO2lmKCF1Lmxlbmd0aCl0aHJvdyBuZXcgRXJyb3IoXCJhcHBlbmRUbyBlbGVtZW50IG5vdCBmb3VuZC4gTWFrZSBzdXJlIHRoYXQgdGhlIGVsZW1lbnQgcGFzc2VkIGlzIGluIERPTS5cIik7Yz49MCYmIXYmJihiPWEuJG5ldyghMCksYi5tb2RhbE9wdGlvbnM9cixiLmluZGV4PWMsdj1hbmd1bGFyLmVsZW1lbnQoJzxkaXYgdWliLW1vZGFsLWJhY2tkcm9wPVwibW9kYWwtYmFja2Ryb3BcIj48L2Rpdj4nKSx2LmF0dHIoXCJiYWNrZHJvcC1jbGFzc1wiLHIuYmFja2Ryb3BDbGFzcyksci5hbmltYXRpb24mJnYuYXR0cihcIm1vZGFsLWFuaW1hdGlvblwiLFwidHJ1ZVwiKSxvKHYpKGIpLGUuZW50ZXIodix1KSk7dmFyIHA9YW5ndWxhci5lbGVtZW50KCc8ZGl2IHVpYi1tb2RhbC13aW5kb3c9XCJtb2RhbC13aW5kb3dcIj48L2Rpdj4nKTtwLmF0dHIoe1widGVtcGxhdGUtdXJsXCI6ci53aW5kb3dUZW1wbGF0ZVVybCxcIndpbmRvdy1jbGFzc1wiOnIud2luZG93Q2xhc3MsXCJ3aW5kb3ctdG9wLWNsYXNzXCI6ci53aW5kb3dUb3BDbGFzcyxzaXplOnIuc2l6ZSxpbmRleDpnLmxlbmd0aCgpLTEsYW5pbWF0ZTpcImFuaW1hdGVcIn0pLmh0bWwoci5jb250ZW50KSxyLmFuaW1hdGlvbiYmcC5hdHRyKFwibW9kYWwtYW5pbWF0aW9uXCIsXCJ0cnVlXCIpLGUuZW50ZXIocCx1KS50aGVuKGZ1bmN0aW9uKCl7byhwKShyLnNjb3BlKSxlLmFkZENsYXNzKHUsaSl9KSxnLnRvcCgpLnZhbHVlLm1vZGFsRG9tRWw9cCxnLnRvcCgpLnZhbHVlLm1vZGFsT3BlbmVyPWwsdy5jbGVhckZvY3VzTGlzdENhY2hlKCl9LHcuY2xvc2U9ZnVuY3Rpb24oZSxuKXt2YXIgdD1nLmdldChlKTtyZXR1cm4gdCYmZih0LG4sITApPyh0LnZhbHVlLm1vZGFsU2NvcGUuJCR1aWJEZXN0cnVjdGlvblNjaGVkdWxlZD0hMCx0LnZhbHVlLmRlZmVycmVkLnJlc29sdmUobiksdShlLHQudmFsdWUubW9kYWxPcGVuZXIpLCEwKTohdH0sdy5kaXNtaXNzPWZ1bmN0aW9uKGUsbil7dmFyIHQ9Zy5nZXQoZSk7cmV0dXJuIHQmJmYodCxuLCExKT8odC52YWx1ZS5tb2RhbFNjb3BlLiQkdWliRGVzdHJ1Y3Rpb25TY2hlZHVsZWQ9ITAsdC52YWx1ZS5kZWZlcnJlZC5yZWplY3QobiksdShlLHQudmFsdWUubW9kYWxPcGVuZXIpLCEwKTohdH0sdy5kaXNtaXNzQWxsPWZ1bmN0aW9uKGUpe2Zvcih2YXIgbj10aGlzLmdldFRvcCgpO24mJnRoaXMuZGlzbWlzcyhuLmtleSxlKTspbj10aGlzLmdldFRvcCgpfSx3LmdldFRvcD1mdW5jdGlvbigpe3JldHVybiBnLnRvcCgpfSx3Lm1vZGFsUmVuZGVyZWQ9ZnVuY3Rpb24oZSl7dmFyIG49Zy5nZXQoZSk7biYmbi52YWx1ZS5yZW5kZXJEZWZlcnJlZC5yZXNvbHZlKCl9LHcuZm9jdXNGaXJzdEZvY3VzYWJsZUVsZW1lbnQ9ZnVuY3Rpb24oKXtyZXR1cm4gaC5sZW5ndGg+MD8oaFswXS5mb2N1cygpLCEwKTohMX0sdy5mb2N1c0xhc3RGb2N1c2FibGVFbGVtZW50PWZ1bmN0aW9uKCl7cmV0dXJuIGgubGVuZ3RoPjA/KGhbaC5sZW5ndGgtMV0uZm9jdXMoKSwhMCk6ITF9LHcuaXNGb2N1c0luRmlyc3RJdGVtPWZ1bmN0aW9uKGUpe3JldHVybiBoLmxlbmd0aD4wPyhlLnRhcmdldHx8ZS5zcmNFbGVtZW50KT09PWhbMF06ITF9LHcuaXNGb2N1c0luTGFzdEl0ZW09ZnVuY3Rpb24oZSl7cmV0dXJuIGgubGVuZ3RoPjA/KGUudGFyZ2V0fHxlLnNyY0VsZW1lbnQpPT09aFtoLmxlbmd0aC0xXTohMX0sdy5jbGVhckZvY3VzTGlzdENhY2hlPWZ1bmN0aW9uKCl7aD1bXSxDPTB9LHcubG9hZEZvY3VzRWxlbWVudExpc3Q9ZnVuY3Rpb24oZSl7aWYoKHZvaWQgMD09PWh8fCFoLmxlbmd0aCkmJmUpe3ZhciBuPWUudmFsdWUubW9kYWxEb21FbDtuJiZuLmxlbmd0aCYmKGg9blswXS5xdWVyeVNlbGVjdG9yQWxsKHkpKX19LHd9XSkucHJvdmlkZXIoXCIkdWliTW9kYWxcIixmdW5jdGlvbigpe3ZhciBlPXtvcHRpb25zOnthbmltYXRpb246ITAsYmFja2Ryb3A6ITAsa2V5Ym9hcmQ6ITB9LCRnZXQ6W1wiJHJvb3RTY29wZVwiLFwiJHFcIixcIiRkb2N1bWVudFwiLFwiJHRlbXBsYXRlUmVxdWVzdFwiLFwiJGNvbnRyb2xsZXJcIixcIiR1aWJSZXNvbHZlXCIsXCIkdWliTW9kYWxTdGFja1wiLGZ1bmN0aW9uKG4sdCxvLGEscixsLGkpe2Z1bmN0aW9uIHMoZSl7cmV0dXJuIGUudGVtcGxhdGU/dC53aGVuKGUudGVtcGxhdGUpOmEoYW5ndWxhci5pc0Z1bmN0aW9uKGUudGVtcGxhdGVVcmwpP2UudGVtcGxhdGVVcmwoKTplLnRlbXBsYXRlVXJsKX12YXIgdT17fSxkPW51bGw7cmV0dXJuIHUuZ2V0UHJvbWlzZUNoYWluPWZ1bmN0aW9uKCl7cmV0dXJuIGR9LHUub3Blbj1mdW5jdGlvbihhKXtmdW5jdGlvbiB1KCl7cmV0dXJuIGh9dmFyIGM9dC5kZWZlcigpLHA9dC5kZWZlcigpLG09dC5kZWZlcigpLGY9dC5kZWZlcigpLHY9e3Jlc3VsdDpjLnByb21pc2Usb3BlbmVkOnAucHJvbWlzZSxjbG9zZWQ6bS5wcm9taXNlLHJlbmRlcmVkOmYucHJvbWlzZSxjbG9zZTpmdW5jdGlvbihlKXtyZXR1cm4gaS5jbG9zZSh2LGUpfSxkaXNtaXNzOmZ1bmN0aW9uKGUpe3JldHVybiBpLmRpc21pc3ModixlKX19O2lmKGE9YW5ndWxhci5leHRlbmQoe30sZS5vcHRpb25zLGEpLGEucmVzb2x2ZT1hLnJlc29sdmV8fHt9LGEuYXBwZW5kVG89YS5hcHBlbmRUb3x8by5maW5kKFwiYm9keVwiKS5lcSgwKSwhYS50ZW1wbGF0ZSYmIWEudGVtcGxhdGVVcmwpdGhyb3cgbmV3IEVycm9yKFwiT25lIG9mIHRlbXBsYXRlIG9yIHRlbXBsYXRlVXJsIG9wdGlvbnMgaXMgcmVxdWlyZWQuXCIpO3ZhciBiLGg9dC5hbGwoW3MoYSksbC5yZXNvbHZlKGEucmVzb2x2ZSx7fSxudWxsLG51bGwpXSk7cmV0dXJuIGI9ZD10LmFsbChbZF0pLnRoZW4odSx1KS50aGVuKGZ1bmN0aW9uKGUpe3ZhciB0PWEuc2NvcGV8fG4sbz10LiRuZXcoKTtvLiRjbG9zZT12LmNsb3NlLG8uJGRpc21pc3M9di5kaXNtaXNzLG8uJG9uKFwiJGRlc3Ryb3lcIixmdW5jdGlvbigpe28uJCR1aWJEZXN0cnVjdGlvblNjaGVkdWxlZHx8by4kZGlzbWlzcyhcIiR1aWJVbnNjaGVkdWxlZERlc3RydWN0aW9uXCIpfSk7dmFyIGwscz17fTthLmNvbnRyb2xsZXImJihzLiRzY29wZT1vLHMuJHVpYk1vZGFsSW5zdGFuY2U9dixhbmd1bGFyLmZvckVhY2goZVsxXSxmdW5jdGlvbihlLG4pe3Nbbl09ZX0pLGw9cihhLmNvbnRyb2xsZXIscyksYS5jb250cm9sbGVyQXMmJihhLmJpbmRUb0NvbnRyb2xsZXImJihsLiRjbG9zZT1vLiRjbG9zZSxsLiRkaXNtaXNzPW8uJGRpc21pc3MsYW5ndWxhci5leHRlbmQobCx0KSksb1thLmNvbnRyb2xsZXJBc109bCkpLGkub3Blbih2LHtzY29wZTpvLGRlZmVycmVkOmMscmVuZGVyRGVmZXJyZWQ6ZixjbG9zZWREZWZlcnJlZDptLGNvbnRlbnQ6ZVswXSxhbmltYXRpb246YS5hbmltYXRpb24sYmFja2Ryb3A6YS5iYWNrZHJvcCxrZXlib2FyZDphLmtleWJvYXJkLGJhY2tkcm9wQ2xhc3M6YS5iYWNrZHJvcENsYXNzLHdpbmRvd1RvcENsYXNzOmEud2luZG93VG9wQ2xhc3Msd2luZG93Q2xhc3M6YS53aW5kb3dDbGFzcyx3aW5kb3dUZW1wbGF0ZVVybDphLndpbmRvd1RlbXBsYXRlVXJsLHNpemU6YS5zaXplLG9wZW5lZENsYXNzOmEub3BlbmVkQ2xhc3MsYXBwZW5kVG86YS5hcHBlbmRUb30pLHAucmVzb2x2ZSghMCl9LGZ1bmN0aW9uKGUpe3AucmVqZWN0KGUpLGMucmVqZWN0KGUpfSlbXCJmaW5hbGx5XCJdKGZ1bmN0aW9uKCl7ZD09PWImJihkPW51bGwpfSksdn0sdX1dfTtyZXR1cm4gZX0pLGFuZ3VsYXIubW9kdWxlKFwidWkuYm9vdHN0cmFwLnN0YWNrZWRNYXBcIixbXSkuZmFjdG9yeShcIiQkc3RhY2tlZE1hcFwiLGZ1bmN0aW9uKCl7cmV0dXJue2NyZWF0ZU5ldzpmdW5jdGlvbigpe3ZhciBlPVtdO3JldHVybnthZGQ6ZnVuY3Rpb24obix0KXtlLnB1c2goe2tleTpuLHZhbHVlOnR9KX0sZ2V0OmZ1bmN0aW9uKG4pe2Zvcih2YXIgdD0wO3Q8ZS5sZW5ndGg7dCsrKWlmKG49PT1lW3RdLmtleSlyZXR1cm4gZVt0XX0sa2V5czpmdW5jdGlvbigpe2Zvcih2YXIgbj1bXSx0PTA7dDxlLmxlbmd0aDt0Kyspbi5wdXNoKGVbdF0ua2V5KTtyZXR1cm4gbn0sdG9wOmZ1bmN0aW9uKCl7cmV0dXJuIGVbZS5sZW5ndGgtMV19LHJlbW92ZTpmdW5jdGlvbihuKXtmb3IodmFyIHQ9LTEsbz0wO288ZS5sZW5ndGg7bysrKWlmKG49PT1lW29dLmtleSl7dD1vO2JyZWFrfXJldHVybiBlLnNwbGljZSh0LDEpWzBdfSxyZW1vdmVUb3A6ZnVuY3Rpb24oKXtyZXR1cm4gZS5zcGxpY2UoZS5sZW5ndGgtMSwxKVswXX0sbGVuZ3RoOmZ1bmN0aW9uKCl7cmV0dXJuIGUubGVuZ3RofX19fX0pLGFuZ3VsYXIubW9kdWxlKFwidWliL3RlbXBsYXRlL21vZGFsL2JhY2tkcm9wLmh0bWxcIixbXSkucnVuKFtcIiR0ZW1wbGF0ZUNhY2hlXCIsZnVuY3Rpb24oZSl7ZS5wdXQoXCJ1aWIvdGVtcGxhdGUvbW9kYWwvYmFja2Ryb3AuaHRtbFwiLCc8ZGl2IGNsYXNzPVwibW9kYWwtYmFja2Ryb3BcIlxcbiAgICAgdWliLW1vZGFsLWFuaW1hdGlvbi1jbGFzcz1cImZhZGVcIlxcbiAgICAgbW9kYWwtaW4tY2xhc3M9XCJpblwiXFxuICAgICBuZy1zdHlsZT1cIntcXCd6LWluZGV4XFwnOiAxMDQwICsgKGluZGV4ICYmIDEgfHwgMCkgKyBpbmRleCoxMH1cIlxcbj48L2Rpdj5cXG4nKX1dKSxhbmd1bGFyLm1vZHVsZShcInVpYi90ZW1wbGF0ZS9tb2RhbC93aW5kb3cuaHRtbFwiLFtdKS5ydW4oW1wiJHRlbXBsYXRlQ2FjaGVcIixmdW5jdGlvbihlKXtlLnB1dChcInVpYi90ZW1wbGF0ZS9tb2RhbC93aW5kb3cuaHRtbFwiLCc8ZGl2IG1vZGFsLXJlbmRlcj1cInt7JGlzUmVuZGVyZWR9fVwiIHRhYmluZGV4PVwiLTFcIiByb2xlPVwiZGlhbG9nXCIgY2xhc3M9XCJtb2RhbFwiXFxuICAgIHVpYi1tb2RhbC1hbmltYXRpb24tY2xhc3M9XCJmYWRlXCJcXG4gICAgbW9kYWwtaW4tY2xhc3M9XCJpblwiXFxuICAgIG5nLXN0eWxlPVwie1xcJ3otaW5kZXhcXCc6IDEwNTAgKyBpbmRleCoxMCwgZGlzcGxheTogXFwnYmxvY2tcXCd9XCI+XFxuICAgIDxkaXYgY2xhc3M9XCJtb2RhbC1kaWFsb2dcIiBuZy1jbGFzcz1cInNpemUgPyBcXCdtb2RhbC1cXCcgKyBzaXplIDogXFwnXFwnXCI+PGRpdiBjbGFzcz1cIm1vZGFsLWNvbnRlbnRcIiB1aWItbW9kYWwtdHJhbnNjbHVkZT48L2Rpdj48L2Rpdj5cXG48L2Rpdj5cXG4nKX1dKTsiLCIvKlxyXG4qIGFuZ3VsYXItdWktYm9vdHN0cmFwXHJcbiogaHR0cDovL2FuZ3VsYXItdWkuZ2l0aHViLmlvL2Jvb3RzdHJhcC9cclxuXHJcbiogVmVyc2lvbjogMS4wLjMgLSAyMDE2LTAxLTExXHJcbiogTGljZW5zZTogTUlUXHJcbiovYW5ndWxhci5tb2R1bGUoXCJ1aS5ib290c3RyYXBcIixbXCJ1aS5ib290c3RyYXAudHBsc1wiLFwidWkuYm9vdHN0cmFwLmNvbGxhcHNlXCIsXCJ1aS5ib290c3RyYXAuYWNjb3JkaW9uXCIsXCJ1aS5ib290c3RyYXAuYWxlcnRcIixcInVpLmJvb3RzdHJhcC5idXR0b25zXCIsXCJ1aS5ib290c3RyYXAuY2Fyb3VzZWxcIixcInVpLmJvb3RzdHJhcC5kYXRlcGFyc2VyXCIsXCJ1aS5ib290c3RyYXAuaXNDbGFzc1wiLFwidWkuYm9vdHN0cmFwLnBvc2l0aW9uXCIsXCJ1aS5ib290c3RyYXAuZGF0ZXBpY2tlclwiLFwidWkuYm9vdHN0cmFwLmRlYm91bmNlXCIsXCJ1aS5ib290c3RyYXAuZHJvcGRvd25cIixcInVpLmJvb3RzdHJhcC5zdGFja2VkTWFwXCIsXCJ1aS5ib290c3RyYXAubW9kYWxcIixcInVpLmJvb3RzdHJhcC5wYWdpbmdcIixcInVpLmJvb3RzdHJhcC5wYWdlclwiLFwidWkuYm9vdHN0cmFwLnBhZ2luYXRpb25cIixcInVpLmJvb3RzdHJhcC50b29sdGlwXCIsXCJ1aS5ib290c3RyYXAucG9wb3ZlclwiLFwidWkuYm9vdHN0cmFwLnByb2dyZXNzYmFyXCIsXCJ1aS5ib290c3RyYXAucmF0aW5nXCIsXCJ1aS5ib290c3RyYXAudGFic1wiLFwidWkuYm9vdHN0cmFwLnRpbWVwaWNrZXJcIixcInVpLmJvb3RzdHJhcC50eXBlYWhlYWRcIl0pLGFuZ3VsYXIubW9kdWxlKFwidWkuYm9vdHN0cmFwLnRwbHNcIixbXCJ1aWIvdGVtcGxhdGUvYWNjb3JkaW9uL2FjY29yZGlvbi1ncm91cC5odG1sXCIsXCJ1aWIvdGVtcGxhdGUvYWNjb3JkaW9uL2FjY29yZGlvbi5odG1sXCIsXCJ1aWIvdGVtcGxhdGUvYWxlcnQvYWxlcnQuaHRtbFwiLFwidWliL3RlbXBsYXRlL2Nhcm91c2VsL2Nhcm91c2VsLmh0bWxcIixcInVpYi90ZW1wbGF0ZS9jYXJvdXNlbC9zbGlkZS5odG1sXCIsXCJ1aWIvdGVtcGxhdGUvZGF0ZXBpY2tlci9kYXRlcGlja2VyLmh0bWxcIixcInVpYi90ZW1wbGF0ZS9kYXRlcGlja2VyL2RheS5odG1sXCIsXCJ1aWIvdGVtcGxhdGUvZGF0ZXBpY2tlci9tb250aC5odG1sXCIsXCJ1aWIvdGVtcGxhdGUvZGF0ZXBpY2tlci9wb3B1cC5odG1sXCIsXCJ1aWIvdGVtcGxhdGUvZGF0ZXBpY2tlci95ZWFyLmh0bWxcIixcInVpYi90ZW1wbGF0ZS9tb2RhbC9iYWNrZHJvcC5odG1sXCIsXCJ1aWIvdGVtcGxhdGUvbW9kYWwvd2luZG93Lmh0bWxcIixcInVpYi90ZW1wbGF0ZS9wYWdlci9wYWdlci5odG1sXCIsXCJ1aWIvdGVtcGxhdGUvcGFnaW5hdGlvbi9wYWdpbmF0aW9uLmh0bWxcIixcInVpYi90ZW1wbGF0ZS90b29sdGlwL3Rvb2x0aXAtaHRtbC1wb3B1cC5odG1sXCIsXCJ1aWIvdGVtcGxhdGUvdG9vbHRpcC90b29sdGlwLXBvcHVwLmh0bWxcIixcInVpYi90ZW1wbGF0ZS90b29sdGlwL3Rvb2x0aXAtdGVtcGxhdGUtcG9wdXAuaHRtbFwiLFwidWliL3RlbXBsYXRlL3BvcG92ZXIvcG9wb3Zlci1odG1sLmh0bWxcIixcInVpYi90ZW1wbGF0ZS9wb3BvdmVyL3BvcG92ZXItdGVtcGxhdGUuaHRtbFwiLFwidWliL3RlbXBsYXRlL3BvcG92ZXIvcG9wb3Zlci5odG1sXCIsXCJ1aWIvdGVtcGxhdGUvcHJvZ3Jlc3NiYXIvYmFyLmh0bWxcIixcInVpYi90ZW1wbGF0ZS9wcm9ncmVzc2Jhci9wcm9ncmVzcy5odG1sXCIsXCJ1aWIvdGVtcGxhdGUvcHJvZ3Jlc3NiYXIvcHJvZ3Jlc3NiYXIuaHRtbFwiLFwidWliL3RlbXBsYXRlL3JhdGluZy9yYXRpbmcuaHRtbFwiLFwidWliL3RlbXBsYXRlL3RhYnMvdGFiLmh0bWxcIixcInVpYi90ZW1wbGF0ZS90YWJzL3RhYnNldC5odG1sXCIsXCJ1aWIvdGVtcGxhdGUvdGltZXBpY2tlci90aW1lcGlja2VyLmh0bWxcIixcInVpYi90ZW1wbGF0ZS90eXBlYWhlYWQvdHlwZWFoZWFkLW1hdGNoLmh0bWxcIixcInVpYi90ZW1wbGF0ZS90eXBlYWhlYWQvdHlwZWFoZWFkLXBvcHVwLmh0bWxcIl0pLGFuZ3VsYXIubW9kdWxlKFwidWkuYm9vdHN0cmFwLmNvbGxhcHNlXCIsW10pLmRpcmVjdGl2ZShcInVpYkNvbGxhcHNlXCIsW1wiJGFuaW1hdGVcIixcIiRpbmplY3RvclwiLGZ1bmN0aW9uKGEsYil7dmFyIGM9Yi5oYXMoXCIkYW5pbWF0ZUNzc1wiKT9iLmdldChcIiRhbmltYXRlQ3NzXCIpOm51bGw7cmV0dXJue2xpbms6ZnVuY3Rpb24oYixkLGUpe2Z1bmN0aW9uIGYoKXtkLnJlbW92ZUNsYXNzKFwiY29sbGFwc2VcIikuYWRkQ2xhc3MoXCJjb2xsYXBzaW5nXCIpLmF0dHIoXCJhcmlhLWV4cGFuZGVkXCIsITApLmF0dHIoXCJhcmlhLWhpZGRlblwiLCExKSxjP2MoZCx7YWRkQ2xhc3M6XCJpblwiLGVhc2luZzpcImVhc2VcIix0bzp7aGVpZ2h0OmRbMF0uc2Nyb2xsSGVpZ2h0K1wicHhcIn19KS5zdGFydCgpW1wiZmluYWxseVwiXShnKTphLmFkZENsYXNzKGQsXCJpblwiLHt0bzp7aGVpZ2h0OmRbMF0uc2Nyb2xsSGVpZ2h0K1wicHhcIn19KS50aGVuKGcpfWZ1bmN0aW9uIGcoKXtkLnJlbW92ZUNsYXNzKFwiY29sbGFwc2luZ1wiKS5hZGRDbGFzcyhcImNvbGxhcHNlXCIpLmNzcyh7aGVpZ2h0OlwiYXV0b1wifSl9ZnVuY3Rpb24gaCgpe3JldHVybiBkLmhhc0NsYXNzKFwiY29sbGFwc2VcIil8fGQuaGFzQ2xhc3MoXCJpblwiKT8oZC5jc3Moe2hlaWdodDpkWzBdLnNjcm9sbEhlaWdodCtcInB4XCJ9KS5yZW1vdmVDbGFzcyhcImNvbGxhcHNlXCIpLmFkZENsYXNzKFwiY29sbGFwc2luZ1wiKS5hdHRyKFwiYXJpYS1leHBhbmRlZFwiLCExKS5hdHRyKFwiYXJpYS1oaWRkZW5cIiwhMCksdm9pZChjP2MoZCx7cmVtb3ZlQ2xhc3M6XCJpblwiLHRvOntoZWlnaHQ6XCIwXCJ9fSkuc3RhcnQoKVtcImZpbmFsbHlcIl0oaSk6YS5yZW1vdmVDbGFzcyhkLFwiaW5cIix7dG86e2hlaWdodDpcIjBcIn19KS50aGVuKGkpKSk6aSgpfWZ1bmN0aW9uIGkoKXtkLmNzcyh7aGVpZ2h0OlwiMFwifSksZC5yZW1vdmVDbGFzcyhcImNvbGxhcHNpbmdcIikuYWRkQ2xhc3MoXCJjb2xsYXBzZVwiKX1iLiRldmFsKGUudWliQ29sbGFwc2UpfHxkLmFkZENsYXNzKFwiaW5cIikuYWRkQ2xhc3MoXCJjb2xsYXBzZVwiKS5jc3Moe2hlaWdodDpcImF1dG9cIn0pLGIuJHdhdGNoKGUudWliQ29sbGFwc2UsZnVuY3Rpb24oYSl7YT9oKCk6ZigpfSl9fX1dKSxhbmd1bGFyLm1vZHVsZShcInVpLmJvb3RzdHJhcC5hY2NvcmRpb25cIixbXCJ1aS5ib290c3RyYXAuY29sbGFwc2VcIl0pLmNvbnN0YW50KFwidWliQWNjb3JkaW9uQ29uZmlnXCIse2Nsb3NlT3RoZXJzOiEwfSkuY29udHJvbGxlcihcIlVpYkFjY29yZGlvbkNvbnRyb2xsZXJcIixbXCIkc2NvcGVcIixcIiRhdHRyc1wiLFwidWliQWNjb3JkaW9uQ29uZmlnXCIsZnVuY3Rpb24oYSxiLGMpe3RoaXMuZ3JvdXBzPVtdLHRoaXMuY2xvc2VPdGhlcnM9ZnVuY3Rpb24oZCl7dmFyIGU9YW5ndWxhci5pc0RlZmluZWQoYi5jbG9zZU90aGVycyk/YS4kZXZhbChiLmNsb3NlT3RoZXJzKTpjLmNsb3NlT3RoZXJzO2UmJmFuZ3VsYXIuZm9yRWFjaCh0aGlzLmdyb3VwcyxmdW5jdGlvbihhKXthIT09ZCYmKGEuaXNPcGVuPSExKX0pfSx0aGlzLmFkZEdyb3VwPWZ1bmN0aW9uKGEpe3ZhciBiPXRoaXM7dGhpcy5ncm91cHMucHVzaChhKSxhLiRvbihcIiRkZXN0cm95XCIsZnVuY3Rpb24oYyl7Yi5yZW1vdmVHcm91cChhKX0pfSx0aGlzLnJlbW92ZUdyb3VwPWZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMuZ3JvdXBzLmluZGV4T2YoYSk7LTEhPT1iJiZ0aGlzLmdyb3Vwcy5zcGxpY2UoYiwxKX19XSkuZGlyZWN0aXZlKFwidWliQWNjb3JkaW9uXCIsZnVuY3Rpb24oKXtyZXR1cm57Y29udHJvbGxlcjpcIlVpYkFjY29yZGlvbkNvbnRyb2xsZXJcIixjb250cm9sbGVyQXM6XCJhY2NvcmRpb25cIix0cmFuc2NsdWRlOiEwLHRlbXBsYXRlVXJsOmZ1bmN0aW9uKGEsYil7cmV0dXJuIGIudGVtcGxhdGVVcmx8fFwidWliL3RlbXBsYXRlL2FjY29yZGlvbi9hY2NvcmRpb24uaHRtbFwifX19KS5kaXJlY3RpdmUoXCJ1aWJBY2NvcmRpb25Hcm91cFwiLGZ1bmN0aW9uKCl7cmV0dXJue3JlcXVpcmU6XCJedWliQWNjb3JkaW9uXCIsdHJhbnNjbHVkZTohMCxyZXBsYWNlOiEwLHRlbXBsYXRlVXJsOmZ1bmN0aW9uKGEsYil7cmV0dXJuIGIudGVtcGxhdGVVcmx8fFwidWliL3RlbXBsYXRlL2FjY29yZGlvbi9hY2NvcmRpb24tZ3JvdXAuaHRtbFwifSxzY29wZTp7aGVhZGluZzpcIkBcIixpc09wZW46XCI9P1wiLGlzRGlzYWJsZWQ6XCI9P1wifSxjb250cm9sbGVyOmZ1bmN0aW9uKCl7dGhpcy5zZXRIZWFkaW5nPWZ1bmN0aW9uKGEpe3RoaXMuaGVhZGluZz1hfX0sbGluazpmdW5jdGlvbihhLGIsYyxkKXtkLmFkZEdyb3VwKGEpLGEub3BlbkNsYXNzPWMub3BlbkNsYXNzfHxcInBhbmVsLW9wZW5cIixhLnBhbmVsQ2xhc3M9Yy5wYW5lbENsYXNzfHxcInBhbmVsLWRlZmF1bHRcIixhLiR3YXRjaChcImlzT3BlblwiLGZ1bmN0aW9uKGMpe2IudG9nZ2xlQ2xhc3MoYS5vcGVuQ2xhc3MsISFjKSxjJiZkLmNsb3NlT3RoZXJzKGEpfSksYS50b2dnbGVPcGVuPWZ1bmN0aW9uKGIpe2EuaXNEaXNhYmxlZHx8YiYmMzIhPT1iLndoaWNofHwoYS5pc09wZW49IWEuaXNPcGVuKX19fX0pLmRpcmVjdGl2ZShcInVpYkFjY29yZGlvbkhlYWRpbmdcIixmdW5jdGlvbigpe3JldHVybnt0cmFuc2NsdWRlOiEwLHRlbXBsYXRlOlwiXCIscmVwbGFjZTohMCxyZXF1aXJlOlwiXnVpYkFjY29yZGlvbkdyb3VwXCIsbGluazpmdW5jdGlvbihhLGIsYyxkLGUpe2Quc2V0SGVhZGluZyhlKGEsYW5ndWxhci5ub29wKSl9fX0pLmRpcmVjdGl2ZShcInVpYkFjY29yZGlvblRyYW5zY2x1ZGVcIixmdW5jdGlvbigpe3JldHVybntyZXF1aXJlOlwiXnVpYkFjY29yZGlvbkdyb3VwXCIsbGluazpmdW5jdGlvbihhLGIsYyxkKXthLiR3YXRjaChmdW5jdGlvbigpe3JldHVybiBkW2MudWliQWNjb3JkaW9uVHJhbnNjbHVkZV19LGZ1bmN0aW9uKGEpe2EmJihiLmZpbmQoXCJzcGFuXCIpLmh0bWwoXCJcIiksYi5maW5kKFwic3BhblwiKS5hcHBlbmQoYSkpfSl9fX0pLGFuZ3VsYXIubW9kdWxlKFwidWkuYm9vdHN0cmFwLmFsZXJ0XCIsW10pLmNvbnRyb2xsZXIoXCJVaWJBbGVydENvbnRyb2xsZXJcIixbXCIkc2NvcGVcIixcIiRhdHRyc1wiLFwiJGludGVycG9sYXRlXCIsXCIkdGltZW91dFwiLGZ1bmN0aW9uKGEsYixjLGQpe2EuY2xvc2VhYmxlPSEhYi5jbG9zZTt2YXIgZT1hbmd1bGFyLmlzRGVmaW5lZChiLmRpc21pc3NPblRpbWVvdXQpP2MoYi5kaXNtaXNzT25UaW1lb3V0KShhLiRwYXJlbnQpOm51bGw7ZSYmZChmdW5jdGlvbigpe2EuY2xvc2UoKX0scGFyc2VJbnQoZSwxMCkpfV0pLmRpcmVjdGl2ZShcInVpYkFsZXJ0XCIsZnVuY3Rpb24oKXtyZXR1cm57Y29udHJvbGxlcjpcIlVpYkFsZXJ0Q29udHJvbGxlclwiLGNvbnRyb2xsZXJBczpcImFsZXJ0XCIsdGVtcGxhdGVVcmw6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gYi50ZW1wbGF0ZVVybHx8XCJ1aWIvdGVtcGxhdGUvYWxlcnQvYWxlcnQuaHRtbFwifSx0cmFuc2NsdWRlOiEwLHJlcGxhY2U6ITAsc2NvcGU6e3R5cGU6XCJAXCIsY2xvc2U6XCImXCJ9fX0pLGFuZ3VsYXIubW9kdWxlKFwidWkuYm9vdHN0cmFwLmJ1dHRvbnNcIixbXSkuY29uc3RhbnQoXCJ1aWJCdXR0b25Db25maWdcIix7YWN0aXZlQ2xhc3M6XCJhY3RpdmVcIix0b2dnbGVFdmVudDpcImNsaWNrXCJ9KS5jb250cm9sbGVyKFwiVWliQnV0dG9uc0NvbnRyb2xsZXJcIixbXCJ1aWJCdXR0b25Db25maWdcIixmdW5jdGlvbihhKXt0aGlzLmFjdGl2ZUNsYXNzPWEuYWN0aXZlQ2xhc3N8fFwiYWN0aXZlXCIsdGhpcy50b2dnbGVFdmVudD1hLnRvZ2dsZUV2ZW50fHxcImNsaWNrXCJ9XSkuZGlyZWN0aXZlKFwidWliQnRuUmFkaW9cIixbXCIkcGFyc2VcIixmdW5jdGlvbihhKXtyZXR1cm57cmVxdWlyZTpbXCJ1aWJCdG5SYWRpb1wiLFwibmdNb2RlbFwiXSxjb250cm9sbGVyOlwiVWliQnV0dG9uc0NvbnRyb2xsZXJcIixjb250cm9sbGVyQXM6XCJidXR0b25zXCIsbGluazpmdW5jdGlvbihiLGMsZCxlKXt2YXIgZj1lWzBdLGc9ZVsxXSxoPWEoZC51aWJVbmNoZWNrYWJsZSk7Yy5maW5kKFwiaW5wdXRcIikuY3NzKHtkaXNwbGF5Olwibm9uZVwifSksZy4kcmVuZGVyPWZ1bmN0aW9uKCl7Yy50b2dnbGVDbGFzcyhmLmFjdGl2ZUNsYXNzLGFuZ3VsYXIuZXF1YWxzKGcuJG1vZGVsVmFsdWUsYi4kZXZhbChkLnVpYkJ0blJhZGlvKSkpfSxjLm9uKGYudG9nZ2xlRXZlbnQsZnVuY3Rpb24oKXtpZighZC5kaXNhYmxlZCl7dmFyIGE9Yy5oYXNDbGFzcyhmLmFjdGl2ZUNsYXNzKTsoIWF8fGFuZ3VsYXIuaXNEZWZpbmVkKGQudW5jaGVja2FibGUpKSYmYi4kYXBwbHkoZnVuY3Rpb24oKXtnLiRzZXRWaWV3VmFsdWUoYT9udWxsOmIuJGV2YWwoZC51aWJCdG5SYWRpbykpLGcuJHJlbmRlcigpfSl9fSksZC51aWJVbmNoZWNrYWJsZSYmYi4kd2F0Y2goaCxmdW5jdGlvbihhKXtkLiRzZXQoXCJ1bmNoZWNrYWJsZVwiLGE/XCJcIjpudWxsKX0pfX19XSkuZGlyZWN0aXZlKFwidWliQnRuQ2hlY2tib3hcIixmdW5jdGlvbigpe3JldHVybntyZXF1aXJlOltcInVpYkJ0bkNoZWNrYm94XCIsXCJuZ01vZGVsXCJdLGNvbnRyb2xsZXI6XCJVaWJCdXR0b25zQ29udHJvbGxlclwiLGNvbnRyb2xsZXJBczpcImJ1dHRvblwiLGxpbms6ZnVuY3Rpb24oYSxiLGMsZCl7ZnVuY3Rpb24gZSgpe3JldHVybiBnKGMuYnRuQ2hlY2tib3hUcnVlLCEwKX1mdW5jdGlvbiBmKCl7cmV0dXJuIGcoYy5idG5DaGVja2JveEZhbHNlLCExKX1mdW5jdGlvbiBnKGIsYyl7cmV0dXJuIGFuZ3VsYXIuaXNEZWZpbmVkKGIpP2EuJGV2YWwoYik6Y312YXIgaD1kWzBdLGk9ZFsxXTtiLmZpbmQoXCJpbnB1dFwiKS5jc3Moe2Rpc3BsYXk6XCJub25lXCJ9KSxpLiRyZW5kZXI9ZnVuY3Rpb24oKXtiLnRvZ2dsZUNsYXNzKGguYWN0aXZlQ2xhc3MsYW5ndWxhci5lcXVhbHMoaS4kbW9kZWxWYWx1ZSxlKCkpKX0sYi5vbihoLnRvZ2dsZUV2ZW50LGZ1bmN0aW9uKCl7Yy5kaXNhYmxlZHx8YS4kYXBwbHkoZnVuY3Rpb24oKXtpLiRzZXRWaWV3VmFsdWUoYi5oYXNDbGFzcyhoLmFjdGl2ZUNsYXNzKT9mKCk6ZSgpKSxpLiRyZW5kZXIoKX0pfSl9fX0pLGFuZ3VsYXIubW9kdWxlKFwidWkuYm9vdHN0cmFwLmNhcm91c2VsXCIsW10pLmNvbnRyb2xsZXIoXCJVaWJDYXJvdXNlbENvbnRyb2xsZXJcIixbXCIkc2NvcGVcIixcIiRlbGVtZW50XCIsXCIkaW50ZXJ2YWxcIixcIiR0aW1lb3V0XCIsXCIkYW5pbWF0ZVwiLGZ1bmN0aW9uKGEsYixjLGQsZSl7ZnVuY3Rpb24gZigpe2Zvcig7cy5sZW5ndGg7KXMuc2hpZnQoKX1mdW5jdGlvbiBnKGEpe2lmKGFuZ3VsYXIuaXNVbmRlZmluZWQocFthXS5pbmRleCkpcmV0dXJuIHBbYV07Zm9yKHZhciBiPTAsYz1wLmxlbmd0aDtjPmI7KytiKWlmKHBbYl0uaW5kZXg9PT1hKXJldHVybiBwW2JdfWZ1bmN0aW9uIGgoYyxkLGcpe3R8fChhbmd1bGFyLmV4dGVuZChjLHtkaXJlY3Rpb246ZyxhY3RpdmU6ITB9KSxhbmd1bGFyLmV4dGVuZChvLmN1cnJlbnRTbGlkZXx8e30se2RpcmVjdGlvbjpnLGFjdGl2ZTohMX0pLGUuZW5hYmxlZChiKSYmIWEuJGN1cnJlbnRUcmFuc2l0aW9uJiZjLiRlbGVtZW50JiZvLnNsaWRlcy5sZW5ndGg+MSYmKGMuJGVsZW1lbnQuZGF0YShxLGMuZGlyZWN0aW9uKSxvLmN1cnJlbnRTbGlkZSYmby5jdXJyZW50U2xpZGUuJGVsZW1lbnQmJm8uY3VycmVudFNsaWRlLiRlbGVtZW50LmRhdGEocSxjLmRpcmVjdGlvbiksYS4kY3VycmVudFRyYW5zaXRpb249ITAsZS5vbihcImFkZENsYXNzXCIsYy4kZWxlbWVudCxmdW5jdGlvbihiLGMpe2lmKFwiY2xvc2VcIj09PWMmJihhLiRjdXJyZW50VHJhbnNpdGlvbj1udWxsLGUub2ZmKFwiYWRkQ2xhc3NcIixiKSxzLmxlbmd0aCkpe3ZhciBkPXMucG9wKCksZz1hLmluZGV4T2ZTbGlkZShkKSxpPWc+by5nZXRDdXJyZW50SW5kZXgoKT9cIm5leHRcIjpcInByZXZcIjtmKCksaChkLGcsaSl9fSkpLG8uY3VycmVudFNsaWRlPWMscj1kLGsoKSl9ZnVuY3Rpb24gaSgpe20mJihjLmNhbmNlbChtKSxtPW51bGwpfWZ1bmN0aW9uIGooYil7Yi5sZW5ndGh8fChhLiRjdXJyZW50VHJhbnNpdGlvbj1udWxsLGYoKSl9ZnVuY3Rpb24gaygpe2koKTt2YXIgYj0rYS5pbnRlcnZhbDshaXNOYU4oYikmJmI+MCYmKG09YyhsLGIpKX1mdW5jdGlvbiBsKCl7dmFyIGI9K2EuaW50ZXJ2YWw7biYmIWlzTmFOKGIpJiZiPjAmJnAubGVuZ3RoP2EubmV4dCgpOmEucGF1c2UoKX12YXIgbSxuLG89dGhpcyxwPW8uc2xpZGVzPWEuc2xpZGVzPVtdLHE9XCJ1aWItc2xpZGVEaXJlY3Rpb25cIixyPS0xLHM9W107by5jdXJyZW50U2xpZGU9bnVsbDt2YXIgdD0hMTtvLmFkZFNsaWRlPWZ1bmN0aW9uKGIsYyl7Yi4kZWxlbWVudD1jLHAucHVzaChiKSwxPT09cC5sZW5ndGh8fGIuYWN0aXZlPyhhLiRjdXJyZW50VHJhbnNpdGlvbiYmKGEuJGN1cnJlbnRUcmFuc2l0aW9uPW51bGwpLG8uc2VsZWN0KHBbcC5sZW5ndGgtMV0pLDE9PT1wLmxlbmd0aCYmYS5wbGF5KCkpOmIuYWN0aXZlPSExfSxvLmdldEN1cnJlbnRJbmRleD1mdW5jdGlvbigpe3JldHVybiBvLmN1cnJlbnRTbGlkZSYmYW5ndWxhci5pc0RlZmluZWQoby5jdXJyZW50U2xpZGUuaW5kZXgpPytvLmN1cnJlbnRTbGlkZS5pbmRleDpyfSxvLm5leHQ9YS5uZXh0PWZ1bmN0aW9uKCl7dmFyIGI9KG8uZ2V0Q3VycmVudEluZGV4KCkrMSklcC5sZW5ndGg7cmV0dXJuIDA9PT1iJiZhLm5vV3JhcCgpP3ZvaWQgYS5wYXVzZSgpOm8uc2VsZWN0KGcoYiksXCJuZXh0XCIpfSxvLnByZXY9YS5wcmV2PWZ1bmN0aW9uKCl7dmFyIGI9by5nZXRDdXJyZW50SW5kZXgoKS0xPDA/cC5sZW5ndGgtMTpvLmdldEN1cnJlbnRJbmRleCgpLTE7cmV0dXJuIGEubm9XcmFwKCkmJmI9PT1wLmxlbmd0aC0xP3ZvaWQgYS5wYXVzZSgpOm8uc2VsZWN0KGcoYiksXCJwcmV2XCIpfSxvLnJlbW92ZVNsaWRlPWZ1bmN0aW9uKGEpe2FuZ3VsYXIuaXNEZWZpbmVkKGEuaW5kZXgpJiZwLnNvcnQoZnVuY3Rpb24oYSxiKXtyZXR1cm4rYS5pbmRleD4rYi5pbmRleH0pO3ZhciBiPXMuaW5kZXhPZihhKTstMSE9PWImJnMuc3BsaWNlKGIsMSk7dmFyIGM9cC5pbmRleE9mKGEpO3Auc3BsaWNlKGMsMSksZChmdW5jdGlvbigpe3AubGVuZ3RoPjAmJmEuYWN0aXZlP2M+PXAubGVuZ3RoP28uc2VsZWN0KHBbYy0xXSk6by5zZWxlY3QocFtjXSk6cj5jJiZyLS19KSwwPT09cC5sZW5ndGgmJihvLmN1cnJlbnRTbGlkZT1udWxsLGYoKSl9LG8uc2VsZWN0PWEuc2VsZWN0PWZ1bmN0aW9uKGIsYyl7dmFyIGQ9YS5pbmRleE9mU2xpZGUoYik7dm9pZCAwPT09YyYmKGM9ZD5vLmdldEN1cnJlbnRJbmRleCgpP1wibmV4dFwiOlwicHJldlwiKSxiJiZiIT09by5jdXJyZW50U2xpZGUmJiFhLiRjdXJyZW50VHJhbnNpdGlvbj9oKGIsZCxjKTpiJiZiIT09by5jdXJyZW50U2xpZGUmJmEuJGN1cnJlbnRUcmFuc2l0aW9uJiYocy5wdXNoKGIpLGIuYWN0aXZlPSExKX0sYS5pbmRleE9mU2xpZGU9ZnVuY3Rpb24oYSl7cmV0dXJuIGFuZ3VsYXIuaXNEZWZpbmVkKGEuaW5kZXgpPythLmluZGV4OnAuaW5kZXhPZihhKX0sYS5pc0FjdGl2ZT1mdW5jdGlvbihhKXtyZXR1cm4gby5jdXJyZW50U2xpZGU9PT1hfSxhLnBhdXNlPWZ1bmN0aW9uKCl7YS5ub1BhdXNlfHwobj0hMSxpKCkpfSxhLnBsYXk9ZnVuY3Rpb24oKXtufHwobj0hMCxrKCkpfSxhLiRvbihcIiRkZXN0cm95XCIsZnVuY3Rpb24oKXt0PSEwLGkoKX0pLGEuJHdhdGNoKFwibm9UcmFuc2l0aW9uXCIsZnVuY3Rpb24oYSl7ZS5lbmFibGVkKGIsIWEpfSksYS4kd2F0Y2goXCJpbnRlcnZhbFwiLGspLGEuJHdhdGNoQ29sbGVjdGlvbihcInNsaWRlc1wiLGopfV0pLmRpcmVjdGl2ZShcInVpYkNhcm91c2VsXCIsZnVuY3Rpb24oKXtyZXR1cm57dHJhbnNjbHVkZTohMCxyZXBsYWNlOiEwLGNvbnRyb2xsZXI6XCJVaWJDYXJvdXNlbENvbnRyb2xsZXJcIixjb250cm9sbGVyQXM6XCJjYXJvdXNlbFwiLHRlbXBsYXRlVXJsOmZ1bmN0aW9uKGEsYil7cmV0dXJuIGIudGVtcGxhdGVVcmx8fFwidWliL3RlbXBsYXRlL2Nhcm91c2VsL2Nhcm91c2VsLmh0bWxcIn0sc2NvcGU6e2ludGVydmFsOlwiPVwiLG5vVHJhbnNpdGlvbjpcIj1cIixub1BhdXNlOlwiPVwiLG5vV3JhcDpcIiZcIn19fSkuZGlyZWN0aXZlKFwidWliU2xpZGVcIixmdW5jdGlvbigpe3JldHVybntyZXF1aXJlOlwiXnVpYkNhcm91c2VsXCIsdHJhbnNjbHVkZTohMCxyZXBsYWNlOiEwLHRlbXBsYXRlVXJsOmZ1bmN0aW9uKGEsYil7cmV0dXJuIGIudGVtcGxhdGVVcmx8fFwidWliL3RlbXBsYXRlL2Nhcm91c2VsL3NsaWRlLmh0bWxcIn0sc2NvcGU6e2FjdGl2ZTpcIj0/XCIsYWN0dWFsOlwiPT9cIixpbmRleDpcIj0/XCJ9LGxpbms6ZnVuY3Rpb24oYSxiLGMsZCl7ZC5hZGRTbGlkZShhLGIpLGEuJG9uKFwiJGRlc3Ryb3lcIixmdW5jdGlvbigpe2QucmVtb3ZlU2xpZGUoYSl9KSxhLiR3YXRjaChcImFjdGl2ZVwiLGZ1bmN0aW9uKGIpe2ImJmQuc2VsZWN0KGEpfSl9fX0pLmFuaW1hdGlvbihcIi5pdGVtXCIsW1wiJGFuaW1hdGVDc3NcIixmdW5jdGlvbihhKXtmdW5jdGlvbiBiKGEsYixjKXthLnJlbW92ZUNsYXNzKGIpLGMmJmMoKX12YXIgYz1cInVpYi1zbGlkZURpcmVjdGlvblwiO3JldHVybntiZWZvcmVBZGRDbGFzczpmdW5jdGlvbihkLGUsZil7aWYoXCJhY3RpdmVcIj09PWUpe3ZhciBnPSExLGg9ZC5kYXRhKGMpLGk9XCJuZXh0XCI9PT1oP1wibGVmdFwiOlwicmlnaHRcIixqPWIuYmluZCh0aGlzLGQsaStcIiBcIitoLGYpO3JldHVybiBkLmFkZENsYXNzKGgpLGEoZCx7YWRkQ2xhc3M6aX0pLnN0YXJ0KCkuZG9uZShqKSxmdW5jdGlvbigpe2c9ITB9fWYoKX0sYmVmb3JlUmVtb3ZlQ2xhc3M6ZnVuY3Rpb24oZCxlLGYpe2lmKFwiYWN0aXZlXCI9PT1lKXt2YXIgZz0hMSxoPWQuZGF0YShjKSxpPVwibmV4dFwiPT09aD9cImxlZnRcIjpcInJpZ2h0XCIsaj1iLmJpbmQodGhpcyxkLGksZik7cmV0dXJuIGEoZCx7YWRkQ2xhc3M6aX0pLnN0YXJ0KCkuZG9uZShqKSxmdW5jdGlvbigpe2c9ITB9fWYoKX19fV0pLGFuZ3VsYXIubW9kdWxlKFwidWkuYm9vdHN0cmFwLmRhdGVwYXJzZXJcIixbXSkuc2VydmljZShcInVpYkRhdGVQYXJzZXJcIixbXCIkbG9nXCIsXCIkbG9jYWxlXCIsXCJvcmRlckJ5RmlsdGVyXCIsZnVuY3Rpb24oYSxiLGMpe2Z1bmN0aW9uIGQoYSl7dmFyIGI9W10sZD1hLnNwbGl0KFwiXCIpLGU9YS5pbmRleE9mKFwiJ1wiKTtpZihlPi0xKXt2YXIgZj0hMTthPWEuc3BsaXQoXCJcIik7Zm9yKHZhciBnPWU7ZzxhLmxlbmd0aDtnKyspZj8oXCInXCI9PT1hW2ddJiYoZysxPGEubGVuZ3RoJiZcIidcIj09PWFbZysxXT8oYVtnKzFdPVwiJFwiLGRbZysxXT1cIlwiKTooZFtnXT1cIlwiLGY9ITEpKSxhW2ddPVwiJFwiKTpcIidcIj09PWFbZ10mJihhW2ddPVwiJFwiLGRbZ109XCJcIixmPSEwKTthPWEuam9pbihcIlwiKX1yZXR1cm4gYW5ndWxhci5mb3JFYWNoKG0sZnVuY3Rpb24oYyl7dmFyIGU9YS5pbmRleE9mKGMua2V5KTtpZihlPi0xKXthPWEuc3BsaXQoXCJcIiksZFtlXT1cIihcIitjLnJlZ2V4K1wiKVwiLGFbZV09XCIkXCI7Zm9yKHZhciBmPWUrMSxnPWUrYy5rZXkubGVuZ3RoO2c+ZjtmKyspZFtmXT1cIlwiLGFbZl09XCIkXCI7YT1hLmpvaW4oXCJcIiksYi5wdXNoKHtpbmRleDplLGFwcGx5OmMuYXBwbHksbWF0Y2hlcjpjLnJlZ2V4fSl9fSkse3JlZ2V4Om5ldyBSZWdFeHAoXCJeXCIrZC5qb2luKFwiXCIpK1wiJFwiKSxtYXA6YyhiLFwiaW5kZXhcIil9fWZ1bmN0aW9uIGUoYSxiLGMpe3JldHVybiAxPmM/ITE6MT09PWImJmM+Mjg/Mjk9PT1jJiYoYSU0PT09MCYmYSUxMDAhPT0wfHxhJTQwMD09PTApOjM9PT1ifHw1PT09Ynx8OD09PWJ8fDEwPT09Yj8zMT5jOiEwfWZ1bmN0aW9uIGYoYSl7cmV0dXJuIHBhcnNlSW50KGEsMTApfWZ1bmN0aW9uIGcoYSxiKXtyZXR1cm4gYSYmYj9rKGEsYik6YX1mdW5jdGlvbiBoKGEsYil7cmV0dXJuIGEmJmI/ayhhLGIsITApOmF9ZnVuY3Rpb24gaShhLGIpe3ZhciBjPURhdGUucGFyc2UoXCJKYW4gMDEsIDE5NzAgMDA6MDA6MDAgXCIrYSkvNmU0O3JldHVybiBpc05hTihjKT9iOmN9ZnVuY3Rpb24gaihhLGIpe3JldHVybiBhPW5ldyBEYXRlKGEuZ2V0VGltZSgpKSxhLnNldE1pbnV0ZXMoYS5nZXRNaW51dGVzKCkrYiksYX1mdW5jdGlvbiBrKGEsYixjKXtjPWM/LTE6MTt2YXIgZD1pKGIsYS5nZXRUaW1lem9uZU9mZnNldCgpKTtyZXR1cm4gaihhLGMqKGQtYS5nZXRUaW1lem9uZU9mZnNldCgpKSl9dmFyIGwsbSxuPS9bXFxcXFxcXlxcJFxcKlxcK1xcP1xcfFxcW1xcXVxcKFxcKVxcLlxce1xcfV0vZzt0aGlzLmluaXQ9ZnVuY3Rpb24oKXtsPWIuaWQsdGhpcy5wYXJzZXJzPXt9LG09W3trZXk6XCJ5eXl5XCIscmVnZXg6XCJcXFxcZHs0fVwiLGFwcGx5OmZ1bmN0aW9uKGEpe3RoaXMueWVhcj0rYX19LHtrZXk6XCJ5eVwiLHJlZ2V4OlwiXFxcXGR7Mn1cIixhcHBseTpmdW5jdGlvbihhKXt0aGlzLnllYXI9K2ErMmUzfX0se2tleTpcInlcIixyZWdleDpcIlxcXFxkezEsNH1cIixhcHBseTpmdW5jdGlvbihhKXt0aGlzLnllYXI9K2F9fSx7a2V5OlwiTSFcIixyZWdleDpcIjA/WzEtOV18MVswLTJdXCIsYXBwbHk6ZnVuY3Rpb24oYSl7dGhpcy5tb250aD1hLTF9fSx7a2V5OlwiTU1NTVwiLHJlZ2V4OmIuREFURVRJTUVfRk9STUFUUy5NT05USC5qb2luKFwifFwiKSxhcHBseTpmdW5jdGlvbihhKXt0aGlzLm1vbnRoPWIuREFURVRJTUVfRk9STUFUUy5NT05USC5pbmRleE9mKGEpfX0se2tleTpcIk1NTVwiLHJlZ2V4OmIuREFURVRJTUVfRk9STUFUUy5TSE9SVE1PTlRILmpvaW4oXCJ8XCIpLGFwcGx5OmZ1bmN0aW9uKGEpe3RoaXMubW9udGg9Yi5EQVRFVElNRV9GT1JNQVRTLlNIT1JUTU9OVEguaW5kZXhPZihhKX19LHtrZXk6XCJNTVwiLHJlZ2V4OlwiMFsxLTldfDFbMC0yXVwiLGFwcGx5OmZ1bmN0aW9uKGEpe3RoaXMubW9udGg9YS0xfX0se2tleTpcIk1cIixyZWdleDpcIlsxLTldfDFbMC0yXVwiLGFwcGx5OmZ1bmN0aW9uKGEpe3RoaXMubW9udGg9YS0xfX0se2tleTpcImQhXCIscmVnZXg6XCJbMC0yXT9bMC05XXsxfXwzWzAtMV17MX1cIixhcHBseTpmdW5jdGlvbihhKXt0aGlzLmRhdGU9K2F9fSx7a2V5OlwiZGRcIixyZWdleDpcIlswLTJdWzAtOV17MX18M1swLTFdezF9XCIsYXBwbHk6ZnVuY3Rpb24oYSl7dGhpcy5kYXRlPSthfX0se2tleTpcImRcIixyZWdleDpcIlsxLTJdP1swLTldezF9fDNbMC0xXXsxfVwiLGFwcGx5OmZ1bmN0aW9uKGEpe3RoaXMuZGF0ZT0rYX19LHtrZXk6XCJFRUVFXCIscmVnZXg6Yi5EQVRFVElNRV9GT1JNQVRTLkRBWS5qb2luKFwifFwiKX0se2tleTpcIkVFRVwiLHJlZ2V4OmIuREFURVRJTUVfRk9STUFUUy5TSE9SVERBWS5qb2luKFwifFwiKX0se2tleTpcIkhIXCIscmVnZXg6XCIoPzowfDEpWzAtOV18MlswLTNdXCIsYXBwbHk6ZnVuY3Rpb24oYSl7dGhpcy5ob3Vycz0rYX19LHtrZXk6XCJoaFwiLHJlZ2V4OlwiMFswLTldfDFbMC0yXVwiLGFwcGx5OmZ1bmN0aW9uKGEpe3RoaXMuaG91cnM9K2F9fSx7a2V5OlwiSFwiLHJlZ2V4OlwiMT9bMC05XXwyWzAtM11cIixhcHBseTpmdW5jdGlvbihhKXt0aGlzLmhvdXJzPSthfX0se2tleTpcImhcIixyZWdleDpcIlswLTldfDFbMC0yXVwiLGFwcGx5OmZ1bmN0aW9uKGEpe3RoaXMuaG91cnM9K2F9fSx7a2V5OlwibW1cIixyZWdleDpcIlswLTVdWzAtOV1cIixhcHBseTpmdW5jdGlvbihhKXt0aGlzLm1pbnV0ZXM9K2F9fSx7a2V5OlwibVwiLHJlZ2V4OlwiWzAtOV18WzEtNV1bMC05XVwiLGFwcGx5OmZ1bmN0aW9uKGEpe3RoaXMubWludXRlcz0rYX19LHtrZXk6XCJzc3NcIixyZWdleDpcIlswLTldWzAtOV1bMC05XVwiLGFwcGx5OmZ1bmN0aW9uKGEpe3RoaXMubWlsbGlzZWNvbmRzPSthfX0se2tleTpcInNzXCIscmVnZXg6XCJbMC01XVswLTldXCIsYXBwbHk6ZnVuY3Rpb24oYSl7dGhpcy5zZWNvbmRzPSthfX0se2tleTpcInNcIixyZWdleDpcIlswLTldfFsxLTVdWzAtOV1cIixhcHBseTpmdW5jdGlvbihhKXt0aGlzLnNlY29uZHM9K2F9fSx7a2V5OlwiYVwiLHJlZ2V4OmIuREFURVRJTUVfRk9STUFUUy5BTVBNUy5qb2luKFwifFwiKSxhcHBseTpmdW5jdGlvbihhKXsxMj09PXRoaXMuaG91cnMmJih0aGlzLmhvdXJzPTApLFwiUE1cIj09PWEmJih0aGlzLmhvdXJzKz0xMil9fSx7a2V5OlwiWlwiLHJlZ2V4OlwiWystXVxcXFxkezR9XCIsYXBwbHk6ZnVuY3Rpb24oYSl7dmFyIGI9YS5tYXRjaCgvKFsrLV0pKFxcZHsyfSkoXFxkezJ9KS8pLGM9YlsxXSxkPWJbMl0sZT1iWzNdO3RoaXMuaG91cnMrPWYoYytkKSx0aGlzLm1pbnV0ZXMrPWYoYytlKX19LHtrZXk6XCJ3d1wiLHJlZ2V4OlwiWzAtNF1bMC05XXw1WzAtM11cIn0se2tleTpcIndcIixyZWdleDpcIlswLTldfFsxLTRdWzAtOV18NVswLTNdXCJ9LHtrZXk6XCJHR0dHXCIscmVnZXg6Yi5EQVRFVElNRV9GT1JNQVRTLkVSQU5BTUVTLmpvaW4oXCJ8XCIpLnJlcGxhY2UoL1xccy9nLFwiXFxcXHNcIil9LHtrZXk6XCJHR0dcIixyZWdleDpiLkRBVEVUSU1FX0ZPUk1BVFMuRVJBUy5qb2luKFwifFwiKX0se2tleTpcIkdHXCIscmVnZXg6Yi5EQVRFVElNRV9GT1JNQVRTLkVSQVMuam9pbihcInxcIil9LHtrZXk6XCJHXCIscmVnZXg6Yi5EQVRFVElNRV9GT1JNQVRTLkVSQVMuam9pbihcInxcIil9XX0sdGhpcy5pbml0KCksdGhpcy5wYXJzZT1mdW5jdGlvbihjLGYsZyl7aWYoIWFuZ3VsYXIuaXNTdHJpbmcoYyl8fCFmKXJldHVybiBjO2Y9Yi5EQVRFVElNRV9GT1JNQVRTW2ZdfHxmLGY9Zi5yZXBsYWNlKG4sXCJcXFxcJCZcIiksYi5pZCE9PWwmJnRoaXMuaW5pdCgpLHRoaXMucGFyc2Vyc1tmXXx8KHRoaXMucGFyc2Vyc1tmXT1kKGYpKTt2YXIgaD10aGlzLnBhcnNlcnNbZl0saT1oLnJlZ2V4LGo9aC5tYXAsaz1jLm1hdGNoKGkpLG09ITE7aWYoayYmay5sZW5ndGgpe3ZhciBvLHA7YW5ndWxhci5pc0RhdGUoZykmJiFpc05hTihnLmdldFRpbWUoKSk/bz17eWVhcjpnLmdldEZ1bGxZZWFyKCksbW9udGg6Zy5nZXRNb250aCgpLGRhdGU6Zy5nZXREYXRlKCksaG91cnM6Zy5nZXRIb3VycygpLG1pbnV0ZXM6Zy5nZXRNaW51dGVzKCksc2Vjb25kczpnLmdldFNlY29uZHMoKSxtaWxsaXNlY29uZHM6Zy5nZXRNaWxsaXNlY29uZHMoKX06KGcmJmEud2FybihcImRhdGVwYXJzZXI6XCIsXCJiYXNlRGF0ZSBpcyBub3QgYSB2YWxpZCBkYXRlXCIpLG89e3llYXI6MTkwMCxtb250aDowLGRhdGU6MSxob3VyczowLG1pbnV0ZXM6MCxzZWNvbmRzOjAsbWlsbGlzZWNvbmRzOjB9KTtmb3IodmFyIHE9MSxyPWsubGVuZ3RoO3I+cTtxKyspe3ZhciBzPWpbcS0xXTtcIlpcIj09PXMubWF0Y2hlciYmKG09ITApLHMuYXBwbHkmJnMuYXBwbHkuY2FsbChvLGtbcV0pfXZhciB0PW0/RGF0ZS5wcm90b3R5cGUuc2V0VVRDRnVsbFllYXI6RGF0ZS5wcm90b3R5cGUuc2V0RnVsbFllYXIsdT1tP0RhdGUucHJvdG90eXBlLnNldFVUQ0hvdXJzOkRhdGUucHJvdG90eXBlLnNldEhvdXJzO3JldHVybiBlKG8ueWVhcixvLm1vbnRoLG8uZGF0ZSkmJighYW5ndWxhci5pc0RhdGUoZyl8fGlzTmFOKGcuZ2V0VGltZSgpKXx8bT8ocD1uZXcgRGF0ZSgwKSx0LmNhbGwocCxvLnllYXIsby5tb250aCxvLmRhdGUpLHUuY2FsbChwLG8uaG91cnN8fDAsby5taW51dGVzfHwwLG8uc2Vjb25kc3x8MCxvLm1pbGxpc2Vjb25kc3x8MCkpOihwPW5ldyBEYXRlKGcpLHQuY2FsbChwLG8ueWVhcixvLm1vbnRoLG8uZGF0ZSksdS5jYWxsKHAsby5ob3VycyxvLm1pbnV0ZXMsby5zZWNvbmRzLG8ubWlsbGlzZWNvbmRzKSkpLHB9fSx0aGlzLnRvVGltZXpvbmU9Zyx0aGlzLmZyb21UaW1lem9uZT1oLHRoaXMudGltZXpvbmVUb09mZnNldD1pLHRoaXMuYWRkRGF0ZU1pbnV0ZXM9aix0aGlzLmNvbnZlcnRUaW1lem9uZVRvTG9jYWw9a31dKSxhbmd1bGFyLm1vZHVsZShcInVpLmJvb3RzdHJhcC5pc0NsYXNzXCIsW10pLmRpcmVjdGl2ZShcInVpYklzQ2xhc3NcIixbXCIkYW5pbWF0ZVwiLGZ1bmN0aW9uKGEpe3ZhciBiPS9eXFxzKihbXFxzXFxTXSs/KVxccytvblxccysoW1xcc1xcU10rPylcXHMqJC8sYz0vXlxccyooW1xcc1xcU10rPylcXHMrZm9yXFxzKyhbXFxzXFxTXSs/KVxccyokLztyZXR1cm57cmVzdHJpY3Q6XCJBXCIsY29tcGlsZTpmdW5jdGlvbihkLGUpe2Z1bmN0aW9uIGYoYSxiLGMpe2kucHVzaChhKSxqLnB1c2goe3Njb3BlOmEsZWxlbWVudDpifSksby5mb3JFYWNoKGZ1bmN0aW9uKGIsYyl7ZyhiLGEpfSksYS4kb24oXCIkZGVzdHJveVwiLGgpfWZ1bmN0aW9uIGcoYixkKXt2YXIgZT1iLm1hdGNoKGMpLGY9ZC4kZXZhbChlWzFdKSxnPWVbMl0saD1rW2JdO2lmKCFoKXt2YXIgaT1mdW5jdGlvbihiKXt2YXIgYz1udWxsO2ouc29tZShmdW5jdGlvbihhKXt2YXIgZD1hLnNjb3BlLiRldmFsKG0pO3JldHVybiBkPT09Yj8oYz1hLCEwKTp2b2lkIDB9KSxoLmxhc3RBY3RpdmF0ZWQhPT1jJiYoaC5sYXN0QWN0aXZhdGVkJiZhLnJlbW92ZUNsYXNzKGgubGFzdEFjdGl2YXRlZC5lbGVtZW50LGYpLGMmJmEuYWRkQ2xhc3MoYy5lbGVtZW50LGYpLGgubGFzdEFjdGl2YXRlZD1jKX07a1tiXT1oPXtsYXN0QWN0aXZhdGVkOm51bGwsc2NvcGU6ZCx3YXRjaEZuOmksY29tcGFyZVdpdGhFeHA6Zyx3YXRjaGVyOmQuJHdhdGNoKGcsaSl9fWgud2F0Y2hGbihkLiRldmFsKGcpKX1mdW5jdGlvbiBoKGEpe3ZhciBiPWEudGFyZ2V0U2NvcGUsYz1pLmluZGV4T2YoYik7aWYoaS5zcGxpY2UoYywxKSxqLnNwbGljZShjLDEpLGkubGVuZ3RoKXt2YXIgZD1pWzBdO2FuZ3VsYXIuZm9yRWFjaChrLGZ1bmN0aW9uKGEpe2Euc2NvcGU9PT1iJiYoYS53YXRjaGVyPWQuJHdhdGNoKGEuY29tcGFyZVdpdGhFeHAsYS53YXRjaEZuKSxhLnNjb3BlPWQpfSl9ZWxzZSBrPXt9fXZhciBpPVtdLGo9W10saz17fSxsPWUudWliSXNDbGFzcy5tYXRjaChiKSxtPWxbMl0sbj1sWzFdLG89bi5zcGxpdChcIixcIik7cmV0dXJuIGZ9fX1dKSxhbmd1bGFyLm1vZHVsZShcInVpLmJvb3RzdHJhcC5wb3NpdGlvblwiLFtdKS5mYWN0b3J5KFwiJHVpYlBvc2l0aW9uXCIsW1wiJGRvY3VtZW50XCIsXCIkd2luZG93XCIsZnVuY3Rpb24oYSxiKXt2YXIgYyxkPXtub3JtYWw6LyhhdXRvfHNjcm9sbCkvLGhpZGRlbjovKGF1dG98c2Nyb2xsfGhpZGRlbikvfSxlPXthdXRvOi9cXHM/YXV0bz9cXHM/L2kscHJpbWFyeTovXih0b3B8Ym90dG9tfGxlZnR8cmlnaHQpJC8sc2Vjb25kYXJ5Oi9eKHRvcHxib3R0b218bGVmdHxyaWdodHxjZW50ZXIpJC8sdmVydGljYWw6L14odG9wfGJvdHRvbSkkL307cmV0dXJue2dldFJhd05vZGU6ZnVuY3Rpb24oYSl7cmV0dXJuIGFbMF18fGF9LHBhcnNlU3R5bGU6ZnVuY3Rpb24oYSl7cmV0dXJuIGE9cGFyc2VGbG9hdChhKSxpc0Zpbml0ZShhKT9hOjB9LG9mZnNldFBhcmVudDpmdW5jdGlvbihjKXtmdW5jdGlvbiBkKGEpe3JldHVyblwic3RhdGljXCI9PT0oYi5nZXRDb21wdXRlZFN0eWxlKGEpLnBvc2l0aW9ufHxcInN0YXRpY1wiKX1jPXRoaXMuZ2V0UmF3Tm9kZShjKTtmb3IodmFyIGU9Yy5vZmZzZXRQYXJlbnR8fGFbMF0uZG9jdW1lbnRFbGVtZW50O2UmJmUhPT1hWzBdLmRvY3VtZW50RWxlbWVudCYmZChlKTspZT1lLm9mZnNldFBhcmVudDtyZXR1cm4gZXx8YVswXS5kb2N1bWVudEVsZW1lbnR9LHNjcm9sbGJhcldpZHRoOmZ1bmN0aW9uKCl7aWYoYW5ndWxhci5pc1VuZGVmaW5lZChjKSl7dmFyIGI9YW5ndWxhci5lbGVtZW50KCc8ZGl2IHN0eWxlPVwicG9zaXRpb246IGFic29sdXRlOyB0b3A6IC05OTk5cHg7IHdpZHRoOiA1MHB4OyBoZWlnaHQ6IDUwcHg7IG92ZXJmbG93OiBzY3JvbGw7XCI+PC9kaXY+Jyk7YS5maW5kKFwiYm9keVwiKS5hcHBlbmQoYiksYz1iWzBdLm9mZnNldFdpZHRoLWJbMF0uY2xpZW50V2lkdGgsYz1pc0Zpbml0ZShjKT9jOjAsYi5yZW1vdmUoKX1yZXR1cm4gY30sc2Nyb2xsUGFyZW50OmZ1bmN0aW9uKGMsZSl7Yz10aGlzLmdldFJhd05vZGUoYyk7dmFyIGY9ZT9kLmhpZGRlbjpkLm5vcm1hbCxnPWFbMF0uZG9jdW1lbnRFbGVtZW50LGg9Yi5nZXRDb21wdXRlZFN0eWxlKGMpLGk9XCJhYnNvbHV0ZVwiPT09aC5wb3NpdGlvbixqPWMucGFyZW50RWxlbWVudHx8ZztpZihqPT09Z3x8XCJmaXhlZFwiPT09aC5wb3NpdGlvbilyZXR1cm4gZztmb3IoO2oucGFyZW50RWxlbWVudCYmaiE9PWc7KXt2YXIgaz1iLmdldENvbXB1dGVkU3R5bGUoaik7aWYoaSYmXCJzdGF0aWNcIiE9PWsucG9zaXRpb24mJihpPSExKSwhaSYmZi50ZXN0KGsub3ZlcmZsb3cray5vdmVyZmxvd1kray5vdmVyZmxvd1gpKWJyZWFrO2o9ai5wYXJlbnRFbGVtZW50fXJldHVybiBqfSxwb3NpdGlvbjpmdW5jdGlvbihjLGQpe2M9dGhpcy5nZXRSYXdOb2RlKGMpO3ZhciBlPXRoaXMub2Zmc2V0KGMpO2lmKGQpe3ZhciBmPWIuZ2V0Q29tcHV0ZWRTdHlsZShjKTtlLnRvcC09dGhpcy5wYXJzZVN0eWxlKGYubWFyZ2luVG9wKSxlLmxlZnQtPXRoaXMucGFyc2VTdHlsZShmLm1hcmdpbkxlZnQpfXZhciBnPXRoaXMub2Zmc2V0UGFyZW50KGMpLGg9e3RvcDowLGxlZnQ6MH07cmV0dXJuIGchPT1hWzBdLmRvY3VtZW50RWxlbWVudCYmKGg9dGhpcy5vZmZzZXQoZyksaC50b3ArPWcuY2xpZW50VG9wLWcuc2Nyb2xsVG9wLGgubGVmdCs9Zy5jbGllbnRMZWZ0LWcuc2Nyb2xsTGVmdCkse3dpZHRoOk1hdGgucm91bmQoYW5ndWxhci5pc051bWJlcihlLndpZHRoKT9lLndpZHRoOmMub2Zmc2V0V2lkdGgpLGhlaWdodDpNYXRoLnJvdW5kKGFuZ3VsYXIuaXNOdW1iZXIoZS5oZWlnaHQpP2UuaGVpZ2h0OmMub2Zmc2V0SGVpZ2h0KSx0b3A6TWF0aC5yb3VuZChlLnRvcC1oLnRvcCksbGVmdDpNYXRoLnJvdW5kKGUubGVmdC1oLmxlZnQpfX0sb2Zmc2V0OmZ1bmN0aW9uKGMpe2M9dGhpcy5nZXRSYXdOb2RlKGMpO3ZhciBkPWMuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7cmV0dXJue3dpZHRoOk1hdGgucm91bmQoYW5ndWxhci5pc051bWJlcihkLndpZHRoKT9kLndpZHRoOmMub2Zmc2V0V2lkdGgpLGhlaWdodDpNYXRoLnJvdW5kKGFuZ3VsYXIuaXNOdW1iZXIoZC5oZWlnaHQpP2QuaGVpZ2h0OmMub2Zmc2V0SGVpZ2h0KSx0b3A6TWF0aC5yb3VuZChkLnRvcCsoYi5wYWdlWU9mZnNldHx8YVswXS5kb2N1bWVudEVsZW1lbnQuc2Nyb2xsVG9wKSksbGVmdDpNYXRoLnJvdW5kKGQubGVmdCsoYi5wYWdlWE9mZnNldHx8YVswXS5kb2N1bWVudEVsZW1lbnQuc2Nyb2xsTGVmdCkpfX0sdmlld3BvcnRPZmZzZXQ6ZnVuY3Rpb24oYyxkLGUpe2M9dGhpcy5nZXRSYXdOb2RlKGMpLGU9ZSE9PSExPyEwOiExO3ZhciBmPWMuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCksZz17dG9wOjAsbGVmdDowLGJvdHRvbTowLHJpZ2h0OjB9LGg9ZD9hWzBdLmRvY3VtZW50RWxlbWVudDp0aGlzLnNjcm9sbFBhcmVudChjKSxpPWguZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7aWYoZy50b3A9aS50b3AraC5jbGllbnRUb3AsZy5sZWZ0PWkubGVmdCtoLmNsaWVudExlZnQsaD09PWFbMF0uZG9jdW1lbnRFbGVtZW50JiYoZy50b3ArPWIucGFnZVlPZmZzZXQsZy5sZWZ0Kz1iLnBhZ2VYT2Zmc2V0KSxnLmJvdHRvbT1nLnRvcCtoLmNsaWVudEhlaWdodCxnLnJpZ2h0PWcubGVmdCtoLmNsaWVudFdpZHRoLGUpe3ZhciBqPWIuZ2V0Q29tcHV0ZWRTdHlsZShoKTtnLnRvcCs9dGhpcy5wYXJzZVN0eWxlKGoucGFkZGluZ1RvcCksZy5ib3R0b20tPXRoaXMucGFyc2VTdHlsZShqLnBhZGRpbmdCb3R0b20pLGcubGVmdCs9dGhpcy5wYXJzZVN0eWxlKGoucGFkZGluZ0xlZnQpLGcucmlnaHQtPXRoaXMucGFyc2VTdHlsZShqLnBhZGRpbmdSaWdodCl9cmV0dXJue3RvcDpNYXRoLnJvdW5kKGYudG9wLWcudG9wKSxib3R0b206TWF0aC5yb3VuZChnLmJvdHRvbS1mLmJvdHRvbSksbGVmdDpNYXRoLnJvdW5kKGYubGVmdC1nLmxlZnQpLHJpZ2h0Ok1hdGgucm91bmQoZy5yaWdodC1mLnJpZ2h0KX19LHBhcnNlUGxhY2VtZW50OmZ1bmN0aW9uKGEpe3ZhciBiPWUuYXV0by50ZXN0KGEpO3JldHVybiBiJiYoYT1hLnJlcGxhY2UoZS5hdXRvLFwiXCIpKSxhPWEuc3BsaXQoXCItXCIpLGFbMF09YVswXXx8XCJ0b3BcIixlLnByaW1hcnkudGVzdChhWzBdKXx8KGFbMF09XCJ0b3BcIiksYVsxXT1hWzFdfHxcImNlbnRlclwiLGUuc2Vjb25kYXJ5LnRlc3QoYVsxXSl8fChhWzFdPVwiY2VudGVyXCIpLGI/YVsyXT0hMDphWzJdPSExLGF9LHBvc2l0aW9uRWxlbWVudHM6ZnVuY3Rpb24oYSxjLGQsZil7YT10aGlzLmdldFJhd05vZGUoYSksYz10aGlzLmdldFJhd05vZGUoYyk7dmFyIGc9YW5ndWxhci5pc0RlZmluZWQoYy5vZmZzZXRXaWR0aCk/Yy5vZmZzZXRXaWR0aDpjLnByb3AoXCJvZmZzZXRXaWR0aFwiKSxoPWFuZ3VsYXIuaXNEZWZpbmVkKGMub2Zmc2V0SGVpZ2h0KT9jLm9mZnNldEhlaWdodDpjLnByb3AoXCJvZmZzZXRIZWlnaHRcIik7ZD10aGlzLnBhcnNlUGxhY2VtZW50KGQpO3ZhciBpPWY/dGhpcy5vZmZzZXQoYSk6dGhpcy5wb3NpdGlvbihhKSxqPXt0b3A6MCxsZWZ0OjAscGxhY2VtZW50OlwiXCJ9O2lmKGRbMl0pe3ZhciBrPXRoaXMudmlld3BvcnRPZmZzZXQoYSksbD1iLmdldENvbXB1dGVkU3R5bGUoYyksbT17d2lkdGg6ZytNYXRoLnJvdW5kKE1hdGguYWJzKHRoaXMucGFyc2VTdHlsZShsLm1hcmdpbkxlZnQpK3RoaXMucGFyc2VTdHlsZShsLm1hcmdpblJpZ2h0KSkpLGhlaWdodDpoK01hdGgucm91bmQoTWF0aC5hYnModGhpcy5wYXJzZVN0eWxlKGwubWFyZ2luVG9wKSt0aGlzLnBhcnNlU3R5bGUobC5tYXJnaW5Cb3R0b20pKSl9O2lmKGRbMF09XCJ0b3BcIj09PWRbMF0mJm0uaGVpZ2h0PmsudG9wJiZtLmhlaWdodDw9ay5ib3R0b20/XCJib3R0b21cIjpcImJvdHRvbVwiPT09ZFswXSYmbS5oZWlnaHQ+ay5ib3R0b20mJm0uaGVpZ2h0PD1rLnRvcD9cInRvcFwiOlwibGVmdFwiPT09ZFswXSYmbS53aWR0aD5rLmxlZnQmJm0ud2lkdGg8PWsucmlnaHQ/XCJyaWdodFwiOlwicmlnaHRcIj09PWRbMF0mJm0ud2lkdGg+ay5yaWdodCYmbS53aWR0aDw9ay5sZWZ0P1wibGVmdFwiOmRbMF0sZFsxXT1cInRvcFwiPT09ZFsxXSYmbS5oZWlnaHQtaS5oZWlnaHQ+ay5ib3R0b20mJm0uaGVpZ2h0LWkuaGVpZ2h0PD1rLnRvcD9cImJvdHRvbVwiOlwiYm90dG9tXCI9PT1kWzFdJiZtLmhlaWdodC1pLmhlaWdodD5rLnRvcCYmbS5oZWlnaHQtaS5oZWlnaHQ8PWsuYm90dG9tP1widG9wXCI6XCJsZWZ0XCI9PT1kWzFdJiZtLndpZHRoLWkud2lkdGg+ay5yaWdodCYmbS53aWR0aC1pLndpZHRoPD1rLmxlZnQ/XCJyaWdodFwiOlwicmlnaHRcIj09PWRbMV0mJm0ud2lkdGgtaS53aWR0aD5rLmxlZnQmJm0ud2lkdGgtaS53aWR0aDw9ay5yaWdodD9cImxlZnRcIjpkWzFdLFwiY2VudGVyXCI9PT1kWzFdKWlmKGUudmVydGljYWwudGVzdChkWzBdKSl7dmFyIG49aS53aWR0aC8yLWcvMjtrLmxlZnQrbjwwJiZtLndpZHRoLWkud2lkdGg8PWsucmlnaHQ/ZFsxXT1cImxlZnRcIjprLnJpZ2h0K248MCYmbS53aWR0aC1pLndpZHRoPD1rLmxlZnQmJihkWzFdPVwicmlnaHRcIil9ZWxzZXt2YXIgbz1pLmhlaWdodC8yLW0uaGVpZ2h0LzI7ay50b3ArbzwwJiZtLmhlaWdodC1pLmhlaWdodDw9ay5ib3R0b20/ZFsxXT1cInRvcFwiOmsuYm90dG9tK288MCYmbS5oZWlnaHQtaS5oZWlnaHQ8PWsudG9wJiYoZFsxXT1cImJvdHRvbVwiKX19c3dpdGNoKGRbMF0pe2Nhc2VcInRvcFwiOmoudG9wPWkudG9wLWg7YnJlYWs7Y2FzZVwiYm90dG9tXCI6ai50b3A9aS50b3AraS5oZWlnaHQ7YnJlYWs7Y2FzZVwibGVmdFwiOmoubGVmdD1pLmxlZnQtZzticmVhaztjYXNlXCJyaWdodFwiOmoubGVmdD1pLmxlZnQraS53aWR0aH1zd2l0Y2goZFsxXSl7Y2FzZVwidG9wXCI6ai50b3A9aS50b3A7YnJlYWs7Y2FzZVwiYm90dG9tXCI6ai50b3A9aS50b3AraS5oZWlnaHQtaDticmVhaztjYXNlXCJsZWZ0XCI6ai5sZWZ0PWkubGVmdDticmVhaztjYXNlXCJyaWdodFwiOmoubGVmdD1pLmxlZnQraS53aWR0aC1nO2JyZWFrO2Nhc2VcImNlbnRlclwiOmUudmVydGljYWwudGVzdChkWzBdKT9qLmxlZnQ9aS5sZWZ0K2kud2lkdGgvMi1nLzI6ai50b3A9aS50b3AraS5oZWlnaHQvMi1oLzJ9cmV0dXJuIGoudG9wPU1hdGgucm91bmQoai50b3ApLGoubGVmdD1NYXRoLnJvdW5kKGoubGVmdCksai5wbGFjZW1lbnQ9XCJjZW50ZXJcIj09PWRbMV0/ZFswXTpkWzBdK1wiLVwiK2RbMV0san0scG9zaXRpb25BcnJvdzpmdW5jdGlvbihhLGMpe2E9dGhpcy5nZXRSYXdOb2RlKGEpO3ZhciBkPSEwLGY9YS5xdWVyeVNlbGVjdG9yKFwiLnRvb2x0aXAtaW5uZXJcIik7aWYoZnx8KGQ9ITEsZj1hLnF1ZXJ5U2VsZWN0b3IoXCIucG9wb3Zlci1pbm5lclwiKSksZil7dmFyIGc9ZD9hLnF1ZXJ5U2VsZWN0b3IoXCIudG9vbHRpcC1hcnJvd1wiKTphLnF1ZXJ5U2VsZWN0b3IoXCIuYXJyb3dcIik7aWYoZyl7aWYoYz10aGlzLnBhcnNlUGxhY2VtZW50KGMpLFwiY2VudGVyXCI9PT1jWzFdKXJldHVybiB2b2lkIGFuZ3VsYXIuZWxlbWVudChnKS5jc3Moe3RvcDpcIlwiLGJvdHRvbTpcIlwiLHJpZ2h0OlwiXCIsbGVmdDpcIlwiLG1hcmdpbjpcIlwifSk7dmFyIGg9XCJib3JkZXItXCIrY1swXStcIi13aWR0aFwiLGk9Yi5nZXRDb21wdXRlZFN0eWxlKGcpW2hdLGo9XCJib3JkZXItXCI7ais9ZS52ZXJ0aWNhbC50ZXN0KGNbMF0pP2NbMF0rXCItXCIrY1sxXTpjWzFdK1wiLVwiK2NbMF0sais9XCItcmFkaXVzXCI7dmFyIGs9Yi5nZXRDb21wdXRlZFN0eWxlKGQ/ZjphKVtqXSxsPXt0b3A6XCJhdXRvXCIsYm90dG9tOlwiYXV0b1wiLGxlZnQ6XCJhdXRvXCIscmlnaHQ6XCJhdXRvXCIsbWFyZ2luOjB9O3N3aXRjaChjWzBdKXtjYXNlXCJ0b3BcIjpsLmJvdHRvbT1kP1wiMFwiOlwiLVwiK2k7YnJlYWs7Y2FzZVwiYm90dG9tXCI6bC50b3A9ZD9cIjBcIjpcIi1cIitpO2JyZWFrO2Nhc2VcImxlZnRcIjpsLnJpZ2h0PWQ/XCIwXCI6XCItXCIraTticmVhaztjYXNlXCJyaWdodFwiOmwubGVmdD1kP1wiMFwiOlwiLVwiK2l9bFtjWzFdXT1rLGFuZ3VsYXIuZWxlbWVudChnKS5jc3MobCl9fX19fV0pLGFuZ3VsYXIubW9kdWxlKFwidWkuYm9vdHN0cmFwLmRhdGVwaWNrZXJcIixbXCJ1aS5ib290c3RyYXAuZGF0ZXBhcnNlclwiLFwidWkuYm9vdHN0cmFwLmlzQ2xhc3NcIixcInVpLmJvb3RzdHJhcC5wb3NpdGlvblwiXSkudmFsdWUoXCIkZGF0ZXBpY2tlclN1cHByZXNzRXJyb3JcIiwhMSkuY29uc3RhbnQoXCJ1aWJEYXRlcGlja2VyQ29uZmlnXCIse2Zvcm1hdERheTpcImRkXCIsZm9ybWF0TW9udGg6XCJNTU1NXCIsZm9ybWF0WWVhcjpcInl5eXlcIixmb3JtYXREYXlIZWFkZXI6XCJFRUVcIixmb3JtYXREYXlUaXRsZTpcIk1NTU0geXl5eVwiLGZvcm1hdE1vbnRoVGl0bGU6XCJ5eXl5XCIsZGF0ZXBpY2tlck1vZGU6XCJkYXlcIixtaW5Nb2RlOlwiZGF5XCIsbWF4TW9kZTpcInllYXJcIixzaG93V2Vla3M6ITAsc3RhcnRpbmdEYXk6MCx5ZWFyUm93czo0LHllYXJDb2x1bW5zOjUsbWluRGF0ZTpudWxsLG1heERhdGU6bnVsbCxzaG9ydGN1dFByb3BhZ2F0aW9uOiExLG5nTW9kZWxPcHRpb25zOnt9fSkuY29udHJvbGxlcihcIlVpYkRhdGVwaWNrZXJDb250cm9sbGVyXCIsW1wiJHNjb3BlXCIsXCIkYXR0cnNcIixcIiRwYXJzZVwiLFwiJGludGVycG9sYXRlXCIsXCIkbG9nXCIsXCJkYXRlRmlsdGVyXCIsXCJ1aWJEYXRlcGlja2VyQ29uZmlnXCIsXCIkZGF0ZXBpY2tlclN1cHByZXNzRXJyb3JcIixcInVpYkRhdGVQYXJzZXJcIixmdW5jdGlvbihhLGIsYyxkLGUsZixnLGgsaSl7dmFyIGo9dGhpcyxrPXskc2V0Vmlld1ZhbHVlOmFuZ3VsYXIubm9vcH0sbD17fTt0aGlzLm1vZGVzPVtcImRheVwiLFwibW9udGhcIixcInllYXJcIl0sYW5ndWxhci5mb3JFYWNoKFtcImZvcm1hdERheVwiLFwiZm9ybWF0TW9udGhcIixcImZvcm1hdFllYXJcIixcImZvcm1hdERheUhlYWRlclwiLFwiZm9ybWF0RGF5VGl0bGVcIixcImZvcm1hdE1vbnRoVGl0bGVcIl0sZnVuY3Rpb24oYyl7altjXT1hbmd1bGFyLmlzRGVmaW5lZChiW2NdKT9kKGJbY10pKGEuJHBhcmVudCk6Z1tjXX0pLGFuZ3VsYXIuZm9yRWFjaChbXCJzaG93V2Vla3NcIixcInN0YXJ0aW5nRGF5XCIsXCJ5ZWFyUm93c1wiLFwieWVhckNvbHVtbnNcIixcInNob3J0Y3V0UHJvcGFnYXRpb25cIl0sZnVuY3Rpb24oYyl7altjXT1hbmd1bGFyLmlzRGVmaW5lZChiW2NdKT9hLiRwYXJlbnQuJGV2YWwoYltjXSk6Z1tjXX0pLGFuZ3VsYXIuZm9yRWFjaChbXCJtaW5EYXRlXCIsXCJtYXhEYXRlXCJdLGZ1bmN0aW9uKGMpe2JbY10/YS4kcGFyZW50LiR3YXRjaChiW2NdLGZ1bmN0aW9uKGEpe2pbY109YT9hbmd1bGFyLmlzRGF0ZShhKT9pLmZyb21UaW1lem9uZShuZXcgRGF0ZShhKSxsLnRpbWV6b25lKTpuZXcgRGF0ZShmKGEsXCJtZWRpdW1cIikpOm51bGwsai5yZWZyZXNoVmlldygpfSk6altjXT1nW2NdP2kuZnJvbVRpbWV6b25lKG5ldyBEYXRlKGdbY10pLGwudGltZXpvbmUpOm51bGx9KSxhbmd1bGFyLmZvckVhY2goW1wibWluTW9kZVwiLFwibWF4TW9kZVwiXSxmdW5jdGlvbihjKXtiW2NdP2EuJHBhcmVudC4kd2F0Y2goYltjXSxmdW5jdGlvbihkKXtqW2NdPWFbY109YW5ndWxhci5pc0RlZmluZWQoZCk/ZDpiW2NdLChcIm1pbk1vZGVcIj09PWMmJmoubW9kZXMuaW5kZXhPZihhLmRhdGVwaWNrZXJNb2RlKTxqLm1vZGVzLmluZGV4T2YoaltjXSl8fFwibWF4TW9kZVwiPT09YyYmai5tb2Rlcy5pbmRleE9mKGEuZGF0ZXBpY2tlck1vZGUpPmoubW9kZXMuaW5kZXhPZihqW2NdKSkmJihhLmRhdGVwaWNrZXJNb2RlPWpbY10pfSk6altjXT1hW2NdPWdbY118fG51bGx9KSxhLmRhdGVwaWNrZXJNb2RlPWEuZGF0ZXBpY2tlck1vZGV8fGcuZGF0ZXBpY2tlck1vZGUsYS51bmlxdWVJZD1cImRhdGVwaWNrZXItXCIrYS4kaWQrXCItXCIrTWF0aC5mbG9vcigxZTQqTWF0aC5yYW5kb20oKSksYW5ndWxhci5pc0RlZmluZWQoYi5pbml0RGF0ZSk/KHRoaXMuYWN0aXZlRGF0ZT1pLmZyb21UaW1lem9uZShhLiRwYXJlbnQuJGV2YWwoYi5pbml0RGF0ZSksbC50aW1lem9uZSl8fG5ldyBEYXRlLGEuJHBhcmVudC4kd2F0Y2goYi5pbml0RGF0ZSxmdW5jdGlvbihhKXthJiYoay4kaXNFbXB0eShrLiRtb2RlbFZhbHVlKXx8ay4kaW52YWxpZCkmJihqLmFjdGl2ZURhdGU9aS5mcm9tVGltZXpvbmUoYSxsLnRpbWV6b25lKSxqLnJlZnJlc2hWaWV3KCkpfSkpOnRoaXMuYWN0aXZlRGF0ZT1uZXcgRGF0ZSxhLmRpc2FibGVkPWFuZ3VsYXIuaXNEZWZpbmVkKGIuZGlzYWJsZWQpfHwhMSxhbmd1bGFyLmlzRGVmaW5lZChiLm5nRGlzYWJsZWQpJiZhLiRwYXJlbnQuJHdhdGNoKGIubmdEaXNhYmxlZCxmdW5jdGlvbihiKXthLmRpc2FibGVkPWIsai5yZWZyZXNoVmlldygpfSksYS5pc0FjdGl2ZT1mdW5jdGlvbihiKXtyZXR1cm4gMD09PWouY29tcGFyZShiLmRhdGUsai5hY3RpdmVEYXRlKT8oYS5hY3RpdmVEYXRlSWQ9Yi51aWQsITApOiExfSx0aGlzLmluaXQ9ZnVuY3Rpb24oYSl7az1hLGw9YS4kb3B0aW9uc3x8Zy5uZ01vZGVsT3B0aW9ucyxrLiRtb2RlbFZhbHVlJiYodGhpcy5hY3RpdmVEYXRlPWsuJG1vZGVsVmFsdWUpLGsuJHJlbmRlcj1mdW5jdGlvbigpe2oucmVuZGVyKCl9fSx0aGlzLnJlbmRlcj1mdW5jdGlvbigpe2lmKGsuJHZpZXdWYWx1ZSl7dmFyIGE9bmV3IERhdGUoay4kdmlld1ZhbHVlKSxiPSFpc05hTihhKTtiP3RoaXMuYWN0aXZlRGF0ZT1pLmZyb21UaW1lem9uZShhLGwudGltZXpvbmUpOmh8fGUuZXJyb3IoJ0RhdGVwaWNrZXIgZGlyZWN0aXZlOiBcIm5nLW1vZGVsXCIgdmFsdWUgbXVzdCBiZSBhIERhdGUgb2JqZWN0Jyl9dGhpcy5yZWZyZXNoVmlldygpfSx0aGlzLnJlZnJlc2hWaWV3PWZ1bmN0aW9uKCl7aWYodGhpcy5lbGVtZW50KXthLnNlbGVjdGVkRHQ9bnVsbCx0aGlzLl9yZWZyZXNoVmlldygpLGEuYWN0aXZlRHQmJihhLmFjdGl2ZURhdGVJZD1hLmFjdGl2ZUR0LnVpZCk7dmFyIGI9ay4kdmlld1ZhbHVlP25ldyBEYXRlKGsuJHZpZXdWYWx1ZSk6bnVsbDtiPWkuZnJvbVRpbWV6b25lKGIsbC50aW1lem9uZSksay4kc2V0VmFsaWRpdHkoXCJkYXRlRGlzYWJsZWRcIiwhYnx8dGhpcy5lbGVtZW50JiYhdGhpcy5pc0Rpc2FibGVkKGIpKX19LHRoaXMuY3JlYXRlRGF0ZU9iamVjdD1mdW5jdGlvbihiLGMpe3ZhciBkPWsuJHZpZXdWYWx1ZT9uZXcgRGF0ZShrLiR2aWV3VmFsdWUpOm51bGw7ZD1pLmZyb21UaW1lem9uZShkLGwudGltZXpvbmUpO3ZhciBlPXtkYXRlOmIsbGFiZWw6ZihiLGMucmVwbGFjZSgvZCEvLFwiZGRcIikpLnJlcGxhY2UoL00hLyxcIk1NXCIpLHNlbGVjdGVkOmQmJjA9PT10aGlzLmNvbXBhcmUoYixkKSxkaXNhYmxlZDp0aGlzLmlzRGlzYWJsZWQoYiksY3VycmVudDowPT09dGhpcy5jb21wYXJlKGIsbmV3IERhdGUpLGN1c3RvbUNsYXNzOnRoaXMuY3VzdG9tQ2xhc3MoYil8fG51bGx9O3JldHVybiBkJiYwPT09dGhpcy5jb21wYXJlKGIsZCkmJihhLnNlbGVjdGVkRHQ9ZSksai5hY3RpdmVEYXRlJiYwPT09dGhpcy5jb21wYXJlKGUuZGF0ZSxqLmFjdGl2ZURhdGUpJiYoYS5hY3RpdmVEdD1lKSxlfSx0aGlzLmlzRGlzYWJsZWQ9ZnVuY3Rpb24oYyl7cmV0dXJuIGEuZGlzYWJsZWR8fHRoaXMubWluRGF0ZSYmdGhpcy5jb21wYXJlKGMsdGhpcy5taW5EYXRlKTwwfHx0aGlzLm1heERhdGUmJnRoaXMuY29tcGFyZShjLHRoaXMubWF4RGF0ZSk+MHx8Yi5kYXRlRGlzYWJsZWQmJmEuZGF0ZURpc2FibGVkKHtkYXRlOmMsbW9kZTphLmRhdGVwaWNrZXJNb2RlfSl9LHRoaXMuY3VzdG9tQ2xhc3M9ZnVuY3Rpb24oYil7cmV0dXJuIGEuY3VzdG9tQ2xhc3Moe2RhdGU6Yixtb2RlOmEuZGF0ZXBpY2tlck1vZGV9KX0sdGhpcy5zcGxpdD1mdW5jdGlvbihhLGIpe2Zvcih2YXIgYz1bXTthLmxlbmd0aD4wOyljLnB1c2goYS5zcGxpY2UoMCxiKSk7cmV0dXJuIGN9LGEuc2VsZWN0PWZ1bmN0aW9uKGIpe2lmKGEuZGF0ZXBpY2tlck1vZGU9PT1qLm1pbk1vZGUpe3ZhciBjPWsuJHZpZXdWYWx1ZT9pLmZyb21UaW1lem9uZShuZXcgRGF0ZShrLiR2aWV3VmFsdWUpLGwudGltZXpvbmUpOm5ldyBEYXRlKDAsMCwwLDAsMCwwLDApO2Muc2V0RnVsbFllYXIoYi5nZXRGdWxsWWVhcigpLGIuZ2V0TW9udGgoKSxiLmdldERhdGUoKSksYz1pLnRvVGltZXpvbmUoYyxsLnRpbWV6b25lKSxrLiRzZXRWaWV3VmFsdWUoYyksay4kcmVuZGVyKCl9ZWxzZSBqLmFjdGl2ZURhdGU9YixhLmRhdGVwaWNrZXJNb2RlPWoubW9kZXNbai5tb2Rlcy5pbmRleE9mKGEuZGF0ZXBpY2tlck1vZGUpLTFdfSxhLm1vdmU9ZnVuY3Rpb24oYSl7dmFyIGI9ai5hY3RpdmVEYXRlLmdldEZ1bGxZZWFyKCkrYSooai5zdGVwLnllYXJzfHwwKSxjPWouYWN0aXZlRGF0ZS5nZXRNb250aCgpK2EqKGouc3RlcC5tb250aHN8fDApO2ouYWN0aXZlRGF0ZS5zZXRGdWxsWWVhcihiLGMsMSksai5yZWZyZXNoVmlldygpfSxhLnRvZ2dsZU1vZGU9ZnVuY3Rpb24oYil7Yj1ifHwxLGEuZGF0ZXBpY2tlck1vZGU9PT1qLm1heE1vZGUmJjE9PT1ifHxhLmRhdGVwaWNrZXJNb2RlPT09ai5taW5Nb2RlJiYtMT09PWJ8fChhLmRhdGVwaWNrZXJNb2RlPWoubW9kZXNbai5tb2Rlcy5pbmRleE9mKGEuZGF0ZXBpY2tlck1vZGUpK2JdKX0sYS5rZXlzPXsxMzpcImVudGVyXCIsMzI6XCJzcGFjZVwiLDMzOlwicGFnZXVwXCIsMzQ6XCJwYWdlZG93blwiLDM1OlwiZW5kXCIsMzY6XCJob21lXCIsMzc6XCJsZWZ0XCIsMzg6XCJ1cFwiLDM5OlwicmlnaHRcIiw0MDpcImRvd25cIn07dmFyIG09ZnVuY3Rpb24oKXtqLmVsZW1lbnRbMF0uZm9jdXMoKX07YS4kb24oXCJ1aWI6ZGF0ZXBpY2tlci5mb2N1c1wiLG0pLGEua2V5ZG93bj1mdW5jdGlvbihiKXt2YXIgYz1hLmtleXNbYi53aGljaF07aWYoYyYmIWIuc2hpZnRLZXkmJiFiLmFsdEtleSYmIWEuZGlzYWJsZWQpaWYoYi5wcmV2ZW50RGVmYXVsdCgpLGouc2hvcnRjdXRQcm9wYWdhdGlvbnx8Yi5zdG9wUHJvcGFnYXRpb24oKSxcImVudGVyXCI9PT1jfHxcInNwYWNlXCI9PT1jKXtpZihqLmlzRGlzYWJsZWQoai5hY3RpdmVEYXRlKSlyZXR1cm47YS5zZWxlY3Qoai5hY3RpdmVEYXRlKX1lbHNlIWIuY3RybEtleXx8XCJ1cFwiIT09YyYmXCJkb3duXCIhPT1jPyhqLmhhbmRsZUtleURvd24oYyxiKSxqLnJlZnJlc2hWaWV3KCkpOmEudG9nZ2xlTW9kZShcInVwXCI9PT1jPzE6LTEpfX1dKS5jb250cm9sbGVyKFwiVWliRGF5cGlja2VyQ29udHJvbGxlclwiLFtcIiRzY29wZVwiLFwiJGVsZW1lbnRcIixcImRhdGVGaWx0ZXJcIixmdW5jdGlvbihhLGIsYyl7ZnVuY3Rpb24gZChhLGIpe3JldHVybiAxIT09Ynx8YSU0IT09MHx8YSUxMDA9PT0wJiZhJTQwMCE9PTA/ZltiXToyOX1mdW5jdGlvbiBlKGEpe3ZhciBiPW5ldyBEYXRlKGEpO2Iuc2V0RGF0ZShiLmdldERhdGUoKSs0LShiLmdldERheSgpfHw3KSk7dmFyIGM9Yi5nZXRUaW1lKCk7cmV0dXJuIGIuc2V0TW9udGgoMCksYi5zZXREYXRlKDEpLE1hdGguZmxvb3IoTWF0aC5yb3VuZCgoYy1iKS84NjRlNSkvNykrMX12YXIgZj1bMzEsMjgsMzEsMzAsMzEsMzAsMzEsMzEsMzAsMzEsMzAsMzFdO3RoaXMuc3RlcD17bW9udGhzOjF9LHRoaXMuZWxlbWVudD1iLHRoaXMuaW5pdD1mdW5jdGlvbihiKXthbmd1bGFyLmV4dGVuZChiLHRoaXMpLGEuc2hvd1dlZWtzPWIuc2hvd1dlZWtzLGIucmVmcmVzaFZpZXcoKX0sdGhpcy5nZXREYXRlcz1mdW5jdGlvbihhLGIpe2Zvcih2YXIgYyxkPW5ldyBBcnJheShiKSxlPW5ldyBEYXRlKGEpLGY9MDtiPmY7KWM9bmV3IERhdGUoZSksZFtmKytdPWMsZS5zZXREYXRlKGUuZ2V0RGF0ZSgpKzEpO3JldHVybiBkfSx0aGlzLl9yZWZyZXNoVmlldz1mdW5jdGlvbigpe3ZhciBiPXRoaXMuYWN0aXZlRGF0ZS5nZXRGdWxsWWVhcigpLGQ9dGhpcy5hY3RpdmVEYXRlLmdldE1vbnRoKCksZj1uZXcgRGF0ZSh0aGlzLmFjdGl2ZURhdGUpO2Yuc2V0RnVsbFllYXIoYixkLDEpO3ZhciBnPXRoaXMuc3RhcnRpbmdEYXktZi5nZXREYXkoKSxoPWc+MD83LWc6LWcsaT1uZXcgRGF0ZShmKTtoPjAmJmkuc2V0RGF0ZSgtaCsxKTtmb3IodmFyIGo9dGhpcy5nZXREYXRlcyhpLDQyKSxrPTA7NDI+aztrKyspaltrXT1hbmd1bGFyLmV4dGVuZCh0aGlzLmNyZWF0ZURhdGVPYmplY3QoaltrXSx0aGlzLmZvcm1hdERheSkse3NlY29uZGFyeTpqW2tdLmdldE1vbnRoKCkhPT1kLHVpZDphLnVuaXF1ZUlkK1wiLVwiK2t9KTthLmxhYmVscz1uZXcgQXJyYXkoNyk7Zm9yKHZhciBsPTA7Nz5sO2wrKylhLmxhYmVsc1tsXT17YWJicjpjKGpbbF0uZGF0ZSx0aGlzLmZvcm1hdERheUhlYWRlciksZnVsbDpjKGpbbF0uZGF0ZSxcIkVFRUVcIil9O2lmKGEudGl0bGU9Yyh0aGlzLmFjdGl2ZURhdGUsdGhpcy5mb3JtYXREYXlUaXRsZSksYS5yb3dzPXRoaXMuc3BsaXQoaiw3KSxhLnNob3dXZWVrcyl7YS53ZWVrTnVtYmVycz1bXTtmb3IodmFyIG09KDExLXRoaXMuc3RhcnRpbmdEYXkpJTcsbj1hLnJvd3MubGVuZ3RoLG89MDtuPm87bysrKWEud2Vla051bWJlcnMucHVzaChlKGEucm93c1tvXVttXS5kYXRlKSl9fSx0aGlzLmNvbXBhcmU9ZnVuY3Rpb24oYSxiKXt2YXIgYz1uZXcgRGF0ZShhLmdldEZ1bGxZZWFyKCksYS5nZXRNb250aCgpLGEuZ2V0RGF0ZSgpKSxkPW5ldyBEYXRlKGIuZ2V0RnVsbFllYXIoKSxiLmdldE1vbnRoKCksYi5nZXREYXRlKCkpO3JldHVybiBjLnNldEZ1bGxZZWFyKGEuZ2V0RnVsbFllYXIoKSksZC5zZXRGdWxsWWVhcihiLmdldEZ1bGxZZWFyKCkpLGMtZH0sdGhpcy5oYW5kbGVLZXlEb3duPWZ1bmN0aW9uKGEsYil7dmFyIGM9dGhpcy5hY3RpdmVEYXRlLmdldERhdGUoKTtpZihcImxlZnRcIj09PWEpYy09MTtlbHNlIGlmKFwidXBcIj09PWEpYy09NztlbHNlIGlmKFwicmlnaHRcIj09PWEpYys9MTtlbHNlIGlmKFwiZG93blwiPT09YSljKz03O2Vsc2UgaWYoXCJwYWdldXBcIj09PWF8fFwicGFnZWRvd25cIj09PWEpe3ZhciBlPXRoaXMuYWN0aXZlRGF0ZS5nZXRNb250aCgpKyhcInBhZ2V1cFwiPT09YT8tMToxKTt0aGlzLmFjdGl2ZURhdGUuc2V0TW9udGgoZSwxKSxjPU1hdGgubWluKGQodGhpcy5hY3RpdmVEYXRlLmdldEZ1bGxZZWFyKCksdGhpcy5hY3RpdmVEYXRlLmdldE1vbnRoKCkpLGMpfWVsc2VcImhvbWVcIj09PWE/Yz0xOlwiZW5kXCI9PT1hJiYoYz1kKHRoaXMuYWN0aXZlRGF0ZS5nZXRGdWxsWWVhcigpLHRoaXMuYWN0aXZlRGF0ZS5nZXRNb250aCgpKSk7dGhpcy5hY3RpdmVEYXRlLnNldERhdGUoYyl9fV0pLmNvbnRyb2xsZXIoXCJVaWJNb250aHBpY2tlckNvbnRyb2xsZXJcIixbXCIkc2NvcGVcIixcIiRlbGVtZW50XCIsXCJkYXRlRmlsdGVyXCIsZnVuY3Rpb24oYSxiLGMpe3RoaXMuc3RlcD17eWVhcnM6MX0sdGhpcy5lbGVtZW50PWIsdGhpcy5pbml0PWZ1bmN0aW9uKGEpe2FuZ3VsYXIuZXh0ZW5kKGEsdGhpcyksYS5yZWZyZXNoVmlldygpfSx0aGlzLl9yZWZyZXNoVmlldz1mdW5jdGlvbigpe2Zvcih2YXIgYixkPW5ldyBBcnJheSgxMiksZT10aGlzLmFjdGl2ZURhdGUuZ2V0RnVsbFllYXIoKSxmPTA7MTI+ZjtmKyspYj1uZXcgRGF0ZSh0aGlzLmFjdGl2ZURhdGUpLGIuc2V0RnVsbFllYXIoZSxmLDEpLGRbZl09YW5ndWxhci5leHRlbmQodGhpcy5jcmVhdGVEYXRlT2JqZWN0KGIsdGhpcy5mb3JtYXRNb250aCkse3VpZDphLnVuaXF1ZUlkK1wiLVwiK2Z9KTthLnRpdGxlPWModGhpcy5hY3RpdmVEYXRlLHRoaXMuZm9ybWF0TW9udGhUaXRsZSksYS5yb3dzPXRoaXMuc3BsaXQoZCwzKX0sdGhpcy5jb21wYXJlPWZ1bmN0aW9uKGEsYil7dmFyIGM9bmV3IERhdGUoYS5nZXRGdWxsWWVhcigpLGEuZ2V0TW9udGgoKSksZD1uZXcgRGF0ZShiLmdldEZ1bGxZZWFyKCksYi5nZXRNb250aCgpKTtyZXR1cm4gYy5zZXRGdWxsWWVhcihhLmdldEZ1bGxZZWFyKCkpLGQuc2V0RnVsbFllYXIoYi5nZXRGdWxsWWVhcigpKSxjLWR9LHRoaXMuaGFuZGxlS2V5RG93bj1mdW5jdGlvbihhLGIpe3ZhciBjPXRoaXMuYWN0aXZlRGF0ZS5nZXRNb250aCgpO2lmKFwibGVmdFwiPT09YSljLT0xO2Vsc2UgaWYoXCJ1cFwiPT09YSljLT0zO2Vsc2UgaWYoXCJyaWdodFwiPT09YSljKz0xO2Vsc2UgaWYoXCJkb3duXCI9PT1hKWMrPTM7ZWxzZSBpZihcInBhZ2V1cFwiPT09YXx8XCJwYWdlZG93blwiPT09YSl7dmFyIGQ9dGhpcy5hY3RpdmVEYXRlLmdldEZ1bGxZZWFyKCkrKFwicGFnZXVwXCI9PT1hPy0xOjEpO3RoaXMuYWN0aXZlRGF0ZS5zZXRGdWxsWWVhcihkKX1lbHNlXCJob21lXCI9PT1hP2M9MDpcImVuZFwiPT09YSYmKGM9MTEpO3RoaXMuYWN0aXZlRGF0ZS5zZXRNb250aChjKX19XSkuY29udHJvbGxlcihcIlVpYlllYXJwaWNrZXJDb250cm9sbGVyXCIsW1wiJHNjb3BlXCIsXCIkZWxlbWVudFwiLFwiZGF0ZUZpbHRlclwiLGZ1bmN0aW9uKGEsYixjKXtmdW5jdGlvbiBkKGEpe3JldHVybiBwYXJzZUludCgoYS0xKS9mLDEwKSpmKzF9dmFyIGUsZjt0aGlzLmVsZW1lbnQ9Yix0aGlzLnllYXJwaWNrZXJJbml0PWZ1bmN0aW9uKCl7ZT10aGlzLnllYXJDb2x1bW5zLGY9dGhpcy55ZWFyUm93cyplLHRoaXMuc3RlcD17eWVhcnM6Zn19LHRoaXMuX3JlZnJlc2hWaWV3PWZ1bmN0aW9uKCl7Zm9yKHZhciBiLGM9bmV3IEFycmF5KGYpLGc9MCxoPWQodGhpcy5hY3RpdmVEYXRlLmdldEZ1bGxZZWFyKCkpO2Y+ZztnKyspYj1uZXcgRGF0ZSh0aGlzLmFjdGl2ZURhdGUpLGIuc2V0RnVsbFllYXIoaCtnLDAsMSksY1tnXT1hbmd1bGFyLmV4dGVuZCh0aGlzLmNyZWF0ZURhdGVPYmplY3QoYix0aGlzLmZvcm1hdFllYXIpLHt1aWQ6YS51bmlxdWVJZCtcIi1cIitnfSk7YS50aXRsZT1bY1swXS5sYWJlbCxjW2YtMV0ubGFiZWxdLmpvaW4oXCIgLSBcIiksYS5yb3dzPXRoaXMuc3BsaXQoYyxlKSxhLmNvbHVtbnM9ZX0sdGhpcy5jb21wYXJlPWZ1bmN0aW9uKGEsYil7cmV0dXJuIGEuZ2V0RnVsbFllYXIoKS1iLmdldEZ1bGxZZWFyKCl9LHRoaXMuaGFuZGxlS2V5RG93bj1mdW5jdGlvbihhLGIpe3ZhciBjPXRoaXMuYWN0aXZlRGF0ZS5nZXRGdWxsWWVhcigpO1wibGVmdFwiPT09YT9jLT0xOlwidXBcIj09PWE/Yy09ZTpcInJpZ2h0XCI9PT1hP2MrPTE6XCJkb3duXCI9PT1hP2MrPWU6XCJwYWdldXBcIj09PWF8fFwicGFnZWRvd25cIj09PWE/Yys9KFwicGFnZXVwXCI9PT1hPy0xOjEpKmY6XCJob21lXCI9PT1hP2M9ZCh0aGlzLmFjdGl2ZURhdGUuZ2V0RnVsbFllYXIoKSk6XCJlbmRcIj09PWEmJihjPWQodGhpcy5hY3RpdmVEYXRlLmdldEZ1bGxZZWFyKCkpK2YtMSksdGhpcy5hY3RpdmVEYXRlLnNldEZ1bGxZZWFyKGMpfX1dKS5kaXJlY3RpdmUoXCJ1aWJEYXRlcGlja2VyXCIsZnVuY3Rpb24oKXtyZXR1cm57cmVwbGFjZTohMCx0ZW1wbGF0ZVVybDpmdW5jdGlvbihhLGIpe3JldHVybiBiLnRlbXBsYXRlVXJsfHxcInVpYi90ZW1wbGF0ZS9kYXRlcGlja2VyL2RhdGVwaWNrZXIuaHRtbFwifSxzY29wZTp7ZGF0ZXBpY2tlck1vZGU6XCI9P1wiLGRhdGVEaXNhYmxlZDpcIiZcIixjdXN0b21DbGFzczpcIiZcIixzaG9ydGN1dFByb3BhZ2F0aW9uOlwiJj9cIn0scmVxdWlyZTpbXCJ1aWJEYXRlcGlja2VyXCIsXCJebmdNb2RlbFwiXSxjb250cm9sbGVyOlwiVWliRGF0ZXBpY2tlckNvbnRyb2xsZXJcIixjb250cm9sbGVyQXM6XCJkYXRlcGlja2VyXCIsbGluazpmdW5jdGlvbihhLGIsYyxkKXt2YXIgZT1kWzBdLGY9ZFsxXTtlLmluaXQoZil9fX0pLmRpcmVjdGl2ZShcInVpYkRheXBpY2tlclwiLGZ1bmN0aW9uKCl7cmV0dXJue3JlcGxhY2U6ITAsdGVtcGxhdGVVcmw6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gYi50ZW1wbGF0ZVVybHx8XCJ1aWIvdGVtcGxhdGUvZGF0ZXBpY2tlci9kYXkuaHRtbFwifSxyZXF1aXJlOltcIl51aWJEYXRlcGlja2VyXCIsXCJ1aWJEYXlwaWNrZXJcIl0sY29udHJvbGxlcjpcIlVpYkRheXBpY2tlckNvbnRyb2xsZXJcIixsaW5rOmZ1bmN0aW9uKGEsYixjLGQpe3ZhciBlPWRbMF0sZj1kWzFdO2YuaW5pdChlKX19fSkuZGlyZWN0aXZlKFwidWliTW9udGhwaWNrZXJcIixmdW5jdGlvbigpe3JldHVybntyZXBsYWNlOiEwLHRlbXBsYXRlVXJsOmZ1bmN0aW9uKGEsYil7cmV0dXJuIGIudGVtcGxhdGVVcmx8fFwidWliL3RlbXBsYXRlL2RhdGVwaWNrZXIvbW9udGguaHRtbFwifSxyZXF1aXJlOltcIl51aWJEYXRlcGlja2VyXCIsXCJ1aWJNb250aHBpY2tlclwiXSxjb250cm9sbGVyOlwiVWliTW9udGhwaWNrZXJDb250cm9sbGVyXCIsbGluazpmdW5jdGlvbihhLGIsYyxkKXt2YXIgZT1kWzBdLGY9ZFsxXTtmLmluaXQoZSl9fX0pLmRpcmVjdGl2ZShcInVpYlllYXJwaWNrZXJcIixmdW5jdGlvbigpe3JldHVybntyZXBsYWNlOiEwLHRlbXBsYXRlVXJsOmZ1bmN0aW9uKGEsYil7XHJcbnJldHVybiBiLnRlbXBsYXRlVXJsfHxcInVpYi90ZW1wbGF0ZS9kYXRlcGlja2VyL3llYXIuaHRtbFwifSxyZXF1aXJlOltcIl51aWJEYXRlcGlja2VyXCIsXCJ1aWJZZWFycGlja2VyXCJdLGNvbnRyb2xsZXI6XCJVaWJZZWFycGlja2VyQ29udHJvbGxlclwiLGxpbms6ZnVuY3Rpb24oYSxiLGMsZCl7dmFyIGU9ZFswXTthbmd1bGFyLmV4dGVuZChlLGRbMV0pLGUueWVhcnBpY2tlckluaXQoKSxlLnJlZnJlc2hWaWV3KCl9fX0pLmNvbnN0YW50KFwidWliRGF0ZXBpY2tlclBvcHVwQ29uZmlnXCIse2RhdGVwaWNrZXJQb3B1cDpcInl5eXktTU0tZGRcIixkYXRlcGlja2VyUG9wdXBUZW1wbGF0ZVVybDpcInVpYi90ZW1wbGF0ZS9kYXRlcGlja2VyL3BvcHVwLmh0bWxcIixkYXRlcGlja2VyVGVtcGxhdGVVcmw6XCJ1aWIvdGVtcGxhdGUvZGF0ZXBpY2tlci9kYXRlcGlja2VyLmh0bWxcIixodG1sNVR5cGVzOntkYXRlOlwieXl5eS1NTS1kZFwiLFwiZGF0ZXRpbWUtbG9jYWxcIjpcInl5eXktTU0tZGRUSEg6bW06c3Muc3NzXCIsbW9udGg6XCJ5eXl5LU1NXCJ9LGN1cnJlbnRUZXh0OlwiVG9kYXlcIixjbGVhclRleHQ6XCJDbGVhclwiLGNsb3NlVGV4dDpcIkRvbmVcIixjbG9zZU9uRGF0ZVNlbGVjdGlvbjohMCxhcHBlbmRUb0JvZHk6ITEsc2hvd0J1dHRvbkJhcjohMCxvbk9wZW5Gb2N1czohMCxhbHRJbnB1dEZvcm1hdHM6W119KS5jb250cm9sbGVyKFwiVWliRGF0ZXBpY2tlclBvcHVwQ29udHJvbGxlclwiLFtcIiRzY29wZVwiLFwiJGVsZW1lbnRcIixcIiRhdHRyc1wiLFwiJGNvbXBpbGVcIixcIiRwYXJzZVwiLFwiJGRvY3VtZW50XCIsXCIkcm9vdFNjb3BlXCIsXCIkdWliUG9zaXRpb25cIixcImRhdGVGaWx0ZXJcIixcInVpYkRhdGVQYXJzZXJcIixcInVpYkRhdGVwaWNrZXJQb3B1cENvbmZpZ1wiLFwiJHRpbWVvdXRcIixcInVpYkRhdGVwaWNrZXJDb25maWdcIixmdW5jdGlvbihhLGIsYyxkLGUsZixnLGgsaSxqLGssbCxtKXtmdW5jdGlvbiBuKGEpe3JldHVybiBhLnJlcGxhY2UoLyhbQS1aXSkvZyxmdW5jdGlvbihhKXtyZXR1cm5cIi1cIithLnRvTG93ZXJDYXNlKCl9KX1mdW5jdGlvbiBvKGIpe3ZhciBjPWoucGFyc2UoYix0LGEuZGF0ZSk7aWYoaXNOYU4oYykpZm9yKHZhciBkPTA7ZDxFLmxlbmd0aDtkKyspaWYoYz1qLnBhcnNlKGIsRVtkXSxhLmRhdGUpLCFpc05hTihjKSlyZXR1cm4gYztyZXR1cm4gY31mdW5jdGlvbiBwKGEpe2lmKGFuZ3VsYXIuaXNOdW1iZXIoYSkmJihhPW5ldyBEYXRlKGEpKSwhYSlyZXR1cm4gbnVsbDtpZihhbmd1bGFyLmlzRGF0ZShhKSYmIWlzTmFOKGEpKXJldHVybiBhO2lmKGFuZ3VsYXIuaXNTdHJpbmcoYSkpe3ZhciBiPW8oYSk7aWYoIWlzTmFOKGIpKXJldHVybiBqLnRvVGltZXpvbmUoYixDLnRpbWV6b25lKX1yZXR1cm4gQi4kb3B0aW9ucyYmQi4kb3B0aW9ucy5hbGxvd0ludmFsaWQ/YTp2b2lkIDB9ZnVuY3Rpb24gcShhLGIpe3ZhciBkPWF8fGI7cmV0dXJuIGMubmdSZXF1aXJlZHx8ZD8oYW5ndWxhci5pc051bWJlcihkKSYmKGQ9bmV3IERhdGUoZCkpLGQ/YW5ndWxhci5pc0RhdGUoZCkmJiFpc05hTihkKT8hMDphbmd1bGFyLmlzU3RyaW5nKGQpPyFpc05hTihvKGIpKTohMTohMCk6ITB9ZnVuY3Rpb24gcihjKXtpZihhLmlzT3Blbnx8IWEuZGlzYWJsZWQpe3ZhciBkPURbMF0sZT1iWzBdLmNvbnRhaW5zKGMudGFyZ2V0KSxmPXZvaWQgMCE9PWQuY29udGFpbnMmJmQuY29udGFpbnMoYy50YXJnZXQpOyFhLmlzT3Blbnx8ZXx8Znx8YS4kYXBwbHkoZnVuY3Rpb24oKXthLmlzT3Blbj0hMX0pfX1mdW5jdGlvbiBzKGMpezI3PT09Yy53aGljaCYmYS5pc09wZW4/KGMucHJldmVudERlZmF1bHQoKSxjLnN0b3BQcm9wYWdhdGlvbigpLGEuJGFwcGx5KGZ1bmN0aW9uKCl7YS5pc09wZW49ITF9KSxiWzBdLmZvY3VzKCkpOjQwIT09Yy53aGljaHx8YS5pc09wZW58fChjLnByZXZlbnREZWZhdWx0KCksYy5zdG9wUHJvcGFnYXRpb24oKSxhLiRhcHBseShmdW5jdGlvbigpe2EuaXNPcGVuPSEwfSkpfXZhciB0LHUsdix3LHgseSx6LEEsQixDLEQsRSxGPXt9LEc9ITE7YS53YXRjaERhdGE9e30sdGhpcy5pbml0PWZ1bmN0aW9uKGgpe2lmKEI9aCxDPWguJG9wdGlvbnN8fG0ubmdNb2RlbE9wdGlvbnMsdT1hbmd1bGFyLmlzRGVmaW5lZChjLmNsb3NlT25EYXRlU2VsZWN0aW9uKT9hLiRwYXJlbnQuJGV2YWwoYy5jbG9zZU9uRGF0ZVNlbGVjdGlvbik6ay5jbG9zZU9uRGF0ZVNlbGVjdGlvbix2PWFuZ3VsYXIuaXNEZWZpbmVkKGMuZGF0ZXBpY2tlckFwcGVuZFRvQm9keSk/YS4kcGFyZW50LiRldmFsKGMuZGF0ZXBpY2tlckFwcGVuZFRvQm9keSk6ay5hcHBlbmRUb0JvZHksdz1hbmd1bGFyLmlzRGVmaW5lZChjLm9uT3BlbkZvY3VzKT9hLiRwYXJlbnQuJGV2YWwoYy5vbk9wZW5Gb2N1cyk6ay5vbk9wZW5Gb2N1cyx4PWFuZ3VsYXIuaXNEZWZpbmVkKGMuZGF0ZXBpY2tlclBvcHVwVGVtcGxhdGVVcmwpP2MuZGF0ZXBpY2tlclBvcHVwVGVtcGxhdGVVcmw6ay5kYXRlcGlja2VyUG9wdXBUZW1wbGF0ZVVybCx5PWFuZ3VsYXIuaXNEZWZpbmVkKGMuZGF0ZXBpY2tlclRlbXBsYXRlVXJsKT9jLmRhdGVwaWNrZXJUZW1wbGF0ZVVybDprLmRhdGVwaWNrZXJUZW1wbGF0ZVVybCxFPWFuZ3VsYXIuaXNEZWZpbmVkKGMuYWx0SW5wdXRGb3JtYXRzKT9hLiRwYXJlbnQuJGV2YWwoYy5hbHRJbnB1dEZvcm1hdHMpOmsuYWx0SW5wdXRGb3JtYXRzLGEuc2hvd0J1dHRvbkJhcj1hbmd1bGFyLmlzRGVmaW5lZChjLnNob3dCdXR0b25CYXIpP2EuJHBhcmVudC4kZXZhbChjLnNob3dCdXR0b25CYXIpOmsuc2hvd0J1dHRvbkJhcixrLmh0bWw1VHlwZXNbYy50eXBlXT8odD1rLmh0bWw1VHlwZXNbYy50eXBlXSxHPSEwKToodD1jLnVpYkRhdGVwaWNrZXJQb3B1cHx8ay5kYXRlcGlja2VyUG9wdXAsYy4kb2JzZXJ2ZShcInVpYkRhdGVwaWNrZXJQb3B1cFwiLGZ1bmN0aW9uKGEsYil7dmFyIGM9YXx8ay5kYXRlcGlja2VyUG9wdXA7aWYoYyE9PXQmJih0PWMsQi4kbW9kZWxWYWx1ZT1udWxsLCF0KSl0aHJvdyBuZXcgRXJyb3IoXCJ1aWJEYXRlcGlja2VyUG9wdXAgbXVzdCBoYXZlIGEgZGF0ZSBmb3JtYXQgc3BlY2lmaWVkLlwiKX0pKSwhdCl0aHJvdyBuZXcgRXJyb3IoXCJ1aWJEYXRlcGlja2VyUG9wdXAgbXVzdCBoYXZlIGEgZGF0ZSBmb3JtYXQgc3BlY2lmaWVkLlwiKTtpZihHJiZjLnVpYkRhdGVwaWNrZXJQb3B1cCl0aHJvdyBuZXcgRXJyb3IoXCJIVE1MNSBkYXRlIGlucHV0IHR5cGVzIGRvIG5vdCBzdXBwb3J0IGN1c3RvbSBmb3JtYXRzLlwiKTtpZih6PWFuZ3VsYXIuZWxlbWVudChcIjxkaXYgdWliLWRhdGVwaWNrZXItcG9wdXAtd3JhcD48ZGl2IHVpYi1kYXRlcGlja2VyPjwvZGl2PjwvZGl2PlwiKSxhLm5nTW9kZWxPcHRpb25zPWFuZ3VsYXIuY29weShDKSxhLm5nTW9kZWxPcHRpb25zLnRpbWV6b25lPW51bGwsei5hdHRyKHtcIm5nLW1vZGVsXCI6XCJkYXRlXCIsXCJuZy1tb2RlbC1vcHRpb25zXCI6XCJuZ01vZGVsT3B0aW9uc1wiLFwibmctY2hhbmdlXCI6XCJkYXRlU2VsZWN0aW9uKGRhdGUpXCIsXCJ0ZW1wbGF0ZS11cmxcIjp4fSksQT1hbmd1bGFyLmVsZW1lbnQoei5jaGlsZHJlbigpWzBdKSxBLmF0dHIoXCJ0ZW1wbGF0ZS11cmxcIix5KSxHJiZcIm1vbnRoXCI9PT1jLnR5cGUmJihBLmF0dHIoXCJkYXRlcGlja2VyLW1vZGVcIiwnXCJtb250aFwiJyksQS5hdHRyKFwibWluLW1vZGVcIixcIm1vbnRoXCIpKSxjLmRhdGVwaWNrZXJPcHRpb25zKXt2YXIgbD1hLiRwYXJlbnQuJGV2YWwoYy5kYXRlcGlja2VyT3B0aW9ucyk7bCYmbC5pbml0RGF0ZSYmKGEuaW5pdERhdGU9ai5mcm9tVGltZXpvbmUobC5pbml0RGF0ZSxDLnRpbWV6b25lKSxBLmF0dHIoXCJpbml0LWRhdGVcIixcImluaXREYXRlXCIpLGRlbGV0ZSBsLmluaXREYXRlKSxhbmd1bGFyLmZvckVhY2gobCxmdW5jdGlvbihhLGIpe0EuYXR0cihuKGIpLGEpfSl9YW5ndWxhci5mb3JFYWNoKFtcIm1pbk1vZGVcIixcIm1heE1vZGVcIl0sZnVuY3Rpb24oYil7Y1tiXSYmKGEuJHBhcmVudC4kd2F0Y2goZnVuY3Rpb24oKXtyZXR1cm4gY1tiXX0sZnVuY3Rpb24oYyl7YS53YXRjaERhdGFbYl09Y30pLEEuYXR0cihuKGIpLFwid2F0Y2hEYXRhLlwiK2IpKX0pLGFuZ3VsYXIuZm9yRWFjaChbXCJkYXRlcGlja2VyTW9kZVwiLFwic2hvcnRjdXRQcm9wYWdhdGlvblwiXSxmdW5jdGlvbihiKXtpZihjW2JdKXt2YXIgZD1lKGNbYl0pLGY9e2dldDpmdW5jdGlvbigpe3JldHVybiBkKGEuJHBhcmVudCl9fTtpZihBLmF0dHIobihiKSxcIndhdGNoRGF0YS5cIitiKSxcImRhdGVwaWNrZXJNb2RlXCI9PT1iKXt2YXIgZz1kLmFzc2lnbjtmLnNldD1mdW5jdGlvbihiKXtnKGEuJHBhcmVudCxiKX19T2JqZWN0LmRlZmluZVByb3BlcnR5KGEud2F0Y2hEYXRhLGIsZil9fSksYW5ndWxhci5mb3JFYWNoKFtcIm1pbkRhdGVcIixcIm1heERhdGVcIixcImluaXREYXRlXCJdLGZ1bmN0aW9uKGIpe2lmKGNbYl0pe3ZhciBkPWUoY1tiXSk7YS4kcGFyZW50LiR3YXRjaChkLGZ1bmN0aW9uKGMpeyhcIm1pbkRhdGVcIj09PWJ8fFwibWF4RGF0ZVwiPT09YikmJihGW2JdPWFuZ3VsYXIuaXNEYXRlKGMpP2ouZnJvbVRpbWV6b25lKG5ldyBEYXRlKGMpLEMudGltZXpvbmUpOm5ldyBEYXRlKGkoYyxcIm1lZGl1bVwiKSkpLGEud2F0Y2hEYXRhW2JdPUZbYl18fGouZnJvbVRpbWV6b25lKG5ldyBEYXRlKGMpLEMudGltZXpvbmUpfSksQS5hdHRyKG4oYiksXCJ3YXRjaERhdGEuXCIrYil9fSksYy5kYXRlRGlzYWJsZWQmJkEuYXR0cihcImRhdGUtZGlzYWJsZWRcIixcImRhdGVEaXNhYmxlZCh7IGRhdGU6IGRhdGUsIG1vZGU6IG1vZGUgfSlcIiksYW5ndWxhci5mb3JFYWNoKFtcImZvcm1hdERheVwiLFwiZm9ybWF0TW9udGhcIixcImZvcm1hdFllYXJcIixcImZvcm1hdERheUhlYWRlclwiLFwiZm9ybWF0RGF5VGl0bGVcIixcImZvcm1hdE1vbnRoVGl0bGVcIixcInNob3dXZWVrc1wiLFwic3RhcnRpbmdEYXlcIixcInllYXJSb3dzXCIsXCJ5ZWFyQ29sdW1uc1wiXSxmdW5jdGlvbihhKXthbmd1bGFyLmlzRGVmaW5lZChjW2FdKSYmQS5hdHRyKG4oYSksY1thXSl9KSxjLmN1c3RvbUNsYXNzJiZBLmF0dHIoXCJjdXN0b20tY2xhc3NcIixcImN1c3RvbUNsYXNzKHsgZGF0ZTogZGF0ZSwgbW9kZTogbW9kZSB9KVwiKSxHP0IuJGZvcm1hdHRlcnMucHVzaChmdW5jdGlvbihiKXtyZXR1cm4gYS5kYXRlPWouZnJvbVRpbWV6b25lKGIsQy50aW1lem9uZSksYn0pOihCLiQkcGFyc2VyTmFtZT1cImRhdGVcIixCLiR2YWxpZGF0b3JzLmRhdGU9cSxCLiRwYXJzZXJzLnVuc2hpZnQocCksQi4kZm9ybWF0dGVycy5wdXNoKGZ1bmN0aW9uKGIpe3JldHVybiBCLiRpc0VtcHR5KGIpPyhhLmRhdGU9YixiKTooYS5kYXRlPWouZnJvbVRpbWV6b25lKGIsQy50aW1lem9uZSksdD10LnJlcGxhY2UoL00hLyxcIk1NXCIpLnJlcGxhY2UoL2QhLyxcImRkXCIpLGkoYS5kYXRlLHQpKX0pKSxCLiR2aWV3Q2hhbmdlTGlzdGVuZXJzLnB1c2goZnVuY3Rpb24oKXthLmRhdGU9byhCLiR2aWV3VmFsdWUpfSksYi5iaW5kKFwia2V5ZG93blwiLHMpLEQ9ZCh6KShhKSx6LnJlbW92ZSgpLHY/Zi5maW5kKFwiYm9keVwiKS5hcHBlbmQoRCk6Yi5hZnRlcihEKSxhLiRvbihcIiRkZXN0cm95XCIsZnVuY3Rpb24oKXthLmlzT3Blbj09PSEwJiYoZy4kJHBoYXNlfHxhLiRhcHBseShmdW5jdGlvbigpe2EuaXNPcGVuPSExfSkpLEQucmVtb3ZlKCksYi51bmJpbmQoXCJrZXlkb3duXCIscyksZi51bmJpbmQoXCJjbGlja1wiLHIpfSl9LGEuZ2V0VGV4dD1mdW5jdGlvbihiKXtyZXR1cm4gYVtiK1wiVGV4dFwiXXx8a1tiK1wiVGV4dFwiXX0sYS5pc0Rpc2FibGVkPWZ1bmN0aW9uKGIpe3JldHVyblwidG9kYXlcIj09PWImJihiPW5ldyBEYXRlKSxhLndhdGNoRGF0YS5taW5EYXRlJiZhLmNvbXBhcmUoYixGLm1pbkRhdGUpPDB8fGEud2F0Y2hEYXRhLm1heERhdGUmJmEuY29tcGFyZShiLEYubWF4RGF0ZSk+MH0sYS5jb21wYXJlPWZ1bmN0aW9uKGEsYil7cmV0dXJuIG5ldyBEYXRlKGEuZ2V0RnVsbFllYXIoKSxhLmdldE1vbnRoKCksYS5nZXREYXRlKCkpLW5ldyBEYXRlKGIuZ2V0RnVsbFllYXIoKSxiLmdldE1vbnRoKCksYi5nZXREYXRlKCkpfSxhLmRhdGVTZWxlY3Rpb249ZnVuY3Rpb24oYyl7YW5ndWxhci5pc0RlZmluZWQoYykmJihhLmRhdGU9Yyk7dmFyIGQ9YS5kYXRlP2koYS5kYXRlLHQpOm51bGw7Yi52YWwoZCksQi4kc2V0Vmlld1ZhbHVlKGQpLHUmJihhLmlzT3Blbj0hMSxiWzBdLmZvY3VzKCkpfSxhLmtleWRvd249ZnVuY3Rpb24oYyl7Mjc9PT1jLndoaWNoJiYoYy5zdG9wUHJvcGFnYXRpb24oKSxhLmlzT3Blbj0hMSxiWzBdLmZvY3VzKCkpfSxhLnNlbGVjdD1mdW5jdGlvbihiKXtpZihcInRvZGF5XCI9PT1iKXt2YXIgYz1uZXcgRGF0ZTthbmd1bGFyLmlzRGF0ZShhLmRhdGUpPyhiPW5ldyBEYXRlKGEuZGF0ZSksYi5zZXRGdWxsWWVhcihjLmdldEZ1bGxZZWFyKCksYy5nZXRNb250aCgpLGMuZ2V0RGF0ZSgpKSk6Yj1uZXcgRGF0ZShjLnNldEhvdXJzKDAsMCwwLDApKX1hLmRhdGVTZWxlY3Rpb24oYil9LGEuY2xvc2U9ZnVuY3Rpb24oKXthLmlzT3Blbj0hMSxiWzBdLmZvY3VzKCl9LGEuZGlzYWJsZWQ9YW5ndWxhci5pc0RlZmluZWQoYy5kaXNhYmxlZCl8fCExLGMubmdEaXNhYmxlZCYmYS4kcGFyZW50LiR3YXRjaChlKGMubmdEaXNhYmxlZCksZnVuY3Rpb24oYil7YS5kaXNhYmxlZD1ifSksYS4kd2F0Y2goXCJpc09wZW5cIixmdW5jdGlvbihjKXtjP2EuZGlzYWJsZWQ/YS5pc09wZW49ITE6KGEucG9zaXRpb249dj9oLm9mZnNldChiKTpoLnBvc2l0aW9uKGIpLGEucG9zaXRpb24udG9wPWEucG9zaXRpb24udG9wK2IucHJvcChcIm9mZnNldEhlaWdodFwiKSxsKGZ1bmN0aW9uKCl7dyYmYS4kYnJvYWRjYXN0KFwidWliOmRhdGVwaWNrZXIuZm9jdXNcIiksZi5iaW5kKFwiY2xpY2tcIixyKX0sMCwhMSkpOmYudW5iaW5kKFwiY2xpY2tcIixyKX0pfV0pLmRpcmVjdGl2ZShcInVpYkRhdGVwaWNrZXJQb3B1cFwiLGZ1bmN0aW9uKCl7cmV0dXJue3JlcXVpcmU6W1wibmdNb2RlbFwiLFwidWliRGF0ZXBpY2tlclBvcHVwXCJdLGNvbnRyb2xsZXI6XCJVaWJEYXRlcGlja2VyUG9wdXBDb250cm9sbGVyXCIsc2NvcGU6e2lzT3BlbjpcIj0/XCIsY3VycmVudFRleHQ6XCJAXCIsY2xlYXJUZXh0OlwiQFwiLGNsb3NlVGV4dDpcIkBcIixkYXRlRGlzYWJsZWQ6XCImXCIsY3VzdG9tQ2xhc3M6XCImXCJ9LGxpbms6ZnVuY3Rpb24oYSxiLGMsZCl7dmFyIGU9ZFswXSxmPWRbMV07Zi5pbml0KGUpfX19KS5kaXJlY3RpdmUoXCJ1aWJEYXRlcGlja2VyUG9wdXBXcmFwXCIsZnVuY3Rpb24oKXtyZXR1cm57cmVwbGFjZTohMCx0cmFuc2NsdWRlOiEwLHRlbXBsYXRlVXJsOmZ1bmN0aW9uKGEsYil7cmV0dXJuIGIudGVtcGxhdGVVcmx8fFwidWliL3RlbXBsYXRlL2RhdGVwaWNrZXIvcG9wdXAuaHRtbFwifX19KSxhbmd1bGFyLm1vZHVsZShcInVpLmJvb3RzdHJhcC5kZWJvdW5jZVwiLFtdKS5mYWN0b3J5KFwiJCRkZWJvdW5jZVwiLFtcIiR0aW1lb3V0XCIsZnVuY3Rpb24oYSl7cmV0dXJuIGZ1bmN0aW9uKGIsYyl7dmFyIGQ7cmV0dXJuIGZ1bmN0aW9uKCl7dmFyIGU9dGhpcyxmPUFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cyk7ZCYmYS5jYW5jZWwoZCksZD1hKGZ1bmN0aW9uKCl7Yi5hcHBseShlLGYpfSxjKX19fV0pLGFuZ3VsYXIubW9kdWxlKFwidWkuYm9vdHN0cmFwLmRyb3Bkb3duXCIsW1widWkuYm9vdHN0cmFwLnBvc2l0aW9uXCJdKS5jb25zdGFudChcInVpYkRyb3Bkb3duQ29uZmlnXCIse2FwcGVuZFRvT3BlbkNsYXNzOlwidWliLWRyb3Bkb3duLW9wZW5cIixvcGVuQ2xhc3M6XCJvcGVuXCJ9KS5zZXJ2aWNlKFwidWliRHJvcGRvd25TZXJ2aWNlXCIsW1wiJGRvY3VtZW50XCIsXCIkcm9vdFNjb3BlXCIsZnVuY3Rpb24oYSxiKXt2YXIgYz1udWxsO3RoaXMub3Blbj1mdW5jdGlvbihiKXtjfHwoYS5vbihcImNsaWNrXCIsZCksYS5vbihcImtleWRvd25cIixlKSksYyYmYyE9PWImJihjLmlzT3Blbj0hMSksYz1ifSx0aGlzLmNsb3NlPWZ1bmN0aW9uKGIpe2M9PT1iJiYoYz1udWxsLGEub2ZmKFwiY2xpY2tcIixkKSxhLm9mZihcImtleWRvd25cIixlKSl9O3ZhciBkPWZ1bmN0aW9uKGEpe2lmKGMmJiEoYSYmXCJkaXNhYmxlZFwiPT09Yy5nZXRBdXRvQ2xvc2UoKXx8YSYmMz09PWEud2hpY2gpKXt2YXIgZD1jLmdldFRvZ2dsZUVsZW1lbnQoKTtpZighKGEmJmQmJmRbMF0uY29udGFpbnMoYS50YXJnZXQpKSl7dmFyIGU9Yy5nZXREcm9wZG93bkVsZW1lbnQoKTthJiZcIm91dHNpZGVDbGlja1wiPT09Yy5nZXRBdXRvQ2xvc2UoKSYmZSYmZVswXS5jb250YWlucyhhLnRhcmdldCl8fChjLmlzT3Blbj0hMSxiLiQkcGhhc2V8fGMuJGFwcGx5KCkpfX19LGU9ZnVuY3Rpb24oYSl7Mjc9PT1hLndoaWNoPyhjLmZvY3VzVG9nZ2xlRWxlbWVudCgpLGQoKSk6Yy5pc0tleW5hdkVuYWJsZWQoKSYmLTEhPT1bMzgsNDBdLmluZGV4T2YoYS53aGljaCkmJmMuaXNPcGVuJiYoYS5wcmV2ZW50RGVmYXVsdCgpLGEuc3RvcFByb3BhZ2F0aW9uKCksYy5mb2N1c0Ryb3Bkb3duRW50cnkoYS53aGljaCkpfX1dKS5jb250cm9sbGVyKFwiVWliRHJvcGRvd25Db250cm9sbGVyXCIsW1wiJHNjb3BlXCIsXCIkZWxlbWVudFwiLFwiJGF0dHJzXCIsXCIkcGFyc2VcIixcInVpYkRyb3Bkb3duQ29uZmlnXCIsXCJ1aWJEcm9wZG93blNlcnZpY2VcIixcIiRhbmltYXRlXCIsXCIkdWliUG9zaXRpb25cIixcIiRkb2N1bWVudFwiLFwiJGNvbXBpbGVcIixcIiR0ZW1wbGF0ZVJlcXVlc3RcIixmdW5jdGlvbihhLGIsYyxkLGUsZixnLGgsaSxqLGspe3ZhciBsLG0sbj10aGlzLG89YS4kbmV3KCkscD1lLmFwcGVuZFRvT3BlbkNsYXNzLHE9ZS5vcGVuQ2xhc3Mscj1hbmd1bGFyLm5vb3Ascz1jLm9uVG9nZ2xlP2QoYy5vblRvZ2dsZSk6YW5ndWxhci5ub29wLHQ9ITEsdT1udWxsLHY9ITEsdz1pLmZpbmQoXCJib2R5XCIpO2IuYWRkQ2xhc3MoXCJkcm9wZG93blwiKSx0aGlzLmluaXQ9ZnVuY3Rpb24oKXtpZihjLmlzT3BlbiYmKG09ZChjLmlzT3Blbikscj1tLmFzc2lnbixhLiR3YXRjaChtLGZ1bmN0aW9uKGEpe28uaXNPcGVuPSEhYX0pKSxhbmd1bGFyLmlzRGVmaW5lZChjLmRyb3Bkb3duQXBwZW5kVG8pKXt2YXIgZT1kKGMuZHJvcGRvd25BcHBlbmRUbykobyk7ZSYmKHU9YW5ndWxhci5lbGVtZW50KGUpKX10PWFuZ3VsYXIuaXNEZWZpbmVkKGMuZHJvcGRvd25BcHBlbmRUb0JvZHkpLHY9YW5ndWxhci5pc0RlZmluZWQoYy5rZXlib2FyZE5hdiksdCYmIXUmJih1PXcpLHUmJm4uZHJvcGRvd25NZW51JiYodS5hcHBlbmQobi5kcm9wZG93bk1lbnUpLGIub24oXCIkZGVzdHJveVwiLGZ1bmN0aW9uKCl7bi5kcm9wZG93bk1lbnUucmVtb3ZlKCl9KSl9LHRoaXMudG9nZ2xlPWZ1bmN0aW9uKGEpe3JldHVybiBvLmlzT3Blbj1hcmd1bWVudHMubGVuZ3RoPyEhYTohby5pc09wZW59LHRoaXMuaXNPcGVuPWZ1bmN0aW9uKCl7cmV0dXJuIG8uaXNPcGVufSxvLmdldFRvZ2dsZUVsZW1lbnQ9ZnVuY3Rpb24oKXtyZXR1cm4gbi50b2dnbGVFbGVtZW50fSxvLmdldEF1dG9DbG9zZT1mdW5jdGlvbigpe3JldHVybiBjLmF1dG9DbG9zZXx8XCJhbHdheXNcIn0sby5nZXRFbGVtZW50PWZ1bmN0aW9uKCl7cmV0dXJuIGJ9LG8uaXNLZXluYXZFbmFibGVkPWZ1bmN0aW9uKCl7cmV0dXJuIHZ9LG8uZm9jdXNEcm9wZG93bkVudHJ5PWZ1bmN0aW9uKGEpe3ZhciBjPW4uZHJvcGRvd25NZW51P2FuZ3VsYXIuZWxlbWVudChuLmRyb3Bkb3duTWVudSkuZmluZChcImFcIik6Yi5maW5kKFwidWxcIikuZXEoMCkuZmluZChcImFcIik7c3dpdGNoKGEpe2Nhc2UgNDA6YW5ndWxhci5pc051bWJlcihuLnNlbGVjdGVkT3B0aW9uKT9uLnNlbGVjdGVkT3B0aW9uPW4uc2VsZWN0ZWRPcHRpb249PT1jLmxlbmd0aC0xP24uc2VsZWN0ZWRPcHRpb246bi5zZWxlY3RlZE9wdGlvbisxOm4uc2VsZWN0ZWRPcHRpb249MDticmVhaztjYXNlIDM4OmFuZ3VsYXIuaXNOdW1iZXIobi5zZWxlY3RlZE9wdGlvbik/bi5zZWxlY3RlZE9wdGlvbj0wPT09bi5zZWxlY3RlZE9wdGlvbj8wOm4uc2VsZWN0ZWRPcHRpb24tMTpuLnNlbGVjdGVkT3B0aW9uPWMubGVuZ3RoLTF9Y1tuLnNlbGVjdGVkT3B0aW9uXS5mb2N1cygpfSxvLmdldERyb3Bkb3duRWxlbWVudD1mdW5jdGlvbigpe3JldHVybiBuLmRyb3Bkb3duTWVudX0sby5mb2N1c1RvZ2dsZUVsZW1lbnQ9ZnVuY3Rpb24oKXtuLnRvZ2dsZUVsZW1lbnQmJm4udG9nZ2xlRWxlbWVudFswXS5mb2N1cygpfSxvLiR3YXRjaChcImlzT3BlblwiLGZ1bmN0aW9uKGMsZCl7aWYodSYmbi5kcm9wZG93bk1lbnUpe3ZhciBlLGksbT1oLnBvc2l0aW9uRWxlbWVudHMoYixuLmRyb3Bkb3duTWVudSxcImJvdHRvbS1sZWZ0XCIsITApO2lmKGU9e3RvcDptLnRvcCtcInB4XCIsZGlzcGxheTpjP1wiYmxvY2tcIjpcIm5vbmVcIn0saT1uLmRyb3Bkb3duTWVudS5oYXNDbGFzcyhcImRyb3Bkb3duLW1lbnUtcmlnaHRcIiksaT8oZS5sZWZ0PVwiYXV0b1wiLGUucmlnaHQ9d2luZG93LmlubmVyV2lkdGgtKG0ubGVmdCtiLnByb3AoXCJvZmZzZXRXaWR0aFwiKSkrXCJweFwiKTooZS5sZWZ0PW0ubGVmdCtcInB4XCIsZS5yaWdodD1cImF1dG9cIiksIXQpe3ZhciB2PWgub2Zmc2V0KHUpO2UudG9wPW0udG9wLXYudG9wK1wicHhcIixpP2UucmlnaHQ9d2luZG93LmlubmVyV2lkdGgtKG0ubGVmdC12LmxlZnQrYi5wcm9wKFwib2Zmc2V0V2lkdGhcIikpK1wicHhcIjplLmxlZnQ9bS5sZWZ0LXYubGVmdCtcInB4XCJ9bi5kcm9wZG93bk1lbnUuY3NzKGUpfXZhciB3PXU/dTpiO2lmKGdbYz9cImFkZENsYXNzXCI6XCJyZW1vdmVDbGFzc1wiXSh3LHU/cDpxKS50aGVuKGZ1bmN0aW9uKCl7YW5ndWxhci5pc0RlZmluZWQoYykmJmMhPT1kJiZzKGEse29wZW46ISFjfSl9KSxjKW4uZHJvcGRvd25NZW51VGVtcGxhdGVVcmwmJmsobi5kcm9wZG93bk1lbnVUZW1wbGF0ZVVybCkudGhlbihmdW5jdGlvbihhKXtsPW8uJG5ldygpLGooYS50cmltKCkpKGwsZnVuY3Rpb24oYSl7dmFyIGI9YTtuLmRyb3Bkb3duTWVudS5yZXBsYWNlV2l0aChiKSxuLmRyb3Bkb3duTWVudT1ifSl9KSxvLmZvY3VzVG9nZ2xlRWxlbWVudCgpLGYub3BlbihvKTtlbHNle2lmKG4uZHJvcGRvd25NZW51VGVtcGxhdGVVcmwpe2wmJmwuJGRlc3Ryb3koKTt2YXIgeD1hbmd1bGFyLmVsZW1lbnQoJzx1bCBjbGFzcz1cImRyb3Bkb3duLW1lbnVcIj48L3VsPicpO24uZHJvcGRvd25NZW51LnJlcGxhY2VXaXRoKHgpLG4uZHJvcGRvd25NZW51PXh9Zi5jbG9zZShvKSxuLnNlbGVjdGVkT3B0aW9uPW51bGx9YW5ndWxhci5pc0Z1bmN0aW9uKHIpJiZyKGEsYyl9KSxhLiRvbihcIiRsb2NhdGlvbkNoYW5nZVN1Y2Nlc3NcIixmdW5jdGlvbigpe1wiZGlzYWJsZWRcIiE9PW8uZ2V0QXV0b0Nsb3NlKCkmJihvLmlzT3Blbj0hMSl9KX1dKS5kaXJlY3RpdmUoXCJ1aWJEcm9wZG93blwiLGZ1bmN0aW9uKCl7cmV0dXJue2NvbnRyb2xsZXI6XCJVaWJEcm9wZG93bkNvbnRyb2xsZXJcIixsaW5rOmZ1bmN0aW9uKGEsYixjLGQpe2QuaW5pdCgpfX19KS5kaXJlY3RpdmUoXCJ1aWJEcm9wZG93bk1lbnVcIixmdW5jdGlvbigpe3JldHVybntyZXN0cmljdDpcIkFcIixyZXF1aXJlOlwiP151aWJEcm9wZG93blwiLGxpbms6ZnVuY3Rpb24oYSxiLGMsZCl7aWYoZCYmIWFuZ3VsYXIuaXNEZWZpbmVkKGMuZHJvcGRvd25OZXN0ZWQpKXtiLmFkZENsYXNzKFwiZHJvcGRvd24tbWVudVwiKTt2YXIgZT1jLnRlbXBsYXRlVXJsO2UmJihkLmRyb3Bkb3duTWVudVRlbXBsYXRlVXJsPWUpLGQuZHJvcGRvd25NZW51fHwoZC5kcm9wZG93bk1lbnU9Yil9fX19KS5kaXJlY3RpdmUoXCJ1aWJEcm9wZG93blRvZ2dsZVwiLGZ1bmN0aW9uKCl7cmV0dXJue3JlcXVpcmU6XCI/XnVpYkRyb3Bkb3duXCIsbGluazpmdW5jdGlvbihhLGIsYyxkKXtpZihkKXtiLmFkZENsYXNzKFwiZHJvcGRvd24tdG9nZ2xlXCIpLGQudG9nZ2xlRWxlbWVudD1iO3ZhciBlPWZ1bmN0aW9uKGUpe2UucHJldmVudERlZmF1bHQoKSxiLmhhc0NsYXNzKFwiZGlzYWJsZWRcIil8fGMuZGlzYWJsZWR8fGEuJGFwcGx5KGZ1bmN0aW9uKCl7ZC50b2dnbGUoKX0pfTtiLmJpbmQoXCJjbGlja1wiLGUpLGIuYXR0cih7XCJhcmlhLWhhc3BvcHVwXCI6ITAsXCJhcmlhLWV4cGFuZGVkXCI6ITF9KSxhLiR3YXRjaChkLmlzT3BlbixmdW5jdGlvbihhKXtiLmF0dHIoXCJhcmlhLWV4cGFuZGVkXCIsISFhKX0pLGEuJG9uKFwiJGRlc3Ryb3lcIixmdW5jdGlvbigpe2IudW5iaW5kKFwiY2xpY2tcIixlKX0pfX19fSksYW5ndWxhci5tb2R1bGUoXCJ1aS5ib290c3RyYXAuc3RhY2tlZE1hcFwiLFtdKS5mYWN0b3J5KFwiJCRzdGFja2VkTWFwXCIsZnVuY3Rpb24oKXtyZXR1cm57Y3JlYXRlTmV3OmZ1bmN0aW9uKCl7dmFyIGE9W107cmV0dXJue2FkZDpmdW5jdGlvbihiLGMpe2EucHVzaCh7a2V5OmIsdmFsdWU6Y30pfSxnZXQ6ZnVuY3Rpb24oYil7Zm9yKHZhciBjPTA7YzxhLmxlbmd0aDtjKyspaWYoYj09PWFbY10ua2V5KXJldHVybiBhW2NdfSxrZXlzOmZ1bmN0aW9uKCl7Zm9yKHZhciBiPVtdLGM9MDtjPGEubGVuZ3RoO2MrKyliLnB1c2goYVtjXS5rZXkpO3JldHVybiBifSx0b3A6ZnVuY3Rpb24oKXtyZXR1cm4gYVthLmxlbmd0aC0xXX0scmVtb3ZlOmZ1bmN0aW9uKGIpe2Zvcih2YXIgYz0tMSxkPTA7ZDxhLmxlbmd0aDtkKyspaWYoYj09PWFbZF0ua2V5KXtjPWQ7YnJlYWt9cmV0dXJuIGEuc3BsaWNlKGMsMSlbMF19LHJlbW92ZVRvcDpmdW5jdGlvbigpe3JldHVybiBhLnNwbGljZShhLmxlbmd0aC0xLDEpWzBdfSxsZW5ndGg6ZnVuY3Rpb24oKXtyZXR1cm4gYS5sZW5ndGh9fX19fSksYW5ndWxhci5tb2R1bGUoXCJ1aS5ib290c3RyYXAubW9kYWxcIixbXCJ1aS5ib290c3RyYXAuc3RhY2tlZE1hcFwiXSkuZmFjdG9yeShcIiQkbXVsdGlNYXBcIixmdW5jdGlvbigpe3JldHVybntjcmVhdGVOZXc6ZnVuY3Rpb24oKXt2YXIgYT17fTtyZXR1cm57ZW50cmllczpmdW5jdGlvbigpe3JldHVybiBPYmplY3Qua2V5cyhhKS5tYXAoZnVuY3Rpb24oYil7cmV0dXJue2tleTpiLHZhbHVlOmFbYl19fSl9LGdldDpmdW5jdGlvbihiKXtyZXR1cm4gYVtiXX0saGFzS2V5OmZ1bmN0aW9uKGIpe3JldHVybiEhYVtiXX0sa2V5czpmdW5jdGlvbigpe3JldHVybiBPYmplY3Qua2V5cyhhKX0scHV0OmZ1bmN0aW9uKGIsYyl7YVtiXXx8KGFbYl09W10pLGFbYl0ucHVzaChjKX0scmVtb3ZlOmZ1bmN0aW9uKGIsYyl7dmFyIGQ9YVtiXTtpZihkKXt2YXIgZT1kLmluZGV4T2YoYyk7LTEhPT1lJiZkLnNwbGljZShlLDEpLGQubGVuZ3RofHxkZWxldGUgYVtiXX19fX19fSkucHJvdmlkZXIoXCIkdWliUmVzb2x2ZVwiLGZ1bmN0aW9uKCl7dmFyIGE9dGhpczt0aGlzLnJlc29sdmVyPW51bGwsdGhpcy5zZXRSZXNvbHZlcj1mdW5jdGlvbihhKXt0aGlzLnJlc29sdmVyPWF9LHRoaXMuJGdldD1bXCIkaW5qZWN0b3JcIixcIiRxXCIsZnVuY3Rpb24oYixjKXt2YXIgZD1hLnJlc29sdmVyP2IuZ2V0KGEucmVzb2x2ZXIpOm51bGw7cmV0dXJue3Jlc29sdmU6ZnVuY3Rpb24oYSxlLGYsZyl7aWYoZClyZXR1cm4gZC5yZXNvbHZlKGEsZSxmLGcpO3ZhciBoPVtdO3JldHVybiBhbmd1bGFyLmZvckVhY2goYSxmdW5jdGlvbihhKXthbmd1bGFyLmlzRnVuY3Rpb24oYSl8fGFuZ3VsYXIuaXNBcnJheShhKT9oLnB1c2goYy5yZXNvbHZlKGIuaW52b2tlKGEpKSk6YW5ndWxhci5pc1N0cmluZyhhKT9oLnB1c2goYy5yZXNvbHZlKGIuZ2V0KGEpKSk6aC5wdXNoKGMucmVzb2x2ZShhKSl9KSxjLmFsbChoKS50aGVuKGZ1bmN0aW9uKGIpe3ZhciBjPXt9LGQ9MDtyZXR1cm4gYW5ndWxhci5mb3JFYWNoKGEsZnVuY3Rpb24oYSxlKXtjW2VdPWJbZCsrXX0pLGN9KX19fV19KS5kaXJlY3RpdmUoXCJ1aWJNb2RhbEJhY2tkcm9wXCIsW1wiJGFuaW1hdGVDc3NcIixcIiRpbmplY3RvclwiLFwiJHVpYk1vZGFsU3RhY2tcIixmdW5jdGlvbihhLGIsYyl7ZnVuY3Rpb24gZChiLGQsZSl7ZS5tb2RhbEluQ2xhc3MmJihhKGQse2FkZENsYXNzOmUubW9kYWxJbkNsYXNzfSkuc3RhcnQoKSxiLiRvbihjLk5PV19DTE9TSU5HX0VWRU5ULGZ1bmN0aW9uKGMsZil7dmFyIGc9ZigpO2IubW9kYWxPcHRpb25zLmFuaW1hdGlvbj9hKGQse3JlbW92ZUNsYXNzOmUubW9kYWxJbkNsYXNzfSkuc3RhcnQoKS50aGVuKGcpOmcoKX0pKX1yZXR1cm57cmVwbGFjZTohMCx0ZW1wbGF0ZVVybDpcInVpYi90ZW1wbGF0ZS9tb2RhbC9iYWNrZHJvcC5odG1sXCIsY29tcGlsZTpmdW5jdGlvbihhLGIpe3JldHVybiBhLmFkZENsYXNzKGIuYmFja2Ryb3BDbGFzcyksZH19fV0pLmRpcmVjdGl2ZShcInVpYk1vZGFsV2luZG93XCIsW1wiJHVpYk1vZGFsU3RhY2tcIixcIiRxXCIsXCIkYW5pbWF0ZVwiLFwiJGFuaW1hdGVDc3NcIixcIiRkb2N1bWVudFwiLGZ1bmN0aW9uKGEsYixjLGQsZSl7cmV0dXJue3Njb3BlOntpbmRleDpcIkBcIn0scmVwbGFjZTohMCx0cmFuc2NsdWRlOiEwLHRlbXBsYXRlVXJsOmZ1bmN0aW9uKGEsYil7cmV0dXJuIGIudGVtcGxhdGVVcmx8fFwidWliL3RlbXBsYXRlL21vZGFsL3dpbmRvdy5odG1sXCJ9LGxpbms6ZnVuY3Rpb24oZixnLGgpe2cuYWRkQ2xhc3MoaC53aW5kb3dDbGFzc3x8XCJcIiksZy5hZGRDbGFzcyhoLndpbmRvd1RvcENsYXNzfHxcIlwiKSxmLnNpemU9aC5zaXplLGYuY2xvc2U9ZnVuY3Rpb24oYil7dmFyIGM9YS5nZXRUb3AoKTtjJiZjLnZhbHVlLmJhY2tkcm9wJiZcInN0YXRpY1wiIT09Yy52YWx1ZS5iYWNrZHJvcCYmYi50YXJnZXQ9PT1iLmN1cnJlbnRUYXJnZXQmJihiLnByZXZlbnREZWZhdWx0KCksYi5zdG9wUHJvcGFnYXRpb24oKSxhLmRpc21pc3MoYy5rZXksXCJiYWNrZHJvcCBjbGlja1wiKSl9LGcub24oXCJjbGlja1wiLGYuY2xvc2UpLGYuJGlzUmVuZGVyZWQ9ITA7dmFyIGk9Yi5kZWZlcigpO2guJG9ic2VydmUoXCJtb2RhbFJlbmRlclwiLGZ1bmN0aW9uKGEpe1widHJ1ZVwiPT09YSYmaS5yZXNvbHZlKCl9KSxpLnByb21pc2UudGhlbihmdW5jdGlvbigpe3ZhciBpPW51bGw7aC5tb2RhbEluQ2xhc3MmJihpPWQoZyx7YWRkQ2xhc3M6aC5tb2RhbEluQ2xhc3N9KS5zdGFydCgpLGYuJG9uKGEuTk9XX0NMT1NJTkdfRVZFTlQsZnVuY3Rpb24oYSxiKXt2YXIgZT1iKCk7ZD9kKGcse3JlbW92ZUNsYXNzOmgubW9kYWxJbkNsYXNzfSkuc3RhcnQoKS50aGVuKGUpOmMucmVtb3ZlQ2xhc3MoZyxoLm1vZGFsSW5DbGFzcykudGhlbihlKX0pKSxiLndoZW4oaSkudGhlbihmdW5jdGlvbigpe2lmKCFlWzBdLmFjdGl2ZUVsZW1lbnR8fCFnWzBdLmNvbnRhaW5zKGVbMF0uYWN0aXZlRWxlbWVudCkpe3ZhciBhPWdbMF0ucXVlcnlTZWxlY3RvcihcIlthdXRvZm9jdXNdXCIpO2E/YS5mb2N1cygpOmdbMF0uZm9jdXMoKX19KTt2YXIgaj1hLmdldFRvcCgpO2omJmEubW9kYWxSZW5kZXJlZChqLmtleSl9KX19fV0pLmRpcmVjdGl2ZShcInVpYk1vZGFsQW5pbWF0aW9uQ2xhc3NcIixmdW5jdGlvbigpe3JldHVybntjb21waWxlOmZ1bmN0aW9uKGEsYil7Yi5tb2RhbEFuaW1hdGlvbiYmYS5hZGRDbGFzcyhiLnVpYk1vZGFsQW5pbWF0aW9uQ2xhc3MpfX19KS5kaXJlY3RpdmUoXCJ1aWJNb2RhbFRyYW5zY2x1ZGVcIixmdW5jdGlvbigpe3JldHVybntsaW5rOmZ1bmN0aW9uKGEsYixjLGQsZSl7ZShhLiRwYXJlbnQsZnVuY3Rpb24oYSl7Yi5lbXB0eSgpLGIuYXBwZW5kKGEpfSl9fX0pLmZhY3RvcnkoXCIkdWliTW9kYWxTdGFja1wiLFtcIiRhbmltYXRlXCIsXCIkYW5pbWF0ZUNzc1wiLFwiJGRvY3VtZW50XCIsXCIkY29tcGlsZVwiLFwiJHJvb3RTY29wZVwiLFwiJHFcIixcIiQkbXVsdGlNYXBcIixcIiQkc3RhY2tlZE1hcFwiLGZ1bmN0aW9uKGEsYixjLGQsZSxmLGcsaCl7ZnVuY3Rpb24gaSgpe2Zvcih2YXIgYT0tMSxiPXQua2V5cygpLGM9MDtjPGIubGVuZ3RoO2MrKyl0LmdldChiW2NdKS52YWx1ZS5iYWNrZHJvcCYmKGE9Yyk7cmV0dXJuIGF9ZnVuY3Rpb24gaihhLGIpe3ZhciBjPXQuZ2V0KGEpLnZhbHVlLGQ9Yy5hcHBlbmRUbzt0LnJlbW92ZShhKSxtKGMubW9kYWxEb21FbCxjLm1vZGFsU2NvcGUsZnVuY3Rpb24oKXt2YXIgYj1jLm9wZW5lZENsYXNzfHxzO3UucmVtb3ZlKGIsYSksZC50b2dnbGVDbGFzcyhiLHUuaGFzS2V5KGIpKSxrKCEwKX0pLGwoKSxiJiZiLmZvY3VzP2IuZm9jdXMoKTpkLmZvY3VzJiZkLmZvY3VzKCl9ZnVuY3Rpb24gayhhKXt2YXIgYjt0Lmxlbmd0aCgpPjAmJihiPXQudG9wKCkudmFsdWUsYi5tb2RhbERvbUVsLnRvZ2dsZUNsYXNzKGIud2luZG93VG9wQ2xhc3N8fFwiXCIsYSkpfWZ1bmN0aW9uIGwoKXtpZihwJiYtMT09PWkoKSl7dmFyIGE9cTttKHAscSxmdW5jdGlvbigpe2E9bnVsbH0pLHA9dm9pZCAwLHE9dm9pZCAwfX1mdW5jdGlvbiBtKGEsYyxkLGUpe2Z1bmN0aW9uIGcoKXtnLmRvbmV8fChnLmRvbmU9ITAsYihhLHtldmVudDpcImxlYXZlXCJ9KS5zdGFydCgpLnRoZW4oZnVuY3Rpb24oKXthLnJlbW92ZSgpLGUmJmUucmVzb2x2ZSgpfSksYy4kZGVzdHJveSgpLGQmJmQoKSl9dmFyIGgsaT1udWxsLGo9ZnVuY3Rpb24oKXtyZXR1cm4gaHx8KGg9Zi5kZWZlcigpLGk9aC5wcm9taXNlKSxmdW5jdGlvbigpe2gucmVzb2x2ZSgpfX07cmV0dXJuIGMuJGJyb2FkY2FzdCh2Lk5PV19DTE9TSU5HX0VWRU5ULGopLGYud2hlbihpKS50aGVuKGcpfWZ1bmN0aW9uIG4oYSl7aWYoYS5pc0RlZmF1bHRQcmV2ZW50ZWQoKSlyZXR1cm4gYTt2YXIgYj10LnRvcCgpO2lmKGIpc3dpdGNoKGEud2hpY2gpe2Nhc2UgMjc6Yi52YWx1ZS5rZXlib2FyZCYmKGEucHJldmVudERlZmF1bHQoKSxlLiRhcHBseShmdW5jdGlvbigpe3YuZGlzbWlzcyhiLmtleSxcImVzY2FwZSBrZXkgcHJlc3NcIil9KSk7YnJlYWs7Y2FzZSA5OnYubG9hZEZvY3VzRWxlbWVudExpc3QoYik7dmFyIGM9ITE7YS5zaGlmdEtleT92LmlzRm9jdXNJbkZpcnN0SXRlbShhKSYmKGM9di5mb2N1c0xhc3RGb2N1c2FibGVFbGVtZW50KCkpOnYuaXNGb2N1c0luTGFzdEl0ZW0oYSkmJihjPXYuZm9jdXNGaXJzdEZvY3VzYWJsZUVsZW1lbnQoKSksYyYmKGEucHJldmVudERlZmF1bHQoKSxhLnN0b3BQcm9wYWdhdGlvbigpKX19ZnVuY3Rpb24gbyhhLGIsYyl7cmV0dXJuIWEudmFsdWUubW9kYWxTY29wZS4kYnJvYWRjYXN0KFwibW9kYWwuY2xvc2luZ1wiLGIsYykuZGVmYXVsdFByZXZlbnRlZH12YXIgcCxxLHIscz1cIm1vZGFsLW9wZW5cIix0PWguY3JlYXRlTmV3KCksdT1nLmNyZWF0ZU5ldygpLHY9e05PV19DTE9TSU5HX0VWRU5UOlwibW9kYWwuc3RhY2subm93LWNsb3NpbmdcIn0sdz0wLHg9XCJhW2hyZWZdLCBhcmVhW2hyZWZdLCBpbnB1dDpub3QoW2Rpc2FibGVkXSksIGJ1dHRvbjpub3QoW2Rpc2FibGVkXSksc2VsZWN0Om5vdChbZGlzYWJsZWRdKSwgdGV4dGFyZWE6bm90KFtkaXNhYmxlZF0pLCBpZnJhbWUsIG9iamVjdCwgZW1iZWQsICpbdGFiaW5kZXhdLCAqW2NvbnRlbnRlZGl0YWJsZT10cnVlXVwiO3JldHVybiBlLiR3YXRjaChpLGZ1bmN0aW9uKGEpe3EmJihxLmluZGV4PWEpfSksYy5vbihcImtleWRvd25cIixuKSxlLiRvbihcIiRkZXN0cm95XCIsZnVuY3Rpb24oKXtjLm9mZihcImtleWRvd25cIixuKX0pLHYub3Blbj1mdW5jdGlvbihiLGYpe3ZhciBnPWNbMF0uYWN0aXZlRWxlbWVudCxoPWYub3BlbmVkQ2xhc3N8fHM7ayghMSksdC5hZGQoYix7ZGVmZXJyZWQ6Zi5kZWZlcnJlZCxyZW5kZXJEZWZlcnJlZDpmLnJlbmRlckRlZmVycmVkLGNsb3NlZERlZmVycmVkOmYuY2xvc2VkRGVmZXJyZWQsbW9kYWxTY29wZTpmLnNjb3BlLGJhY2tkcm9wOmYuYmFja2Ryb3Asa2V5Ym9hcmQ6Zi5rZXlib2FyZCxvcGVuZWRDbGFzczpmLm9wZW5lZENsYXNzLHdpbmRvd1RvcENsYXNzOmYud2luZG93VG9wQ2xhc3MsYW5pbWF0aW9uOmYuYW5pbWF0aW9uLGFwcGVuZFRvOmYuYXBwZW5kVG99KSx1LnB1dChoLGIpO3ZhciBqPWYuYXBwZW5kVG8sbD1pKCk7aWYoIWoubGVuZ3RoKXRocm93IG5ldyBFcnJvcihcImFwcGVuZFRvIGVsZW1lbnQgbm90IGZvdW5kLiBNYWtlIHN1cmUgdGhhdCB0aGUgZWxlbWVudCBwYXNzZWQgaXMgaW4gRE9NLlwiKTtsPj0wJiYhcCYmKHE9ZS4kbmV3KCEwKSxxLm1vZGFsT3B0aW9ucz1mLHEuaW5kZXg9bCxwPWFuZ3VsYXIuZWxlbWVudCgnPGRpdiB1aWItbW9kYWwtYmFja2Ryb3A9XCJtb2RhbC1iYWNrZHJvcFwiPjwvZGl2PicpLHAuYXR0cihcImJhY2tkcm9wLWNsYXNzXCIsZi5iYWNrZHJvcENsYXNzKSxmLmFuaW1hdGlvbiYmcC5hdHRyKFwibW9kYWwtYW5pbWF0aW9uXCIsXCJ0cnVlXCIpLGQocCkocSksYS5lbnRlcihwLGopKTt2YXIgbT1hbmd1bGFyLmVsZW1lbnQoJzxkaXYgdWliLW1vZGFsLXdpbmRvdz1cIm1vZGFsLXdpbmRvd1wiPjwvZGl2PicpO20uYXR0cih7XCJ0ZW1wbGF0ZS11cmxcIjpmLndpbmRvd1RlbXBsYXRlVXJsLFwid2luZG93LWNsYXNzXCI6Zi53aW5kb3dDbGFzcyxcIndpbmRvdy10b3AtY2xhc3NcIjpmLndpbmRvd1RvcENsYXNzLHNpemU6Zi5zaXplLGluZGV4OnQubGVuZ3RoKCktMSxhbmltYXRlOlwiYW5pbWF0ZVwifSkuaHRtbChmLmNvbnRlbnQpLGYuYW5pbWF0aW9uJiZtLmF0dHIoXCJtb2RhbC1hbmltYXRpb25cIixcInRydWVcIiksYS5lbnRlcihtLGopLnRoZW4oZnVuY3Rpb24oKXtkKG0pKGYuc2NvcGUpLGEuYWRkQ2xhc3MoaixoKX0pLHQudG9wKCkudmFsdWUubW9kYWxEb21FbD1tLHQudG9wKCkudmFsdWUubW9kYWxPcGVuZXI9Zyx2LmNsZWFyRm9jdXNMaXN0Q2FjaGUoKX0sdi5jbG9zZT1mdW5jdGlvbihhLGIpe3ZhciBjPXQuZ2V0KGEpO3JldHVybiBjJiZvKGMsYiwhMCk/KGMudmFsdWUubW9kYWxTY29wZS4kJHVpYkRlc3RydWN0aW9uU2NoZWR1bGVkPSEwLGMudmFsdWUuZGVmZXJyZWQucmVzb2x2ZShiKSxqKGEsYy52YWx1ZS5tb2RhbE9wZW5lciksITApOiFjfSx2LmRpc21pc3M9ZnVuY3Rpb24oYSxiKXt2YXIgYz10LmdldChhKTtyZXR1cm4gYyYmbyhjLGIsITEpPyhjLnZhbHVlLm1vZGFsU2NvcGUuJCR1aWJEZXN0cnVjdGlvblNjaGVkdWxlZD0hMCxjLnZhbHVlLmRlZmVycmVkLnJlamVjdChiKSxqKGEsYy52YWx1ZS5tb2RhbE9wZW5lciksITApOiFjfSx2LmRpc21pc3NBbGw9ZnVuY3Rpb24oYSl7Zm9yKHZhciBiPXRoaXMuZ2V0VG9wKCk7YiYmdGhpcy5kaXNtaXNzKGIua2V5LGEpOyliPXRoaXMuZ2V0VG9wKCl9LHYuZ2V0VG9wPWZ1bmN0aW9uKCl7cmV0dXJuIHQudG9wKCl9LHYubW9kYWxSZW5kZXJlZD1mdW5jdGlvbihhKXt2YXIgYj10LmdldChhKTtiJiZiLnZhbHVlLnJlbmRlckRlZmVycmVkLnJlc29sdmUoKX0sdi5mb2N1c0ZpcnN0Rm9jdXNhYmxlRWxlbWVudD1mdW5jdGlvbigpe3JldHVybiByLmxlbmd0aD4wPyhyWzBdLmZvY3VzKCksITApOiExfSx2LmZvY3VzTGFzdEZvY3VzYWJsZUVsZW1lbnQ9ZnVuY3Rpb24oKXtyZXR1cm4gci5sZW5ndGg+MD8ocltyLmxlbmd0aC0xXS5mb2N1cygpLCEwKTohMX0sdi5pc0ZvY3VzSW5GaXJzdEl0ZW09ZnVuY3Rpb24oYSl7cmV0dXJuIHIubGVuZ3RoPjA/KGEudGFyZ2V0fHxhLnNyY0VsZW1lbnQpPT09clswXTohMX0sdi5pc0ZvY3VzSW5MYXN0SXRlbT1mdW5jdGlvbihhKXtyZXR1cm4gci5sZW5ndGg+MD8oYS50YXJnZXR8fGEuc3JjRWxlbWVudCk9PT1yW3IubGVuZ3RoLTFdOiExfSx2LmNsZWFyRm9jdXNMaXN0Q2FjaGU9ZnVuY3Rpb24oKXtyPVtdLHc9MH0sdi5sb2FkRm9jdXNFbGVtZW50TGlzdD1mdW5jdGlvbihhKXtpZigodm9pZCAwPT09cnx8IXIubGVuZ3RoKSYmYSl7dmFyIGI9YS52YWx1ZS5tb2RhbERvbUVsO2ImJmIubGVuZ3RoJiYocj1iWzBdLnF1ZXJ5U2VsZWN0b3JBbGwoeCkpfX0sdn1dKS5wcm92aWRlcihcIiR1aWJNb2RhbFwiLGZ1bmN0aW9uKCl7dmFyIGE9e29wdGlvbnM6e2FuaW1hdGlvbjohMCxiYWNrZHJvcDohMCxrZXlib2FyZDohMH0sJGdldDpbXCIkcm9vdFNjb3BlXCIsXCIkcVwiLFwiJGRvY3VtZW50XCIsXCIkdGVtcGxhdGVSZXF1ZXN0XCIsXCIkY29udHJvbGxlclwiLFwiJHVpYlJlc29sdmVcIixcIiR1aWJNb2RhbFN0YWNrXCIsZnVuY3Rpb24oYixjLGQsZSxmLGcsaCl7ZnVuY3Rpb24gaShhKXtyZXR1cm4gYS50ZW1wbGF0ZT9jLndoZW4oYS50ZW1wbGF0ZSk6ZShhbmd1bGFyLmlzRnVuY3Rpb24oYS50ZW1wbGF0ZVVybCk/YS50ZW1wbGF0ZVVybCgpOmEudGVtcGxhdGVVcmwpfXZhciBqPXt9LGs9bnVsbDtyZXR1cm4gai5nZXRQcm9taXNlQ2hhaW49ZnVuY3Rpb24oKXtyZXR1cm4ga30sai5vcGVuPWZ1bmN0aW9uKGUpe2Z1bmN0aW9uIGooKXtyZXR1cm4gcn12YXIgbD1jLmRlZmVyKCksbT1jLmRlZmVyKCksbj1jLmRlZmVyKCksbz1jLmRlZmVyKCkscD17cmVzdWx0OmwucHJvbWlzZSxvcGVuZWQ6bS5wcm9taXNlLGNsb3NlZDpuLnByb21pc2UscmVuZGVyZWQ6by5wcm9taXNlLGNsb3NlOmZ1bmN0aW9uKGEpe3JldHVybiBoLmNsb3NlKHAsYSl9LGRpc21pc3M6ZnVuY3Rpb24oYSl7cmV0dXJuIGguZGlzbWlzcyhwLGEpfX07aWYoZT1hbmd1bGFyLmV4dGVuZCh7fSxhLm9wdGlvbnMsZSksZS5yZXNvbHZlPWUucmVzb2x2ZXx8e30sZS5hcHBlbmRUbz1lLmFwcGVuZFRvfHxkLmZpbmQoXCJib2R5XCIpLmVxKDApLCFlLnRlbXBsYXRlJiYhZS50ZW1wbGF0ZVVybCl0aHJvdyBuZXcgRXJyb3IoXCJPbmUgb2YgdGVtcGxhdGUgb3IgdGVtcGxhdGVVcmwgb3B0aW9ucyBpcyByZXF1aXJlZC5cIik7dmFyIHEscj1jLmFsbChbaShlKSxnLnJlc29sdmUoZS5yZXNvbHZlLHt9LG51bGwsbnVsbCldKTtyZXR1cm4gcT1rPWMuYWxsKFtrXSkudGhlbihqLGopLnRoZW4oZnVuY3Rpb24oYSl7dmFyIGM9ZS5zY29wZXx8YixkPWMuJG5ldygpO2QuJGNsb3NlPXAuY2xvc2UsZC4kZGlzbWlzcz1wLmRpc21pc3MsZC4kb24oXCIkZGVzdHJveVwiLGZ1bmN0aW9uKCl7ZC4kJHVpYkRlc3RydWN0aW9uU2NoZWR1bGVkfHxkLiRkaXNtaXNzKFwiJHVpYlVuc2NoZWR1bGVkRGVzdHJ1Y3Rpb25cIil9KTt2YXIgZyxpPXt9O2UuY29udHJvbGxlciYmKGkuJHNjb3BlPWQsaS4kdWliTW9kYWxJbnN0YW5jZT1wLGFuZ3VsYXIuZm9yRWFjaChhWzFdLGZ1bmN0aW9uKGEsYil7aVtiXT1hfSksZz1mKGUuY29udHJvbGxlcixpKSxlLmNvbnRyb2xsZXJBcyYmKGUuYmluZFRvQ29udHJvbGxlciYmKGcuJGNsb3NlPWQuJGNsb3NlLGcuJGRpc21pc3M9ZC4kZGlzbWlzcyxhbmd1bGFyLmV4dGVuZChnLGMpKSxkW2UuY29udHJvbGxlckFzXT1nKSksaC5vcGVuKHAse3Njb3BlOmQsZGVmZXJyZWQ6bCxyZW5kZXJEZWZlcnJlZDpvLGNsb3NlZERlZmVycmVkOm4sY29udGVudDphWzBdLGFuaW1hdGlvbjplLmFuaW1hdGlvbixiYWNrZHJvcDplLmJhY2tkcm9wLGtleWJvYXJkOmUua2V5Ym9hcmQsYmFja2Ryb3BDbGFzczplLmJhY2tkcm9wQ2xhc3Msd2luZG93VG9wQ2xhc3M6ZS53aW5kb3dUb3BDbGFzcyx3aW5kb3dDbGFzczplLndpbmRvd0NsYXNzLHdpbmRvd1RlbXBsYXRlVXJsOmUud2luZG93VGVtcGxhdGVVcmwsc2l6ZTplLnNpemUsb3BlbmVkQ2xhc3M6ZS5vcGVuZWRDbGFzcyxhcHBlbmRUbzplLmFwcGVuZFRvfSksbS5yZXNvbHZlKCEwKX0sZnVuY3Rpb24oYSl7bS5yZWplY3QoYSksbC5yZWplY3QoYSl9KVtcImZpbmFsbHlcIl0oZnVuY3Rpb24oKXtrPT09cSYmKGs9bnVsbCl9KSxwfSxqfV19O3JldHVybiBhfSksYW5ndWxhci5tb2R1bGUoXCJ1aS5ib290c3RyYXAucGFnaW5nXCIsW10pLmZhY3RvcnkoXCJ1aWJQYWdpbmdcIixbXCIkcGFyc2VcIixmdW5jdGlvbihhKXtyZXR1cm57Y3JlYXRlOmZ1bmN0aW9uKGIsYyxkKXtiLnNldE51bVBhZ2VzPWQubnVtUGFnZXM/YShkLm51bVBhZ2VzKS5hc3NpZ246YW5ndWxhci5ub29wLGIubmdNb2RlbEN0cmw9eyRzZXRWaWV3VmFsdWU6YW5ndWxhci5ub29wfSxiLmluaXQ9ZnVuY3Rpb24oZSxmKXtiLm5nTW9kZWxDdHJsPWUsYi5jb25maWc9ZixlLiRyZW5kZXI9ZnVuY3Rpb24oKXtiLnJlbmRlcigpfSxkLml0ZW1zUGVyUGFnZT9jLiRwYXJlbnQuJHdhdGNoKGEoZC5pdGVtc1BlclBhZ2UpLGZ1bmN0aW9uKGEpe2IuaXRlbXNQZXJQYWdlPXBhcnNlSW50KGEsMTApLGMudG90YWxQYWdlcz1iLmNhbGN1bGF0ZVRvdGFsUGFnZXMoKSxiLnVwZGF0ZVBhZ2UoKX0pOmIuaXRlbXNQZXJQYWdlPWYuaXRlbXNQZXJQYWdlLGMuJHdhdGNoKFwidG90YWxJdGVtc1wiLGZ1bmN0aW9uKGEsZCl7KGFuZ3VsYXIuaXNEZWZpbmVkKGEpfHxhIT09ZCkmJihjLnRvdGFsUGFnZXM9Yi5jYWxjdWxhdGVUb3RhbFBhZ2VzKCksYi51cGRhdGVQYWdlKCkpfSl9LGIuY2FsY3VsYXRlVG90YWxQYWdlcz1mdW5jdGlvbigpe3ZhciBhPWIuaXRlbXNQZXJQYWdlPDE/MTpNYXRoLmNlaWwoYy50b3RhbEl0ZW1zL2IuaXRlbXNQZXJQYWdlKTtyZXR1cm4gTWF0aC5tYXgoYXx8MCwxKX0sYi5yZW5kZXI9ZnVuY3Rpb24oKXtjLnBhZ2U9cGFyc2VJbnQoYi5uZ01vZGVsQ3RybC4kdmlld1ZhbHVlLDEwKXx8MX0sYy5zZWxlY3RQYWdlPWZ1bmN0aW9uKGEsZCl7ZCYmZC5wcmV2ZW50RGVmYXVsdCgpO3ZhciBlPSFjLm5nRGlzYWJsZWR8fCFkO2UmJmMucGFnZSE9PWEmJmE+MCYmYTw9Yy50b3RhbFBhZ2VzJiYoZCYmZC50YXJnZXQmJmQudGFyZ2V0LmJsdXIoKSxiLm5nTW9kZWxDdHJsLiRzZXRWaWV3VmFsdWUoYSksYi5uZ01vZGVsQ3RybC4kcmVuZGVyKCkpfSxjLmdldFRleHQ9ZnVuY3Rpb24oYSl7cmV0dXJuIGNbYStcIlRleHRcIl18fGIuY29uZmlnW2ErXCJUZXh0XCJdfSxjLm5vUHJldmlvdXM9ZnVuY3Rpb24oKXtyZXR1cm4gMT09PWMucGFnZX0sYy5ub05leHQ9ZnVuY3Rpb24oKXtyZXR1cm4gYy5wYWdlPT09Yy50b3RhbFBhZ2VzfSxiLnVwZGF0ZVBhZ2U9ZnVuY3Rpb24oKXtiLnNldE51bVBhZ2VzKGMuJHBhcmVudCxjLnRvdGFsUGFnZXMpLGMucGFnZT5jLnRvdGFsUGFnZXM/Yy5zZWxlY3RQYWdlKGMudG90YWxQYWdlcyk6Yi5uZ01vZGVsQ3RybC4kcmVuZGVyKCl9fX19XSksYW5ndWxhci5tb2R1bGUoXCJ1aS5ib290c3RyYXAucGFnZXJcIixbXCJ1aS5ib290c3RyYXAucGFnaW5nXCJdKS5jb250cm9sbGVyKFwiVWliUGFnZXJDb250cm9sbGVyXCIsW1wiJHNjb3BlXCIsXCIkYXR0cnNcIixcInVpYlBhZ2luZ1wiLFwidWliUGFnZXJDb25maWdcIixmdW5jdGlvbihhLGIsYyxkKXthLmFsaWduPWFuZ3VsYXIuaXNEZWZpbmVkKGIuYWxpZ24pP2EuJHBhcmVudC4kZXZhbChiLmFsaWduKTpkLmFsaWduLGMuY3JlYXRlKHRoaXMsYSxiKX1dKS5jb25zdGFudChcInVpYlBhZ2VyQ29uZmlnXCIse2l0ZW1zUGVyUGFnZToxMCxwcmV2aW91c1RleHQ6XCLCqyBQcmV2aW91c1wiLG5leHRUZXh0OlwiTmV4dCDCu1wiLGFsaWduOiEwfSkuZGlyZWN0aXZlKFwidWliUGFnZXJcIixbXCJ1aWJQYWdlckNvbmZpZ1wiLGZ1bmN0aW9uKGEpe3JldHVybntzY29wZTp7dG90YWxJdGVtczpcIj1cIixwcmV2aW91c1RleHQ6XCJAXCIsbmV4dFRleHQ6XCJAXCIsbmdEaXNhYmxlZDpcIj1cIn0scmVxdWlyZTpbXCJ1aWJQYWdlclwiLFwiP25nTW9kZWxcIl0sY29udHJvbGxlcjpcIlVpYlBhZ2VyQ29udHJvbGxlclwiLGNvbnRyb2xsZXJBczpcInBhZ2VyXCIsdGVtcGxhdGVVcmw6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gYi50ZW1wbGF0ZVVybHx8XCJ1aWIvdGVtcGxhdGUvcGFnZXIvcGFnZXIuaHRtbFwifSxyZXBsYWNlOiEwLGxpbms6ZnVuY3Rpb24oYixjLGQsZSl7dmFyIGY9ZVswXSxnPWVbMV07ZyYmZi5pbml0KGcsYSl9fX1dKSxhbmd1bGFyLm1vZHVsZShcInVpLmJvb3RzdHJhcC5wYWdpbmF0aW9uXCIsW1widWkuYm9vdHN0cmFwLnBhZ2luZ1wiXSkuY29udHJvbGxlcihcIlVpYlBhZ2luYXRpb25Db250cm9sbGVyXCIsW1wiJHNjb3BlXCIsXCIkYXR0cnNcIixcIiRwYXJzZVwiLFwidWliUGFnaW5nXCIsXCJ1aWJQYWdpbmF0aW9uQ29uZmlnXCIsZnVuY3Rpb24oYSxiLGMsZCxlKXtmdW5jdGlvbiBmKGEsYixjKXtyZXR1cm57bnVtYmVyOmEsdGV4dDpiLGFjdGl2ZTpjfX1mdW5jdGlvbiBnKGEsYil7dmFyIGM9W10sZD0xLGU9YixnPWFuZ3VsYXIuaXNEZWZpbmVkKGkpJiZiPmk7ZyYmKGo/KGQ9TWF0aC5tYXgoYS1NYXRoLmZsb29yKGkvMiksMSksZT1kK2ktMSxlPmImJihlPWIsZD1lLWkrMSkpOihkPShNYXRoLmNlaWwoYS9pKS0xKSppKzEsZT1NYXRoLm1pbihkK2ktMSxiKSkpO2Zvcih2YXIgaD1kO2U+PWg7aCsrKXt2YXIgbT1mKGgsaCxoPT09YSk7Yy5wdXNoKG0pfWlmKGcmJmk+MCYmKCFqfHxrfHxsKSl7aWYoZD4xKXtpZighbHx8ZD4zKXt2YXIgbj1mKGQtMSxcIi4uLlwiLCExKTtjLnVuc2hpZnQobil9aWYobCl7aWYoMz09PWQpe3ZhciBvPWYoMixcIjJcIiwhMSk7Yy51bnNoaWZ0KG8pfXZhciBwPWYoMSxcIjFcIiwhMSk7Yy51bnNoaWZ0KHApfX1pZihiPmUpe2lmKCFsfHxiLTI+ZSl7dmFyIHE9ZihlKzEsXCIuLi5cIiwhMSk7Yy5wdXNoKHEpfWlmKGwpe2lmKGU9PT1iLTIpe3ZhciByPWYoYi0xLGItMSwhMSk7Yy5wdXNoKHIpfXZhciBzPWYoYixiLCExKTtjLnB1c2gocyl9fX1yZXR1cm4gY312YXIgaD10aGlzLGk9YW5ndWxhci5pc0RlZmluZWQoYi5tYXhTaXplKT9hLiRwYXJlbnQuJGV2YWwoYi5tYXhTaXplKTplLm1heFNpemUsaj1hbmd1bGFyLmlzRGVmaW5lZChiLnJvdGF0ZSk/YS4kcGFyZW50LiRldmFsKGIucm90YXRlKTplLnJvdGF0ZSxrPWFuZ3VsYXIuaXNEZWZpbmVkKGIuZm9yY2VFbGxpcHNlcyk/YS4kcGFyZW50LiRldmFsKGIuZm9yY2VFbGxpcHNlcyk6ZS5mb3JjZUVsbGlwc2VzLGw9YW5ndWxhci5pc0RlZmluZWQoYi5ib3VuZGFyeUxpbmtOdW1iZXJzKT9hLiRwYXJlbnQuJGV2YWwoYi5ib3VuZGFyeUxpbmtOdW1iZXJzKTplLmJvdW5kYXJ5TGlua051bWJlcnM7YS5ib3VuZGFyeUxpbmtzPWFuZ3VsYXIuaXNEZWZpbmVkKGIuYm91bmRhcnlMaW5rcyk/YS4kcGFyZW50LiRldmFsKGIuYm91bmRhcnlMaW5rcyk6ZS5ib3VuZGFyeUxpbmtzLGEuZGlyZWN0aW9uTGlua3M9YW5ndWxhci5pc0RlZmluZWQoYi5kaXJlY3Rpb25MaW5rcyk/YS4kcGFyZW50LiRldmFsKGIuZGlyZWN0aW9uTGlua3MpOmUuZGlyZWN0aW9uTGlua3MsZC5jcmVhdGUodGhpcyxhLGIpLGIubWF4U2l6ZSYmYS4kcGFyZW50LiR3YXRjaChjKGIubWF4U2l6ZSksZnVuY3Rpb24oYSl7aT1wYXJzZUludChhLDEwKSxoLnJlbmRlcigpfSk7dmFyIG09dGhpcy5yZW5kZXI7dGhpcy5yZW5kZXI9ZnVuY3Rpb24oKXttKCksYS5wYWdlPjAmJmEucGFnZTw9YS50b3RhbFBhZ2VzJiYoYS5wYWdlcz1nKGEucGFnZSxhLnRvdGFsUGFnZXMpKX19XSkuY29uc3RhbnQoXCJ1aWJQYWdpbmF0aW9uQ29uZmlnXCIse2l0ZW1zUGVyUGFnZToxMCxib3VuZGFyeUxpbmtzOiExLGJvdW5kYXJ5TGlua051bWJlcnM6ITEsZGlyZWN0aW9uTGlua3M6ITAsZmlyc3RUZXh0OlwiRmlyc3RcIixwcmV2aW91c1RleHQ6XCJQcmV2aW91c1wiLG5leHRUZXh0OlwiTmV4dFwiLGxhc3RUZXh0OlwiTGFzdFwiLHJvdGF0ZTohMCxmb3JjZUVsbGlwc2VzOiExfSkuZGlyZWN0aXZlKFwidWliUGFnaW5hdGlvblwiLFtcIiRwYXJzZVwiLFwidWliUGFnaW5hdGlvbkNvbmZpZ1wiLGZ1bmN0aW9uKGEsYil7cmV0dXJue3Njb3BlOnt0b3RhbEl0ZW1zOlwiPVwiLGZpcnN0VGV4dDpcIkBcIixwcmV2aW91c1RleHQ6XCJAXCIsbmV4dFRleHQ6XCJAXCIsbGFzdFRleHQ6XCJAXCIsbmdEaXNhYmxlZDpcIj1cIn0scmVxdWlyZTpbXCJ1aWJQYWdpbmF0aW9uXCIsXCI/bmdNb2RlbFwiXSxjb250cm9sbGVyOlwiVWliUGFnaW5hdGlvbkNvbnRyb2xsZXJcIixjb250cm9sbGVyQXM6XCJwYWdpbmF0aW9uXCIsdGVtcGxhdGVVcmw6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gYi50ZW1wbGF0ZVVybHx8XCJ1aWIvdGVtcGxhdGUvcGFnaW5hdGlvbi9wYWdpbmF0aW9uLmh0bWxcIn0scmVwbGFjZTohMCxsaW5rOmZ1bmN0aW9uKGEsYyxkLGUpe3ZhciBmPWVbMF0sZz1lWzFdO2cmJmYuaW5pdChnLGIpfX19XSksYW5ndWxhci5tb2R1bGUoXCJ1aS5ib290c3RyYXAudG9vbHRpcFwiLFtcInVpLmJvb3RzdHJhcC5wb3NpdGlvblwiLFwidWkuYm9vdHN0cmFwLnN0YWNrZWRNYXBcIl0pLnByb3ZpZGVyKFwiJHVpYlRvb2x0aXBcIixmdW5jdGlvbigpe2Z1bmN0aW9uIGEoYSl7dmFyIGI9L1tBLVpdL2csYz1cIi1cIjtyZXR1cm4gYS5yZXBsYWNlKGIsZnVuY3Rpb24oYSxiKXtyZXR1cm4oYj9jOlwiXCIpK2EudG9Mb3dlckNhc2UoKX0pfXZhciBiPXtwbGFjZW1lbnQ6XCJ0b3BcIixwbGFjZW1lbnRDbGFzc1ByZWZpeDpcIlwiLGFuaW1hdGlvbjohMCxwb3B1cERlbGF5OjAscG9wdXBDbG9zZURlbGF5OjAsdXNlQ29udGVudEV4cDohMX0sYz17bW91c2VlbnRlcjpcIm1vdXNlbGVhdmVcIixjbGljazpcImNsaWNrXCIsb3V0c2lkZUNsaWNrOlwib3V0c2lkZUNsaWNrXCIsZm9jdXM6XCJibHVyXCIsbm9uZTpcIlwifSxkPXt9O3RoaXMub3B0aW9ucz1mdW5jdGlvbihhKXthbmd1bGFyLmV4dGVuZChkLGEpfSx0aGlzLnNldFRyaWdnZXJzPWZ1bmN0aW9uKGEpe2FuZ3VsYXIuZXh0ZW5kKGMsYSl9LHRoaXMuJGdldD1bXCIkd2luZG93XCIsXCIkY29tcGlsZVwiLFwiJHRpbWVvdXRcIixcIiRkb2N1bWVudFwiLFwiJHVpYlBvc2l0aW9uXCIsXCIkaW50ZXJwb2xhdGVcIixcIiRyb290U2NvcGVcIixcIiRwYXJzZVwiLFwiJCRzdGFja2VkTWFwXCIsZnVuY3Rpb24oZSxmLGcsaCxpLGosayxsLG0pe2Z1bmN0aW9uIG4oYSl7aWYoMjc9PT1hLndoaWNoKXt2YXIgYj1vLnRvcCgpO2ImJihiLnZhbHVlLmNsb3NlKCksby5yZW1vdmVUb3AoKSxiPW51bGwpfX12YXIgbz1tLmNyZWF0ZU5ldygpO3JldHVybiBoLm9uKFwia2V5cHJlc3NcIixuKSxrLiRvbihcIiRkZXN0cm95XCIsZnVuY3Rpb24oKXtoLm9mZihcImtleXByZXNzXCIsbil9KSxmdW5jdGlvbihlLGssbSxuKXtmdW5jdGlvbiBwKGEpe3ZhciBiPShhfHxuLnRyaWdnZXJ8fG0pLnNwbGl0KFwiIFwiKSxkPWIubWFwKGZ1bmN0aW9uKGEpe3JldHVybiBjW2FdfHxhfSk7cmV0dXJue3Nob3c6YixoaWRlOmR9fW49YW5ndWxhci5leHRlbmQoe30sYixkLG4pO3ZhciBxPWEoZSkscj1qLnN0YXJ0U3ltYm9sKCkscz1qLmVuZFN5bWJvbCgpLHQ9XCI8ZGl2IFwiK3ErJy1wb3B1cCB0aXRsZT1cIicrcitcInRpdGxlXCIrcysnXCIgJysobi51c2VDb250ZW50RXhwPydjb250ZW50LWV4cD1cImNvbnRlbnRFeHAoKVwiICc6J2NvbnRlbnQ9XCInK3IrXCJjb250ZW50XCIrcysnXCIgJykrJ3BsYWNlbWVudD1cIicrcitcInBsYWNlbWVudFwiK3MrJ1wiIHBvcHVwLWNsYXNzPVwiJytyK1wicG9wdXBDbGFzc1wiK3MrJ1wiIGFuaW1hdGlvbj1cImFuaW1hdGlvblwiIGlzLW9wZW49XCJpc09wZW5cIm9yaWdpbi1zY29wZT1cIm9yaWdTY29wZVwiIHN0eWxlPVwidmlzaWJpbGl0eTogaGlkZGVuOyBkaXNwbGF5OiBibG9jazsgdG9wOiAtOTk5OXB4OyBsZWZ0OiAtOTk5OXB4O1wiPjwvZGl2Pic7cmV0dXJue2NvbXBpbGU6ZnVuY3Rpb24oYSxiKXt2YXIgYz1mKHQpO3JldHVybiBmdW5jdGlvbihhLGIsZCxmKXtmdW5jdGlvbiBqKCl7TS5pc09wZW4/cSgpOm0oKX1mdW5jdGlvbiBtKCl7KCFMfHxhLiRldmFsKGRbaytcIkVuYWJsZVwiXSkpJiYodSgpLHgoKSxNLnBvcHVwRGVsYXk/R3x8KEc9ZyhyLE0ucG9wdXBEZWxheSwhMSkpOnIoKSl9ZnVuY3Rpb24gcSgpe3MoKSxNLnBvcHVwQ2xvc2VEZWxheT9IfHwoSD1nKHQsTS5wb3B1cENsb3NlRGVsYXksITEpKTp0KCl9ZnVuY3Rpb24gcigpe3JldHVybiBzKCksdSgpLE0uY29udGVudD8odigpLHZvaWQgTS4kZXZhbEFzeW5jKGZ1bmN0aW9uKCl7TS5pc09wZW49ITAseSghMCksUigpfSkpOmFuZ3VsYXIubm9vcH1mdW5jdGlvbiBzKCl7RyYmKGcuY2FuY2VsKEcpLEc9bnVsbCksSSYmKGcuY2FuY2VsKEkpLEk9bnVsbCl9ZnVuY3Rpb24gdCgpe00mJk0uJGV2YWxBc3luYyhmdW5jdGlvbigpe00uaXNPcGVuPSExLHkoITEpLE0uYW5pbWF0aW9uP0Z8fChGPWcodywxNTAsITEpKTp3KCl9KX1mdW5jdGlvbiB1KCl7SCYmKGcuY2FuY2VsKEgpLEg9bnVsbCksRiYmKGcuY2FuY2VsKEYpLEY9bnVsbCl9ZnVuY3Rpb24gdigpe0R8fChFPU0uJG5ldygpLEQ9YyhFLGZ1bmN0aW9uKGEpe0o/aC5maW5kKFwiYm9keVwiKS5hcHBlbmQoYSk6Yi5hZnRlcihhKX0pLHooKSl9ZnVuY3Rpb24gdygpe3MoKSx1KCksQSgpLEQmJihELnJlbW92ZSgpLEQ9bnVsbCksRSYmKEUuJGRlc3Ryb3koKSxFPW51bGwpfWZ1bmN0aW9uIHgoKXtNLnRpdGxlPWRbaytcIlRpdGxlXCJdLFA/TS5jb250ZW50PVAoYSk6TS5jb250ZW50PWRbZV0sTS5wb3B1cENsYXNzPWRbaytcIkNsYXNzXCJdLE0ucGxhY2VtZW50PWFuZ3VsYXIuaXNEZWZpbmVkKGRbaytcIlBsYWNlbWVudFwiXSk/ZFtrK1wiUGxhY2VtZW50XCJdOm4ucGxhY2VtZW50O3ZhciBiPXBhcnNlSW50KGRbaytcIlBvcHVwRGVsYXlcIl0sMTApLGM9cGFyc2VJbnQoZFtrK1wiUG9wdXBDbG9zZURlbGF5XCJdLDEwKTtNLnBvcHVwRGVsYXk9aXNOYU4oYik/bi5wb3B1cERlbGF5OmIsTS5wb3B1cENsb3NlRGVsYXk9aXNOYU4oYyk/bi5wb3B1cENsb3NlRGVsYXk6Y31mdW5jdGlvbiB5KGIpe08mJmFuZ3VsYXIuaXNGdW5jdGlvbihPLmFzc2lnbikmJk8uYXNzaWduKGEsYil9ZnVuY3Rpb24geigpe1EubGVuZ3RoPTAsUD8oUS5wdXNoKGEuJHdhdGNoKFAsZnVuY3Rpb24oYSl7TS5jb250ZW50PWEsIWEmJk0uaXNPcGVuJiZ0KCl9KSksUS5wdXNoKEUuJHdhdGNoKGZ1bmN0aW9uKCl7Tnx8KE49ITAsRS4kJHBvc3REaWdlc3QoZnVuY3Rpb24oKXtOPSExLE0mJk0uaXNPcGVuJiZSKCl9KSl9KSkpOlEucHVzaChkLiRvYnNlcnZlKGUsZnVuY3Rpb24oYSl7TS5jb250ZW50PWEsIWEmJk0uaXNPcGVuP3QoKTpSKCl9KSksUS5wdXNoKGQuJG9ic2VydmUoaytcIlRpdGxlXCIsZnVuY3Rpb24oYSl7TS50aXRsZT1hLE0uaXNPcGVuJiZSKCl9KSksUS5wdXNoKGQuJG9ic2VydmUoaytcIlBsYWNlbWVudFwiLGZ1bmN0aW9uKGEpe00ucGxhY2VtZW50PWE/YTpuLnBsYWNlbWVudCxNLmlzT3BlbiYmUigpfSkpfWZ1bmN0aW9uIEEoKXtRLmxlbmd0aCYmKGFuZ3VsYXIuZm9yRWFjaChRLGZ1bmN0aW9uKGEpe2EoKX0pLFEubGVuZ3RoPTApfWZ1bmN0aW9uIEIoYSl7TSYmTS5pc09wZW4mJkQmJihiWzBdLmNvbnRhaW5zKGEudGFyZ2V0KXx8RFswXS5jb250YWlucyhhLnRhcmdldCl8fHEoKSl9ZnVuY3Rpb24gQygpe3ZhciBhPWRbaytcIlRyaWdnZXJcIl07UygpLEs9cChhKSxcIm5vbmVcIiE9PUsuc2hvdyYmSy5zaG93LmZvckVhY2goZnVuY3Rpb24oYSxjKXtcIm91dHNpZGVDbGlja1wiPT09YT8oYi5vbihcImNsaWNrXCIsaiksaC5vbihcImNsaWNrXCIsQikpOmE9PT1LLmhpZGVbY10/Yi5vbihhLGopOmEmJihiLm9uKGEsbSksYi5vbihLLmhpZGVbY10scSkpLGIub24oXCJrZXlwcmVzc1wiLGZ1bmN0aW9uKGEpezI3PT09YS53aGljaCYmcSgpfSl9KX12YXIgRCxFLEYsRyxILEksSj1hbmd1bGFyLmlzRGVmaW5lZChuLmFwcGVuZFRvQm9keSk/bi5hcHBlbmRUb0JvZHk6ITEsSz1wKHZvaWQgMCksTD1hbmd1bGFyLmlzRGVmaW5lZChkW2srXCJFbmFibGVcIl0pLE09YS4kbmV3KCEwKSxOPSExLE89YW5ndWxhci5pc0RlZmluZWQoZFtrK1wiSXNPcGVuXCJdKT9sKGRbaytcIklzT3BlblwiXSk6ITEsUD1uLnVzZUNvbnRlbnRFeHA/bChkW2VdKTohMSxRPVtdLFI9ZnVuY3Rpb24oKXtEJiZELmh0bWwoKSYmKEl8fChJPWcoZnVuY3Rpb24oKXtELmNzcyh7dG9wOjAsbGVmdDowfSk7dmFyIGE9aS5wb3NpdGlvbkVsZW1lbnRzKGIsRCxNLnBsYWNlbWVudCxKKTtELmNzcyh7dG9wOmEudG9wK1wicHhcIixsZWZ0OmEubGVmdCtcInB4XCIsdmlzaWJpbGl0eTpcInZpc2libGVcIn0pLG4ucGxhY2VtZW50Q2xhc3NQcmVmaXgmJkQucmVtb3ZlQ2xhc3MoXCJ0b3AgYm90dG9tIGxlZnQgcmlnaHRcIiksRC5yZW1vdmVDbGFzcyhuLnBsYWNlbWVudENsYXNzUHJlZml4K1widG9wIFwiK24ucGxhY2VtZW50Q2xhc3NQcmVmaXgrXCJ0b3AtbGVmdCBcIituLnBsYWNlbWVudENsYXNzUHJlZml4K1widG9wLXJpZ2h0IFwiK24ucGxhY2VtZW50Q2xhc3NQcmVmaXgrXCJib3R0b20gXCIrbi5wbGFjZW1lbnRDbGFzc1ByZWZpeCtcImJvdHRvbS1sZWZ0IFwiK24ucGxhY2VtZW50Q2xhc3NQcmVmaXgrXCJib3R0b20tcmlnaHQgXCIrbi5wbGFjZW1lbnRDbGFzc1ByZWZpeCtcImxlZnQgXCIrbi5wbGFjZW1lbnRDbGFzc1ByZWZpeCtcImxlZnQtdG9wIFwiK24ucGxhY2VtZW50Q2xhc3NQcmVmaXgrXCJsZWZ0LWJvdHRvbSBcIituLnBsYWNlbWVudENsYXNzUHJlZml4K1wicmlnaHQgXCIrbi5wbGFjZW1lbnRDbGFzc1ByZWZpeCtcInJpZ2h0LXRvcCBcIituLnBsYWNlbWVudENsYXNzUHJlZml4K1wicmlnaHQtYm90dG9tXCIpO3ZhciBjPWEucGxhY2VtZW50LnNwbGl0KFwiLVwiKTtELmFkZENsYXNzKGNbMF0sbi5wbGFjZW1lbnRDbGFzc1ByZWZpeCthLnBsYWNlbWVudCksaS5wb3NpdGlvbkFycm93KEQsYS5wbGFjZW1lbnQpLEk9bnVsbH0sMCwhMSkpKX07TS5vcmlnU2NvcGU9YSxNLmlzT3Blbj0hMSxvLmFkZChNLHtjbG9zZTp0fSksTS5jb250ZW50RXhwPWZ1bmN0aW9uKCl7cmV0dXJuIE0uY29udGVudH0sZC4kb2JzZXJ2ZShcImRpc2FibGVkXCIsZnVuY3Rpb24oYSl7YSYmcygpLGEmJk0uaXNPcGVuJiZ0KCl9KSxPJiZhLiR3YXRjaChPLGZ1bmN0aW9uKGEpe00mJiFhPT09TS5pc09wZW4mJmooKX0pO3ZhciBTPWZ1bmN0aW9uKCl7Sy5zaG93LmZvckVhY2goZnVuY3Rpb24oYSl7XCJvdXRzaWRlQ2xpY2tcIj09PWE/Yi5vZmYoXCJjbGlja1wiLGopOihiLm9mZihhLG0pLGIub2ZmKGEsaikpfSksSy5oaWRlLmZvckVhY2goZnVuY3Rpb24oYSl7XCJvdXRzaWRlQ2xpY2tcIj09PWE/aC5vZmYoXCJjbGlja1wiLEIpOmIub2ZmKGEscSl9KX07QygpO3ZhciBUPWEuJGV2YWwoZFtrK1wiQW5pbWF0aW9uXCJdKTtNLmFuaW1hdGlvbj1hbmd1bGFyLmlzRGVmaW5lZChUKT8hIVQ6bi5hbmltYXRpb247dmFyIFUsVj1rK1wiQXBwZW5kVG9Cb2R5XCI7VT1WIGluIGQmJnZvaWQgMD09PWRbVl0/ITA6YS4kZXZhbChkW1ZdKSxKPWFuZ3VsYXIuaXNEZWZpbmVkKFUpP1U6SixKJiZhLiRvbihcIiRsb2NhdGlvbkNoYW5nZVN1Y2Nlc3NcIixmdW5jdGlvbigpe00uaXNPcGVuJiZ0KCl9KSxhLiRvbihcIiRkZXN0cm95XCIsZnVuY3Rpb24oKXtTKCksdygpLG8ucmVtb3ZlKE0pLE09bnVsbH0pfX19fX1dfSkuZGlyZWN0aXZlKFwidWliVG9vbHRpcFRlbXBsYXRlVHJhbnNjbHVkZVwiLFtcIiRhbmltYXRlXCIsXCIkc2NlXCIsXCIkY29tcGlsZVwiLFwiJHRlbXBsYXRlUmVxdWVzdFwiLGZ1bmN0aW9uKGEsYixjLGQpe3JldHVybntsaW5rOmZ1bmN0aW9uKGUsZixnKXt2YXIgaCxpLGosaz1lLiRldmFsKGcudG9vbHRpcFRlbXBsYXRlVHJhbnNjbHVkZVNjb3BlKSxsPTAsbT1mdW5jdGlvbigpe2kmJihpLnJlbW92ZSgpLGk9bnVsbCksaCYmKGguJGRlc3Ryb3koKSxoPW51bGwpLGomJihhLmxlYXZlKGopLnRoZW4oZnVuY3Rpb24oKXtpPW51bGx9KSxpPWosaj1udWxsKX07ZS4kd2F0Y2goYi5wYXJzZUFzUmVzb3VyY2VVcmwoZy51aWJUb29sdGlwVGVtcGxhdGVUcmFuc2NsdWRlKSxmdW5jdGlvbihiKXt2YXIgZz0rK2w7Yj8oZChiLCEwKS50aGVuKGZ1bmN0aW9uKGQpe2lmKGc9PT1sKXt2YXIgZT1rLiRuZXcoKSxpPWQsbj1jKGkpKGUsZnVuY3Rpb24oYil7bSgpLGEuZW50ZXIoYixmKX0pO2g9ZSxqPW4saC4kZW1pdChcIiRpbmNsdWRlQ29udGVudExvYWRlZFwiLGIpfX0sZnVuY3Rpb24oKXtnPT09bCYmKG0oKSxlLiRlbWl0KFwiJGluY2x1ZGVDb250ZW50RXJyb3JcIixiKSl9KSxlLiRlbWl0KFwiJGluY2x1ZGVDb250ZW50UmVxdWVzdGVkXCIsYikpOm0oKX0pLGUuJG9uKFwiJGRlc3Ryb3lcIixtKX19fV0pLmRpcmVjdGl2ZShcInVpYlRvb2x0aXBDbGFzc2VzXCIsW1wiJHVpYlBvc2l0aW9uXCIsZnVuY3Rpb24oYSl7cmV0dXJue3Jlc3RyaWN0OlwiQVwiLGxpbms6ZnVuY3Rpb24oYixjLGQpe2lmKGIucGxhY2VtZW50KXt2YXIgZT1hLnBhcnNlUGxhY2VtZW50KGIucGxhY2VtZW50KTtjLmFkZENsYXNzKGVbMF0pfWVsc2UgYy5hZGRDbGFzcyhcInRvcFwiKTtiLnBvcHVwQ2xhc3MmJmMuYWRkQ2xhc3MoYi5wb3B1cENsYXNzKSxiLmFuaW1hdGlvbigpJiZjLmFkZENsYXNzKGQudG9vbHRpcEFuaW1hdGlvbkNsYXNzKX19fV0pLmRpcmVjdGl2ZShcInVpYlRvb2x0aXBQb3B1cFwiLGZ1bmN0aW9uKCl7cmV0dXJue3JlcGxhY2U6ITAsc2NvcGU6e2NvbnRlbnQ6XCJAXCIscGxhY2VtZW50OlwiQFwiLHBvcHVwQ2xhc3M6XCJAXCIsYW5pbWF0aW9uOlwiJlwiLGlzT3BlbjpcIiZcIn0sdGVtcGxhdGVVcmw6XCJ1aWIvdGVtcGxhdGUvdG9vbHRpcC90b29sdGlwLXBvcHVwLmh0bWxcIn19KS5kaXJlY3RpdmUoXCJ1aWJUb29sdGlwXCIsW1wiJHVpYlRvb2x0aXBcIixmdW5jdGlvbihhKXtyZXR1cm4gYShcInVpYlRvb2x0aXBcIixcInRvb2x0aXBcIixcIm1vdXNlZW50ZXJcIil9XSkuZGlyZWN0aXZlKFwidWliVG9vbHRpcFRlbXBsYXRlUG9wdXBcIixmdW5jdGlvbigpe3JldHVybntyZXBsYWNlOiEwLHNjb3BlOntjb250ZW50RXhwOlwiJlwiLHBsYWNlbWVudDpcIkBcIixwb3B1cENsYXNzOlwiQFwiLGFuaW1hdGlvbjpcIiZcIixpc09wZW46XCImXCIsb3JpZ2luU2NvcGU6XCImXCJ9LHRlbXBsYXRlVXJsOlwidWliL3RlbXBsYXRlL3Rvb2x0aXAvdG9vbHRpcC10ZW1wbGF0ZS1wb3B1cC5odG1sXCJ9fSkuZGlyZWN0aXZlKFwidWliVG9vbHRpcFRlbXBsYXRlXCIsW1wiJHVpYlRvb2x0aXBcIixmdW5jdGlvbihhKXtyZXR1cm4gYShcInVpYlRvb2x0aXBUZW1wbGF0ZVwiLFwidG9vbHRpcFwiLFwibW91c2VlbnRlclwiLHt1c2VDb250ZW50RXhwOiEwfSl9XSkuZGlyZWN0aXZlKFwidWliVG9vbHRpcEh0bWxQb3B1cFwiLGZ1bmN0aW9uKCl7cmV0dXJue3JlcGxhY2U6ITAsc2NvcGU6e2NvbnRlbnRFeHA6XCImXCIsXHJcbnBsYWNlbWVudDpcIkBcIixwb3B1cENsYXNzOlwiQFwiLGFuaW1hdGlvbjpcIiZcIixpc09wZW46XCImXCJ9LHRlbXBsYXRlVXJsOlwidWliL3RlbXBsYXRlL3Rvb2x0aXAvdG9vbHRpcC1odG1sLXBvcHVwLmh0bWxcIn19KS5kaXJlY3RpdmUoXCJ1aWJUb29sdGlwSHRtbFwiLFtcIiR1aWJUb29sdGlwXCIsZnVuY3Rpb24oYSl7cmV0dXJuIGEoXCJ1aWJUb29sdGlwSHRtbFwiLFwidG9vbHRpcFwiLFwibW91c2VlbnRlclwiLHt1c2VDb250ZW50RXhwOiEwfSl9XSksYW5ndWxhci5tb2R1bGUoXCJ1aS5ib290c3RyYXAucG9wb3ZlclwiLFtcInVpLmJvb3RzdHJhcC50b29sdGlwXCJdKS5kaXJlY3RpdmUoXCJ1aWJQb3BvdmVyVGVtcGxhdGVQb3B1cFwiLGZ1bmN0aW9uKCl7cmV0dXJue3JlcGxhY2U6ITAsc2NvcGU6e3RpdGxlOlwiQFwiLGNvbnRlbnRFeHA6XCImXCIscGxhY2VtZW50OlwiQFwiLHBvcHVwQ2xhc3M6XCJAXCIsYW5pbWF0aW9uOlwiJlwiLGlzT3BlbjpcIiZcIixvcmlnaW5TY29wZTpcIiZcIn0sdGVtcGxhdGVVcmw6XCJ1aWIvdGVtcGxhdGUvcG9wb3Zlci9wb3BvdmVyLXRlbXBsYXRlLmh0bWxcIn19KS5kaXJlY3RpdmUoXCJ1aWJQb3BvdmVyVGVtcGxhdGVcIixbXCIkdWliVG9vbHRpcFwiLGZ1bmN0aW9uKGEpe3JldHVybiBhKFwidWliUG9wb3ZlclRlbXBsYXRlXCIsXCJwb3BvdmVyXCIsXCJjbGlja1wiLHt1c2VDb250ZW50RXhwOiEwfSl9XSkuZGlyZWN0aXZlKFwidWliUG9wb3Zlckh0bWxQb3B1cFwiLGZ1bmN0aW9uKCl7cmV0dXJue3JlcGxhY2U6ITAsc2NvcGU6e2NvbnRlbnRFeHA6XCImXCIsdGl0bGU6XCJAXCIscGxhY2VtZW50OlwiQFwiLHBvcHVwQ2xhc3M6XCJAXCIsYW5pbWF0aW9uOlwiJlwiLGlzT3BlbjpcIiZcIn0sdGVtcGxhdGVVcmw6XCJ1aWIvdGVtcGxhdGUvcG9wb3Zlci9wb3BvdmVyLWh0bWwuaHRtbFwifX0pLmRpcmVjdGl2ZShcInVpYlBvcG92ZXJIdG1sXCIsW1wiJHVpYlRvb2x0aXBcIixmdW5jdGlvbihhKXtyZXR1cm4gYShcInVpYlBvcG92ZXJIdG1sXCIsXCJwb3BvdmVyXCIsXCJjbGlja1wiLHt1c2VDb250ZW50RXhwOiEwfSl9XSkuZGlyZWN0aXZlKFwidWliUG9wb3ZlclBvcHVwXCIsZnVuY3Rpb24oKXtyZXR1cm57cmVwbGFjZTohMCxzY29wZTp7dGl0bGU6XCJAXCIsY29udGVudDpcIkBcIixwbGFjZW1lbnQ6XCJAXCIscG9wdXBDbGFzczpcIkBcIixhbmltYXRpb246XCImXCIsaXNPcGVuOlwiJlwifSx0ZW1wbGF0ZVVybDpcInVpYi90ZW1wbGF0ZS9wb3BvdmVyL3BvcG92ZXIuaHRtbFwifX0pLmRpcmVjdGl2ZShcInVpYlBvcG92ZXJcIixbXCIkdWliVG9vbHRpcFwiLGZ1bmN0aW9uKGEpe3JldHVybiBhKFwidWliUG9wb3ZlclwiLFwicG9wb3ZlclwiLFwiY2xpY2tcIil9XSksYW5ndWxhci5tb2R1bGUoXCJ1aS5ib290c3RyYXAucHJvZ3Jlc3NiYXJcIixbXSkuY29uc3RhbnQoXCJ1aWJQcm9ncmVzc0NvbmZpZ1wiLHthbmltYXRlOiEwLG1heDoxMDB9KS5jb250cm9sbGVyKFwiVWliUHJvZ3Jlc3NDb250cm9sbGVyXCIsW1wiJHNjb3BlXCIsXCIkYXR0cnNcIixcInVpYlByb2dyZXNzQ29uZmlnXCIsZnVuY3Rpb24oYSxiLGMpe3ZhciBkPXRoaXMsZT1hbmd1bGFyLmlzRGVmaW5lZChiLmFuaW1hdGUpP2EuJHBhcmVudC4kZXZhbChiLmFuaW1hdGUpOmMuYW5pbWF0ZTt0aGlzLmJhcnM9W10sYS5tYXg9YW5ndWxhci5pc0RlZmluZWQoYS5tYXgpP2EubWF4OmMubWF4LHRoaXMuYWRkQmFyPWZ1bmN0aW9uKGIsYyxmKXtlfHxjLmNzcyh7dHJhbnNpdGlvbjpcIm5vbmVcIn0pLHRoaXMuYmFycy5wdXNoKGIpLGIubWF4PWEubWF4LGIudGl0bGU9ZiYmYW5ndWxhci5pc0RlZmluZWQoZi50aXRsZSk/Zi50aXRsZTpcInByb2dyZXNzYmFyXCIsYi4kd2F0Y2goXCJ2YWx1ZVwiLGZ1bmN0aW9uKGEpe2IucmVjYWxjdWxhdGVQZXJjZW50YWdlKCl9KSxiLnJlY2FsY3VsYXRlUGVyY2VudGFnZT1mdW5jdGlvbigpe3ZhciBhPWQuYmFycy5yZWR1Y2UoZnVuY3Rpb24oYSxiKXtyZXR1cm4gYi5wZXJjZW50PSsoMTAwKmIudmFsdWUvYi5tYXgpLnRvRml4ZWQoMiksYStiLnBlcmNlbnR9LDApO2E+MTAwJiYoYi5wZXJjZW50LT1hLTEwMCl9LGIuJG9uKFwiJGRlc3Ryb3lcIixmdW5jdGlvbigpe2M9bnVsbCxkLnJlbW92ZUJhcihiKX0pfSx0aGlzLnJlbW92ZUJhcj1mdW5jdGlvbihhKXt0aGlzLmJhcnMuc3BsaWNlKHRoaXMuYmFycy5pbmRleE9mKGEpLDEpLHRoaXMuYmFycy5mb3JFYWNoKGZ1bmN0aW9uKGEpe2EucmVjYWxjdWxhdGVQZXJjZW50YWdlKCl9KX0sYS4kd2F0Y2goXCJtYXhcIixmdW5jdGlvbihiKXtkLmJhcnMuZm9yRWFjaChmdW5jdGlvbihiKXtiLm1heD1hLm1heCxiLnJlY2FsY3VsYXRlUGVyY2VudGFnZSgpfSl9KX1dKS5kaXJlY3RpdmUoXCJ1aWJQcm9ncmVzc1wiLGZ1bmN0aW9uKCl7cmV0dXJue3JlcGxhY2U6ITAsdHJhbnNjbHVkZTohMCxjb250cm9sbGVyOlwiVWliUHJvZ3Jlc3NDb250cm9sbGVyXCIscmVxdWlyZTpcInVpYlByb2dyZXNzXCIsc2NvcGU6e21heDpcIj0/XCJ9LHRlbXBsYXRlVXJsOlwidWliL3RlbXBsYXRlL3Byb2dyZXNzYmFyL3Byb2dyZXNzLmh0bWxcIn19KS5kaXJlY3RpdmUoXCJ1aWJCYXJcIixmdW5jdGlvbigpe3JldHVybntyZXBsYWNlOiEwLHRyYW5zY2x1ZGU6ITAscmVxdWlyZTpcIl51aWJQcm9ncmVzc1wiLHNjb3BlOnt2YWx1ZTpcIj1cIix0eXBlOlwiQFwifSx0ZW1wbGF0ZVVybDpcInVpYi90ZW1wbGF0ZS9wcm9ncmVzc2Jhci9iYXIuaHRtbFwiLGxpbms6ZnVuY3Rpb24oYSxiLGMsZCl7ZC5hZGRCYXIoYSxiLGMpfX19KS5kaXJlY3RpdmUoXCJ1aWJQcm9ncmVzc2JhclwiLGZ1bmN0aW9uKCl7cmV0dXJue3JlcGxhY2U6ITAsdHJhbnNjbHVkZTohMCxjb250cm9sbGVyOlwiVWliUHJvZ3Jlc3NDb250cm9sbGVyXCIsc2NvcGU6e3ZhbHVlOlwiPVwiLG1heDpcIj0/XCIsdHlwZTpcIkBcIn0sdGVtcGxhdGVVcmw6XCJ1aWIvdGVtcGxhdGUvcHJvZ3Jlc3NiYXIvcHJvZ3Jlc3NiYXIuaHRtbFwiLGxpbms6ZnVuY3Rpb24oYSxiLGMsZCl7ZC5hZGRCYXIoYSxhbmd1bGFyLmVsZW1lbnQoYi5jaGlsZHJlbigpWzBdKSx7dGl0bGU6Yy50aXRsZX0pfX19KSxhbmd1bGFyLm1vZHVsZShcInVpLmJvb3RzdHJhcC5yYXRpbmdcIixbXSkuY29uc3RhbnQoXCJ1aWJSYXRpbmdDb25maWdcIix7bWF4OjUsc3RhdGVPbjpudWxsLHN0YXRlT2ZmOm51bGwsdGl0bGVzOltcIm9uZVwiLFwidHdvXCIsXCJ0aHJlZVwiLFwiZm91clwiLFwiZml2ZVwiXX0pLmNvbnRyb2xsZXIoXCJVaWJSYXRpbmdDb250cm9sbGVyXCIsW1wiJHNjb3BlXCIsXCIkYXR0cnNcIixcInVpYlJhdGluZ0NvbmZpZ1wiLGZ1bmN0aW9uKGEsYixjKXt2YXIgZD17JHNldFZpZXdWYWx1ZTphbmd1bGFyLm5vb3B9O3RoaXMuaW5pdD1mdW5jdGlvbihlKXtkPWUsZC4kcmVuZGVyPXRoaXMucmVuZGVyLGQuJGZvcm1hdHRlcnMucHVzaChmdW5jdGlvbihhKXtyZXR1cm4gYW5ndWxhci5pc051bWJlcihhKSYmYTw8MCE9PWEmJihhPU1hdGgucm91bmQoYSkpLGF9KSx0aGlzLnN0YXRlT249YW5ndWxhci5pc0RlZmluZWQoYi5zdGF0ZU9uKT9hLiRwYXJlbnQuJGV2YWwoYi5zdGF0ZU9uKTpjLnN0YXRlT24sdGhpcy5zdGF0ZU9mZj1hbmd1bGFyLmlzRGVmaW5lZChiLnN0YXRlT2ZmKT9hLiRwYXJlbnQuJGV2YWwoYi5zdGF0ZU9mZik6Yy5zdGF0ZU9mZjt2YXIgZj1hbmd1bGFyLmlzRGVmaW5lZChiLnRpdGxlcyk/YS4kcGFyZW50LiRldmFsKGIudGl0bGVzKTpjLnRpdGxlczt0aGlzLnRpdGxlcz1hbmd1bGFyLmlzQXJyYXkoZikmJmYubGVuZ3RoPjA/ZjpjLnRpdGxlczt2YXIgZz1hbmd1bGFyLmlzRGVmaW5lZChiLnJhdGluZ1N0YXRlcyk/YS4kcGFyZW50LiRldmFsKGIucmF0aW5nU3RhdGVzKTpuZXcgQXJyYXkoYW5ndWxhci5pc0RlZmluZWQoYi5tYXgpP2EuJHBhcmVudC4kZXZhbChiLm1heCk6Yy5tYXgpO2EucmFuZ2U9dGhpcy5idWlsZFRlbXBsYXRlT2JqZWN0cyhnKX0sdGhpcy5idWlsZFRlbXBsYXRlT2JqZWN0cz1mdW5jdGlvbihhKXtmb3IodmFyIGI9MCxjPWEubGVuZ3RoO2M+YjtiKyspYVtiXT1hbmd1bGFyLmV4dGVuZCh7aW5kZXg6Yn0se3N0YXRlT246dGhpcy5zdGF0ZU9uLHN0YXRlT2ZmOnRoaXMuc3RhdGVPZmYsdGl0bGU6dGhpcy5nZXRUaXRsZShiKX0sYVtiXSk7cmV0dXJuIGF9LHRoaXMuZ2V0VGl0bGU9ZnVuY3Rpb24oYSl7cmV0dXJuIGE+PXRoaXMudGl0bGVzLmxlbmd0aD9hKzE6dGhpcy50aXRsZXNbYV19LGEucmF0ZT1mdW5jdGlvbihiKXshYS5yZWFkb25seSYmYj49MCYmYjw9YS5yYW5nZS5sZW5ndGgmJihkLiRzZXRWaWV3VmFsdWUoZC4kdmlld1ZhbHVlPT09Yj8wOmIpLGQuJHJlbmRlcigpKX0sYS5lbnRlcj1mdW5jdGlvbihiKXthLnJlYWRvbmx5fHwoYS52YWx1ZT1iKSxhLm9uSG92ZXIoe3ZhbHVlOmJ9KX0sYS5yZXNldD1mdW5jdGlvbigpe2EudmFsdWU9ZC4kdmlld1ZhbHVlLGEub25MZWF2ZSgpfSxhLm9uS2V5ZG93bj1mdW5jdGlvbihiKXsvKDM3fDM4fDM5fDQwKS8udGVzdChiLndoaWNoKSYmKGIucHJldmVudERlZmF1bHQoKSxiLnN0b3BQcm9wYWdhdGlvbigpLGEucmF0ZShhLnZhbHVlKygzOD09PWIud2hpY2h8fDM5PT09Yi53aGljaD8xOi0xKSkpfSx0aGlzLnJlbmRlcj1mdW5jdGlvbigpe2EudmFsdWU9ZC4kdmlld1ZhbHVlfX1dKS5kaXJlY3RpdmUoXCJ1aWJSYXRpbmdcIixmdW5jdGlvbigpe3JldHVybntyZXF1aXJlOltcInVpYlJhdGluZ1wiLFwibmdNb2RlbFwiXSxzY29wZTp7cmVhZG9ubHk6XCI9P1wiLG9uSG92ZXI6XCImXCIsb25MZWF2ZTpcIiZcIn0sY29udHJvbGxlcjpcIlVpYlJhdGluZ0NvbnRyb2xsZXJcIix0ZW1wbGF0ZVVybDpcInVpYi90ZW1wbGF0ZS9yYXRpbmcvcmF0aW5nLmh0bWxcIixyZXBsYWNlOiEwLGxpbms6ZnVuY3Rpb24oYSxiLGMsZCl7dmFyIGU9ZFswXSxmPWRbMV07ZS5pbml0KGYpfX19KSxhbmd1bGFyLm1vZHVsZShcInVpLmJvb3RzdHJhcC50YWJzXCIsW10pLmNvbnRyb2xsZXIoXCJVaWJUYWJzZXRDb250cm9sbGVyXCIsW1wiJHNjb3BlXCIsZnVuY3Rpb24oYSl7dmFyIGI9dGhpcyxjPWIudGFicz1hLnRhYnM9W107Yi5zZWxlY3Q9ZnVuY3Rpb24oYSl7YW5ndWxhci5mb3JFYWNoKGMsZnVuY3Rpb24oYil7Yi5hY3RpdmUmJmIhPT1hJiYoYi5hY3RpdmU9ITEsYi5vbkRlc2VsZWN0KCksYS5zZWxlY3RDYWxsZWQ9ITEpfSksYS5hY3RpdmU9ITAsYS5zZWxlY3RDYWxsZWR8fChhLm9uU2VsZWN0KCksYS5zZWxlY3RDYWxsZWQ9ITApfSxiLmFkZFRhYj1mdW5jdGlvbihhKXtjLnB1c2goYSksMT09PWMubGVuZ3RoJiZhLmFjdGl2ZSE9PSExP2EuYWN0aXZlPSEwOmEuYWN0aXZlP2Iuc2VsZWN0KGEpOmEuYWN0aXZlPSExfSxiLnJlbW92ZVRhYj1mdW5jdGlvbihhKXt2YXIgZT1jLmluZGV4T2YoYSk7aWYoYS5hY3RpdmUmJmMubGVuZ3RoPjEmJiFkKXt2YXIgZj1lPT09Yy5sZW5ndGgtMT9lLTE6ZSsxO2Iuc2VsZWN0KGNbZl0pfWMuc3BsaWNlKGUsMSl9O3ZhciBkO2EuJG9uKFwiJGRlc3Ryb3lcIixmdW5jdGlvbigpe2Q9ITB9KX1dKS5kaXJlY3RpdmUoXCJ1aWJUYWJzZXRcIixmdW5jdGlvbigpe3JldHVybnt0cmFuc2NsdWRlOiEwLHJlcGxhY2U6ITAsc2NvcGU6e3R5cGU6XCJAXCJ9LGNvbnRyb2xsZXI6XCJVaWJUYWJzZXRDb250cm9sbGVyXCIsdGVtcGxhdGVVcmw6XCJ1aWIvdGVtcGxhdGUvdGFicy90YWJzZXQuaHRtbFwiLGxpbms6ZnVuY3Rpb24oYSxiLGMpe2EudmVydGljYWw9YW5ndWxhci5pc0RlZmluZWQoYy52ZXJ0aWNhbCk/YS4kcGFyZW50LiRldmFsKGMudmVydGljYWwpOiExLGEuanVzdGlmaWVkPWFuZ3VsYXIuaXNEZWZpbmVkKGMuanVzdGlmaWVkKT9hLiRwYXJlbnQuJGV2YWwoYy5qdXN0aWZpZWQpOiExfX19KS5kaXJlY3RpdmUoXCJ1aWJUYWJcIixbXCIkcGFyc2VcIixmdW5jdGlvbihhKXtyZXR1cm57cmVxdWlyZTpcIl51aWJUYWJzZXRcIixyZXBsYWNlOiEwLHRlbXBsYXRlVXJsOlwidWliL3RlbXBsYXRlL3RhYnMvdGFiLmh0bWxcIix0cmFuc2NsdWRlOiEwLHNjb3BlOnthY3RpdmU6XCI9P1wiLGhlYWRpbmc6XCJAXCIsb25TZWxlY3Q6XCImc2VsZWN0XCIsb25EZXNlbGVjdDpcIiZkZXNlbGVjdFwifSxjb250cm9sbGVyOmZ1bmN0aW9uKCl7fSxjb250cm9sbGVyQXM6XCJ0YWJcIixsaW5rOmZ1bmN0aW9uKGIsYyxkLGUsZil7Yi4kd2F0Y2goXCJhY3RpdmVcIixmdW5jdGlvbihhKXthJiZlLnNlbGVjdChiKX0pLGIuZGlzYWJsZWQ9ITEsZC5kaXNhYmxlJiZiLiRwYXJlbnQuJHdhdGNoKGEoZC5kaXNhYmxlKSxmdW5jdGlvbihhKXtiLmRpc2FibGVkPSEhYX0pLGIuc2VsZWN0PWZ1bmN0aW9uKCl7Yi5kaXNhYmxlZHx8KGIuYWN0aXZlPSEwKX0sZS5hZGRUYWIoYiksYi4kb24oXCIkZGVzdHJveVwiLGZ1bmN0aW9uKCl7ZS5yZW1vdmVUYWIoYil9KSxiLiR0cmFuc2NsdWRlRm49Zn19fV0pLmRpcmVjdGl2ZShcInVpYlRhYkhlYWRpbmdUcmFuc2NsdWRlXCIsZnVuY3Rpb24oKXtyZXR1cm57cmVzdHJpY3Q6XCJBXCIscmVxdWlyZTpcIl51aWJUYWJcIixsaW5rOmZ1bmN0aW9uKGEsYil7YS4kd2F0Y2goXCJoZWFkaW5nRWxlbWVudFwiLGZ1bmN0aW9uKGEpe2EmJihiLmh0bWwoXCJcIiksYi5hcHBlbmQoYSkpfSl9fX0pLmRpcmVjdGl2ZShcInVpYlRhYkNvbnRlbnRUcmFuc2NsdWRlXCIsZnVuY3Rpb24oKXtmdW5jdGlvbiBhKGEpe3JldHVybiBhLnRhZ05hbWUmJihhLmhhc0F0dHJpYnV0ZShcInVpYi10YWItaGVhZGluZ1wiKXx8YS5oYXNBdHRyaWJ1dGUoXCJkYXRhLXVpYi10YWItaGVhZGluZ1wiKXx8YS5oYXNBdHRyaWJ1dGUoXCJ4LXVpYi10YWItaGVhZGluZ1wiKXx8XCJ1aWItdGFiLWhlYWRpbmdcIj09PWEudGFnTmFtZS50b0xvd2VyQ2FzZSgpfHxcImRhdGEtdWliLXRhYi1oZWFkaW5nXCI9PT1hLnRhZ05hbWUudG9Mb3dlckNhc2UoKXx8XCJ4LXVpYi10YWItaGVhZGluZ1wiPT09YS50YWdOYW1lLnRvTG93ZXJDYXNlKCkpfXJldHVybntyZXN0cmljdDpcIkFcIixyZXF1aXJlOlwiXnVpYlRhYnNldFwiLGxpbms6ZnVuY3Rpb24oYixjLGQpe3ZhciBlPWIuJGV2YWwoZC51aWJUYWJDb250ZW50VHJhbnNjbHVkZSk7ZS4kdHJhbnNjbHVkZUZuKGUuJHBhcmVudCxmdW5jdGlvbihiKXthbmd1bGFyLmZvckVhY2goYixmdW5jdGlvbihiKXthKGIpP2UuaGVhZGluZ0VsZW1lbnQ9YjpjLmFwcGVuZChiKX0pfSl9fX0pLGFuZ3VsYXIubW9kdWxlKFwidWkuYm9vdHN0cmFwLnRpbWVwaWNrZXJcIixbXSkuY29uc3RhbnQoXCJ1aWJUaW1lcGlja2VyQ29uZmlnXCIse2hvdXJTdGVwOjEsbWludXRlU3RlcDoxLHNlY29uZFN0ZXA6MSxzaG93TWVyaWRpYW46ITAsc2hvd1NlY29uZHM6ITEsbWVyaWRpYW5zOm51bGwscmVhZG9ubHlJbnB1dDohMSxtb3VzZXdoZWVsOiEwLGFycm93a2V5czohMCxzaG93U3Bpbm5lcnM6ITAsdGVtcGxhdGVVcmw6XCJ1aWIvdGVtcGxhdGUvdGltZXBpY2tlci90aW1lcGlja2VyLmh0bWxcIn0pLmNvbnRyb2xsZXIoXCJVaWJUaW1lcGlja2VyQ29udHJvbGxlclwiLFtcIiRzY29wZVwiLFwiJGVsZW1lbnRcIixcIiRhdHRyc1wiLFwiJHBhcnNlXCIsXCIkbG9nXCIsXCIkbG9jYWxlXCIsXCJ1aWJUaW1lcGlja2VyQ29uZmlnXCIsZnVuY3Rpb24oYSxiLGMsZCxlLGYsZyl7ZnVuY3Rpb24gaCgpe3ZhciBiPSthLmhvdXJzLGM9YS5zaG93TWVyaWRpYW4/Yj4wJiYxMz5iOmI+PTAmJjI0PmI7cmV0dXJuIGM/KGEuc2hvd01lcmlkaWFuJiYoMTI9PT1iJiYoYj0wKSxhLm1lcmlkaWFuPT09dFsxXSYmKGIrPTEyKSksYik6dm9pZCAwfWZ1bmN0aW9uIGkoKXt2YXIgYj0rYS5taW51dGVzO3JldHVybiBiPj0wJiY2MD5iP2I6dm9pZCAwfWZ1bmN0aW9uIGooKXt2YXIgYj0rYS5zZWNvbmRzO3JldHVybiBiPj0wJiY2MD5iP2I6dm9pZCAwfWZ1bmN0aW9uIGsoYSl7cmV0dXJuIG51bGw9PT1hP1wiXCI6YW5ndWxhci5pc0RlZmluZWQoYSkmJmEudG9TdHJpbmcoKS5sZW5ndGg8Mj9cIjBcIithOmEudG9TdHJpbmcoKX1mdW5jdGlvbiBsKGEpe20oKSxzLiRzZXRWaWV3VmFsdWUobmV3IERhdGUocikpLG4oYSl9ZnVuY3Rpb24gbSgpe3MuJHNldFZhbGlkaXR5KFwidGltZVwiLCEwKSxhLmludmFsaWRIb3Vycz0hMSxhLmludmFsaWRNaW51dGVzPSExLGEuaW52YWxpZFNlY29uZHM9ITF9ZnVuY3Rpb24gbihiKXtpZihzLiRtb2RlbFZhbHVlKXt2YXIgYz1yLmdldEhvdXJzKCksZD1yLmdldE1pbnV0ZXMoKSxlPXIuZ2V0U2Vjb25kcygpO2Euc2hvd01lcmlkaWFuJiYoYz0wPT09Y3x8MTI9PT1jPzEyOmMlMTIpLGEuaG91cnM9XCJoXCI9PT1iP2M6ayhjKSxcIm1cIiE9PWImJihhLm1pbnV0ZXM9ayhkKSksYS5tZXJpZGlhbj1yLmdldEhvdXJzKCk8MTI/dFswXTp0WzFdLFwic1wiIT09YiYmKGEuc2Vjb25kcz1rKGUpKSxhLm1lcmlkaWFuPXIuZ2V0SG91cnMoKTwxMj90WzBdOnRbMV19ZWxzZSBhLmhvdXJzPW51bGwsYS5taW51dGVzPW51bGwsYS5zZWNvbmRzPW51bGwsYS5tZXJpZGlhbj10WzBdfWZ1bmN0aW9uIG8oYSl7cj1xKHIsYSksbCgpfWZ1bmN0aW9uIHAoYSxiKXtyZXR1cm4gcShhLDYwKmIpfWZ1bmN0aW9uIHEoYSxiKXt2YXIgYz1uZXcgRGF0ZShhLmdldFRpbWUoKSsxZTMqYiksZD1uZXcgRGF0ZShhKTtyZXR1cm4gZC5zZXRIb3VycyhjLmdldEhvdXJzKCksYy5nZXRNaW51dGVzKCksYy5nZXRTZWNvbmRzKCkpLGR9dmFyIHI9bmV3IERhdGUscz17JHNldFZpZXdWYWx1ZTphbmd1bGFyLm5vb3B9LHQ9YW5ndWxhci5pc0RlZmluZWQoYy5tZXJpZGlhbnMpP2EuJHBhcmVudC4kZXZhbChjLm1lcmlkaWFucyk6Zy5tZXJpZGlhbnN8fGYuREFURVRJTUVfRk9STUFUUy5BTVBNUzthLnRhYmluZGV4PWFuZ3VsYXIuaXNEZWZpbmVkKGMudGFiaW5kZXgpP2MudGFiaW5kZXg6MCxiLnJlbW92ZUF0dHIoXCJ0YWJpbmRleFwiKSx0aGlzLmluaXQ9ZnVuY3Rpb24oYixkKXtzPWIscy4kcmVuZGVyPXRoaXMucmVuZGVyLHMuJGZvcm1hdHRlcnMudW5zaGlmdChmdW5jdGlvbihhKXtyZXR1cm4gYT9uZXcgRGF0ZShhKTpudWxsfSk7dmFyIGU9ZC5lcSgwKSxmPWQuZXEoMSksaD1kLmVxKDIpLGk9YW5ndWxhci5pc0RlZmluZWQoYy5tb3VzZXdoZWVsKT9hLiRwYXJlbnQuJGV2YWwoYy5tb3VzZXdoZWVsKTpnLm1vdXNld2hlZWw7aSYmdGhpcy5zZXR1cE1vdXNld2hlZWxFdmVudHMoZSxmLGgpO3ZhciBqPWFuZ3VsYXIuaXNEZWZpbmVkKGMuYXJyb3drZXlzKT9hLiRwYXJlbnQuJGV2YWwoYy5hcnJvd2tleXMpOmcuYXJyb3drZXlzO2omJnRoaXMuc2V0dXBBcnJvd2tleUV2ZW50cyhlLGYsaCksYS5yZWFkb25seUlucHV0PWFuZ3VsYXIuaXNEZWZpbmVkKGMucmVhZG9ubHlJbnB1dCk/YS4kcGFyZW50LiRldmFsKGMucmVhZG9ubHlJbnB1dCk6Zy5yZWFkb25seUlucHV0LHRoaXMuc2V0dXBJbnB1dEV2ZW50cyhlLGYsaCl9O3ZhciB1PWcuaG91clN0ZXA7Yy5ob3VyU3RlcCYmYS4kcGFyZW50LiR3YXRjaChkKGMuaG91clN0ZXApLGZ1bmN0aW9uKGEpe3U9K2F9KTt2YXIgdj1nLm1pbnV0ZVN0ZXA7Yy5taW51dGVTdGVwJiZhLiRwYXJlbnQuJHdhdGNoKGQoYy5taW51dGVTdGVwKSxmdW5jdGlvbihhKXt2PSthfSk7dmFyIHc7YS4kcGFyZW50LiR3YXRjaChkKGMubWluKSxmdW5jdGlvbihhKXt2YXIgYj1uZXcgRGF0ZShhKTt3PWlzTmFOKGIpP3ZvaWQgMDpifSk7dmFyIHg7YS4kcGFyZW50LiR3YXRjaChkKGMubWF4KSxmdW5jdGlvbihhKXt2YXIgYj1uZXcgRGF0ZShhKTt4PWlzTmFOKGIpP3ZvaWQgMDpifSk7dmFyIHk9ITE7Yy5uZ0Rpc2FibGVkJiZhLiRwYXJlbnQuJHdhdGNoKGQoYy5uZ0Rpc2FibGVkKSxmdW5jdGlvbihhKXt5PWF9KSxhLm5vSW5jcmVtZW50SG91cnM9ZnVuY3Rpb24oKXt2YXIgYT1wKHIsNjAqdSk7cmV0dXJuIHl8fGE+eHx8cj5hJiZ3PmF9LGEubm9EZWNyZW1lbnRIb3Vycz1mdW5jdGlvbigpe3ZhciBhPXAociw2MCotdSk7cmV0dXJuIHl8fHc+YXx8YT5yJiZhPnh9LGEubm9JbmNyZW1lbnRNaW51dGVzPWZ1bmN0aW9uKCl7dmFyIGE9cChyLHYpO3JldHVybiB5fHxhPnh8fHI+YSYmdz5hfSxhLm5vRGVjcmVtZW50TWludXRlcz1mdW5jdGlvbigpe3ZhciBhPXAociwtdik7cmV0dXJuIHl8fHc+YXx8YT5yJiZhPnh9LGEubm9JbmNyZW1lbnRTZWNvbmRzPWZ1bmN0aW9uKCl7dmFyIGE9cShyLHopO3JldHVybiB5fHxhPnh8fHI+YSYmdz5hfSxhLm5vRGVjcmVtZW50U2Vjb25kcz1mdW5jdGlvbigpe3ZhciBhPXEociwteik7cmV0dXJuIHl8fHc+YXx8YT5yJiZhPnh9LGEubm9Ub2dnbGVNZXJpZGlhbj1mdW5jdGlvbigpe3JldHVybiByLmdldEhvdXJzKCk8MTI/eXx8cChyLDcyMCk+eDp5fHxwKHIsLTcyMCk8d307dmFyIHo9Zy5zZWNvbmRTdGVwO2Muc2Vjb25kU3RlcCYmYS4kcGFyZW50LiR3YXRjaChkKGMuc2Vjb25kU3RlcCksZnVuY3Rpb24oYSl7ej0rYX0pLGEuc2hvd1NlY29uZHM9Zy5zaG93U2Vjb25kcyxjLnNob3dTZWNvbmRzJiZhLiRwYXJlbnQuJHdhdGNoKGQoYy5zaG93U2Vjb25kcyksZnVuY3Rpb24oYil7YS5zaG93U2Vjb25kcz0hIWJ9KSxhLnNob3dNZXJpZGlhbj1nLnNob3dNZXJpZGlhbixjLnNob3dNZXJpZGlhbiYmYS4kcGFyZW50LiR3YXRjaChkKGMuc2hvd01lcmlkaWFuKSxmdW5jdGlvbihiKXtpZihhLnNob3dNZXJpZGlhbj0hIWIscy4kZXJyb3IudGltZSl7dmFyIGM9aCgpLGQ9aSgpO2FuZ3VsYXIuaXNEZWZpbmVkKGMpJiZhbmd1bGFyLmlzRGVmaW5lZChkKSYmKHIuc2V0SG91cnMoYyksbCgpKX1lbHNlIG4oKX0pLHRoaXMuc2V0dXBNb3VzZXdoZWVsRXZlbnRzPWZ1bmN0aW9uKGIsYyxkKXt2YXIgZT1mdW5jdGlvbihhKXthLm9yaWdpbmFsRXZlbnQmJihhPWEub3JpZ2luYWxFdmVudCk7dmFyIGI9YS53aGVlbERlbHRhP2Eud2hlZWxEZWx0YTotYS5kZWx0YVk7cmV0dXJuIGEuZGV0YWlsfHxiPjB9O2IuYmluZChcIm1vdXNld2hlZWwgd2hlZWxcIixmdW5jdGlvbihiKXt5fHxhLiRhcHBseShlKGIpP2EuaW5jcmVtZW50SG91cnMoKTphLmRlY3JlbWVudEhvdXJzKCkpLGIucHJldmVudERlZmF1bHQoKX0pLGMuYmluZChcIm1vdXNld2hlZWwgd2hlZWxcIixmdW5jdGlvbihiKXt5fHxhLiRhcHBseShlKGIpP2EuaW5jcmVtZW50TWludXRlcygpOmEuZGVjcmVtZW50TWludXRlcygpKSxiLnByZXZlbnREZWZhdWx0KCl9KSxkLmJpbmQoXCJtb3VzZXdoZWVsIHdoZWVsXCIsZnVuY3Rpb24oYil7eXx8YS4kYXBwbHkoZShiKT9hLmluY3JlbWVudFNlY29uZHMoKTphLmRlY3JlbWVudFNlY29uZHMoKSksYi5wcmV2ZW50RGVmYXVsdCgpfSl9LHRoaXMuc2V0dXBBcnJvd2tleUV2ZW50cz1mdW5jdGlvbihiLGMsZCl7Yi5iaW5kKFwia2V5ZG93blwiLGZ1bmN0aW9uKGIpe3l8fCgzOD09PWIud2hpY2g/KGIucHJldmVudERlZmF1bHQoKSxhLmluY3JlbWVudEhvdXJzKCksYS4kYXBwbHkoKSk6NDA9PT1iLndoaWNoJiYoYi5wcmV2ZW50RGVmYXVsdCgpLGEuZGVjcmVtZW50SG91cnMoKSxhLiRhcHBseSgpKSl9KSxjLmJpbmQoXCJrZXlkb3duXCIsZnVuY3Rpb24oYil7eXx8KDM4PT09Yi53aGljaD8oYi5wcmV2ZW50RGVmYXVsdCgpLGEuaW5jcmVtZW50TWludXRlcygpLGEuJGFwcGx5KCkpOjQwPT09Yi53aGljaCYmKGIucHJldmVudERlZmF1bHQoKSxhLmRlY3JlbWVudE1pbnV0ZXMoKSxhLiRhcHBseSgpKSl9KSxkLmJpbmQoXCJrZXlkb3duXCIsZnVuY3Rpb24oYil7eXx8KDM4PT09Yi53aGljaD8oYi5wcmV2ZW50RGVmYXVsdCgpLGEuaW5jcmVtZW50U2Vjb25kcygpLGEuJGFwcGx5KCkpOjQwPT09Yi53aGljaCYmKGIucHJldmVudERlZmF1bHQoKSxhLmRlY3JlbWVudFNlY29uZHMoKSxhLiRhcHBseSgpKSl9KX0sdGhpcy5zZXR1cElucHV0RXZlbnRzPWZ1bmN0aW9uKGIsYyxkKXtpZihhLnJlYWRvbmx5SW5wdXQpcmV0dXJuIGEudXBkYXRlSG91cnM9YW5ndWxhci5ub29wLGEudXBkYXRlTWludXRlcz1hbmd1bGFyLm5vb3Asdm9pZChhLnVwZGF0ZVNlY29uZHM9YW5ndWxhci5ub29wKTt2YXIgZT1mdW5jdGlvbihiLGMsZCl7cy4kc2V0Vmlld1ZhbHVlKG51bGwpLHMuJHNldFZhbGlkaXR5KFwidGltZVwiLCExKSxhbmd1bGFyLmlzRGVmaW5lZChiKSYmKGEuaW52YWxpZEhvdXJzPWIpLGFuZ3VsYXIuaXNEZWZpbmVkKGMpJiYoYS5pbnZhbGlkTWludXRlcz1jKSxhbmd1bGFyLmlzRGVmaW5lZChkKSYmKGEuaW52YWxpZFNlY29uZHM9ZCl9O2EudXBkYXRlSG91cnM9ZnVuY3Rpb24oKXt2YXIgYT1oKCksYj1pKCk7cy4kc2V0RGlydHkoKSxhbmd1bGFyLmlzRGVmaW5lZChhKSYmYW5ndWxhci5pc0RlZmluZWQoYik/KHIuc2V0SG91cnMoYSksci5zZXRNaW51dGVzKGIpLHc+cnx8cj54P2UoITApOmwoXCJoXCIpKTplKCEwKX0sYi5iaW5kKFwiYmx1clwiLGZ1bmN0aW9uKGIpe3MuJHNldFRvdWNoZWQoKSxudWxsPT09YS5ob3Vyc3x8XCJcIj09PWEuaG91cnM/ZSghMCk6IWEuaW52YWxpZEhvdXJzJiZhLmhvdXJzPDEwJiZhLiRhcHBseShmdW5jdGlvbigpe2EuaG91cnM9ayhhLmhvdXJzKX0pfSksYS51cGRhdGVNaW51dGVzPWZ1bmN0aW9uKCl7dmFyIGE9aSgpLGI9aCgpO3MuJHNldERpcnR5KCksYW5ndWxhci5pc0RlZmluZWQoYSkmJmFuZ3VsYXIuaXNEZWZpbmVkKGIpPyhyLnNldEhvdXJzKGIpLHIuc2V0TWludXRlcyhhKSx3PnJ8fHI+eD9lKHZvaWQgMCwhMCk6bChcIm1cIikpOmUodm9pZCAwLCEwKX0sYy5iaW5kKFwiYmx1clwiLGZ1bmN0aW9uKGIpe3MuJHNldFRvdWNoZWQoKSxudWxsPT09YS5taW51dGVzP2Uodm9pZCAwLCEwKTohYS5pbnZhbGlkTWludXRlcyYmYS5taW51dGVzPDEwJiZhLiRhcHBseShmdW5jdGlvbigpe2EubWludXRlcz1rKGEubWludXRlcyl9KX0pLGEudXBkYXRlU2Vjb25kcz1mdW5jdGlvbigpe3ZhciBhPWooKTtzLiRzZXREaXJ0eSgpLGFuZ3VsYXIuaXNEZWZpbmVkKGEpPyhyLnNldFNlY29uZHMoYSksbChcInNcIikpOmUodm9pZCAwLHZvaWQgMCwhMCl9LGQuYmluZChcImJsdXJcIixmdW5jdGlvbihiKXshYS5pbnZhbGlkU2Vjb25kcyYmYS5zZWNvbmRzPDEwJiZhLiRhcHBseShmdW5jdGlvbigpe2Euc2Vjb25kcz1rKGEuc2Vjb25kcyl9KX0pfSx0aGlzLnJlbmRlcj1mdW5jdGlvbigpe3ZhciBiPXMuJHZpZXdWYWx1ZTtpc05hTihiKT8ocy4kc2V0VmFsaWRpdHkoXCJ0aW1lXCIsITEpLGUuZXJyb3IoJ1RpbWVwaWNrZXIgZGlyZWN0aXZlOiBcIm5nLW1vZGVsXCIgdmFsdWUgbXVzdCBiZSBhIERhdGUgb2JqZWN0LCBhIG51bWJlciBvZiBtaWxsaXNlY29uZHMgc2luY2UgMDEuMDEuMTk3MCBvciBhIHN0cmluZyByZXByZXNlbnRpbmcgYW4gUkZDMjgyMiBvciBJU08gODYwMSBkYXRlLicpKTooYiYmKHI9Yiksdz5yfHxyPng/KHMuJHNldFZhbGlkaXR5KFwidGltZVwiLCExKSxhLmludmFsaWRIb3Vycz0hMCxhLmludmFsaWRNaW51dGVzPSEwKTptKCksbigpKX0sYS5zaG93U3Bpbm5lcnM9YW5ndWxhci5pc0RlZmluZWQoYy5zaG93U3Bpbm5lcnMpP2EuJHBhcmVudC4kZXZhbChjLnNob3dTcGlubmVycyk6Zy5zaG93U3Bpbm5lcnMsYS5pbmNyZW1lbnRIb3Vycz1mdW5jdGlvbigpe2Eubm9JbmNyZW1lbnRIb3VycygpfHxvKDYwKnUqNjApfSxhLmRlY3JlbWVudEhvdXJzPWZ1bmN0aW9uKCl7YS5ub0RlY3JlbWVudEhvdXJzKCl8fG8oNjAqLXUqNjApfSxhLmluY3JlbWVudE1pbnV0ZXM9ZnVuY3Rpb24oKXthLm5vSW5jcmVtZW50TWludXRlcygpfHxvKDYwKnYpfSxhLmRlY3JlbWVudE1pbnV0ZXM9ZnVuY3Rpb24oKXthLm5vRGVjcmVtZW50TWludXRlcygpfHxvKDYwKi12KX0sYS5pbmNyZW1lbnRTZWNvbmRzPWZ1bmN0aW9uKCl7YS5ub0luY3JlbWVudFNlY29uZHMoKXx8byh6KX0sYS5kZWNyZW1lbnRTZWNvbmRzPWZ1bmN0aW9uKCl7YS5ub0RlY3JlbWVudFNlY29uZHMoKXx8bygteil9LGEudG9nZ2xlTWVyaWRpYW49ZnVuY3Rpb24oKXt2YXIgYj1pKCksYz1oKCk7YS5ub1RvZ2dsZU1lcmlkaWFuKCl8fChhbmd1bGFyLmlzRGVmaW5lZChiKSYmYW5ndWxhci5pc0RlZmluZWQoYyk/byg3MjAqKHIuZ2V0SG91cnMoKTwxMj82MDotNjApKTphLm1lcmlkaWFuPWEubWVyaWRpYW49PT10WzBdP3RbMV06dFswXSl9LGEuYmx1cj1mdW5jdGlvbigpe3MuJHNldFRvdWNoZWQoKX19XSkuZGlyZWN0aXZlKFwidWliVGltZXBpY2tlclwiLFtcInVpYlRpbWVwaWNrZXJDb25maWdcIixmdW5jdGlvbihhKXtyZXR1cm57cmVxdWlyZTpbXCJ1aWJUaW1lcGlja2VyXCIsXCI/Xm5nTW9kZWxcIl0sY29udHJvbGxlcjpcIlVpYlRpbWVwaWNrZXJDb250cm9sbGVyXCIsY29udHJvbGxlckFzOlwidGltZXBpY2tlclwiLHJlcGxhY2U6ITAsc2NvcGU6e30sdGVtcGxhdGVVcmw6ZnVuY3Rpb24oYixjKXtyZXR1cm4gYy50ZW1wbGF0ZVVybHx8YS50ZW1wbGF0ZVVybH0sbGluazpmdW5jdGlvbihhLGIsYyxkKXt2YXIgZT1kWzBdLGY9ZFsxXTtmJiZlLmluaXQoZixiLmZpbmQoXCJpbnB1dFwiKSl9fX1dKSxhbmd1bGFyLm1vZHVsZShcInVpLmJvb3RzdHJhcC50eXBlYWhlYWRcIixbXCJ1aS5ib290c3RyYXAuZGVib3VuY2VcIixcInVpLmJvb3RzdHJhcC5wb3NpdGlvblwiXSkuZmFjdG9yeShcInVpYlR5cGVhaGVhZFBhcnNlclwiLFtcIiRwYXJzZVwiLGZ1bmN0aW9uKGEpe3ZhciBiPS9eXFxzKihbXFxzXFxTXSs/KSg/Olxccythc1xccysoW1xcc1xcU10rPykpP1xccytmb3JcXHMrKD86KFtcXCRcXHddW1xcJFxcd1xcZF0qKSlcXHMraW5cXHMrKFtcXHNcXFNdKz8pJC87cmV0dXJue3BhcnNlOmZ1bmN0aW9uKGMpe3ZhciBkPWMubWF0Y2goYik7aWYoIWQpdGhyb3cgbmV3IEVycm9yKCdFeHBlY3RlZCB0eXBlYWhlYWQgc3BlY2lmaWNhdGlvbiBpbiBmb3JtIG9mIFwiX21vZGVsVmFsdWVfIChhcyBfbGFiZWxfKT8gZm9yIF9pdGVtXyBpbiBfY29sbGVjdGlvbl9cIiBidXQgZ290IFwiJytjKydcIi4nKTtyZXR1cm57aXRlbU5hbWU6ZFszXSxzb3VyY2U6YShkWzRdKSx2aWV3TWFwcGVyOmEoZFsyXXx8ZFsxXSksbW9kZWxNYXBwZXI6YShkWzFdKX19fX1dKS5jb250cm9sbGVyKFwiVWliVHlwZWFoZWFkQ29udHJvbGxlclwiLFtcIiRzY29wZVwiLFwiJGVsZW1lbnRcIixcIiRhdHRyc1wiLFwiJGNvbXBpbGVcIixcIiRwYXJzZVwiLFwiJHFcIixcIiR0aW1lb3V0XCIsXCIkZG9jdW1lbnRcIixcIiR3aW5kb3dcIixcIiRyb290U2NvcGVcIixcIiQkZGVib3VuY2VcIixcIiR1aWJQb3NpdGlvblwiLFwidWliVHlwZWFoZWFkUGFyc2VyXCIsZnVuY3Rpb24oYSxiLGMsZCxlLGYsZyxoLGksaixrLGwsbSl7ZnVuY3Rpb24gbigpe04ubW92ZUluUHJvZ3Jlc3N8fChOLm1vdmVJblByb2dyZXNzPSEwLE4uJGRpZ2VzdCgpKSxZKCl9ZnVuY3Rpb24gbygpe04ucG9zaXRpb249RD9sLm9mZnNldChiKTpsLnBvc2l0aW9uKGIpLE4ucG9zaXRpb24udG9wKz1iLnByb3AoXCJvZmZzZXRIZWlnaHRcIil9dmFyIHAscSxyPVs5LDEzLDI3LDM4LDQwXSxzPTIwMCx0PWEuJGV2YWwoYy50eXBlYWhlYWRNaW5MZW5ndGgpO3R8fDA9PT10fHwodD0xKTt2YXIgdT1hLiRldmFsKGMudHlwZWFoZWFkV2FpdE1zKXx8MCx2PWEuJGV2YWwoYy50eXBlYWhlYWRFZGl0YWJsZSkhPT0hMTthLiR3YXRjaChjLnR5cGVhaGVhZEVkaXRhYmxlLGZ1bmN0aW9uKGEpe3Y9YSE9PSExfSk7dmFyIHcseCx5PWUoYy50eXBlYWhlYWRMb2FkaW5nKS5hc3NpZ258fGFuZ3VsYXIubm9vcCx6PWUoYy50eXBlYWhlYWRPblNlbGVjdCksQT1hbmd1bGFyLmlzRGVmaW5lZChjLnR5cGVhaGVhZFNlbGVjdE9uQmx1cik/YS4kZXZhbChjLnR5cGVhaGVhZFNlbGVjdE9uQmx1cik6ITEsQj1lKGMudHlwZWFoZWFkTm9SZXN1bHRzKS5hc3NpZ258fGFuZ3VsYXIubm9vcCxDPWMudHlwZWFoZWFkSW5wdXRGb3JtYXR0ZXI/ZShjLnR5cGVhaGVhZElucHV0Rm9ybWF0dGVyKTp2b2lkIDAsRD1jLnR5cGVhaGVhZEFwcGVuZFRvQm9keT9hLiRldmFsKGMudHlwZWFoZWFkQXBwZW5kVG9Cb2R5KTohMSxFPWMudHlwZWFoZWFkQXBwZW5kVG8/YS4kZXZhbChjLnR5cGVhaGVhZEFwcGVuZFRvKTpudWxsLEY9YS4kZXZhbChjLnR5cGVhaGVhZEZvY3VzRmlyc3QpIT09ITEsRz1jLnR5cGVhaGVhZFNlbGVjdE9uRXhhY3Q/YS4kZXZhbChjLnR5cGVhaGVhZFNlbGVjdE9uRXhhY3QpOiExLEg9ZShjLnR5cGVhaGVhZElzT3BlbikuYXNzaWdufHxhbmd1bGFyLm5vb3AsST1hLiRldmFsKGMudHlwZWFoZWFkU2hvd0hpbnQpfHwhMSxKPWUoYy5uZ01vZGVsKSxLPWUoYy5uZ01vZGVsK1wiKCQkJHApXCIpLEw9ZnVuY3Rpb24oYixjKXtyZXR1cm4gYW5ndWxhci5pc0Z1bmN0aW9uKEooYSkpJiZxJiZxLiRvcHRpb25zJiZxLiRvcHRpb25zLmdldHRlclNldHRlcj9LKGIseyQkJHA6Y30pOkouYXNzaWduKGIsYyl9LE09bS5wYXJzZShjLnVpYlR5cGVhaGVhZCksTj1hLiRuZXcoKSxPPWEuJG9uKFwiJGRlc3Ryb3lcIixmdW5jdGlvbigpe04uJGRlc3Ryb3koKX0pO04uJG9uKFwiJGRlc3Ryb3lcIixPKTt2YXIgUD1cInR5cGVhaGVhZC1cIitOLiRpZCtcIi1cIitNYXRoLmZsb29yKDFlNCpNYXRoLnJhbmRvbSgpKTtiLmF0dHIoe1wiYXJpYS1hdXRvY29tcGxldGVcIjpcImxpc3RcIixcImFyaWEtZXhwYW5kZWRcIjohMSxcImFyaWEtb3duc1wiOlB9KTt2YXIgUSxSO0kmJihRPWFuZ3VsYXIuZWxlbWVudChcIjxkaXY+PC9kaXY+XCIpLFEuY3NzKFwicG9zaXRpb25cIixcInJlbGF0aXZlXCIpLGIuYWZ0ZXIoUSksUj1iLmNsb25lKCksUi5hdHRyKFwicGxhY2Vob2xkZXJcIixcIlwiKSxSLnZhbChcIlwiKSxSLmNzcyh7cG9zaXRpb246XCJhYnNvbHV0ZVwiLHRvcDpcIjBweFwiLGxlZnQ6XCIwcHhcIixcImJvcmRlci1jb2xvclwiOlwidHJhbnNwYXJlbnRcIixcImJveC1zaGFkb3dcIjpcIm5vbmVcIixvcGFjaXR5OjEsYmFja2dyb3VuZDpcIm5vbmUgMCUgMCUgLyBhdXRvIHJlcGVhdCBzY3JvbGwgcGFkZGluZy1ib3ggYm9yZGVyLWJveCByZ2IoMjU1LCAyNTUsIDI1NSlcIixjb2xvcjpcIiM5OTlcIn0pLGIuY3NzKHtwb3NpdGlvbjpcInJlbGF0aXZlXCIsXCJ2ZXJ0aWNhbC1hbGlnblwiOlwidG9wXCIsXCJiYWNrZ3JvdW5kLWNvbG9yXCI6XCJ0cmFuc3BhcmVudFwifSksUS5hcHBlbmQoUiksUi5hZnRlcihiKSk7dmFyIFM9YW5ndWxhci5lbGVtZW50KFwiPGRpdiB1aWItdHlwZWFoZWFkLXBvcHVwPjwvZGl2PlwiKTtTLmF0dHIoe2lkOlAsbWF0Y2hlczpcIm1hdGNoZXNcIixhY3RpdmU6XCJhY3RpdmVJZHhcIixzZWxlY3Q6XCJzZWxlY3QoYWN0aXZlSWR4LCBldnQpXCIsXCJtb3ZlLWluLXByb2dyZXNzXCI6XCJtb3ZlSW5Qcm9ncmVzc1wiLHF1ZXJ5OlwicXVlcnlcIixwb3NpdGlvbjpcInBvc2l0aW9uXCIsXCJhc3NpZ24taXMtb3BlblwiOlwiYXNzaWduSXNPcGVuKGlzT3BlbilcIixkZWJvdW5jZTpcImRlYm91bmNlVXBkYXRlXCJ9KSxhbmd1bGFyLmlzRGVmaW5lZChjLnR5cGVhaGVhZFRlbXBsYXRlVXJsKSYmUy5hdHRyKFwidGVtcGxhdGUtdXJsXCIsYy50eXBlYWhlYWRUZW1wbGF0ZVVybCksYW5ndWxhci5pc0RlZmluZWQoYy50eXBlYWhlYWRQb3B1cFRlbXBsYXRlVXJsKSYmUy5hdHRyKFwicG9wdXAtdGVtcGxhdGUtdXJsXCIsYy50eXBlYWhlYWRQb3B1cFRlbXBsYXRlVXJsKTt2YXIgVD1mdW5jdGlvbigpe0kmJlIudmFsKFwiXCIpfSxVPWZ1bmN0aW9uKCl7Ti5tYXRjaGVzPVtdLE4uYWN0aXZlSWR4PS0xLGIuYXR0cihcImFyaWEtZXhwYW5kZWRcIiwhMSksVCgpfSxWPWZ1bmN0aW9uKGEpe3JldHVybiBQK1wiLW9wdGlvbi1cIithfTtOLiR3YXRjaChcImFjdGl2ZUlkeFwiLGZ1bmN0aW9uKGEpezA+YT9iLnJlbW92ZUF0dHIoXCJhcmlhLWFjdGl2ZWRlc2NlbmRhbnRcIik6Yi5hdHRyKFwiYXJpYS1hY3RpdmVkZXNjZW5kYW50XCIsVihhKSl9KTt2YXIgVz1mdW5jdGlvbihhLGIpe3JldHVybiBOLm1hdGNoZXMubGVuZ3RoPmImJmE/YS50b1VwcGVyQ2FzZSgpPT09Ti5tYXRjaGVzW2JdLmxhYmVsLnRvVXBwZXJDYXNlKCk6ITF9LFg9ZnVuY3Rpb24oYyxkKXt2YXIgZT17JHZpZXdWYWx1ZTpjfTt5KGEsITApLEIoYSwhMSksZi53aGVuKE0uc291cmNlKGEsZSkpLnRoZW4oZnVuY3Rpb24oZil7dmFyIGc9Yz09PXAuJHZpZXdWYWx1ZTtpZihnJiZ3KWlmKGYmJmYubGVuZ3RoPjApe04uYWN0aXZlSWR4PUY/MDotMSxCKGEsITEpLE4ubWF0Y2hlcy5sZW5ndGg9MDtmb3IodmFyIGg9MDtoPGYubGVuZ3RoO2grKyllW00uaXRlbU5hbWVdPWZbaF0sTi5tYXRjaGVzLnB1c2goe2lkOlYoaCksbGFiZWw6TS52aWV3TWFwcGVyKE4sZSksbW9kZWw6ZltoXX0pO2lmKE4ucXVlcnk9YyxvKCksYi5hdHRyKFwiYXJpYS1leHBhbmRlZFwiLCEwKSxHJiYxPT09Ti5tYXRjaGVzLmxlbmd0aCYmVyhjLDApJiYoYW5ndWxhci5pc051bWJlcihOLmRlYm91bmNlVXBkYXRlKXx8YW5ndWxhci5pc09iamVjdChOLmRlYm91bmNlVXBkYXRlKT9rKGZ1bmN0aW9uKCl7Ti5zZWxlY3QoMCxkKX0sYW5ndWxhci5pc051bWJlcihOLmRlYm91bmNlVXBkYXRlKT9OLmRlYm91bmNlVXBkYXRlOk4uZGVib3VuY2VVcGRhdGVbXCJkZWZhdWx0XCJdKTpOLnNlbGVjdCgwLGQpKSxJKXt2YXIgaT1OLm1hdGNoZXNbMF0ubGFiZWw7Yy5sZW5ndGg+MCYmaS5zbGljZSgwLGMubGVuZ3RoKS50b1VwcGVyQ2FzZSgpPT09Yy50b1VwcGVyQ2FzZSgpP1IudmFsKGMraS5zbGljZShjLmxlbmd0aCkpOlIudmFsKFwiXCIpfX1lbHNlIFUoKSxCKGEsITApO2cmJnkoYSwhMSl9LGZ1bmN0aW9uKCl7VSgpLHkoYSwhMSksQihhLCEwKX0pfTtEJiYoYW5ndWxhci5lbGVtZW50KGkpLm9uKFwicmVzaXplXCIsbiksaC5maW5kKFwiYm9keVwiKS5vbihcInNjcm9sbFwiLG4pKTt2YXIgWT1rKGZ1bmN0aW9uKCl7Ti5tYXRjaGVzLmxlbmd0aCYmbygpLE4ubW92ZUluUHJvZ3Jlc3M9ITF9LHMpO04ubW92ZUluUHJvZ3Jlc3M9ITEsTi5xdWVyeT12b2lkIDA7dmFyIFosJD1mdW5jdGlvbihhKXtaPWcoZnVuY3Rpb24oKXtYKGEpfSx1KX0sXz1mdW5jdGlvbigpe1omJmcuY2FuY2VsKFopfTtVKCksTi5hc3NpZ25Jc09wZW49ZnVuY3Rpb24oYil7SChhLGIpfSxOLnNlbGVjdD1mdW5jdGlvbihkLGUpe3ZhciBmLGgsaT17fTt4PSEwLGlbTS5pdGVtTmFtZV09aD1OLm1hdGNoZXNbZF0ubW9kZWwsZj1NLm1vZGVsTWFwcGVyKGEsaSksTChhLGYpLHAuJHNldFZhbGlkaXR5KFwiZWRpdGFibGVcIiwhMCkscC4kc2V0VmFsaWRpdHkoXCJwYXJzZVwiLCEwKSx6KGEseyRpdGVtOmgsJG1vZGVsOmYsJGxhYmVsOk0udmlld01hcHBlcihhLGkpLCRldmVudDplfSksVSgpLE4uJGV2YWwoYy50eXBlYWhlYWRGb2N1c09uU2VsZWN0KSE9PSExJiZnKGZ1bmN0aW9uKCl7YlswXS5mb2N1cygpfSwwLCExKX0sYi5vbihcImtleWRvd25cIixmdW5jdGlvbihhKXtpZigwIT09Ti5tYXRjaGVzLmxlbmd0aCYmLTEhPT1yLmluZGV4T2YoYS53aGljaCkpe2lmKC0xPT09Ti5hY3RpdmVJZHgmJig5PT09YS53aGljaHx8MTM9PT1hLndoaWNoKSlyZXR1cm4gVSgpLHZvaWQgTi4kZGlnZXN0KCk7YS5wcmV2ZW50RGVmYXVsdCgpO3ZhciBiO3N3aXRjaChhLndoaWNoKXtjYXNlIDk6Y2FzZSAxMzpOLiRhcHBseShmdW5jdGlvbigpe2FuZ3VsYXIuaXNOdW1iZXIoTi5kZWJvdW5jZVVwZGF0ZSl8fGFuZ3VsYXIuaXNPYmplY3QoTi5kZWJvdW5jZVVwZGF0ZSk/ayhmdW5jdGlvbigpe04uc2VsZWN0KE4uYWN0aXZlSWR4LGEpfSxhbmd1bGFyLmlzTnVtYmVyKE4uZGVib3VuY2VVcGRhdGUpP04uZGVib3VuY2VVcGRhdGU6Ti5kZWJvdW5jZVVwZGF0ZVtcImRlZmF1bHRcIl0pOk4uc2VsZWN0KE4uYWN0aXZlSWR4LGEpfSk7YnJlYWs7Y2FzZSAyNzphLnN0b3BQcm9wYWdhdGlvbigpLFUoKSxOLiRkaWdlc3QoKTticmVhaztjYXNlIDM4Ok4uYWN0aXZlSWR4PShOLmFjdGl2ZUlkeD4wP04uYWN0aXZlSWR4Ok4ubWF0Y2hlcy5sZW5ndGgpLTEsTi4kZGlnZXN0KCksYj1TLmZpbmQoXCJsaVwiKVtOLmFjdGl2ZUlkeF0sYi5wYXJlbnROb2RlLnNjcm9sbFRvcD1iLm9mZnNldFRvcDticmVhaztjYXNlIDQwOk4uYWN0aXZlSWR4PShOLmFjdGl2ZUlkeCsxKSVOLm1hdGNoZXMubGVuZ3RoLE4uJGRpZ2VzdCgpLGI9Uy5maW5kKFwibGlcIilbTi5hY3RpdmVJZHhdLGIucGFyZW50Tm9kZS5zY3JvbGxUb3A9Yi5vZmZzZXRUb3B9fX0pLGIuYmluZChcImZvY3VzXCIsZnVuY3Rpb24oYSl7dz0hMCwwIT09dHx8cC4kdmlld1ZhbHVlfHxnKGZ1bmN0aW9uKCl7WChwLiR2aWV3VmFsdWUsYSl9LDApfSksYi5iaW5kKFwiYmx1clwiLGZ1bmN0aW9uKGEpe0EmJk4ubWF0Y2hlcy5sZW5ndGgmJi0xIT09Ti5hY3RpdmVJZHgmJiF4JiYoeD0hMCxOLiRhcHBseShmdW5jdGlvbigpe2FuZ3VsYXIuaXNPYmplY3QoTi5kZWJvdW5jZVVwZGF0ZSkmJmFuZ3VsYXIuaXNOdW1iZXIoTi5kZWJvdW5jZVVwZGF0ZS5ibHVyKT9rKGZ1bmN0aW9uKCl7Ti5zZWxlY3QoTi5hY3RpdmVJZHgsYSl9LE4uZGVib3VuY2VVcGRhdGUuYmx1cik6Ti5zZWxlY3QoTi5hY3RpdmVJZHgsYSl9KSksIXYmJnAuJGVycm9yLmVkaXRhYmxlJiYocC4kdmlld1ZhbHVlPVwiXCIsYi52YWwoXCJcIikpLHc9ITEseD0hMX0pO3ZhciBhYT1mdW5jdGlvbihhKXtiWzBdIT09YS50YXJnZXQmJjMhPT1hLndoaWNoJiYwIT09Ti5tYXRjaGVzLmxlbmd0aCYmKFUoKSxqLiQkcGhhc2V8fE4uJGRpZ2VzdCgpKX07aC5vbihcImNsaWNrXCIsYWEpLGEuJG9uKFwiJGRlc3Ryb3lcIixmdW5jdGlvbigpe2gub2ZmKFwiY2xpY2tcIixhYSksKER8fEUpJiZiYS5yZW1vdmUoKSxEJiYoYW5ndWxhci5lbGVtZW50KGkpLm9mZihcInJlc2l6ZVwiLG4pLGguZmluZChcImJvZHlcIikub2ZmKFwic2Nyb2xsXCIsbikpLFMucmVtb3ZlKCksSSYmUS5yZW1vdmUoKX0pO3ZhciBiYT1kKFMpKE4pO0Q/aC5maW5kKFwiYm9keVwiKS5hcHBlbmQoYmEpOkU/YW5ndWxhci5lbGVtZW50KEUpLmVxKDApLmFwcGVuZChiYSk6Yi5hZnRlcihiYSksdGhpcy5pbml0PWZ1bmN0aW9uKGIsYyl7cD1iLHE9YyxOLmRlYm91bmNlVXBkYXRlPXAuJG9wdGlvbnMmJmUocC4kb3B0aW9ucy5kZWJvdW5jZSkoYSkscC4kcGFyc2Vycy51bnNoaWZ0KGZ1bmN0aW9uKGIpe3JldHVybiB3PSEwLDA9PT10fHxiJiZiLmxlbmd0aD49dD91PjA/KF8oKSwkKGIpKTpYKGIpOih5KGEsITEpLF8oKSxVKCkpLHY/YjpiP3ZvaWQgcC4kc2V0VmFsaWRpdHkoXCJlZGl0YWJsZVwiLCExKToocC4kc2V0VmFsaWRpdHkoXCJlZGl0YWJsZVwiLCEwKSxudWxsKX0pLHAuJGZvcm1hdHRlcnMucHVzaChmdW5jdGlvbihiKXt2YXIgYyxkLGU9e307cmV0dXJuIHZ8fHAuJHNldFZhbGlkaXR5KFwiZWRpdGFibGVcIiwhMCksQz8oZS4kbW9kZWw9YixDKGEsZSkpOihlW00uaXRlbU5hbWVdPWIsYz1NLnZpZXdNYXBwZXIoYSxlKSxlW00uaXRlbU5hbWVdPXZvaWQgMCxkPU0udmlld01hcHBlcihhLGUpLGMhPT1kP2M6Yil9KX19XSkuZGlyZWN0aXZlKFwidWliVHlwZWFoZWFkXCIsZnVuY3Rpb24oKXtyZXR1cm57Y29udHJvbGxlcjpcIlVpYlR5cGVhaGVhZENvbnRyb2xsZXJcIixyZXF1aXJlOltcIm5nTW9kZWxcIixcIl4/bmdNb2RlbE9wdGlvbnNcIixcInVpYlR5cGVhaGVhZFwiXSxsaW5rOmZ1bmN0aW9uKGEsYixjLGQpe2RbMl0uaW5pdChkWzBdLGRbMV0pfX19KS5kaXJlY3RpdmUoXCJ1aWJUeXBlYWhlYWRQb3B1cFwiLFtcIiQkZGVib3VuY2VcIixmdW5jdGlvbihhKXtyZXR1cm57c2NvcGU6e21hdGNoZXM6XCI9XCIscXVlcnk6XCI9XCIsYWN0aXZlOlwiPVwiLHBvc2l0aW9uOlwiJlwiLG1vdmVJblByb2dyZXNzOlwiPVwiLHNlbGVjdDpcIiZcIixhc3NpZ25Jc09wZW46XCImXCIsZGVib3VuY2U6XCImXCJ9LHJlcGxhY2U6ITAsdGVtcGxhdGVVcmw6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gYi5wb3B1cFRlbXBsYXRlVXJsfHxcInVpYi90ZW1wbGF0ZS90eXBlYWhlYWQvdHlwZWFoZWFkLXBvcHVwLmh0bWxcIn0sbGluazpmdW5jdGlvbihiLGMsZCl7Yi50ZW1wbGF0ZVVybD1kLnRlbXBsYXRlVXJsLGIuaXNPcGVuPWZ1bmN0aW9uKCl7dmFyIGE9Yi5tYXRjaGVzLmxlbmd0aD4wO3JldHVybiBiLmFzc2lnbklzT3Blbih7aXNPcGVuOmF9KSxhfSxiLmlzQWN0aXZlPWZ1bmN0aW9uKGEpe3JldHVybiBiLmFjdGl2ZT09PWF9LGIuc2VsZWN0QWN0aXZlPWZ1bmN0aW9uKGEpe2IuYWN0aXZlPWF9LGIuc2VsZWN0TWF0Y2g9ZnVuY3Rpb24oYyxkKXt2YXIgZT1iLmRlYm91bmNlKCk7YW5ndWxhci5pc051bWJlcihlKXx8YW5ndWxhci5pc09iamVjdChlKT9hKGZ1bmN0aW9uKCl7Yi5zZWxlY3Qoe2FjdGl2ZUlkeDpjLGV2dDpkfSl9LGFuZ3VsYXIuaXNOdW1iZXIoZSk/ZTplW1wiZGVmYXVsdFwiXSk6Yi5zZWxlY3Qoe2FjdGl2ZUlkeDpjLGV2dDpkfSl9fX19XSkuZGlyZWN0aXZlKFwidWliVHlwZWFoZWFkTWF0Y2hcIixbXCIkdGVtcGxhdGVSZXF1ZXN0XCIsXCIkY29tcGlsZVwiLFwiJHBhcnNlXCIsZnVuY3Rpb24oYSxiLGMpe3JldHVybntzY29wZTp7aW5kZXg6XCI9XCIsbWF0Y2g6XCI9XCIscXVlcnk6XCI9XCJ9LGxpbms6ZnVuY3Rpb24oZCxlLGYpe3ZhciBnPWMoZi50ZW1wbGF0ZVVybCkoZC4kcGFyZW50KXx8XCJ1aWIvdGVtcGxhdGUvdHlwZWFoZWFkL3R5cGVhaGVhZC1tYXRjaC5odG1sXCI7YShnKS50aGVuKGZ1bmN0aW9uKGEpe3ZhciBjPWFuZ3VsYXIuZWxlbWVudChhLnRyaW0oKSk7ZS5yZXBsYWNlV2l0aChjKSxiKGMpKGQpfSl9fX1dKS5maWx0ZXIoXCJ1aWJUeXBlYWhlYWRIaWdobGlnaHRcIixbXCIkc2NlXCIsXCIkaW5qZWN0b3JcIixcIiRsb2dcIixmdW5jdGlvbihhLGIsYyl7ZnVuY3Rpb24gZChhKXtyZXR1cm4gYS5yZXBsYWNlKC8oWy4/KiteJFtcXF1cXFxcKCl7fXwtXSkvZyxcIlxcXFwkMVwiKX1mdW5jdGlvbiBlKGEpe3JldHVybi88Lio+L2cudGVzdChhKX12YXIgZjtyZXR1cm4gZj1iLmhhcyhcIiRzYW5pdGl6ZVwiKSxmdW5jdGlvbihiLGcpe3JldHVybiFmJiZlKGIpJiZjLndhcm4oXCJVbnNhZmUgdXNlIG9mIHR5cGVhaGVhZCBwbGVhc2UgdXNlIG5nU2FuaXRpemVcIiksYj1nPyhcIlwiK2IpLnJlcGxhY2UobmV3IFJlZ0V4cChkKGcpLFwiZ2lcIiksXCI8c3Ryb25nPiQmPC9zdHJvbmc+XCIpOmIsZnx8KGI9YS50cnVzdEFzSHRtbChiKSksYn19XSksYW5ndWxhci5tb2R1bGUoXCJ1aWIvdGVtcGxhdGUvYWNjb3JkaW9uL2FjY29yZGlvbi1ncm91cC5odG1sXCIsW10pLnJ1bihbXCIkdGVtcGxhdGVDYWNoZVwiLGZ1bmN0aW9uKGEpe2EucHV0KFwidWliL3RlbXBsYXRlL2FjY29yZGlvbi9hY2NvcmRpb24tZ3JvdXAuaHRtbFwiLCc8ZGl2IGNsYXNzPVwicGFuZWxcIiBuZy1jbGFzcz1cInBhbmVsQ2xhc3MgfHwgXFwncGFuZWwtZGVmYXVsdFxcJ1wiPlxcbiAgPGRpdiBjbGFzcz1cInBhbmVsLWhlYWRpbmdcIiBuZy1rZXlwcmVzcz1cInRvZ2dsZU9wZW4oJGV2ZW50KVwiPlxcbiAgICA8aDQgY2xhc3M9XCJwYW5lbC10aXRsZVwiPlxcbiAgICAgIDxkaXYgdGFiaW5kZXg9XCIwXCIgY2xhc3M9XCJhY2NvcmRpb24tdG9nZ2xlXCIgbmctY2xpY2s9XCJ0b2dnbGVPcGVuKClcIiB1aWItYWNjb3JkaW9uLXRyYW5zY2x1ZGU9XCJoZWFkaW5nXCI+PHNwYW4gbmctY2xhc3M9XCJ7XFwndGV4dC1tdXRlZFxcJzogaXNEaXNhYmxlZH1cIj57e2hlYWRpbmd9fTwvc3Bhbj48L2Rpdj5cXG4gICAgPC9oND5cXG4gIDwvZGl2PlxcbiAgPGRpdiBjbGFzcz1cInBhbmVsLWNvbGxhcHNlIGNvbGxhcHNlXCIgdWliLWNvbGxhcHNlPVwiIWlzT3BlblwiPlxcblx0ICA8ZGl2IGNsYXNzPVwicGFuZWwtYm9keVwiIG5nLXRyYW5zY2x1ZGU+PC9kaXY+XFxuICA8L2Rpdj5cXG48L2Rpdj5cXG4nKX1dKSxhbmd1bGFyLm1vZHVsZShcInVpYi90ZW1wbGF0ZS9hY2NvcmRpb24vYWNjb3JkaW9uLmh0bWxcIixbXSkucnVuKFtcIiR0ZW1wbGF0ZUNhY2hlXCIsZnVuY3Rpb24oYSl7YS5wdXQoXCJ1aWIvdGVtcGxhdGUvYWNjb3JkaW9uL2FjY29yZGlvbi5odG1sXCIsJzxkaXYgY2xhc3M9XCJwYW5lbC1ncm91cFwiIG5nLXRyYW5zY2x1ZGU+PC9kaXY+Jyl9XSksYW5ndWxhci5tb2R1bGUoXCJ1aWIvdGVtcGxhdGUvYWxlcnQvYWxlcnQuaHRtbFwiLFtdKS5ydW4oW1wiJHRlbXBsYXRlQ2FjaGVcIixmdW5jdGlvbihhKXthLnB1dChcInVpYi90ZW1wbGF0ZS9hbGVydC9hbGVydC5odG1sXCIsJzxkaXYgY2xhc3M9XCJhbGVydFwiIG5nLWNsYXNzPVwiW1xcJ2FsZXJ0LVxcJyArICh0eXBlIHx8IFxcJ3dhcm5pbmdcXCcpLCBjbG9zZWFibGUgPyBcXCdhbGVydC1kaXNtaXNzaWJsZVxcJyA6IG51bGxdXCIgcm9sZT1cImFsZXJ0XCI+XFxuICAgIDxidXR0b24gbmctc2hvdz1cImNsb3NlYWJsZVwiIHR5cGU9XCJidXR0b25cIiBjbGFzcz1cImNsb3NlXCIgbmctY2xpY2s9XCJjbG9zZSh7JGV2ZW50OiAkZXZlbnR9KVwiPlxcbiAgICAgICAgPHNwYW4gYXJpYS1oaWRkZW49XCJ0cnVlXCI+JnRpbWVzOzwvc3Bhbj5cXG4gICAgICAgIDxzcGFuIGNsYXNzPVwic3Itb25seVwiPkNsb3NlPC9zcGFuPlxcbiAgICA8L2J1dHRvbj5cXG4gICAgPGRpdiBuZy10cmFuc2NsdWRlPjwvZGl2PlxcbjwvZGl2PlxcbicpfV0pLGFuZ3VsYXIubW9kdWxlKFwidWliL3RlbXBsYXRlL2Nhcm91c2VsL2Nhcm91c2VsLmh0bWxcIixbXSkucnVuKFtcIiR0ZW1wbGF0ZUNhY2hlXCIsZnVuY3Rpb24oYSl7YS5wdXQoXCJ1aWIvdGVtcGxhdGUvY2Fyb3VzZWwvY2Fyb3VzZWwuaHRtbFwiLCc8ZGl2IG5nLW1vdXNlZW50ZXI9XCJwYXVzZSgpXCIgbmctbW91c2VsZWF2ZT1cInBsYXkoKVwiIGNsYXNzPVwiY2Fyb3VzZWxcIiBuZy1zd2lwZS1yaWdodD1cInByZXYoKVwiIG5nLXN3aXBlLWxlZnQ9XCJuZXh0KClcIj5cXG4gIDxkaXYgY2xhc3M9XCJjYXJvdXNlbC1pbm5lclwiIG5nLXRyYW5zY2x1ZGU+PC9kaXY+XFxuICA8YSByb2xlPVwiYnV0dG9uXCIgaHJlZiBjbGFzcz1cImxlZnQgY2Fyb3VzZWwtY29udHJvbFwiIG5nLWNsaWNrPVwicHJldigpXCIgbmctc2hvdz1cInNsaWRlcy5sZW5ndGggPiAxXCI+XFxuICAgIDxzcGFuIGFyaWEtaGlkZGVuPVwidHJ1ZVwiIGNsYXNzPVwiZ2x5cGhpY29uIGdseXBoaWNvbi1jaGV2cm9uLWxlZnRcIj48L3NwYW4+XFxuICAgIDxzcGFuIGNsYXNzPVwic3Itb25seVwiPnByZXZpb3VzPC9zcGFuPlxcbiAgPC9hPlxcbiAgPGEgcm9sZT1cImJ1dHRvblwiIGhyZWYgY2xhc3M9XCJyaWdodCBjYXJvdXNlbC1jb250cm9sXCIgbmctY2xpY2s9XCJuZXh0KClcIiBuZy1zaG93PVwic2xpZGVzLmxlbmd0aCA+IDFcIj5cXG4gICAgPHNwYW4gYXJpYS1oaWRkZW49XCJ0cnVlXCIgY2xhc3M9XCJnbHlwaGljb24gZ2x5cGhpY29uLWNoZXZyb24tcmlnaHRcIj48L3NwYW4+XFxuICAgIDxzcGFuIGNsYXNzPVwic3Itb25seVwiPm5leHQ8L3NwYW4+XFxuICA8L2E+XFxuICA8b2wgY2xhc3M9XCJjYXJvdXNlbC1pbmRpY2F0b3JzXCIgbmctc2hvdz1cInNsaWRlcy5sZW5ndGggPiAxXCI+XFxuICAgIDxsaSBuZy1yZXBlYXQ9XCJzbGlkZSBpbiBzbGlkZXMgfCBvcmRlckJ5OmluZGV4T2ZTbGlkZSB0cmFjayBieSAkaW5kZXhcIiBuZy1jbGFzcz1cInsgYWN0aXZlOiBpc0FjdGl2ZShzbGlkZSkgfVwiIG5nLWNsaWNrPVwic2VsZWN0KHNsaWRlKVwiPlxcbiAgICAgIDxzcGFuIGNsYXNzPVwic3Itb25seVwiPnNsaWRlIHt7ICRpbmRleCArIDEgfX0gb2Yge3sgc2xpZGVzLmxlbmd0aCB9fTxzcGFuIG5nLWlmPVwiaXNBY3RpdmUoc2xpZGUpXCI+LCBjdXJyZW50bHkgYWN0aXZlPC9zcGFuPjwvc3Bhbj5cXG4gICAgPC9saT5cXG4gIDwvb2w+XFxuPC9kaXY+Jyl9XSksYW5ndWxhci5tb2R1bGUoXCJ1aWIvdGVtcGxhdGUvY2Fyb3VzZWwvc2xpZGUuaHRtbFwiLFtdKS5ydW4oW1wiJHRlbXBsYXRlQ2FjaGVcIixmdW5jdGlvbihhKXthLnB1dChcInVpYi90ZW1wbGF0ZS9jYXJvdXNlbC9zbGlkZS5odG1sXCIsJzxkaXYgbmctY2xhc3M9XCJ7XFxuICAgIFxcJ2FjdGl2ZVxcJzogYWN0aXZlXFxuICB9XCIgY2xhc3M9XCJpdGVtIHRleHQtY2VudGVyXCIgbmctdHJhbnNjbHVkZT48L2Rpdj5cXG4nKX1dKSxhbmd1bGFyLm1vZHVsZShcInVpYi90ZW1wbGF0ZS9kYXRlcGlja2VyL2RhdGVwaWNrZXIuaHRtbFwiLFtdKS5ydW4oW1wiJHRlbXBsYXRlQ2FjaGVcIixmdW5jdGlvbihhKXthLnB1dChcInVpYi90ZW1wbGF0ZS9kYXRlcGlja2VyL2RhdGVwaWNrZXIuaHRtbFwiLCc8ZGl2IGNsYXNzPVwidWliLWRhdGVwaWNrZXJcIiBuZy1zd2l0Y2g9XCJkYXRlcGlja2VyTW9kZVwiIHJvbGU9XCJhcHBsaWNhdGlvblwiIG5nLWtleWRvd249XCJrZXlkb3duKCRldmVudClcIj5cXG4gIDx1aWItZGF5cGlja2VyIG5nLXN3aXRjaC13aGVuPVwiZGF5XCIgdGFiaW5kZXg9XCIwXCI+PC91aWItZGF5cGlja2VyPlxcbiAgPHVpYi1tb250aHBpY2tlciBuZy1zd2l0Y2gtd2hlbj1cIm1vbnRoXCIgdGFiaW5kZXg9XCIwXCI+PC91aWItbW9udGhwaWNrZXI+XFxuICA8dWliLXllYXJwaWNrZXIgbmctc3dpdGNoLXdoZW49XCJ5ZWFyXCIgdGFiaW5kZXg9XCIwXCI+PC91aWIteWVhcnBpY2tlcj5cXG48L2Rpdj4nKX1dKSxhbmd1bGFyLm1vZHVsZShcInVpYi90ZW1wbGF0ZS9kYXRlcGlja2VyL2RheS5odG1sXCIsW10pLnJ1bihbXCIkdGVtcGxhdGVDYWNoZVwiLGZ1bmN0aW9uKGEpe2EucHV0KFwidWliL3RlbXBsYXRlL2RhdGVwaWNrZXIvZGF5Lmh0bWxcIiwnPHRhYmxlIGNsYXNzPVwidWliLWRheXBpY2tlclwiIHJvbGU9XCJncmlkXCIgYXJpYS1sYWJlbGxlZGJ5PVwie3s6OnVuaXF1ZUlkfX0tdGl0bGVcIiBhcmlhLWFjdGl2ZWRlc2NlbmRhbnQ9XCJ7e2FjdGl2ZURhdGVJZH19XCI+XFxuICA8dGhlYWQ+XFxuICAgIDx0cj5cXG4gICAgICA8dGg+PGJ1dHRvbiB0eXBlPVwiYnV0dG9uXCIgY2xhc3M9XCJidG4gYnRuLWRlZmF1bHQgYnRuLXNtIHB1bGwtbGVmdCB1aWItbGVmdFwiIG5nLWNsaWNrPVwibW92ZSgtMSlcIiB0YWJpbmRleD1cIi0xXCI+PGkgY2xhc3M9XCJnbHlwaGljb24gZ2x5cGhpY29uLWNoZXZyb24tbGVmdFwiPjwvaT48L2J1dHRvbj48L3RoPlxcbiAgICAgIDx0aCBjb2xzcGFuPVwie3s6OjUgKyBzaG93V2Vla3N9fVwiPjxidXR0b24gaWQ9XCJ7ezo6dW5pcXVlSWR9fS10aXRsZVwiIHJvbGU9XCJoZWFkaW5nXCIgYXJpYS1saXZlPVwiYXNzZXJ0aXZlXCIgYXJpYS1hdG9taWM9XCJ0cnVlXCIgdHlwZT1cImJ1dHRvblwiIGNsYXNzPVwiYnRuIGJ0bi1kZWZhdWx0IGJ0bi1zbSB1aWItdGl0bGVcIiBuZy1jbGljaz1cInRvZ2dsZU1vZGUoKVwiIG5nLWRpc2FibGVkPVwiZGF0ZXBpY2tlck1vZGUgPT09IG1heE1vZGVcIiB0YWJpbmRleD1cIi0xXCIgc3R5bGU9XCJ3aWR0aDoxMDAlO1wiPjxzdHJvbmc+e3t0aXRsZX19PC9zdHJvbmc+PC9idXR0b24+PC90aD5cXG4gICAgICA8dGg+PGJ1dHRvbiB0eXBlPVwiYnV0dG9uXCIgY2xhc3M9XCJidG4gYnRuLWRlZmF1bHQgYnRuLXNtIHB1bGwtcmlnaHQgdWliLXJpZ2h0XCIgbmctY2xpY2s9XCJtb3ZlKDEpXCIgdGFiaW5kZXg9XCItMVwiPjxpIGNsYXNzPVwiZ2x5cGhpY29uIGdseXBoaWNvbi1jaGV2cm9uLXJpZ2h0XCI+PC9pPjwvYnV0dG9uPjwvdGg+XFxuICAgIDwvdHI+XFxuICAgIDx0cj5cXG4gICAgICA8dGggbmctaWY9XCJzaG93V2Vla3NcIiBjbGFzcz1cInRleHQtY2VudGVyXCI+PC90aD5cXG4gICAgICA8dGggbmctcmVwZWF0PVwibGFiZWwgaW4gOjpsYWJlbHMgdHJhY2sgYnkgJGluZGV4XCIgY2xhc3M9XCJ0ZXh0LWNlbnRlclwiPjxzbWFsbCBhcmlhLWxhYmVsPVwie3s6OmxhYmVsLmZ1bGx9fVwiPnt7OjpsYWJlbC5hYmJyfX08L3NtYWxsPjwvdGg+XFxuICAgIDwvdHI+XFxuICA8L3RoZWFkPlxcbiAgPHRib2R5PlxcbiAgICA8dHIgY2xhc3M9XCJ1aWItd2Vla3NcIiBuZy1yZXBlYXQ9XCJyb3cgaW4gcm93cyB0cmFjayBieSAkaW5kZXhcIj5cXG4gICAgICA8dGQgbmctaWY9XCJzaG93V2Vla3NcIiBjbGFzcz1cInRleHQtY2VudGVyIGg2XCI+PGVtPnt7IHdlZWtOdW1iZXJzWyRpbmRleF0gfX08L2VtPjwvdGQ+XFxuICAgICAgPHRkIG5nLXJlcGVhdD1cImR0IGluIHJvd1wiIGNsYXNzPVwidWliLWRheSB0ZXh0LWNlbnRlclwiIHJvbGU9XCJncmlkY2VsbFwiXFxuICAgICAgICBpZD1cInt7OjpkdC51aWR9fVwiXFxuICAgICAgICBuZy1jbGFzcz1cIjo6ZHQuY3VzdG9tQ2xhc3NcIj5cXG4gICAgICAgIDxidXR0b24gdHlwZT1cImJ1dHRvblwiIHN0eWxlPVwibWluLXdpZHRoOjEwMCU7XCIgY2xhc3M9XCJidG4gYnRuLWRlZmF1bHQgYnRuLXNtXCJcXG4gICAgICAgICAgdWliLWlzLWNsYXNzPVwiXFxuICAgICAgICAgICAgXFwnYnRuLWluZm9cXCcgZm9yIHNlbGVjdGVkRHQsXFxuICAgICAgICAgICAgXFwnYWN0aXZlXFwnIGZvciBhY3RpdmVEdFxcbiAgICAgICAgICAgIG9uIGR0XCJcXG4gICAgICAgICAgbmctY2xpY2s9XCJzZWxlY3QoZHQuZGF0ZSlcIlxcbiAgICAgICAgICBuZy1kaXNhYmxlZD1cIjo6ZHQuZGlzYWJsZWRcIlxcbiAgICAgICAgICB0YWJpbmRleD1cIi0xXCI+PHNwYW4gbmctY2xhc3M9XCI6OntcXCd0ZXh0LW11dGVkXFwnOiBkdC5zZWNvbmRhcnksIFxcJ3RleHQtaW5mb1xcJzogZHQuY3VycmVudH1cIj57ezo6ZHQubGFiZWx9fTwvc3Bhbj48L2J1dHRvbj5cXG4gICAgICA8L3RkPlxcbiAgICA8L3RyPlxcbiAgPC90Ym9keT5cXG48L3RhYmxlPlxcbicpfV0pLGFuZ3VsYXIubW9kdWxlKFwidWliL3RlbXBsYXRlL2RhdGVwaWNrZXIvbW9udGguaHRtbFwiLFtdKS5ydW4oW1wiJHRlbXBsYXRlQ2FjaGVcIixmdW5jdGlvbihhKXthLnB1dChcInVpYi90ZW1wbGF0ZS9kYXRlcGlja2VyL21vbnRoLmh0bWxcIiwnPHRhYmxlIGNsYXNzPVwidWliLW1vbnRocGlja2VyXCIgcm9sZT1cImdyaWRcIiBhcmlhLWxhYmVsbGVkYnk9XCJ7ezo6dW5pcXVlSWR9fS10aXRsZVwiIGFyaWEtYWN0aXZlZGVzY2VuZGFudD1cInt7YWN0aXZlRGF0ZUlkfX1cIj5cXG4gIDx0aGVhZD5cXG4gICAgPHRyPlxcbiAgICAgIDx0aD48YnV0dG9uIHR5cGU9XCJidXR0b25cIiBjbGFzcz1cImJ0biBidG4tZGVmYXVsdCBidG4tc20gcHVsbC1sZWZ0IHVpYi1sZWZ0XCIgbmctY2xpY2s9XCJtb3ZlKC0xKVwiIHRhYmluZGV4PVwiLTFcIj48aSBjbGFzcz1cImdseXBoaWNvbiBnbHlwaGljb24tY2hldnJvbi1sZWZ0XCI+PC9pPjwvYnV0dG9uPjwvdGg+XFxuICAgICAgPHRoPjxidXR0b24gaWQ9XCJ7ezo6dW5pcXVlSWR9fS10aXRsZVwiIHJvbGU9XCJoZWFkaW5nXCIgYXJpYS1saXZlPVwiYXNzZXJ0aXZlXCIgYXJpYS1hdG9taWM9XCJ0cnVlXCIgdHlwZT1cImJ1dHRvblwiIGNsYXNzPVwiYnRuIGJ0bi1kZWZhdWx0IGJ0bi1zbSB1aWItdGl0bGVcIiBuZy1jbGljaz1cInRvZ2dsZU1vZGUoKVwiIG5nLWRpc2FibGVkPVwiZGF0ZXBpY2tlck1vZGUgPT09IG1heE1vZGVcIiB0YWJpbmRleD1cIi0xXCIgc3R5bGU9XCJ3aWR0aDoxMDAlO1wiPjxzdHJvbmc+e3t0aXRsZX19PC9zdHJvbmc+PC9idXR0b24+PC90aD5cXG4gICAgICA8dGg+PGJ1dHRvbiB0eXBlPVwiYnV0dG9uXCIgY2xhc3M9XCJidG4gYnRuLWRlZmF1bHQgYnRuLXNtIHB1bGwtcmlnaHQgdWliLXJpZ2h0XCIgbmctY2xpY2s9XCJtb3ZlKDEpXCIgdGFiaW5kZXg9XCItMVwiPjxpIGNsYXNzPVwiZ2x5cGhpY29uIGdseXBoaWNvbi1jaGV2cm9uLXJpZ2h0XCI+PC9pPjwvYnV0dG9uPjwvdGg+XFxuICAgIDwvdHI+XFxuICA8L3RoZWFkPlxcbiAgPHRib2R5PlxcbiAgICA8dHIgY2xhc3M9XCJ1aWItbW9udGhzXCIgbmctcmVwZWF0PVwicm93IGluIHJvd3MgdHJhY2sgYnkgJGluZGV4XCI+XFxuICAgICAgPHRkIG5nLXJlcGVhdD1cImR0IGluIHJvd1wiIGNsYXNzPVwidWliLW1vbnRoIHRleHQtY2VudGVyXCIgcm9sZT1cImdyaWRjZWxsXCJcXG4gICAgICAgIGlkPVwie3s6OmR0LnVpZH19XCJcXG4gICAgICAgIG5nLWNsYXNzPVwiOjpkdC5jdXN0b21DbGFzc1wiPlxcbiAgICAgICAgPGJ1dHRvbiB0eXBlPVwiYnV0dG9uXCIgc3R5bGU9XCJtaW4td2lkdGg6MTAwJTtcIiBjbGFzcz1cImJ0biBidG4tZGVmYXVsdFwiXFxuICAgICAgICAgIHVpYi1pcy1jbGFzcz1cIlxcbiAgICAgICAgICAgIFxcJ2J0bi1pbmZvXFwnIGZvciBzZWxlY3RlZER0LFxcbiAgICAgICAgICAgIFxcJ2FjdGl2ZVxcJyBmb3IgYWN0aXZlRHRcXG4gICAgICAgICAgICBvbiBkdFwiXFxuICAgICAgICAgIG5nLWNsaWNrPVwic2VsZWN0KGR0LmRhdGUpXCJcXG4gICAgICAgICAgbmctZGlzYWJsZWQ9XCI6OmR0LmRpc2FibGVkXCJcXG4gICAgICAgICAgdGFiaW5kZXg9XCItMVwiPjxzcGFuIG5nLWNsYXNzPVwiOjp7XFwndGV4dC1pbmZvXFwnOiBkdC5jdXJyZW50fVwiPnt7OjpkdC5sYWJlbH19PC9zcGFuPjwvYnV0dG9uPlxcbiAgICAgIDwvdGQ+XFxuICAgIDwvdHI+XFxuICA8L3Rib2R5PlxcbjwvdGFibGU+XFxuJyl9XSksYW5ndWxhci5tb2R1bGUoXCJ1aWIvdGVtcGxhdGUvZGF0ZXBpY2tlci9wb3B1cC5odG1sXCIsW10pLnJ1bihbXCIkdGVtcGxhdGVDYWNoZVwiLGZ1bmN0aW9uKGEpe2EucHV0KFwidWliL3RlbXBsYXRlL2RhdGVwaWNrZXIvcG9wdXAuaHRtbFwiLCc8dWwgY2xhc3M9XCJ1aWItZGF0ZXBpY2tlci1wb3B1cCBkcm9wZG93bi1tZW51XCIgZHJvcGRvd24tbmVzdGVkIG5nLWlmPVwiaXNPcGVuXCIgc3R5bGU9XCJkaXNwbGF5OiBibG9ja1wiIG5nLXN0eWxlPVwie3RvcDogcG9zaXRpb24udG9wK1xcJ3B4XFwnLCBsZWZ0OiBwb3NpdGlvbi5sZWZ0K1xcJ3B4XFwnfVwiIG5nLWtleWRvd249XCJrZXlkb3duKCRldmVudClcIiBuZy1jbGljaz1cIiRldmVudC5zdG9wUHJvcGFnYXRpb24oKVwiPlxcblx0PGxpIG5nLXRyYW5zY2x1ZGU+PC9saT5cXG5cdDxsaSBuZy1pZj1cInNob3dCdXR0b25CYXJcIiBzdHlsZT1cInBhZGRpbmc6MTBweCA5cHggMnB4XCIgY2xhc3M9XCJ1aWItYnV0dG9uLWJhclwiPlxcblx0XHQ8c3BhbiBjbGFzcz1cImJ0bi1ncm91cCBwdWxsLWxlZnRcIj5cXG5cdFx0XHQ8YnV0dG9uIHR5cGU9XCJidXR0b25cIiBjbGFzcz1cImJ0biBidG4tc20gYnRuLWluZm8gdWliLWRhdGVwaWNrZXItY3VycmVudFwiIG5nLWNsaWNrPVwic2VsZWN0KFxcJ3RvZGF5XFwnKVwiIG5nLWRpc2FibGVkPVwiaXNEaXNhYmxlZChcXCd0b2RheVxcJylcIj57eyBnZXRUZXh0KFxcJ2N1cnJlbnRcXCcpIH19PC9idXR0b24+XFxuXHRcdFx0PGJ1dHRvbiB0eXBlPVwiYnV0dG9uXCIgY2xhc3M9XCJidG4gYnRuLXNtIGJ0bi1kYW5nZXIgdWliLWNsZWFyXCIgbmctY2xpY2s9XCJzZWxlY3QobnVsbClcIj57eyBnZXRUZXh0KFxcJ2NsZWFyXFwnKSB9fTwvYnV0dG9uPlxcblx0XHQ8L3NwYW4+XFxuXHRcdDxidXR0b24gdHlwZT1cImJ1dHRvblwiIGNsYXNzPVwiYnRuIGJ0bi1zbSBidG4tc3VjY2VzcyBwdWxsLXJpZ2h0IHVpYi1jbG9zZVwiIG5nLWNsaWNrPVwiY2xvc2UoKVwiPnt7IGdldFRleHQoXFwnY2xvc2VcXCcpIH19PC9idXR0b24+XFxuXHQ8L2xpPlxcbjwvdWw+XFxuJyl9XSksYW5ndWxhci5tb2R1bGUoXCJ1aWIvdGVtcGxhdGUvZGF0ZXBpY2tlci95ZWFyLmh0bWxcIixbXSkucnVuKFtcIiR0ZW1wbGF0ZUNhY2hlXCIsZnVuY3Rpb24oYSl7YS5wdXQoXCJ1aWIvdGVtcGxhdGUvZGF0ZXBpY2tlci95ZWFyLmh0bWxcIiwnPHRhYmxlIGNsYXNzPVwidWliLXllYXJwaWNrZXJcIiByb2xlPVwiZ3JpZFwiIGFyaWEtbGFiZWxsZWRieT1cInt7Ojp1bmlxdWVJZH19LXRpdGxlXCIgYXJpYS1hY3RpdmVkZXNjZW5kYW50PVwie3thY3RpdmVEYXRlSWR9fVwiPlxcbiAgPHRoZWFkPlxcbiAgICA8dHI+XFxuICAgICAgPHRoPjxidXR0b24gdHlwZT1cImJ1dHRvblwiIGNsYXNzPVwiYnRuIGJ0bi1kZWZhdWx0IGJ0bi1zbSBwdWxsLWxlZnQgdWliLWxlZnRcIiBuZy1jbGljaz1cIm1vdmUoLTEpXCIgdGFiaW5kZXg9XCItMVwiPjxpIGNsYXNzPVwiZ2x5cGhpY29uIGdseXBoaWNvbi1jaGV2cm9uLWxlZnRcIj48L2k+PC9idXR0b24+PC90aD5cXG4gICAgICA8dGggY29sc3Bhbj1cInt7Ojpjb2x1bW5zIC0gMn19XCI+PGJ1dHRvbiBpZD1cInt7Ojp1bmlxdWVJZH19LXRpdGxlXCIgcm9sZT1cImhlYWRpbmdcIiBhcmlhLWxpdmU9XCJhc3NlcnRpdmVcIiBhcmlhLWF0b21pYz1cInRydWVcIiB0eXBlPVwiYnV0dG9uXCIgY2xhc3M9XCJidG4gYnRuLWRlZmF1bHQgYnRuLXNtIHVpYi10aXRsZVwiIG5nLWNsaWNrPVwidG9nZ2xlTW9kZSgpXCIgbmctZGlzYWJsZWQ9XCJkYXRlcGlja2VyTW9kZSA9PT0gbWF4TW9kZVwiIHRhYmluZGV4PVwiLTFcIiBzdHlsZT1cIndpZHRoOjEwMCU7XCI+PHN0cm9uZz57e3RpdGxlfX08L3N0cm9uZz48L2J1dHRvbj48L3RoPlxcbiAgICAgIDx0aD48YnV0dG9uIHR5cGU9XCJidXR0b25cIiBjbGFzcz1cImJ0biBidG4tZGVmYXVsdCBidG4tc20gcHVsbC1yaWdodCB1aWItcmlnaHRcIiBuZy1jbGljaz1cIm1vdmUoMSlcIiB0YWJpbmRleD1cIi0xXCI+PGkgY2xhc3M9XCJnbHlwaGljb24gZ2x5cGhpY29uLWNoZXZyb24tcmlnaHRcIj48L2k+PC9idXR0b24+PC90aD5cXG4gICAgPC90cj5cXG4gIDwvdGhlYWQ+XFxuICA8dGJvZHk+XFxuICAgIDx0ciBjbGFzcz1cInVpYi15ZWFyc1wiIG5nLXJlcGVhdD1cInJvdyBpbiByb3dzIHRyYWNrIGJ5ICRpbmRleFwiPlxcbiAgICAgIDx0ZCBuZy1yZXBlYXQ9XCJkdCBpbiByb3dcIiBjbGFzcz1cInVpYi15ZWFyIHRleHQtY2VudGVyXCIgcm9sZT1cImdyaWRjZWxsXCJcXG4gICAgICAgIGlkPVwie3s6OmR0LnVpZH19XCJcXG4gICAgICAgIG5nLWNsYXNzPVwiOjpkdC5jdXN0b21DbGFzc1wiPlxcbiAgICAgICAgPGJ1dHRvbiB0eXBlPVwiYnV0dG9uXCIgc3R5bGU9XCJtaW4td2lkdGg6MTAwJTtcIiBjbGFzcz1cImJ0biBidG4tZGVmYXVsdFwiXFxuICAgICAgICAgIHVpYi1pcy1jbGFzcz1cIlxcbiAgICAgICAgICAgIFxcJ2J0bi1pbmZvXFwnIGZvciBzZWxlY3RlZER0LFxcbiAgICAgICAgICAgIFxcJ2FjdGl2ZVxcJyBmb3IgYWN0aXZlRHRcXG4gICAgICAgICAgICBvbiBkdFwiXFxuICAgICAgICAgIG5nLWNsaWNrPVwic2VsZWN0KGR0LmRhdGUpXCJcXG4gICAgICAgICAgbmctZGlzYWJsZWQ9XCI6OmR0LmRpc2FibGVkXCJcXG4gICAgICAgICAgdGFiaW5kZXg9XCItMVwiPjxzcGFuIG5nLWNsYXNzPVwiOjp7XFwndGV4dC1pbmZvXFwnOiBkdC5jdXJyZW50fVwiPnt7OjpkdC5sYWJlbH19PC9zcGFuPjwvYnV0dG9uPlxcbiAgICAgIDwvdGQ+XFxuICAgIDwvdHI+XFxuICA8L3Rib2R5PlxcbjwvdGFibGU+XFxuJyl9XSksYW5ndWxhci5tb2R1bGUoXCJ1aWIvdGVtcGxhdGUvbW9kYWwvYmFja2Ryb3AuaHRtbFwiLFtdKS5ydW4oW1wiJHRlbXBsYXRlQ2FjaGVcIixmdW5jdGlvbihhKXthLnB1dChcInVpYi90ZW1wbGF0ZS9tb2RhbC9iYWNrZHJvcC5odG1sXCIsJzxkaXYgY2xhc3M9XCJtb2RhbC1iYWNrZHJvcFwiXFxuICAgICB1aWItbW9kYWwtYW5pbWF0aW9uLWNsYXNzPVwiZmFkZVwiXFxuICAgICBtb2RhbC1pbi1jbGFzcz1cImluXCJcXG4gICAgIG5nLXN0eWxlPVwie1xcJ3otaW5kZXhcXCc6IDEwNDAgKyAoaW5kZXggJiYgMSB8fCAwKSArIGluZGV4KjEwfVwiXFxuPjwvZGl2PlxcbicpO1xyXG59XSksYW5ndWxhci5tb2R1bGUoXCJ1aWIvdGVtcGxhdGUvbW9kYWwvd2luZG93Lmh0bWxcIixbXSkucnVuKFtcIiR0ZW1wbGF0ZUNhY2hlXCIsZnVuY3Rpb24oYSl7YS5wdXQoXCJ1aWIvdGVtcGxhdGUvbW9kYWwvd2luZG93Lmh0bWxcIiwnPGRpdiBtb2RhbC1yZW5kZXI9XCJ7eyRpc1JlbmRlcmVkfX1cIiB0YWJpbmRleD1cIi0xXCIgcm9sZT1cImRpYWxvZ1wiIGNsYXNzPVwibW9kYWxcIlxcbiAgICB1aWItbW9kYWwtYW5pbWF0aW9uLWNsYXNzPVwiZmFkZVwiXFxuICAgIG1vZGFsLWluLWNsYXNzPVwiaW5cIlxcbiAgICBuZy1zdHlsZT1cIntcXCd6LWluZGV4XFwnOiAxMDUwICsgaW5kZXgqMTAsIGRpc3BsYXk6IFxcJ2Jsb2NrXFwnfVwiPlxcbiAgICA8ZGl2IGNsYXNzPVwibW9kYWwtZGlhbG9nXCIgbmctY2xhc3M9XCJzaXplID8gXFwnbW9kYWwtXFwnICsgc2l6ZSA6IFxcJ1xcJ1wiPjxkaXYgY2xhc3M9XCJtb2RhbC1jb250ZW50XCIgdWliLW1vZGFsLXRyYW5zY2x1ZGU+PC9kaXY+PC9kaXY+XFxuPC9kaXY+XFxuJyl9XSksYW5ndWxhci5tb2R1bGUoXCJ1aWIvdGVtcGxhdGUvcGFnZXIvcGFnZXIuaHRtbFwiLFtdKS5ydW4oW1wiJHRlbXBsYXRlQ2FjaGVcIixmdW5jdGlvbihhKXthLnB1dChcInVpYi90ZW1wbGF0ZS9wYWdlci9wYWdlci5odG1sXCIsJzx1bCBjbGFzcz1cInBhZ2VyXCI+XFxuICA8bGkgbmctY2xhc3M9XCJ7ZGlzYWJsZWQ6IG5vUHJldmlvdXMoKXx8bmdEaXNhYmxlZCwgcHJldmlvdXM6IGFsaWdufVwiPjxhIGhyZWYgbmctY2xpY2s9XCJzZWxlY3RQYWdlKHBhZ2UgLSAxLCAkZXZlbnQpXCI+e3s6OmdldFRleHQoXFwncHJldmlvdXNcXCcpfX08L2E+PC9saT5cXG4gIDxsaSBuZy1jbGFzcz1cIntkaXNhYmxlZDogbm9OZXh0KCl8fG5nRGlzYWJsZWQsIG5leHQ6IGFsaWdufVwiPjxhIGhyZWYgbmctY2xpY2s9XCJzZWxlY3RQYWdlKHBhZ2UgKyAxLCAkZXZlbnQpXCI+e3s6OmdldFRleHQoXFwnbmV4dFxcJyl9fTwvYT48L2xpPlxcbjwvdWw+XFxuJyl9XSksYW5ndWxhci5tb2R1bGUoXCJ1aWIvdGVtcGxhdGUvcGFnaW5hdGlvbi9wYWdpbmF0aW9uLmh0bWxcIixbXSkucnVuKFtcIiR0ZW1wbGF0ZUNhY2hlXCIsZnVuY3Rpb24oYSl7YS5wdXQoXCJ1aWIvdGVtcGxhdGUvcGFnaW5hdGlvbi9wYWdpbmF0aW9uLmh0bWxcIiwnPHVsIGNsYXNzPVwicGFnaW5hdGlvblwiPlxcbiAgPGxpIG5nLWlmPVwiOjpib3VuZGFyeUxpbmtzXCIgbmctY2xhc3M9XCJ7ZGlzYWJsZWQ6IG5vUHJldmlvdXMoKXx8bmdEaXNhYmxlZH1cIiBjbGFzcz1cInBhZ2luYXRpb24tZmlyc3RcIj48YSBocmVmIG5nLWNsaWNrPVwic2VsZWN0UGFnZSgxLCAkZXZlbnQpXCI+e3s6OmdldFRleHQoXFwnZmlyc3RcXCcpfX08L2E+PC9saT5cXG4gIDxsaSBuZy1pZj1cIjo6ZGlyZWN0aW9uTGlua3NcIiBuZy1jbGFzcz1cIntkaXNhYmxlZDogbm9QcmV2aW91cygpfHxuZ0Rpc2FibGVkfVwiIGNsYXNzPVwicGFnaW5hdGlvbi1wcmV2XCI+PGEgaHJlZiBuZy1jbGljaz1cInNlbGVjdFBhZ2UocGFnZSAtIDEsICRldmVudClcIj57ezo6Z2V0VGV4dChcXCdwcmV2aW91c1xcJyl9fTwvYT48L2xpPlxcbiAgPGxpIG5nLXJlcGVhdD1cInBhZ2UgaW4gcGFnZXMgdHJhY2sgYnkgJGluZGV4XCIgbmctY2xhc3M9XCJ7YWN0aXZlOiBwYWdlLmFjdGl2ZSxkaXNhYmxlZDogbmdEaXNhYmxlZCYmIXBhZ2UuYWN0aXZlfVwiIGNsYXNzPVwicGFnaW5hdGlvbi1wYWdlXCI+PGEgaHJlZiBuZy1jbGljaz1cInNlbGVjdFBhZ2UocGFnZS5udW1iZXIsICRldmVudClcIj57e3BhZ2UudGV4dH19PC9hPjwvbGk+XFxuICA8bGkgbmctaWY9XCI6OmRpcmVjdGlvbkxpbmtzXCIgbmctY2xhc3M9XCJ7ZGlzYWJsZWQ6IG5vTmV4dCgpfHxuZ0Rpc2FibGVkfVwiIGNsYXNzPVwicGFnaW5hdGlvbi1uZXh0XCI+PGEgaHJlZiBuZy1jbGljaz1cInNlbGVjdFBhZ2UocGFnZSArIDEsICRldmVudClcIj57ezo6Z2V0VGV4dChcXCduZXh0XFwnKX19PC9hPjwvbGk+XFxuICA8bGkgbmctaWY9XCI6OmJvdW5kYXJ5TGlua3NcIiBuZy1jbGFzcz1cIntkaXNhYmxlZDogbm9OZXh0KCl8fG5nRGlzYWJsZWR9XCIgY2xhc3M9XCJwYWdpbmF0aW9uLWxhc3RcIj48YSBocmVmIG5nLWNsaWNrPVwic2VsZWN0UGFnZSh0b3RhbFBhZ2VzLCAkZXZlbnQpXCI+e3s6OmdldFRleHQoXFwnbGFzdFxcJyl9fTwvYT48L2xpPlxcbjwvdWw+XFxuJyl9XSksYW5ndWxhci5tb2R1bGUoXCJ1aWIvdGVtcGxhdGUvdG9vbHRpcC90b29sdGlwLWh0bWwtcG9wdXAuaHRtbFwiLFtdKS5ydW4oW1wiJHRlbXBsYXRlQ2FjaGVcIixmdW5jdGlvbihhKXthLnB1dChcInVpYi90ZW1wbGF0ZS90b29sdGlwL3Rvb2x0aXAtaHRtbC1wb3B1cC5odG1sXCIsJzxkaXYgY2xhc3M9XCJ0b29sdGlwXCJcXG4gIHRvb2x0aXAtYW5pbWF0aW9uLWNsYXNzPVwiZmFkZVwiXFxuICB1aWItdG9vbHRpcC1jbGFzc2VzXFxuICBuZy1jbGFzcz1cInsgaW46IGlzT3BlbigpIH1cIj5cXG4gIDxkaXYgY2xhc3M9XCJ0b29sdGlwLWFycm93XCI+PC9kaXY+XFxuICA8ZGl2IGNsYXNzPVwidG9vbHRpcC1pbm5lclwiIG5nLWJpbmQtaHRtbD1cImNvbnRlbnRFeHAoKVwiPjwvZGl2PlxcbjwvZGl2PlxcbicpfV0pLGFuZ3VsYXIubW9kdWxlKFwidGVtcGxhdGUvdG9vbHRpcC90b29sdGlwLWh0bWwtdW5zYWZlLXBvcHVwLmh0bWxcIixbXSkucnVuKFtcIiR0ZW1wbGF0ZUNhY2hlXCIsZnVuY3Rpb24oYSl7YS5wdXQoXCJ0ZW1wbGF0ZS90b29sdGlwL3Rvb2x0aXAtaHRtbC11bnNhZmUtcG9wdXAuaHRtbFwiLCc8ZGl2IGNsYXNzPVwidG9vbHRpcFwiXFxuICB0b29sdGlwLWFuaW1hdGlvbi1jbGFzcz1cImZhZGVcIlxcbiAgdG9vbHRpcC1jbGFzc2VzXFxuICBuZy1jbGFzcz1cInsgaW46IGlzT3BlbigpIH1cIj5cXG4gIDxkaXYgY2xhc3M9XCJ0b29sdGlwLWFycm93XCI+PC9kaXY+XFxuICA8ZGl2IGNsYXNzPVwidG9vbHRpcC1pbm5lclwiIGJpbmQtaHRtbC11bnNhZmU9XCJjb250ZW50XCI+PC9kaXY+XFxuPC9kaXY+XFxuJyl9XSksYW5ndWxhci5tb2R1bGUoXCJ1aWIvdGVtcGxhdGUvdG9vbHRpcC90b29sdGlwLXBvcHVwLmh0bWxcIixbXSkucnVuKFtcIiR0ZW1wbGF0ZUNhY2hlXCIsZnVuY3Rpb24oYSl7YS5wdXQoXCJ1aWIvdGVtcGxhdGUvdG9vbHRpcC90b29sdGlwLXBvcHVwLmh0bWxcIiwnPGRpdiBjbGFzcz1cInRvb2x0aXBcIlxcbiAgdG9vbHRpcC1hbmltYXRpb24tY2xhc3M9XCJmYWRlXCJcXG4gIHVpYi10b29sdGlwLWNsYXNzZXNcXG4gIG5nLWNsYXNzPVwieyBpbjogaXNPcGVuKCkgfVwiPlxcbiAgPGRpdiBjbGFzcz1cInRvb2x0aXAtYXJyb3dcIj48L2Rpdj5cXG4gIDxkaXYgY2xhc3M9XCJ0b29sdGlwLWlubmVyXCIgbmctYmluZD1cImNvbnRlbnRcIj48L2Rpdj5cXG48L2Rpdj5cXG4nKX1dKSxhbmd1bGFyLm1vZHVsZShcInVpYi90ZW1wbGF0ZS90b29sdGlwL3Rvb2x0aXAtdGVtcGxhdGUtcG9wdXAuaHRtbFwiLFtdKS5ydW4oW1wiJHRlbXBsYXRlQ2FjaGVcIixmdW5jdGlvbihhKXthLnB1dChcInVpYi90ZW1wbGF0ZS90b29sdGlwL3Rvb2x0aXAtdGVtcGxhdGUtcG9wdXAuaHRtbFwiLCc8ZGl2IGNsYXNzPVwidG9vbHRpcFwiXFxuICB0b29sdGlwLWFuaW1hdGlvbi1jbGFzcz1cImZhZGVcIlxcbiAgdWliLXRvb2x0aXAtY2xhc3Nlc1xcbiAgbmctY2xhc3M9XCJ7IGluOiBpc09wZW4oKSB9XCI+XFxuICA8ZGl2IGNsYXNzPVwidG9vbHRpcC1hcnJvd1wiPjwvZGl2PlxcbiAgPGRpdiBjbGFzcz1cInRvb2x0aXAtaW5uZXJcIlxcbiAgICB1aWItdG9vbHRpcC10ZW1wbGF0ZS10cmFuc2NsdWRlPVwiY29udGVudEV4cCgpXCJcXG4gICAgdG9vbHRpcC10ZW1wbGF0ZS10cmFuc2NsdWRlLXNjb3BlPVwib3JpZ2luU2NvcGUoKVwiPjwvZGl2PlxcbjwvZGl2PlxcbicpfV0pLGFuZ3VsYXIubW9kdWxlKFwidWliL3RlbXBsYXRlL3BvcG92ZXIvcG9wb3Zlci1odG1sLmh0bWxcIixbXSkucnVuKFtcIiR0ZW1wbGF0ZUNhY2hlXCIsZnVuY3Rpb24oYSl7YS5wdXQoXCJ1aWIvdGVtcGxhdGUvcG9wb3Zlci9wb3BvdmVyLWh0bWwuaHRtbFwiLCc8ZGl2IGNsYXNzPVwicG9wb3ZlclwiXFxuICB0b29sdGlwLWFuaW1hdGlvbi1jbGFzcz1cImZhZGVcIlxcbiAgdWliLXRvb2x0aXAtY2xhc3Nlc1xcbiAgbmctY2xhc3M9XCJ7IGluOiBpc09wZW4oKSB9XCI+XFxuICA8ZGl2IGNsYXNzPVwiYXJyb3dcIj48L2Rpdj5cXG5cXG4gIDxkaXYgY2xhc3M9XCJwb3BvdmVyLWlubmVyXCI+XFxuICAgICAgPGgzIGNsYXNzPVwicG9wb3Zlci10aXRsZVwiIG5nLWJpbmQ9XCJ0aXRsZVwiIG5nLWlmPVwidGl0bGVcIj48L2gzPlxcbiAgICAgIDxkaXYgY2xhc3M9XCJwb3BvdmVyLWNvbnRlbnRcIiBuZy1iaW5kLWh0bWw9XCJjb250ZW50RXhwKClcIj48L2Rpdj5cXG4gIDwvZGl2PlxcbjwvZGl2PlxcbicpfV0pLGFuZ3VsYXIubW9kdWxlKFwidWliL3RlbXBsYXRlL3BvcG92ZXIvcG9wb3Zlci10ZW1wbGF0ZS5odG1sXCIsW10pLnJ1bihbXCIkdGVtcGxhdGVDYWNoZVwiLGZ1bmN0aW9uKGEpe2EucHV0KFwidWliL3RlbXBsYXRlL3BvcG92ZXIvcG9wb3Zlci10ZW1wbGF0ZS5odG1sXCIsJzxkaXYgY2xhc3M9XCJwb3BvdmVyXCJcXG4gIHRvb2x0aXAtYW5pbWF0aW9uLWNsYXNzPVwiZmFkZVwiXFxuICB1aWItdG9vbHRpcC1jbGFzc2VzXFxuICBuZy1jbGFzcz1cInsgaW46IGlzT3BlbigpIH1cIj5cXG4gIDxkaXYgY2xhc3M9XCJhcnJvd1wiPjwvZGl2PlxcblxcbiAgPGRpdiBjbGFzcz1cInBvcG92ZXItaW5uZXJcIj5cXG4gICAgICA8aDMgY2xhc3M9XCJwb3BvdmVyLXRpdGxlXCIgbmctYmluZD1cInRpdGxlXCIgbmctaWY9XCJ0aXRsZVwiPjwvaDM+XFxuICAgICAgPGRpdiBjbGFzcz1cInBvcG92ZXItY29udGVudFwiXFxuICAgICAgICB1aWItdG9vbHRpcC10ZW1wbGF0ZS10cmFuc2NsdWRlPVwiY29udGVudEV4cCgpXCJcXG4gICAgICAgIHRvb2x0aXAtdGVtcGxhdGUtdHJhbnNjbHVkZS1zY29wZT1cIm9yaWdpblNjb3BlKClcIj48L2Rpdj5cXG4gIDwvZGl2PlxcbjwvZGl2PlxcbicpfV0pLGFuZ3VsYXIubW9kdWxlKFwidWliL3RlbXBsYXRlL3BvcG92ZXIvcG9wb3Zlci5odG1sXCIsW10pLnJ1bihbXCIkdGVtcGxhdGVDYWNoZVwiLGZ1bmN0aW9uKGEpe2EucHV0KFwidWliL3RlbXBsYXRlL3BvcG92ZXIvcG9wb3Zlci5odG1sXCIsJzxkaXYgY2xhc3M9XCJwb3BvdmVyXCJcXG4gIHRvb2x0aXAtYW5pbWF0aW9uLWNsYXNzPVwiZmFkZVwiXFxuICB1aWItdG9vbHRpcC1jbGFzc2VzXFxuICBuZy1jbGFzcz1cInsgaW46IGlzT3BlbigpIH1cIj5cXG4gIDxkaXYgY2xhc3M9XCJhcnJvd1wiPjwvZGl2PlxcblxcbiAgPGRpdiBjbGFzcz1cInBvcG92ZXItaW5uZXJcIj5cXG4gICAgICA8aDMgY2xhc3M9XCJwb3BvdmVyLXRpdGxlXCIgbmctYmluZD1cInRpdGxlXCIgbmctaWY9XCJ0aXRsZVwiPjwvaDM+XFxuICAgICAgPGRpdiBjbGFzcz1cInBvcG92ZXItY29udGVudFwiIG5nLWJpbmQ9XCJjb250ZW50XCI+PC9kaXY+XFxuICA8L2Rpdj5cXG48L2Rpdj5cXG4nKX1dKSxhbmd1bGFyLm1vZHVsZShcInVpYi90ZW1wbGF0ZS9wcm9ncmVzc2Jhci9iYXIuaHRtbFwiLFtdKS5ydW4oW1wiJHRlbXBsYXRlQ2FjaGVcIixmdW5jdGlvbihhKXthLnB1dChcInVpYi90ZW1wbGF0ZS9wcm9ncmVzc2Jhci9iYXIuaHRtbFwiLCc8ZGl2IGNsYXNzPVwicHJvZ3Jlc3MtYmFyXCIgbmctY2xhc3M9XCJ0eXBlICYmIFxcJ3Byb2dyZXNzLWJhci1cXCcgKyB0eXBlXCIgcm9sZT1cInByb2dyZXNzYmFyXCIgYXJpYS12YWx1ZW5vdz1cInt7dmFsdWV9fVwiIGFyaWEtdmFsdWVtaW49XCIwXCIgYXJpYS12YWx1ZW1heD1cInt7bWF4fX1cIiBuZy1zdHlsZT1cInt3aWR0aDogKHBlcmNlbnQgPCAxMDAgPyBwZXJjZW50IDogMTAwKSArIFxcJyVcXCd9XCIgYXJpYS12YWx1ZXRleHQ9XCJ7e3BlcmNlbnQgfCBudW1iZXI6MH19JVwiIGFyaWEtbGFiZWxsZWRieT1cInt7Ojp0aXRsZX19XCIgbmctdHJhbnNjbHVkZT48L2Rpdj5cXG4nKX1dKSxhbmd1bGFyLm1vZHVsZShcInVpYi90ZW1wbGF0ZS9wcm9ncmVzc2Jhci9wcm9ncmVzcy5odG1sXCIsW10pLnJ1bihbXCIkdGVtcGxhdGVDYWNoZVwiLGZ1bmN0aW9uKGEpe2EucHV0KFwidWliL3RlbXBsYXRlL3Byb2dyZXNzYmFyL3Byb2dyZXNzLmh0bWxcIiwnPGRpdiBjbGFzcz1cInByb2dyZXNzXCIgbmctdHJhbnNjbHVkZSBhcmlhLWxhYmVsbGVkYnk9XCJ7ezo6dGl0bGV9fVwiPjwvZGl2PicpfV0pLGFuZ3VsYXIubW9kdWxlKFwidWliL3RlbXBsYXRlL3Byb2dyZXNzYmFyL3Byb2dyZXNzYmFyLmh0bWxcIixbXSkucnVuKFtcIiR0ZW1wbGF0ZUNhY2hlXCIsZnVuY3Rpb24oYSl7YS5wdXQoXCJ1aWIvdGVtcGxhdGUvcHJvZ3Jlc3NiYXIvcHJvZ3Jlc3NiYXIuaHRtbFwiLCc8ZGl2IGNsYXNzPVwicHJvZ3Jlc3NcIj5cXG4gIDxkaXYgY2xhc3M9XCJwcm9ncmVzcy1iYXJcIiBuZy1jbGFzcz1cInR5cGUgJiYgXFwncHJvZ3Jlc3MtYmFyLVxcJyArIHR5cGVcIiByb2xlPVwicHJvZ3Jlc3NiYXJcIiBhcmlhLXZhbHVlbm93PVwie3t2YWx1ZX19XCIgYXJpYS12YWx1ZW1pbj1cIjBcIiBhcmlhLXZhbHVlbWF4PVwie3ttYXh9fVwiIG5nLXN0eWxlPVwie3dpZHRoOiAocGVyY2VudCA8IDEwMCA/IHBlcmNlbnQgOiAxMDApICsgXFwnJVxcJ31cIiBhcmlhLXZhbHVldGV4dD1cInt7cGVyY2VudCB8IG51bWJlcjowfX0lXCIgYXJpYS1sYWJlbGxlZGJ5PVwie3s6OnRpdGxlfX1cIiBuZy10cmFuc2NsdWRlPjwvZGl2PlxcbjwvZGl2PlxcbicpfV0pLGFuZ3VsYXIubW9kdWxlKFwidWliL3RlbXBsYXRlL3JhdGluZy9yYXRpbmcuaHRtbFwiLFtdKS5ydW4oW1wiJHRlbXBsYXRlQ2FjaGVcIixmdW5jdGlvbihhKXthLnB1dChcInVpYi90ZW1wbGF0ZS9yYXRpbmcvcmF0aW5nLmh0bWxcIiwnPHNwYW4gbmctbW91c2VsZWF2ZT1cInJlc2V0KClcIiBuZy1rZXlkb3duPVwib25LZXlkb3duKCRldmVudClcIiB0YWJpbmRleD1cIjBcIiByb2xlPVwic2xpZGVyXCIgYXJpYS12YWx1ZW1pbj1cIjBcIiBhcmlhLXZhbHVlbWF4PVwie3tyYW5nZS5sZW5ndGh9fVwiIGFyaWEtdmFsdWVub3c9XCJ7e3ZhbHVlfX1cIj5cXG4gICAgPHNwYW4gbmctcmVwZWF0LXN0YXJ0PVwiciBpbiByYW5nZSB0cmFjayBieSAkaW5kZXhcIiBjbGFzcz1cInNyLW9ubHlcIj4oe3sgJGluZGV4IDwgdmFsdWUgPyBcXCcqXFwnIDogXFwnIFxcJyB9fSk8L3NwYW4+XFxuICAgIDxpIG5nLXJlcGVhdC1lbmQgbmctbW91c2VlbnRlcj1cImVudGVyKCRpbmRleCArIDEpXCIgbmctY2xpY2s9XCJyYXRlKCRpbmRleCArIDEpXCIgY2xhc3M9XCJnbHlwaGljb25cIiBuZy1jbGFzcz1cIiRpbmRleCA8IHZhbHVlICYmIChyLnN0YXRlT24gfHwgXFwnZ2x5cGhpY29uLXN0YXJcXCcpIHx8IChyLnN0YXRlT2ZmIHx8IFxcJ2dseXBoaWNvbi1zdGFyLWVtcHR5XFwnKVwiIG5nLWF0dHItdGl0bGU9XCJ7e3IudGl0bGV9fVwiIGFyaWEtdmFsdWV0ZXh0PVwie3tyLnRpdGxlfX1cIj48L2k+XFxuPC9zcGFuPlxcbicpfV0pLGFuZ3VsYXIubW9kdWxlKFwidWliL3RlbXBsYXRlL3RhYnMvdGFiLmh0bWxcIixbXSkucnVuKFtcIiR0ZW1wbGF0ZUNhY2hlXCIsZnVuY3Rpb24oYSl7YS5wdXQoXCJ1aWIvdGVtcGxhdGUvdGFicy90YWIuaHRtbFwiLCc8bGkgbmctY2xhc3M9XCJ7YWN0aXZlOiBhY3RpdmUsIGRpc2FibGVkOiBkaXNhYmxlZH1cIiBjbGFzcz1cInVpYi10YWJcIj5cXG4gIDxkaXYgbmctY2xpY2s9XCJzZWxlY3QoKVwiIHVpYi10YWItaGVhZGluZy10cmFuc2NsdWRlPnt7aGVhZGluZ319PC9kaXY+XFxuPC9saT5cXG4nKX1dKSxhbmd1bGFyLm1vZHVsZShcInVpYi90ZW1wbGF0ZS90YWJzL3RhYnNldC5odG1sXCIsW10pLnJ1bihbXCIkdGVtcGxhdGVDYWNoZVwiLGZ1bmN0aW9uKGEpe2EucHV0KFwidWliL3RlbXBsYXRlL3RhYnMvdGFic2V0Lmh0bWxcIiwnPGRpdj5cXG4gIDx1bCBjbGFzcz1cIm5hdiBuYXYte3t0eXBlIHx8IFxcJ3RhYnNcXCd9fVwiIG5nLWNsYXNzPVwie1xcJ25hdi1zdGFja2VkXFwnOiB2ZXJ0aWNhbCwgXFwnbmF2LWp1c3RpZmllZFxcJzoganVzdGlmaWVkfVwiIG5nLXRyYW5zY2x1ZGU+PC91bD5cXG4gIDxkaXYgY2xhc3M9XCJ0YWItY29udGVudFwiPlxcbiAgICA8ZGl2IGNsYXNzPVwidGFiLXBhbmVcIiBcXG4gICAgICAgICBuZy1yZXBlYXQ9XCJ0YWIgaW4gdGFic1wiIFxcbiAgICAgICAgIG5nLWNsYXNzPVwie2FjdGl2ZTogdGFiLmFjdGl2ZX1cIlxcbiAgICAgICAgIHVpYi10YWItY29udGVudC10cmFuc2NsdWRlPVwidGFiXCI+XFxuICAgIDwvZGl2PlxcbiAgPC9kaXY+XFxuPC9kaXY+XFxuJyl9XSksYW5ndWxhci5tb2R1bGUoXCJ1aWIvdGVtcGxhdGUvdGltZXBpY2tlci90aW1lcGlja2VyLmh0bWxcIixbXSkucnVuKFtcIiR0ZW1wbGF0ZUNhY2hlXCIsZnVuY3Rpb24oYSl7YS5wdXQoXCJ1aWIvdGVtcGxhdGUvdGltZXBpY2tlci90aW1lcGlja2VyLmh0bWxcIiwnPHRhYmxlIGNsYXNzPVwidWliLXRpbWVwaWNrZXJcIj5cXG4gIDx0Ym9keT5cXG4gICAgPHRyIGNsYXNzPVwidGV4dC1jZW50ZXJcIiBuZy1zaG93PVwiOjpzaG93U3Bpbm5lcnNcIj5cXG4gICAgICA8dGQgY2xhc3M9XCJ1aWItaW5jcmVtZW50IGhvdXJzXCI+PGEgbmctY2xpY2s9XCJpbmNyZW1lbnRIb3VycygpXCIgbmctY2xhc3M9XCJ7ZGlzYWJsZWQ6IG5vSW5jcmVtZW50SG91cnMoKX1cIiBjbGFzcz1cImJ0biBidG4tbGlua1wiIG5nLWRpc2FibGVkPVwibm9JbmNyZW1lbnRIb3VycygpXCIgdGFiaW5kZXg9XCJ7ezo6dGFiaW5kZXh9fVwiPjxzcGFuIGNsYXNzPVwiZ2x5cGhpY29uIGdseXBoaWNvbi1jaGV2cm9uLXVwXCI+PC9zcGFuPjwvYT48L3RkPlxcbiAgICAgIDx0ZD4mbmJzcDs8L3RkPlxcbiAgICAgIDx0ZCBjbGFzcz1cInVpYi1pbmNyZW1lbnQgbWludXRlc1wiPjxhIG5nLWNsaWNrPVwiaW5jcmVtZW50TWludXRlcygpXCIgbmctY2xhc3M9XCJ7ZGlzYWJsZWQ6IG5vSW5jcmVtZW50TWludXRlcygpfVwiIGNsYXNzPVwiYnRuIGJ0bi1saW5rXCIgbmctZGlzYWJsZWQ9XCJub0luY3JlbWVudE1pbnV0ZXMoKVwiIHRhYmluZGV4PVwie3s6OnRhYmluZGV4fX1cIj48c3BhbiBjbGFzcz1cImdseXBoaWNvbiBnbHlwaGljb24tY2hldnJvbi11cFwiPjwvc3Bhbj48L2E+PC90ZD5cXG4gICAgICA8dGQgbmctc2hvdz1cInNob3dTZWNvbmRzXCI+Jm5ic3A7PC90ZD5cXG4gICAgICA8dGQgbmctc2hvdz1cInNob3dTZWNvbmRzXCIgY2xhc3M9XCJ1aWItaW5jcmVtZW50IHNlY29uZHNcIj48YSBuZy1jbGljaz1cImluY3JlbWVudFNlY29uZHMoKVwiIG5nLWNsYXNzPVwie2Rpc2FibGVkOiBub0luY3JlbWVudFNlY29uZHMoKX1cIiBjbGFzcz1cImJ0biBidG4tbGlua1wiIG5nLWRpc2FibGVkPVwibm9JbmNyZW1lbnRTZWNvbmRzKClcIiB0YWJpbmRleD1cInt7Ojp0YWJpbmRleH19XCI+PHNwYW4gY2xhc3M9XCJnbHlwaGljb24gZ2x5cGhpY29uLWNoZXZyb24tdXBcIj48L3NwYW4+PC9hPjwvdGQ+XFxuICAgICAgPHRkIG5nLXNob3c9XCJzaG93TWVyaWRpYW5cIj48L3RkPlxcbiAgICA8L3RyPlxcbiAgICA8dHI+XFxuICAgICAgPHRkIGNsYXNzPVwiZm9ybS1ncm91cCB1aWItdGltZSBob3Vyc1wiIG5nLWNsYXNzPVwie1xcJ2hhcy1lcnJvclxcJzogaW52YWxpZEhvdXJzfVwiPlxcbiAgICAgICAgPGlucHV0IHN0eWxlPVwid2lkdGg6NTBweDtcIiB0eXBlPVwidGV4dFwiIHBsYWNlaG9sZGVyPVwiSEhcIiBuZy1tb2RlbD1cImhvdXJzXCIgbmctY2hhbmdlPVwidXBkYXRlSG91cnMoKVwiIGNsYXNzPVwiZm9ybS1jb250cm9sIHRleHQtY2VudGVyXCIgbmctcmVhZG9ubHk9XCI6OnJlYWRvbmx5SW5wdXRcIiBtYXhsZW5ndGg9XCIyXCIgdGFiaW5kZXg9XCJ7ezo6dGFiaW5kZXh9fVwiIG5nLWRpc2FibGVkPVwibm9JbmNyZW1lbnRIb3VycygpXCIgbmctYmx1cj1cImJsdXIoKVwiPlxcbiAgICAgIDwvdGQ+XFxuICAgICAgPHRkIGNsYXNzPVwidWliLXNlcGFyYXRvclwiPjo8L3RkPlxcbiAgICAgIDx0ZCBjbGFzcz1cImZvcm0tZ3JvdXAgdWliLXRpbWUgbWludXRlc1wiIG5nLWNsYXNzPVwie1xcJ2hhcy1lcnJvclxcJzogaW52YWxpZE1pbnV0ZXN9XCI+XFxuICAgICAgICA8aW5wdXQgc3R5bGU9XCJ3aWR0aDo1MHB4O1wiIHR5cGU9XCJ0ZXh0XCIgcGxhY2Vob2xkZXI9XCJNTVwiIG5nLW1vZGVsPVwibWludXRlc1wiIG5nLWNoYW5nZT1cInVwZGF0ZU1pbnV0ZXMoKVwiIGNsYXNzPVwiZm9ybS1jb250cm9sIHRleHQtY2VudGVyXCIgbmctcmVhZG9ubHk9XCI6OnJlYWRvbmx5SW5wdXRcIiBtYXhsZW5ndGg9XCIyXCIgdGFiaW5kZXg9XCJ7ezo6dGFiaW5kZXh9fVwiIG5nLWRpc2FibGVkPVwibm9JbmNyZW1lbnRNaW51dGVzKClcIiBuZy1ibHVyPVwiYmx1cigpXCI+XFxuICAgICAgPC90ZD5cXG4gICAgICA8dGQgbmctc2hvdz1cInNob3dTZWNvbmRzXCIgY2xhc3M9XCJ1aWItc2VwYXJhdG9yXCI+OjwvdGQ+XFxuICAgICAgPHRkIGNsYXNzPVwiZm9ybS1ncm91cCB1aWItdGltZSBzZWNvbmRzXCIgbmctY2xhc3M9XCJ7XFwnaGFzLWVycm9yXFwnOiBpbnZhbGlkU2Vjb25kc31cIiBuZy1zaG93PVwic2hvd1NlY29uZHNcIj5cXG4gICAgICAgIDxpbnB1dCBzdHlsZT1cIndpZHRoOjUwcHg7XCIgdHlwZT1cInRleHRcIiBuZy1tb2RlbD1cInNlY29uZHNcIiBuZy1jaGFuZ2U9XCJ1cGRhdGVTZWNvbmRzKClcIiBjbGFzcz1cImZvcm0tY29udHJvbCB0ZXh0LWNlbnRlclwiIG5nLXJlYWRvbmx5PVwicmVhZG9ubHlJbnB1dFwiIG1heGxlbmd0aD1cIjJcIiB0YWJpbmRleD1cInt7Ojp0YWJpbmRleH19XCIgbmctZGlzYWJsZWQ9XCJub0luY3JlbWVudFNlY29uZHMoKVwiIG5nLWJsdXI9XCJibHVyKClcIj5cXG4gICAgICA8L3RkPlxcbiAgICAgIDx0ZCBuZy1zaG93PVwic2hvd01lcmlkaWFuXCIgY2xhc3M9XCJ1aWItdGltZSBhbS1wbVwiPjxidXR0b24gdHlwZT1cImJ1dHRvblwiIG5nLWNsYXNzPVwie2Rpc2FibGVkOiBub1RvZ2dsZU1lcmlkaWFuKCl9XCIgY2xhc3M9XCJidG4gYnRuLWRlZmF1bHQgdGV4dC1jZW50ZXJcIiBuZy1jbGljaz1cInRvZ2dsZU1lcmlkaWFuKClcIiBuZy1kaXNhYmxlZD1cIm5vVG9nZ2xlTWVyaWRpYW4oKVwiIHRhYmluZGV4PVwie3s6OnRhYmluZGV4fX1cIj57e21lcmlkaWFufX08L2J1dHRvbj48L3RkPlxcbiAgICA8L3RyPlxcbiAgICA8dHIgY2xhc3M9XCJ0ZXh0LWNlbnRlclwiIG5nLXNob3c9XCI6OnNob3dTcGlubmVyc1wiPlxcbiAgICAgIDx0ZCBjbGFzcz1cInVpYi1kZWNyZW1lbnQgaG91cnNcIj48YSBuZy1jbGljaz1cImRlY3JlbWVudEhvdXJzKClcIiBuZy1jbGFzcz1cIntkaXNhYmxlZDogbm9EZWNyZW1lbnRIb3VycygpfVwiIGNsYXNzPVwiYnRuIGJ0bi1saW5rXCIgbmctZGlzYWJsZWQ9XCJub0RlY3JlbWVudEhvdXJzKClcIiB0YWJpbmRleD1cInt7Ojp0YWJpbmRleH19XCI+PHNwYW4gY2xhc3M9XCJnbHlwaGljb24gZ2x5cGhpY29uLWNoZXZyb24tZG93blwiPjwvc3Bhbj48L2E+PC90ZD5cXG4gICAgICA8dGQ+Jm5ic3A7PC90ZD5cXG4gICAgICA8dGQgY2xhc3M9XCJ1aWItZGVjcmVtZW50IG1pbnV0ZXNcIj48YSBuZy1jbGljaz1cImRlY3JlbWVudE1pbnV0ZXMoKVwiIG5nLWNsYXNzPVwie2Rpc2FibGVkOiBub0RlY3JlbWVudE1pbnV0ZXMoKX1cIiBjbGFzcz1cImJ0biBidG4tbGlua1wiIG5nLWRpc2FibGVkPVwibm9EZWNyZW1lbnRNaW51dGVzKClcIiB0YWJpbmRleD1cInt7Ojp0YWJpbmRleH19XCI+PHNwYW4gY2xhc3M9XCJnbHlwaGljb24gZ2x5cGhpY29uLWNoZXZyb24tZG93blwiPjwvc3Bhbj48L2E+PC90ZD5cXG4gICAgICA8dGQgbmctc2hvdz1cInNob3dTZWNvbmRzXCI+Jm5ic3A7PC90ZD5cXG4gICAgICA8dGQgbmctc2hvdz1cInNob3dTZWNvbmRzXCIgY2xhc3M9XCJ1aWItZGVjcmVtZW50IHNlY29uZHNcIj48YSBuZy1jbGljaz1cImRlY3JlbWVudFNlY29uZHMoKVwiIG5nLWNsYXNzPVwie2Rpc2FibGVkOiBub0RlY3JlbWVudFNlY29uZHMoKX1cIiBjbGFzcz1cImJ0biBidG4tbGlua1wiIG5nLWRpc2FibGVkPVwibm9EZWNyZW1lbnRTZWNvbmRzKClcIiB0YWJpbmRleD1cInt7Ojp0YWJpbmRleH19XCI+PHNwYW4gY2xhc3M9XCJnbHlwaGljb24gZ2x5cGhpY29uLWNoZXZyb24tZG93blwiPjwvc3Bhbj48L2E+PC90ZD5cXG4gICAgICA8dGQgbmctc2hvdz1cInNob3dNZXJpZGlhblwiPjwvdGQ+XFxuICAgIDwvdHI+XFxuICA8L3Rib2R5PlxcbjwvdGFibGU+XFxuJyl9XSksYW5ndWxhci5tb2R1bGUoXCJ1aWIvdGVtcGxhdGUvdHlwZWFoZWFkL3R5cGVhaGVhZC1tYXRjaC5odG1sXCIsW10pLnJ1bihbXCIkdGVtcGxhdGVDYWNoZVwiLGZ1bmN0aW9uKGEpe2EucHV0KFwidWliL3RlbXBsYXRlL3R5cGVhaGVhZC90eXBlYWhlYWQtbWF0Y2guaHRtbFwiLCc8YSBocmVmIHRhYmluZGV4PVwiLTFcIiBuZy1iaW5kLWh0bWw9XCJtYXRjaC5sYWJlbCB8IHVpYlR5cGVhaGVhZEhpZ2hsaWdodDpxdWVyeVwiPjwvYT5cXG4nKX1dKSxhbmd1bGFyLm1vZHVsZShcInVpYi90ZW1wbGF0ZS90eXBlYWhlYWQvdHlwZWFoZWFkLXBvcHVwLmh0bWxcIixbXSkucnVuKFtcIiR0ZW1wbGF0ZUNhY2hlXCIsZnVuY3Rpb24oYSl7YS5wdXQoXCJ1aWIvdGVtcGxhdGUvdHlwZWFoZWFkL3R5cGVhaGVhZC1wb3B1cC5odG1sXCIsJzx1bCBjbGFzcz1cImRyb3Bkb3duLW1lbnVcIiBuZy1zaG93PVwiaXNPcGVuKCkgJiYgIW1vdmVJblByb2dyZXNzXCIgbmctc3R5bGU9XCJ7dG9wOiBwb3NpdGlvbigpLnRvcCtcXCdweFxcJywgbGVmdDogcG9zaXRpb24oKS5sZWZ0K1xcJ3B4XFwnfVwiIHN0eWxlPVwiZGlzcGxheTogYmxvY2s7XCIgcm9sZT1cImxpc3Rib3hcIiBhcmlhLWhpZGRlbj1cInt7IWlzT3BlbigpfX1cIj5cXG4gICAgPGxpIG5nLXJlcGVhdD1cIm1hdGNoIGluIG1hdGNoZXMgdHJhY2sgYnkgJGluZGV4XCIgbmctY2xhc3M9XCJ7YWN0aXZlOiBpc0FjdGl2ZSgkaW5kZXgpIH1cIiBuZy1tb3VzZWVudGVyPVwic2VsZWN0QWN0aXZlKCRpbmRleClcIiBuZy1jbGljaz1cInNlbGVjdE1hdGNoKCRpbmRleCwgJGV2ZW50KVwiIHJvbGU9XCJvcHRpb25cIiBpZD1cInt7OjptYXRjaC5pZH19XCI+XFxuICAgICAgICA8ZGl2IHVpYi10eXBlYWhlYWQtbWF0Y2ggaW5kZXg9XCIkaW5kZXhcIiBtYXRjaD1cIm1hdGNoXCIgcXVlcnk9XCJxdWVyeVwiIHRlbXBsYXRlLXVybD1cInRlbXBsYXRlVXJsXCI+PC9kaXY+XFxuICAgIDwvbGk+XFxuPC91bD5cXG4nKX1dKSxhbmd1bGFyLm1vZHVsZShcInVpLmJvb3RzdHJhcC5jYXJvdXNlbFwiKS5ydW4oZnVuY3Rpb24oKXshYW5ndWxhci4kJGNzcCgpLm5vSW5saW5lU3R5bGUmJmFuZ3VsYXIuZWxlbWVudChkb2N1bWVudCkuZmluZChcImhlYWRcIikucHJlcGVuZCgnPHN0eWxlIHR5cGU9XCJ0ZXh0L2Nzc1wiPi5uZy1hbmltYXRlLml0ZW06bm90KC5sZWZ0KTpub3QoLnJpZ2h0KXstd2Via2l0LXRyYW5zaXRpb246MHMgZWFzZS1pbi1vdXQgbGVmdDt0cmFuc2l0aW9uOjBzIGVhc2UtaW4tb3V0IGxlZnR9PC9zdHlsZT4nKX0pLGFuZ3VsYXIubW9kdWxlKFwidWkuYm9vdHN0cmFwLnRhYnNcIikucnVuKGZ1bmN0aW9uKCl7IWFuZ3VsYXIuJCRjc3AoKS5ub0lubGluZVN0eWxlJiZhbmd1bGFyLmVsZW1lbnQoZG9jdW1lbnQpLmZpbmQoXCJoZWFkXCIpLnByZXBlbmQoJzxzdHlsZSB0eXBlPVwidGV4dC9jc3NcIj4udWliLXRhYiA+IGRpdntwb3NpdGlvbjpyZWxhdGl2ZTtkaXNwbGF5OmJsb2NrO3BhZGRpbmc6MTBweCAxNXB4O291dGxpbmU6MDtjb2xvcjojMzM3YWI3O30udWliLXRhYiA+IGRpdjpmb2N1cywudWliLXRhYiA+IGRpdjpob3ZlcntiYWNrZ3JvdW5kLWNvbG9yOiNlZWU7Y29sb3I6IzIzNTI3Yzt9LnVpYi10YWIuZGlzYWJsZWQgPiBkaXZ7Y29sb3I6Izc3Nzt9LnVpYi10YWIuZGlzYWJsZWQgPiBkaXY6Zm9jdXMsLnVpYi10YWIuZGlzYWJsZWQgPiBkaXY6aG92ZXJ7Y29sb3I6Izc3NztjdXJzb3I6bm90LWFsbG93ZWQ7YmFja2dyb3VuZC1jb2xvcjp0cmFuc3BhcmVudDt9Lm5hdi10YWJzID4gLnVpYi10YWIgPiBkaXZ7bWFyZ2luLXJpZ2h0OjJweDtsaW5lLWhlaWdodDoxLjQyODU3MTQzO2JvcmRlcjoxcHggc29saWQgdHJhbnNwYXJlbnQ7Ym9yZGVyLXJhZGl1czo0cHggNHB4IDAgMDt9Lm5hdi10YWJzID4gLnVpYi10YWIgPiBkaXY6aG92ZXJ7Ym9yZGVyLWNvbG9yOiNlZWUgI2VlZSAjZGRkO30ubmF2LXRhYnMgPiAudWliLXRhYi5hY3RpdmUgPiBkaXYsLm5hdi10YWJzID4gLnVpYi10YWIuYWN0aXZlID4gZGl2OmZvY3VzLC5uYXYtdGFicyA+IC51aWItdGFiLmFjdGl2ZSA+IGRpdjpob3Zlcntjb2xvcjojNTU1O2N1cnNvcjpkZWZhdWx0O2JhY2tncm91bmQtY29sb3I6I2ZmZjtib3JkZXItY29sb3I6I2RkZCAjZGRkIHRyYW5zcGFyZW50ICNkZGQ7fS5uYXYtcGlsbHMgPiAudWliLXRhYiA+IGRpdntib3JkZXItcmFkaXVzOjRweDt9Lm5hdi1waWxscyA+IC51aWItdGFiLmFjdGl2ZSA+IGRpdiwubmF2LXBpbGxzID4gLnVpYi10YWIuYWN0aXZlID4gZGl2OmZvY3VzLC5uYXYtcGlsbHMgPiAudWliLXRhYi5hY3RpdmUgPiBkaXY6aG92ZXJ7Y29sb3I6I2ZmZjtiYWNrZ3JvdW5kLWNvbG9yOiMzMzdhYjc7fTwvc3R5bGU+Jyl9KTsiLCIndXNlIHN0cmljdCc7XHJcblxyXG4vKipcclxuICogQmluZHMgYSBDb2RlTWlycm9yIHdpZGdldCB0byBhIDx0ZXh0YXJlYT4gZWxlbWVudC5cclxuICovXHJcbmFuZ3VsYXIubW9kdWxlKCd1aS5jb2RlbWlycm9yJywgW10pXHJcbiAgLmNvbnN0YW50KCd1aUNvZGVtaXJyb3JDb25maWcnLCB7fSlcclxuICAuZGlyZWN0aXZlKCd1aUNvZGVtaXJyb3InLCBbJ3VpQ29kZW1pcnJvckNvbmZpZycsIGZ1bmN0aW9uICh1aUNvZGVtaXJyb3JDb25maWcpIHtcclxuICAgIHJldHVybiB7XHJcbiAgICAgIHJlc3RyaWN0OiAnRUEnLFxyXG4gICAgICByZXF1aXJlOiAnP25nTW9kZWwnLFxyXG4gICAgICBwcmlvcml0eTogMSxcclxuICAgICAgY29tcGlsZTogZnVuY3Rpb24gY29tcGlsZSgpIHtcclxuXHJcbiAgICAgICAgLy8gUmVxdWlyZSBDb2RlTWlycm9yXHJcbiAgICAgICAgaWYgKGFuZ3VsYXIuaXNVbmRlZmluZWQod2luZG93LkNvZGVNaXJyb3IpKSB7XHJcbiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ3VpLWNvZGVtaXJyb3IgbmVlZCBDb2RlTWlycm9yIHRvIHdvcmsuLi4gKG8gcmx5PyknKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiBmdW5jdGlvbiBwb3N0TGluayhzY29wZSwgaUVsZW1lbnQsIGlBdHRycywgbmdNb2RlbCkge1xyXG5cclxuXHJcbiAgICAgICAgICB2YXIgb3B0aW9ucywgb3B0cywgY29kZU1pcnJvciwgaW5pdGlhbFRleHRWYWx1ZTtcclxuXHJcbiAgICAgICAgICBpbml0aWFsVGV4dFZhbHVlID0gaUVsZW1lbnQudGV4dCgpO1xyXG5cclxuICAgICAgICAgIG9wdGlvbnMgPSB1aUNvZGVtaXJyb3JDb25maWcuY29kZW1pcnJvciB8fCB7fTtcclxuICAgICAgICAgIG9wdHMgPSBhbmd1bGFyLmV4dGVuZCh7IHZhbHVlOiBpbml0aWFsVGV4dFZhbHVlIH0sIG9wdGlvbnMsIHNjb3BlLiRldmFsKGlBdHRycy51aUNvZGVtaXJyb3IpLCBzY29wZS4kZXZhbChpQXR0cnMudWlDb2RlbWlycm9yT3B0cykpO1xyXG5cclxuICAgICAgICAgIGlmIChpRWxlbWVudFswXS50YWdOYW1lID09PSAnVEVYVEFSRUEnKSB7XHJcbiAgICAgICAgICAgIC8vIE1pZ2h0IGJ1ZyBidXQgc3RpbGwgLi4uXHJcbiAgICAgICAgICAgIGNvZGVNaXJyb3IgPSB3aW5kb3cuQ29kZU1pcnJvci5mcm9tVGV4dEFyZWEoaUVsZW1lbnRbMF0sIG9wdHMpO1xyXG4gICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgaUVsZW1lbnQuaHRtbCgnJyk7XHJcbiAgICAgICAgICAgIGNvZGVNaXJyb3IgPSBuZXcgd2luZG93LkNvZGVNaXJyb3IoZnVuY3Rpb24oY21fZWwpIHtcclxuICAgICAgICAgICAgICBpRWxlbWVudC5hcHBlbmQoY21fZWwpO1xyXG4gICAgICAgICAgICB9LCBvcHRzKTtcclxuICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICBpZiAoaUF0dHJzLnVpQ29kZW1pcnJvciB8fCBpQXR0cnMudWlDb2RlbWlycm9yT3B0cykge1xyXG4gICAgICAgICAgICB2YXIgY29kZW1pcnJvckRlZmF1bHRzS2V5cyA9IE9iamVjdC5rZXlzKHdpbmRvdy5Db2RlTWlycm9yLmRlZmF1bHRzKTtcclxuICAgICAgICAgICAgc2NvcGUuJHdhdGNoKGlBdHRycy51aUNvZGVtaXJyb3IgfHwgaUF0dHJzLnVpQ29kZW1pcnJvck9wdHMsIGZ1bmN0aW9uIHVwZGF0ZU9wdGlvbnMobmV3VmFsdWVzLCBvbGRWYWx1ZSkge1xyXG4gICAgICAgICAgICAgIGlmICghIGFuZ3VsYXIuaXNPYmplY3QobmV3VmFsdWVzKSl7XHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgIGNvZGVtaXJyb3JEZWZhdWx0c0tleXMuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7XHJcbiAgICAgICAgICAgICAgICBpZiAobmV3VmFsdWVzLmhhc093blByb3BlcnR5KGtleSkpIHtcclxuXHJcbiAgICAgICAgICAgICAgICAgIGlmIChvbGRWYWx1ZSAmJiBuZXdWYWx1ZXNba2V5XSA9PT0gb2xkVmFsdWVba2V5XSl7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICBjb2RlTWlycm9yLnNldE9wdGlvbihrZXksIG5ld1ZhbHVlc1trZXldKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfSwgdHJ1ZSk7XHJcbiAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgaWYgKG5nTW9kZWwpIHtcclxuICAgICAgICAgICAgLy8gQ29kZU1pcnJvciBleHBlY3RzIGEgc3RyaW5nLCBzbyBtYWtlIHN1cmUgaXQgZ2V0cyBvbmUuXHJcbiAgICAgICAgICAgIC8vIFRoaXMgZG9lcyBub3QgY2hhbmdlIHRoZSBtb2RlbC5cclxuICAgICAgICAgICAgbmdNb2RlbC4kZm9ybWF0dGVycy5wdXNoKGZ1bmN0aW9uICh2YWx1ZSkge1xyXG4gICAgICAgICAgICAgIGlmIChhbmd1bGFyLmlzVW5kZWZpbmVkKHZhbHVlKSB8fCB2YWx1ZSA9PT0gbnVsbCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuICcnO1xyXG4gICAgICAgICAgICAgIH0gZWxzZSBpZiAoYW5ndWxhci5pc09iamVjdCh2YWx1ZSkgfHwgYW5ndWxhci5pc0FycmF5KHZhbHVlKSkge1xyXG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCd1aS1jb2RlbWlycm9yIGNhbm5vdCB1c2UgYW4gb2JqZWN0IG9yIGFuIGFycmF5IGFzIGEgbW9kZWwnKTtcclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgcmV0dXJuIHZhbHVlO1xyXG4gICAgICAgICAgICB9KTtcclxuXHJcblxyXG4gICAgICAgICAgICAvLyBPdmVycmlkZSB0aGUgbmdNb2RlbENvbnRyb2xsZXIgJHJlbmRlciBtZXRob2QsIHdoaWNoIGlzIHdoYXQgZ2V0cyBjYWxsZWQgd2hlbiB0aGUgbW9kZWwgaXMgdXBkYXRlZC5cclxuICAgICAgICAgICAgLy8gVGhpcyB0YWtlcyBjYXJlIG9mIHRoZSBzeW5jaHJvbml6aW5nIHRoZSBjb2RlTWlycm9yIGVsZW1lbnQgd2l0aCB0aGUgdW5kZXJseWluZyBtb2RlbCwgaW4gdGhlIGNhc2UgdGhhdCBpdCBpcyBjaGFuZ2VkIGJ5IHNvbWV0aGluZyBlbHNlLlxyXG4gICAgICAgICAgICBuZ01vZGVsLiRyZW5kZXIgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgLy9Db2RlIG1pcnJvciBleHBlY3RzIGEgc3RyaW5nIHNvIG1ha2Ugc3VyZSBpdCBnZXRzIG9uZVxyXG4gICAgICAgICAgICAgIC8vQWx0aG91Z2ggdGhlIGZvcm1hdHRlciBoYXZlIGFscmVhZHkgZG9uZSB0aGlzLCBpdCBjYW4gYmUgcG9zc2libGUgdGhhdCBhbm90aGVyIGZvcm1hdHRlciByZXR1cm5zIHVuZGVmaW5lZCAoZm9yIGV4YW1wbGUgdGhlIHJlcXVpcmVkIGRpcmVjdGl2ZSlcclxuICAgICAgICAgICAgICB2YXIgc2FmZVZpZXdWYWx1ZSA9IG5nTW9kZWwuJHZpZXdWYWx1ZSB8fCAnJztcclxuICAgICAgICAgICAgICBjb2RlTWlycm9yLnNldFZhbHVlKHNhZmVWaWV3VmFsdWUpO1xyXG4gICAgICAgICAgICB9O1xyXG5cclxuXHJcbiAgICAgICAgICAgIC8vIEtlZXAgdGhlIG5nTW9kZWwgaW4gc3luYyB3aXRoIGNoYW5nZXMgZnJvbSBDb2RlTWlycm9yXHJcbiAgICAgICAgICAgIGNvZGVNaXJyb3Iub24oJ2NoYW5nZScsIGZ1bmN0aW9uIChpbnN0YW5jZSkge1xyXG4gICAgICAgICAgICAgIHZhciBuZXdWYWx1ZSA9IGluc3RhbmNlLmdldFZhbHVlKCk7XHJcbiAgICAgICAgICAgICAgaWYgKG5ld1ZhbHVlICE9PSBuZ01vZGVsLiR2aWV3VmFsdWUpIHtcclxuICAgICAgICAgICAgICAgIC8vIENoYW5nZXMgdG8gdGhlIG1vZGVsIGZyb20gYSBjYWxsYmFjayBuZWVkIHRvIGJlIHdyYXBwZWQgaW4gJGFwcGx5IG9yIGFuZ3VsYXIgd2lsbCBub3Qgbm90aWNlIHRoZW1cclxuICAgICAgICAgICAgICAgIHNjb3BlLiRhcHBseShmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgICAgbmdNb2RlbC4kc2V0Vmlld1ZhbHVlKG5ld1ZhbHVlKTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICB9XHJcblxyXG5cclxuICAgICAgICAgIC8vIFdhdGNoIHVpLXJlZnJlc2ggYW5kIHJlZnJlc2ggdGhlIGRpcmVjdGl2ZVxyXG4gICAgICAgICAgaWYgKGlBdHRycy51aVJlZnJlc2gpIHtcclxuICAgICAgICAgICAgc2NvcGUuJHdhdGNoKGlBdHRycy51aVJlZnJlc2gsIGZ1bmN0aW9uIChuZXdWYWwsIG9sZFZhbCkge1xyXG4gICAgICAgICAgICAgIC8vIFNraXAgdGhlIGluaXRpYWwgd2F0Y2ggZmlyaW5nXHJcbiAgICAgICAgICAgICAgaWYgKG5ld1ZhbCAhPT0gb2xkVmFsKSB7XHJcbiAgICAgICAgICAgICAgICBjb2RlTWlycm9yLnJlZnJlc2goKTtcclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgfVxyXG5cclxuXHJcbiAgICAgICAgICAvLyBBbGxvdyBhY2Nlc3MgdG8gdGhlIENvZGVNaXJyb3IgaW5zdGFuY2UgdGhyb3VnaCBhIGJyb2FkY2FzdGVkIGV2ZW50XHJcbiAgICAgICAgICAvLyBlZzogJGJyb2FkY2FzdCgnQ29kZU1pcnJvcicsIGZ1bmN0aW9uKGNtKXsuLi59KTtcclxuICAgICAgICAgIHNjb3BlLiRvbignQ29kZU1pcnJvcicsIGZ1bmN0aW9uKGV2ZW50LCBjYWxsYmFjaykge1xyXG4gICAgICAgICAgICBpZiAoYW5ndWxhci5pc0Z1bmN0aW9uKGNhbGxiYWNrKSkge1xyXG4gICAgICAgICAgICAgIGNhbGxiYWNrKGNvZGVNaXJyb3IpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcigndGhlIENvZGVNaXJyb3IgZXZlbnQgcmVxdWlyZXMgYSBjYWxsYmFjayBmdW5jdGlvbicpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9KTtcclxuXHJcblxyXG4gICAgICAgICAgLy8gb25Mb2FkIGNhbGxiYWNrXHJcbiAgICAgICAgICBpZiAoYW5ndWxhci5pc0Z1bmN0aW9uKG9wdHMub25Mb2FkKSkge1xyXG4gICAgICAgICAgICBvcHRzLm9uTG9hZChjb2RlTWlycm9yKTtcclxuICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgfTtcclxuICAgICAgfVxyXG4gICAgfTtcclxuICB9XSk7XHJcbiIsIi8qIVxyXG4gKiBCb290c3RyYXAgdjMuMy40IChodHRwOi8vZ2V0Ym9vdHN0cmFwLmNvbSlcclxuICogQ29weXJpZ2h0IDIwMTEtMjAxNSBUd2l0dGVyLCBJbmMuXHJcbiAqIExpY2Vuc2VkIHVuZGVyIE1JVCAoaHR0cHM6Ly9naXRodWIuY29tL3R3YnMvYm9vdHN0cmFwL2Jsb2IvbWFzdGVyL0xJQ0VOU0UpXHJcbiAqL1xyXG5pZihcInVuZGVmaW5lZFwiPT10eXBlb2YgalF1ZXJ5KXRocm93IG5ldyBFcnJvcihcIkJvb3RzdHJhcCdzIEphdmFTY3JpcHQgcmVxdWlyZXMgalF1ZXJ5XCIpOytmdW5jdGlvbihhKXtcInVzZSBzdHJpY3RcIjt2YXIgYj1hLmZuLmpxdWVyeS5zcGxpdChcIiBcIilbMF0uc3BsaXQoXCIuXCIpO2lmKGJbMF08MiYmYlsxXTw5fHwxPT1iWzBdJiY5PT1iWzFdJiZiWzJdPDEpdGhyb3cgbmV3IEVycm9yKFwiQm9vdHN0cmFwJ3MgSmF2YVNjcmlwdCByZXF1aXJlcyBqUXVlcnkgdmVyc2lvbiAxLjkuMSBvciBoaWdoZXJcIil9KGpRdWVyeSksK2Z1bmN0aW9uKGEpe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIGIoKXt2YXIgYT1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiYm9vdHN0cmFwXCIpLGI9e1dlYmtpdFRyYW5zaXRpb246XCJ3ZWJraXRUcmFuc2l0aW9uRW5kXCIsTW96VHJhbnNpdGlvbjpcInRyYW5zaXRpb25lbmRcIixPVHJhbnNpdGlvbjpcIm9UcmFuc2l0aW9uRW5kIG90cmFuc2l0aW9uZW5kXCIsdHJhbnNpdGlvbjpcInRyYW5zaXRpb25lbmRcIn07Zm9yKHZhciBjIGluIGIpaWYodm9pZCAwIT09YS5zdHlsZVtjXSlyZXR1cm57ZW5kOmJbY119O3JldHVybiExfWEuZm4uZW11bGF0ZVRyYW5zaXRpb25FbmQ9ZnVuY3Rpb24oYil7dmFyIGM9ITEsZD10aGlzO2EodGhpcykub25lKFwiYnNUcmFuc2l0aW9uRW5kXCIsZnVuY3Rpb24oKXtjPSEwfSk7dmFyIGU9ZnVuY3Rpb24oKXtjfHxhKGQpLnRyaWdnZXIoYS5zdXBwb3J0LnRyYW5zaXRpb24uZW5kKX07cmV0dXJuIHNldFRpbWVvdXQoZSxiKSx0aGlzfSxhKGZ1bmN0aW9uKCl7YS5zdXBwb3J0LnRyYW5zaXRpb249YigpLGEuc3VwcG9ydC50cmFuc2l0aW9uJiYoYS5ldmVudC5zcGVjaWFsLmJzVHJhbnNpdGlvbkVuZD17YmluZFR5cGU6YS5zdXBwb3J0LnRyYW5zaXRpb24uZW5kLGRlbGVnYXRlVHlwZTphLnN1cHBvcnQudHJhbnNpdGlvbi5lbmQsaGFuZGxlOmZ1bmN0aW9uKGIpe3JldHVybiBhKGIudGFyZ2V0KS5pcyh0aGlzKT9iLmhhbmRsZU9iai5oYW5kbGVyLmFwcGx5KHRoaXMsYXJndW1lbnRzKTp2b2lkIDB9fSl9KX0oalF1ZXJ5KSwrZnVuY3Rpb24oYSl7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gYihiKXtyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKCl7dmFyIGM9YSh0aGlzKSxlPWMuZGF0YShcImJzLmFsZXJ0XCIpO2V8fGMuZGF0YShcImJzLmFsZXJ0XCIsZT1uZXcgZCh0aGlzKSksXCJzdHJpbmdcIj09dHlwZW9mIGImJmVbYl0uY2FsbChjKX0pfXZhciBjPSdbZGF0YS1kaXNtaXNzPVwiYWxlcnRcIl0nLGQ9ZnVuY3Rpb24oYil7YShiKS5vbihcImNsaWNrXCIsYyx0aGlzLmNsb3NlKX07ZC5WRVJTSU9OPVwiMy4zLjRcIixkLlRSQU5TSVRJT05fRFVSQVRJT049MTUwLGQucHJvdG90eXBlLmNsb3NlPWZ1bmN0aW9uKGIpe2Z1bmN0aW9uIGMoKXtnLmRldGFjaCgpLnRyaWdnZXIoXCJjbG9zZWQuYnMuYWxlcnRcIikucmVtb3ZlKCl9dmFyIGU9YSh0aGlzKSxmPWUuYXR0cihcImRhdGEtdGFyZ2V0XCIpO2Z8fChmPWUuYXR0cihcImhyZWZcIiksZj1mJiZmLnJlcGxhY2UoLy4qKD89I1teXFxzXSokKS8sXCJcIikpO3ZhciBnPWEoZik7YiYmYi5wcmV2ZW50RGVmYXVsdCgpLGcubGVuZ3RofHwoZz1lLmNsb3Nlc3QoXCIuYWxlcnRcIikpLGcudHJpZ2dlcihiPWEuRXZlbnQoXCJjbG9zZS5icy5hbGVydFwiKSksYi5pc0RlZmF1bHRQcmV2ZW50ZWQoKXx8KGcucmVtb3ZlQ2xhc3MoXCJpblwiKSxhLnN1cHBvcnQudHJhbnNpdGlvbiYmZy5oYXNDbGFzcyhcImZhZGVcIik/Zy5vbmUoXCJic1RyYW5zaXRpb25FbmRcIixjKS5lbXVsYXRlVHJhbnNpdGlvbkVuZChkLlRSQU5TSVRJT05fRFVSQVRJT04pOmMoKSl9O3ZhciBlPWEuZm4uYWxlcnQ7YS5mbi5hbGVydD1iLGEuZm4uYWxlcnQuQ29uc3RydWN0b3I9ZCxhLmZuLmFsZXJ0Lm5vQ29uZmxpY3Q9ZnVuY3Rpb24oKXtyZXR1cm4gYS5mbi5hbGVydD1lLHRoaXN9LGEoZG9jdW1lbnQpLm9uKFwiY2xpY2suYnMuYWxlcnQuZGF0YS1hcGlcIixjLGQucHJvdG90eXBlLmNsb3NlKX0oalF1ZXJ5KSwrZnVuY3Rpb24oYSl7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gYihiKXtyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKCl7dmFyIGQ9YSh0aGlzKSxlPWQuZGF0YShcImJzLmJ1dHRvblwiKSxmPVwib2JqZWN0XCI9PXR5cGVvZiBiJiZiO2V8fGQuZGF0YShcImJzLmJ1dHRvblwiLGU9bmV3IGModGhpcyxmKSksXCJ0b2dnbGVcIj09Yj9lLnRvZ2dsZSgpOmImJmUuc2V0U3RhdGUoYil9KX12YXIgYz1mdW5jdGlvbihiLGQpe3RoaXMuJGVsZW1lbnQ9YShiKSx0aGlzLm9wdGlvbnM9YS5leHRlbmQoe30sYy5ERUZBVUxUUyxkKSx0aGlzLmlzTG9hZGluZz0hMX07Yy5WRVJTSU9OPVwiMy4zLjRcIixjLkRFRkFVTFRTPXtsb2FkaW5nVGV4dDpcImxvYWRpbmcuLi5cIn0sYy5wcm90b3R5cGUuc2V0U3RhdGU9ZnVuY3Rpb24oYil7dmFyIGM9XCJkaXNhYmxlZFwiLGQ9dGhpcy4kZWxlbWVudCxlPWQuaXMoXCJpbnB1dFwiKT9cInZhbFwiOlwiaHRtbFwiLGY9ZC5kYXRhKCk7Yis9XCJUZXh0XCIsbnVsbD09Zi5yZXNldFRleHQmJmQuZGF0YShcInJlc2V0VGV4dFwiLGRbZV0oKSksc2V0VGltZW91dChhLnByb3h5KGZ1bmN0aW9uKCl7ZFtlXShudWxsPT1mW2JdP3RoaXMub3B0aW9uc1tiXTpmW2JdKSxcImxvYWRpbmdUZXh0XCI9PWI/KHRoaXMuaXNMb2FkaW5nPSEwLGQuYWRkQ2xhc3MoYykuYXR0cihjLGMpKTp0aGlzLmlzTG9hZGluZyYmKHRoaXMuaXNMb2FkaW5nPSExLGQucmVtb3ZlQ2xhc3MoYykucmVtb3ZlQXR0cihjKSl9LHRoaXMpLDApfSxjLnByb3RvdHlwZS50b2dnbGU9ZnVuY3Rpb24oKXt2YXIgYT0hMCxiPXRoaXMuJGVsZW1lbnQuY2xvc2VzdCgnW2RhdGEtdG9nZ2xlPVwiYnV0dG9uc1wiXScpO2lmKGIubGVuZ3RoKXt2YXIgYz10aGlzLiRlbGVtZW50LmZpbmQoXCJpbnB1dFwiKTtcInJhZGlvXCI9PWMucHJvcChcInR5cGVcIikmJihjLnByb3AoXCJjaGVja2VkXCIpJiZ0aGlzLiRlbGVtZW50Lmhhc0NsYXNzKFwiYWN0aXZlXCIpP2E9ITE6Yi5maW5kKFwiLmFjdGl2ZVwiKS5yZW1vdmVDbGFzcyhcImFjdGl2ZVwiKSksYSYmYy5wcm9wKFwiY2hlY2tlZFwiLCF0aGlzLiRlbGVtZW50Lmhhc0NsYXNzKFwiYWN0aXZlXCIpKS50cmlnZ2VyKFwiY2hhbmdlXCIpfWVsc2UgdGhpcy4kZWxlbWVudC5hdHRyKFwiYXJpYS1wcmVzc2VkXCIsIXRoaXMuJGVsZW1lbnQuaGFzQ2xhc3MoXCJhY3RpdmVcIikpO2EmJnRoaXMuJGVsZW1lbnQudG9nZ2xlQ2xhc3MoXCJhY3RpdmVcIil9O3ZhciBkPWEuZm4uYnV0dG9uO2EuZm4uYnV0dG9uPWIsYS5mbi5idXR0b24uQ29uc3RydWN0b3I9YyxhLmZuLmJ1dHRvbi5ub0NvbmZsaWN0PWZ1bmN0aW9uKCl7cmV0dXJuIGEuZm4uYnV0dG9uPWQsdGhpc30sYShkb2N1bWVudCkub24oXCJjbGljay5icy5idXR0b24uZGF0YS1hcGlcIiwnW2RhdGEtdG9nZ2xlXj1cImJ1dHRvblwiXScsZnVuY3Rpb24oYyl7dmFyIGQ9YShjLnRhcmdldCk7ZC5oYXNDbGFzcyhcImJ0blwiKXx8KGQ9ZC5jbG9zZXN0KFwiLmJ0blwiKSksYi5jYWxsKGQsXCJ0b2dnbGVcIiksYy5wcmV2ZW50RGVmYXVsdCgpfSkub24oXCJmb2N1cy5icy5idXR0b24uZGF0YS1hcGkgYmx1ci5icy5idXR0b24uZGF0YS1hcGlcIiwnW2RhdGEtdG9nZ2xlXj1cImJ1dHRvblwiXScsZnVuY3Rpb24oYil7YShiLnRhcmdldCkuY2xvc2VzdChcIi5idG5cIikudG9nZ2xlQ2xhc3MoXCJmb2N1c1wiLC9eZm9jdXMoaW4pPyQvLnRlc3QoYi50eXBlKSl9KX0oalF1ZXJ5KSwrZnVuY3Rpb24oYSl7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gYihiKXtyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKCl7dmFyIGQ9YSh0aGlzKSxlPWQuZGF0YShcImJzLmNhcm91c2VsXCIpLGY9YS5leHRlbmQoe30sYy5ERUZBVUxUUyxkLmRhdGEoKSxcIm9iamVjdFwiPT10eXBlb2YgYiYmYiksZz1cInN0cmluZ1wiPT10eXBlb2YgYj9iOmYuc2xpZGU7ZXx8ZC5kYXRhKFwiYnMuY2Fyb3VzZWxcIixlPW5ldyBjKHRoaXMsZikpLFwibnVtYmVyXCI9PXR5cGVvZiBiP2UudG8oYik6Zz9lW2ddKCk6Zi5pbnRlcnZhbCYmZS5wYXVzZSgpLmN5Y2xlKCl9KX12YXIgYz1mdW5jdGlvbihiLGMpe3RoaXMuJGVsZW1lbnQ9YShiKSx0aGlzLiRpbmRpY2F0b3JzPXRoaXMuJGVsZW1lbnQuZmluZChcIi5jYXJvdXNlbC1pbmRpY2F0b3JzXCIpLHRoaXMub3B0aW9ucz1jLHRoaXMucGF1c2VkPW51bGwsdGhpcy5zbGlkaW5nPW51bGwsdGhpcy5pbnRlcnZhbD1udWxsLHRoaXMuJGFjdGl2ZT1udWxsLHRoaXMuJGl0ZW1zPW51bGwsdGhpcy5vcHRpb25zLmtleWJvYXJkJiZ0aGlzLiRlbGVtZW50Lm9uKFwia2V5ZG93bi5icy5jYXJvdXNlbFwiLGEucHJveHkodGhpcy5rZXlkb3duLHRoaXMpKSxcImhvdmVyXCI9PXRoaXMub3B0aW9ucy5wYXVzZSYmIShcIm9udG91Y2hzdGFydFwiaW4gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50KSYmdGhpcy4kZWxlbWVudC5vbihcIm1vdXNlZW50ZXIuYnMuY2Fyb3VzZWxcIixhLnByb3h5KHRoaXMucGF1c2UsdGhpcykpLm9uKFwibW91c2VsZWF2ZS5icy5jYXJvdXNlbFwiLGEucHJveHkodGhpcy5jeWNsZSx0aGlzKSl9O2MuVkVSU0lPTj1cIjMuMy40XCIsYy5UUkFOU0lUSU9OX0RVUkFUSU9OPTYwMCxjLkRFRkFVTFRTPXtpbnRlcnZhbDo1ZTMscGF1c2U6XCJob3ZlclwiLHdyYXA6ITAsa2V5Ym9hcmQ6ITB9LGMucHJvdG90eXBlLmtleWRvd249ZnVuY3Rpb24oYSl7aWYoIS9pbnB1dHx0ZXh0YXJlYS9pLnRlc3QoYS50YXJnZXQudGFnTmFtZSkpe3N3aXRjaChhLndoaWNoKXtjYXNlIDM3OnRoaXMucHJldigpO2JyZWFrO2Nhc2UgMzk6dGhpcy5uZXh0KCk7YnJlYWs7ZGVmYXVsdDpyZXR1cm59YS5wcmV2ZW50RGVmYXVsdCgpfX0sYy5wcm90b3R5cGUuY3ljbGU9ZnVuY3Rpb24oYil7cmV0dXJuIGJ8fCh0aGlzLnBhdXNlZD0hMSksdGhpcy5pbnRlcnZhbCYmY2xlYXJJbnRlcnZhbCh0aGlzLmludGVydmFsKSx0aGlzLm9wdGlvbnMuaW50ZXJ2YWwmJiF0aGlzLnBhdXNlZCYmKHRoaXMuaW50ZXJ2YWw9c2V0SW50ZXJ2YWwoYS5wcm94eSh0aGlzLm5leHQsdGhpcyksdGhpcy5vcHRpb25zLmludGVydmFsKSksdGhpc30sYy5wcm90b3R5cGUuZ2V0SXRlbUluZGV4PWZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLiRpdGVtcz1hLnBhcmVudCgpLmNoaWxkcmVuKFwiLml0ZW1cIiksdGhpcy4kaXRlbXMuaW5kZXgoYXx8dGhpcy4kYWN0aXZlKX0sYy5wcm90b3R5cGUuZ2V0SXRlbUZvckRpcmVjdGlvbj1mdW5jdGlvbihhLGIpe3ZhciBjPXRoaXMuZ2V0SXRlbUluZGV4KGIpLGQ9XCJwcmV2XCI9PWEmJjA9PT1jfHxcIm5leHRcIj09YSYmYz09dGhpcy4kaXRlbXMubGVuZ3RoLTE7aWYoZCYmIXRoaXMub3B0aW9ucy53cmFwKXJldHVybiBiO3ZhciBlPVwicHJldlwiPT1hPy0xOjEsZj0oYytlKSV0aGlzLiRpdGVtcy5sZW5ndGg7cmV0dXJuIHRoaXMuJGl0ZW1zLmVxKGYpfSxjLnByb3RvdHlwZS50bz1mdW5jdGlvbihhKXt2YXIgYj10aGlzLGM9dGhpcy5nZXRJdGVtSW5kZXgodGhpcy4kYWN0aXZlPXRoaXMuJGVsZW1lbnQuZmluZChcIi5pdGVtLmFjdGl2ZVwiKSk7cmV0dXJuIGE+dGhpcy4kaXRlbXMubGVuZ3RoLTF8fDA+YT92b2lkIDA6dGhpcy5zbGlkaW5nP3RoaXMuJGVsZW1lbnQub25lKFwic2xpZC5icy5jYXJvdXNlbFwiLGZ1bmN0aW9uKCl7Yi50byhhKX0pOmM9PWE/dGhpcy5wYXVzZSgpLmN5Y2xlKCk6dGhpcy5zbGlkZShhPmM/XCJuZXh0XCI6XCJwcmV2XCIsdGhpcy4kaXRlbXMuZXEoYSkpfSxjLnByb3RvdHlwZS5wYXVzZT1mdW5jdGlvbihiKXtyZXR1cm4gYnx8KHRoaXMucGF1c2VkPSEwKSx0aGlzLiRlbGVtZW50LmZpbmQoXCIubmV4dCwgLnByZXZcIikubGVuZ3RoJiZhLnN1cHBvcnQudHJhbnNpdGlvbiYmKHRoaXMuJGVsZW1lbnQudHJpZ2dlcihhLnN1cHBvcnQudHJhbnNpdGlvbi5lbmQpLHRoaXMuY3ljbGUoITApKSx0aGlzLmludGVydmFsPWNsZWFySW50ZXJ2YWwodGhpcy5pbnRlcnZhbCksdGhpc30sYy5wcm90b3R5cGUubmV4dD1mdW5jdGlvbigpe3JldHVybiB0aGlzLnNsaWRpbmc/dm9pZCAwOnRoaXMuc2xpZGUoXCJuZXh0XCIpfSxjLnByb3RvdHlwZS5wcmV2PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuc2xpZGluZz92b2lkIDA6dGhpcy5zbGlkZShcInByZXZcIil9LGMucHJvdG90eXBlLnNsaWRlPWZ1bmN0aW9uKGIsZCl7dmFyIGU9dGhpcy4kZWxlbWVudC5maW5kKFwiLml0ZW0uYWN0aXZlXCIpLGY9ZHx8dGhpcy5nZXRJdGVtRm9yRGlyZWN0aW9uKGIsZSksZz10aGlzLmludGVydmFsLGg9XCJuZXh0XCI9PWI/XCJsZWZ0XCI6XCJyaWdodFwiLGk9dGhpcztpZihmLmhhc0NsYXNzKFwiYWN0aXZlXCIpKXJldHVybiB0aGlzLnNsaWRpbmc9ITE7dmFyIGo9ZlswXSxrPWEuRXZlbnQoXCJzbGlkZS5icy5jYXJvdXNlbFwiLHtyZWxhdGVkVGFyZ2V0OmosZGlyZWN0aW9uOmh9KTtpZih0aGlzLiRlbGVtZW50LnRyaWdnZXIoayksIWsuaXNEZWZhdWx0UHJldmVudGVkKCkpe2lmKHRoaXMuc2xpZGluZz0hMCxnJiZ0aGlzLnBhdXNlKCksdGhpcy4kaW5kaWNhdG9ycy5sZW5ndGgpe3RoaXMuJGluZGljYXRvcnMuZmluZChcIi5hY3RpdmVcIikucmVtb3ZlQ2xhc3MoXCJhY3RpdmVcIik7dmFyIGw9YSh0aGlzLiRpbmRpY2F0b3JzLmNoaWxkcmVuKClbdGhpcy5nZXRJdGVtSW5kZXgoZildKTtsJiZsLmFkZENsYXNzKFwiYWN0aXZlXCIpfXZhciBtPWEuRXZlbnQoXCJzbGlkLmJzLmNhcm91c2VsXCIse3JlbGF0ZWRUYXJnZXQ6aixkaXJlY3Rpb246aH0pO3JldHVybiBhLnN1cHBvcnQudHJhbnNpdGlvbiYmdGhpcy4kZWxlbWVudC5oYXNDbGFzcyhcInNsaWRlXCIpPyhmLmFkZENsYXNzKGIpLGZbMF0ub2Zmc2V0V2lkdGgsZS5hZGRDbGFzcyhoKSxmLmFkZENsYXNzKGgpLGUub25lKFwiYnNUcmFuc2l0aW9uRW5kXCIsZnVuY3Rpb24oKXtmLnJlbW92ZUNsYXNzKFtiLGhdLmpvaW4oXCIgXCIpKS5hZGRDbGFzcyhcImFjdGl2ZVwiKSxlLnJlbW92ZUNsYXNzKFtcImFjdGl2ZVwiLGhdLmpvaW4oXCIgXCIpKSxpLnNsaWRpbmc9ITEsc2V0VGltZW91dChmdW5jdGlvbigpe2kuJGVsZW1lbnQudHJpZ2dlcihtKX0sMCl9KS5lbXVsYXRlVHJhbnNpdGlvbkVuZChjLlRSQU5TSVRJT05fRFVSQVRJT04pKTooZS5yZW1vdmVDbGFzcyhcImFjdGl2ZVwiKSxmLmFkZENsYXNzKFwiYWN0aXZlXCIpLHRoaXMuc2xpZGluZz0hMSx0aGlzLiRlbGVtZW50LnRyaWdnZXIobSkpLGcmJnRoaXMuY3ljbGUoKSx0aGlzfX07dmFyIGQ9YS5mbi5jYXJvdXNlbDthLmZuLmNhcm91c2VsPWIsYS5mbi5jYXJvdXNlbC5Db25zdHJ1Y3Rvcj1jLGEuZm4uY2Fyb3VzZWwubm9Db25mbGljdD1mdW5jdGlvbigpe3JldHVybiBhLmZuLmNhcm91c2VsPWQsdGhpc307dmFyIGU9ZnVuY3Rpb24oYyl7dmFyIGQsZT1hKHRoaXMpLGY9YShlLmF0dHIoXCJkYXRhLXRhcmdldFwiKXx8KGQ9ZS5hdHRyKFwiaHJlZlwiKSkmJmQucmVwbGFjZSgvLiooPz0jW15cXHNdKyQpLyxcIlwiKSk7aWYoZi5oYXNDbGFzcyhcImNhcm91c2VsXCIpKXt2YXIgZz1hLmV4dGVuZCh7fSxmLmRhdGEoKSxlLmRhdGEoKSksaD1lLmF0dHIoXCJkYXRhLXNsaWRlLXRvXCIpO2gmJihnLmludGVydmFsPSExKSxiLmNhbGwoZixnKSxoJiZmLmRhdGEoXCJicy5jYXJvdXNlbFwiKS50byhoKSxjLnByZXZlbnREZWZhdWx0KCl9fTthKGRvY3VtZW50KS5vbihcImNsaWNrLmJzLmNhcm91c2VsLmRhdGEtYXBpXCIsXCJbZGF0YS1zbGlkZV1cIixlKS5vbihcImNsaWNrLmJzLmNhcm91c2VsLmRhdGEtYXBpXCIsXCJbZGF0YS1zbGlkZS10b11cIixlKSxhKHdpbmRvdykub24oXCJsb2FkXCIsZnVuY3Rpb24oKXthKCdbZGF0YS1yaWRlPVwiY2Fyb3VzZWxcIl0nKS5lYWNoKGZ1bmN0aW9uKCl7dmFyIGM9YSh0aGlzKTtiLmNhbGwoYyxjLmRhdGEoKSl9KX0pfShqUXVlcnkpLCtmdW5jdGlvbihhKXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiBiKGIpe3ZhciBjLGQ9Yi5hdHRyKFwiZGF0YS10YXJnZXRcIil8fChjPWIuYXR0cihcImhyZWZcIikpJiZjLnJlcGxhY2UoLy4qKD89I1teXFxzXSskKS8sXCJcIik7cmV0dXJuIGEoZCl9ZnVuY3Rpb24gYyhiKXtyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKCl7dmFyIGM9YSh0aGlzKSxlPWMuZGF0YShcImJzLmNvbGxhcHNlXCIpLGY9YS5leHRlbmQoe30sZC5ERUZBVUxUUyxjLmRhdGEoKSxcIm9iamVjdFwiPT10eXBlb2YgYiYmYik7IWUmJmYudG9nZ2xlJiYvc2hvd3xoaWRlLy50ZXN0KGIpJiYoZi50b2dnbGU9ITEpLGV8fGMuZGF0YShcImJzLmNvbGxhcHNlXCIsZT1uZXcgZCh0aGlzLGYpKSxcInN0cmluZ1wiPT10eXBlb2YgYiYmZVtiXSgpfSl9dmFyIGQ9ZnVuY3Rpb24oYixjKXt0aGlzLiRlbGVtZW50PWEoYiksdGhpcy5vcHRpb25zPWEuZXh0ZW5kKHt9LGQuREVGQVVMVFMsYyksdGhpcy4kdHJpZ2dlcj1hKCdbZGF0YS10b2dnbGU9XCJjb2xsYXBzZVwiXVtocmVmPVwiIycrYi5pZCsnXCJdLFtkYXRhLXRvZ2dsZT1cImNvbGxhcHNlXCJdW2RhdGEtdGFyZ2V0PVwiIycrYi5pZCsnXCJdJyksdGhpcy50cmFuc2l0aW9uaW5nPW51bGwsdGhpcy5vcHRpb25zLnBhcmVudD90aGlzLiRwYXJlbnQ9dGhpcy5nZXRQYXJlbnQoKTp0aGlzLmFkZEFyaWFBbmRDb2xsYXBzZWRDbGFzcyh0aGlzLiRlbGVtZW50LHRoaXMuJHRyaWdnZXIpLHRoaXMub3B0aW9ucy50b2dnbGUmJnRoaXMudG9nZ2xlKCl9O2QuVkVSU0lPTj1cIjMuMy40XCIsZC5UUkFOU0lUSU9OX0RVUkFUSU9OPTM1MCxkLkRFRkFVTFRTPXt0b2dnbGU6ITB9LGQucHJvdG90eXBlLmRpbWVuc2lvbj1mdW5jdGlvbigpe3ZhciBhPXRoaXMuJGVsZW1lbnQuaGFzQ2xhc3MoXCJ3aWR0aFwiKTtyZXR1cm4gYT9cIndpZHRoXCI6XCJoZWlnaHRcIn0sZC5wcm90b3R5cGUuc2hvdz1mdW5jdGlvbigpe2lmKCF0aGlzLnRyYW5zaXRpb25pbmcmJiF0aGlzLiRlbGVtZW50Lmhhc0NsYXNzKFwiaW5cIikpe3ZhciBiLGU9dGhpcy4kcGFyZW50JiZ0aGlzLiRwYXJlbnQuY2hpbGRyZW4oXCIucGFuZWxcIikuY2hpbGRyZW4oXCIuaW4sIC5jb2xsYXBzaW5nXCIpO2lmKCEoZSYmZS5sZW5ndGgmJihiPWUuZGF0YShcImJzLmNvbGxhcHNlXCIpLGImJmIudHJhbnNpdGlvbmluZykpKXt2YXIgZj1hLkV2ZW50KFwic2hvdy5icy5jb2xsYXBzZVwiKTtpZih0aGlzLiRlbGVtZW50LnRyaWdnZXIoZiksIWYuaXNEZWZhdWx0UHJldmVudGVkKCkpe2UmJmUubGVuZ3RoJiYoYy5jYWxsKGUsXCJoaWRlXCIpLGJ8fGUuZGF0YShcImJzLmNvbGxhcHNlXCIsbnVsbCkpO3ZhciBnPXRoaXMuZGltZW5zaW9uKCk7dGhpcy4kZWxlbWVudC5yZW1vdmVDbGFzcyhcImNvbGxhcHNlXCIpLmFkZENsYXNzKFwiY29sbGFwc2luZ1wiKVtnXSgwKS5hdHRyKFwiYXJpYS1leHBhbmRlZFwiLCEwKSx0aGlzLiR0cmlnZ2VyLnJlbW92ZUNsYXNzKFwiY29sbGFwc2VkXCIpLmF0dHIoXCJhcmlhLWV4cGFuZGVkXCIsITApLHRoaXMudHJhbnNpdGlvbmluZz0xO3ZhciBoPWZ1bmN0aW9uKCl7dGhpcy4kZWxlbWVudC5yZW1vdmVDbGFzcyhcImNvbGxhcHNpbmdcIikuYWRkQ2xhc3MoXCJjb2xsYXBzZSBpblwiKVtnXShcIlwiKSx0aGlzLnRyYW5zaXRpb25pbmc9MCx0aGlzLiRlbGVtZW50LnRyaWdnZXIoXCJzaG93bi5icy5jb2xsYXBzZVwiKX07aWYoIWEuc3VwcG9ydC50cmFuc2l0aW9uKXJldHVybiBoLmNhbGwodGhpcyk7dmFyIGk9YS5jYW1lbENhc2UoW1wic2Nyb2xsXCIsZ10uam9pbihcIi1cIikpO3RoaXMuJGVsZW1lbnQub25lKFwiYnNUcmFuc2l0aW9uRW5kXCIsYS5wcm94eShoLHRoaXMpKS5lbXVsYXRlVHJhbnNpdGlvbkVuZChkLlRSQU5TSVRJT05fRFVSQVRJT04pW2ddKHRoaXMuJGVsZW1lbnRbMF1baV0pfX19fSxkLnByb3RvdHlwZS5oaWRlPWZ1bmN0aW9uKCl7aWYoIXRoaXMudHJhbnNpdGlvbmluZyYmdGhpcy4kZWxlbWVudC5oYXNDbGFzcyhcImluXCIpKXt2YXIgYj1hLkV2ZW50KFwiaGlkZS5icy5jb2xsYXBzZVwiKTtpZih0aGlzLiRlbGVtZW50LnRyaWdnZXIoYiksIWIuaXNEZWZhdWx0UHJldmVudGVkKCkpe3ZhciBjPXRoaXMuZGltZW5zaW9uKCk7dGhpcy4kZWxlbWVudFtjXSh0aGlzLiRlbGVtZW50W2NdKCkpWzBdLm9mZnNldEhlaWdodCx0aGlzLiRlbGVtZW50LmFkZENsYXNzKFwiY29sbGFwc2luZ1wiKS5yZW1vdmVDbGFzcyhcImNvbGxhcHNlIGluXCIpLmF0dHIoXCJhcmlhLWV4cGFuZGVkXCIsITEpLHRoaXMuJHRyaWdnZXIuYWRkQ2xhc3MoXCJjb2xsYXBzZWRcIikuYXR0cihcImFyaWEtZXhwYW5kZWRcIiwhMSksdGhpcy50cmFuc2l0aW9uaW5nPTE7dmFyIGU9ZnVuY3Rpb24oKXt0aGlzLnRyYW5zaXRpb25pbmc9MCx0aGlzLiRlbGVtZW50LnJlbW92ZUNsYXNzKFwiY29sbGFwc2luZ1wiKS5hZGRDbGFzcyhcImNvbGxhcHNlXCIpLnRyaWdnZXIoXCJoaWRkZW4uYnMuY29sbGFwc2VcIil9O3JldHVybiBhLnN1cHBvcnQudHJhbnNpdGlvbj92b2lkIHRoaXMuJGVsZW1lbnRbY10oMCkub25lKFwiYnNUcmFuc2l0aW9uRW5kXCIsYS5wcm94eShlLHRoaXMpKS5lbXVsYXRlVHJhbnNpdGlvbkVuZChkLlRSQU5TSVRJT05fRFVSQVRJT04pOmUuY2FsbCh0aGlzKX19fSxkLnByb3RvdHlwZS50b2dnbGU9ZnVuY3Rpb24oKXt0aGlzW3RoaXMuJGVsZW1lbnQuaGFzQ2xhc3MoXCJpblwiKT9cImhpZGVcIjpcInNob3dcIl0oKX0sZC5wcm90b3R5cGUuZ2V0UGFyZW50PWZ1bmN0aW9uKCl7cmV0dXJuIGEodGhpcy5vcHRpb25zLnBhcmVudCkuZmluZCgnW2RhdGEtdG9nZ2xlPVwiY29sbGFwc2VcIl1bZGF0YS1wYXJlbnQ9XCInK3RoaXMub3B0aW9ucy5wYXJlbnQrJ1wiXScpLmVhY2goYS5wcm94eShmdW5jdGlvbihjLGQpe3ZhciBlPWEoZCk7dGhpcy5hZGRBcmlhQW5kQ29sbGFwc2VkQ2xhc3MoYihlKSxlKX0sdGhpcykpLmVuZCgpfSxkLnByb3RvdHlwZS5hZGRBcmlhQW5kQ29sbGFwc2VkQ2xhc3M9ZnVuY3Rpb24oYSxiKXt2YXIgYz1hLmhhc0NsYXNzKFwiaW5cIik7YS5hdHRyKFwiYXJpYS1leHBhbmRlZFwiLGMpLGIudG9nZ2xlQ2xhc3MoXCJjb2xsYXBzZWRcIiwhYykuYXR0cihcImFyaWEtZXhwYW5kZWRcIixjKX07dmFyIGU9YS5mbi5jb2xsYXBzZTthLmZuLmNvbGxhcHNlPWMsYS5mbi5jb2xsYXBzZS5Db25zdHJ1Y3Rvcj1kLGEuZm4uY29sbGFwc2Uubm9Db25mbGljdD1mdW5jdGlvbigpe3JldHVybiBhLmZuLmNvbGxhcHNlPWUsdGhpc30sYShkb2N1bWVudCkub24oXCJjbGljay5icy5jb2xsYXBzZS5kYXRhLWFwaVwiLCdbZGF0YS10b2dnbGU9XCJjb2xsYXBzZVwiXScsZnVuY3Rpb24oZCl7dmFyIGU9YSh0aGlzKTtlLmF0dHIoXCJkYXRhLXRhcmdldFwiKXx8ZC5wcmV2ZW50RGVmYXVsdCgpO3ZhciBmPWIoZSksZz1mLmRhdGEoXCJicy5jb2xsYXBzZVwiKSxoPWc/XCJ0b2dnbGVcIjplLmRhdGEoKTtjLmNhbGwoZixoKX0pfShqUXVlcnkpLCtmdW5jdGlvbihhKXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiBiKGIpe2ImJjM9PT1iLndoaWNofHwoYShlKS5yZW1vdmUoKSxhKGYpLmVhY2goZnVuY3Rpb24oKXt2YXIgZD1hKHRoaXMpLGU9YyhkKSxmPXtyZWxhdGVkVGFyZ2V0OnRoaXN9O2UuaGFzQ2xhc3MoXCJvcGVuXCIpJiYoZS50cmlnZ2VyKGI9YS5FdmVudChcImhpZGUuYnMuZHJvcGRvd25cIixmKSksYi5pc0RlZmF1bHRQcmV2ZW50ZWQoKXx8KGQuYXR0cihcImFyaWEtZXhwYW5kZWRcIixcImZhbHNlXCIpLGUucmVtb3ZlQ2xhc3MoXCJvcGVuXCIpLnRyaWdnZXIoXCJoaWRkZW4uYnMuZHJvcGRvd25cIixmKSkpfSkpfWZ1bmN0aW9uIGMoYil7dmFyIGM9Yi5hdHRyKFwiZGF0YS10YXJnZXRcIik7Y3x8KGM9Yi5hdHRyKFwiaHJlZlwiKSxjPWMmJi8jW0EtWmEtel0vLnRlc3QoYykmJmMucmVwbGFjZSgvLiooPz0jW15cXHNdKiQpLyxcIlwiKSk7dmFyIGQ9YyYmYShjKTtyZXR1cm4gZCYmZC5sZW5ndGg/ZDpiLnBhcmVudCgpfWZ1bmN0aW9uIGQoYil7cmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbigpe3ZhciBjPWEodGhpcyksZD1jLmRhdGEoXCJicy5kcm9wZG93blwiKTtkfHxjLmRhdGEoXCJicy5kcm9wZG93blwiLGQ9bmV3IGcodGhpcykpLFwic3RyaW5nXCI9PXR5cGVvZiBiJiZkW2JdLmNhbGwoYyl9KX12YXIgZT1cIi5kcm9wZG93bi1iYWNrZHJvcFwiLGY9J1tkYXRhLXRvZ2dsZT1cImRyb3Bkb3duXCJdJyxnPWZ1bmN0aW9uKGIpe2EoYikub24oXCJjbGljay5icy5kcm9wZG93blwiLHRoaXMudG9nZ2xlKX07Zy5WRVJTSU9OPVwiMy4zLjRcIixnLnByb3RvdHlwZS50b2dnbGU9ZnVuY3Rpb24oZCl7dmFyIGU9YSh0aGlzKTtpZighZS5pcyhcIi5kaXNhYmxlZCwgOmRpc2FibGVkXCIpKXt2YXIgZj1jKGUpLGc9Zi5oYXNDbGFzcyhcIm9wZW5cIik7aWYoYigpLCFnKXtcIm9udG91Y2hzdGFydFwiaW4gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50JiYhZi5jbG9zZXN0KFwiLm5hdmJhci1uYXZcIikubGVuZ3RoJiZhKCc8ZGl2IGNsYXNzPVwiZHJvcGRvd24tYmFja2Ryb3BcIi8+JykuaW5zZXJ0QWZ0ZXIoYSh0aGlzKSkub24oXCJjbGlja1wiLGIpO3ZhciBoPXtyZWxhdGVkVGFyZ2V0OnRoaXN9O2lmKGYudHJpZ2dlcihkPWEuRXZlbnQoXCJzaG93LmJzLmRyb3Bkb3duXCIsaCkpLGQuaXNEZWZhdWx0UHJldmVudGVkKCkpcmV0dXJuO2UudHJpZ2dlcihcImZvY3VzXCIpLmF0dHIoXCJhcmlhLWV4cGFuZGVkXCIsXCJ0cnVlXCIpLGYudG9nZ2xlQ2xhc3MoXCJvcGVuXCIpLnRyaWdnZXIoXCJzaG93bi5icy5kcm9wZG93blwiLGgpfXJldHVybiExfX0sZy5wcm90b3R5cGUua2V5ZG93bj1mdW5jdGlvbihiKXtpZigvKDM4fDQwfDI3fDMyKS8udGVzdChiLndoaWNoKSYmIS9pbnB1dHx0ZXh0YXJlYS9pLnRlc3QoYi50YXJnZXQudGFnTmFtZSkpe3ZhciBkPWEodGhpcyk7aWYoYi5wcmV2ZW50RGVmYXVsdCgpLGIuc3RvcFByb3BhZ2F0aW9uKCksIWQuaXMoXCIuZGlzYWJsZWQsIDpkaXNhYmxlZFwiKSl7dmFyIGU9YyhkKSxnPWUuaGFzQ2xhc3MoXCJvcGVuXCIpO2lmKCFnJiYyNyE9Yi53aGljaHx8ZyYmMjc9PWIud2hpY2gpcmV0dXJuIDI3PT1iLndoaWNoJiZlLmZpbmQoZikudHJpZ2dlcihcImZvY3VzXCIpLGQudHJpZ2dlcihcImNsaWNrXCIpO3ZhciBoPVwiIGxpOm5vdCguZGlzYWJsZWQpOnZpc2libGUgYVwiLGk9ZS5maW5kKCdbcm9sZT1cIm1lbnVcIl0nK2grJywgW3JvbGU9XCJsaXN0Ym94XCJdJytoKTtpZihpLmxlbmd0aCl7dmFyIGo9aS5pbmRleChiLnRhcmdldCk7Mzg9PWIud2hpY2gmJmo+MCYmai0tLDQwPT1iLndoaWNoJiZqPGkubGVuZ3RoLTEmJmorKyx+anx8KGo9MCksaS5lcShqKS50cmlnZ2VyKFwiZm9jdXNcIil9fX19O3ZhciBoPWEuZm4uZHJvcGRvd247YS5mbi5kcm9wZG93bj1kLGEuZm4uZHJvcGRvd24uQ29uc3RydWN0b3I9ZyxhLmZuLmRyb3Bkb3duLm5vQ29uZmxpY3Q9ZnVuY3Rpb24oKXtyZXR1cm4gYS5mbi5kcm9wZG93bj1oLHRoaXN9LGEoZG9jdW1lbnQpLm9uKFwiY2xpY2suYnMuZHJvcGRvd24uZGF0YS1hcGlcIixiKS5vbihcImNsaWNrLmJzLmRyb3Bkb3duLmRhdGEtYXBpXCIsXCIuZHJvcGRvd24gZm9ybVwiLGZ1bmN0aW9uKGEpe2Euc3RvcFByb3BhZ2F0aW9uKCl9KS5vbihcImNsaWNrLmJzLmRyb3Bkb3duLmRhdGEtYXBpXCIsZixnLnByb3RvdHlwZS50b2dnbGUpLm9uKFwia2V5ZG93bi5icy5kcm9wZG93bi5kYXRhLWFwaVwiLGYsZy5wcm90b3R5cGUua2V5ZG93bikub24oXCJrZXlkb3duLmJzLmRyb3Bkb3duLmRhdGEtYXBpXCIsJ1tyb2xlPVwibWVudVwiXScsZy5wcm90b3R5cGUua2V5ZG93bikub24oXCJrZXlkb3duLmJzLmRyb3Bkb3duLmRhdGEtYXBpXCIsJ1tyb2xlPVwibGlzdGJveFwiXScsZy5wcm90b3R5cGUua2V5ZG93bil9KGpRdWVyeSksK2Z1bmN0aW9uKGEpe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIGIoYixkKXtyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKCl7dmFyIGU9YSh0aGlzKSxmPWUuZGF0YShcImJzLm1vZGFsXCIpLGc9YS5leHRlbmQoe30sYy5ERUZBVUxUUyxlLmRhdGEoKSxcIm9iamVjdFwiPT10eXBlb2YgYiYmYik7Znx8ZS5kYXRhKFwiYnMubW9kYWxcIixmPW5ldyBjKHRoaXMsZykpLFwic3RyaW5nXCI9PXR5cGVvZiBiP2ZbYl0oZCk6Zy5zaG93JiZmLnNob3coZCl9KX12YXIgYz1mdW5jdGlvbihiLGMpe3RoaXMub3B0aW9ucz1jLHRoaXMuJGJvZHk9YShkb2N1bWVudC5ib2R5KSx0aGlzLiRlbGVtZW50PWEoYiksdGhpcy4kZGlhbG9nPXRoaXMuJGVsZW1lbnQuZmluZChcIi5tb2RhbC1kaWFsb2dcIiksdGhpcy4kYmFja2Ryb3A9bnVsbCx0aGlzLmlzU2hvd249bnVsbCx0aGlzLm9yaWdpbmFsQm9keVBhZD1udWxsLHRoaXMuc2Nyb2xsYmFyV2lkdGg9MCx0aGlzLmlnbm9yZUJhY2tkcm9wQ2xpY2s9ITEsdGhpcy5vcHRpb25zLnJlbW90ZSYmdGhpcy4kZWxlbWVudC5maW5kKFwiLm1vZGFsLWNvbnRlbnRcIikubG9hZCh0aGlzLm9wdGlvbnMucmVtb3RlLGEucHJveHkoZnVuY3Rpb24oKXt0aGlzLiRlbGVtZW50LnRyaWdnZXIoXCJsb2FkZWQuYnMubW9kYWxcIil9LHRoaXMpKX07Yy5WRVJTSU9OPVwiMy4zLjRcIixjLlRSQU5TSVRJT05fRFVSQVRJT049MzAwLGMuQkFDS0RST1BfVFJBTlNJVElPTl9EVVJBVElPTj0xNTAsYy5ERUZBVUxUUz17YmFja2Ryb3A6ITAsa2V5Ym9hcmQ6ITAsc2hvdzohMH0sYy5wcm90b3R5cGUudG9nZ2xlPWZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLmlzU2hvd24/dGhpcy5oaWRlKCk6dGhpcy5zaG93KGEpfSxjLnByb3RvdHlwZS5zaG93PWZ1bmN0aW9uKGIpe3ZhciBkPXRoaXMsZT1hLkV2ZW50KFwic2hvdy5icy5tb2RhbFwiLHtyZWxhdGVkVGFyZ2V0OmJ9KTt0aGlzLiRlbGVtZW50LnRyaWdnZXIoZSksdGhpcy5pc1Nob3dufHxlLmlzRGVmYXVsdFByZXZlbnRlZCgpfHwodGhpcy5pc1Nob3duPSEwLHRoaXMuY2hlY2tTY3JvbGxiYXIoKSx0aGlzLnNldFNjcm9sbGJhcigpLHRoaXMuJGJvZHkuYWRkQ2xhc3MoXCJtb2RhbC1vcGVuXCIpLHRoaXMuZXNjYXBlKCksdGhpcy5yZXNpemUoKSx0aGlzLiRlbGVtZW50Lm9uKFwiY2xpY2suZGlzbWlzcy5icy5tb2RhbFwiLCdbZGF0YS1kaXNtaXNzPVwibW9kYWxcIl0nLGEucHJveHkodGhpcy5oaWRlLHRoaXMpKSx0aGlzLiRkaWFsb2cub24oXCJtb3VzZWRvd24uZGlzbWlzcy5icy5tb2RhbFwiLGZ1bmN0aW9uKCl7ZC4kZWxlbWVudC5vbmUoXCJtb3VzZXVwLmRpc21pc3MuYnMubW9kYWxcIixmdW5jdGlvbihiKXthKGIudGFyZ2V0KS5pcyhkLiRlbGVtZW50KSYmKGQuaWdub3JlQmFja2Ryb3BDbGljaz0hMCl9KX0pLHRoaXMuYmFja2Ryb3AoZnVuY3Rpb24oKXt2YXIgZT1hLnN1cHBvcnQudHJhbnNpdGlvbiYmZC4kZWxlbWVudC5oYXNDbGFzcyhcImZhZGVcIik7ZC4kZWxlbWVudC5wYXJlbnQoKS5sZW5ndGh8fGQuJGVsZW1lbnQuYXBwZW5kVG8oZC4kYm9keSksZC4kZWxlbWVudC5zaG93KCkuc2Nyb2xsVG9wKDApLGQuYWRqdXN0RGlhbG9nKCksZSYmZC4kZWxlbWVudFswXS5vZmZzZXRXaWR0aCxkLiRlbGVtZW50LmFkZENsYXNzKFwiaW5cIikuYXR0cihcImFyaWEtaGlkZGVuXCIsITEpLGQuZW5mb3JjZUZvY3VzKCk7dmFyIGY9YS5FdmVudChcInNob3duLmJzLm1vZGFsXCIse3JlbGF0ZWRUYXJnZXQ6Yn0pO2U/ZC4kZGlhbG9nLm9uZShcImJzVHJhbnNpdGlvbkVuZFwiLGZ1bmN0aW9uKCl7ZC4kZWxlbWVudC50cmlnZ2VyKFwiZm9jdXNcIikudHJpZ2dlcihmKX0pLmVtdWxhdGVUcmFuc2l0aW9uRW5kKGMuVFJBTlNJVElPTl9EVVJBVElPTik6ZC4kZWxlbWVudC50cmlnZ2VyKFwiZm9jdXNcIikudHJpZ2dlcihmKX0pKX0sYy5wcm90b3R5cGUuaGlkZT1mdW5jdGlvbihiKXtiJiZiLnByZXZlbnREZWZhdWx0KCksYj1hLkV2ZW50KFwiaGlkZS5icy5tb2RhbFwiKSx0aGlzLiRlbGVtZW50LnRyaWdnZXIoYiksdGhpcy5pc1Nob3duJiYhYi5pc0RlZmF1bHRQcmV2ZW50ZWQoKSYmKHRoaXMuaXNTaG93bj0hMSx0aGlzLmVzY2FwZSgpLHRoaXMucmVzaXplKCksYShkb2N1bWVudCkub2ZmKFwiZm9jdXNpbi5icy5tb2RhbFwiKSx0aGlzLiRlbGVtZW50LnJlbW92ZUNsYXNzKFwiaW5cIikuYXR0cihcImFyaWEtaGlkZGVuXCIsITApLm9mZihcImNsaWNrLmRpc21pc3MuYnMubW9kYWxcIikub2ZmKFwibW91c2V1cC5kaXNtaXNzLmJzLm1vZGFsXCIpLHRoaXMuJGRpYWxvZy5vZmYoXCJtb3VzZWRvd24uZGlzbWlzcy5icy5tb2RhbFwiKSxhLnN1cHBvcnQudHJhbnNpdGlvbiYmdGhpcy4kZWxlbWVudC5oYXNDbGFzcyhcImZhZGVcIik/dGhpcy4kZWxlbWVudC5vbmUoXCJic1RyYW5zaXRpb25FbmRcIixhLnByb3h5KHRoaXMuaGlkZU1vZGFsLHRoaXMpKS5lbXVsYXRlVHJhbnNpdGlvbkVuZChjLlRSQU5TSVRJT05fRFVSQVRJT04pOnRoaXMuaGlkZU1vZGFsKCkpfSxjLnByb3RvdHlwZS5lbmZvcmNlRm9jdXM9ZnVuY3Rpb24oKXthKGRvY3VtZW50KS5vZmYoXCJmb2N1c2luLmJzLm1vZGFsXCIpLm9uKFwiZm9jdXNpbi5icy5tb2RhbFwiLGEucHJveHkoZnVuY3Rpb24oYSl7dGhpcy4kZWxlbWVudFswXT09PWEudGFyZ2V0fHx0aGlzLiRlbGVtZW50LmhhcyhhLnRhcmdldCkubGVuZ3RofHx0aGlzLiRlbGVtZW50LnRyaWdnZXIoXCJmb2N1c1wiKX0sdGhpcykpfSxjLnByb3RvdHlwZS5lc2NhcGU9ZnVuY3Rpb24oKXt0aGlzLmlzU2hvd24mJnRoaXMub3B0aW9ucy5rZXlib2FyZD90aGlzLiRlbGVtZW50Lm9uKFwia2V5ZG93bi5kaXNtaXNzLmJzLm1vZGFsXCIsYS5wcm94eShmdW5jdGlvbihhKXsyNz09YS53aGljaCYmdGhpcy5oaWRlKCl9LHRoaXMpKTp0aGlzLmlzU2hvd258fHRoaXMuJGVsZW1lbnQub2ZmKFwia2V5ZG93bi5kaXNtaXNzLmJzLm1vZGFsXCIpfSxjLnByb3RvdHlwZS5yZXNpemU9ZnVuY3Rpb24oKXt0aGlzLmlzU2hvd24/YSh3aW5kb3cpLm9uKFwicmVzaXplLmJzLm1vZGFsXCIsYS5wcm94eSh0aGlzLmhhbmRsZVVwZGF0ZSx0aGlzKSk6YSh3aW5kb3cpLm9mZihcInJlc2l6ZS5icy5tb2RhbFwiKX0sYy5wcm90b3R5cGUuaGlkZU1vZGFsPWZ1bmN0aW9uKCl7dmFyIGE9dGhpczt0aGlzLiRlbGVtZW50LmhpZGUoKSx0aGlzLmJhY2tkcm9wKGZ1bmN0aW9uKCl7YS4kYm9keS5yZW1vdmVDbGFzcyhcIm1vZGFsLW9wZW5cIiksYS5yZXNldEFkanVzdG1lbnRzKCksYS5yZXNldFNjcm9sbGJhcigpLGEuJGVsZW1lbnQudHJpZ2dlcihcImhpZGRlbi5icy5tb2RhbFwiKX0pfSxjLnByb3RvdHlwZS5yZW1vdmVCYWNrZHJvcD1mdW5jdGlvbigpe3RoaXMuJGJhY2tkcm9wJiZ0aGlzLiRiYWNrZHJvcC5yZW1vdmUoKSx0aGlzLiRiYWNrZHJvcD1udWxsfSxjLnByb3RvdHlwZS5iYWNrZHJvcD1mdW5jdGlvbihiKXt2YXIgZD10aGlzLGU9dGhpcy4kZWxlbWVudC5oYXNDbGFzcyhcImZhZGVcIik/XCJmYWRlXCI6XCJcIjtpZih0aGlzLmlzU2hvd24mJnRoaXMub3B0aW9ucy5iYWNrZHJvcCl7dmFyIGY9YS5zdXBwb3J0LnRyYW5zaXRpb24mJmU7aWYodGhpcy4kYmFja2Ryb3A9YSgnPGRpdiBjbGFzcz1cIm1vZGFsLWJhY2tkcm9wICcrZSsnXCIgLz4nKS5hcHBlbmRUbyh0aGlzLiRib2R5KSx0aGlzLiRlbGVtZW50Lm9uKFwiY2xpY2suZGlzbWlzcy5icy5tb2RhbFwiLGEucHJveHkoZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMuaWdub3JlQmFja2Ryb3BDbGljaz92b2lkKHRoaXMuaWdub3JlQmFja2Ryb3BDbGljaz0hMSk6dm9pZChhLnRhcmdldD09PWEuY3VycmVudFRhcmdldCYmKFwic3RhdGljXCI9PXRoaXMub3B0aW9ucy5iYWNrZHJvcD90aGlzLiRlbGVtZW50WzBdLmZvY3VzKCk6dGhpcy5oaWRlKCkpKX0sdGhpcykpLGYmJnRoaXMuJGJhY2tkcm9wWzBdLm9mZnNldFdpZHRoLHRoaXMuJGJhY2tkcm9wLmFkZENsYXNzKFwiaW5cIiksIWIpcmV0dXJuO2Y/dGhpcy4kYmFja2Ryb3Aub25lKFwiYnNUcmFuc2l0aW9uRW5kXCIsYikuZW11bGF0ZVRyYW5zaXRpb25FbmQoYy5CQUNLRFJPUF9UUkFOU0lUSU9OX0RVUkFUSU9OKTpiKCl9ZWxzZSBpZighdGhpcy5pc1Nob3duJiZ0aGlzLiRiYWNrZHJvcCl7dGhpcy4kYmFja2Ryb3AucmVtb3ZlQ2xhc3MoXCJpblwiKTt2YXIgZz1mdW5jdGlvbigpe2QucmVtb3ZlQmFja2Ryb3AoKSxiJiZiKCl9O2Euc3VwcG9ydC50cmFuc2l0aW9uJiZ0aGlzLiRlbGVtZW50Lmhhc0NsYXNzKFwiZmFkZVwiKT90aGlzLiRiYWNrZHJvcC5vbmUoXCJic1RyYW5zaXRpb25FbmRcIixnKS5lbXVsYXRlVHJhbnNpdGlvbkVuZChjLkJBQ0tEUk9QX1RSQU5TSVRJT05fRFVSQVRJT04pOmcoKX1lbHNlIGImJmIoKX0sYy5wcm90b3R5cGUuaGFuZGxlVXBkYXRlPWZ1bmN0aW9uKCl7dGhpcy5hZGp1c3REaWFsb2coKX0sYy5wcm90b3R5cGUuYWRqdXN0RGlhbG9nPWZ1bmN0aW9uKCl7dmFyIGE9dGhpcy4kZWxlbWVudFswXS5zY3JvbGxIZWlnaHQ+ZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmNsaWVudEhlaWdodDt0aGlzLiRlbGVtZW50LmNzcyh7cGFkZGluZ0xlZnQ6IXRoaXMuYm9keUlzT3ZlcmZsb3dpbmcmJmE/dGhpcy5zY3JvbGxiYXJXaWR0aDpcIlwiLHBhZGRpbmdSaWdodDp0aGlzLmJvZHlJc092ZXJmbG93aW5nJiYhYT90aGlzLnNjcm9sbGJhcldpZHRoOlwiXCJ9KX0sYy5wcm90b3R5cGUucmVzZXRBZGp1c3RtZW50cz1mdW5jdGlvbigpe3RoaXMuJGVsZW1lbnQuY3NzKHtwYWRkaW5nTGVmdDpcIlwiLHBhZGRpbmdSaWdodDpcIlwifSl9LGMucHJvdG90eXBlLmNoZWNrU2Nyb2xsYmFyPWZ1bmN0aW9uKCl7dmFyIGE9d2luZG93LmlubmVyV2lkdGg7aWYoIWEpe3ZhciBiPWRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTthPWIucmlnaHQtTWF0aC5hYnMoYi5sZWZ0KX10aGlzLmJvZHlJc092ZXJmbG93aW5nPWRvY3VtZW50LmJvZHkuY2xpZW50V2lkdGg8YSx0aGlzLnNjcm9sbGJhcldpZHRoPXRoaXMubWVhc3VyZVNjcm9sbGJhcigpfSxjLnByb3RvdHlwZS5zZXRTY3JvbGxiYXI9ZnVuY3Rpb24oKXt2YXIgYT1wYXJzZUludCh0aGlzLiRib2R5LmNzcyhcInBhZGRpbmctcmlnaHRcIil8fDAsMTApO3RoaXMub3JpZ2luYWxCb2R5UGFkPWRvY3VtZW50LmJvZHkuc3R5bGUucGFkZGluZ1JpZ2h0fHxcIlwiLHRoaXMuYm9keUlzT3ZlcmZsb3dpbmcmJnRoaXMuJGJvZHkuY3NzKFwicGFkZGluZy1yaWdodFwiLGErdGhpcy5zY3JvbGxiYXJXaWR0aCl9LGMucHJvdG90eXBlLnJlc2V0U2Nyb2xsYmFyPWZ1bmN0aW9uKCl7dGhpcy4kYm9keS5jc3MoXCJwYWRkaW5nLXJpZ2h0XCIsdGhpcy5vcmlnaW5hbEJvZHlQYWQpfSxjLnByb3RvdHlwZS5tZWFzdXJlU2Nyb2xsYmFyPWZ1bmN0aW9uKCl7dmFyIGE9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTthLmNsYXNzTmFtZT1cIm1vZGFsLXNjcm9sbGJhci1tZWFzdXJlXCIsdGhpcy4kYm9keS5hcHBlbmQoYSk7dmFyIGI9YS5vZmZzZXRXaWR0aC1hLmNsaWVudFdpZHRoO3JldHVybiB0aGlzLiRib2R5WzBdLnJlbW92ZUNoaWxkKGEpLGJ9O3ZhciBkPWEuZm4ubW9kYWw7YS5mbi5tb2RhbD1iLGEuZm4ubW9kYWwuQ29uc3RydWN0b3I9YyxhLmZuLm1vZGFsLm5vQ29uZmxpY3Q9ZnVuY3Rpb24oKXtyZXR1cm4gYS5mbi5tb2RhbD1kLHRoaXN9LGEoZG9jdW1lbnQpLm9uKFwiY2xpY2suYnMubW9kYWwuZGF0YS1hcGlcIiwnW2RhdGEtdG9nZ2xlPVwibW9kYWxcIl0nLGZ1bmN0aW9uKGMpe3ZhciBkPWEodGhpcyksZT1kLmF0dHIoXCJocmVmXCIpLGY9YShkLmF0dHIoXCJkYXRhLXRhcmdldFwiKXx8ZSYmZS5yZXBsYWNlKC8uKig/PSNbXlxcc10rJCkvLFwiXCIpKSxnPWYuZGF0YShcImJzLm1vZGFsXCIpP1widG9nZ2xlXCI6YS5leHRlbmQoe3JlbW90ZTohLyMvLnRlc3QoZSkmJmV9LGYuZGF0YSgpLGQuZGF0YSgpKTtkLmlzKFwiYVwiKSYmYy5wcmV2ZW50RGVmYXVsdCgpLGYub25lKFwic2hvdy5icy5tb2RhbFwiLGZ1bmN0aW9uKGEpe2EuaXNEZWZhdWx0UHJldmVudGVkKCl8fGYub25lKFwiaGlkZGVuLmJzLm1vZGFsXCIsZnVuY3Rpb24oKXtkLmlzKFwiOnZpc2libGVcIikmJmQudHJpZ2dlcihcImZvY3VzXCIpfSl9KSxiLmNhbGwoZixnLHRoaXMpfSl9KGpRdWVyeSksK2Z1bmN0aW9uKGEpe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIGIoYil7cmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbigpe3ZhciBkPWEodGhpcyksZT1kLmRhdGEoXCJicy50b29sdGlwXCIpLGY9XCJvYmplY3RcIj09dHlwZW9mIGImJmI7KGV8fCEvZGVzdHJveXxoaWRlLy50ZXN0KGIpKSYmKGV8fGQuZGF0YShcImJzLnRvb2x0aXBcIixlPW5ldyBjKHRoaXMsZikpLFwic3RyaW5nXCI9PXR5cGVvZiBiJiZlW2JdKCkpfSl9dmFyIGM9ZnVuY3Rpb24oYSxiKXt0aGlzLnR5cGU9bnVsbCx0aGlzLm9wdGlvbnM9bnVsbCx0aGlzLmVuYWJsZWQ9bnVsbCx0aGlzLnRpbWVvdXQ9bnVsbCx0aGlzLmhvdmVyU3RhdGU9bnVsbCx0aGlzLiRlbGVtZW50PW51bGwsdGhpcy5pbml0KFwidG9vbHRpcFwiLGEsYil9O2MuVkVSU0lPTj1cIjMuMy40XCIsYy5UUkFOU0lUSU9OX0RVUkFUSU9OPTE1MCxjLkRFRkFVTFRTPXthbmltYXRpb246ITAscGxhY2VtZW50OlwidG9wXCIsc2VsZWN0b3I6ITEsdGVtcGxhdGU6JzxkaXYgY2xhc3M9XCJ0b29sdGlwXCIgcm9sZT1cInRvb2x0aXBcIj48ZGl2IGNsYXNzPVwidG9vbHRpcC1hcnJvd1wiPjwvZGl2PjxkaXYgY2xhc3M9XCJ0b29sdGlwLWlubmVyXCI+PC9kaXY+PC9kaXY+Jyx0cmlnZ2VyOlwiaG92ZXIgZm9jdXNcIix0aXRsZTpcIlwiLGRlbGF5OjAsaHRtbDohMSxjb250YWluZXI6ITEsdmlld3BvcnQ6e3NlbGVjdG9yOlwiYm9keVwiLHBhZGRpbmc6MH19LGMucHJvdG90eXBlLmluaXQ9ZnVuY3Rpb24oYixjLGQpe2lmKHRoaXMuZW5hYmxlZD0hMCx0aGlzLnR5cGU9Yix0aGlzLiRlbGVtZW50PWEoYyksdGhpcy5vcHRpb25zPXRoaXMuZ2V0T3B0aW9ucyhkKSx0aGlzLiR2aWV3cG9ydD10aGlzLm9wdGlvbnMudmlld3BvcnQmJmEodGhpcy5vcHRpb25zLnZpZXdwb3J0LnNlbGVjdG9yfHx0aGlzLm9wdGlvbnMudmlld3BvcnQpLHRoaXMuJGVsZW1lbnRbMF1pbnN0YW5jZW9mIGRvY3VtZW50LmNvbnN0cnVjdG9yJiYhdGhpcy5vcHRpb25zLnNlbGVjdG9yKXRocm93IG5ldyBFcnJvcihcImBzZWxlY3RvcmAgb3B0aW9uIG11c3QgYmUgc3BlY2lmaWVkIHdoZW4gaW5pdGlhbGl6aW5nIFwiK3RoaXMudHlwZStcIiBvbiB0aGUgd2luZG93LmRvY3VtZW50IG9iamVjdCFcIik7Zm9yKHZhciBlPXRoaXMub3B0aW9ucy50cmlnZ2VyLnNwbGl0KFwiIFwiKSxmPWUubGVuZ3RoO2YtLTspe3ZhciBnPWVbZl07aWYoXCJjbGlja1wiPT1nKXRoaXMuJGVsZW1lbnQub24oXCJjbGljay5cIit0aGlzLnR5cGUsdGhpcy5vcHRpb25zLnNlbGVjdG9yLGEucHJveHkodGhpcy50b2dnbGUsdGhpcykpO2Vsc2UgaWYoXCJtYW51YWxcIiE9Zyl7dmFyIGg9XCJob3ZlclwiPT1nP1wibW91c2VlbnRlclwiOlwiZm9jdXNpblwiLGk9XCJob3ZlclwiPT1nP1wibW91c2VsZWF2ZVwiOlwiZm9jdXNvdXRcIjt0aGlzLiRlbGVtZW50Lm9uKGgrXCIuXCIrdGhpcy50eXBlLHRoaXMub3B0aW9ucy5zZWxlY3RvcixhLnByb3h5KHRoaXMuZW50ZXIsdGhpcykpLHRoaXMuJGVsZW1lbnQub24oaStcIi5cIit0aGlzLnR5cGUsdGhpcy5vcHRpb25zLnNlbGVjdG9yLGEucHJveHkodGhpcy5sZWF2ZSx0aGlzKSl9fXRoaXMub3B0aW9ucy5zZWxlY3Rvcj90aGlzLl9vcHRpb25zPWEuZXh0ZW5kKHt9LHRoaXMub3B0aW9ucyx7dHJpZ2dlcjpcIm1hbnVhbFwiLHNlbGVjdG9yOlwiXCJ9KTp0aGlzLmZpeFRpdGxlKCl9LGMucHJvdG90eXBlLmdldERlZmF1bHRzPWZ1bmN0aW9uKCl7cmV0dXJuIGMuREVGQVVMVFN9LGMucHJvdG90eXBlLmdldE9wdGlvbnM9ZnVuY3Rpb24oYil7cmV0dXJuIGI9YS5leHRlbmQoe30sdGhpcy5nZXREZWZhdWx0cygpLHRoaXMuJGVsZW1lbnQuZGF0YSgpLGIpLGIuZGVsYXkmJlwibnVtYmVyXCI9PXR5cGVvZiBiLmRlbGF5JiYoYi5kZWxheT17c2hvdzpiLmRlbGF5LGhpZGU6Yi5kZWxheX0pLGJ9LGMucHJvdG90eXBlLmdldERlbGVnYXRlT3B0aW9ucz1mdW5jdGlvbigpe3ZhciBiPXt9LGM9dGhpcy5nZXREZWZhdWx0cygpO3JldHVybiB0aGlzLl9vcHRpb25zJiZhLmVhY2godGhpcy5fb3B0aW9ucyxmdW5jdGlvbihhLGQpe2NbYV0hPWQmJihiW2FdPWQpfSksYn0sYy5wcm90b3R5cGUuZW50ZXI9ZnVuY3Rpb24oYil7dmFyIGM9YiBpbnN0YW5jZW9mIHRoaXMuY29uc3RydWN0b3I/YjphKGIuY3VycmVudFRhcmdldCkuZGF0YShcImJzLlwiK3RoaXMudHlwZSk7cmV0dXJuIGMmJmMuJHRpcCYmYy4kdGlwLmlzKFwiOnZpc2libGVcIik/dm9pZChjLmhvdmVyU3RhdGU9XCJpblwiKTooY3x8KGM9bmV3IHRoaXMuY29uc3RydWN0b3IoYi5jdXJyZW50VGFyZ2V0LHRoaXMuZ2V0RGVsZWdhdGVPcHRpb25zKCkpLGEoYi5jdXJyZW50VGFyZ2V0KS5kYXRhKFwiYnMuXCIrdGhpcy50eXBlLGMpKSxjbGVhclRpbWVvdXQoYy50aW1lb3V0KSxjLmhvdmVyU3RhdGU9XCJpblwiLGMub3B0aW9ucy5kZWxheSYmYy5vcHRpb25zLmRlbGF5LnNob3c/dm9pZChjLnRpbWVvdXQ9c2V0VGltZW91dChmdW5jdGlvbigpe1wiaW5cIj09Yy5ob3ZlclN0YXRlJiZjLnNob3coKX0sYy5vcHRpb25zLmRlbGF5LnNob3cpKTpjLnNob3coKSl9LGMucHJvdG90eXBlLmxlYXZlPWZ1bmN0aW9uKGIpe3ZhciBjPWIgaW5zdGFuY2VvZiB0aGlzLmNvbnN0cnVjdG9yP2I6YShiLmN1cnJlbnRUYXJnZXQpLmRhdGEoXCJicy5cIit0aGlzLnR5cGUpO3JldHVybiBjfHwoYz1uZXcgdGhpcy5jb25zdHJ1Y3RvcihiLmN1cnJlbnRUYXJnZXQsdGhpcy5nZXREZWxlZ2F0ZU9wdGlvbnMoKSksYShiLmN1cnJlbnRUYXJnZXQpLmRhdGEoXCJicy5cIit0aGlzLnR5cGUsYykpLGNsZWFyVGltZW91dChjLnRpbWVvdXQpLGMuaG92ZXJTdGF0ZT1cIm91dFwiLGMub3B0aW9ucy5kZWxheSYmYy5vcHRpb25zLmRlbGF5LmhpZGU/dm9pZChjLnRpbWVvdXQ9c2V0VGltZW91dChmdW5jdGlvbigpe1wib3V0XCI9PWMuaG92ZXJTdGF0ZSYmYy5oaWRlKCl9LGMub3B0aW9ucy5kZWxheS5oaWRlKSk6Yy5oaWRlKCl9LGMucHJvdG90eXBlLnNob3c9ZnVuY3Rpb24oKXt2YXIgYj1hLkV2ZW50KFwic2hvdy5icy5cIit0aGlzLnR5cGUpO2lmKHRoaXMuaGFzQ29udGVudCgpJiZ0aGlzLmVuYWJsZWQpe3RoaXMuJGVsZW1lbnQudHJpZ2dlcihiKTt2YXIgZD1hLmNvbnRhaW5zKHRoaXMuJGVsZW1lbnRbMF0ub3duZXJEb2N1bWVudC5kb2N1bWVudEVsZW1lbnQsdGhpcy4kZWxlbWVudFswXSk7aWYoYi5pc0RlZmF1bHRQcmV2ZW50ZWQoKXx8IWQpcmV0dXJuO3ZhciBlPXRoaXMsZj10aGlzLnRpcCgpLGc9dGhpcy5nZXRVSUQodGhpcy50eXBlKTt0aGlzLnNldENvbnRlbnQoKSxmLmF0dHIoXCJpZFwiLGcpLHRoaXMuJGVsZW1lbnQuYXR0cihcImFyaWEtZGVzY3JpYmVkYnlcIixnKSx0aGlzLm9wdGlvbnMuYW5pbWF0aW9uJiZmLmFkZENsYXNzKFwiZmFkZVwiKTt2YXIgaD1cImZ1bmN0aW9uXCI9PXR5cGVvZiB0aGlzLm9wdGlvbnMucGxhY2VtZW50P3RoaXMub3B0aW9ucy5wbGFjZW1lbnQuY2FsbCh0aGlzLGZbMF0sdGhpcy4kZWxlbWVudFswXSk6dGhpcy5vcHRpb25zLnBsYWNlbWVudCxpPS9cXHM/YXV0bz9cXHM/L2ksaj1pLnRlc3QoaCk7aiYmKGg9aC5yZXBsYWNlKGksXCJcIil8fFwidG9wXCIpLGYuZGV0YWNoKCkuY3NzKHt0b3A6MCxsZWZ0OjAsZGlzcGxheTpcImJsb2NrXCJ9KS5hZGRDbGFzcyhoKS5kYXRhKFwiYnMuXCIrdGhpcy50eXBlLHRoaXMpLHRoaXMub3B0aW9ucy5jb250YWluZXI/Zi5hcHBlbmRUbyh0aGlzLm9wdGlvbnMuY29udGFpbmVyKTpmLmluc2VydEFmdGVyKHRoaXMuJGVsZW1lbnQpO3ZhciBrPXRoaXMuZ2V0UG9zaXRpb24oKSxsPWZbMF0ub2Zmc2V0V2lkdGgsbT1mWzBdLm9mZnNldEhlaWdodDtpZihqKXt2YXIgbj1oLG89dGhpcy5vcHRpb25zLmNvbnRhaW5lcj9hKHRoaXMub3B0aW9ucy5jb250YWluZXIpOnRoaXMuJGVsZW1lbnQucGFyZW50KCkscD10aGlzLmdldFBvc2l0aW9uKG8pO2g9XCJib3R0b21cIj09aCYmay5ib3R0b20rbT5wLmJvdHRvbT9cInRvcFwiOlwidG9wXCI9PWgmJmsudG9wLW08cC50b3A/XCJib3R0b21cIjpcInJpZ2h0XCI9PWgmJmsucmlnaHQrbD5wLndpZHRoP1wibGVmdFwiOlwibGVmdFwiPT1oJiZrLmxlZnQtbDxwLmxlZnQ/XCJyaWdodFwiOmgsZi5yZW1vdmVDbGFzcyhuKS5hZGRDbGFzcyhoKX12YXIgcT10aGlzLmdldENhbGN1bGF0ZWRPZmZzZXQoaCxrLGwsbSk7dGhpcy5hcHBseVBsYWNlbWVudChxLGgpO3ZhciByPWZ1bmN0aW9uKCl7dmFyIGE9ZS5ob3ZlclN0YXRlO2UuJGVsZW1lbnQudHJpZ2dlcihcInNob3duLmJzLlwiK2UudHlwZSksZS5ob3ZlclN0YXRlPW51bGwsXCJvdXRcIj09YSYmZS5sZWF2ZShlKX07YS5zdXBwb3J0LnRyYW5zaXRpb24mJnRoaXMuJHRpcC5oYXNDbGFzcyhcImZhZGVcIik/Zi5vbmUoXCJic1RyYW5zaXRpb25FbmRcIixyKS5lbXVsYXRlVHJhbnNpdGlvbkVuZChjLlRSQU5TSVRJT05fRFVSQVRJT04pOnIoKX19LGMucHJvdG90eXBlLmFwcGx5UGxhY2VtZW50PWZ1bmN0aW9uKGIsYyl7dmFyIGQ9dGhpcy50aXAoKSxlPWRbMF0ub2Zmc2V0V2lkdGgsZj1kWzBdLm9mZnNldEhlaWdodCxnPXBhcnNlSW50KGQuY3NzKFwibWFyZ2luLXRvcFwiKSwxMCksaD1wYXJzZUludChkLmNzcyhcIm1hcmdpbi1sZWZ0XCIpLDEwKTtpc05hTihnKSYmKGc9MCksaXNOYU4oaCkmJihoPTApLGIudG9wPWIudG9wK2csYi5sZWZ0PWIubGVmdCtoLGEub2Zmc2V0LnNldE9mZnNldChkWzBdLGEuZXh0ZW5kKHt1c2luZzpmdW5jdGlvbihhKXtkLmNzcyh7dG9wOk1hdGgucm91bmQoYS50b3ApLGxlZnQ6TWF0aC5yb3VuZChhLmxlZnQpfSl9fSxiKSwwKSxkLmFkZENsYXNzKFwiaW5cIik7dmFyIGk9ZFswXS5vZmZzZXRXaWR0aCxqPWRbMF0ub2Zmc2V0SGVpZ2h0O1widG9wXCI9PWMmJmohPWYmJihiLnRvcD1iLnRvcCtmLWopO3ZhciBrPXRoaXMuZ2V0Vmlld3BvcnRBZGp1c3RlZERlbHRhKGMsYixpLGopO2subGVmdD9iLmxlZnQrPWsubGVmdDpiLnRvcCs9ay50b3A7dmFyIGw9L3RvcHxib3R0b20vLnRlc3QoYyksbT1sPzIqay5sZWZ0LWUraToyKmsudG9wLWYraixuPWw/XCJvZmZzZXRXaWR0aFwiOlwib2Zmc2V0SGVpZ2h0XCI7ZC5vZmZzZXQoYiksdGhpcy5yZXBsYWNlQXJyb3cobSxkWzBdW25dLGwpfSxjLnByb3RvdHlwZS5yZXBsYWNlQXJyb3c9ZnVuY3Rpb24oYSxiLGMpe3RoaXMuYXJyb3coKS5jc3MoYz9cImxlZnRcIjpcInRvcFwiLDUwKigxLWEvYikrXCIlXCIpLmNzcyhjP1widG9wXCI6XCJsZWZ0XCIsXCJcIil9LGMucHJvdG90eXBlLnNldENvbnRlbnQ9ZnVuY3Rpb24oKXt2YXIgYT10aGlzLnRpcCgpLGI9dGhpcy5nZXRUaXRsZSgpO2EuZmluZChcIi50b29sdGlwLWlubmVyXCIpW3RoaXMub3B0aW9ucy5odG1sP1wiaHRtbFwiOlwidGV4dFwiXShiKSxhLnJlbW92ZUNsYXNzKFwiZmFkZSBpbiB0b3AgYm90dG9tIGxlZnQgcmlnaHRcIil9LGMucHJvdG90eXBlLmhpZGU9ZnVuY3Rpb24oYil7ZnVuY3Rpb24gZCgpe1wiaW5cIiE9ZS5ob3ZlclN0YXRlJiZmLmRldGFjaCgpLGUuJGVsZW1lbnQucmVtb3ZlQXR0cihcImFyaWEtZGVzY3JpYmVkYnlcIikudHJpZ2dlcihcImhpZGRlbi5icy5cIitlLnR5cGUpLGImJmIoKX12YXIgZT10aGlzLGY9YSh0aGlzLiR0aXApLGc9YS5FdmVudChcImhpZGUuYnMuXCIrdGhpcy50eXBlKTtyZXR1cm4gdGhpcy4kZWxlbWVudC50cmlnZ2VyKGcpLGcuaXNEZWZhdWx0UHJldmVudGVkKCk/dm9pZCAwOihmLnJlbW92ZUNsYXNzKFwiaW5cIiksYS5zdXBwb3J0LnRyYW5zaXRpb24mJmYuaGFzQ2xhc3MoXCJmYWRlXCIpP2Yub25lKFwiYnNUcmFuc2l0aW9uRW5kXCIsZCkuZW11bGF0ZVRyYW5zaXRpb25FbmQoYy5UUkFOU0lUSU9OX0RVUkFUSU9OKTpkKCksdGhpcy5ob3ZlclN0YXRlPW51bGwsdGhpcyl9LGMucHJvdG90eXBlLmZpeFRpdGxlPWZ1bmN0aW9uKCl7dmFyIGE9dGhpcy4kZWxlbWVudDsoYS5hdHRyKFwidGl0bGVcIil8fFwic3RyaW5nXCIhPXR5cGVvZiBhLmF0dHIoXCJkYXRhLW9yaWdpbmFsLXRpdGxlXCIpKSYmYS5hdHRyKFwiZGF0YS1vcmlnaW5hbC10aXRsZVwiLGEuYXR0cihcInRpdGxlXCIpfHxcIlwiKS5hdHRyKFwidGl0bGVcIixcIlwiKX0sYy5wcm90b3R5cGUuaGFzQ29udGVudD1mdW5jdGlvbigpe3JldHVybiB0aGlzLmdldFRpdGxlKCl9LGMucHJvdG90eXBlLmdldFBvc2l0aW9uPWZ1bmN0aW9uKGIpe2I9Ynx8dGhpcy4kZWxlbWVudDt2YXIgYz1iWzBdLGQ9XCJCT0RZXCI9PWMudGFnTmFtZSxlPWMuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7bnVsbD09ZS53aWR0aCYmKGU9YS5leHRlbmQoe30sZSx7d2lkdGg6ZS5yaWdodC1lLmxlZnQsaGVpZ2h0OmUuYm90dG9tLWUudG9wfSkpO3ZhciBmPWQ/e3RvcDowLGxlZnQ6MH06Yi5vZmZzZXQoKSxnPXtzY3JvbGw6ZD9kb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc2Nyb2xsVG9wfHxkb2N1bWVudC5ib2R5LnNjcm9sbFRvcDpiLnNjcm9sbFRvcCgpfSxoPWQ/e3dpZHRoOmEod2luZG93KS53aWR0aCgpLGhlaWdodDphKHdpbmRvdykuaGVpZ2h0KCl9Om51bGw7cmV0dXJuIGEuZXh0ZW5kKHt9LGUsZyxoLGYpfSxjLnByb3RvdHlwZS5nZXRDYWxjdWxhdGVkT2Zmc2V0PWZ1bmN0aW9uKGEsYixjLGQpe3JldHVyblwiYm90dG9tXCI9PWE/e3RvcDpiLnRvcCtiLmhlaWdodCxsZWZ0OmIubGVmdCtiLndpZHRoLzItYy8yfTpcInRvcFwiPT1hP3t0b3A6Yi50b3AtZCxsZWZ0OmIubGVmdCtiLndpZHRoLzItYy8yfTpcImxlZnRcIj09YT97dG9wOmIudG9wK2IuaGVpZ2h0LzItZC8yLGxlZnQ6Yi5sZWZ0LWN9Ont0b3A6Yi50b3ArYi5oZWlnaHQvMi1kLzIsbGVmdDpiLmxlZnQrYi53aWR0aH19LGMucHJvdG90eXBlLmdldFZpZXdwb3J0QWRqdXN0ZWREZWx0YT1mdW5jdGlvbihhLGIsYyxkKXt2YXIgZT17dG9wOjAsbGVmdDowfTtpZighdGhpcy4kdmlld3BvcnQpcmV0dXJuIGU7dmFyIGY9dGhpcy5vcHRpb25zLnZpZXdwb3J0JiZ0aGlzLm9wdGlvbnMudmlld3BvcnQucGFkZGluZ3x8MCxnPXRoaXMuZ2V0UG9zaXRpb24odGhpcy4kdmlld3BvcnQpO2lmKC9yaWdodHxsZWZ0Ly50ZXN0KGEpKXt2YXIgaD1iLnRvcC1mLWcuc2Nyb2xsLGk9Yi50b3ArZi1nLnNjcm9sbCtkO2g8Zy50b3A/ZS50b3A9Zy50b3AtaDppPmcudG9wK2cuaGVpZ2h0JiYoZS50b3A9Zy50b3ArZy5oZWlnaHQtaSl9ZWxzZXt2YXIgaj1iLmxlZnQtZixrPWIubGVmdCtmK2M7ajxnLmxlZnQ/ZS5sZWZ0PWcubGVmdC1qOms+Zy53aWR0aCYmKGUubGVmdD1nLmxlZnQrZy53aWR0aC1rKX1yZXR1cm4gZX0sYy5wcm90b3R5cGUuZ2V0VGl0bGU9ZnVuY3Rpb24oKXt2YXIgYSxiPXRoaXMuJGVsZW1lbnQsYz10aGlzLm9wdGlvbnM7cmV0dXJuIGE9Yi5hdHRyKFwiZGF0YS1vcmlnaW5hbC10aXRsZVwiKXx8KFwiZnVuY3Rpb25cIj09dHlwZW9mIGMudGl0bGU/Yy50aXRsZS5jYWxsKGJbMF0pOmMudGl0bGUpfSxjLnByb3RvdHlwZS5nZXRVSUQ9ZnVuY3Rpb24oYSl7ZG8gYSs9fn4oMWU2Kk1hdGgucmFuZG9tKCkpO3doaWxlKGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGEpKTtyZXR1cm4gYX0sYy5wcm90b3R5cGUudGlwPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuJHRpcD10aGlzLiR0aXB8fGEodGhpcy5vcHRpb25zLnRlbXBsYXRlKX0sYy5wcm90b3R5cGUuYXJyb3c9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy4kYXJyb3c9dGhpcy4kYXJyb3d8fHRoaXMudGlwKCkuZmluZChcIi50b29sdGlwLWFycm93XCIpfSxjLnByb3RvdHlwZS5lbmFibGU9ZnVuY3Rpb24oKXt0aGlzLmVuYWJsZWQ9ITB9LGMucHJvdG90eXBlLmRpc2FibGU9ZnVuY3Rpb24oKXt0aGlzLmVuYWJsZWQ9ITF9LGMucHJvdG90eXBlLnRvZ2dsZUVuYWJsZWQ9ZnVuY3Rpb24oKXt0aGlzLmVuYWJsZWQ9IXRoaXMuZW5hYmxlZH0sYy5wcm90b3R5cGUudG9nZ2xlPWZ1bmN0aW9uKGIpe3ZhciBjPXRoaXM7YiYmKGM9YShiLmN1cnJlbnRUYXJnZXQpLmRhdGEoXCJicy5cIit0aGlzLnR5cGUpLGN8fChjPW5ldyB0aGlzLmNvbnN0cnVjdG9yKGIuY3VycmVudFRhcmdldCx0aGlzLmdldERlbGVnYXRlT3B0aW9ucygpKSxhKGIuY3VycmVudFRhcmdldCkuZGF0YShcImJzLlwiK3RoaXMudHlwZSxjKSkpLGMudGlwKCkuaGFzQ2xhc3MoXCJpblwiKT9jLmxlYXZlKGMpOmMuZW50ZXIoYyl9LGMucHJvdG90eXBlLmRlc3Ryb3k9ZnVuY3Rpb24oKXt2YXIgYT10aGlzO2NsZWFyVGltZW91dCh0aGlzLnRpbWVvdXQpLHRoaXMuaGlkZShmdW5jdGlvbigpe2EuJGVsZW1lbnQub2ZmKFwiLlwiK2EudHlwZSkucmVtb3ZlRGF0YShcImJzLlwiK2EudHlwZSl9KX07dmFyIGQ9YS5mbi50b29sdGlwO2EuZm4udG9vbHRpcD1iLGEuZm4udG9vbHRpcC5Db25zdHJ1Y3Rvcj1jLGEuZm4udG9vbHRpcC5ub0NvbmZsaWN0PWZ1bmN0aW9uKCl7cmV0dXJuIGEuZm4udG9vbHRpcD1kLHRoaXN9fShqUXVlcnkpLCtmdW5jdGlvbihhKXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiBiKGIpe3JldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oKXt2YXIgZD1hKHRoaXMpLGU9ZC5kYXRhKFwiYnMucG9wb3ZlclwiKSxmPVwib2JqZWN0XCI9PXR5cGVvZiBiJiZiOyhlfHwhL2Rlc3Ryb3l8aGlkZS8udGVzdChiKSkmJihlfHxkLmRhdGEoXCJicy5wb3BvdmVyXCIsZT1uZXcgYyh0aGlzLGYpKSxcInN0cmluZ1wiPT10eXBlb2YgYiYmZVtiXSgpKX0pfXZhciBjPWZ1bmN0aW9uKGEsYil7dGhpcy5pbml0KFwicG9wb3ZlclwiLGEsYil9O2lmKCFhLmZuLnRvb2x0aXApdGhyb3cgbmV3IEVycm9yKFwiUG9wb3ZlciByZXF1aXJlcyB0b29sdGlwLmpzXCIpO2MuVkVSU0lPTj1cIjMuMy40XCIsYy5ERUZBVUxUUz1hLmV4dGVuZCh7fSxhLmZuLnRvb2x0aXAuQ29uc3RydWN0b3IuREVGQVVMVFMse3BsYWNlbWVudDpcInJpZ2h0XCIsdHJpZ2dlcjpcImNsaWNrXCIsY29udGVudDpcIlwiLHRlbXBsYXRlOic8ZGl2IGNsYXNzPVwicG9wb3ZlclwiIHJvbGU9XCJ0b29sdGlwXCI+PGRpdiBjbGFzcz1cImFycm93XCI+PC9kaXY+PGgzIGNsYXNzPVwicG9wb3Zlci10aXRsZVwiPjwvaDM+PGRpdiBjbGFzcz1cInBvcG92ZXItY29udGVudFwiPjwvZGl2PjwvZGl2Pid9KSxjLnByb3RvdHlwZT1hLmV4dGVuZCh7fSxhLmZuLnRvb2x0aXAuQ29uc3RydWN0b3IucHJvdG90eXBlKSxjLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1jLGMucHJvdG90eXBlLmdldERlZmF1bHRzPWZ1bmN0aW9uKCl7cmV0dXJuIGMuREVGQVVMVFN9LGMucHJvdG90eXBlLnNldENvbnRlbnQ9ZnVuY3Rpb24oKXt2YXIgYT10aGlzLnRpcCgpLGI9dGhpcy5nZXRUaXRsZSgpLGM9dGhpcy5nZXRDb250ZW50KCk7YS5maW5kKFwiLnBvcG92ZXItdGl0bGVcIilbdGhpcy5vcHRpb25zLmh0bWw/XCJodG1sXCI6XCJ0ZXh0XCJdKGIpLGEuZmluZChcIi5wb3BvdmVyLWNvbnRlbnRcIikuY2hpbGRyZW4oKS5kZXRhY2goKS5lbmQoKVt0aGlzLm9wdGlvbnMuaHRtbD9cInN0cmluZ1wiPT10eXBlb2YgYz9cImh0bWxcIjpcImFwcGVuZFwiOlwidGV4dFwiXShjKSxhLnJlbW92ZUNsYXNzKFwiZmFkZSB0b3AgYm90dG9tIGxlZnQgcmlnaHQgaW5cIiksYS5maW5kKFwiLnBvcG92ZXItdGl0bGVcIikuaHRtbCgpfHxhLmZpbmQoXCIucG9wb3Zlci10aXRsZVwiKS5oaWRlKCl9LGMucHJvdG90eXBlLmhhc0NvbnRlbnQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5nZXRUaXRsZSgpfHx0aGlzLmdldENvbnRlbnQoKX0sYy5wcm90b3R5cGUuZ2V0Q29udGVudD1mdW5jdGlvbigpe3ZhciBhPXRoaXMuJGVsZW1lbnQsYj10aGlzLm9wdGlvbnM7cmV0dXJuIGEuYXR0cihcImRhdGEtY29udGVudFwiKXx8KFwiZnVuY3Rpb25cIj09dHlwZW9mIGIuY29udGVudD9iLmNvbnRlbnQuY2FsbChhWzBdKTpiLmNvbnRlbnQpfSxjLnByb3RvdHlwZS5hcnJvdz1mdW5jdGlvbigpe3JldHVybiB0aGlzLiRhcnJvdz10aGlzLiRhcnJvd3x8dGhpcy50aXAoKS5maW5kKFwiLmFycm93XCIpfTt2YXIgZD1hLmZuLnBvcG92ZXI7YS5mbi5wb3BvdmVyPWIsYS5mbi5wb3BvdmVyLkNvbnN0cnVjdG9yPWMsYS5mbi5wb3BvdmVyLm5vQ29uZmxpY3Q9ZnVuY3Rpb24oKXtyZXR1cm4gYS5mbi5wb3BvdmVyPWQsdGhpc319KGpRdWVyeSksK2Z1bmN0aW9uKGEpe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIGIoYyxkKXt0aGlzLiRib2R5PWEoZG9jdW1lbnQuYm9keSksdGhpcy4kc2Nyb2xsRWxlbWVudD1hKGEoYykuaXMoZG9jdW1lbnQuYm9keSk/d2luZG93OmMpLHRoaXMub3B0aW9ucz1hLmV4dGVuZCh7fSxiLkRFRkFVTFRTLGQpLHRoaXMuc2VsZWN0b3I9KHRoaXMub3B0aW9ucy50YXJnZXR8fFwiXCIpK1wiIC5uYXYgbGkgPiBhXCIsdGhpcy5vZmZzZXRzPVtdLHRoaXMudGFyZ2V0cz1bXSx0aGlzLmFjdGl2ZVRhcmdldD1udWxsLHRoaXMuc2Nyb2xsSGVpZ2h0PTAsdGhpcy4kc2Nyb2xsRWxlbWVudC5vbihcInNjcm9sbC5icy5zY3JvbGxzcHlcIixhLnByb3h5KHRoaXMucHJvY2Vzcyx0aGlzKSksdGhpcy5yZWZyZXNoKCksdGhpcy5wcm9jZXNzKCl9ZnVuY3Rpb24gYyhjKXtyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKCl7dmFyIGQ9YSh0aGlzKSxlPWQuZGF0YShcImJzLnNjcm9sbHNweVwiKSxmPVwib2JqZWN0XCI9PXR5cGVvZiBjJiZjO2V8fGQuZGF0YShcImJzLnNjcm9sbHNweVwiLGU9bmV3IGIodGhpcyxmKSksXCJzdHJpbmdcIj09dHlwZW9mIGMmJmVbY10oKX0pfWIuVkVSU0lPTj1cIjMuMy40XCIsYi5ERUZBVUxUUz17b2Zmc2V0OjEwfSxiLnByb3RvdHlwZS5nZXRTY3JvbGxIZWlnaHQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy4kc2Nyb2xsRWxlbWVudFswXS5zY3JvbGxIZWlnaHR8fE1hdGgubWF4KHRoaXMuJGJvZHlbMF0uc2Nyb2xsSGVpZ2h0LGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zY3JvbGxIZWlnaHQpfSxiLnByb3RvdHlwZS5yZWZyZXNoPWZ1bmN0aW9uKCl7dmFyIGI9dGhpcyxjPVwib2Zmc2V0XCIsZD0wO3RoaXMub2Zmc2V0cz1bXSx0aGlzLnRhcmdldHM9W10sdGhpcy5zY3JvbGxIZWlnaHQ9dGhpcy5nZXRTY3JvbGxIZWlnaHQoKSxhLmlzV2luZG93KHRoaXMuJHNjcm9sbEVsZW1lbnRbMF0pfHwoYz1cInBvc2l0aW9uXCIsZD10aGlzLiRzY3JvbGxFbGVtZW50LnNjcm9sbFRvcCgpKSx0aGlzLiRib2R5LmZpbmQodGhpcy5zZWxlY3RvcikubWFwKGZ1bmN0aW9uKCl7dmFyIGI9YSh0aGlzKSxlPWIuZGF0YShcInRhcmdldFwiKXx8Yi5hdHRyKFwiaHJlZlwiKSxmPS9eIy4vLnRlc3QoZSkmJmEoZSk7cmV0dXJuIGYmJmYubGVuZ3RoJiZmLmlzKFwiOnZpc2libGVcIikmJltbZltjXSgpLnRvcCtkLGVdXXx8bnVsbH0pLnNvcnQoZnVuY3Rpb24oYSxiKXtyZXR1cm4gYVswXS1iWzBdfSkuZWFjaChmdW5jdGlvbigpe2Iub2Zmc2V0cy5wdXNoKHRoaXNbMF0pLGIudGFyZ2V0cy5wdXNoKHRoaXNbMV0pfSl9LGIucHJvdG90eXBlLnByb2Nlc3M9ZnVuY3Rpb24oKXt2YXIgYSxiPXRoaXMuJHNjcm9sbEVsZW1lbnQuc2Nyb2xsVG9wKCkrdGhpcy5vcHRpb25zLm9mZnNldCxjPXRoaXMuZ2V0U2Nyb2xsSGVpZ2h0KCksZD10aGlzLm9wdGlvbnMub2Zmc2V0K2MtdGhpcy4kc2Nyb2xsRWxlbWVudC5oZWlnaHQoKSxlPXRoaXMub2Zmc2V0cyxmPXRoaXMudGFyZ2V0cyxnPXRoaXMuYWN0aXZlVGFyZ2V0O2lmKHRoaXMuc2Nyb2xsSGVpZ2h0IT1jJiZ0aGlzLnJlZnJlc2goKSxiPj1kKXJldHVybiBnIT0oYT1mW2YubGVuZ3RoLTFdKSYmdGhpcy5hY3RpdmF0ZShhKTtpZihnJiZiPGVbMF0pcmV0dXJuIHRoaXMuYWN0aXZlVGFyZ2V0PW51bGwsdGhpcy5jbGVhcigpO2ZvcihhPWUubGVuZ3RoO2EtLTspZyE9ZlthXSYmYj49ZVthXSYmKHZvaWQgMD09PWVbYSsxXXx8YjxlW2ErMV0pJiZ0aGlzLmFjdGl2YXRlKGZbYV0pfSxiLnByb3RvdHlwZS5hY3RpdmF0ZT1mdW5jdGlvbihiKXt0aGlzLmFjdGl2ZVRhcmdldD1iLHRoaXMuY2xlYXIoKTt2YXIgYz10aGlzLnNlbGVjdG9yKydbZGF0YS10YXJnZXQ9XCInK2IrJ1wiXSwnK3RoaXMuc2VsZWN0b3IrJ1tocmVmPVwiJytiKydcIl0nLGQ9YShjKS5wYXJlbnRzKFwibGlcIikuYWRkQ2xhc3MoXCJhY3RpdmVcIik7ZC5wYXJlbnQoXCIuZHJvcGRvd24tbWVudVwiKS5sZW5ndGgmJihkPWQuY2xvc2VzdChcImxpLmRyb3Bkb3duXCIpLmFkZENsYXNzKFwiYWN0aXZlXCIpKSxkLnRyaWdnZXIoXCJhY3RpdmF0ZS5icy5zY3JvbGxzcHlcIil9LGIucHJvdG90eXBlLmNsZWFyPWZ1bmN0aW9uKCl7YSh0aGlzLnNlbGVjdG9yKS5wYXJlbnRzVW50aWwodGhpcy5vcHRpb25zLnRhcmdldCxcIi5hY3RpdmVcIikucmVtb3ZlQ2xhc3MoXCJhY3RpdmVcIil9O3ZhciBkPWEuZm4uc2Nyb2xsc3B5O2EuZm4uc2Nyb2xsc3B5PWMsYS5mbi5zY3JvbGxzcHkuQ29uc3RydWN0b3I9YixhLmZuLnNjcm9sbHNweS5ub0NvbmZsaWN0PWZ1bmN0aW9uKCl7cmV0dXJuIGEuZm4uc2Nyb2xsc3B5PWQsdGhpc30sYSh3aW5kb3cpLm9uKFwibG9hZC5icy5zY3JvbGxzcHkuZGF0YS1hcGlcIixmdW5jdGlvbigpe2EoJ1tkYXRhLXNweT1cInNjcm9sbFwiXScpLmVhY2goZnVuY3Rpb24oKXt2YXIgYj1hKHRoaXMpO2MuY2FsbChiLGIuZGF0YSgpKX0pfSl9KGpRdWVyeSksK2Z1bmN0aW9uKGEpe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIGIoYil7cmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbigpe3ZhciBkPWEodGhpcyksZT1kLmRhdGEoXCJicy50YWJcIik7ZXx8ZC5kYXRhKFwiYnMudGFiXCIsZT1uZXcgYyh0aGlzKSksXCJzdHJpbmdcIj09dHlwZW9mIGImJmVbYl0oKX0pfXZhciBjPWZ1bmN0aW9uKGIpe3RoaXMuZWxlbWVudD1hKGIpfTtjLlZFUlNJT049XCIzLjMuNFwiLGMuVFJBTlNJVElPTl9EVVJBVElPTj0xNTAsYy5wcm90b3R5cGUuc2hvdz1mdW5jdGlvbigpe3ZhciBiPXRoaXMuZWxlbWVudCxjPWIuY2xvc2VzdChcInVsOm5vdCguZHJvcGRvd24tbWVudSlcIiksZD1iLmRhdGEoXCJ0YXJnZXRcIik7aWYoZHx8KGQ9Yi5hdHRyKFwiaHJlZlwiKSxkPWQmJmQucmVwbGFjZSgvLiooPz0jW15cXHNdKiQpLyxcIlwiKSksIWIucGFyZW50KFwibGlcIikuaGFzQ2xhc3MoXCJhY3RpdmVcIikpe1xyXG52YXIgZT1jLmZpbmQoXCIuYWN0aXZlOmxhc3QgYVwiKSxmPWEuRXZlbnQoXCJoaWRlLmJzLnRhYlwiLHtyZWxhdGVkVGFyZ2V0OmJbMF19KSxnPWEuRXZlbnQoXCJzaG93LmJzLnRhYlwiLHtyZWxhdGVkVGFyZ2V0OmVbMF19KTtpZihlLnRyaWdnZXIoZiksYi50cmlnZ2VyKGcpLCFnLmlzRGVmYXVsdFByZXZlbnRlZCgpJiYhZi5pc0RlZmF1bHRQcmV2ZW50ZWQoKSl7dmFyIGg9YShkKTt0aGlzLmFjdGl2YXRlKGIuY2xvc2VzdChcImxpXCIpLGMpLHRoaXMuYWN0aXZhdGUoaCxoLnBhcmVudCgpLGZ1bmN0aW9uKCl7ZS50cmlnZ2VyKHt0eXBlOlwiaGlkZGVuLmJzLnRhYlwiLHJlbGF0ZWRUYXJnZXQ6YlswXX0pLGIudHJpZ2dlcih7dHlwZTpcInNob3duLmJzLnRhYlwiLHJlbGF0ZWRUYXJnZXQ6ZVswXX0pfSl9fX0sYy5wcm90b3R5cGUuYWN0aXZhdGU9ZnVuY3Rpb24oYixkLGUpe2Z1bmN0aW9uIGYoKXtnLnJlbW92ZUNsYXNzKFwiYWN0aXZlXCIpLmZpbmQoXCI+IC5kcm9wZG93bi1tZW51ID4gLmFjdGl2ZVwiKS5yZW1vdmVDbGFzcyhcImFjdGl2ZVwiKS5lbmQoKS5maW5kKCdbZGF0YS10b2dnbGU9XCJ0YWJcIl0nKS5hdHRyKFwiYXJpYS1leHBhbmRlZFwiLCExKSxiLmFkZENsYXNzKFwiYWN0aXZlXCIpLmZpbmQoJ1tkYXRhLXRvZ2dsZT1cInRhYlwiXScpLmF0dHIoXCJhcmlhLWV4cGFuZGVkXCIsITApLGg/KGJbMF0ub2Zmc2V0V2lkdGgsYi5hZGRDbGFzcyhcImluXCIpKTpiLnJlbW92ZUNsYXNzKFwiZmFkZVwiKSxiLnBhcmVudChcIi5kcm9wZG93bi1tZW51XCIpLmxlbmd0aCYmYi5jbG9zZXN0KFwibGkuZHJvcGRvd25cIikuYWRkQ2xhc3MoXCJhY3RpdmVcIikuZW5kKCkuZmluZCgnW2RhdGEtdG9nZ2xlPVwidGFiXCJdJykuYXR0cihcImFyaWEtZXhwYW5kZWRcIiwhMCksZSYmZSgpfXZhciBnPWQuZmluZChcIj4gLmFjdGl2ZVwiKSxoPWUmJmEuc3VwcG9ydC50cmFuc2l0aW9uJiYoZy5sZW5ndGgmJmcuaGFzQ2xhc3MoXCJmYWRlXCIpfHwhIWQuZmluZChcIj4gLmZhZGVcIikubGVuZ3RoKTtnLmxlbmd0aCYmaD9nLm9uZShcImJzVHJhbnNpdGlvbkVuZFwiLGYpLmVtdWxhdGVUcmFuc2l0aW9uRW5kKGMuVFJBTlNJVElPTl9EVVJBVElPTik6ZigpLGcucmVtb3ZlQ2xhc3MoXCJpblwiKX07dmFyIGQ9YS5mbi50YWI7YS5mbi50YWI9YixhLmZuLnRhYi5Db25zdHJ1Y3Rvcj1jLGEuZm4udGFiLm5vQ29uZmxpY3Q9ZnVuY3Rpb24oKXtyZXR1cm4gYS5mbi50YWI9ZCx0aGlzfTt2YXIgZT1mdW5jdGlvbihjKXtjLnByZXZlbnREZWZhdWx0KCksYi5jYWxsKGEodGhpcyksXCJzaG93XCIpfTthKGRvY3VtZW50KS5vbihcImNsaWNrLmJzLnRhYi5kYXRhLWFwaVwiLCdbZGF0YS10b2dnbGU9XCJ0YWJcIl0nLGUpLm9uKFwiY2xpY2suYnMudGFiLmRhdGEtYXBpXCIsJ1tkYXRhLXRvZ2dsZT1cInBpbGxcIl0nLGUpfShqUXVlcnkpLCtmdW5jdGlvbihhKXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiBiKGIpe3JldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oKXt2YXIgZD1hKHRoaXMpLGU9ZC5kYXRhKFwiYnMuYWZmaXhcIiksZj1cIm9iamVjdFwiPT10eXBlb2YgYiYmYjtlfHxkLmRhdGEoXCJicy5hZmZpeFwiLGU9bmV3IGModGhpcyxmKSksXCJzdHJpbmdcIj09dHlwZW9mIGImJmVbYl0oKX0pfXZhciBjPWZ1bmN0aW9uKGIsZCl7dGhpcy5vcHRpb25zPWEuZXh0ZW5kKHt9LGMuREVGQVVMVFMsZCksdGhpcy4kdGFyZ2V0PWEodGhpcy5vcHRpb25zLnRhcmdldCkub24oXCJzY3JvbGwuYnMuYWZmaXguZGF0YS1hcGlcIixhLnByb3h5KHRoaXMuY2hlY2tQb3NpdGlvbix0aGlzKSkub24oXCJjbGljay5icy5hZmZpeC5kYXRhLWFwaVwiLGEucHJveHkodGhpcy5jaGVja1Bvc2l0aW9uV2l0aEV2ZW50TG9vcCx0aGlzKSksdGhpcy4kZWxlbWVudD1hKGIpLHRoaXMuYWZmaXhlZD1udWxsLHRoaXMudW5waW49bnVsbCx0aGlzLnBpbm5lZE9mZnNldD1udWxsLHRoaXMuY2hlY2tQb3NpdGlvbigpfTtjLlZFUlNJT049XCIzLjMuNFwiLGMuUkVTRVQ9XCJhZmZpeCBhZmZpeC10b3AgYWZmaXgtYm90dG9tXCIsYy5ERUZBVUxUUz17b2Zmc2V0OjAsdGFyZ2V0OndpbmRvd30sYy5wcm90b3R5cGUuZ2V0U3RhdGU9ZnVuY3Rpb24oYSxiLGMsZCl7dmFyIGU9dGhpcy4kdGFyZ2V0LnNjcm9sbFRvcCgpLGY9dGhpcy4kZWxlbWVudC5vZmZzZXQoKSxnPXRoaXMuJHRhcmdldC5oZWlnaHQoKTtpZihudWxsIT1jJiZcInRvcFwiPT10aGlzLmFmZml4ZWQpcmV0dXJuIGM+ZT9cInRvcFwiOiExO2lmKFwiYm90dG9tXCI9PXRoaXMuYWZmaXhlZClyZXR1cm4gbnVsbCE9Yz9lK3RoaXMudW5waW48PWYudG9wPyExOlwiYm90dG9tXCI6YS1kPj1lK2c/ITE6XCJib3R0b21cIjt2YXIgaD1udWxsPT10aGlzLmFmZml4ZWQsaT1oP2U6Zi50b3Asaj1oP2c6YjtyZXR1cm4gbnVsbCE9YyYmYz49ZT9cInRvcFwiOm51bGwhPWQmJmkraj49YS1kP1wiYm90dG9tXCI6ITF9LGMucHJvdG90eXBlLmdldFBpbm5lZE9mZnNldD1mdW5jdGlvbigpe2lmKHRoaXMucGlubmVkT2Zmc2V0KXJldHVybiB0aGlzLnBpbm5lZE9mZnNldDt0aGlzLiRlbGVtZW50LnJlbW92ZUNsYXNzKGMuUkVTRVQpLmFkZENsYXNzKFwiYWZmaXhcIik7dmFyIGE9dGhpcy4kdGFyZ2V0LnNjcm9sbFRvcCgpLGI9dGhpcy4kZWxlbWVudC5vZmZzZXQoKTtyZXR1cm4gdGhpcy5waW5uZWRPZmZzZXQ9Yi50b3AtYX0sYy5wcm90b3R5cGUuY2hlY2tQb3NpdGlvbldpdGhFdmVudExvb3A9ZnVuY3Rpb24oKXtzZXRUaW1lb3V0KGEucHJveHkodGhpcy5jaGVja1Bvc2l0aW9uLHRoaXMpLDEpfSxjLnByb3RvdHlwZS5jaGVja1Bvc2l0aW9uPWZ1bmN0aW9uKCl7aWYodGhpcy4kZWxlbWVudC5pcyhcIjp2aXNpYmxlXCIpKXt2YXIgYj10aGlzLiRlbGVtZW50LmhlaWdodCgpLGQ9dGhpcy5vcHRpb25zLm9mZnNldCxlPWQudG9wLGY9ZC5ib3R0b20sZz1hKGRvY3VtZW50LmJvZHkpLmhlaWdodCgpO1wib2JqZWN0XCIhPXR5cGVvZiBkJiYoZj1lPWQpLFwiZnVuY3Rpb25cIj09dHlwZW9mIGUmJihlPWQudG9wKHRoaXMuJGVsZW1lbnQpKSxcImZ1bmN0aW9uXCI9PXR5cGVvZiBmJiYoZj1kLmJvdHRvbSh0aGlzLiRlbGVtZW50KSk7dmFyIGg9dGhpcy5nZXRTdGF0ZShnLGIsZSxmKTtpZih0aGlzLmFmZml4ZWQhPWgpe251bGwhPXRoaXMudW5waW4mJnRoaXMuJGVsZW1lbnQuY3NzKFwidG9wXCIsXCJcIik7dmFyIGk9XCJhZmZpeFwiKyhoP1wiLVwiK2g6XCJcIiksaj1hLkV2ZW50KGkrXCIuYnMuYWZmaXhcIik7aWYodGhpcy4kZWxlbWVudC50cmlnZ2VyKGopLGouaXNEZWZhdWx0UHJldmVudGVkKCkpcmV0dXJuO3RoaXMuYWZmaXhlZD1oLHRoaXMudW5waW49XCJib3R0b21cIj09aD90aGlzLmdldFBpbm5lZE9mZnNldCgpOm51bGwsdGhpcy4kZWxlbWVudC5yZW1vdmVDbGFzcyhjLlJFU0VUKS5hZGRDbGFzcyhpKS50cmlnZ2VyKGkucmVwbGFjZShcImFmZml4XCIsXCJhZmZpeGVkXCIpK1wiLmJzLmFmZml4XCIpfVwiYm90dG9tXCI9PWgmJnRoaXMuJGVsZW1lbnQub2Zmc2V0KHt0b3A6Zy1iLWZ9KX19O3ZhciBkPWEuZm4uYWZmaXg7YS5mbi5hZmZpeD1iLGEuZm4uYWZmaXguQ29uc3RydWN0b3I9YyxhLmZuLmFmZml4Lm5vQ29uZmxpY3Q9ZnVuY3Rpb24oKXtyZXR1cm4gYS5mbi5hZmZpeD1kLHRoaXN9LGEod2luZG93KS5vbihcImxvYWRcIixmdW5jdGlvbigpe2EoJ1tkYXRhLXNweT1cImFmZml4XCJdJykuZWFjaChmdW5jdGlvbigpe3ZhciBjPWEodGhpcyksZD1jLmRhdGEoKTtkLm9mZnNldD1kLm9mZnNldHx8e30sbnVsbCE9ZC5vZmZzZXRCb3R0b20mJihkLm9mZnNldC5ib3R0b209ZC5vZmZzZXRCb3R0b20pLG51bGwhPWQub2Zmc2V0VG9wJiYoZC5vZmZzZXQudG9wPWQub2Zmc2V0VG9wKSxiLmNhbGwoYyxkKX0pfSl9KGpRdWVyeSk7IiwiLy8gQ29kZU1pcnJvciwgY29weXJpZ2h0IChjKSBieSBNYXJpam4gSGF2ZXJiZWtlIGFuZCBvdGhlcnNcclxuLy8gRGlzdHJpYnV0ZWQgdW5kZXIgYW4gTUlUIGxpY2Vuc2U6IGh0dHA6Ly9jb2RlbWlycm9yLm5ldC9MSUNFTlNFXHJcblxyXG4vLyBUT0RPIGFjdHVhbGx5IHJlY29nbml6ZSBzeW50YXggb2YgVHlwZVNjcmlwdCBjb25zdHJ1Y3RzXHJcblxyXG4oZnVuY3Rpb24obW9kKSB7XHJcbiAgaWYgKHR5cGVvZiBleHBvcnRzID09IFwib2JqZWN0XCIgJiYgdHlwZW9mIG1vZHVsZSA9PSBcIm9iamVjdFwiKSAvLyBDb21tb25KU1xyXG4gICAgbW9kKHJlcXVpcmUoXCIuLi8uLi9saWIvY29kZW1pcnJvclwiKSk7XHJcbiAgZWxzZSBpZiAodHlwZW9mIGRlZmluZSA9PSBcImZ1bmN0aW9uXCIgJiYgZGVmaW5lLmFtZCkgLy8gQU1EXHJcbiAgICBkZWZpbmUoW1wiLi4vLi4vbGliL2NvZGVtaXJyb3JcIl0sIG1vZCk7XHJcbiAgZWxzZSAvLyBQbGFpbiBicm93c2VyIGVudlxyXG4gICAgbW9kKENvZGVNaXJyb3IpO1xyXG59KShmdW5jdGlvbihDb2RlTWlycm9yKSB7XHJcblwidXNlIHN0cmljdFwiO1xyXG5cclxuQ29kZU1pcnJvci5kZWZpbmVNb2RlKFwiamF2YXNjcmlwdFwiLCBmdW5jdGlvbihjb25maWcsIHBhcnNlckNvbmZpZykge1xyXG4gIHZhciBpbmRlbnRVbml0ID0gY29uZmlnLmluZGVudFVuaXQ7XHJcbiAgdmFyIHN0YXRlbWVudEluZGVudCA9IHBhcnNlckNvbmZpZy5zdGF0ZW1lbnRJbmRlbnQ7XHJcbiAgdmFyIGpzb25sZE1vZGUgPSBwYXJzZXJDb25maWcuanNvbmxkO1xyXG4gIHZhciBqc29uTW9kZSA9IHBhcnNlckNvbmZpZy5qc29uIHx8IGpzb25sZE1vZGU7XHJcbiAgdmFyIGlzVFMgPSBwYXJzZXJDb25maWcudHlwZXNjcmlwdDtcclxuICB2YXIgd29yZFJFID0gcGFyc2VyQ29uZmlnLndvcmRDaGFyYWN0ZXJzIHx8IC9bXFx3JF0vO1xyXG5cclxuICAvLyBUb2tlbml6ZXJcclxuXHJcbiAgdmFyIGtleXdvcmRzID0gZnVuY3Rpb24oKXtcclxuICAgIGZ1bmN0aW9uIGt3KHR5cGUpIHtyZXR1cm4ge3R5cGU6IHR5cGUsIHN0eWxlOiBcImtleXdvcmRcIn07fVxyXG4gICAgdmFyIEEgPSBrdyhcImtleXdvcmQgYVwiKSwgQiA9IGt3KFwia2V5d29yZCBiXCIpLCBDID0ga3coXCJrZXl3b3JkIGNcIik7XHJcbiAgICB2YXIgb3BlcmF0b3IgPSBrdyhcIm9wZXJhdG9yXCIpLCBhdG9tID0ge3R5cGU6IFwiYXRvbVwiLCBzdHlsZTogXCJhdG9tXCJ9O1xyXG5cclxuICAgIHZhciBqc0tleXdvcmRzID0ge1xyXG4gICAgICBcImlmXCI6IGt3KFwiaWZcIiksIFwid2hpbGVcIjogQSwgXCJ3aXRoXCI6IEEsIFwiZWxzZVwiOiBCLCBcImRvXCI6IEIsIFwidHJ5XCI6IEIsIFwiZmluYWxseVwiOiBCLFxyXG4gICAgICBcInJldHVyblwiOiBDLCBcImJyZWFrXCI6IEMsIFwiY29udGludWVcIjogQywgXCJuZXdcIjogQywgXCJkZWxldGVcIjogQywgXCJ0aHJvd1wiOiBDLCBcImRlYnVnZ2VyXCI6IEMsXHJcbiAgICAgIFwidmFyXCI6IGt3KFwidmFyXCIpLCBcImNvbnN0XCI6IGt3KFwidmFyXCIpLCBcImxldFwiOiBrdyhcInZhclwiKSxcclxuICAgICAgXCJmdW5jdGlvblwiOiBrdyhcImZ1bmN0aW9uXCIpLCBcImNhdGNoXCI6IGt3KFwiY2F0Y2hcIiksXHJcbiAgICAgIFwiZm9yXCI6IGt3KFwiZm9yXCIpLCBcInN3aXRjaFwiOiBrdyhcInN3aXRjaFwiKSwgXCJjYXNlXCI6IGt3KFwiY2FzZVwiKSwgXCJkZWZhdWx0XCI6IGt3KFwiZGVmYXVsdFwiKSxcclxuICAgICAgXCJpblwiOiBvcGVyYXRvciwgXCJ0eXBlb2ZcIjogb3BlcmF0b3IsIFwiaW5zdGFuY2VvZlwiOiBvcGVyYXRvcixcclxuICAgICAgXCJ0cnVlXCI6IGF0b20sIFwiZmFsc2VcIjogYXRvbSwgXCJudWxsXCI6IGF0b20sIFwidW5kZWZpbmVkXCI6IGF0b20sIFwiTmFOXCI6IGF0b20sIFwiSW5maW5pdHlcIjogYXRvbSxcclxuICAgICAgXCJ0aGlzXCI6IGt3KFwidGhpc1wiKSwgXCJtb2R1bGVcIjoga3coXCJtb2R1bGVcIiksIFwiY2xhc3NcIjoga3coXCJjbGFzc1wiKSwgXCJzdXBlclwiOiBrdyhcImF0b21cIiksXHJcbiAgICAgIFwieWllbGRcIjogQywgXCJleHBvcnRcIjoga3coXCJleHBvcnRcIiksIFwiaW1wb3J0XCI6IGt3KFwiaW1wb3J0XCIpLCBcImV4dGVuZHNcIjogQ1xyXG4gICAgfTtcclxuXHJcbiAgICAvLyBFeHRlbmQgdGhlICdub3JtYWwnIGtleXdvcmRzIHdpdGggdGhlIFR5cGVTY3JpcHQgbGFuZ3VhZ2UgZXh0ZW5zaW9uc1xyXG4gICAgaWYgKGlzVFMpIHtcclxuICAgICAgdmFyIHR5cGUgPSB7dHlwZTogXCJ2YXJpYWJsZVwiLCBzdHlsZTogXCJ2YXJpYWJsZS0zXCJ9O1xyXG4gICAgICB2YXIgdHNLZXl3b3JkcyA9IHtcclxuICAgICAgICAvLyBvYmplY3QtbGlrZSB0aGluZ3NcclxuICAgICAgICBcImludGVyZmFjZVwiOiBrdyhcImludGVyZmFjZVwiKSxcclxuICAgICAgICBcImV4dGVuZHNcIjoga3coXCJleHRlbmRzXCIpLFxyXG4gICAgICAgIFwiY29uc3RydWN0b3JcIjoga3coXCJjb25zdHJ1Y3RvclwiKSxcclxuXHJcbiAgICAgICAgLy8gc2NvcGUgbW9kaWZpZXJzXHJcbiAgICAgICAgXCJwdWJsaWNcIjoga3coXCJwdWJsaWNcIiksXHJcbiAgICAgICAgXCJwcml2YXRlXCI6IGt3KFwicHJpdmF0ZVwiKSxcclxuICAgICAgICBcInByb3RlY3RlZFwiOiBrdyhcInByb3RlY3RlZFwiKSxcclxuICAgICAgICBcInN0YXRpY1wiOiBrdyhcInN0YXRpY1wiKSxcclxuXHJcbiAgICAgICAgLy8gdHlwZXNcclxuICAgICAgICBcInN0cmluZ1wiOiB0eXBlLCBcIm51bWJlclwiOiB0eXBlLCBcImJvb2xcIjogdHlwZSwgXCJhbnlcIjogdHlwZVxyXG4gICAgICB9O1xyXG5cclxuICAgICAgZm9yICh2YXIgYXR0ciBpbiB0c0tleXdvcmRzKSB7XHJcbiAgICAgICAganNLZXl3b3Jkc1thdHRyXSA9IHRzS2V5d29yZHNbYXR0cl07XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4ganNLZXl3b3JkcztcclxuICB9KCk7XHJcblxyXG4gIHZhciBpc09wZXJhdG9yQ2hhciA9IC9bK1xcLSomJT08PiE/fH5eXS87XHJcbiAgdmFyIGlzSnNvbmxkS2V5d29yZCA9IC9eQChjb250ZXh0fGlkfHZhbHVlfGxhbmd1YWdlfHR5cGV8Y29udGFpbmVyfGxpc3R8c2V0fHJldmVyc2V8aW5kZXh8YmFzZXx2b2NhYnxncmFwaClcIi87XHJcblxyXG4gIGZ1bmN0aW9uIHJlYWRSZWdleHAoc3RyZWFtKSB7XHJcbiAgICB2YXIgZXNjYXBlZCA9IGZhbHNlLCBuZXh0LCBpblNldCA9IGZhbHNlO1xyXG4gICAgd2hpbGUgKChuZXh0ID0gc3RyZWFtLm5leHQoKSkgIT0gbnVsbCkge1xyXG4gICAgICBpZiAoIWVzY2FwZWQpIHtcclxuICAgICAgICBpZiAobmV4dCA9PSBcIi9cIiAmJiAhaW5TZXQpIHJldHVybjtcclxuICAgICAgICBpZiAobmV4dCA9PSBcIltcIikgaW5TZXQgPSB0cnVlO1xyXG4gICAgICAgIGVsc2UgaWYgKGluU2V0ICYmIG5leHQgPT0gXCJdXCIpIGluU2V0ID0gZmFsc2U7XHJcbiAgICAgIH1cclxuICAgICAgZXNjYXBlZCA9ICFlc2NhcGVkICYmIG5leHQgPT0gXCJcXFxcXCI7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvLyBVc2VkIGFzIHNjcmF0Y2ggdmFyaWFibGVzIHRvIGNvbW11bmljYXRlIG11bHRpcGxlIHZhbHVlcyB3aXRob3V0XHJcbiAgLy8gY29uc2luZyB1cCB0b25zIG9mIG9iamVjdHMuXHJcbiAgdmFyIHR5cGUsIGNvbnRlbnQ7XHJcbiAgZnVuY3Rpb24gcmV0KHRwLCBzdHlsZSwgY29udCkge1xyXG4gICAgdHlwZSA9IHRwOyBjb250ZW50ID0gY29udDtcclxuICAgIHJldHVybiBzdHlsZTtcclxuICB9XHJcbiAgZnVuY3Rpb24gdG9rZW5CYXNlKHN0cmVhbSwgc3RhdGUpIHtcclxuICAgIHZhciBjaCA9IHN0cmVhbS5uZXh0KCk7XHJcbiAgICBpZiAoY2ggPT0gJ1wiJyB8fCBjaCA9PSBcIidcIikge1xyXG4gICAgICBzdGF0ZS50b2tlbml6ZSA9IHRva2VuU3RyaW5nKGNoKTtcclxuICAgICAgcmV0dXJuIHN0YXRlLnRva2VuaXplKHN0cmVhbSwgc3RhdGUpO1xyXG4gICAgfSBlbHNlIGlmIChjaCA9PSBcIi5cIiAmJiBzdHJlYW0ubWF0Y2goL15cXGQrKD86W2VFXVsrXFwtXT9cXGQrKT8vKSkge1xyXG4gICAgICByZXR1cm4gcmV0KFwibnVtYmVyXCIsIFwibnVtYmVyXCIpO1xyXG4gICAgfSBlbHNlIGlmIChjaCA9PSBcIi5cIiAmJiBzdHJlYW0ubWF0Y2goXCIuLlwiKSkge1xyXG4gICAgICByZXR1cm4gcmV0KFwic3ByZWFkXCIsIFwibWV0YVwiKTtcclxuICAgIH0gZWxzZSBpZiAoL1tcXFtcXF17fVxcKFxcKSw7XFw6XFwuXS8udGVzdChjaCkpIHtcclxuICAgICAgcmV0dXJuIHJldChjaCk7XHJcbiAgICB9IGVsc2UgaWYgKGNoID09IFwiPVwiICYmIHN0cmVhbS5lYXQoXCI+XCIpKSB7XHJcbiAgICAgIHJldHVybiByZXQoXCI9PlwiLCBcIm9wZXJhdG9yXCIpO1xyXG4gICAgfSBlbHNlIGlmIChjaCA9PSBcIjBcIiAmJiBzdHJlYW0uZWF0KC94L2kpKSB7XHJcbiAgICAgIHN0cmVhbS5lYXRXaGlsZSgvW1xcZGEtZl0vaSk7XHJcbiAgICAgIHJldHVybiByZXQoXCJudW1iZXJcIiwgXCJudW1iZXJcIik7XHJcbiAgICB9IGVsc2UgaWYgKC9cXGQvLnRlc3QoY2gpKSB7XHJcbiAgICAgIHN0cmVhbS5tYXRjaCgvXlxcZCooPzpcXC5cXGQqKT8oPzpbZUVdWytcXC1dP1xcZCspPy8pO1xyXG4gICAgICByZXR1cm4gcmV0KFwibnVtYmVyXCIsIFwibnVtYmVyXCIpO1xyXG4gICAgfSBlbHNlIGlmIChjaCA9PSBcIi9cIikge1xyXG4gICAgICBpZiAoc3RyZWFtLmVhdChcIipcIikpIHtcclxuICAgICAgICBzdGF0ZS50b2tlbml6ZSA9IHRva2VuQ29tbWVudDtcclxuICAgICAgICByZXR1cm4gdG9rZW5Db21tZW50KHN0cmVhbSwgc3RhdGUpO1xyXG4gICAgICB9IGVsc2UgaWYgKHN0cmVhbS5lYXQoXCIvXCIpKSB7XHJcbiAgICAgICAgc3RyZWFtLnNraXBUb0VuZCgpO1xyXG4gICAgICAgIHJldHVybiByZXQoXCJjb21tZW50XCIsIFwiY29tbWVudFwiKTtcclxuICAgICAgfSBlbHNlIGlmIChzdGF0ZS5sYXN0VHlwZSA9PSBcIm9wZXJhdG9yXCIgfHwgc3RhdGUubGFzdFR5cGUgPT0gXCJrZXl3b3JkIGNcIiB8fFxyXG4gICAgICAgICAgICAgICBzdGF0ZS5sYXN0VHlwZSA9PSBcInNvZlwiIHx8IC9eW1xcW3t9XFwoLDs6XSQvLnRlc3Qoc3RhdGUubGFzdFR5cGUpKSB7XHJcbiAgICAgICAgcmVhZFJlZ2V4cChzdHJlYW0pO1xyXG4gICAgICAgIHN0cmVhbS5lYXRXaGlsZSgvW2dpbXldLyk7IC8vICd5JyBpcyBcInN0aWNreVwiIG9wdGlvbiBpbiBNb3ppbGxhXHJcbiAgICAgICAgcmV0dXJuIHJldChcInJlZ2V4cFwiLCBcInN0cmluZy0yXCIpO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIHN0cmVhbS5lYXRXaGlsZShpc09wZXJhdG9yQ2hhcik7XHJcbiAgICAgICAgcmV0dXJuIHJldChcIm9wZXJhdG9yXCIsIFwib3BlcmF0b3JcIiwgc3RyZWFtLmN1cnJlbnQoKSk7XHJcbiAgICAgIH1cclxuICAgIH0gZWxzZSBpZiAoY2ggPT0gXCJgXCIpIHtcclxuICAgICAgc3RhdGUudG9rZW5pemUgPSB0b2tlblF1YXNpO1xyXG4gICAgICByZXR1cm4gdG9rZW5RdWFzaShzdHJlYW0sIHN0YXRlKTtcclxuICAgIH0gZWxzZSBpZiAoY2ggPT0gXCIjXCIpIHtcclxuICAgICAgc3RyZWFtLnNraXBUb0VuZCgpO1xyXG4gICAgICByZXR1cm4gcmV0KFwiZXJyb3JcIiwgXCJlcnJvclwiKTtcclxuICAgIH0gZWxzZSBpZiAoaXNPcGVyYXRvckNoYXIudGVzdChjaCkpIHtcclxuICAgICAgc3RyZWFtLmVhdFdoaWxlKGlzT3BlcmF0b3JDaGFyKTtcclxuICAgICAgcmV0dXJuIHJldChcIm9wZXJhdG9yXCIsIFwib3BlcmF0b3JcIiwgc3RyZWFtLmN1cnJlbnQoKSk7XHJcbiAgICB9IGVsc2UgaWYgKHdvcmRSRS50ZXN0KGNoKSkge1xyXG4gICAgICBzdHJlYW0uZWF0V2hpbGUod29yZFJFKTtcclxuICAgICAgdmFyIHdvcmQgPSBzdHJlYW0uY3VycmVudCgpLCBrbm93biA9IGtleXdvcmRzLnByb3BlcnR5SXNFbnVtZXJhYmxlKHdvcmQpICYmIGtleXdvcmRzW3dvcmRdO1xyXG4gICAgICByZXR1cm4gKGtub3duICYmIHN0YXRlLmxhc3RUeXBlICE9IFwiLlwiKSA/IHJldChrbm93bi50eXBlLCBrbm93bi5zdHlsZSwgd29yZCkgOlxyXG4gICAgICAgICAgICAgICAgICAgICByZXQoXCJ2YXJpYWJsZVwiLCBcInZhcmlhYmxlXCIsIHdvcmQpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgZnVuY3Rpb24gdG9rZW5TdHJpbmcocXVvdGUpIHtcclxuICAgIHJldHVybiBmdW5jdGlvbihzdHJlYW0sIHN0YXRlKSB7XHJcbiAgICAgIHZhciBlc2NhcGVkID0gZmFsc2UsIG5leHQ7XHJcbiAgICAgIGlmIChqc29ubGRNb2RlICYmIHN0cmVhbS5wZWVrKCkgPT0gXCJAXCIgJiYgc3RyZWFtLm1hdGNoKGlzSnNvbmxkS2V5d29yZCkpe1xyXG4gICAgICAgIHN0YXRlLnRva2VuaXplID0gdG9rZW5CYXNlO1xyXG4gICAgICAgIHJldHVybiByZXQoXCJqc29ubGQta2V5d29yZFwiLCBcIm1ldGFcIik7XHJcbiAgICAgIH1cclxuICAgICAgd2hpbGUgKChuZXh0ID0gc3RyZWFtLm5leHQoKSkgIT0gbnVsbCkge1xyXG4gICAgICAgIGlmIChuZXh0ID09IHF1b3RlICYmICFlc2NhcGVkKSBicmVhaztcclxuICAgICAgICBlc2NhcGVkID0gIWVzY2FwZWQgJiYgbmV4dCA9PSBcIlxcXFxcIjtcclxuICAgICAgfVxyXG4gICAgICBpZiAoIWVzY2FwZWQpIHN0YXRlLnRva2VuaXplID0gdG9rZW5CYXNlO1xyXG4gICAgICByZXR1cm4gcmV0KFwic3RyaW5nXCIsIFwic3RyaW5nXCIpO1xyXG4gICAgfTtcclxuICB9XHJcblxyXG4gIGZ1bmN0aW9uIHRva2VuQ29tbWVudChzdHJlYW0sIHN0YXRlKSB7XHJcbiAgICB2YXIgbWF5YmVFbmQgPSBmYWxzZSwgY2g7XHJcbiAgICB3aGlsZSAoY2ggPSBzdHJlYW0ubmV4dCgpKSB7XHJcbiAgICAgIGlmIChjaCA9PSBcIi9cIiAmJiBtYXliZUVuZCkge1xyXG4gICAgICAgIHN0YXRlLnRva2VuaXplID0gdG9rZW5CYXNlO1xyXG4gICAgICAgIGJyZWFrO1xyXG4gICAgICB9XHJcbiAgICAgIG1heWJlRW5kID0gKGNoID09IFwiKlwiKTtcclxuICAgIH1cclxuICAgIHJldHVybiByZXQoXCJjb21tZW50XCIsIFwiY29tbWVudFwiKTtcclxuICB9XHJcblxyXG4gIGZ1bmN0aW9uIHRva2VuUXVhc2koc3RyZWFtLCBzdGF0ZSkge1xyXG4gICAgdmFyIGVzY2FwZWQgPSBmYWxzZSwgbmV4dDtcclxuICAgIHdoaWxlICgobmV4dCA9IHN0cmVhbS5uZXh0KCkpICE9IG51bGwpIHtcclxuICAgICAgaWYgKCFlc2NhcGVkICYmIChuZXh0ID09IFwiYFwiIHx8IG5leHQgPT0gXCIkXCIgJiYgc3RyZWFtLmVhdChcIntcIikpKSB7XHJcbiAgICAgICAgc3RhdGUudG9rZW5pemUgPSB0b2tlbkJhc2U7XHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICAgIH1cclxuICAgICAgZXNjYXBlZCA9ICFlc2NhcGVkICYmIG5leHQgPT0gXCJcXFxcXCI7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gcmV0KFwicXVhc2lcIiwgXCJzdHJpbmctMlwiLCBzdHJlYW0uY3VycmVudCgpKTtcclxuICB9XHJcblxyXG4gIHZhciBicmFja2V0cyA9IFwiKFt7fV0pXCI7XHJcbiAgLy8gVGhpcyBpcyBhIGNydWRlIGxvb2thaGVhZCB0cmljayB0byB0cnkgYW5kIG5vdGljZSB0aGF0IHdlJ3JlXHJcbiAgLy8gcGFyc2luZyB0aGUgYXJndW1lbnQgcGF0dGVybnMgZm9yIGEgZmF0LWFycm93IGZ1bmN0aW9uIGJlZm9yZSB3ZVxyXG4gIC8vIGFjdHVhbGx5IGhpdCB0aGUgYXJyb3cgdG9rZW4uIEl0IG9ubHkgd29ya3MgaWYgdGhlIGFycm93IGlzIG9uXHJcbiAgLy8gdGhlIHNhbWUgbGluZSBhcyB0aGUgYXJndW1lbnRzIGFuZCB0aGVyZSdzIG5vIHN0cmFuZ2Ugbm9pc2VcclxuICAvLyAoY29tbWVudHMpIGluIGJldHdlZW4uIEZhbGxiYWNrIGlzIHRvIG9ubHkgbm90aWNlIHdoZW4gd2UgaGl0IHRoZVxyXG4gIC8vIGFycm93LCBhbmQgbm90IGRlY2xhcmUgdGhlIGFyZ3VtZW50cyBhcyBsb2NhbHMgZm9yIHRoZSBhcnJvd1xyXG4gIC8vIGJvZHkuXHJcbiAgZnVuY3Rpb24gZmluZEZhdEFycm93KHN0cmVhbSwgc3RhdGUpIHtcclxuICAgIGlmIChzdGF0ZS5mYXRBcnJvd0F0KSBzdGF0ZS5mYXRBcnJvd0F0ID0gbnVsbDtcclxuICAgIHZhciBhcnJvdyA9IHN0cmVhbS5zdHJpbmcuaW5kZXhPZihcIj0+XCIsIHN0cmVhbS5zdGFydCk7XHJcbiAgICBpZiAoYXJyb3cgPCAwKSByZXR1cm47XHJcblxyXG4gICAgdmFyIGRlcHRoID0gMCwgc2F3U29tZXRoaW5nID0gZmFsc2U7XHJcbiAgICBmb3IgKHZhciBwb3MgPSBhcnJvdyAtIDE7IHBvcyA+PSAwOyAtLXBvcykge1xyXG4gICAgICB2YXIgY2ggPSBzdHJlYW0uc3RyaW5nLmNoYXJBdChwb3MpO1xyXG4gICAgICB2YXIgYnJhY2tldCA9IGJyYWNrZXRzLmluZGV4T2YoY2gpO1xyXG4gICAgICBpZiAoYnJhY2tldCA+PSAwICYmIGJyYWNrZXQgPCAzKSB7XHJcbiAgICAgICAgaWYgKCFkZXB0aCkgeyArK3BvczsgYnJlYWs7IH1cclxuICAgICAgICBpZiAoLS1kZXB0aCA9PSAwKSBicmVhaztcclxuICAgICAgfSBlbHNlIGlmIChicmFja2V0ID49IDMgJiYgYnJhY2tldCA8IDYpIHtcclxuICAgICAgICArK2RlcHRoO1xyXG4gICAgICB9IGVsc2UgaWYgKHdvcmRSRS50ZXN0KGNoKSkge1xyXG4gICAgICAgIHNhd1NvbWV0aGluZyA9IHRydWU7XHJcbiAgICAgIH0gZWxzZSBpZiAoc2F3U29tZXRoaW5nICYmICFkZXB0aCkge1xyXG4gICAgICAgICsrcG9zO1xyXG4gICAgICAgIGJyZWFrO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICBpZiAoc2F3U29tZXRoaW5nICYmICFkZXB0aCkgc3RhdGUuZmF0QXJyb3dBdCA9IHBvcztcclxuICB9XHJcblxyXG4gIC8vIFBhcnNlclxyXG5cclxuICB2YXIgYXRvbWljVHlwZXMgPSB7XCJhdG9tXCI6IHRydWUsIFwibnVtYmVyXCI6IHRydWUsIFwidmFyaWFibGVcIjogdHJ1ZSwgXCJzdHJpbmdcIjogdHJ1ZSwgXCJyZWdleHBcIjogdHJ1ZSwgXCJ0aGlzXCI6IHRydWUsIFwianNvbmxkLWtleXdvcmRcIjogdHJ1ZX07XHJcblxyXG4gIGZ1bmN0aW9uIEpTTGV4aWNhbChpbmRlbnRlZCwgY29sdW1uLCB0eXBlLCBhbGlnbiwgcHJldiwgaW5mbykge1xyXG4gICAgdGhpcy5pbmRlbnRlZCA9IGluZGVudGVkO1xyXG4gICAgdGhpcy5jb2x1bW4gPSBjb2x1bW47XHJcbiAgICB0aGlzLnR5cGUgPSB0eXBlO1xyXG4gICAgdGhpcy5wcmV2ID0gcHJldjtcclxuICAgIHRoaXMuaW5mbyA9IGluZm87XHJcbiAgICBpZiAoYWxpZ24gIT0gbnVsbCkgdGhpcy5hbGlnbiA9IGFsaWduO1xyXG4gIH1cclxuXHJcbiAgZnVuY3Rpb24gaW5TY29wZShzdGF0ZSwgdmFybmFtZSkge1xyXG4gICAgZm9yICh2YXIgdiA9IHN0YXRlLmxvY2FsVmFyczsgdjsgdiA9IHYubmV4dClcclxuICAgICAgaWYgKHYubmFtZSA9PSB2YXJuYW1lKSByZXR1cm4gdHJ1ZTtcclxuICAgIGZvciAodmFyIGN4ID0gc3RhdGUuY29udGV4dDsgY3g7IGN4ID0gY3gucHJldikge1xyXG4gICAgICBmb3IgKHZhciB2ID0gY3gudmFyczsgdjsgdiA9IHYubmV4dClcclxuICAgICAgICBpZiAodi5uYW1lID09IHZhcm5hbWUpIHJldHVybiB0cnVlO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgZnVuY3Rpb24gcGFyc2VKUyhzdGF0ZSwgc3R5bGUsIHR5cGUsIGNvbnRlbnQsIHN0cmVhbSkge1xyXG4gICAgdmFyIGNjID0gc3RhdGUuY2M7XHJcbiAgICAvLyBDb21tdW5pY2F0ZSBvdXIgY29udGV4dCB0byB0aGUgY29tYmluYXRvcnMuXHJcbiAgICAvLyAoTGVzcyB3YXN0ZWZ1bCB0aGFuIGNvbnNpbmcgdXAgYSBodW5kcmVkIGNsb3N1cmVzIG9uIGV2ZXJ5IGNhbGwuKVxyXG4gICAgY3guc3RhdGUgPSBzdGF0ZTsgY3guc3RyZWFtID0gc3RyZWFtOyBjeC5tYXJrZWQgPSBudWxsLCBjeC5jYyA9IGNjOyBjeC5zdHlsZSA9IHN0eWxlO1xyXG5cclxuICAgIGlmICghc3RhdGUubGV4aWNhbC5oYXNPd25Qcm9wZXJ0eShcImFsaWduXCIpKVxyXG4gICAgICBzdGF0ZS5sZXhpY2FsLmFsaWduID0gdHJ1ZTtcclxuXHJcbiAgICB3aGlsZSh0cnVlKSB7XHJcbiAgICAgIHZhciBjb21iaW5hdG9yID0gY2MubGVuZ3RoID8gY2MucG9wKCkgOiBqc29uTW9kZSA/IGV4cHJlc3Npb24gOiBzdGF0ZW1lbnQ7XHJcbiAgICAgIGlmIChjb21iaW5hdG9yKHR5cGUsIGNvbnRlbnQpKSB7XHJcbiAgICAgICAgd2hpbGUoY2MubGVuZ3RoICYmIGNjW2NjLmxlbmd0aCAtIDFdLmxleClcclxuICAgICAgICAgIGNjLnBvcCgpKCk7XHJcbiAgICAgICAgaWYgKGN4Lm1hcmtlZCkgcmV0dXJuIGN4Lm1hcmtlZDtcclxuICAgICAgICBpZiAodHlwZSA9PSBcInZhcmlhYmxlXCIgJiYgaW5TY29wZShzdGF0ZSwgY29udGVudCkpIHJldHVybiBcInZhcmlhYmxlLTJcIjtcclxuICAgICAgICByZXR1cm4gc3R5bGU7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8vIENvbWJpbmF0b3IgdXRpbHNcclxuXHJcbiAgdmFyIGN4ID0ge3N0YXRlOiBudWxsLCBjb2x1bW46IG51bGwsIG1hcmtlZDogbnVsbCwgY2M6IG51bGx9O1xyXG4gIGZ1bmN0aW9uIHBhc3MoKSB7XHJcbiAgICBmb3IgKHZhciBpID0gYXJndW1lbnRzLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSBjeC5jYy5wdXNoKGFyZ3VtZW50c1tpXSk7XHJcbiAgfVxyXG4gIGZ1bmN0aW9uIGNvbnQoKSB7XHJcbiAgICBwYXNzLmFwcGx5KG51bGwsIGFyZ3VtZW50cyk7XHJcbiAgICByZXR1cm4gdHJ1ZTtcclxuICB9XHJcbiAgZnVuY3Rpb24gcmVnaXN0ZXIodmFybmFtZSkge1xyXG4gICAgZnVuY3Rpb24gaW5MaXN0KGxpc3QpIHtcclxuICAgICAgZm9yICh2YXIgdiA9IGxpc3Q7IHY7IHYgPSB2Lm5leHQpXHJcbiAgICAgICAgaWYgKHYubmFtZSA9PSB2YXJuYW1lKSByZXR1cm4gdHJ1ZTtcclxuICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG4gICAgdmFyIHN0YXRlID0gY3guc3RhdGU7XHJcbiAgICBpZiAoc3RhdGUuY29udGV4dCkge1xyXG4gICAgICBjeC5tYXJrZWQgPSBcImRlZlwiO1xyXG4gICAgICBpZiAoaW5MaXN0KHN0YXRlLmxvY2FsVmFycykpIHJldHVybjtcclxuICAgICAgc3RhdGUubG9jYWxWYXJzID0ge25hbWU6IHZhcm5hbWUsIG5leHQ6IHN0YXRlLmxvY2FsVmFyc307XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBpZiAoaW5MaXN0KHN0YXRlLmdsb2JhbFZhcnMpKSByZXR1cm47XHJcbiAgICAgIGlmIChwYXJzZXJDb25maWcuZ2xvYmFsVmFycylcclxuICAgICAgICBzdGF0ZS5nbG9iYWxWYXJzID0ge25hbWU6IHZhcm5hbWUsIG5leHQ6IHN0YXRlLmdsb2JhbFZhcnN9O1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLy8gQ29tYmluYXRvcnNcclxuXHJcbiAgdmFyIGRlZmF1bHRWYXJzID0ge25hbWU6IFwidGhpc1wiLCBuZXh0OiB7bmFtZTogXCJhcmd1bWVudHNcIn19O1xyXG4gIGZ1bmN0aW9uIHB1c2hjb250ZXh0KCkge1xyXG4gICAgY3guc3RhdGUuY29udGV4dCA9IHtwcmV2OiBjeC5zdGF0ZS5jb250ZXh0LCB2YXJzOiBjeC5zdGF0ZS5sb2NhbFZhcnN9O1xyXG4gICAgY3guc3RhdGUubG9jYWxWYXJzID0gZGVmYXVsdFZhcnM7XHJcbiAgfVxyXG4gIGZ1bmN0aW9uIHBvcGNvbnRleHQoKSB7XHJcbiAgICBjeC5zdGF0ZS5sb2NhbFZhcnMgPSBjeC5zdGF0ZS5jb250ZXh0LnZhcnM7XHJcbiAgICBjeC5zdGF0ZS5jb250ZXh0ID0gY3guc3RhdGUuY29udGV4dC5wcmV2O1xyXG4gIH1cclxuICBmdW5jdGlvbiBwdXNobGV4KHR5cGUsIGluZm8pIHtcclxuICAgIHZhciByZXN1bHQgPSBmdW5jdGlvbigpIHtcclxuICAgICAgdmFyIHN0YXRlID0gY3guc3RhdGUsIGluZGVudCA9IHN0YXRlLmluZGVudGVkO1xyXG4gICAgICBpZiAoc3RhdGUubGV4aWNhbC50eXBlID09IFwic3RhdFwiKSBpbmRlbnQgPSBzdGF0ZS5sZXhpY2FsLmluZGVudGVkO1xyXG4gICAgICBlbHNlIGZvciAodmFyIG91dGVyID0gc3RhdGUubGV4aWNhbDsgb3V0ZXIgJiYgb3V0ZXIudHlwZSA9PSBcIilcIiAmJiBvdXRlci5hbGlnbjsgb3V0ZXIgPSBvdXRlci5wcmV2KVxyXG4gICAgICAgIGluZGVudCA9IG91dGVyLmluZGVudGVkO1xyXG4gICAgICBzdGF0ZS5sZXhpY2FsID0gbmV3IEpTTGV4aWNhbChpbmRlbnQsIGN4LnN0cmVhbS5jb2x1bW4oKSwgdHlwZSwgbnVsbCwgc3RhdGUubGV4aWNhbCwgaW5mbyk7XHJcbiAgICB9O1xyXG4gICAgcmVzdWx0LmxleCA9IHRydWU7XHJcbiAgICByZXR1cm4gcmVzdWx0O1xyXG4gIH1cclxuICBmdW5jdGlvbiBwb3BsZXgoKSB7XHJcbiAgICB2YXIgc3RhdGUgPSBjeC5zdGF0ZTtcclxuICAgIGlmIChzdGF0ZS5sZXhpY2FsLnByZXYpIHtcclxuICAgICAgaWYgKHN0YXRlLmxleGljYWwudHlwZSA9PSBcIilcIilcclxuICAgICAgICBzdGF0ZS5pbmRlbnRlZCA9IHN0YXRlLmxleGljYWwuaW5kZW50ZWQ7XHJcbiAgICAgIHN0YXRlLmxleGljYWwgPSBzdGF0ZS5sZXhpY2FsLnByZXY7XHJcbiAgICB9XHJcbiAgfVxyXG4gIHBvcGxleC5sZXggPSB0cnVlO1xyXG5cclxuICBmdW5jdGlvbiBleHBlY3Qod2FudGVkKSB7XHJcbiAgICBmdW5jdGlvbiBleHAodHlwZSkge1xyXG4gICAgICBpZiAodHlwZSA9PSB3YW50ZWQpIHJldHVybiBjb250KCk7XHJcbiAgICAgIGVsc2UgaWYgKHdhbnRlZCA9PSBcIjtcIikgcmV0dXJuIHBhc3MoKTtcclxuICAgICAgZWxzZSByZXR1cm4gY29udChleHApO1xyXG4gICAgfTtcclxuICAgIHJldHVybiBleHA7XHJcbiAgfVxyXG5cclxuICBmdW5jdGlvbiBzdGF0ZW1lbnQodHlwZSwgdmFsdWUpIHtcclxuICAgIGlmICh0eXBlID09IFwidmFyXCIpIHJldHVybiBjb250KHB1c2hsZXgoXCJ2YXJkZWZcIiwgdmFsdWUubGVuZ3RoKSwgdmFyZGVmLCBleHBlY3QoXCI7XCIpLCBwb3BsZXgpO1xyXG4gICAgaWYgKHR5cGUgPT0gXCJrZXl3b3JkIGFcIikgcmV0dXJuIGNvbnQocHVzaGxleChcImZvcm1cIiksIGV4cHJlc3Npb24sIHN0YXRlbWVudCwgcG9wbGV4KTtcclxuICAgIGlmICh0eXBlID09IFwia2V5d29yZCBiXCIpIHJldHVybiBjb250KHB1c2hsZXgoXCJmb3JtXCIpLCBzdGF0ZW1lbnQsIHBvcGxleCk7XHJcbiAgICBpZiAodHlwZSA9PSBcIntcIikgcmV0dXJuIGNvbnQocHVzaGxleChcIn1cIiksIGJsb2NrLCBwb3BsZXgpO1xyXG4gICAgaWYgKHR5cGUgPT0gXCI7XCIpIHJldHVybiBjb250KCk7XHJcbiAgICBpZiAodHlwZSA9PSBcImlmXCIpIHtcclxuICAgICAgaWYgKGN4LnN0YXRlLmxleGljYWwuaW5mbyA9PSBcImVsc2VcIiAmJiBjeC5zdGF0ZS5jY1tjeC5zdGF0ZS5jYy5sZW5ndGggLSAxXSA9PSBwb3BsZXgpXHJcbiAgICAgICAgY3guc3RhdGUuY2MucG9wKCkoKTtcclxuICAgICAgcmV0dXJuIGNvbnQocHVzaGxleChcImZvcm1cIiksIGV4cHJlc3Npb24sIHN0YXRlbWVudCwgcG9wbGV4LCBtYXliZWVsc2UpO1xyXG4gICAgfVxyXG4gICAgaWYgKHR5cGUgPT0gXCJmdW5jdGlvblwiKSByZXR1cm4gY29udChmdW5jdGlvbmRlZik7XHJcbiAgICBpZiAodHlwZSA9PSBcImZvclwiKSByZXR1cm4gY29udChwdXNobGV4KFwiZm9ybVwiKSwgZm9yc3BlYywgc3RhdGVtZW50LCBwb3BsZXgpO1xyXG4gICAgaWYgKHR5cGUgPT0gXCJ2YXJpYWJsZVwiKSByZXR1cm4gY29udChwdXNobGV4KFwic3RhdFwiKSwgbWF5YmVsYWJlbCk7XHJcbiAgICBpZiAodHlwZSA9PSBcInN3aXRjaFwiKSByZXR1cm4gY29udChwdXNobGV4KFwiZm9ybVwiKSwgZXhwcmVzc2lvbiwgcHVzaGxleChcIn1cIiwgXCJzd2l0Y2hcIiksIGV4cGVjdChcIntcIiksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYmxvY2ssIHBvcGxleCwgcG9wbGV4KTtcclxuICAgIGlmICh0eXBlID09IFwiY2FzZVwiKSByZXR1cm4gY29udChleHByZXNzaW9uLCBleHBlY3QoXCI6XCIpKTtcclxuICAgIGlmICh0eXBlID09IFwiZGVmYXVsdFwiKSByZXR1cm4gY29udChleHBlY3QoXCI6XCIpKTtcclxuICAgIGlmICh0eXBlID09IFwiY2F0Y2hcIikgcmV0dXJuIGNvbnQocHVzaGxleChcImZvcm1cIiksIHB1c2hjb250ZXh0LCBleHBlY3QoXCIoXCIpLCBmdW5hcmcsIGV4cGVjdChcIilcIiksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZW1lbnQsIHBvcGxleCwgcG9wY29udGV4dCk7XHJcbiAgICBpZiAodHlwZSA9PSBcIm1vZHVsZVwiKSByZXR1cm4gY29udChwdXNobGV4KFwiZm9ybVwiKSwgcHVzaGNvbnRleHQsIGFmdGVyTW9kdWxlLCBwb3Bjb250ZXh0LCBwb3BsZXgpO1xyXG4gICAgaWYgKHR5cGUgPT0gXCJjbGFzc1wiKSByZXR1cm4gY29udChwdXNobGV4KFwiZm9ybVwiKSwgY2xhc3NOYW1lLCBwb3BsZXgpO1xyXG4gICAgaWYgKHR5cGUgPT0gXCJleHBvcnRcIikgcmV0dXJuIGNvbnQocHVzaGxleChcImZvcm1cIiksIGFmdGVyRXhwb3J0LCBwb3BsZXgpO1xyXG4gICAgaWYgKHR5cGUgPT0gXCJpbXBvcnRcIikgcmV0dXJuIGNvbnQocHVzaGxleChcImZvcm1cIiksIGFmdGVySW1wb3J0LCBwb3BsZXgpO1xyXG4gICAgcmV0dXJuIHBhc3MocHVzaGxleChcInN0YXRcIiksIGV4cHJlc3Npb24sIGV4cGVjdChcIjtcIiksIHBvcGxleCk7XHJcbiAgfVxyXG4gIGZ1bmN0aW9uIGV4cHJlc3Npb24odHlwZSkge1xyXG4gICAgcmV0dXJuIGV4cHJlc3Npb25Jbm5lcih0eXBlLCBmYWxzZSk7XHJcbiAgfVxyXG4gIGZ1bmN0aW9uIGV4cHJlc3Npb25Ob0NvbW1hKHR5cGUpIHtcclxuICAgIHJldHVybiBleHByZXNzaW9uSW5uZXIodHlwZSwgdHJ1ZSk7XHJcbiAgfVxyXG4gIGZ1bmN0aW9uIGV4cHJlc3Npb25Jbm5lcih0eXBlLCBub0NvbW1hKSB7XHJcbiAgICBpZiAoY3guc3RhdGUuZmF0QXJyb3dBdCA9PSBjeC5zdHJlYW0uc3RhcnQpIHtcclxuICAgICAgdmFyIGJvZHkgPSBub0NvbW1hID8gYXJyb3dCb2R5Tm9Db21tYSA6IGFycm93Qm9keTtcclxuICAgICAgaWYgKHR5cGUgPT0gXCIoXCIpIHJldHVybiBjb250KHB1c2hjb250ZXh0LCBwdXNobGV4KFwiKVwiKSwgY29tbWFzZXAocGF0dGVybiwgXCIpXCIpLCBwb3BsZXgsIGV4cGVjdChcIj0+XCIpLCBib2R5LCBwb3Bjb250ZXh0KTtcclxuICAgICAgZWxzZSBpZiAodHlwZSA9PSBcInZhcmlhYmxlXCIpIHJldHVybiBwYXNzKHB1c2hjb250ZXh0LCBwYXR0ZXJuLCBleHBlY3QoXCI9PlwiKSwgYm9keSwgcG9wY29udGV4dCk7XHJcbiAgICB9XHJcblxyXG4gICAgdmFyIG1heWJlb3AgPSBub0NvbW1hID8gbWF5YmVvcGVyYXRvck5vQ29tbWEgOiBtYXliZW9wZXJhdG9yQ29tbWE7XHJcbiAgICBpZiAoYXRvbWljVHlwZXMuaGFzT3duUHJvcGVydHkodHlwZSkpIHJldHVybiBjb250KG1heWJlb3ApO1xyXG4gICAgaWYgKHR5cGUgPT0gXCJmdW5jdGlvblwiKSByZXR1cm4gY29udChmdW5jdGlvbmRlZiwgbWF5YmVvcCk7XHJcbiAgICBpZiAodHlwZSA9PSBcImtleXdvcmQgY1wiKSByZXR1cm4gY29udChub0NvbW1hID8gbWF5YmVleHByZXNzaW9uTm9Db21tYSA6IG1heWJlZXhwcmVzc2lvbik7XHJcbiAgICBpZiAodHlwZSA9PSBcIihcIikgcmV0dXJuIGNvbnQocHVzaGxleChcIilcIiksIG1heWJlZXhwcmVzc2lvbiwgY29tcHJlaGVuc2lvbiwgZXhwZWN0KFwiKVwiKSwgcG9wbGV4LCBtYXliZW9wKTtcclxuICAgIGlmICh0eXBlID09IFwib3BlcmF0b3JcIiB8fCB0eXBlID09IFwic3ByZWFkXCIpIHJldHVybiBjb250KG5vQ29tbWEgPyBleHByZXNzaW9uTm9Db21tYSA6IGV4cHJlc3Npb24pO1xyXG4gICAgaWYgKHR5cGUgPT0gXCJbXCIpIHJldHVybiBjb250KHB1c2hsZXgoXCJdXCIpLCBhcnJheUxpdGVyYWwsIHBvcGxleCwgbWF5YmVvcCk7XHJcbiAgICBpZiAodHlwZSA9PSBcIntcIikgcmV0dXJuIGNvbnRDb21tYXNlcChvYmpwcm9wLCBcIn1cIiwgbnVsbCwgbWF5YmVvcCk7XHJcbiAgICBpZiAodHlwZSA9PSBcInF1YXNpXCIpIHsgcmV0dXJuIHBhc3MocXVhc2ksIG1heWJlb3ApOyB9XHJcbiAgICByZXR1cm4gY29udCgpO1xyXG4gIH1cclxuICBmdW5jdGlvbiBtYXliZWV4cHJlc3Npb24odHlwZSkge1xyXG4gICAgaWYgKHR5cGUubWF0Y2goL1s7XFx9XFwpXFxdLF0vKSkgcmV0dXJuIHBhc3MoKTtcclxuICAgIHJldHVybiBwYXNzKGV4cHJlc3Npb24pO1xyXG4gIH1cclxuICBmdW5jdGlvbiBtYXliZWV4cHJlc3Npb25Ob0NvbW1hKHR5cGUpIHtcclxuICAgIGlmICh0eXBlLm1hdGNoKC9bO1xcfVxcKVxcXSxdLykpIHJldHVybiBwYXNzKCk7XHJcbiAgICByZXR1cm4gcGFzcyhleHByZXNzaW9uTm9Db21tYSk7XHJcbiAgfVxyXG5cclxuICBmdW5jdGlvbiBtYXliZW9wZXJhdG9yQ29tbWEodHlwZSwgdmFsdWUpIHtcclxuICAgIGlmICh0eXBlID09IFwiLFwiKSByZXR1cm4gY29udChleHByZXNzaW9uKTtcclxuICAgIHJldHVybiBtYXliZW9wZXJhdG9yTm9Db21tYSh0eXBlLCB2YWx1ZSwgZmFsc2UpO1xyXG4gIH1cclxuICBmdW5jdGlvbiBtYXliZW9wZXJhdG9yTm9Db21tYSh0eXBlLCB2YWx1ZSwgbm9Db21tYSkge1xyXG4gICAgdmFyIG1lID0gbm9Db21tYSA9PSBmYWxzZSA/IG1heWJlb3BlcmF0b3JDb21tYSA6IG1heWJlb3BlcmF0b3JOb0NvbW1hO1xyXG4gICAgdmFyIGV4cHIgPSBub0NvbW1hID09IGZhbHNlID8gZXhwcmVzc2lvbiA6IGV4cHJlc3Npb25Ob0NvbW1hO1xyXG4gICAgaWYgKHR5cGUgPT0gXCI9PlwiKSByZXR1cm4gY29udChwdXNoY29udGV4dCwgbm9Db21tYSA/IGFycm93Qm9keU5vQ29tbWEgOiBhcnJvd0JvZHksIHBvcGNvbnRleHQpO1xyXG4gICAgaWYgKHR5cGUgPT0gXCJvcGVyYXRvclwiKSB7XHJcbiAgICAgIGlmICgvXFwrXFwrfC0tLy50ZXN0KHZhbHVlKSkgcmV0dXJuIGNvbnQobWUpO1xyXG4gICAgICBpZiAodmFsdWUgPT0gXCI/XCIpIHJldHVybiBjb250KGV4cHJlc3Npb24sIGV4cGVjdChcIjpcIiksIGV4cHIpO1xyXG4gICAgICByZXR1cm4gY29udChleHByKTtcclxuICAgIH1cclxuICAgIGlmICh0eXBlID09IFwicXVhc2lcIikgeyByZXR1cm4gcGFzcyhxdWFzaSwgbWUpOyB9XHJcbiAgICBpZiAodHlwZSA9PSBcIjtcIikgcmV0dXJuO1xyXG4gICAgaWYgKHR5cGUgPT0gXCIoXCIpIHJldHVybiBjb250Q29tbWFzZXAoZXhwcmVzc2lvbk5vQ29tbWEsIFwiKVwiLCBcImNhbGxcIiwgbWUpO1xyXG4gICAgaWYgKHR5cGUgPT0gXCIuXCIpIHJldHVybiBjb250KHByb3BlcnR5LCBtZSk7XHJcbiAgICBpZiAodHlwZSA9PSBcIltcIikgcmV0dXJuIGNvbnQocHVzaGxleChcIl1cIiksIG1heWJlZXhwcmVzc2lvbiwgZXhwZWN0KFwiXVwiKSwgcG9wbGV4LCBtZSk7XHJcbiAgfVxyXG4gIGZ1bmN0aW9uIHF1YXNpKHR5cGUsIHZhbHVlKSB7XHJcbiAgICBpZiAodHlwZSAhPSBcInF1YXNpXCIpIHJldHVybiBwYXNzKCk7XHJcbiAgICBpZiAodmFsdWUuc2xpY2UodmFsdWUubGVuZ3RoIC0gMikgIT0gXCIke1wiKSByZXR1cm4gY29udChxdWFzaSk7XHJcbiAgICByZXR1cm4gY29udChleHByZXNzaW9uLCBjb250aW51ZVF1YXNpKTtcclxuICB9XHJcbiAgZnVuY3Rpb24gY29udGludWVRdWFzaSh0eXBlKSB7XHJcbiAgICBpZiAodHlwZSA9PSBcIn1cIikge1xyXG4gICAgICBjeC5tYXJrZWQgPSBcInN0cmluZy0yXCI7XHJcbiAgICAgIGN4LnN0YXRlLnRva2VuaXplID0gdG9rZW5RdWFzaTtcclxuICAgICAgcmV0dXJuIGNvbnQocXVhc2kpO1xyXG4gICAgfVxyXG4gIH1cclxuICBmdW5jdGlvbiBhcnJvd0JvZHkodHlwZSkge1xyXG4gICAgZmluZEZhdEFycm93KGN4LnN0cmVhbSwgY3guc3RhdGUpO1xyXG4gICAgcmV0dXJuIHBhc3ModHlwZSA9PSBcIntcIiA/IHN0YXRlbWVudCA6IGV4cHJlc3Npb24pO1xyXG4gIH1cclxuICBmdW5jdGlvbiBhcnJvd0JvZHlOb0NvbW1hKHR5cGUpIHtcclxuICAgIGZpbmRGYXRBcnJvdyhjeC5zdHJlYW0sIGN4LnN0YXRlKTtcclxuICAgIHJldHVybiBwYXNzKHR5cGUgPT0gXCJ7XCIgPyBzdGF0ZW1lbnQgOiBleHByZXNzaW9uTm9Db21tYSk7XHJcbiAgfVxyXG4gIGZ1bmN0aW9uIG1heWJlbGFiZWwodHlwZSkge1xyXG4gICAgaWYgKHR5cGUgPT0gXCI6XCIpIHJldHVybiBjb250KHBvcGxleCwgc3RhdGVtZW50KTtcclxuICAgIHJldHVybiBwYXNzKG1heWJlb3BlcmF0b3JDb21tYSwgZXhwZWN0KFwiO1wiKSwgcG9wbGV4KTtcclxuICB9XHJcbiAgZnVuY3Rpb24gcHJvcGVydHkodHlwZSkge1xyXG4gICAgaWYgKHR5cGUgPT0gXCJ2YXJpYWJsZVwiKSB7Y3gubWFya2VkID0gXCJwcm9wZXJ0eVwiOyByZXR1cm4gY29udCgpO31cclxuICB9XHJcbiAgZnVuY3Rpb24gb2JqcHJvcCh0eXBlLCB2YWx1ZSkge1xyXG4gICAgaWYgKHR5cGUgPT0gXCJ2YXJpYWJsZVwiIHx8IGN4LnN0eWxlID09IFwia2V5d29yZFwiKSB7XHJcbiAgICAgIGN4Lm1hcmtlZCA9IFwicHJvcGVydHlcIjtcclxuICAgICAgaWYgKHZhbHVlID09IFwiZ2V0XCIgfHwgdmFsdWUgPT0gXCJzZXRcIikgcmV0dXJuIGNvbnQoZ2V0dGVyU2V0dGVyKTtcclxuICAgICAgcmV0dXJuIGNvbnQoYWZ0ZXJwcm9wKTtcclxuICAgIH0gZWxzZSBpZiAodHlwZSA9PSBcIm51bWJlclwiIHx8IHR5cGUgPT0gXCJzdHJpbmdcIikge1xyXG4gICAgICBjeC5tYXJrZWQgPSBqc29ubGRNb2RlID8gXCJwcm9wZXJ0eVwiIDogKGN4LnN0eWxlICsgXCIgcHJvcGVydHlcIik7XHJcbiAgICAgIHJldHVybiBjb250KGFmdGVycHJvcCk7XHJcbiAgICB9IGVsc2UgaWYgKHR5cGUgPT0gXCJqc29ubGQta2V5d29yZFwiKSB7XHJcbiAgICAgIHJldHVybiBjb250KGFmdGVycHJvcCk7XHJcbiAgICB9IGVsc2UgaWYgKHR5cGUgPT0gXCJbXCIpIHtcclxuICAgICAgcmV0dXJuIGNvbnQoZXhwcmVzc2lvbiwgZXhwZWN0KFwiXVwiKSwgYWZ0ZXJwcm9wKTtcclxuICAgIH1cclxuICB9XHJcbiAgZnVuY3Rpb24gZ2V0dGVyU2V0dGVyKHR5cGUpIHtcclxuICAgIGlmICh0eXBlICE9IFwidmFyaWFibGVcIikgcmV0dXJuIHBhc3MoYWZ0ZXJwcm9wKTtcclxuICAgIGN4Lm1hcmtlZCA9IFwicHJvcGVydHlcIjtcclxuICAgIHJldHVybiBjb250KGZ1bmN0aW9uZGVmKTtcclxuICB9XHJcbiAgZnVuY3Rpb24gYWZ0ZXJwcm9wKHR5cGUpIHtcclxuICAgIGlmICh0eXBlID09IFwiOlwiKSByZXR1cm4gY29udChleHByZXNzaW9uTm9Db21tYSk7XHJcbiAgICBpZiAodHlwZSA9PSBcIihcIikgcmV0dXJuIHBhc3MoZnVuY3Rpb25kZWYpO1xyXG4gIH1cclxuICBmdW5jdGlvbiBjb21tYXNlcCh3aGF0LCBlbmQpIHtcclxuICAgIGZ1bmN0aW9uIHByb2NlZWQodHlwZSkge1xyXG4gICAgICBpZiAodHlwZSA9PSBcIixcIikge1xyXG4gICAgICAgIHZhciBsZXggPSBjeC5zdGF0ZS5sZXhpY2FsO1xyXG4gICAgICAgIGlmIChsZXguaW5mbyA9PSBcImNhbGxcIikgbGV4LnBvcyA9IChsZXgucG9zIHx8IDApICsgMTtcclxuICAgICAgICByZXR1cm4gY29udCh3aGF0LCBwcm9jZWVkKTtcclxuICAgICAgfVxyXG4gICAgICBpZiAodHlwZSA9PSBlbmQpIHJldHVybiBjb250KCk7XHJcbiAgICAgIHJldHVybiBjb250KGV4cGVjdChlbmQpKTtcclxuICAgIH1cclxuICAgIHJldHVybiBmdW5jdGlvbih0eXBlKSB7XHJcbiAgICAgIGlmICh0eXBlID09IGVuZCkgcmV0dXJuIGNvbnQoKTtcclxuICAgICAgcmV0dXJuIHBhc3Mod2hhdCwgcHJvY2VlZCk7XHJcbiAgICB9O1xyXG4gIH1cclxuICBmdW5jdGlvbiBjb250Q29tbWFzZXAod2hhdCwgZW5kLCBpbmZvKSB7XHJcbiAgICBmb3IgKHZhciBpID0gMzsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKylcclxuICAgICAgY3guY2MucHVzaChhcmd1bWVudHNbaV0pO1xyXG4gICAgcmV0dXJuIGNvbnQocHVzaGxleChlbmQsIGluZm8pLCBjb21tYXNlcCh3aGF0LCBlbmQpLCBwb3BsZXgpO1xyXG4gIH1cclxuICBmdW5jdGlvbiBibG9jayh0eXBlKSB7XHJcbiAgICBpZiAodHlwZSA9PSBcIn1cIikgcmV0dXJuIGNvbnQoKTtcclxuICAgIHJldHVybiBwYXNzKHN0YXRlbWVudCwgYmxvY2spO1xyXG4gIH1cclxuICBmdW5jdGlvbiBtYXliZXR5cGUodHlwZSkge1xyXG4gICAgaWYgKGlzVFMgJiYgdHlwZSA9PSBcIjpcIikgcmV0dXJuIGNvbnQodHlwZWRlZik7XHJcbiAgfVxyXG4gIGZ1bmN0aW9uIHR5cGVkZWYodHlwZSkge1xyXG4gICAgaWYgKHR5cGUgPT0gXCJ2YXJpYWJsZVwiKXtjeC5tYXJrZWQgPSBcInZhcmlhYmxlLTNcIjsgcmV0dXJuIGNvbnQoKTt9XHJcbiAgfVxyXG4gIGZ1bmN0aW9uIHZhcmRlZigpIHtcclxuICAgIHJldHVybiBwYXNzKHBhdHRlcm4sIG1heWJldHlwZSwgbWF5YmVBc3NpZ24sIHZhcmRlZkNvbnQpO1xyXG4gIH1cclxuICBmdW5jdGlvbiBwYXR0ZXJuKHR5cGUsIHZhbHVlKSB7XHJcbiAgICBpZiAodHlwZSA9PSBcInZhcmlhYmxlXCIpIHsgcmVnaXN0ZXIodmFsdWUpOyByZXR1cm4gY29udCgpOyB9XHJcbiAgICBpZiAodHlwZSA9PSBcIltcIikgcmV0dXJuIGNvbnRDb21tYXNlcChwYXR0ZXJuLCBcIl1cIik7XHJcbiAgICBpZiAodHlwZSA9PSBcIntcIikgcmV0dXJuIGNvbnRDb21tYXNlcChwcm9wcGF0dGVybiwgXCJ9XCIpO1xyXG4gIH1cclxuICBmdW5jdGlvbiBwcm9wcGF0dGVybih0eXBlLCB2YWx1ZSkge1xyXG4gICAgaWYgKHR5cGUgPT0gXCJ2YXJpYWJsZVwiICYmICFjeC5zdHJlYW0ubWF0Y2goL15cXHMqOi8sIGZhbHNlKSkge1xyXG4gICAgICByZWdpc3Rlcih2YWx1ZSk7XHJcbiAgICAgIHJldHVybiBjb250KG1heWJlQXNzaWduKTtcclxuICAgIH1cclxuICAgIGlmICh0eXBlID09IFwidmFyaWFibGVcIikgY3gubWFya2VkID0gXCJwcm9wZXJ0eVwiO1xyXG4gICAgcmV0dXJuIGNvbnQoZXhwZWN0KFwiOlwiKSwgcGF0dGVybiwgbWF5YmVBc3NpZ24pO1xyXG4gIH1cclxuICBmdW5jdGlvbiBtYXliZUFzc2lnbihfdHlwZSwgdmFsdWUpIHtcclxuICAgIGlmICh2YWx1ZSA9PSBcIj1cIikgcmV0dXJuIGNvbnQoZXhwcmVzc2lvbk5vQ29tbWEpO1xyXG4gIH1cclxuICBmdW5jdGlvbiB2YXJkZWZDb250KHR5cGUpIHtcclxuICAgIGlmICh0eXBlID09IFwiLFwiKSByZXR1cm4gY29udCh2YXJkZWYpO1xyXG4gIH1cclxuICBmdW5jdGlvbiBtYXliZWVsc2UodHlwZSwgdmFsdWUpIHtcclxuICAgIGlmICh0eXBlID09IFwia2V5d29yZCBiXCIgJiYgdmFsdWUgPT0gXCJlbHNlXCIpIHJldHVybiBjb250KHB1c2hsZXgoXCJmb3JtXCIsIFwiZWxzZVwiKSwgc3RhdGVtZW50LCBwb3BsZXgpO1xyXG4gIH1cclxuICBmdW5jdGlvbiBmb3JzcGVjKHR5cGUpIHtcclxuICAgIGlmICh0eXBlID09IFwiKFwiKSByZXR1cm4gY29udChwdXNobGV4KFwiKVwiKSwgZm9yc3BlYzEsIGV4cGVjdChcIilcIiksIHBvcGxleCk7XHJcbiAgfVxyXG4gIGZ1bmN0aW9uIGZvcnNwZWMxKHR5cGUpIHtcclxuICAgIGlmICh0eXBlID09IFwidmFyXCIpIHJldHVybiBjb250KHZhcmRlZiwgZXhwZWN0KFwiO1wiKSwgZm9yc3BlYzIpO1xyXG4gICAgaWYgKHR5cGUgPT0gXCI7XCIpIHJldHVybiBjb250KGZvcnNwZWMyKTtcclxuICAgIGlmICh0eXBlID09IFwidmFyaWFibGVcIikgcmV0dXJuIGNvbnQoZm9ybWF5YmVpbm9mKTtcclxuICAgIHJldHVybiBwYXNzKGV4cHJlc3Npb24sIGV4cGVjdChcIjtcIiksIGZvcnNwZWMyKTtcclxuICB9XHJcbiAgZnVuY3Rpb24gZm9ybWF5YmVpbm9mKF90eXBlLCB2YWx1ZSkge1xyXG4gICAgaWYgKHZhbHVlID09IFwiaW5cIiB8fCB2YWx1ZSA9PSBcIm9mXCIpIHsgY3gubWFya2VkID0gXCJrZXl3b3JkXCI7IHJldHVybiBjb250KGV4cHJlc3Npb24pOyB9XHJcbiAgICByZXR1cm4gY29udChtYXliZW9wZXJhdG9yQ29tbWEsIGZvcnNwZWMyKTtcclxuICB9XHJcbiAgZnVuY3Rpb24gZm9yc3BlYzIodHlwZSwgdmFsdWUpIHtcclxuICAgIGlmICh0eXBlID09IFwiO1wiKSByZXR1cm4gY29udChmb3JzcGVjMyk7XHJcbiAgICBpZiAodmFsdWUgPT0gXCJpblwiIHx8IHZhbHVlID09IFwib2ZcIikgeyBjeC5tYXJrZWQgPSBcImtleXdvcmRcIjsgcmV0dXJuIGNvbnQoZXhwcmVzc2lvbik7IH1cclxuICAgIHJldHVybiBwYXNzKGV4cHJlc3Npb24sIGV4cGVjdChcIjtcIiksIGZvcnNwZWMzKTtcclxuICB9XHJcbiAgZnVuY3Rpb24gZm9yc3BlYzModHlwZSkge1xyXG4gICAgaWYgKHR5cGUgIT0gXCIpXCIpIGNvbnQoZXhwcmVzc2lvbik7XHJcbiAgfVxyXG4gIGZ1bmN0aW9uIGZ1bmN0aW9uZGVmKHR5cGUsIHZhbHVlKSB7XHJcbiAgICBpZiAodmFsdWUgPT0gXCIqXCIpIHtjeC5tYXJrZWQgPSBcImtleXdvcmRcIjsgcmV0dXJuIGNvbnQoZnVuY3Rpb25kZWYpO31cclxuICAgIGlmICh0eXBlID09IFwidmFyaWFibGVcIikge3JlZ2lzdGVyKHZhbHVlKTsgcmV0dXJuIGNvbnQoZnVuY3Rpb25kZWYpO31cclxuICAgIGlmICh0eXBlID09IFwiKFwiKSByZXR1cm4gY29udChwdXNoY29udGV4dCwgcHVzaGxleChcIilcIiksIGNvbW1hc2VwKGZ1bmFyZywgXCIpXCIpLCBwb3BsZXgsIHN0YXRlbWVudCwgcG9wY29udGV4dCk7XHJcbiAgfVxyXG4gIGZ1bmN0aW9uIGZ1bmFyZyh0eXBlKSB7XHJcbiAgICBpZiAodHlwZSA9PSBcInNwcmVhZFwiKSByZXR1cm4gY29udChmdW5hcmcpO1xyXG4gICAgcmV0dXJuIHBhc3MocGF0dGVybiwgbWF5YmV0eXBlKTtcclxuICB9XHJcbiAgZnVuY3Rpb24gY2xhc3NOYW1lKHR5cGUsIHZhbHVlKSB7XHJcbiAgICBpZiAodHlwZSA9PSBcInZhcmlhYmxlXCIpIHtyZWdpc3Rlcih2YWx1ZSk7IHJldHVybiBjb250KGNsYXNzTmFtZUFmdGVyKTt9XHJcbiAgfVxyXG4gIGZ1bmN0aW9uIGNsYXNzTmFtZUFmdGVyKHR5cGUsIHZhbHVlKSB7XHJcbiAgICBpZiAodmFsdWUgPT0gXCJleHRlbmRzXCIpIHJldHVybiBjb250KGV4cHJlc3Npb24sIGNsYXNzTmFtZUFmdGVyKTtcclxuICAgIGlmICh0eXBlID09IFwie1wiKSByZXR1cm4gY29udChwdXNobGV4KFwifVwiKSwgY2xhc3NCb2R5LCBwb3BsZXgpO1xyXG4gIH1cclxuICBmdW5jdGlvbiBjbGFzc0JvZHkodHlwZSwgdmFsdWUpIHtcclxuICAgIGlmICh0eXBlID09IFwidmFyaWFibGVcIiB8fCBjeC5zdHlsZSA9PSBcImtleXdvcmRcIikge1xyXG4gICAgICBjeC5tYXJrZWQgPSBcInByb3BlcnR5XCI7XHJcbiAgICAgIGlmICh2YWx1ZSA9PSBcImdldFwiIHx8IHZhbHVlID09IFwic2V0XCIpIHJldHVybiBjb250KGNsYXNzR2V0dGVyU2V0dGVyLCBmdW5jdGlvbmRlZiwgY2xhc3NCb2R5KTtcclxuICAgICAgcmV0dXJuIGNvbnQoZnVuY3Rpb25kZWYsIGNsYXNzQm9keSk7XHJcbiAgICB9XHJcbiAgICBpZiAodmFsdWUgPT0gXCIqXCIpIHtcclxuICAgICAgY3gubWFya2VkID0gXCJrZXl3b3JkXCI7XHJcbiAgICAgIHJldHVybiBjb250KGNsYXNzQm9keSk7XHJcbiAgICB9XHJcbiAgICBpZiAodHlwZSA9PSBcIjtcIikgcmV0dXJuIGNvbnQoY2xhc3NCb2R5KTtcclxuICAgIGlmICh0eXBlID09IFwifVwiKSByZXR1cm4gY29udCgpO1xyXG4gIH1cclxuICBmdW5jdGlvbiBjbGFzc0dldHRlclNldHRlcih0eXBlKSB7XHJcbiAgICBpZiAodHlwZSAhPSBcInZhcmlhYmxlXCIpIHJldHVybiBwYXNzKCk7XHJcbiAgICBjeC5tYXJrZWQgPSBcInByb3BlcnR5XCI7XHJcbiAgICByZXR1cm4gY29udCgpO1xyXG4gIH1cclxuICBmdW5jdGlvbiBhZnRlck1vZHVsZSh0eXBlLCB2YWx1ZSkge1xyXG4gICAgaWYgKHR5cGUgPT0gXCJzdHJpbmdcIikgcmV0dXJuIGNvbnQoc3RhdGVtZW50KTtcclxuICAgIGlmICh0eXBlID09IFwidmFyaWFibGVcIikgeyByZWdpc3Rlcih2YWx1ZSk7IHJldHVybiBjb250KG1heWJlRnJvbSk7IH1cclxuICB9XHJcbiAgZnVuY3Rpb24gYWZ0ZXJFeHBvcnQoX3R5cGUsIHZhbHVlKSB7XHJcbiAgICBpZiAodmFsdWUgPT0gXCIqXCIpIHsgY3gubWFya2VkID0gXCJrZXl3b3JkXCI7IHJldHVybiBjb250KG1heWJlRnJvbSwgZXhwZWN0KFwiO1wiKSk7IH1cclxuICAgIGlmICh2YWx1ZSA9PSBcImRlZmF1bHRcIikgeyBjeC5tYXJrZWQgPSBcImtleXdvcmRcIjsgcmV0dXJuIGNvbnQoZXhwcmVzc2lvbiwgZXhwZWN0KFwiO1wiKSk7IH1cclxuICAgIHJldHVybiBwYXNzKHN0YXRlbWVudCk7XHJcbiAgfVxyXG4gIGZ1bmN0aW9uIGFmdGVySW1wb3J0KHR5cGUpIHtcclxuICAgIGlmICh0eXBlID09IFwic3RyaW5nXCIpIHJldHVybiBjb250KCk7XHJcbiAgICByZXR1cm4gcGFzcyhpbXBvcnRTcGVjLCBtYXliZUZyb20pO1xyXG4gIH1cclxuICBmdW5jdGlvbiBpbXBvcnRTcGVjKHR5cGUsIHZhbHVlKSB7XHJcbiAgICBpZiAodHlwZSA9PSBcIntcIikgcmV0dXJuIGNvbnRDb21tYXNlcChpbXBvcnRTcGVjLCBcIn1cIik7XHJcbiAgICBpZiAodHlwZSA9PSBcInZhcmlhYmxlXCIpIHJlZ2lzdGVyKHZhbHVlKTtcclxuICAgIHJldHVybiBjb250KCk7XHJcbiAgfVxyXG4gIGZ1bmN0aW9uIG1heWJlRnJvbShfdHlwZSwgdmFsdWUpIHtcclxuICAgIGlmICh2YWx1ZSA9PSBcImZyb21cIikgeyBjeC5tYXJrZWQgPSBcImtleXdvcmRcIjsgcmV0dXJuIGNvbnQoZXhwcmVzc2lvbik7IH1cclxuICB9XHJcbiAgZnVuY3Rpb24gYXJyYXlMaXRlcmFsKHR5cGUpIHtcclxuICAgIGlmICh0eXBlID09IFwiXVwiKSByZXR1cm4gY29udCgpO1xyXG4gICAgcmV0dXJuIHBhc3MoZXhwcmVzc2lvbk5vQ29tbWEsIG1heWJlQXJyYXlDb21wcmVoZW5zaW9uKTtcclxuICB9XHJcbiAgZnVuY3Rpb24gbWF5YmVBcnJheUNvbXByZWhlbnNpb24odHlwZSkge1xyXG4gICAgaWYgKHR5cGUgPT0gXCJmb3JcIikgcmV0dXJuIHBhc3MoY29tcHJlaGVuc2lvbiwgZXhwZWN0KFwiXVwiKSk7XHJcbiAgICBpZiAodHlwZSA9PSBcIixcIikgcmV0dXJuIGNvbnQoY29tbWFzZXAoZXhwcmVzc2lvbk5vQ29tbWEsIFwiXVwiKSk7XHJcbiAgICByZXR1cm4gcGFzcyhjb21tYXNlcChleHByZXNzaW9uTm9Db21tYSwgXCJdXCIpKTtcclxuICB9XHJcbiAgZnVuY3Rpb24gY29tcHJlaGVuc2lvbih0eXBlKSB7XHJcbiAgICBpZiAodHlwZSA9PSBcImZvclwiKSByZXR1cm4gY29udChmb3JzcGVjLCBjb21wcmVoZW5zaW9uKTtcclxuICAgIGlmICh0eXBlID09IFwiaWZcIikgcmV0dXJuIGNvbnQoZXhwcmVzc2lvbiwgY29tcHJlaGVuc2lvbik7XHJcbiAgfVxyXG5cclxuICAvLyBJbnRlcmZhY2VcclxuXHJcbiAgcmV0dXJuIHtcclxuICAgIHN0YXJ0U3RhdGU6IGZ1bmN0aW9uKGJhc2Vjb2x1bW4pIHtcclxuICAgICAgdmFyIHN0YXRlID0ge1xyXG4gICAgICAgIHRva2VuaXplOiB0b2tlbkJhc2UsXHJcbiAgICAgICAgbGFzdFR5cGU6IFwic29mXCIsXHJcbiAgICAgICAgY2M6IFtdLFxyXG4gICAgICAgIGxleGljYWw6IG5ldyBKU0xleGljYWwoKGJhc2Vjb2x1bW4gfHwgMCkgLSBpbmRlbnRVbml0LCAwLCBcImJsb2NrXCIsIGZhbHNlKSxcclxuICAgICAgICBsb2NhbFZhcnM6IHBhcnNlckNvbmZpZy5sb2NhbFZhcnMsXHJcbiAgICAgICAgY29udGV4dDogcGFyc2VyQ29uZmlnLmxvY2FsVmFycyAmJiB7dmFyczogcGFyc2VyQ29uZmlnLmxvY2FsVmFyc30sXHJcbiAgICAgICAgaW5kZW50ZWQ6IDBcclxuICAgICAgfTtcclxuICAgICAgaWYgKHBhcnNlckNvbmZpZy5nbG9iYWxWYXJzICYmIHR5cGVvZiBwYXJzZXJDb25maWcuZ2xvYmFsVmFycyA9PSBcIm9iamVjdFwiKVxyXG4gICAgICAgIHN0YXRlLmdsb2JhbFZhcnMgPSBwYXJzZXJDb25maWcuZ2xvYmFsVmFycztcclxuICAgICAgcmV0dXJuIHN0YXRlO1xyXG4gICAgfSxcclxuXHJcbiAgICB0b2tlbjogZnVuY3Rpb24oc3RyZWFtLCBzdGF0ZSkge1xyXG4gICAgICBpZiAoc3RyZWFtLnNvbCgpKSB7XHJcbiAgICAgICAgaWYgKCFzdGF0ZS5sZXhpY2FsLmhhc093blByb3BlcnR5KFwiYWxpZ25cIikpXHJcbiAgICAgICAgICBzdGF0ZS5sZXhpY2FsLmFsaWduID0gZmFsc2U7XHJcbiAgICAgICAgc3RhdGUuaW5kZW50ZWQgPSBzdHJlYW0uaW5kZW50YXRpb24oKTtcclxuICAgICAgICBmaW5kRmF0QXJyb3coc3RyZWFtLCBzdGF0ZSk7XHJcbiAgICAgIH1cclxuICAgICAgaWYgKHN0YXRlLnRva2VuaXplICE9IHRva2VuQ29tbWVudCAmJiBzdHJlYW0uZWF0U3BhY2UoKSkgcmV0dXJuIG51bGw7XHJcbiAgICAgIHZhciBzdHlsZSA9IHN0YXRlLnRva2VuaXplKHN0cmVhbSwgc3RhdGUpO1xyXG4gICAgICBpZiAodHlwZSA9PSBcImNvbW1lbnRcIikgcmV0dXJuIHN0eWxlO1xyXG4gICAgICBzdGF0ZS5sYXN0VHlwZSA9IHR5cGUgPT0gXCJvcGVyYXRvclwiICYmIChjb250ZW50ID09IFwiKytcIiB8fCBjb250ZW50ID09IFwiLS1cIikgPyBcImluY2RlY1wiIDogdHlwZTtcclxuICAgICAgcmV0dXJuIHBhcnNlSlMoc3RhdGUsIHN0eWxlLCB0eXBlLCBjb250ZW50LCBzdHJlYW0pO1xyXG4gICAgfSxcclxuXHJcbiAgICBpbmRlbnQ6IGZ1bmN0aW9uKHN0YXRlLCB0ZXh0QWZ0ZXIpIHtcclxuICAgICAgaWYgKHN0YXRlLnRva2VuaXplID09IHRva2VuQ29tbWVudCkgcmV0dXJuIENvZGVNaXJyb3IuUGFzcztcclxuICAgICAgaWYgKHN0YXRlLnRva2VuaXplICE9IHRva2VuQmFzZSkgcmV0dXJuIDA7XHJcbiAgICAgIHZhciBmaXJzdENoYXIgPSB0ZXh0QWZ0ZXIgJiYgdGV4dEFmdGVyLmNoYXJBdCgwKSwgbGV4aWNhbCA9IHN0YXRlLmxleGljYWw7XHJcbiAgICAgIC8vIEtsdWRnZSB0byBwcmV2ZW50ICdtYXliZWxzZScgZnJvbSBibG9ja2luZyBsZXhpY2FsIHNjb3BlIHBvcHNcclxuICAgICAgaWYgKCEvXlxccyplbHNlXFxiLy50ZXN0KHRleHRBZnRlcikpIGZvciAodmFyIGkgPSBzdGF0ZS5jYy5sZW5ndGggLSAxOyBpID49IDA7IC0taSkge1xyXG4gICAgICAgIHZhciBjID0gc3RhdGUuY2NbaV07XHJcbiAgICAgICAgaWYgKGMgPT0gcG9wbGV4KSBsZXhpY2FsID0gbGV4aWNhbC5wcmV2O1xyXG4gICAgICAgIGVsc2UgaWYgKGMgIT0gbWF5YmVlbHNlKSBicmVhaztcclxuICAgICAgfVxyXG4gICAgICBpZiAobGV4aWNhbC50eXBlID09IFwic3RhdFwiICYmIGZpcnN0Q2hhciA9PSBcIn1cIikgbGV4aWNhbCA9IGxleGljYWwucHJldjtcclxuICAgICAgaWYgKHN0YXRlbWVudEluZGVudCAmJiBsZXhpY2FsLnR5cGUgPT0gXCIpXCIgJiYgbGV4aWNhbC5wcmV2LnR5cGUgPT0gXCJzdGF0XCIpXHJcbiAgICAgICAgbGV4aWNhbCA9IGxleGljYWwucHJldjtcclxuICAgICAgdmFyIHR5cGUgPSBsZXhpY2FsLnR5cGUsIGNsb3NpbmcgPSBmaXJzdENoYXIgPT0gdHlwZTtcclxuXHJcbiAgICAgIGlmICh0eXBlID09IFwidmFyZGVmXCIpIHJldHVybiBsZXhpY2FsLmluZGVudGVkICsgKHN0YXRlLmxhc3RUeXBlID09IFwib3BlcmF0b3JcIiB8fCBzdGF0ZS5sYXN0VHlwZSA9PSBcIixcIiA/IGxleGljYWwuaW5mbyArIDEgOiAwKTtcclxuICAgICAgZWxzZSBpZiAodHlwZSA9PSBcImZvcm1cIiAmJiBmaXJzdENoYXIgPT0gXCJ7XCIpIHJldHVybiBsZXhpY2FsLmluZGVudGVkO1xyXG4gICAgICBlbHNlIGlmICh0eXBlID09IFwiZm9ybVwiKSByZXR1cm4gbGV4aWNhbC5pbmRlbnRlZCArIGluZGVudFVuaXQ7XHJcbiAgICAgIGVsc2UgaWYgKHR5cGUgPT0gXCJzdGF0XCIpXHJcbiAgICAgICAgcmV0dXJuIGxleGljYWwuaW5kZW50ZWQgKyAoc3RhdGUubGFzdFR5cGUgPT0gXCJvcGVyYXRvclwiIHx8IHN0YXRlLmxhc3RUeXBlID09IFwiLFwiID8gc3RhdGVtZW50SW5kZW50IHx8IGluZGVudFVuaXQgOiAwKTtcclxuICAgICAgZWxzZSBpZiAobGV4aWNhbC5pbmZvID09IFwic3dpdGNoXCIgJiYgIWNsb3NpbmcgJiYgcGFyc2VyQ29uZmlnLmRvdWJsZUluZGVudFN3aXRjaCAhPSBmYWxzZSlcclxuICAgICAgICByZXR1cm4gbGV4aWNhbC5pbmRlbnRlZCArICgvXig/OmNhc2V8ZGVmYXVsdClcXGIvLnRlc3QodGV4dEFmdGVyKSA/IGluZGVudFVuaXQgOiAyICogaW5kZW50VW5pdCk7XHJcbiAgICAgIGVsc2UgaWYgKGxleGljYWwuYWxpZ24pIHJldHVybiBsZXhpY2FsLmNvbHVtbiArIChjbG9zaW5nID8gMCA6IDEpO1xyXG4gICAgICBlbHNlIHJldHVybiBsZXhpY2FsLmluZGVudGVkICsgKGNsb3NpbmcgPyAwIDogaW5kZW50VW5pdCk7XHJcbiAgICB9LFxyXG5cclxuICAgIGVsZWN0cmljSW5wdXQ6IC9eXFxzKig/OmNhc2UgLio/OnxkZWZhdWx0OnxcXHt8XFx9KSQvLFxyXG4gICAgYmxvY2tDb21tZW50U3RhcnQ6IGpzb25Nb2RlID8gbnVsbCA6IFwiLypcIixcclxuICAgIGJsb2NrQ29tbWVudEVuZDoganNvbk1vZGUgPyBudWxsIDogXCIqL1wiLFxyXG4gICAgbGluZUNvbW1lbnQ6IGpzb25Nb2RlID8gbnVsbCA6IFwiLy9cIixcclxuICAgIGZvbGQ6IFwiYnJhY2VcIixcclxuXHJcbiAgICBoZWxwZXJUeXBlOiBqc29uTW9kZSA/IFwianNvblwiIDogXCJqYXZhc2NyaXB0XCIsXHJcbiAgICBqc29ubGRNb2RlOiBqc29ubGRNb2RlLFxyXG4gICAganNvbk1vZGU6IGpzb25Nb2RlXHJcbiAgfTtcclxufSk7XHJcblxyXG5Db2RlTWlycm9yLnJlZ2lzdGVySGVscGVyKFwid29yZENoYXJzXCIsIFwiamF2YXNjcmlwdFwiLCAvW1xcdyRdLyk7XHJcblxyXG5Db2RlTWlycm9yLmRlZmluZU1JTUUoXCJ0ZXh0L2phdmFzY3JpcHRcIiwgXCJqYXZhc2NyaXB0XCIpO1xyXG5Db2RlTWlycm9yLmRlZmluZU1JTUUoXCJ0ZXh0L2VjbWFzY3JpcHRcIiwgXCJqYXZhc2NyaXB0XCIpO1xyXG5Db2RlTWlycm9yLmRlZmluZU1JTUUoXCJhcHBsaWNhdGlvbi9qYXZhc2NyaXB0XCIsIFwiamF2YXNjcmlwdFwiKTtcclxuQ29kZU1pcnJvci5kZWZpbmVNSU1FKFwiYXBwbGljYXRpb24veC1qYXZhc2NyaXB0XCIsIFwiamF2YXNjcmlwdFwiKTtcclxuQ29kZU1pcnJvci5kZWZpbmVNSU1FKFwiYXBwbGljYXRpb24vZWNtYXNjcmlwdFwiLCBcImphdmFzY3JpcHRcIik7XHJcbkNvZGVNaXJyb3IuZGVmaW5lTUlNRShcImFwcGxpY2F0aW9uL2pzb25cIiwge25hbWU6IFwiamF2YXNjcmlwdFwiLCBqc29uOiB0cnVlfSk7XHJcbkNvZGVNaXJyb3IuZGVmaW5lTUlNRShcImFwcGxpY2F0aW9uL3gtanNvblwiLCB7bmFtZTogXCJqYXZhc2NyaXB0XCIsIGpzb246IHRydWV9KTtcclxuQ29kZU1pcnJvci5kZWZpbmVNSU1FKFwiYXBwbGljYXRpb24vbGQranNvblwiLCB7bmFtZTogXCJqYXZhc2NyaXB0XCIsIGpzb25sZDogdHJ1ZX0pO1xyXG5Db2RlTWlycm9yLmRlZmluZU1JTUUoXCJ0ZXh0L3R5cGVzY3JpcHRcIiwgeyBuYW1lOiBcImphdmFzY3JpcHRcIiwgdHlwZXNjcmlwdDogdHJ1ZSB9KTtcclxuQ29kZU1pcnJvci5kZWZpbmVNSU1FKFwiYXBwbGljYXRpb24vdHlwZXNjcmlwdFwiLCB7IG5hbWU6IFwiamF2YXNjcmlwdFwiLCB0eXBlc2NyaXB0OiB0cnVlIH0pO1xyXG5cclxufSk7XHJcbiIsInZhciBtdXNpY1Nob3dDYXNlQXBwID0gYW5ndWxhci5tb2R1bGUoXCJNdXNpY1Nob3dDYXNlQXBwXCIsIFsndWkuY29kZW1pcnJvcicsICduZ1JvdXRlJywgJ3VpLmJvb3RzdHJhcCcsICduZ0RyYWdnYWJsZScsICduZ0Nvb2tpZXMnLCAncGFzY2FscHJlY2h0LnRyYW5zbGF0ZSddKTtcclxuXHJcbm11c2ljU2hvd0Nhc2VBcHAuY29uc3RhbnQoXCJNVVNJQ1wiLCBNVVNJQyk7XHJcbm11c2ljU2hvd0Nhc2VBcHAuY29uc3RhbnQoXCJUSUNLU19QRVJfQkVBVFwiLCA5Nik7XHJcbm11c2ljU2hvd0Nhc2VBcHAuY29uc3RhbnQoXCJTT05HX01BWF9UUkFDS1NcIiwgMzIpO1xyXG5tdXNpY1Nob3dDYXNlQXBwLmNvbnN0YW50KFwibG9jYWxmb3JhZ2VcIiwgbG9jYWxmb3JhZ2UpO1xyXG4iLCJ2YXIgbXVzaWNTaG93Q2FzZUFwcCA9IGFuZ3VsYXIubW9kdWxlKFwiTXVzaWNTaG93Q2FzZUFwcFwiKTtcclxudmFyIGVuVHJhbnNsYXRpb25zID0ge1xyXG4gIG1pZGk6IHtcclxuICAgIHNldHRpbmdzOiAnTUlESSBTZXR0aW5ncycsXHJcbiAgICBpbnB1dHM6ICdJbnB1dHMnLFxyXG4gICAgY29ubmVjdGVkOiAnTUlESSBJbnB1dCBDb25uZWN0ZWQnLFxyXG4gICAgZGlzY29ubmVjdGVkOiAnTUlESSBJbnB1dCBEaXNjb25uZWN0ZWQgKENsaWNrIHRvIHNldHVwKScsXHJcbiAgICBldmVudHM6ICdFdmVudHMnLFxyXG4gICAgb2N0YXZlOiAnQmFzZSBPY3RhdmUnLFxyXG4gICAgdHJhbnNwb3NlOiAnVHJhbnNwb3NlJ1xyXG4gIH0sXHJcbiAgb3Blbl9wcm9qZWN0OiB7XHJcbiAgICBwMTogJ1NlbGVjdCB0aGUgcHJvamVjdCB5b3Ugd2FudCB0byBvcGVuJyxcclxuICAgIHRpdGxlOiAnT3BlbiBQcm9qZWN0J1xyXG4gIH0sXHJcbiAgYXJyYXlfZWRpdG9yOiB7XHJcbiAgICB0b29sdGlwOiB7XHJcbiAgICAgIHJlbW92ZV9pdGVtOiAnUmVtb3ZlcyB0aGUgb2JqZWN0IGZyb20gYXJyYXknLFxyXG4gICAgICBhZGRfaXRlbTogJ0NsaWNrIHRvIGFkZCBhIG5ldyBvYmplY3QgdG8gYXJyYXknLFxyXG4gICAgICBlZGl0X2l0ZW06ICdDbGljayB0byBlZGl0IHRoaXMgb2JqZWN0J1xyXG4gICAgfVxyXG4gIH0sXHJcbiAgaW5kZXg6IHtcclxuICAgIG5vdF9pbXBsZW1lbnRlZDogJ1NvcnJ5LiBOb3QgaW1wbGVtZW50ZWQgWWV0IDpQJyxcclxuICAgIGZpbHRlcjogJ1R5cGUgaGVyZSB0aGUgd29yZCB0byBmaWx0ZXIgb2JqZWN0cycsXHJcbiAgICB0b29sdGlwOiB7XHJcbiAgICAgIHR5cGU6IHtcclxuICAgICAgICBpbnN0cnVtZW50OiAnVGhpcyBpcyBhIHJlc291cmNlIG9iamVjdCBvZiB0eXBlIGluc3RydW1lbnQnLFxyXG4gICAgICAgIHBhdHRlcm46ICdUaGlzIGlzIGEgcmVzb3VyY2Ugb2JqZWN0IG9mIHR5cGUgcGF0dGVybicsXHJcbiAgICAgICAgc29uZzogJ1RoaXMgaXMgYSByZXNvdXJjZSBvYmplY3Qgb2YgdHlwZSBzb25nJyxcclxuICAgICAgICBmeDogJ1RoaXMgaXMgYSByZXNvdXJjZSBvYmplY3Qgb2YgdHlwZSBmeCdcclxuICAgICAgfSxcclxuICAgICAgdHlwZV9wMTogJ1RvIHVzZSB0aGUgcmVzb3VyY2UsIGRyYWcgdGhlbSBmcm9tIGhlcmUgaW50byB5b3VyIGNyZWF0aW9uIG9uIHRoZSByaWdodCcsXHJcbiAgICAgIHR5cGVfcDI6ICdUbyBpbnN0ZWFkLCAqZWRpdCogdGhlIHJlc291cmNlLCBkb3VibGUgY2xpY2sgaXQnLFxyXG4gICAgICBpbmRleDogJ1RoaXMgaXMgdGhlIG9iamVjdCBpbmRleCwgeW91IGNhbiBmaW5kIGhlcmUgeW91ciBjcmFmdGluZyBvdXRwdXRzIGFuZCBpbnB1dHMnXHJcbiAgICB9XHJcbiAgfSxcclxuICBwcm9qZWN0OiB7XHJcbiAgICBiYXNpY19pbmZvOiAnUHJvcGVydGllcycsXHJcbiAgICByZWZlcmVuY2VzOiAnUmVmZXJlbmNlcycsXHJcbiAgICBzZXR0aW5nczogJ1Byb2plY3QgU2V0dGluZ3MnLFxyXG4gICAgJ25ldyc6ICdOZXcgUHJvamVjdCdcclxuICB9LFxyXG4gIG1lbnU6IHtcclxuICAgICduZXcnOiAnRmlsZScsXHJcbiAgICBuZXdfaW5zdHJ1bWVudDogJ05ldyBJbnN0cnVtZW50JyxcclxuICAgIG5ld19wYXR0ZXJuOiAnTmV3IFBhdHRlcm4nLFxyXG4gICAgbmV3X3Nvbmc6ICdOZXcgU29uZycsXHJcbiAgICBuZXdfcHJvamVjdDogJ05ldyBQcm9qZWN0Li4uJyxcclxuICAgIG9wZW5fcHJvamVjdDogJ09wZW4gUHJvamVjdC4uLicsXHJcbiAgICBmaWxlX2ltcG9ydDogJ0ltcG9ydC4uLicsXHJcbiAgICB0b29sczogJ1Rvb2xzJyxcclxuICAgIHRvb2xzX3ByZWZlcmVuY2VzOiAnUHJlZmVyZW5jZXMnLFxyXG4gICAgaGVscF92aWV3X2hlbHA6ICdWaWV3IEhlbHAnLFxyXG4gICAgaGVscF9yZWNpcGVzOiAnUmVjaXBlcycsXHJcbiAgICBoZWxwX3JlY2lwZXNfaW50cm86ICdCYXNpYyBpbnRybyB0b3VyJyxcclxuICAgIGhlbHBfcmVjaXBlc19ob3d0b19jcmVhdGVfc29uZzogJ0hvdyB0byBjcmVhdGUgYSBzb25nJyxcclxuICAgIGhlbHBfcmVjaXBlc19ob3d0b19jcmVhdGVfaW5zdHJ1bWVudDogJ0hvdyB0byBjcmVhdGUgYW4gaW5zdHJ1bWVudCAoc3F1YXJlICsgMiB2b2ljZXMgZWNobyknLFxyXG4gICAgaGVscF9jb250ZXh0dWFsX2hlbHA6ICdDb250ZXh0dWFsIEhlbHAnLFxyXG4gICAgaGVscF93ZWxjb21lOiAnV2VsY29tZSEnLFxyXG4gICAgaGVscF9hYm91dDogJ0Fib3V0IE11c2ljLmpzJyxcclxuICAgIHJlY3ljbGVfYmluOiAnUmVjeWNsZSBCaW4uLi4nLFxyXG4gICAgdG9vbHRpcDoge1xyXG4gICAgICAnbmV3JzogJ1lvdSBjYW4gY3JlYXRlIG5ldyBibGFuayBpdGVtcyBmcm9tIHRoaXMgb3B0aW9uJyxcclxuICAgICAgcHJlZmVyZW5jZXM6ICdZb3UgY2FuIGVkaXQgeW91ciBwcmVmZXJlbmNlcyBoZXJlJyxcclxuICAgICAgaGVscDogJ01lbnUgdG8gYWNjZXNzIGhlbHAgb3B0aW9ucyBhbmQgYWJvdXQnXHJcbiAgICB9LFxyXG4gICAgcHJvamVjdDogJ1Byb2plY3QnLFxyXG4gICAgcHJvamVjdF9zZXR0aW5nczogJ1NldHRpbmdzLi4uJyxcclxuICAgIHByb2plY3RfcmVtb3ZlX3Byb2plY3Q6ICdSZW1vdmUgUHJvamVjdCcsXHJcbiAgICBwcm9qZWN0X2V4cG9ydF9wcm9qZWN0OiAnRXhwb3J0IFByb2plY3QnXHJcbiAgfSxcclxuICBjb250ZXh0dWFsX2hlbHA6IHtcclxuICAgIGVuYWJsZTogJ0VuYWJsZSBDb250ZXh0dWFsIEhlbHAnLFxyXG4gICAgZGlzYWJsZTogJ0Rpc2FibGUgQ29udGV4dHVhbCBIZWxwJ1xyXG4gIH0sXHJcbiAgcmVjeWNsZToge1xyXG4gICAgcDE6ICdUaGlzIGlzIHRoZSByZWN5Y2xlIGJpbiwgZnJvbSBoZXJlLCB5b3UgY2FuIHJlc3RvcmUgdGhlIGl0ZW1zIHRoYXQgaGF2ZSBiZWVuIHJlbW92ZWQnLFxyXG4gICAgcDI6ICdSZW1lbWJlcjogaXRlbXMgaW4gdGhlIHJlY3ljbGUgYmluIHdpbGwgYmUgcGVybWFuZW50bHkgZGVsZXRlZCBpZiBhbmQgd2hlbiBhdmFpbGFibGUgc3RvcmFnZSBzcGFjZSBydW5zIG91dCcsXHJcbiAgICBwMzogJyogRG91YmxlLWNsaWNrIHRoZSBpdGVtIHlvdSB3YW50IHRvIFJFU1RPUkUnLFxyXG4gICAgdGl0bGU6ICdSZWN5Y2xlIEJpbicsXHJcbiAgICBjb21wYWN0X3RpdGxlOiAnUmVjeWNsZSBCaW4nLFxyXG4gICAgY29tcGFjdF9oaW50X3Jlc3RvcmU6ICcqIERvdWJsZS1jbGljayB0aGUgaXRlbSB5b3Ugd2FudCB0byBSRVNUT1JFJyxcclxuICAgIGNvbXBhY3RfaGludF9vcGVuOiAnKiBDbGljayBoZXJlIHRvIG9wZW4gcmVjeWNsZSBiaW4gd2luZG93JyxcclxuICAgIEVNUFRZOiAnRU1QVFknXHJcbiAgfSxcclxuICB3ZWxjb21lOiB7XHJcbiAgICB0aXRsZTogJ1dlbGNvbWUgdG8gTXVzaWMuanM6IDhiaXQgRWRpdGlvbicsXHJcbiAgICBwMTogJ011c2ljLmpzIGlzIGEgd2ViIGFwcGxpY2F0aW9uIHRoYXQgYWxsb3dzIHRoZSBjb21wb3NpdGlvbiBvZiBtZWxvZGllcyBwb3dlcmVkIChvcHRpb25hbGx5KSBieSBqYXZhc2NyaXB0IHByb2dyYW1taW5nJyxcclxuICAgIHAyOiAnVGhpcyBmaXJzdCBiYXNpYyBlZGl0aW9uLCBpcyBmdWxseSBvcmllbnRlZCB0b3dhcmRzIHJldHJvLzhiaXQgbXVzaWMgYnkgcHJvdmlkaW5nIGVsZW1lbnRhbCBvc2NpbGxhdG9ycywgbm9pc2UgZ2VuZXJhdG9ycyBhbmQgYmFzaWMgbW9kdWxhdGlvbiBwYXR0ZXJucycsXHJcbiAgICBwMzogJ0RvIHlvdSB3YW50IGEgYmFzaWMgdG91cj8nLFxyXG4gICAgbmV2ZXJzaG93OiAnTmV2ZXIgc2hvdyB0aGlzIG1lc3NhZ2UgYWdhaW4nXHJcbiAgfSxcclxuICBhYm91dDoge1xyXG4gICAgdGl0bGU6ICdBYm91dCBNdXNpYy5qczogOGJpdCBFZGl0aW9uJyxcclxuICAgIHAzOiAnSW4gdGhlIGxvbmcgdGVybSwgdGhlIGdvYWwgb2YgbXVzaWMuanMgaXMgdG8gY292ZXIgYWxsIHRoZSBsYXllcnMgbmVlZGVkIGJldHdlZW4gSFRNTDUgV2ViIEF1ZGlvIEFQSSBwcm92aWRlZCBieSBicm93c2VycyBhbmQgZnVsbHkgdXNhYmxlIG11c2ljIGNvbXBvc2l0aW9uIGFwcGxpY2F0aW9uIHNpbWlsYXIgdG8ga25vd24gb25lcyBsaWtlIEZMIFN0dWRpbycsXHJcbiAgICBhdXRob3JzOiAnQVVUSE9SUycsXHJcbiAgICBpX2FtOiAnSSBhbSBEYXJpbyBTZW1pbmFyYSwgYnV0IGFsc28gSSBzaG91bGQgZ2l2ZSBjcmVkaXQgdG8gc29tZSBrZXkgbGlicmFyeSBhdXRob3JzOicsXHJcbiAgICBjcmVkaXQ6IHtcclxuICAgICAgbW9oYXlvbmFvOiAnQG1vaGF5b25hbyAoQXV0aG9yIG9mIFRpbWJyZS5qcyknLFxyXG4gICAgICBoaWd1bWE6ICdAaGlndW1hIChBdXRob3Igb2YgV2ViQXVkaW9SZWNvcmRlciknLFxyXG4gICAgICBrcmlzdG9wb2xvdXM6ICdAa3Jpc3RvcG9sb3VzIChBdXRob3Igb2YgQk9PVFNUUkEuMzg2IEJvb3RzdHJhcCBUZW1wbGF0ZSknXHJcbiAgICB9LFxyXG4gICAgY29udHJpYnV0ZTogJ0NPTlRSSUJVVEUnLFxyXG4gICAgY29udGFjdF9tZTogJ0NvbnRhY3QgbWUgYXQgZ2l0aHViJ1xyXG4gIH0sXHJcbiAgY29tbW9uOiB7XHJcbiAgICB5ZXM6ICdZZXMnLFxyXG4gICAgbm86ICdObycsXHJcbiAgICBvazogJ09rJyxcclxuICAgIGRpc21pc3M6ICdEaXNtaXNzJyxcclxuICAgIGNhbmNlbDogJ0NhbmNlbCcsXHJcbiAgICBjcmVhdGU6ICdDcmVhdGUnLFxyXG4gICAgb3BlbjogJ09wZW4nLFxyXG4gICAgbmFtZTogJ05hbWUnLFxyXG4gICAgbGFuZ3VhZ2U6ICdMYW5ndWFnZTonLFxyXG4gICAgbG9hZGVyX2Vycm9yOiAnRXJyb3Igd2hlbiB0cnlpbmcgdG8gbG9hZCBmaWxlJyxcclxuICAgIGNhbnRyZW1vdmVfZXJyb3I6ICdDYW4gbm90IGRlbGV0ZSB0aGUgZmlsZSBpZiBpdCBpcyBiZWluZyB1c2VkJyxcclxuICAgIGNhbnRyZW1vdmVfcHJvamVjdF9lcnJvcjogJ0NhbiBub3QgZGVsZXRlIHRoZSBwcm9qZWN0IGlmIGl0IGlzIGJlaW5nIHVzZWQgaW4gYW5vdGhlciBwcm9qZWN0JyxcclxuICAgIGVycm9yX3RpdGxlOiAnRXJyb3InLFxyXG4gICAgSEVMUDogJ0hFTFAnLFxyXG4gICAgbW9yZTogJ21vcmUnLFxyXG4gICAgcmVtb3ZlOiAnUmVtb3ZlJyxcclxuICAgICdleHBvcnQnOiAnRXhwb3J0JyxcclxuICAgIHJlc2V0OiAnUmVzZXQnLFxyXG4gICAgcGxheTogJ1BsYXknLFxyXG4gICAgcGF1c2U6ICdQYXVzZScsXHJcbiAgICBzdG9wOiAnU3RvcCcsXHJcbiAgICByZWNvcmQ6ICdSZWMuJyxcclxuICAgIGJwbTogJ0JwbScsXHJcbiAgICBicG1fbGM6ICdicG0nLFxyXG4gICAgYWRkOiAnQWRkJyxcclxuICAgIHRvb2x0aXA6IHtcclxuICAgICAgcGxheWluZ19zcGVlZDogJ1BsYXlpbmcgc3BlZWQsIG51bWJlciBvZiBiZWF0cyBwZXIgbWludXRlJyxcclxuICAgICAgcmVtb3ZlX2l0ZW06ICdSZW1vdmVzIGl0ZW0sIHlvdSBjYW4gcmVzdG9yZSBpdCBmcm9tIHJlY3ljbGUgYmluJyxcclxuICAgICAgbW9kdWxhdGlvbjogJ1lvdSBjYW4gc2V0dXAgdGhlIGVmZmVjdHMgbW9kdWxhdGlvbiBmb3Ige3tuYW1lfX0gaGVyZS4gSWYgeW91IGxlYXZlIGl0IGVtcHR5LCB0aGVyZSB3aWxsIGJlIG5vIG1vZHVsYXRpb24gYXQgYWxsJ1xyXG4gICAgfSxcclxuICAgIG5ld19pbnN0cnVtZW50OiAnTmV3IEluc3RydW1lbnQnLFxyXG4gICAgbmV3X3BhdHRlcm46ICdOZXcgUGF0dGVybicsXHJcbiAgICBuZXdfc29uZzogJ05ldyBTb25nJyxcclxuICAgIG1vZHVsYXRpb246ICd7e25hbWV9fSBNb2R1bGF0aW9uJ1xyXG4gIH0sXHJcbiAgaGVscDoge1xyXG4gICAgRkxPVzogJ01VU0lDLkpTIEZMT1cnLFxyXG4gICAgUkVDSVBFUzogJ1JFQ0lQRVMnLFxyXG4gICAgcDE6ICdJbiBvcmRlciB0byBjcmVhdGUgYSBzb25nLCB5b3UgbmVlZCB0byBjcmFmdCBpdCwgYW5kIGNyYWZ0IHRoZSBtYXRlcmlhbHMuJyxcclxuICAgIHAyOiAnQWN0dWFsbHksIHRoZXJlIGFyZSB0aHJlZSB0eXBlcyBvZiBjcmFmdGFibGUgcmVzb3VyY2VzOiBpbnN0cnVtZW50cywgcGF0dGVybnMgYW5kIHNvbmdzJyxcclxuICAgIHAzOiAnV2hpbGUgdGhlIHJpZ2h0IHNlY3Rpb24gc2hvd3MgdGhlIGl0ZW0gYmVpbmcgY3JhZnRlZC4gVGhlIGxlZnQgcGFubmVsIHNob3dzIHRoZSBjcmFmdGluZyBtYXRlcmlhbHMnLFxyXG4gICAgcDQ6ICdZb3UgY2FuIGRyb3AgcmVzb3VyY2VzIChpbnN0cnVtZW50cyBvciBwYXR0ZXJucykgaW50byBkcm9wIHpvbmVzLCB3aGVuIGFwcGxpY2FibGUnLFxyXG4gICAgcDU6ICdUbyB1c2UgdGhlIHJlc291cmNlIG9uIHRoZSBpdGVtIGJlaW5nIGNyYWZ0ZWQsIHlvdSBuZWVkIHRvIGRyYWcgaXQgdG8gYW55IG9mIHRoZSBkcm9wem9uZXMnLFxyXG4gICAgcDY6ICdGb2xsb3dpbmcgdGhpcyBwcmluY2lwbGUsIHlvdSBjYW4gdXNlIGluc3RydW1lbnRzIHRvIGNvbXBvc2UgcGF0dGVybnMsIGFuZCBmaW5hbGx5LCBwYXR0ZXJucyB0byBjb21wb3NlIHNvbmdzJyxcclxuICAgIHA3OiAnRnVydGhlcm1vcmUsIHlvdSBjYW4gY29tcG9zZSB5b3VyIGN1c3RvbSBpbnN0cnVtZW50cywgZnJvbSBhIHJhbmdlIG9mIGVmZmVjdHM6JyxcclxuICAgIHA4OiAnRG9uXFwndCB3b3JyeSwgaWYgeW91IGRvblxcJ3QgZ2V0IGl0IGF0IGZpcnN0LCB0aGVyZSBhcmUgcmVjaXBlcyBhbmQgY29udGV4dHVhbCBoZWxwIGF0IHlvdXIgZGlzcG9zYWwnLFxyXG4gICAgcmVjaXBlczoge1xyXG4gICAgICBwMTogJ1JlY2lwZXMgYXJlIGludGVyYWN0aXZlIG1pbmktdHV0b3JpYWxzIG9uIGhvdyB0byBjcmFmdCBhbnl0aGluZyBoZXJlIChleGFtcGxlOiBhIHNvbmcpJyxcclxuICAgICAgcDI6ICdTb21lIHR1dG9yaWFscyAoc3VjaCBhcyBcXCdpbnRyb1xcJykgb25seSBleHBsYWluIGEgZmV3IHRoaW5ncyBhYm91dCB0aGUgbWFpbiBpbnRlcmZhY2UnLFxyXG4gICAgICBwMzogJ0l0XFwncyByZWNvbW1lbmRlZCB0byBmb2xsb3cgdGhlc2UgcmVjaXBlcyBpZiB5b3UgZG9uXFwndCBrbm93IHdoYXQgdG8gZG8gb3IgaG93IHRvIHN0YXJ0IHVzaW5nIHRoZSBhcHAuIFRoZSByZWNpcGVzIGFyZSByZWFjaGFibGUgZnJvbSB0aGUgaGVscCBtZW51ICg/KSdcclxuICAgIH0sXHJcbiAgICBDT05URVhUVUFMX0hFTFA6IFwiQ09OVEVYVFVBTCBIRUxQXCIsXHJcbiAgICBjb250ZXh0dWFsX2hlbHA6IHtcclxuICAgICAgcDE6ICdUaGVyZSBpcyBhIHNlcmllcyBvZiB0b29sdGlwcyBleHBsYWluaW5nIG9uIGRldGFpbCB0aGUgZGlmZmVyZW50IGZlYXR1cmVzIG9mIHRoZSBhcHAuIFlvdSBjYW4gZW5hYmxlIG9yIGRpc2FibGUgdGhlc2UgdG9vbHRpcHMgYnkgY2xpY2tpbmcgb24gdGhlIGJveCBpbiB0aGUgbGVmdC1ib3R0b20gY29ybmVyIG9mIHRoZSBzY3JlZW4nXHJcbiAgICB9XHJcbiAgfSxcclxuICBzdGFjazoge1xyXG4gICAgZHJvcF9lbGVtZW50c19oZXJlOiBcImRyb3AgbmV3IGVsZW1lbnRzIGhlcmVcIixcclxuICAgIHRvb2x0aXA6IHtcclxuICAgICAgeW91X2Nhbl9kcm9wX25ld19lZmZlY3RzX2hlcmU6ICdZb3UgY2FuIGRyb3AgbmV3IGVmZmVjdHMgZnJvbSB0aGUgb2JqZWN0IGluZGV4IGhlcmUnLFxyXG4gICAgICByZW1vdmU6ICdSZW1vdmVzIHRoZSBlZmZlY3QgZWxlbWVudCBmcm9tIHRoZSBwaXBlbGluZScsXHJcbiAgICAgIHVwOiAnQ2hhbmdlcyB0aGUgb3JkZXIgb2YgdGhlIGVsZW1lbnQsIHRvIGV4ZWN1dGUgaXQgQUZURVInLFxyXG4gICAgICBkb3duOiAnQ2hhbmdlcyB0aGUgb3JkZXIgb2YgdGhlIGVsZW1lbnQsIHRvIGV4ZWN1dGUgaXQgQkVGT1JFJyxcclxuICAgICAgZXhwYW5kOiAnRXhwYW5kL1NocmluayB0aGUgZGlzcGxheSBvZiBhZHZhbmNlZCBvcHRpb25zIGZvciB0aGUgZWxlbWVudCdcclxuICAgIH1cclxuICB9LFxyXG4gIGVkaXRvcjoge1xyXG4gICAga2V5Ym9hcmRfaW5zdHJ1Y3Rpb25zOiAnVXNlIFpYQ1ZCTk0ga2V5cyB0byBwbGF5IGluc3RydW1lbnQsIG9yIGhvdmVyIG1vdXNlIG9uIHZpcnR1YWwga2V5Ym9hcmQnLFxyXG4gICAgdG9vbHRpcDoge1xyXG4gICAgICB0ZXN0X2luc3RydW1lbnRfaGVyZTogJ1Rlc3QgdGhlIGluc3RydW1lbnQgaGVyZSwgdXNpbmcgbW91c2Ugb3Iga2V5Ym9hcmQnLFxyXG4gICAgICB0eXBlX2hlcmVfaW5zdHJ1bWVudDogJ1R5cGUgaGVyZSB0aGUgbmFtZSBvZiB0aGUgaW5zdHJ1bWVudCdcclxuICAgIH1cclxuICB9LFxyXG4gIHBhdHRlcm46IHtcclxuICAgIHRyYWNrX211dGVkOiAnTXV0ZWQnLFxyXG4gICAgdHJhY2tfc29sbzogJ1NvbG8nLFxyXG4gICAgbWVhc3VyZV9iZWF0czogJ01lYXN1cmUgYmVhdHMnLFxyXG4gICAgYW1vdW50X2JlYXRzOiAnQW1vdW50IG9mIGJlYXRzIHBlciBtZWFzdXJlJyxcclxuICAgIG1lYXN1cmVfY291bnQ6ICdNZWFzdXJlIGNvdW50JyxcclxuICAgIHpvb21fbGV2ZWw6ICdab29tIGxldmVsJyxcclxuICAgIHRvdGFsX21lYXN1cmVzOiAnVG90YWwgY291bnQgb2YgbWVhc3VyZXMgb24gcGF0dGVybicsXHJcbiAgICB0cmFja3M6ICdUcmFja3MnLFxyXG4gICAgZHJvcF9pbnN0cnVtZW50OiAnZHJvcCBpbnN0cnVtZW50IGhlcmUnLFxyXG4gICAgdG9vbHRpcDoge1xyXG4gICAgICBjaGFuZ2VfbmFtZTogJ0NoYW5nZSB0aGUgcGF0dGVybiBuYW1lJyxcclxuICAgICAgem9vbV9sZXZlbDogJ1pvb20gbGV2ZWwgZm9yIGFsbCB0cmFja3MnLFxyXG4gICAgICBwbGF5OiAnQ2xpY2sgdG8gcGxheSB0aGUgcGF0dGVybicsXHJcbiAgICAgIHN0b3A6ICdDbGljayB0byBzdG9wIHBsYXlpbmcnLFxyXG4gICAgICByZW1vdmVfdHJhY2s6ICdDbGljayB0byByZW1vdmUgdHJhY2snLFxyXG4gICAgICBjb21wYWN0X3ZpZXdfcDE6ICdUcmFjayBjb21wYWN0IHZpZXc6IHNlZSB0aGUgbm90ZXMgd2l0aG91dCBoYXZpbmcgdG8gZXhwYW5kIHRoZSB0cmFjay4nLFxyXG4gICAgICBjb21wYWN0X3ZpZXdfcDI6ICdDbGljayBoZXJlIHRvIGV4cGFuZCB0aGUgdHJhY2snLFxyXG4gICAgICBkcm9wX3pvbmU6ICdJbnN0cnVtZW50IGRyb3Agem9uZSwgZHJvcCBpbnN0cnVtZW50cyBmcm9tIHRoZSBsZWZ0IHBhbmVsIHRvIHVzZSBpdCBvbiB0aGUgdHJhY2snLFxyXG4gICAgICBlZGl0b3Jfbm90ZXNfcDE6ICdOb3RlIGFyZWEsIGFkZCB0aGUgbm90ZXMgaGVyZTonLFxyXG4gICAgICBlZGl0b3Jfbm90ZXNfcDI6ICdDbGljayB0byBhZGQgYSBuZXcgb25lLCBhbmQgZHJhZyB0byBjaGFuZ2UgdmFsdWUvdGltZScsXHJcbiAgICAgIGVkaXRvcl9ub3Rlc19wMzogJ0NUUkwrWiB0byB1bmRvIGNoYW5nZXMnLFxyXG4gICAgICBlZGl0b3Jfbm90ZXNfcDQ6ICdDVFJMK1kgdG8gcmVkbyBjaGFuZ2VzJyxcclxuICAgICAgYWRkX3RyYWNrOiAnQ2xpY2sgdGhpcyBidXR0b24gdG8gYWRkIG5ldyBlbXB0eSB0cmFja3MnLFxyXG4gICAgICBub3RlX2V2ZW50X3AxOiAnTm90ZSBldmVudC4gRHJhZyBmcm9tIHRoZSByaWdodCBlZGdlIHRvIGNoYW5nZSB0aGUgZHVyYXRpb24gb3IgcHJlc3MgZGVsZXRlIGtleSB0byByZW1vdmUnLFxyXG4gICAgICBub3RlX2V2ZW50X3AyOiAnRHJhZyB0byBjaGFuZ2UgdGhlIHZhbHVlIGFuZC9vciBzdGFydGluZyB0aW1lJyxcclxuICAgICAgbm90ZV9ldmVudF9wMzogJ05vdGUgZXZlbnQuIENsaWNrIHRvIHNlbGVjdCBhbmQgZWRpdCBpdCcsXHJcbiAgICAgIG11dGVkOiAnRGlzYWJsZSB0aGUgdHJhY2sgaW4gb3JkZXIgdG8gc2lsZW5jZSBpdCcsXHJcbiAgICAgIHNvbG86ICdJc29sYXRlIHRoZSB0cmFjayBzbyB0aGF0IGl0IGlzIHRoZSBvbmx5IG9uZSB0aGF0IHBsYXlzLiBDYW4gYmUgbW9yZSB0aGFuIG9uZScsXHJcbiAgICAgIGluc3RydW1lbnRfZWRpdDogXCJDbGljayB0aGlzIGJ1dHRvbiB0byBlZGl0IHRoZSBpbnN0cnVtZW50XCJcclxuICAgIH1cclxuICB9LFxyXG4gIHNvbmc6IHtcclxuICAgIGRyb3BfcGF0dGVybjogXCJEcm9wIHBhdHRlcm4gaGVyZVwiLFxyXG4gICAgdG9vbHRpcDoge1xyXG4gICAgICBtZWFzdXJlX2JlYXRzOiBcIkFtb3VudCBvZiBiZWF0cyBwZXIgbWVhc3VyZS4gTWFrZSBzdXJlIHRoaXMgdmFsdWUgbWF0Y2ggdGhlIG1lYXN1cmUgbGVuZ3RoIG9mIHRoZSBwYXR0ZXJuc1wiLFxyXG4gICAgICBwbGF5OiBcIkNsaWNrIHRvIHBsYXkvcGF1c2UgdGhlIHNvbmdcIixcclxuICAgICAgc3RvcDogXCJDbGljayB0byBzdG9wIHBsYXlpbmcgdGhlIHNvbmdcIixcclxuICAgICAgZG93bmxvYWQ6IFwiQ2xpY2sgdG8gcmVjb3JkIHRoZSBzb25nIGFuZCBkb3dubG9hZCB0aGUgYXVkaW8gZmlsZVwiLFxyXG4gICAgICBkcm9wX3BhdHRlcm46IFwiRHJvcCB6b25lIGZvciBwYXR0ZXJucywgZHJvcCBoZXJlIGEgcGF0dGVybiBmcm9tIHRoZSBwYW5lbCBvbiB0aGUgbGVmdFwiLFxyXG4gICAgICByZW1vdmVfYmxvY2s6IFwiQ2xpY2sgaGVyZSB0byByZW1vdmUgdGhlIHBhdHRlcm4gYW5kIGxlYXZlIHRoZSBibG9jayBlbXB0eVwiLFxyXG4gICAgICBlZGl0X2Jsb2NrOiBcIkNsaWNrIGhlcmUgdG8gZWRpdCB0aGUgcGF0dGVybiB1c2VkIGJ5IHRoaXMgYmxvY2tcIlxyXG4gICAgfVxyXG4gIH0sXHJcbiAgQlVUVE9OX0xBTkdfRU46ICdFbmdsaXNoJyxcclxuICBCVVRUT05fTEFOR19FUzogJ1NwYW5pc2gnXHJcblxyXG59O1xyXG5cclxubXVzaWNTaG93Q2FzZUFwcC5jb25zdGFudChcImVuVHJhbnNsYXRpb25zXCIsIGVuVHJhbnNsYXRpb25zKTtcclxuIiwidmFyIG11c2ljU2hvd0Nhc2VBcHAgPSBhbmd1bGFyLm1vZHVsZShcIk11c2ljU2hvd0Nhc2VBcHBcIik7XHJcbnZhciBlc1RyYW5zbGF0aW9ucyA9IHtcclxuICBtaWRpOiB7XHJcbiAgICBzZXR0aW5nczogJ09wY2lvbmVzIGRlIE1JREknLFxyXG4gICAgaW5wdXRzOiAnRW50cmFkYXMnLFxyXG4gICAgY29ubmVjdGVkOiAnRW50cmFkYSBNSURJIENvbmVjdGFkYScsXHJcbiAgICBkaXNjb25uZWN0ZWQ6ICdFbnRyYWRhIE1JREkgRGVzY29uZWN0YWRhIChDbGljayBwYXJhIGNvbmZpZ3VyYXIpJyxcclxuICAgIGV2ZW50czogJ0V2ZW50b3MnLFxyXG4gICAgb2N0YXZlOiAnT2N0YXZhIEJhc2UnLFxyXG4gICAgdHJhbnNwb3NlOiAnVHJhbnNwb3NpY2lvbidcclxuICB9LFxyXG4gIG9wZW5fcHJvamVjdDoge1xyXG4gICAgcDE6ICdTZWxlY2Npb25hIGVsIHByb3llY3RvIHF1ZSBxdWllcmFzIGFicmlyJyxcclxuICAgIHRpdGxlOiAnQWJyaXIgUHJveWVjdG8nXHJcbiAgfSxcclxuICBhcnJheV9lZGl0b3I6IHtcclxuICAgIHRvb2x0aXA6IHtcclxuICAgICAgcmVtb3ZlX2l0ZW06ICdFbGltaW5hIGVsIG9iamV0byBkZSBsYSBjb2xlY2Npb24nLFxyXG4gICAgICBhZGRfaXRlbTogJ0NsaWNrIHBhcmEgYWdyZWdhciB1biBudWV2byBvYmpldG8gYSBsYSBjb2xlY2Npb24nLFxyXG4gICAgICBlZGl0X2l0ZW06ICdDbGljayBwYXJhIGVkaXRhciBlc3RlIG9iamV0bydcclxuICAgIH1cclxuICB9LFxyXG4gIGluZGV4OiB7XHJcbiAgICBub3RfaW1wbGVtZW50ZWQ6ICdEaXNjdWxwYSwgZnVuY2lvbmFsaWRhZCBubyBpbXBsZW1lbnRhZGEnLFxyXG4gICAgZmlsdGVyOiAnVGlwZWEgYXF1aSBsYXMgcGFsYWJyYXMgY2xhdmUgcGFyYSBmaWx0cmFyIGxvcyBvYmpldG9zJyxcclxuICAgIHRvb2x0aXA6IHtcclxuICAgICAgdHlwZToge1xyXG4gICAgICAgIGluc3RydW1lbnQ6ICdFc3RlIGVzIHVuIHJlY3Vyc28gZGVsIHRpcG8gaW5zdHJ1bWVudG8nLFxyXG4gICAgICAgIHBhdHRlcm46ICdFc3RlIGVzIHVuIHJlY3Vyc28gZGVsIHRpcG8gcGF0cm9uJyxcclxuICAgICAgICBzb25nOiAnRXN0ZSBlcyB1biByZWN1cnNvIGRlbCB0aXBvIGNhbmNpb24nLFxyXG4gICAgICAgIGZ4OiAnRXN0ZSBlcyB1biByZWN1cnNvIGRlbCB0aXBvIGZ4IChlZmVjdG8pJ1xyXG4gICAgICB9LFxyXG4gICAgICB0eXBlX3AxOiAnUGFyYSB1c2FyIGVzdGUgcmVjdXJzbywgYXJyYXN0cmFsbyBkZXNkZSBhcXVpIGhhc3RhIHR1IGNyZWFjaW9uJyxcclxuICAgICAgdHlwZV9wMjogJ1BhcmEsIGVuIGx1Z2FyIGRlIGVzbywgZWRpdGFybG8sIGhheiBkb2JsZSBjbGljayBlbiBlbCcsXHJcbiAgICAgIGluZGV4OiAnRXN0ZSBlcyBlbCBpbmRpY2UgZGUgb2JqZXRvcywgcHVlZGVzIGVuY29udHJhciB0dXMgbWF0ZXJpYWxlcyB5IHByb2R1Y3RvcyBsaXN0YWRvcyBhcXVpJ1xyXG4gICAgfVxyXG4gIH0sXHJcbiAgcHJvamVjdDoge1xyXG4gICAgYmFzaWNfaW5mbzogJ1Byb3BpZWRhZGVzIGRlbCBwcm95ZWN0bycsXHJcbiAgICByZWZlcmVuY2VzOiAnUmVmZXJlbmNpYXMnLFxyXG4gICAgc2V0dGluZ3M6ICdDb25maWd1cmFjaW9uIGRlbCBQcm95ZWN0bycsXHJcbiAgICAnbmV3JzogJ051ZXZvIFByb3llY3RvJ1xyXG4gIH0sXHJcbiAgbWVudToge1xyXG4gICAgJ25ldyc6ICdBcmNoaXZvJyxcclxuICAgIG5ld19pbnN0cnVtZW50OiAnTnVldm8gSW5zdHJ1bWVudG8nLFxyXG4gICAgbmV3X3BhdHRlcm46ICdOdWV2byBQYXRyb24nLFxyXG4gICAgbmV3X3Nvbmc6ICdOdWV2YSBDYW5jaW9uJyxcclxuICAgIG5ld19wcm9qZWN0OiAnTnVldm8gUHJveWVjdG8uLi4nLFxyXG4gICAgb3Blbl9wcm9qZWN0OiAnQWJyaXIgUHJveWVjdG8uLi4nLFxyXG4gICAgZmlsZV9pbXBvcnQ6ICdJbXBvcnRhci4uLicsXHJcbiAgICB0b29sczogJ0hlcnJhbWllbnRhcycsXHJcbiAgICB0b29sc19wcmVmZXJlbmNlczogJ1ByZWZlcmVuY2lhcycsXHJcbiAgICBoZWxwX3ZpZXdfaGVscDogJ1ZlciBQYWdpbmEgZGUgQXl1ZGEnLFxyXG4gICAgaGVscF9yZWNpcGVzOiAnUmVjZXRhcycsXHJcbiAgICBoZWxwX3JlY2lwZXNfaW50cm86ICdSZWNvcnJpZG8gSW50cm9kdWN0b3JpbycsXHJcbiAgICBoZWxwX3JlY2lwZXNfaG93dG9fY3JlYXRlX3Nvbmc6ICdDb21vIGNyZWFyIHVuYSBjYW5jaW9uJyxcclxuICAgIGhlbHBfcmVjaXBlc19ob3d0b19jcmVhdGVfaW5zdHJ1bWVudDogJ0NvbW8gY3JlYXIgdW4gaW5zdHJ1bWVudG8gKGN1YWRyYWRhICsgZWNvIGEgZG9zIHZvY2VzKScsXHJcbiAgICBoZWxwX2NvbnRleHR1YWxfaGVscDogJ0F5dWRhIENvbnRleHR1YWwnLFxyXG4gICAgaGVscF93ZWxjb21lOiAnwqFCaWVudmVuaWRvIScsXHJcbiAgICBoZWxwX2Fib3V0OiAnQWNlcmNhIGRlIE11c2ljLmpzJyxcclxuICAgIHJlY3ljbGVfYmluOiAnUGFwZWxlcmEgZGUgUmVjaWNsYWplLi4uJyxcclxuICAgIHRvb2x0aXA6IHtcclxuICAgICAgJ25ldyc6ICdQdWVkZXMgY3JlYXIgbnVldm9zIGl0ZW1zIGVuIGJsYW5jbyBkZXNkZSBlc3RhIG9wY2lvbicsXHJcbiAgICAgIHByZWZlcmVuY2VzOiAnUHVlZGVzIGVkaXRhciB0dXMgcHJlZmVyZW5jaWFzIGFxdWknLFxyXG4gICAgICBoZWxwOiAnTWVudSBwYXJhIGFjY2VkZXIgYSBsYXMgb3BjaW9uZXMgZGUgYXl1ZGEgeSAqQWNlcmNhIERlKidcclxuICAgIH0sXHJcbiAgICBwcm9qZWN0OiAnUHJveWVjdG8nLFxyXG4gICAgcHJvamVjdF9zZXR0aW5nczogJ0NvbmZpZ3VyYWNpb24uLi4nLFxyXG4gICAgcHJvamVjdF9yZW1vdmVfcHJvamVjdDogJ0VsaW1pbmFyIFByb3llY3RvJyxcclxuICAgIHByb2plY3RfZXhwb3J0X3Byb2plY3Q6ICdFeHBvcnRhciBQcm95ZWN0bydcclxuICB9LFxyXG4gIGNvbnRleHR1YWxfaGVscDoge1xyXG4gICAgZW5hYmxlOiAnQWN0aXZhciBBeXVkYSBDb250ZXh0dWFsJyxcclxuICAgIGRpc2FibGU6ICdEZXNhY3RpdmFyIEF5dWRhIENvbnRleHR1YWwnXHJcbiAgfSxcclxuICByZWN5Y2xlOiB7XHJcbiAgICBwMTogJ0VzdGEgZXMgbGEgcGFwZWxlcmEgZGUgcmVjaWNsYWplLCBkZXNkZSBhcXVpIHB1ZWRlcyByZXN0YXVyYXIgbG9zIGVsZW1lbnRvcyBxdWUgaGFuIHNpZG8gZWxpbWluYWRvcycsXHJcbiAgICBwMjogJ1JlY3VlcmRhIHF1ZSBsb3MgZWxlbWVudG9zIGVuIGxhIHBhcGVsZXJhIHNlIGVsaW1pbmFyYW4gcGVybWFuZW50ZW1lbnRlIGN1YW5kbyBzZSBhZ290ZSBlbCBlc3BhY2lvIGRpc3BvbmlibGUnLFxyXG4gICAgcDM6ICcqIEhheiBkb2JsZS1jbGljayBlbiBlbCBlbGVtZW50byBxdWUgcXVpZXJhcyBSRVNUQVVSQVInLFxyXG4gICAgdGl0bGU6ICdQYXBlbGVyYSBkZSBSZWNpY2xhamUnLFxyXG4gICAgY29tcGFjdF90aXRsZTogJ1BhcGVsZXJhIGRlIFIuJyxcclxuICAgIGNvbXBhY3RfaGludF9yZXN0b3JlOiAnKiBIYXogZG9ibGUtY2xpY2sgZW4gZWwgZWxlbWVudG8gcXVlIHF1aWVyYXMgUkVTVEFVUkFSJyxcclxuICAgIGNvbXBhY3RfaGludF9vcGVuOiAnKiBIYXogY2xpY2sgYXF1aSBwYXJhIGFicmlyIGxhIHBhcGVsZXJhIGRlIHJlY2ljbGFqZScsXHJcbiAgICBFTVBUWTogJ1ZhY2lhJ1xyXG4gIH0sXHJcbiAgd2VsY29tZToge1xyXG4gICAgdGl0bGU6ICdCaWVudmVuaWRvIGEgTXVzaWMuanM6IEVkaWNpb24gZGUgOGJpdCcsXHJcbiAgICBwMTogJ011c2ljLmpzIGVzIHVuYSBhcGxpY2FjaW9uIHdlYiBxdWUgcGVybWl0ZSBjb21wb25lciBtdXNpY2EgY29uIGVsIHBvZGVyIGRlIGphdmFzY3JpcHQgKG9wY2lvbmFsKScsXHJcbiAgICBwMjogJ0xhIHByaW1lcmEgdmVyc2lvbiBlc3RhIHRvdGFsbWVudGUgb3JpZW50YWRhIGEgbGEgbXVzaWNhIHJldHJvLzhiaXQgbWVkaWFudGUgb3NjaWxhZG9yZXMgZWxlbWVudGFsZXMsIGdlbmVyYWRvcmVzIGRlIHJ1aWRvIHkgcGF0cm9uZXMgZGUgbW9kdWxhY2lvbicsXHJcbiAgICBwMzogJ8K/UXVpZXJlcyByZWFsaXphciB1biByZWNvcnJpZG8gYmFzaWNvPycsXHJcbiAgICBuZXZlcnNob3c6ICdOdW5jYSBtb3N0cmFyIGVzdGUgbWVuc2FqZSBkZSBudWV2bydcclxuICB9LFxyXG4gIGFib3V0OiB7XHJcbiAgICB0aXRsZTogJ0FjZXJjYSBkZSBNdXNpYy5qczogRWRpY2lvbiBkZSA4Yml0JyxcclxuICAgIHAzOiAnQSBsYXJnbyBwbGF6bywgZWwgb2JqZXRpdm8gZGUgbXVzaWMuanMgZXMgY3VicmlyIHRvZGFzIGxhcyBjYXBhcyBuZWNlc2FyaWFzIGVudHJlIGVsIEFQSSBkZSBXZWIgQXVkaW8gcHJvdmlzdGEgcMOyciBsb3MgbmF2ZWdhZG9yZXMgeSB1bmEgc29sdWNpb24gY29tcGxldGEgZGUgY29tcG9zaWNpb24gbXVzaWNhbCBzaW1pbGFyIGEgbGFzIG1hcyBjb25vY2lkYXMgY29tbyBwb3IgZWogRkwgU3R1ZGlvJyxcclxuICAgIGF1dGhvcnM6ICdBVVRPUkVTJyxcclxuICAgIGlfYW06ICdZbyBzb3kgRGFyaW8gU2VtaW5hcmEsIHBlcm8gdGFtYmllbiB0ZW5nbyBxdWUgZGFyIGNyZWRpdG8gYSBhdXRvcmVzIGRlIHZhcmlhcyBsaWJyZXJpYXMgcXVlIHNvbiBjbGF2ZTonLFxyXG4gICAgY3JlZGl0OiB7XHJcbiAgICAgIG1vaGF5b25hbzogJ0Btb2hheW9uYW8gKEF1dG9yIGRlIFRpbWJyZS5qcyknLFxyXG4gICAgICBoaWd1bWE6ICdAaGlndW1hIChBdXRvciBkZSBXZWJBdWRpb1JlY29yZGVyKScsXHJcbiAgICAgIGtyaXN0b3BvbG91czogJ0BrcmlzdG9wb2xvdXMgKEF1dG9yIGRlIGxhIHBsYW50aWxsYSBkZSBib290c3RyYXAgQk9PVFNUUkEuMzg2KSdcclxuICAgIH0sXHJcbiAgICBjb250cmlidXRlOiAnQ09NTyBDT05UUklCVUlSJyxcclxuICAgIGNvbnRhY3RfbWU6ICdDb250YWN0YW1lIGEgdHJhdmV6IGRlIGdpdGh1YidcclxuICB9LFxyXG4gIGNvbW1vbjoge1xyXG4gICAgeWVzOiAnU2knLFxyXG4gICAgbm86ICdObycsXHJcbiAgICBvazogJ0FjZXB0YXInLFxyXG4gICAgZGlzbWlzczogJ0NlcnJhcicsXHJcbiAgICBjYW5jZWw6ICdDYW5jZWxhcicsXHJcbiAgICBjcmVhdGU6ICdDcmVhcicsXHJcbiAgICBvcGVuOiAnQWJyaXInLFxyXG4gICAgbmFtZTogJ05vbWJyZScsXHJcbiAgICBsb2FkZXJfZXJyb3I6ICdFcnJvciBhbCBpbnRlbnRhciBjYXJnYXIgZWwgYXJjaGl2bycsXHJcbiAgICBjYW50cmVtb3ZlX2Vycm9yOiAnTm8gc2UgcHVlZGUgZWxpbWluYXIgZWwgYXJjaGl2byBzaSBlc3RhIHNpZW5kbyB1dGlsaXphZG8nLFxyXG4gICAgY2FudHJlbW92ZV9wcm9qZWN0X2Vycm9yOiAnTm8gc2UgcHVlZGUgZWxpbWluYXIgZWwgcHJveWVjdG8gc2kgZXN0YSBzaWVuZG8gdXNhZG8gZGVzZGUgb3RybyBwcm95ZWN0bycsXHJcbiAgICBlcnJvcl90aXRsZTogJ0Vycm9yJyxcclxuICAgIGxhbmd1YWdlOiAnSWRpb21hOicsXHJcbiAgICBIRUxQOiAnQVlVREEnLFxyXG4gICAgbW9yZTogJ21hcycsXHJcbiAgICByZW1vdmU6ICdFbGltaS4nLFxyXG4gICAgJ2V4cG9ydCc6ICdFeHBvcnRhcicsXHJcbiAgICByZXNldDogJ0ZhYnIuJyxcclxuICAgIHBsYXk6ICdSZXByb2QuJyxcclxuICAgIHBhdXNlOiAnUGF1c2FyJyxcclxuICAgIHN0b3A6ICdEZXRlbmVyJyxcclxuICAgIHJlY29yZDogJ1JlYy4nLFxyXG4gICAgYnBtOiAnUHBtJyxcclxuICAgIGJwbV9sYzogJ3BwbScsXHJcbiAgICBhZGQ6ICdBZ3JlZy4nLFxyXG4gICAgdG9vbHRpcDoge1xyXG4gICAgICBwbGF5aW5nX3NwZWVkOiAnVmVsb2NpZGFkIGRlIHJlcHJvZHVjY2lvbiwgY2FudGlkYWQgZGUgcHVsc29zIHBvciBtaW51dG8nLFxyXG4gICAgICByZW1vdmVfaXRlbTogJ0VsaW1pbmEgZWwgZWxlbWVudG8sIHB1ZWRlcyByZXN0YXVyYXJsbyBkZXNkZSBsYSBwYXBlbGVyYSBkZSByZWNpY2xhamUnLFxyXG4gICAgICBtb2R1bGF0aW9uOiAnUHVlZGVzIGNvbmZpZ3VyYXIgbG9zIGVmZWN0b3MgZGUgbW9kdWxhY2lvbiBhcXVpLiBTaSBsbyBkZWphcyB2YWNpbywgbm8gaGFicmEgbW9kdWxhY2lvbidcclxuICAgIH0sXHJcbiAgICBuZXdfaW5zdHJ1bWVudDogJ051ZXZvIEluc3RydW1lbnRvJyxcclxuICAgIG5ld19wYXR0ZXJuOiAnTnVldm8gUGF0cm9uJyxcclxuICAgIG5ld19zb25nOiAnTnVldmEgQ2FuY2lvbicsXHJcbiAgICBtb2R1bGF0aW9uOiAnTW9kdWxhY2lvbiBkZSB7e25hbWV9fSdcclxuICB9LFxyXG4gIGhlbHA6IHtcclxuICAgIEZMT1c6ICdGTFVKTyBERSBNVVNJQy5KUycsXHJcbiAgICBSRUNJUEVTOiAnUkVDRVRBUycsXHJcbiAgICBwMTogJ1BhcmEgY3JlYXIgdW5hIGNhbmNpb24sIHRpZW5lcyBxdWUgZW5zYW1ibGFybGEsIGFzaSBjb21vIHN1cyBjb21wb25lbnRlcycsXHJcbiAgICBwMjogJ0hheSB0cmVzIHRpcG9zIGRlIHJlY3Vyc29zIHF1ZSBzZSBwdWVkZW4gY3JlYXI6IGluc3RydW1lbnRvcywgcGF0cm9uZXMgeSBjYW5jaW9uZXMnLFxyXG4gICAgcDM6ICdNaWVudHJhcyBxdWUgbGEgc2VjY2lvbiBkZSBsYSBkZXJlY2hhIG11ZXN0cmEgZWwgZWxlbWVudG8gcXVlIHNlIGVzdGEgY3JlYW5kbywgbGEgc2VjY2lvbiBkZSBsYSBpenF1aWVyZGEgbXVlc3RyYSBsb3MgbWF0ZXJpYWxlcyBxdWUgc2UgcHVlZGVuIHVzYXInLFxyXG4gICAgcDQ6ICdQdWVkZXMgYXJyYXN0cmFyIHkgc29sdGFyIGVzb3MgbWF0ZXJpYWxlcyBlbiBsYXMgem9uYXMgaW5kaWNhZGFzJyxcclxuICAgIHA1OiAnUGFyYSB1c2FyIGFsZ3VuIHJlY3Vyc28gZW4gYWxndW4gZWxlbWVudG8gcXVlIGVzdGVzIGNyZWFuZG8sIGxvIHRpZW5lcyBxdWUgYXJyYXN0cmFyIGEgZXNhcyB6b25hcycsXHJcbiAgICBwNjogJ1NpZ3VpZW5kbyBlc3RlIHByaW5jaXBpbywgcHVlZGVzIHVzYXIgaW5zdHJ1bWVudG9zIHBhcmEgY29tcG9uZXIgcGF0cm9uZXMsIHkgZmluYWxtZW50ZSwgbG9zIHBhdHJvbmVzIHBhcmEgY29tcG9uZXIgbGFzIGNhbmNpb25lcycsXHJcbiAgICBwNzogJ0FkZW1hcywgcHVlZGVzIGNyZWFyIHR1cyBwcm9waW9zIGluc3RydW1lbnRvcywgY29tYmluYW5kbyB2YXJpb3MgZWZlY3RvczonLFxyXG4gICAgcDg6ICdObyB0ZSBwcmVvY3VwZXMgc2kgbm8gbG8gZW50aWVuZGVzIGFob3JhIG1pc21vLCBoYXkgcmVjZXRhcyB5IGF5dWRhIGNvbnRleHR1YWwgcXVlIHBvZHJhcyB1c2FyIHBhcmEgZmFtaWxpYXJpemFydGUgY29uIGVzdG9zIGNvbmNlcHRvcycsXHJcbiAgICByZWNpcGVzOiB7XHJcbiAgICAgIHAxOiAnTGFzIHJlY2V0YXMsIHNvbiBtaW5pLXR1dG9yaWFsZXMgaW50ZXJhY3Rpdm9zIHF1ZSBleHBsaWNhbiBjb21vIGNyZWFyIGFsZ28gKHBvciBlamVtcGxvLCB1bmEgY2FuY2lvbiknLFxyXG4gICAgICBwMjogJ0FsZ3Vub3MgdHV0b3JpYWxlcyAoQ29tbyBwb3IgZWplbXBsbyBcXCdSZWNvcnJpZG8gSW50cm9kdWN0b3Jpb1xcJykgc29sbyBleHBsaWNhbiBhbGd1bmFzIGNvc2FzIGRlIGxhIGludGVyZmF6IHByaW5jaXBhbCcsXHJcbiAgICAgIHAzOiAnVGUgcmVjb21pZW5kbyBxdWUgc2lnYXMgZXN0YXMgcmVjZXRhcyBzaSBubyBzYWJlcyBxdWUgaGFjZXIgbyBjb21vIGVtcGV6YXIgYSB1c2FyIGxhIGFwbGljYWNpb24uIFB1ZWRlcyBhY2NlZGVyIGEgbGFzIHJlY2V0YXMgZGVzZGUgZWwgbWVudSBkZSBheXVkYSAoPyknXHJcbiAgICB9LFxyXG4gICAgQ09OVEVYVFVBTF9IRUxQOiBcIkFZVURBIENPTlRFWFRVQUxcIixcclxuICAgIGNvbnRleHR1YWxfaGVscDoge1xyXG4gICAgICBwMTogJ0hheSB1bmEgc2VyaWUgZGUgdG9vbHRpcHMgcXVlIGV4cGxpY2FuIGRldGFsbGFkYW1lbnRlIGxhcyBkaXN0aW50YXMgZnVuY2lvbmFsaWRhZGVzIGRlIGxhIGFwbGljYWNpb24uIFB1ZWRlcyBhY3RpdmFyIG8gZGVzYWN0aXZhciBlc3RhcyBheXVkYXMgY2xpY2tlYW5kbyBlbiBlbCByZWN1YWRybyBxdWUgYXBhcmVjZSBlbiBsYSBlc3F1aW5hIGluZmVyaW9yIGl6cXVpZXJkYSBkZSBsYSBwYW50YWxsYSdcclxuICAgIH1cclxuICB9LFxyXG4gIGVkaXRvcjoge1xyXG4gICAga2V5Ym9hcmRfaW5zdHJ1Y3Rpb25zOiAnVXNhIGxhcyB0ZWNsYXMgWlhDVkJOTSBwYXJhIHRvY2FyIGVsIGluc3RydW1lbnRvLCBvIHBhc2EgZWwgcHVudGVybyBkZWwgbW91c2Ugc29icmUgZWwgdGVjbGFkbyB2aXJ0dWFsJyxcclxuICAgIHRvb2x0aXA6IHtcclxuICAgICAgdGVzdF9pbnN0cnVtZW50X2hlcmU6ICdQcnVlYmEgZWwgaW5zdHJ1bWVudG8gYXF1aSwgdXNhbmRvIGVsIHRlY2xhZG8gbyBlbCBtb3VzZScsXHJcbiAgICAgIHR5cGVfaGVyZV9pbnN0cnVtZW50OiAnRXNjcmliZSBhcXVpIGVsIG5vbWJyZSBwYXJhIGVsIGluc3RydW1lbnRvJ1xyXG4gICAgfVxyXG4gIH0sXHJcbiAgcGF0dGVybjoge1xyXG4gICAgdHJhY2tfbXV0ZWQ6ICdBcGFnYWRvJyxcclxuICAgIHRyYWNrX3NvbG86ICdTb2xvJyxcclxuICAgIG1lYXN1cmVfYmVhdHM6ICdQdWxzb3MvY29tcGFzJyxcclxuICAgIG1lYXN1cmVfY291bnQ6ICdDYW50LiBkZSBjb21wYXNlcycsXHJcbiAgICB6b29tX2xldmVsOiAnTml2ZWwgZGUgem9vbScsXHJcbiAgICB0cmFja3M6ICdQaXN0YXMnLFxyXG4gICAgZHJvcF9pbnN0cnVtZW50OiAnU3VlbHRhIGVsIGluc3RydW1lbnRvIGFxdWknLFxyXG4gICAgdG9vbHRpcDoge1xyXG4gICAgICBhbW91bnRfYmVhdHM6ICdDYW50aWRhZCBkZSBwdWxzb3MgcG9yIGNvbXBhcycsXHJcbiAgICAgIHRvdGFsX21lYXN1cmVzOiAnQ2FudGlkYWQgdG90YWwgZGUgY29tcGFzZXMgZW4gZWwgcGF0cm9uJyxcclxuICAgICAgY2hhbmdlX25hbWU6ICdDYW1iaWEgZWwgbm9tYnJlIGRlbCBwYXRyb24nLFxyXG4gICAgICB6b29tX2xldmVsOiAnTml2ZWwgZGUgem9vbSBwYXJhIHRvZGFzIGxhcyBwaXN0YXMnLFxyXG4gICAgICBwbGF5OiAnQ2xpY2sgcGFyYSByZXByb2R1Y2lyIGVsIHBhdHJvbicsXHJcbiAgICAgIHN0b3A6ICdDbGljayBwYXJhIGRldGVuZXIgbGEgcmVwcm9kdWNjaW9uJyxcclxuICAgICAgcmVtb3ZlX3RyYWNrOiAnQ2xpY2sgcGFyYSBlbGltaW5hciBsYSBwaXN0YScsXHJcbiAgICAgIGNvbXBhY3Rfdmlld19wMTogJ1Zpc3RhIGNvbXBhY3RhIGRlIGxhIHBpc3RhOiBtdWVzdHJhIGxhcyBub3RhcyBzaW4gbmVjZXNpZGFkIGRlIGV4cGFuZGlyIGxhIHBpc3RhLicsXHJcbiAgICAgIGNvbXBhY3Rfdmlld19wMjogJ0NsaWNrZWEgYXF1aSBwYXJhIGV4cGFuZGlyIGxhIHBpc3RhJyxcclxuICAgICAgZHJvcF96b25lOiAnQXJlYSBwYXJhIHNvbHRhciBlbCBpbnN0cnVtZW50bywgYXJyYXN0cmEgYXF1aSBpbnN0cnVtZW50b3MgZGVsIHBhbmVsIGl6cXVpZXJkbyBwYXJhIHVzYXJsb3MgZW4gbGEgcGlzdGEnLFxyXG4gICAgICBlZGl0b3Jfbm90ZXNfcDE6ICdBcmVhIGRlIG5vdGFzLCBwdWVkZXMgYWdyZWdhciBsYXMgbm90YXMgYXF1aTonLFxyXG4gICAgICBlZGl0b3Jfbm90ZXNfcDI6ICdDbGlja2VhIHBhcmEgYWdyZWdhciB1bmEgbnVldmEgbm90YSwgeSBhcnJhc3RyYWxhcyBwYXJhIGNhbWJpYXIgc3UgdmFsb3IgeSBzdSB0aWVtcG8gZGUgaW5pY2lvIGVuIGxhIHNlY3VlbmNpYScsXHJcbiAgICAgIGVkaXRvcl9ub3Rlc19wMzogJ0NUUkwrWiBwYXJhIGRlc2hhY2VyIGNhbWJpb3MnLFxyXG4gICAgICBlZGl0b3Jfbm90ZXNfcDQ6ICdDVFJMK1kgcGFyYSByZWhhY2VyIGNhbWJpb3MnLFxyXG4gICAgICBhZGRfdHJhY2s6ICdDbGlja2VhIGVzdGUgYm90b24gcGFyYSBhZ3JlZ2FyIHVuYSBudWV2YSBwaXN0YSB2YWNpYScsXHJcblxyXG4gICAgICBub3RlX2V2ZW50X3AxOiAnRXZlbnRvIGRlIG5vdGEuIEFycmFzdHJhIGRlc2RlIGVsIGJvcmRlIGRlcmVjaG8gcGFyYSBjYW1iaWFyIHN1IGR1cmFjaW9uLCBvIHByZXNpb25hIGxhIHRlY2xhIFNVUFIuIHBhcmEgZWxpbWluYXJsbycsXHJcbiAgICAgIG5vdGVfZXZlbnRfcDI6ICdBcnJhc3RyYSBwYXJhIGNhbWJpYXIgZWwgdmFsb3IgbyBlbCB0aWVtcG8gZGUgY29taWVuem8gZW4gbGEgc2VjdWVuY2lhJyxcclxuICAgICAgbm90ZV9ldmVudF9wMzogJ0V2ZW50byBkZSBub3RhLiBDbGlja2VhIHBhcmEgc2VsZWNjaW9uYXJsbyB5IGVkaXRhcmxvJyxcclxuICAgICAgbXV0ZWQ6ICdEZXNhY3RpdmEgbGEgcGlzdGEgaGFjaWVuZG8gcXVlIG5vIHNlIHJlcHJvZHV6Y2EnLFxyXG4gICAgICBzb2xvOiAnQWlzbGEgbGEgcGlzdGEgZGUgbWFuZXJhIHF1ZSBzZWEgbGEgdW5pY2EgcXVlIHNlIHJlcHJvZHV6Y2EuIFB1ZWRlbiBhaXNsYXJzZSB2YXJpYXMnLFxyXG4gICAgICBpbnN0cnVtZW50X2VkaXQ6ICdDbGlja2VhIGVzdGUgYm90b24gcGFyYSBlZGl0YXIgZWwgaW5zdHJ1bWVudG8nXHJcbiAgICB9XHJcbiAgfSxcclxuICBzb25nOiB7XHJcbiAgICBkcm9wX3BhdHRlcm46IFwiU3VlbHRhIGVsIHBhdHJvbiBhcXVpXCIsXHJcbiAgICB0b29sdGlwOiB7XHJcbiAgICAgIG1lYXN1cmVfYmVhdHM6IFwiUHVsc29zL0NvbXBhcy4gVGllbmUgcXVlIGNvaW5jaWRpciBjb24gZWwgZGUgbG9zIHBhdHJvbmVzIHF1ZSBzZSB1c2FuXCIsXHJcbiAgICAgIHBsYXk6IFwiQ2xpY2sgcGFyYSByZXByb2R1Y2lyL3BhdXNhciBsYSBjYW5jaW9uXCIsXHJcbiAgICAgIHN0b3A6IFwiQ2xpY2sgcGFyYSBkZXRlbmVyIGxhIHJlcHJvZHVjY2lvblwiLFxyXG4gICAgICBkb3dubG9hZDogXCJDbGljayBwYXJhIGdyYWJhciBsYSBjYW5jaW9uIGEgdW4gYXJjaGl2byBkZSBhdWRpbyB5IGRlc2NhcmdhcmxvXCIsXHJcbiAgICAgIGRyb3BfcGF0dGVybjogXCJBcmVhIHBhcmEgc29sdGFyIGxvcyBwYXRyb25lcywgYXJyYXN0cmEgYXF1aSBwYXRyb25lcyBkZXNkZSBlbCBwYW5lbCBpenF1aWVyZG9cIixcclxuICAgICAgcmVtb3ZlX2Jsb2NrOiBcIkNsaWNrIGFxdWkgcGFyYSBlbGltaW5hciBlbCBwYXRyb24geSBkZWphciBlbCBibG9xdWUgdmFjaW9cIixcclxuICAgICAgZWRpdF9ibG9jazogXCJDbGljayBhcXVpIHBhcmEgc2FsdGFyIGEgbGEgZWRpY2lvbiBkZWwgcGF0cm9uIHV0aWxpemFkbyBlbiBlc3RlIGJsb3F1ZVwiXHJcbiAgICB9XHJcbiAgfSxcclxuICBzdGFjazoge1xyXG4gICAgZHJvcF9lbGVtZW50c19oZXJlOiBcInN1ZWx0YSBudWV2b3MgZWxlbWVudG9zIGFxdWlcIixcclxuICAgIHRvb2x0aXA6IHtcclxuICAgICAgeW91X2Nhbl9kcm9wX25ld19lZmZlY3RzX2hlcmU6ICdQdWVkZXMgc29sdGFyIG51ZXZvcyBlZmVjdG9zIGRlbCBpbmRpY2UgYXF1aScsXHJcbiAgICAgIHJlbW92ZTogJ0VsaW1pbmEgZWwgZWZlY3RvIGRlIGxhIHNlY3VlbmNpYScsXHJcbiAgICAgIHVwOiAnQ2FtYmlhIGVsIG9yZGVuIGRlbCBlbGVtZW50bywgcGFyYSBxdWUgc2UgZWplY3V0ZSBERVNQVUVTJyxcclxuICAgICAgZG93bjogJ0NhbWJpYSBlbCBvcmRlbiBkZWwgZWxlbWVudG8sIHBhcmEgcXVlIHNlIGVqZWN1dGUgQU5URVMnLFxyXG4gICAgICBleHBhbmQ6ICdFeHBhbmRlL0NvbXByaW1lIGxhIHZpc3RhIGF2YW56YWRhIGRlbCBlbGVtZW50bydcclxuICAgIH1cclxuICB9LFxyXG4gIEJVVFRPTl9MQU5HX0VOOiAnSW5nbGVzJyxcclxuICBCVVRUT05fTEFOR19FUzogJ0VzcGHDsW9sJ1xyXG59O1xyXG5cclxubXVzaWNTaG93Q2FzZUFwcC5jb25zdGFudChcImVzVHJhbnNsYXRpb25zXCIsIGVzVHJhbnNsYXRpb25zKTtcclxuIiwidmFyIG11c2ljU2hvd0Nhc2VBcHAgPSBhbmd1bGFyLm1vZHVsZShcIk11c2ljU2hvd0Nhc2VBcHBcIik7XHJcblxyXG5tdXNpY1Nob3dDYXNlQXBwLmNvbmZpZyhbJyR0cmFuc2xhdGVQcm92aWRlcicsIGZ1bmN0aW9uICgkdHJhbnNsYXRlUHJvdmlkZXIpIHtcclxuICB2YXIgZ2V0QnJvd3Nlckxhbmd1YWdlID0gZnVuY3Rpb24oKSB7XHJcbiAgICBpZiAoISR0cmFuc2xhdGVQcm92aWRlci5yZXNvbHZlQ2xpZW50TG9jYWxlKCkpIHJldHVybiAnZW4nXHJcbiAgICB2YXIgbGFuZ0NvZGUgPSAkdHJhbnNsYXRlUHJvdmlkZXIucmVzb2x2ZUNsaWVudExvY2FsZSgpLnNwbGl0KFwiLVwiKVswXTtcclxuICAgIGlmICghbGFuZ0NvZGUpIHJldHVybiAnZW4nO1xyXG4gICAgcmV0dXJuICR0cmFuc2xhdGVQcm92aWRlci50cmFuc2xhdGlvbnMoKVtsYW5nQ29kZV0gPyBsYW5nQ29kZSA6ICdlbic7XHJcbiAgfTtcclxuXHJcbiAgJHRyYW5zbGF0ZVByb3ZpZGVyXHJcbiAgICAucHJlZmVycmVkTGFuZ3VhZ2UoZ2V0QnJvd3Nlckxhbmd1YWdlKCkpO1xyXG5cclxuICAkdHJhbnNsYXRlUHJvdmlkZXJcclxuICAgIC5mYWxsYmFja0xhbmd1YWdlKCdlbicpO1xyXG5cclxuICAkdHJhbnNsYXRlUHJvdmlkZXIudXNlU2FuaXRpemVWYWx1ZVN0cmF0ZWd5KG51bGwpO1xyXG4gICR0cmFuc2xhdGVQcm92aWRlci51c2VMb2FkZXIoJ3RyYW5zbGF0aW9uc0xvYWRlcicpO1xyXG5cclxufV0pO1xyXG4iLCJ2YXIgbXVzaWNTaG93Q2FzZUFwcCA9IGFuZ3VsYXIubW9kdWxlKFwiTXVzaWNTaG93Q2FzZUFwcFwiKTtcclxuXHJcbm11c2ljU2hvd0Nhc2VBcHAuY29uZmlnKFtcIiRyb3V0ZVByb3ZpZGVyXCIsIFwiJGxvY2F0aW9uUHJvdmlkZXJcIiwgZnVuY3Rpb24oJHJvdXRlUHJvdmlkZXIsICRsb2NhdGlvblByb3ZpZGVyKSB7XHJcbiAgJHJvdXRlUHJvdmlkZXJcclxuICAgIC53aGVuKCcvZWRpdG9yLzpwcm9qZWN0L2luc3RydW1lbnQvOmlkJywge1xyXG4gICAgICB0ZW1wbGF0ZVVybDogJ3NpdGUvdGVtcGxhdGVzL2VkaXRvci5odG1sJyxcclxuICAgICAgY29udHJvbGxlcjogJ0VkaXRvckNvbnRyb2xsZXInXHJcbiAgICB9KVxyXG4gICAgLndoZW4oJy9lZGl0b3IvOnByb2plY3Qvc29uZy86aWQnLCB7XHJcbiAgICAgIHRlbXBsYXRlVXJsOiAnc2l0ZS90ZW1wbGF0ZXMvc29uZ0VkaXRvci5odG1sJyxcclxuICAgICAgY29udHJvbGxlcjogJ1NvbmdFZGl0b3JDb250cm9sbGVyJ1xyXG4gICAgfSlcclxuICAgIC53aGVuKCcvZWRpdG9yLzpwcm9qZWN0L3BhdHRlcm4vOmlkJywge1xyXG4gICAgICB0ZW1wbGF0ZVVybDogJ3NpdGUvdGVtcGxhdGVzL3BhdHRlcm5FZGl0b3IuaHRtbCcsXHJcbiAgICAgIGNvbnRyb2xsZXI6ICdQYXR0ZXJuRWRpdG9yQ29udHJvbGxlcidcclxuICAgIH0pXHJcbiAgICAud2hlbignL2VkaXRvci86cHJvamVjdCcsIHtcclxuICAgICAgdGVtcGxhdGVVcmw6ICdzaXRlL3RlbXBsYXRlcy9kYXNoYm9hcmQuaHRtbCcsXHJcbiAgICAgIGNvbnRyb2xsZXI6ICdQcm9qZWN0RGFzaGJvYXJkQ29udHJvbGxlcidcclxuICAgIH0pXHJcbiAgICAud2hlbignLycsIHtcclxuICAgICAgdGVtcGxhdGVVcmw6ICdzaXRlL3RlbXBsYXRlcy9kYXNoYm9hcmQuaHRtbCcsXHJcbiAgICAgIGNvbnRyb2xsZXI6ICdEYXNoYm9hcmRDb250cm9sbGVyJ1xyXG4gICAgfSk7XHJcblxyXG4gIC8vIGNvbmZpZ3VyZSBodG1sNSB0byBnZXQgbGlua3Mgd29ya2luZyBvbiBqc2ZpZGRsZVxyXG4gIC8vJGxvY2F0aW9uUHJvdmlkZXIuaHRtbDVNb2RlKHRydWUpO1xyXG59XSk7O1xyXG5cclxuXHJcblxyXG4iLCJ2YXIgbXVzaWNTaG93Q2FzZUFwcCA9IGFuZ3VsYXIubW9kdWxlKFwiTXVzaWNTaG93Q2FzZUFwcFwiKTtcclxuXHJcbm11c2ljU2hvd0Nhc2VBcHAuZGlyZWN0aXZlKFwibXVzaWNPYmplY3RFZGl0b3JcIiwgW1wiJHRpbWVvdXRcIiwgXCIkaHR0cFwiLCBcIlR5cGVTZXJ2aWNlXCIsIFwiUmVjaXBlXCIsIFwiTXVzaWNPYmplY3RGYWN0b3J5XCIsIGZ1bmN0aW9uKCR0aW1lb3V0LCAkaHR0cCwgVHlwZVNlcnZpY2UsIFJlY2lwZSwgTXVzaWNPYmplY3RGYWN0b3J5KSB7XHJcbiAgcmV0dXJuIHtcclxuICAgIHNjb3BlOiB7XHJcbiAgICAgIGZpbGU6IFwiPWZpbGVcIlxyXG4gICAgfSxcclxuICAgIHRlbXBsYXRlVXJsOiBcInNpdGUvdGVtcGxhdGVzL29iamVjdEVkaXRvci5odG1sXCIsXHJcbiAgICBsaW5rOiBmdW5jdGlvbihzY29wZSwgZWxlbWVudCwgYXR0cnMpIHtcclxuICAgICAgdmFyIGZpbGU7XHJcbiAgICAgIHZhciB0eXBlcyA9IFR5cGVTZXJ2aWNlLmdldFR5cGVzKCk7XHJcblxyXG4gICAgICBzY29wZS5vdXRwdXQgPSB7fTtcclxuXHJcbiAgICAgIHNjb3BlLnBhcmFtZXRlcnMgPSBbXTtcclxuICAgICAgc2NvcGUucmVjaXBlID0gUmVjaXBlLnN0YXJ0O1xyXG4gICAgICBzY29wZS50ZXJtc2NoYW5nZWQgPSBmdW5jdGlvbigpIHtcclxuICAgICAgICBzY29wZS4kYnJvYWRjYXN0KCd0ZXJtc2NoYW5nZWQnKTtcclxuICAgICAgfTtcclxuXHJcbiAgICAgIHNjb3BlLmZfdCA9IGZ1bmN0aW9uKHN0ciwgc3RhdGUpIHtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgdmFyIHJldCA9IGV2YWwoXCIoZnVuY3Rpb24odCkgeyByZXR1cm4gXCIgKyBzdHIgKyBcIjsgfSlcIik7XHJcbiAgICAgICAgICBkZWxldGUgc3RhdGUuZXJyb3I7XHJcblxyXG4gICAgICAgICAgcmV0dXJuIHJldDtcclxuICAgICAgICB9IGNhdGNoKGUpIHtcclxuICAgICAgICAgIHN0YXRlLmVycm9yID0gZS50b1N0cmluZygpO1xyXG4gICAgICAgICAgdGhyb3cgZTtcclxuICAgICAgICB9XHJcbiAgICAgIH07XHJcblxyXG4gICAgICBzY29wZS5vc2NUZXJtc1VwZGF0ZUZyb21XYXZlRm9ybSA9IGZuLmRlYm91bmNlKGZ1bmN0aW9uKHdhdmVmb3JtLCB0ZXJtcywgcmVzb2x1dGlvbikge1xyXG5cclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgdmFyIHdhdmVmb3JtID0gZXZhbChcIihmdW5jdGlvbih0KSB7IHJldHVybiBcIiArIHdhdmVmb3JtICsgXCI7IH0pXCIpO1xyXG4gICAgICAgICAgdmFyIGNvdW50ID0gcmVzb2x1dGlvbjtcclxuICAgICAgICAgIHZhciB2YWx1ZXMgPSBuZXcgQXJyYXkoY291bnQpO1xyXG4gICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBjb3VudDsgaSsrKSB7XHJcbiAgICAgICAgICAgIHZhbHVlc1tpXSA9IHdhdmVmb3JtKGkvY291bnQpO1xyXG4gICAgICAgICAgICBpZiAoaXNOYU4odmFsdWVzW2ldKSkgdGhyb3cgXCJOb3QgYSBudW1iZXI6IFwiICsgdmFsdWVzW2ldO1xyXG4gICAgICAgICAgfVxyXG5cclxuICAgICAgICAgIHZhciBmdCA9IG5ldyBERlQodmFsdWVzLmxlbmd0aCk7XHJcbiAgICAgICAgICBmdC5mb3J3YXJkKHZhbHVlcyk7XHJcblxyXG4gICAgICAgICAgZm9yICh2YXIgaT0wO2k8Y291bnQ7aSsrKSB7XHJcbiAgICAgICAgICAgIHRlcm1zLmNvc1tpXSA9IGZ0LnJlYWxbaV07XHJcbiAgICAgICAgICAgIHRlcm1zLnNpbltpXSA9IGZ0LmltYWdbaV07XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICB0ZXJtcy5jb3MubGVuZ3RoID0gZnQucmVhbC5sZW5ndGgvMjtcclxuICAgICAgICAgIHRlcm1zLnNpbi5sZW5ndGggPSBmdC5pbWFnLmxlbmd0aC8yO1xyXG5cclxuICAgICAgICAgIHZhciBmID0gZnVuY3Rpb24odCl7XHJcbiAgICAgICAgICAgIHZhciByZXQgPSAwO1xyXG4gICAgICAgICAgICBmb3IgKHZhciBpPTE7aTxjb3VudC8yO2krKykge1xyXG4gICAgICAgICAgICAgIHZhciBhID0gdGVybXMuc2luW2ldO1xyXG4gICAgICAgICAgICAgIHZhciBiID0gdGVybXMuY29zW2ldO1xyXG5cclxuICAgICAgICAgICAgICByZXQgPSByZXQgKyBhICogTWF0aC5zaW4odCoyKk1hdGguUEkqaSk7XHJcbiAgICAgICAgICAgICAgcmV0ID0gcmV0ICsgYiAqIE1hdGguY29zKHQqMipNYXRoLlBJKmkpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiByZXQ7XHJcbiAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgIHZhciBtYXh2YWx1ZSA9IDA7XHJcbiAgICAgICAgICB2YXIgY291bnQgPSB0ZXJtcy5zaW4ubGVuZ3RoO1xyXG4gICAgICAgICAgZm9yICh2YXIgaT0wOyBpPGNvdW50OyBpKyspIHtcclxuICAgICAgICAgICAgdmFyIHZhbHVlID0gZihpL2NvdW50KTtcclxuICAgICAgICAgICAgaWYgKHZhbHVlPm1heHZhbHVlKSB7XHJcbiAgICAgICAgICAgICAgbWF4dmFsdWU9dmFsdWU7XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAodmFsdWU8LW1heHZhbHVlKSB7XHJcbiAgICAgICAgICAgICAgbWF4dmFsdWU9LXZhbHVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgZm9yICh2YXIgaT0wO2k8Y291bnQ7aSsrKSB7XHJcbiAgICAgICAgICAgIHRlcm1zLnNpbltpXSA9IHRlcm1zLnNpbltpXSAvIG1heHZhbHVlO1xyXG4gICAgICAgICAgICB0ZXJtcy5jb3NbaV0gPSB0ZXJtcy5jb3NbaV0gLyBtYXh2YWx1ZTtcclxuICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAkdGltZW91dChmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgc2NvcGUuaW52YWxpZFdhdmVmb3JtID0gZmFsc2U7XHJcbiAgICAgICAgICB9KTtcclxuICAgICAgICAgIHNjb3BlLiRicm9hZGNhc3QoJ3Rlcm1zY2hhbmdlZCcpO1xyXG4gICAgICAgIH0gY2F0Y2ggKGVycikge1xyXG4gICAgICAgICAgJHRpbWVvdXQoZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgIHNjb3BlLmludmFsaWRXYXZlZm9ybSA9IGVyci50b1N0cmluZygpO1xyXG4gICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgfSw0MDApO1xyXG5cclxuICAgICAgc2NvcGUub3NjVGVybXNVcGRhdGUgPSBmbi5kZWJvdW5jZShmdW5jdGlvbihzZXJpZSwgdGVybXMsIGVyclZhcikge1xyXG5cclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgdmFyIHNlcmllID0gZXZhbChcIihmdW5jdGlvbihuKSB7IHJldHVybiBcIiArIHNlcmllICsgXCI7IH0pXCIpO1xyXG4gICAgICAgICAgZm9yICh2YXIgbj0xO248NTEyO24rKykge1xyXG4gICAgICAgICAgICB0ZXJtc1tuXT1zZXJpZShuKTtcclxuICAgICAgICAgICAgaWYgKGlzTmFOKHRlcm1zW25dKSkgdGhyb3cgXCJOb3QgYSBudW1iZXI6IFwiICsgdGVybXNbbl07XHJcbiAgXHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICBzY29wZVtlcnJWYXJdID0gZmFsc2U7XHJcbiAgICAgICAgICAkdGltZW91dChmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgc2NvcGUuJGJyb2FkY2FzdCgndGVybXNjaGFuZ2VkJyk7XHJcbiAgICAgICAgICB9KTtcclxuICAgICAgICB9IGNhdGNoIChlcnIpIHtcclxuICAgICAgICAgICR0aW1lb3V0KGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICBzY29wZVtlcnJWYXJdID0gZXJyLnRvU3RyaW5nKCk7XHJcbiAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICAgIH0sNDAwKTtcclxuXHJcbiAgICAgIHNjb3BlLnJhbmdlID0gZnVuY3Rpb24oaW5pdCwgZW5kKSB7XHJcbiAgICAgICAgdmFyIHggPSBbXTtcclxuICAgICAgICBmb3IgKHZhciBpPWluaXQ7aTw9ZW5kO2krKykge1xyXG4gICAgICAgICAgeC5wdXNoKGkpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4geDtcclxuICAgICAgfTtcclxuXHJcbiAgICAgIHZhciB0cnV0aHkgPSBmdW5jdGlvbih4ICkgeyByZXR1cm4geDsgfTtcclxuICAgICAgdmFyIHVwZGF0ZU9iamVjdCA9IGZ1bmN0aW9uKG5ld1ZhbHVlKSB7XHJcbiAgICAgICAgJHRpbWVvdXQoZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICBpZiAoc2NvcGUuZmlsZSAmJiBzY29wZS5maWxlLmNoYW5nZWQpIHNjb3BlLmZpbGUuY2hhbmdlZCgpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICB9O1xyXG5cclxuICAgICAgdmFyIG91dHB1dE9ic2VydmVyO1xyXG4gICAgICBzY29wZS4kb24oXCIkZGVzdHJveVwiLCBmdW5jdGlvbigpIHtcclxuICAgICAgICBpZiAob3V0cHV0T2JzZXJ2ZXIpIG91dHB1dE9ic2VydmVyLmRlc3Ryb3koKTtcclxuICAgICAgfSk7XHJcblxyXG4gICAgICB2YXIgdXBkYXRlVGVtcGxhdGUgPSBmdW5jdGlvbihmaWxlKSB7XHJcbiAgICAgICAgaWYgKCFmaWxlKSByZXR1cm47XHJcblxyXG4gICAgICAgIGlmIChvdXRwdXRPYnNlcnZlcikgb3V0cHV0T2JzZXJ2ZXIuZGVzdHJveSgpO1xyXG4gICAgICAgIHZhciBvdXRwdXRPYnNlcnZlciA9IE11c2ljT2JqZWN0RmFjdG9yeSgpLm9ic2VydmVPdXRwdXQoZmlsZSwgZnVuY3Rpb24ob3V0cHV0KSB7XHJcbiAgICAgICAgICAkdGltZW91dChmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgc2NvcGUub3V0cHV0ID0gb3V0cHV0O1xyXG4gICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHR5cGVzLnRoZW4oZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAkdGltZW91dChmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgc2NvcGUuc2VsZWN0ZWRUeXBlID0gZmlsZS50eXBlO1xyXG5cclxuICAgICAgICAgICAgVHlwZVNlcnZpY2UuZ2V0VHlwZShmaWxlLnR5cGUsIGZ1bmN0aW9uKHR5cGUpIHtcclxuICAgICAgICAgICAgICAkdGltZW91dChmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgIHNjb3BlLnRlbXBsYXRlVXJsID0gdHlwZS50ZW1wbGF0ZVVybDtcclxuICAgICAgICAgICAgICAgIHNjb3BlLnR5cGUgPSB0eXBlO1xyXG5cclxuICAgICAgICAgICAgICAgIGZvciAodmFyIGsgaW4gdHlwZS5fZGVmYXVsdCkge1xyXG4gICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIGZpbGUuZGF0YVtrXSA9PT0gXCJ1bmRlZmluZWRcIikge1xyXG4gICAgICAgICAgICAgICAgICAgIGZpbGUuZGF0YVtrXSA9dHlwZS5fZGVmYXVsdFtrXTtcclxuICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIGlmICh0eXBlLnBhcmFtZXRlcnMpIHtcclxuICAgICAgICAgICAgICAgICAgc2NvcGUucGFyYW1ldGVycyA9IHR5cGUucGFyYW1ldGVycy5tYXAoZnVuY3Rpb24ocGFyYW1ldGVyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgICAgICAgICAgIG5hbWU6IHBhcmFtZXRlci5uYW1lLFxyXG4gICAgICAgICAgICAgICAgICAgICAgZGF0YTogcGFyYW1ldGVyLFxyXG4gICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IGZpbGUuZGF0YSAmJiB0eXBlb2YgZmlsZS5kYXRhW3BhcmFtZXRlci5uYW1lXSAhPT0gXCJ1bmRlZmluZWRcIiA/IGZpbGUuZGF0YVtwYXJhbWV0ZXIubmFtZV0gOiBwYXJhbWV0ZXIudmFsdWVcclxuICAgICAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGlmICh0eXBlLmNvbXBvbmVudHMpIHtcclxuICAgICAgICAgICAgICAgICAgc2NvcGUubW9kdWxhdGlvbnMgPSAodHlwZS5jb21wb25lbnRzfHxbXSkubWFwKGZ1bmN0aW9uKGNvbXBvbmVudCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICBuYW1lOiBjb21wb25lbnQsXHJcbiAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogKGZpbGUuZGF0YSAmJiBmaWxlLmRhdGEubW9kdWxhdGlvbiAmJiBmaWxlLmRhdGEubW9kdWxhdGlvbltjb21wb25lbnRdKXx8IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogXCJzdGFja1wiLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBkYXRhOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgYXJyYXk6IFtdXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICB1cGRhdGVPYmplY3QoZmlsZS5kYXRhKTtcclxuICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuICAgICAgfTtcclxuICAgICAgaWYgKHNjb3BlLmZpbGUpIHVwZGF0ZVRlbXBsYXRlKHNjb3BlLmZpbGUpO1xyXG5cclxuICAgICAgdHlwZXMudGhlbihmdW5jdGlvbih0eXBlcykge1xyXG4gICAgICAgIHNjb3BlLnR5cGVzID0gdHlwZXM7XHJcbiAgICAgIH0pO1xyXG4gICAgICBcclxuICAgICAgdmFyIGNoYW5nZVR5cGUgPSBmdW5jdGlvbihuZXdWYWx1ZSkge1xyXG4gICAgICAgIGlmICghbmV3VmFsdWUpIHJldHVybjtcclxuICAgICAgICBpZiAoIXNjb3BlLmZpbGUpIHJldHVybjtcclxuICAgICAgICBzY29wZS5maWxlLnR5cGUgPSBuZXdWYWx1ZTtcclxuICAgICAgICB1cGRhdGVUZW1wbGF0ZShzY29wZS5maWxlKTtcclxuICAgICAgfTtcclxuXHJcbiAgICAgIHNjb3BlLiR3YXRjaChcIm1vZHVsYXRpb25zXCIsIGZ1bmN0aW9uKG5ld1ZhbHVlKSB7XHJcbiAgICAgICAgaWYgKCFzY29wZS5tb2R1bGF0aW9ucykgcmV0dXJuO1xyXG4gICAgICAgIHNjb3BlLm1vZHVsYXRpb25zLmZvckVhY2goZnVuY3Rpb24obW9kdWxhdGlvbikge1xyXG4gICAgICAgICAgc2NvcGUuZmlsZS5kYXRhLm1vZHVsYXRpb24gPSBzY29wZS5maWxlLmRhdGEubW9kdWxhdGlvbnx8e307XHJcbiAgICAgICAgICBzY29wZS5maWxlLmRhdGEubW9kdWxhdGlvblttb2R1bGF0aW9uLm5hbWVdID0gbW9kdWxhdGlvbi52YWx1ZTtcclxuICAgICAgICB9KTsgXHJcbiAgICAgICAgc2NvcGUuJGVtaXQoXCJvYmplY3RDaGFuZ2VkXCIpO1xyXG4gICAgICB9LCB0cnVlKTtcclxuXHJcbiAgICAgIHNjb3BlLiR3YXRjaChcInBhcmFtZXRlcnNcIiwgZnVuY3Rpb24obmV3VmFsdWUpIHtcclxuICAgICAgICBpZiAoIXNjb3BlLnBhcmFtZXRlcnMpIHJldHVybjtcclxuICAgICAgICBzY29wZS5wYXJhbWV0ZXJzLmZvckVhY2goZnVuY3Rpb24ocGFyYW1ldGVyKSB7XHJcbiAgICAgICAgICBzY29wZS5maWxlLmRhdGFbcGFyYW1ldGVyLmRhdGEubmFtZV0gPSBwYXJhbWV0ZXIudmFsdWU7XHJcbiAgICAgICAgfSk7IFxyXG4gICAgICAgIHNjb3BlLiRlbWl0KFwib2JqZWN0Q2hhbmdlZFwiKTtcclxuICAgICAgfSwgdHJ1ZSk7XHJcbiAgICAgIHNjb3BlLiR3YXRjaChcInNlbGVjdGVkVHlwZVwiLCBjaGFuZ2VUeXBlKVxyXG4gICAgICBzY29wZS4kd2F0Y2goXCJmaWxlXCIsIHVwZGF0ZVRlbXBsYXRlKTtcclxuICAgICAgLy9zY29wZS4kd2F0Y2goXCJmaWxlLmRhdGFcIiwgZm4uZGVib3VuY2UoZnVuY3Rpb24obmV3VmFsdWUpIHsgZGVidWdnZXI7IH0sODAwKSwgdHJ1ZSk7XHJcbiAgICB9XHJcbiAgfTtcclxufV0pO1xyXG5cclxubXVzaWNTaG93Q2FzZUFwcC5kaXJlY3RpdmUoXCJhcnJheUVkaXRvclwiLCBbXCIkdGltZW91dFwiLCBcIlJlY2lwZVwiLCBmdW5jdGlvbigkdGltZW91dCwgUmVjaXBlKSB7XHJcbiAgcmV0dXJuIHtcclxuICAgIHNjb3BlOiB7XHJcbiAgICAgIGRhdGE6IFwiPWRhdGFcIlxyXG4gICAgfSxcclxuICAgIHRlbXBsYXRlVXJsOiBcInNpdGUvdGVtcGxhdGVzL2FycmF5RWRpdG9yLmh0bWxcIixcclxuICAgIGxpbms6IGZ1bmN0aW9uKHNjb3BlLCBlbGVtZW50LCBhdHRycykge1xyXG4gICAgICBzY29wZS5kYXRhLnN1Ym9iamVjdHM9c2NvcGUuZGF0YS5zdWJvYmplY3RzfHxbXTtcclxuICAgICAgc2NvcGUubWF4RWxlbWVudHMgPSBhdHRycy5tYXhlbGVtZW50cyA/IHBhcnNlSW50KGF0dHJzLm1heGVsZW1lbnRzKSA6IEluZmluaXR5O1xyXG4gICAgICBzY29wZS5jdXJyZW50VGFiID0gMDtcclxuICAgICAgc2NvcGUucmVjaXBlID0gUmVjaXBlLnN0YXJ0O1xyXG5cclxuICAgICAgdmFyIGFkZE9iamVjdCA9IGZ1bmN0aW9uKG5ld09iamVjdCkge1xyXG4gICAgICAgICR0aW1lb3V0KGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgc2NvcGUuZGF0YS5zdWJvYmplY3RzPXNjb3BlLmRhdGEuc3Vib2JqZWN0c3x8W107XHJcbiAgICAgICAgICBzY29wZS5kYXRhLnN1Ym9iamVjdHMucHVzaChuZXdPYmplY3QpO1xyXG4gICAgICAgICAgc2NvcGUuc2V0Q3VycmVudFRhYihzY29wZS5kYXRhLnN1Ym9iamVjdHMubGVuZ3RoLTEpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICB9O1xyXG5cclxuICAgICAgc2NvcGUuc2V0Q3VycmVudFRhYiA9IGZ1bmN0aW9uKGlkeCkge1xyXG4gICAgICAgIHNjb3BlLmN1cnJlbnRUYWIgPSBpZHg7XHJcbiAgICAgIH07XHJcblxyXG4gICAgICBzY29wZS5yZW1vdmVPYmplY3QgPSBmdW5jdGlvbihvYmplY3QpIHtcclxuICAgICAgICBzY29wZS5kYXRhLnN1Ym9iamVjdHMgPSBzY29wZS5kYXRhLnN1Ym9iamVjdHMuZmlsdGVyKGZ1bmN0aW9uKG8pIHtyZXR1cm4gbyAhPT0gb2JqZWN0OyB9KTtcclxuICAgICAgfTtcclxuXHJcbiAgICAgIHNjb3BlLmFkZE9iamVjdCA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIGFkZE9iamVjdCh7ZGF0YToge2FycmF5OiBbXX0sIHR5cGU6IFwic3RhY2tcIn0pXHJcbiAgICAgIH07XHJcblxyXG4gICAgICBpZiAoc2NvcGUuZGF0YS5zdWJvYmplY3RzLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICAgIHNjb3BlLmFkZE9iamVjdCgpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfTtcclxufV0pO1xyXG5cclxubXVzaWNTaG93Q2FzZUFwcC5kaXJlY3RpdmUoXCJtdXNpY1N0YWNrXCIsIFtcIiR0aW1lb3V0XCIsIFwiUmVjaXBlXCIsIFwiVHlwZVNlcnZpY2VcIiwgZnVuY3Rpb24oJHRpbWVvdXQsIFJlY2lwZSwgVHlwZVNlcnZpY2UpIHtcclxuICByZXR1cm4ge1xyXG4gICAgc2NvcGU6IHtcclxuICAgICAgaW5pdEZpbGU6IFwiPWluaXRGaWxlXCIsXHJcbiAgICAgIGRyb3B6b25lRXh0cmFOYW1lOiBcIj1kcm9wem9uZUV4dHJhTmFtZVwiXHJcbiAgICB9LFxyXG4gICAgdGVtcGxhdGVVcmw6IFwic2l0ZS90ZW1wbGF0ZXMvc3RhY2suaHRtbFwiLFxyXG4gICAgbGluazogZnVuY3Rpb24oc2NvcGUsIGVsZW1lbnQsIGF0dHJzKSB7XHJcbiAgICAgIHNjb3BlLnJlY2lwZSA9IFJlY2lwZS5zdGFydDtcclxuXHJcbiAgICAgIHZhciBzd2FwID0gZnVuY3Rpb24oaWR4MSwgaWR4Mikge1xyXG4gICAgICAgIHNjb3BlLiRlbWl0KFwic3RhY2tDaGFuZ2VkXCIpO1xyXG5cclxuICAgICAgICAkdGltZW91dChmdW5jdGlvbigpIHtcclxuICAgICAgICAgIHZhciB0bXAgPSBzY29wZS5maWxlLmFycmF5W2lkeDFdO1xyXG4gICAgICAgICAgc2NvcGUuZmlsZS5hcnJheVtpZHgxXSA9IHNjb3BlLmZpbGUuYXJyYXlbaWR4Ml07XHJcbiAgICAgICAgICBzY29wZS5maWxlLmFycmF5W2lkeDJdID0gdG1wO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICB9O1xyXG5cclxuICAgICAgdmFyIGRlZmF1bHRTdGFja0FwcGVuZCA9IGZ1bmN0aW9uKGZpbGUsIGRhdGEpIHtcclxuICAgICAgICBmaWxlLmFycmF5ID0gW3tcclxuICAgICAgICAgIHR5cGU6IGRhdGEubmFtZSxcclxuICAgICAgICAgIGRhdGE6IHt9XHJcbiAgICAgICAgfV0uY29uY2F0KGZpbGUuYXJyYXkpO1xyXG4gICAgICB9O1xyXG5cclxuICAgICAgc2NvcGUub25Ecm9wQ29tcGxldGUgPSBmdW5jdGlvbihkYXRhLCBldmVudCkge1xyXG4gICAgICAgIGlmIChkYXRhLnR5cGUgPT09IFwiZnhcIikge1xyXG4gICAgICAgICAgVHlwZVNlcnZpY2UuZ2V0VHlwZShkYXRhLm5hbWUpXHJcbiAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uKHR5cGUpIHtcclxuICAgICAgICAgICAgICAodHlwZS5zdGFja0FwcGVuZCB8fGRlZmF1bHRTdGFja0FwcGVuZCkoc2NvcGUuZmlsZSwgZGF0YSk7XHJcbiAgICAgICAgICAgICAgc2NvcGUuJGVtaXQoXCJzdGFja0NoYW5nZWRcIik7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgICAgfTtcclxuXHJcbiAgICAgIHNjb3BlLnVwID0gZnVuY3Rpb24oaWR4KSB7XHJcbiAgICAgICAgc3dhcChpZHgtMSwgaWR4KTtcclxuICAgICAgfTtcclxuXHJcbiAgICAgIHNjb3BlLmRvd24gPSBmdW5jdGlvbihpZHgpIHtcclxuICAgICAgICBzd2FwKGlkeCsxLCBpZHgpO1xyXG4gICAgICB9O1xyXG5cclxuICAgICAgc2NvcGUucmVtb3ZlID0gZnVuY3Rpb24oaWR4KSB7XHJcbiAgICAgICAgc2NvcGUuJGVtaXQoXCJzdGFja0NoYW5nZWRcIik7XHJcblxyXG4gICAgICAgICR0aW1lb3V0KGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgdmFyIG9sZENvbGxlY3Rpb24gPSBzY29wZS5maWxlLmFycmF5O1xyXG4gICAgICAgICAgc2NvcGUuZmlsZS5hcnJheSA9IFtdO1xyXG4gICAgICAgICAgZm9yICh2YXIgaT0wOyBpPG9sZENvbGxlY3Rpb24ubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgaWYgKGkhPT1pZHgpIHNjb3BlLmZpbGUuYXJyYXkucHVzaChvbGRDb2xsZWN0aW9uW2ldKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgICAgfTtcclxuXHJcbiAgICAgIHNjb3BlLmFkZCA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIHNjb3BlLiRlbWl0KFwic3RhY2tDaGFuZ2VkXCIpO1xyXG5cclxuICAgICAgICAkdGltZW91dChmdW5jdGlvbigpIHtcclxuICAgICAgICAgIHNjb3BlLmZpbGUuYXJyYXkucHVzaCh7ZGF0YToge30sIHR5cGU6IFwibnVsbFwifSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH07XHJcblxyXG4gICAgICBzY29wZS4kd2F0Y2goXCJpbml0RmlsZVwiLCBmdW5jdGlvbihuZXdGaWxlKSB7XHJcbiAgICAgICAgaWYgKG5ld0ZpbGUpIHtcclxuICAgICAgICAgIHNjb3BlLmZpbGUgPSBuZXdGaWxlLmRhdGE7XHJcbiAgICAgICAgfVxyXG4gICAgICB9KTtcclxuICAgIH1cclxuICB9OyAgXHJcblxyXG59XSk7XHJcblxyXG5tdXNpY1Nob3dDYXNlQXBwLmRpcmVjdGl2ZShcImN1c3RvbU9zY0dyYXBoXCIsIFtcIiR0aW1lb3V0XCIsIGZ1bmN0aW9uKCR0aW1lb3V0KSB7XHJcbiAgcmV0dXJuIHtcclxuICAgIHNjb3BlOiB7XHJcbiAgICAgIHRlcm1zOiBcIj10ZXJtc1wiXHJcbiAgICB9LFxyXG4gICAgdGVtcGxhdGU6ICc8ZnVuY3Rpb24tZ3JhcGggZj1cImZcIiBzYW1wbGVzPTY0IHQwPVwiMFwiIHRmPVwiMVwiIHNjYWxleT1cIjAuOFwiPjwvZnVuY3Rpb24tZ3JhcGg+JyxcclxuICAgIGxpbms6IGZ1bmN0aW9uKHNjb3BlLCBlbGVtZW50LCBhdHRycykge1xyXG4gICAgICB2YXIgdGVybXNDaGFuZ2VkID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgc2NvcGUuZiA9IGZ1bmN0aW9uKHQpe1xyXG4gICAgICAgICAgdmFyIHJldCA9IDA7XHJcbiAgICAgICAgICBmb3IgKHZhciBpPTE7aTxzY29wZS50ZXJtcy5zaW4ubGVuZ3RoO2krKykge1xyXG4gICAgICAgICAgICB2YXIgYSA9IHNjb3BlLnRlcm1zLnNpbltpXTtcclxuICAgICAgICAgICAgdmFyIGIgPSBzY29wZS50ZXJtcy5jb3NbaV07XHJcblxyXG4gICAgICAgICAgICByZXQgPSByZXQgKyBhICogTWF0aC5zaW4odCoyKk1hdGguUEkqaSk7XHJcbiAgICAgICAgICAgIHJldCA9IHJldCArIGIgKiBNYXRoLmNvcyh0KjIqTWF0aC5QSSppKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIHJldHVybiByZXQ7XHJcbiAgICAgICAgfTtcclxuICAgICAgfTtcclxuXHJcbiAgICAgIHNjb3BlLmYgPSBmdW5jdGlvbigpIHsgcmV0dXJuIDA7IH07XHJcbiAgICAgIHNjb3BlLiRvbihcInRlcm1zY2hhbmdlZFwiLCBmbi5kZWJvdW5jZSh0ZXJtc0NoYW5nZWQsMTApKTtcclxuXHJcbiAgICAgIHRlcm1zQ2hhbmdlZCgpO1xyXG4gICAgfVxyXG4gIH07XHJcbn1dKTtcclxuXHJcbm11c2ljU2hvd0Nhc2VBcHAuZGlyZWN0aXZlKFwic2hvd1NjYWxlXCIsIFtcIiR0aW1lb3V0XCIsIGZ1bmN0aW9uKCR0aW1lb3V0KSB7XHJcbiAgcmV0dXJuIHtcclxuICAgIHNjb3BlOiB7XHJcbiAgICAgIHNjYWxlOiBcIj1zY2FsZVwiXHJcbiAgICB9LFxyXG4gICAgdGVtcGxhdGU6ICc8ZGl2IGNsYXNzPVwibm90ZS1jZWxsXCIgbmctcmVwZWF0PVwibm90ZSBpbiBub3Rlc1wiPnt7bm90ZX19PC9kaXY+PGRpdiBjbGFzcz1cIm5vdGUtY2VsbFwiIG5nLXJlcGVhdD1cIm5vdGUgaW4gbm90ZXNcIj57e25vdGV9fTwvZGl2PicsXHJcbiAgICBsaW5rOiBmdW5jdGlvbihzY29wZSwgZWxlbWVudCwgYXR0cnMpIHtcclxuICAgICAgdmFyIHNlbWl0b25lVG9Ob3RlID0gZnVuY3Rpb24obikge1xyXG4gICAgICAgIHJldHVybiBbMCxbMCwxXSwgMSwgWzEsMl0sIDIsIDMsIFszLDRdLCA0LCBbNCw1XSwgNSwgWzUsNl0sIDZdW24lMTJdO1xyXG4gICAgICB9O1xyXG5cclxuICAgICAgdmFyIG5vdGVUb1NlbWl0b25lID0gZnVuY3Rpb24obikge1xyXG4gICAgICAgIHJldHVybiBbMCwyLDQsNSw3LDksMTFdW24lN107XHJcbiAgICAgIH07XHJcblxyXG4gICAgICB2YXIgbm90YXRpb243ID0gZnVuY3Rpb24obikge1xyXG4gICAgICAgIHJldHVybiBbXCJDXCIsXCJEXCIsXCJFXCIsXCJGXCIsXCJHXCIsXCJBXCIsXCJCXCJdW24gJSA3XTtcclxuICAgICAgfTtcclxuXHJcbiAgICAgIHNjb3BlLiR3YXRjaChcInNjYWxlXCIsIGZ1bmN0aW9uKG5ld1ZhbCkge1xyXG4gICAgICAgICR0aW1lb3V0KGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgdmFyIHNjYWxlID0gTVVTSUMuVXRpbHMuU2NhbGUobmV3VmFsKTtcclxuICAgICAgICAgIHZhciBkZWx0YXMgPSBbMCwxLDIsMyw0LDUsNl07XHJcblxyXG4gICAgICAgICAgdmFyIGluaXRUb25lID0gc2VtaXRvbmVUb05vdGUobmV3VmFsKTtcclxuICAgICAgICAgIGlmIChpbml0VG9uZS5sZW5ndGgpIGluaXRUb25lID0gaW5pdFRvbmVbMV07XHJcblxyXG4gICAgICAgICAgc2NvcGUubm90ZXMgPSBkZWx0YXMubWFwKGZ1bmN0aW9uKGQpIHtcclxuICAgICAgICAgICAgdmFyIHNlbWl0b25lID0gc2NhbGUuYWRkKG5ld1ZhbCxkKTtcclxuICAgICAgICAgICAgdmFyIHRvbmUgPSAoaW5pdFRvbmUgKyBkKSAlIDc7XHJcbiAgICAgICAgICAgIHZhciBhbHQgPSBcIlwiO1xyXG5cclxuICAgICAgICAgICAgaWYgKG5vdGVUb1NlbWl0b25lKHRvbmUpID4gc2VtaXRvbmUgJSAxMikgYWx0ID0gXCJiXCI7XHJcbiAgICAgICAgICAgIGlmIChub3RlVG9TZW1pdG9uZSh0b25lKSA8IHNlbWl0b25lICUgMTIpIGFsdCA9IFwiI1wiO1xyXG4gICAgICAgICAgICByZXR1cm4gbm90YXRpb243KHRvbmUpICsgYWx0O1xyXG4gICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG4gIH07XHJcbn1dKTtcclxuXHJcbm11c2ljU2hvd0Nhc2VBcHAuZGlyZWN0aXZlKFwibmdTY3JvbGxUb3BcIiwgW1wiJHBhcnNlXCIsIFwiJHRpbWVvdXRcIiwgZnVuY3Rpb24oJHBhcnNlLCAkdGltZW91dCkge1xyXG4gIHJldHVybiB7XHJcbiAgICByZXN0cmljdDogJ0EnLFxyXG4gICAgbGluazogZnVuY3Rpb24oc2NvcGUsIGVsZW1lbnQsIGF0dHJzKSB7XHJcbiAgICAgIHZhciBzY3JvbGxWYXJHZXR0ZXIgPSAkcGFyc2UoYXR0cnMubmdTY3JvbGxUb3ApO1xyXG4gICAgICB2YXIgc2Nyb2xsVmFyU2V0dGVyID0gc2Nyb2xsVmFyR2V0dGVyLmFzc2lnbjtcclxuXHJcbiAgICAgIHNjb3BlLiR3YXRjaChhdHRycy5uZ1Njcm9sbFRvcCwgZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgJChlbGVtZW50KS5zY3JvbGxUb3Aoc2Nyb2xsVmFyR2V0dGVyKHNjb3BlKSk7XHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgZWxlbWVudC5vbignc2Nyb2xsJywgZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgJHRpbWVvdXQoZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICBzY3JvbGxWYXJTZXR0ZXIoc2NvcGUsICQoZWxlbWVudCkuc2Nyb2xsVG9wKCkpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICB9KTtcclxuICAgIH1cclxuICB9O1xyXG59XSk7XHJcblxyXG5tdXNpY1Nob3dDYXNlQXBwLmRpcmVjdGl2ZShcIm5nU2Nyb2xsTGVmdFwiLCBbXCIkcGFyc2VcIiwgXCIkdGltZW91dFwiLCBmdW5jdGlvbigkcGFyc2UsICR0aW1lb3V0KSB7XHJcbiAgcmV0dXJuIHtcclxuICAgIHJlc3RyaWN0OiAnQScsXHJcbiAgICBsaW5rOiBmdW5jdGlvbihzY29wZSwgZWxlbWVudCwgYXR0cnMpIHtcclxuICAgICAgdmFyIHNjcm9sbFZhckdldHRlciA9ICRwYXJzZShhdHRycy5uZ1Njcm9sbExlZnQpO1xyXG4gICAgICB2YXIgc2Nyb2xsVmFyU2V0dGVyID0gc2Nyb2xsVmFyR2V0dGVyLmFzc2lnbjtcclxuXHJcbiAgICAgIHNjb3BlLiR3YXRjaChhdHRycy5uZ1Njcm9sbExlZnQsIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICQoZWxlbWVudCkuc2Nyb2xsTGVmdChzY3JvbGxWYXJHZXR0ZXIoc2NvcGUpKTtcclxuICAgICAgfSk7XHJcblxyXG4gICAgICBlbGVtZW50Lm9uKCdzY3JvbGwnLCBmdW5jdGlvbigpIHtcclxuICAgICAgICAkdGltZW91dChmdW5jdGlvbigpIHtcclxuICAgICAgICAgIHNjcm9sbFZhclNldHRlcihzY29wZSwgJChlbGVtZW50KS5zY3JvbGxMZWZ0KCkpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICB9KTtcclxuICAgIH1cclxuICB9O1xyXG59XSk7XHJcblxyXG4iLCJtdXNpY1Nob3dDYXNlQXBwLmRpcmVjdGl2ZShcImZ1bmN0aW9uR3JhcGhcIiwgW1wiJHRpbWVvdXRcIiwgXCIkcGFyc2VcIiwgZnVuY3Rpb24oJHRpbWVvdXQsICRwYXJzZSkge1xyXG4gIHJldHVybiB7XHJcbiAgICBzY29wZToge30sXHJcbiAgICByZXBsYWNlOiB0cnVlLFxyXG4gICAgdGVtcGxhdGU6ICc8Y2FudmFzIGNsYXNzPVwid2F2ZWdyYXBoXCI+PC9jYW52YXM+JyxcclxuICAgIGxpbms6IGZ1bmN0aW9uKHNjb3BlLCBlbGVtZW50LCBhdHRycykge1xyXG4gICAgICB2YXIgZjtcclxuICAgICAgdmFyIHQwID0gcGFyc2VGbG9hdChhdHRycy50MCk7XHJcbiAgICAgIHZhciB0ZiA9IHBhcnNlRmxvYXQoYXR0cnMudGYpO1xyXG4gICAgICB2YXIgc2FtcGxlcyA9IHBhcnNlSW50KGF0dHJzLnNhbXBsZXMpO1xyXG4gICAgICB2YXIgc2NhbGV5ID0gcGFyc2VGbG9hdChhdHRycy5zY2FsZXkpO1xyXG5cclxuICAgICAgc2NvcGUuJHBhcmVudC4kd2F0Y2goYXR0cnMuZiwgZnVuY3Rpb24oX2YpIHtcclxuICAgICAgICBmID0gX2Y7XHJcbiAgICAgICAgaWYgKGYpIHJlZHJhdygpO1xyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIHZhciByZWRyYXcgPSBmdW5jdGlvbigpIHtcclxuICAgICAgICB2YXIgY2FudmFzID0gZWxlbWVudFswXTtcclxuICAgICAgICB2YXIgY29udGV4dCA9IGNhbnZhcy5nZXRDb250ZXh0KCcyZCcpO1xyXG5cclxuICAgICAgICBjYW52YXMud2lkdGggPSBjYW52YXMuY2xpZW50V2lkdGgvNDtcclxuICAgICAgICBjYW52YXMuaGVpZ2h0ID0gY2FudmFzLmNsaWVudEhlaWdodC80O1xyXG5cclxuICAgICAgICB2YXIgZHJhd0xpbmUgPSBmdW5jdGlvbih4MCwgeTAsIHgxLCB5MSwgY29sb3IpIHtcclxuICAgICAgICAgIGNvbnRleHQuc2F2ZSgpO1xyXG4gICAgICAgICAgY29udGV4dC5iZWdpblBhdGgoKTtcclxuICAgICAgICAgIGNvbnRleHQubW92ZVRvKHgwLCB5MCk7XHJcbiAgICAgICAgICBjb250ZXh0LmxpbmVUbyh4MSwgeTEpO1xyXG4gICAgICAgICAgY29udGV4dC5zdHJva2VTdHlsZSA9IGNvbG9yO1xyXG4gICAgICAgICAgY29udGV4dC5saW5lV2lkdGggPSAxO1xyXG4gICAgICAgICAgY29udGV4dC5zdHJva2UoKTtcclxuICAgICAgICAgIGNvbnRleHQucmVzdG9yZSgpOyBcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICB2YXIgZHJhd0Z1bmMgPSBmdW5jdGlvbihjb2xvcikge1xyXG4gICAgICAgICAgY29udGV4dC5zYXZlKCk7XHJcbiAgICAgICAgICBjb250ZXh0LnNhdmUoKTtcclxuICAgICAgICAgIGNvbnRleHQudHJhbnNsYXRlKDAsY2FudmFzLmhlaWdodC8yKTtcclxuICAgICAgICAgIGNvbnRleHQuc2NhbGUoY2FudmFzLndpZHRoLGNhbnZhcy5oZWlnaHQvMik7XHJcblxyXG4gICAgICAgICAgY29udGV4dC5tb3ZlVG8oMCwgLWYodDApKnNjYWxleSk7XHJcbiAgICAgICAgICBmb3IgKHZhciBpPTE7IGk8PXNhbXBsZXM7IGkrKykge1xyXG4gICAgICAgICAgICB2YXIgeCA9IGkvc2FtcGxlcztcclxuICAgICAgICAgICAgdmFyIHQgPSAodGYtdDApICogeCArIHQwO1xyXG4gICAgICAgICAgICBjb250ZXh0LmxpbmVUbyh4LCAtZih0KSpzY2FsZXkpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgY29udGV4dC5yZXN0b3JlKCk7XHJcbiAgICAgICAgICBjb250ZXh0LmxpbmVKb2luID0gJ3JvdW5kJztcclxuICAgICAgICAgIGNvbnRleHQubGluZVdpZHRoID0gMTtcclxuICAgICAgICAgIGNvbnRleHQuc3Ryb2tlU3R5bGUgPSBjb2xvcjtcclxuICAgICAgICAgIGNvbnRleHQuc3Ryb2tlKCk7XHJcbiAgICAgICAgICBjb250ZXh0LnJlc3RvcmUoKTtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICBkcmF3TGluZSgwLCBjYW52YXMuaGVpZ2h0LzIsIGNhbnZhcy53aWR0aCwgY2FudmFzLmhlaWdodC8yLCAnYXF1YScpO1xyXG4gICAgICAgIGRyYXdGdW5jKFwiI0ZGRlwiKTtcclxuICAgICAgfTtcclxuICAgIH1cclxuICB9O1xyXG59XSk7XHJcblxyXG4iLCJ2YXIgbXVzaWNTaG93Q2FzZUFwcCA9IGFuZ3VsYXIubW9kdWxlKFwiTXVzaWNTaG93Q2FzZUFwcFwiKTtcclxubXVzaWNTaG93Q2FzZUFwcC5kaXJlY3RpdmUoXCJrZXlib2FyZFwiLCBbXCIkdGltZW91dFwiLCBcIiR1aWJNb2RhbFwiLCBcIk1pZGlcIiwgXCJNdXNpY0NvbnRleHRcIiwgZnVuY3Rpb24oJHRpbWVvdXQsICR1aWJNb2RhbCwgTWlkaSwgTXVzaWNDb250ZXh0KSB7XHJcbiAgcmV0dXJuIHtcclxuICAgIHNjb3BlOiB7XHJcbiAgICAgIGluc3RydW1lbnQ6ICc9aW5zdHJ1bWVudCdcclxuICAgIH0sXHJcbiAgICB0ZW1wbGF0ZVVybDogXCJzaXRlL3RlbXBsYXRlcy9rZXlib2FyZC5odG1sXCIsXHJcbiAgICBsaW5rOiBmdW5jdGlvbihzY29wZSwgZWxlbWVudCwgYXR0cnMpIHtcclxuICAgICAgdmFyIGlucHV0cztcclxuICAgICAgdmFyIG9uTUlESU1lc3NhZ2UgPSBmdW5jdGlvbihldmVudCkge1xyXG4gICAgICAgIHZhciBjb21tYW5kID0gZXZlbnQuZGF0YVswXTtcclxuICAgICAgICB2YXIgdmFsdWUgPSBldmVudC5kYXRhWzFdO1xyXG4gICAgICAgIHZhciB2ZWxvY2l0eSA9IGV2ZW50LmRhdGFbMl07XHJcblxyXG4gICAgICAgIHZhciBvY3RhdmVOdW1iZXIgPSBNYXRoLmZsb29yKHZhbHVlLzEyKTtcclxuICAgICAgICBpZiAob2N0YXZlTnVtYmVyIDwgMCkgcmV0dXJuO1xyXG5cclxuICAgICAgICB2YXIgb2N0ID0gc2NvcGUub2N0YXZlc1tvY3RhdmVOdW1iZXJdO1xyXG4gICAgICAgIGlmICghb2N0KSByZXR1cm47XHJcblxyXG4gICAgICAgIGlmIChjb21tYW5kID09PSAxNDQpIHtcclxuICAgICAgICAgIG9jdC5taWRpW3ZhbHVlICUgMTJdID0gdHJ1ZTtcclxuICAgICAgICAgIG9jdC51cGRhdGUoKTtcclxuICAgICAgICB9IGVsc2UgaWYgKGNvbW1hbmQgPT09IDEyOCkge1xyXG4gICAgICAgICAgb2N0Lm1pZGlbdmFsdWUgJSAxMl0gPSBmYWxzZTtcclxuICAgICAgICAgIG9jdC51cGRhdGUoKTtcclxuICAgICAgICB9XHJcbiAgICAgIH07XHJcbiAgICAgIHZhciBsaXN0ZW5lciA9IE1pZGkucmVnaXN0ZXJFdmVudExpc3RlbmVyKG9uTUlESU1lc3NhZ2UpO1xyXG4gICAgICB2YXIgdXBkYXRlTWlkaVN0YXR1cyA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIE1pZGkuZ2V0U3RhdHVzKClcclxuICAgICAgICAgIC50aGVuKGZ1bmN0aW9uKGRhdGEpIHtcclxuICAgICAgICAgICAgJHRpbWVvdXQoZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgc2NvcGUubWlkaUNvbm5lY3RlZCA9IGRhdGEuY29ubmVjdGVkO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgIH0pO1xyXG4gICAgICB9O1xyXG5cclxuICAgICAgdXBkYXRlTWlkaVN0YXR1cygpO1xyXG5cclxuICAgICAgc2NvcGUuJG9uKFwiJGRlc3Ryb3lcIiwgZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgbGlzdGVuZXIuZGVzdHJveSgpO1xyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIHZhciBrZXlDb2RlVG9Ob3RlID0ge1xyXG4gICAgICAgICAgICAgIDkwOiAnQycsIDgzOiAnQyMnLCA4ODogJ0QnLCAgNjg6ICdEIycsIDY3OiAnRScsXHJcbiAgICAgICAgICAgICAgODY6ICdGJywgNzE6ICdGIycsIDY2OiAnRycsIDcyOiAnRyMnLCA3ODogJ0EnLCBcclxuICAgICAgICAgICAgICA3NDogJ0EjJywgNzc6ICdCJ307XHJcblxyXG4gICAgICB2YXIgc3RvcEFsbCA9IGZ1bmN0aW9uKHgpIHtcclxuICAgICAgICByZXR1cm4geC5zdG9wQWxsKCk7XHJcbiAgICAgIH07XHJcblxyXG4gICAgICB2YXIgdXBkYXRlID0gZnVuY3Rpb24ob2N0YXZlKSB7XHJcbiAgICAgICAgcmV0dXJuIG9jdGF2ZS51cGRhdGUoKTtcclxuICAgICAgfTtcclxuXHJcbiAgICAgIHNjb3BlLm1pZGlTZXR1cCA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIHZhciBtb2RhbElucyA9ICR1aWJNb2RhbC5vcGVuKHtcclxuICAgICAgICAgIHRlbXBsYXRlVXJsOiBcInNpdGUvdGVtcGxhdGVzL21vZGFsL21pZGlTZXR0aW5ncy5odG1sXCIsXHJcbiAgICAgICAgICBjb250cm9sbGVyOiBcIm1pZGlTZXR0aW5nc01vZGFsQ3RybFwiXHJcbiAgICAgICAgfSkucmVzdWx0LnRoZW4odXBkYXRlTWlkaVN0YXR1cyk7XHJcbiAgICAgIH07XHJcblxyXG4gICAgICBzY29wZS5zdG9wQWxsID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgc2NvcGUub2N0YXZlcy5mb3JFYWNoKHN0b3BBbGwpO1xyXG4gICAgICB9O1xyXG5cclxuICAgICAgdmFyIG9jdGF2ZSA9IGZ1bmN0aW9uKGJhc2UpIHtcclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgbW91c2U6IHt9LFxyXG4gICAgICAgICAga2V5OiB7fSxcclxuICAgICAgICAgIG1pZGk6IHt9LFxyXG4gICAgICAgICAgbm90ZTogW10sXHJcbiAgICAgICAgICBwbGF5OiBmdW5jdGlvbihpZHgpIHtcclxuICAgICAgICAgICAgaWYgKHRoaXMubm90ZVtpZHhdKSByZXR1cm47XHJcblxyXG4gICAgICAgICAgICB0aGlzLm5vdGVbaWR4XSA9IHNjb3BlLmluc3RydW1lbnQubm90ZShiYXNlK2lkeCkucGxheSgpO1xyXG4gICAgICAgICAgfSxcclxuICAgICAgICAgIHN0b3A6IGZ1bmN0aW9uKGlkeCkge1xyXG4gICAgICAgICAgICBpZiAoIXRoaXMubm90ZVtpZHhdKXJldHVybjtcclxuICAgICAgICAgICAgdGhpcy5ub3RlW2lkeF0uc3RvcCgpO1xyXG4gICAgICAgICAgICB0aGlzLm5vdGVbaWR4XSA9IHVuZGVmaW5lZDtcclxuICAgICAgICAgIH0sXHJcbiAgICAgICAgICB1cGRhdGU6IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICBmb3IgKHZhciBpZHg9MDsgaWR4PDEyOyBpZHgrKykge1xyXG4gICAgICAgICAgICAgIGlmICh0aGlzLm1vdXNlW2lkeF0gfHwgdGhpcy5rZXlbaWR4XSB8fCB0aGlzLm1pZGlbaWR4XSkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5wbGF5KGlkeCk7XHJcbiAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuc3RvcChpZHgpO1xyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgJHRpbWVvdXQoZnVuY3Rpb24oKXt9KTtcclxuICAgICAgICAgIH0sXHJcbiAgICAgICAgICBzdG9wQWxsOiBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgdGhpcy5ub3RlLmZvckVhY2goZnVuY3Rpb24obm90ZSkge1xyXG4gICAgICAgICAgICAgIGlmKG5vdGUgJiYgbm90ZS5zdG9wKSBub3RlLnN0b3AoKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIHRoaXMubm90ZSA9IFtdO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcbiAgICAgIH07XHJcblxyXG4gICAgICB2YXIgZ2VzdHVyZSA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIE11c2ljQ29udGV4dC5yZXN1bWVBdWRpbygpO1xyXG4gICAgICB9O1xyXG5cclxuICAgICAgdmFyIG1vdXNlT2ZmID0gZnVuY3Rpb24ob2N0YXZlKSB7XHJcbiAgICAgICAgZ2VzdHVyZSgpO1xyXG5cclxuICAgICAgICBvY3RhdmUubW91c2UgPSB7fTtcclxuICAgICAgICBvY3RhdmUudXBkYXRlKCk7XHJcbiAgICAgIH07XHJcblxyXG4gICAgICBzY29wZS5tb3VzZUxlYXZlID0gZnVuY3Rpb24ob2N0YXZlLCBpZHgpIHtcclxuICAgICAgICBnZXN0dXJlKCk7XHJcblxyXG4gICAgICAgIG9jdGF2ZS5tb3VzZVtpZHhdID0gZmFsc2U7XHJcbiAgICAgICAgb2N0YXZlLnVwZGF0ZSgpO1xyXG4gICAgICB9O1xyXG5cclxuICAgICAgc2NvcGUubW91c2VFbnRlciA9IGZ1bmN0aW9uKG9jdGF2ZSwgaWR4KSB7XHJcbiAgICAgICAgZ2VzdHVyZSgpO1xyXG5cclxuICAgICAgICBzY29wZS5vY3RhdmVzLmZvckVhY2gobW91c2VPZmYpO1xyXG4gICAgICAgIG9jdGF2ZS5tb3VzZVtpZHhdID0gdHJ1ZTtcclxuXHJcbiAgICAgICAgc2NvcGUub2N0YXZlcy5mb3JFYWNoKHVwZGF0ZSk7XHJcbiAgICAgIH07XHJcblxyXG4gICAgICB2YXIga2V5RG93bkhhbmRsZXIgPSBmdW5jdGlvbihlKSB7XHJcbiAgICAgICAgZ2VzdHVyZSgpO1xyXG5cclxuICAgICAgICBpZiAoZG9jdW1lbnQuYWN0aXZlRWxlbWVudC50YWdOYW1lLnRvTG93ZXJDYXNlKCkgPT09IFwiaW5wdXRcIikgcmV0dXJuO1xyXG5cclxuICAgICAgICB2YXIga2V5Q29kZSA9IGUua2V5Q29kZTtcclxuICAgICAgICB2YXIgbm90ZU5hbWUgPSBrZXlDb2RlVG9Ob3RlW2tleUNvZGVdO1xyXG4gICAgICAgIGlmICghbm90ZU5hbWUpIHJldHVybjtcclxuXHJcbiAgICAgICAgdmFyIGlkeCA9IE1VU0lDLm5vdGVUb05vdGVOdW0obm90ZU5hbWUpO1xyXG4gICAgICAgIHNjb3BlLm9jdGF2ZXNbMV0ua2V5W2lkeF0gPSB0cnVlO1xyXG4gICAgICAgIHNjb3BlLm9jdGF2ZXNbMV0udXBkYXRlKCk7XHJcblxyXG4gICAgICAgIHNjb3BlLiRkaWdlc3QoKTtcclxuICAgICAgfVxyXG5cclxuICAgICAgdmFyIGtleVVwSGFuZGxlciA9IGZ1bmN0aW9uKGUpIHtcclxuICAgICAgICBnZXN0dXJlKCk7XHJcblxyXG4gICAgICAgIHZhciBrZXlDb2RlID0gZS5rZXlDb2RlO1xyXG4gICAgICAgIHZhciBub3RlTmFtZSA9IGtleUNvZGVUb05vdGVba2V5Q29kZV07XHJcbiAgICAgICAgaWYgKCFub3RlTmFtZSkgcmV0dXJuO1xyXG5cclxuICAgICAgICB2YXIgaWR4ID0gTVVTSUMubm90ZVRvTm90ZU51bShub3RlTmFtZSk7XHJcbiAgICAgICAgc2NvcGUub2N0YXZlc1sxXS5rZXlbaWR4XSA9IGZhbHNlO1xyXG4gICAgICAgIHNjb3BlLm9jdGF2ZXNbMV0udXBkYXRlKCk7XHJcblxyXG4gICAgICAgIHNjb3BlLiRkaWdlc3QoKTtcclxuICAgICAgfVxyXG5cclxuICAgICAgJChkb2N1bWVudCkuYmluZChcImtleWRvd25cIiwga2V5RG93bkhhbmRsZXIpO1xyXG4gICAgICAkKGRvY3VtZW50KS5iaW5kKFwia2V5dXBcIiwga2V5VXBIYW5kbGVyKTtcclxuICAgICAgXHJcbiAgICAgIHZhciBwaWFub0ZpcnN0Um93ID0gJChlbGVtZW50KS5maW5kKFwiLnBpYW5vLWZpcnN0cm93IC5rZXlcIik7XHJcbiAgICAgIHZhciBwaWFub1NlY29uZFJvdyA9ICQoZWxlbWVudCkuZmluZChcIi5waWFuby1zZWNvbmRyb3cgLmtleVwiKTtcclxuICAgICAgXHJcbiAgICAgIHBpYW5vRmlyc3RSb3cuYmluZChcImNsaWNrXCIsIGdlc3R1cmUpO1xyXG4gICAgICBwaWFub1NlY29uZFJvdy5iaW5kKFwiY2xpY2tcIiwgZ2VzdHVyZSk7XHJcblxyXG4gICAgICBzY29wZS4kb24oXCIkZGVzdHJveVwiLCBmdW5jdGlvbigpIHtcclxuICAgICAgICAkKGRvY3VtZW50KS51bmJpbmQoXCJrZXlkb3duXCIsIGtleURvd25IYW5kbGVyKTtcclxuICAgICAgICAkKGRvY3VtZW50KS51bmJpbmQoXCJrZXl1cFwiLCBrZXlVcEhhbmRsZXIpO1xyXG5cclxuICAgICAgICBwaWFub0ZpcnN0Um93LnVuYmluZChcImNsaWNrXCIsIGdlc3R1cmUpO1xyXG4gICAgICAgIHBpYW5vU2Vjb25kUm93LnVuYmluZChcImNsaWNrXCIsIGdlc3R1cmUpO1xyXG5cclxuICAgICAgICBzY29wZS5vY3RhdmVzLmZvckVhY2goZnVuY3Rpb24ob2N0YXZlKSB7XHJcbiAgICAgICAgICBvY3RhdmUuc3RvcEFsbCgpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIHNjb3BlLm9jdGF2ZXMgPSBbMjQsMzYsNDgsNjAsNzJdLm1hcChvY3RhdmUpO1xyXG4gICAgICBzY29wZS4kd2F0Y2goXCJpbnN0cnVtZW50XCIsIGZ1bmN0aW9uKGluc3RydW1lbnQpIHtcclxuICAgICAgICBzY29wZS5pbnN0cnVtZW50ID0gaW5zdHJ1bWVudDtcclxuICAgICAgfSk7XHJcbiAgICB9XHJcbiAgfTtcclxuXHJcbn1dKTtcclxuIiwibXVzaWNTaG93Q2FzZUFwcC5kaXJlY3RpdmUoXCJtdXNpY0V2ZW50RWRpdG9yXCIsIFtcIiR0aW1lb3V0XCIsIFwiVElDS1NfUEVSX0JFQVRcIiwgXCJQYXR0ZXJuXCIsIFwiTXVzaWNDb250ZXh0XCIsIGZ1bmN0aW9uKCR0aW1lb3V0LCBUSUNLU19QRVJfQkVBVCwgUGF0dGVybiwgTXVzaWNDb250ZXh0KSB7XHJcbiAgcmV0dXJuIHtcclxuICAgIHNjb3BlOiB7XHJcbiAgICAgIC8qIEN1cnJlbnQgcGF0dGVybiAqL1xyXG4gICAgICBwYXR0ZXJuOiBcIj1wYXR0ZXJuXCIsXHJcbiAgICAgIC8qIEN1cnJlbnQgdHJhY2sgKi9cclxuICAgICAgdHJhY2s6IFwiPXRyYWNrXCIsXHJcbiAgICAgIC8qIERpc3BsYXkgcGFyYW1zICovXHJcbiAgICAgIHpvb21MZXZlbDogXCI9em9vbUxldmVsXCIsXHJcbiAgICAgIGJlYXRXaWR0aDogXCI9YmVhdFdpZHRoXCIsXHJcbiAgICAgIC8qIEZpbGUgcGFyYW1zIChjb21tb24gdG8gYWxsIHRyYWNrcykgKi9cclxuICAgICAgbWVhc3VyZTogXCI9bWVhc3VyZVwiLFxyXG4gICAgICBtZWFzdXJlQ291bnQ6IFwiPW1lYXN1cmVDb3VudFwiLFxyXG4gICAgICByZWNpcGU6ICc9cmVjaXBlJ1xyXG4gICAgfSxcclxuICAgIHRlbXBsYXRlVXJsOiBcInNpdGUvdGVtcGxhdGVzL2RpcmVjdGl2ZXMvbXVzaWNFdmVudEVkaXRvci5odG1sXCIsXHJcbiAgICBsaW5rOiBmdW5jdGlvbihzY29wZSwgZWxlbWVudCwgYXR0cnMpIHtcclxuICAgICAgc2NvcGUuVElDS1NfUEVSX0JFQVQgPSBUSUNLU19QRVJfQkVBVDtcclxuICAgICAgdmFyIGRlZmF1bHRMID0gVElDS1NfUEVSX0JFQVQ7XHJcblxyXG4gICAgICB2YXIgY2xlYXJTaGFkb3cgPSBmdW5jdGlvbigpIHtcclxuICAgICAgICBzY29wZS5zaGFkb3dFdnQgPSBudWxsO1xyXG4gICAgICB9O1xyXG5cclxuICAgICAgdmFyIGRlZmF1bHRNb3VzZUxlYXZlID0gY2xlYXJTaGFkb3c7XHJcblxyXG4gICAgICB2YXIgZGVmYXVsdE1vdXNlTW92ZSA9IGZ1bmN0aW9uKGV2ZW50KSB7XHJcbiAgICAgICAgdmFyIGNsaXBEaXN0YW5jZSA9IFRJQ0tTX1BFUl9CRUFUIC8gc2NvcGUuem9vbUxldmVsO1xyXG4gICAgICAgIGlmICghZXZlbnQudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucyhcImV2ZW50LWxpc3RcIikpIHtcclxuICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcblxyXG5cclxuICAgICAgICBzY29wZS5zaGFkb3dFdnQgPSBzY29wZS5zaGFkb3dFdnQgfHwge307XHJcbiAgICAgICAgc2NvcGUuc2hhZG93RXZ0Lm4gPSBNYXRoLmZsb29yKHVwcGVyTGltaXQoKSAtIGV2ZW50Lm9mZnNldFkgLyAyMCk7XHJcbiAgICAgICAgc2NvcGUuc2hhZG93RXZ0LmwgPSBkZWZhdWx0TDtcclxuXHJcbiAgICAgICAgaWYgKHNjb3BlLnNoYWRvd0V2dC5zKSB7XHJcbiAgICAgICAgICB2YXIgZXhhY3RQb3NpdGlvbiA9IE1hdGguZmxvb3IoZXZlbnQub2Zmc2V0WCAvIHNjb3BlLmJlYXRXaWR0aCAvIHNjb3BlLnpvb21MZXZlbCAqIFRJQ0tTX1BFUl9CRUFUKTtcclxuICAgICAgICAgIGV4YWN0UG9zaXRpb24gPSBNYXRoLmZsb29yKGV4YWN0UG9zaXRpb24pO1xyXG4gICAgICAgICAgdmFyIGNsaXBTID0gUGF0dGVybi5maW5kQ2xpcFMoc2NvcGUucGF0dGVybiwgc2NvcGUudHJhY2ssIHtzOiBleGFjdFBvc2l0aW9uLCBsOiBkZWZhdWx0TH0sIGV4YWN0UG9zaXRpb24pO1xyXG5cclxuICAgICAgICAgIGlmIChNYXRoLmFicyhleGFjdFBvc2l0aW9uIC0gY2xpcFMgLSBjbGlwRGlzdGFuY2UgLyAyKSA8IGNsaXBEaXN0YW5jZSkge1xyXG4gICAgICAgICAgICBzY29wZS5zaGFkb3dFdnQucyA9IGNsaXBTO1xyXG5cclxuICAgICAgICAgICAgUGF0dGVybi5jdXRFdmVudChzY29wZS5wYXR0ZXJuLCBzY29wZS50cmFjaywgc2NvcGUuc2hhZG93RXZ0KTtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgc2NvcGUuc2hhZG93RXZ0LnMgPSBNYXRoLmZsb29yKE1hdGguZmxvb3IoZXZlbnQub2Zmc2V0WCAvIDIgLyBzY29wZS5iZWF0V2lkdGgpICogMiAvIHNjb3BlLnpvb21MZXZlbCAqIFRJQ0tTX1BFUl9CRUFUKTtcclxuICAgICAgICBpZiAoc2NvcGUuc2hhZG93RXZ0LnMgPCAwKSBzY29wZS5zaGFkb3dFdnQucyA9IDA7XHJcbiAgICAgICAgUGF0dGVybi5jdXRFdmVudChzY29wZS5wYXR0ZXJuLCBzY29wZS50cmFjaywgc2NvcGUuc2hhZG93RXZ0KTtcclxuICAgICAgfTtcclxuXHJcbiAgICAgIHZhciBzZW1pdG9uZVRvTm90ZSA9IGZ1bmN0aW9uKG4pIHtcclxuICAgICAgICByZXR1cm4gWzAsWzAsMV0sIDEsIFsxLDJdLCAyLCAzLCBbMyw0XSwgNCwgWzQsNV0sIDUsIFs1LDZdLCA2XVtuJTEyXTtcclxuICAgICAgfTtcclxuXHJcbiAgICAgIHZhciBub3RlVG9TZW1pdG9uZSA9IGZ1bmN0aW9uKG4pIHtcclxuICAgICAgICByZXR1cm4gWzAsMiw0LDUsNyw5LDExXVtuJTddO1xyXG4gICAgICB9O1xyXG5cclxuICAgICAgdmFyIG5vdGF0aW9uNyA9IGZ1bmN0aW9uKG4pIHtcclxuICAgICAgICByZXR1cm4gW1wiQ1wiLFwiRFwiLFwiRVwiLFwiRlwiLFwiR1wiLFwiQVwiLFwiQlwiXVtuICUgN107XHJcbiAgICAgIH07XHJcblxyXG4gICAgICBzY29wZS5yYWlzZUV2ZW50Q2hhbmdlZCA9IGZ1bmN0aW9uKG9sZGV2dCwgZXZ0LCB0cmFjaykge1xyXG4gICAgICAgIHNjb3BlLiRlbWl0KCdldmVudENoYW5nZWQnLCB7b2xkZXZ0OiBvbGRldnQsZXZ0OiBldnQsIHRyYWNrOiB0cmFja30pXHJcbiAgICAgIH07XHJcblxyXG4gICAgICBzY29wZS5ub3RlTmFtZSA9IGZ1bmN0aW9uKG4pIHtcclxuICAgICAgICB2YXIgbm90ZTcgPSBzZW1pdG9uZVRvTm90ZShuKTtcclxuICAgICAgICB2YXIgb2N0YXZlID0gTWF0aC5mbG9vcihuLzEyKTtcclxuXHJcbiAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkobm90ZTcpKSB7XHJcbiAgICAgICAgICBub3RlNyA9IG5vdGU3WzBdXHJcbiAgICAgICAgICByZXR1cm4gbm90YXRpb243KG5vdGU3KSArICcjJyArIG9jdGF2ZTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgcmV0dXJuIG5vdGF0aW9uNyhub3RlNykgKyBvY3RhdmU7XHJcbiAgICAgICAgfVxyXG4gICAgICB9O1xyXG5cclxuICAgICAgdmFyIHVwZGF0ZUdyaWQgPSBmdW5jdGlvbigpIHtcclxuICAgICAgICBzY29wZS5tYWluR3JpZFN0eWxlID0ge1wiYmFja2dyb3VuZC1zaXplXCI6IChzY29wZS5tZWFzdXJlKnNjb3BlLmJlYXRXaWR0aCpzY29wZS56b29tTGV2ZWwpICsgXCJweCAyNDBweFwifTtcclxuICAgICAgfTtcclxuXHJcbiAgICAgIHNjb3BlLiR3YXRjaChcIlttZWFzdXJlLCBiZWF0V2lkdGgsIHpvb21MZXZlbF1cIiwgdXBkYXRlR3JpZCk7XHJcbiAgICAgIHNjb3BlLiR3YXRjaChcInRyYWNrLnNjcm9sbFwiLCBmdW5jdGlvbigpIHtcclxuICAgICAgICBzY29wZS4kZW1pdChcInRyYWNrQ2hhbmdlZFwiLCBzY29wZS50cmFjayk7ICAgICAgICBcclxuICAgICAgfSk7XHJcblxyXG4gICAgICAkdGltZW91dCh1cGRhdGVHcmlkKTtcclxuXHJcbiAgICAgIHZhciBhZGROZXdFdmVudCA9IGZ1bmN0aW9uKG5ld0V2dCkge1xyXG4gICAgICAgIGlmIChzY29wZS50cmFjay5ldmVudHMuZmluZChmdW5jdGlvbihldnQpIHtcclxuICAgICAgICAgIHJldHVybiBuZXdFdnQucyA9PT0gZXZ0LnMgJiYgbmV3RXZ0Lm4gPT09IGV2dC5uO1xyXG4gICAgICAgIH0pKSB7XHJcbiAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBuZXdFdnQgPSBhbmd1bGFyLmNvcHkobmV3RXZ0KTtcclxuXHJcbiAgICAgICAgaWYgKFBhdHRlcm4uY29sbGlzaW9uKHNjb3BlLnRyYWNrLCBuZXdFdnQpKSByZXR1cm47XHJcblxyXG4gICAgICAgIHNjb3BlLiRlbWl0KFwicGF0dGVyblNlbGVjdEV2ZW50XCIsIG5ld0V2dCk7XHJcbiAgICAgICAgc2NvcGUuc2VsZWN0ZWQgPSBuZXdFdnQ7XHJcblxyXG4gICAgICAgIHNjb3BlLnJlY2lwZS5yYWlzZSgncGF0dGVybl9ub3RlX2FkZGVkJyk7XHJcbiAgICAgICAgc2NvcGUudHJhY2suZXZlbnRzLnB1c2gobmV3RXZ0KTtcclxuXHJcbiAgICAgICAgc2NvcGUuJGVtaXQoXCJ0cmFja0NoYW5nZWRcIiwgc2NvcGUudHJhY2spO1xyXG4gICAgICAgIHNjb3BlLiRlbWl0KFwiZXZlbnRDaGFuZ2VkXCIsIHtvbGRldnQ6e30sIGV2dDpuZXdFdnQsIHRyYWNrOiBzY29wZS50cmFja30pO1xyXG5cclxuICAgICAgICBzY29wZS5tb3VzZU1vdmUgPSBtb3ZlRXZlbnQobmV3RXZ0LCAwKTtcclxuICAgICAgICBzY29wZS5tb3VzZU1vdmVFdmVudCA9IG1vdmVFdmVudEZyb21FdmVudChuZXdFdnQsIDApO1xyXG5cclxuICAgICAgICBjbGVhclNoYWRvdygpO1xyXG5cclxuICAgICAgICBzY29wZS5tb3VzZUxlYXZlID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICBkZWZhdWx0TW91c2VMZWF2ZSgpO1xyXG4gICAgICAgICAgY2FuY2VsTW92ZSgpO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIHNjb3BlLm1vdXNlVXBSZXNpemVFdmVudCA9IGNhbmNlbE1vdmU7XHJcbiAgICAgICAgc2NvcGUubW91c2VVcEV2ZW50ID0gY2FuY2VsTW92ZTtcclxuICAgICAgICBzY29wZS5tb3VzZVVwID0gY2FuY2VsTW92ZTtcclxuICAgICAgfTtcclxuXHJcbiAgICAgIHNjb3BlLm1vdXNlTW92ZVJlc2l6ZUV2ZW50ID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgY2xlYXJTaGFkb3coKTtcclxuICAgICAgfTtcclxuXHJcbiAgICAgIHNjb3BlLnNoYWRvd01vdXNlTW92ZSA9IGZ1bmN0aW9uKGV2ZW50KSB7XHJcbiAgICAgICAgdmFyIGRlbHRhUyA9IE1hdGguZmxvb3IoZXZlbnQub2Zmc2V0WCAvIDIgLyBzY29wZS5iZWF0V2lkdGgpICogMiAvIHNjb3BlLnpvb21MZXZlbCAqIFRJQ0tTX1BFUl9CRUFUO1xyXG4gICAgICAgIGlmIChkZWx0YVMgPiAwKSBzY29wZS5zaGFkb3dFdnQucyA9IHNjb3BlLnNoYWRvd0V2dC5zICsgZGVsdGFTO1xyXG5cclxuICAgICAgICBQYXR0ZXJuLmN1dEV2ZW50KHNjb3BlLnBhdHRlcm4sIHNjb3BlLnRyYWNrLCBzY29wZS5zaGFkb3dFdnQpO1xyXG4gICAgICB9O1xyXG5cclxuICAgICAgc2NvcGUuYWRkRnJvbVNoYWRvdyA9IGZ1bmN0aW9uKGV2ZW50KSB7XHJcbiAgICAgICAgYWRkTmV3RXZlbnQoc2NvcGUuc2hhZG93RXZ0KTtcclxuICAgICAgfTtcclxuXHJcbiAgICAgIHNjb3BlLm1vdXNlVXAgPSBmdW5jdGlvbihldmVudCkge1xyXG4gICAgICAgIHNjb3BlLm1vdXNlTW92ZSA9IGRlZmF1bHRNb3VzZU1vdmU7XHJcbiAgICAgIH07XHJcblxyXG4gICAgICBzY29wZS5tb3VzZUxlYXZlID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgZGVmYXVsdE1vdXNlTGVhdmUoKTtcclxuICAgICAgICBzY29wZS5tb3VzZU1vdmUgPSBkZWZhdWx0TW91c2VNb3ZlO1xyXG4gICAgICB9O1xyXG5cclxuICAgICAgc2NvcGUubW91c2VNb3ZlID0gZGVmYXVsdE1vdXNlTW92ZTtcclxuICAgICAgc2NvcGUubW91c2VNb3ZlRXZlbnQgPSBjbGVhclNoYWRvdztcclxuXHJcbiAgICAgIHZhciB1cHBlckxpbWl0ID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgcmV0dXJuIHNjb3BlLnRyYWNrLmluc3RydW1lbnQgPT09ICd0ZW1wbycgPyAxMDI0IDogMTIwO1xyXG4gICAgICB9O1xyXG5cclxuICAgICAgdmFyIG1heCA9IGZ1bmN0aW9uKGMxLCBjMikge1xyXG4gICAgICAgIHJldHVybiBjMSA+IGMyID8gYzEgOiBjMjtcclxuICAgICAgfTtcclxuXHJcbiAgICAgIHZhciBwcmV2ZW50Q29sbGlzaW9uID0gZnVuY3Rpb24oZXZ0LCBmKSB7XHJcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgdmFyIHNhdmVkRXZ0ID0gYW5ndWxhci5jb3B5KGV2dCk7XHJcbiAgICAgICAgICB2YXIgcmV0ID0gZi5hcHBseShudWxsLCBhcmd1bWVudHMpO1xyXG5cclxuICAgICAgICAgIGlmIChQYXR0ZXJuLmNvbGxpc2lvbihzY29wZS50cmFjaywgZXZ0KSkge1xyXG4gICAgICAgICAgICBldnQubiA9IHNhdmVkRXZ0Lm47XHJcbiAgICAgICAgICAgIGV2dC5zID0gc2F2ZWRFdnQucztcclxuICAgICAgICAgICAgZXZ0LmwgPSBzYXZlZEV2dC5sO1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgaWYgKGV2dC5uICE9PSBzYXZlZEV2dC5uIHx8IGV2dC5sICE9PSBzYXZlZEV2dC5sIHx8IGV2dC5zICE9PSBzYXZlZEV2dC5zKSB7XHJcbiAgICAgICAgICAgIHNjb3BlLiRlbWl0KFwidHJhY2tDaGFuZ2VkXCIsIHNjb3BlLnRyYWNrKTtcclxuICAgICAgICAgICAgc2NvcGUuJGVtaXQoXCJldmVudENoYW5nZWRcIiwge29sZGV2dDogc2F2ZWRFdnQsIGV2dDpldnQsIHRyYWNrOiBzY29wZS50cmFja30pO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcbiAgICAgIH07XHJcblxyXG4gICAgICB2YXIgbW92ZUV2ZW50ID0gZnVuY3Rpb24oZXZ0LCBvZmZzZXRYKSB7XHJcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKGV2ZW50KSB7XHJcbiAgICAgICAgICBNdXNpY0NvbnRleHQucmVzdW1lQXVkaW8oKTtcclxuXHJcbiAgICAgICAgICB2YXIgY2xpcERpc3RhbmNlID0gVElDS1NfUEVSX0JFQVQgLyBzY29wZS56b29tTGV2ZWw7XHJcbiAgICAgICAgICB2YXIgb2xkZXZ0ID0ge246ZXZ0Lm4sIHM6ZXZ0LnMsIGw6ZXZ0Lmx9O1xyXG5cclxuICAgICAgICAgIHZhciBleGFjdFBvc2l0aW9uID0gTWF0aC5mbG9vcigoZXZlbnQub2Zmc2V0WCAtIG9mZnNldFgpIC8gc2NvcGUuYmVhdFdpZHRoIC8gc2NvcGUuem9vbUxldmVsICogVElDS1NfUEVSX0JFQVQpO1xyXG4gICAgICAgICAgZXhhY3RQb3NpdGlvbiA9IE1hdGguZmxvb3IoZXhhY3RQb3NpdGlvbik7XHJcbiAgICAgICAgICB2YXIgY2xpcFMgPSBQYXR0ZXJuLmZpbmRDbGlwUyhzY29wZS5wYXR0ZXJuLCBzY29wZS50cmFjaywgZXZ0LCBleGFjdFBvc2l0aW9uKTtcclxuXHJcbiAgICAgICAgICBpZiAoIWV2ZW50LnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoXCJldmVudC1saXN0XCIpKSByZXR1cm47XHJcblxyXG4gICAgICAgICAgaWYgKE1hdGguYWJzKGV4YWN0UG9zaXRpb24gLSBjbGlwUyAtIGNsaXBEaXN0YW5jZSAvIDIpIDwgY2xpcERpc3RhbmNlKSB7XHJcbiAgICAgICAgICAgIGV2dC5zID0gY2xpcFM7XHJcbiAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBldnQucyA9IE1hdGguZmxvb3IoKGV2ZW50Lm9mZnNldFggLSBvZmZzZXRYKSAvIDIgLyBzY29wZS5iZWF0V2lkdGgpICogMiAvIHNjb3BlLnpvb21MZXZlbCAqIFRJQ0tTX1BFUl9CRUFUO1xyXG4gICAgICAgICAgICBldnQucyA9IE1hdGguZmxvb3IoZXZ0LnMpO1xyXG4gICAgICAgICAgfVxyXG5cclxuICAgICAgICAgIGlmIChldnQucyA8IDApIGV2dC5zID0gMDtcclxuXHJcbiAgICAgICAgICB2YXIgb2xkTiA9IGV2dC5uO1xyXG4gICAgICAgICAgZXZ0Lm4gPSBNYXRoLmZsb29yKHVwcGVyTGltaXQoKSAtIGV2ZW50Lm9mZnNldFkgLyAyMCk7XHJcbiAgICAgICAgfTtcclxuICAgICAgfTtcclxuXHJcbiAgICAgIHZhciBtb3ZlRXZlbnRGcm9tRXZlbnQgPSBmdW5jdGlvbihldnQsIG9mZnNldFgpIHtcclxuICAgICAgICBjbGVhclNoYWRvdygpO1xyXG4gICAgICAgIHJldHVybiBmdW5jdGlvbihkcmFnZXZ0LCBldmVudCkge1xyXG4gICAgICAgICAgTXVzaWNDb250ZXh0LnJlc3VtZUF1ZGlvKCk7XHJcblxyXG4gICAgICAgICAgdmFyIGNsaXBEaXN0YW5jZSA9IFRJQ0tTX1BFUl9CRUFUIC8gc2NvcGUuem9vbUxldmVsO1xyXG4gICAgICAgICAgdmFyIG9sZGV2dCA9IHtuOmV2dC5uLCBzOmV2dC5zLCBsOmV2dC5sfTtcclxuXHJcbiAgICAgICAgICB2YXIgZXhhY3RQb3NpdGlvbiA9IGRyYWdldnQucyArIE1hdGguZmxvb3IoKGV2ZW50Lm9mZnNldFggLSBvZmZzZXRYKSAvIHNjb3BlLmJlYXRXaWR0aCAvIHNjb3BlLnpvb21MZXZlbCAqIFRJQ0tTX1BFUl9CRUFUKTtcclxuICAgICAgICAgIGV4YWN0UG9zaXRpb24gPSBNYXRoLmZsb29yKGV4YWN0UG9zaXRpb24pO1xyXG4gICAgICAgICAgdmFyIGNsaXBTID0gUGF0dGVybi5maW5kQ2xpcFMoc2NvcGUucGF0dGVybiwgc2NvcGUudHJhY2ssIGV2dCwgZXhhY3RQb3NpdGlvbik7XHJcblxyXG4gICAgICAgICAgaWYgKE1hdGguYWJzKGV4YWN0UG9zaXRpb24gLSBjbGlwUyAtIGNsaXBEaXN0YW5jZSAvIDIpIDwgY2xpcERpc3RhbmNlKSB7XHJcbiAgICAgICAgICAgIGV2dC5zID0gY2xpcFM7XHJcbiAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBldnQucyA9IGRyYWdldnQucyArIE1hdGguZmxvb3IoKGV2ZW50Lm9mZnNldFggLSBvZmZzZXRYKSAvIDIgLyBzY29wZS5iZWF0V2lkdGgpICogMiAvIHNjb3BlLnpvb21MZXZlbCAqIFRJQ0tTX1BFUl9CRUFUO1xyXG4gICAgICAgICAgICBldnQucyA9IE1hdGguZmxvb3IoZXZ0LnMpO1xyXG4gICAgICAgICAgfVxyXG5cclxuICAgICAgICAgIGV2dC5uID0gZHJhZ2V2dC5uO1xyXG4gICAgICAgICAgaWYgKGV2dC5zIDwgMCkgZXZ0LnMgPSAwO1xyXG4gICAgICAgIH07XHJcbiAgICAgIH07XHJcblxyXG4gICAgICB2YXIgY2FuY2VsTW92ZSA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIHNjb3BlLm1vdXNlTW92ZUV2ZW50ID0gY2xlYXJTaGFkb3c7XHJcbiAgICAgICAgc2NvcGUubW91c2VNb3ZlID0gZGVmYXVsdE1vdXNlTW92ZTtcclxuICAgICAgICBzY29wZS5tb3VzZUxlYXZlID0gZGVmYXVsdE1vdXNlTGVhdmU7XHJcbiAgICAgIH07XHJcblxyXG4gICAgICBzY29wZS5tb3VzZURvd24gPSBmdW5jdGlvbihldmVudCkge1xyXG4gICAgICAgIE11c2ljQ29udGV4dC5yZXN1bWVBdWRpbygpO1xyXG5cclxuICAgICAgICBpZiAoIWV2ZW50LnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoXCJldmVudC1saXN0XCIpKSByZXR1cm47XHJcbiAgICAgICAgdmFyIG5ld0V2dCA9IHtcclxuICAgICAgICAgIG46IE1hdGguZmxvb3IodXBwZXJMaW1pdCgpIC0gZXZlbnQub2Zmc2V0WSAvIDIwKSxcclxuICAgICAgICAgIHM6IE1hdGguZmxvb3IoZXZlbnQub2Zmc2V0WCAvIHNjb3BlLmJlYXRXaWR0aCkgLyBzY29wZS56b29tTGV2ZWwgKiBUSUNLU19QRVJfQkVBVCxcclxuICAgICAgICAgIGw6IGRlZmF1bHRMXHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgbmV3RXZ0LnMgPSBNYXRoLmZsb29yKG5ld0V2dC5zKTtcclxuXHJcbiAgICAgICAgUGF0dGVybi5jdXRFdmVudChzY29wZS5wYXR0ZXJuLCBzY29wZS50cmFjaywgbmV3RXZ0KTtcclxuICAgICAgICBhZGROZXdFdmVudChuZXdFdnQpO1xyXG4gICAgICB9O1xyXG5cclxuICAgICAgdmFyIGV2ZW50U3BsaXQgPSBmdW5jdGlvbihldnQsIHRpY2tzKSB7XHJcbiAgICAgICAgdmFyIG9yaWdpbmFsTCA9IGV2dC5sO1xyXG4gICAgICAgIGV2dC5sID0gdGlja3M7XHJcbiAgICAgICAgdmFyIG5ld0V2dCA9IHtcclxuICAgICAgICAgIG46IGV2dC5uLFxyXG4gICAgICAgICAgczogZXZ0LnMgKyBldnQubCxcclxuICAgICAgICAgIGw6IG9yaWdpbmFsTCAtIHRpY2tzXHJcbiAgICAgICAgfTtcclxuICAgICAgICBzY29wZS5yZWNpcGUucmFpc2UoJ3BhdHRlcm5fbm90ZV9hZGRlZCcpO1xyXG4gICAgICAgIHNjb3BlLnRyYWNrLmV2ZW50cy5wdXNoKG5ld0V2dCk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIHZhciBldmVudExlZnRTcGxpdCA9IGZ1bmN0aW9uKGV2dCkge1xyXG4gICAgICAgIGlmIChldnQubCAlIDMgPT09IDApIHtcclxuICAgICAgICAgIGV2ZW50U3BsaXQoZXZ0LCBldnQubCAvIDMpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICBldmVudENlbnRlclNwbGl0KGV2dCk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9O1xyXG5cclxuICAgICAgdmFyIGV2ZW50UmlnaHRTcGxpdCA9IGZ1bmN0aW9uKGV2dCkge1xyXG4gICAgICAgIGlmIChldnQubCAlIDMgPT09IDApIHtcclxuICAgICAgICAgIGV2ZW50U3BsaXQoZXZ0LCBldnQubCAqIDIgLyAzKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgZXZlbnRDZW50ZXJTcGxpdChldnQpO1xyXG4gICAgICAgIH1cclxuICAgICAgfTtcclxuXHJcbiAgICAgIHZhciBldmVudENlbnRlclNwbGl0ID0gZnVuY3Rpb24oZXZ0KSB7XHJcbiAgICAgICAgaWYgKGV2dC5sICUgMiA9PT0gMCkge1xyXG4gICAgICAgICAgZXZlbnRTcGxpdChldnQsIGV2dC5sIC8gMik7XHJcbiAgICAgICAgfVxyXG4gICAgICB9O1xyXG5cclxuICAgICAgc2NvcGUubW91c2VEYmxDbGlja0V2ZW50ID0gZnVuY3Rpb24oZXZ0LCBldmVudCkge1xyXG4gICAgICAgIHZhciBlbGVtZW50V2lkdGggPSAkKGV2ZW50LnRhcmdldClbMF0uY2xpZW50V2lkdGgrNTtcclxuXHJcbiAgICAgICAgaWYgKGV2ZW50Lm9mZnNldFggPCBlbGVtZW50V2lkdGgvMykge1xyXG4gICAgICAgICAgZXZlbnRMZWZ0U3BsaXQoZXZ0KTtcclxuICAgICAgICB9IGVsc2UgaWYgKGV2ZW50Lm9mZnNldFggPiBlbGVtZW50V2lkdGgqMi8zKSB7XHJcbiAgICAgICAgICBldmVudFJpZ2h0U3BsaXQoZXZ0KTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgZXZlbnRDZW50ZXJTcGxpdChldnQpO1xyXG4gICAgICAgIH1cclxuICAgICAgfTtcclxuXHJcbiAgICAgIHNjb3BlLm1vdXNlRG93bkV2ZW50ID0gZnVuY3Rpb24oZXZ0LCBldmVudCkge1xyXG4gICAgICAgIE11c2ljQ29udGV4dC5yZXN1bWVBdWRpbygpO1xyXG5cclxuICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgIGRvY3VtZW50LmFjdGl2ZUVsZW1lbnQuYmx1cigpO1xyXG5cclxuICAgICAgICBzY29wZS4kZW1pdChcImV2ZW50U2VsZWN0ZWRcIiwge2V2dDogZXZ0LCB0cmFjazogc2NvcGUudHJhY2t9KTtcclxuXHJcbiAgICAgICAgc2NvcGUuJGVtaXQoXCJwYXR0ZXJuU2VsZWN0RXZlbnRcIiwgZXZ0KTtcclxuICAgICAgICBzY29wZS5zZWxlY3RlZCA9IGV2dDtcclxuXHJcbiAgICAgICAgc2NvcGUubW91c2VNb3ZlID0gcHJldmVudENvbGxpc2lvbihldnQsIG1vdmVFdmVudChldnQsIGV2ZW50Lm9mZnNldFgpKTtcclxuICAgICAgICBzY29wZS5tb3VzZU1vdmVFdmVudCA9IHByZXZlbnRDb2xsaXNpb24oZXZ0LCBtb3ZlRXZlbnRGcm9tRXZlbnQoZXZ0LCBldmVudC5vZmZzZXRYKSk7XHJcblxyXG4gICAgICAgIGNsZWFyU2hhZG93KCk7XHJcblxyXG4gICAgICAgIHNjb3BlLm1vdXNlTGVhdmUgPSBmdW5jdGlvbigpIHtcclxuICAgICAgICAgIGRlZmF1bHRNb3VzZUxlYXZlKCk7XHJcbiAgICAgICAgICBjYW5jZWxNb3ZlKCk7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgdmFyIF9jYW5jZWxNb3ZlID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICBzY29wZS5yZWNpcGUucmFpc2UoJ3BhdHRlcm5fbm90ZV9kcmFnJyk7XHJcbiAgICAgICAgICBjYW5jZWxNb3ZlKCk7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgc2NvcGUubW91c2VVcFJlc2l6ZUV2ZW50ID0gX2NhbmNlbE1vdmU7XHJcbiAgICAgICAgc2NvcGUubW91c2VVcEV2ZW50ID0gX2NhbmNlbE1vdmU7XHJcbiAgICAgICAgc2NvcGUubW91c2VVcCA9IF9jYW5jZWxNb3ZlO1xyXG4gICAgICB9O1xyXG5cclxuICAgICAgc2NvcGUubW91c2VEb3duUmVzaXplRXZlbnQgPSBmdW5jdGlvbihldnQsIGV2ZW50KSB7XHJcbiAgICAgICAgTXVzaWNDb250ZXh0LnJlc3VtZUF1ZGlvKCk7XHJcblxyXG4gICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcblxyXG4gICAgICAgIHNjb3BlLiRlbWl0KFwicGF0dGVyblNlbGVjdEV2ZW50XCIsIGV2dCk7XHJcbiAgICAgICAgc2NvcGUuc2VsZWN0ZWQgPSBldnQ7XHJcblxyXG4gICAgICAgIHNjb3BlLm1vdXNlTW92ZSA9IHByZXZlbnRDb2xsaXNpb24oZXZ0LCBmdW5jdGlvbihldmVudCkge1xyXG4gICAgICAgICAgdmFyIG9sZGV2dCA9IHtuOmV2dC5uLCBzOmV2dC5zLCBsOmV2dC5sfTtcclxuICAgICAgICAgIHZhciBjbGlwRGlzdGFuY2UgPSBUSUNLU19QRVJfQkVBVCAvIHNjb3BlLnpvb21MZXZlbDtcclxuICAgICAgICAgIHZhciBjbGlwTCA9IFBhdHRlcm4uZmluZENsaXBMKHNjb3BlLnBhdHRlcm4sIHNjb3BlLnRyYWNrLCBldnQsIGV2dC5zKTtcclxuXHJcbiAgICAgICAgICBpZiAoIWV2ZW50LnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoXCJldmVudC1saXN0XCIpKSByZXR1cm47XHJcblxyXG4gICAgICAgICAgdmFyIGV4YWN0TCA9IE1hdGguZmxvb3IoZXZlbnQub2Zmc2V0WCAvIHNjb3BlLmJlYXRXaWR0aCAvIHNjb3BlLnpvb21MZXZlbCAqIFRJQ0tTX1BFUl9CRUFUKSAtIGV2dC5zO1xyXG5cclxuICAgICAgICAgIGlmIChNYXRoLmFicyhleGFjdEwgLSBjbGlwTCAtIGNsaXBEaXN0YW5jZSkgPCBjbGlwRGlzdGFuY2UpIHtcclxuICAgICAgICAgICAgZXZ0LmwgPSBjbGlwTDtcclxuICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHZhciByZWZzID0gTWF0aC5mbG9vcihldmVudC5vZmZzZXRYIC8gc2NvcGUuYmVhdFdpZHRoIC8gMikgKiAyIC8gc2NvcGUuem9vbUxldmVsICogVElDS1NfUEVSX0JFQVQ7XHJcbiAgICAgICAgICAgIGV2dC5sID0gcmVmcyAtIGV2dC5zO1xyXG4gICAgICAgICAgICBldnQubCA9IE1hdGguZmxvb3IoZXZ0LmwpO1xyXG4gICAgICAgICAgICBpZiAoZXZ0Lmw8VElDS1NfUEVSX0JFQVQvc2NvcGUuem9vbUxldmVsKSBldnQubD1USUNLU19QRVJfQkVBVC9zY29wZS56b29tTGV2ZWw7XHJcblxyXG4gICAgICAgICAgICBkZWZhdWx0TCA9IGV2dC5sO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBzY29wZS5tb3VzZU1vdmVFdmVudCA9IHByZXZlbnRDb2xsaXNpb24oZXZ0LCBmdW5jdGlvbihkcmFnZXZ0LCBldmVudCkge1xyXG4gICAgICAgICAgdmFyIG9sZGV2dCA9IHtuOmV2dC5uLCBzOmV2dC5zLCBsOmV2dC5sfTtcclxuICAgICAgICAgIHZhciBjbGlwRGlzdGFuY2UgPSBUSUNLU19QRVJfQkVBVCAvIHNjb3BlLnpvb21MZXZlbDtcclxuICAgICAgICAgIHZhciBjbGlwTCA9IFBhdHRlcm4uZmluZENsaXBMKHNjb3BlLnBhdHRlcm4sIHNjb3BlLnRyYWNrLCBldnQsIGV2dC5zKTtcclxuXHJcbiAgICAgICAgICB2YXIgZXhhY3RMID0gZHJhZ2V2dC5zICsgXHJcbiAgICAgICAgICAgIE1hdGguZmxvb3IoZXZlbnQub2Zmc2V0WCAvIHNjb3BlLmJlYXRXaWR0aCAvIHNjb3BlLnpvb21MZXZlbCAqIFRJQ0tTX1BFUl9CRUFUKSAtXHJcbiAgICAgICAgICAgIGV2dC5zO1xyXG5cclxuICAgICAgICAgIGlmIChNYXRoLmFicyhleGFjdEwgLSBjbGlwTCAtIGNsaXBEaXN0YW5jZSkgPCBjbGlwRGlzdGFuY2UpIHtcclxuICAgICAgICAgICAgZXZ0LmwgPSBjbGlwTDtcclxuICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHZhciByZWZzID0gZHJhZ2V2dC5zICsgTWF0aC5mbG9vcihldmVudC5vZmZzZXRYIC8gc2NvcGUuYmVhdFdpZHRoIC8gMikgKiAyIC8gc2NvcGUuem9vbUxldmVsICogVElDS1NfUEVSX0JFQVQ7XHJcbiAgICAgICAgICAgIGV2dC5sID0gcmVmcyAtIGV2dC5zO1xyXG4gICAgICAgICAgICBldnQubCA9IE1hdGguZmxvb3IoZXZ0LmwpO1xyXG5cclxuICAgICAgICAgICAgaWYgKGV2dC5sPFRJQ0tTX1BFUl9CRUFUL3Njb3BlLnpvb21MZXZlbCkgZXZ0Lmw9VElDS1NfUEVSX0JFQVQvc2NvcGUuem9vbUxldmVsO1xyXG5cclxuICAgICAgICAgICAgZGVmYXVsdEwgPSBldnQubDtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgc2NvcGUubW91c2VVcFJlc2l6ZUV2ZW50ID0gY2FuY2VsTW92ZTtcclxuICAgICAgICBzY29wZS5tb3VzZVVwRXZlbnQgPSBjYW5jZWxNb3ZlO1xyXG4gICAgICAgIHNjb3BlLm1vdXNlVXAgPSBjYW5jZWxNb3ZlO1xyXG4gICAgICB9O1xyXG5cclxuICAgICAgdmFyIGtleURvd25IYW5kbGVyID0gZnVuY3Rpb24oZSkge1xyXG4gICAgICAgIGlmIChkb2N1bWVudC5hY3RpdmVFbGVtZW50LnRhZ05hbWUudG9Mb3dlckNhc2UoKSA9PT0gXCJpbnB1dFwiKSByZXR1cm47XHJcblxyXG4gICAgICAgIGlmIChlLmtleUNvZGUgPT0gNDYpIHtcclxuICAgICAgICAgICR0aW1lb3V0KGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICBzY29wZS50cmFjay5ldmVudHMgPSBzY29wZS50cmFjay5ldmVudHMuZmlsdGVyKGZ1bmN0aW9uKGV2dCkgeyByZXR1cm4gZXZ0ICE9PSBzY29wZS5zZWxlY3RlZDsgfSk7XHJcbiAgICAgICAgICAgIHNjb3BlLiRlbWl0KFwidHJhY2tDaGFuZ2VkXCIsIHNjb3BlLnRyYWNrKTtcclxuICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgICAgfTtcclxuXHJcbiAgICAgICQoZG9jdW1lbnQpLmJpbmQoXCJrZXlkb3duXCIsIGtleURvd25IYW5kbGVyKTtcclxuICAgICAgc2NvcGUuJG9uKFwiJGRlc3Ryb3lcIiwgZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgJChkb2N1bWVudCkudW5iaW5kKFwia2V5ZG93blwiLCBrZXlEb3duSGFuZGxlcik7XHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgc2NvcGUuJG9uKFwidHJhY2tTZWxlY3RFdmVudFwiLCBmdW5jdGlvbihldnQsIGV2ZW50KSB7XHJcbiAgICAgICAgc2NvcGUuc2VsZWN0ZWQgPSBldmVudDtcclxuICAgICAgfSk7XHJcbiAgICB9XHJcbiAgfTtcclxufV0pO1xyXG4iLCJ2YXIgbXVzaWNTaG93Q2FzZUFwcCA9IGFuZ3VsYXIubW9kdWxlKFwiTXVzaWNTaG93Q2FzZUFwcFwiKTtcclxubXVzaWNTaG93Q2FzZUFwcC5kaXJlY3RpdmUoXCJuZ2ZEcm9wXCIsIFtcIiRwYXJzZVwiLCBmdW5jdGlvbigkcGFyc2UpIHtcclxuICByZXR1cm4ge1xyXG4gICAgcmVzdHJpY3Q6ICdBJyxcclxuICAgIGxpbms6IGZ1bmN0aW9uKHNjb3BlLCBlbGVtZW50LCBhdHRycykge1xyXG4gICAgICB2YXIgbmdmRHJvcEdldHRlciA9ICRwYXJzZShhdHRycy5uZ2ZEcm9wKTtcclxuXHJcbiAgICAgIHZhciBhbGxvd0RyYWcgPSBmdW5jdGlvbihlKSB7XHJcbiAgICAgICAgZS5kYXRhVHJhbnNmZXIuZHJvcEVmZmVjdCA9ICdjb3B5JztcclxuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIHZhciBvbkRyb3AgPSBmdW5jdGlvbihlKSB7XHJcbiAgICAgICAgbmdmRHJvcEdldHRlcihzY29wZSwgeyckZmlsZXMnOiBlLmRhdGFUcmFuc2Zlci5maWxlc30pO1xyXG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgfTtcclxuXHJcbiAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdkcmFnZW50ZXInLCBhbGxvd0RyYWcpO1xyXG4gICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignZHJhZ292ZXInLCBhbGxvd0RyYWcpXHJcbiAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdkcm9wJywgb25Ecm9wKTtcclxuXHJcbiAgICAgIHNjb3BlLiRvbihcIiRkZXN0cm95XCIsIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCdkcmFnZW50ZXInLCBhbGxvd0RyYWcpO1xyXG4gICAgICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCdkcmFnb3ZlcicsIGFsbG93RHJhZyk7XHJcbiAgICAgICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2Ryb3AnLCBvbkRyb3ApO1xyXG4gICAgICB9KTtcclxuICAgIH1cclxuICB9O1xyXG59XSk7XHJcbiIsInZhciBtdXNpY1Nob3dDYXNlQXBwID0gYW5ndWxhci5tb2R1bGUoXCJNdXNpY1Nob3dDYXNlQXBwXCIpO1xyXG5tdXNpY1Nob3dDYXNlQXBwLmRpcmVjdGl2ZShcIm5nZkxvYWRlclwiLCBbXCIkcGFyc2VcIiwgZnVuY3Rpb24oJHBhcnNlKSB7XHJcbiAgcmV0dXJuIHtcclxuICAgIHJlc3RyaWN0OiAnQScsXHJcbiAgICBsaW5rOiBmdW5jdGlvbihzY29wZSwgZWxlbWVudCwgYXR0cnMpIHtcclxuICAgICAgdmFyIG5nZkxvYWRlckdldHRlciA9ICRwYXJzZShhdHRycy5uZ2ZMb2FkZXIpO1xyXG4gICAgICB2YXIgb25DaGFuZ2UgPSAgZnVuY3Rpb24oZSkge1xyXG4gICAgICAgIG5nZkxvYWRlckdldHRlcihzY29wZSwgeyckZmlsZXMnOiBlLnRhcmdldC5maWxlc30pO1xyXG4gICAgICAgICQoZWxlbWVudCkudmFsKFwiXCIpO1xyXG4gICAgICB9O1xyXG5cclxuICAgICAgJChlbGVtZW50KS5vbignY2hhbmdlJywgb25DaGFuZ2UpO1xyXG4gICAgICBzY29wZS4kb24oJyRkZXN0cm95JywgZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgJChlbGVtZW50KS5vZmYoJ2NoYW5nZScsIG9uQ2hhbmdlKTtcclxuICAgICAgfSk7XHJcbiAgICB9XHJcbiAgfTtcclxufV0pO1xyXG4iLCJtdXNpY1Nob3dDYXNlQXBwLmRpcmVjdGl2ZShcInBhdHRlcm5UcmFja0NvbXBhY3RWaWV3XCIsIFtcIiR0aW1lb3V0XCIsIFwiVElDS1NfUEVSX0JFQVRcIiwgXCJSZWNpcGVcIiwgXCJQYXR0ZXJuXCIsIFwiTXVzaWNDb250ZXh0XCIsIGZ1bmN0aW9uKCR0aW1lb3V0LCBUSUNLU19QRVJfQkVBVCwgUmVjaXBlLCBQYXR0ZXJuLCBNdXNpY0NvbnRleHQpIHtcclxuICByZXR1cm4ge1xyXG4gICAgc2NvcGU6IHtcclxuICAgICAgLyogQ3VycmVudCBwYXR0ZXJuICovXHJcbiAgICAgIHBhdHRlcm46IFwiPXBhdHRlcm5cIixcclxuICAgICAgLyogQ3VycmVudCB0cmFjayAqL1xyXG4gICAgICB0cmFjazogXCI9dHJhY2tcIixcclxuICAgICAgLyogRGlzcGxheSBwYXJhbXMgKi9cclxuICAgICAgem9vbUxldmVsOiBcIj16b29tTGV2ZWxcIixcclxuICAgICAgYmVhdFdpZHRoOiBcIj1iZWF0V2lkdGhcIixcclxuICAgICAgLyogRmlsZSBwYXJhbXMgKGNvbW1vbiB0byBhbGwgdHJhY2tzKSAqL1xyXG4gICAgICBtZWFzdXJlOiBcIj1tZWFzdXJlXCIsXHJcbiAgICAgIG1lYXN1cmVDb3VudDogXCI9bWVhc3VyZUNvdW50XCJcclxuICAgIH0sXHJcbiAgICB0ZW1wbGF0ZVVybDogXCJzaXRlL3RlbXBsYXRlcy9kaXJlY3RpdmVzL3BhdHRlcm5UcmFja0NvbXBhY3RWaWV3Lmh0bWxcIixcclxuICAgIGxpbms6IGZ1bmN0aW9uKHNjb3BlLCBlbGVtZW50KSB7XHJcbiAgICAgIHNjb3BlLnJlY2lwZSA9IFJlY2lwZS5zdGFydDtcclxuXHJcbiAgICAgIHNjb3BlLlRJQ0tTX1BFUl9CRUFUID0gVElDS1NfUEVSX0JFQVQ7XHJcbiAgICAgIHZhciBzZW1pdG9uZVRvTm90ZSA9IGZ1bmN0aW9uKG4pIHtcclxuICAgICAgICByZXR1cm4gWzAsWzAsMV0sIDEsIFsxLDJdLCAyLCAzLCBbMyw0XSwgNCwgWzQsNV0sIDUsIFs1LDZdLCA2XVtuJTEyXTtcclxuICAgICAgfTtcclxuICAgICAgdmFyIG5vdGF0aW9uNyA9IGZ1bmN0aW9uKG4pIHtcclxuICAgICAgICByZXR1cm4gW1wiQ1wiLFwiRFwiLFwiRVwiLFwiRlwiLFwiR1wiLFwiQVwiLFwiQlwiXVtuICUgN107XHJcbiAgICAgIH07XHJcbiAgICAgIHNjb3BlLm5vdGVOYW1lID0gZnVuY3Rpb24obikge1xyXG4gICAgICAgIHZhciBub3RlNyA9IHNlbWl0b25lVG9Ob3RlKG4pO1xyXG4gICAgICAgIHZhciBvY3RhdmUgPSBNYXRoLmZsb29yKG4vMTIpO1xyXG5cclxuICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShub3RlNykpIHtcclxuICAgICAgICAgIG5vdGU3ID0gbm90ZTdbMF1cclxuICAgICAgICAgIHJldHVybiBub3RhdGlvbjcobm90ZTcpICsgJyMnICsgb2N0YXZlO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICByZXR1cm4gbm90YXRpb243KG5vdGU3KSArIG9jdGF2ZTtcclxuICAgICAgICB9XHJcbiAgICAgIH07XHJcbiAgICAgIFxyXG4gICAgICB2YXIgdXBkYXRlR3JpZCA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIHNjb3BlLm1haW5HcmlkU3R5bGUgPSB7XHJcbiAgICAgICAgICBcImJhY2tncm91bmQtc2l6ZVwiOiAoc2NvcGUubWVhc3VyZSpzY29wZS5iZWF0V2lkdGgqc2NvcGUuem9vbUxldmVsKSArIFwicHggMjQwcHhcIixcclxuICAgICAgICAgIFwiYmFja2dyb3VuZC1wb3NpdGlvblwiOiAtc2NvcGUucGF0dGVybi5zY3JvbGxMZWZ0ICsgXCJweFwiXHJcbiAgICAgICAgfTtcclxuICAgICAgfTtcclxuICAgICAgc2NvcGUuJHdhdGNoKFwiW21lYXN1cmUsIGJlYXRXaWR0aCwgem9vbUxldmVsLCBwYXR0ZXJuLnNjcm9sbExlZnRdXCIsIHVwZGF0ZUdyaWQpO1xyXG4gICAgICBzY29wZS4kb24oXCJ0cmFja1NlbGVjdEV2ZW50XCIsIGZ1bmN0aW9uKGV2dCwgZXZlbnQpIHtcclxuICAgICAgICBzY29wZS5zZWxlY3RlZCA9IGV2ZW50O1xyXG4gICAgICB9KTtcclxuXHJcblxyXG4gICAgICB2YXIgbW91c2VVcCA9IGZ1bmN0aW9uKGV2ZW50KSB7XHJcbiAgICAgICAgc2NvcGUuJGVtaXQoXCJlbmFibGVUcmFja1wiLCBzY29wZS50cmFjayk7XHJcbiAgICAgICAgc2NvcGUubW91c2VNb3ZlID0gZnVuY3Rpb24oKSB7fTtcclxuICAgICAgfTtcclxuXHJcbiAgICAgIHNjb3BlLm1vdXNlVXAgPSBtb3VzZVVwO1xyXG5cclxuICAgICAgc2NvcGUubW91c2VMZWF2ZSA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIHNjb3BlLm1vdXNlTW92ZSA9IGZ1bmN0aW9uKCkge307XHJcbiAgICAgIH07XHJcblxyXG4gICAgICB2YXIgY2FuY2VsTW92ZSA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIHNjb3BlLm1vdXNlTW92ZUV2ZW50ID0gZnVuY3Rpb24oKXt9O1xyXG4gICAgICAgIHNjb3BlLm1vdXNlTW92ZSA9IGZ1bmN0aW9uKCl7fTtcclxuICAgICAgICBzY29wZS5tb3VzZUxlYXZlID0gZnVuY3Rpb24oKXt9O1xyXG4gICAgICB9O1xyXG5cclxuICAgICAgc2NvcGUubW91c2VEb3duRXZlbnQgPSBmdW5jdGlvbihldnQsIGV2ZW50KSB7XHJcbiAgICAgICAgdmFyIG1vdmVkID0gZmFsc2U7XHJcblxyXG4gICAgICAgIHZhciBtb3ZlRXZlbnQgPSBmdW5jdGlvbihldnQsIG9mZnNldFgpIHtcclxuICAgICAgICAgIHJldHVybiBmdW5jdGlvbihldmVudCkge1xyXG4gICAgICAgICAgICBNdXNpY0NvbnRleHQucmVzdW1lQXVkaW8oKTtcclxuXHJcbiAgICAgICAgICAgIHZhciBjbGlwRGlzdGFuY2UgPSBUSUNLU19QRVJfQkVBVCAvIHNjb3BlLnpvb21MZXZlbDtcclxuICAgICAgICAgICAgdmFyIG9sZGV2dCA9IHtuOmV2dC5uLCBzOmV2dC5zLCBsOmV2dC5sfTtcclxuXHJcbiAgICAgICAgICAgIGlmICghZXZlbnQudGFyZ2V0LnBhcmVudEVsZW1lbnQuY2xhc3NMaXN0LmNvbnRhaW5zKFwidHJhY2stY29tcGFjdC12aWV3XCIpKSByZXR1cm47XHJcblxyXG4gICAgICAgICAgICB2YXIgZXhhY3RQb3NpdGlvbiA9IE1hdGguZmxvb3IoKGV2ZW50Lm9mZnNldFggLSBvZmZzZXRYKSAvIHNjb3BlLmJlYXRXaWR0aCAvIHNjb3BlLnpvb21MZXZlbCAqIFRJQ0tTX1BFUl9CRUFUKTtcclxuICAgICAgICAgICAgZXhhY3RQb3NpdGlvbiA9IE1hdGguZmxvb3IoZXhhY3RQb3NpdGlvbik7XHJcbiAgICAgICAgICAgIHZhciBjbGlwUyA9IFBhdHRlcm4uZmluZENsaXBTKHNjb3BlLnBhdHRlcm4sIHNjb3BlLnRyYWNrLCBldnQsIGV4YWN0UG9zaXRpb24pO1xyXG5cclxuICAgICAgICAgICAgaWYgKE1hdGguYWJzKGV4YWN0UG9zaXRpb24gLSBjbGlwUyAtIGNsaXBEaXN0YW5jZSAvIDIpIDwgY2xpcERpc3RhbmNlKSB7XHJcbiAgICAgICAgICAgICAgZXZ0LnMgPSBjbGlwUztcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICBldnQucyA9IE1hdGguZmxvb3IoKGV2ZW50Lm9mZnNldFggLSBvZmZzZXRYKSAvIDIgLyBzY29wZS5iZWF0V2lkdGgpICogMiAvIHNjb3BlLnpvb21MZXZlbCAqIFRJQ0tTX1BFUl9CRUFUO1xyXG4gICAgICAgICAgICAgIGV2dC5zID0gTWF0aC5mbG9vcihldnQucyk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGlmIChldnQucyA8IDApIGV2dC5zID0gMDtcclxuICAgICAgICAgICAgaWYgKGV2dC5zICE9PSBvbGRldnQucykgbW92ZWQgPSB0cnVlO1xyXG5cclxuICAgICAgICAgICAgc2NvcGUuJGVtaXQoXCJ0cmFja0NoYW5nZWRcIiwgc2NvcGUudHJhY2spO1xyXG4gICAgICAgICAgICBzY29wZS4kZW1pdChcImV2ZW50Q2hhbmdlZFwiLCB7b2xkZXZ0OiBvbGRldnQsIGV2dDpldnQsIHRyYWNrOiBzY29wZS50cmFja30pO1xyXG4gICAgICAgICAgfTtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICB2YXIgbW92ZUV2ZW50RnJvbUV2ZW50ID0gZnVuY3Rpb24oZXZ0LCBvZmZzZXRYKSB7XHJcbiAgICAgICAgICByZXR1cm4gZnVuY3Rpb24oZHJhZ2V2dCwgZXZlbnQpIHtcclxuICAgICAgICAgICAgTXVzaWNDb250ZXh0LnJlc3VtZUF1ZGlvKCk7XHJcblxyXG4gICAgICAgICAgICB2YXIgY2xpcERpc3RhbmNlID0gVElDS1NfUEVSX0JFQVQgLyBzY29wZS56b29tTGV2ZWw7XHJcbiAgICAgICAgICAgIHZhciBvbGRldnQgPSB7bjpldnQubiwgczpldnQucywgbDpldnQubH07XHJcblxyXG4gICAgICAgICAgICB2YXIgZXhhY3RQb3NpdGlvbiA9IGRyYWdldnQucyArIE1hdGguZmxvb3IoKGV2ZW50Lm9mZnNldFggLSBvZmZzZXRYKSAvIHNjb3BlLmJlYXRXaWR0aCAvIHNjb3BlLnpvb21MZXZlbCAqIFRJQ0tTX1BFUl9CRUFUKTtcclxuICAgICAgICAgICAgZXhhY3RQb3NpdGlvbiA9IE1hdGguZmxvb3IoZXhhY3RQb3NpdGlvbik7XHJcbiAgICAgICAgICAgIHZhciBjbGlwUyA9IFBhdHRlcm4uZmluZENsaXBTKHNjb3BlLnBhdHRlcm4sIHNjb3BlLnRyYWNrLCBldnQsIGV4YWN0UG9zaXRpb24pO1xyXG5cclxuICAgICAgICAgICAgaWYgKE1hdGguYWJzKGV4YWN0UG9zaXRpb24gLSBjbGlwUyAtIGNsaXBEaXN0YW5jZSAvIDIpIDwgY2xpcERpc3RhbmNlKSB7XHJcbiAgICAgICAgICAgICAgZXZ0LnMgPSBjbGlwUztcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICBldnQucyA9IGRyYWdldnQucyArIE1hdGguZmxvb3IoKGV2ZW50Lm9mZnNldFggLSBvZmZzZXRYKSAvIDIgLyBzY29wZS5iZWF0V2lkdGgpICogMiAvIHNjb3BlLnpvb21MZXZlbCAqIFRJQ0tTX1BFUl9CRUFUO1xyXG4gICAgICAgICAgICAgIGV2dC5zID0gTWF0aC5mbG9vcihldnQucyk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGlmIChldnQucyA8IDApIGV2dC5zID0gMDtcclxuICAgICAgICAgICAgaWYgKGV2dC5zICE9PSBvbGRldnQucykgbW92ZWQgPSB0cnVlO1xyXG5cclxuICAgICAgICAgICAgc2NvcGUuJGVtaXQoXCJ0cmFja0NoYW5nZWRcIiwgc2NvcGUudHJhY2spO1xyXG4gICAgICAgICAgICBzY29wZS4kZW1pdChcImV2ZW50Q2hhbmdlZFwiLCB7b2xkZXZ0OiBvbGRldnQsIGV2dDpldnQsIHRyYWNrOiBzY29wZS50cmFja30pO1xyXG4gICAgICAgICAgfTtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgIGRvY3VtZW50LmFjdGl2ZUVsZW1lbnQuYmx1cigpO1xyXG5cclxuICAgICAgICBzY29wZS4kZW1pdChcImV2ZW50U2VsZWN0ZWRcIiwge2V2dDogZXZ0LCB0cmFjazogc2NvcGUudHJhY2t9KTtcclxuXHJcbiAgICAgICAgc2NvcGUubW91c2VNb3ZlID0gbW92ZUV2ZW50KGV2dCwgZXZlbnQub2Zmc2V0WCk7XHJcbiAgICAgICAgc2NvcGUubW91c2VNb3ZlRXZlbnQgPSBtb3ZlRXZlbnRGcm9tRXZlbnQoZXZ0LCBldmVudC5vZmZzZXRYKTtcclxuXHJcbiAgICAgICAgc2NvcGUubW91c2VMZWF2ZSA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgY2FuY2VsTW92ZSgpO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIHZhciBfY2FuY2VsTW92ZSA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgc2NvcGUucmVjaXBlLnJhaXNlKCdwYXR0ZXJuX25vdGVfZHJhZycpO1xyXG4gICAgICAgICAgY2FuY2VsTW92ZSgpO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIHNjb3BlLm1vdXNlVXBSZXNpemVFdmVudCA9IF9jYW5jZWxNb3ZlO1xyXG4gICAgICAgIHNjb3BlLm1vdXNlVXBFdmVudCA9IF9jYW5jZWxNb3ZlO1xyXG4gICAgICAgIHNjb3BlLm1vdXNlVXAgPSBmdW5jdGlvbigpIHtcclxuICAgICAgICAgIHNjb3BlLm1vdXNlVXAgPSBtb3VzZVVwO1xyXG5cclxuICAgICAgICAgIGlmICghbW92ZWQpIHNjb3BlLiRlbWl0KFwiZW5hYmxlVHJhY2tcIiwgc2NvcGUudHJhY2spO1xyXG5cclxuICAgICAgICAgIHNjb3BlLiRlbWl0KFwicGF0dGVyblNlbGVjdEV2ZW50XCIsIGV2dCk7XHJcbiAgICAgICAgICBfY2FuY2VsTW92ZSgpO1xyXG4gICAgICAgIH07XHJcbiAgICAgIH07XHJcblxyXG4gICAgICBzY29wZS5tb3VzZURvd25SZXNpemVFdmVudCA9IGZ1bmN0aW9uKGV2dCwgZXZlbnQpIHtcclxuICAgICAgICB2YXIgbW92ZWQgPSBmYWxzZTtcclxuXHJcbiAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcclxuXHJcbiAgICAgICAgc2NvcGUubW91c2VNb3ZlID0gZnVuY3Rpb24oZXZlbnQpIHtcclxuICAgICAgICAgIE11c2ljQ29udGV4dC5yZXN1bWVBdWRpbygpO1xyXG5cclxuICAgICAgICAgIHZhciBvbGRldnQgPSB7bjpldnQubiwgczpldnQucywgbDpldnQubH07XHJcbiAgICAgICAgICB2YXIgY2xpcERpc3RhbmNlID0gVElDS1NfUEVSX0JFQVQgLyBzY29wZS56b29tTGV2ZWw7XHJcbiAgICAgICAgICB2YXIgY2xpcEwgPSBQYXR0ZXJuLmZpbmRDbGlwTChzY29wZS5wYXR0ZXJuLCBzY29wZS50cmFjaywgZXZ0LCBldnQucyk7XHJcblxyXG4gICAgICAgICAgaWYgKCFldmVudC50YXJnZXQucGFyZW50RWxlbWVudC5jbGFzc0xpc3QuY29udGFpbnMoXCJ0cmFjay1jb21wYWN0LXZpZXdcIikpIHJldHVybjtcclxuXHJcbiAgICAgICAgICB2YXIgZXhhY3RMID0gTWF0aC5mbG9vcihldmVudC5vZmZzZXRYIC8gc2NvcGUuYmVhdFdpZHRoIC8gc2NvcGUuem9vbUxldmVsICogVElDS1NfUEVSX0JFQVQpIC0gZXZ0LnM7XHJcblxyXG4gICAgICAgICAgaWYgKE1hdGguYWJzKGV4YWN0TCAtIGNsaXBMIC0gY2xpcERpc3RhbmNlKSA8IGNsaXBEaXN0YW5jZSkge1xyXG4gICAgICAgICAgICBldnQubCA9IGNsaXBMO1xyXG4gICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdmFyIHJlZnMgPSBNYXRoLmZsb29yKGV2ZW50Lm9mZnNldFggLyBzY29wZS5iZWF0V2lkdGggLyAyKSAqIDIgLyBzY29wZS56b29tTGV2ZWwgKiBUSUNLU19QRVJfQkVBVDtcclxuICAgICAgICAgICAgZXZ0LmwgPSByZWZzIC0gZXZ0LnM7XHJcbiAgICAgICAgICAgIGV2dC5sID0gTWF0aC5mbG9vcihldnQubCk7XHJcblxyXG4gICAgICAgICAgICBpZiAoZXZ0Lmw8VElDS1NfUEVSX0JFQVQvc2NvcGUuem9vbUxldmVsKSBldnQubD1USUNLU19QRVJfQkVBVC9zY29wZS56b29tTGV2ZWw7XHJcbiAgICAgICAgICAgIGRlZmF1bHRMID0gZXZ0Lmw7XHJcbiAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgaWYgKGV2dC5sICE9PSBvbGRldnQubCkge1xyXG4gICAgICAgICAgICBtb3ZlZCA9IHRydWU7XHJcbiAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgc2NvcGUuJGVtaXQoXCJ0cmFja0NoYW5nZWRcIiwgc2NvcGUudHJhY2spO1xyXG4gICAgICAgICAgc2NvcGUuJGVtaXQoXCJldmVudENoYW5nZWRcIiwge29sZGV2dDpvbGRldnQsIGV2dDpldnQsIHRyYWNrOiBzY29wZS50cmFja30pO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIHNjb3BlLm1vdXNlTW92ZUV2ZW50ID0gZnVuY3Rpb24oZHJhZ2V2dCwgZXZlbnQpIHtcclxuICAgICAgICAgIE11c2ljQ29udGV4dC5yZXN1bWVBdWRpbygpO1xyXG5cclxuICAgICAgICAgIHZhciBvbGRldnQgPSB7bjpldnQubiwgczpldnQucywgbDpldnQubH07XHJcbiAgICAgICAgICB2YXIgY2xpcERpc3RhbmNlID0gVElDS1NfUEVSX0JFQVQgLyBzY29wZS56b29tTGV2ZWw7XHJcbiAgICAgICAgICB2YXIgY2xpcEwgPSBQYXR0ZXJuLmZpbmRDbGlwTChzY29wZS5wYXR0ZXJuLCBzY29wZS50cmFjaywgZXZ0LCBldnQucyk7XHJcblxyXG4gICAgICAgICAgdmFyIGV4YWN0TCA9IGRyYWdldnQucyArIFxyXG4gICAgICAgICAgICBNYXRoLmZsb29yKGV2ZW50Lm9mZnNldFggLyBzY29wZS5iZWF0V2lkdGggLyBzY29wZS56b29tTGV2ZWwgKiBUSUNLU19QRVJfQkVBVCkgLVxyXG4gICAgICAgICAgICBldnQucztcclxuXHJcbiAgICAgICAgICBpZiAoTWF0aC5hYnMoZXhhY3RMIC0gY2xpcEwgLSBjbGlwRGlzdGFuY2UpIDwgY2xpcERpc3RhbmNlKSB7XHJcbiAgICAgICAgICAgIGV2dC5sID0gY2xpcEw7XHJcbiAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB2YXIgcmVmcyA9IGRyYWdldnQucyArIE1hdGguZmxvb3IoZXZlbnQub2Zmc2V0WCAvIHNjb3BlLmJlYXRXaWR0aCAvIDIpICogMiAvIHNjb3BlLnpvb21MZXZlbCAqIFRJQ0tTX1BFUl9CRUFUO1xyXG4gICAgICAgICAgICBldnQubCA9IHJlZnMgLSBldnQucztcclxuICAgICAgICAgICAgZXZ0LmwgPSBNYXRoLmZsb29yKGV2dC5sKTtcclxuXHJcbiAgICAgICAgICAgIGlmIChldnQubDxUSUNLU19QRVJfQkVBVC9zY29wZS56b29tTGV2ZWwpIGV2dC5sPVRJQ0tTX1BFUl9CRUFUL3Njb3BlLnpvb21MZXZlbDtcclxuXHJcbiAgICAgICAgICAgIGRlZmF1bHRMID0gZXZ0Lmw7XHJcbiAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgaWYgKGV2dC5sICE9PSBvbGRldnQubCkge1xyXG4gICAgICAgICAgICBtb3ZlZCA9IHRydWU7XHJcbiAgICAgICAgICB9ICAgICAgICAgIFxyXG5cclxuICAgICAgICAgIHNjb3BlLiRlbWl0KFwidHJhY2tDaGFuZ2VkXCIsIHNjb3BlLnRyYWNrKTtcclxuICAgICAgICAgIHNjb3BlLiRlbWl0KFwiZXZlbnRDaGFuZ2VkXCIsIHtvbGRldnQ6b2xkZXZ0LCBldnQ6ZXZ0LCB0cmFjazogc2NvcGUudHJhY2t9KTtcclxuICAgICAgICB9OyAgICAgICAgXHJcblxyXG4gICAgICAgIHNjb3BlLm1vdXNlVXBSZXNpemVFdmVudCA9IGNhbmNlbE1vdmU7XHJcbiAgICAgICAgc2NvcGUubW91c2VVcEV2ZW50ID0gY2FuY2VsTW92ZTtcclxuICAgICAgICBzY29wZS5tb3VzZVVwID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICBzY29wZS5tb3VzZVVwID0gbW91c2VVcDtcclxuXHJcbiAgICAgICAgICBpZiAoIW1vdmVkKSBzY29wZS4kZW1pdChcImVuYWJsZVRyYWNrXCIsIHNjb3BlLnRyYWNrKTtcclxuXHJcbiAgICAgICAgICBzY29wZS4kZW1pdChcInBhdHRlcm5TZWxlY3RFdmVudFwiLCBldnQpO1xyXG4gICAgICAgICAgY2FuY2VsTW92ZSgpO1xyXG4gICAgICAgIH07XHJcbiAgICAgIH07XHJcblxyXG4gICAgfVxyXG4gIH07XHJcbn1dKTtcclxuXHJcbiIsIm11c2ljU2hvd0Nhc2VBcHAuZGlyZWN0aXZlKFwicGxheWluZ0xpbmVcIiwgW1wiJHRpbWVvdXRcIiwgXCIkcGFyc2VcIiwgXCJUSUNLU19QRVJfQkVBVFwiLCBmdW5jdGlvbigkdGltZW91dCwgJHBhcnNlLCBUSUNLU19QRVJfQkVBVCkge1xyXG4gIHJldHVybiB7XHJcbiAgICBzY29wZToge30sXHJcbiAgICByZXBsYWNlOiB0cnVlLFxyXG4gICAgdGVtcGxhdGVVcmw6IFwic2l0ZS90ZW1wbGF0ZXMvZGlyZWN0aXZlcy9wbGF5aW5nTGluZS5odG1sXCIsXHJcbiAgICBsaW5rOiBmdW5jdGlvbihzY29wZSwgZWxlbWVudCwgYXR0cnMpIHtcclxuICAgICAgdmFyIHQwO1xyXG4gICAgICB2YXIgdGltZVRvVGlja3M7XHJcbiAgICAgIHZhciBwbGF5aW5nID0gZmFsc2U7XHJcbiAgICAgIHZhciBnZXRCcG0gPSAkcGFyc2UoYXR0cnMuYnBtKTtcclxuICAgICAgdmFyIGdldFpvb21MZXZlbCA9ICRwYXJzZShhdHRycy56b29tTGV2ZWwpO1xyXG4gICAgICB2YXIgZ2V0QmVhdFdpZHRoID0gJHBhcnNlKGF0dHJzLmJlYXRXaWR0aCk7XHJcblxyXG4gICAgICB2YXIgYnBtLCB6b29tTGV2ZWwsIGJlYXRXaWR0aDtcclxuXHJcbiAgICAgIHZhciB0aWNrc1RvUFggPSBmdW5jdGlvbih0aWNrcykge1xyXG4gICAgICAgIHpvb21MZXZlbCA9IGdldFpvb21MZXZlbChzY29wZS4kcGFyZW50KTtcclxuICAgICAgICBiZWF0V2lkdGggPSBnZXRCZWF0V2lkdGgoc2NvcGUuJHBhcmVudCk7XHJcbiAgICAgICAgcmV0dXJuIHRpY2tzKnpvb21MZXZlbCpiZWF0V2lkdGgvVElDS1NfUEVSX0JFQVQ7XHJcbiAgICAgIH07XHJcblxyXG4gICAgICB2YXIgY2FsbGJhY2sgPSBmdW5jdGlvbigpIHtcclxuICAgICAgICBpZiAoYnBtICYmIHBsYXlpbmcpIHtcclxuICAgICAgICAgIHZhciB0aWNrcyA9IHRpbWVUb1RpY2tzKCh3aW5kb3cucGVyZm9ybWFuY2Uubm93KCkgLSB0MCkpO1xyXG4gICAgICAgICAgdmFyIGRpc3BsYWNlbWVudCA9IHRpY2tzVG9QWCh0aWNrcyk7XHJcblxyXG4gICAgICAgICAgZWxlbWVudC5jc3MoXCJsZWZ0XCIsIChkaXNwbGFjZW1lbnQpICsgXCJweFwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmVxdWVzdEFuaW1hdGlvbkZyYW1lKGNhbGxiYWNrKTtcclxuICAgICAgfTtcclxuXHJcbiAgICAgIHZhciBwbGF5aW5nTGluZSA9ICQoZWxlbWVudCk7XHJcbiAgICAgIHZhciByZXF1ZXN0SWQgPSByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoY2FsbGJhY2spO1xyXG5cclxuICAgICAgc2NvcGUuJG9uKCdzdGFydENsb2NrJywgZnVuY3Rpb24oZXZ0LCBfdGltZVRvVGlja3MpIHtcclxuICAgICAgICB2YXIgX3QwID0gd2luZG93LnBlcmZvcm1hbmNlLm5vdygpO1xyXG5cclxuICAgICAgICBwbGF5aW5nID0gdHJ1ZTtcclxuICAgICAgICBicG0gPSBnZXRCcG0oc2NvcGUuJHBhcmVudCk7XHJcblxyXG4gICAgICAgIHRpbWVUb1RpY2tzID0gX3RpbWVUb1RpY2tzO1xyXG4gICAgICAgIHQwID0gX3QwO1xyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIHNjb3BlLiRvbignc3RvcENsb2NrJywgZnVuY3Rpb24oZXZ0KSB7XHJcbiAgICAgICAgcGxheWluZyA9IGZhbHNlO1xyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIHNjb3BlLiRvbigncGF1c2VDbG9jaycsIGZ1bmN0aW9uKGV2dCkge1xyXG4gICAgICAgIHZhciB0aWNrcyA9IHRpbWVUb1RpY2tzKCh3aW5kb3cucGVyZm9ybWFuY2Uubm93KCkgLSB0MCkpO1xyXG4gICAgICAgIHZhciBkaXNwbGFjZW1lbnQgPSB0aWNrc1RvUFgodGlja3MgfHwgMCk7XHJcblxyXG4gICAgICAgIHBsYXlpbmcgPSBmYWxzZTtcclxuICAgICAgICBzY29wZS4kZW1pdCgncGF1c2VkQ2xvY2snLCB0aWNrcyk7XHJcbiAgICAgICAgZWxlbWVudC5jc3MoXCJsZWZ0XCIsIChkaXNwbGFjZW1lbnQpICsgXCJweFwiKTtcclxuICAgICAgfSk7XHJcblxyXG4gICAgICBzY29wZS4kb24oJ3Jlc2V0Q2xvY2snLCBmdW5jdGlvbihldnQsIGJhc2VUaWNrcykge1xyXG4gICAgICAgIHZhciBkaXNwbGFjZW1lbnQgPSB0aWNrc1RvUFgoYmFzZVRpY2tzIHx8IDApO1xyXG5cclxuICAgICAgICBwbGF5aW5nID0gZmFsc2U7XHJcbiAgICAgICAgZWxlbWVudC5jc3MoXCJsZWZ0XCIsIChkaXNwbGFjZW1lbnQpICsgXCJweFwiKTtcclxuICAgICAgfSk7XHJcblxyXG5cclxuICAgICAgc2NvcGUuJG9uKCckZGVzdHJveScsIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIGNhbmNlbEFuaW1hdGlvbkZyYW1lKHJlcXVlc3RJZCk7XHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG4gIH07XHJcbn1dKTtcclxuXHJcbiIsInZhciBtdXNpY1Nob3dDYXNlQXBwID0gYW5ndWxhci5tb2R1bGUoXCJNdXNpY1Nob3dDYXNlQXBwXCIpO1xyXG5tdXNpY1Nob3dDYXNlQXBwLmRpcmVjdGl2ZShcInJlY2lwZUJsaW5rXCIsIFtcIiRwYXJzZVwiLCBcIiR0aW1lb3V0XCIsIFwiUmVjaXBlXCIsIGZ1bmN0aW9uKCRwYXJzZSwgJHRpbWVvdXQsIFJlY2lwZSkge1xyXG4gIHJldHVybiB7XHJcbiAgICByZXN0cmljdDogJ0EnLFxyXG4gICAgbGluazogZnVuY3Rpb24oc2NvcGUsIGVsZW1lbnQsIGF0dHJzKSB7XHJcbiAgICAgIHZhciByZWNpcGVCbGlua0dldHRlciA9ICRwYXJzZShhdHRycy5yZWNpcGVCbGluayk7XHJcbiAgICAgIHZhciBibGlua0VsZW1lbnRJZCA9IHJlY2lwZUJsaW5rR2V0dGVyKHNjb3BlKTtcclxuXHJcbiAgICAgIGlmICghQXJyYXkuaXNBcnJheShibGlua0VsZW1lbnRJZCkpIHtcclxuICAgICAgICBibGlua0VsZW1lbnRJZCA9IFtibGlua0VsZW1lbnRJZF07XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIHZhciBibGluayA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICR0aW1lb3V0KGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgJChlbGVtZW50KS5hZGRDbGFzcygnYmxpbmsnKTtcclxuICAgICAgICB9KTtcclxuICAgICAgfTtcclxuXHJcbiAgICAgIHZhciBub2JsaW5rID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgJHRpbWVvdXQoZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAkKGVsZW1lbnQpLnJlbW92ZUNsYXNzKCdibGluaycpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICB9O1xyXG5cclxuICAgICAgdmFyIHJlZ2lzdGVyRXZlbnQgPSBmdW5jdGlvbihibGlua0VsZW1lbnRJZCkge1xyXG4gICAgICAgIGlmIChSZWNpcGUuZ2V0QmxpbmtzKCkuaW5kZXhPZihibGlua0VsZW1lbnRJZCkgIT09IC0xKSB7XHJcbiAgICAgICAgICBibGluaygpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgc2NvcGUuJG9uKFwiX2JsaW5rX2VuYWJsZV9cIiArIGJsaW5rRWxlbWVudElkLCBmdW5jdGlvbihldmVudCwgYXJncykge1xyXG4gICAgICAgICAgYmxpbmsoKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgc2NvcGUuJG9uKFwiX2JsaW5rX2Rpc2FibGVfXCIgKyBibGlua0VsZW1lbnRJZCwgZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICBub2JsaW5rKCk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHNjb3BlLiRvbihcIl9fYmxpbmtfZGlzYWJsZV9hbGxcIiwgZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICBub2JsaW5rKCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH07XHJcblxyXG4gICAgICBibGlua0VsZW1lbnRJZC5mb3JFYWNoKHJlZ2lzdGVyRXZlbnQpO1xyXG4gICAgfVxyXG4gIH07XHJcbn1dKTtcclxuXHJcbiIsInZhciBtdXNpY1Nob3dDYXNlQXBwID0gYW5ndWxhci5tb2R1bGUoXCJNdXNpY1Nob3dDYXNlQXBwXCIpO1xyXG5tdXNpY1Nob3dDYXNlQXBwLmRpcmVjdGl2ZShcInJlY2lwZVRvb2x0aXBcIiwgW1wiJHBhcnNlXCIsIFwiJHRpbWVvdXRcIiwgZnVuY3Rpb24oJHBhcnNlLCAkdGltZW91dCkge1xyXG4gIHJldHVybiB7XHJcbiAgICByZXN0cmljdDogJ0UnLFxyXG4gICAgc2NvcGU6IHt9LFxyXG4gICAgdGVtcGxhdGU6ICc8ZGl2IG5nLWNsaWNrPVwib25DbGljaygkZXZlbnQpXCIgbmctY2xhc3M9XCJ7XFwnc2hvdy1yZWNpcGUtdG9vbHRpcFxcJzogdG9vbHRpcEVuYWJsZWQsIFxcJ2NhcC1yaWdodFxcJzogY2FwUmlnaHR9XCIgY2xhc3M9XCJoZWxwLXRvb2x0aXAgcmVjaXBlLXRvb2x0aXBcIj48cD57e3RleHR8dHJhbnNsYXRlfX08L3A+PC9kaXY+JyxcclxuICAgIGxpbms6IGZ1bmN0aW9uKHNjb3BlLCBlbGVtZW50LCBhdHRycykge1xyXG4gICAgICB2YXIgcnRJZEdldHRlciA9ICRwYXJzZShhdHRycy5ydElkKTtcclxuICAgICAgdmFyIHRvb2x0aXBFbGVtZW50SWQgPSBydElkR2V0dGVyKHNjb3BlLiRwYXJlbnQpO1xyXG5cclxuICAgICAgc2NvcGUudG9vbHRpcEVuYWJsZWQgPSBmYWxzZTtcclxuICAgICAgc2NvcGUub25DbGljayA9IGZ1bmN0aW9uKGUpIHtcclxuICAgICAgICBzY29wZS4kcGFyZW50LnJlY2lwZS5yYWlzZShcInRvb2x0aXBfY2xpY2tcIik7XHJcbiAgICAgICAgZS5zdG9wSW1tZWRpYXRlUHJvcGFnYXRpb24oKTtcclxuICAgICAgfTtcclxuXHJcbiAgICAgIHNjb3BlLiRvbihcIl90b29sdGlwX2Rpc3BsYXlfXCIgKyB0b29sdGlwRWxlbWVudElkLCBmdW5jdGlvbihldmVudCwgYXJncykge1xyXG4gICAgICAgICR0aW1lb3V0KGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgdmFyIHdpbmRvd1dpZHRoID0gTWF0aC5tYXgoZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmNsaWVudFdpZHRoLCB3aW5kb3cuaW5uZXJXaWR0aCB8fCAwKTtcclxuICAgICAgICAgIHZhciBlbCA9IGVsZW1lbnRbMF07XHJcbiAgICAgICAgICB2YXIgb2Zmc2V0ID0gd2luZG93V2lkdGggLSBlbC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS5sZWZ0O1xyXG5cclxuICAgICAgICAgIHNjb3BlLmNhcFJpZ2h0ID0gb2Zmc2V0IDwgMzAwO1xyXG5cclxuICAgICAgICAgIHNjb3BlLnRleHQgPSBhcmdzLnRleHQ7XHJcbiAgICAgICAgICBzY29wZS50b29sdGlwRW5hYmxlZCA9IHRydWU7XHJcbiAgICAgICAgfSlcclxuICAgICAgfSk7XHJcblxyXG4gICAgICBzY29wZS4kb24oXCJfdG9vbHRpcF9oaWRlX1wiICsgdG9vbHRpcEVsZW1lbnRJZCwgZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgc2NvcGUudG9vbHRpcEVuYWJsZWQgPSBmYWxzZTtcclxuICAgICAgfSk7XHJcblxyXG4gICAgICBzY29wZS4kb24oXCJfX3Rvb2x0aXBfaGlkZV9hbGxcIiwgZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgc2NvcGUudG9vbHRpcEVuYWJsZWQgPSBmYWxzZTtcclxuICAgICAgfSk7XHJcbiAgICB9XHJcbiAgfTtcclxufV0pO1xyXG5cclxuIiwidmFyIG11c2ljU2hvd0Nhc2VBcHAgPSBhbmd1bGFyLm1vZHVsZShcIk11c2ljU2hvd0Nhc2VBcHBcIik7XHJcbm11c2ljU2hvd0Nhc2VBcHAuZGlyZWN0aXZlKFwicmVjaXBlV2l6YXJkXCIsIFtcIiR0aW1lb3V0XCIsIGZ1bmN0aW9uKCR0aW1lb3V0KSB7XHJcbiAgcmV0dXJuIHtcclxuICAgIHJlc3RyaWN0OiAnRScsXHJcbiAgICB0ZW1wbGF0ZTogJzxkaXYgY2xhc3M9XCJyZWNpcGUtd2l6YXJkXCI+PHA+e3t0ZXh0fX08L3A+PC9kaXY+JyxcclxuICAgIGxpbms6IGZ1bmN0aW9uKHNjb3BlLCBlbGVtZW50LCBhdHRycykge1xyXG4gICAgfVxyXG4gIH07XHJcbn1dKTtcclxuXHJcbiIsInZhciBtdXNpY1Nob3dDYXNlQXBwID0gYW5ndWxhci5tb2R1bGUoXCJNdXNpY1Nob3dDYXNlQXBwXCIpO1xyXG5tdXNpY1Nob3dDYXNlQXBwLmRpcmVjdGl2ZShcInJlY3ljbGVCaW5Db21wYWN0Vmlld1wiLCBbXCIkdGltZW91dFwiLCBcIiR1aWJNb2RhbFwiLCBcIkZpbGVSZXBvc2l0b3J5XCIsIFwiRXJyTWVzc2FnZVwiLCBmdW5jdGlvbigkdGltZW91dCwgJHVpYk1vZGFsLCBGaWxlUmVwb3NpdG9yeSwgRXJyTWVzc2FnZSkge1xyXG4gIHJldHVybiB7XHJcbiAgICB0ZW1wbGF0ZVVybDogJ3NpdGUvdGVtcGxhdGVzL2RpcmVjdGl2ZXMvcmVjeWNsZUJpbkNvbXBhY3RWaWV3Lmh0bWwnLFxyXG4gICAgc2NvcGU6IHt9LFxyXG4gICAgbGluazogZnVuY3Rpb24oc2NvcGUsIGVsZW1lbnQsIGF0dHJzKSB7XHJcbiAgICAgIHZhciBvYnNlcnZlciA9IEZpbGVSZXBvc2l0b3J5Lm9ic2VydmVSZWN5Y2xlZChmdW5jdGlvbigpIHtcclxuICAgICAgICBGaWxlUmVwb3NpdG9yeS5zZWFyY2hSZWN5Y2xlZChudWxsLCB7bGltaXQ6IDEwfSlcclxuICAgICAgICAgIC50aGVuKGZ1bmN0aW9uKHJlc3VsdCkge1xyXG4gICAgICAgICAgICAkdGltZW91dChmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICBzY29wZS5maWxlcyA9IHJlc3VsdC5yZXN1bHRzLnNsaWNlKDAsIDQpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgIH0pO1xyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIHNjb3BlLiRvbihcImRlc3Ryb3lcIiwgb2JzZXJ2ZXIuZGVzdHJveSk7XHJcbiAgICAgIFxyXG4gICAgICBzY29wZS5vcGVuUmVjeWNsZUJpbiA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIC8vIHNob3cgcmVjeWNsZSBiaW4gbW9kYWxcclxuICAgICAgICB2YXIgbW9kYWxJbnMgPSAkdWliTW9kYWwub3Blbih7XHJcbiAgICAgICAgICB0ZW1wbGF0ZVVybDogXCJzaXRlL3RlbXBsYXRlcy9tb2RhbC9yZWN5Y2xlQmluLmh0bWxcIixcclxuICAgICAgICAgIGNvbnRyb2xsZXI6IFwicmVjeWNsZUJpbk1vZGFsQ3RybFwiXHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH07XHJcblxyXG4gICAgICBzY29wZS5yZXN0b3JlID0gZnVuY3Rpb24oZmlsZSkge1xyXG4gICAgICAgIEZpbGVSZXBvc2l0b3J5LnJlc3RvcmVGcm9tUmVjeWNsZUJpbihmaWxlLmlkKVxyXG4gICAgICAgICAgLnRoZW4oZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgIGlmIChmaWxlLnR5cGUgPT09ICdwcm9qZWN0Jykge1xyXG4gICAgICAgICAgICAgIGRvY3VtZW50LmxvY2F0aW9uID0gXCIjL2VkaXRvci9cIiArIGZpbGUuaWQ7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgZG9jdW1lbnQubG9jYXRpb24gPSBcIiMvZWRpdG9yL1wiK2ZpbGUucHJvamVjdCtcIi9cIitmaWxlLnR5cGUrXCIvXCIrZmlsZS5pZDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfSk7XHJcbiAgICAgIH07XHJcblxyXG4gICAgICBzY29wZS5vbkRyb3BDb21wbGV0ZT0gZnVuY3Rpb24oZmlsZSkge1xyXG4gICAgICAgIEZpbGVSZXBvc2l0b3J5Lm1vdmVUb1JlY3ljbGVCaW4oZmlsZS5pZClcclxuICAgICAgICAgIC5jYXRjaChmdW5jdGlvbihlcnIpIHtcclxuICAgICAgICAgICAgaWYgKGVyci50eXBlICYmIGVyci50eXBlID09PSAnY2FudHJlbW92ZScpIHtcclxuICAgICAgICAgICAgICBFcnJNZXNzYWdlKCdjb21tb24uZXJyb3JfdGl0bGUnLCAnY29tbW9uLmNhbnRyZW1vdmVfZXJyb3InKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICB0aHJvdyBlcnI7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH0pO1xyXG4gICAgICB9O1xyXG4gICAgfVxyXG4gIH07XHJcbn1dKTtcclxuXHJcbiIsInZhciBtdXNpY1Nob3dDYXNlQXBwID0gYW5ndWxhci5tb2R1bGUoXCJNdXNpY1Nob3dDYXNlQXBwXCIpO1xyXG5cclxubXVzaWNTaG93Q2FzZUFwcC5maWx0ZXIoXCJpY29uX2Zyb21fdHlwZVwiLCBmdW5jdGlvbigpIHtcclxuICByZXR1cm4gZnVuY3Rpb24odHlwZSkge1xyXG4gICAgaWYgKHR5cGUgPT09IFwiaW5zdHJ1bWVudFwiKSByZXR1cm4gXCJrZXlib2FyZFwiO1xyXG4gICAgaWYgKHR5cGUgPT09IFwidGVtcG9cIikgcmV0dXJuIFwiY2xvY2tcIjtcclxuICAgIGlmICh0eXBlID09PSBcInNvbmdcIikgcmV0dXJuIFwidGhcIjtcclxuICAgIGlmICh0eXBlID09PSBcInBhdHRlcm5cIikgcmV0dXJuIFwibXVzaWNcIjtcclxuICAgIGlmICh0eXBlID09PSBcImZ4XCIpIHJldHVybiBcIm1hZ2ljXCI7XHJcbiAgICBpZiAodHlwZSA9PT0gXCJwcm9qZWN0XCIpIHJldHVybiBcImZvbGRlclwiO1xyXG4gICAgcmV0dXJuIFwicXVlc3Rpb25cIjtcclxuICB9O1xyXG59KTtcclxuXHJcbm11c2ljU2hvd0Nhc2VBcHAuZGlyZWN0aXZlKFwidHlwZUljb25cIiwgW1wiJHBhcnNlXCIsIGZ1bmN0aW9uKCRwYXJzZSkge1xyXG4gIHJldHVybiB7XHJcbiAgICByZXN0cmljdDogJ0EnLFxyXG4gICAgc2NvcGU6IHt9LFxyXG4gICAgcmVwbGFjZTogdHJ1ZSxcclxuICAgIHRlbXBsYXRlOiAnPHNwYW4gY2xhc3M9XCJmYSBmYS17e3R5cGVJY29uIHwgaWNvbl9mcm9tX3R5cGV9fVwiPicsXHJcbiAgICBsaW5rOiBmdW5jdGlvbihzY29wZSwgZWxlbWVudCwgYXR0cnMpIHtcclxuICAgICAgdmFyIGljb25UeXBlTmFtZSA9ICRwYXJzZShhdHRycy50eXBlSWNvbik7XHJcblxyXG4gICAgICBzY29wZS4kcGFyZW50LiR3YXRjaChpY29uVHlwZU5hbWUsIGZ1bmN0aW9uKG5ld1ZhbHVlKSB7XHJcbiAgICAgICAgc2NvcGUudHlwZUljb24gPSBpY29uVHlwZU5hbWUoc2NvcGUuJHBhcmVudCk7XHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG4gIH07XHJcbn1dKTtcclxuIiwidmFyIG11c2ljU2hvd0Nhc2VBcHAgPSBhbmd1bGFyLm1vZHVsZShcIk11c2ljU2hvd0Nhc2VBcHBcIik7XHJcblxyXG5tdXNpY1Nob3dDYXNlQXBwLmZhY3RvcnkoXCJNdXNpY09iamVjdEZhY3RvcnlcIiwgW1wiTXVzaWNDb250ZXh0XCIsIFwiJHFcIiwgXCJUeXBlU2VydmljZVwiLCBcInBydW5lV3JhcHBlclwiLCBmdW5jdGlvbihNdXNpY0NvbnRleHQsICRxLCBUeXBlU2VydmljZSwgcHJ1bmVXcmFwcGVyKSB7XHJcbiAgdmFyIGZpbGVPdXRwdXRNYXAgPSBuZXcgV2Vha01hcCgpO1xyXG5cclxuICByZXR1cm4gZnVuY3Rpb24ob3B0aW9ucykge1xyXG4gICAgdmFyIG5leHRJZCA9IDA7XHJcblxyXG4gICAgdmFyIF9sYXN0X3R5cGUgPSB7fTtcclxuICAgIHZhciBfX19jYWNoZSA9IHt9O1xyXG5cclxuICAgIHZhciBtb25pdG9yID0gb3B0aW9ucyAmJiBvcHRpb25zLm1vbml0b3I7XHJcblxyXG4gICAgdmFyIGdldENvbnN0cnVjdG9yID0gZnVuY3Rpb24oZGVzY3JpcHRvciwgY2hhbm5lbCkge1xyXG4gICAgICAgIHJldHVybiBUeXBlU2VydmljZS5nZXRUeXBlKGRlc2NyaXB0b3IudHlwZSlcclxuICAgICAgICAgIC50aGVuKGZ1bmN0aW9uKHR5cGUpIHtcclxuICAgICAgICAgICAgaWYgKHR5cGUubW9uaXRvciAmJiAhbW9uaXRvcikge1xyXG4gICAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbihzdWJvYmplY3RzKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgd3JhcHBlZCA9IHN1Ym9iamVjdHNbMF07XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24obXVzaWMpIHtcclxuICAgICAgICAgICAgICAgICAgcmV0dXJuIHdyYXBwZWQobXVzaWMpO1xyXG4gICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB2YXIgcmV0ID0gZnVuY3Rpb24oc3Vib2JqZWN0cykge1xyXG4gICAgICAgICAgICAgIHZhciBidWlsZENvbXBvbmVudHMgPSBbXTtcclxuXHJcbiAgICAgICAgICAgICAgaWYgKHR5cGUuY29tcG9uZW50cykge1xyXG4gICAgICAgICAgICAgICAgdHlwZS5jb21wb25lbnRzLmZvckVhY2goZnVuY3Rpb24oY29tcG9uZW50TmFtZSkge1xyXG4gICAgICAgICAgICAgICAgICBpZiAoIWRlc2NyaXB0b3IuZGF0YS5tb2R1bGF0aW9uKSByZXR1cm47XHJcblxyXG4gICAgICAgICAgICAgICAgICB2YXIgdmFsdWUgPSBkZXNjcmlwdG9yLmRhdGEubW9kdWxhdGlvbltjb21wb25lbnROYW1lXTtcclxuICAgICAgICAgICAgICAgICAgaWYgKCF2YWx1ZSkgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgICBpZiAoIXZhbHVlLmRhdGEpIHJldHVybjtcclxuICAgICAgICAgICAgICAgICAgaWYgKCF2YWx1ZS5kYXRhLmFycmF5KSByZXR1cm47XHJcbiAgICAgICAgICAgICAgICAgIGlmICh2YWx1ZS5kYXRhLmFycmF5Lmxlbmd0aCA9PT0gMCkgcmV0dXJuO1xyXG5cclxuICAgICAgICAgICAgICAgICAgYnVpbGRDb21wb25lbnRzLnB1c2goXHJcbiAgICAgICAgICAgICAgICAgICAgY3JlYXRlUGFyYW1ldHJpYyh2YWx1ZSlcclxuICAgICAgICAgICAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uKG9iaikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6IGNvbXBvbmVudE5hbWUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgb2JqOiBvYmpcclxuICAgICAgICAgICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAgICk7XHJcblxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICByZXR1cm4gJHEuYWxsKGJ1aWxkQ29tcG9uZW50cylcclxuICAgICAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uKG9ianMpIHtcclxuICAgICAgICAgICAgICAgICAgdmFyIGNvbXBvbmVudHMgPSB7fTtcclxuICAgICAgICAgICAgICAgICAgb2Jqcy5mb3JFYWNoKGZ1bmN0aW9uKG9iaikge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbXBvbmVudHNbb2JqLm5hbWVdID0gb2JqLm9iajtcclxuICAgICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICBfbGFzdF90eXBlW2NoYW5uZWxdID0gX2xhc3RfdHlwZVtjaGFubmVsXSB8fCBuZXcgV2Vha01hcCgpO1xyXG4gICAgICAgICAgICAgICAgICBfX19jYWNoZVtjaGFubmVsXSA9IF9fX2NhY2hlW2NoYW5uZWxdIHx8IG5ldyBXZWFrTWFwKCk7XHJcbiAgICAgICAgICAgICAgICAgIHZhciBsYXN0X3R5cGUgPSBfbGFzdF90eXBlW2NoYW5uZWxdO1xyXG4gICAgICAgICAgICAgICAgICB2YXIgX19jYWNoZSA9IF9fX2NhY2hlW2NoYW5uZWxdO1xyXG5cclxuLyo+ICAgICAgICAgICAgICAgICAgaWYgKCFsYXN0X3R5cGUuaGFzKGRlc2NyaXB0b3IpfHxsYXN0X3R5cGUuZ2V0KGRlc2NyaXB0b3IpID09PSBkZXNjcmlwdG9yLnR5cGUpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoc3Vib2JqZWN0cy5sZW5ndGggPT09IDEpIHtcclxuICAgICAgICAgICAgICAgICAgICAgIGlmIChfX2NhY2hlLmhhcyhkZXNjcmlwdG9yKSAmJiBfX2NhY2hlLmdldChkZXNjcmlwdG9yKVtzdWJvYmplY3RzWzBdLmlkXSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gJHEoZnVuY3Rpb24ocmVzb2x2ZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIHJlc29sdmUoX19jYWNoZS5nZXQoZGVzY3JpcHRvcilbc3Vib2JqZWN0c1swXS5pZF1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAudXBkYXRlKGRlc2NyaXB0b3IuZGF0YSwgY29tcG9uZW50cykpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHN1Ym9iamVjdHMubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICBpZiAoX19jYWNoZS5oYXMoZGVzY3JpcHRvcikgJiYgX19jYWNoZS5nZXQoZGVzY3JpcHRvcikubm9pZCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gJHEoZnVuY3Rpb24ocmVzb2x2ZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIHJlc29sdmUoX19jYWNoZS5nZXQoZGVzY3JpcHRvcikubm9pZFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC51cGRhdGUoZGVzY3JpcHRvci5kYXRhLCBjb21wb25lbnRzKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgfSovXHJcblxyXG4gICAgICAgICAgICAgICAgICBsYXN0X3R5cGUuc2V0KGRlc2NyaXB0b3IsIGRlc2NyaXB0b3IudHlwZSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICB2YXIgcmV0ID0gdHlwZS5jb25zdHJ1Y3RvcihkZXNjcmlwdG9yLmRhdGEsIHN1Ym9iamVjdHMsIGNvbXBvbmVudHMpO1xyXG4gICAgICAgICAgICAgICAgICBuZXh0SWQrKztcclxuICAgICAgICAgICAgICAgICAgcmV0LmlkID0gbmV4dElkO1xyXG5cclxuICAgICAgICAgICAgICAgICAgaWYgKHN1Ym9iamVjdHMubGVuZ3RoID09PSAxKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFfX2NhY2hlLmhhcyhkZXNjcmlwdG9yKSkgX19jYWNoZS5zZXQoZGVzY3JpcHRvciwge30pO1xyXG4gICAgICAgICAgICAgICAgICAgIF9fY2FjaGUuZ2V0KGRlc2NyaXB0b3IpW3N1Ym9iamVjdHNbMF0uaWRdID0gcmV0O1xyXG4gICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHN1Ym9iamVjdHMubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFfX2NhY2hlLmhhcyhkZXNjcmlwdG9yKSkgX19jYWNoZS5zZXQoZGVzY3JpcHRvciwge30pO1xyXG4gICAgICAgICAgICAgICAgICAgIF9fY2FjaGUuZ2V0KGRlc2NyaXB0b3IpLm5vaWQgPSByZXQ7XHJcbiAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgIHJldHVybiByZXQ7XHJcblxyXG4gICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgIHJldC5zdWJvYmplY3RzID0gdHlwZS5zdWJvYmplY3RzO1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIHJldDtcclxuICAgICAgICAgIH0pO1xyXG4gICAgfTtcclxuXHJcbiAgICB2YXIgY3JlYXRlUGFyYW1ldHJpY0Zyb21TdGFjayA9IGZ1bmN0aW9uKGFycmF5LCBpZHgsIGNoYW5uZWwpIHtcclxuICAgICAgaWYgKGFycmF5Lmxlbmd0aCA9PT0gMCkgcmV0dXJuICRxLndoZW4obnVsbCk7XHJcblxyXG4gICAgICB2YXIgZGVzY3JpcHRvciA9IGFycmF5W2lkeF07XHJcbiAgICAgIGNoYW5uZWwgPSBjaGFubmVsIHx8IDA7XHJcblxyXG4gICAgICByZXR1cm4gZ2V0Q29uc3RydWN0b3IoZGVzY3JpcHRvciwgY2hhbm5lbClcclxuICAgICAgICAudGhlbihmdW5jdGlvbihjb25zdHJ1Y3Rvcikge1xyXG4gICAgICAgICAgaWYgKGNvbnN0cnVjdG9yLnN1Ym9iamVjdHMpIHtcclxuICAgICAgICAgICAgdmFyIGdldE9iamVjdCA9IGZ1bmN0aW9uKGQsIGluZGV4KSB7XHJcbiAgICAgICAgICAgICAgdmFyIG5ld0FycmF5ID0gZC5kYXRhLmFycmF5LmNvbmNhdChhcnJheS5zbGljZShpZHgrMSkpO1xyXG4gICAgICAgICAgICAgIHJldHVybiBjcmVhdGVQYXJhbWV0cmljRnJvbVN0YWNrKG5ld0FycmF5LCAwLCBjaGFubmVsKjE2ICsgaW5kZXgpO1xyXG4gICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuICRxLmFsbChkZXNjcmlwdG9yLmRhdGEuc3Vib2JqZWN0cy5tYXAoZ2V0T2JqZWN0KSlcclxuICAgICAgICAgICAgICAudGhlbihmdW5jdGlvbihvYmpzKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gY29uc3RydWN0b3Iob2Jqcyk7XHJcbiAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgaWYgKGFycmF5Lmxlbmd0aCA9PT0gMSkge1xyXG4gICAgICAgICAgICByZXR1cm4gY29uc3RydWN0b3IoW10pO1xyXG4gICAgICAgICAgfVxyXG5cclxuICAgICAgICAgIHJldHVybiBjcmVhdGVQYXJhbWV0cmljRnJvbVN0YWNrKGFycmF5LnNsaWNlKGlkeCsxKSwgMCwgY2hhbm5lbClcclxuICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24ob2JqKSB7XHJcbiAgICAgICAgICAgICAgcmV0dXJuIGNvbnN0cnVjdG9yKFtvYmpdKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSlcclxuICAgICAgICAudGhlbihmdW5jdGlvbihvYmopIHtcclxuICAgICAgICAgIGlmIChvYmogJiYgb2JqLmRhdGFMaW5rKSB7XHJcbiAgICAgICAgICAgIG9iai5kYXRhTGluayhub3RpZnlDaGFuZ2VGb3IoZGVzY3JpcHRvcikpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgcmV0dXJuIG9iajtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcblxyXG4gICAgdmFyIG5vdGlmeUNoYW5nZUZvciA9IGZ1bmN0aW9uKGRlc2NyaXB0b3IpIHtcclxuICAgICAgcmV0dXJuIGZ1bmN0aW9uKG91dHB1dCkge1xyXG4gICAgICAgIGlmIChmaWxlT3V0cHV0TWFwLmhhcyhkZXNjcmlwdG9yKSkge1xyXG4gICAgICAgICAgdmFyIGVlID0gZmlsZU91dHB1dE1hcC5nZXQoZGVzY3JpcHRvcik7XHJcbiAgICAgICAgICBlZS5lbWl0KCdjaGFuZ2VkJywgb3V0cHV0KTtcclxuICAgICAgICB9XHJcbiAgICAgIH07XHJcbiAgICB9O1xyXG5cclxuICAgIHZhciBjcmVhdGVQYXJhbWV0cmljID0gZnVuY3Rpb24oZGVzY3JpcHRvcikge1xyXG4gICAgICBpZiAoZGVzY3JpcHRvci50eXBlID09PSBcInN0YWNrXCIpIHtcclxuICAgICAgICByZXR1cm4gY3JlYXRlUGFyYW1ldHJpY0Zyb21TdGFjayhkZXNjcmlwdG9yLmRhdGEuYXJyYXksIDApXHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgcmV0dXJuIGdldENvbnN0cnVjdG9yKGRlc2NyaXB0b3IsIDApXHJcbiAgICAgICAgICAudGhlbihmdW5jdGlvbihjb25zdHJ1Y3Rvcikge1xyXG4gICAgICAgICAgICByZXR1cm4gY29uc3RydWN0b3IoW10pOyBcclxuICAgICAgICAgIH0pO1xyXG4gICAgICB9XHJcbiAgICB9O1xyXG5cclxuICAgIHZhciBkZXN0cm95QWxsID0gZnVuY3Rpb24ob2JqKSB7XHJcbiAgICAgIGZvciAodmFyIGNoYW5uZWwgaW4gX2xhc3RfdHlwZSkge1xyXG4gICAgICAgIF9sYXN0X3R5cGVbY2hhbm5lbF0gPSBuZXcgV2Vha01hcCgpO1xyXG4gICAgICB9XHJcbiAgICAgIGZvciAodmFyIGNoYW5uZWwgaW4gX19fY2FjaGUpIHtcclxuICAgICAgICBfX19jYWNoZVtjaGFubmVsXSA9IG5ldyBXZWFrTWFwKCk7IFxyXG4gICAgICB9XHJcblxyXG4gICAgICBiYXNlcy5mb3JFYWNoKGZ1bmN0aW9uKGJhc2UpIHtcclxuICAgICAgICBiYXNlLnBydW5lKCk7XHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgYmFzZXMgPSBbXTtcclxuXHJcbiAgICAgIHJldHVybiAkcS53aGVuKG51bGwpO1xyXG4gICAgfTtcclxuXHJcbiAgICB2YXIgYmFzZXMgPSBbXTtcclxuICAgIHZhciBjcmVhdGUgPSBmdW5jdGlvbihkZXNjcmlwdG9yLCBtdXNpYykge1xyXG4gICAgICByZXR1cm4gY3JlYXRlUGFyYW1ldHJpYyhkZXNjcmlwdG9yKVxyXG4gICAgICAgIC50aGVuKGZ1bmN0aW9uKGZjbikge1xyXG4gICAgICAgICAgaWYgKCFmY24pIHJldHVybjtcclxuXHJcbiAgICAgICAgICBpZiAobXVzaWMpIHtcclxuICAgICAgICAgICAgdmFyIGJhc2U9IG11c2ljLnNmeEJhc2UoKTtcclxuICAgICAgICAgICAgYmFzZXMucHVzaChiYXNlKTtcclxuICAgICAgICAgICAgcmV0dXJuIGZjbihiYXNlKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIHJldHVybiBNdXNpY0NvbnRleHQucnVuRmNuKGZ1bmN0aW9uKG11c2ljKSB7XHJcbiAgICAgICAgICAgIHZhciBiYXNlID0gbXVzaWMuc2Z4QmFzZSgpO1xyXG4gICAgICAgICAgICBiYXNlcy5wdXNoKGJhc2UpO1xyXG4gICAgICAgICAgICByZXR1cm4gZmNuKGJhc2UpO1xyXG4gICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG5cclxuICAgIHZhciBvYnNlcnZlT3V0cHV0ID0gZnVuY3Rpb24oZmlsZSwgbGlzdGVuZXIpIHtcclxuICAgICAgdmFyIGVlO1xyXG5cclxuICAgICAgaWYgKGZpbGVPdXRwdXRNYXAuaGFzKGZpbGUpKSB7XHJcbiAgICAgICAgZWUgPSBmaWxlT3V0cHV0TWFwLmdldChmaWxlKTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICBlZSA9IG5ldyBFdmVudEVtaXR0ZXIoKTtcclxuICAgICAgICBmaWxlT3V0cHV0TWFwLnNldChmaWxlLCBlZSlcclxuICAgICAgfVxyXG5cclxuICAgICAgZWUub24oJ2NoYW5nZWQnLCBsaXN0ZW5lcik7XHJcblxyXG4gICAgICByZXR1cm4ge1xyXG4gICAgICAgIGRlc3Ryb3k6IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgZWUucmVtb3ZlTGlzdGVuZXIoJ2NoYW5nZWQnLCBsaXN0ZW5lcik7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9O1xyXG5cclxuICAgIHJldHVybiB7XHJcbiAgICAgIGNyZWF0ZTogY3JlYXRlLFxyXG4gICAgICBkZXN0cm95QWxsOiBkZXN0cm95QWxsLFxyXG4gICAgICBvYnNlcnZlT3V0cHV0OiBvYnNlcnZlT3V0cHV0XHJcbiAgICB9O1xyXG4gIH07XHJcbn1dKTtcclxuXHJcbm11c2ljU2hvd0Nhc2VBcHAuc2VydmljZShcIk11c2ljQ29udGV4dFwiLCBmdW5jdGlvbigpIHtcclxuICB2YXIgbXVzaWM7XHJcbiAgdmFyIGNvbnRleHQ7XHJcblxyXG4gIHZhciBSZWNvcmRhYmxlID0gZnVuY3Rpb24obXVzaWMsIHBsYXlhYmxlLCBuYW1lKSB7XHJcbiAgICB0aGlzLl9wbGF5YWJsZSA9IHBsYXlhYmxlO1xyXG4gICAgdGhpcy5fbXVzaWMgPSBtdXNpYztcclxuICAgIHRoaXMuX25hbWUgPSBuYW1lO1xyXG4gIH07XHJcblxyXG4gIFJlY29yZGFibGUucHJvdG90eXBlLnJlY29yZCA9IGZ1bmN0aW9uKCkge1xyXG4gICAgdmFyIHBsYXlhYmxlID0gdGhpcy5fcGxheWFibGU7XHJcbiAgICB2YXIgcmVjb3JkaW5nID0gbXVzaWMucmVjb3JkKCk7XHJcbiAgICB2YXIgcmVjb3JkRmlsZU5hbWUgPSB0aGlzLl9uYW1lO1xyXG4gICAgdmFyIHBsYXlpbmcgPSBwbGF5YWJsZS5wbGF5KCk7XHJcblxyXG4gICAgTVVTSUMuVXRpbHMuRnVuY3Rpb25TZXEucHJlY2lzZVRpbWVvdXQoZnVuY3Rpb24oKXtcclxuICAgICAgcmVjb3JkaW5nLnN0b3AoKTtcclxuICAgICAgcmVjb3JkaW5nLmV4cG9ydFdBVihmdW5jdGlvbihibG9iKSB7XHJcbiAgICAgICAgdmFyIGEgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiYVwiKTtcclxuICAgICAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKGEpO1xyXG4gICAgICAgIGEuc3R5bGUgPSBcImRpc3BsYXk6IG5vbmVcIjtcclxuXHJcbiAgICAgICAgdmFyIHVybCAgPSB3aW5kb3cuVVJMLmNyZWF0ZU9iamVjdFVSTChibG9iKTtcclxuICAgICAgICBhLmhyZWYgPSB1cmw7XHJcbiAgICAgICAgYS5kb3dubG9hZCA9IHJlY29yZEZpbGVOYW1lICsgXCIud2F2XCI7XHJcbiAgICAgICAgYS5jbGljaygpO1xyXG4gICAgICAgIHdpbmRvdy5VUkwucmV2b2tlT2JqZWN0VVJMKHVybCk7XHJcbiAgICAgIH0pO1xyXG4gICAgfSwgcGxheWFibGUuZHVyYXRpb24oKSk7XHJcbiAgfTtcclxuXHJcbiAgcmV0dXJuIHtcclxuICAgIHJlc3VtZUF1ZGlvOiBmdW5jdGlvbigpIHtcclxuICAgICAgaWYgKCFtdXNpYykge1xyXG4gICAgICAgIGNvbnRleHQgPSBuZXcgTVVTSUMuQ29udGV4dCgpO1xyXG4gICAgICAgIG11c2ljID0gY29udGV4dC5zZnhCYXNlKCk7IFxyXG4gICAgICB9XHJcblxyXG4gICAgICBjb250ZXh0LnJlc3VtZSgpO1xyXG4gICAgfSxcclxuXHJcbiAgICBydW5GY246IGZ1bmN0aW9uKGYpIHtcclxuICAgICAgaWYgKCFtdXNpYykge1xyXG4gICAgICAgIGNvbnRleHQgPSBuZXcgTVVTSUMuQ29udGV4dCgpO1xyXG4gICAgICAgIG11c2ljID0gY29udGV4dC5zZnhCYXNlKCk7IFxyXG4gICAgICB9XHJcbiAgICAgIHJldHVybiBmKG11c2ljKTtcclxuICAgIH0sXHJcblxyXG4gICAgcmVjb3JkOiBmdW5jdGlvbihvcHRpb25zLCBjYWxsYmFjaykge1xyXG4gICAgICByZXR1cm4gdGhpcy5ydW5GY24oZnVuY3Rpb24oKXtcclxuICAgICAgICByZXR1cm4gY29udGV4dC5yZWNvcmQob3B0aW9ucywgY2FsbGJhY2spO1xyXG4gICAgICB9KTtcclxuICAgIH0sXHJcblxyXG4gICAgcnVuOiBmdW5jdGlvbihjb2RlKSB7XHJcbiAgICAgIGlmIChtdXNpYykge1xyXG4gICAgICAgIG11c2ljLnBydW5lKCk7XHJcbiAgICAgIH1cclxuICAgICAgbXVzaWMgPSBuZXcgTVVTSUMuQ29udGV4dCgpLnNmeEJhc2UoKTtcclxuXHJcbiAgICAgIHRyeSB7XHJcbiAgICAgICAgcmV0dXJuIHtvYmplY3Q6IGV2YWwoXCIoZnVuY3Rpb24oKSB7XFxuXCIgKyBjb2RlICsgXCJcXG59KVwiKSgpfTtcclxuICAgICAgfSBjYXRjaChlKSB7XHJcbiAgICAgICAgcmV0dXJuIHtlcnJvcjogZS50b1N0cmluZygpfTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH07XHJcbn0pO1xyXG5cclxubXVzaWNTaG93Q2FzZUFwcC5zZXJ2aWNlKFwiSGlzdG9yaWFsXCIsIFtmdW5jdGlvbigpIHtcclxuICByZXR1cm4gZnVuY3Rpb24oKSB7XHJcbiAgICB2YXIgYXJyYXkgPSBbXTtcclxuICAgIHZhciBjdXJyZW50VmVyc2lvbiA9IDA7XHJcblxyXG4gICAgdmFyIHVuZG8gPSBmdW5jdGlvbigpIHtcclxuICAgICAgaWYgKGN1cnJlbnRWZXJzaW9uID4gMCkgY3VycmVudFZlcnNpb24tLTtcclxuICAgICAgcmV0dXJuIGFycmF5W2N1cnJlbnRWZXJzaW9uXTtcclxuICAgIH07XHJcblxyXG4gICAgdmFyIHJlZG8gPSBmdW5jdGlvbigpIHtcclxuICAgICAgaWYgKGN1cnJlbnRWZXJzaW9uIDwgYXJyYXkubGVuZ3RoLTEpIGN1cnJlbnRWZXJzaW9uKys7XHJcbiAgICAgIHJldHVybiBhcnJheVtjdXJyZW50VmVyc2lvbl07XHJcbiAgICB9O1xyXG5cclxuICAgIHZhciByZWdpc3RlclZlcnNpb24gPSBmdW5jdGlvbihkYXRhKSB7XHJcbiAgICAgIGFycmF5ID0gYXJyYXkuc2xpY2UoMCwgY3VycmVudFZlcnNpb24rMSk7XHJcbiAgICAgIGFycmF5LnB1c2goZGF0YSk7XHJcbiAgICAgIGlmIChhcnJheS5sZW5ndGggPiAxMjgpIGFycmF5ID0gYXJyYXkuc2xpY2UoMSk7XHJcbiAgICAgIGN1cnJlbnRWZXJzaW9uID0gYXJyYXkubGVuZ3RoLTE7XHJcbiAgICB9O1xyXG5cclxuICAgIHJldHVybiB7XHJcbiAgICAgIHJlZ2lzdGVyVmVyc2lvbjogcmVnaXN0ZXJWZXJzaW9uLFxyXG4gICAgICB1bmRvOiB1bmRvLFxyXG4gICAgICByZWRvOiByZWRvXHJcbiAgICB9O1xyXG4gIH07XHJcbn1dKTtcclxuXHJcbm11c2ljU2hvd0Nhc2VBcHAuc2VydmljZShcIlBhdHRlcm5cIiwgW1wiTVVTSUNcIiwgJ1RJQ0tTX1BFUl9CRUFUJywgZnVuY3Rpb24oTVVTSUMsIFRJQ0tTX1BFUl9CRUFUKSB7XHJcblxyXG4gIHZhciBzY2hlZHVsZSA9IGZ1bmN0aW9uKG5vdGVzZXEsIGZpbGUsIHRyYWNrLCBldmVudFByZXByb2Nlc3Nvciwgb25TdG9wLCBjdHgpIHtcclxuICAgIHZhciBldmVudHMgPSB0cmFjay5ldmVudHMuc29ydChmdW5jdGlvbihlMSwgZTIpIHsgcmV0dXJuIGUxLnMgLSBlMi5zOyB9KTtcclxuICAgIHZhciBzY2FsZWRFdmVudHMgPSBldmVudHMubWFwKGZ1bmN0aW9uKGV2dCkge1xyXG4gICAgICByZXR1cm4gW2V2dC5uLCBldnQucywgZXZ0LmwsIHt0YzogZXZ0LnRjfV07XHJcbiAgICB9KTtcclxuXHJcbiAgICBmb3IgKHZhciBpPTA7IGk8c2NhbGVkRXZlbnRzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgIHZhciBldnQgPSBzY2FsZWRFdmVudHNbaV07XHJcbiAgICAgIG5vdGVzZXEucHVzaChldmVudFByZXByb2Nlc3NvcihldnQsIHNjYWxlZEV2ZW50cyksIGN0eCk7XHJcbiAgICB9XHJcblxyXG4gICAgbm90ZXNlcS5wYWRkaW5nVG8oVElDS1NfUEVSX0JFQVQgKiBmaWxlLm1lYXN1cmVDb3VudCAqIGZpbGUubWVhc3VyZSk7XHJcbiAgICBub3Rlc2VxLnB1c2hDYWxsYmFjayhbVElDS1NfUEVSX0JFQVQqZmlsZS5tZWFzdXJlQ291bnQgKiBmaWxlLm1lYXN1cmUsIG9uU3RvcF0pO1xyXG5cclxuICAgIHZhciB0b3RhbEJlYXRzID0gZmlsZS5tZWFzdXJlICogZmlsZS5tZWFzdXJlQ291bnQ7XHJcbiAgfTtcclxuXHJcbiAgdmFyIG5vdGVzZXEgPSBmdW5jdGlvbihmaWxlLCB0cmFjaywgZXZlbnRQcmVwcm9jZXNzb3IsIG9uU3RvcCkge1xyXG4gICAgdmFyIG5vdGVzZXEgPSBuZXcgTVVTSUMuTm90ZVNlcXVlbmNlKCk7XHJcbiAgICBzY2hlZHVsZShub3Rlc2VxLCBmaWxlLCB0cmFjaywgZXZlbnRQcmVwcm9jZXNzb3IsIG9uU3RvcCk7XHJcbiAgICByZXR1cm4gbm90ZXNlcTtcclxuICB9O1xyXG5cclxuICB2YXIgcGF0dGVybkNvbXBvc2UgPSBmdW5jdGlvbihmaWxlLCBpbnN0cnVtZW50cywgYmFzZSwgb25TdG9wLCBvcHRpb25zKSB7XHJcbiAgICB2YXIgc3RhcnQgPSAob3B0aW9ucyAmJiBvcHRpb25zLnN0YXJ0KSB8fCAwO1xyXG4gICAgdmFyIGlzVGVtcG9UcmFjayA9IGZ1bmN0aW9uKHRyYWNrLCBpZHgpIHtcclxuICAgICAgaWR4ID0gYmFzZSArIGlkeDtcclxuICAgICAgdmFyIGluc3RydW1lbnQgPSBpbnN0cnVtZW50c1t0cmFjay5pbnN0cnVtZW50ICsgJ18nICsgaWR4XTtcclxuICAgICAgcmV0dXJuIGluc3RydW1lbnQgJiYgaW5zdHJ1bWVudC50ZW1wbztcclxuICAgIH07XHJcblxyXG4gICAgdmFyIGdldEV2ZW50cyA9IGZ1bmN0aW9uKHRyYWNrKSB7XHJcbiAgICAgIHJldHVybiB0cmFjay5ldmVudHM7XHJcbiAgICB9O1xyXG5cclxuICAgIHZhciBjb25jYXQgPSBmdW5jdGlvbihhLCBiKSB7XHJcbiAgICAgIHJldHVybiBhLmNvbmNhdChiKTtcclxuICAgIH07XHJcblxyXG4gICAgdmFyIGJ5U3RhcnQgPSBmdW5jdGlvbihhLCBiKSB7XHJcbiAgICAgIHJldHVybiBhLnMtYi5zO1xyXG4gICAgfTtcclxuXHJcbiAgICB2YXIgc29uZ0N0eCA9IHt9O1xyXG4gICAgdmFyIG5vdGVzZXEgPSBuZXcgTVVTSUMuTm90ZVNlcXVlbmNlKG51bGwsXHJcbiAgICB7XHJcbiAgICAgIHRpbWU6IE1VU0lDLk1hdGgudGlja3NUb1RpbWUoe1xyXG4gICAgICAgIGJwbTogZmlsZS5icG0sXHJcbiAgICAgICAgdGlja3NfcGVyX2JlYXQ6IFRJQ0tTX1BFUl9CRUFULFxyXG4gICAgICAgIGJwbV9ldmVudHM6IGZpbGUudHJhY2tzLmZpbHRlcihpc1RlbXBvVHJhY2spLm1hcChnZXRFdmVudHMpLnJlZHVjZShjb25jYXQsIFtdKS5zb3J0KGJ5U3RhcnQpLFxyXG4gICAgICAgIHN0YXJ0OiBzdGFydFxyXG4gICAgICB9KSxcclxuICAgICAgc29uZ0N0eDogc29uZ0N0eFxyXG4gICAgfSk7XHJcblxyXG4gICAgZmlsZS50cmFja3MuZm9yRWFjaChmdW5jdGlvbih0cmFjaywgaWR4KSB7XHJcbiAgICAgIGlkeCA9IGJhc2UgKyBpZHg7XHJcblxyXG4gICAgICB2YXIgaW5zdHJ1bWVudCA9IGluc3RydW1lbnRzW3RyYWNrLmluc3RydW1lbnQgKyAnXycgKyBpZHhdO1xyXG5cclxuICAgICAgaWYgKGluc3RydW1lbnQgJiYgIWluc3RydW1lbnQudGVtcG8pIHtcclxuICAgICAgICB2YXIgZXZlbnRQcmVwcm9jZXNzb3IgPSBpbnN0cnVtZW50LmV2ZW50UHJlcHJvY2Vzc29yIHx8IGZ1bmN0aW9uKHgpeyByZXR1cm4geDsgfTtcclxuICAgICAgICB2YXIgY29udGV4dCA9IE1VU0lDLk5vdGVTZXF1ZW5jZS5jb250ZXh0KGluc3RydW1lbnQsIG51bGwsIHNvbmdDdHgpO1xyXG4gICAgICAgIHNjaGVkdWxlKG5vdGVzZXEsIGZpbGUsIHRyYWNrLCBldmVudFByZXByb2Nlc3Nvciwgb25TdG9wLCBjb250ZXh0KTtcclxuICAgICAgfVxyXG4gICAgfSk7XHJcblxyXG4gICAgdmFyIHJldCA9IG5vdGVzZXEubWFrZVBsYXlhYmxlKG51bGwpO1xyXG4gICAgcmV0LnNjaGVkdWxlID0gZnVuY3Rpb24obm90ZVNlcXVlbmNlLCBzb25nQ3R4KSB7XHJcbiAgICAgIHZhciBjb250ZXh0cyA9IFtdO1xyXG4gICAgICBzb25nQ3R4ID0gc29uZ0N0eCB8fCB7fTtcclxuXHJcbiAgICAgIGZpbGUudHJhY2tzLmZvckVhY2goZnVuY3Rpb24odHJhY2ssIGlkeCkge1xyXG4gICAgICAgIGlkeCA9IGJhc2UgKyBpZHg7XHJcblxyXG4gICAgICAgIHZhciBpbnN0cnVtZW50ID0gaW5zdHJ1bWVudHNbdHJhY2suaW5zdHJ1bWVudCArICdfJyArIGlkeF07XHJcblxyXG4gICAgICAgIGlmIChpbnN0cnVtZW50KSB7XHJcbiAgICAgICAgICB2YXIgZXZlbnRQcmVwcm9jZXNzb3IgPSBpbnN0cnVtZW50LmV2ZW50UHJlcHJvY2Vzc29yIHx8IGZ1bmN0aW9uKHgpeyByZXR1cm4geDsgfTtcclxuICAgICAgICAgIHZhciBjb250ZXh0ID0gTVVTSUMuTm90ZVNlcXVlbmNlLmNvbnRleHQoaW5zdHJ1bWVudCwgbnVsbCwgc29uZ0N0eCk7XHJcblxyXG4gICAgICAgICAgY29udGV4dHMucHVzaChjb250ZXh0KTtcclxuICAgICAgICAgIHNjaGVkdWxlKG5vdGVTZXF1ZW5jZSwgZmlsZSwgdHJhY2ssIGV2ZW50UHJlcHJvY2Vzc29yLCBvblN0b3AsIGNvbnRleHQpO1xyXG4gICAgICAgIH1cclxuICAgICAgfSk7XHJcblxyXG4gICAgICByZXR1cm4gY29udGV4dHM7XHJcbiAgICB9O1xyXG5cclxuICAgIHJldC50aW1lVG9UaWNrcyA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICByZXR1cm4gTVVTSUMuTWF0aC50aW1lVG9UaWNrcyh7XHJcbiAgICAgICAgYnBtOiBmaWxlLmJwbSxcclxuICAgICAgICB0aWNrc19wZXJfYmVhdDogVElDS1NfUEVSX0JFQVQsXHJcbiAgICAgICAgYnBtX2V2ZW50czogZmlsZS50cmFja3MuZmlsdGVyKGlzVGVtcG9UcmFjaykubWFwKGdldEV2ZW50cykucmVkdWNlKGNvbmNhdCwgW10pLnNvcnQoYnlTdGFydCksXHJcbiAgICAgICAgc3RhcnQ6IHN0YXJ0XHJcbiAgICAgIH0pO1xyXG4gICAgfTsgXHJcblxyXG4gICAgcmV0LmJwbV9ldmVudHMgPSBmaWxlLnRyYWNrcy5maWx0ZXIoaXNUZW1wb1RyYWNrKS5tYXAoZ2V0RXZlbnRzKS5yZWR1Y2UoY29uY2F0LCBbXSkuc29ydChieVN0YXJ0KTtcclxuXHJcbiAgICByZXR1cm4gcmV0O1xyXG4gIH07XHJcblxyXG4gIHZhciBoaWdoZXIgPSBmdW5jdGlvbihhLGIpIHtcclxuICAgIHJldHVybiBhPmIgPyBhIDogYjtcclxuICB9O1xyXG5cclxuICB2YXIgY29tcHV0ZU1lYXN1cmVDb3VudCA9IGZ1bmN0aW9uKGZpbGUsIG1lYXN1cmUpIHtcclxuICAgIGlmIChtZWFzdXJlPDEpIG1lYXN1cmU9MTtcclxuICAgIHZhciBlbmRUaW1lID0gZmlsZS50cmFja3MubWFwKGZ1bmN0aW9uKHRyYWNrKSB7XHJcbiAgICAgIHJldHVybiB0cmFjay5ldmVudHMubWFwKGZ1bmN0aW9uKGV2dCkge1xyXG4gICAgICAgIHJldHVybiBldnQucyArIGV2dC5sO1xyXG4gICAgICB9KS5yZWR1Y2UoaGlnaGVyLCAwKVxyXG4gICAgfSkucmVkdWNlKGhpZ2hlciwwKTtcclxuXHJcbiAgICB2YXIgbWVhc3VyZUxlbmd0aCA9IG1lYXN1cmUgKiBUSUNLU19QRVJfQkVBVDtcclxuICAgIHZhciBtZWFzdXJlQ291bnQgPSBNYXRoLmZsb29yKChlbmRUaW1lLTEpL21lYXN1cmVMZW5ndGgpICsgMTtcclxuICAgIGlmIChtZWFzdXJlQ291bnQ8MSkgcmV0dXJuIDE7XHJcbiAgICByZXR1cm4gbWVhc3VyZUNvdW50O1xyXG4gIH07XHJcblxyXG4gIHZhciBnZXRNdXRlZFN0YXRlID0gZnVuY3Rpb24oZmlsZSkge1xyXG4gICAgdmFyIHNvbWVTb2xvID0gZmlsZS50cmFja3Muc29tZShmdW5jdGlvbih0KSB7cmV0dXJuIHQuc29sbzsgfSk7XHJcbiAgICByZXR1cm4gZmlsZS50cmFja3MubWFwKGZ1bmN0aW9uKHQpIHtcclxuICAgICAgaWYgKHNvbWVTb2xvKSB7XHJcbiAgICAgICAgcmV0dXJuIHQubXV0ZWQgfHwgIXQuc29sbztcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICByZXR1cm4gdC5tdXRlZCB8fCAhdC5pbnN0cnVtZW50O1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuICB9O1xyXG5cclxuICB2YXIgY29uY2F0ID0gZnVuY3Rpb24oYSwgYikge1xyXG4gICAgcmV0dXJuIGEuY29uY2F0KGIpO1xyXG4gIH07XHJcblxyXG4gIHZhciBfbm90ID0gZnVuY3Rpb24oc2VsZikge1xyXG4gICAgcmV0dXJuIGZ1bmN0aW9uKGV2dCkge1xyXG4gICAgICByZXR1cm4gZXZ0ICE9PSBzZWxmO1xyXG4gICAgfTtcclxuICB9O1xyXG5cclxuICB2YXIgZmluZENsaXBTID0gZnVuY3Rpb24ocGF0dGVybiwgdHJhY2ssIHNlbGYsIHMpIHtcclxuICAgIHZhciBuZWFyZXN0ID0gZnVuY3Rpb24oYzEsIGMyKSB7XHJcbiAgICAgIHJldHVybiBNYXRoLmFicyhzZWxmLnMgLSBjMSkgPCBNYXRoLmFicyhzZWxmLnMgLSBjMikgPyBjMSA6IGMyO1xyXG4gICAgfTtcclxuXHJcbiAgICB2YXIgYWxsRXZlbnRzID0gcGF0dGVybi50cmFja3MubWFwKGZ1bmN0aW9uKHRyYWNrKSB7XHJcbiAgICAgIHJldHVybiB0cmFjay5ldmVudHMuZmlsdGVyKF9ub3Qoc2VsZikpO1xyXG4gICAgfSkucmVkdWNlKGNvbmNhdCk7XHJcblxyXG4gICAgdmFyIGFsbE90aGVyRXZlbnRzID0gcGF0dGVybi50cmFja3MubWFwKGZ1bmN0aW9uKHRyKSB7XHJcbiAgICAgIGlmICh0cmFjayA9PT0gdHIpIHJldHVybiBbXTtcclxuICAgICAgcmV0dXJuIHRyLmV2ZW50cy5maWx0ZXIoX25vdChzZWxmKSk7XHJcbiAgICB9KS5yZWR1Y2UoY29uY2F0KTtcclxuXHJcbiAgICBpZiAoYWxsRXZlbnRzLmxlbmd0aCA9PT0gMCkgcmV0dXJuIDA7XHJcblxyXG4gICAgdmFyIGNsaXBzID0gYWxsRXZlbnRzLm1hcChmdW5jdGlvbihldnQpIHtcclxuICAgICAgcmV0dXJuIGV2dC5zICsgZXZ0Lmw7XHJcbiAgICB9KS5jb25jYXQoYWxsRXZlbnRzLm1hcChmdW5jdGlvbihldnQpIHtcclxuICAgICAgcmV0dXJuIGV2dC5zIC0gc2VsZi5sO1xyXG4gICAgfSkpLmNvbmNhdChhbGxPdGhlckV2ZW50cy5tYXAoZnVuY3Rpb24oZXZ0KSB7XHJcbiAgICAgIHJldHVybiBldnQucztcclxuICAgIH0pKTtcclxuXHJcbiAgICByZXR1cm4gY2xpcHMucmVkdWNlKG5lYXJlc3QpO1xyXG4gIH07ICAgICAgIFxyXG5cclxuICB2YXIgZmluZENsaXBMID0gZnVuY3Rpb24ocGF0dGVybiwgdHJhY2ssIHNlbGYsIHMpIHtcclxuICAgIHZhciBuZWFyZXN0ID0gZnVuY3Rpb24oYzEsIGMyKSB7XHJcbiAgICAgIHJldHVybiBNYXRoLmFicyhzZWxmLnMgKyBzZWxmLmwgLSBjMSkgPCBNYXRoLmFicyhzZWxmLnMgKyBzZWxmLmwgLSBjMikgPyBjMSA6IGMyO1xyXG4gICAgfTtcclxuXHJcbiAgICB2YXIgYWxsRXZlbnRzID0gcGF0dGVybi50cmFja3MubWFwKGZ1bmN0aW9uKHRyYWNrKSB7XHJcbiAgICAgIHJldHVybiB0cmFjay5ldmVudHMuZmlsdGVyKF9ub3Qoc2VsZikpO1xyXG4gICAgfSkucmVkdWNlKGNvbmNhdCk7XHJcblxyXG4gICAgdmFyIGFsbE90aGVyRXZlbnRzID0gcGF0dGVybi50cmFja3MubWFwKGZ1bmN0aW9uKHRyKSB7XHJcbiAgICAgIGlmICh0cmFjayA9PT0gdHIpIHJldHVybiBbXTtcclxuICAgICAgcmV0dXJuIHRyLmV2ZW50cy5maWx0ZXIoX25vdChzZWxmKSk7XHJcbiAgICB9KS5yZWR1Y2UoY29uY2F0KTtcclxuXHJcbiAgICBpZiAoYWxsRXZlbnRzLmxlbmd0aCA9PT0gMCkgcmV0dXJuIDA7XHJcbiAgICB2YXIgY2xpcHMgPSBhbGxFdmVudHMubWFwKGZ1bmN0aW9uKGV2dCkge1xyXG4gICAgICByZXR1cm4gZXZ0LnM7XHJcbiAgICB9KS5jb25jYXQoYWxsT3RoZXJFdmVudHMubWFwKGZ1bmN0aW9uKGV2dCkge1xyXG4gICAgICByZXR1cm4gZXZ0LnMgKyBldnQubDtcclxuICAgIH0pKTtcclxuXHJcbiAgICByZXR1cm4gY2xpcHMucmVkdWNlKG5lYXJlc3QpIC0gc2VsZi5zO1xyXG4gIH07XHJcblxyXG4gIHZhciBjdXRFdmVudCA9IGZ1bmN0aW9uKHBhdHRlcm4sIHRyYWNrLCBzZWxmKSB7XHJcbiAgICB2YXIgYWxsRXZlbnRzID0gdHJhY2suZXZlbnRzLmZpbHRlcihfbm90KHNlbGYpKTtcclxuXHJcbiAgICBhbGxFdmVudHMuZmlsdGVyKGZ1bmN0aW9uKGV2dCkge1xyXG4gICAgICByZXR1cm4gZXZ0LnMgPiBzZWxmLnM7XHJcbiAgICB9KS5mb3JFYWNoKGZ1bmN0aW9uKGV2dCkge1xyXG4gICAgICBpZiAoc2VsZi5zICsgc2VsZi5sID4gZXZ0LnMpIHtcclxuICAgICAgICBzZWxmLmwgPSBldnQucyAtIHNlbGYucztcclxuICAgICAgfVxyXG4gICAgfSk7XHJcblxyXG4gICAgdmFyIG1lYXN1cmVUaWNrcyA9IHBhdHRlcm4ubWVhc3VyZSAqIFRJQ0tTX1BFUl9CRUFUO1xyXG4gICAgaWYgKChzZWxmLnMgKyBzZWxmLmwpICUgbWVhc3VyZVRpY2tzIDwgc2VsZi5zICUgbWVhc3VyZVRpY2tzKSB7XHJcbiAgICAgIHNlbGYubCA9IHNlbGYubCAtIChzZWxmLnMgKyBzZWxmLmwpICUgbWVhc3VyZVRpY2tzO1xyXG4gICAgfVxyXG4gIH07XHJcblxyXG4gIHZhciBjb2xsaXNpb24gPSBmdW5jdGlvbih0cmFjaywgc2VsZikge1xyXG4gICAgdmFyIGFsbEV2ZW50cyA9IHRyYWNrLmV2ZW50cy5maWx0ZXIoX25vdChzZWxmKSk7XHJcbiAgICByZXR1cm4gYWxsRXZlbnRzLnNvbWUoZnVuY3Rpb24oZXZ0KSB7XHJcbiAgICAgIGlmIChldnQubiAhPT0gc2VsZi5uKSByZXR1cm4gZmFsc2U7XHJcbiAgICAgIGlmIChldnQucyA8PSBzZWxmLnMgJiYgc2VsZi5zIDwgZXZ0LnMgKyBldnQubCkgcmV0dXJuIHRydWU7XHJcbiAgICAgIGlmIChzZWxmLnMgPD0gZXZ0LnMgJiYgZXZ0LnMgPCBzZWxmLnMgKyBzZWxmLmwpIHJldHVybiB0cnVlO1xyXG5cclxuICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfSk7XHJcbiAgfTtcclxuXHJcbiAgcmV0dXJuIHtcclxuICAgIG5vdGVzZXE6IG5vdGVzZXEsXHJcbiAgICBwYXR0ZXJuQ29tcG9zZTogcGF0dGVybkNvbXBvc2UsXHJcbiAgICBjb21wdXRlTWVhc3VyZUNvdW50OiBjb21wdXRlTWVhc3VyZUNvdW50LFxyXG4gICAgZ2V0TXV0ZWRTdGF0ZTogZ2V0TXV0ZWRTdGF0ZSxcclxuICAgIGZpbmRDbGlwTDogZmluZENsaXBMLFxyXG4gICAgZmluZENsaXBTOiBmaW5kQ2xpcFMsXHJcbiAgICBjdXRFdmVudDogY3V0RXZlbnQsXHJcbiAgICBjb2xsaXNpb246IGNvbGxpc2lvblxyXG4gIH07XHJcbn1dKTtcclxuXHJcblxyXG5tdXNpY1Nob3dDYXNlQXBwLnNlcnZpY2UoXCJJbnN0cnVtZW50U2V0XCIsIFtcIkZpbGVSZXBvc2l0b3J5XCIsIFwiTXVzaWNPYmplY3RGYWN0b3J5XCIsIFwiTXVzaWNDb250ZXh0XCIsIGZ1bmN0aW9uKEZpbGVSZXBvc2l0b3J5LCBNdXNpY09iamVjdEZhY3RvcnksIE11c2ljQ29udGV4dCkge1xyXG4gIHZhciByZXQgPSBmdW5jdGlvbihtdXNpYykge1xyXG4gICAgdmFyIG11c2ljT2JqZWN0RmFjdG9yeTtcclxuICAgIHZhciB0cmFja0NvbnRyb2wgPSB7fTtcclxuXHJcbiAgICB2YXIgc2V0ID0ge307XHJcbiAgICB2YXIgY3JlYXRlZCA9IFtdO1xyXG4gICAgdmFyIGxvYWQgPSBmdW5jdGlvbihpZCwgdHJhY2tObykge1xyXG4gICAgICB0cmFja05vID0gdHJhY2tObyB8fCAwO1xyXG4gICAgICB2YXIgX2lkID0gaWQgKyBcIl9cIiArIHRyYWNrTm87XHJcbiAgICAgIGlmICghc2V0W19pZF0pIHtcclxuICAgICAgICB0cmFja0NvbnRyb2xbdHJhY2tOb10gPSB0cmFja0NvbnRyb2xbdHJhY2tOb10gfHwgbXVzaWMuZ2FpbigxLjApO1xyXG5cclxuICAgICAgICBzZXRbX2lkXSA9IEZpbGVSZXBvc2l0b3J5LmdldEZpbGUoaWQpXHJcbiAgICAgICAgICAudGhlbihmdW5jdGlvbihmaWxlKSB7XHJcbiAgICAgICAgICAgIGlmIChmaWxlLmluZGV4LnR5cGUgPT09ICdpbnN0cnVtZW50Jykge1xyXG4gICAgICAgICAgICAgIGlmICghbXVzaWNPYmplY3RGYWN0b3J5KSBtdXNpY09iamVjdEZhY3RvcnkgPSBNdXNpY09iamVjdEZhY3RvcnkoKTtcclxuICAgICAgICAgICAgICByZXR1cm4gbXVzaWNPYmplY3RGYWN0b3J5LmNyZWF0ZShmaWxlLmNvbnRlbnRzLCB0cmFja0NvbnRyb2xbdHJhY2tOb10pXHJcbiAgICAgICAgICAgICAgICAudGhlbihmdW5jdGlvbihvYmope1xyXG4gICAgICAgICAgICAgICAgICBjcmVhdGVkLnB1c2gob2JqKTtcclxuICAgICAgICAgICAgICAgICAgcmV0dXJuIG9iajtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICByZXR1cm4ge3RlbXBvOiB0cnVlfTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfSk7XHJcbiAgICAgIH0gXHJcblxyXG4gICAgICByZXR1cm4gc2V0W19pZF07XHJcbiAgICB9O1xyXG5cclxuICAgIHZhciBkaXNwb3NlID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgIGNyZWF0ZWQuZm9yRWFjaChmdW5jdGlvbihpbnN0cnVtZW50KXtcclxuICAgICAgICBpZiAoaW5zdHJ1bWVudC5kaXNwb3NlKSB7XHJcbiAgICAgICAgICBpbnN0cnVtZW50LmRpc3Bvc2UoKTtcclxuICAgICAgICB9XHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgaWYgKG11c2ljT2JqZWN0RmFjdG9yeSkge1xyXG4gICAgICAgIHJldHVybiBtdXNpY09iamVjdEZhY3RvcnkuZGVzdHJveUFsbCgpO1xyXG4gICAgICB9XHJcbiAgICB9O1xyXG5cclxuICAgIHZhciBtdXRlID0gZnVuY3Rpb24odHJhY2tObywgbXV0ZVN0YXRlKSB7XHJcbiAgICAgIHRyYWNrQ29udHJvbFt0cmFja05vXSA9IHRyYWNrQ29udHJvbFt0cmFja05vXSB8fCBtdXNpYy5nYWluKDEuMCk7XHJcbiAgICAgIHRyYWNrQ29udHJvbFt0cmFja05vXS51cGRhdGUobXV0ZVN0YXRlID8gMC4wIDogMS4wKTtcclxuICAgIH07XHJcblxyXG4gICAgcmV0dXJuIHtcclxuICAgICAgbG9hZDogbG9hZCxcclxuICAgICAgbXV0ZTogbXV0ZSxcclxuICAgICAgYWxsOiBzZXQsXHJcbiAgICAgIGRpc3Bvc2U6IGRpc3Bvc2VcclxuICAgIH07XHJcbiAgfTtcclxuXHJcbiAgcmV0dXJuIGZ1bmN0aW9uKG11c2ljKSB7XHJcbiAgICBpZiAobXVzaWMpIHJldHVybiByZXQobXVzaWMpO1xyXG4gICAgcmV0dXJuIE11c2ljQ29udGV4dC5ydW5GY24ocmV0KTtcclxuICB9O1xyXG59XSk7XHJcblxyXG5tdXNpY1Nob3dDYXNlQXBwLnNlcnZpY2UoXCJGaWxlUmVwb3NpdG9yeVwiLCBbXCIkaHR0cFwiLCBcIiRxXCIsIFwiVHlwZVNlcnZpY2VcIiwgXCJIaXN0b3JpYWxcIiwgXCJJbmRleFwiLCBcIl9sb2NhbGZvcmFnZVwiLCBmdW5jdGlvbigkaHR0cCwgJHEsIFR5cGVTZXJ2aWNlLCBIaXN0b3JpYWwsIEluZGV4LCBsb2NhbGZvcmFnZSkge1xyXG4gIHZhciBjcmVhdGVkRmlsZXNJbmRleCA9IFtdO1xyXG4gIHZhciBjcmVhdGVkRmlsZXMgPSB7fTtcclxuXHJcbiAgdmFyIGJ1aWx0SW5zID0gW1xyXG4gICAgXCJzaXRlL2J1aWx0aW4vZGVmYXVsdFByb2plY3QuanNvblwiLFxyXG4gICAgXCJzaXRlL2J1aWx0aW4vc2FtcGxlcy5qc29uXCIsXHJcbiAgICBcInNpdGUvYnVpbHRpbi9zbWItdW5kZXJ3b3JsZC5qc29uXCIsXHJcbiAgICBcInNpdGUvYnVpbHRpbi9zbWItb3ZlcndvcmxkLmpzb25cIixcclxuICAgIFwic2l0ZS9idWlsdGluL2JvbWJlcm1hbi5qc29uXCIsXHJcbiAgICBcInNpdGUvYnVpbHRpbi9lbnRlcnRhaW5lci5qc29uXCIsXHJcbiAgICBcInNpdGUvYnVpbHRpbi9ldmEtdGhhbmF0b3MuanNvblwiLFxyXG4gICAgXCJzaXRlL2J1aWx0aW4vYmlvc2hvY2stc29sYWNlLmpzb25cIlxyXG4gIF07XHJcblxyXG4gIHZhciBsb2FkQnVpbHRJbiA9IGZ1bmN0aW9uKHVyaSkge1xyXG4gICAgcmV0dXJuICRodHRwLmdldCh1cmkpXHJcbiAgICAgIC50aGVuKGZ1bmN0aW9uKHIpIHtcclxuICAgICAgICByLmRhdGEuZm9yRWFjaChmdW5jdGlvbihvYmopIHtcclxuICAgICAgICAgIHZhciBvYmplY3RJZCA9IG9iai5pZDtcclxuXHJcbiAgICAgICAgICBjcmVhdGVkRmlsZXNbb2JqZWN0SWRdID0gb2JqLmNvbnRlbnRzO1xyXG5cclxuICAgICAgICAgIGNyZWF0ZWRGaWxlc0luZGV4LnB1c2goe1xyXG4gICAgICAgICAgICBwcm9qZWN0OiBvYmoucHJvamVjdCxcclxuICAgICAgICAgICAgdHlwZTogb2JqLnR5cGUsXHJcbiAgICAgICAgICAgIG5hbWU6IG9iai5uYW1lLFxyXG4gICAgICAgICAgICBpZDogb2JqZWN0SWQsXHJcbiAgICAgICAgICAgIHJlZjogb2JqLnJlZixcclxuICAgICAgICAgICAgYnVpbHRJbjogdHJ1ZVxyXG4gICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH0pO1xyXG4gIH07XHJcblxyXG4gIHZhciBjcmVhdGVEZWZhdWx0ID0gZnVuY3Rpb24oaWQsIHR5cGUsIG5hbWUsIGNvbnRlbnQpIHtcclxuICAgIGNyZWF0ZWRGaWxlc0luZGV4LnB1c2goe1xyXG4gICAgICBwcm9qZWN0OiBcImRlZmF1bHRcIixcclxuICAgICAgdHlwZTogdHlwZSxcclxuICAgICAgaWQ6IGlkLFxyXG4gICAgICBuYW1lOiBuYW1lLFxyXG4gICAgICBub0V4cG9ydGFibGU6IHRydWVcclxuICAgIH0pO1xyXG5cclxuICAgIGNyZWF0ZWRGaWxlc1tpZF0gPSBjb250ZW50O1xyXG4gIH07XHJcblxyXG4gIGNyZWF0ZURlZmF1bHQoJ3RlbXBvJywgJ3RlbXBvJywgJ1RlbXBvJywge30pXHJcblxyXG4gIHZhciBidWlsdEluTG9hZGVkID0gJHEuYWxsKGJ1aWx0SW5zLm1hcChsb2FkQnVpbHRJbikpO1xyXG5cclxuICB2YXIgY3JlYXRlSWQgPSBmdW5jdGlvbigpIHtcclxuICAgIHZhciBhcnJheSA9IFtdO1xyXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCAzMjsgaSsrKSB7XHJcbiAgICAgIHZhciB2YWx1ZSA9IFswLDEsMiwzLDQsNSw2LDcsOCw5LCdhJywnYicsJ2MnLCdkJywnZScsJ2YnXVtNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkqMTYpXTtcclxuICAgICAgYXJyYXkucHVzaCh2YWx1ZSk7XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIGFycmF5LmpvaW4oXCJcIik7XHJcbiAgfTtcclxuXHJcbiAgdmFyIGdlbmVyaWNTdGF0ZUVtbWl0ZXIgPSBuZXcgRXZlbnRFbWl0dGVyKCk7XHJcbiAgdmFyIHJlY3ljbGVkRW1taXRlciA9IG5ldyBFdmVudEVtaXR0ZXIoKTtcclxuXHJcbiAgdmFyIGRlZmF1bHRGaWxlID0ge1xyXG4gICAgaW5zdHJ1bWVudDoge1xyXG4gICAgICB0eXBlOiBcInN0YWNrXCIsXHJcbiAgICAgIGRhdGE6IHtcclxuICAgICAgICBhcnJheTogW11cclxuICAgICAgfVxyXG4gICAgfSxcclxuICAgIHNvbmc6IHtcclxuICAgICAgbWVhc3VyZTogNCxcclxuICAgICAgYnBtOiAxNDAsXHJcbiAgICAgIHRyYWNrczogW1xyXG4gICAgICAgIHtibG9ja3M6IFt7fSx7fSx7fV19LFxyXG4gICAgICAgIHtibG9ja3M6IFt7fSx7fSx7fV19XHJcbiAgICAgIF1cclxuICAgIH0sXHJcbiAgICBwYXR0ZXJuOiB7XHJcbiAgICAgIG1lYXN1cmU6IDQsXHJcbiAgICAgIG1lYXN1cmVDb3VudDogMSxcclxuICAgICAgYnBtOiAxNDAsXHJcbiAgICAgIHNlbGVjdGVkVHJhY2s6IDAsXHJcbiAgICAgIHRyYWNrczpbXHJcbiAgICAgICAge3Njcm9sbDogMTAwMCwgZXZlbnRzOiBbXX1cclxuICAgICAgXSxcclxuICAgICAgc2Nyb2xsTGVmdDogMFxyXG4gICAgfVxyXG4gIH07XHJcblxyXG4gIHZhciBoaXN0ID0gbmV3IFdlYWtNYXAoKTtcclxuXHJcbiAgdmFyIHVwZGF0ZUZpbGUgPSBmdW5jdGlvbihpZCwgY29udGVudHMsIG9wdGlvbnMpIHtcclxuICAgIHJldHVybiAkcS53aGVuKClcclxuICAgICAgLnRoZW4oZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgdmFyIGxvY2FsRmlsZSA9IGNyZWF0ZWRGaWxlc0luZGV4LmZpbHRlcihmdW5jdGlvbih4KSB7cmV0dXJuIHguaWQgPT09IGlkOyB9KVswXTtcclxuICAgICAgICBpZiAobG9jYWxGaWxlKSByZXR1cm4gbG9jYWxGaWxlO1xyXG5cclxuICAgICAgICByZXR1cm4gc3RvcmFnZUluZGV4LmdldEVudHJ5KGlkKTtcclxuICAgICAgfSlcclxuICAgICAgLnRoZW4oZnVuY3Rpb24obG9jYWxGaWxlKSB7XHJcbiAgICAgICAgaWYgKGxvY2FsRmlsZSkge1xyXG4gICAgICAgICAgdmFyIHNlcmlhbGl6ZWQgPSBNVVNJQy5Gb3JtYXRzLk11bHRpU2VyaWFsaXplci5zZXJpYWxpemUobG9jYWxGaWxlLnR5cGUsIGNvbnRlbnRzKTtcclxuXHJcbiAgICAgICAgICBpZiAoIW9wdGlvbnMgfHwgIW9wdGlvbnMubm9IaXN0b3J5KSB7XHJcbiAgICAgICAgICAgIGhpc3RbaWRdID0gaGlzdFtpZF0gfHwgSGlzdG9yaWFsKCk7XHJcbiAgICAgICAgICAgIGhpc3RbaWRdLnJlZ2lzdGVyVmVyc2lvbihKU09OLnN0cmluZ2lmeShjb250ZW50cykpO1xyXG4gICAgICAgICAgfVxyXG5cclxuICAgICAgICAgIHJldHVybiBsb2NhbGZvcmFnZS5zZXRJdGVtKGlkLCBzZXJpYWxpemVkKTtcclxuICAgICAgICB9XHJcbiAgICAgIH0pXHJcbiAgICAgIC50aGVuKGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIHJldHVybiByZWN5Y2xlSW5kZXgucmVsb2FkKCk7XHJcbiAgICAgIH0pXHJcbiAgICAgIC50aGVuKGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIHJlY3ljbGVkRW1taXRlci5lbWl0KFwiY2hhbmdlZFwiKTtcclxuICAgICAgfSk7XHJcbiAgfTtcclxuXHJcbiAgdmFyIGRlc3Ryb3lGaWxlID0gZnVuY3Rpb24oaWQpIHtcclxuICAgIHJldHVybiBsb2NhbGZvcmFnZS5yZW1vdmVJdGVtKGlkKVxyXG4gICAgICAudGhlbihmdW5jdGlvbigpIHtcclxuICAgICAgICByZXR1cm4gJHEuYWxsKHtyOiByZWN5Y2xlSW5kZXgucmVtb3ZlRW50cnkoaWQpLCBsOiBzdG9yYWdlSW5kZXgucmVtb3ZlRW50cnkoaWQpfSk7XHJcbiAgICAgIH0pXHJcbiAgfTtcclxuXHJcbiAgdmFyIHB1cmdlRnJvbVJlY3ljbGVCaW4gPSBmdW5jdGlvbihpZCkge1xyXG4gICAgcmV0dXJuIHJlY3ljbGVJbmRleC5yZW1vdmVFbnRyeShpZCk7XHJcbiAgfTtcclxuXHJcbiAgdmFyIHJlc3RvcmVGcm9tUmVjeWNsZUJpbiA9IGZ1bmN0aW9uKGlkKSB7XHJcbiAgICByZXR1cm4gX3Jlc3RvcmVGcm9tUmVjeWNsZUJpbihpZClcclxuICAgICAgLnRoZW4oZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgZ2VuZXJpY1N0YXRlRW1taXRlci5lbWl0KFwiY2hhbmdlZFwiKTtcclxuICAgICAgICByZWN5Y2xlZEVtbWl0ZXIuZW1pdChcImNoYW5nZWRcIik7XHJcbiAgICAgIH0pO1xyXG4gIH07XHJcblxyXG4gIHZhciBfcmVzdG9yZUZyb21SZWN5Y2xlQmluID0gZnVuY3Rpb24oaWQpIHtcclxuICAgIHJldHVybiByZWN5Y2xlSW5kZXguZ2V0RW50cnkoaWQpXHJcbiAgICAgIC50aGVuKGZ1bmN0aW9uKGxvY2FsRmlsZSkge1xyXG4gICAgICAgIGlmIChsb2NhbEZpbGUpIHtcclxuICAgICAgICAgIHJldHVybiByZWN5Y2xlSW5kZXgucmVtb3ZlRW50cnkoaWQpXHJcbiAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgIHJldHVybiBzdG9yYWdlSW5kZXguY3JlYXRlRW50cnkobG9jYWxGaWxlKTtcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgdmFyIHJlZnMgPSAobG9jYWxGaWxlLnJlZnx8W10pXHJcbiAgICAgICAgICAgICAgaWYgKGxvY2FsRmlsZS5wcm9qZWN0KSByZWZzLnB1c2gobG9jYWxGaWxlLnByb2plY3QpO1xyXG5cclxuICAgICAgICAgICAgICByZXR1cm4gJHEuYWxsKHJlZnMubWFwKF9yZXN0b3JlRnJvbVJlY3ljbGVCaW4pKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9KTtcclxuICB9O1xyXG5cclxuICB2YXIgbW92ZVRvUmVjeWNsZUJpbiA9IGZ1bmN0aW9uKGlkKSB7XHJcbiAgICByZXR1cm4gX21vdmVUb1JlY3ljbGVCaW4oaWQpXHJcbiAgICAgIC50aGVuKGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIGdlbmVyaWNTdGF0ZUVtbWl0ZXIuZW1pdChcImNoYW5nZWRcIik7XHJcbiAgICAgICAgcmVjeWNsZWRFbW1pdGVyLmVtaXQoXCJjaGFuZ2VkXCIpO1xyXG4gICAgICB9KVxyXG4gIH07XHJcblxyXG4gIHZhciBfbW92ZVRvUmVjeWNsZUJpbiA9IGZ1bmN0aW9uKGlkKSB7XHJcbiAgICB2YXIgZ2V0SWQgPSBmdW5jdGlvbih4KXsgcmV0dXJuIHguaWQ7IH07XHJcbiAgICB2YXIgaXNQcm9qZWN0VHlwZSA9IGZ1bmN0aW9uKGZpbGUpIHtcclxuICAgICAgcmV0dXJuIGZpbGUudHlwZSA9PT0gJ3Byb2plY3QnO1xyXG4gICAgfTtcclxuXHJcbiAgICByZXR1cm4gc3RvcmFnZUluZGV4LndpbGxSZW1vdmUoaWQpXHJcbiAgICAgIC50aGVuKGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIHJldHVybiBzdG9yYWdlSW5kZXguZ2V0RW50cnkoaWQpXHJcbiAgICAgICAgICAudGhlbihmdW5jdGlvbihsb2NhbEZpbGUpIHtcclxuICAgICAgICAgICAgaWYgKGxvY2FsRmlsZSkge1xyXG4gICAgICAgICAgICAgIHJldHVybiByZWN5Y2xlSW5kZXguZ2V0QWxsKClcclxuICAgICAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uKGlkeCkge1xyXG4gICAgICAgICAgICAgICAgICBpZiAoaWR4ICYmIGlkeC5sZW5ndGggPj0gMTAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlY3ljbGVJbmRleC5nZXRGcmVlSXRlbXMoKVxyXG4gICAgICAgICAgICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24oaWR4KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghaWR4WzBdKSByZXR1cm47XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVjeWNsZUluZGV4LnJlbW92ZUVudHJ5KGlkeFswXS5pZClcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAudGhlbihmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBsb2NhbGZvcmFnZS5yZW1vdmVJdGVtKGlkKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICAgIHJldHVybiBzdG9yYWdlSW5kZXgucmVtb3ZlRW50cnkoaWQpO1xyXG4gICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgICByZXR1cm4gcmVjeWNsZUluZGV4LmNyZWF0ZUVudHJ5KGxvY2FsRmlsZSk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfSk7XHJcbiAgICAgIH0pXHJcbiAgICAgIC50aGVuKGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIHJldHVybiBzdG9yYWdlSW5kZXguZ2V0T3JwaGFuKFxyXG4gICAgICAgICAgY3JlYXRlZEZpbGVzSW5kZXgubWFwKGdldElkKSxcclxuICAgICAgICAgIGNyZWF0ZWRGaWxlc0luZGV4LmZpbHRlcihpc1Byb2plY3RUeXBlKS5tYXAoZ2V0SWQpKTtcclxuICAgICAgfSlcclxuICAgICAgLnRoZW4oZnVuY3Rpb24ob3JwaGFuRmlsZXMpIHtcclxuICAgICAgICByZXR1cm4gJHEuYWxsKG9ycGhhbkZpbGVzLm1hcChnZXRJZCkubWFwKF9tb3ZlVG9SZWN5Y2xlQmluKSlcclxuICAgICAgICAgIC5jYXRjaChmdW5jdGlvbihlKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoZSk7XHJcbiAgICAgICAgICB9KTtcclxuICAgICAgfSk7XHJcbiAgfTtcclxuXHJcbiAgdmFyIGdldFBhdHRlcm5Tb25ncyA9IGZ1bmN0aW9uKG9wdGlvbnMpIHtcclxuICAgIHZhciBieVByb2plY3QgPSBmdW5jdGlvbihmaWxlKSB7XHJcbiAgICAgIHJldHVybiBmaWxlLnByb2plY3QgPT09IG9wdGlvbnMucHJvamVjdDtcclxuICAgIH07XHJcblxyXG4gICAgdmFyIGJ5VHlwZSA9IGZ1bmN0aW9uKGZpbGUpIHtcclxuICAgICAgcmV0dXJuIGZpbGUudHlwZSA9PT0gJ3BhdHRlcm4nIHx8IGZpbGUudHlwZSA9PT0gJ3NvbmcnO1xyXG4gICAgfTtcclxuXHJcbiAgICB2YXIgdHlwZVNvbmcgPSBmdW5jdGlvbihmaWxlKSB7XHJcbiAgICAgIHJldHVybiBmaWxlLnR5cGUgPT09ICdzb25nJztcclxuICAgIH07XHJcblxyXG4gICAgdmFyIGxvYWRGaWxlID0gZnVuY3Rpb24oZmlsZSkge1xyXG4gICAgICByZXR1cm4gZ2V0RmlsZShmaWxlLmlkKTtcclxuICAgIH07XHJcblxyXG4gICAgcmV0dXJuICRxLmFsbCh7XHJcbiAgICAgICAgc3RvcmFnZTogc3RvcmFnZUluZGV4LmdldEFsbCgpLFxyXG4gICAgICAgIGJ1aWx0aW46IGNyZWF0ZWRGaWxlc0luZGV4XHJcbiAgICAgIH0pLnRoZW4oZnVuY3Rpb24ocmVzdWx0KSB7XHJcbiAgICAgICAgdmFyIGZpbGVzID0gcmVzdWx0LnN0b3JhZ2UuY29uY2F0KHJlc3VsdC5idWlsdGluKTtcclxuICAgICAgICB2YXIgZmlsZUluZGV4ZXMgPSBmaWxlcy5maWx0ZXIoYnlQcm9qZWN0KS5maWx0ZXIoYnlUeXBlKTtcclxuXHJcbiAgICAgICAgaWYgKGZpbGVJbmRleGVzLnNvbWUodHlwZVNvbmcpKSB7XHJcbiAgICAgICAgICBmaWxlSW5kZXhlcyA9IGZpbGVJbmRleGVzLmZpbHRlcih0eXBlU29uZyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gJHEuYWxsKGZpbGVJbmRleGVzLm1hcChsb2FkRmlsZSkpO1xyXG4gICAgICB9KTtcclxuICB9O1xyXG5cclxuICB2YXIgbW9kZSA9IGZ1bmN0aW9uKGZpbGVzLCBmY24pIHtcclxuICAgIHZhciBvYmogPSB7fTtcclxuICAgIGZpbGVzLmZvckVhY2goZnVuY3Rpb24oZmlsZSkge1xyXG4gICAgICB2YXIgdmFsdWUgPSBmY24oZmlsZSk7XHJcbiAgICAgIG9ialt2YWx1ZV0gPSAob2JqW3ZhbHVlXSB8fCAwKSArIDE7XHJcbiAgICB9KTtcclxuXHJcbiAgICB2YXIgbWF4Y291bnQgPSAwO1xyXG4gICAgdmFyIF9tO1xyXG4gICAgZm9yICh2YXIgayBpbiBvYmopIHtcclxuICAgICAgdmFyIGNvdW50ID0gb2JqW2tdO1xyXG4gICAgICBpZiAoY291bnQgPiBtYXhjb3VudCkge1xyXG4gICAgICAgIF9tID0gaztcclxuICAgICAgICBtYXhjb3VudCA9IGNvdW50O1xyXG4gICAgICB9XHJcbiAgICB9O1xyXG5cclxuICAgIHJldHVybiBfbTtcclxuICB9O1xyXG5cclxuICB2YXIgZ2V0RGVmYXVsdE1lYXN1cmUgPSBmdW5jdGlvbihvcHRpb25zKSB7XHJcbiAgICByZXR1cm4gZ2V0UGF0dGVyblNvbmdzKG9wdGlvbnMpXHJcbiAgICAgIC50aGVuKGZ1bmN0aW9uKGZpbGVzKSB7XHJcbiAgICAgICAgaWYgKCFmaWxlcy5sZW5ndGgpIHJldHVybiA0O1xyXG5cclxuICAgICAgICByZXR1cm4gbW9kZShmaWxlcywgZnVuY3Rpb24oZmlsZSkge1xyXG4gICAgICAgICAgcmV0dXJuIGZpbGUuY29udGVudHMubWVhc3VyZTtcclxuICAgICAgICB9KTtcclxuICAgICAgfSk7XHJcbiAgfTtcclxuXHJcbiAgdmFyIGdldERlZmF1bHRCUE0gPSBmdW5jdGlvbihvcHRpb25zKSB7XHJcbiAgICByZXR1cm4gZ2V0UGF0dGVyblNvbmdzKG9wdGlvbnMpXHJcbiAgICAgIC50aGVuKGZ1bmN0aW9uKGZpbGVzKSB7XHJcbiAgICAgICAgaWYgKCFmaWxlcy5sZW5ndGgpIHJldHVybiAxNDA7XHJcblxyXG4gICAgICAgIHJldHVybiBtb2RlKGZpbGVzLCBmdW5jdGlvbihmaWxlKSB7XHJcbiAgICAgICAgICByZXR1cm4gZmlsZS5jb250ZW50cy5icG07XHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH0pO1xyXG4gIH07XHJcblxyXG4gIHZhciBnZXRGaWxlID0gZnVuY3Rpb24oaWQpIHtcclxuICAgICAgdmFyIGJ1aWx0SW4gPSBmYWxzZTtcclxuICAgICAgdmFyIGNoYW5nZWQgPSBmYWxzZTtcclxuICAgICAgcmV0dXJuIGJ1aWx0SW5Mb2FkZWRcclxuICAgICAgICAudGhlbihmdW5jdGlvbigpIHtcclxuICAgICAgICAgIHZhciBsb2NhbEZpbGUgPSBjcmVhdGVkRmlsZXNJbmRleC5maWx0ZXIoZnVuY3Rpb24oeCkge3JldHVybiB4LmlkID09PSBpZDsgfSlbMF07XHJcbiAgICAgICAgICBpZiAobG9jYWxGaWxlKSB7XHJcbiAgICAgICAgICAgIGJ1aWx0SW4gPSB0cnVlO1xyXG4gICAgICAgICAgICByZXR1cm4gbG9jYWxGaWxlO1xyXG4gICAgICAgICAgfVxyXG5cclxuICAgICAgICAgIHJldHVybiBzdG9yYWdlSW5kZXguZ2V0RW50cnkoaWQpO1xyXG4gICAgICAgIH0pXHJcbiAgICAgICAgLnRoZW4oZnVuY3Rpb24obG9jYWxGaWxlKSB7XHJcbiAgICAgICAgICByZXR1cm4gbG9jYWxmb3JhZ2UuZ2V0SXRlbShpZClcclxuICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24oc2VyaWFsaXplZCkge1xyXG4gICAgICAgICAgICAgIGlmIChzZXJpYWxpemVkKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgY29udGVudHMgPSBNVVNJQy5Gb3JtYXRzLk11bHRpU2VyaWFsaXplci5kZXNlcmlhbGl6ZShsb2NhbEZpbGUudHlwZSwgc2VyaWFsaXplZCk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICAgICAgICBpbmRleDoge1xyXG4gICAgICAgICAgICAgICAgICAgIG5hbWU6IGxvY2FsRmlsZS5uYW1lLFxyXG4gICAgICAgICAgICAgICAgICAgIGlkOiBsb2NhbEZpbGUuaWQsXHJcbiAgICAgICAgICAgICAgICAgICAgYnVpbHRJbjogYnVpbHRJbixcclxuICAgICAgICAgICAgICAgICAgICB0eXBlOiBsb2NhbEZpbGUudHlwZSxcclxuICAgICAgICAgICAgICAgICAgICByZWY6IGxvY2FsRmlsZS5yZWZ8fGdldFJlZnMobG9jYWxGaWxlLnR5cGUsIGNvbnRlbnRzKSxcclxuICAgICAgICAgICAgICAgICAgICB1cGRhdGVkOiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgICAgIHByb2plY3Q6IGxvY2FsRmlsZS5wcm9qZWN0XHJcbiAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgIGNvbnRlbnRzOiBjb250ZW50c1xyXG4gICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgaWYgKGxvY2FsRmlsZSkge1xyXG4gICAgICAgICAgICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGluZGV4OiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICBuYW1lOiBsb2NhbEZpbGUubmFtZSxcclxuICAgICAgICAgICAgICAgICAgICAgIGlkOiBsb2NhbEZpbGUuaWQsXHJcbiAgICAgICAgICAgICAgICAgICAgICBidWlsdEluOiBidWlsdEluLFxyXG4gICAgICAgICAgICAgICAgICAgICAgdHlwZTogbG9jYWxGaWxlLnR5cGUsXHJcbiAgICAgICAgICAgICAgICAgICAgICByZWY6IGxvY2FsRmlsZS5yZWYsXHJcbiAgICAgICAgICAgICAgICAgICAgICBwcm9qZWN0OiBsb2NhbEZpbGUucHJvamVjdCxcclxuICAgICAgICAgICAgICAgICAgICAgIG5vRXhwb3J0YWJsZTogbG9jYWxGaWxlLm5vRXhwb3J0YWJsZVxyXG4gICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgY29udGVudHM6IEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkoY3JlYXRlZEZpbGVzW2lkXSkpXHJcbiAgICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9OyAgXHJcblxyXG4gIHZhciBjcmVhdGVGaWxlID0gZnVuY3Rpb24ob3B0aW9ucykge1xyXG4gICAgdmFyIG5ld2lkID0gb3B0aW9ucy5pZCB8fCBjcmVhdGVJZCgpO1xyXG5cclxuICAgIHZhciBjb250ZW50cyA9IG9wdGlvbnMuY29udGVudHMgfHwgZGVmYXVsdEZpbGVbb3B0aW9ucy50eXBlXSB8fCB7fTtcclxuXHJcbiAgICByZXR1cm4gJHEuYWxsKHtcclxuICAgICAgZGVmYXVsdE1lYXN1cmU6IGdldERlZmF1bHRNZWFzdXJlKG9wdGlvbnMpLFxyXG4gICAgICBkZWZhdWx0QlBNOiBnZXREZWZhdWx0QlBNKG9wdGlvbnMpXHJcbiAgICB9KS50aGVuKGZ1bmN0aW9uKHZhbHVlKSB7XHJcbiAgICAgIGNvbnRlbnRzLm1lYXN1cmUgPSBwYXJzZUludCh2YWx1ZS5kZWZhdWx0TWVhc3VyZSk7XHJcbiAgICAgIGNvbnRlbnRzLmJwbSA9IHBhcnNlSW50KHZhbHVlLmRlZmF1bHRCUE0pO1xyXG4gICAgfSkudGhlbihmdW5jdGlvbigpIHtcclxuICAgICAgaGlzdFtuZXdpZF0gPSBoaXN0W25ld2lkXSB8fCBIaXN0b3JpYWwoKTtcclxuICAgICAgaGlzdFtuZXdpZF0ucmVnaXN0ZXJWZXJzaW9uKEpTT04uc3RyaW5naWZ5KGNvbnRlbnRzKSk7XHJcblxyXG4gICAgICB2YXIgc2VyaWFsaXplZCA9IE1VU0lDLkZvcm1hdHMuTXVsdGlTZXJpYWxpemVyLnNlcmlhbGl6ZShvcHRpb25zLnR5cGUsIGNvbnRlbnRzKTtcclxuICAgICAgcmV0dXJuIGxvY2FsZm9yYWdlLnNldEl0ZW0obmV3aWQsIHNlcmlhbGl6ZWQpXHJcbiAgICB9KS50aGVuKGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIHJldHVybiBzdG9yYWdlSW5kZXguY3JlYXRlRW50cnkoe1xyXG4gICAgICAgICAgdHlwZTogb3B0aW9ucy50eXBlLFxyXG4gICAgICAgICAgbmFtZTogb3B0aW9ucy5uYW1lLFxyXG4gICAgICAgICAgcHJvamVjdDogb3B0aW9ucy5wcm9qZWN0LFxyXG4gICAgICAgICAgaWQ6IG5ld2lkLFxyXG4gICAgICAgICAgcmVmOiBvcHRpb25zLnJlZlxyXG4gICAgICAgIH0pO1xyXG4gICAgfSlcclxuICAgIC50aGVuKGZ1bmN0aW9uKCkge1xyXG4gICAgICByZXR1cm4gcmVjeWNsZUluZGV4LnJlbG9hZCgpO1xyXG4gICAgfSlcclxuICAgIC50aGVuKGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIGdlbmVyaWNTdGF0ZUVtbWl0ZXIuZW1pdChcImNoYW5nZWRcIik7XHJcbiAgICAgICAgcmVjeWNsZWRFbW1pdGVyLmVtaXQoXCJjaGFuZ2VkXCIpO1xyXG4gICAgICAgIHJldHVybiBuZXdpZDtcclxuICAgIH0pXHJcbiAgICAuY2F0Y2goZnVuY3Rpb24oZXJyKSB7XHJcbiAgICAgIGRlYnVnZ2VyO1xyXG4gICAgfSk7XHJcbiAgfTtcclxuXHJcblxyXG4gIHZhciBzMCA9IE1VU0lDLkZvcm1hdHMuSlNPTlNlcmlhbGl6ZXI7XHJcbiAgdmFyIHMxID0gTVVTSUMuRm9ybWF0cy5DYWNoZWRTZXJpYWxpemVyKE1VU0lDLkZvcm1hdHMuUGFja2VkSlNPTlNlcmlhbGl6ZXIpO1xyXG4gIHZhciBzMiA9IE1VU0lDLkZvcm1hdHMuSHVmZm1hblNlcmlhbGl6ZXJXcmFwcGVyKHMwKTtcclxuICB2YXIgczMgPSBNVVNJQy5Gb3JtYXRzLkh1ZmZtYW5TZXJpYWxpemVyV3JhcHBlcihzMSk7XHJcbiAgdmFyIHM0ID0gTVVTSUMuRm9ybWF0cy5DYWNoZWRTZXJpYWxpemVyKE1VU0lDLkZvcm1hdHMuUGFja2VkSlNPTlNlcmlhbGl6ZXJCKTtcclxuICB2YXIgczUgPSBNVVNJQy5Gb3JtYXRzLkh1ZmZtYW5TZXJpYWxpemVyV3JhcHBlcihzNCk7XHJcblxyXG4gIE1VU0lDLkZvcm1hdHMuTXVsdGlTZXJpYWxpemVyLnNldFNlcmlhbGl6ZXJzKFtcclxuICAgIHtzZXJpYWxpemVyOiBzMCwgYmFzZTogJzAnfSxcclxuICAgIHtzZXJpYWxpemVyOiBzMSwgYmFzZTogJzEnfSxcclxuICAgIHtzZXJpYWxpemVyOiBzMiwgYmFzZTogJzInfSxcclxuICAgIHtzZXJpYWxpemVyOiBzMywgYmFzZTogJzMnfSxcclxuICAgIHtzZXJpYWxpemVyOiBzNCwgYmFzZTogJzQnfSxcclxuICAgIHtzZXJpYWxpemVyOiBzNSwgYmFzZTogJzUnfVxyXG4gIF0pO1xyXG5cclxuICB2YXIgc3RvcmFnZUluZGV4ID0gSW5kZXgoXCJpbmRleFwiKTtcclxuICB2YXIgcmVjeWNsZUluZGV4ID0gSW5kZXgoXCJyZWN5Y2xlXCIpO1xyXG5cclxuICByZWN5Y2xlSW5kZXguZ2V0QWxsKCkudGhlbihmdW5jdGlvbigpIHtcclxuICAgIHJlY3ljbGVkRW1taXRlci5lbWl0KFwiY2hhbmdlZFwiKTtcclxuICB9KTtcclxuXHJcbiAgdmFyIGNoYW5nZWQgPSBmdW5jdGlvbigpIHtcclxuICAgIGdlbmVyaWNTdGF0ZUVtbWl0ZXIuZW1pdChcImNoYW5nZWRcIik7XHJcbiAgICByZWN5Y2xlZEVtbWl0ZXIuZW1pdChcImNoYW5nZWRcIik7XHJcbiAgfTtcclxuXHJcbiAgdmFyIGdldFJlZnMgPSBmdW5jdGlvbih0eXBlLCBjb250ZW50cykge1xyXG4gICAgdmFyIHJlZiA9IFtdO1xyXG4gICAgaWYgKHR5cGUgPT09ICdzb25nJykge1xyXG4gICAgICBjb250ZW50cy50cmFja3MuZm9yRWFjaChmdW5jdGlvbih0cmFjaykge1xyXG4gICAgICAgIGZvciAodmFyIGk9MDtpPHRyYWNrLmJsb2Nrcy5sZW5ndGg7aSsrKSB7XHJcbiAgICAgICAgICB2YXIgYmxvY2tJZCA9IHRyYWNrLmJsb2Nrc1tpXS5pZDtcclxuICAgICAgICAgIGlmIChibG9ja0lkICYmIHJlZi5pbmRleE9mKGJsb2NrSWQpID09PSAtMSkgcmVmLnB1c2goYmxvY2tJZCk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9KTtcclxuICAgIH0gZWxzZSBpZiAodHlwZSA9PT0gJ3BhdHRlcm4nKSB7XHJcbiAgICAgIGNvbnRlbnRzLnRyYWNrcy5mb3JFYWNoKGZ1bmN0aW9uKHRyYWNrKSB7XHJcbiAgICAgICAgaWYgKHRyYWNrLmluc3RydW1lbnQgJiYgcmVmLmluZGV4T2YodHJhY2suaW5zdHJ1bWVudCkgPT09IC0xKSByZWYucHVzaCh0cmFjay5pbnN0cnVtZW50KTtcclxuICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIHJlZjtcclxuICB9O1xyXG5cclxuICB2YXIgZ2V0UHJvamVjdEZpbGVzID0gZnVuY3Rpb24ocHJvamVjdElkKSB7XHJcbiAgICByZXR1cm4gc3RvcmFnZUluZGV4LmdldEFsbCgpXHJcbiAgICAgIC50aGVuKGZ1bmN0aW9uKGlkeCkge1xyXG4gICAgICAgIHJldHVybiBpZHguY29uY2F0KGNyZWF0ZWRGaWxlc0luZGV4KS5maWx0ZXIoZnVuY3Rpb24oZmlsZSkge1xyXG4gICAgICAgICAgcmV0dXJuIGZpbGUucHJvamVjdCA9PT0gcHJvamVjdElkIHx8IGZpbGUuaWQgPT09IHByb2plY3RJZDtcclxuICAgICAgICB9KTtcclxuICAgICAgfSk7XHJcbiAgfTtcclxuXHJcbiAgcmV0dXJuIHtcclxuICAgIGdldFJlZnM6IGdldFJlZnMsXHJcbiAgICBnZXRQcm9qZWN0RmlsZXM6IGdldFByb2plY3RGaWxlcyxcclxuICAgIHVuZG86IGZ1bmN0aW9uKGlkKSB7XHJcbiAgICAgIHZhciBvbGRWZXIgPSBoaXN0W2lkXS51bmRvKCk7XHJcbiAgICAgIGlmICghb2xkVmVyKSByZXR1cm47XHJcblxyXG4gICAgICByZXR1cm4gdXBkYXRlRmlsZShpZCwgSlNPTi5wYXJzZShvbGRWZXIpLCB7bm9IaXN0b3J5OiB0cnVlfSk7XHJcbiAgICB9LFxyXG4gICAgcmVkbzogZnVuY3Rpb24oaWQpIHtcclxuICAgICAgdmFyIG5leHRWZXIgPSBoaXN0W2lkXS5yZWRvKCk7XHJcbiAgICAgIGlmICghbmV4dFZlcikgcmV0dXJuO1xyXG5cclxuICAgICAgcmV0dXJuIHVwZGF0ZUZpbGUoaWQsIEpTT04ucGFyc2UobmV4dFZlciksIHtub0hpc3Rvcnk6IHRydWV9KTtcclxuICAgIH0sXHJcbiAgICBwdXJnZUZyb21SZWN5Y2xlQmluOiBwdXJnZUZyb21SZWN5Y2xlQmluLFxyXG4gICAgbW92ZVRvUmVjeWNsZUJpbjogbW92ZVRvUmVjeWNsZUJpbixcclxuICAgIHJlc3RvcmVGcm9tUmVjeWNsZUJpbjogcmVzdG9yZUZyb21SZWN5Y2xlQmluLFxyXG4gICAgZGVzdHJveUZpbGU6IGRlc3Ryb3lGaWxlLFxyXG4gICAgY3JlYXRlRmlsZTogY3JlYXRlRmlsZSxcclxuICAgIGNoYW5nZWQ6IGNoYW5nZWQsXHJcbiAgICB1cGRhdGVJbmRleDogZnVuY3Rpb24oaWQsIGF0dHJpYnV0ZXMpIHtcclxuICAgICAgdmFyIGxvY2FsRmlsZSA9IGNyZWF0ZWRGaWxlc0luZGV4LmZpbHRlcihmdW5jdGlvbih4KSB7IHJldHVybiB4LmlkID09PSBpZDsgfSlbMF07XHJcbiAgICAgIGlmIChsb2NhbEZpbGUpIHtcclxuICAgICAgICBsb2NhbEZpbGUubmFtZSA9IGF0dHJpYnV0ZXMubmFtZTtcclxuICAgICAgICBnZW5lcmljU3RhdGVFbW1pdGVyLmVtaXQoXCJjaGFuZ2VkXCIpO1xyXG4gICAgICAgIHJldHVybiAkcS53aGVuKGxvY2FsRmlsZSk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIHJldHVybiBzdG9yYWdlSW5kZXgudXBkYXRlRW50cnkoaWQsIGF0dHJpYnV0ZXMpXHJcbiAgICAgICAgLnRoZW4oZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICBnZW5lcmljU3RhdGVFbW1pdGVyLmVtaXQoXCJjaGFuZ2VkXCIpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfSxcclxuICAgIGdldEluZGV4OiBmdW5jdGlvbihpZCkge1xyXG4gICAgICB2YXIgbG9jYWxGaWxlID0gY3JlYXRlZEZpbGVzSW5kZXguZmlsdGVyKGZ1bmN0aW9uKHgpIHsgcmV0dXJuIHguaWQgPT09IGlkOyB9KVswXTtcclxuICAgICAgaWYgKGxvY2FsRmlsZSkgcmV0dXJuICRxLndoZW4obG9jYWxGaWxlKTtcclxuXHJcbiAgICAgIHJldHVybiBzdG9yYWdlSW5kZXguZ2V0RW50cnkoaWQpO1xyXG4gICAgfSxcclxuICAgIHVwZGF0ZUZpbGU6IHVwZGF0ZUZpbGUsXHJcbiAgICBnZXRGaWxlOiBnZXRGaWxlLFxyXG4gICAgb2JzZXJ2ZVJlY3ljbGVkOiBmdW5jdGlvbihjYWxsYmFjaykge1xyXG4gICAgICByZWN5Y2xlSW5kZXgucmVsb2FkKClcclxuICAgICAgICAudGhlbihmdW5jdGlvbigpIHtcclxuICAgICAgICAgIHJlY3ljbGVkRW1taXRlci5lbWl0KFwiY2hhbmdlZFwiKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgIHJlY3ljbGVkRW1taXRlci5hZGRMaXN0ZW5lcihcImNoYW5nZWRcIiwgY2FsbGJhY2spO1xyXG5cclxuICAgICAgcmV0dXJuIHtcclxuICAgICAgICBkZXN0cm95OiBmdW5jdGlvbigpIHtcclxuICAgICAgICAgIHJlY3ljbGVkRW1taXRlci5yZW1vdmVMaXN0ZW5lcihcImNoYW5nZWRcIiwgY2FsbGJhY2spO1xyXG4gICAgICAgIH1cclxuICAgICAgfTtcclxuICAgIH0sXHJcbiAgICBzZWFyY2hSZWN5Y2xlZDogZnVuY3Rpb24oa2V5d29yZCwgb3B0aW9ucykge1xyXG4gICAgICBvcHRpb25zID0gb3B0aW9ucyB8fCB7fTtcclxuICAgICAgdmFyIGxpbWl0ID0gdHlwZW9mIG9wdGlvbnMubGltaXQgPT09ICd1bmRlZmluZWQnID8gMTAgOiBvcHRpb25zLmxpbWl0O1xyXG4gICAgICB2YXIgaGFzS2V5d29yZCA9IGZ1bmN0aW9uKCkgeyByZXR1cm4gdHJ1ZSB9O1xyXG4gICAgICBpZiAoa2V5d29yZCAmJiBrZXl3b3JkLmxlbmd0aCA+IDApIHtcclxuICAgICAgICBrZXl3b3JkID0ga2V5d29yZC50b0xvd2VyQ2FzZSgpO1xyXG4gICAgICAgIGhhc0tleXdvcmQgPSBmdW5jdGlvbih4KSB7IHJldHVybiB4Lm5hbWUudG9Mb3dlckNhc2UoKS5pbmRleE9mKGtleXdvcmQpICE9PSAtMSB9O1xyXG4gICAgICB9XHJcblxyXG4gICAgICByZXR1cm4gcmVjeWNsZUluZGV4LmdldEFsbCgpLnRoZW4oZnVuY3Rpb24oaW5kZXgpIHtcclxuICAgICAgICB2YXIgZmlsdGVyZWQgPSAoaW5kZXh8fFtdKS5maWx0ZXIoaGFzS2V5d29yZCkucmV2ZXJzZSgpO1xyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICByZXN1bHRzOiBsaW1pdCA/IGZpbHRlcmVkLnNsaWNlKDAsbGltaXQpIDogZmlsdGVyZWQsXHJcbiAgICAgICAgICB0b3RhbDogZmlsdGVyZWQubGVuZ3RoXHJcbiAgICAgICAgfTtcclxuICAgICAgfSk7XHJcbiAgICB9LFxyXG4gICAgc2VhcmNoOiBmdW5jdGlvbihrZXl3b3JkLCBvcHRpb25zKSB7XHJcbiAgICAgIG9wdGlvbnMgPSBvcHRpb25zIHx8IHt9O1xyXG5cclxuICAgICAgdmFyIGhhc0tleXdvcmQgPSBmdW5jdGlvbigpIHsgcmV0dXJuIHRydWUgfTtcclxuICAgICAgaWYgKGtleXdvcmQgJiYga2V5d29yZC5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAga2V5d29yZCA9IGtleXdvcmQudG9Mb3dlckNhc2UoKTtcclxuICAgICAgICBoYXNLZXl3b3JkID0gZnVuY3Rpb24oeCkgeyByZXR1cm4geC5uYW1lLnRvTG93ZXJDYXNlKCkuaW5kZXhPZihrZXl3b3JkKSAhPT0gLTEgfTtcclxuICAgICAgfVxyXG5cclxuICAgICAgdmFyIGJ5UHJvamVjdCA9IGZ1bmN0aW9uKCkgeyByZXR1cm4gdHJ1ZSB9O1xyXG4gICAgICBpZiAob3B0aW9ucy5wcm9qZWN0KSB7XHJcbiAgICAgICAgYnlQcm9qZWN0ID0gZnVuY3Rpb24oeCkge1xyXG4gICAgICAgICAgaWYgKG9wdGlvbnMudHlwZSkge1xyXG4gICAgICAgICAgICBpZiAob3B0aW9ucy50eXBlLmluZGV4T2YoeC50eXBlKSA9PT0gLTEpIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIHJldHVybiB4LnR5cGUgPT09ICd0ZW1wbycgfHwgb3B0aW9ucy5wcm9qZWN0LmluZGV4T2YoeC5wcm9qZWN0KSAhPT0gLTE7XHJcbiAgICAgICAgfTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICBpZiAob3B0aW9ucy50eXBlKSB7XHJcbiAgICAgICAgICBieVByb2plY3QgPSBmdW5jdGlvbih4KSB7XHJcbiAgICAgICAgICAgIGlmIChvcHRpb25zLnR5cGUuaW5kZXhPZih4LnR5cGUpID09PSAtMSkgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZVxyXG4gICAgICAgICAgfTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIHZhciBlZSA9IG5ldyBFdmVudEVtaXR0ZXIoKTtcclxuICAgICAgdmFyIHVwZGF0ZVNlYXJjaCA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIGJ1aWx0SW5Mb2FkZWRcclxuICAgICAgICAgIC50aGVuKGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAkcS5hbGwoW1xyXG4gICAgICAgICAgICAgIHN0b3JhZ2VJbmRleC5nZXRBbGwoKSxcclxuICAgICAgICAgICAgICBjcmVhdGVkRmlsZXNJbmRleCxcclxuICAgICAgICAgICAgICBUeXBlU2VydmljZS5nZXRUeXBlcyhrZXl3b3JkKVxyXG4gICAgICAgICAgICBdKS50aGVuKGZ1bmN0aW9uKHJlc3VsdCkge1xyXG4gICAgICAgICAgICAgIHZhciBub3RJblJlcyA9IGZ1bmN0aW9uKGl0ZW0pIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4vLyAgICAgICAgICAgICAgICByZXR1cm4gaWRzLmluZGV4T2YoaXRlbS5pZCkgPT09IC0xO1xyXG4gICAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICAgIHZhciByZXMgPSByZXN1bHRbMF18fFtdO1xyXG4gICAgICAgICAgICAgIHZhciBpZHMgPSByZXMubWFwKGZ1bmN0aW9uKHgpeyByZXR1cm4geC5pZDsgfSk7XHJcbiAgICAgICAgICAgICAgaWYgKHJlc3VsdFsxXSkgcmVzID0gcmVzLmNvbmNhdChyZXN1bHRbMV0uZmlsdGVyKG5vdEluUmVzKSk7XHJcbiAgICAgICAgICAgICAgcmVzID0gcmVzLmNvbmNhdChyZXN1bHRbMl0ubWFwKGNvbnZlcnRUeXBlKSk7XHJcbiAgICAgICAgICAgICAgcmVzID0gcmVzLmZpbHRlcihoYXNLZXl3b3JkKS5maWx0ZXIoYnlQcm9qZWN0KTtcclxuXHJcbiAgICAgICAgICAgICAgZWUuZW1pdChcImNoYW5nZWRcIiwge1xyXG4gICAgICAgICAgICAgICAgcmVzdWx0czogcmVzLnNsaWNlKDAsMTUpLFxyXG4gICAgICAgICAgICAgICAgdG90YWw6IHJlcy5sZW5ndGhcclxuICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICB9KTtcclxuICAgICAgfTtcclxuXHJcbiAgICAgIHJldHVybiB7XHJcbiAgICAgICAgb2JzZXJ2ZTogZnVuY3Rpb24oY2IpIHtcclxuICAgICAgICAgIGVlLmFkZExpc3RlbmVyKFwiY2hhbmdlZFwiLCBjYik7XHJcbiAgICAgICAgICBnZW5lcmljU3RhdGVFbW1pdGVyLmFkZExpc3RlbmVyKFwiY2hhbmdlZFwiLCB1cGRhdGVTZWFyY2gpO1xyXG4gICAgICAgICAgdXBkYXRlU2VhcmNoKCk7XHJcblxyXG4gICAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgY2xvc2U6IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgIGVlLnJlbW92ZUxpc3RlbmVyKFwiY2hhbmdlZFwiLCBjYik7XHJcbiAgICAgICAgICAgICAgZ2VuZXJpY1N0YXRlRW1taXRlci5yZW1vdmVMaXN0ZW5lcihcImNoYW5nZWRcIiwgdXBkYXRlU2VhcmNoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfTtcclxuICAgICAgICB9XHJcbiAgICAgIH07XHJcbiAgICB9XHJcbiAgfTtcclxufV0pO1xyXG5cclxudmFyIGNvbnZlcnRUeXBlID0gZnVuY3Rpb24odHlwZSkge1xyXG4gIHJldHVybiB7XHJcbiAgICB0eXBlOiBcImZ4XCIsXHJcbiAgICBuYW1lOiB0eXBlLm5hbWUsXHJcbiAgICBpZDogXCJ0eXBlXCIrIHR5cGUubmFtZSxcclxuICAgIHByb2plY3Q6ICdjb3JlJ1xyXG4gIH07XHJcbn07XHJcblxyXG5tdXNpY1Nob3dDYXNlQXBwLmZhY3RvcnkoXCJwcnVuZVdyYXBwZXJcIiwgZnVuY3Rpb24oKSB7XHJcbiAgcmV0dXJuIGZ1bmN0aW9uKGZjbikge1xyXG4gICAgaWYgKCFmY24uX3dyYXBwZXIpIHtcclxuICAgICAgZmNuLl93cmFwcGVyID0gZnVuY3Rpb24obXVzaWMsIG1vZFdyYXBwZXIpIHtcclxuICAgICAgICB2YXIgc2Z4QmFzZSA9IG11c2ljLnNmeEJhc2UoKTtcclxuICAgICAgICB2YXIgb2JqID0gZmNuKHNmeEJhc2UsIG1vZFdyYXBwZXIpO1xyXG4gICAgICAgIHZhciBvcmlnaW5hbERpc3Bvc2U7XHJcblxyXG4gICAgICAgIGlmIChvYmouZGlzcG9zZSkge1xyXG4gICAgICAgICAgb3JpZ2luYWxEaXNwb3NlID0gb2JqLmRpc3Bvc2UuYmluZChvYmopOyBcclxuICAgICAgICAgIG9iai5kaXNwb3NlID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgIG9yaWdpbmFsRGlzcG9zZSgpO1xyXG4gICAgICAgICAgICBzZnhCYXNlLnBydW5lKCk7XHJcbiAgICAgICAgICB9O1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICBvYmouZGlzcG9zZSA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICBzZnhCYXNlLnBydW5lKCk7XHJcbiAgICAgICAgICB9O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIG9iajtcclxuICAgICAgfTtcclxuICAgIH1cclxuICAgIHJldHVybiBmY24uX3dyYXBwZXI7XHJcbiAgfTtcclxufSk7XHJcblxyXG5tdXNpY1Nob3dDYXNlQXBwLmZhY3RvcnkoXCJzZnhCYXNlT25lRW50cnlDYWNoZVdyYXBwZXJcIiwgZnVuY3Rpb24oKSB7XHJcbiAgICByZXR1cm4gZnVuY3Rpb24oZmNuKXtcclxuICAgICAgdmFyIF9sYXN0bXVzaWM7XHJcbiAgICAgIHZhciBfbGFzdGluc3RhbmNlO1xyXG4gICAgICB2YXIgcmV0ID0gZnVuY3Rpb24obXVzaWMsIG9wdGlvbnMpIHtcclxuICAgICAgICBvcHRpb25zID0gb3B0aW9ucyB8fHt9O1xyXG5cclxuICAgICAgICBpZiAoIW9wdGlvbnMubm93cmFwKSB7XHJcbiAgICAgICAgICBpZiAoX2xhc3RtdXNpYyAmJiBfbGFzdG11c2ljID09PSBtdXNpYykge1xyXG4gICAgICAgICAgICByZXR1cm4gX2xhc3RpbnN0YW5jZTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIF9sYXN0bXVzaWMgPSBtdXNpYztcclxuICAgICAgICBfbGFzdGluc3RhbmNlID0gZmNuKG11c2ljLCBvcHRpb25zKTtcclxuXHJcbiAgICAgICAgcmV0dXJuIF9sYXN0aW5zdGFuY2U7XHJcbiAgICAgIH07XHJcblxyXG4gICAgICByZXQudXBkYXRlID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgZmNuLnVwZGF0ZS5iaW5kKGZjbikuYXBwbHkobnVsbCwgYXJndW1lbnRzKTtcclxuICAgICAgICByZXR1cm4gcmV0O1xyXG4gICAgICB9O1xyXG4gICAgICByZXR1cm4gcmV0O1xyXG4gICAgfTtcclxufSk7XHJcbiIsInZhciBtdXNpY1Nob3dDYXNlQXBwID0gYW5ndWxhci5tb2R1bGUoXCJNdXNpY1Nob3dDYXNlQXBwXCIpO1xyXG5tdXNpY1Nob3dDYXNlQXBwLmZhY3RvcnkoXCJFcnJNZXNzYWdlXCIsIFsnJHVpYk1vZGFsJywgJyR0cmFuc2xhdGUnLCBmdW5jdGlvbigkdWliTW9kYWwsICR0cmFuc2xhdGUpIHtcclxuICByZXR1cm4gZnVuY3Rpb24odGl0bGUsIHRleHQpIHtcclxuICAgIHZhciBtb2RhbElucyA9ICR1aWJNb2RhbC5vcGVuKHtcclxuICAgICAgdGVtcGxhdGVVcmw6IFwic2l0ZS90ZW1wbGF0ZXMvbW9kYWwvZXJyb3IuaHRtbFwiLFxyXG4gICAgICBjb250cm9sbGVyOiBcImVycm9yTW9kYWxDdHJsXCIsXHJcbiAgICAgIHdpbmRvd0NsYXNzOiAnZXJyb3InLFxyXG4gICAgICByZXNvbHZlOiB7XHJcbiAgICAgICAgdGV4dDogZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICByZXR1cm4gJHRyYW5zbGF0ZSh0ZXh0KTtcclxuICAgICAgICB9LFxyXG4gICAgICAgIHRpdGxlOiBmdW5jdGlvbigpIHtcclxuICAgICAgICAgIHJldHVybiAkdHJhbnNsYXRlKHRpdGxlKTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG5cclxuICAgIHJldHVybiBtb2RhbElucztcclxuICB9O1xyXG59XSk7XHJcbiIsInZhciBtdXNpY1Nob3dDYXNlQXBwID0gYW5ndWxhci5tb2R1bGUoXCJNdXNpY1Nob3dDYXNlQXBwXCIpO1xyXG5tdXNpY1Nob3dDYXNlQXBwLmZhY3RvcnkoXCJFeHBvcnRcIiwgWyckcScsICdGaWxlUmVwb3NpdG9yeScsIGZ1bmN0aW9uKCRxLCBGaWxlUmVwb3NpdG9yeSkge1xyXG4gIHZhciBleHBvcnRDb250ZW50cyA9IGZ1bmN0aW9uKG5hbWUsIGNvbnRlbnRzKSB7XHJcbiAgICB2YXIgYSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJhXCIpO1xyXG4gICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChhKTtcclxuICAgIGEuc3R5bGUgPSBcImRpc3BsYXk6IG5vbmVcIjtcclxuXHJcbiAgICB2YXIgYmxvYiA9IG5ldyBCbG9iKFtKU09OLnN0cmluZ2lmeShjb250ZW50cyldKTtcclxuICAgIHZhciB1cmwgID0gd2luZG93LlVSTC5jcmVhdGVPYmplY3RVUkwoYmxvYik7XHJcbiAgICBhLmhyZWYgPSB1cmw7XHJcbiAgICBhLmRvd25sb2FkID0gbmFtZSArIFwiLmpzb25cIjtcclxuICAgIGEuY2xpY2soKTtcclxuICAgIHdpbmRvdy5VUkwucmV2b2tlT2JqZWN0VVJMKHVybCk7XHJcbiAgfTtcclxuXHJcbiAgdmFyIGdldFJlbGF0ZWRJZHMgPSBmdW5jdGlvbihmaWxlKSB7XHJcbiAgICBpZiAoZmlsZS5pbmRleC50eXBlID09PSAncHJvamVjdCcpIHtcclxuICAgICAgcmV0dXJuIChmaWxlLmluZGV4LnJlZnx8W10pO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdmFyIHJldCA9IEZpbGVSZXBvc2l0b3J5LmdldFJlZnMoZmlsZS5pbmRleC50eXBlLCBmaWxlLmNvbnRlbnRzKTtcclxuICAgICAgaWYgKGZpbGUuaW5kZXgucHJvamVjdCkgcmV0LnB1c2goZmlsZS5pbmRleC5wcm9qZWN0KTtcclxuICAgICAgcmV0dXJuIHJldDtcclxuICAgIH1cclxuICB9O1xyXG5cclxuICB2YXIgY29uY2F0ID0gZnVuY3Rpb24oeCwgeSkge3JldHVybiB4LmNvbmNhdCh5KTsgfTtcclxuICB2YXIgZ2V0RmlsZVdpdGhSZWxhdGVkID0gZnVuY3Rpb24oaWQpIHtcclxuICAgIHZhciByZXQgPSBbXTtcclxuICAgIHJldHVybiBGaWxlUmVwb3NpdG9yeS5nZXRGaWxlKGlkKVxyXG4gICAgICAudGhlbihmdW5jdGlvbihmaWxlKSB7XHJcbiAgICAgICAgaWYgKCFmaWxlKSByZXR1cm4gW107XHJcbiAgICAgICAgaWYgKGZpbGUuaW5kZXgubm9FeHBvcnRhYmxlKSB7XHJcbiAgICAgICAgICByZXR1cm4gW107XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXQucHVzaCh7XHJcbiAgICAgICAgICBuYW1lOiBmaWxlLmluZGV4Lm5hbWUsXHJcbiAgICAgICAgICB0eXBlOiBmaWxlLmluZGV4LnR5cGUsXHJcbiAgICAgICAgICBpZDogZmlsZS5pbmRleC5pZCxcclxuICAgICAgICAgIGNvbnRlbnRzOiBmaWxlLmNvbnRlbnRzLFxyXG4gICAgICAgICAgcHJvamVjdDogZmlsZS5pbmRleC5wcm9qZWN0LFxyXG4gICAgICAgICAgcmVmOiBmaWxlLmluZGV4LnJlZlxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICByZXR1cm4gJHEuYWxsKGdldFJlbGF0ZWRJZHMoZmlsZSkubWFwKGdldEZpbGVXaXRoUmVsYXRlZCkpXHJcbiAgICAgICAgICAudGhlbihmdW5jdGlvbihyZWxhcnJheSkge1xyXG4gICAgICAgICAgICByZWxhcnJheS5mb3JFYWNoKGZ1bmN0aW9uKHJlbCkge1xyXG4gICAgICAgICAgICAgIHJldCA9IHJldC5jb25jYXQocmVsKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIHJldHVybiByZXQ7XHJcbiAgICAgICAgICB9KTtcclxuICAgICAgfSk7XHJcbiAgfTtcclxuXHJcbiAgdmFyIHVuaXEgPSBmdW5jdGlvbihhcnJheSkge1xyXG4gICAgdmFyIGZpbGVzID0ge307XHJcbiAgICBhcnJheS5mb3JFYWNoKGZ1bmN0aW9uKGZpbGUpIHtcclxuICAgICAgZmlsZXNbZmlsZS5pZF0gPSBmaWxlO1xyXG4gICAgfSk7XHJcblxyXG4gICAgcmV0dXJuIE9iamVjdC5rZXlzKGZpbGVzKS5tYXAoZnVuY3Rpb24oaWQpIHtcclxuICAgICAgcmV0dXJuIGZpbGVzW2lkXTtcclxuICAgIH0pO1xyXG4gIH07XHJcblxyXG4gIHZhciBleHBvcnRQcm9qZWN0ID0gZnVuY3Rpb24obmFtZSwgaWQpIHtcclxuICAgIHZhciBnZXRJZCA9IGZ1bmN0aW9uKHgpIHsgcmV0dXJuIHguaWQ7IH07XHJcblxyXG4gICAgRmlsZVJlcG9zaXRvcnkuZ2V0UHJvamVjdEZpbGVzKGlkKVxyXG4gICAgICAudGhlbihmdW5jdGlvbihmaWxlcykge1xyXG4gICAgICAgIHJldHVybiAkcS5hbGwoZmlsZXMubWFwKGdldElkKS5tYXAoZ2V0RmlsZVdpdGhSZWxhdGVkKSk7XHJcbiAgICAgIH0pXHJcbiAgICAgIC50aGVuKGZ1bmN0aW9uKGFycmF5KXtcclxuICAgICAgICBhcnJheSA9IGFycmF5LnJlZHVjZShjb25jYXQsIFtdKTtcclxuICAgICAgICBleHBvcnRDb250ZW50cyhuYW1lLCB1bmlxKGFycmF5KSk7XHJcbiAgICAgIH0pO1xyXG4gIH07XHJcblxyXG4gIHZhciBleHBvcnRGaWxlID0gZnVuY3Rpb24obmFtZSwgaWQpIHtcclxuICAgIHJldHVybiBnZXRGaWxlV2l0aFJlbGF0ZWQoaWQpXHJcbiAgICAgIC50aGVuKGZ1bmN0aW9uKGFycmF5KSB7XHJcbiAgICAgICAgZXhwb3J0Q29udGVudHMobmFtZSwgdW5pcShhcnJheSkpO1xyXG4gICAgICB9KTtcclxuICB9O1xyXG5cclxuICB2YXIgaW1wb3J0RmlsZSA9IGZ1bmN0aW9uKGNvbnRlbnRzKSB7XHJcbiAgICB2YXIgaW1wb3J0SXRlbSA9IGZ1bmN0aW9uKGl0ZW0pIHtcclxuICAgICAgcmV0dXJuIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIHJldHVybiBGaWxlUmVwb3NpdG9yeS5nZXRJbmRleChpdGVtLmlkKVxyXG4gICAgICAgICAgLnRoZW4oZnVuY3Rpb24oaW5kZXgpIHtcclxuICAgICAgICAgICAgaWYgKGluZGV4KSB7XHJcbiAgICAgICAgICAgICAgcmV0dXJuIEZpbGVSZXBvc2l0b3J5LnVwZGF0ZUZpbGUoaXRlbS5pZCwgaXRlbS5jb250ZW50cylcclxuICAgICAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgICByZXR1cm4gRmlsZVJlcG9zaXRvcnkudXBkYXRlSW5kZXgoaXRlbS5pZCwge1xyXG4gICAgICAgICAgICAgICAgICAgIG5hbWU6IGl0ZW0ubmFtZSxcclxuICAgICAgICAgICAgICAgICAgICBwcm9qZWN0OiBpdGVtLnByb2plY3RcclxuICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICByZXR1cm4gRmlsZVJlcG9zaXRvcnkucHVyZ2VGcm9tUmVjeWNsZUJpbihpdGVtLmlkKVxyXG4gICAgICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICAgIHJldHVybiBGaWxlUmVwb3NpdG9yeS5jcmVhdGVGaWxlKHtcclxuICAgICAgICAgICAgICAgICAgICBpZDogaXRlbS5pZCxcclxuICAgICAgICAgICAgICAgICAgICBjb250ZW50czogaXRlbS5jb250ZW50cyxcclxuICAgICAgICAgICAgICAgICAgICB0eXBlOiBpdGVtLnR5cGUsXHJcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogaXRlbS5uYW1lLFxyXG4gICAgICAgICAgICAgICAgICAgIHByb2plY3Q6IGl0ZW0ucHJvamVjdCxcclxuICAgICAgICAgICAgICAgICAgICByZWY6IGl0ZW0ucmVmXHJcbiAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH0pO1xyXG4gICAgICB9O1xyXG4gICAgfTtcclxuXHJcbiAgICByZXR1cm4gJHEud2hlbigpXHJcbiAgICAgIC50aGVuKGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIHZhciBwID0gbnVsbDtcclxuICAgICAgICB2YXIgcGFyc2VkID0gSlNPTi5wYXJzZShjb250ZW50cyk7XHJcbiAgICAgICAgdmFyIGZpcnN0SXRlbSA9IHBhcnNlZFswXTtcclxuXHJcbiAgICAgICAgcGFyc2VkLmZvckVhY2goZnVuY3Rpb24oaXRlbSkge1xyXG4gICAgICAgICAgaWYgKHApIHtcclxuICAgICAgICAgICAgcCA9IHAudGhlbihpbXBvcnRJdGVtKGl0ZW0pKTtcclxuICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHAgPSBpbXBvcnRJdGVtKGl0ZW0pKCk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHJldHVybiBwLnRoZW4oZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICByZXR1cm4ge2lkOiBmaXJzdEl0ZW0uaWQsIHR5cGU6IGZpcnN0SXRlbS50eXBlLCBwcm9qZWN0OiBmaXJzdEl0ZW0ucHJvamVjdH07XHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH0pO1xyXG4gIH07XHJcblxyXG4gIHJldHVybiB7XHJcbiAgICBleHBvcnRDb250ZW50czogZXhwb3J0Q29udGVudHMsXHJcbiAgICBleHBvcnRGaWxlOiBleHBvcnRGaWxlLFxyXG4gICAgZXhwb3J0UHJvamVjdDogZXhwb3J0UHJvamVjdCxcclxuICAgIGltcG9ydEZpbGU6IGltcG9ydEZpbGVcclxuICB9O1xyXG59XSk7XHJcbiIsInZhciBtdXNpY1Nob3dDYXNlQXBwID0gYW5ndWxhci5tb2R1bGUoXCJNdXNpY1Nob3dDYXNlQXBwXCIpO1xyXG5tdXNpY1Nob3dDYXNlQXBwLmZhY3RvcnkoXCJJbmRleFwiLCBbJyRxJywgJyR0aW1lb3V0JywgJ1N5bmMnLCAnX2xvY2FsZm9yYWdlJywgZnVuY3Rpb24oJHEsICR0aW1lb3V0LCBTeW5jLCBsb2NhbGZvcmFnZSkge1xyXG4gIGZ1bmN0aW9uIENhbnRSZW1vdmUoaWQsIGZpbGUpIHtcclxuICAgICAgdGhpcy5pZCA9IGlkO1xyXG4gICAgICB0aGlzLmZpbGUgPSBmaWxlO1xyXG4gICAgICB0aGlzLnN0YWNrID0gKG5ldyBFcnJvcigpKS5zdGFjaztcclxuICAgICAgdGhpcy50eXBlID0gXCJjYW50cmVtb3ZlXCI7XHJcbiAgfVxyXG4gIENhbnRSZW1vdmUucHJvdG90eXBlID0gbmV3IEVycm9yXHJcblxyXG4gIHZhciBJbmRleEZhY3RvcnkgPSBmdW5jdGlvbihpbmRleE5hbWUpIHtcclxuICAgIHZhciBlbnRyeUNoYW5nZSA9IG5ldyBTeW5jKCk7XHJcblxyXG4gICAgdmFyIHJlbG9hZCA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAvLyBsb2FkIHN0b2FyZ2VJbmRleFxyXG4gICAgICB2YXIgc3RvcmFnZUluZGV4O1xyXG4gICAgICBzdG9yYWdlSW5kZXggPSBsb2NhbGZvcmFnZS5nZXRJdGVtKGluZGV4TmFtZSlcclxuICAgICAgICAudGhlbihmdW5jdGlvbihhcnJheSl7XHJcbiAgICAgICAgICByZXR1cm4gYXJyYXl8fFtdO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICByZXR1cm4gc3RvcmFnZUluZGV4O1xyXG4gICAgfTtcclxuXHJcbiAgICB2YXIgY2xlYXJJdGVtID0gZnVuY3Rpb24oZGF0YSkge1xyXG4gICAgICB2YXIgcmV0ID0ge2lkOiBkYXRhLmlkLCBuYW1lOiBkYXRhLm5hbWUsIHR5cGU6IGRhdGEudHlwZSwgcHJvamVjdDogZGF0YS5wcm9qZWN0LCByZWY6IGRhdGEucmVmfTtcclxuICAgICAgaWYgKGRhdGEuYykgcmV0LmM9ZGF0YS5jO1xyXG4gICAgICByZXR1cm4gcmV0O1xyXG4gICAgfTtcclxuXHJcbiAgICB2YXIgcmVtb3ZlRW50cnkgPSBlbnRyeUNoYW5nZS5zeW5jKGZ1bmN0aW9uKGlkKSB7XHJcbiAgICAgIHJldHVybiByZWxvYWQoKVxyXG4gICAgICAgIC50aGVuKGZ1bmN0aW9uKGluZGV4KSB7XHJcbiAgICAgICAgICBpZiAoIWluZGV4KSByZXR1cm47XHJcbiAgICAgICAgICBpbmRleCA9IGluZGV4LmZpbHRlcihmdW5jdGlvbih4KSB7IHJldHVybiB4LmlkICE9PSBpZDsgfSk7XHJcbiAgICAgICAgICByZXR1cm4gbG9jYWxmb3JhZ2Uuc2V0SXRlbShpbmRleE5hbWUsIGluZGV4Lm1hcChjbGVhckl0ZW0pKTtcclxuICAgICAgICB9KVxyXG4gICAgICAgIC50aGVuKHJlbG9hZCk7XHJcbiAgICB9KTtcclxuXHJcbiAgICB2YXIgZ2V0RW50cnkgPSBmdW5jdGlvbihpZCkge1xyXG4gICAgICByZXR1cm4gcmVsb2FkKClcclxuICAgICAgICAudGhlbihmdW5jdGlvbihpbmRleCkge1xyXG4gICAgICAgICAgaWYgKCFpbmRleCkgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgICByZXR1cm4gaW5kZXguZmlsdGVyKGZ1bmN0aW9uKHgpIHsgcmV0dXJuIHguaWQgPT09IGlkOyB9KVswXTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcblxyXG4gICAgdmFyIGNyZWF0ZUVudHJ5ID0gZW50cnlDaGFuZ2Uuc3luYyhmdW5jdGlvbihkYXRhKSB7XHJcbiAgICAgIHJldHVybiByZWxvYWQoKVxyXG4gICAgICAgIC50aGVuKGZ1bmN0aW9uKGluZGV4KSB7XHJcbiAgICAgICAgICBpbmRleCA9IGluZGV4IHx8IFtdO1xyXG5cclxuICAgICAgICAgIGlmIChJbmRleEZhY3RvcnkuaXNvbGF0ZWRDb250ZXh0KSB7XHJcbiAgICAgICAgICAgIGRhdGEuYyA9IEluZGV4RmFjdG9yeS5pc29sYXRlZENvbnRleHQ7XHJcbiAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgaW5kZXgucHVzaChkYXRhKTtcclxuICAgICAgICAgIHJldHVybiBsb2NhbGZvcmFnZS5zZXRJdGVtKGluZGV4TmFtZSwgaW5kZXgubWFwKGNsZWFySXRlbSkpO1xyXG4gICAgICAgIH0pXHJcbiAgICAgICAgLnRoZW4ocmVsb2FkKTtcclxuICAgIH0pO1xyXG5cclxuICAgIHZhciB1cGRhdGVFbnRyeSA9IGVudHJ5Q2hhbmdlLnN5bmMoZnVuY3Rpb24oaWQsIGF0dHJpYnV0ZXMpIHtcclxuICAgICAgcmV0dXJuIHJlbG9hZCgpXHJcbiAgICAgICAgLnRoZW4oZnVuY3Rpb24oaW5kZXgpIHtcclxuICAgICAgICAgIHZhciBsb2NhbEZpbGUgPSBpbmRleC5maWx0ZXIoZnVuY3Rpb24oeCkgeyByZXR1cm4geC5pZCA9PT0gaWQ7IH0pWzBdO1xyXG4gICAgICAgICAgbG9jYWxGaWxlLm5hbWUgPSBhdHRyaWJ1dGVzLm5hbWU7XHJcbiAgICAgICAgICBsb2NhbEZpbGUucmVmID0gYXR0cmlidXRlcy5yZWY7XHJcblxyXG4gICAgICAgICAgaWYgKEluZGV4RmFjdG9yeS5pc29sYXRlZENvbnRleHQpIHtcclxuICAgICAgICAgICAgbG9jYWxGaWxlLmMgPSBJbmRleEZhY3RvcnkuaXNvbGF0ZWRDb250ZXh0O1xyXG4gICAgICAgICAgfVxyXG5cclxuICAgICAgICAgIHJldHVybiBsb2NhbGZvcmFnZS5zZXRJdGVtKGluZGV4TmFtZSwgaW5kZXgubWFwKGNsZWFySXRlbSkpO1xyXG4gICAgICAgIH0pXHJcbiAgICAgICAgLnRoZW4ocmVsb2FkKTtcclxuICAgIH0pO1xyXG5cclxuICAgIHZhciBnZXRBbGwgPSBmdW5jdGlvbigpIHtcclxuICAgICAgcmV0dXJuIHJlbG9hZCgpXHJcbiAgICAgICAgLnRoZW4oZnVuY3Rpb24oaW5kZXgpIHtcclxuICAgICAgICAgIHZhciBpYyA9IEluZGV4RmFjdG9yeS5pc29sYXRlZENvbnRleHQ7XHJcbiAgICAgICAgICBpZiAoaWMpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGluZGV4LmZpbHRlcihmdW5jdGlvbihlbnRyeSkge3JldHVybiBlbnRyeS5jID09PSBpYzsgfSk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICByZXR1cm4gaW5kZXg7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG5cclxuICAgIHZhciByZWZzID0gZnVuY3Rpb24oaW5kZXgsIGlkKSB7XHJcbiAgICAgIHJldHVybiBpbmRleC5maWx0ZXIoZnVuY3Rpb24oZmlsZSkge1xyXG4gICAgICAgIHJldHVybiAoZmlsZS5yZWZ8fFtdKS5pbmRleE9mKGlkKSAhPT0gLTE7XHJcbiAgICAgIH0pO1xyXG4gICAgfTtcclxuXHJcbiAgICB2YXIgaXNQcm9qZWN0VHlwZSA9IGZ1bmN0aW9uKGZpbGUpIHtcclxuICAgICAgcmV0dXJuIGZpbGUudHlwZSA9PT0gJ3Byb2plY3QnO1xyXG4gICAgfTtcclxuXHJcbiAgICB2YXIgZ2V0SWQgPSBmdW5jdGlvbihmaWxlKSB7XHJcbiAgICAgIHJldHVybiBmaWxlLmlkO1xyXG4gICAgfTtcclxuXHJcbiAgICB2YXIgd2lsbFJlbW92ZSA9IGZ1bmN0aW9uKGlkKSB7XHJcbiAgICAgIHJldHVybiByZWxvYWQoKVxyXG4gICAgICAgIC50aGVuKGZ1bmN0aW9uKGluZGV4KSB7XHJcbiAgICAgICAgICB2YXIgbG9jYWxGaWxlID0gaW5kZXguZmlsdGVyKGZ1bmN0aW9uKHgpIHsgcmV0dXJuIHguaWQgPT09IGlkOyB9KVswXTtcclxuXHJcbiAgICAgICAgICBpZiAoIWxvY2FsRmlsZSkgcmV0dXJuO1xyXG5cclxuICAgICAgICAgIHZhciByID0gcmVmcyhpbmRleCwgaWQpO1xyXG4gICAgICAgICAgLy8gaWYgdGhlIGl0ZW0gaGFzIG5vIHJlZmVyZW5jZXMsIGl0IGNhbiBiZSByZW1vdmVkIVxyXG4gICAgICAgICAgaWYgKHIubGVuZ3RoID09PSAwKSByZXR1cm47XHJcblxyXG4gICAgICAgICAgaWYgKGxvY2FsRmlsZS50eXBlID09PSAncHJvamVjdCcpIHtcclxuICAgICAgICAgICAgaWYgKHIuc29tZShpc1Byb2plY3RUeXBlKSkge1xyXG4gICAgICAgICAgICAgIHRocm93IG5ldyBDYW50UmVtb3ZlKGlkLCBsb2NhbEZpbGUpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB0aHJvdyBuZXcgQ2FudFJlbW92ZShpZCwgbG9jYWxGaWxlKTtcclxuICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICByZXR1cm4gJHEuYWxsKHIubWFwKGdldElkKS5tYXAod2lsbFJlbW92ZSkpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuXHJcbiAgICB2YXIgZ2V0T3JwaGFuID0gZnVuY3Rpb24oZXh0cmFJZHMsIGV4dHJhUHJvamVjdElkcykge1xyXG4gICAgICByZXR1cm4gcmVsb2FkKClcclxuICAgICAgICAudGhlbihmdW5jdGlvbihpbmRleCkge1xyXG4gICAgICAgICAgdmFyIHByb2plY3RJZHMgPSBpbmRleC5maWx0ZXIoaXNQcm9qZWN0VHlwZSkubWFwKGdldElkKS5jb25jYXQoZXh0cmFQcm9qZWN0SWRzKTtcclxuICAgICAgICAgIHZhciBpZHMgPSBpbmRleC5tYXAoZ2V0SWQpLmNvbmNhdChleHRyYUlkc3x8W10pO1xyXG4gICAgICAgICAgdmFyIGlzT3JwaGFuID0gZnVuY3Rpb24oZmlsZSkge1xyXG4gICAgICAgICAgICBpZiAoZmlsZS5wcm9qZWN0KSB7XHJcbiAgICAgICAgICAgICAgaWYgKHByb2plY3RJZHMuaW5kZXhPZihmaWxlLnByb2plY3QpID09PSAtMSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiAoZmlsZS5yZWZ8fFtdKS5zb21lKGZ1bmN0aW9uKGlkKSB7XHJcbiAgICAgICAgICAgICAgcmV0dXJuIGlkcy5pbmRleE9mKGlkKSA9PT0gLTE7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICByZXR1cm4gaW5kZXguZmlsdGVyKGlzT3JwaGFuKTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcblxyXG4gICAgdmFyIGdldEZyZWVJdGVtcyA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICByZXR1cm4gcmVsb2FkKClcclxuICAgICAgICAudGhlbihmdW5jdGlvbihpbmRleCkge1xyXG4gICAgICAgICAgdmFyIHJlZmVyZW5jZWQgPSB7fTtcclxuICAgICAgICAgIGluZGV4LmZvckVhY2goZnVuY3Rpb24oZmlsZSkge1xyXG4gICAgICAgICAgICAoZmlsZS5yZWZ8fFtdKS5mb3JFYWNoKGZ1bmN0aW9uKHIpIHtcclxuICAgICAgICAgICAgICByZWZlcmVuY2VkW3JdPXRydWU7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgcmV0dXJuIGluZGV4LmZpbHRlcihmdW5jdGlvbihmaWxlKSB7XHJcbiAgICAgICAgICAgIHJldHVybiAhcmVmZXJlbmNlZFtmaWxlLmlkXTtcclxuICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuXHJcbiAgICByZWxvYWQoKTtcclxuXHJcbiAgICByZXR1cm4ge1xyXG4gICAgICB3aWxsUmVtb3ZlOiB3aWxsUmVtb3ZlLFxyXG4gICAgICByZWxvYWQ6IHJlbG9hZCxcclxuICAgICAgcmVtb3ZlRW50cnk6IHJlbW92ZUVudHJ5LFxyXG4gICAgICBnZXRPcnBoYW46IGdldE9ycGhhbixcclxuICAgICAgZ2V0RW50cnk6IGdldEVudHJ5LFxyXG4gICAgICBnZXRGcmVlSXRlbXM6IGdldEZyZWVJdGVtcyxcclxuICAgICAgY3JlYXRlRW50cnk6IGNyZWF0ZUVudHJ5LFxyXG4gICAgICB1cGRhdGVFbnRyeTogdXBkYXRlRW50cnksXHJcbiAgICAgIGdldEFsbDogZ2V0QWxsXHJcbiAgICB9O1xyXG4gIH07XHJcblxyXG4gIHJldHVybiBJbmRleEZhY3Rvcnk7XHJcbn1dKTtcclxuIiwidmFyIG11c2ljSnMgPSBhbmd1bGFyLm1vZHVsZShcIk11c2ljU2hvd0Nhc2VBcHBcIik7XHJcbm11c2ljSnMuZmFjdG9yeShcIk1pZGlcIiwgWyckcScsICdTeW5jJywgJ19sb2NhbGZvcmFnZScsIGZ1bmN0aW9uKCRxLCBTeW5jLCBsb2NhbGZvcmFnZSkge1xyXG4gIHZhciBzZXR1cFN0b3JlID0gbmV3IFN5bmMoKTtcclxuICB2YXIgbWlkaVNldHVwUmVxdWVzdGVkO1xyXG4gIHZhciBtaWRpTG9hZGVkO1xyXG4gIHZhciBzdG9yZUlucHV0RW5hYmxlZCA9IHNldHVwU3RvcmUuc3luYyhmdW5jdGlvbihpbnB1dElkLCBlbmFibGVkKSB7XHJcbiAgICByZXR1cm4gbG9jYWxmb3JhZ2UuZ2V0SXRlbShcIm1pZGlTZXR1cFwiKVxyXG4gICAgICAudGhlbihmdW5jdGlvbihtaWRpU2V0dXApIHtcclxuICAgICAgICBtaWRpU2V0dXAgPSBtaWRpU2V0dXAgfHwge307XHJcbiAgICAgICAgbWlkaVNldHVwLmlucHV0cyA9IG1pZGlTZXR1cC5pbnB1dHMgfHwge307XHJcbiAgICAgICAgbWlkaVNldHVwLmlucHV0c1tpbnB1dElkXSA9IGVuYWJsZWQ7XHJcblxyXG4gICAgICAgIHJldHVybiBsb2NhbGZvcmFnZS5zZXRJdGVtKFwibWlkaVNldHVwXCIsIG1pZGlTZXR1cCk7XHJcbiAgICAgIH0pO1xyXG4gIH0pO1xyXG5cclxuICB2YXIgbWlkaUFjY2Vzc1JlcXVlc3RlZDtcclxuICBpZiAobmF2aWdhdG9yLnJlcXVlc3RNSURJQWNjZXNzKSB7XHJcbiAgICAgIG1pZGlBY2Nlc3NSZXF1ZXN0ZWQgPSBuYXZpZ2F0b3IucmVxdWVzdE1JRElBY2Nlc3MoeyBzeXNleDogZmFsc2UgfSk7XHJcbiAgfVxyXG5cclxuICB2YXIgd3JhcElucHV0ID0gZnVuY3Rpb24oaW5wdXQpIHtcclxuICAgIHZhciBlbmFibGUgPSBmdW5jdGlvbigpIHtcclxuICAgICAgaW5wdXQub25taWRpbWVzc2FnZSA9IG9uTUlESU1lc3NhZ2U7XHJcbiAgICAgIGlucHV0LmVuYWJsZWQgPSB0cnVlO1xyXG5cclxuICAgICAgc3RvcmVJbnB1dEVuYWJsZWQoaW5wdXQuaWQsIHRydWUpO1xyXG4gICAgfTtcclxuXHJcbiAgICB2YXIgZGlzYWJsZSA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICBpbnB1dC5vbm1pZGltZXNzYWdlID0gbnVsbDtcclxuICAgICAgaW5wdXQuZW5hYmxlZCA9IGZhbHNlO1xyXG5cclxuICAgICAgc3RvcmVJbnB1dEVuYWJsZWQoaW5wdXQuaWQsIGZhbHNlKTtcclxuICAgIH07XHJcblxyXG4gICAgdmFyIHVwZGF0ZSA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICBpZiAodGhpcy5lbmFibGVkKSB7XHJcbiAgICAgICAgZW5hYmxlKClcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICBkaXNhYmxlKCk7XHJcbiAgICAgIH1cclxuICAgIH07XHJcblxyXG4gICAgdmFyIHJldCA9IHtcclxuICAgICAgZW5hYmxlZDogISFpbnB1dC5vbm1pZGltZXNzYWdlLFxyXG4gICAgICBlbmFibGU6IGVuYWJsZSxcclxuICAgICAgZGlzYWJsZTogZGlzYWJsZSxcclxuICAgICAgdXBkYXRlOiB1cGRhdGUsXHJcbiAgICAgIG5hbWU6IGlucHV0Lm5hbWUsXHJcbiAgICAgIGlkOiBpbnB1dC5pZFxyXG4gICAgfTtcclxuXHJcbiAgICByZXR1cm4gcmV0O1xyXG4gIH07XHJcblxyXG4gIHZhciBnZXRTdGF0dXMgPSBmdW5jdGlvbigpIHtcclxuICAgIHJldHVybiBtaWRpTG9hZGVkXHJcbiAgICAgIC50aGVuKGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIHJldHVybiBtaWRpQWNjZXNzUmVxdWVzdGVkXHJcbiAgICAgIH0pXHJcbiAgICAgIC50aGVuKGZ1bmN0aW9uKG1pZGlBY2Nlc3MpIHtcclxuICAgICAgICB2YXIgZGF0YSA9IHtjb25uZWN0ZWQ6IGZhbHNlfTtcclxuICAgICAgICB2YXIgaW5wdXRzID0gbWlkaUFjY2Vzcy5pbnB1dHMudmFsdWVzKCk7XHJcblxyXG4gICAgICAgIGZvciAodmFyIGlucHV0ID0gaW5wdXRzLm5leHQoKTsgaW5wdXQgJiYgIWlucHV0LmRvbmU7IGlucHV0ID0gaW5wdXRzLm5leHQoKSkge1xyXG4gICAgICAgICAgaWYgKGlucHV0LnZhbHVlLm9ubWlkaW1lc3NhZ2UpIHtcclxuICAgICAgICAgICAgZGF0YS5jb25uZWN0ZWQgPSB0cnVlO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gZGF0YTtcclxuICAgICAgfSk7XHJcbiAgfTtcclxuXHJcbiAgdmFyIGdldElucHV0cyA9IGZ1bmN0aW9uKCkge1xyXG4gICAgcmV0dXJuIG1pZGlBY2Nlc3NSZXF1ZXN0ZWRcclxuICAgICAgLnRoZW4oZnVuY3Rpb24obWlkaUFjY2Vzcykge1xyXG4gICAgICAgIHZhciByZXRJbnB1dHMgPSBbXTtcclxuICAgICAgICB2YXIgaW5wdXRzID0gbWlkaUFjY2Vzcy5pbnB1dHMudmFsdWVzKCk7XHJcblxyXG4gICAgICAgIGZvciAodmFyIGlucHV0ID0gaW5wdXRzLm5leHQoKTsgaW5wdXQgJiYgIWlucHV0LmRvbmU7IGlucHV0ID0gaW5wdXRzLm5leHQoKSkge1xyXG4gICAgICAgICAgICByZXRJbnB1dHMucHVzaCh3cmFwSW5wdXQoaW5wdXQudmFsdWUpKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHJldElucHV0cztcclxuICAgICAgfSk7XHJcbiAgfTtcclxuXHJcbiAgdmFyIGV2ZW50TGlzdGVuZXJzID0gW107XHJcbiAgdmFyIHJlZ2lzdGVyRXZlbnRMaXN0ZW5lciA9IGZ1bmN0aW9uKGNhbGxiYWNrKSB7XHJcbiAgICB2YXIgZGVzdHJveSA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICBldmVudExpc3RlbmVycyA9IGV2ZW50TGlzdGVuZXJzLmZpbHRlcihmdW5jdGlvbihjKSB7IHJldHVybiBjICE9PSBjYWxsYmFjazsgfSk7XHJcbiAgICB9O1xyXG5cclxuICAgIGV2ZW50TGlzdGVuZXJzLnB1c2goY2FsbGJhY2spO1xyXG5cclxuICAgIHJldHVybiB7XHJcbiAgICAgIGRlc3Ryb3k6IGRlc3Ryb3lcclxuICAgIH07XHJcbiAgfTtcclxuXHJcbiAgdmFyIG9uTUlESU1lc3NhZ2UgPSBmdW5jdGlvbihldmVudCkge1xyXG4gICAgbWlkaVNldHVwUmVxdWVzdGVkLnRoZW4oZnVuY3Rpb24oY2ZnKSB7XHJcbiAgICAgIGV2ZW50LmRhdGFbMV0gPSBldmVudC5kYXRhWzFdIC0gY2ZnLm9jdGF2ZSoxMiArIGNmZy50cmFuc3Bvc2U7XHJcbiAgICAgIGV2ZW50TGlzdGVuZXJzLmZvckVhY2goZnVuY3Rpb24oY2FsbGJhY2spIHtcclxuICAgICAgICBjYWxsYmFjayhldmVudCk7XHJcbiAgICAgIH0pO1xyXG4gICAgfSk7XHJcbiAgfTtcclxuXHJcbiAgdmFyIHJlbG9hZENvbmZpZyA9IGZ1bmN0aW9uKCkge1xyXG4gICAgbWlkaVNldHVwUmVxdWVzdGVkID0gbG9jYWxmb3JhZ2UuZ2V0SXRlbShcIm1pZGlTZXR1cFwiKVxyXG4gICAgICAudGhlbihmdW5jdGlvbihtaWRpU2V0dXApIHtcclxuICAgICAgICBpZiAoIW1pZGlTZXR1cCkgbWlkaVNldHVwID0ge307XHJcbiAgICAgICAgaWYgKHR5cGVvZiBtaWRpU2V0dXAub2N0YXZlID09PSAndW5kZWZpbmVkJykgbWlkaVNldHVwLm9jdGF2ZSA9IDM7XHJcbiAgICAgICAgaWYgKHR5cGVvZiBtaWRpU2V0dXAudHJhbnNwb3NlID09PSAndW5kZWZpbmVkJykgbWlkaVNldHVwLnRyYW5zcG9zZSA9IDA7XHJcblxyXG4gICAgICAgIHJldHVybiBtaWRpU2V0dXA7XHJcbiAgICAgIH0pO1xyXG4gIH07XHJcblxyXG4gIHJlbG9hZENvbmZpZygpO1xyXG5cclxuICBtaWRpTG9hZGVkID0gJHEuYWxsKHtcclxuICAgIGlucHV0czogZ2V0SW5wdXRzKCksXHJcbiAgICBtaWRpU2V0dXA6IG1pZGlTZXR1cFJlcXVlc3RlZFxyXG4gIH0pLnRoZW4oZnVuY3Rpb24ocmVzdWx0KSB7XHJcbiAgICB2YXIgbWlkaVNldHVwID0gcmVzdWx0Lm1pZGlTZXR1cDtcclxuXHJcbiAgICBpZiAobWlkaVNldHVwICYmIG1pZGlTZXR1cC5pbnB1dHMpIHtcclxuICAgICAgcmVzdWx0LmlucHV0cy5mb3JFYWNoKGZ1bmN0aW9uKGlucHV0KSB7XHJcbiAgICAgICAgaWYgKG1pZGlTZXR1cC5pbnB1dHNbaW5wdXQuaWRdKSB7XHJcbiAgICAgICAgICBpbnB1dC5lbmFibGUoKTtcclxuICAgICAgICB9XHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG4gIH0pO1xyXG5cclxuICB2YXIgZ2V0Q29uZmlnID0gZnVuY3Rpb24oKSB7XHJcbiAgICByZXR1cm4gbWlkaVNldHVwUmVxdWVzdGVkO1xyXG4gIH07XHJcblxyXG4gIHZhciBzZXRDb25maWcgPSBzZXR1cFN0b3JlLnN5bmMoZnVuY3Rpb24oY2ZnKSB7XHJcbiAgICByZXR1cm4gbG9jYWxmb3JhZ2UuZ2V0SXRlbShcIm1pZGlTZXR1cFwiKVxyXG4gICAgICAudGhlbihmdW5jdGlvbihtaWRpU2V0dXApIHtcclxuICAgICAgICBtaWRpU2V0dXAgPSBtaWRpU2V0dXAgfHwge307XHJcbiAgICAgICAgbWlkaVNldHVwLmlucHV0cyA9IG1pZGlTZXR1cC5pbnB1dHMgfHwge307XHJcbiAgICAgICAgbWlkaVNldHVwLm9jdGF2ZSA9IGNmZy5vY3RhdmU7XHJcbiAgICAgICAgbWlkaVNldHVwLnRyYW5zcG9zZSA9IGNmZy50cmFuc3Bvc2U7XHJcblxyXG4gICAgICAgIHJldHVybiBsb2NhbGZvcmFnZS5zZXRJdGVtKFwibWlkaVNldHVwXCIsIG1pZGlTZXR1cCk7XHJcbiAgICAgIH0pXHJcbiAgICAgIC50aGVuKHJlbG9hZENvbmZpZyk7XHJcbiAgfSk7XHJcblxyXG4gIHJldHVybiB7XHJcbiAgICBnZXRJbnB1dHM6IGdldElucHV0cyxcclxuICAgIHJlZ2lzdGVyRXZlbnRMaXN0ZW5lcjogcmVnaXN0ZXJFdmVudExpc3RlbmVyLFxyXG4gICAgZ2V0U3RhdHVzOiBnZXRTdGF0dXMsXHJcbiAgICBnZXRDb25maWc6IGdldENvbmZpZyxcclxuICAgIHNldENvbmZpZzogc2V0Q29uZmlnXHJcbiAgfTtcclxufV0pO1xyXG4iLCJ2YXIgbXVzaWNTaG93Q2FzZUFwcCA9IGFuZ3VsYXIubW9kdWxlKFwiTXVzaWNTaG93Q2FzZUFwcFwiKTtcclxubXVzaWNTaG93Q2FzZUFwcC5mYWN0b3J5KFwiUmVjaXBlXCIsIFsnJHEnLCAnJHRpbWVvdXQnLCAnJHJvb3RTY29wZScsICckaHR0cCcsICdJbmRleCcsICdGaWxlUmVwb3NpdG9yeScsIGZ1bmN0aW9uKCRxLCAkdGltZW91dCwgJHJvb3RTY29wZSwgJGh0dHAsIEluZGV4LCBGaWxlUmVwb3NpdG9yeSkge1xyXG5cclxuICAgIHZhciByZWNpcGVMaXN0ID0gWydpbnRybycsICdjcmVhdGVfYV9zb25nJywgJ2NyZWF0ZV9hbl9pbnN0cnVtZW50J107XHJcbiAgICB2YXIgYmxpbmtzID0gW107XHJcblxyXG4gICAgdmFyIGN1cnJlbnRSZWNpcGUgPSB7XHJcbiAgICAgIHN0ZXBzOiBbXSxcclxuICAgICAgY3VycmVudFN0ZXA6IDBcclxuICAgIH07XHJcblxyXG4gICAgdmFyIGhhbmRsZUV2ZW50ID0gZnVuY3Rpb24oZXZlbnQsIGFyZ3MpIHtcclxuICAgICAgdmFyIHN0ZXAgPSBjdXJyZW50UmVjaXBlLnN0ZXBzW2N1cnJlbnRSZWNpcGUuY3VycmVudFN0ZXBdO1xyXG5cclxuICAgICAgaWYgKCFzdGVwKSByZXR1cm47XHJcbiAgICAgIGlmIChzdGVwLmV2ZW50SGFuZGxlcikgc3RlcC5ldmVudEhhbmRsZXIoZXZlbnQsIGFyZ3MpO1xyXG4gICAgfTtcclxuXHJcbiAgICB2YXIgcnVuUmVjaXBlU3RlcCA9IGZ1bmN0aW9uKGN1cnJlbnRTdGVwKSB7XHJcbiAgICAgIGN1cnJlbnRTdGVwID0gY3VycmVudFN0ZXB8fGN1cnJlbnRSZWNpcGUuY3VycmVudFN0ZXA7XHJcblxyXG4gICAgICB2YXIgc3RlcCA9IGN1cnJlbnRSZWNpcGUuc3RlcHNbY3VycmVudFN0ZXBdO1xyXG5cclxuICAgICAgYmxpbmtzID0gW107XHJcblxyXG4gICAgICAkcm9vdFNjb3BlLiRicm9hZGNhc3QoXCJfX2JsaW5rX2Rpc2FibGVfYWxsXCIpO1xyXG4gICAgICAkcm9vdFNjb3BlLiRicm9hZGNhc3QoXCJfX3Rvb2x0aXBfaGlkZV9hbGxcIik7XHJcbiAgICAgIGlmICghc3RlcCkge1xyXG4gICAgICAgIC8vIHJlY2lwZSBlbmRzXHJcbiAgICAgICAgSW5kZXguaXNvbGF0ZWRDb250ZXh0ID0gbnVsbDtcclxuICAgICAgICBGaWxlUmVwb3NpdG9yeS5jaGFuZ2VkKCk7XHJcblxyXG4gICAgICAgIHJldHVybjtcclxuICAgICAgfVxyXG5cclxuICAgICAgKHN0ZXAuYmxpbmt8fFtdKS5mb3JFYWNoKGZ1bmN0aW9uKGJsaW5rX2lkKSB7XHJcbiAgICAgICAgYmxpbmtzLnB1c2goYmxpbmtfaWQpO1xyXG4gICAgICAgICRyb290U2NvcGUuJGJyb2FkY2FzdChcIl9ibGlua19lbmFibGVfXCIgKyBibGlua19pZCk7XHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgZm9yICh2YXIgdG9vbHRpcF9pZCBpbiBzdGVwLnRvb2x0aXB8fHt9KSB7XHJcbiAgICAgICAgJHJvb3RTY29wZS4kYnJvYWRjYXN0KFwiX3Rvb2x0aXBfZGlzcGxheV9cIiArIHRvb2x0aXBfaWQsIHt0ZXh0OiBzdGVwLnRvb2x0aXBbdG9vbHRpcF9pZF19KTtcclxuICAgICAgfVxyXG5cclxuICAgICAgaWYgKHN0ZXAuZHVyYXRpb24pIHtcclxuICAgICAgICAkdGltZW91dChmdW5jdGlvbigpIHtcclxuICAgICAgICAgIGlmIChjdXJyZW50UmVjaXBlLmN1cnJlbnRTdGVwIDw9IGN1cnJlbnRTdGVwKSB7XHJcbiAgICAgICAgICAgIGN1cnJlbnRSZWNpcGUuY3VycmVudFN0ZXAgPSBjdXJyZW50U3RlcCArIDE7XHJcbiAgICAgICAgICAgIHJ1blJlY2lwZVN0ZXAoKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9LCBzdGVwLmR1cmF0aW9uKjEwMDApO1xyXG4gICAgICB9XHJcbiAgICB9O1xyXG5cclxuICAgIHZhciBuZXh0X3N0ZXBfb24gPSBmdW5jdGlvbihldmVudE5hbWUpIHtcclxuICAgICAgcmV0dXJuIGZ1bmN0aW9uKGV2ZW50LCBhcmdzKSB7XHJcbiAgICAgICAgaWYgKGV2ZW50ID09PSBldmVudE5hbWUpIHtcclxuICAgICAgICAgIGN1cnJlbnRSZWNpcGUuY3VycmVudFN0ZXArKztcclxuICAgICAgICAgIHJ1blJlY2lwZVN0ZXAoKTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH07XHJcblxyXG4gICAgdmFyIGRlbGF5ID0gZnVuY3Rpb24oZmNuLCBtcykge1xyXG4gICAgICByZXR1cm4gZnVuY3Rpb24oZXZlbnQsIGFyZ3MpIHtcclxuICAgICAgICAkdGltZW91dChmdW5jdGlvbigpIHtcclxuICAgICAgICAgIGZjbihldmVudCwgYXJncyk7XHJcbiAgICAgICAgfSwgbXMpO1xyXG4gICAgICB9O1xyXG4gICAgfTtcclxuXHJcbiAgICB2YXIgZ2V0TG9jYWxlTmFtZSA9IGZ1bmN0aW9uKHN0ZXBJbmRleCwgdG9vbHRpcE5hbWUpIHtcclxuICAgICAgIHJldHVybiBcInNcIitzdGVwSW5kZXgrXCJfdG9vbHRpcF9cIiArIHRvb2x0aXBOYW1lO1xyXG4gICAgfTtcclxuXHJcbiAgICB2YXIgc3RhcnQgPSBmdW5jdGlvbihuYW1lKSB7XHJcbiAgICAgIHZhciBsb2FkRXZlbnRIYW5kbGVyID0gZnVuY3Rpb24oZXZlbnRIYW5kbGVyRGF0YSkge1xyXG4gICAgICAgIGlmIChldmVudEhhbmRsZXJEYXRhLm5leHRfc3RlcF9vbikge1xyXG4gICAgICAgICAgcmV0dXJuIG5leHRfc3RlcF9vbihldmVudEhhbmRsZXJEYXRhLm5leHRfc3RlcF9vbik7XHJcbiAgICAgICAgfSBlbHNlIGlmIChldmVudEhhbmRsZXJEYXRhLmRlbGF5KSB7XHJcbiAgICAgICAgICByZXR1cm4gZGVsYXkobG9hZEV2ZW50SGFuZGxlcihldmVudEhhbmRsZXJEYXRhLmlubmVyKSwgZXZlbnRIYW5kbGVyRGF0YS5kZWxheSk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9O1xyXG5cclxuICAgICAgdmFyIGxvYWRTdGVwID0gZnVuY3Rpb24oc3RlcERhdGEsIHN0ZXBJbmRleCkge1xyXG5cclxuICAgICAgICB2YXIgdHIgPSB7fTtcclxuICAgICAgICBmb3IgKHZhciBrIGluIHN0ZXBEYXRhLnRvb2x0aXApIHtcclxuICAgICAgICAgIHRyW2tdID0gXCJyZWNpcGVcIiArIFwiLlwiICsgbmFtZSArIFwiLlwiICsgZ2V0TG9jYWxlTmFtZShzdGVwSW5kZXgsIGspO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgIGJsaW5rOiBzdGVwRGF0YS5ibGluayxcclxuICAgICAgICAgIHRvb2x0aXA6IHRyLFxyXG4gICAgICAgICAgZXZlbnRIYW5kbGVyOiBsb2FkRXZlbnRIYW5kbGVyKHN0ZXBEYXRhLmV2ZW50SGFuZGxlciksXHJcbiAgICAgICAgICBkdXJhdGlvbjogc3RlcERhdGEuZHVyYXRpb25cclxuICAgICAgICB9O1xyXG4gICAgICB9O1xyXG5cclxuICAgICAgdmFyIGNyZWF0ZUZpbGUgPSBmdW5jdGlvbihmaWxlKSB7XHJcbiAgICAgICAgcmV0dXJuIEZpbGVSZXBvc2l0b3J5LmRlc3Ryb3lGaWxlKGZpbGUuaW5kZXguaWQpXHJcbiAgICAgICAgICAudGhlbihmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgcmV0dXJuIEZpbGVSZXBvc2l0b3J5LmNyZWF0ZUZpbGUoe1xyXG4gICAgICAgICAgICAgIGlkOiBmaWxlLmluZGV4LmlkLFxyXG4gICAgICAgICAgICAgIHR5cGU6IGZpbGUuaW5kZXgudHlwZSxcclxuICAgICAgICAgICAgICBwcm9qZWN0OiBmaWxlLmluZGV4LnByb2plY3QsXHJcbiAgICAgICAgICAgICAgbmFtZTogZmlsZS5pbmRleC5uYW1lLFxyXG4gICAgICAgICAgICAgIGNvbnRlbnRzOiBmaWxlLmNvbnRlbnRzXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgfSk7XHJcbiAgICAgIH07XHJcblxyXG4gICAgICB2YXIgY3JlYXRlRmlsZXMgPSBmdW5jdGlvbihyZXN1bHQpIHtcclxuICAgICAgICByZXR1cm4gJHEuYWxsKChyZXN1bHQuZGF0YS5maWxlc3x8W10pLm1hcChjcmVhdGVGaWxlKSlcclxuICAgICAgICAgIC50aGVuKGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xyXG4gICAgICAgICAgfSk7XHJcbiAgICAgIH07XHJcblxyXG4gICAgICB2YXIgc3dpdGNoUHJvamVjdCA9IGZ1bmN0aW9uKHJlc3VsdCkge1xyXG4gICAgICAgIGlmIChyZXN1bHQuZGF0YS5wcm9qZWN0KSB7XHJcbiAgICAgICAgICBkb2N1bWVudC5sb2NhdGlvbiA9IFwiIy9lZGl0b3IvXCIrIHJlc3VsdC5kYXRhLnByb2plY3Q7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gcmVzdWx0O1xyXG4gICAgICB9O1xyXG5cclxuICAgICAgcmV0dXJuICRodHRwLmdldChcInJlY2lwZXMvXCIgKyBuYW1lICtcIi5qc29uXCIpXHJcbiAgICAgICAgLnRoZW4oY3JlYXRlRmlsZXMpXHJcbiAgICAgICAgLnRoZW4oc3dpdGNoUHJvamVjdClcclxuICAgICAgICAudGhlbihmdW5jdGlvbihyZXN1bHQpIHtcclxuICAgICAgICAgIHZhciByZWNpcGVEYXRhID0gcmVzdWx0LmRhdGE7XHJcblxyXG4gICAgICAgICAgaWYgKHJlc3VsdC5kYXRhLmlzb2xhdGVkQ29udGV4dCkge1xyXG4gICAgICAgICAgICBJbmRleC5pc29sYXRlZENvbnRleHQgPSByZXN1bHQuZGF0YS5pc29sYXRlZENvbnRleHQgKyBNYXRoLmZsb29yKERhdGUubm93KCkgLyAxMDAwKTtcclxuICAgICAgICAgICAgRmlsZVJlcG9zaXRvcnkuY2hhbmdlZCgpO1xyXG4gICAgICAgICAgfVxyXG5cclxuICAgICAgICAgIGN1cnJlbnRSZWNpcGUuc3RlcHMgPSByZWNpcGVEYXRhLnN0ZXBzLm1hcChsb2FkU3RlcCk7XHJcbiAgICAgICAgICBjdXJyZW50UmVjaXBlLmN1cnJlbnRTdGVwID0gMDtcclxuICAgICAgICAgIHJ1blJlY2lwZVN0ZXAoKTsgICAgIFxyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuXHJcbiAgICBzdGFydC5yYWlzZSA9IGZ1bmN0aW9uKG5hbWUpIHtcclxuICAgICAgaGFuZGxlRXZlbnQobmFtZSk7XHJcbiAgICB9O1xyXG5cclxuICAgIHZhciBsb2FkVHJhbnNsYXRpb25zID0gZnVuY3Rpb24ob3B0aW9ucykge1xyXG4gICAgICB2YXIga2V5ID0gb3B0aW9ucy5rZXk7XHJcblxyXG4gICAgICB2YXIgbG9hZFJlY2lwZVRyYW5zbGF0aW9uID0gZnVuY3Rpb24obmFtZSkge1xyXG4gICAgICAgIHJldHVybiAkaHR0cC5nZXQoXCJyZWNpcGVzL1wiICsgbmFtZSArXCIuanNvblwiKVxyXG4gICAgICAgICAgLnRoZW4oZnVuY3Rpb24ocmVzdWx0KSB7XHJcbiAgICAgICAgICAgIHZhciByZWNpcGVEYXRhID0gcmVzdWx0LmRhdGE7XHJcbiAgICAgICAgICAgIGlmICghcmVjaXBlRGF0YS5sYW5nKSByZXR1cm4ge307XHJcblxyXG4gICAgICAgICAgICB2YXIgbGFuZ0luZGV4ID0gcmVjaXBlRGF0YS5sYW5nLmluZGV4T2Yoa2V5KTtcclxuICAgICAgICAgICAgaWYgKGxhbmdJbmRleCA9PT0gLTEpIHJldHVybiB7fVxyXG5cclxuICAgICAgICAgICAgdmFyIGRhdGEgPSB7fTtcclxuICAgICAgICAgICAgcmVjaXBlRGF0YS5zdGVwcy5mb3JFYWNoKGZ1bmN0aW9uKHN0ZXAsIHN0ZXBJbmRleCkge1xyXG4gICAgICAgICAgICAgIGlmIChzdGVwLnRvb2x0aXApIHtcclxuICAgICAgICAgICAgICAgIGZvciAodmFyIGsgaW4gc3RlcC50b29sdGlwKSB7XHJcbiAgICAgICAgICAgICAgICAgIHZhciB0cCA9IHN0ZXAudG9vbHRpcFtrXTtcclxuICAgICAgICAgICAgICAgICAgdmFyIGxvY2FsZU5hbWUgPSBnZXRMb2NhbGVOYW1lKHN0ZXBJbmRleCwgayk7XHJcbiAgICAgICAgICAgICAgICAgIGlmIChBcnJheS5pc0FycmF5KHRwKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGRhdGFbbG9jYWxlTmFtZV0gPSB0cFtsYW5nSW5kZXhdO1xyXG4gICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChsYW5nSW5kZXg9PT0wKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICBkYXRhW2xvY2FsZU5hbWVdID0gdHA7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiBkYXRhO1xyXG4gICAgICAgICAgfSk7XHJcbiAgICAgIH07XHJcblxyXG4gICAgICB2YXIgYWN0aW9ucyA9IHt9O1xyXG4gICAgICByZWNpcGVMaXN0LmZvckVhY2goZnVuY3Rpb24ocmVjaXBlSWQpIHtcclxuICAgICAgICBhY3Rpb25zW3JlY2lwZUlkXSA9IGxvYWRSZWNpcGVUcmFuc2xhdGlvbihyZWNpcGVJZCk7XHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgcmV0dXJuICRxLmFsbChhY3Rpb25zKVxyXG4gICAgICAgIC50aGVuKGZ1bmN0aW9uKHJlY2lwZVRyYW5zbGF0aW9uRGF0YSkge1xyXG4gICAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgcmVjaXBlOiByZWNpcGVUcmFuc2xhdGlvbkRhdGFcclxuICAgICAgICAgIH07XHJcbiAgICAgICAgfSlcclxuICAgIH07XHJcblxyXG4gICAgdmFyIGdldEJsaW5rcyA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICByZXR1cm4gYmxpbmtzO1xyXG4gICAgfTtcclxuXHJcbiAgICByZXR1cm4ge1xyXG4gICAgICBzdGFydDogc3RhcnQsXHJcbiAgICAgIHN0ZXA6IHJ1blJlY2lwZVN0ZXAsXHJcbiAgICAgIGhhbmRsZUV2ZW50OiBoYW5kbGVFdmVudCxcclxuICAgICAgbG9hZFRyYW5zbGF0aW9uczogbG9hZFRyYW5zbGF0aW9ucyxcclxuICAgICAgZ2V0QmxpbmtzOiBnZXRCbGlua3NcclxuICAgIH07XHJcbn1dKTtcclxuIiwidmFyIG11c2ljSnMgPSBhbmd1bGFyLm1vZHVsZShcIk11c2ljU2hvd0Nhc2VBcHBcIik7XHJcbm11c2ljSnMuZmFjdG9yeShcIlN5bmNcIiwgWyckcScsIGZ1bmN0aW9uKCRxKSB7XHJcbiAgcmV0dXJuIGZ1bmN0aW9uKCkge1xyXG4gICAgdmFyIHByb21pc2UgPSAkcS53aGVuKCk7XHJcbiAgICB0aGlzLnN5bmMgPSBmdW5jdGlvbihmKSB7XHJcbiAgICAgIHJldHVybiBmdW5jdGlvbigpIHtcclxuICAgICAgICB2YXIgX2FyZ3MgPSBhcmd1bWVudHM7XHJcbiAgICAgICAgdmFyIF9zZWxmID0gdGhpcztcclxuICAgICAgICB2YXIgZGVmZXIgPSAkcS5kZWZlcigpO1xyXG5cclxuICAgICAgICBwcm9taXNlID0gcHJvbWlzZS50aGVuKGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgcmV0dXJuIGYuYXBwbHkoX3NlbGYsIF9hcmdzKVxyXG4gICAgICAgICAgICAudGhlbihmdW5jdGlvbih2YWx1ZSkge1xyXG4gICAgICAgICAgICAgIGRlZmVyLnJlc29sdmUodmFsdWUpO1xyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAuY2F0Y2goZnVuY3Rpb24oZXJyKSB7XHJcbiAgICAgICAgICAgICAgZGVmZXIucmVqZWN0KGVycik7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHJldHVybiBkZWZlci5wcm9taXNlO1xyXG4gICAgICB9O1xyXG4gICAgfTtcclxuICB9O1xyXG59XSk7XHJcbiIsInZhciBtdXNpY1Nob3dDYXNlQXBwID0gYW5ndWxhci5tb2R1bGUoXCJNdXNpY1Nob3dDYXNlQXBwXCIpO1xyXG5tdXNpY1Nob3dDYXNlQXBwLmZhY3RvcnkoXCJ0cmFuc2xhdGlvbnNMb2FkZXJcIiwgWyckcScsICdUeXBlU2VydmljZScsICdlc1RyYW5zbGF0aW9ucycsICdlblRyYW5zbGF0aW9ucycsICdSZWNpcGUnLCBmdW5jdGlvbigkcSwgVHlwZVNlcnZpY2UsIGVzVHJhbnNsYXRpb25zLCBlblRyYW5zbGF0aW9ucywgUmVjaXBlKSB7XHJcbiAgICByZXR1cm4gZnVuY3Rpb24ob3B0aW9ucykge1xyXG4gICAgICB2YXIgYmFzZVRyYW5zbGF0aW9uID0ge31cclxuXHJcbiAgICAgIGlmIChvcHRpb25zLmtleT09PSdlcycpIHtcclxuICAgICAgICBiYXNlVHJhbnNsYXRpb24gPSBlc1RyYW5zbGF0aW9ucztcclxuICAgICAgfVxyXG5cclxuICAgICAgaWYgKG9wdGlvbnMua2V5PT09J2VuJykge1xyXG4gICAgICAgIGJhc2VUcmFuc2xhdGlvbiA9IGVuVHJhbnNsYXRpb25zO1xyXG4gICAgICB9XHJcblxyXG4gICAgICB2YXIgYWRkVHJhbnNsYXRpb25zID0gZnVuY3Rpb24odHIpIHtcclxuICAgICAgICBmb3IgKHZhciBrIGluIHRyKSB7XHJcbiAgICAgICAgICBiYXNlVHJhbnNsYXRpb25ba10gPSB0cltrXTtcclxuICAgICAgICB9XHJcbiAgICAgIH07XHJcblxyXG4gICAgICByZXR1cm4gJHEuYWxsKHtcclxuICAgICAgICB0eXBlVHJhbnNsYXRpb25zOiBUeXBlU2VydmljZS5sb2FkVHJhbnNsYXRpb25zKG9wdGlvbnMpLFxyXG4gICAgICAgIHJlY2lwZVRyYW5zbGF0aW9uczogUmVjaXBlLmxvYWRUcmFuc2xhdGlvbnMob3B0aW9ucylcclxuICAgICAgfSlcclxuICAgICAgICAudGhlbihmdW5jdGlvbihyZXN1bHQpIHtcclxuICAgICAgICAgIGFkZFRyYW5zbGF0aW9ucyhyZXN1bHQudHlwZVRyYW5zbGF0aW9ucyk7XHJcbiAgICAgICAgICBhZGRUcmFuc2xhdGlvbnMocmVzdWx0LnJlY2lwZVRyYW5zbGF0aW9ucyk7XHJcblxyXG4gICAgICAgICAgcmV0dXJuIGJhc2VUcmFuc2xhdGlvbjtcclxuICAgICAgICB9KVxyXG4gICAgfTtcclxufV0pO1xyXG4iLCJ2YXIgbXVzaWNTaG93Q2FzZUFwcCA9IGFuZ3VsYXIubW9kdWxlKFwiTXVzaWNTaG93Q2FzZUFwcFwiKTtcclxuXHJcbnZhciBPYmplY3RDYWNoZSA9IGZ1bmN0aW9uKCkge1xyXG4gIHZhciB3bSA9IG5ldyBXZWFrTWFwKCk7XHJcbiAgdGhpcy5nZXQgPSBmdW5jdGlvbihtdXNpYywgb2JqZWN0KSB7XHJcbiAgICB2YXIgYXJyYXkgPSB3bS5nZXQobXVzaWMpO1xyXG4gICAgdmFyIHN0cm9iaiA9IEpTT04uc3RyaW5naWZ5KG9iamVjdCk7XHJcblxyXG4gICAgaWYgKCFhcnJheSkgcmV0dXJuIHVuZGVmaW5lZDtcclxuXHJcbiAgICB2YXIgZWxlbSA9IGFycmF5LmZpbHRlcihmdW5jdGlvbih4KSB7XHJcbiAgICAgIHJldHVybiB4Lm9iaiA9PT0gc3Ryb2JqO1xyXG4gICAgfSlbMF07XHJcblxyXG4gICAgcmV0dXJuIGVsZW0gJiYgZWxlbS52YWx1ZTtcclxuICB9O1xyXG5cclxuICB0aGlzLnNldCA9IGZ1bmN0aW9uKG11c2ljLCBvYmplY3QsIHZhbHVlKSB7XHJcbiAgICB2YXIgYXJyYXkgPSB3bS5nZXQobXVzaWMpO1xyXG4gICAgdmFyIHN0cm9iaiA9IEpTT04uc3RyaW5naWZ5KG9iamVjdCk7XHJcblxyXG4gICAgaWYgKCFhcnJheSkge1xyXG4gICAgICBhcnJheSA9IFtdO1xyXG4gICAgfVxyXG5cclxuICAgIHZhciBlbGVtID0gYXJyYXkuZmlsdGVyKGZ1bmN0aW9uKHgpIHtcclxuICAgICAgcmV0dXJuIHgub2JqID09PSBzdHJvYmo7XHJcbiAgICB9KVswXTtcclxuXHJcbiAgICBpZiAoZWxlbSkge1xyXG4gICAgICBlbGVtLnZhbHVlID0gdmFsdWU7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBhcnJheS5wdXNoKHtvYmo6IHN0cm9iaiwgdmFsdWU6IHZhbHVlfSk7XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKGFycmF5Lmxlbmd0aCA+IDgpIGFycmF5ID0gYXJyYXkuc2xpY2UoMSk7XHJcblxyXG4gICAgd20uc2V0KG11c2ljLCBhcnJheSk7XHJcbiAgfTtcclxufTtcclxuXHJcbm11c2ljU2hvd0Nhc2VBcHAuc2VydmljZShcIlR5cGVTZXJ2aWNlXCIsIFtcIiRodHRwXCIsIFwiJHFcIiwgZnVuY3Rpb24oJGh0dHAsICRxKSB7XHJcbiAgdmFyIG1ha2VfbXV0YWJsZSA9IGZ1bmN0aW9uKGZjbiwgb3B0aW9ucykge1xyXG4gICAgdmFyIGNhY2hlRGF0YSA9IG5ldyBPYmplY3RDYWNoZSgpO1xyXG5cclxuICAgIHZhciBjYWNoZVdyYXAgPSBmdW5jdGlvbihvYmplY3QsIGJhc2VNdXNpYykge1xyXG4gICAgICB2YXIgb3JpZ2luYWxQcnVuZSA9IGJhc2VNdXNpYy5wcnVuZTtcclxuICAgICAgYmFzZU11c2ljLnBydW5lID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgY2FjaGVEYXRhID0gbmV3IE9iamVjdENhY2hlKCk7XHJcblxyXG4gICAgICAgIGlmIChvcmlnaW5hbFBydW5lKSB7XHJcbiAgICAgICAgICByZXR1cm4gb3JpZ2luYWxQcnVuZS5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xyXG4gICAgICAgIH1cclxuICAgICAgfTtcclxuXHJcbiAgICAgIHJldHVybiBmdW5jdGlvbihjb25zdHJ1Y3Rvcikge1xyXG4gICAgICAgIHJldHVybiBmdW5jdGlvbihtdXNpYywgcGFyYW1zKXtcclxuICAgICAgICAgIHZhciBrZXkgPSBiYXNlTXVzaWM7XHJcbiAgICAgICAgICBpZiAoa2V5LmdldE9yaWdpbmFsKSBrZXkgPSBrZXkuZ2V0T3JpZ2luYWwoKTtcclxuICAgICAgICAgIGNhY2hlRGF0YS5zZXQoa2V5LCBvYmplY3QsIG11c2ljKVxyXG5cclxuICAgICAgICAgIHJldHVybiBjb25zdHJ1Y3RvcihtdXNpYywgcGFyYW1zKTtcclxuICAgICAgICB9O1xyXG4gICAgICB9O1xyXG4gICAgfTtcclxuXHJcbiAgICByZXR1cm4gZnVuY3Rpb24ob2JqZWN0LCBzdWJvYmplY3RzLCBjb21wb25lbnRzKSB7XHJcbiAgICAgIHZhciBjdXJyZW50O1xyXG4gICAgICB2YXIgaW5zdGFuY2VzID0gW107XHJcblxyXG4gICAgICBpZiAob3B0aW9ucyAmJiBvcHRpb25zLnJldXNhYmxlTm9kZSkge1xyXG4gICAgICAgIGN1cnJlbnQgPSBmdW5jdGlvbihtdXNpYywgcGFyYW1zKSB7XHJcbiAgICAgICAgICB2YXIgd3JhcHBlZCA9IHN1Ym9iamVjdHNbMF07XHJcbiAgICAgICAgICB2YXIgY29uc3RydWN0b3IgPSBmY24ob2JqZWN0LCBzdWJvYmplY3RzLm1hcChjYWNoZVdyYXAob2JqZWN0LCBtdXNpYykpLCBjb21wb25lbnRzKTsgXHJcbiAgICAgICAgICB2YXIga2V5ID0gbXVzaWM7XHJcbiAgICAgICAgICBpZiAoa2V5LmdldE9yaWdpbmFsKSBrZXkgPSBrZXkuZ2V0T3JpZ2luYWwoKTtcclxuXHJcbiAgICAgICAgICB2YXIgbmV3QmFzZSA9IGNhY2hlRGF0YS5nZXQoa2V5LCBvYmplY3QpO1xyXG4gICAgICAgICAgaWYgKG5ld0Jhc2UpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHdyYXBwZWQobmV3QmFzZSk7XHJcbiAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICByZXR1cm4gY29uc3RydWN0b3IobXVzaWMsIHBhcmFtcyk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIGN1cnJlbnQgPSBmY24ob2JqZWN0LCBzdWJvYmplY3RzLCBjb21wb25lbnRzKTtcclxuICAgICAgfVxyXG5cclxuICAgICAgaWYgKGN1cnJlbnQudXBkYXRlKSB7XHJcbiAgICAgICAgcmV0dXJuIGN1cnJlbnQ7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIHZhciByZXQgPSBmdW5jdGlvbihtdXNpYywgb3B0aW9ucykge1xyXG4gICAgICAgIHZhciByO1xyXG4gICAgICAgIHZhciB3cmFwcGVkID0ge307XHJcbiAgICAgICAgdmFyIGxhc3RDdXJyZW50ID0gY3VycmVudDtcclxuICAgICAgICB2YXIgcHJveHkgPSBmdW5jdGlvbihuYW1lKSB7XHJcbiAgICAgICAgICB3cmFwcGVkW25hbWVdID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgIGlmIChsYXN0Q3VycmVudCAhPSBjdXJyZW50KSB1cGRhdGUoKTtcclxuICAgICAgICAgICAgcmV0dXJuIHJbbmFtZV0uYXBwbHkociwgYXJndW1lbnRzKTtcclxuICAgICAgICAgIH07XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgdmFyIHVwZGF0ZSA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICB2YXIgbmV3ciA9IGN1cnJlbnQobXVzaWMsIG9wdGlvbnMpO1xyXG4gICAgICAgICAgICBpZiAobmV3ciAhPT0gciAmJiByICYmIHIuZGlzcG9zZSkgci5kaXNwb3NlKCk7XHJcbiAgICAgICAgICAgIHIgPSBuZXdyO1xyXG5cclxuICAgICAgICAgICAgaW5zdGFuY2VzLnB1c2gobmV3cik7XHJcblxyXG4gICAgICAgICAgICBsYXN0Q3VycmVudCA9IGN1cnJlbnQ7XHJcbiAgICAgICAgICAgIGZvciAodmFyIGsgaW4gcikgcHJveHkoayk7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgdXBkYXRlKCk7XHJcblxyXG4gICAgICAgIHJldHVybiB3cmFwcGVkO1xyXG4gICAgICB9O1xyXG5cclxuICAgICAgdmFyIGxhc3RPYmpEYXRhO1xyXG4gICAgICByZXQudXBkYXRlID0gZnVuY3Rpb24obmV3b2JqZWN0LCBfY29tcG9uZW50cykge1xyXG4gICAgICAgIGNvbXBvbmVudHMgPSBfY29tcG9uZW50c1xyXG4gICAgICAgIGlmIChKU09OLnN0cmluZ2lmeShuZXdvYmplY3QpID09PSBsYXN0T2JqRGF0YSkgcmV0dXJuIHJldDtcclxuICAgICAgICBsYXN0T2JqRGF0YSA9IEpTT04uc3RyaW5naWZ5KG5ld29iamVjdCk7XHJcblxyXG4gICAgICAgIGluc3RhbmNlcy5mb3JFYWNoKGZ1bmN0aW9uKGluc3RhbmNlKSB7XHJcbiAgICAgICAgICBpZihpbnN0YW5jZS5kaXNwb3NlKSBpbnN0YW5jZS5kaXNwb3NlKCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgaW5zdGFuY2VzID0gW107XHJcblxyXG4gICAgICAgIGN1cnJlbnQgPSBmY24obmV3b2JqZWN0LCBzdWJvYmplY3RzLCBjb21wb25lbnRzKTtcclxuICAgICAgICByZXR1cm4gcmV0O1xyXG4gICAgICB9O1xyXG5cclxuICAgICAgcmV0dXJuIHJldDtcclxuICAgIH07XHJcbiAgfTtcclxuXHJcblxyXG4gIHZhciBwbHVnaW5zID0gW1wiY29yZVwiXTtcclxuICB2YXIgdHlwZXMgPSBbXTtcclxuICB2YXIgdHJhbnNsYXRpb24gPSB7fTtcclxuICB2YXIgbSA9IGZ1bmN0aW9uKHBsdWdpbk5hbWUpIHtcclxuICAgIHJldHVybiB7XHJcbiAgICAgIGxhbmc6IGZ1bmN0aW9uKGtleSwgdHJhbnNsYXRlRGF0YSkge1xyXG4gICAgICAgIHRyYW5zbGF0aW9uW2tleV0gPXRyYW5zbGF0aW9uW2tleV18fHt9O1xyXG4gICAgICAgIHRyYW5zbGF0aW9uW2tleV1bcGx1Z2luTmFtZV0gPSB0cmFuc2xhdGVEYXRhO1xyXG4gICAgICB9LFxyXG4gICAgICB0eXBlOiBmdW5jdGlvbih0eXBlTmFtZSwgb3B0aW9ucywgY29uc3RydWN0b3IpIHtcclxuICAgICAgICB0eXBlcy5wdXNoKHtcclxuICAgICAgICAgIHRlbXBsYXRlVXJsOiBcInNpdGUvcGx1Z2luL1wiICsgcGx1Z2luTmFtZSArIFwiL1wiICsgb3B0aW9ucy50ZW1wbGF0ZSArIFwiLmh0bWxcIixcclxuICAgICAgICAgIHBhcmFtZXRlcnM6IG9wdGlvbnMucGFyYW1ldGVycyxcclxuICAgICAgICAgIGNvbnN0cnVjdG9yOiBtYWtlX211dGFibGUoY29uc3RydWN0b3IsIHtyZXVzYWJsZU5vZGU6IG9wdGlvbnMucmV1c2FibGVOb2RlfSksXHJcbiAgICAgICAgICBuYW1lOiB0eXBlTmFtZSxcclxuICAgICAgICAgIGNvbXBvc2l0aW9uOiBvcHRpb25zLmNvbXBvc2l0aW9uLFxyXG4gICAgICAgICAgY29tcG9uZW50czogb3B0aW9ucy5jb21wb25lbnRzLFxyXG4gICAgICAgICAgZGVzY3JpcHRpb246IG9wdGlvbnMuZGVzY3JpcHRpb24sXHJcbiAgICAgICAgICBfZGVmYXVsdDogb3B0aW9ucy5fZGVmYXVsdCxcclxuICAgICAgICAgIHN1Ym9iamVjdHM6IG9wdGlvbnMuc3Vib2JqZWN0cyxcclxuICAgICAgICAgIHN0YWNrQXBwZW5kOiBvcHRpb25zLnN0YWNrQXBwZW5kLFxyXG4gICAgICAgICAgbW9uaXRvcjogb3B0aW9ucy5tb25pdG9yXHJcbiAgICAgICAgfSlcclxuICAgICAgfVxyXG4gICAgfTtcclxuICB9O1xyXG5cclxuICB2YXIgbG9hZFBsdWdpbiA9IGZ1bmN0aW9uKHBsdWdpbk5hbWUpIHtcclxuICAgIHJldHVybiAkaHR0cC5nZXQoXCJzaXRlL3BsdWdpbi9cIiArIHBsdWdpbk5hbWUgKyBcIi9pbmRleC5qc1wiKVxyXG4gICAgICAudGhlbihmdW5jdGlvbihyZXN1bHQpIHtcclxuICAgICAgICB2YXIgcnVubmVyQ29kZSA9IHJlc3VsdC5kYXRhO1xyXG4gICAgICAgIHZhciBtb2R1bGUgPSB7ZXhwb3J0OiBmdW5jdGlvbigpe319O1xyXG4gICAgICAgIGV2YWwocnVubmVyQ29kZSk7XHJcblxyXG4gICAgICAgIG1vZHVsZS5leHBvcnQobShwbHVnaW5OYW1lKSk7XHJcbiAgICAgIH0pO1xyXG4gIH07XHJcblxyXG4gIHZhciBwbHVnaW5zTG9hZGVkID0gJHEuYWxsKHBsdWdpbnMubWFwKGxvYWRQbHVnaW4pKTtcclxuXHJcbiAgdmFyIGdldFR5cGVzID0gZnVuY3Rpb24oa2V5d29yZCkge1xyXG4gICAgICB2YXIgaGFzS2V5d29yZCA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICB9O1xyXG5cclxuICAgICAgaWYgKGtleXdvcmQpIHtcclxuICAgICAgICBrZXl3b3JkID0ga2V5d29yZC50b0xvd2VyQ2FzZSgpO1xyXG4gICAgICAgIGhhc0tleXdvcmQgPSBmdW5jdGlvbih4KSB7XHJcbiAgICAgICAgICByZXR1cm4geC5uYW1lLnRvTG93ZXJDYXNlKCkuaW5kZXhPZihrZXl3b3JkKSAhPT0gLTE7XHJcbiAgICAgICAgfTtcclxuICAgICAgfVxyXG5cclxuICAgICAgcmV0dXJuIHBsdWdpbnNMb2FkZWQudGhlbihmdW5jdGlvbigpIHtcclxuICAgICAgICByZXR1cm4gdHlwZXMuZmlsdGVyKGhhc0tleXdvcmQpO1xyXG4gICAgICB9KTtcclxuICB9O1xyXG5cclxuICB2YXIgZ2V0VHlwZSA9IGZ1bmN0aW9uKHR5cGVOYW1lLCBjYWxsYmFjaykge1xyXG4gICAgcmV0dXJuIHBsdWdpbnNMb2FkZWRcclxuICAgICAgLnRoZW4oZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgdmFyIHJldCA9IHR5cGVzLmZpbHRlcihmdW5jdGlvbih0eXBlKSB7IHJldHVybiB0eXBlLm5hbWUgPT09IHR5cGVOYW1lOyB9KVswXTsgXHJcbiAgICAgICAgaWYgKGNhbGxiYWNrKSBjYWxsYmFjayhyZXQpO1xyXG4gICAgICAgIHJldHVybiByZXQ7XHJcbiAgICAgIH0pO1xyXG4gIH07XHJcblxyXG4gIHZhciBsb2FkVHJhbnNsYXRpb25zID0gZnVuY3Rpb24ob3B0aW9ucykge1xyXG4gICAgcmV0dXJuIHBsdWdpbnNMb2FkZWRcclxuICAgICAgLnRoZW4oZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgcmV0dXJuIHRyYW5zbGF0aW9uW29wdGlvbnMua2V5XXx8e307XHJcbiAgICAgIH0pO1xyXG4gIH07XHJcblxyXG4gIHJldHVybiB7XHJcbiAgICBnZXRUeXBlczogZ2V0VHlwZXMsXHJcbiAgICBnZXRUeXBlOiBnZXRUeXBlLFxyXG4gICAgbG9hZFRyYW5zbGF0aW9uczogbG9hZFRyYW5zbGF0aW9uc1xyXG4gIH07XHJcblxyXG59XSk7XHJcblxyXG4iLCJ2YXIgbXVzaWNTaG93Q2FzZUFwcCA9IGFuZ3VsYXIubW9kdWxlKFwiTXVzaWNTaG93Q2FzZUFwcFwiKTtcclxubXVzaWNTaG93Q2FzZUFwcC5mYWN0b3J5KFwiV2VsY29tZU1lc3NhZ2VcIiwgWydsb2NhbGZvcmFnZScsIGZ1bmN0aW9uKGxvY2FsZm9yYWdlKSB7XHJcbiAgICB2YXIgc2tpcCA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICByZXR1cm4gbG9jYWxmb3JhZ2UuZ2V0SXRlbShcIndlbGNvbWVfc2tpcFwiKVxyXG4gICAgICAgIC50aGVuKGZ1bmN0aW9uKHJlc3VsdCkge1xyXG4gICAgICAgICAgcmV0dXJuICEhcmVzdWx0O1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuXHJcbiAgICB2YXIgc2V0U2tpcCA9IGZ1bmN0aW9uKHZhbHVlKSB7XHJcbiAgICAgIGlmICh2YWx1ZSkge1xyXG4gICAgICAgIHJldHVybiBsb2NhbGZvcmFnZS5zZXRJdGVtKFwid2VsY29tZV9za2lwXCIsIHZhbHVlKTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICByZXR1cm4gbG9jYWxmb3JhZ2UucmVtb3ZlSXRlbShcIndlbGNvbWVfc2tpcFwiKTtcclxuICAgICAgfVxyXG4gICAgfTtcclxuXHJcbiAgICByZXR1cm4ge1xyXG4gICAgICBzZXRTa2lwOiBzZXRTa2lwLFxyXG4gICAgICBza2lwOiBza2lwXHJcbiAgICB9O1xyXG59XSk7XHJcbiIsInZhciBtdXNpY1Nob3dDYXNlQXBwID0gYW5ndWxhci5tb2R1bGUoXCJNdXNpY1Nob3dDYXNlQXBwXCIpO1xyXG5tdXNpY1Nob3dDYXNlQXBwLmZhY3RvcnkoXCJfbG9jYWxmb3JhZ2VcIiwgWyckcScsICdsb2NhbGZvcmFnZScsIGZ1bmN0aW9uKCRxLCBsb2NhbGZvcmFnZSkge1xyXG4gIHZhciBnZXRJdGVtID0gbG9jYWxmb3JhZ2UuZ2V0SXRlbS5iaW5kKGxvY2FsZm9yYWdlKTtcclxuXHJcbiAgdmFyIHJlbGVhc2VXaXRoSW5kZXggPSBmdW5jdGlvbihpbmRleCwgYnl0ZXMpIHtcclxuICAgIGlmIChpbmRleC5sZW5ndGggPT09IDApIHJldHVybiAkcS53aGVuKGluZGV4KTtcclxuICAgIGlmIChieXRlcyA8PSAwKSByZXR1cm4gJHEud2hlbihpbmRleCk7XHJcblxyXG4gICAgdmFyIG5leHRFbnRyeSA9IGluZGV4LnNoaWZ0KCk7XHJcbiAgICByZXR1cm4gbG9jYWxmb3JhZ2UuZ2V0SXRlbShuZXh0RW50cnkuaWQpXHJcbiAgICAgIC50aGVuKGZ1bmN0aW9uKHZhbHVlKSB7XHJcbiAgICAgICAgcmV0dXJuIGxvY2FsZm9yYWdlLnJlbW92ZUl0ZW0obmV4dEVudHJ5LmlkKVxyXG4gICAgICAgICAgLnRoZW4oZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICByZXR1cm4gcmVsZWFzZVdpdGhJbmRleChpbmRleCwgYnl0ZXMgLSAodmFsdWUgPyB2YWx1ZS5sZW5ndGggOiAwKSk7XHJcbiAgICAgICAgICB9KTtcclxuICAgICAgfSk7XHJcbiAgfTtcclxuXHJcbiAgdmFyIGNsZWFySXRlbSA9IGZ1bmN0aW9uKGRhdGEpIHtcclxuICAgIHJldHVybiB7aWQ6IGRhdGEuaWQsIG5hbWU6IGRhdGEubmFtZSwgdHlwZTogZGF0YS50eXBlfTtcclxuICB9O1xyXG5cclxuICB2YXIgcmVsZWFzZSA9IGZ1bmN0aW9uKGJ5dGVzKSB7XHJcbiAgICByZXR1cm4gbG9jYWxmb3JhZ2UuZ2V0SXRlbShcInJlY3ljbGVcIilcclxuICAgICAgLnRoZW4oZnVuY3Rpb24oaW5kZXgpIHtcclxuICAgICAgICByZXR1cm4gcmVsZWFzZVdpdGhJbmRleChpbmRleCwgYnl0ZXMpO1xyXG4gICAgICB9KVxyXG4gICAgICAudGhlbihmdW5jdGlvbihuZXdJbmRleCkge1xyXG4gICAgICAgIHJldHVybiBsb2NhbGZvcmFnZS5zZXRJdGVtKFwicmVjeWNsZVwiLCBuZXdJbmRleC5tYXAoY2xlYXJJdGVtKSk7XHJcbiAgICAgIH0pO1xyXG4gIH07XHJcblxyXG4gIHZhciBzZXRJdGVtID0gZnVuY3Rpb24oa2V5LCBvYmplY3QsIGlzcmV0cnkpIHtcclxuICAgIHJldHVybiBsb2NhbGZvcmFnZS5zZXRJdGVtKGtleSwgb2JqZWN0KVxyXG4gICAgICAuY2F0Y2goZnVuY3Rpb24oZXJyKSB7XHJcbiAgICAgICAgaWYgKCFpc3JldHJ5KSB7XHJcbiAgICAgICAgICByZXR1cm4gcmVsZWFzZShvYmplY3QubGVuZ3RoKVxyXG4gICAgICAgICAgICAudGhlbihmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICByZXR1cm4gc2V0SXRlbShrZXksIG9iamVjdCwgdHJ1ZSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhyb3cgZXJyO1xyXG4gICAgICB9KTtcclxuICB9O1xyXG5cclxuXHJcbiAgdmFyIHJlbW92ZUl0ZW0gPSBsb2NhbGZvcmFnZS5yZW1vdmVJdGVtLmJpbmQobG9jYWxmb3JhZ2UpO1xyXG5cclxuICByZXR1cm4ge1xyXG4gICAgZ2V0SXRlbTogZ2V0SXRlbSxcclxuICAgIHNldEl0ZW06IHNldEl0ZW0sXHJcbiAgICByZW1vdmVJdGVtOiByZW1vdmVJdGVtXHJcbiAgfTtcclxufV0pO1xyXG4iLCJ2YXIgbXVzaWNTaG93Q2FzZUFwcCA9IGFuZ3VsYXIubW9kdWxlKFwiTXVzaWNTaG93Q2FzZUFwcFwiKTtcclxuXHJcbm11c2ljU2hvd0Nhc2VBcHAuZmlsdGVyKFwiaW5zdHJ1bWVudF9uYW1lXCIsIGZ1bmN0aW9uKCkge1xyXG4gIHJldHVybiBmdW5jdGlvbihpbnN0cnVtZW50SWQsIGluc3RydW1lbnRNYXApIHtcclxuICAgIHJldHVybiBpbnN0cnVtZW50TWFwW2luc3RydW1lbnRJZF0gJiYgaW5zdHJ1bWVudE1hcFtpbnN0cnVtZW50SWRdID8gaW5zdHJ1bWVudE1hcFtpbnN0cnVtZW50SWRdLm5hbWUgOiBpbnN0cnVtZW50SWQ7XHJcbiAgfTtcclxufSk7XHJcblxyXG5tdXNpY1Nob3dDYXNlQXBwLmZpbHRlcihcImluc3RydW1lbnRfdHlwZVwiLCBmdW5jdGlvbigpIHtcclxuICByZXR1cm4gZnVuY3Rpb24oaW5zdHJ1bWVudElkLCBpbnN0cnVtZW50TWFwKSB7XHJcbiAgICByZXR1cm4gaW5zdHJ1bWVudE1hcFtpbnN0cnVtZW50SWRdICYmIGluc3RydW1lbnRNYXBbaW5zdHJ1bWVudElkXSA/IGluc3RydW1lbnRNYXBbaW5zdHJ1bWVudElkXS50eXBlIDogJ2luc3RydW1lbnQnO1xyXG4gIH07XHJcbn0pO1xyXG5cclxubXVzaWNTaG93Q2FzZUFwcC5maWx0ZXIoXCJibG9ja19uYW1lXCIsIGZ1bmN0aW9uKCkge1xyXG4gIHJldHVybiBmdW5jdGlvbihibG9jaywgaW5kZXhNYXApIHtcclxuICAgIHJldHVybiBpbmRleE1hcFtibG9jay5pZF0gJiYgaW5kZXhNYXBbYmxvY2suaWRdLmluZGV4ID8gaW5kZXhNYXBbYmxvY2suaWRdLmluZGV4Lm5hbWUgOiBibG9jay5pZDtcclxuICB9O1xyXG59KTtcclxuXHJcbm11c2ljU2hvd0Nhc2VBcHAuZmlsdGVyKFwiYmxvY2tfbGVuZ3RoXCIsIFtcIlBhdHRlcm5cIiwgZnVuY3Rpb24oUGF0dGVybikge1xyXG4gIHJldHVybiBmdW5jdGlvbihibG9jaywgaW5kZXhNYXAsIG1lYXN1cmUpIHtcclxuICAgIGlmICghYmxvY2suaWQpIHJldHVybiAxO1xyXG4gICAgaWYgKCFpbmRleE1hcFtibG9jay5pZF0pIHJldHVybiAxO1xyXG4gICAgaWYgKCFpbmRleE1hcFtibG9jay5pZF0uY29udGVudHMpIHJldHVybiAxO1xyXG5cclxuICAgIHJldHVybiBQYXR0ZXJuLmNvbXB1dGVNZWFzdXJlQ291bnQoaW5kZXhNYXBbYmxvY2suaWRdLmNvbnRlbnRzLCBtZWFzdXJlKTtcclxuICB9O1xyXG59XSk7XHJcblxyXG5tdXNpY1Nob3dDYXNlQXBwLmNvbnRyb2xsZXIoXCJyZWNvcmRPcHRpb25zQ3RybFwiLCBbXCIkc2NvcGVcIiwgXCIkdWliTW9kYWxJbnN0YW5jZVwiLCBcIlJlY2lwZVwiLCBmdW5jdGlvbigkc2NvcGUsICR1aWJNb2RhbEluc3RhbmNlLCBSZWNpcGUpIHtcclxuICAkc2NvcGUubnVtQ2hhbm5lbHMgPSAyO1xyXG4gICRzY29wZS5lbmNvZGluZyA9IFwid2F2XCI7XHJcbiAgJHNjb3BlLnJlY2lwZSA9IFJlY2lwZS5zdGFydDtcclxuXHJcbiAgJHNjb3BlLmNhbmNlbCA9IGZ1bmN0aW9uKCkge1xyXG4gICAgJHVpYk1vZGFsSW5zdGFuY2UuZGlzbWlzcygpO1xyXG4gIH07XHJcblxyXG4gICRzY29wZS5zdGFydCA9IGZ1bmN0aW9uKCkge1xyXG4gICAgJHNjb3BlLnJlY2lwZS5yYWlzZShcInNvbmdfcmVjX2NvbmZpcm1cIik7XHJcblxyXG4gICAgJHVpYk1vZGFsSW5zdGFuY2UuY2xvc2Uoe1xyXG4gICAgICBlbmNvZGluZzogJHNjb3BlLmVuY29kaW5nLFxyXG4gICAgICBudW1DaGFubmVsczogJHNjb3BlLm51bUNoYW5uZWxzXHJcbiAgICB9KTtcclxuICB9O1xyXG59XSk7XHJcblxyXG5tdXNpY1Nob3dDYXNlQXBwLmNvbnRyb2xsZXIoXCJEYXNoYm9hcmRDb250cm9sbGVyXCIsIFtcIiRzY29wZVwiLCBmdW5jdGlvbigkc2NvcGUpIHtcclxuICAkc2NvcGUuJGVtaXQoJ3N3aXRjaFByb2plY3QnLCBcImRlZmF1bHRcIik7XHJcbn1dKTtcclxuXHJcbm11c2ljU2hvd0Nhc2VBcHAuY29udHJvbGxlcihcIlByb2plY3REYXNoYm9hcmRDb250cm9sbGVyXCIsIFtcIiRzY29wZVwiLCBcIiRyb3V0ZVBhcmFtc1wiLCBmdW5jdGlvbigkc2NvcGUsICRyb3V0ZVBhcmFtcykge1xyXG4gICRzY29wZS4kZW1pdCgnc3dpdGNoUHJvamVjdCcsICRyb3V0ZVBhcmFtcy5wcm9qZWN0KTtcclxufV0pO1xyXG5cclxubXVzaWNTaG93Q2FzZUFwcC5jb250cm9sbGVyKFwiU29uZ0VkaXRvckNvbnRyb2xsZXJcIiwgW1wiJHNjb3BlXCIsIFwiJHVpYk1vZGFsXCIsIFwiJHFcIiwgXCIkdGltZW91dFwiLCBcIiRyb3V0ZVBhcmFtc1wiLCBcIiRodHRwXCIsIFwiTXVzaWNDb250ZXh0XCIsIFwiRmlsZVJlcG9zaXRvcnlcIiwgXCJJbnN0cnVtZW50U2V0XCIsIFwiUGF0dGVyblwiLCBcIkV4cG9ydFwiLCBcIlRJQ0tTX1BFUl9CRUFUXCIsIFwiU09OR19NQVhfVFJBQ0tTXCIsIFxyXG4gICAgZnVuY3Rpb24oJHNjb3BlLCAkdWliTW9kYWwsICRxLCAkdGltZW91dCwgJHJvdXRlUGFyYW1zLCAkaHR0cCwgTXVzaWNDb250ZXh0LCBGaWxlUmVwb3NpdG9yeSwgSW5zdHJ1bWVudFNldCwgUGF0dGVybiwgRXhwb3J0LCBUSUNLU19QRVJfQkVBVCwgU09OR19NQVhfVFJBQ0tTKSB7XHJcblxyXG4gICRzY29wZS5pbmRleE1hcCA9IHt9O1xyXG4gIHZhciBpZCA9ICRyb3V0ZVBhcmFtcy5pZDtcclxuICB2YXIgaW5zdFNldCA9IEluc3RydW1lbnRTZXQoKTtcclxuICB2YXIgcGxheWluZ1N0YXJ0T2Zmc2V0ID0gMDtcclxuXHJcbiAgJHNjb3BlLiRlbWl0KCdzd2l0Y2hQcm9qZWN0JywgJHJvdXRlUGFyYW1zLnByb2plY3QpO1xyXG5cclxuICB2YXIgcHhUb1RpY2tzID0gZnVuY3Rpb24ocHgpIHtcclxuICAgIHZhciBiZWF0V2lkdGggPSAxNTQgLyAkc2NvcGUuZmlsZS5tZWFzdXJlO1xyXG4gICAgdmFyIHpvb21MZXZlbCA9IDE7XHJcbiAgICByZXR1cm4gVElDS1NfUEVSX0JFQVQqcHgvem9vbUxldmVsL2JlYXRXaWR0aDtcclxuICB9O1xyXG5cclxuICAkc2NvcGUuc2VlayA9IGZ1bmN0aW9uKGV2ZW50KSB7XHJcbiAgICBpZiAoJHNjb3BlLmN1cnJlbnRSZWMpIHJldHVybjtcclxuXHJcbiAgICBwbGF5aW5nU3RhcnRPZmZzZXQgPSBweFRvVGlja3MoZXZlbnQub2Zmc2V0WCk7XHJcbiAgICAkc2NvcGUuJGJyb2FkY2FzdChcInJlc2V0Q2xvY2tcIiwgcGxheWluZ1N0YXJ0T2Zmc2V0KTtcclxuXHJcbiAgICBpZiAoJHNjb3BlLnBsYXlpbmcpIHtcclxuICAgICAgJHNjb3BlLnBsYXlpbmcuc3RvcCgpO1xyXG4gICAgICAkc2NvcGUucGxheWluZyA9IG51bGw7XHJcbiAgICAgICRzY29wZS5yZXBsYXkoKTtcclxuICAgIH1cclxuICB9O1xyXG5cclxuICAkc2NvcGUucGF0dGVybkVkaXQgPSBmdW5jdGlvbihibG9jaykge1xyXG4gICAgZG9jdW1lbnQubG9jYXRpb24gPSBcIiMvZWRpdG9yL1wiICsgJHJvdXRlUGFyYW1zLnByb2plY3QgKyBcIi9wYXR0ZXJuL1wiICsgYmxvY2suaWQ7XHJcbiAgfTtcclxuXHJcbiAgJHNjb3BlLmV4cG9ydEl0ZW0gPSBmdW5jdGlvbigpIHtcclxuICAgIEV4cG9ydC5leHBvcnRGaWxlKCRzY29wZS5maWxlSW5kZXgubmFtZSwgJHNjb3BlLmZpbGVJbmRleC5pZCk7XHJcbiAgfTtcclxuXHJcbiAgJHNjb3BlLnJlbW92ZUl0ZW0gPSBmdW5jdGlvbigpIHtcclxuICAgIGlmICgkc2NvcGUuZmlsZUluZGV4LmJ1aWx0SW4pIHtcclxuICAgICAgJHNjb3BlLmZpbGUgPSBudWxsO1xyXG4gICAgICAkc2NvcGUuZmlsZUluZGV4ID0gbnVsbDtcclxuICAgICAgRmlsZVJlcG9zaXRvcnkuZGVzdHJveUZpbGUoaWQpXHJcbiAgICAgICAgLnRoZW4oZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICByZWxvYWRGcm9tUmVwbygpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcblxyXG4gICAgRmlsZVJlcG9zaXRvcnkubW92ZVRvUmVjeWNsZUJpbihpZClcclxuICAgICAgLnRoZW4oZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgZG9jdW1lbnQubG9jYXRpb24gPSBcIiMvZWRpdG9yL1wiICsgJHJvdXRlUGFyYW1zLnByb2plY3Q7XHJcbiAgICAgIH0pO1xyXG4gIH07XHJcblxyXG4gICRzY29wZS5yZW1vdmUgPSBmdW5jdGlvbihibG9jaykge1xyXG4gICAgZGVsZXRlIGJsb2NrLmlkO1xyXG4gICAgY2hlY2tQYXlsb2FkKCk7XHJcbiAgICAkc2NvcGUuZmlsZUNoYW5nZWQoKTtcclxuICB9O1xyXG5cclxuICAkc2NvcGUuY3VycmVudFJlYyA9IG51bGw7XHJcblxyXG4gICRzY29wZS5yZWNvcmQgPSBmdW5jdGlvbigpIHtcclxuICAgIGlmICgkc2NvcGUucGxheWluZykge1xyXG4gICAgICAkc2NvcGUucGxheWluZy5zdG9wKCk7XHJcbiAgICAgICRzY29wZS5wbGF5aW5nID0gbnVsbDtcclxuXHJcbiAgICAgICRzY29wZS4kYnJvYWRjYXN0KFwicGF1c2VDbG9ja1wiKTtcclxuICAgIH1cclxuXHJcbiAgICB2YXIgbW9kYWxJbnMgPSAkdWliTW9kYWwub3Blbih7XHJcbiAgICAgIHRlbXBsYXRlVXJsOiBcInNpdGUvdGVtcGxhdGVzL21vZGFsL3JlY29yZE9wdGlvbnMuaHRtbFwiLFxyXG4gICAgICBjb250cm9sbGVyOiBcInJlY29yZE9wdGlvbnNDdHJsXCJcclxuICAgIH0pO1xyXG5cclxuICAgIG1vZGFsSW5zLnJlc3VsdC50aGVuKGZ1bmN0aW9uKGVuY29kaW5nT3B0aW9ucykge1xyXG4gICAgICAkc2NvcGUuY3VycmVudFJlYyA9IE11c2ljQ29udGV4dC5yZWNvcmQoe1xyXG4gICAgICAgIGVuY29kaW5nOiBlbmNvZGluZ09wdGlvbnMuZW5jb2RpbmcsIFxyXG4gICAgICAgIG51bUNoYW5uZWxzOiBlbmNvZGluZ09wdGlvbnMubnVtQ2hhbm5lbHNcclxuICAgICAgfSwgZnVuY3Rpb24oYmxvYikge1xyXG4gICAgICAgIHZhciBhID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImFcIik7XHJcbiAgICAgICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChhKTtcclxuICAgICAgICBhLnN0eWxlID0gXCJkaXNwbGF5OiBub25lXCI7XHJcblxyXG4gICAgICAgIHZhciB1cmwgID0gd2luZG93LlVSTC5jcmVhdGVPYmplY3RVUkwoYmxvYik7XHJcbiAgICAgICAgYS5ocmVmID0gdXJsO1xyXG4gICAgICAgIGEuZG93bmxvYWQgPSAkc2NvcGUuZmlsZUluZGV4Lm5hbWUgKyBcIi5cIiArIGVuY29kaW5nT3B0aW9ucy5lbmNvZGluZztcclxuICAgICAgICBhLmNsaWNrKCk7XHJcbiAgICAgICAgd2luZG93LlVSTC5yZXZva2VPYmplY3RVUkwodXJsKTtcclxuXHJcbiAgICAgICAgJHNjb3BlLnJlY2lwZS5yYWlzZSgnc29uZ19yZWNfc3RvcCcpO1xyXG4gICAgICB9KTtcclxuXHJcbiAgICAgICRzY29wZS5wbGF5KCk7XHJcbiAgICB9KTtcclxuICB9O1xyXG5cclxuICAkc2NvcGUuc3RvcCA9IGZ1bmN0aW9uKCkge1xyXG4gICAgcGxheWluZ1N0YXJ0T2Zmc2V0ID0gMDtcclxuXHJcbiAgICAkc2NvcGUuJGJyb2FkY2FzdChcInN0b3BDbG9ja1wiKTtcclxuICAgICRzY29wZS4kYnJvYWRjYXN0KFwicmVzZXRDbG9ja1wiLCBwbGF5aW5nU3RhcnRPZmZzZXQpO1xyXG5cclxuICAgIGlmICgkc2NvcGUucGxheWluZykgJHNjb3BlLnBsYXlpbmcuc3RvcCgpO1xyXG4gICAgJHNjb3BlLnJlY2lwZS5yYWlzZShcInNvbmdfcGxheV9zdG9wcGVkXCIpO1xyXG4gICAgJHNjb3BlLnBsYXlpbmcgPSBudWxsO1xyXG4gIH07XHJcblxyXG4gICRzY29wZS5wbGF5aW5nID0gbnVsbDtcclxuXHJcbiAgJHNjb3BlLiRvbigncGF1c2VkQ2xvY2snLCBmdW5jdGlvbihldnQsIHRpY2tzKSB7XHJcbiAgICBwbGF5aW5nU3RhcnRPZmZzZXQgPSB0aWNrczsgICAgXHJcbiAgfSk7XHJcblxyXG4gICRzY29wZS5wbGF5ID0gZnVuY3Rpb24oKSB7XHJcbiAgICBpZiAoJHNjb3BlLnBsYXlpbmcpIHtcclxuICAgICAgJHNjb3BlLnBsYXlpbmcuc3RvcCgpO1xyXG4gICAgICAkc2NvcGUucGxheWluZyA9IG51bGw7XHJcblxyXG4gICAgICAkc2NvcGUuJGJyb2FkY2FzdChcInBhdXNlQ2xvY2tcIik7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuXHJcbiAgICAkc2NvcGUucmVwbGF5KCk7XHJcbiAgfTtcclxuXHJcbiAgJHNjb3BlLnJlcGxheSA9IGZ1bmN0aW9uKCkge1xyXG4gICAgTXVzaWNDb250ZXh0LnJlc3VtZUF1ZGlvKCk7XHJcblxyXG4gICAgJHEuYWxsKGluc3RTZXQuYWxsKVxyXG4gICAgICAudGhlbihmdW5jdGlvbihpbnN0cnVtZW50cyl7XHJcbiAgICAgICAgdmFyIHBhdHRlcm5zID0ge307XHJcblxyXG4gICAgICAgIHZhciBjcmVhdGVQYXR0ZXJuID0gZnVuY3Rpb24oaWQsIHNvbmdUcmFja0lkeCkge1xyXG4gICAgICAgICAgaWYgKCFpZCkgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgICBpZiAocGF0dGVybnNbaWRdKSByZXR1cm4gcGF0dGVybnNbaWRdO1xyXG5cclxuICAgICAgICAgIHZhciBwYXR0ZXJuID0gJHNjb3BlLmluZGV4TWFwW2lkXS5jb250ZW50cztcclxuICAgICAgICAgIHZhciBjaGFuZ2VkQnBtID0gT2JqZWN0LmNyZWF0ZShwYXR0ZXJuKTtcclxuICAgICAgICAgIGNoYW5nZWRCcG0uYnBtID0gJHNjb3BlLmZpbGUuYnBtO1xyXG5cclxuICAgICAgICAgIHBhdHRlcm5zW2lkXSA9IFBhdHRlcm4ucGF0dGVybkNvbXBvc2UoY2hhbmdlZEJwbSwgaW5zdHJ1bWVudHMsIHNvbmdUcmFja0lkeCpTT05HX01BWF9UUkFDS1MsIGZ1bmN0aW9uKCkge30pO1xyXG4gICAgICAgICAgcmV0dXJuIHBhdHRlcm5zW2lkXTtcclxuICAgICAgICB9OyAgICAgICAgXHJcblxyXG4gICAgICAgIHZhciBzb25nID0gbmV3IE1VU0lDLlNvbmcoXHJcbiAgICAgICAgICAkc2NvcGUuZmlsZS50cmFja3MubWFwKGZ1bmN0aW9uKHRyYWNrLCBzb25nVHJhY2tJZHgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRyYWNrLmJsb2Nrcy5tYXAoZnVuY3Rpb24oYmxvY2spIHtcclxuICAgICAgICAgICAgICByZXR1cm4gY3JlYXRlUGF0dGVybihibG9jay5pZCwgc29uZ1RyYWNrSWR4KTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICB9KVxyXG4gICAgICAgICwge1xyXG4gICAgICAgICAgICBtZWFzdXJlOiAkc2NvcGUuZmlsZS5tZWFzdXJlLFxyXG4gICAgICAgICAgICBicG06ICRzY29wZS5maWxlLmJwbSxcclxuICAgICAgICAgICAgdGlja3NfcGVyX2JlYXQ6IFRJQ0tTX1BFUl9CRUFULFxyXG4gICAgICAgICAgICBzdGFydDogcGxheWluZ1N0YXJ0T2Zmc2V0XHJcbiAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgJHNjb3BlLiRicm9hZGNhc3QoXCJzdGFydENsb2NrXCIsIHNvbmcudGltZVRvVGlja3MoKSk7XHJcbiAgICAgICAgJHNjb3BlLnBsYXlpbmcgPSBzb25nLnBsYXkoe1xyXG4gICAgICAgICAgb25TdG9wOiBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgJHNjb3BlLiRicm9hZGNhc3QoXCJzdG9wQ2xvY2tcIik7XHJcbiAgICAgICAgICAgICRzY29wZS4kYnJvYWRjYXN0KFwicmVzZXRDbG9ja1wiLCBwbGF5aW5nU3RhcnRPZmZzZXQpO1xyXG5cclxuICAgICAgICAgICAgJHNjb3BlLnJlY2lwZS5yYWlzZShcInNvbmdfcGxheV9zdG9wcGVkXCIpO1xyXG4gICAgICAgICAgICAkc2NvcGUucGxheWluZyA9IG51bGw7XHJcbiAgICAgICAgICAgIGlmICgkc2NvcGUuY3VycmVudFJlYykgJHNjb3BlLmN1cnJlbnRSZWMuc3RvcCgpO1xyXG4gICAgICAgICAgICAkc2NvcGUuY3VycmVudFJlYyA9IG51bGw7XHJcbiAgICAgICAgICAgICR0aW1lb3V0KGZ1bmN0aW9uKCkge30pO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgfSk7XHJcbiAgfTtcclxuXHJcbiAgJHNjb3BlLmluZGV4Q2hhbmdlZCA9IGZ1bmN0aW9uKCkge1xyXG4gICAgJHNjb3BlLmZpbGVJbmRleC5yZWYgPSBGaWxlUmVwb3NpdG9yeS5nZXRSZWZzKFwic29uZ1wiLCAkc2NvcGUuZmlsZSk7XHJcbiAgICBGaWxlUmVwb3NpdG9yeS51cGRhdGVJbmRleChpZCwgJHNjb3BlLmZpbGVJbmRleCk7XHJcbiAgfTtcclxuXHJcbiAgJHNjb3BlLmZpbGVDaGFuZ2VkID0gZm4uZGVib3VuY2UoZnVuY3Rpb24oKSB7XHJcbiAgICBGaWxlUmVwb3NpdG9yeS51cGRhdGVGaWxlKGlkLCAkc2NvcGUuZmlsZSlcclxuICAgICAgLnRoZW4oZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgJHNjb3BlLmluZGV4Q2hhbmdlZCgpO1xyXG4gICAgICB9KTtcclxuICB9LDEwMCk7XHJcblxyXG4gIHZhciBjaGVja1BheWxvYWQgPSBmdW5jdGlvbigpIHtcclxuICAgIHZhciBtYXhibG9ja3MgPSAwO1xyXG4gICAgdmFyIG1heFRyYWNrSW5kZXggPSAwO1xyXG5cclxuICAgIGlmICghJHNjb3BlLmZpbGUpIHJldHVybjtcclxuICAgIGlmICghJHNjb3BlLmZpbGUudHJhY2tzKSByZXR1cm47XHJcblxyXG4gICAgJHNjb3BlLmZpbGUudHJhY2tzLmZvckVhY2goZnVuY3Rpb24odHJhY2ssIHRyYWNrSW5kZXgpIHtcclxuICAgICAgZm9yICh2YXIgaT0wO2k8dHJhY2suYmxvY2tzLmxlbmd0aDtpKyspIHtcclxuICAgICAgICBpZiAodHJhY2suYmxvY2tzW2ldLmlkKXtcclxuICAgICAgICAgIHZhciBtQ291bnQgPSBQYXR0ZXJuLmNvbXB1dGVNZWFzdXJlQ291bnQoJHNjb3BlLmluZGV4TWFwW3RyYWNrLmJsb2Nrc1tpXS5pZF0uY29udGVudHMsICRzY29wZS5maWxlLm1lYXN1cmUpO1xyXG4gICAgICAgICAgaWYgKGkrbUNvdW50Pm1heGJsb2NrcykgbWF4YmxvY2tzPWkrbUNvdW50O1xyXG4gICAgICAgICAgaWYgKHRyYWNrSW5kZXggPiBtYXhUcmFja0luZGV4KSBtYXhUcmFja0luZGV4ID0gdHJhY2tJbmRleDtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG5cclxuICAgIGlmICgkc2NvcGUuZmlsZS50cmFja3MubGVuZ3RoIDwgbWF4VHJhY2tJbmRleCsyICYmICRzY29wZS5maWxlLnRyYWNrcy5sZW5ndGggPCBTT05HX01BWF9UUkFDS1MpIHtcclxuICAgICAgJHNjb3BlLmZpbGUudHJhY2tzLnB1c2goe1xyXG4gICAgICAgIGJsb2NrczogJHNjb3BlLmZpbGUudHJhY2tzWzBdLmJsb2Nrcy5tYXAoZnVuY3Rpb24oKSB7cmV0dXJuIHt9O30pXHJcbiAgICAgIH0pO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgJHNjb3BlLmZpbGUudHJhY2tzID0gJHNjb3BlLmZpbGUudHJhY2tzLnNsaWNlKDAsbWF4VHJhY2tJbmRleCsyKTtcclxuICAgIH1cclxuXHJcbiAgICB2YXIgdGFyZ2V0ID0gbWF4YmxvY2tzICsgMTtcclxuICAgICRzY29wZS5maWxlLnRyYWNrcy5mb3JFYWNoKGZ1bmN0aW9uKHRyYWNrKSB7XHJcbiAgICAgIGlmICh0YXJnZXQgPiB0cmFjay5ibG9ja3MubGVuZ3RoKSB7XHJcbiAgICAgICAgdmFyIHBheWxvYWQgPSB0YXJnZXQtdHJhY2suYmxvY2tzLmxlbmd0aDtcclxuICAgICAgICBmb3IgKHZhciBpPTA7aTxwYXlsb2FkO2krKykge1xyXG4gICAgICAgICAgdHJhY2suYmxvY2tzLnB1c2goe30pO1xyXG4gICAgICAgIH1cclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICB0cmFjay5ibG9ja3MgPSB0cmFjay5ibG9ja3Muc2xpY2UoMCwgdGFyZ2V0KTtcclxuICAgICAgfVxyXG4gICAgfSk7XHJcbiAgICAkc2NvcGUuZmlsZUNoYW5nZWQoKTtcclxuICB9O1xyXG4gICRzY29wZS4kd2F0Y2goXCJmaWxlLm1lYXN1cmVcIiwgY2hlY2tQYXlsb2FkKTtcclxuXHJcbiAgJHNjb3BlLm9uRHJvcENvbXBsZXRlID0gZnVuY3Rpb24oJGRhdGEsJGV2ZW50LGJsb2NrLHNvbmdUcmFja0lkeCkge1xyXG4gICAgaWYgKCRkYXRhLmZyb21CbG9jaykge1xyXG5cclxuICAgICAgdmFyIHN3YXBJZCA9IGJsb2NrLmlkO1xyXG4gICAgICBibG9jay5pZCA9ICRkYXRhLmZyb21CbG9jay5pZDtcclxuICAgICAgJGRhdGEuZnJvbUJsb2NrLmlkID0gc3dhcElkO1xyXG5cclxuICAgICAgY2hlY2tQYXlsb2FkKCk7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuICAgIGlmICgkZGF0YS50eXBlICE9PSAncGF0dGVybicpIHJldHVybjtcclxuXHJcbiAgICBibG9jay5pZCA9ICRkYXRhLmlkO1xyXG4gICAgRmlsZVJlcG9zaXRvcnkuZ2V0RmlsZSgkZGF0YS5pZClcclxuICAgICAgLnRoZW4oZnVuY3Rpb24oZikge1xyXG4gICAgICAgIGYuY29udGVudHMudHJhY2tzLmZvckVhY2goZnVuY3Rpb24odHJhY2ssIGlkeCkge1xyXG4gICAgICAgICAgaWYgKHRyYWNrLmluc3RydW1lbnQpIGluc3RTZXQubG9hZCh0cmFjay5pbnN0cnVtZW50LCBzb25nVHJhY2tJZHgqU09OR19NQVhfVFJBQ0tTICsgaWR4KTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgJHNjb3BlLmluZGV4TWFwWyRkYXRhLmlkXSA9IGY7XHJcbiAgICAgICAgY2hlY2tQYXlsb2FkKCk7XHJcbiAgICAgICAgJHNjb3BlLmZpbGVDaGFuZ2VkKCk7XHJcblxyXG4gICAgICAgICRzY29wZS5yZWNpcGUucmFpc2UoJ3NvbmdfcGF0dGVybl9kcm9wcGVkJyk7XHJcbiAgICAgIH0pO1xyXG4gICAgXHJcbiAgfTtcclxuXHJcbiAgdmFyIHJlbG9hZEZyb21SZXBvID0gZnVuY3Rpb24oKSB7XHJcbiAgICB2YXIgYmxvY2tfaWRzID0ge307XHJcblxyXG4gICAgRmlsZVJlcG9zaXRvcnkuZ2V0RmlsZShpZCkudGhlbihmdW5jdGlvbihmaWxlKSB7XHJcbiAgICAgIGlmIChmaWxlKSB7XHJcbiAgICAgICAgZmlsZS5jb250ZW50cy50cmFja3MuZm9yRWFjaChmdW5jdGlvbih0cmFjaywgaWR4KSB7XHJcbiAgICAgICAgICB0cmFjay5ibG9ja3MuZm9yRWFjaChmdW5jdGlvbihibG9jayl7XHJcbiAgICAgICAgICAgIGlmIChibG9jayAmJiBibG9jay5pZCkge1xyXG4gICAgICAgICAgICAgIGlmICghYmxvY2tfaWRzW2Jsb2NrLmlkXSl7XHJcbiAgICAgICAgICAgICAgICBibG9ja19pZHNbYmxvY2suaWRdID0gRmlsZVJlcG9zaXRvcnkuZ2V0RmlsZShibG9jay5pZClcclxuICAgICAgICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24oZmlsZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICBmaWxlOiBmaWxlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgaWR4OiBpZHhcclxuICAgICAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH0pXHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH07XHJcblxyXG4gICAgICByZXR1cm4gJHEuYWxsKGJsb2NrX2lkcylcclxuICAgICAgICAudGhlbihmdW5jdGlvbihpbmRleE1hcCkge1xyXG4gICAgICAgICAgJHNjb3BlLmluZGV4TWFwID0ge307XHJcblxyXG4gICAgICAgICAgZm9yICh2YXIgYmxvY2tJZCBpbiBpbmRleE1hcCkge1xyXG4gICAgICAgICAgICB2YXIgcGF0dGVybiA9IGluZGV4TWFwW2Jsb2NrSWRdLmZpbGUuY29udGVudHM7XHJcbiAgICAgICAgICAgIHZhciBzb25nVHJhY2tJZHggPSBpbmRleE1hcFtibG9ja0lkXS5pZHg7XHJcblxyXG4gICAgICAgICAgICAkc2NvcGUuaW5kZXhNYXBbYmxvY2tJZF0gPSBpbmRleE1hcFtibG9ja0lkXS5maWxlO1xyXG4gICAgICAgICAgICBwYXR0ZXJuLnRyYWNrcy5mb3JFYWNoKGZ1bmN0aW9uKHRyYWNrLCBpZHgpIHtcclxuICAgICAgICAgICAgICBpZiAodHJhY2suaW5zdHJ1bWVudCkgaW5zdFNldC5sb2FkKHRyYWNrLmluc3RydW1lbnQsIHNvbmdUcmFja0lkeCpTT05HX01BWF9UUkFDS1MgKyBpZHgpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9KVxyXG4gICAgICAgIC50aGVuKGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgJHRpbWVvdXQoZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgIHZhciBvdXRwdXRGaWxlID0ge307XHJcbiAgICAgICAgICAgICRzY29wZS5maWxlSW5kZXggPSBmaWxlLmluZGV4O1xyXG4gICAgICAgICAgICAkc2NvcGUuZmlsZSA9IGZpbGUuY29udGVudHM7XHJcbiAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuICAgIH0pO1xyXG4gIH07XHJcblxyXG4gIHJlbG9hZEZyb21SZXBvKCk7XHJcblxyXG4gIHZhciBrZXlEb3duSGFuZGxlciA9IGZ1bmN0aW9uKGV2dCkge1xyXG4gICAgaWYgKGRvY3VtZW50LmFjdGl2ZUVsZW1lbnQudGFnTmFtZS50b0xvd2VyQ2FzZSgpID09PSBcImlucHV0XCIpIHJldHVybjtcclxuICAgIFxyXG4gICAgaWYgKGV2dC5rZXlDb2RlID09PSA5MCAmJiBldnQuY3RybEtleSkge1xyXG4gICAgICBGaWxlUmVwb3NpdG9yeS51bmRvKGlkKS50aGVuKHJlbG9hZEZyb21SZXBvKTtcclxuICAgIH1cclxuXHJcbiAgICBpZiAoZXZ0LmtleUNvZGUgPT09IDg5ICYmIGV2dC5jdHJsS2V5KSB7XHJcbiAgICAgIEZpbGVSZXBvc2l0b3J5LnJlZG8oaWQpLnRoZW4ocmVsb2FkRnJvbVJlcG8pO1xyXG4gICAgfVxyXG4gIH07XHJcblxyXG4gICQoZG9jdW1lbnQpLmJpbmQoXCJrZXlkb3duXCIsIGtleURvd25IYW5kbGVyKTtcclxuICAkc2NvcGUuJG9uKFwiJGRlc3Ryb3lcIiwgZnVuY3Rpb24oKSB7XHJcbiAgICAkKGRvY3VtZW50KS51bmJpbmQoXCJrZXlkb3duXCIsIGtleURvd25IYW5kbGVyKTtcclxuICAgIGluc3RTZXQuZGlzcG9zZSgpO1xyXG4gIH0pOyAgXHJcbn1dKTtcclxuXHJcbm11c2ljU2hvd0Nhc2VBcHAuY29udHJvbGxlcihcIlBhdHRlcm5FZGl0b3JDb250cm9sbGVyXCIsIFtcIiRxXCIsIFwiJHRyYW5zbGF0ZVwiLCBcIiRzY29wZVwiLCBcIiR0aW1lb3V0XCIsIFwiJHJvdXRlUGFyYW1zXCIsIFwiJGh0dHBcIiwgXCJUSUNLU19QRVJfQkVBVFwiLCBcIk11c2ljQ29udGV4dFwiLCBcIkZpbGVSZXBvc2l0b3J5XCIsIFwiUGF0dGVyblwiLCBcIkluc3RydW1lbnRTZXRcIiwgJ0V4cG9ydCcsICdFcnJNZXNzYWdlJyxcclxuICBmdW5jdGlvbigkcSwgJHRyYW5zbGF0ZSwgJHNjb3BlLCAkdGltZW91dCwgJHJvdXRlUGFyYW1zLCAkaHR0cCwgVElDS1NfUEVSX0JFQVQsIE11c2ljQ29udGV4dCwgRmlsZVJlcG9zaXRvcnksIFBhdHRlcm4sIEluc3RydW1lbnRTZXQsIEV4cG9ydCwgRXJyTWVzc2FnZSkge1xyXG4gIHZhciBpZCA9ICRyb3V0ZVBhcmFtcy5pZDtcclxuICB2YXIgcGxheWluZ1N0YXJ0T2Zmc2V0ID0gMDtcclxuXHJcbiAgJHNjb3BlLmV4cG9ydEl0ZW0gPSBmdW5jdGlvbigpIHtcclxuICAgIEV4cG9ydC5leHBvcnRGaWxlKCRzY29wZS5maWxlSW5kZXgubmFtZSwgJHNjb3BlLmZpbGVJbmRleC5pZCk7XHJcbiAgfTtcclxuXHJcbiAgJHNjb3BlLiRlbWl0KCdzd2l0Y2hQcm9qZWN0JywgJHJvdXRlUGFyYW1zLnByb2plY3QpOyBcclxuXHJcbiAgJHNjb3BlLmluc3RydW1lbnRFZGl0ID0gZnVuY3Rpb24odHJhY2spIHtcclxuICAgIGRvY3VtZW50LmxvY2F0aW9uID0gXCIjL2VkaXRvci9cIiArICRyb3V0ZVBhcmFtcy5wcm9qZWN0ICsgXCIvaW5zdHJ1bWVudC9cIiArIHRyYWNrLmluc3RydW1lbnQ7XHJcbiAgfTtcclxuXHJcbiAgJHNjb3BlLmluc3RydW1lbnRNYXAgPSB7fTtcclxuICAkc2NvcGUuYmVhdFdpZHRoID0gMTA7XHJcbiAgJHNjb3BlLnpvb21MZXZlbCA9IDg7XHJcbiAgJHNjb3BlLnNlbGVjdGVkVHJhY2sgPSAwO1xyXG4gICRzY29wZS5tdXRlZFN0YXRlID0gW107XHJcblxyXG4gIHZhciBpbnN0U2V0ID0gSW5zdHJ1bWVudFNldCgpO1xyXG5cclxuICB2YXIgcHhUb1RpY2tzID0gZnVuY3Rpb24ocHgpIHtcclxuICAgIHZhciBiZWF0V2lkdGggPSAxMDtcclxuICAgIHJldHVybiBUSUNLU19QRVJfQkVBVCpweC8kc2NvcGUuem9vbUxldmVsL2JlYXRXaWR0aDtcclxuICB9O1xyXG5cclxuICAkc2NvcGUuc2VlayA9IGZ1bmN0aW9uKGV2ZW50KSB7XHJcbiAgICBwbGF5aW5nU3RhcnRPZmZzZXQgPSBweFRvVGlja3MoZXZlbnQub2Zmc2V0WCArICRzY29wZS5maWxlLnNjcm9sbExlZnQpO1xyXG4gICAgJHNjb3BlLiRicm9hZGNhc3QoXCJyZXNldENsb2NrXCIsIHBsYXlpbmdTdGFydE9mZnNldCk7XHJcblxyXG4gICAgaWYgKCRzY29wZS5wbGF5aW5nKSB7XHJcbiAgICAgICRzY29wZS5wbGF5aW5nLnN0b3AoKTtcclxuICAgICAgJHNjb3BlLnBsYXlpbmcgPSBudWxsO1xyXG4gICAgICAkc2NvcGUucmVwbGF5KCk7XHJcbiAgICB9XHJcbiAgfTtcclxuXHJcbiAgJHNjb3BlLnVwZGF0ZU11dGVkID0gZnVuY3Rpb24oKSB7XHJcbiAgICAkc2NvcGUubXV0ZWRTdGF0ZSA9IFBhdHRlcm4uZ2V0TXV0ZWRTdGF0ZSgkc2NvcGUuZmlsZSk7XHJcbiAgICAkc2NvcGUuZmlsZUNoYW5nZWQoKTtcclxuXHJcbiAgICAkc2NvcGUuZmlsZS50cmFja3MuZm9yRWFjaChmdW5jdGlvbih0cmFjaywgaWR4KSB7XHJcbiAgICAgIGluc3RTZXQubXV0ZShpZHgsICRzY29wZS5tdXRlZFN0YXRlW2lkeF0pO1xyXG4gICAgfSk7XHJcbiAgfTtcclxuXHJcbiAgJHNjb3BlLnJlbW92ZUl0ZW0gPSBmdW5jdGlvbigpIHtcclxuICAgIGlmICgkc2NvcGUuZmlsZUluZGV4LmJ1aWx0SW4pIHtcclxuICAgICAgJHNjb3BlLmZpbGUgPSBudWxsO1xyXG4gICAgICAkc2NvcGUuZmlsZUluZGV4ID0gbnVsbDtcclxuICAgICAgRmlsZVJlcG9zaXRvcnkuZGVzdHJveUZpbGUoaWQpXHJcbiAgICAgICAgLnRoZW4oZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICByZWxvYWRGcm9tUmVwbygpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcblxyXG4gICAgRmlsZVJlcG9zaXRvcnkubW92ZVRvUmVjeWNsZUJpbihpZClcclxuICAgICAgLnRoZW4oZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgZG9jdW1lbnQubG9jYXRpb24gPSBcIiMvZWRpdG9yL1wiICsgJHJvdXRlUGFyYW1zLnByb2plY3Q7XHJcbiAgICAgIH0pXHJcbiAgICAgIC5jYXRjaChmdW5jdGlvbihlcnIpIHtcclxuICAgICAgICBpZiAoZXJyLnR5cGUgJiYgZXJyLnR5cGUgPT09ICdjYW50cmVtb3ZlJykge1xyXG4gICAgICAgICAgRXJyTWVzc2FnZSgnY29tbW9uLmVycm9yX3RpdGxlJywgJ2NvbW1vbi5jYW50cmVtb3ZlX2Vycm9yJyk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIHRocm93IGVycjtcclxuICAgICAgICB9XHJcbiAgICAgIH0pO1xyXG4gIH07XHJcblxyXG4gICRzY29wZS5yZW1vdmVUcmFjayA9IGZ1bmN0aW9uKHRyYWNrSWR4KSB7XHJcbiAgICAkc2NvcGUuZmlsZS50cmFja3MgPSBcclxuICAgICAgJHNjb3BlLmZpbGUudHJhY2tzLnNsaWNlKDAsIHRyYWNrSWR4KVxyXG4gICAgICAgIC5jb25jYXQoJHNjb3BlLmZpbGUudHJhY2tzLnNsaWNlKHRyYWNrSWR4KzEpKTtcclxuXHJcbiAgICAkc2NvcGUuZmlsZS5zZWxlY3RlZFRyYWNrID0gJHNjb3BlLmZpbGUuc2VsZWN0ZWRUcmFjayAlICRzY29wZS5maWxlLnRyYWNrcy5sZW5ndGg7XHJcblxyXG4gICAgJHNjb3BlLnVwZGF0ZU11dGVkKCk7XHJcbiAgICAkc2NvcGUuZmlsZUNoYW5nZWQoKTtcclxuICB9O1xyXG5cclxuICAkc2NvcGUuYWRkVHJhY2sgPSBmdW5jdGlvbigpIHtcclxuICAgICRzY29wZS5maWxlLnRyYWNrcy5wdXNoKHtcclxuICAgICAgZXZlbnRzOiBbXSxcclxuICAgICAgc2Nyb2xsOiAxMDAwXHJcbiAgICB9KTtcclxuXHJcbiAgICAkc2NvcGUuZmlsZS5zZWxlY3RlZFRyYWNrID0gJHNjb3BlLmZpbGUudHJhY2tzLmxlbmd0aCAtIDE7XHJcbiAgICAkc2NvcGUudXBkYXRlTXV0ZWQoKTtcclxuICAgICRzY29wZS5maWxlQ2hhbmdlZCgpO1xyXG4gIH07XHJcblxyXG5cclxuICAkc2NvcGUuc3RvcCA9IGZ1bmN0aW9uKCkge1xyXG4gICAgcGxheWluZ1N0YXJ0T2Zmc2V0ID0gMDtcclxuXHJcbiAgICAkc2NvcGUuJGJyb2FkY2FzdChcInN0b3BDbG9ja1wiKTtcclxuICAgICRzY29wZS4kYnJvYWRjYXN0KFwicmVzZXRDbG9ja1wiLCBwbGF5aW5nU3RhcnRPZmZzZXQpO1xyXG5cclxuICAgIGlmICgkc2NvcGUucGxheWluZykgJHNjb3BlLnBsYXlpbmcuc3RvcCgpO1xyXG4gICAgJHNjb3BlLnJlY2lwZS5yYWlzZShcInNvbmdfcGxheV9zdG9wcGVkXCIpO1xyXG4gICAgJHNjb3BlLnBsYXlpbmcgPSBudWxsO1xyXG4gIH07XHJcblxyXG4gICRzY29wZS4kb24oJ3BhdXNlZENsb2NrJywgZnVuY3Rpb24oZXZ0LCB0aWNrcykge1xyXG4gICAgcGxheWluZ1N0YXJ0T2Zmc2V0ID0gdGlja3M7ICAgIFxyXG4gIH0pO1xyXG5cclxuICAkc2NvcGUucGxheSA9IGZ1bmN0aW9uKCkge1xyXG4gICAgaWYgKCRzY29wZS5wbGF5aW5nKSB7XHJcbiAgICAgICRzY29wZS5wbGF5aW5nLnN0b3AoKTtcclxuICAgICAgJHNjb3BlLnBsYXlpbmcgPSBudWxsO1xyXG5cclxuICAgICAgJHNjb3BlLiRicm9hZGNhc3QoXCJwYXVzZUNsb2NrXCIpO1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcblxyXG4gICAgJHNjb3BlLnJlcGxheSgpO1xyXG4gIH07XHJcblxyXG4gICRzY29wZS5yZXBsYXkgPSBmdW5jdGlvbigpIHtcclxuICAgIE11c2ljQ29udGV4dC5yZXN1bWVBdWRpbygpO1xyXG5cclxuICAgIHZhciBwbGF5aW5nTGluZSA9ICQoXCIucGxheWluZy1saW5lXCIpO1xyXG5cclxuICAgICRxLmFsbChpbnN0U2V0LmFsbClcclxuICAgICAgLnRoZW4oZnVuY3Rpb24oaW5zdHJ1bWVudHMpIHtcclxuICAgICAgICBpZiAoJHNjb3BlLnBsYXlpbmcpICRzY29wZS5wbGF5aW5nLnN0b3AoKTtcclxuXHJcbiAgICAgICAgdmFyIG9uU3RvcCA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgJHNjb3BlLiRicm9hZGNhc3QoXCJzdG9wQ2xvY2tcIik7XHJcbiAgICAgICAgICAkc2NvcGUuJGJyb2FkY2FzdChcInJlc2V0Q2xvY2tcIik7XHJcbiAgICAgICAgICAkc2NvcGUucmVjaXBlLnJhaXNlKFwicGF0dGVybl9wbGF5X3N0b3BwZWRcIik7XHJcblxyXG4gICAgICAgICAgJHRpbWVvdXQoZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICRzY29wZS5wbGF5aW5nID0gbnVsbDtcclxuICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgIHBsYXlpbmdTdGFydE9mZnNldCA9IDA7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgdmFyIHBhdHRlcm4gPSBQYXR0ZXJuLnBhdHRlcm5Db21wb3NlKCRzY29wZS5maWxlLCBpbnN0cnVtZW50cywgMCwgb25TdG9wLCB7XHJcbiAgICAgICAgICBzdGFydDogcGxheWluZ1N0YXJ0T2Zmc2V0XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICRzY29wZS5wbGF5aW5nID0gcGF0dGVybi5wbGF5KCk7XHJcblxyXG4gICAgICAgIHZhciB0aW1lVG9UaWNrcyA9IHBhdHRlcm4udGltZVRvVGlja3MoKTtcclxuICAgICAgICAkc2NvcGUuJGJyb2FkY2FzdChcInN0YXJ0Q2xvY2tcIiwgdGltZVRvVGlja3MpO1xyXG4gICAgICB9KTtcclxuICB9O1xyXG5cclxuICAkc2NvcGUuem9vbUluID0gZnVuY3Rpb24oKSB7XHJcbiAgICAkc2NvcGUuem9vbUxldmVsID0gJHNjb3BlLnpvb21MZXZlbCAqIDI7XHJcbiAgICBpZiAoJHNjb3BlLnpvb21MZXZlbCA+IDMyKSAkc2NvcGUuem9vbUxldmVsID0gMzI7XHJcbiAgfTtcclxuXHJcbiAgJHNjb3BlLnpvb21PdXQgPSBmdW5jdGlvbigpIHtcclxuICAgICRzY29wZS56b29tTGV2ZWwgPSAkc2NvcGUuem9vbUxldmVsIC8gMjtcclxuICAgIGlmICgkc2NvcGUuem9vbUxldmVsIDwgMSkgJHNjb3BlLnpvb21MZXZlbCA9IDE7XHJcbiAgfTtcclxuXHJcbiAgJHNjb3BlLmluZGV4Q2hhbmdlZCA9IGZ1bmN0aW9uKCkge1xyXG4gICAgJHNjb3BlLmZpbGVJbmRleC5yZWYgPSBGaWxlUmVwb3NpdG9yeS5nZXRSZWZzKFwicGF0dGVyblwiLCAkc2NvcGUuZmlsZSk7XHJcbiAgICBGaWxlUmVwb3NpdG9yeS51cGRhdGVJbmRleChpZCwgJHNjb3BlLmZpbGVJbmRleCk7XHJcbiAgfTtcclxuXHJcbiAgJHNjb3BlLmZpbGVDaGFuZ2VkID0gZm4uZGVib3VuY2UoZnVuY3Rpb24oKSB7XHJcbiAgICBGaWxlUmVwb3NpdG9yeS51cGRhdGVGaWxlKGlkLCAkc2NvcGUuZmlsZSlcclxuICAgICAgLnRoZW4oJHNjb3BlLmluZGV4Q2hhbmdlZCk7XHJcbiAgfSwxMDApO1xyXG5cclxuICAkc2NvcGUuJG9uKFwidHJhY2tDaGFuZ2VkXCIsIGZ1bmN0aW9uKHRyYWNrKSB7XHJcbiAgICBjb21wdXRlTWVhc3VyZUNvdW50KCk7XHJcbiAgICAkc2NvcGUuZmlsZUNoYW5nZWQoKTtcclxuICB9KTtcclxuXHJcbiAgdmFyIGJlZXAgPSBmdW5jdGlvbihpbnN0cnVtZW50LCBuKSB7XHJcbiAgICAgIGlmICghaW5zdHJ1bWVudCkgcmV0dXJuO1xyXG4gICAgICBpZiAoIWluc3RydW1lbnQubm90ZSkgcmV0dXJuO1xyXG5cclxuICAgICAgaWYgKGxhc3RQbGF5aW5nKSBsYXN0UGxheWluZy5zdG9wKCk7XHJcbiAgICAgIGxhc3RQbGF5aW5nID0gaW5zdHJ1bWVudC5ub3RlKG4pLnBsYXkoKTtcclxuXHJcbiAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKXtcclxuICAgICAgICBpZiAobGFzdFBsYXlpbmcpIGxhc3RQbGF5aW5nLnN0b3AoKTtcclxuICAgICAgICBsYXN0UGxheWluZyA9IG51bGw7XHJcbiAgICAgIH0sNTApO1xyXG4gIH07XHJcblxyXG4gIHZhciBjb21wdXRlTWVhc3VyZUNvdW50ID0gZnVuY3Rpb24oKSB7XHJcbiAgICBpZiAoISRzY29wZS5maWxlKSByZXR1cm47XHJcbiAgICBpZiAoISRzY29wZS5maWxlLnRyYWNrc1swXSkgcmV0dXJuO1xyXG5cclxuICAgICRzY29wZS5maWxlLm1lYXN1cmVDb3VudCA9IFBhdHRlcm4uY29tcHV0ZU1lYXN1cmVDb3VudCgkc2NvcGUuZmlsZSwgJHNjb3BlLmZpbGUubWVhc3VyZSk7XHJcbiAgfTtcclxuXHJcbiAgdmFyIGxhc3RQbGF5aW5nO1xyXG4gIHZhciB0cmFja011dGVkID0gZnVuY3Rpb24odHJhY2spIHtcclxuICAgIHJldHVybiAkc2NvcGUubXV0ZWRTdGF0ZVskc2NvcGUuZmlsZS50cmFja3MuaW5kZXhPZih0cmFjayldO1xyXG4gIH07XHJcblxyXG4gICRzY29wZS4kb24oXCJldmVudENoYW5nZWRcIiwgZnVuY3Rpb24oZXZ0LCBkYXRhKSB7XHJcbiAgICBjb21wdXRlTWVhc3VyZUNvdW50KCk7XHJcblxyXG4gICAgaWYgKGRhdGEub2xkZXZ0Lm4gIT09IGRhdGEuZXZ0Lm4gJiYgIXRyYWNrTXV0ZWQoZGF0YS50cmFjaykpIGJlZXAoaW5zdHJ1bWVudC5nZXQoZGF0YS50cmFjayksIGRhdGEuZXZ0Lm4pO1xyXG5cclxuICAgICRzY29wZS5maWxlQ2hhbmdlZCgpO1xyXG4gIH0pO1xyXG5cclxuICAkc2NvcGUuJG9uKFwiZXZlbnRTZWxlY3RlZFwiLCBmdW5jdGlvbihldnQsIGRhdGEpIHtcclxuICAgIGlmICghdHJhY2tNdXRlZChkYXRhLnRyYWNrKSkgYmVlcChpbnN0cnVtZW50LmdldChkYXRhLnRyYWNrKSwgZGF0YS5ldnQubik7XHJcbiAgfSk7XHJcblxyXG4gICRzY29wZS4kd2F0Y2goXCJmaWxlLm1lYXN1cmVcIiwgY29tcHV0ZU1lYXN1cmVDb3VudCk7XHJcblxyXG4gIHZhciBpbnN0cnVtZW50ID0gbmV3IFdlYWtNYXAoKTtcclxuXHJcbiAgJHNjb3BlLnVwZGF0ZUluc3RydW1lbnQgPSBmdW5jdGlvbih0cmFja05vKSB7XHJcbiAgICBpZiAoISRzY29wZS5maWxlLnRyYWNrc1t0cmFja05vXSkgcmV0dXJuO1xyXG4gICAgaWYgKCEkc2NvcGUuZmlsZS50cmFja3NbdHJhY2tOb10uaW5zdHJ1bWVudCkgcmV0dXJuO1xyXG5cclxuICAgIHJldHVybiAkcS5hbGwoe1xyXG4gICAgICBtdXNpY09iamVjdDogaW5zdFNldC5sb2FkKCRzY29wZS5maWxlLnRyYWNrc1t0cmFja05vXS5pbnN0cnVtZW50LCB0cmFja05vKSxcclxuICAgICAgaW5kZXg6IEZpbGVSZXBvc2l0b3J5LmdldEluZGV4KCRzY29wZS5maWxlLnRyYWNrc1t0cmFja05vXS5pbnN0cnVtZW50KVxyXG4gICAgfSkudGhlbihmdW5jdGlvbihyZXN1bHQpIHtcclxuICAgICAgICAkc2NvcGUuaW5zdHJ1bWVudE1hcFskc2NvcGUuZmlsZS50cmFja3NbdHJhY2tOb10uaW5zdHJ1bWVudF0gPSByZXN1bHQuaW5kZXg7XHJcbiAgICAgICAgaWYgKHJlc3VsdC5tdXNpY09iamVjdCkgaW5zdHJ1bWVudC5zZXQoJHNjb3BlLmZpbGUudHJhY2tzW3RyYWNrTm9dLCByZXN1bHQubXVzaWNPYmplY3QpO1xyXG4gICAgICAgIHJldHVybiByZXN1bHQubXVzaWNPYmplY3Q7XHJcbiAgICB9KTtcclxuICB9O1xyXG5cclxuICAkc2NvcGUub25Ecm9wQ29tcGxldGUgPSBmdW5jdGlvbihpbnN0cnVtZW50LGV2ZW50KSB7XHJcbiAgICBNdXNpY0NvbnRleHQucmVzdW1lQXVkaW8oKTtcclxuXHJcbiAgICBpZiAoXHJcbiAgICAgIGluc3RydW1lbnQudHlwZSAhPT0gJ2luc3RydW1lbnQnICYmXHJcbiAgICAgIGluc3RydW1lbnQudHlwZSAhPT0gJ3RlbXBvJ1xyXG4gICAgKSByZXR1cm47XHJcblxyXG4gICAgdmFyIHRyYWNrTm8gPSAkc2NvcGUuZmlsZS5zZWxlY3RlZFRyYWNrO1xyXG5cclxuICAgICRzY29wZS5maWxlLnRyYWNrcyA9ICRzY29wZS5maWxlLnRyYWNrcyB8fCBbXTtcclxuICAgICRzY29wZS5maWxlLnRyYWNrc1t0cmFja05vXSA9ICRzY29wZS5maWxlLnRyYWNrc1t0cmFja05vXSB8fCB7fTtcclxuICAgICRzY29wZS5maWxlLnRyYWNrc1t0cmFja05vXS5pbnN0cnVtZW50ID0gaW5zdHJ1bWVudC5pZDtcclxuXHJcbiAgICBGaWxlUmVwb3NpdG9yeS51cGRhdGVGaWxlKGlkLCAkc2NvcGUuZmlsZSk7XHJcbiAgICAkc2NvcGUudXBkYXRlSW5zdHJ1bWVudCh0cmFja05vKVxyXG4gICAgICAudGhlbihmdW5jdGlvbihtdXNpY09iamVjdCkge1xyXG4gICAgICAgICRzY29wZS51cGRhdGVNdXRlZCgpO1xyXG4gICAgICAgIGlmICghJHNjb3BlLm11dGVkU3RhdGVbdHJhY2tOb10pIGJlZXAobXVzaWNPYmplY3QsIDM2KTtcclxuICAgICAgfSk7XHJcbiAgfTtcclxuXHJcbiAgdmFyIHJlbG9hZEZyb21SZXBvID0gZnVuY3Rpb24oKSB7XHJcbiAgICBGaWxlUmVwb3NpdG9yeS5nZXRGaWxlKGlkKS50aGVuKGZ1bmN0aW9uKGZpbGUpIHtcclxuICAgICAgJHRpbWVvdXQoZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgdmFyIG91dHB1dEZpbGUgPSB7fTtcclxuICAgICAgICAkc2NvcGUuZmlsZUluZGV4ID0gZmlsZS5pbmRleDtcclxuICAgICAgICAkc2NvcGUuZmlsZSA9IGZpbGUuY29udGVudHM7XHJcbiAgICAgICAgJHNjb3BlLm11dGVkU3RhdGUgPSBQYXR0ZXJuLmdldE11dGVkU3RhdGUoJHNjb3BlLmZpbGUpO1xyXG4gICAgICAgICRzY29wZS51cGRhdGVNdXRlZCgpO1xyXG5cclxuICAgICAgICBpZiAoISRzY29wZS5maWxlLnRyYWNrcykgJHNjb3BlLmZpbGUudHJhY2tzPVt7fV07XHJcblxyXG4gICAgICAgICRzY29wZS5maWxlLnRyYWNrcy5mb3JFYWNoKGZ1bmN0aW9uKHRyYWNrLCBpZHgpIHtcclxuICAgICAgICAgIHRyYWNrLmV2ZW50cyA9IHRyYWNrLmV2ZW50cyB8fCBbXTtcclxuICAgICAgICAgICRzY29wZS51cGRhdGVJbnN0cnVtZW50KGlkeCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH0pO1xyXG4gICAgfSk7XHJcbiAgfTtcclxuXHJcbiAgcmVsb2FkRnJvbVJlcG8oKTtcclxuXHJcbiAgLy8gdW5kbyAmIHJlZG9cclxuXHJcbiAgdmFyIGtleURvd25IYW5kbGVyID0gZnVuY3Rpb24oZXZ0KSB7XHJcbiAgICBpZiAoZG9jdW1lbnQuYWN0aXZlRWxlbWVudC50YWdOYW1lLnRvTG93ZXJDYXNlKCkgPT09IFwiaW5wdXRcIikgcmV0dXJuO1xyXG5cclxuICAgIGlmIChldnQua2V5Q29kZSA9PT0gOTAgJiYgZXZ0LmN0cmxLZXkpIHtcclxuICAgICAgRmlsZVJlcG9zaXRvcnkudW5kbyhpZCkudGhlbihyZWxvYWRGcm9tUmVwbyk7XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKGV2dC5rZXlDb2RlID09PSA4OSAmJiBldnQuY3RybEtleSkge1xyXG4gICAgICBGaWxlUmVwb3NpdG9yeS5yZWRvKGlkKS50aGVuKHJlbG9hZEZyb21SZXBvKTtcclxuICAgIH1cclxuICB9O1xyXG5cclxuICB2YXIgcGxheUJ1dHRvbiA9ICQoXCJidXR0b24ucGxheS1idXR0b25cIik7XHJcblxyXG4gIHBsYXlCdXR0b24uYmluZChcImNsaWNrXCIsIE11c2ljQ29udGV4dC5yZXN1bWVBdWRpbyk7XHJcbiAgJChkb2N1bWVudCkuYmluZChcImtleWRvd25cIiwga2V5RG93bkhhbmRsZXIpO1xyXG4gICRzY29wZS4kb24oXCIkZGVzdHJveVwiLCBmdW5jdGlvbigpIHtcclxuICAgIHBsYXlCdXR0b24udW5iaW5kKFwiY2xpY2tcIiwgTXVzaWNDb250ZXh0LnJlc3VtZUF1ZGlvKTtcclxuICAgICQoZG9jdW1lbnQpLnVuYmluZChcImtleWRvd25cIiwga2V5RG93bkhhbmRsZXIpO1xyXG5cclxuICAgIGluc3RTZXQuZGlzcG9zZSgpO1xyXG4gIH0pO1xyXG5cclxuICAkc2NvcGUuJG9uKFwiZW5hYmxlVHJhY2tcIiwgZnVuY3Rpb24oZXZ0LCB0cmFjaykge1xyXG4gICAgJHNjb3BlLmZpbGUuc2VsZWN0ZWRUcmFjayA9ICRzY29wZS5maWxlLnRyYWNrcy5pbmRleE9mKHRyYWNrKTtcclxuICB9KTtcclxuXHJcbiAgJHNjb3BlLiRvbihcInBhdHRlcm5TZWxlY3RFdmVudFwiLCBmdW5jdGlvbihldnQsIGV2ZW50KSB7XHJcbiAgICAkdGltZW91dChmdW5jdGlvbigpIHtcclxuICAgICAgJHNjb3BlLiRicm9hZGNhc3QoXCJ0cmFja1NlbGVjdEV2ZW50XCIsIGV2ZW50KTtcclxuICAgIH0pO1xyXG4gIH0pO1xyXG59XSk7XHJcblxyXG5tdXNpY1Nob3dDYXNlQXBwLmNvbnRyb2xsZXIoXCJFZGl0b3JDb250cm9sbGVyXCIsIFtcIiRzY29wZVwiLCBcIiRxXCIsIFwiJHRpbWVvdXRcIiwgXCIkcm91dGVQYXJhbXNcIiwgXCIkaHR0cFwiLCBcIk11c2ljQ29udGV4dFwiLCBcIkZpbGVSZXBvc2l0b3J5XCIsIFwiTXVzaWNPYmplY3RGYWN0b3J5XCIsIFwiRXhwb3J0XCIsIGZ1bmN0aW9uKCRzY29wZSwgJHEsICR0aW1lb3V0LCAkcm91dGVQYXJhbXMsICRodHRwLCBNdXNpY0NvbnRleHQsIEZpbGVSZXBvc2l0b3J5LCBNdXNpY09iamVjdEZhY3RvcnksIEV4cG9ydCkge1xyXG4gIHZhciBpZCA9ICRyb3V0ZVBhcmFtcy5pZDtcclxuICAkc2NvcGUuJGVtaXQoJ3N3aXRjaFByb2plY3QnLCAkcm91dGVQYXJhbXMucHJvamVjdCk7XHJcblxyXG4gICRzY29wZS5leHBvcnRJdGVtID0gZnVuY3Rpb24oKSB7XHJcbiAgICBFeHBvcnQuZXhwb3J0RmlsZSgkc2NvcGUuZmlsZUluZGV4Lm5hbWUsICRzY29wZS5maWxlSW5kZXguaWQpO1xyXG4gIH07XHJcblxyXG4gICRzY29wZS5yZW1vdmVJdGVtID0gZnVuY3Rpb24oKSB7XHJcbiAgICBkZXN0cm95QWxsKCk7XHJcblxyXG4gICAgaWYgKCRzY29wZS5maWxlSW5kZXguYnVpbHRJbikge1xyXG4gICAgICAkc2NvcGUuZmlsZSA9IG51bGw7XHJcbiAgICAgICRzY29wZS5maWxlSW5kZXggPSBudWxsO1xyXG4gICAgICBGaWxlUmVwb3NpdG9yeS5kZXN0cm95RmlsZShpZClcclxuICAgICAgICAudGhlbihmdW5jdGlvbigpIHtcclxuICAgICAgICAgIHJlbG9hZEZyb21SZXBvKCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIEZpbGVSZXBvc2l0b3J5Lm1vdmVUb1JlY3ljbGVCaW4oaWQpXHJcbiAgICAgICAgLnRoZW4oZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICBkb2N1bWVudC5sb2NhdGlvbiA9IFwiIy9lZGl0b3IvXCIgKyAkcm91dGVQYXJhbXMucHJvamVjdDtcclxuICAgICAgICB9KVxyXG4gICAgICAgIC5jYXRjaChmdW5jdGlvbihlcnIpIHtcclxuICAgICAgICAgIGlmIChlcnIudHlwZSAmJiBlcnIudHlwZSA9PT0gJ2NhbnRyZW1vdmUnKSB7XHJcbiAgICAgICAgICAgIEVyck1lc3NhZ2UoJ2NvbW1vbi5lcnJvcl90aXRsZScsICdjb21tb24uY2FudHJlbW92ZV9lcnJvcicpO1xyXG4gICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdGhyb3cgZXJyO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG4gIH07XHJcblxyXG4gIHZhciBsYXN0T2JqO1xyXG4gIHZhciBtdXNpY09iamVjdEZhY3RvcnkgPSBNdXNpY09iamVjdEZhY3Rvcnkoe21vbml0b3I6IHRydWV9KTtcclxuXHJcbiAgdmFyIGRlc3Ryb3lBbGwgPSBmdW5jdGlvbigpIHtcclxuICAgICgkc2NvcGUuaW5zdHJ1bWVudHN8fFtdKS5mb3JFYWNoKGZ1bmN0aW9uKGluc3RydW1lbnQpIHtcclxuICAgICAgaWYgKGluc3RydW1lbnQuZGlzcG9zZSkgaW5zdHJ1bWVudC5kaXNwb3NlKCk7XHJcbiAgICB9KTtcclxuXHJcbiAgICAoJHNjb3BlLnBsYXlhYmxlc3x8W10pLmZvckVhY2goZnVuY3Rpb24ocGxheWFibGUpIHtcclxuICAgICAgJHNjb3BlLnN0b3BQbGF5KHBsYXlhYmxlKTtcclxuICAgIH0pOyAgICBcclxuXHJcbiAgICByZXR1cm4gbXVzaWNPYmplY3RGYWN0b3J5LmRlc3Ryb3lBbGwoKTtcclxuICB9O1xyXG5cclxuICB2YXIgbGF6eUxvYWRJbnN0cnVtZW50ID0gZnVuY3Rpb24oZikge1xyXG4gICAgdmFyIGNhbGxTdG9wID0gZnVuY3Rpb24ocCkgeyByZXR1cm4gcC5zdG9wKCk7IH07XHJcbiAgICB2YXIgY2FsbFBsYXkgPSBmdW5jdGlvbihwKSB7IHJldHVybiBwLnBsYXkoKTsgfTtcclxuXHJcbiAgICB2YXIgaW5zdHJ1bWVudFByb21pc2U7XHJcbiAgICB2YXIgaW5uZXJJbnN0cnVtZW50O1xyXG5cclxuICAgIHZhciBub3RlID0gZnVuY3Rpb24obikge1xyXG4gICAgICBpZiAoaW5uZXJJbnN0cnVtZW50KSByZXR1cm4gaW5uZXJJbnN0cnVtZW50Lm5vdGUobik7XHJcbiAgICAgIHZhciBpbm5lck5vdGU7XHJcblxyXG4gICAgICBpZiAoIWluc3RydW1lbnRQcm9taXNlKSB7XHJcbiAgICAgICAgaW5zdHJ1bWVudFByb21pc2UgPSBmKCk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGlubmVyTm90ZSA9IGluc3RydW1lbnRQcm9taXNlLnRoZW4oZnVuY3Rpb24oaW5zdCkge1xyXG4gICAgICAgIGlubmVySW5zdHJ1bWVudCA9IGluc3Q7XHJcbiAgICAgICAgcmV0dXJuIGluc3Qubm90ZShuKTtcclxuICAgICAgfSk7XHJcblxyXG4gICAgICB2YXIgcGxheSA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIHZhciBwbGF5aW5nID0gaW5uZXJOb3RlLnRoZW4oY2FsbFBsYXkpO1xyXG5cclxuICAgICAgICB2YXIgc3RvcCA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgcmV0dXJuIHBsYXlpbmcudGhlbihjYWxsU3RvcCk7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgcmV0dXJuIHtzdG9wOiBzdG9wfTtcclxuICAgICAgfTtcclxuXHJcbiAgICAgIHJldHVybiB7cGxheTogcGxheX07XHJcbiAgICB9O1xyXG5cclxuICAgIHJldHVybiBNVVNJQy5pbnN0cnVtZW50RXh0ZW5kKHtcclxuICAgICAgbm90ZTogbm90ZVxyXG4gICAgfSkuc3RvcERlbGF5KDEwKTtcclxuICB9O1xyXG5cclxuICB2YXIgY3JlYXRlSW5zdHJ1bWVudEZyb21GaWxlID0gZnVuY3Rpb24oKSB7XHJcbiAgICByZXR1cm4gbXVzaWNPYmplY3RGYWN0b3J5LmNyZWF0ZSgkc2NvcGUuZmlsZSk7XHJcbiAgfTtcclxuXHJcbiAgdmFyIGZpbGVDaGFuZ2VkID0gZm4uZGVib3VuY2UoZnVuY3Rpb24obmV3RmlsZSwgb2xkRmlsZSkge1xyXG4gICAgaWYgKCEkc2NvcGUuZmlsZSkgcmV0dXJuO1xyXG4gICBcclxuICAgICRxLndoZW4obnVsbClcclxuICAgICAgLnRoZW4oZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgcmV0dXJuIGRlc3Ryb3lBbGwoKTtcclxuICAgICAgfSlcclxuICAgICAgLnRoZW4oZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgcmV0dXJuIGxhenlMb2FkSW5zdHJ1bWVudChjcmVhdGVJbnN0cnVtZW50RnJvbUZpbGUpO1xyXG4gICAgICB9KSAgICBcclxuICAgICAgLnRoZW4oZnVuY3Rpb24ob2JqKSB7XHJcbiAgICAgICAgICBpZiAoIW9iaikge1xyXG4gICAgICAgICAgICAkc2NvcGUuaW5zdHJ1bWVudHMgPSBbXTtcclxuICAgICAgICAgICAgJHNjb3BlLnBsYXlhYmxlcyA9IFtdO1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgaWYgKG9iaiAhPT0gbGFzdE9iaikge1xyXG4gICAgICAgICAgICAkc2NvcGUuaW5zdHJ1bWVudHMgPSBbXTtcclxuICAgICAgICAgICAgJHNjb3BlLnBsYXlhYmxlcyA9IFtdO1xyXG4gICAgICAgICAgICBpZiAob2JqLm5vdGUpIHtcclxuICAgICAgICAgICAgICAvLyBpbnN0cnVtZW50XHJcbiAgICAgICAgICAgICAgJHNjb3BlLmluc3RydW1lbnRzLnB1c2gob2JqKTtcclxuICAgICAgICAgICAgfSBlbHNlIGlmIChvYmoucGxheSkge1xyXG4gICAgICAgICAgICAgICRzY29wZS5wbGF5YWJsZXMucHVzaChvYmopO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgaWYgKG9sZEZpbGUpIHtcclxuICAgICAgICAgICAgRmlsZVJlcG9zaXRvcnkudXBkYXRlRmlsZShpZCwgJHNjb3BlLmZpbGUpO1xyXG4gICAgICAgICAgICAkc2NvcGUuZmlsZUluZGV4LnVwZGF0ZWQgPSB0cnVlO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgbGFzdE9iaiA9IG9iajtcclxuICAgICAgfSk7XHJcbiAgfSwgMjUwKTtcclxuICAkc2NvcGUuJHdhdGNoKCdmaWxlJywgZmlsZUNoYW5nZWQsIHRydWUpO1xyXG5cclxuICAkc2NvcGUuaW5kZXhDaGFuZ2VkID0gZnVuY3Rpb24oKSB7XHJcbiAgICBGaWxlUmVwb3NpdG9yeS51cGRhdGVJbmRleChpZCwgJHNjb3BlLmZpbGVJbmRleCk7XHJcbiAgfTtcclxuXHJcbiAgdmFyIHJlbG9hZEZyb21SZXBvID0gZnVuY3Rpb24oKSB7XHJcbiAgICBGaWxlUmVwb3NpdG9yeS5nZXRGaWxlKGlkKS50aGVuKGZ1bmN0aW9uKGZpbGUpIHtcclxuICAgICAgJHRpbWVvdXQoZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgdmFyIG91dHB1dEZpbGUgPSB7fTtcclxuXHJcbiAgICAgICAgJHNjb3BlLm91dHB1dEZpbGUgPSBvdXRwdXRGaWxlO1xyXG4gICAgICAgICRzY29wZS5maWxlID0gZmlsZS5jb250ZW50cztcclxuICAgICAgICAkc2NvcGUuZmlsZUluZGV4ID0gZmlsZS5pbmRleDtcclxuICAgICAgICAkc2NvcGUub2JzZXJ2ZXIgPSB7fTtcclxuXHJcbiAgICAgICAgJHNjb3BlLm9ic2VydmVyLm5vdGlmeSA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgJHRpbWVvdXQoZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICRzY29wZS5pbnN0cnVtZW50cyA9IFtdO1xyXG4gICAgICAgICAgICAkc2NvcGUucGxheWFibGVzID0gW107XHJcbiAgICAgICAgICB9KTtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgfSk7XHJcbiAgICB9KTtcclxuICB9O1xyXG5cclxuICByZWxvYWRGcm9tUmVwbygpO1xyXG5cclxuICAkc2NvcGUuJG9uKFwic3RhY2tDaGFuZ2VkXCIsIGZ1bmN0aW9uKCkge1xyXG4gICAgJHNjb3BlLnJlc2V0U3RhY2sgPSB0cnVlO1xyXG4gICAgZmlsZUNoYW5nZWQoKTtcclxuICB9KTtcclxuXHJcbiAgJHNjb3BlLiRvbihcIiRkZXN0cm95XCIsIGRlc3Ryb3lBbGwpO1xyXG5cclxuICAkc2NvcGUuc3RhcnRQbGF5ID0gZnVuY3Rpb24ocGxheWFibGUpIHtcclxuICAgIHBsYXlhYmxlLnBsYXlpbmcgPSBwbGF5YWJsZS5wbGF5KCk7XHJcbiAgfTtcclxuXHJcbiAgJHNjb3BlLnN0b3BQbGF5ID0gZnVuY3Rpb24ocGxheWFibGUpIHtcclxuICAgIGlmICghcGxheWFibGUucGxheWluZykgcmV0dXJuO1xyXG4gICAgcGxheWFibGUucGxheWluZy5zdG9wKCk7XHJcbiAgICBwbGF5YWJsZS5wbGF5aW5nID0gdW5kZWZpbmVkO1xyXG4gIH07XHJcblxyXG59XSk7XHJcblxyXG5tdXNpY1Nob3dDYXNlQXBwLmNvbnRyb2xsZXIoXCJNYWluQ29udHJvbGxlclwiLCBcclxuICBbXCIkcVwiLCBcIiRzY29wZVwiLCBcIiR0aW1lb3V0XCIsIFwiJHVpYk1vZGFsXCIsIFwiJHRyYW5zbGF0ZVwiLCBcIk11c2ljQ29udGV4dFwiLCBcIkZpbGVSZXBvc2l0b3J5XCIsIFwiUmVjaXBlXCIsIFwiV2VsY29tZU1lc3NhZ2VcIiwgXCJsb2NhbGZvcmFnZVwiLCBcIkV4cG9ydFwiLCBcIkVyck1lc3NhZ2VcIixcclxuICBmdW5jdGlvbigkcSwgJHNjb3BlLCAkdGltZW91dCwgJHVpYk1vZGFsLCAkdHJhbnNsYXRlLCBNdXNpY0NvbnRleHQsIEZpbGVSZXBvc2l0b3J5LCBSZWNpcGUsIFdlbGNvbWVNZXNzYWdlLCBsb2NhbGZvcmFnZSwgRXhwb3J0LCBFcnJNZXNzYWdlKSB7XHJcbiAgdmFyIG11c2ljO1xyXG5cclxuICAkc2NvcGUuJG9uKFwic3dpdGNoUHJvamVjdFwiLCBmdW5jdGlvbihldnQsIGlkKSB7XHJcbiAgICBzd2l0Y2hQcm9qZWN0KGlkKTtcclxuICB9KTtcclxuXHJcbiAgdmFyIGNvbmNhdCA9IGZ1bmN0aW9uKGEsIGIpIHtcclxuICAgIHJldHVybiBhLmNvbmNhdChiKTtcclxuICB9O1xyXG5cclxuICB2YXIgc3dpdGNoUHJvamVjdCA9IGZ1bmN0aW9uKHByb2plY3RJZCkge1xyXG4gICAgdmFyIHBGaWx0ZXIgPSBbcHJvamVjdElkXTtcclxuXHJcbiAgICByZXR1cm4gRmlsZVJlcG9zaXRvcnkuZ2V0RmlsZShwcm9qZWN0SWQpLnRoZW4oZnVuY3Rpb24oZmlsZSkge1xyXG4gICAgICAkc2NvcGUucHJvamVjdCA9IGZpbGU7XHJcblxyXG4gICAgICByZXR1cm4gKGZpbGUuaW5kZXgucmVmfHxbXSkuY29uY2F0KFtwcm9qZWN0SWRdKTtcclxuICAgIH0pLnRoZW4oZnVuY3Rpb24oZmlsdGVyKSB7XHJcbiAgICAgICRzY29wZS5wcm9qZWN0RmlsdGVyID0gZmlsdGVyLmNvbmNhdChbJ2NvcmUnXSk7XHJcbiAgICAgIGlmIChmaWx0ZXIuaW5kZXhPZignZGVmYXVsdCcpICE9PSAtMSkgJHNjb3BlLnByb2plY3RGaWx0ZXIucHVzaCh1bmRlZmluZWQpO1xyXG4gICAgfSlcclxuICAgIC50aGVuKHVwZGF0ZVNlYXJjaClcclxuICAgIC5jYXRjaChmdW5jdGlvbigpIHtcclxuICAgICAgZG9jdW1lbnQubG9jYXRpb24gPSBcIiNcIjtcclxuICAgIH0pO1xyXG4gIH07XHJcblxyXG4gIHZhciB1cGRhdGVTZWFyY2ggPSBmbi5kZWJvdW5jZShmdW5jdGlvbigpIHtcclxuICAgIGlmIChjdXJyZW50T2JzZXJ2ZXIpIGN1cnJlbnRPYnNlcnZlci5jbG9zZSgpO1xyXG4gICAgY3VycmVudE9ic2VydmVyID0gRmlsZVJlcG9zaXRvcnkuc2VhcmNoKG51bGwsIHtcclxuICAgICAgcHJvamVjdDogJHNjb3BlLnByb2plY3RGaWx0ZXIsIHR5cGU6IFsnaW5zdHJ1bWVudCcsICdwYXR0ZXJuJywgJ3NvbmcnLCAnZngnXVxyXG4gICAgfSkub2JzZXJ2ZShmdW5jdGlvbihmaWxlcykge1xyXG4gICAgICAkdGltZW91dChmdW5jdGlvbigpIHtcclxuICAgICAgICAkc2NvcGUuZmlsZXNUb3RhbCA9IGZpbGVzLnRvdGFsO1xyXG4gICAgICAgICRzY29wZS5maWxlcyA9IGZpbGVzLnJlc3VsdHM7XHJcbiAgICAgIH0pOyBcclxuICAgIH0pO1xyXG4gIH0sMTAwKTtcclxuXHJcbiAgdmFyIGN1cnJlbnRPYnNlcnZlcjtcclxuICAkc2NvcGUuZmlsZUlucHV0Q2xpY2sgPSBmdW5jdGlvbigpIHtcclxuICAgICR0aW1lb3V0KGZ1bmN0aW9uKCkge1xyXG4gICAgICAkKFwiLmNob29zZS1maWxlLWltcG9ydC1jb250YWluZXIgaW5wdXRbdHlwZT1maWxlXVwiKS5jbGljaygpO1xyXG4gICAgfSk7XHJcbiAgfTtcclxuXHJcbiAgJHNjb3BlLmZpbGVJbXBvcnQgPSBmdW5jdGlvbihmaWxlcykge1xyXG4gICAgdmFyIHJlYWRUZXh0RmlsZSA9IGZ1bmN0aW9uKGZpbGUpIHtcclxuICAgICAgcmV0dXJuICRxKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCkge1xyXG4gICAgICAgIHZhciBmaWxlUmVhZGVyID0gbmV3IEZpbGVSZWFkZXIoKTtcclxuICAgICAgICBmaWxlUmVhZGVyLm9ubG9hZCA9IGZ1bmN0aW9uKGUpIHtcclxuICAgICAgICAgIHJlc29sdmUoZS50YXJnZXQucmVzdWx0KTtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICBmaWxlUmVhZGVyLm9uZXJyb3IgPSBmdW5jdGlvbihlcnIpIHtcclxuICAgICAgICAgIHJlamVjdChlcnIpO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIGZpbGVSZWFkZXIucmVhZEFzVGV4dChmaWxlKTtcclxuICAgICAgfSk7XHJcbiAgICB9O1xyXG5cclxuICAgIHZhciBuZXh0TG9jYXRpb247XHJcbiAgICB2YXIgaW1wb3J0RmlsZSA9IGZ1bmN0aW9uKGZpbGUpIHtcclxuICAgICAgcmV0dXJuIGZ1bmN0aW9uKG9wdGlvbnMpIHtcclxuICAgICAgICByZXR1cm4gcmVhZFRleHRGaWxlKGZpbGUpXHJcbiAgICAgICAgICAudGhlbihmdW5jdGlvbihqc29uKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBFeHBvcnQuaW1wb3J0RmlsZShqc29uKVxyXG4gICAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uKGZpbGUpIHtcclxuICAgICAgICAgICAgICAgIGlmIChvcHRpb25zICYmIG9wdGlvbnMuZmlyc3QpIHtcclxuICAgICAgICAgICAgICAgICAgaWYgKGZpbGUudHlwZSA9PT0gJ3Byb2plY3QnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbmV4dExvY2F0aW9uID0gXCIjL2VkaXRvci9cIisgZmlsZS5pZDtcclxuICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBuZXh0TG9jYXRpb24gPSBcIiMvZWRpdG9yL1wiKyBmaWxlLnByb2plY3QgKyBcIi9cIisgZmlsZS50eXBlICsgXCIvXCIgK2ZpbGUuaWQ7XHJcbiAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgIH0pO1xyXG4gICAgICB9O1xyXG4gICAgfTtcclxuXHJcbiAgICB2YXIgcCA9IG51bGw7XHJcbiAgICBmb3IgKHZhciBpPTA7IGk8ZmlsZXMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgaWYgKHApIHtcclxuICAgICAgICBwID0gcC50aGVuKGltcG9ydEZpbGUoZmlsZXNbaV0pKTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICBwID0gaW1wb3J0RmlsZShmaWxlc1tpXSkoe2ZpcnN0OiB0cnVlfSk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBpZiAocCkge1xyXG4gICAgICBwLnRoZW4oZnVuY3Rpb24oaW5kZXgpIHtcclxuICAgICAgICBpZiAobmV4dExvY2F0aW9uKSBkb2N1bWVudC5sb2NhdGlvbiA9IG5leHRMb2NhdGlvbjtcclxuICAgICAgfSkuY2F0Y2goZnVuY3Rpb24oZXJyKSB7XHJcbiAgICAgICAgdmFyIG1vZGFsSW5zID0gJHVpYk1vZGFsLm9wZW4oe1xyXG4gICAgICAgICAgdGVtcGxhdGVVcmw6IFwic2l0ZS90ZW1wbGF0ZXMvbW9kYWwvZXJyb3IuaHRtbFwiLFxyXG4gICAgICAgICAgY29udHJvbGxlcjogXCJlcnJvck1vZGFsQ3RybFwiLFxyXG4gICAgICAgICAgd2luZG93Q2xhc3M6ICdlcnJvcicsXHJcbiAgICAgICAgICByZXNvbHZlOiB7XHJcbiAgICAgICAgICAgIHRleHQ6IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgIHJldHVybiAkdHJhbnNsYXRlKCdjb21tb24ubG9hZGVyX2Vycm9yJyk7XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIHRpdGxlOiBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICByZXR1cm4gJHRyYW5zbGF0ZSgnY29tbW9uLmVycm9yX3RpdGxlJyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgICAgfSk7XHJcbiAgICB9XHJcbiAgfTtcclxuXHJcbiAgJHNjb3BlLmNoYW5nZUxhbmd1YWdlID0gZnVuY3Rpb24gKGxhbmdLZXkpIHtcclxuICAgIGxvY2FsZm9yYWdlLnNldEl0ZW0oJ2xhbmcnLCBsYW5nS2V5KTtcclxuICAgICR0cmFuc2xhdGUudXNlKGxhbmdLZXkpO1xyXG4gIH07XHJcblxyXG4gIGxvY2FsZm9yYWdlLmdldEl0ZW0oXCJsYW5nXCIpXHJcbiAgICAudGhlbihmdW5jdGlvbihjdXJyZW50TGFuZ3VhZ2UpIHtcclxuICAgICAgaWYgKGN1cnJlbnRMYW5ndWFnZSkgJHNjb3BlLmNoYW5nZUxhbmd1YWdlKGN1cnJlbnRMYW5ndWFnZSk7XHJcblxyXG4gICAgICAkdGltZW91dChmdW5jdGlvbigpIHtcclxuICAgICAgICAkc2NvcGUubGFuZ0xvYWRlZCA9IHRydWU7XHJcbiAgICAgIH0pO1xyXG4gICAgfSk7XHJcblxyXG4gICRzY29wZS53ZWxjb21lID0gZnVuY3Rpb24oKSB7XHJcbiAgICAvLyBzaG93IHdlbGNvbWUgbW9kYWxcclxuICAgIHZhciBtb2RhbElucyA9ICR1aWJNb2RhbC5vcGVuKHtcclxuICAgICAgdGVtcGxhdGVVcmw6IFwic2l0ZS90ZW1wbGF0ZXMvbW9kYWwvd2VsY29tZS5odG1sXCIsXHJcbiAgICAgIGNvbnRyb2xsZXI6IFwid2VsY29tZU1vZGFsQ3RybFwiLFxyXG4gICAgICByZXNvbHZlOiB7XHJcbiAgICAgICAgZG9udHNob3dhZ2FpbjogW1wiV2VsY29tZU1lc3NhZ2VcIiwgZnVuY3Rpb24oV2VsY29tZU1lc3NhZ2UpIHtcclxuICAgICAgICAgIHJldHVybiBXZWxjb21lTWVzc2FnZS5za2lwKCk7XHJcbiAgICAgICAgfV1cclxuICAgICAgfVxyXG4gICAgfSk7XHJcbiAgfTtcclxuICAgICBcclxuICAkc2NvcGUub3BlblJlY3ljbGVCaW4gPSBmdW5jdGlvbigpIHtcclxuICAgIC8vIHNob3cgcmVjeWNsZSBiaW4gbW9kYWxcclxuICAgIHZhciBtb2RhbElucyA9ICR1aWJNb2RhbC5vcGVuKHtcclxuICAgICAgdGVtcGxhdGVVcmw6IFwic2l0ZS90ZW1wbGF0ZXMvbW9kYWwvcmVjeWNsZUJpbi5odG1sXCIsXHJcbiAgICAgIGNvbnRyb2xsZXI6IFwicmVjeWNsZUJpbk1vZGFsQ3RybFwiXHJcbiAgICB9KTtcclxuICB9O1xyXG5cclxuXHJcbiAgV2VsY29tZU1lc3NhZ2Uuc2tpcCgpXHJcbiAgICAudGhlbihmdW5jdGlvbihza2lwKSB7XHJcbiAgICAgIGlmICghc2tpcCkgJHNjb3BlLndlbGNvbWUoKTtcclxuICAgIH0pO1xyXG5cclxuICAkc2NvcGUucmVjaXBlID0gUmVjaXBlLnN0YXJ0O1xyXG5cclxuICAkc2NvcGUuYWN0aXZhdGUgPSBmdW5jdGlvbihleGFtcGxlKSB7XHJcbiAgICBpZiAoZXhhbXBsZS50eXBlID09PSBcImluc3RydW1lbnRcInx8ZXhhbXBsZS50eXBlID09PSBcInNvbmdcInx8ZXhhbXBsZS50eXBlID09PSBcInBhdHRlcm5cIikge1xyXG4gICAgICBkb2N1bWVudC5sb2NhdGlvbiA9IFwiIy9lZGl0b3IvXCIgKyAkc2NvcGUucHJvamVjdC5pbmRleC5pZCArIFwiL1wiICtleGFtcGxlLnR5cGUrXCIvXCIrZXhhbXBsZS5pZDtcclxuICAgIH1cclxuICAgIGlmIChleGFtcGxlLnR5cGUgPT09IFwicHJvamVjdFwiKSB7XHJcbiAgICAgIGRvY3VtZW50LmxvY2F0aW9uID0gXCIjL2VkaXRvci9cIiArIGV4YW1wbGUuaWQ7XHJcbiAgICB9XHJcbiAgfTtcclxuXHJcbiAgJHNjb3BlLmtleXdvcmRVcGRhdGVkID0gZm4uZGVib3VuY2UoZnVuY3Rpb24oKSB7XHJcbiAgICBpZiAoY3VycmVudE9ic2VydmVyKSBjdXJyZW50T2JzZXJ2ZXIuY2xvc2UoKTtcclxuICAgIGN1cnJlbnRPYnNlcnZlciA9IEZpbGVSZXBvc2l0b3J5LnNlYXJjaCgkc2NvcGUuc2VhcmNoS2V5d29yZCwge1xyXG4gICAgICBwcm9qZWN0OiAkc2NvcGUucHJvamVjdEZpbHRlciwgdHlwZTogWydpbnN0cnVtZW50JywgJ3BhdHRlcm4nLCAnc29uZycsICdmeCcsICd0ZW1wbyddXHJcbiAgICB9KS5vYnNlcnZlKGZ1bmN0aW9uKGZpbGVzKSB7XHJcbiAgICAgICRzY29wZS5maWxlc1RvdGFsID0gZmlsZXMudG90YWw7XHJcbiAgICAgICRzY29wZS5maWxlcyA9IGZpbGVzLnJlc3VsdHM7XHJcbiAgICB9KTtcclxuICB9LDIwMCk7XHJcblxyXG4gICRzY29wZS5yZW1vdmVQcm9qZWN0ID0gZnVuY3Rpb24oKSB7XHJcbiAgICBGaWxlUmVwb3NpdG9yeS5tb3ZlVG9SZWN5Y2xlQmluKCRzY29wZS5wcm9qZWN0LmluZGV4LmlkKVxyXG4gICAgICAudGhlbihmdW5jdGlvbigpIHtcclxuICAgICAgICBkb2N1bWVudC5sb2NhdGlvbiA9IFwiI1wiO1xyXG4gICAgICB9KVxyXG4gICAgICAuY2F0Y2goZnVuY3Rpb24oZXJyKSB7XHJcbiAgICAgICAgaWYgKGVyci50eXBlICYmIGVyci50eXBlID09PSAnY2FudHJlbW92ZScpIHtcclxuICAgICAgICAgIEVyck1lc3NhZ2UoJ2NvbW1vbi5lcnJvcl90aXRsZScsICdjb21tb24uY2FudHJlbW92ZV9wcm9qZWN0X2Vycm9yJyk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIHRocm93IGVycjtcclxuICAgICAgICB9XHJcbiAgICAgIH0pO1xyXG4gIH07XHJcblxyXG4gICRzY29wZS5leHBvcnRQcm9qZWN0ID0gZnVuY3Rpb24oKSB7XHJcbiAgICBFeHBvcnQuZXhwb3J0UHJvamVjdCgkc2NvcGUucHJvamVjdC5pbmRleC5uYW1lLCAkc2NvcGUucHJvamVjdC5pbmRleC5pZCk7XHJcbiAgfTtcclxuXHJcbiAgJHNjb3BlLnByb2plY3RTZXR0aW5ncyA9IGZ1bmN0aW9uKCkge1xyXG4gICAgJHVpYk1vZGFsLm9wZW4oe1xyXG4gICAgICB0ZW1wbGF0ZVVybDogXCJzaXRlL3RlbXBsYXRlcy9tb2RhbC9wcm9qZWN0U2V0dGluZ3MuaHRtbFwiLFxyXG4gICAgICBjb250cm9sbGVyOiBcInByb2plY3RTZXR0aW5nc01vZGFsQ3RybFwiLFxyXG4gICAgICByZXNvbHZlOiB7XHJcbiAgICAgICAgcHJvamVjdDoge1xyXG4gICAgICAgICAgbmFtZTogJHNjb3BlLnByb2plY3QuaW5kZXgubmFtZSxcclxuICAgICAgICAgIHJlZjogJHNjb3BlLnByb2plY3QuaW5kZXgucmVmXHJcbiAgICAgICAgfSxcclxuICAgICAgICBidXR0b25UZXh0OiBmdW5jdGlvbigpIHsgcmV0dXJuICdjb21tb24ub2snOyB9XHJcbiAgICAgIH1cclxuICAgIH0pLnJlc3VsdC50aGVuKGZ1bmN0aW9uKHByb2plY3QpIHtcclxuICAgICAgJHNjb3BlLnByb2plY3QuaW5kZXgubmFtZSA9IHByb2plY3QubmFtZTtcclxuICAgICAgRmlsZVJlcG9zaXRvcnkudXBkYXRlSW5kZXgoJHNjb3BlLnByb2plY3QuaW5kZXguaWQsIHtcclxuICAgICAgICB0eXBlOiAncHJvamVjdCcsIFxyXG4gICAgICAgIG5hbWU6IHByb2plY3QubmFtZSxcclxuICAgICAgICByZWY6IHByb2plY3QucmVmXHJcbiAgICAgIH0pXHJcbiAgICAgIC50aGVuKGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIHN3aXRjaFByb2plY3QoJHNjb3BlLnByb2plY3QuaW5kZXguaWQpO1xyXG4gICAgICB9KTtcclxuICAgIH0pO1xyXG4gIH07XHJcblxyXG4gICRzY29wZS5uZXdQcm9qZWN0ID0gZnVuY3Rpb24oKSB7XHJcbiAgICAvLyBvcGVuIFwicHJvamVjdCBzZXR0aW5nc1wiIG1vZGFsXHJcbiAgICAkdHJhbnNsYXRlKCdwcm9qZWN0Lm5ldycpLnRoZW4oZnVuY3Rpb24ocHJvamVjdE5hbWUpIHtcclxuICAgICAgJHVpYk1vZGFsLm9wZW4oe1xyXG4gICAgICAgIHRlbXBsYXRlVXJsOiBcInNpdGUvdGVtcGxhdGVzL21vZGFsL3Byb2plY3RTZXR0aW5ncy5odG1sXCIsXHJcbiAgICAgICAgY29udHJvbGxlcjogXCJwcm9qZWN0U2V0dGluZ3NNb2RhbEN0cmxcIixcclxuICAgICAgICByZXNvbHZlOiB7XHJcbiAgICAgICAgICBwcm9qZWN0OiB7bmFtZTogcHJvamVjdE5hbWV9LFxyXG4gICAgICAgICAgYnV0dG9uVGV4dDogZnVuY3Rpb24oKSB7IHJldHVybiAnY29tbW9uLmNyZWF0ZSc7IH1cclxuICAgICAgICB9XHJcbiAgICAgIH0pLnJlc3VsdC50aGVuKGZ1bmN0aW9uKHByb2plY3QpIHtcclxuICAgICAgICBGaWxlUmVwb3NpdG9yeS5jcmVhdGVGaWxlKHt0eXBlOiAncHJvamVjdCcsIG5hbWU6IHByb2plY3QubmFtZSwgcmVmOiBwcm9qZWN0LnJlZn0pXHJcbiAgICAgICAgICAudGhlbihmdW5jdGlvbihpZCkge1xyXG4gICAgICAgICAgICBkb2N1bWVudC5sb2NhdGlvbj1cIiMvZWRpdG9yL1wiICsgaWQ7XHJcbiAgICAgICAgICB9KTtcclxuICAgICAgfSk7XHJcbiAgICB9KTtcclxuICB9O1xyXG5cclxuICAkc2NvcGUub3BlblByb2plY3QgPSBmdW5jdGlvbigpIHtcclxuICAgICR1aWJNb2RhbC5vcGVuKHtcclxuICAgICAgdGVtcGxhdGVVcmw6IFwic2l0ZS90ZW1wbGF0ZXMvbW9kYWwvb3BlblByb2plY3QuaHRtbFwiLFxyXG4gICAgICBjb250cm9sbGVyOiBcIm9wZW5Qcm9qZWN0TW9kYWxDdHJsXCJcclxuICAgIH0pLnJlc3VsdC50aGVuKGZ1bmN0aW9uKGlkKSB7XHJcbiAgICAgIHZhciBtb3JlSW1wb3J0YW50ID0gZnVuY3Rpb24oZmlsZTEsIGZpbGUyKSB7XHJcbiAgICAgICAgaWYgKGZpbGUxLnR5cGUgIT09IGZpbGUyLnR5cGUpIHtcclxuICAgICAgICAgIGlmIChmaWxlMS50eXBlPT09J3NvbmcnKSByZXR1cm4gZmlsZTE7XHJcbiAgICAgICAgICBpZiAoZmlsZTIudHlwZT09PSdzb25nJykgcmV0dXJuIGZpbGUyO1xyXG5cclxuICAgICAgICAgIGlmIChmaWxlMS50eXBlPT09J3BhdHRlcm4nKSByZXR1cm4gZmlsZTE7XHJcbiAgICAgICAgICBpZiAoZmlsZTIudHlwZT09PSdwYXR0ZXJuJykgcmV0dXJuIGZpbGUyO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICByZXR1cm4gKGZpbGUxLnJlZnx8W10pLmxlbmd0aCA+IChmaWxlMi5yZWZ8fFtdKS5sZW5ndGggPyBmaWxlMSA6IGZpbGUyO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIGZpbGUyO1xyXG4gICAgICB9O1xyXG5cclxuICAgICAgLy8gc3dpdGNoIHRvIG1haW4gb2JqZWN0XHJcbiAgICAgIHJldHVybiBGaWxlUmVwb3NpdG9yeS5nZXRQcm9qZWN0RmlsZXMoaWQpXHJcbiAgICAgICAgLnRoZW4oZnVuY3Rpb24oZmlsZXMpIHtcclxuICAgICAgICAgIGlmIChmaWxlcy5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgIHZhciBiZXR0ZXIgPSBmaWxlcy5yZWR1Y2UobW9yZUltcG9ydGFudCwgZmlsZXNbMF0pO1xyXG4gICAgICAgICAgICBpZiAoYmV0dGVyICYmIGJldHRlci50eXBlICE9PSAncHJvamVjdCcpIHtcclxuICAgICAgICAgICAgICBkb2N1bWVudC5sb2NhdGlvbiA9IFwiIy9lZGl0b3IvXCIgKyBpZCArIFwiL1wiICsgYmV0dGVyLnR5cGUrXCIvXCIrYmV0dGVyLmlkO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgIGRvY3VtZW50LmxvY2F0aW9uID0gXCIjL2VkaXRvci9cIiArIGlkO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBkb2N1bWVudC5sb2NhdGlvbiA9IFwiIy9lZGl0b3IvXCIgKyBpZDtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH0pO1xyXG4gIH07XHJcblxyXG4gICRzY29wZS5uZXdJbnN0cnVtZW50ID0gZnVuY3Rpb24oKSB7XHJcbiAgICAkdHJhbnNsYXRlKFwiY29tbW9uLm5ld19pbnN0cnVtZW50XCIpXHJcbiAgICAgIC50aGVuKGZ1bmN0aW9uKG5hbWUpIHtcclxuICAgICAgICByZXR1cm4gRmlsZVJlcG9zaXRvcnkuY3JlYXRlRmlsZSh7XHJcbiAgICAgICAgICB0eXBlOiBcImluc3RydW1lbnRcIixcclxuICAgICAgICAgIG5hbWU6IG5hbWUsXHJcbiAgICAgICAgICBwcm9qZWN0OiAkc2NvcGUucHJvamVjdC5pbmRleC5pZFxyXG4gICAgICAgIH0pO1xyXG4gICAgICB9KVxyXG4gICAgICAudGhlbihmdW5jdGlvbihpZCkge1xyXG4gICAgICAgIGRvY3VtZW50LmxvY2F0aW9uID0gXCIjL2VkaXRvci9cIiArICRzY29wZS5wcm9qZWN0LmluZGV4LmlkICsgXCIvaW5zdHJ1bWVudC9cIiArIGlkO1xyXG4gICAgICB9KVxyXG4gICAgICAuY2F0Y2goZnVuY3Rpb24oZXJyKSB7XHJcbiAgICAgICAgZGVidWdnZXI7XHJcbiAgICAgIH0pO1xyXG4gIH07XHJcblxyXG4gICRzY29wZS5uZXdTb25nID0gZnVuY3Rpb24oKSB7XHJcbiAgICAkdHJhbnNsYXRlKFwiY29tbW9uLm5ld19zb25nXCIpXHJcbiAgICAgIC50aGVuKGZ1bmN0aW9uKG5hbWUpIHtcclxuICAgICAgICByZXR1cm4gRmlsZVJlcG9zaXRvcnkuY3JlYXRlRmlsZSh7XHJcbiAgICAgICAgICB0eXBlOiBcInNvbmdcIiwgXHJcbiAgICAgICAgICBuYW1lOiBuYW1lLFxyXG4gICAgICAgICAgcHJvamVjdDogJHNjb3BlLnByb2plY3QuaW5kZXguaWRcclxuICAgICAgICB9KTtcclxuICAgICAgfSlcclxuICAgICAgLnRoZW4oZnVuY3Rpb24oaWQpIHtcclxuICAgICAgICBkb2N1bWVudC5sb2NhdGlvbiA9IFwiIy9lZGl0b3IvXCIgKyAkc2NvcGUucHJvamVjdC5pbmRleC5pZCArIFwiL3NvbmcvXCIraWQ7XHJcbiAgICAgIH0pO1xyXG4gIH07XHJcblxyXG4gICRzY29wZS5uZXdQYXR0ZXJuID0gZnVuY3Rpb24oKSB7XHJcbiAgICAkdHJhbnNsYXRlKFwiY29tbW9uLm5ld19wYXR0ZXJuXCIpXHJcbiAgICAgIC50aGVuKGZ1bmN0aW9uKG5hbWUpIHtcclxuICAgICAgICByZXR1cm4gRmlsZVJlcG9zaXRvcnkuY3JlYXRlRmlsZSh7XHJcbiAgICAgICAgICB0eXBlOiBcInBhdHRlcm5cIixcclxuICAgICAgICAgIG5hbWU6IG5hbWUsXHJcbiAgICAgICAgICBwcm9qZWN0OiAkc2NvcGUucHJvamVjdC5pbmRleC5pZFxyXG4gICAgICAgIH0pO1xyXG4gICAgICB9KVxyXG4gICAgICAudGhlbihmdW5jdGlvbihpZCkge1xyXG4gICAgICAgIGRvY3VtZW50LmxvY2F0aW9uID0gXCIjL2VkaXRvci9cIiArICRzY29wZS5wcm9qZWN0LmluZGV4LmlkICsgXCIvcGF0dGVybi9cIitpZDtcclxuICAgICAgfSk7XHJcbiAgfTtcclxuXHJcblxyXG4gICRzY29wZS5hYm91dCA9IGZ1bmN0aW9uKCkge1xyXG4gICAgJHVpYk1vZGFsLm9wZW4oe1xyXG4gICAgICB0ZW1wbGF0ZVVybDogXCJzaXRlL3RlbXBsYXRlcy9tb2RhbC9hYm91dC5odG1sXCIsXHJcbiAgICAgIGNvbnRyb2xsZXI6IFwiaW5mb01vZGFsQ3RybFwiXHJcbiAgICB9KTtcclxuICB9O1xyXG5cclxuICAkc2NvcGUuaGVscCA9IGZ1bmN0aW9uKCkge1xyXG4gICAgJHVpYk1vZGFsLm9wZW4oe1xyXG4gICAgICB0ZW1wbGF0ZVVybDogXCJzaXRlL3RlbXBsYXRlcy9tb2RhbC9oZWxwLmh0bWxcIixcclxuICAgICAgY29udHJvbGxlcjogXCJpbmZvTW9kYWxDdHJsXCJcclxuICAgIH0pO1xyXG4gIH07XHJcblxyXG4gICRzY29wZS50b2RvID0gZnVuY3Rpb24oKSB7XHJcbiAgICAkdWliTW9kYWwub3Blbih7XHJcbiAgICAgIHRlbXBsYXRlVXJsOiBcInRvZG9Nb2RhbC5odG1sXCIsXHJcbiAgICAgIGNvbnRyb2xsZXI6IFwidG9kb01vZGFsQ3RybFwiXHJcbiAgICB9KTtcclxuICB9O1xyXG59XSk7XHJcblxyXG5tdXNpY1Nob3dDYXNlQXBwLmNvbnRyb2xsZXIoXCJ0b2RvTW9kYWxDdHJsXCIsIFtcIiRzY29wZVwiLCBcIiR1aWJNb2RhbEluc3RhbmNlXCIsIGZ1bmN0aW9uKCRzY29wZSwgJHVpYk1vZGFsSW5zdGFuY2UpIHtcclxuICAkc2NvcGUuZGlzbWlzcyA9IGZ1bmN0aW9uKCkge1xyXG4gICAgJHVpYk1vZGFsSW5zdGFuY2UuZGlzbWlzcygpO1xyXG4gIH07XHJcbn1dKTtcclxuXHJcbiIsInZhciBtdXNpY1Nob3dDYXNlQXBwID0gYW5ndWxhci5tb2R1bGUoXCJNdXNpY1Nob3dDYXNlQXBwXCIpO1xyXG5tdXNpY1Nob3dDYXNlQXBwLmNvbnRyb2xsZXIoXCJlcnJvck1vZGFsQ3RybFwiLCBbXCIkc2NvcGVcIiwgXCIkdWliTW9kYWxJbnN0YW5jZVwiLCBcInRleHRcIiwgXCJ0aXRsZVwiLCBmdW5jdGlvbigkc2NvcGUsICR1aWJNb2RhbEluc3RhbmNlLCB0ZXh0LCB0aXRsZSkge1xyXG4gICRzY29wZS50ZXh0ID0gdGV4dDtcclxuICAkc2NvcGUudGl0bGUgPSB0aXRsZTtcclxuICAkc2NvcGUuZGlzbWlzcyA9IGZ1bmN0aW9uKCkge1xyXG4gICAgJHVpYk1vZGFsSW5zdGFuY2UuZGlzbWlzcygpO1xyXG4gIH07XHJcbn1dKTtcclxuXHJcbiIsInZhciBtdXNpY1Nob3dDYXNlQXBwID0gYW5ndWxhci5tb2R1bGUoXCJNdXNpY1Nob3dDYXNlQXBwXCIpO1xyXG5tdXNpY1Nob3dDYXNlQXBwLmNvbnRyb2xsZXIoXCJpbmZvTW9kYWxDdHJsXCIsIFtcIiRzY29wZVwiLCBcIiR1aWJNb2RhbEluc3RhbmNlXCIsIGZ1bmN0aW9uKCRzY29wZSwgJHVpYk1vZGFsSW5zdGFuY2UpIHtcclxuICAkc2NvcGUuZGlzbWlzcyA9IGZ1bmN0aW9uKCkge1xyXG4gICAgJHVpYk1vZGFsSW5zdGFuY2UuZGlzbWlzcygpO1xyXG4gIH07XHJcbn1dKTtcclxuIiwidmFyIG11c2ljU2hvd0Nhc2VBcHAgPSBhbmd1bGFyLm1vZHVsZShcIk11c2ljU2hvd0Nhc2VBcHBcIik7XHJcbm11c2ljU2hvd0Nhc2VBcHAuY29udHJvbGxlcihcIm1pZGlTZXR0aW5nc01vZGFsQ3RybFwiLCBbXCIkc2NvcGVcIiwgXCIkcVwiLCBcIiR0aW1lb3V0XCIsIFwiJHVpYk1vZGFsSW5zdGFuY2VcIiwgXCJNaWRpXCIsIGZ1bmN0aW9uKCRzY29wZSwgJHEsICR0aW1lb3V0LCAkdWliTW9kYWxJbnN0YW5jZSwgTWlkaSkge1xyXG4gIE1pZGkuZ2V0SW5wdXRzKCkudGhlbihmdW5jdGlvbihpbnB1dHMpIHtcclxuICAgICRzY29wZS5pbnB1dHMgPSBpbnB1dHM7XHJcbiAgfSk7XHJcblxyXG4gIE1pZGkuZ2V0Q29uZmlnKCkudGhlbihmdW5jdGlvbihjb25maWcpIHtcclxuICAgICRzY29wZS5jb25maWcgPSBjb25maWc7XHJcbiAgfSk7XHJcblxyXG4gICRzY29wZS51cGRhdGVDb25maWcgPSBmdW5jdGlvbigpIHtcclxuICAgIE1pZGkuc2V0Q29uZmlnKCRzY29wZS5jb25maWcpO1xyXG4gIH07XHJcblxyXG4gICRzY29wZS5kb25lID0gZnVuY3Rpb24oKSB7XHJcbiAgICAkdWliTW9kYWxJbnN0YW5jZS5jbG9zZSgpO1xyXG4gIH07XHJcbn1dKTtcclxuIiwidmFyIG11c2ljU2hvd0Nhc2VBcHAgPSBhbmd1bGFyLm1vZHVsZShcIk11c2ljU2hvd0Nhc2VBcHBcIik7XHJcbm11c2ljU2hvd0Nhc2VBcHAuY29udHJvbGxlcihcIm9wZW5Qcm9qZWN0TW9kYWxDdHJsXCIsIFtcIiRxXCIsIFwiJHNjb3BlXCIsIFwiJHVpYk1vZGFsSW5zdGFuY2VcIiwgJ0ZpbGVSZXBvc2l0b3J5JywgZnVuY3Rpb24oJHEsICRzY29wZSwgJHVpYk1vZGFsSW5zdGFuY2UsIEZpbGVSZXBvc2l0b3J5KSB7XHJcbiAgdmFyIGN1cnJlbnRPYnNlcnZlcjtcclxuICB2YXIgaW1tZWRpYXRlVXBkYXRlU2VhcmNoID0gZnVuY3Rpb24oKSB7XHJcbiAgICBpZiAoY3VycmVudE9ic2VydmVyKSBjdXJyZW50T2JzZXJ2ZXIuY2xvc2UoKTtcclxuICAgIGN1cnJlbnRPYnNlcnZlciA9IEZpbGVSZXBvc2l0b3J5LnNlYXJjaCgkc2NvcGUuc2VhcmNoS2V5d29yZCwge3R5cGU6IFsncHJvamVjdCddfSlcclxuICAgICAgLm9ic2VydmUoZnVuY3Rpb24oZmlsZXMpIHtcclxuICAgICAgICAkc2NvcGUuZmlsZXNUb3RhbCA9IGZpbGVzLnRvdGFsO1xyXG4gICAgICAgICRzY29wZS5maWxlcyA9IGZpbGVzLnJlc3VsdHM7XHJcbiAgICAgIH0pO1xyXG4gIH07XHJcblxyXG4gICRzY29wZS51cGRhdGVTZWFyY2ggPSBmbi5kZWJvdW5jZShpbW1lZGlhdGVVcGRhdGVTZWFyY2gsMjUwKTtcclxuICAkc2NvcGUuY2FuY2VsID0gZnVuY3Rpb24oKSB7XHJcbiAgICAkdWliTW9kYWxJbnN0YW5jZS5kaXNtaXNzKCk7XHJcbiAgfTtcclxuXHJcbiAgJHNjb3BlLnNlbGVjdCA9IGZ1bmN0aW9uKHByb2plY3RJZCkge1xyXG4gICAgJHNjb3BlLnNlbGVjdGVkID0gcHJvamVjdElkO1xyXG4gIH07XHJcblxyXG4gICRzY29wZS5vcGVuID0gZnVuY3Rpb24ocHJvamVjdElkKSB7XHJcbiAgICAkdWliTW9kYWxJbnN0YW5jZS5jbG9zZShwcm9qZWN0SWQpO1xyXG4gIH07XHJcblxyXG4gIGltbWVkaWF0ZVVwZGF0ZVNlYXJjaCgpO1xyXG59XSk7XHJcbiIsInZhciBtdXNpY1Nob3dDYXNlQXBwID0gYW5ndWxhci5tb2R1bGUoXCJNdXNpY1Nob3dDYXNlQXBwXCIpO1xyXG5tdXNpY1Nob3dDYXNlQXBwLmNvbnRyb2xsZXIoXCJwcm9qZWN0U2V0dGluZ3NNb2RhbEN0cmxcIiwgW1wiJHFcIiwgXCIkc2NvcGVcIiwgXCIkdWliTW9kYWxJbnN0YW5jZVwiLCBcIkZpbGVSZXBvc2l0b3J5XCIsIFwicHJvamVjdFwiLCBcImJ1dHRvblRleHRcIiwgZnVuY3Rpb24oJHEsICRzY29wZSwgJHVpYk1vZGFsSW5zdGFuY2UsIEZpbGVSZXBvc2l0b3J5LCBwcm9qZWN0LCBidXR0b25UZXh0KSB7XHJcbiAgdmFyIGN1cnJlbnRPYnNlcnZlcjtcclxuICB2YXIgaW1tZWRpYXRlVXBkYXRlU2VhcmNoID0gZnVuY3Rpb24oKSB7XHJcbiAgICBpZiAoY3VycmVudE9ic2VydmVyKSBjdXJyZW50T2JzZXJ2ZXIuY2xvc2UoKTtcclxuICAgIGN1cnJlbnRPYnNlcnZlciA9IEZpbGVSZXBvc2l0b3J5LnNlYXJjaCgkc2NvcGUuc2VhcmNoS2V5d29yZCwge3R5cGU6IFsncHJvamVjdCddfSlcclxuICAgICAgLm9ic2VydmUoZnVuY3Rpb24oZmlsZXMpIHtcclxuICAgICAgICAkc2NvcGUuZmlsZXNUb3RhbCA9IGZpbGVzLnRvdGFsO1xyXG4gICAgICAgICRzY29wZS5maWxlcyA9IGZpbGVzLnJlc3VsdHM7XHJcbiAgICAgIH0pO1xyXG4gIH07XHJcblxyXG4gICRzY29wZS5wcm9qZWN0ID0gcHJvamVjdDtcclxuICAkc2NvcGUuYnV0dG9uVGV4dCA9IGJ1dHRvblRleHQ7XHJcblxyXG4gIHZhciBnZXRJbmRleCA9IGZ1bmN0aW9uKGlkKSB7XHJcbiAgICByZXR1cm4gRmlsZVJlcG9zaXRvcnkuZ2V0RmlsZShpZClcclxuICAgICAgLnRoZW4oZnVuY3Rpb24oZmlsZSkge1xyXG4gICAgICAgIHJldHVybiBmaWxlLmluZGV4O1xyXG4gICAgICB9KTtcclxuICB9O1xyXG5cclxuICAkc2NvcGUucmVmcyA9IFtdO1xyXG4gICRxLmFsbCgoJHNjb3BlLnByb2plY3QucmVmfHxbXSkubWFwKGdldEluZGV4KSlcclxuICAgIC50aGVuKGZ1bmN0aW9uKHJlZnMpIHtcclxuICAgICAgJHNjb3BlLnJlZnMgPSByZWZzXHJcbiAgICB9KTtcclxuXHJcbiAgJHNjb3BlLnVwZGF0ZVNlYXJjaCA9IGZuLmRlYm91bmNlKGltbWVkaWF0ZVVwZGF0ZVNlYXJjaCwyNTApO1xyXG4gICRzY29wZS5jYW5jZWwgPSBmdW5jdGlvbigpIHtcclxuICAgICR1aWJNb2RhbEluc3RhbmNlLmRpc21pc3MoKTtcclxuICB9O1xyXG5cclxuICAkc2NvcGUuZG9uZSA9IGZ1bmN0aW9uKCkge1xyXG4gICAgJHNjb3BlLnByb2plY3QucmVmID0gJHNjb3BlLnJlZnMubWFwKGdldElkKTtcclxuICAgICR1aWJNb2RhbEluc3RhbmNlLmNsb3NlKCRzY29wZS5wcm9qZWN0KTtcclxuICB9O1xyXG5cclxuICB2YXIgZ2V0SWQgPSBmdW5jdGlvbih4KSB7IHJldHVybiB4LmlkOyB9O1xyXG4gICRzY29wZS5yZW1vdmUgPSBmdW5jdGlvbihmaWxlKSB7XHJcbiAgICAkc2NvcGUucmVmcyA9ICRzY29wZS5yZWZzLmZpbHRlcihmdW5jdGlvbihmKSB7XHJcbiAgICAgIHJldHVybiBmLmlkICE9PSBmaWxlLmlkO1xyXG4gICAgfSk7XHJcbiAgfTtcclxuXHJcbiAgJHNjb3BlLmFkZCA9IGZ1bmN0aW9uKGZpbGUpIHtcclxuICAgIGlmICgkc2NvcGUucmVmcy5tYXAoZ2V0SWQpLmluZGV4T2YoZmlsZS5pZCkgPT09IC0xKSB7XHJcbiAgICAgICRzY29wZS5yZWZzLnB1c2goZmlsZSk7XHJcbiAgICB9XHJcbiAgfTtcclxuXHJcbiAgaW1tZWRpYXRlVXBkYXRlU2VhcmNoKCk7XHJcbn1dKTtcclxuIiwidmFyIG11c2ljU2hvd0Nhc2VBcHAgPSBhbmd1bGFyLm1vZHVsZShcIk11c2ljU2hvd0Nhc2VBcHBcIik7XHJcbm11c2ljU2hvd0Nhc2VBcHAuY29udHJvbGxlcihcInJlY3ljbGVCaW5Nb2RhbEN0cmxcIiwgW1wiJHNjb3BlXCIsIFwiJHRpbWVvdXRcIiwgXCIkdWliTW9kYWxJbnN0YW5jZVwiLCBcIkZpbGVSZXBvc2l0b3J5XCIsIGZ1bmN0aW9uKCRzY29wZSwgJHRpbWVvdXQsICR1aWJNb2RhbEluc3RhbmNlLCBGaWxlUmVwb3NpdG9yeSkge1xyXG4gICRzY29wZS5kaXNtaXNzID0gZnVuY3Rpb24oKSB7XHJcbiAgICAkdWliTW9kYWxJbnN0YW5jZS5kaXNtaXNzKCk7XHJcbiAgfTtcclxuXHJcbiAgdmFyIGltbWVkaWF0ZVVwZGF0ZVNlYXJjaCA9IGZ1bmN0aW9uKCkge1xyXG4gICAgRmlsZVJlcG9zaXRvcnkuc2VhcmNoUmVjeWNsZWQoJHNjb3BlLnNlYXJjaEtleXdvcmQsIHtsaW1pdDogMTB9KVxyXG4gICAgICAudGhlbihmdW5jdGlvbihyZXN1bHRzKSB7XHJcbiAgICAgICAgJHRpbWVvdXQoZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAkc2NvcGUuZmlsZXMgPSByZXN1bHRzLnJlc3VsdHM7XHJcbiAgICAgICAgICAkc2NvcGUuZmlsZXNUb3RhbCA9IHJlc3VsdHMudG90YWw7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH0pXHJcbiAgfTtcclxuXHJcbiAgJHNjb3BlLnVwZGF0ZVNlYXJjaCA9IGZuLmRlYm91bmNlKGltbWVkaWF0ZVVwZGF0ZVNlYXJjaCwyNTApO1xyXG5cclxuICAkc2NvcGUucmVzdG9yZUZyb21SZWN5Y2xlQmluID0gZnVuY3Rpb24oZmlsZSkge1xyXG4gICAgRmlsZVJlcG9zaXRvcnkucmVzdG9yZUZyb21SZWN5Y2xlQmluKGZpbGUuaWQpLnRoZW4oaW1tZWRpYXRlVXBkYXRlU2VhcmNoKTtcclxuICB9O1xyXG5cclxuICBpbW1lZGlhdGVVcGRhdGVTZWFyY2goKTtcclxufV0pO1xyXG5cclxuIiwidmFyIG11c2ljU2hvd0Nhc2VBcHAgPSBhbmd1bGFyLm1vZHVsZShcIk11c2ljU2hvd0Nhc2VBcHBcIik7XHJcbm11c2ljU2hvd0Nhc2VBcHAuY29udHJvbGxlcihcIndlbGNvbWVNb2RhbEN0cmxcIiwgW1wiJHFcIiwgXCIkc2NvcGVcIiwgXCIkdWliTW9kYWxJbnN0YW5jZVwiLCBcIlJlY2lwZVwiLCBcIldlbGNvbWVNZXNzYWdlXCIsIFwiZG9udHNob3dhZ2FpblwiLCBmdW5jdGlvbigkcSwgJHNjb3BlLCAkdWliTW9kYWxJbnN0YW5jZSwgUmVjaXBlLCBXZWxjb21lTWVzc2FnZSwgZG9udHNob3dhZ2Fpbikge1xyXG4gICRzY29wZS5kb250c2hvd2FnYWluID0gZG9udHNob3dhZ2FpbjtcclxuXHJcbiAgdmFyIHNraXBVcGRhdGVkID0gJHEud2hlbihudWxsKTtcclxuICAkc2NvcGUudXBkYXRlU2tpcCA9IGZ1bmN0aW9uKCkge1xyXG4gICAgc2tpcFVwZGF0ZWQgPSBXZWxjb21lTWVzc2FnZS5zZXRTa2lwKCRzY29wZS5kb250c2hvd2FnYWluKTtcclxuICB9O1xyXG5cclxuICAkc2NvcGUuZGlzbWlzcyA9IGZ1bmN0aW9uKCkge1xyXG4gICAgc2tpcFVwZGF0ZWRcclxuICAgICAgLnRoZW4oZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgJHVpYk1vZGFsSW5zdGFuY2UuZGlzbWlzcygpO1xyXG4gICAgICB9KTtcclxuXHJcbiAgfTtcclxuXHJcbiAgJHNjb3BlLnR1dG9yaWFsID0gZnVuY3Rpb24oKSB7XHJcbiAgICBza2lwVXBkYXRlZFxyXG4gICAgICAudGhlbihmdW5jdGlvbigpIHtcclxuICAgICAgICAkdWliTW9kYWxJbnN0YW5jZS5kaXNtaXNzKCk7XHJcbiAgICAgICAgUmVjaXBlLnN0YXJ0KCdpbnRybycpO1xyXG4gICAgICB9KTtcclxuICB9O1xyXG59XSk7XHJcbiJdfQ==
