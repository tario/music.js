<div class="generic-parameter">
Osc type: <select ng-init="file.data.oscillatorType = file.data.oscillatorType || 'square'" ng-model="file.data.oscillatorType" ng-options="type for type in ['square', 'sine', 'sawtooth', 'triangle', 'custom']"></select>

<div ng-if="file.data.oscillatorType == 'custom'">
<h1>Waveform</h1>
<div class="row-fluid" ng-init="file.data.waveform = file.data.waveform || '0'">
  <div class="span1">
    <p class="serie-label">f(t)= </p>
  </div>
  <div class="span7" ng-init="file.data.serie.sin = file.data.serie.sin || '0'">
    <input class="serie" type="text" ng-model="file.data.waveform" ng-change="oscTermsUpdateFromWaveForm(file.data.waveform, file.data.terms, resolution); file.data.serie.sin = '0'; file.data.serie.cos = '0'" />
  </div>
  <div class="span1">
    <p class="serie-label">res= </p>
  </div>
  <div class="span3">
    <input class="serie" type="number" min="8" max="2048" ng-init="resolution=resolution||64" ng-model="resolution" ng-change="oscTermsUpdateFromWaveForm(file.data.waveform, file.data.terms, resolution); file.data.serie.sin = '0'; file.data.serie.cos = '0'"/>
  </div>
</div>

<h1>Serie</h1>
<div class="row-fluid" ng-init="file.data.serie = file.data.serie ||{}">
  <div class="span1">
    <p class="serie-label">a(n)=</p>
  </div>
  <div class="span5" ng-init="file.data.serie.sin = file.data.serie.sin || '0'">
    <input class="serie" type="text" ng-model="file.data.serie.sin" ng-change="oscTermsUpdate(file.data.serie.sin, file.data.terms.sin); file.data.waveform = '0'" />
  </div>
  <div class="span1">
    <p class="serie-label">b(n)=</p>
  </div>
  <div class="span5" ng-init="file.data.serie.cos = file.data.serie.cos || '0'">
    <input class="serie" type="text" ng-model="file.data.serie.cos" ng-change="oscTermsUpdate(file.data.serie.cos, file.data.terms.cos)" />
  </div>
</div>

<h1>Terms</h1>
<div class="row-fluid">
  <div class="span1">
    <table class="terms">
      <thead>
        <tr>
          <td class="fixed-header">...</td>
        </tr>
      </thead>
      <tbody ng-init="file.data.terms = file.data.terms ||{}">
        <tr ng-init="file.data.terms[key] = file.data.terms[key] || []" ng-repeat="key in ['sin', 'cos']">
          <td class="fixed-header">{{key}}</td>
        </tr>
      </tbody>
    </table>
  </div>
  <div class="span11 allow-scroll-x">
    <table class="terms">
      <thead>
        <tr>
          <td class="cell" ng-repeat="index in range(1,256)">{{index}}</td>
        </tr>
      </thead>
      <tbody ng-init="file.data.terms = file.data.terms ||{}">
        <tr ng-init="file.data.terms[key] = file.data.terms[key] || []" ng-repeat="key in ['sin', 'cos']">
          <td class="cell" ng-init="file.data.terms[key][index] = file.data.terms[key][index] || 0" ng-repeat="index in range(1,256)"><input ng-change="termschanged()" type="number" step="any" class="factorinput" ng-model='file.data.terms[key][index]' /></td>
        </tr>
      </tbody>
    </table>
  </div>
</div>

<div class="row-fluid">
  <div class="span2">
  </div>
  <div class="span8">
    <custom-osc-graph terms="file.data.terms"></custom-osc-graph>
  </div>
</div>

</div>

<br/>
<input type="checkbox" class="regular-checkbox showable-switch" ng-model="file.data.fixed_frequency" /> Fixed frequency
<div class="showable margin10 inlinetable">
<input type="text" class="hzinput" ng-model='file.data.frequency' />
hz
</div>

<div ng-repeat="modulation in modulations">
<h1>{{modulation.name}} modulation</h1>
<div class="music-object-editor" music-stack init-file="modulation.value"></div>
</div>

</div>
