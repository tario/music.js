<input class="span6" ng-change="indexChanged()" ng-model="fileIndex.name"/>
<div class="pattern-main-window">
  <div class="row-fluid">
      <div class="span3">
        <p class="serie-label">Measure beats</p>
      </div>
      <div class="span1">
        <input type="number" class="smallinput" min=1 max=50 ng-model="file.measure" ng-change="fileChanged()"/>
      </div>
  </div>
  <div class="row-fluid">
      <div class="span3">
        <p class="serie-label">Measure count</p>
      </div>
      <div class="span1">
        <input type="number" class="smallinput" min=1 max=16 ng-model="file.measureCount" ng-change="fileChanged()"/>
      </div>
  </div>
  <div class="row-fluid">
      <div class="span3">
        <p class="serie-label">Zoom level</p>
      </div>
      <div class="span2">
        <div class="row-fluid">
          <div class="span4">
            <p class="serie-label"><a href="" ng-click="zoomOut()">-</a></p>
          </div>
          <div class="span4">
            <p class="serie-label">{{zoomLevel}}x</p>
          </div>
          <div class="span4">
            <p class="serie-label"><a href="" ng-click="zoomIn()">+</a></p>
          </div>
        </div>
      </div>
  </div>

  <hr class="soften"></hr>

  <div class="row-fluid" ng-class="{'enabled-instrument': file.track[0].instrument}" >
      <div class="span2">
      <!-- Instrument drop zone -->
          <div class="pattern-drop-lateral" ng-drop="true" ng-drop-success="onDropComplete($data,$event)">
            <span ng-show="file.track[0].instrument" class="fa fa-keyboard-o"></span>
            <p>{{file.track[0].instrument ? file.track[0].instrument.name : "drop instrument here" }}</p>
          </div>
      </div>  

      <div class="span10">
        <music-event-editor 
          measure-count="file.measureCount"
          measure="file.measure"
          track="file.track[0]"
          beat-width="beatWidth"
          zoom-level="zoomLevel"></music-event-editor>
<!--
        <div class="event-area-container">    
          <div class="event-area" ng-style="{width: file.measureCount*file.measure*beatWidth*zoomLevel + 'px'}">
            <div class="overlay zebra">

            </div>
            <div class="overlay innergrid">
              
            </div>
            <div class="overlay maingrid" ng-style="mainGridStyle">

            </div>
            <div class="overlay event-list" ng-mousedown="mouseDown($event)" ng-mousemove="mouseMove($event)" ng-mouseup="mouseUp($event)" ng-mouseleave="mouseLeave($event)">
              <div 
                draggable="false"
                ng-repeat="evt in file.track[0].events" 
                class="note" ng-class="{selected: selected===evt}"
                ng-style="{'width': evt.l*zoomLevel*beatWidth/100+'px', 'left':evt.s*zoomLevel*beatWidth/100+'px', 'bottom': evt.n*20+'px'}"
                >
                <div class="overlay">{{noteName(evt.n)}}</div>
                <div class="drag-event-section" ng-style="{'width': (evt.l*zoomLevel*beatWidth/100-5)+'px', 'height':'20px'}"
                  draggable="false"
                  ng-mousedown="mouseDownEvent(evt, 0, $event)"
                  ng-mouseup="mouseUpEvent(evt, 0)">
                </div>
                <div class="resize-section"
                  draggable="false"
                  ng-mousedown="mouseDownResizeEvent(evt, 0, $event)"
                  ng-mouseup="mouseUpResizeEvent(evt, 0)">
                </div>
              </div>
            </div>
          </div>
        </div>
-->        
      </div>  
  </div>
</div>