<input class="span6" ng-change="indexChanged()" ng-model="fileIndex.name"/>
<div class="pattern-main-window">
  <div class="row-fluid">
    <div class="span6">
      <div class="row-fluid">
          <div class="span6">
            <p class="serie-label">Measure beats</p>
          </div>
          <div class="span2">
            <input type="number" class="smallinput" min=1 max=50 ng-model="file.measure" ng-change="fileChanged()"/>
          </div>

      </div>
      <div class="row-fluid">
          <div class="span6">
            <p class="serie-label">Measure count</p>
          </div>
          <div class="span2">
            <p class="serie-label">{{file.measureCount}}</p>
          </div>
      </div>
      <div class="row-fluid">
          <div class="span6">
            <p class="serie-label">Zoom level</p>
          </div>
          <div class="span2">
            <input type="number" class="smallinput" min=1 max=32 ng-model="zoomLevel"/>
          </div>
      </div>
    </div>
    <div class="span6 player-controls pull-right">
      <div class="row-fluid">
        <button class="player btn btn-primary" ng-click="play()">
          Play
        </button>
        <button class="player btn btn-primary" ng-click="stop()">
          Stop
        </button>
      </div>
      <div class="row-fluid"> 
          <div class="span1 pull-right"></div>
          <div class="span3 pull-right">
            <input type="number" class="smallinput" min=1 ng-model="file.bpm"  ng-change="fileChanged()"/>
          </div>
          <div class="span2 pull-right">
            <p class="serie-label">Bpm</p>
          </div>
      </div>
    </div>
  </div>

  <hr class="soften"></hr>

  <h1>Tracks</h1>


  <div ng-repeat="track in file.tracks">
    <div class="row-fluid">
      <div class="vertical-margin span2">
        <button ng-click="removeTrack($index)" class="btn btn-primary">Remove</button>
      </div>
      <div class="vertical-margin span10">
        <div class="track-compact-view-wrapper" ng-class="{selected: file.selectedTrack === $index}"
            ng-click="file.selectedTrack = $index">
          <pattern-track-compact-view
            measure-count="file.measureCount"
            measure="file.measure"
            track="file.tracks[$index]"
            beat-width="beatWidth"
            zoom-level="zoomLevel"></pattern-track-compact-view>
        </div>
      </div>
    </div>
    <div class="row-fluid" ng-if="file.selectedTrack == $index" ng-class="{'enabled-instrument': file.tracks[file.selectedTrack].instrument}" >
        <div class="span2">
        <!-- Instrument drop zone -->
            <div class="pattern-drop-lateral" ng-drop="true" ng-drop-success="onDropComplete($data,$event)">
              <span ng-show="file.tracks[file.selectedTrack].instrument" class="fa fa-keyboard-o"></span>
              <p>{{file.tracks[file.selectedTrack].instrument ? file.tracks[file.selectedTrack].instrument.name : "drop instrument here" }}</p>
            </div>
        </div>  

        <div class="span10">
          <music-event-editor 
            measure-count="file.measureCount"
            measure="file.measure"
            track="file.tracks[file.selectedTrack]"
            beat-width="beatWidth"
            zoom-level="zoomLevel"></music-event-editor>   
        </div>
    </div>
  </div>

  <div class="row-fluid margin-top-20">
    <div class="span2">
      <button ng-click="addTrack()" class="btn btn-primary">Add</button>
    </div>
  </div>


</div>