<head>
<script src="lib/angular.min.js"></script>

<script src="lib/codemirror.js"></script>
<script src="lib/codemirror/mode/javascript.js"></script>
<script src="lib/angular/ui-codemirror.js"></script>

<script src="site/controllers.js"></script>
<script src="src/music.js"></script>
<script src="src/music/instruments.js"></script>
<script src="src/music/effects.js"></script>
<script src="src/soundfont/accordion-ogg.js"></script>
<script src="src/soundfont/acoustic_grand_piano-ogg.js"></script>

<link rel="stylesheet" href="css/codemirror.css">

<p> Use ZXCVBNM keys for keyboard </p>
<script>

(function() {

    var notes = {};
    var keyCodeToNote = {
            90: 'C', 83: 'C#', 88: 'D',  68: 'D#', 67: 'E',
            86: 'F', 71: 'F#', 66: 'G', 72: 'G#', 78: 'A', 
            74: 'A#', 77: 'B'};

    window.onkeydown = function(e) {
        var n = notes[e.keyCode];
        if (n) return;

        var note = instrument.note(MUSIC.noteToNoteNum(keyCodeToNote[e.keyCode]));
        if (note == undefined) return;
        notes[e.keyCode] = note.play();
    };
    window.onkeyup = function(e) {
        var n = notes[e.keyCode];
        if (!n) return;
        notes[e.keyCode] = undefined;
        n.stop();
    };

})();

</script>
</head>
<body>

<div ng-app="MusicShowCaseApp">
    <div ng-controller="MainController">

        <textarea ui-codemirror="editorOptions" ng-model="code"></textarea>
        <input type="button" value="Run" ng-click="run()"></input>
    </div>
</div>
</body>
